@use '@angular/material' as mat;
@use '../utils';
@use '../vars';

@mixin overrides() {
  @include mat.form-field-overrides(
    (
      container-height: 3rem,

      filled-container-color: vars.$surface-container,
      filled-with-label-container-padding-top: 1.25rem,
      filled-with-label-container-padding-bottom: 0.25rem,
      filled-label-text-font: vars.$label-small,
      filled-label-text-color: vars.$primary-fixed,
      filled-focus-label-text-color: vars.$tertiary,
      filled-focus-active-indicator-color: vars.$tertiary,
      filled-disabled-label-text-color: rgb(from vars.$on-surface r g b / 38%),
      focus-select-arrow-color: vars.$tertiary,

      outlined-label-text-font: vars.$label-small,
      outlined-label-text-color: vars.$primary-fixed,
      outlined-focus-label-text-color: vars.$tertiary,
      outlined-disabled-label-text-color: rgb(from vars.$on-surface r g b / 38%),
    )
  );

  mat-form-field.mat-mdc-form-field-type-mat-select {
    mat-label {
      letter-spacing: vars.$label-small-tracking;
    }

    mat-select {
      .mat-mdc-select-value-text .mat-mdc-select-min-line {
        font: vars.$label-medium;
        letter-spacing: vars.$label-medium-tracking;
      }

      &.mat-focused .mat-mdc-select-value-text .mat-mdc-select-min-line {
        color: vars.$primary-fixed;
      }
    }
  }

  @include mat.select-overrides(
    (
      panel-background-color: vars.$on-primary,
      container-elevation-shadow: 0px 5px 4px 0px rgb(from vars.$shadow r g b / 0.16),
    )
  );

  @include mat.option-overrides(
    (
      focus-state-layer-color: color-mix(in srgb, vars.$on-surface 4%, transparent),
      hover-state-layer-color: color-mix(in srgb, vars.$on-surface 4%, transparent),
      // hover-state-layer-color: color-mix(in srgb, vars.$on-surface 8%, transparent), THIS IS ACTIVE
      label-text-color: vars.$primary-container,
      label-text-line-height: 3.5rem,
      label-text-font: vars.$label-large,
      selected-state-label-text-color: vars.$secondary,
      selected-state-layer-color: color-mix(in srgb, vars.$on-tertiary-container 8%, transparent),
    )
  );

  mat-option.mat-mdc-option {
    margin-bottom: 0.5px;

    &:focus-visible {
      outline: 2px solid vars.$tertiary;
    }

    @include mat.core-overrides(
      (
        pseudo-checkbox-minimal-selected-checkmark-color: vars.$on-tertiary-container,
      )
    );

    &.mat-mdc-option-active {
      outline: 1px solid color-mix(in srgb, vars.$on-surface 32%, transparent);
    }
  }
}
