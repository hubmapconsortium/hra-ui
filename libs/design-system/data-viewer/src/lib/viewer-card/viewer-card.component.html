<div class="object">
  @if (variant() === 'ftu') {
    <img
      class="viewer-image"
      aria-hidden="true"
      [alt]="viewerCardData().alt"
      [src]="viewerCardData().png"
      (click)="openImageViewer(imageContent)"
      (keyup.enter)="openImageViewer(imageContent)"
    />
    <ng-container [ngTemplateOutlet]="imageContent"> </ng-container>
  }

  @if (variant() === '3d-organ') {
    <model-viewer
      class="model-viewer"
      [alt]="viewerCardData().alt"
      [src]="viewerCardData().threeDimImage"
      shadow-intensity="1"
      camera-controls
      auto-rotate
    >
    </model-viewer>
  }
</div>

<ng-container [ngTemplateOutlet]="objectMenu"> </ng-container>

<ng-template #imageContent>
  <div class="dialog-container">
    <div class="dialog-header">
      <ng-container [ngTemplateOutlet]="objectMenu"> </ng-container>
      <div class="filler"></div>
      <button mat-icon-button>
        <mat-icon (click)="close()">clear</mat-icon>
      </button>
    </div>
    <div class="img-container">
      <img class="dialog-image" [src]="viewerCardData().svg" [alt]="viewerCardData().alt" />
    </div>
  </div>
</ng-template>

<ng-template #objectMenu>
  <div class="object-menu">
    <span class="tagline">{{ viewerCardData().name }}</span>
    <button
      mat-icon-button
      [matMenuTriggerFor]="cardMenu.menu()"
      hraIconButtonSize="large"
      aria-label="Open the card's menu"
      hraMicroTooltip="More"
    >
      <mat-icon>more_vert</mat-icon>
    </button>
    <hra-card-menu #cardMenu [variant]="variant()" [viewerCardData]="viewerCardData()"></hra-card-menu>
  </div>
</ng-template>
