@if (variant() === 'ftu') {
  <button
    mat-button
    class="image-button"
    hraFeature="image"
    hraClickEvent
    disableRipple
    (click)="openImageViewer(fullscreen)"
  >
    <img class="viewer-image" [attr.src]="viewerCardData().fileUrl" [attr.alt]="alt()" />
  </button>
} @else {
  <model-viewer
    class="model-viewer"
    hraFeature="model"
    [attr.src]="viewerCardData().fileUrl"
    [attr.alt]="alt()"
    shadow-intensity="1"
    camera-controls
    auto-rotate
  >
  </model-viewer>
}

<ng-container [ngTemplateOutlet]="objectMenu" />

<ng-template #fullscreen>
  <div class="dialog-container" hraFeature="fullscreen">
    <div class="dialog-header">
      <ng-container [ngTemplateOutlet]="objectMenu" />
      <div class="filler"></div>
      <button
        mat-icon-button
        matDialogClose
        hraFeature="close"
        hraClickEvent
        class="close"
        alt="Close fullscreen image viewer"
      >
        <mat-icon>clear</mat-icon>
      </button>
    </div>
    <div class="img-container">
      <img class="dialog-image" [attr.src]="viewerCardData().fullscreenUrl" [attr.alt]="alt()" />
    </div>
  </div>
</ng-template>

<ng-template #objectMenu>
  <div class="object-menu" hraFeature="menu">
    <span class="tagline">{{ viewerCardData().label }}</span>
    <button
      mat-icon-button
      hraClickEvent
      [matMenuTriggerFor]="cardMenu.menu()"
      hraIconButtonSize="large"
      aria-label="Open the card's menu"
      hraPlainTooltip="More"
    >
      <mat-icon>more_vert</mat-icon>
    </button>
    <hra-card-menu [card]="viewerCardData()" #cardMenu />
  </div>
</ng-template>
