(self.webpackChunkhra_ui=self.webpackChunkhra_ui||[]).push([[6905],{"./libs/common/analytics/events/src/lib/event.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var EventCategory;function createEvent(type,category,trigger){return{type,category,trigger}}__webpack_require__.d(__webpack_exports__,{h:()=>EventCategory,l:()=>createEvent}),function(EventCategory){EventCategory.Necessary="necessary",EventCategory.Statistics="statistics",EventCategory.Preferences="preferences",EventCategory.Marketing="marketing"}(EventCategory||(EventCategory={}))},"./libs/common/analytics/src/lib/consent/consent.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{e:()=>ConsentService});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs"),_hra_ui_common_analytics_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./libs/common/analytics/events/src/lib/event.ts");function createCategoryPreferences(enabled){return Object.values(_hra_ui_common_analytics_events__WEBPACK_IMPORTED_MODULE_3__.h).reduce((acc,category)=>(acc[category]=enabled,acc),{})}const ALL_CATEGORIES_ENABLED=createCategoryPreferences(!0),ALL_CATEGORIES_DISABLED=createCategoryPreferences(!1),ALWAYS_ENABLED_CATEGORIES={[_hra_ui_common_analytics_events__WEBPACK_IMPORTED_MODULE_3__.h.Necessary]:!0},INITIAL_CATEGORY_SETTINGS={...ALL_CATEGORIES_DISABLED,...ALWAYS_ENABLED_CATEGORIES};let ConsentService=class ConsentService{categories_=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.vPA)(INITIAL_CATEGORY_SETTINGS);categories=this.categories_.asReadonly();isCategoryEnabled(category){return this.categories()[category]}isEventEnabled(_type,category){return void 0!==category&&this.isCategoryEnabled(category)}enableAllCategories(){this.categories_.set(ALL_CATEGORIES_ENABLED)}disableAllCategories(){this.categories_.set(INITIAL_CATEGORY_SETTINGS)}updateCategories(updates){this.categories_.update(current=>({...current,...updates,...ALWAYS_ENABLED_CATEGORIES}))}enableCategory(category){this.updateCategories({[category]:!0})}disableCategory(category){this.updateCategories({[category]:!1})}};ConsentService=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__._qm)({providedIn:"root"})],ConsentService)},"./libs/common/analytics/src/lib/event/event.directive.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{GP:()=>ClickEventDirective,Fq:()=>DoubleClickEventDirective,gf:()=>EventDirective,YV:()=>HoverEventDirective,zB:()=>KeyboardEventDirective,NP:()=>ModelChangeEventDirective});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),root_effect_scheduler=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),debug_node=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs"),resource=__webpack_require__("./node_modules/@angular/core/fesm2022/resource.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),rxjs_interop=__webpack_require__("./node_modules/@angular/core/fesm2022/rxjs-interop.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),lib_event=__webpack_require__("./libs/common/analytics/events/src/lib/event.ts");const CoreEvents={Click:(0,lib_event.l)("click",lib_event.h.Statistics,"click"),DoubleClick:(0,lib_event.l)("doubleClick",lib_event.h.Statistics,"dblclick"),Error:(0,lib_event.l)("error",lib_event.h.Necessary),Hover:(0,lib_event.l)("hover",lib_event.h.Statistics,"mouseenter"),Keyboard:(0,lib_event.l)("keyboard",lib_event.h.Statistics,"keydown"),ModelChange:(0,lib_event.l)("modelChange",lib_event.h.Statistics),PageView:(0,lib_event.l)("pageView",lib_event.h.Statistics)};var skip=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/skip.js"),lib=__webpack_require__("./node_modules/qs/lib/index.js");function pick(obj,keys){return keys.reduce((acc,key)=>(acc[key]=obj[key],acc),{})}function filterFalse(obj){const result={};for(const key in obj)!1!==obj[key]&&(result[key]=obj[key]);return result}function limitStackTrace(stack,maxLength){if(stack.length<=maxLength)return stack;const lines=[];let total=19;for(const line of stack.split("\n")){const newTotal=total+line.length+1;newTotal<maxLength&&(lines.push(line),total=newTotal)}return lines.push("Stack truncated..."),lines.join("\n")}var ngxtension_create_injection_token=__webpack_require__("./node_modules/ngxtension/fesm2022/ngxtension-create-injection-token.mjs");const TELEMETRY_ENDPOINT=(0,ngxtension_create_injection_token.j)(()=>{const url="https://cdn.humanatlas.io/tr"+((0,core.isDevMode)()?"-dev":"");return(0,root_effect_scheduler.vPA)(url)}),TELEMETRY_PARAMETER_FILTERS=(0,ngxtension_create_injection_token.L)("Parameter filter",{multi:!0,isFunctionValue:!0}),injectTelemetryEndpoint=TELEMETRY_ENDPOINT[0],injectTelemetryParameterFilters=(TELEMETRY_ENDPOINT[1],TELEMETRY_PARAMETER_FILTERS[0]);TELEMETRY_PARAMETER_FILTERS[1];let TelemetryService=class TelemetryService{endpoint=injectTelemetryEndpoint();filters=injectTelemetryParameterFilters({optional:!0})??[];send(data,doFetch=fetch){doFetch(`${this.endpoint()}?${this.stringify(data)}`,{method:"GET",cache:"no-store",keepalive:!0})}stringify(data){return(0,lib.stringify)(data,{allowDots:!0,arrayFormat:"indices",skipNulls:!0,filter:(prefix,value)=>{for(const filter of this.filters){const result=filter(prefix,value);if(result!==value)return result}return function serialize(value){if("object"!=typeof value||null===value)return value;if(value instanceof Date)return value.toISOString();if(value instanceof Error){const obj=pick(value,["name","message","stack"]);return{...obj,stack:obj.stack&&limitStackTrace(obj.stack,4e3)}}if(!(value instanceof Event))return value instanceof Map?{map:[...value]}:value instanceof Set?{set:[...value]}:value;if(value instanceof ErrorEvent)return pick(value,["message","filename","lineno","colno"]);if(value instanceof KeyboardEvent)return filterFalse(pick(value,["key","altKey","ctrlKey","metaKey","shiftKey","repeat"]));if(value instanceof MouseEvent){const props=pick(value,["button","buttons","altKey","ctrlKey","metaKey","shiftKey"]),{type,currentTarget:el}=value,targetProps="click"===type&&el instanceof HTMLAnchorElement?function pickAttributes(el,attributes){return attributes.reduce((acc,attr)=>{const value=el.getAttribute(attr);return null!==value&&(acc[attr]=value),acc},{})}(el,["href","type","target","download"]):{};return filterFalse({...props,...targetProps})}}(value)}})}};function hraAnalyticsPlugin(config){(0,root_effect_scheduler.Af3)(hraAnalyticsPlugin);const telemetry=(0,root_effect_scheduler.WQX)(TelemetryService);return{name:"hra-analytics",config,page({config:config_,instance,payload}){telemetry.send(buildEventData(instance,config_,CoreEvents.PageView.type,payload.properties))},track({config:config_,instance,payload:{event,properties}}){telemetry.send(buildEventData(instance,config_,event,properties))}}}function buildEventData(instance,config,event,props){const{trigger,triggerData}=props;let path;return event!==CoreEvents.PageView.type&&(path=props.path,delete(props={...props}).path,delete props.trigger,delete props.triggerData),{sv:0,sessionId:config.sessionId,app:instance.getState("context.app"),version:instance.getState("context.version"),event,path,trigger,triggerData,e:props}}TelemetryService=(0,tslib_es6.Cg)([(0,debug_node._qm)({providedIn:"root"})],TelemetryService);var common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs");function hraEventFilterPlugin(config){(0,root_effect_scheduler.Af3)(hraEventFilterPlugin);const isBrowser=(0,common.UE)((0,root_effect_scheduler.WQX)(debug_node.Agw)),{isEventEnabled}=config,abortIfDisabled=(type,category,abort)=>{if(!isBrowser||!isEventEnabled(type,category))return abort(`Event '${type}' is disabled`)};return{name:"hra-event-filter",config:{},pageStart({abort}){const{type,category}=CoreEvents.PageView;return abortIfDisabled(type,category,abort)},identifyStart:({abort})=>abort("Identify disabled"),trackStart({abort,payload}){const{event:type,options:{category}}=payload;return abortIfDisabled(type,category,abort)}}}var app_configuration=__webpack_require__("./libs/common/injectors/src/lib/app-configuration.ts"),analytics_browser_es=__webpack_require__("./node_modules/analytics/lib/analytics.browser.es.js"),index_browser=__webpack_require__("./node_modules/nanoid/index.browser.js"),store2=__webpack_require__("./node_modules/store2/dist/store2.js"),store2_default=__webpack_require__.n(store2),consent_service=__webpack_require__("./libs/common/analytics/src/lib/consent/consent.service.ts"),feature_directive=__webpack_require__("./libs/common/analytics/src/lib/feature/feature.directive.ts");const PLUGINS=(0,ngxtension_create_injection_token.L)("Analytics plugins",{multi:!0}),injectPlugins=PLUGINS[0];PLUGINS[1];function injectLogEvent(){(0,root_effect_scheduler.Af3)(injectLogEvent);const analytics=(0,root_effect_scheduler.WQX)(AnalyticsService),path=(0,feature_directive.f)();return(event,props)=>analytics.logEvent(event,{path:path(),...props})}let AnalyticsService=class AnalyticsService{appConfig=(0,app_configuration.v)();plugins=injectPlugins({optional:!0})??[];consent=(0,root_effect_scheduler.WQX)(consent_service.e);instance=(0,analytics_browser_es.j0)({app:this.appConfig.name,version:this.appConfig.version,debug:(0,core.isDevMode)(),storage:null,plugins:[hraEventFilterPlugin({isEventEnabled:(type,category)=>this.consent.isEventEnabled(type,category)}),hraAnalyticsPlugin({sessionId:this.getSessionId()}),...this.plugins]});logPageView(data){this.instance.page(data)}logEvent(event,props){const{type,category}=event;this.instance.track(type,props,{eventObj:event,category})}getSessionId(){let id=store2_default().session.get("__hra-analytics-session-id");return id&&"string"==typeof id||(id=(0,index_browser.Ak)(10),store2_default().session.set("__hra-analytics-session-id",id)),id}};AnalyticsService=(0,tslib_es6.Cg)([(0,debug_node._qm)({providedIn:"root"})],AnalyticsService);let BaseEventDirective=class BaseEventDirective{renderer=(0,root_effect_scheduler.WQX)(debug_node.sFG);el=(0,root_effect_scheduler.WQX)(debug_node.aKT).nativeElement;logEvent_=injectLogEvent();constructor(){(0,resource.QZ)(onCleanup=>{const trigger=this.triggerOn()??this.event().trigger??"click";if("none"!==trigger&&!this.disabled()){const{el,renderer}=this,handler=this.logEvent.bind(this,trigger),parts=trigger.split(":",2),[target,eventName]=2===parts.length?parts:[el,trigger],unlisten=renderer.listen(target,eventName,handler);onCleanup(()=>setTimeout(()=>unlisten()))}})}logEvent(trigger,event,extraProps={}){const props=this.props();this.logEvent_(this.event(),{trigger,triggerData:event,...""!==props?props:{},...extraProps})}static ctorParameters=()=>[]};BaseEventDirective=(0,tslib_es6.Cg)([(0,debug_node.WLR)(),(0,tslib_es6.Sn)("design:paramtypes",[])],BaseEventDirective);let EventDirective=class EventDirective extends BaseEventDirective{event=core.input.required({alias:"hraEvent"});props=core.input.required({alias:"hraEventProps"});triggerOn=(0,core.input)(void 0,{alias:"hraEventTriggerOn"});disabled=(0,core.input)(!1,{alias:"hraEventDisabled",transform:core.booleanAttribute});static propDecorators={event:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraEvent",required:!0,transform:void 0}]}],props:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraEventProps",required:!0,transform:void 0}]}],triggerOn:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraEventTriggerOn",required:!1,transform:void 0}]}],disabled:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraEventDisabled",required:!1,transform:void 0}]}]}};EventDirective=(0,tslib_es6.Cg)([(0,debug_node.WLR)({selector:"[hraEvent]",exportAs:"hraEvent"})],EventDirective);let ClickEventDirective=class ClickEventDirective extends BaseEventDirective{event=()=>CoreEvents.Click;props=(0,core.input)("",{alias:"hraClickEvent"});triggerOn=(0,core.input)(void 0,{alias:"hraClickEventTriggerOn"});disabled=(0,core.input)(!1,{alias:"hraClickEventDisabled",transform:core.booleanAttribute});static propDecorators={props:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraClickEvent",required:!1,transform:void 0}]}],triggerOn:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraClickEventTriggerOn",required:!1,transform:void 0}]}],disabled:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraClickEventDisabled",required:!1,transform:void 0}]}]}};ClickEventDirective=(0,tslib_es6.Cg)([(0,debug_node.WLR)({selector:"[hraClickEvent]",exportAs:"hraClickEvent"})],ClickEventDirective);let DoubleClickEventDirective=class DoubleClickEventDirective extends BaseEventDirective{event=()=>CoreEvents.DoubleClick;props=(0,core.input)("",{alias:"hraDoubleClickEvent"});triggerOn=(0,core.input)(void 0,{alias:"hraDoubleClickEventTriggerOn"});disabled=(0,core.input)(!1,{alias:"hraDoubleClickEventDisabled",transform:core.booleanAttribute});static propDecorators={props:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraDoubleClickEvent",required:!1,transform:void 0}]}],triggerOn:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraDoubleClickEventTriggerOn",required:!1,transform:void 0}]}],disabled:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraDoubleClickEventDisabled",required:!1,transform:void 0}]}]}};DoubleClickEventDirective=(0,tslib_es6.Cg)([(0,debug_node.WLR)({selector:"[hraDoubleClickEvent]",exportAs:"hraDoubleClickEvent"})],DoubleClickEventDirective);let HoverEventDirective=class HoverEventDirective extends BaseEventDirective{event=()=>CoreEvents.Hover;props=(0,core.input)("",{alias:"hraHoverEvent"});triggerOn=(0,core.input)(void 0,{alias:"hraHoverEventTriggerOn"});disabled=(0,core.input)(!1,{alias:"hraHoverEventDisabled",transform:core.booleanAttribute});static propDecorators={props:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraHoverEvent",required:!1,transform:void 0}]}],triggerOn:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraHoverEventTriggerOn",required:!1,transform:void 0}]}],disabled:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraHoverEventDisabled",required:!1,transform:void 0}]}]}};HoverEventDirective=(0,tslib_es6.Cg)([(0,debug_node.WLR)({selector:"[hraHoverEvent]",exportAs:"hraHoverEvent"})],HoverEventDirective);let KeyboardEventDirective=class KeyboardEventDirective extends BaseEventDirective{event=()=>CoreEvents.Keyboard;props=(0,core.input)("",{alias:"hraKeyboardEvent"});triggerOn=(0,core.input)(void 0,{alias:"hraKeyboardEventTriggerOn"});disabled=(0,core.input)(!1,{alias:"hraKeyboardEventDisabled",transform:core.booleanAttribute});static propDecorators={props:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraKeyboardEvent",required:!1,transform:void 0}]}],triggerOn:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraKeyboardEventTriggerOn",required:!1,transform:void 0}]}],disabled:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraKeyboardEventDisabled",required:!1,transform:void 0}]}]}};KeyboardEventDirective=(0,tslib_es6.Cg)([(0,debug_node.WLR)({selector:"[hraKeyboardEvent]",exportAs:"hraKeyboardEvent"})],KeyboardEventDirective);let ModelChangeEventDirective=class ModelChangeEventDirective extends BaseEventDirective{event=()=>CoreEvents.ModelChange;props=()=>"";propsOrFilter=(0,core.input)("",{alias:"hraModelChangeEvent"});triggerOn=()=>"none";disabled=(0,core.input)(!1,{alias:"hraModelChangeEventDisabled",transform:core.booleanAttribute});ngControl=(0,root_effect_scheduler.WQX)(fesm2022_forms.vO);destroyRef=(0,root_effect_scheduler.WQX)(root_effect_scheduler.abz);ngAfterViewInit(){const{valueChanges}=this.ngControl;valueChanges?.pipe((0,rxjs_interop.pQ)(this.destroyRef),(0,skip.i)(1)).subscribe(value=>{const props=this.selectProps(value,this.propsOrFilter());this.logEvent(void 0,void 0,props)})}selectProps(value,propsOrFilter){if(""===propsOrFilter)return{value};if("function"==typeof propsOrFilter)return{value:propsOrFilter(value)};if("object"==typeof propsOrFilter&&!Array.isArray(propsOrFilter))return{value,...propsOrFilter};if(null==value)return{};const source=value,result={};for(const key of propsOrFilter)key in source&&(result[key]=source[key]);return{value:result}}static propDecorators={propsOrFilter:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraModelChangeEvent",required:!1,transform:void 0}]}],disabled:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraModelChangeEventDisabled",required:!1,transform:void 0}]}]}};ModelChangeEventDirective=(0,tslib_es6.Cg)([(0,debug_node.WLR)({selector:"[hraModelChangeEvent]",exportAs:"hraModelChangeEvent"})],ModelChangeEventDirective)},"./libs/common/analytics/src/lib/feature/feature.directive.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_:()=>FeatureDirective,f:()=>injectFeaturePath});var FeatureDirective_1,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@angular/core/fesm2022/resource.mjs");function injectFeaturePath(){(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Af3)(injectFeaturePath);const feature=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.WQX)(FeatureDirective,{optional:!0});return feature?.path??(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.vPA)("")}let FeatureDirective=class FeatureDirective{name=_angular_core__WEBPACK_IMPORTED_MODULE_2__.input.required({alias:"hraFeature"});path=(0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.EW)(()=>{const parentPath=this.parent?.path(),name=this.name();return parentPath?`${parentPath}.${name}`:name});parent=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.WQX)(FeatureDirective_1,{skipSelf:!0,optional:!0});static propDecorators=(FeatureDirective_1=this,{name:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.pde,args:[{isSignal:!0,alias:"hraFeature",required:!0,transform:void 0}]}]})};FeatureDirective=FeatureDirective_1=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.WLR)({selector:"[hraFeature]"})],FeatureDirective)},"./libs/common/injectors/src/lib/app-configuration.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>injectAppConfiguration});const APP_CONFIGURATION=(0,__webpack_require__("./node_modules/ngxtension/fesm2022/ngxtension-create-injection-token.mjs").j)(()=>({})),injectAppConfiguration=APP_CONFIGURATION[0];APP_CONFIGURATION[1]},"?4f7e":()=>{}}]);