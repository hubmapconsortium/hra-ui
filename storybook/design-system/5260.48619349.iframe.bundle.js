(self.webpackChunkhra_ui=self.webpackChunkhra_ui||[]).push([[5260],{"./libs/common/analytics/src/lib/event/event.directive.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{GP:()=>ClickEventDirective,Fq:()=>DoubleClickEventDirective,gf:()=>EventDirective,YV:()=>HoverEventDirective});var EventCategory,tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),root_effect_scheduler=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),debug_node=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs"),resource=__webpack_require__("./node_modules/@angular/core/fesm2022/resource.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");function createEvent(type,category,trigger){return{type,category,trigger}}!function(EventCategory){EventCategory.Necessary="necessary",EventCategory.Statistics="statistics",EventCategory.Preferences="preferences",EventCategory.Marketing="marketing"}(EventCategory||(EventCategory={}));const click=createEvent("click",EventCategory.Statistics,"click"),double_click=createEvent("doubleClick",EventCategory.Statistics,"dblclick"),error=createEvent("error",EventCategory.Necessary),hover=createEvent("hover",EventCategory.Statistics,"mouseover"),CoreEvents={PageView:createEvent("pageView",EventCategory.Statistics),Click:click,DoubleClick:double_click,Hover:hover,Error:error};var lib=__webpack_require__("./node_modules/qs/lib/index.js");function pick(obj,keys){return keys.reduce((acc,key)=>(acc[key]=obj[key],acc),{})}function filterFalse(obj){const result={};for(const key in obj)!1!==obj[key]&&(result[key]=obj[key]);return result}function limitStackTrace(stack,maxLength){if(stack.length<=maxLength)return stack;const lines=[];let total=19;for(const line of stack.split("\n")){const newTotal=total+line.length+1;newTotal<maxLength&&(lines.push(line),total=newTotal)}return lines.push("Stack truncated..."),lines.join("\n")}var ngxtension_create_injection_token=__webpack_require__("./node_modules/ngxtension/fesm2022/ngxtension-create-injection-token.mjs");const TELEMETRY_ENDPOINT=(0,ngxtension_create_injection_token.j)(()=>{const url="https://cdn.humanatlas.io/tr"+((0,core.isDevMode)()?"-dev":"");return(0,root_effect_scheduler.vPA)(url)}),TELEMETRY_PARAMETER_FILTERS=(0,ngxtension_create_injection_token.L)("Parameter filter",{multi:!0,isFunctionValue:!0}),injectTelemetryEndpoint=TELEMETRY_ENDPOINT[0],injectTelemetryParameterFilters=(TELEMETRY_ENDPOINT[1],TELEMETRY_PARAMETER_FILTERS[0]);TELEMETRY_PARAMETER_FILTERS[1];let TelemetryService=class TelemetryService{endpoint=injectTelemetryEndpoint();filters=injectTelemetryParameterFilters({optional:!0})??[];send(data,doFetch=fetch){doFetch(`${this.endpoint()}?${this.stringify(data)}`,{method:"GET",cache:"no-store",keepalive:!0})}stringify(data){return(0,lib.stringify)(data,{allowDots:!0,arrayFormat:"brackets",skipNulls:!0,filter:(prefix,value)=>{for(const filter of this.filters){const result=filter(prefix,value);if(result!==value)return result}return function serialize(value){if("object"!=typeof value||null===value)return value;if(value instanceof Date)return value.toISOString();if(value instanceof Error){const obj=pick(value,["name","message","stack"]);return{...obj,stack:obj.stack&&limitStackTrace(obj.stack,4e3)}}if(!(value instanceof Event))return value instanceof Map?{map:[...value]}:value instanceof Set?{set:[...value]}:value;if(value instanceof ErrorEvent)return pick(value,["message","filename","lineno","colno"]);if(value instanceof KeyboardEvent)return filterFalse(pick(value,["key","altKey","ctrlKey","metaKey","shiftKey","repeat"]));if(value instanceof MouseEvent){const props=pick(value,["button","buttons","altKey","ctrlKey","metaKey","shiftKey"]),{type,currentTarget:el}=value,targetProps="click"===type&&el instanceof HTMLAnchorElement?function pickAttributes(el,attributes){return attributes.reduce((acc,attr)=>{const value=el.getAttribute(attr);return null!==value&&(acc[attr]=value),acc},{})}(el,["href","type","target","download"]):{};return filterFalse({...props,...targetProps})}}(value)}})}};function hraAnalyticsPlugin(config){(0,root_effect_scheduler.Af3)(hraAnalyticsPlugin);const telemetry=(0,root_effect_scheduler.WQX)(TelemetryService);return{name:"hra-analytics",config,page({config:config_,instance,payload}){telemetry.send({sessionId:config_.sessionId,app:instance.getState("context.app"),version:instance.getState("context.version"),event:CoreEvents.PageView.type,e:payload.properties})},track({config:config_,payload:{event,properties}}){telemetry.send({sessionId:config_.sessionId,event,e:properties})}}}TelemetryService=(0,tslib_es6.Cg)([(0,debug_node._qm)({providedIn:"root"})],TelemetryService);var common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs");function hraEventFilterPlugin(config){(0,root_effect_scheduler.Af3)(hraEventFilterPlugin);const isBrowser=(0,common.UE)((0,root_effect_scheduler.WQX)(debug_node.Agw)),{isEventEnabled}=config,abortIfDisabled=(type,category,abort)=>{if(!isBrowser||!isEventEnabled(type,category))return abort(`Event '${type}' is disabled`)};return{name:"hra-event-filter",config:{},pageStart({abort}){const{type,category}=CoreEvents.PageView;return abortIfDisabled(type,category,abort)},identifyStart:({abort})=>abort("Identify disabled"),trackStart({abort,payload}){const{event:type,options:{category}}=payload;return abortIfDisabled(type,category,abort)}}}var app_configuration=__webpack_require__("./libs/common/injectors/src/lib/app-configuration.ts"),analytics_browser_es=__webpack_require__("./node_modules/analytics/lib/analytics.browser.es.js");function createCategoryPreferences(enabled){return Object.values(EventCategory).reduce((acc,category)=>(acc[category]=enabled,acc),{})}const ALL_CATEGORIES_ENABLED=createCategoryPreferences(!0),ALL_CATEGORIES_DISABLED=createCategoryPreferences(!1),ALWAYS_ENABLED_CATEGORIES={[EventCategory.Necessary]:!0},INITIAL_CATEGORY_SETTINGS={...ALL_CATEGORIES_DISABLED,...ALWAYS_ENABLED_CATEGORIES};let ConsentService=class ConsentService{categories_=(0,root_effect_scheduler.vPA)(INITIAL_CATEGORY_SETTINGS);categories=this.categories_.asReadonly();isCategoryEnabled(category){return this.categories()[category]}isEventEnabled(_type,category){return void 0!==category&&this.isCategoryEnabled(category)}enableAllCategories(){this.categories_.set(ALL_CATEGORIES_ENABLED)}disableAllCategories(){this.categories_.set(INITIAL_CATEGORY_SETTINGS)}enableCategory(category){this.categories_.update(current=>({...current,[category]:!0}))}disableCategory(category){this.categories_.update(current=>({...current,[category]:!1,...ALWAYS_ENABLED_CATEGORIES}))}};ConsentService=(0,tslib_es6.Cg)([(0,debug_node._qm)({providedIn:"root"})],ConsentService);var feature_directive=__webpack_require__("./libs/common/analytics/src/lib/feature/feature.directive.ts");const PLUGINS=(0,ngxtension_create_injection_token.L)("Analytics plugins",{multi:!0}),injectPlugins=PLUGINS[0];PLUGINS[1];function injectLogEvent(){(0,root_effect_scheduler.Af3)(injectLogEvent);const analytics=(0,root_effect_scheduler.WQX)(AnalyticsService),path=(0,feature_directive.f)();return(event,props)=>analytics.logEvent(event,{path:path(),...props})}let AnalyticsService=class AnalyticsService{appConfig=(0,app_configuration.v)();plugins=injectPlugins({optional:!0})??[];consent=(0,root_effect_scheduler.WQX)(ConsentService);instance=(0,analytics_browser_es.j0)({app:this.appConfig.name,version:this.appConfig.version,debug:(0,core.isDevMode)(),storage:null,plugins:[hraEventFilterPlugin({isEventEnabled:(type,category)=>this.consent.isEventEnabled(type,category)}),hraAnalyticsPlugin({sessionId:"TODO"}),...this.plugins]});logPageView(data){this.instance.page(data)}logEvent(event,props){const{type,category}=event;this.instance.track(type,props,{eventObj:event,category})}};AnalyticsService=(0,tslib_es6.Cg)([(0,debug_node._qm)({providedIn:"root"})],AnalyticsService);let BaseEventDirective=class BaseEventDirective{renderer=(0,root_effect_scheduler.WQX)(debug_node.sFG);el=(0,root_effect_scheduler.WQX)(debug_node.aKT).nativeElement;logEvent_=injectLogEvent();constructor(){(0,resource.QZ)(onCleanup=>{const trigger=this.triggerOn()??this.event().trigger??"click";if("none"!==trigger&&!this.disabled()){const{el,renderer}=this,handler=this.logEvent.bind(this,trigger);onCleanup(renderer.listen(el,trigger,handler))}})}logEvent(trigger,event){const props=this.props();this.logEvent_(this.event(),{trigger,triggerData:event,...""!==props?props:{}})}static ctorParameters=()=>[]};BaseEventDirective=(0,tslib_es6.Cg)([(0,debug_node.WLR)(),(0,tslib_es6.Sn)("design:paramtypes",[])],BaseEventDirective);let EventDirective=class EventDirective extends BaseEventDirective{event=core.input.required({alias:"hraEvent"});props=core.input.required({alias:"hraEventProps"});triggerOn=(0,core.input)(void 0,{alias:"hraEventTriggerOn"});disabled=(0,core.input)(!1,{alias:"hraEventDisabled",transform:core.booleanAttribute});static propDecorators={event:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraEvent",required:!0,transform:void 0}]}],props:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraEventProps",required:!0,transform:void 0}]}],triggerOn:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraEventTriggerOn",required:!1,transform:void 0}]}],disabled:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraEventDisabled",required:!1,transform:void 0}]}]}};EventDirective=(0,tslib_es6.Cg)([(0,debug_node.WLR)({selector:"[hraEvent]",exportAs:"hraEvent"})],EventDirective);let ClickEventDirective=class ClickEventDirective extends BaseEventDirective{event=()=>CoreEvents.Click;props=(0,core.input)("",{alias:"hraClickEvent"});triggerOn=(0,core.input)(void 0,{alias:"hraClickEventTriggerOn"});disabled=(0,core.input)(!1,{alias:"hraClickEventDisabled",transform:core.booleanAttribute});static propDecorators={props:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraClickEvent",required:!1,transform:void 0}]}],triggerOn:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraClickEventTriggerOn",required:!1,transform:void 0}]}],disabled:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraClickEventDisabled",required:!1,transform:void 0}]}]}};ClickEventDirective=(0,tslib_es6.Cg)([(0,debug_node.WLR)({selector:"[hraClickEvent]",exportAs:"hraClickEvent"})],ClickEventDirective);let HoverEventDirective=class HoverEventDirective extends BaseEventDirective{event=()=>CoreEvents.Hover;props=(0,core.input)("",{alias:"hraHoverEvent"});triggerOn=(0,core.input)(void 0,{alias:"hraHoverEventTriggerOn"});disabled=(0,core.input)(!1,{alias:"hraHoverEventDisabled",transform:core.booleanAttribute});static propDecorators={props:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraHoverEvent",required:!1,transform:void 0}]}],triggerOn:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraHoverEventTriggerOn",required:!1,transform:void 0}]}],disabled:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraHoverEventDisabled",required:!1,transform:void 0}]}]}};HoverEventDirective=(0,tslib_es6.Cg)([(0,debug_node.WLR)({selector:"[hraHoverEvent]",exportAs:"hraHoverEvent"})],HoverEventDirective);let DoubleClickEventDirective=class DoubleClickEventDirective extends BaseEventDirective{event=()=>CoreEvents.DoubleClick;props=(0,core.input)("",{alias:"hraDoubleClickEvent"});triggerOn=(0,core.input)(void 0,{alias:"hraDoubleClickEventTriggerOn"});disabled=(0,core.input)(!1,{alias:"hraDoubleClickEventDisabled",transform:core.booleanAttribute});static propDecorators={props:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraDoubleClickEvent",required:!1,transform:void 0}]}],triggerOn:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraDoubleClickEventTriggerOn",required:!1,transform:void 0}]}],disabled:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hraDoubleClickEventDisabled",required:!1,transform:void 0}]}]}};DoubleClickEventDirective=(0,tslib_es6.Cg)([(0,debug_node.WLR)({selector:"[hraDoubleClickEvent]",exportAs:"hraDoubleClickEvent"})],DoubleClickEventDirective)},"./libs/common/analytics/src/lib/feature/feature.directive.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_:()=>FeatureDirective,f:()=>injectFeaturePath});var FeatureDirective_1,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/core/fesm2022/debug_node.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@angular/core/fesm2022/resource.mjs");function injectFeaturePath(){(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Af3)(injectFeaturePath);const feature=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.WQX)(FeatureDirective,{optional:!0});return feature?.path??(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.vPA)("")}let FeatureDirective=class FeatureDirective{name=_angular_core__WEBPACK_IMPORTED_MODULE_2__.input.required({alias:"hraFeature"});path=(0,_angular_core__WEBPACK_IMPORTED_MODULE_4__.EW)(()=>{const parentPath=this.parent?.path(),name=this.name();return parentPath?`${parentPath}.${name}`:name});parent=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.WQX)(FeatureDirective_1,{skipSelf:!0,optional:!0});static propDecorators=(FeatureDirective_1=this,{name:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_3__.pde,args:[{isSignal:!0,alias:"hraFeature",required:!0,transform:void 0}]}]})};FeatureDirective=FeatureDirective_1=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.WLR)({selector:"[hraFeature]"})],FeatureDirective)},"./libs/common/injectors/src/lib/app-configuration.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>injectAppConfiguration});const APP_CONFIGURATION=(0,__webpack_require__("./node_modules/ngxtension/fesm2022/ngxtension-create-injection-token.mjs").j)(()=>({})),injectAppConfiguration=APP_CONFIGURATION[0];APP_CONFIGURATION[1]},"?4f7e":()=>{}}]);