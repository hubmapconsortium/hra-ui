(self.webpackChunkccf_body_ui_wc=self.webpackChunkccf_body_ui_wc||[]).push([[792],{7772:Ge=>{"use strict";Ge.exports=M,Ge.exports.default=M;var ne=1e20;function M(W,x,E,N,te,F){this.fontSize=W||24,this.buffer=void 0===x?3:x,this.cutoff=N||.25,this.fontFamily=te||"sans-serif",this.fontWeight=F||"normal",this.radius=E||8;var C=this.size=this.fontSize+2*this.buffer,oe=C+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=C,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(oe*oe),this.gridInner=new Float64Array(oe*oe),this.f=new Float64Array(oe),this.z=new Float64Array(oe+1),this.v=new Uint16Array(oe),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(C/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function $(W,x,E,N,te,F){for(var C=0;C<x;C++)j(W,C,x,E,N,te,F);for(var oe=0;oe<E;oe++)j(W,oe*x,1,x,N,te,F)}function j(W,x,E,N,te,F,C){var oe,S,k,ce;for(F[0]=0,C[0]=-ne,C[1]=ne,oe=0;oe<N;oe++)te[oe]=W[x+oe*E];for(oe=1,S=0,k=0;oe<N;oe++){do{k=(te[oe]-te[ce=F[S]]+oe*oe-ce*ce)/(oe-ce)/2}while(k<=C[S]&&--S>-1);F[++S]=oe,C[S]=k,C[S+1]=ne}for(oe=0,S=0;oe<N;oe++){for(;C[S+1]<oe;)S++;W[x+oe*E]=te[ce=F[S]]+(oe-ce)*(oe-ce)}}M.prototype._draw=function(W,x){var F,C,oe,S,k,ce,X,K,J,E=this.ctx.measureText(W),N=E.width,te=2*this.buffer;x&&this.useMetrics?(k=Math.floor(E.actualBoundingBoxAscent),K=this.buffer+Math.ceil(E.actualBoundingBoxAscent),ce=this.buffer,X=this.buffer,F=(C=Math.min(this.size,Math.ceil(E.actualBoundingBoxRight-E.actualBoundingBoxLeft)))+te,oe=(S=Math.min(this.size-ce,Math.ceil(E.actualBoundingBoxAscent+E.actualBoundingBoxDescent)))+te,this.ctx.textBaseline="alphabetic"):(F=C=this.size,oe=S=this.size,k=19*this.fontSize/24,ce=X=0,K=this.middle,this.ctx.textBaseline="middle"),C&&S&&(this.ctx.clearRect(X,ce,C,S),this.ctx.fillText(W,this.buffer,K),J=this.ctx.getImageData(X,ce,C,S));var U=new Uint8ClampedArray(F*oe);return function ee(W,x,E,N,te,F,C){F.fill(ne,0,x*E),C.fill(0,0,x*E);for(var oe=(x-N)/2,S=0;S<te;S++)for(var k=0;k<N;k++){var ce=(S+oe)*x+k+oe,X=W.data[4*(S*N+k)+3]/255;if(1===X)F[ce]=0,C[ce]=ne;else if(0===X)F[ce]=ne,C[ce]=0;else{var K=Math.max(0,.5-X),J=Math.max(0,X-.5);F[ce]=K*K,C[ce]=J*J}}}(J,F,oe,C,S,this.gridOuter,this.gridInner),$(this.gridOuter,F,oe,this.f,this.v,this.z),$(this.gridInner,F,oe,this.f,this.v,this.z),function A(W,x,E,N,te,F,C){for(var oe=0;oe<x*E;oe++){var S=Math.sqrt(N[oe])-Math.sqrt(te[oe]);W[oe]=Math.round(255-255*(S/F+C))}}(U,F,oe,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:U,metrics:{width:C,height:S,sdfWidth:F,sdfHeight:oe,top:k,left:0,advance:N}}},M.prototype.draw=function(W){return this._draw(W,!1).data},M.prototype.drawWithMetrics=function(W){return this._draw(W,!0)}},8707:(Ge,ne,M)=>{"use strict";var ee={};M.r(ee),M.d(ee,{decode:()=>Jve,name:()=>Kve});var A={};M.r(A),M.d(A,{name:()=>ibe,preprocess:()=>rbe});var $={};M.r($),M.d($,{name:()=>sbe,preprocess:()=>obe});var j={};M.r(j),M.d(j,{decode:()=>zbe,encode:()=>Wbe,name:()=>Hbe,preprocess:()=>Gbe});var W={};M.r(W),M.d(W,{decode:()=>Kbe,encode:()=>Jbe,name:()=>Ybe});var x={};M.r(x),M.d(x,{decode:()=>Qbe,encode:()=>ewe,name:()=>Zbe});var E={};M.r(E),M.d(E,{decode:()=>nwe,encode:()=>iwe,name:()=>twe});var N={};M.r(N),M.d(N,{delMany:()=>GNe,get:()=>VNe,setMany:()=>HNe});var te={};function F(t,e,n,i,r,s,o){try{var a=t[s](o),c=a.value}catch(l){return void n(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function C(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function o(c){F(s,i,r,o,a,"next",c)}function a(c){F(s,i,r,o,a,"throw",c)}o(void 0)})}}M.r(te),M.d(te,{inDefaultGraph:()=>cPe,isBlankNode:()=>sPe,isDefaultGraph:()=>rb,isLiteral:()=>oPe,isNamedNode:()=>rPe,isVariable:()=>aPe,prefix:()=>lPe,prefixes:()=>NF});let S=null,k=!1,ce=1;const X=Symbol("SIGNAL");function K(t){const e=S;return S=t,e}const w={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ue(t){if((!Be(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==ce)){if(!t.producerMustRecompute(t)&&!ke(t))return t.dirty=!1,void(t.lastCleanEpoch=ce);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ce}}function ae(t){t.dirty=!0,function re(t){if(void 0===t.liveConsumerNode)return;const e=k;k=!0;try{for(const n of t.liveConsumerNode)n.dirty||ae(n)}finally{k=e}}(t),t.consumerMarkedDirty?.(t)}function we(t){return t&&(t.nextProducerIndex=0),K(t)}function Oe(t,e){if(K(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(Be(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)xe(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function ke(t){Ie(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(ue(n),i!==n.version))return!0}return!1}function Ye(t){if(Ie(t),Be(t))for(let e=0;e<t.producerNode.length;e++)xe(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function xe(t,e){if(function et(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Ie(t),1===t.liveConsumerNode.length)for(let i=0;i<t.producerNode.length;i++)xe(t.producerNode[i],t.producerIndexOfThis[i]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Ie(r),r.producerIndexOfThis[i]=e}}function Be(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ie(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let se=null;const ze=()=>{},ve={...w,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{null!==t.schedule&&t.schedule(t.ref)},hasRun:!1,cleanupFn:ze};function Ke(t){return"function"==typeof t}function vt(t){const n=t(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Ot=vt(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Et(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Bt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(Ke(i))try{i()}catch(s){e=s instanceof Ot?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{z(s)}catch(o){e=e??[],o instanceof Ot?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ot(e)}}add(e){var n;if(e&&e!==this)if(this.closed)z(e);else{if(e instanceof Bt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Et(n,e)}remove(e){const{_finalizers:n}=this;n&&Et(n,e),e instanceof Bt&&e._removeParent(this)}}Bt.EMPTY=(()=>{const t=new Bt;return t.closed=!0,t})();const he=Bt.EMPTY;function B(t){return t instanceof Bt||t&&"closed"in t&&Ke(t.remove)&&Ke(t.add)&&Ke(t.unsubscribe)}function z(t){Ke(t)?t():t.unsubscribe()}const Ne={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ze={setTimeout(t,e,...n){const{delegate:i}=Ze;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Ze;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ct(t){Ze.setTimeout(()=>{const{onUnhandledError:e}=Ne;if(!e)throw t;e(t)})}function wt(){}const Qt=un("C",void 0,void 0);function un(t,e,n){return{kind:t,value:e,error:n}}let rn=null;function Fi(t){if(Ne.useDeprecatedSynchronousErrorHandling){const e=!rn;if(e&&(rn={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:i}=rn;if(rn=null,n)throw i}}else t()}class fi extends Bt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,B(e)&&e.add(this)):this.destination=Uo}static create(e,n,i){return new $i(e,n,i)}next(e){this.isStopped?Ys(function In(t){return un("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ys(function gn(t){return un("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ys(Qt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ai=Function.prototype.bind;function vi(t,e){return ai.call(t,e)}class ji{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Xs(i)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Xs(i)}else Xs(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Xs(n)}}}class $i extends fi{constructor(e,n,i){let r;if(super(),Ke(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&Ne.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&vi(e.next,s),error:e.error&&vi(e.error,s),complete:e.complete&&vi(e.complete,s)}):r=e}this.destination=new ji(r)}}function Xs(t){Ne.useDeprecatedSynchronousErrorHandling?function Or(t){Ne.useDeprecatedSynchronousErrorHandling&&rn&&(rn.errorThrown=!0,rn.error=t)}(t):ct(t)}function Ys(t,e){const{onStoppedNotification:n}=Ne;n&&Ze.setTimeout(()=>n(t,e))}const Uo={closed:!0,next:wt,error:function ia(t){throw t},complete:wt},Vo="function"==typeof Symbol&&Symbol.observable||"@@observable";function He(t){return t}let At=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const s=function Nr(t){return t&&t instanceof fi||function Vi(t){return t&&Ke(t.next)&&Ke(t.error)&&Ke(t.complete)}(t)&&B(t)}(n)?n:new $i(n,i,r);return Fi(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=en(i))((r,s)=>{const o=new $i({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[Vo](){return this}pipe(...n){return function Nt(t){return 0===t.length?He:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}(n)(this)}toPromise(n){return new(n=en(n))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function en(t){var e;return null!==(e=t??Ne.Promise)&&void 0!==e?e:Promise}const ds=vt(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let qt=(()=>{class t extends At{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new le(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new ds}next(n){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:s}=this;return i||r?he:(this.currentObservers=null,s.push(n),new Bt(()=>{this.currentObservers=null,Et(s,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){const n=new At;return n.source=this,n}}return t.create=(e,n)=>new le(e,n),t})();class le extends qt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,e)}error(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==i?i:he}}class ye extends qt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function de(t){return Ke(t?.lift)}function T(t){return e=>{if(de(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function v(t,e,n,i,r){return new H(t,e,n,i,r)}class H extends fi{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Y(t,e){return T((n,i)=>{let r=0;n.subscribe(v(i,s=>{i.next(t.call(e,s,r++))}))})}const rt="https://g.co/ng/security#xss";class $e extends Error{constructor(e,n){super(function Mt(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Pn(t){return{toString:t}.toString()}const ni="__parameters__";function hr(t,e,n){return Pn(()=>{const i=function Ur(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const h=c.hasOwnProperty(ni)?c[ni]:Object.defineProperty(c,ni,{value:[]})[ni];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}const Bn=globalThis;function Kn(t){for(let e in t)if(t[e]===Kn)return e;throw Error("Could not find renamed property on target object.")}function el(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function tr(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(tr).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Ta(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const _h=Kn({__forward_ref__:Kn});function pi(t){return t.__forward_ref__=pi,t.toString=function(){return tr(this())},t}function wn(t){return Kl(t)?t():t}function Kl(t){return"function"==typeof t&&t.hasOwnProperty(_h)&&t.__forward_ref__===pi}function Pt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ho(t){return{providers:t.providers||[],imports:t.imports||[]}}function hp(t){return Hi(t,pp)||Hi(t,Ab)}function Hi(t,e){return t.hasOwnProperty(e)?t[e]:null}function fp(t){return t&&(t.hasOwnProperty(a_)||t.hasOwnProperty(YS))?t[a_]:null}const pp=Kn({\u0275prov:Kn}),a_=Kn({\u0275inj:Kn}),Ab=Kn({ngInjectableDef:Kn}),YS=Kn({ngInjectorDef:Kn});class St{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Pt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function gp(t){return t&&!!t.\u0275providers}const Zu=Kn({\u0275cmp:Kn}),mp=Kn({\u0275dir:Kn}),Ks=Kn({\u0275pipe:Kn}),Cb=Kn({\u0275mod:Kn}),Gr=Kn({\u0275fac:Kn}),vh=Kn({__NG_ELEMENT_ID__:Kn}),u_=Kn({__NG_ENV_ID__:Kn});function xn(t){return"string"==typeof t?t:null==t?"":String(t)}function bh(t,e){throw new $e(-201,!1)}var ii=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ii||{});let d_;function Ib(){return d_}function Js(t){const e=d_;return d_=t,e}function wh(t,e,n){const i=hp(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&ii.Optional?null:void 0!==e?e:void bh()}const Qu={},_p="__NG_DI_FLAG__",ed="ngTempTokenPath",Db=/\n/gm,yp="__source";let nl;function xc(t){const e=nl;return nl=t,e}function Go(t,e=ii.Default){if(void 0===nl)throw new $e(-203,!1);return null===nl?wh(t,void 0,e):nl.get(t,e&ii.Optional?null:void 0,e)}function lt(t,e=ii.Default){return(Ib()||Go)(wn(t),e)}function Ut(t,e=ii.Default){return lt(t,Eh(e))}function Eh(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function f_(t){const e=[];for(let n=0;n<t.length;n++){const i=wn(t[n]);if(Array.isArray(i)){if(0===i.length)throw new $e(900,!1);let r,s=ii.Default;for(let o=0;o<i.length;o++){const a=i[o],c=nC(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(lt(r,s))}else e.push(lt(i))}return e}function Ah(t,e){return t[_p]=e,t.prototype[_p]=e,t}function nC(t){return t[_p]}const id=Ah(hr("Optional"),8),rd=Ah(hr("SkipSelf"),4);function ho(t,e){return t.hasOwnProperty(Gr)?t[Gr]:null}function sd(t,e){t.forEach(n=>Array.isArray(n)?sd(n,e):e(n))}function Ob(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ec(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function zo(t,e,n){let i=Ac(t,e);return i>=0?t[1|i]=n:(i=~i,function Nb(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function p_(t,e){const n=Ac(t,e);if(n>=0)return t[1|n]}function Ac(t,e){return function Dt(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){const s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}(t,e,1)}const xt={},zt=[],Mn=new St(""),li=new St("",-1),Pr=new St("");class Mi{get(e,n=Qu){if(n===Qu){const i=new Error(`NullInjectorError: No provider for ${tr(e)}!`);throw i.name="NullInjectorError",i}return n}}var od=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(od||{}),Da=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Da||{}),Yt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Yt||{});function wp(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}function g_(t,e,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{const s=r,o=n[++i];Sh(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function Zl(t){return 3===t||4===t||6===t}function Sh(t){return 64===t.charCodeAt(0)}function il(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Ti(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Ti(t,e,n,i,r){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}const Pb="ng-template";function Fb(t,e,n,i){let r=0;if(i){for(;r<e.length&&"string"==typeof e[r];r+=2)if("class"===e[r]&&-1!==wp(e[r+1].toLowerCase(),n,0))return!0}else if(ad(t))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&"string"==typeof(s=e[r]);)if(s.toLowerCase()===n)return!0}return!1}function ad(t){return 4===t.type&&t.value!==Pb}function oC(t,e,n){return e===(4!==t.type||n?t.value:Pb)}function aC(t,e,n){let i=4;const r=t.attrs,s=null!==r?function Lb(t){for(let e=0;e<t.length;e++)if(Zl(t[e]))return e;return t.length}(r):0;let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!oC(t,c,n)||""===c&&1===e.length){if(Ra(i))return!1;o=!0}}else if(8&i){if(null===r||!Fb(t,r,c,n)){if(Ra(i))return!1;o=!0}}else{const l=e[++a],u=xp(c,r,ad(t),n);if(-1===u){if(Ra(i))return!1;o=!0;continue}if(""!==l){let h;if(h=u>s?"":r[u+1].toLowerCase(),2&i&&l!==h){if(Ra(i))return!1;o=!0}}}}else{if(!o&&!Ra(i)&&!Ra(c))return!1;if(o&&Ra(c))continue;o=!1,i=c|1&i}}return Ra(i)||o}function Ra(t){return!(1&t)}function xp(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){const o=e[r];if(o===t)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function Ap(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function Sc(t,e,n=!1){for(let i=0;i<e.length;i++)if(aC(t,e[i],n))return!0;return!1}function Bb(t,e){e:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function m_(t,e){return t?":not("+e.trim()+")":e}function Sp(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&i){const a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Ra(o)&&(e+=m_(s,r),r=""),i=o,s=s||!Ra(i);n++}return""!==r&&(e+=m_(s,r)),e}function gi(t){return Pn(()=>{const e=zr(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===od.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Da.Emulated,styles:t.styles||zt,_:null,schemas:t.schemas||null,tView:null,id:""};Is(n);const i=t.dependencies;return n.directiveDefs=Mp(i,!1),n.pipeDefs=Mp(i,!0),n.id=function Ub(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const r of n)e=Math.imul(31,e)+r.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function Cp(t){return Hn(t)||Jr(t)}function cC(t){return null!==t}function sa(t){return Pn(()=>({type:t.type,bootstrap:t.bootstrap||zt,declarations:t.declarations||zt,imports:t.imports||zt,exports:t.exports||zt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function jb(t,e){if(null==t)return xt;const n={};for(const i in t)if(t.hasOwnProperty(i)){const r=t[i];let s,o,a=Yt.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(n[s]=a!==Yt.None?[i,a]:i,e[s]=o):n[s]=i}return n}function Xt(t){return Pn(()=>{const e=zr(t);return Is(e),e})}function Kr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Hn(t){return t[Zu]||null}function Jr(t){return t[mp]||null}function ps(t){return t[Ks]||null}function zr(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||xt,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||zt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:jb(t.inputs,e),outputs:jb(t.outputs),debugInfo:null}}function Is(t){t.features?.forEach(e=>e(t))}function Mp(t,e){if(!t)return null;const n=e?ps:Cp;return()=>("function"==typeof t?t():t).map(i=>n(i)).filter(cC)}function __(...t){return{\u0275providers:Ql(0,t),\u0275fromNgModule:!0}}function Ql(t,...e){const n=[],i=new Set;let r;const s=o=>{n.push(o)};return sd(e,o=>{const a=o;Cc(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&Ip(r,s),n}function Ip(t,e){for(let n=0;n<t.length;n++){const{ngModule:i,providers:r}=t[n];eu(r,s=>{e(s,i)})}}function Cc(t,e,n,i){if(!(t=wn(t)))return!1;let r=null,s=fp(t);const o=!s&&Hn(t);if(s||o){if(o&&!o.standalone)return!1;r=t}else{const c=t.ngModule;if(s=fp(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)Cc(l,e,n,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{sd(s.imports,u=>{Cc(u,e,n,i)&&(l||=[],l.push(u))})}finally{}void 0!==l&&Ip(l,e)}if(!a){const l=ho(r)||(()=>new r);e({provide:r,useFactory:l,deps:zt},r),e({provide:Pr,useValue:r,multi:!0},r),e({provide:Mn,useValue:()=>lt(r),multi:!0},r)}const c=s.providers;if(null!=c&&!a){const l=t;eu(c,u=>{e(u,l)})}}}return r!==t&&void 0!==t.providers}function eu(t,e){for(let n of t)gp(n)&&(n=n.\u0275providers),Array.isArray(n)?eu(n,e):e(n)}const Rp=Kn({provide:String,useValue:Kn});function sl(t){return null!==t&&"object"==typeof t&&Rp in t}function tu(t){return"function"==typeof t}const y_=new St(""),nu={},Mh={};let Op;function Me(){return void 0===Op&&(Op=new Mi),Op}class Ds{}class Mc extends Ds{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,v_(e,o=>this.processProvider(o)),this.records.set(li,cd(void 0,this)),r.has("environment")&&this.records.set(Ds,cd(void 0,this));const s=this.records.get(y_);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Pr,zt,ii.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=K(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),K(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=xc(this),i=Js(void 0);try{return e()}finally{xc(n),Js(i)}}get(e,n=Qu,i=ii.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(u_))return e[u_](this);i=Eh(i);const s=xc(this),o=Js(void 0);try{if(!(i&ii.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function fC(t){return"function"==typeof t||"object"==typeof t&&t instanceof St}(e)&&hp(e);c=l&&this.injectableDefInScope(l)?cd(go(e),nu):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&ii.Self?Me():this.parent).get(e,n=i&ii.Optional&&n===Qu?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[ed]=a[ed]||[]).unshift(tr(e)),s)throw a;return function iC(t,e,n,i){const r=t[ed];throw e[yp]&&r.unshift(e[yp]),t.message=function rC(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=tr(e);if(Array.isArray(e))r=e.map(tr).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):tr(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(Db,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[ed]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Js(o),xc(s)}}resolveInjectorInitializers(){const e=K(null),n=xc(this),i=Js(void 0);try{const s=this.get(Mn,zt,ii.Self);for(const o of s)o()}finally{xc(n),Js(i),K(e)}}toString(){const e=[],n=this.records;for(const i of n.keys())e.push(tr(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $e(205,!1)}processProvider(e){let n=tu(e=wn(e))?e:wn(e&&e.provide);const i=function dC(t){return sl(t)?cd(void 0,t.useValue):cd(Gb(t),nu)}(e);if(!tu(e)&&!0===e.multi){let r=this.records.get(n);r||(r=cd(void 0,nu,!0),r.factory=()=>f_(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){const i=K(null);try{return n.value===nu&&(n.value=Mh,n.value=n.factory()),"object"==typeof n.value&&n.value&&function hC(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{K(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=wn(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function go(t){const e=hp(t),n=null!==e?e.factory:ho(t);if(null!==n)return n;if(t instanceof St)throw new $e(204,!1);if(t instanceof Function)return function ri(t){if(t.length>0)throw new $e(204,!1);const n=function XS(t){return t&&(t[pp]||t[Ab])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new $e(204,!1)}function Gb(t,e,n){let i;if(tu(t)){const r=wn(t);return ho(r)||go(r)}if(sl(t))i=()=>wn(t.useValue);else if(function Hb(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...f_(t.deps||[]));else if(function Vb(t){return!(!t||!t.useExisting)}(t))i=()=>lt(wn(t.useExisting));else{const r=wn(t&&(t.useClass||t.provide));if(!function iu(t){return!!t.deps}(t))return ho(r)||go(r);i=()=>new r(...f_(t.deps))}return i}function cd(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function v_(t,e){for(const n of t)Array.isArray(n)?v_(n,e):n&&gp(n)?v_(n.\u0275providers,e):e(n)}function zb(){return void 0!==Ib()||null!=function tC(){return nl}()}const pr=0,$t=1,mn=2,Fr=3,Oa=4,Rs=5,_o=6,ud=7,qi=8,Qr=9,Zs=10,An=11,Ih=12,w_=13,dd=14,wi=15,su=16,aa=17,Wr=18,Dh=19,x_=20,Ic=21,al=22,yo=23,Fn=25,E_=1,Ka=7,Tr=9,xr=10;var Np=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Np||{});function ir(t){return Array.isArray(t)&&"object"==typeof t[E_]}function gs(t){return Array.isArray(t)&&!0===t[E_]}function hd(t){return!!(4&t.flags)}function Wo(t){return t.componentOffset>-1}function Oh(t){return!(1&~t.flags)}function rr(t){return!!t.template}function Nh(t){return!!(512&t[mn])}class Ph{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Yb(t,e,n,i){null!==e?e.applyValueToInputSignal(e,i):t[n]=i}function Lr(){return S_}function S_(t){return t.type.prototype.ngOnChanges&&(t.setInput=Kb),DC}function DC(){const t=Bp(this),e=t?.current;if(e){const n=t.previous;if(n===xt)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function Kb(t,e,n,i,r){const s=this.declaredInputs[i],o=Bp(t)||function Zb(t,e){return t[Jb]=e}(t,{previous:xt,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Ph(l&&l.currentValue,n,c===xt),Yb(t,e,r,n)}Lr.ngInherit=!0;const Jb="__ngSimpleChanges__";function Bp(t){return t[Jb]||null}const ca=function(t,e,n){},Gn="svg";let ew=!1;function Ui(t){for(;Array.isArray(t);)t=t[pr];return t}function Hs(t,e){return Ui(e[t])}function Qs(t,e){return Ui(e[t.index])}function au(t,e){return t.data[e]}function cu(t,e){return t[e]}function vo(t,e){const n=e[t];return ir(n)?n:n[pr]}function Ja(t){return!(128&~t[mn])}function Na(t,e){return null==e?null:t[e]}function Bh(t){t[aa]=0}function tw(t){1024&t[mn]||(t[mn]|=1024,Ja(t)&&lu(t))}function Up(t){return!!(9216&t[mn]||t[yo]?.dirty)}function kh(t){t[Zs].changeDetectionScheduler?.notify(1),Up(t)?lu(t):64&t[mn]&&(function Lh(){return ew}()?(t[mn]|=1024,lu(t)):t[Zs].changeDetectionScheduler?.notify())}function lu(t){t[Zs].changeDetectionScheduler?.notify();let e=bo(t);for(;null!==e&&!(8192&e[mn])&&(e[mn]|=8192,Ja(e));)e=bo(e)}function Pa(t,e){if(!(256&~t[mn]))throw new $e(911,!1);null===t[Ic]&&(t[Ic]=[]),t[Ic].push(e)}function bo(t){const e=t[Fr];return gs(e)?e[Fr]:e}const Dn={lFrame:aw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function D_(){return Dn.bindingsEnabled}function uu(){return null!==Dn.skipHydrationRootTNode}function It(){return Dn.lFrame.lView}function Jn(){return Dn.lFrame.tView}function Gs(t){return Dn.lFrame.contextLView=t,t[qi]}function ms(t){return Dn.lFrame.contextLView=null,t}function Ii(){let t=R_();for(;null!==t&&64===t.type;)t=t.parent;return t}function R_(){return Dn.lFrame.currentTNode}function Fa(t,e){const n=Dn.lFrame;n.currentTNode=t,n.isParent=e}function ll(){return Dn.lFrame.isParent}function du(){Dn.lFrame.isParent=!1}function _s(){const t=Dn.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function qo(){return Dn.lFrame.bindingIndex++}function la(t){const e=Dn.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Vp(t,e){const n=Dn.lFrame;n.bindingIndex=n.bindingRootIndex=t,Vh(e)}function Vh(t){Dn.lFrame.currentDirectiveIndex=t}function Hp(){return Dn.lFrame.currentQueryIndex}function ua(t){Dn.lFrame.currentQueryIndex=t}function ow(t){const e=t[$t];return 2===e.type?e.declTNode:1===e.type?t[Rs]:null}function F_(t,e,n){if(n&ii.SkipSelf){let r=e,s=t;for(;!(r=r.parent,null!==r||n&ii.Host||(r=ow(s),null===r||(s=s[dd],10&r.type))););if(null===r)return!1;e=r,t=s}const i=Dn.lFrame=B_();return i.currentTNode=e,i.lView=t,!0}function L_(t){const e=B_(),n=t[$t];Dn.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function B_(){const t=Dn.lFrame,e=null===t?null:t.child;return null===e?aw(t):e}function aw(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function cw(){const t=Dn.lFrame;return Dn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ec=cw;function Hh(){const t=cw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ys(){return Dn.lFrame.selectedIndex}function tc(t){Dn.lFrame.selectedIndex=t}function xi(){const t=Dn.lFrame;return au(t.tView,t.selectedIndex)}function vn(){Dn.lFrame.currentNamespace=Gn}let zp=!0;function fd(){return zp}function sr(t){zp=t}function Wp(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),null!=u&&(t.destroyHooks??=[]).push(n,u)}}function Gh(t,e,n){uw(t,e,3,n)}function $p(t,e,n,i){(3&t[mn])===n&&uw(t,e,n,i)}function qp(t,e){let n=t[mn];(3&n)===e&&(n&=16383,n+=1,t[mn]=n)}function uw(t,e,n,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&t[aa]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(t[aa]+=65536),(a<s||-1==s)&&(VC(t,n,e,c),t[aa]=(4294901760&t[aa])+c+2),c++}function dw(t,e){ca(4,t,e);const n=K(null);try{e.call(t)}finally{K(n),ca(5,t,e)}}function VC(t,e,n,i){const r=n[i]<0,s=n[i+1],a=t[r?-n[i]:n[i]];r?t[mn]>>14<t[aa]>>16&&(3&t[mn])===e&&(t[mn]+=16384,dw(a,s)):dw(a,s)}const xo=-1;class es{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function Yp(t){return t!==xo}function zh(t){return 32767&t}function Wh(t,e){let n=function WC(t){return t>>16}(t),i=e;for(;n>0;)i=i[dd],n--;return i}let G_=!0;function $h(t){const e=G_;return G_=t,e}const hw=255,Kp=5;let fw=0;const Eo={};function qh(t,e){const n=Xh(t,e);if(-1!==n)return n;const i=e[$t];i.firstCreatePass&&(t.injectorIndex=e.length,Jp(i.data,t),Jp(e,null),Jp(i.blueprint,null));const r=Yh(t,e),s=t.injectorIndex;if(Yp(r)){const o=zh(r),a=Wh(r,e),c=a[$t].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function Jp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Xh(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Yh(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){if(i=bw(r),null===i)return xo;if(n++,r=r[dd],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return xo}function da(t,e,n){!function z_(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(vh)&&(i=n[vh]),null==i&&(i=n[vh]=fw++);const r=i&hw;e.data[t+(r>>Kp)]|=1<<r}(t,e,n)}function pw(t,e,n){if(n&ii.Optional||void 0!==t)return t;bh()}function W_(t,e,n,i){if(n&ii.Optional&&void 0===i&&(i=null),!(n&(ii.Self|ii.Host))){const r=t[Qr],s=Js(void 0);try{return r?r.get(e,i,n&ii.Optional):wh(e,i,n&ii.Optional)}finally{Js(s)}}return pw(i,0,n)}function gw(t,e,n,i=ii.Default,r){if(null!==t){if(2048&e[mn]&&!(i&ii.Self)){const o=function YC(t,e,n,i,r){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[mn]&&!(512&o[mn]);){const a=mw(s,o,n,i|ii.Self,Eo);if(a!==Eo)return a;let c=s.parent;if(!c){const l=o[x_];if(l){const u=l.get(n,Eo,i);if(u!==Eo)return u}c=bw(o),o=o[dd]}s=c}return r}(t,e,n,i,Eo);if(o!==Eo)return o}const s=mw(t,e,n,i,Eo);if(s!==Eo)return s}return W_(e,n,i,r)}function mw(t,e,n,i,r){const s=function XC(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(vh)?t[vh]:void 0;return"number"==typeof e?e>=0?e&hw:vw:e}(n);if("function"==typeof s){if(!F_(e,t,i))return i&ii.Host?pw(r,0,i):W_(e,n,i,r);try{let o;if(o=s(i),null!=o||i&ii.Optional)return o;bh()}finally{ec()}}else if("number"==typeof s){let o=null,a=Xh(t,e),c=xo,l=i&ii.Host?e[wi][Rs]:null;for((-1===a||i&ii.SkipSelf)&&(c=-1===a?Yh(t,e):e[a+8],c!==xo&&yw(i,!1)?(o=e[$t],a=zh(c),e=Wh(c,e)):a=-1);-1!==a;){const u=e[$t];if(_w(s,a,u.data)){const h=qC(a,e,n,o,i,l);if(h!==Eo)return h}c=e[a+8],c!==xo&&yw(i,e[$t].data[a+8]===l)&&_w(s,a,e)?(o=u,a=zh(c),e=Wh(c,e)):a=-1}}return r}function qC(t,e,n,i,r,s){const o=e[$t],a=o.data[t+8],u=Zp(a,o,n,null==i?Wo(a)&&G_:i!=o&&!!(3&a.type),r&ii.Host&&s===a);return null!==u?pu(e,o,u,a):Eo}function Zp(t,e,n,i,r){const s=t.providerIndexes,o=e.data,a=1048575&s,c=t.directiveStart,u=s>>20,f=r?a+u:t.directiveEnd;for(let g=i?a:a+u;g<f;g++){const m=o[g];if(g<c&&n===m||g>=c&&m.type===n)return g}if(r){const g=o[c];if(g&&rr(g)&&g.type===n)return c}return null}function pu(t,e,n,i){let r=t[n];const s=e.data;if(function U_(t){return t instanceof es}(r)){const o=r;o.resolving&&function tl(t,e){throw e&&e.join(" > "),new $e(-200,t)}(function ci(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():xn(t)}(s[n]));const a=$h(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Js(o.injectImpl):null;F_(t,i,ii.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&function UC(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=S_(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==l&&Js(l),$h(a),o.resolving=!1,ec()}}return r}function _w(t,e,n){return!!(n[e+(t>>Kp)]&1<<t)}function yw(t,e){return!(t&ii.Self||t&ii.Host&&e)}class ts{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return gw(this._tNode,this._lView,e,Eh(i),n)}}function vw(){return new ts(Ii(),It())}function Xi(t){return Pn(()=>{const e=t.prototype.constructor,n=e[Gr]||Qp(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const s=r[Gr]||Qp(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Qp(t){return Kl(t)?()=>{const e=Qp(wn(t));return e&&e()}:ho(t)}function bw(t){const e=t[$t],n=e.type;return 2===n?e.declTNode:1===n?t[Rs]:null}function gu(t){return function fu(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const i=n.length;let r=0;for(;r<i;){const s=n[r];if(Zl(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof n[r];)r++;else{if(s===e)return n[r+1];r+=2}}}return null}(Ii(),t)}function Mw(t,e=null,n=null,i){const r=Tw(t,e,n,i);return r.resolveInjectorInitializers(),r}function Tw(t,e=null,n=null,i,r=new Set){const s=[n||zt,__(t)];return i=i||("object"==typeof t?void 0:tr(t)),new Mc(s,e||Me(),i||null,r)}let Gi=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Qu;static#t=this.NULL=new Mi;static create(n,i){if(Array.isArray(n))return Mw({name:""},i,n,"");{const r=n.name??"";return Mw({name:r},n.parent,n.providers,r)}}static#n=this.\u0275prov=Pt({token:t,providedIn:"any",factory:()=>lt(li)});static#i=this.__NG_ELEMENT_ID__=-1}return t})();function q_(t){return t.ngOriginalError}class Ao{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&q_(e);for(;n&&q_(n);)n=q_(n);return n||null}}const Dw=new St("",{providedIn:"root",factory:()=>Ut(Ao).handleError.bind(void 0)});let md=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=tM;static#t=this.__NG_ENV_ID__=n=>n}return t})();class eM extends md{constructor(e){super(),this._lView=e}onDestroy(e){return Pa(this._lView,e),()=>function T_(t,e){if(null===t[Ic])return;const n=t[Ic].indexOf(e);-1!==n&&t[Ic].splice(n,1)}(this._lView,e)}}function tM(){return new eM(It())}function nM(){return _d(Ii(),It())}function _d(t,e){return new ui(Qs(t,e))}let ui=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=nM}return t})();function Ow(t){return t instanceof ui?t.nativeElement:t}function Kh(t){return e=>{setTimeout(t,void 0,e)}}const _n=class iM extends qt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,zb()&&(this.destroyRef=Ut(md,{optional:!0})??void 0)}emit(e){const n=K(null);try{super.next(e)}finally{K(n)}}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Kh(s),r&&(r=Kh(r)),o&&(o=Kh(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Bt&&e.add(a),a}};function rM(){return this._results[Symbol.iterator]()}class Jh{static#e=Symbol.iterator;get changes(){return this._changes??=new _n}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const n=Jh.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=rM)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;const i=function fo(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function vp(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function tg(t){return!(128&~t.flags)}const ig=new Map;let oM=0;const Y_="__ngContext__";function zs(t,e){ir(e)?(t[Y_]=e[Dh],function aM(t){ig.set(t[Dh],t)}(e)):t[Y_]=e}function ef(t){return Gw(t[Ih])}function Hw(t){return Gw(t[Oa])}function Gw(t){for(;null!==t&&!gs(t);)t=t[Oa];return t}let og;const ag=new St("",{providedIn:"root",factory:()=>cg}),cg="ng",nf=new St(""),nc=new St("",{providedIn:"platform",factory:()=>"unknown"}),ic=new St(""),lg=new St("",{providedIn:"root",factory:()=>function ul(){if(void 0!==og)return og;if(typeof document<"u")return document;throw new $e(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Rc=()=>null;function sy(t,e,n=!1){return Rc(t,e,n)}const Zw=new St("",{providedIn:"root",factory:()=>!1});let mu;function La(t){return function eo(){if(void 0===mu&&(mu=null,Bn.trustedTypes))try{mu=Bn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return mu}()?.createHTML(t)||t}class hl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rt})`}}class fa extends hl{getTypeName(){return"HTML"}}class Qw extends hl{getTypeName(){return"Style"}}class NM extends hl{getTypeName(){return"Script"}}class Di extends hl{getTypeName(){return"URL"}}class PM extends hl{getTypeName(){return"ResourceURL"}}function Mo(t){return t instanceof hl?t.changingThisBreaksApplicationSecurity:t}function Xo(t,e){const n=function FM(t){return t instanceof hl&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${rt})`)}return n===e}class VM{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const n=(new window.DOMParser).parseFromString(La(e),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}}class HM{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const n=this.inertDocument.createElement("template");return n.innerHTML=La(e),n}}const zM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mg(t){return(t=String(t)).match(zM)?t:"unsafe:"+t}function Oc(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function _u(...t){const e={};for(const n of t)for(const i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}const tx=Oc("area,br,col,hr,img,wbr"),_g=Oc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),nx=Oc("rp,rt"),$s=_u(tx,_u(_g,Oc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_u(nx,Oc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),_u(nx,_g)),hy=Oc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),fy=_u(hy,Oc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Oc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),WM=Oc("script,style,template");class $M{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0,r=[];for(;n;)if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild)r.push(n),n=XM(n);else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let s=ix(n);if(s){n=s;break}n=r.pop()}return this.buf.join("")}startElement(e){const n=rx(e).toLowerCase();if(!$s.hasOwnProperty(n))return this.sanitizedSomething=!0,!WM.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!fy.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;hy[a]&&(c=mg(c)),this.buf.push(" ",o,'="',cx(c),'"')}return this.buf.push(">"),!0}endElement(e){const n=rx(e).toLowerCase();$s.hasOwnProperty(n)&&!tx.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(cx(e))}}function ix(t){const e=t.nextSibling;if(e&&t!==e.previousSibling)throw sx(e);return e}function XM(t){const e=t.firstChild;if(e&&function qM(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(t,e))throw sx(e);return e}function rx(t){const e=t.nodeName;return"string"==typeof e?e:"FORM"}function sx(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}const ox=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ax=/([^\#-~ |!])/g;function cx(t){return t.replace(/&/g,"&amp;").replace(ox,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(ax,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yg;function lx(t,e){let n=null;try{yg=yg||function ex(t){const e=new HM(t);return function GM(){try{return!!(new window.DOMParser).parseFromString(La(""),"text/html")}catch{return!1}}()?new VM(e):e}(t);let i=e?String(e):"";n=yg.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=yg.getInertBodyElement(i)}while(i!==s);return La((new $M).sanitizeChildren(py(n)||n))}finally{if(n){const i=py(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function py(t){return"content"in t&&function wd(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var Ns=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ns||{});function gy(t){const e=function cf(){const t=It();return t&&t[Zs].sanitizer}();return e?e.sanitize(Ns.URL,t)||"":Xo(t,"URL")?Mo(t):mg(xn(t))}const QM=/^>|^->|<!--|-->|--!>|<!-$/g,eT=/(<|>)/g,tT="\u200b$1\u200b";var fl=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(fl||{});let wy;function xy(t,e){return wy(t,e)}function Ed(t,e,n,i,r){if(null!=i){let s,o=!1;gs(i)?s=i:ir(i)&&(o=!0,i=i[pr]);const a=Ui(i);0===t&&null!==n?null==r?Cx(e,n,a):yu(e,n,a,r||null,!0):1===t&&null!==n?yu(e,n,a,r||null,!0):2===t?function Rt(t,e,n){const i=wg(t,e);i&&function _T(t,e,n,i){t.removeChild(e,n,i)}(t,i,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function zn(t,e,n,i,r){const s=n[Ka];s!==Ui(n)&&Ed(e,t,i,s,r);for(let a=xr;a<n.length;a++){const c=n[a];Kt(c[$t],c,t,e,i,s)}}(e,t,s,n,r)}}function df(t,e){return t.createComment(function px(t){return t.replace(QM,e=>e.replace(eT,tT))}(e))}function Ad(t,e,n){return t.createElement(e,n)}function Ex(t,e){e[Zs].changeDetectionScheduler?.notify(1),Kt(t,e,e[An],2,null,null)}function Ax(t,e){const n=t[Tr],i=n.indexOf(e);n.splice(i,1)}function hf(t,e){if(t.length<=xr)return;const n=xr+e,i=t[n];if(i){const r=i[su];null!==r&&r!==t&&Ax(r,i),e>0&&(t[n-1][Oa]=i[Oa]);const s=Ec(t,xr+e);!function uT(t,e){Ex(t,e),e[pr]=null,e[Rs]=null}(i[$t],i);const o=s[Wr];null!==o&&o.detachView(s[$t]),i[Fr]=null,i[Oa]=null,i[mn]&=-129}return i}function bg(t,e){if(!(256&e[mn])){const n=e[An];n.destroyNode&&Kt(t,e,n,3,null,null),function hT(t){let e=t[Ih];if(!e)return Ay(t[$t],t);for(;e;){let n=null;if(ir(e))n=e[Ih];else{const i=e[xr];i&&(n=i)}if(!n){for(;e&&!e[Oa]&&e!==t;)ir(e)&&Ay(e[$t],e),e=e[Fr];null===e&&(e=t),ir(e)&&Ay(e[$t],e),n=e&&e[Oa]}e=n}}(e)}}function Ay(t,e){if(256&e[mn])return;const n=K(null);try{e[mn]&=-129,e[mn]|=256,e[yo]&&Ye(e[yo]),function mT(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof es)){const s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];ca(4,a,c);try{c.call(a)}finally{ca(5,a,c)}}else{ca(4,r,s);try{s.call(r)}finally{ca(5,r,s)}}}}}(t,e),function gT(t,e){const n=t.cleanup,i=e[ud];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else n[s].call(i[n[s+1]]);null!==i&&(e[ud]=null);const r=e[Ic];if(null!==r){e[Ic]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(t,e),1===e[$t].type&&e[An].destroy();const i=e[su];if(null!==i&&gs(e[Fr])){i!==e[Fr]&&Ax(i,e);const r=e[Wr];null!==r&&r.detachView(t)}!function cM(t){ig.delete(t[Dh])}(e)}finally{K(n)}}function Sy(t,e,n){return function Sx(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[pr];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=t.data[i.directiveStart+r];if(s===Da.None||s===Da.Emulated)return null}return Qs(i,n)}}(t,e.parent,n)}function yu(t,e,n,i,r){t.insertBefore(e,n,i,r)}function Cx(t,e,n){t.appendChild(e,n)}function Mx(t,e,n,i,r){null!==i?yu(t,e,n,i,r):Cx(t,e,n)}function wg(t,e){return t.parentNode(e)}function d(t,e,n){return _(t,e,n)}let V,_=function p(t,e,n){return 40&t.type?Qs(t,n):null};function Pe(t,e,n,i){const r=Sy(t,i,e),s=e[An],a=d(i.parent||e[Rs],i,e);if(null!=r)if(Array.isArray(n))for(let c=0;c<n.length;c++)Mx(s,r,n[c],a,!1);else Mx(s,r,n,a,!1);void 0!==V&&V(s,i,e,n,r)}function Xe(t,e){if(null!==e){const n=e.type;if(3&n)return Qs(e,t);if(4&n)return gt(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return Xe(t,i);{const r=t[e.index];return gs(r)?gt(-1,r):Ui(r)}}if(32&n)return xy(e,t)()||Ui(t[e.index]);{const i=at(t,e);return null!==i?Array.isArray(i)?i[0]:Xe(bo(t[wi]),i):Xe(t,e.next)}}return null}function at(t,e){return null!==e?t[wi][Rs].projection[e.projection]:null}function gt(t,e){const n=xr+t+1;if(n<e.length){const i=e[n],r=i[$t].firstChild;if(null!==r)return Xe(i,r)}return e[Ka]}function Vt(t,e,n,i,r,s,o){for(;null!=n;){const a=i[n.index],c=n.type;if(o&&0===e&&(a&&zs(Ui(a),i),n.flags|=2),32&~n.flags)if(8&c)Vt(t,e,n.child,i,r,s,!1),Ed(e,t,r,a,s);else if(32&c){const l=xy(n,i);let u;for(;u=l();)Ed(e,t,r,u,s);Ed(e,t,r,a,s)}else 16&c?Sn(t,e,i,n,r,s):Ed(e,t,r,a,s);n=o?n.projectionNext:n.next}}function Kt(t,e,n,i,r,s){Vt(n,i,t.firstChild,e,r,s,!1)}function Sn(t,e,n,i,r,s){const o=n[wi],c=o[Rs].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Ed(e,t,r,c[l],s);else{let l=c;const u=o[Fr];tg(i)&&(l.flags|=128),Vt(t,e,l,u,r,s,!0)}}function si(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function To(t,e,n){const{mergedAttrs:i,classes:r,styles:s}=n;null!==i&&g_(t,e,i),null!==r&&si(t,e,r),null!==s&&function Zn(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}const hn={};function bn(t=1){Dr(Jn(),It(),ys()+t,!1)}function Dr(t,e,n,i){if(!i)if(3&~e[mn]){const s=t.preOrderHooks;null!==s&&$p(e,s,0,n)}else{const s=t.preOrderCheckHooks;null!==s&&Gh(e,s,n)}tc(n)}function st(t,e=ii.Default){const n=It();return null===n?lt(t,e):gw(Ii(),n,wn(t),e)}function Cy(t,e,n,i,r,s){const o=K(null);try{let a=null;r&Yt.SignalBased&&(a=e[i][X]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),r&Yt.HasDecoratorInputTransform&&(s=t.inputTransforms[i].call(e,s)),null!==t.setInput?t.setInput(e,a,s,n,i):Yb(e,a,i,s)}finally{K(o)}}function Tx(t,e,n,i,r,s,o,a,c,l,u){const h=e.blueprint.slice();return h[pr]=r,h[mn]=204|i,(null!==l||t&&2048&t[mn])&&(h[mn]|=2048),Bh(h),h[Fr]=h[dd]=t,h[qi]=n,h[Zs]=o||t&&t[Zs],h[An]=a||t&&t[An],h[Qr]=c||t&&t[Qr]||null,h[Rs]=s,h[Dh]=function rg(){return oM++}(),h[_o]=u,h[x_]=l,h[wi]=2==e.type?t[wi]:h,h}function xg(t,e,n,i,r){let s=t.data[e];if(null===s)s=function vT(t,e,n,i,r){const s=R_(),o=ll(),c=t.data[e]=function sK(t,e,n,i,r,s){let o=e?e.injectorIndex:-1,a=0;return uu()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(t,e,n,i,r),function jC(){return Dn.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const o=function jh(){const t=Dn.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Fa(s,!0),s}function My(t,e,n,i){if(0===n)return-1;const r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function wB(t,e,n,i,r){const s=ys(),o=2&i;try{tc(-1),o&&e.length>Fn&&Dr(t,e,Fn,!1),ca(o?2:0,r),n(i,r)}finally{tc(s),ca(o?3:1,r)}}function bT(t,e,n){if(hd(e)){const i=K(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{K(i)}}}function wT(t,e,n){D_()&&(function hK(t,e,n,i){const r=n.directiveStart,s=n.directiveEnd;Wo(n)&&function vK(t,e,n){const i=Qs(e,t),r=xB(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Ix(t,Tx(t,r,null,o,i,e,null,t[Zs].rendererFactory.createRenderer(i,n),null,null,null));t[e.index]=a}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||qh(n,e),zs(i,e);const o=n.initialInputs;for(let a=r;a<s;a++){const c=t.data[a],l=pu(e,t,a,n);zs(l,e),null!==o&&bK(0,a-r,l,c,0,o),rr(c)&&(vo(n.index,e)[qi]=pu(e,t,a,n))}}(t,e,n,Qs(n,e)),!(64&~n.flags)&&MB(t,e,n))}function xT(t,e,n=Qs){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(e,t):t[o];t[r++]=a}}}function xB(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=ET(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ET(t,e,n,i,r,s,o,a,c,l,u){const h=Fn+i,f=h+r,g=function QY(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:hn);return n}(h,f),m="function"==typeof l?l():l;return g[$t]={type:t,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}let EB=()=>null;function AB(t,e,n,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;i??={};let a,c=Yt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(null!==r){if(!r.hasOwnProperty(s))continue;l=r[s]}0===t?SB(i,n,l,a,c):SB(i,n,l,a)}return i}function SB(t,e,n,i,r){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,i):s=t[n]=[e,i],void 0!==r&&s.push(r)}function pa(t,e,n,i,r,s,o,a){const c=Qs(e,n);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(TT(t,n,u,i,r),Wo(e)&&function cK(t,e){const n=vo(e,t);16&n[mn]||(n[mn]|=64)}(n,e.index)):3&e.type&&(i=function aK(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function AT(t,e,n,i){if(D_()){const r=null===i?null:{"":-1},s=function pK(t,e){const n=t.directiveRegistry;let i=null,r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(Sc(e,o.selectors,!1))if(i||(i=[]),rr(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),ST(t,e,a.length)}else i.unshift(o),ST(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&CB(t,e,n,o,r,a),r&&function gK(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const s=n[e[r+1]];if(null==s)throw new $e(-301,!1);i.push(e[r],s)}}}(n,i,r)}n.mergedAttrs=il(n.mergedAttrs,n.attrs)}function CB(t,e,n,i,r,s){for(let l=0;l<i.length;l++)da(qh(n,e),t,i[l].type);!function _K(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,i.length);for(let l=0;l<i.length;l++){const u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=My(t,e,i.length,null);for(let l=0;l<i.length;l++){const u=i[l];n.mergedAttrs=il(n.mergedAttrs,u.hostAttrs),yK(t,n,e,c,u),mK(c,u,r),null!==u.contentQueries&&(n.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=64);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function oK(t,e,n){const r=e.directiveEnd,s=t.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<r;u++){const h=s[u],f=n?n.get(h):null,m=f?f.outputs:null;c=AB(0,h.inputs,u,c,f?f.inputs:null),l=AB(1,h.outputs,u,l,m);const y=null===c||null===o||ad(e)?null:wK(c,u,o);a.push(y)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(t,n,s)}function MB(t,e,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=function sw(){return Dn.lFrame.currentDirectiveIndex}();try{tc(s);for(let a=i;a<r;a++){const c=t.data[a],l=e[a];Vh(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&fK(c,l)}}finally{tc(-1),Vh(o)}}function fK(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function ST(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function mK(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;rr(e)&&(n[""]=t)}}function yK(t,e,n,i,r){t.data[i]=r;const s=r.factory||(r.factory=ho(r.type)),o=new es(s,rr(r),st);t.blueprint[i]=o,n[i]=o,function uK(t,e,n,i,r){const s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function dK(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,i,s)}}(t,e,i,My(t,n,r.hostVars,hn),r)}function pl(t,e,n,i,r,s){const o=Qs(t,e);!function CT(t,e,n,i,r,s,o){if(null==s)t.removeAttribute(e,r,n);else{const a=null==o?xn(s):o(s,i||"",r);t.setAttribute(e,r,a,n)}}(e[An],o,s,t.value,n,i,r)}function bK(t,e,n,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)Cy(i,n,o[a++],o[a++],o[a++],o[a++])}function wK(t,e,n){let i=null,r=0;for(;r<n.length;){const s=n[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===i&&(i=[]);const o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function TB(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function IB(t,e){const n=t.contentQueries;if(null!==n){const i=K(null);try{for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const a=t.data[o];ua(n[r]),a.contentQueries(2,e[o],o)}}}finally{K(i)}}}function Ix(t,e){return t[Ih]?t[w_][Oa]=e:t[Ih]=e,t[w_]=e,e}function MT(t,e,n){ua(0);const i=K(null);try{e(t,n)}finally{K(i)}}function DB(t){return t[ud]||(t[ud]=[])}function RB(t){return t.cleanup||(t.cleanup=[])}function Dx(t,e){const n=t[Qr],i=n?n.get(Ao,null):null;i&&i.handleError(e)}function TT(t,e,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=n[s++];Cy(t.data[o],e[o],i,a,c,r)}}function xK(t,e){const n=vo(e,t),i=n[$t];!function EK(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n);const r=n[pr];null!==r&&null===n[_o]&&(n[_o]=sy(r,n[Qr])),IT(i,n,n[qi])}function IT(t,e,n){L_(e);try{const i=t.viewQuery;null!==i&&MT(1,i,n);const r=t.template;null!==r&&wB(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Wr]?.finishViewCreation(t),t.staticContentQueries&&IB(t,e),t.staticViewQueries&&MT(2,t.viewQuery,n);const s=t.components;null!==s&&function AK(t,e){for(let n=0;n<e.length;n++)xK(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[mn]&=-5,Hh()}}function Ty(t,e,n,i){const r=K(null);try{const s=e.tView,c=Tx(t,s,n,4096&t[mn]?4096:16,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);c[su]=t[e.index];const u=t[Wr];return null!==u&&(c[Wr]=u.createEmbeddedView(s)),IT(s,c,n),c}finally{K(r)}}function Eg(t,e){return!e||null===e.firstChild||tg(t)}function Iy(t,e,n,i=!0){const r=e[$t];if(function fT(t,e,n,i){const r=xr+i,s=n.length;i>0&&(n[r-1][Oa]=e),i<s-xr?(e[Oa]=n[r],Ob(n,xr+i,e)):(n.push(e),e[Oa]=null),e[Fr]=n;const o=e[su];null!==o&&n!==o&&function pT(t,e){const n=t[Tr];e[wi]!==e[Fr][Fr][wi]&&(t[mn]|=Np.HasTransplantedViews),null===n?t[Tr]=[e]:n.push(e)}(o,e);const a=e[Wr];null!==a&&a.insertView(t),kh(e),e[mn]|=128}(r,e,t,n),i){const o=gt(n,t),a=e[An],c=wg(a,t[Ka]);null!==c&&function dT(t,e,n,i,r,s){i[pr]=r,i[Rs]=e,Kt(t,i,n,1,r,s)}(r,t[Rs],a,e,c,o)}const s=e[_o];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function Dy(t,e,n,i,r=!1){for(;null!==n;){const s=e[n.index];null!==s&&i.push(Ui(s)),gs(s)&&PB(s,i);const o=n.type;if(8&o)Dy(t,e,n.child,i);else if(32&o){const a=xy(n,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=at(e,n);if(Array.isArray(a))i.push(...a);else{const c=bo(e[wi]);Dy(c[$t],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function PB(t,e){for(let n=xr;n<t.length;n++){const i=t[n],r=i[$t].firstChild;null!==r&&Dy(i[$t],i,r,e)}t[Ka]!==t[pr]&&e.push(t[Ka])}let FB=[];const TK={...w,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{lu(t.lView)},consumerOnSignalRead(){this.lView[yo]=this}},LB=100;function Rx(t,e=!0,n=0){const i=t[Zs],r=i.rendererFactory;r.begin?.();try{!function IK(t,e){RT(t,e);let n=0;for(;Up(t);){if(n===LB)throw new $e(103,!1);n++,RT(t,1)}}(t,n)}catch(o){throw e&&Dx(t,o),o}finally{r.end?.(),i.inlineEffectRunner?.flush()}}function DK(t,e,n,i){const r=e[mn];if(!(256&~r))return;e[Zs].inlineEffectRunner?.flush(),L_(e);let o=null,a=null;(function RK(t){return 2!==t.type})(t)&&(a=function SK(t){return t[yo]??function CK(t){const e=FB.pop()??Object.create(TK);return e.lView=t,e}(t)}(e),o=we(a));try{Bh(e),function Uh(t){return Dn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&wB(t,e,n,2,i);const c=!(3&~r);if(c){const h=t.preOrderCheckHooks;null!==h&&Gh(e,h,null)}else{const h=t.preOrderHooks;null!==h&&$p(e,h,0,null),qp(e,0)}if(function OK(t){for(let e=ef(t);null!==e;e=Hw(e)){if(!(e[mn]&Np.HasTransplantedViews))continue;const n=e[Tr];for(let i=0;i<n.length;i++){tw(n[i])}}}(e),BB(e,0),null!==t.contentQueries&&IB(t,e),c){const h=t.contentCheckHooks;null!==h&&Gh(e,h)}else{const h=t.contentHooks;null!==h&&$p(e,h,1),qp(e,1)}!function ZY(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const r=n[i];if(r<0)tc(~r);else{const s=r,o=n[++i],a=n[++i];Vp(o,s),a(2,e[s])}}}finally{tc(-1)}}(t,e);const l=t.components;null!==l&&jB(e,l,0);const u=t.viewQuery;if(null!==u&&MT(2,u,i),c){const h=t.viewCheckHooks;null!==h&&Gh(e,h)}else{const h=t.viewHooks;null!==h&&$p(e,h,2),qp(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[al]){for(const h of e[al])h();e[al]=null}e[mn]&=-73}catch(c){throw lu(e),c}finally{null!==a&&(Oe(a,o),function MK(t){t.lView[yo]!==t&&(t.lView=null,FB.push(t))}(a)),Hh()}}function BB(t,e){for(let n=ef(t);null!==n;n=Hw(n))for(let i=xr;i<n.length;i++)kB(n[i],e)}function NK(t,e,n){kB(vo(e,t),n)}function kB(t,e){Ja(t)&&RT(t,e)}function RT(t,e){const i=t[$t],r=t[mn],s=t[yo];let o=!!(0===e&&16&r);if(o||=!!(64&r&&0===e),o||=!!(1024&r),o||=!(!s?.dirty||!ke(s)),s&&(s.dirty=!1),t[mn]&=-9217,o)DK(i,t,i.template,t[qi]);else if(8192&r){BB(t,1);const a=i.components;null!==a&&jB(t,a,1)}}function jB(t,e,n){for(let i=0;i<e.length;i++)NK(t,e[i],n)}function Ry(t){for(t[Zs].changeDetectionScheduler?.notify();t;){t[mn]|=64;const e=bo(t);if(Nh(t)&&!e)return t;t=e}return null}class Oy{get rootNodes(){const e=this._lView,n=e[$t];return Dy(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[qi]}set context(e){this._lView[qi]=e}get destroyed(){return!(256&~this._lView[mn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Fr];if(gs(e)){const n=e[8],i=n?n.indexOf(this):-1;i>-1&&(hf(e,i),Ec(n,i))}this._attachedToViewContainer=!1}bg(this._lView[$t],this._lView)}onDestroy(e){Pa(this._lView,e)}markForCheck(){Ry(this._cdRefInjectingView||this._lView)}detach(){this._lView[mn]&=-129}reattach(){kh(this._lView),this._lView[mn]|=128}detectChanges(){this._lView[mn]|=1024,Rx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Ex(this._lView[$t],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $e(902,!1);this._appRef=e,kh(this._lView)}}let cc=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=LK}return t})();const PK=cc,FK=class extends PK{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){const r=Ty(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new Oy(r)}};function LK(){return Ox(Ii(),It())}function Ox(t,e){return 4&t.type?new FK(e,t,_d(t,e)):null}let WB=()=>null;function Ag(t,e){return WB(t,e)}class BT{}class oJ{}class $B{}class cJ{resolveComponentFactory(e){throw function aJ(t){const e=Error(`No component factory found for ${tr(t)}.`);return e.ngComponent=t,e}(e)}}let Sd=(()=>{class t{static#e=this.NULL=new cJ}return t})();class XB{}let bu=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function lJ(){const t=It(),n=vo(Ii().index,t);return(ir(n)?n:t)[An]}()}return t})(),uJ=(()=>{class t{static#e=this.\u0275prov=Pt({token:t,providedIn:"root",factory:()=>null})}return t})();const kT={},YB=new Set;function gl(t){YB.has(t)||(YB.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function KB(...t){}class yn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _n(!1),this.onMicrotaskEmpty=new _n(!1),this.onStable=new _n(!1),this.onError=new _n(!1),typeof Zone>"u")throw new $e(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function dJ(){const t="function"==typeof Bn.requestAnimationFrame;let e=Bn[t?"requestAnimationFrame":"setTimeout"],n=Bn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function pJ(t){const e=()=>{!function fJ(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Bn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,UT(t),t.isCheckStableRunning=!0,jT(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),UT(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{if(function gJ(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(r,s,o,a);try{return JB(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),ZB(t)}},onInvoke:(n,i,r,s,o,a,c)=>{try{return JB(t),n.invoke(r,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),ZB(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,UT(t),jT(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yn.isInAngularZone())throw new $e(909,!1)}static assertNotInAngularZone(){if(yn.isInAngularZone())throw new $e(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,hJ,KB,KB);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const hJ={};function jT(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function UT(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function JB(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ZB(t){t._nesting--,jT(t)}class QB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _n,this.onMicrotaskEmpty=new _n,this.onStable=new _n,this.onError=new _n}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}let By=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of n)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Pt({token:t,providedIn:"root",factory:()=>new t})}return t})();function kx(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Ta(r,a):2==s&&(i=Ta(i,a+": "+e[++o]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}class sk extends Sd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Hn(e);return new Uy(n,this.ngModule)}}function ok(t){const e=[];for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n];void 0!==i&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}class jx{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Eh(i);const r=this.injector.get(e,kT,i);return r!==kT||n===kT?r:this.parentInjector.get(e,n,i)}}class Uy extends $B{get inputs(){const e=this.componentDef,n=e.inputTransforms,i=ok(e.inputs);if(null!==n)for(const r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return ok(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function kb(t){return t.map(Sp).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){const s=K(null);try{let o=(r=r||this.ngModule)instanceof Ds?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new jx(e,o):e,c=a.get(XB,null);if(null===c)throw new $e(407,!1);const l=a.get(uJ,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:a.get(By,null),changeDetectionScheduler:a.get(BT,null)},g=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",y=i?function eK(t,e,n,i){const s=i.get(Zw,!1)||n===Da.ShadowDom,o=t.selectRootElement(e,s);return function tK(t){EB(t)}(o),o}(g,i,this.componentDef.encapsulation,a):Ad(g,m,function wJ(t){const e=t.toLowerCase();return"svg"===e?Gn:"math"===e?"math":null}(m));let b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let R=null;null!==y&&(R=sy(y,a,!0));const L=ET(0,null,null,1,0,null,null,null,null,null,null),ie=Tx(null,L,null,b,null,null,f,g,a,null,R);let q,Ee;L_(ie);try{const Re=this.componentDef;let tt,dt=null;Re.findHostDirectiveDefs?(tt=[],dt=new Map,Re.findHostDirectiveDefs(Re,tt,dt),tt.push(Re)):tt=[Re];const We=function EJ(t,e){const n=t[$t],i=Fn;return t[i]=e,xg(n,i,2,"#host",null)}(ie,y),ht=function AJ(t,e,n,i,r,s,o){const a=r[$t];!function SJ(t,e,n,i){for(const r of t)e.mergedAttrs=il(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(kx(e,e.mergedAttrs,!0),null!==n&&To(i,n,e))}(i,t,e,o);let c=null;null!==e&&(c=sy(e,r[Qr]));const l=s.rendererFactory.createRenderer(e,n);let u=16;n.signals?u=4096:n.onPush&&(u=64);const h=Tx(r,xB(n),null,u,r[t.index],t,s,l,null,null,c);return a.firstCreatePass&&ST(a,t,i.length-1),Ix(r,h),r[t.index]=h}(We,y,Re,tt,ie,f,g);Ee=au(L,Fn),y&&function MJ(t,e,n,i){if(i)g_(t,n,["ng-version","17.3.4"]);else{const{attrs:r,classes:s}=function Ch(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&e.push(s,t[++i]):8===r&&n.push(s);else{if(!Ra(r))break;r=s}i++}return{attrs:e,classes:n}}(e.selectors[0]);r&&g_(t,n,r),s&&s.length>0&&si(t,n,s.join(" "))}}(g,Re,y,i),void 0!==n&&function TJ(t,e,n){const i=t.projection=[];for(let r=0;r<e.length;r++){const s=n[r];i.push(null!=s?Array.from(s):null)}}(Ee,this.ngContentSelectors,n),q=function CJ(t,e,n,i,r,s){const o=Ii(),a=r[$t],c=Qs(o,r);CB(a,r,o,n,null,i);for(let u=0;u<n.length;u++)zs(pu(r,a,o.directiveStart+u,o),r);MB(a,r,o),c&&zs(c,r);const l=pu(r,a,o.directiveStart+o.componentOffset,o);if(t[qi]=r[qi]=l,null!==s)for(const u of s)u(l,e);return bT(a,o,r),l}(ht,Re,tt,dt,ie,[IJ]),IT(L,ie,null)}finally{Hh()}return new xJ(this.componentType,q,_d(Ee,ie),ie,Ee)}finally{K(s)}}}class xJ extends oJ{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Oy(r,void 0,!1),this.componentType=e}setInput(e,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;TT(s[$t],s,r,e,n),this.previousInputValues.set(e,n),Ry(vo(this._tNode.index,s))}}get injector(){return new ts(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function IJ(){const t=Ii();Wp(It()[$t],t)}let Io=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=DJ}return t})();function DJ(){return lk(Ii(),It())}const RJ=Io,ak=class extends RJ{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return _d(this._hostTNode,this._hostLView)}get injector(){return new ts(this._hostTNode,this._hostLView)}get parentInjector(){const e=Yh(this._hostTNode,this._hostLView);if(Yp(e)){const n=Wh(e,this._hostLView),i=zh(e);return new ts(n[$t].data[i+8],n)}return new ts(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=ck(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-xr}createEmbeddedView(e,n,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=Ag(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,r,Eg(this._hostTNode,o)),a}createComponent(e,n,i,r,s){const o=e&&!function Th(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const m=n||{};a=m.index,i=m.injector,r=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef}const c=o?e:new Uy(Hn(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const y=(o?l:this.parentInjector).get(Ds,null);y&&(s=y)}const u=Hn(c.componentType??{}),h=Ag(this._lContainer,u?.id??null),g=c.create(l,r,h?.firstChild??null,s);return this.insertImpl(g.hostView,a,Eg(this._hostTNode,h)),g}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){const r=e._lView;if(function M_(t){return gs(t[Fr])}(r)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=r[Fr],l=new ak(c,c[Rs],c[Fr]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;return Iy(o,r,s,i),e.attachToViewContainerRef(),Ob(zT(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=ck(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=hf(this._lContainer,n);i&&(Ec(zT(this._lContainer),n),bg(i[$t],i))}detach(e){const n=this._adjustIndex(e,-1),i=hf(this._lContainer,n);return i&&null!=Ec(zT(this._lContainer),n)?new Oy(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function ck(t){return t[8]}function zT(t){return t[8]||(t[8]=[])}function lk(t,e){let n;const i=e[t.index];return gs(i)?n=i:(n=TB(i,e,null,t),e[t.index]=n,Ix(e,n)),uk(n,e,t,i),new ak(n,t,e)}let uk=function hk(t,e,n,i){if(t[Ka])return;let r;r=8&n.type?Ui(i):function OJ(t,e){const n=t[An],i=n.createComment(""),r=Qs(e,t);return yu(n,wg(n,r),i,function yT(t,e){return t.nextSibling(e)}(n,r),!1),i}(e,n),t[Ka]=r},WT=()=>!1;class $T{constructor(e){this.queryList=e,this.matches=null}clone(){return new $T(this.queryList)}setDirty(){this.queryList.setDirty()}}class qT{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){const o=n.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new qT(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==QT(e,n).matches&&this.queries[n].setDirty()}}class fk{constructor(e,n,i=null){this.flags=n,this.read=i,this.predicate="string"==typeof e?function UJ(t){return t.split(",").map(e=>e.trim())}(e):e}}class XT{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new XT(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class KT{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new KT(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,n,LJ(n,s)),this.matchTNodeWithReadOption(e,n,Zp(n,e,s,!1,!1))}else i===cc?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Zp(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===ui||r===Io||r===cc&&4&n.type)this.addMatch(n.index,-2);else{const s=Zp(n,e,r,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function LJ(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function kJ(t,e,n,i){return-1===n?function BJ(t,e){return 11&t.type?_d(t,e):4&t.type?Ox(t,e):null}(e,t):-2===n?function jJ(t,e,n){return n===ui?_d(e,t):n===cc?Ox(e,t):n===Io?lk(e,t):void 0}(t,e,i):pu(t,t[$t],n,e)}function pk(t,e,n,i){const r=e[Wr].queries[i];if(null===r.matches){const s=t.data,o=n.matches,a=[];for(let c=0;null!==o&&c<o.length;c+=2){const l=o[c];a.push(l<0?null:kJ(e,s[l],o[c+1],n.metadata.read))}r.matches=a}return r.matches}function JT(t,e,n,i){const r=t.queries.getByIndex(n),s=r.matches;if(null!==s){const o=pk(t,e,r,n);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let h=xr;h<u.length;h++){const f=u[h];f[su]===f[Fr]&&JT(f[$t],f,l,i)}if(null!==u[Tr]){const h=u[Tr];for(let f=0;f<h.length;f++){const g=h[f];JT(g[$t],g,l,i)}}}}}return i}function gk(t,e,n){const i=new Jh(!(4&~n));return function rK(t,e,n,i){const r=DB(e);r.push(n),t.firstCreatePass&&RB(t).push(i,r.length-1)}(t,e,i,i.destroy),(e[Wr]??=new qT).queries.push(new $T(i))-1}function yk(t,e,n){null===t.queries&&(t.queries=new XT),t.queries.track(new KT(e,n))}function QT(t,e){return t.queries.getByIndex(e)}function vk(t,e){const n=t[$t],i=QT(n,e);return i.crossesNgTemplate?JT(n,t,e,[]):pk(n,t,i,e)}function Ux(t){return"function"==typeof t&&void 0!==t[X]}function di(t){let e=function Ok(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const i=[t];for(;e;){let r;if(rr(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $e(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);const o=t;o.inputs=Hx(t.inputs),o.inputTransforms=Hx(t.inputTransforms),o.declaredInputs=Hx(t.declaredInputs),o.outputs=Hx(t.outputs);const a=r.hostBindings;a&&nZ(t,a);const c=r.viewQuery,l=r.contentQueries;if(c&&eZ(t,c),l&&tZ(t,l),ZJ(t,r),el(t.outputs,r.outputs),rr(r)&&r.data.animation){const u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===di&&(n=!1)}}e=Object.getPrototypeOf(e)}!function QJ(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=il(r.hostAttrs,n=il(n,r.hostAttrs))}}(i)}function ZJ(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const i=e.inputs[n];if(void 0!==i&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],null!==e.inputTransforms)){const r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function Hx(t){return t===xt?{}:t===zt?[]:t}function eZ(t,e){const n=t.viewQuery;t.viewQuery=n?(i,r)=>{e(i,r),n(i,r)}:e}function tZ(t,e){const n=t.contentQueries;t.contentQueries=n?(i,r,s)=>{e(i,r,s),n(i,r,s)}:e}function nZ(t,e){const n=t.hostBindings;t.hostBindings=n?(i,r)=>{e(i,r),n(i,r)}:e}function ml(t){const e=t.inputConfig,n={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}class pf{}class Lk{}class tI extends pf{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new sk(this);const r=function Vs(t,e){const n=t[Cb]||null;if(!n&&!0===e)throw new Error(`Type ${tr(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function Yi(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=Tw(e,n,[{provide:pf,useValue:this},{provide:Sd,useValue:this.componentFactoryResolver},...i],tr(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class nI extends Lk{constructor(e){super(),this.moduleType=e}create(e){return new tI(this.moduleType,e,[])}}class Bk extends pf{constructor(e){super(),this.componentFactoryResolver=new sk(this),this.instance=null;const n=new Mc([...e.providers,{provide:pf,useValue:this},{provide:Sd,useValue:this.componentFactoryResolver}],e.parent||Me(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}let Cg=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ye(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zx(t){return!!function rI(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function _l(t,e,n){return t[e]=n}function ns(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Ri(t,e,n,i,r,s,o,a){const c=It(),l=Jn(),u=t+Fn,h=l.firstCreatePass?function gZ(t,e,n,i,r,s,o,a,c){const l=e.consts,u=xg(e,t,4,o||null,Na(l,a));AT(e,n,u,Na(l,c)),Wp(e,u);const h=u.tView=ET(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,l,c,e,n,i,r,s,o):l.data[u];Fa(h,!1);const f=kk(l,c,h,t);fd()&&Pe(l,c,f,h),zs(f,c);const g=TB(f,c,f,h);return c[u]=g,Ix(c,g),function dk(t,e,n){return WT(t,e,n)}(g,h,c),Oh(h)&&wT(l,c,h),null!=o&&xT(c,h,a),Ri}let kk=function jk(t,e,n,i){return sr(!0),e[An].createComment("")};function kr(t,e,n,i){const r=It();return ns(r,qo(),e)&&(Jn(),pl(xi(),r,t,e,n,i)),kr}function Pg(t,e,n,i){return ns(t,qo(),n)?e+xn(n)+i:hn}function Jx(t,e){return t<<17|e<<2}function Id(t){return t>>17&32767}function pI(t){return 2|t}function _f(t){return(131068&t)>>2}function gI(t,e){return-131069&t|e<<2}function mI(t){return 1|t}function _3(t,e,n,i){const r=t[n+1],s=null===e;let o=i?Id(r):_f(r),a=!1;for(;0!==o&&(!1===a||s);){const l=t[o+1];eQ(t[o],e)&&(a=!0,t[o+1]=i?mI(l):pI(l)),o=i?Id(l):_f(l)}a&&(t[n+1]=i?pI(r):mI(r))}function eQ(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&Ac(t,e)>=0}const Ps={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function y3(t){return t.substring(Ps.key,Ps.keyEnd)}function tQ(t){return t.substring(Ps.value,Ps.valueEnd)}function v3(t,e){const n=Ps.textEnd;return n===e?-1:(e=Ps.keyEnd=function rQ(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Ps.key=e,n),Hg(t,e,n))}function b3(t,e){const n=Ps.textEnd;let i=Ps.key=Hg(t,e,n);return n===i?-1:(i=Ps.keyEnd=function sQ(t,e,n){let i;for(;e<n&&(45===(i=t.charCodeAt(e))||95===i||(-33&i)>=65&&(-33&i)<=90||i>=48&&i<=57);)e++;return e}(t,i,n),i=x3(t,i,n),i=Ps.value=Hg(t,i,n),i=Ps.valueEnd=function oQ(t,e,n){let i=-1,r=-1,s=-1,o=e,a=o;for(;o<n;){const c=t.charCodeAt(o++);if(59===c)return a;34===c||39===c?a=o=E3(t,c,o,n):e===o-4&&85===s&&82===r&&76===i&&40===c?a=o=E3(t,41,o,n):c>32&&(a=o),s=r,r=i,i=-33&c}return a}(t,i,n),x3(t,i,n))}function w3(t){Ps.key=0,Ps.keyEnd=0,Ps.value=0,Ps.valueEnd=0,Ps.textEnd=t.length}function Hg(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function x3(t,e,n,i){return(e=Hg(t,e,n))<n&&e++,e}function E3(t,e,n,i){let r=-1,s=n;for(;s<i;){const o=t.charCodeAt(s++);if(o==e&&92!==r)return s;r=92==o&&92===r?0:o}throw new Error}function Oi(t,e,n){const i=It();return ns(i,qo(),e)&&pa(Jn(),xi(),i,t,e,i[An],n,!1),Oi}function _I(t,e,n,i,r){const o=r?"class":"style";TT(t,n,e.inputs[o],o,i)}function qy(t,e,n){return Pc(t,e,n,!1),qy}function Er(t,e){return Pc(t,e,null,!0),Er}function aQ(t,e){for(let n=function iQ(t){return w3(t),b3(t,Hg(t,0,Ps.textEnd))}(e);n>=0;n=b3(e,n))C3(t,y3(e),tQ(e))}function yf(t){Fc(fQ,yl,t,!0)}function yl(t,e){for(let n=function nQ(t){return w3(t),v3(t,Hg(t,0,Ps.textEnd))}(e);n>=0;n=v3(e,n))zo(t,y3(e),!0)}function Pc(t,e,n,i){const r=It(),s=Jn(),o=la(2);s.firstUpdatePass&&S3(s,t,o,i),e!==hn&&ns(r,o,e)&&M3(s,s.data[ys()],r,r[An],t,r[o+1]=function gQ(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=tr(Mo(t)))),t}(e,n),i,o)}function Fc(t,e,n,i){const r=Jn(),s=la(2);r.firstUpdatePass&&S3(r,null,s,i);const o=It();if(n!==hn&&ns(o,s,n)){const a=r.data[ys()];if(I3(a,i)&&!A3(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(n=Ta(c,n||"")),_I(r,a,o,n,i)}else!function pQ(t,e,n,i,r,s,o,a){r===hn&&(r=zt);let c=0,l=0,u=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const f=c<r.length?r[c+1]:void 0,g=l<s.length?s[l+1]:void 0;let y,m=null;u===h?(c+=2,l+=2,f!==g&&(m=h,y=g)):null===h||null!==u&&u<h?(c+=2,m=u):(l+=2,m=h,y=g),null!==m&&M3(t,e,n,i,m,y,o,a),u=c<r.length?r[c]:null,h=l<s.length?s[l]:null}}(r,a,o,o[An],o[s+1],o[s+1]=function hQ(t,e,n){if(null==n||""===n)return zt;const i=[],r=Mo(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,s)}}function A3(t,e){return e>=t.expandoStartIndex}function S3(t,e,n,i){const r=t.data;if(null===r[n+1]){const s=r[ys()],o=A3(t,n);I3(s,i)&&null===e&&!o&&(e=!1),e=function cQ(t,e,n,i){const r=function P_(t){const e=Dn.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=Xy(n=yI(null,t,e,n,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==r)if(n=yI(r,t,e,n,i),null===s){let c=function lQ(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==_f(i))return t[Id(i)]}(t,e,i);void 0!==c&&Array.isArray(c)&&(c=yI(null,t,e,c[1],i),c=Xy(c,e.attrs,i),function uQ(t,e,n,i){t[Id(n?e.classBindings:e.styleBindings)]=i}(t,e,i,c))}else s=function dQ(t,e,n){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Xy(i,t[s].hostAttrs,n);return Xy(i,e.attrs,n)}(t,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),n}(r,s,e,i),function ZZ(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Id(o),c=_f(o);t[i]=n;let u,l=!1;if(Array.isArray(n)?(u=n[1],(null===u||Ac(n,u)>0)&&(l=!0)):u=n,r)if(0!==c){const f=Id(t[a+1]);t[i+1]=Jx(f,a),0!==f&&(t[f+1]=gI(t[f+1],i)),t[a+1]=function KZ(t,e){return 131071&t|e<<17}(t[a+1],i)}else t[i+1]=Jx(a,0),0!==a&&(t[a+1]=gI(t[a+1],i)),a=i;else t[i+1]=Jx(c,0),0===a?a=i:t[c+1]=gI(t[c+1],i),c=i;l&&(t[i+1]=pI(t[i+1])),_3(t,u,i,!0),_3(t,u,i,!1),function QZ(t,e,n,i,r){const s=r?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&Ac(s,e)>=0&&(n[i+1]=mI(n[i+1]))}(e,u,t,i,s),o=Jx(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,n,o,i)}}function yI(t,e,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],i=Xy(i,s.hostAttrs,r),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function Xy(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),zo(t,o,!!n||e[++s]))}return void 0===t?null:t}function C3(t,e,n){zo(t,e,Mo(n))}function fQ(t,e,n){const i=String(e);""!==i&&!i.includes(" ")&&zo(t,i,n)}function M3(t,e,n,i,r,s,o,a){if(!(3&e.type))return;const c=t.data,l=c[a+1],u=function JZ(t){return!(1&~t)}(l)?T3(c,e,n,r,_f(l),o):void 0;Zx(u)||(Zx(s)||function YZ(t){return!(2&~t)}(l)&&(s=T3(c,null,n,r,a,o)),function Tn(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=-1===i.indexOf("-")?void 0:fl.DashCase;null==r?t.removeStyle(n,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=fl.Important),t.setStyle(n,i,r,s))}}(i,o,Hs(ys(),n),r,s))}function T3(t,e,n,i,r,s){const o=null===e;let a;for(;r>0;){const c=t[r],l=Array.isArray(c),u=l?c[1]:c,h=null===u;let f=n[r+1];f===hn&&(f=h?zt:void 0);let g=h?p_(f,i):u===i?f:void 0;if(l&&!Zx(g)&&(g=p_(c,i)),Zx(g)&&(a=g,o))return a;const m=t[r+1];r=o?Id(m):_f(m)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=p_(c,i))}return a}function Zx(t){return void 0!==t}function I3(t,e){return!!(t.flags&(e?8:16))}function Fs(t,e,n){gl("NgControlFlow");const i=It(),r=qo(),s=function wI(t,e){return t[e]}(i,Fn+t);if(ns(i,r,e)){const a=K(null);try{if(function DT(t,e){const n=hf(t,e);return void 0!==n&&bg(n[$t],n),n}(s,0),-1!==e){const c=function xI(t,e){return au(t,e)}(i[$t],Fn+e),l=Ag(s,c.tView.ssrId);Iy(s,Ty(i,c,n,{dehydratedView:l}),0,Eg(c,l))}}finally{K(a)}}else{const a=function NB(t,e){const n=xr+e;if(n<t.length)return t[n]}(s,0);void 0!==a&&(a[qi]=n)}}function Rn(t,e,n,i){const r=It(),s=Jn(),o=Fn+t,a=r[An],c=s.firstCreatePass?function BQ(t,e,n,i,r,s){const o=e.consts,c=xg(e,t,2,i,Na(o,r));return AT(e,n,c,Na(o,s)),null!==c.attrs&&kx(c,c.attrs,!1),null!==c.mergedAttrs&&kx(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,e,n,i):s.data[o],l=N3(s,r,c,a,e,t);r[o]=l;const u=Oh(c);return Fa(c,!0),To(a,l,c),!function Gy(t){return!(32&~t.flags)}(c)&&fd()&&Pe(s,r,l,c),0===function NC(){return Dn.lFrame.elementDepthCount}()&&zs(l,r),function PC(){Dn.lFrame.elementDepthCount++}(),u&&(wT(s,r,c),bT(s,c,r)),null!==i&&xT(r,c),Rn}function Nn(){let t=Ii();ll()?du():(t=t.parent,Fa(t,!1));const e=t;(function LC(t){return Dn.skipHydrationRootTNode===t})(e)&&function Za(){Dn.skipHydrationRootTNode=null}(),function FC(){Dn.lFrame.elementDepthCount--}();const n=Jn();return n.firstCreatePass&&(Wp(n,t),hd(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function HC(t){return!!(8&t.flags)}(e)&&_I(n,e,It(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function GC(t){return!!(16&t.flags)}(e)&&_I(n,e,It(),e.stylesWithoutHost,!1),Nn}function ss(t,e,n,i){return Rn(t,e,n,i),Nn(),ss}let N3=(t,e,n,i,r,s)=>(sr(!0),Ad(i,r,function lw(){return Dn.lFrame.currentNamespace}()));function Yy(t,e,n){const i=It(),r=Jn(),s=t+Fn,o=r.firstCreatePass?function UQ(t,e,n,i,r){const s=e.consts,o=Na(s,i),a=xg(e,t,8,"ng-container",o);return null!==o&&kx(a,o,!0),AT(e,n,a,Na(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,n):r.data[s];Fa(o,!0);const a=F3(r,i,o,t);return i[s]=a,fd()&&Pe(r,i,a,o),zs(a,i),Oh(o)&&(wT(r,i,o),bT(r,o,i)),null!=n&&xT(i,o),Yy}function Ky(){let t=Ii();const e=Jn();return ll()?du():(t=t.parent,Fa(t,!1)),e.firstCreatePass&&(Wp(e,t),hd(t)&&e.queries.elementEnd(t)),Ky}let F3=(t,e,n,i)=>(sr(!0),df(e[An],""));function Dd(){return It()}function vf(t,e,n){const i=It();return ns(i,qo(),e)&&pa(Jn(),xi(),i,t,e,i[An],n,!0),vf}const zg="en-US";let j3=zg;function zi(t,e,n,i){const r=It(),s=Jn(),o=Ii();return function SI(t,e,n,i,r,s,o){const a=Oh(i),l=t.firstCreatePass&&RB(t),u=e[qi],h=DB(e);let f=!0;if(3&i.type||o){const y=Qs(i,e),b=o?o(y):y,R=h.length,L=o?q=>o(Ui(q[i.index])):i.index;let ie=null;if(!o&&a&&(ie=function Vee(t,e,n,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===n&&r[s+1]===i){const a=e[ud],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(t,e,r,i.index)),null!==ie)(ie.__ngLastListenerFn__||ie).__ngNextListenerFn__=s,ie.__ngLastListenerFn__=s,f=!1;else{s=fj(i,e,u,s,!1);const q=n.listen(b,r,s);h.push(s,q),l&&l.push(r,L,R,R+1)}}else s=fj(i,e,u,s,!1);const g=i.outputs;let m;if(f&&null!==g&&(m=g[r])){const y=m.length;if(y)for(let b=0;b<y;b+=2){const Ee=e[m[b]][m[b+1]].subscribe(s),Re=h.length;h.push(s,Ee),l&&l.push(r,i.index,Re,-(Re+1))}}}(s,r,r[An],o,t,e,i),zi}function hj(t,e,n,i){const r=K(null);try{return ca(6,e,n),!1!==n(i)}catch(s){return Dx(t,s),!1}finally{ca(7,e,n),K(r)}}function fj(t,e,n,i,r){return function s(o){if(o===Function)return i;Ry(t.componentOffset>-1?vo(t.index,e):e);let c=hj(e,n,i,o),l=s.__ngNextListenerFn__;for(;l;)c=hj(e,n,l,o)&&c,l=l.__ngNextListenerFn__;return r&&!1===c&&o.preventDefault(),c}}function $r(t=1){return function k_(t){return(Dn.lFrame.contextLView=function jp(t,e){for(;t>0;)e=e[dd],t--;return e}(t,Dn.lFrame.contextLView))[qi]}(t)}function Hee(t,e){let n=null;const i=function Ep(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(!(1&n))return e[n+1]}return null}(t);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?Sc(t,s,!0):Bb(i,s))return r}else n=r}return n}function ka(t){const e=It()[wi][Rs];if(!e.projection){const i=e.projection=function po(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}(t?t.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=t?Hee(s,t):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Li(t,e=0,n){const i=It(),r=Jn(),s=xg(r,Fn+t,16,null,n||null);null===s.projection&&(s.projection=e),du(),(!i[_o]||uu())&&32&~s.flags&&function ln(t,e,n){Sn(e[An],0,e,n,Sy(t,n,e),d(n.parent||e[Rs],n,e))}(r,i,s)}function CI(t,e,n){return MI(t,"",e,"",n),CI}function MI(t,e,n,i,r){const s=It(),o=Pg(s,e,n,i);return o!==hn&&pa(Jn(),xi(),s,t,o,s[An],r,!1),MI}function uc(t,e,n,i){!function _k(t,e,n,i){const r=Jn();if(r.firstCreatePass){const s=Ii();yk(r,new fk(e,n,i),s.index),function VJ(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),!(2&~n)&&(r.staticContentQueries=!0)}return gk(r,It(),n)}(t,e,n,i)}function Do(t,e,n){!function mk(t,e,n){const i=Jn();return i.firstCreatePass&&(yk(i,new fk(t,e,n),-1),!(2&~e)&&(i.staticViewQueries=!0)),gk(i,It(),e)}(t,e,n)}function ar(t){const e=It(),n=Jn(),i=Hp();ua(i+1);const r=QT(n,i);if(t.dirty&&function $o(t){return!(4&~t[mn])}(e)===!(2&~r.metadata.flags)){if(null===r.matches)t.reset([]);else{const s=vk(e,i);t.reset(s,Ow),t.notifyOnChanges()}return!0}return!1}function cr(){return function ZT(t,e){return t[Wr].queries[e].queryList}(It(),Hp())}function iE(t){return cu(function BC(){return Dn.lFrame.contextLView}(),Fn+t)}function Lc(t,e=""){const n=It(),i=Jn(),r=t+Fn,s=i.firstCreatePass?xg(i,r,1,e,null):i.data[r],o=Rj(i,n,s,e,t);n[r]=o,fd()&&Pe(i,n,o,s),Fa(s,!1)}let Rj=(t,e,n,i,r)=>(sr(!0),function Ey(t,e){return t.createText(e)}(e[An],i));function Rd(t){return r0("",t,""),Rd}function r0(t,e,n){const i=It(),r=Pg(i,t,e,n);return r!==hn&&function vu(t,e,n){const i=Hs(e,t);!function xx(t,e,n){t.setValue(e,n)}(t[An],i,n)}(i,ys(),r),r0}function TI(t,e,n,i,r){if(t=wn(t),Array.isArray(t))for(let s=0;s<t.length;s++)TI(t[s],e,n,i,r);else{const s=Jn(),o=It(),a=Ii();let c=tu(t)?t:wn(t.provide);const l=Gb(t),u=1048575&a.providerIndexes,h=a.directiveStart,f=a.providerIndexes>>20;if(tu(t)||!t.multi){const g=new es(l,r,st),m=DI(c,e,r?u:u+f,h);-1===m?(da(qh(a,o),s,c),II(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(g),o.push(g)):(n[m]=g,o[m]=g)}else{const g=DI(c,e,u+f,h),m=DI(c,e,u,u+f),b=m>=0&&n[m];if(r&&!b||!r&&!(g>=0&&n[g])){da(qh(a,o),s,c);const R=function cte(t,e,n,i,r){const s=new es(t,n,st);return s.multi=[],s.index=e,s.componentProviders=0,Hj(s,r,i&&!n),s}(r?ate:ote,n.length,r,i,l);!r&&b&&(n[m].providerFactory=R),II(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(R),o.push(R)}else II(s,t,g>-1?g:m,Hj(n[r?m:g],l,!r&&i));!r&&i&&b&&n[m].componentProviders++}}}function II(t,e,n,i){const r=tu(e),s=function uC(t){return!!t.useClass}(e);if(r||s){const c=(s?wn(e.useClass):e).prototype.ngOnDestroy;if(c){const l=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const u=l.indexOf(n);-1===u?l.push(n,[i,c]):l[u+1].push(i,c)}else l.push(n,c)}}}function Hj(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function DI(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function ote(t,e,n,i){return RI(this.multi,[])}function ate(t,e,n,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=pu(n,n[$t],this.providerFactory.index,i);s=a.slice(0,o),RI(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],RI(r,s);return s}function RI(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ni(t,e=[]){return n=>{n.providersResolver=(i,r)=>function ste(t,e,n){const i=Jn();if(i.firstCreatePass){const r=rr(t);TI(n,i.data,i.blueprint,r,!0),TI(e,i.data,i.blueprint,r,!1)}}(i,r?r(t):t,e)}}let lte=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const i=Ql(0,n.type),r=i.length>0?function iI(t,e,n=null){return new Bk({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Pt({token:t,providedIn:"environment",factory:()=>new t(lt(Ds))})}return t})();function Ls(t){gl("NgStandalone"),t.getStandaloneInjector=e=>e.get(lte).getOrCreateStandaloneInjector(t)}function Wj(t,e,n,i,r,s){const o=e+n;return ns(t,o,r)?_l(t,o+1,s?i.call(s,r):i(r)):function s0(t,e){const n=t[e];return n===hn?void 0:n}(t,o+1)}function wu(t,e){const n=Jn();let i;const r=t+Fn;n.firstCreatePass?(i=function wte(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];const s=i.factory||(i.factory=ho(i.type)),a=Js(st);try{const c=$h(!1),l=s();return $h(c),function $ee(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}(n,It(),r,l),l}finally{Js(a)}}function xu(t,e,n){const i=t+Fn,r=It(),s=cu(r,i);return function o0(t,e){return t[$t].data[e].pure}(r,i)?Wj(r,_s(),e,s.transform,n,s):s.transform(n)}function Kj(t,e){return Ox(t,e)}const _U=new St(""),aE=new St("");let jI,BI=(()=>{class t{constructor(n,i,r){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,jI||(function yne(t){jI=t}(r),r.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n()},i)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||t)(lt(yn),lt(kI),lt(aE))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac})}return t})(),kI=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return jI?.findTestabilityInTree(this,n,i)??null}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function qg(t){return!!t&&"function"==typeof t.then}function yU(t){return!!t&&"function"==typeof t.subscribe}const vU=new St("");let UI=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i}),this.appInits=Ut(vU,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const r of this.appInits){const s=r();if(qg(s))n.push(s);else if(yU(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),0===n.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const cE=new St("");function xU(t,e){return Array.isArray(e)?e.reduce(xU,t):{...t,...e}}let Eu=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ut(Dw),this.afterRenderEffectManager=Ut(By),this.externalTestViews=new Set,this.beforeRender=new qt,this.afterTick=new qt,this.componentTypes=[],this.components=[],this.isStable=Ut(Cg).hasPendingTasks.pipe(Y(n=>!n)),this._injector=Ut(Ds)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,i){const r=n instanceof $B;if(!this._injector.get(UI).done)throw!r&&function rl(t){const e=Hn(t)||Jr(t)||ps(t);return null!==e&&e.standalone}(n),new $e(405,!1);let o;o=r?n:this._injector.get(Sd).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function vne(t){return t.isBoundToModule}(o)?void 0:this._injector.get(pf),l=o.create(Gi.NULL,[],i||o.selector,a),u=l.location.nativeElement,h=l.injector.get(_U,null);return h?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),lE(this.components,l),h?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new $e(101,!1);const i=K(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,K(i)}}detectChangesInAttachedViews(n){let i=0;const r=this.afterRenderEffectManager;for(;;){if(i===LB)throw new $e(103,!1);if(n){const s=0===i;this.beforeRender.next(s);for(let{_lView:o,notifyErrorHandler:a}of this._views)wne(o,s,a)}if(i++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>VI(s))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>VI(s))))break}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;lE(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const i=this._injector.get(cE,[]);[...this._bootstrapListeners,...i].forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>lE(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new $e(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function lE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function wne(t,e,n){!e&&!VI(t)||function xne(t,e,n){let i;n?(i=0,t[mn]|=1024):i=64&t[mn]?0:1,Rx(t,e,i)}(t,n,e)}function VI(t){return Up(t)}let Mne=(()=>{class t{constructor(){this.zone=Ut(yn),this.applicationRef=Ut(Eu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Tne(){const t=Ut(yn),e=Ut(Ao);return n=>t.runOutsideAngular(()=>e.handleError(n))}let Dne=(()=>{class t{constructor(){this.subscription=new Bt,this.initialized=!1,this.zone=Ut(yn),this.pendingTasks=Ut(Cg)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{yn.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{yn.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const vl=new St("",{providedIn:"root",factory:()=>Ut(vl,ii.Optional|ii.SkipSelf)||function Rne(){return typeof $localize<"u"&&$localize.locale||zg}()}),HI=new St("");let CU=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const r=function mJ(t="zone.js",e){return"noop"===t?new QB:"zone.js"===t?new yn(e):t}(i?.ngZone,function SU(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function lZ(t,e,n){return new tI(t,e,n)}(n.moduleType,this.injector,function AU(t){return[{provide:yn,useFactory:t},{provide:Mn,multi:!0,useFactory:()=>{const e=Ut(Mne,{optional:!0});return()=>e.initialize()}},{provide:Mn,multi:!0,useFactory:()=>{const e=Ut(Dne);return()=>{e.initialize()}}},{provide:Dw,useFactory:Tne}]}(()=>r)),o=s.injector.get(Ao,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:c=>{o.handleError(c)}});s.onDestroy(()=>{lE(this._modules,s),a.unsubscribe()})}),function wU(t,e,n){try{const i=n();return qg(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(o,r,()=>{const a=s.injector.get(UI);return a.runInitializers(),a.donePromise.then(()=>(function U3(t){"string"==typeof t&&(j3=t.toLowerCase().replace(/_/g,"-"))}(s.injector.get(vl,zg)||zg),this._moduleDoBootstrap(s),s))})})}bootstrapModule(n,i=[]){const r=xU({},i);return function Cne(t,e,n){const i=new nI(n);return Promise.resolve(i)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(n){const i=n.injector.get(Eu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new $e(-403,!1);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new $e(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const n=this._injector.get(HI,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||t)(lt(Gi))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Od=null;const MU=new St("");function TU(t,e,n=[]){const i=`Platform: ${e}`,r=new St(i);return(s=[])=>{let o=GI();if(!o||o.injector.get(MU,!1)){const a=[...n,...s,{provide:r,useValue:!0}];t?t(a):function Pne(t){if(Od&&!Od.get(MU,!1))throw new $e(400,!1);(function bU(){!function Fe(t){se=t}(()=>{throw new $e(600,!1)})})(),Od=t;const e=t.get(CU);(function DU(t){t.get(nf,null)?.forEach(n=>n())})(t)}(function IU(t=[],e){return Gi.create({name:e,providers:[{provide:y_,useValue:"platform"},{provide:HI,useValue:new Set([()=>Od=null])},...t]})}(a,i))}return function Fne(t){const e=GI();if(!e)throw new $e(401,!1);return e}()}}function GI(){return Od?.get(CU)??null}let to=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Bne}return t})();function Bne(t){return function kne(t,e,n){if(Wo(t)&&!n){const i=vo(t.index,e);return new Oy(i,i)}return 47&t.type?new Oy(e[wi],e):null}(Ii(),It(),!(16&~t))}class FU{constructor(){}supports(e){return zx(e)}create(e){return new Gne(e)}}const Hne=(t,e)=>e;class Gne{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Hne}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){const o=!i||n&&n.currentIndex<BU(i,r,s)?n:i,a=BU(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(n=n._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let f=0;f<l;f++){const g=f<s.length?s[f]:s[f]=0,m=g+f;u<=m&&m<l&&(s[f]=g+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!zx(e))throw new $e(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),i=!0),n=n._next}else r=0,function fZ(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,a,o,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,r)):e=this._addAfter(new zne(n,i),s,r),e}_verifyReinsertion(e,n,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new LU),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new LU),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class zne{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Wne{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class LU{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new Wne,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function BU(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function jU(){return new XI([new FU])}let XI=(()=>{class t{static#e=this.\u0275prov=Pt({token:t,providedIn:"root",factory:jU});constructor(n){this.factories=n}static create(n,i){if(null!=i){const r=i.factories.slice();n=n.concat(r)}return new t(n)}static extend(n){return{provide:t,useFactory:i=>t.create(n,i||jU()),deps:[[t,new rd,new id]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(null!=i)return i;throw new $e(901,!1)}}return t})();const Kne=TU(null,"core",[]);let Jne=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(i){return new(i||t)(lt(Eu))};static#t=this.\u0275mod=sa({type:t});static#n=this.\u0275inj=Ho({})}return t})();function os(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function vE(t,e=NaN){return isNaN(parseFloat(t))||isNaN(Number(t))?e:Number(t)}function cV(t){const e=K(null);try{return t()}finally{K(e)}}const Mie=new St("",{providedIn:"root",factory:()=>Ut(Tie)});let Tie=(()=>{class t{static#e=this.\u0275prov=Pt({token:t,providedIn:"root",factory:()=>new Iie})}return t})();class Iie{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=Ut(Cg),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),null===this.taskId){const n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){const n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);const i=this.queues.get(n);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(const[e,n]of this.queues)null===e?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(const n of e)e.delete(n),this.queuedEffectCount--,n.run()}}class Die{constructor(e,n,i,r,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=i,this.injector=s,this.watcher=function _e(t,e,n){const i=Object.create(ve);n&&(i.consumerAllowSignalWrites=!0),i.fn=t,i.schedule=e;const r=c=>{i.cleanupFn=c};return i.ref={notify:()=>ae(i),run:()=>{if(null===i.fn)return;if(function U(){return k}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!ke(i))return;i.hasRun=!0;const c=we(i);try{i.cleanupFn(),i.cleanupFn=ze,i.fn(r)}finally{Oe(i,c)}},cleanup:()=>i.cleanupFn(),destroy:()=>function o(c){(function s(c){return null===c.fn&&null===c.schedule})(c)||(Ye(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=ze)}(i),[X]:i},i.ref}(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(Ao,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function lV(t,e){gl("NgSignals"),!e?.injector&&function oa(t){if(!zb())throw new $e(-203,!1)}();const n=e?.injector??Ut(Gi),i=!0!==e?.manualCleanup?n.get(md):null,r=new Die(n.get(Mie),t,typeof Zone>"u"?null:Zone.current,i,n,e?.allowSignalWrites??!1),s=n.get(to,null,{optional:!0});return s&&8&s._lView[mn]?(s._lView[al]??=[]).push(r.watcher.notify):r.watcher.notify(),r}let uV=null;function Nd(){return uV}class Oie{}const hi=new St("");let dV=(()=>{class t{historyGo(n){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:()=>Ut(Nie),providedIn:"platform"})}return t})(),Nie=(()=>{class t extends dV{constructor(){super(),this._doc=Ut(hi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nd().getBaseHref(this._doc)}onPopState(n){const i=Nd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=Nd().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,r){this._history.pushState(n,i,r)}replaceState(n,i,r){this._history.replaceState(n,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function hV(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function fV(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Af(t){return t&&"?"!==t[0]?"?"+t:t}let bE=(()=>{class t{historyGo(n){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:()=>Ut(Fie),providedIn:"root"})}return t})();const Pie=new St("");let Fie=(()=>{class t extends bE{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Ut(hi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return hV(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+Af(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,s){const o=this.prepareExternalUrl(r+Af(s));this._platformLocation.pushState(n,i,o)}replaceState(n,i,r,s){const o=this.prepareExternalUrl(r+Af(s));this._platformLocation.replaceState(n,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(i){return new(i||t)(lt(dV),lt(Pie,8))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Sf=(()=>{class t{constructor(n){this._subject=new _n,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const i=this._locationStrategy.getBaseHref();this._basePath=function kie(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(fV(pV(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+Af(i))}normalize(n){return t.stripTrailingSlash(function Bie(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,pV(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Af(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Af(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i,complete:r})}static#e=this.normalizeQueryParams=Af;static#t=this.joinWithSlash=hV;static#n=this.stripTrailingSlash=fV;static#i=this.\u0275fac=function(i){return new(i||t)(lt(bE))};static#r=this.\u0275prov=Pt({token:t,factory:()=>function Lie(){return new Sf(lt(bE))}(),providedIn:"root"})}return t})();function pV(t){return t.replace(/\/index.html$/,"")}const oD=/\s+/,EV=[];let AV=(()=>{class t{constructor(n,i){this._ngEl=n,this._renderer=i,this.initialClasses=EV,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(oD):EV}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(oD):n}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const i of n)this._updateState(i,!0);else if(null!=n)for(const i of Object.keys(n))this._updateState(i,!!n[i]);this._applyStateDiff()}_updateState(n,i){const r=this.stateMap.get(n);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(n,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const i=n[0],r=n[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(n,i){(n=n.trim()).length>0&&n.split(oD).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||t)(st(ui),st(bu))};static#t=this.\u0275dir=Xt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[Yt.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return t})();class Are{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let OE=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const i=this._viewContainer;n.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Are(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),CV(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{CV(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(n,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(st(Io),st(cc),st(XI))};static#t=this.\u0275dir=Xt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function CV(t,e){t.context.$implicit=e.item}let aD=(()=>{class t{constructor(n,i){this._viewContainer=n,this._context=new Sre,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){MV("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){MV("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}static#e=this.\u0275fac=function(i){return new(i||t)(st(Io),st(cc))};static#t=this.\u0275dir=Xt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class Sre{constructor(){this.$implicit=null,this.ngIf=null}}function MV(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${tr(e)}'.`)}let IV=(()=>{class t{constructor(n){this._viewContainerRef=n,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(n){if(this._shouldRecreateView(n)){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(n){return!!n.ngTemplateOutlet||!!n.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(n,i,r)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,i,r),get:(n,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static#e=this.\u0275fac=function(i){return new(i||t)(st(Io))};static#t=this.\u0275dir=Xt({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Lr]})}return t})();class Rre{createSubscription(e,n){return cV(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){cV(()=>e.unsubscribe())}}class Ore{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}}const Nre=new Ore,Pre=new Rre;let h0=(()=>{class t{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,i=>this._updateLatestValue(n,i))}_selectStrategy(n){if(qg(n))return Nre;if(yU(n))return Pre;throw function kc(t,e){return new $e(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,i){n===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||t)(st(to,16))};static#t=this.\u0275pipe=Kr({name:"async",type:t,pure:!1,standalone:!0})}return t})(),RV=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=sa({type:t});static#n=this.\u0275inj=Ho({})}return t})();const OV="browser";function Pd(t){return t===OV}function hD(t){return"server"===t}class Dse extends Oie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class pD extends Dse{static makeCurrent(){!function Rie(t){uV??=t}(new pD)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function Rse(){return g0=g0||document.querySelector("base"),g0?g0.getAttribute("href"):null}();return null==n?null:function Ose(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){g0=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function xre(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let g0=null,Pse=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac})}return t})();const gD=new St("");let VV=(()=>{class t{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>{r.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(s=>s.supports(n)),!i)throw new $e(5101,!1);return this._eventNameToPlugin.set(n,i),i}static#e=this.\u0275fac=function(i){return new(i||t)(lt(gD),lt(yn))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac})}return t})();class HV{constructor(e){this._doc=e}}const mD="ng-app-id";let GV=(()=>{class t{constructor(n,i,r,s={}){this.doc=n,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=hD(s),this.resetHostNodes()}addStyles(n){for(const i of n)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(n){for(const i of n)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(i=>i.remove()),n.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const i of this.getAllStyles())this.addStyleToHost(n,i)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const i of this.hostNodes)this.addStyleToHost(i,n)}onStyleRemoved(n){const i=this.styleRef;i.get(n)?.elements?.forEach(r=>r.remove()),i.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${mD}="${this.appId}"]`);if(n?.length){const i=new Map;return n.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(n,i){const r=this.styleRef;if(r.has(n)){const s=r.get(n);return s.usage+=i,s.usage}return r.set(n,{usage:i,elements:[]}),i}getStyleElement(n,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===n)return r.delete(i),s.removeAttribute(mD),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(mD,this.appId),n.appendChild(o),o}}addStyleToHost(n,i){const r=this.getStyleElement(n,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||t)(lt(hi),lt(ag),lt(lg,8),lt(nc))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac})}return t})();const _D={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yD=/%COMP%/g,kse=new St("",{providedIn:"root",factory:()=>!0});function WV(t,e){return e.map(n=>n.replace(yD,t))}let $V=(()=>{class t{constructor(n,i,r,s,o,a,c,l=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=hD(a),this.defaultRenderer=new vD(n,o,c,this.platformIsServer)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Da.ShadowDom&&(i={...i,encapsulation:Da.Emulated});const r=this.getOrCreateRenderer(n,i);return r instanceof XV?r.applyToHost(n):r instanceof bD&&r.applyStyles(),r}getOrCreateRenderer(n,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Da.Emulated:s=new XV(c,l,i,this.appId,u,o,a,h);break;case Da.ShadowDom:return new Hse(c,l,n,i,o,a,this.nonce,h);default:s=new bD(c,l,i,u,o,a,h)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||t)(lt(VV),lt(GV),lt(ag),lt(kse),lt(hi),lt(nc),lt(yn),lt(lg))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac})}return t})();class vD{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(_D[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(qV(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(qV(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new $e(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const s=_D[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=_D[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(fl.DashCase|fl.Important)?e.style.setProperty(n,i,r&fl.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&fl.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){null!=e&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if("string"==typeof e&&!(e=Nd().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function qV(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class Hse extends vD{constructor(e,n,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=WV(r.id,r.styles);for(const u of l){const h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class bD extends vD{constructor(e,n,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?WV(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class XV extends bD{constructor(e,n,i,r,s,o,a,c){const l=r+"-"+i.id;super(e,n,i,s,o,a,c,l),this.contentAttr=function jse(t){return"_ngcontent-%COMP%".replace(yD,t)}(l),this.hostAttr=function Use(t){return"_nghost-%COMP%".replace(yD,t)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}let Gse=(()=>{class t extends HV{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||t)(lt(hi))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac})}return t})();const YV=["alt","control","meta","shift"],zse={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wse={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let $se=(()=>{class t extends HV{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,i,r){const s=t.parseEventName(i),o=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nd().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const i=n.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=t._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),YV.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(n,i){let r=zse[n.key]||n.key,s="";return i.indexOf("code.")>-1&&(r=n.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),YV.forEach(o=>{o!==r&&(0,Wse[o])(n)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(n,i,r){return s=>{t.matchEventFullKeyCode(s,n)&&r.runGuarded(()=>i(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(i){return new(i||t)(lt(hi))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac})}return t})();const JV=[{provide:nc,useValue:OV},{provide:nf,useValue:function qse(){pD.makeCurrent()},multi:!0},{provide:hi,useFactory:function Yse(){return function wM(t){og=t}(document),document},deps:[]}],Kse=TU(Kne,"browser",JV),Jse=new St(""),ZV=[{provide:aE,useClass:class Nse{addToWindow(e){Bn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new $e(5103,!1);return s},Bn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Bn.getAllAngularRootElements=()=>e.getAllRootElements(),Bn.frameworkStabilizers||(Bn.frameworkStabilizers=[]),Bn.frameworkStabilizers.push(i=>{const r=Bn.getAllAngularTestabilities();let s=r.length;const o=function(){s--,0==s&&i()};r.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,n,i){return null==n?null:e.getTestability(n)??(i?Nd().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:_U,useClass:BI,deps:[yn,kI,aE]},{provide:BI,useClass:BI,deps:[yn,kI,aE]}],QV=[{provide:y_,useValue:"root"},{provide:Ao,useFactory:function Xse(){return new Ao},deps:[]},{provide:gD,useClass:Gse,multi:!0,deps:[hi,yn,nc]},{provide:gD,useClass:$se,multi:!0,deps:[hi]},$V,GV,VV,{provide:XB,useExisting:$V},{provide:class nse{},useClass:Pse,deps:[]},[]];let Zse=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:ag,useValue:n.appId}]}}static#e=this.\u0275fac=function(i){return new(i||t)(lt(Jse,12))};static#t=this.\u0275mod=sa({type:t});static#n=this.\u0275inj=Ho({providers:[...QV,...ZV],imports:[RV,Jne]})}return t})(),m0=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:function(i){let r=null;return r=i?new(i||t):lt(ioe),r},providedIn:"root"})}return t})(),ioe=(()=>{class t extends m0{constructor(n){super(),this._doc=n}sanitize(n,i){if(null==i)return null;switch(n){case Ns.NONE:return i;case Ns.HTML:return Xo(i,"HTML")?Mo(i):lx(this._doc,String(i)).toString();case Ns.STYLE:return Xo(i,"Style")?Mo(i):i;case Ns.SCRIPT:if(Xo(i,"Script"))return Mo(i);throw new $e(5200,!1);case Ns.URL:return Xo(i,"URL")?Mo(i):mg(String(i));case Ns.RESOURCE_URL:if(Xo(i,"ResourceURL"))return Mo(i);throw new $e(5201,!1);default:throw new $e(5202,!1)}}bypassSecurityTrustHtml(n){return function LM(t){return new fa(t)}(n)}bypassSecurityTrustStyle(n){return function BM(t){return new Qw(t)}(n)}bypassSecurityTrustScript(n){return function kM(t){return new NM(t)}(n)}bypassSecurityTrustUrl(n){return function jM(t){return new Di(t)}(n)}bypassSecurityTrustResourceUrl(n){return function UM(t){return new PM(t)}(n)}static#e=this.\u0275fac=function(i){return new(i||t)(lt(hi))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const wD={now:()=>(wD.delegate||Date).now(),delegate:void 0};class Cf extends qt{constructor(e=1/0,n=1/0,i=wD){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;n||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=n.now();let a=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}}}function Un(t,e,n,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s}function AD(t,e){return function(n,i){e(n,i,t)}}function jt(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function Fd(t){return this instanceof Fd?(this.v=t,this):new Fd(t)}function oH(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function CD(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=t[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const MD=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function aH(t){return Ke(t?.then)}function cH(t){return Ke(t[Vo])}function lH(t){return Symbol.asyncIterator&&Ke(t?.[Symbol.asyncIterator])}function uH(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const dH=function xoe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function hH(t){return Ke(t?.[dH])}function fH(t){return function sH(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(f){i[f]&&(r[f]=function(g){return new Promise(function(m,y){s.push([f,g,m,y])>1||a(f,g)})})}function a(f,g){try{!function c(f){f.value instanceof Fd?Promise.resolve(f.value.v).then(l,u):h(s[0][2],f)}(i[f](g))}catch(m){h(s[0][3],m)}}function l(f){a("next",f)}function u(f){a("throw",f)}function h(f,g){f(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:i,done:r}=yield Fd(n.read());if(r)return yield Fd(void 0);yield yield Fd(i)}}finally{n.releaseLock()}})}function pH(t){return Ke(t?.getReader)}function ws(t){if(t instanceof At)return t;if(null!=t){if(cH(t))return function Eoe(t){return new At(e=>{const n=t[Vo]();if(Ke(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(MD(t))return function Aoe(t){return new At(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(aH(t))return function Soe(t){return new At(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ct)})}(t);if(lH(t))return gH(t);if(hH(t))return function Coe(t){return new At(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(pH(t))return function Moe(t){return gH(fH(t))}(t)}throw uH(t)}function gH(t){return new At(e=>{(function Toe(t,e){var n,i,r,s;return function iH(t,e,n,i){return new(n||(n=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(h){o(h)}}function c(u){try{l(i.throw(u))}catch(h){o(h)}}function l(u){u.done?s(u.value):function r(s){return s instanceof n?s:new n(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=oH(t);!(i=yield n.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Cu(t,e,n,i=0,r=!1){const s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function xs(t,e,n=1/0){return Ke(e)?xs((i,r)=>Y((s,o)=>e(i,s,r,o))(ws(t(i,r))),n):("number"==typeof e&&(n=e),T((i,r)=>function Ioe(t,e,n,i,r,s,o,a){const c=[];let l=0,u=0,h=!1;const f=()=>{h&&!c.length&&!l&&e.complete()},g=y=>l<i?m(y):c.push(y),m=y=>{s&&e.next(y),l++;let b=!1;ws(n(y,u++)).subscribe(v(e,R=>{r?.(R),s?g(R):e.next(R)},()=>{b=!0},void 0,()=>{if(b)try{for(l--;c.length&&l<i;){const R=c.shift();o?Cu(e,o,()=>m(R)):m(R)}f()}catch(R){e.error(R)}}))};return t.subscribe(v(e,g,()=>{h=!0,f()})),()=>{a?.()}}(i,r,t,n)))}function LE(t=1/0){return xs(He,t)}const Ro=new At(t=>t.complete());function mH(t){return t&&Ke(t.schedule)}function TD(t){return t[t.length-1]}function _H(t){return Ke(TD(t))?t.pop():void 0}function y0(t){return mH(TD(t))?t.pop():void 0}function yH(t,e=0){return T((n,i)=>{n.subscribe(v(i,r=>Cu(i,t,()=>i.next(r),e),()=>Cu(i,t,()=>i.complete(),e),r=>Cu(i,t,()=>i.error(r),e)))})}function vH(t,e=0){return T((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function bH(t,e){if(!t)throw new Error("Iterable cannot be null");return new At(n=>{Cu(n,e,()=>{const i=t[Symbol.asyncIterator]();Cu(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function Es(t,e){return e?function koe(t,e){if(null!=t){if(cH(t))return function Noe(t,e){return ws(t).pipe(vH(e),yH(e))}(t,e);if(MD(t))return function Foe(t,e){return new At(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}(t,e);if(aH(t))return function Poe(t,e){return ws(t).pipe(vH(e),yH(e))}(t,e);if(lH(t))return bH(t,e);if(hH(t))return function Loe(t,e){return new At(n=>{let i;return Cu(n,e,()=>{i=t[dH](),Cu(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void n.error(o)}s?n.complete():n.next(r)},0,!0)}),()=>Ke(i?.return)&&i.return()})}(t,e);if(pH(t))return function Boe(t,e){return bH(fH(t),e)}(t,e)}throw uH(t)}(t,e):ws(t)}function jc(...t){const e=y0(t),n=function Ooe(t,e){return"number"==typeof TD(t)?t.pop():e}(t,1/0),i=t;return i.length?1===i.length?ws(i[0]):LE(n)(Es(i,e)):Ro}function Ki(t,e){return T((n,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();n.subscribe(v(i,c=>{r?.unsubscribe();let l=0;const u=s++;ws(t(c,u)).subscribe(r=v(i,h=>i.next(e?e(c,h,u,l++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}const BE={schedule(t,e){const n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if(typeof window>"u")return BE.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return BE.schedule(t,16);const e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};let ID;function qoe(t,e,n){let i=n;return function Uoe(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}(t)&&e.some((r,s)=>!("*"===r||!function Hoe(t,e){if(!ID){const n=Element.prototype;ID=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE&&ID.call(t,e)}(t,r)||(i=s,0))),i}class Yoe{constructor(e,n){this.componentFactory=n.get(Sd).resolveComponentFactory(e)}create(e){return new Koe(this.componentFactory,e)}}class Koe{constructor(e,n){this.componentFactory=e,this.injector=n,this.eventEmitters=new Cf(1),this.events=this.eventEmitters.pipe(Ki(i=>jc(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(yn),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=BE.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,n,i){this.runInZone(()=>{i&&(n=i.call(this.componentRef?.instance,n)),null!==this.componentRef?function Goe(t,e){return t===e||t!=t&&e!=e}(n,this.getInputValue(e))&&(void 0!==n||!this.unchangedInputs.has(e))||(this.recordInputChange(e,n),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=n,this.scheduleDetectChanges()):this.initialInputValues.set(e,n)})}initializeComponent(e){const n=Gi.create({providers:[],parent:this.injector}),i=function $oe(t,e){const n=t.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=n.length;s<o;++s){const a=n[s],c=qoe(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(to),this.implementsOnChanges=function Voe(t){return"function"==typeof t}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Eu).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:n})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),n)}),this.initialInputValues.clear()}initializeOutputs(e){const n=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(Y(o=>({name:r,value:o}))));this.eventEmitters.next(n)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const n=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(n)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=BE.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,n){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=n);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new Ph(s,n,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class Joe extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}let Qoe=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=sa({type:t});static#n=this.\u0275inj=Ho({imports:[RV]})}return t})();function v0(t){return(v0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ge(t,e,n){return(e=function tae(t){var e=function eae(t,e){if("object"!=v0(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=v0(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==v0(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wH(t){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function bl(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||wH()}const xH=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";bl();class iae{constructor(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";ge(this,"storage",void 0),ge(this,"id",void 0),ge(this,"config",void 0),this.storage=function nae(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}(i),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function DD(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(n=Math.min(n,i/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let kE;var t;function EH(t){return"string"==typeof t?kE[t.toUpperCase()]||kE.WHITE:t}function jE(t,e){if(!t)throw new Error(e||"Assertion failed")}(t=kE||(kE={}))[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE";const Ld={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},UE=Ld.window||Ld.self||Ld.global,b0=Ld.process||{};function Kg(){let t;var e,n;if(bl&&"performance"in UE)t=null==UE||null===(e=UE.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in b0){var i;const r=null==b0||null===(i=b0.hrtime)||void 0===i?void 0:i.call(b0);t=1e3*r[0]+r[1]/1e6}else t=Date.now();return t}const Jg={debug:bl&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},uae={enabled:!0,level:0};function fc(){}const AH={},SH={once:!0};class w0{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};ge(this,"id",void 0),ge(this,"VERSION",xH),ge(this,"_startTs",Kg()),ge(this,"_deltaTs",Kg()),ge(this,"_storage",void 0),ge(this,"userData",{}),ge(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new iae("__probe-".concat(this.id,"__"),uae),this.timeStamp("".concat(this.id," started")),function lae(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(n);for(const r of i)"function"==typeof t[r]&&(e.find(s=>r===s)||(t[r]=t[r].bind(t)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Kg()-this._startTs).toPrecision(10))}getDelta(){return Number((Kg()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){jE(e,n)}warn(e){return this._getLogFunction(0,e,Jg.warn,arguments,SH)}error(e){return this._getLogFunction(0,e,Jg.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Jg.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Jg.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];return this._getLogFunction(e,n,Jg.debug||Jg.info,arguments,SH)}table(e,n,i){return n?this._getLogFunction(e,n,console.table||fc,i&&[i],{tag:pae(n)}):fc}image(e){let{logLevel:n,priority:i,image:r,message:s="",scale:o=1}=e;return this._shouldLog(n||i)?bl?function fae(t){let{image:e,message:n="",scale:i=1}=t;if("string"==typeof e){const s=new Image;return s.onload=()=>{const o=DD(s,n,i);console.log(...o)},s.src=e,fc}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...DD(e,n,i)),fc;if("canvas"===r.toLowerCase()){const s=new Image;return s.onload=()=>console.log(...DD(s,n,i)),s.src=e.toDataURL(),fc}return fc}({image:r,message:s,scale:o}):function hae(t){let{message:n="",scale:i=1}=t;return console.warn("removed"),fc}({image:r,message:s,scale:o}):fc}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||fc)}group(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=MH({logLevel:e,message:n,opts:i}),{collapsed:s}=i;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,n){return this.group(e,n,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||fc)}withGroup(e,n,i){this.group(e,n)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=CH(e)}_getLogFunction(e,n,i,r,s){if(this._shouldLog(e)){s=MH({logLevel:e,message:n,args:r,opts:s}),jE(i=i||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Kg();const o=s.tag||s.message;if(s.once){if(AH[o])return fc;AH[o]=Kg()}return n=function dae(t,e,n){if("string"==typeof e){const i=n.time?function sae(t){const n=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function rae(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";e=function cae(t,e,n){return!bl&&"string"==typeof t&&(e&&(e=EH(e),t="\x1b[".concat(e,"m").concat(t,"\x1b[39m")),n&&(e=EH(n),t="\x1b[".concat(n+10,"m").concat(t,"\x1b[49m"))),t}(e=n.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),n.color,n.background)}return e}(this.id,s.message,s),i.bind(console,n,...s.args)}return fc}}function CH(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return jE(Number.isFinite(e)&&e>=0),e}function MH(t){const{logLevel:e,message:n}=t;t.logLevel=CH(e);const i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&i.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const r=typeof t.message;return jE("string"===r||"object"===r),Object.assign(t,{args:i},t.opts)}function pae(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}ge(w0,"VERSION",xH);const oi=new w0({id:"deck"}),x0=new class gae{constructor(e={}){ge(this,"_pool",[]),ge(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:i=1,type:r,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,u=n*i+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,u)}let h=1/0;c&&(h=c*i+s);const f=this._allocate(l,u,a,h);return e&&o?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,n,i,r){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>r&&(s=r);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,c=o.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(o.splice(c,1)[0],0,s);return i&&l.fill(0),l}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:i}=e,{byteLength:r}=i,s=n.findIndex(o=>o.byteLength>=r);s<0?n.push(i):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,i),n.length>this.opts.poolSize&&n.shift()}},mae=1/Math.PI*180,_ae=1/180*Math.PI,as={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function yae(t,{precision:e=as.precision}={}){return t=function Eae(t){return Math.round(t/as.EPSILON)*as.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function Mu(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function TH(t){return function bae(t,e){return Tu(t,n=>n*_ae,e)}(t)}function vae(t){return function wae(t,e){return Tu(t,n=>n*mae,e)}(t)}function jr(t,e,n){return Tu(t,i=>Math.max(e,Math.min(n,i)))}function VE(t,e,n){return Mu(t)?t.map((i,r)=>VE(i,e[r],n)):n*e+(1-n)*t}function Zg(t,e,n){const i=as.EPSILON;n&&(as.EPSILON=n);try{if(t===e)return!0;if(Mu(t)&&Mu(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!Zg(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):"number"==typeof t&&"number"==typeof e&&Math.abs(t-e)<=as.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{as.EPSILON=i}}function Tu(t,e,n){if(Mu(t)){const i=t;n=n||function Aae(t){return t.clone?t.clone():new Array(t.length)}(i);for(let r=0;r<n.length&&r<i.length;++r)n[r]=e(t[r],r,n);return n}return e(t)}class HE extends(function Sae(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Mu(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(as)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+yae(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Zg(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){if(void 0===i)return this.lerp(this,e,n);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(n[r]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if("number"==typeof e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(as.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}get elements(){return this}}function Qn(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function GE(t,e,n=""){if(as.debug&&!function Cae(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}function DH(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}class RH extends HE{get x(){return this[0]}set x(e){this[0]=Qn(e)}get y(){return this[1]}set y(e){this[1]=Qn(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return Qn(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return Qn(n)}normalize(){const e=this.magnitude();if(0!==e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return DH(e>=0&&e<this.ELEMENTS,"index is out of range"),Qn(this[e])}setComponent(e,n){return DH(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var wl=1e-6,ma=typeof Float32Array<"u"?Float32Array:Array;function OH(){var t=new ma(3);return ma!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function NH(t,e,n){var i=new ma(3);return i[0]=t,i[1]=e,i[2]=n,i}function PH(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function zE(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],c=n[2];return t[0]=r*c-s*a,t[1]=s*o-i*c,t[2]=i*a-r*o,t}function RD(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];return t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/(o=o||1),t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o,t}function FH(t,e,n){var i=n[0],r=n[1],s=n[2],a=e[0],c=e[1],l=e[2],u=r*l-s*c,h=s*a-i*l,f=i*c-r*a,g=r*f-s*h,m=s*u-i*f,y=i*h-r*u,b=2*n[3];return h*=b,f*=b,m*=2,y*=2,t[0]=a+(u*=b)+(g*=2),t[1]=c+h+m,t[2]=l+f+y,t}Math,Math,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function LH(t,e,n){const i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s||1;return t[0]=(n[0]*i+n[4]*r+n[8]*s)/o,t[1]=(n[1]*i+n[5]*r+n[9]*s)/o,t[2]=(n[2]*i+n[6]*r+n[10]*s)/o,t}OH();const OD=[0,0,0];let WE;class Oo extends RH{static get ZERO(){return WE||(WE=new Oo(0,0,0),Object.freeze(WE)),WE}constructor(e=0,n=0,i=0){super(-0,-0,-0),1===arguments.length&&Mu(e)?this.copy(e):(as.debug&&(Qn(e),Qn(n),Qn(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return as.debug&&(Qn(e.x),Qn(e.y),Qn(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Qn(e)}angle(e){return function Lae(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=u&&PH(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return zE(this,this,e),this.check()}rotateX({radians:e,origin:n=OD}){return function Nae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateY({radians:e,origin:n=OD}){return function Pae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=OD}){return function Fae(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return RD(this,this,e),this.check()}transformAsVector(e){return LH(this,this,e),this.check()}transformByMatrix3(e){return function Oae(t,e,n){var i=e[0],r=e[1],s=e[2];t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8]}(this,this,e),this.check()}transformByMatrix2(e){return function Uae(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return FH(this,this,e),this.check()}}const BH=new Oo;function Qg(t,e,n,i){BH.set(t,e,n);const r=BH.len();return{distance:i/r,normal:new Oo(-t/r,-e/r,-n/r)}}function $ae(t){return t-Math.fround(t)}let A0;function ND(t,e){const{size:n=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:t.length,s=(r-i)/n;A0=x0.allocate(A0,s,{type:Float32Array,size:2*n});let o=i,a=0;for(;o<r;){for(let c=0;c<n;c++){const l=t[o++];A0[a+c]=l,A0[a+c+n]=$ae(l)}a+=2*n}return A0.subarray(0,s*n*2)}class qae extends HE{toString(){let e="[";if(as.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=Qn(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function PD(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=e[9],f=e[10],g=e[11],m=e[12],y=e[13],b=e[14],R=e[15],L=n*a-i*o,ie=n*c-r*o,q=n*l-s*o,Ee=i*c-r*a,Re=i*l-s*a,tt=r*l-s*c,dt=u*y-h*m,We=u*b-f*m,ht=u*R-g*m,bt=h*b-f*y,Tt=h*R-g*y,pt=f*R-g*b,mt=L*pt-ie*Tt+q*bt+Ee*ht-Re*We+tt*dt;return mt?(t[0]=(a*pt-c*Tt+l*bt)*(mt=1/mt),t[1]=(r*Tt-i*pt-s*bt)*mt,t[2]=(y*tt-b*Re+R*Ee)*mt,t[3]=(f*Re-h*tt-g*Ee)*mt,t[4]=(c*ht-o*pt-l*We)*mt,t[5]=(n*pt-r*ht+s*We)*mt,t[6]=(b*q-m*tt-R*ie)*mt,t[7]=(u*tt-f*q+g*ie)*mt,t[8]=(o*Tt-a*ht+l*dt)*mt,t[9]=(i*ht-n*Tt-s*dt)*mt,t[10]=(m*Re-y*q+R*L)*mt,t[11]=(h*q-u*Re-g*L)*mt,t[12]=(a*We-o*bt-c*dt)*mt,t[13]=(n*bt-i*We+r*dt)*mt,t[14]=(y*ie-m*Ee-b*L)*mt,t[15]=(u*Ee-h*ie+f*L)*mt,t):null}function Mf(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=e[9],g=e[10],m=e[11],y=e[12],b=e[13],R=e[14],L=e[15],ie=n[0],q=n[1],Ee=n[2],Re=n[3];return t[0]=ie*i+q*a+Ee*h+Re*y,t[1]=ie*r+q*c+Ee*f+Re*b,t[2]=ie*s+q*l+Ee*g+Re*R,t[3]=ie*o+q*u+Ee*m+Re*L,t[4]=(ie=n[4])*i+(q=n[5])*a+(Ee=n[6])*h+(Re=n[7])*y,t[5]=ie*r+q*c+Ee*f+Re*b,t[6]=ie*s+q*l+Ee*g+Re*R,t[7]=ie*o+q*u+Ee*m+Re*L,t[8]=(ie=n[8])*i+(q=n[9])*a+(Ee=n[10])*h+(Re=n[11])*y,t[9]=ie*r+q*c+Ee*f+Re*b,t[10]=ie*s+q*l+Ee*g+Re*R,t[11]=ie*o+q*u+Ee*m+Re*L,t[12]=(ie=n[12])*i+(q=n[13])*a+(Ee=n[14])*h+(Re=n[15])*y,t[13]=ie*r+q*c+Ee*f+Re*b,t[14]=ie*s+q*l+Ee*g+Re*R,t[15]=ie*o+q*u+Ee*m+Re*L,t}function $E(t,e,n){var o,a,c,l,u,h,f,g,m,y,b,R,i=n[0],r=n[1],s=n[2];return e===t?(t[12]=e[0]*i+e[4]*r+e[8]*s+e[12],t[13]=e[1]*i+e[5]*r+e[9]*s+e[13],t[14]=e[2]*i+e[6]*r+e[10]*s+e[14],t[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[1],c=e[2],l=e[3],u=e[4],h=e[5],f=e[6],g=e[7],m=e[8],y=e[9],b=e[10],R=e[11],t[0]=o=e[0],t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=h,t[6]=f,t[7]=g,t[8]=m,t[9]=y,t[10]=b,t[11]=R,t[12]=o*i+u*r+m*s+e[12],t[13]=a*i+h*r+y*s+e[13],t[14]=c*i+f*r+b*s+e[14],t[15]=l*i+g*r+R*s+e[15]),t}function FD(t,e,n){var i=n[0],r=n[1],s=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function kH(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+l*i,t[5]=o*r+u*i,t[6]=a*r+h*i,t[7]=c*r+f*i,t[8]=l*r-s*i,t[9]=u*r-o*i,t[10]=h*r-a*i,t[11]=f*r-c*i,t}function jH(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],c=e[3],l=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+l*i,t[1]=o*r+u*i,t[2]=a*r+h*i,t[3]=c*r+f*i,t[4]=l*r-s*i,t[5]=u*r-o*i,t[6]=h*r-a*i,t[7]=f*r-c*i,t}function qE(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function UH(t,e){return t[0]=-e[0],t[1]=-e[1],t}function VH(t,e,n,i){var r=e[0],s=e[1];return t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t}function HH(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function S0(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*s+n[12]*o,t[1]=n[1]*i+n[5]*r+n[9]*s+n[13]*o,t[2]=n[2]*i+n[6]*r+n[10]*s+n[14]*o,t[3]=n[3]*i+n[7]*r+n[11]*s+n[15]*o,t}!function cce(){var t=new ma(2);ma!=Float32Array&&(t[0]=0,t[1]=0)}(),function uce(){var t=new ma(4);ma!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var GH=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3",t}(GH||{});const Ace=45*Math.PI/180,Sce=1,LD=.1,BD=500,Cce=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class kn extends qae{static get IDENTITY(){return function Tce(){return YE||(YE=new kn,Object.freeze(YE)),YE}()}static get ZERO(){return function Mce(){return XE||(XE=new kn([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(XE)),XE}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return GH}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,i,r,s,o,a,c,l,u,h,f,g,m,y,b){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this[9]=u,this[10]=h,this[11]=f,this[12]=g,this[13]=m,this[14]=y,this[15]=b,this.check()}setRowMajor(e,n,i,r,s,o,a,c,l,u,h,f,g,m,y,b){return this[0]=e,this[1]=s,this[2]=l,this[3]=g,this[4]=n,this[5]=o,this[6]=u,this[7]=m,this[8]=i,this[9]=a,this[10]=h,this[11]=y,this[12]=r,this[13]=c,this[14]=f,this[15]=b,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Cce)}fromObject(e){return this.check()}fromQuaternion(e){return function tce(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,c=r+r,l=n*o,u=i*o,h=i*a,f=r*o,g=r*a,m=r*c,y=s*o,b=s*a,R=s*c;t[0]=1-h-m,t[1]=u+R,t[2]=f-b,t[3]=0,t[4]=u-R,t[5]=1-l-m,t[6]=g+y,t[7]=0,t[8]=f+b,t[9]=g-y,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(this,e),this.check()}frustum(e){const{left:n,right:i,bottom:r,top:s,near:o=LD,far:a=BD}=e;return a===1/0?function Ice(t,e,n,i,r,s){const a=2*s/(r-i),c=(n+e)/(n-e),l=(r+i)/(r-i),f=-2*s;t[0]=2*s/(n-e),t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=l,t[10]=-1,t[11]=-1,t[12]=0,t[13]=0,t[14]=f,t[15]=0}(this,n,i,r,s,o):function nce(t,e,n,i,r,s,o){var a=1/(n-e),c=1/(r-i),l=1/(s-o);t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(r+i)*c,t[10]=(o+s)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*l,t[15]=0}(this,n,i,r,s,o,a),this.check()}lookAt(e){const{eye:n,center:i=[0,0,0],up:r=[0,1,0]}=e;return function ace(t,e,n,i){var r,s,o,a,c,l,u,h,f,g,m=e[0],y=e[1],b=e[2],R=i[0],L=i[1],ie=i[2],q=n[0],Ee=n[1],Re=n[2];Math.abs(m-q)<wl&&Math.abs(y-Ee)<wl&&Math.abs(b-Re)<wl?function Xae(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(u=m-q,h=y-Ee,f=b-Re,r=L*(f*=g=1/Math.hypot(u,h,f))-ie*(h*=g),s=ie*(u*=g)-R*f,o=R*h-L*u,(g=Math.hypot(r,s,o))?(r*=g=1/g,s*=g,o*=g):(r=0,s=0,o=0),a=h*o-f*s,c=f*r-u*o,l=u*s-h*r,(g=Math.hypot(a,c,l))?(a*=g=1/g,c*=g,l*=g):(a=0,c=0,l=0),t[0]=r,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=c,t[6]=h,t[7]=0,t[8]=o,t[9]=l,t[10]=f,t[11]=0,t[12]=-(r*m+s*y+o*b),t[13]=-(a*m+c*y+l*b),t[14]=-(u*m+h*y+f*b),t[15]=1)}(this,n,i,r),this.check()}ortho(e){const{left:n,right:i,bottom:r,top:s,near:o=LD,far:a=BD}=e;return function sce(t,e,n,i,r,s,o){var a=1/(e-n),c=1/(i-r),l=1/(s-o);t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(r+i)*c,t[14]=(o+s)*l,t[15]=1}(this,n,i,r,s,o,a),this.check()}orthographic(e){const{fovy:n=Ace,aspect:i=Sce,focalDistance:r=1,near:s=LD,far:o=BD}=e;zH(n);const c=r*Math.tan(n/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}=e;return zH(n),function ice(t,e,n,i,r){var o,s=1/Math.tan(e/2);t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(t[10]=(r+i)*(o=1/(i-r)),t[14]=2*r*i*o):(t[10]=-1,t[14]=-2*i)}(this,n,i,r,s),this.check()}determinant(){return function Kae(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],c=t[7],l=t[8],u=t[9],h=t[10],f=t[11],g=t[12],m=t[13],y=t[14],b=t[15];return(e*o-n*s)*(h*b-f*y)-(e*a-i*s)*(u*b-f*m)+(e*c-r*s)*(u*y-h*m)+(n*a-i*o)*(l*b-f*g)-(n*c-r*o)*(l*y-h*g)+(i*c-r*a)*(l*m-u*g)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(n=n||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function Yae(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15]}(this,this),this.check()}invert(){return PD(this,this),this.check()}multiplyLeft(e){return Mf(this,e,this),this.check()}multiplyRight(e){return Mf(this,this,e),this.check()}rotateX(e){return kH(this,this,e),this.check()}rotateY(e){return function Zae(t,e,n){var i=Math.sin(n),r=Math.cos(n),s=e[0],o=e[1],a=e[2],c=e[3],l=e[8],u=e[9],h=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-l*i,t[1]=o*r-u*i,t[2]=a*r-h*i,t[3]=c*r-f*i,t[8]=s*i+l*r,t[9]=o*i+u*r,t[10]=a*i+h*r,t[11]=c*i+f*r}(this,this,e),this.check()}rotateZ(e){return jH(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return function Jae(t,e,n,i){var c,l,u,h,f,g,m,y,b,R,L,ie,q,Ee,Re,tt,dt,We,ht,bt,Tt,pt,mt,Lt,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);a<wl||(r*=a=1/a,s*=a,o*=a,c=Math.sin(n),l=Math.cos(n),f=e[1],g=e[2],m=e[3],b=e[5],R=e[6],L=e[7],q=e[9],Ee=e[10],Re=e[11],ht=r*s*(u=1-l)-o*c,bt=s*s*u+l,Tt=o*s*u+r*c,pt=r*o*u+s*c,mt=s*o*u-r*c,Lt=o*o*u+l,t[0]=(h=e[0])*(tt=r*r*u+l)+(y=e[4])*(dt=s*r*u+o*c)+(ie=e[8])*(We=o*r*u-s*c),t[1]=f*tt+b*dt+q*We,t[2]=g*tt+R*dt+Ee*We,t[3]=m*tt+L*dt+Re*We,t[4]=h*ht+y*bt+ie*Tt,t[5]=f*ht+b*bt+q*Tt,t[6]=g*ht+R*bt+Ee*Tt,t[7]=m*ht+L*bt+Re*Tt,t[8]=h*pt+y*mt+ie*Lt,t[9]=f*pt+b*mt+q*Lt,t[10]=g*pt+R*mt+Ee*Lt,t[11]=m*pt+L*mt+Re*Lt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this,this,e,n),this.check()}scale(e){return FD(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return $E(this,this,e),this.check()}transform(e,n){return 4===e.length?(GE(n=S0(n||[-0,-0,-0,-0],e,this),4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:i}=e;let r;switch(i){case 2:r=function lce(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t}(n||[-0,-0],e,this);break;case 3:r=RD(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return GE(r,e.length),r}transformAsVector(e,n){let i;switch(e.length){case 2:i=function jae(t,e,n){const i=e[0],r=e[1],s=n[3]*i+n[7]*r||1;return t[0]=(n[0]*i+n[4]*r)/s,t[1]=(n[1]*i+n[5]*r)/s,t}(n||[-0,-0],e,this);break;case 3:i=LH(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return GE(i,e.length),i}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,i){return this.identity().translate([e,n,i])}}let XE,YE;function zH(t){if(t>2*Math.PI)throw Error("expected radians")}function em(t,e){const n=S0([],e,t);return HH(n,n,1/n[3]),n}function WH(t,e){const n=t%e;return n<0?e+n:n}function kD(t,e,n){return t<e?e:t>n?n:t}const jD=Math.log2||function Rce(t){return Math.log(t)*Math.LOG2E};function Iu(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Uc=Math.PI,$H=Uc/4,pc=Uc/180,UD=180/Uc,tm=512,KE=4003e4,JE=85.051129,Oce=1.5;function ZE(t){const[e,n]=t;return Iu(Number.isFinite(e)),Iu(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude"),[tm*(e*pc+Uc)/(2*Uc),tm*(Uc+Math.log(Math.tan($H+n*pc*.5)))/(2*Uc)]}function nm(t){const[e,n]=t,i=e/tm*(2*Uc)-Uc,r=2*(Math.atan(Math.exp(n/tm*(2*Uc)-Uc))-$H);return[i*UD,r*UD]}function VD(t){const{latitude:e,longitude:n,highPrecision:i=!1}=t;Iu(Number.isFinite(e)&&Number.isFinite(n));const r=tm,s=Math.cos(e*pc),o=r/360,a=o/s,c=r/KE/s,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[o,a,c],degreesPerUnit:[1/o,1/a,1/c]};if(i){const u=pc*Math.tan(e*pc)/s,f=r/KE*u,g=f/a*c;l.unitsPerDegree2=[0,o*u/2,f],l.unitsPerMeter2=[g,0,g]}return l}function qH(t,e){const[n,i,r]=t,[s,o,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=VD({longitude:n,latitude:i,highPrecision:!0}),u=ZE(t);u[0]+=s*(c[0]+l[0]*o),u[1]+=o*(c[1]+l[1]*o);const h=nm(u),f=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[h[0],h[1],f]:h}function QE(t){return 2*Math.atan(.5/t)*UD}function HD(t){return.5/Math.tan(.5*t*pc)}function YH(t,e){const[n,i,r=0]=t;return Iu(Number.isFinite(n)&&Number.isFinite(i)&&Number.isFinite(r)),em(e,[n,i,r,1])}function C0(t,e,n=0){const[i,r,s]=t;if(Iu(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return em(e,[i,r,s,1]);const o=em(e,[i,r,0,1]),a=em(e,[i,r,1,1]),c=o[2],l=a[2];return VH([],o,a,c===l?0:((n||0)-c)/(l-c))}function KH(t){const{width:e,height:n,bounds:i,minExtent:r=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,c],[l,u]]=i,h=function Lce(t=0){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:(Iu(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),f=ZE([a,kD(u,-JE,JE)]),g=ZE([l,kD(c,-JE,JE)]),m=[Math.max(Math.abs(g[0]-f[0]),r),Math.max(Math.abs(g[1]-f[1]),r)],y=[e-h.left-h.right-2*Math.abs(o[0]),n-h.top-h.bottom-2*Math.abs(o[1])];Iu(y[0]>0&&y[1]>0);const b=y[0]/m[0],R=y[1]/m[1],Ee=nm([(g[0]+f[0])/2+(h.right-h.left)/2/b,(g[1]+f[1])/2+(h.top-h.bottom)/2/R]),Re=Math.min(s,jD(Math.abs(Math.min(b,R))));return Iu(Number.isFinite(Re)),{longitude:Ee[0],latitude:Ee[1],zoom:Re}}const JH=Math.PI/180;function ZH(t,e,n){const{pixelUnprojectionMatrix:i}=t,r=em(i,[e,0,1,1]),s=em(i,[e,t.height,1,1]),l=nm(VH([],r,s,(n*t.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2])));return l.push(n),l}const _i={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(_i,"IDENTITY",{get:()=>(oi.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const xl={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},eA={common:0,meters:1,pixels:2},i4={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Uce=Math.PI/180,Vce=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r4=[0,0,0],Hce={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class Bd{constructor(e={}){ge(this,"id",void 0),ge(this,"x",void 0),ge(this,"y",void 0),ge(this,"width",void 0),ge(this,"height",void 0),ge(this,"padding",void 0),ge(this,"isGeospatial",void 0),ge(this,"zoom",void 0),ge(this,"focalDistance",void 0),ge(this,"position",void 0),ge(this,"modelMatrix",void 0),ge(this,"distanceScales",void 0),ge(this,"scale",void 0),ge(this,"center",void 0),ge(this,"cameraPosition",void 0),ge(this,"projectionMatrix",void 0),ge(this,"viewMatrix",void 0),ge(this,"viewMatrixUncentered",void 0),ge(this,"viewMatrixInverse",void 0),ge(this,"viewProjectionMatrix",void 0),ge(this,"pixelProjectionMatrix",void 0),ge(this,"pixelUnprojectionMatrix",void 0),ge(this,"resolution",void 0),ge(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||Hce,this.focalDistance=e.focalDistance||1,this.position=e.position||r4,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?xl.WEB_MERCATOR:xl.WEB_MERCATOR_AUTO_OFFSET:xl.IDENTITY}equals(e){return e instanceof Bd&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Zg(e.projectionMatrix,this.projectionMatrix)&&Zg(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:n=!0}={}){const r=YH(this.projectPosition(e),this.pixelProjectionMatrix),[s,o]=r,a=n?o:this.height-o;return 2===e.length?[s,a]:[s,a,r[2]]}unproject(e,{topLeft:n=!0,targetZ:i}={}){const[r,s,o]=e,l=C0([r,n?s:this.height-s,o],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[u,h,f]=this.unprojectPosition(l);return Number.isFinite(o)?[u,h,f]:Number.isFinite(i)?[u,h,i]:[u,h]}projectPosition(e){const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const n=ZE(e);return n[1]=jr(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?nm(e):e}getBounds(e={}){const n={targetZ:e.z||0},i=this.unproject([0,0],n),r=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]}getDistanceScales(e){return e?VD({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&n<this.y+this.height&&this.y<n+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function Wae(t){return{left:Qg(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Qg(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Qg(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Qg(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Qg(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Qg(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function Pce(t){const{latitude:e}=t;Iu(Number.isFinite(e));const n=Math.cos(e*pc);return function Nce(t){return jD(t)}(KE*n)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||VD({latitude:i,longitude:n}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:s,modelMatrix:o}=e;let a=r4;if(s&&(a=o?new kn(o).transformAsVector(s,[]):s),this.isGeospatial){const c=this.projectPosition([n,i,0]);this.center=new Oo(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=Vce,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:u=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=(new kn).multiplyRight(n).translate(new Oo(this.center).negate()),this.projectionMatrix=i||function Gce({width:t,height:e,orthographic:n,fovyRadians:i,focalDistance:r,padding:s,near:o,far:a}){const c=t/e,l=n?(new kn).orthographic({fovy:i,aspect:c,focalDistance:r,near:o,far:a}):(new kn).perspective({fovy:i,aspect:c,near:o,far:a});if(s){const{left:u=0,right:h=0,top:f=0,bottom:g=0}=s,m=jr((u+t-h)/2,0,t)-t/2,y=jr((f+e-g)/2,0,e)-e/2;l[8]-=2*m/t,l[9]+=2*y/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:s||o*Uce,focalDistance:u,padding:l,near:a,far:c});const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Mf(h,h,this.projectionMatrix),Mf(h,h,this.viewMatrix),this.viewProjectionMatrix=h,this.viewMatrixInverse=PD([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function zae(t){return[t[12],t[13],t[14]]}(this.viewMatrixInverse);const f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];FD(f,f,[this.width/2,-this.height/2,1]),$E(f,f,[1,-1,0]),Mf(g,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=g,this.pixelUnprojectionMatrix=PD([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||oi.warn("Pixel project matrix not invertible")()}}ge(Bd,"displayName","Viewport");const zce=/([0-9]+\.?[0-9]*)(%|px)/;function kd(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=zce.exec(t);if(e&&e.length>=3){const n="%"===e[2],i=parseFloat(e[1]);return{position:n?i/100:i,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function jd(t,e){return t.relative?Math.round(t.position*e):t.position}function im(t,e){if(t===e)return!0;if(!t||!e)return!1;for(const n in t){const i=t[n],r=e[n];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&im(i,r)))return!1}return!0}function no(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class zD{constructor(e){ge(this,"id",void 0),ge(this,"viewportInstance",void 0),ge(this,"_x",void 0),ge(this,"_y",void 0),ge(this,"_width",void 0),ge(this,"_height",void 0),ge(this,"_padding",void 0),ge(this,"props",void 0);const{id:n,x:i=0,y:r=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:c}=e||{};no(!c||c instanceof Bd),this.viewportInstance=c,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=kd(i),this._y=kd(r),this._width=kd(s),this._height=kd(o),this._padding=a&&{left:kd(a.left||0),right:kd(a.right||0),top:kd(a.top||0),bottom:kd(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&im(this.props,e.props))}makeViewport({width:e,height:n,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:n});return new this.ViewportType({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const i in this.props.viewState)"id"!==i&&(n[i]=this.props.viewState[i]);return n}return e}getDimensions({width:e,height:n}){const i={x:jd(this._x,e),y:jd(this._y,n),width:jd(this._width,e),height:jd(this._height,n)};return this._padding&&(i.padding={left:jd(this._padding.left,e),top:jd(this._padding.top,n),right:jd(this._padding.right,e),bottom:jd(this._padding.bottom,n)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const Wce=(new kn).lookAt({eye:[0,0,1]});function $ce({width:t,height:e,near:n,far:i,padding:r}){let s=-t/2,o=t/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:u=0,top:h=0,bottom:f=0}=r,g=jr((l+t-u)/2,0,t)-t/2,m=jr((h+e-f)/2,0,e)-e/2;s-=g,o-=g,a+=m,c+=m}return(new kn).ortho({left:s,right:o,bottom:a,top:c,near:n,far:i})}class qce extends Bd{constructor(e){const{width:n,height:i,near:r=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,u=Array.isArray(o)?o[0]:o,h=Array.isArray(o)?o[1]:o,f=Math.min(u,h),g=Math.pow(2,f);let m;if(u!==h){const y=Math.pow(2,u),b=Math.pow(2,h);m={unitsPerMeter:[y/g,b/g,1],metersPerUnit:[g/y,g/b,1]}}super({...e,longitude:void 0,position:a,viewMatrix:Wce.clone().scale([g,g*(l?-1:1),g]),projectionMatrix:$ce({width:n||1,height:i||1,padding:c,near:r,far:s}),zoom:f,distanceScales:m})}projectFlat([e,n]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],n*i[1]]}unprojectFlat([e,n]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],n*i[1]]}panByPosition(e,n){const i=C0(n,this.pixelUnprojectionMatrix),s=qE([],this.projectFlat(e),UH([],i)),o=qE([],this.center,s);return{target:this.unprojectFlat(o)}}}class T0{constructor(e){ge(this,"_inProgress",void 0),ge(this,"_handle",void 0),ge(this,"_timeline",void 0),ge(this,"time",void 0),ge(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(n=(i=this.settings).onStart)||void 0===n||n.call(i,this)}end(){var e,n;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(n=this.settings).onEnd)||void 0===e||e.call(n,this))}cancel(){var e,n;this._inProgress&&(null===(e=(n=this.settings).onInterrupt)||void 0===e||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,n;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(n=this.settings).onUpdate)||void 0===e||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const s4=()=>{},Xce=t=>t;class Kce{constructor(e){ge(this,"getControllerState",void 0),ge(this,"props",void 0),ge(this,"propsInTransition",void 0),ge(this,"transition",void 0),ge(this,"onViewStateChange",void 0),ge(this,"onStateChange",void 0),ge(this,"_onTransitionUpdate",n=>{const{time:i,settings:{interpolator:r,startProps:s,endProps:o,duration:a,easing:c}}=n,l=c(i/a),u=r.interpolateProps(s,o,l);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new T0(e.timeline),this.onViewStateChange=e.onViewStateChange||s4,this.onStateChange=e.onStateChange||s4}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;r={...i,...2===s?o:this.propsInTransition||i}}this._triggerTransition(r,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:i}=e;return(n>0||"auto"===n)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(n):!this._isTransitionEnabled(n)||n.transitionInterpolator.arePropsEqual(e,n)}_triggerTransition(e,n){const i=this.getControllerState(e),r=this.getControllerState(n).shortestPathFrom(i),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(0===o)return;const a=s.initializeProps(e,r);this.propsInTransition={};const c={duration:o,easing:n.transitionEasing||Xce,interpolator:s,interruption:n.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(n)}}}class Jce{constructor(e){ge(this,"_propsToCompare",void 0),ge(this,"_propsToExtract",void 0),ge(this,"_requiredProps",void 0);const{compare:n,extract:i,required:r}=e;this._propsToCompare=n,this._propsToExtract=i||n,this._requiredProps=r}arePropsEqual(e,n){for(const i of this._propsToCompare)if(!(i in e)||!(i in n)||!Zg(e[i],n[i]))return!1;return!0}initializeProps(e,n){const i={},r={};for(const s of this._propsToExtract)(s in e||s in n)&&(i[s]=e[s],r[s]=n[s]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const i=e[n];no(Number.isFinite(i)||Array.isArray(i),"".concat(n," is required for transition"))})}}const Zce=["longitude","latitude","zoom","bearing","pitch"],Qce=["longitude","latitude","zoom"];class tA extends Jce{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:Zce,required:Qce},super(i.transitionProps),ge(this,"opts",void 0),this.opts=i}initializeProps(e,n){const i=super.initializeProps(e,n),{makeViewport:r,around:s}=this.opts;if(r&&s){const o=r(e),a=r(n),c=o.unproject(s);i.start.around=s,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:n.width,height:n.height})}return i}interpolateProps(e,n,i){const r={};for(const s of this._propsToExtract)r[s]=VE(e[s]||0,n[s]||0,i);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...r});Object.assign(r,s.panByPosition(n.aroundPosition,VE(e.around,n.around,i)))}return r}}const Ud={transitionDuration:0},nA=t=>1-(1-t)*(1-t),rm_WHEEL=["wheel"],rm_PAN=["panstart","panmove","panend"],rm_PINCH=["pinchstart","pinchmove","pinchend"],rm_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],rm_DOUBLE_TAP=["doubletap"],rm_KEYBOARD=["keydown"],Tf={};class $D{constructor(e){ge(this,"props",void 0),ge(this,"state",{}),ge(this,"transitionManager",void 0),ge(this,"eventManager",void 0),ge(this,"onViewStateChange",void 0),ge(this,"onStateChange",void 0),ge(this,"makeViewport",void 0),ge(this,"_controllerState",void 0),ge(this,"_events",{}),ge(this,"_interactionState",{isDragging:!1}),ge(this,"_customEvents",[]),ge(this,"_eventStartBlocked",null),ge(this,"_panMove",!1),ge(this,"invertPan",!1),ge(this,"dragMode","rotate"),ge(this,"inertia",0),ge(this,"scrollZoom",!0),ge(this,"dragPan",!0),ge(this,"dragRotate",!0),ge(this,"doubleClickZoom",!0),ge(this,"touchZoom",!0),ge(this,"touchRotate",!1),ge(this,"keyboard",!0),this.transitionManager=new Kce({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;null===(e=this.eventManager)||void 0===e||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return!n&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!n&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!n&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:i}=this.props,{offsetCenter:r}=e;return[r.x-n,r.y-i]}isPointInBounds(e,n){const{width:i,height:r}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:!0===n?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(rm_WHEEL,u&&i),this.toggleEvents(rm_PAN,u&&(r||s)),this.toggleEvents(rm_PINCH,u&&(a||c)),this.toggleEvents(rm_TRIPLE_PAN,u&&c),this.toggleEvents(rm_DOUBLE_TAP,u&&o),this.toggleEvents(rm_KEYBOARD,u&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(i=>{this._events[i]!==n&&(this._events[i]=n,n?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,n=null,i={}){const r={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:n});return this._panMove=i,this.updateViewport(r,Ud,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),i=this.controllerState.pan({pos:n});return this.updateViewport(i,Ud,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const i=this.getCenter(e),s=this.controllerState.pan({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:nA},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Ud,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const i=this.getCenter(e),s=this.controllerState.rotate({pos:[i[0]+e.velocityX*n/2,i[1]+e.velocityY*n/2]}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:nA},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.rotateStart({pos:n});return this.updateViewport(i,Ud,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const i=this.controllerState.rotate({pos:n});return this.updateViewport(i,Ud,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:nA},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Tf._startPinchRotation=e.rotation,Tf._lastPinchEvent=e,this.updateViewport(i,Ud,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);n=n.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;n=n.rotate({deltaAngleX:Tf._startPinchRotation-i})}return this.updateViewport(n,Ud,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Tf._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:i}=Tf;if(this.touchZoom&&n&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,o+a*n/2);s=s.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:n,transitionEasing:nA},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Tf._startPinchRotation=null,Tf._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:n,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=n?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=n?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":n?(c=a.rotateLeft(s),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":n?(c=a.rotateRight(s),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":n?(c=a.rotateUp(o),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":n?(c=a.rotateDown(o),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:n}=this;return n&&n.transitionInterpolator?e?{...n,transitionInterpolator:new tA({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n:Ud}}class o4{constructor(e,n){ge(this,"_viewportProps",void 0),ge(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}class a4 extends o4{constructor(e){const{width:n,height:i,rotationX:r=0,rotationOrbit:s=0,target:o=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:u=-1/0,maxZoom:h=1/0,startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:y,startZoomPosition:b,startZoom:R}=e;super({width:n,height:i,rotationX:r,rotationOrbit:s,target:o,zoom:a,minRotationX:c,maxRotationX:l,minZoom:u,maxZoom:h},{startPanPosition:f,startRotatePos:g,startRotationX:m,startRotationOrbit:y,startZoomPosition:b,startZoom:R}),ge(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const i=this.getState().startPanPosition||n;if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:s,startRotationOrbit:o}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===s||void 0===o)return this;let l;if(e){let u=(e[0]-r[0])/a;(s<-90||s>90)&&(u*=-1),l={rotationX:s+(e[1]-r[1])/c*180,rotationOrbit:o+180*u}}else l={rotationX:s+i,rotationOrbit:o+n};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-n.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomPosition:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const o=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===n&&(n=this.getViewportProps().zoom),jr(n+Math.log2(e),r,i)}_panFromCenter(e){const{width:n,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[jr(r[0],i,n),jr(r[1],i,n)]:jr(r,i,n),e.rotationX=jr(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=function Gae(t,e){const n=t%e;return n<0?e+n:n}(a+180,360)-180),e}}class tle extends $D{constructor(...e){super(...e),ge(this,"ControllerState",a4),ge(this,"transition",{transitionDuration:300,transitionInterpolator:new tA({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class nle extends a4{constructor(e){super(e),ge(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===n&&(n=this.getViewportProps().zoom);let s=Math.log2(e);if(Array.isArray(n)){let[o,a]=n;switch(this.zoomAxis){case"X":o=jr(o+s,r,i);break;case"Y":a=jr(a+s,r,i);break;default:let c=Math.min(o+s,a+s);c<r&&(s+=r-c),c=Math.max(o+s,a+s),c>i&&(s+=i-c),o+=s,a+=s}return[o,a]}return jr(n+s,r,i)}}class ile extends $D{constructor(...e){super(...e),ge(this,"ControllerState",nle),ge(this,"transition",{transitionDuration:300,transitionInterpolator:new tA(["target","zoom"])}),ge(this,"dragMode","pan")}_onPanRotate(){return!1}}class qD extends zD{get ViewportType(){return qce}get ControllerType(){return ile}}ge(qD,"displayName","OrthographicView");const XD=Math.PI/180;function rle({height:t,focalDistance:e,orbitAxis:n,rotationX:i,rotationOrbit:r,zoom:s}){const o="Z"===n?[0,0,1]:[0,1,0],a="Z"===n?[0,-e,0]:[0,0,e],c=(new kn).lookAt({eye:a,up:o});c.rotateX(i*XD),"Z"===n?c.rotateZ(r*XD):c.rotateY(r*XD);const l=Math.pow(2,s)/t;return c.scale(l),c}class sle extends Bd{constructor(e){const{height:n,projectionMatrix:i,fovy:r=50,orbitAxis:s="Z",target:o=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,u=i?i[5]/2:HD(r);super({...e,longitude:void 0,viewMatrix:rle({height:n||1,focalDistance:u,orbitAxis:s,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:u,position:o,zoom:l}),ge(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){const[i,r,s=this.projectedCenter[2]]=e,o=n?r:this.height-r,[a,c,l]=C0([i,o,s],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,n){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-n[0],this.height/2+i[1]-n[1],this.projectedCenter[2]])}}}class c4 extends zD{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return sle}get ControllerType(){return tle}}ge(c4,"displayName","OrbitView");const I0="vs";function Ua(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const KD={number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},array:{validate:(t,e)=>Array.isArray(t)||ArrayBuffer.isView(t)}};function ale(t){let e=l4(t);return"object"===e?t?"type"in t?Object.assign({},t,KD[t.type]):"value"in t?(e=l4(t.value),Object.assign({type:e},t,KD[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},KD[e])}function l4(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}class JD{constructor(e){let{name:n,vs:i,fs:r,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:c=[],defines:l={},inject:u={},vertexShader:h,fragmentShader:f}=e;Ua("string"==typeof n),this.name=n,this.vs=i||h,this.fs=r||f,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function ule(t){const e={vs:{},fs:{}};for(const n in t){let i=t[n];"string"==typeof i&&(i={order:0,injection:i}),e[n.slice(0,2)][n]=i}return e}(u),o&&(this.uniforms=function ole(t){const e={};for(const n in t){const r=ale(t[n]);e[n]=r}return e}(o))}getModuleSource(e){let n;switch(e){case"vs":n=this.vs||"";break;case"fs":n=this.fs||"";break;default:Ua(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?n.deprecated(i.old,i.new)():n.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{n.regex="function"===n.type?new RegExp("\\b".concat(n.old,"\\(")):new RegExp("".concat(n.type," ").concat(n.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&Ua(s.validate(e[r],s),"".concat(this.name,": invalid ").concat(r)),n[r]=e[r]):n[r]=s.value}return n}}function dle(t){return function u4(t){const e={},n={};return ZD({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((i,r)=>n[r]-n[i]).map(i=>e[i])}(d4(t))}function ZD(t){let{modules:e,level:n,moduleMap:i,moduleDepth:r}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)i[s.name]=s,(void 0===r[s.name]||r[s.name]<n)&&(r[s.name]=n);for(const s of e)s.dependencies&&ZD({modules:s.dependencies,level:n+1,moduleMap:i,moduleDepth:r})}function d4(t,e){return t.map(n=>(n instanceof JD||(Ua("string"!=typeof n,"Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Ua(n.name,"shader module has no name"),(n=new JD(n)).dependencies=d4(n.dependencies)),n))}const fle=7936,ple=7937,gle=7938,mle=35724,QD={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},If={};function vle(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(QD).forEach(t=>{If[t]=t});const eR={};function h4(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=QD[e];if(Ua(i,e),!function hle(){const e=typeof window<"u"&&window.navigator||{},n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r}(n))return!0;if(e in eR)return eR[e];const s=n.behavior||"enable",o="#extension GL_".concat(i[0]," : ").concat(s,"\nvoid main(void) {}"),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const c=t.getShaderParameter(a,35713);return t.deleteShader(a),eR[e]=c,c}function iA(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>function ble(t,e){const n=QD[e];Ua(n,e);const i=function _le(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}(t)&&n[1]||n[0],r="string"==typeof i?!!t.getExtension(i):i;return Ua(!1===r||!0===r),r}(t,n))}const Sle={[I0]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",fs:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},rA="__LUMA_INJECT_DECLARATIONS__",f4=/void\s+main\s*\([^)]*\)\s*\{\n?/,p4=/}\n?[^{}]*$/,tR=[];function g4(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===I0;for(const s in n){const o=n[s];o.sort((c,l)=>c.order-l.order),tR.length=o.length;for(let c=0,l=o.length;c<l;++c)tR[c]=o[c].injection;const a="".concat(tR.join("\n"),"\n");switch(s){case"vs:#decl":r&&(t=t.replace(rA,a));break;case"vs:#main-start":r&&(t=t.replace(f4,c=>c+a));break;case"vs:#main-end":r&&(t=t.replace(p4,c=>a+c));break;case"fs:#decl":r||(t=t.replace(rA,a));break;case"fs:#main-start":r||(t=t.replace(f4,c=>c+a));break;case"fs:#main-end":r||(t=t.replace(p4,c=>a+c));break;default:t=t.replace(s,c=>c+a)}}return t=t.replace(rA,""),i&&(t=t.replace(/\}\s*$/,s=>s+Sle[e])),t}function nR(t){const e={};return Ua(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const i in n)e[i]=e[i]?"".concat(e[i],"\n").concat(n[i]):n[i]}),e}function sm(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const m4=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Cle=[...m4,[sm("attribute"),"in $1"],[sm("varying"),"out $1"]],Mle=[...m4,[sm("varying"),"in $1"]],_4=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Tle=[..._4,[sm("in"),"attribute $1"],[sm("out"),"varying $1"]],Ile=[..._4,[sm("in"),"varying $1"]],iR="gl_FragColor",rR=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,Dle=/void\s+main\s*\([^)]*\)\s*\{\n?/;function sA(t,e){for(const[n,i]of e)t=t.replace(n,i);return t}const Ple="\n\n".concat(rA,"\n\n"),y4={[I0]:"vertex",fs:"fragment"};function v4(t,e){let{id:n,source:i,type:r,modules:s,defines:o={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:u=!0,log:h}=e;Ua("string"==typeof i,"shader source must be a string");const f=r===I0,g=i.split("\n");let m=100,y="",b=i;0===g[0].indexOf("#version ")?(m=300,y=g[0],b=g.slice(1).join("\n")):y="#version ".concat(m);const R={};s.forEach(tt=>{Object.assign(R,tt.getDefines())}),Object.assign(R,o);let L=u?"".concat(y,"\n").concat(function jle(t){let{id:e,source:n,type:i}=t;return e&&"string"==typeof e&&-1===n.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(y4[i],"\n\n"):""}({id:n,source:i,type:r}),"\n").concat(function kle(t){let{type:e}=t;return"\n#define SHADER_TYPE_".concat(y4[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function wle(t){switch(function yle(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||fle),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||ple);return{gpuVendor:vle(n,i),vendor:n,renderer:i,version:t.getParameter(gle),shadingLanguageVersion:t.getParameter(mle)}}(t).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(t),"\n").concat(function xle(t,e,n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return iA(t,If.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),iA(t,If.GLSL_DERIVATIVES)&&h4(t,If.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),iA(t,If.GLSL_FRAG_DATA)&&h4(t,If.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),iA(t,If.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(t),"\n").concat(function Ule(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n="";for(const i in t){0===e&&(n+="\n// APPLICATION DEFINES\n"),e++;const r=t[i];(r||Number.isFinite(r))&&(n+="#define ".concat(i.toUpperCase()," ").concat(t[i],"\n"))}return 0===e&&(n+="\n"),n}(R),"\n").concat(f?"":"precision highp float;\n\n","\n"):"".concat(y,"\n");const ie=function Hle(t){const e={vs:{},fs:{}};return t.forEach(n=>{let i;"string"!=typeof n?(i=n,n=i.hook):i={},n=n.trim();const[r,s]=n.split(":"),o=n.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(a),q={},Ee={},Re={};for(const tt in c){const dt="string"==typeof c[tt]?{injection:c[tt],order:0}:c[tt],We=tt.match(/^(v|f)s:(#)?([\w-]+)$/);We?We[2]?"decl"===We[3]?Ee[tt]=[dt]:Re[tt]=[dt]:q[tt]=[dt]:Re[tt]=[dt]}for(const tt of s){h&&tt.checkDeprecations(b,h),L+=tt.getModuleSource(r,m);const We=tt.injections[r];for(const ht in We){const bt=ht.match(/^(v|f)s:#([\w-]+)$/);if(bt){const pt="decl"===bt[2]?Ee:Re;pt[ht]=pt[ht]||[],pt[ht].push(We[ht])}else q[ht]=q[ht]||[],q[ht].push(We[ht])}}return L+=Ple,L=g4(L,r,Ee),L+=function Vle(t,e){let n="";for(const i in t){const r=t[i];if(n+="void ".concat(r.signature," {\n"),r.header&&(n+="  ".concat(r.header)),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,"\n")}r.footer&&(n+="  ".concat(r.footer)),n+="}\n"}return n}(ie[r],q),L+=b,L=g4(L,r,Re),L=function Rle(t,e,n){switch(e){case 300:return n?sA(t,Cle):function Ole(t){const e=(t=sA(t,Mle)).match(rR);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(iR,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(Dle,i=>"out vec4 ".concat(n,";\n").concat(i)).replace(new RegExp("\\b".concat(iR,"\\b"),"g"),n)}return t}(t);case 100:return n?sA(t,Tle):function Nle(t){const e=(t=sA(t,Ile)).match(rR);if(e){const n=e[1];t=t.replace(rR,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),iR)}return t}(t);default:throw new Error("unknown GLSL version ".concat(e))}}(L,l?100:m,f),L}function Ble(t){return function(n){const i={};for(const r of t){const s=r.getUniforms(n,i);Object.assign(i,s)}return i}}const an=new w0({id:"luma.gl"});function Zo(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const zle="Requires WebGL2";function oA(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||!Number.isFinite(t._version))}function ei(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext||!(!t||2!==t._version)}function aA(t){return Zo(oA(t),"Invalid WebGLRenderingContext"),t}function No(t){return Zo(ei(t),zle),t}const D0={};const R0=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new t.VertexAttrib(n);this.attribs[i]=r}this.maxAttrib=0};(R0.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Df=function(e){const n=this;this.gl=e,function Yle(t){const e=t.getError;t.getError=function(){let i;do{i=e.apply(t),0!==i&&(D0[i]=!0)}while(0!==i);for(i in D0)if(D0[i])return delete D0[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const c=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,c,l,u){const h=n.currentVertexArrayObject;h.maxAttrib=Math.max(h.maxAttrib,s);const f=h.attribs[s];return f.buffer=n.currentArrayBuffer,f.size=o,f.type=a,f.normalized=c,f.stride=l,f.offset=u,f.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function qle(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)})("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Df.prototype.VERTEX_ARRAY_BINDING_OES=34229,Df.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new R0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Df.prototype.createVertexArrayOES=function(){const e=new R0(this);return this.vertexArrayObjects.push(e),e},Df.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Df.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof R0&&e.hasBeenBound&&e.ext===this)},Df.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive)return void function Xle(t,e){D0[t]=!0,void 0!==e&&function $le(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let c=0;c<=a;c++){const l=s.attribs[c],u=r?r.attribs[c]:null;if((!r||l.enabled!==u.enabled)&&(l.enabled?i.enableVertexAttribArray.call(n,c):i.disableVertexAttribArray.call(n,c)),l.enabled){let h=!1;(!r||l.buffer!==u.buffer)&&(o!==l.buffer&&(i.bindBuffer.call(n,34962,l.buffer),o=l.buffer),h=!0),(h||l.cached!==u.cached)&&i.vertexAttribPointer.call(n,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(n,34962,this.currentArrayBuffer)};const b4="OES_element_index",w4="WEBGL_draw_buffers",x4="WEBGL_debug_renderer_info",yr=t=>ei(t)?void 0:0,oue={3074:t=>ei(t)?void 0:36064,35723:t=>ei(t)?void 0:4352,35977:yr,32937:yr,36795:(t,e)=>{const n=ei(t)?t.getExtension("EXT_disjoint_timer_query_webgl2"):t.getExtension("EXT_disjoint_timer_query");return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},37445:(t,e)=>{const n=t.getExtension(x4);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},37446:(t,e)=>{const n=t.getExtension(x4);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},34047:(t,e)=>{const n=t.luma.extensions.EXT_texture_filter_anisotropic;return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:yr,35071:yr,37447:yr,36063:(t,e)=>{if(!ei(t)){const n=t.getExtension(w4);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:yr,35374:yr,35377:yr,34852:t=>{if(!ei(t)){const e=t.getExtension(w4);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(b4)?2147483647:65535,33001:t=>t.getExtension(b4)?16777216:65535,33e3:t=>16777216,37157:yr,35373:yr,35657:yr,36183:yr,37137:yr,34045:yr,35978:yr,35979:yr,35968:yr,35376:yr,35375:yr,35659:yr,37154:yr,35371:yr,35658:yr,35076:yr,35077:yr,35380:yr},E4="ANGLE_instanced_arrays",A4={OES_vertex_array_object:{meta:{suffix:"OES"},createVertexArray:()=>{Zo(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[E4]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){Zo(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},WEBGL_draw_buffers:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Zo(!1)}},EXT_disjoint_timer_query:{meta:{suffix:"EXT"},createQuery:()=>{Zo(!1)},deleteQuery:()=>{Zo(!1)},beginQuery:()=>{Zo(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},sR={readBuffer:(t,e,n)=>{ei(t)&&e(n)},getVertexAttrib:(t,e,n,i)=>{const{webgl2:r,ext:s}=function fue(t,e){return{webgl2:ei(t),ext:t.getExtension(e)}}(t,E4);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(n,i)},getProgramParameter:(t,e,n,i)=>{if(!ei(t))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(n,i)},getInternalformatParameter:(t,e,n,i,r)=>ei(t)||32937!==r?t.getInternalformatParameter(n,i,r):new Int32Array([0]),getTexParameter(t,e,n,i){if(34046===i){const{extensions:r}=t.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(n,i)},getParameter:function aue(t,e,n){const i=oue[n],r="function"==typeof i?i(t,e,n):i;return void 0!==r?r:e(n)},hint:(t,e,n,i)=>e(n,i)};function yue(t,e){let{extension:n,target:i,target2:r}=e;const s=A4[n];Zo(s);const{meta:o={}}=s,{suffix:a=""}=o,c=t.getExtension(n);for(const l of Object.keys(s)){const u="".concat(l).concat(a);let h=null;"meta"===l||"function"==typeof t[l]||(c&&"function"==typeof c[u]?h=function(){return c[u](...arguments)}:"function"==typeof s[l]&&(h=s[l].bind(i))),h&&(i[l]=h,r[l]=h)}}globalThis.polyfillContext=function pue(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(function Kle(t){if("function"==typeof t.createVertexArray)return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const n=t.getExtension;t.getExtension=function(r){return n.call(this,r)||("OES_vertex_array_object"!==r?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Df(this)),this.__OESVertexArrayObject))}}(t),function gue(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}(t),function _ue(t,e){for(const n of Object.getOwnPropertyNames(e))"overrides"!==n&&yue(t,{extension:n,target:t.luma,target2:t})}(t,A4),function mue(t,e){let{target:n,target2:i}=e;Object.keys(sR).forEach(r=>{if("function"==typeof sR[r]){const s=t[r]?t[r].bind(t):()=>{},o=sR[r].bind(null,t,s);n[r]=o,i[r]=o}})}(t,{target:e,target2:t}),e.polyfilled=!0),t};const oR={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Vd=(t,e,n)=>e?t.enable(n):t.disable(n),S4=(t,e,n)=>t.hint(n,e),Va=(t,e,n)=>t.pixelStorei(n,e);function O0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const wue={3042:Vd,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Vd,2885:(t,e)=>t.cullFace(e),2929:Vd,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Vd,35723:S4,36006:(t,e)=>{const n=ei(t)?36009:36160;return t.bindFramebuffer(n,e)},2886:(t,e)=>t.frontFace(e),33170:S4,2849:(t,e)=>t.lineWidth(e),32823:Vd,32824:"polygonOffset",10752:"polygonOffset",35977:Vd,32938:"sampleCoverage",32939:"sampleCoverage",3089:Vd,3088:(t,e)=>t.scissor(...e),2960:Vd,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Va,3317:Va,37440:Va,37441:Va,37443:Va,3330:Va,3332:Va,3331:Va,36010:(t,e)=>t.bindFramebuffer(36008,e),3314:Va,32878:Va,3316:Va,3315:Va,32877:Va,framebuffer:(t,e)=>t.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=O0(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=O0(e)&&2===e.length?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=O0(e)?e:[e,e];const[n,i]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=O0(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilFuncSeparate(1028,n,i,r),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=O0(e)&&3===e.length?[...e,...e]:e;const[n,i,r,s,o,a]=e;t.stencilOpSeparate(1028,n,i,r),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function qr(t,e,n){return void 0!==e[t]?e[t]:n[t]}const xue={blendEquation:(t,e,n)=>t.blendEquationSeparate(qr(32777,e,n),qr(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(qr(32969,e,n),qr(32968,e,n),qr(32971,e,n),qr(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(qr(32824,e,n),qr(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(qr(32938,e,n),qr(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,qr(2962,e,n),qr(2967,e,n),qr(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,qr(34816,e,n),qr(36003,e,n),qr(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,qr(2964,e,n),qr(2965,e,n),qr(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,qr(34817,e,n),qr(34818,e,n),qr(34819,e,n))},C4={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,i,r)=>t({32773:new Float32Array([e,n,i,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,i,r)=>t({32969:e,32968:n,32971:i,32970:r}),clearColor:(t,e,n,i,r)=>t({3106:new Float32Array([e,n,i,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,i,r)=>t({3107:[e,n,i,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,i,r)=>t({3088:new Int32Array([e,n,i,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[1028===e?2968:36005]:n}),stencilFunc:(t,e,n,i)=>t({2962:e,2967:n,2963:i,34816:e,36003:n,36004:i}),stencilFuncSeparate:(t,e,n,i,r)=>t({[1028===e?2962:34816]:n,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(t,e,n,i)=>t({2964:e,2965:n,2966:i,34817:e,34818:n,34819:i}),stencilOpSeparate:(t,e,n,i,r)=>t({[1028===e?2964:34817]:n,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(t,e,n,i,r)=>t({2978:[e,n,i,r]})},El=(t,e)=>t.isEnabled(e),M4={3042:El,2884:El,2929:El,3024:El,32823:El,32926:El,32928:El,3089:El,2960:El,35977:El};function T4(t){for(const e in t)return!1;return!0}function Eue(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&i&&t.length===e.length){for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}function I4(t,e){const n=t[e].bind(t);t[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in t.state.cache&&t.state.enable?t.state.cache[r]:n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function Aue(t,e,n){const i=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:c,oldValue:l}=n(t.state._updateCache,...o);return c&&i(...o),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class Cue{constructor(e){let{copyState:n=!1,log:i=(()=>{})}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?function Tue(t,e){if("number"==typeof(e=e||oR)){const r=e,s=M4[r];return s?s(t,r):t.getParameter(r)}const n=Array.isArray(e)?e:Object.keys(e),i={};for(const r of n){const s=M4[r];i[r]=s?s(t,Number(r)):t.getParameter(Number(r))}return i}(e):Object.assign({},oR),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Zo(this.stateStack.length>0),Du(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,n=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){Zo(void 0!==s);const o=e[s],a=this.cache[s];Eue(o,a)||(n=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:i}}}function D4(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:n=!0,copyState:i}=e;if(Zo(void 0!==i),!t.state){const{polyfillContext:r}=globalThis;r&&r(t),t.state=new Cue(t,{copyState:i}),function Sue(t){const e=t.useProgram.bind(t);t.useProgram=function(i){t.state.program!==i&&(e(i),t.state.program=i)}}(t);for(const s in C4)Aue(t,s,C4[s]);I4(t,"getParameter"),I4(t,"isEnabled")}return t.state.enable=n,t}function R4(t){Zo(t.state),t.state.pop()}function Du(t,e){if(Zo(oA(t),"setParameters requires a WebGL context"),T4(e))return;const n={};for(const r in e){const s=Number(r),o=wue[r];o&&("string"==typeof o?n[o]=!0:o(t,e[r],s))}const i=t.state&&t.state.cache;if(i)for(const r in n)(0,xue[r])(t,e,i)}function gc(t,e,n){if(T4(e))return n(t);const{nocatch:i=!0}=e;let r;if(function Mue(t){t.state||D4(t,{copyState:!1}),t.state.push()}(t),Du(t,e),i)r=n(t),R4(t);else try{r=n(t)}finally{R4(t)}return r}function om(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,i="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return i?t.drawingBufferWidth/i:1}return 1}function aR(t,e){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function Rue(t,e,n,i,r){const s=O4(t[0],e,n);let o=N4(t[1],e,i,r),a=O4(t[0]+1,e,n);const c=a===n-1?a:a-1;let l;return a=N4(t[1]+1,e,i,r),r?(a=0===a?a:a+1,l=o,o=a):l=a===i-1?a:a-1,{x:s,y:o,width:Math.max(c-s+1,1),height:Math.max(l-o+1,1)}}(e,om(t),t.drawingBufferWidth,t.drawingBufferHeight,n)}function O4(t,e,n){return Math.min(Math.round(t*e),n-1)}function N4(t,e,n,i){return i?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const cR=bl(),Oue=cR&&typeof document<"u",P4={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function F4(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Zo(cR,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),t=Object.assign({},P4,t);const{width:e,height:n}=t;function i(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}let r;t.onError=i;const{canvas:s}=t,o=function Lue(t){let s,{canvas:e,width:n=800,height:i=600,onError:r}=t;return"string"==typeof e?(Oue&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}({canvas:s,width:e,height:n,onError:i});return r=function Fue(t,e){const{onError:n}=e;let i=null;const r=c=>i=c.statusMessage||i;t.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(o,t),r?(r=lR(r,t),function Bue(t){const e=ei(t)?"WebGL2":"WebGL1",n=function Nue(t){const e=t.getParameter(7936),n=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}(t),i=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",r=t.debug?" debug":"";an.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function lR(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||function kue(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},P4,e);const{manageState:n,debug:i}=e;return n&&D4(t,{copyState:!1,log:function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return an.log(1,...s)()}}),cR&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),an.level=Math.max(an.level,1)):an.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function L4(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class B4{constructor(e,n){ge(this,"name",void 0),ge(this,"type",void 0),ge(this,"sampleSize",1),ge(this,"time",void 0),ge(this,"count",void 0),ge(this,"samples",void 0),ge(this,"lastTiming",void 0),ge(this,"lastSampleTime",void 0),ge(this,"lastSampleCount",void 0),ge(this,"_count",0),ge(this,"_time",0),ge(this,"_samples",0),ge(this,"_startTime",0),ge(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=L4(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(L4()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class uR{constructor(e){ge(this,"id",void 0),ge(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:i}=e;return this.stats[n]||(this.stats[n]=e instanceof B4?e:new B4(n,i)),this.stats[n]}}const N0="8.5.21",Rf=new class Vue{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new uR({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==N0)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(N0));function Jt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function dR(t,e){if("string"!=typeof e)return e;const n=Number(e);if(!isNaN(n))return n;const i=t[e=e.replace(/^.*\./,"")];return Jt(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function Hd(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}globalThis.luma||(bl()&&an.log(1,"luma.gl ".concat(N0," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:N0,version:N0,log:an,stats:Rf,globals:{modules:{},nodeIO:{}}}),globalThis;const hR={};function _a(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";hR[t]=hR[t]||1;const e=hR[t]++;return"".concat(t,"-").concat(e)}function k4(t){return Jt("number"==typeof t,"Input must be a number"),t&&!(t&t-1)}function am(t){let e=!0;for(const n in t){e=!1;break}return e}function j4(t,e,n,i){const r="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);i.forEach(o=>{s.methodName||(s[o]=()=>{throw an.removed("Calling removed method ".concat(e,".").concat(o,": "),r)(),new Error(o)})})}const cm="Resource subclass must define virtual methods";class Ru{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};aA(e);const{id:i,userData:r={}}=n;this.gl=e,this.gl2=e,this.id=i||_a(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(i=>i.delete()),this}bind(){let n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n)}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Jt(e=dR(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=ei(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))return s&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:n,keys:i}=e,r=this.constructor.PARAMETERS||{},s=ei(this.gl),o={},a=n||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||s)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const h=i?Hd(this.gl,c):c;o[h]=this.getParameter(c,e),i&&"GLenum"===l.type&&(o[h]=Hd(this.gl,o[h]))}}return o}setParameter(e,n){Jt(e=dR(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=ei(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(n=dR(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,i){return j4(this,e,n,i)}initialize(e){}_createHandle(){throw new Error(cm)}_deleteHandle(){throw new Error(cm)}_bindHandle(e){throw new Error(cm)}_getOptsFromHandle(){throw new Error(cm)}_getParameter(e,n){throw new Error(cm)}_setParameter(e,n){throw new Error(cm)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=Rf.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Rf.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=Rf.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=Rf.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const Hue="Failed to deduce GL constant from typed array";function fR(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Hue)}}function P0(t){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function zue(t){let{data:e,width:n,height:i}=t;const r=Math.round(n/2),s=Math.round(i/2),o=new Uint8Array(r*s*4);for(let a=0;a<s;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)o[4*(a*r+c)+l]=e[4*(2*a*n+2*c)+l];return{data:o,width:r,height:s}}function pR(t,e,n){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=n;for(const a in i)if(a in e){const l=i[a]?"".concat(t,".").concat(i[a]):"N/A";an.removed("".concat(t,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];an.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))()}let o=null;for(const a in s)if(a in e){const c=s[a];an.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))(),o=o||Object.assign({},e),o[c]=e[a],delete o[a]}return o||e}const Wue={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},$ue={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class ya{static getBytesPerElement(e){return P0(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return Jt(e.size),P0(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return new ya(Wue,...n)}constructor(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return ya.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return ya.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=pR("Accessor",e,$ue),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const V4={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},que={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:V4},Xue={removedProps:V4};class Ji extends Ru{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/ya.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/ya.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=pR("Buffer",e,que),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=pR("Buffer",e,Xue))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new ya(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;Jt(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(No(this.gl),this.gl.bufferSubData(this.target,i,n,r,s)):this.gl.bufferSubData(o,i,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:i=0,writeOffset:r=0,size:s}=e;const{gl:o}=this;return No(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,i,r,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};No(this.gl);const s=P0(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(o,r||o),l=a+c);const u=Math.min(o,c);return r=r||u,Jt(r<=u),e=e||new s(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,n,this.handle,i,r):(Jt(0===i),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+n;Jt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,n,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=fR(e);return Jt(s),this.setAccessor(new ya(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Jt(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,n),this.gl.bindBuffer(r,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/P0(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new ya(this.accessor,{type:fR(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return an.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return an.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return an.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return an.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new ya(this.accessor,e),this}}const gR={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},H4={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},G4={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Jue=[9729,9728],z4=globalThis.WebGLBuffer||function(){};class Of extends Ru{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=n;let s=!0;return i&&(s=s&&function Yue(t,e){const n=gR[e];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;const i=ei(t)&&n.gl2||n.gl1;return"string"==typeof i?t.getExtension(i):i}(e,i),s=s&&(!r||function Kue(t,e){const n=gR[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,n){const{id:i=_a("texture"),handle:r,target:s}=n;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(L=>this.initialize(Object.assign({},e,{pixels:L,data:L}))),this;const i=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(i&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:u}=e;n||(n=r);let{width:h,height:f,dataFormat:g,type:m,compressed:y=!1,mipmaps:b=!0}=e;const{depth:R=0}=e;return({width:h,height:f,compressed:y,dataFormat:g,type:m}=this._deduceParameters({format:s,type:m,dataFormat:g,compressed:y,data:n,width:h,height:f})),this.width=h,this.height=f,this.depth=R,this.format=s,this.type=m,this.dataFormat=g,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),b&&this._isNPOT()&&(an.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),b=!1,this._updateForNPOT(c)),this.mipmaps=b,this.setImageData({data:n,width:h,height:f,depth:R,format:s,type:m,dataFormat:g,border:o,mipmaps:b,parameters:l,compressed:y}),b&&this.generateMipmap(),this.setParameters(c),a&&(this.data=n),i&&(this._video={video:n,parameters:c,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:i,mipmaps:r=!1}=e;return i!==this.width||n!==this.height?this.initialize({width:i,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(an.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),gc(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:u=this.type,width:h=this.width,height:f=this.height,dataFormat:g=this.dataFormat,compressed:m=!1}=e;l||(l=i),({type:u,dataFormat:g,compressed:m,width:h,height:f}=this._deduceParameters({format:s,type:u,dataFormat:g,compressed:m,data:l,width:h,height:f}));const{gl:y}=this;y.bindTexture(this.target,this.handle);let b=null;({data:l,dataType:b}=this._getDataType({data:l,compressed:m}));let R,L=0;return gc(this.gl,c,()=>{switch(b){case"null":y.texImage2D(n,r,s,h,f,o,g,u,l);break;case"typed-array":y.texImage2D(n,r,s,h,f,o,g,u,l,a);break;case"buffer":R=No(y),R.bindBuffer(35052,l.handle||l),R.texImage2D(n,r,s,h,f,o,g,u,a),R.bindBuffer(35052,null);break;case"browser-object":ei(y)?y.texImage2D(n,r,s,h,f,o,g,u,l):y.texImage2D(n,r,s,g,u,l);break;case"compressed":for(const[ie,q]of l.entries())y.compressedTexImage2D(n,ie,q.format,q.width,q.height,o,q.data),L+=q.levelSize;break;default:Jt(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===b?L:l&&l.byteLength?l.byteLength:this.width*this.height*(H4[this.dataFormat]||4)*(G4[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:i=null,data:r=null,x:s=0,y:o=0,width:a=this.width,height:c=this.height,level:l=0,format:u=this.format,type:h=this.type,dataFormat:f=this.dataFormat,compressed:g=!1,offset:m=0,border:y=this.border,parameters:b={}}=e;if(({type:h,dataFormat:f,compressed:g,width:a,height:c}=this._deduceParameters({format:u,type:h,dataFormat:f,compressed:g,data:r,width:a,height:c})),Jt(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const R=r;r=R.data,a=R.shape[0],c=R.shape[1]}r instanceof Ji&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),gc(this.gl,b,()=>{if(g)this.gl.compressedTexSubImage2D(n,l,s,o,a,c,u,r);else if(null===r)this.gl.texSubImage2D(n,l,s,o,a,c,f,h,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(n,l,s,o,a,c,f,h,r,m);else if(r instanceof z4){const R=No(this.gl);R.bindBuffer(35052,r),R.texSubImage2D(n,l,s,o,a,c,f,h,m),R.bindBuffer(35052,null)}else ei(this.gl)?No(this.gl).texSubImage2D(n,l,s,o,a,c,f,h,r):this.gl.texSubImage2D(n,l,s,o,f,h,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return an.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:n}=this;return void 0!==e&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:i=!1}=e;return i?{data:n,dataType:"compressed"}:null===n?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof Ji?{data:n.handle,dataType:"buffer"}:n instanceof z4?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:c}=e;const l=gR[n];return o=o||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:c,width:r,height:s,format:n,data:i}}_deduceImageSize(e,n,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:n,height:i}:{width:n>=0?n:1,height:i>=0?i:1},Jt(r,"Could not deduced texture size"),Jt(void 0===n||r.width===n,"Deduced texture width does not match supplied width"),Jt(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:Jt(!1);break;default:this.gl.texParameteri(this.target,e,n)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!(ei(this.gl)||!this.width||!this.height||k4(this.width)&&k4(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:-1===Jue.indexOf(n)&&(n=9729);break;case 10242:case 10243:33071!==n&&(n=33071)}return n}}function Zue(t,e){return Jt("string"==typeof t),t=""+t,new Promise((n,i)=>{try{const r=new Image;r.onload=()=>n(r),r.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=t}catch(r){i(r)}})}class io extends Of{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Of.isSupported(e,n)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};aA(e),(n instanceof Promise||"string"==typeof n)&&(n={data:n}),"string"==typeof n.data&&(n=Object.assign({},n,{data:Zue(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const Nf="EXT_color_buffer_float",W4={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Nf,bpp:2},33327:{gl2:Nf,bpp:4},34842:{gl2:Nf,bpp:8},33326:{gl2:Nf,bpp:4},33328:{gl2:Nf,bpp:8},34836:{gl2:Nf,bpp:16},35898:{gl2:Nf,bpp:4}};class lm extends Ru{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!n||function Que(t,e,n){const i=n[e];if(!i)return!1;const r=ei(t)&&i.gl2||i.gl1;return"string"==typeof r?t.getExtension(r):r}(e,n,W4)}static getSamplesForFormat(e,n){let{format:i}=n;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:i=1,height:r=1,samples:s=0}=e;return Jt(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&ei(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,i,r):this.gl.renderbufferStorage(36161,n,i,r),this.format=n,this.width=i,this.height=r,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*W4[this.format].bpp),this}resize(e){let{width:n,height:i}=e;return n!==this.width||i!==this.height?this.initialize({width:n,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const $4=6144,K4="clear: bad arguments";function _R(t){let{framebuffer:e=null,color:n=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=16384,!0!==n&&(s.clearColor=n)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),Jt(0!==o,K4),gc(t,s,()=>{t.clear(o)})}const yR=[34069,34070,34071,34072,34073,34074];let sde=(()=>{class t extends Of{get[Symbol.toStringTag](){return"TextureCube"}constructor(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};aA(n),super(n,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=n;return this.opts=n,this.setCubeMapImageData(n).then(()=>{this.loaded=!0,i&&this.generateMipmap(n),this.setParameters(r)}),this}subImage(n){let{face:i,data:r,x:s=0,y:o=0,mipmapLevel:a=0}=n;return this._subImage({target:i,data:r,x:s,y:o,mipmapLevel:a})}setCubeMapImageData(n){var i=this;return C(function*(){let{width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:u=5121}=n;const{gl:h}=i,f=o||a,g=yield Promise.all(yR.map(m=>{const y=f[m];return Promise.all(Array.isArray(y)?y:[y])}));i.bind(),yR.forEach((m,y)=>{g[y].length>1&&!1!==i.opts.mipmaps&&an.warn("".concat(i.id," has mipmap and multiple LODs."))(),g[y].forEach((b,R)=>{r&&s?h.texImage2D(m,R,l,r,s,c,l,u,b):h.texImage2D(m,R,l,l,u,b)})}),i.unbind()})()}setImageDataForFace(n){const{face:i,width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:u=5121}=n,{gl:h}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(g=>this.setImageDataForFace(Object.assign({},n,{face:i,data:g,pixels:g}))):this.width||this.height?h.texImage2D(i,0,l,r,s,c,l,u,f):h.texImage2D(i,0,l,l,u,f),this}}return t.FACES=yR,t})();class ode extends Of{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return ei(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};No(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:i=6408,width:r,height:s,depth:o=1,border:a=0,format:c,type:l=5121,offset:u=0,data:h,parameters:f={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),gc(this.gl,f,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,n,i,r,s,o,a,c,l,h),h instanceof Ji&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,n,i,r,s,o,a,c,l,u))}),this._trackAllocatedMemory(h&&h.byteLength?h.byteLength:this.width*this.height*this.depth*(H4[this.dataFormat]||4)*(G4[this.type]||1),"Texture"),this.loaded=!0,this}}function cde(t,e){const{gl:n,width:i,height:r,id:s}=t;return new As(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:i,height:r,attachments:{36064:t}}))}function cA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:n=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:u,deleteFramebuffer:h}=F0(t);Jt(u);const{gl:f,handle:g,attachments:m}=u;a=a||u.width,c=c||u.height,36064===s&&null===g&&(s=1028),Jt(m[s]),l=l||m[s].type,o=function ude(t,e,n,i,r){if(t)return t;const s=P0(e=e||5121,{clamped:!1}),o=function rde(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Jt(!1),0}}(n);return new s(i*r*o)}(o,l,r,a,c),l=l||fR(o);const y=f.bindFramebuffer(36160,g);return f.readPixels(n,i,a,c,r,l,o),f.bindFramebuffer(36160,y||null),h&&u.delete(),o}function vR(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=cA(t,{sourceAttachment:e}),{width:r,height:s}=t;for(;s>n;)({data:i,width:r,height:s}=zue({data:i,width:r,height:s}));!function Gue(t){let{data:e,width:n,height:i,bytesPerPixel:r=4,temp:s}=t;const o=n*r;s=s||new Uint8Array(o);for(let a=0;a<i/2;++a){const c=a*o,l=(i-a-1)*o;s.set(e.subarray(c,c+o)),e.copyWithin(c,l,l+o),e.set(s,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),c=a.createImageData(r,s);return c.data.set(i),a.putImageData(c,0,0),o.toDataURL()}function F0(t){return t instanceof As?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:cde(t),deleteFramebuffer:!0}}const J4={WEBGL2:[!1,!0],VERTEX_ARRAY_OBJECT:["OES_vertex_array_object",!0],TIMER_QUERY:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],INSTANCED_RENDERING:["ANGLE_instanced_arrays",!0],MULTIPLE_RENDER_TARGETS:["WEBGL_draw_buffers",!0],ELEMENT_INDEX_UINT32:["OES_element_index_uint",!0],BLEND_EQUATION_MINMAX:["EXT_blend_minmax",!0],FLOAT_BLEND:["EXT_float_blend"],COLOR_ENCODING_SRGB:["EXT_sRGB",!0],TEXTURE_DEPTH:["WEBGL_depth_texture",!0],TEXTURE_FLOAT:["OES_texture_float",!0],TEXTURE_HALF_FLOAT:["OES_texture_half_float",!0],TEXTURE_FILTER_LINEAR_FLOAT:["OES_texture_float_linear"],TEXTURE_FILTER_LINEAR_HALF_FLOAT:["OES_texture_half_float_linear"],TEXTURE_FILTER_ANISOTROPIC:["EXT_texture_filter_anisotropic"],COLOR_ATTACHMENT_RGBA32F:[function dde(t){const e=new io(t,{format:6408,type:5126,dataFormat:6408}),n=new As(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=n.getStatus();return e.delete(),n.delete(),36053===i},"EXT_color_buffer_float"],COLOR_ATTACHMENT_FLOAT:[!1,"EXT_color_buffer_float"],COLOR_ATTACHMENT_HALF_FLOAT:["EXT_color_buffer_half_float"],GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},hde=2;function bR(t,e){return Z4(t,e)}function Z4(t,e){return(e=Array.isArray(e)?e:[e]).every(n=>Q4(t,n))}function Q4(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function pde(t,e){const n=J4[e];let i;Jt(n,e);const r=ei(t)&&n[1]||n[0];if("function"==typeof r)i=r(t);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&!!t.getExtension(s)}else"string"==typeof r?i=!!t.getExtension(r):"boolean"==typeof r?i=r:Jt(!1);return i}(t,e)),t.luma.caps[e]||an.log(hde,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}const eG="Multiple render targets not supported";class As extends Ru{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=n;let s=!0;return i&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new As(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=No(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=No(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:i=1,attachments:r=null,color:s=!0,depth:o=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:u}=e;if(Jt(n>=0&&i>=0,"Width and height need to be integers"),this.width=n,this.height=i,r)for(const h in r){const f=r[h];(Array.isArray(f)?f[0]:f).resize({width:n,height:i})}else r=this._createDefaultAttachments(s,o,a,n,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:u}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:i,drawBuffers:r,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:n,height:i}=e;if(null===this.handle)return Jt(void 0===n&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===n&&(n=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),n!==this.width&&i!==this.height&&an.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:n,height:i});return this.width=n,this.height=i,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};n&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){Jt(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),c=r[a];let l=c;if(l)if(l instanceof lm)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[u,h=0,f=0]=c;l=u,this._attachTexture({attachment:a,texture:u,layer:h,level:f})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const n=this.getStatus();if(36053!==n)throw new Error(function mde(t){return(As.STATUS||{})[t]||"Framebuffer error ".concat(t)}(n));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:n,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||i||r)&&_R(this.gl,{color:n,depth:i,stencil:r}),s.forEach((a,c)=>{!function ide(t){let{framebuffer:e=null,buffer:n=$4,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};No(t),gc(t,{framebuffer:e},()=>{switch(n){case $4:switch(r.constructor){case Int32Array:t.clearBufferiv(n,i,r);break;case Uint32Array:t.clearBufferuiv(n,i,r);break;case Float32Array:default:t.clearBufferfv(n,i,r)}break;case 6145:t.clearBufferfv(6145,0,[r]);break;case 6146:t.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;t.clearBufferfi(34041,0,s,o);break;default:Jt(!1,K4)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return an.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return an.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return an.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return an.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return an.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return an.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:i=0,y:r=0,width:s,height:o}=e;const a=No(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===s&&void 0===o?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,i,r,s,o),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,n,i){let r=this._getAttachmentParameterFallback(n);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=Hd(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const s of i)r[n?Hd(this.gl,s):s]=this.getAttachmentParameter(e,s,n);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=Object.keys(this.attachments),i={};for(const r of n){const s=Number(r);i[e?Hd(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return typeof window<"u"&&window.open(vR(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>an.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const i=vR(this,{targetMaxHeight:100});return an.image({logLevel:e,message:n,image:i},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new io(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&i?(o=o||{},o[33306]=new lm(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new lm(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&Jt(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof lm?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,n,36161,i.handle),this.attachments[n]=i}_attachTexture(e){let{attachment:n=36064,texture:i,layer:r,level:s}=e;const{gl:o}=this;switch(o.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:No(o).framebufferTextureLayer(36160,n,i.target,s,r);break;case 34067:const c=function gde(t){return t<34069?t+34069:t}(r);o.framebufferTexture2D(36160,n,c,i.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,i.handle,s);break;default:Jt(!1,"Illegal texture type")}o.bindTexture(i.target,null),this.attachments[n]=i}_setReadBuffer(e){const n=function Wle(t){return ei(t)?t:null}(this.gl);n?n.readBuffer(e):Jt(36064===e||1029===e,eG),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,i=No(n);if(i)i.drawBuffers(e);else{const r=n.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):Jt(1===e.length&&(36064===e[0]||1029===e[0]),eG)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=function fde(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in J4)void 0===t.luma.caps[e]&&(t.luma.caps[e]=Q4(t,e));return t.luma.caps}(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return n.WEBGL2||n.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}As.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const yde={5126:Ar.bind(null,"uniform1fv",Ha,1,Po),35664:Ar.bind(null,"uniform2fv",Ha,2,Po),35665:Ar.bind(null,"uniform3fv",Ha,3,Po),35666:Ar.bind(null,"uniform4fv",Ha,4,Po),5124:Ar.bind(null,"uniform1iv",Gd,1,Po),35667:Ar.bind(null,"uniform2iv",Gd,2,Po),35668:Ar.bind(null,"uniform3iv",Gd,3,Po),35669:Ar.bind(null,"uniform4iv",Gd,4,Po),35670:Ar.bind(null,"uniform1iv",Gd,1,Po),35671:Ar.bind(null,"uniform2iv",Gd,2,Po),35672:Ar.bind(null,"uniform3iv",Gd,3,Po),35673:Ar.bind(null,"uniform4iv",Gd,4,Po),35674:Ar.bind(null,"uniformMatrix2fv",Ha,4,Ou),35675:Ar.bind(null,"uniformMatrix3fv",Ha,9,Ou),35676:Ar.bind(null,"uniformMatrix4fv",Ha,16,Ou),35678:ro,35680:ro,5125:Ar.bind(null,"uniform1uiv",lA,1,Po),36294:Ar.bind(null,"uniform2uiv",lA,2,Po),36295:Ar.bind(null,"uniform3uiv",lA,3,Po),36296:Ar.bind(null,"uniform4uiv",lA,4,Po),35685:Ar.bind(null,"uniformMatrix2x3fv",Ha,6,Ou),35686:Ar.bind(null,"uniformMatrix2x4fv",Ha,8,Ou),35687:Ar.bind(null,"uniformMatrix3x2fv",Ha,6,Ou),35688:Ar.bind(null,"uniformMatrix3x4fv",Ha,12,Ou),35689:Ar.bind(null,"uniformMatrix4x2fv",Ha,8,Ou),35690:Ar.bind(null,"uniformMatrix4x3fv",Ha,12,Ou),35678:ro,35680:ro,35679:ro,35682:ro,36289:ro,36292:ro,36293:ro,36298:ro,36299:ro,36300:ro,36303:ro,36306:ro,36307:ro,36308:ro,36311:ro},vde={},bde={},wde={},tG=[0];function wR(t,e,n,i){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(tG[0]=t,t=tG);const r=t.length;if(r%e&&an.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=i[r];s||(s=new n(r),i[r]=s);for(let o=0;o<r;o++)s[o]=t[o];return s}function Ha(t,e){return wR(t,e,Float32Array,vde)}function Gd(t,e){return wR(t,e,Int32Array,bde)}function lA(t,e){return wR(t,e,Uint32Array,wde)}function nG(t,e,n){const i=yde[n.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(n.type));return i().bind(null,t,e)}function xde(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const n=t.match(/([^[]*)(\[[0-9]+\])?/);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function Ade(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function Cde(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t):!!(isFinite(t)||!0===t||!1===t||t instanceof Of||t instanceof lm)||t instanceof As&&!!t.texture}function Sde(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const i=t[e];for(let r=0,s=n.length;r<s;++r)i[r]=n[r]}else t[e]=n.slice();else t[e]=n}function ro(){let t=null;return(e,n,i)=>{const r=t!==i;return r&&(e.uniform1i(n,i),t=i),r}}function Ar(t,e,n,i){let r=null,s=null;return(o,a,c)=>{const l=e(c,n),u=l.length;let h=!1;if(null===r)r=new Float32Array(u),s=u,h=!0;else{Jt(s===u,"Uniform length cannot change.");for(let f=0;f<u;++f)if(l[f]!==r[f]){h=!0;break}}return h&&(i(o,t,a,l),r.set(l)),h}}function Po(t,e,n,i){t[e](n,i)}function Ou(t,e,n,i){t[e](n,!1,i)}function uA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function rG(t,e){let n="";for(let i=0;i<e.length;i++)if((t[i+3]||t[i+2]||t[i+1])&&(n+="".concat(e[i],"\n"),t[i+1])){const s=t[i+1],o=s.split(":",3),a=o[0],c=parseInt(o[1],10)||0,l=s.substring(o.join(":").length+1).trim();n+=sG("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return n}function sG(t,e){let n="";for(let i=0;i<e;++i)n+=" ";return"".concat(n).concat(t)}class L0 extends Ru{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Jt(!1),"unknown"}}constructor(e,n){aA(e),Jt("string"==typeof n.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:uA(n.source,null)||n.id||_a("unnamed ".concat(L0.getTypeName(n.shaderType)))}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const i=uA(n,null);i&&(this.id=_a(i)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(L0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return uA(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function iG(t,e,n,i){const r=t.split(/\r?\n/),s={},o={},a=i||uA(e)||"(unnamed)",c="".concat(function Ide(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(n)," shader ").concat(a);for(let u=0;u<r.length;u++){const h=r[u];if(h.length<=1)continue;const f=h.split(":"),g=f[0],m=parseInt(f[2],10);if(isNaN(m))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));"WARNING"!==g?s[m]=h:o[m]=h}const l=function Dde(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=t.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return sG(a,r-a.length)+n+s})}(e);return{shaderName:c,errors:rG(s,l),warnings:rG(o,l)}}(i,this.source,this.shaderType,this.id);throw an.error("GLSL compilation errors in ".concat(r,"\n").concat(s))(),an.warn("GLSL compilation warnings in ".concat(r,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class xR extends L0{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class ER extends L0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){"string"==typeof n&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const Ode=5120,Nde=5121,Pde=5122,Fde=5123,ks=5126,B0=5124,k0=5125,AR={[ks]:[ks,1,"float"],35664:[ks,2,"vec2"],35665:[ks,3,"vec3"],35666:[ks,4,"vec4"],[B0]:[B0,1,"int"],35667:[B0,2,"ivec2"],35668:[B0,3,"ivec3"],35669:[B0,4,"ivec4"],[k0]:[k0,1,"uint"],36294:[k0,2,"uvec2"],36295:[k0,3,"uvec3"],36296:[k0,4,"uvec4"],35670:[ks,1,"bool"],35671:[ks,2,"bvec2"],35672:[ks,3,"bvec3"],35673:[ks,4,"bvec4"],35674:[ks,8,"mat2"],35685:[ks,8,"mat2x3"],35686:[ks,8,"mat2x4"],35675:[ks,12,"mat3"],35687:[ks,12,"mat3x2"],35688:[ks,12,"mat3x4"],35676:[ks,16,"mat4"],35689:[ks,16,"mat4x2"],35690:[ks,16,"mat4x3"]};function dG(t){const e=AR[t];if(!e)return null;const[n,i]=e;return{type:n,components:i}}function hG(t,e){switch(t){case Ode:case Nde:case Pde:case Fde:t=ks}for(const n in AR){const[i,r,s]=AR[n];if(i===t&&r===e)return{glType:n,name:s}}return null}class she{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,i=n.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,r),c=n.getAttribLocation(e.handle,s);c>=0&&this._addAttribute(c,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!ei(n))return;const i=n.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,n,i,r){const{type:s,components:o}=dG(i),a={type:s,size:r*o};this._inferProperties(e,n,a);const c={location:e,name:n,accessor:new ya(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,n,i){/instance/i.test(n)&&(i.divisor=1)}_addVarying(e,n,i,r){const{type:s,components:o}=dG(i),c={location:e,name:n,accessor:new ya({type:s,size:r*o})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const ohe=35981,ahe=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class pG extends Ru{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",ahe),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:n,vs:i,fs:r,varyings:s,bufferMode:o=ohe}=e;return this.hash=n||"",this.vs="string"==typeof i?new xR(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new ER(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Jt(this.vs instanceof xR),Jt(this.fs instanceof ER),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(No(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new she(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:i=4,vertexCount:r,offset:s=0,start:o,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:u=0,isInstanced:h=u>0,vertexArray:f=null,transformFeedback:g,framebuffer:m,parameters:y={},uniforms:b,samplers:R}=e;if((b||R)&&(an.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(b||{})),an.priority>=n){const L=m?m.id:"default",ie="mode=".concat(Hd(this.gl,i)," verts=").concat(r," ")+"instances=".concat(u," indexType=").concat(Hd(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(c," ")+"Framebuffer=".concat(L);an.log(n,ie)()}return Jt(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||h&&0===u||(f.bindForDraw(r,u,()=>{if(void 0!==m&&(y=Object.assign({},y,{framebuffer:m})),g){const L=function uG(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Jt(!1),0}}(i);g.begin(L)}this._bindTextures(),gc(this.gl,y,()=>{c&&h?this.gl2.drawElementsInstanced(i,r,l,s,u):c&&ei(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(i,o,a,r,l,s):c?this.gl.drawElements(i,r,l,s):h?this.gl2.drawArraysInstanced(i,s,r,u):this.gl.drawArrays(i,s,r)}),g&&g.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};an.priority>=2&&function Ede(t,e,n){for(const i in t){const r=t[i];if((!n||n[i])&&!Ade(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const i=e[n],r=this._uniformSetters[n];if(r){let s=i,o=!1;if(s instanceof As&&(s=s.texture),s instanceof Of)if(o=this.uniforms[n]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:c}=r;a.bind(c),s=c,this._textureUniforms[n]=a}else s=r.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(r(s)||o)&&Sde(this.uniforms,n,i)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const i=this._textureUniforms[n];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),i={};for(const r of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new xR({handle:r});break;case 35632:i.fs=new ER({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=_a(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),an.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),an.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||an.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const i=this.gl.getActiveUniform(this.handle,n),{name:r}=xde(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=nG(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=nG(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}class j0{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new j0(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:n="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),u=this._getHash(n),h=this._getHash(i),f=l.map(ie=>this._getHash(ie.name)).sort(),g=o.map(ie=>this._getHash(ie)),m=Object.keys(r).sort(),y=Object.keys(s).sort(),b=[],R=[];for(const ie of m)b.push(this._getHash(ie)),b.push(this._getHash(r[ie]));for(const ie of y)R.push(this._getHash(ie)),R.push(this._getHash(s[ie]));const L="".concat(u,"/").concat(h,"D").concat(b.join("/"),"M").concat(f.join("/"),"I").concat(R.join("/"),"V").concat(g.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[L]){const ie=function Lle(t,e){const{vs:n,fs:i}=e,r=dle(e.modules||[]);return{gl:t,vs:v4(t,Object.assign({},e,{source:n,type:I0,modules:r})),fs:v4(t,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:Ble(r)}}(this.gl,{vs:n,fs:i,modules:l,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[L]=new pG(this.gl,{hash:L,vs:ie.vs,fs:ie.fs,varyings:o,bufferMode:a}),this._getUniforms[L]=ie.getUniforms||(q=>{}),this._useCounts[L]=0}return this._useCounts[L]++,this._programCache[L]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,0===this._useCounts[n]&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],c=a.name;n[r++]=a,i[c]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],c=a.name;i[c]||(n[r++]=a,i[c]=!0)}return n.length=r,n}}const che=[255,255,255],lhe=1;let uhe=0;class gG{constructor(e={}){ge(this,"id",void 0),ge(this,"color",void 0),ge(this,"intensity",void 0),ge(this,"type","ambient");const{color:n=che}=e,{intensity:i=lhe}=e;this.id=e.id||"ambient-".concat(uhe++),this.color=n,this.intensity=i}}const dhe=[255,255,255],hhe=1,fhe=[0,0,-1];let phe=0;class mG{constructor(e={}){ge(this,"id",void 0),ge(this,"color",void 0),ge(this,"intensity",void 0),ge(this,"type","directional"),ge(this,"direction",void 0),ge(this,"shadow",void 0);const{color:n=dhe}=e,{intensity:i=hhe}=e,{direction:r=fhe}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(phe++),this.color=n,this.intensity=i,this.type="directional",this.direction=new Oo(r).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class ghe{constructor(e,n={id:"pass"}){ge(this,"id",void 0),ge(this,"gl",void 0),ge(this,"props",void 0);const{id:i}=n;this.id=i,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class hA extends ghe{constructor(...e){super(...e),ge(this,"_lastRenderIndex",-1)}render(e){return Du(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:i,viewports:r,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function _he(t){Du(t,{viewport:[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}),t.clear(16640)}(l),a&&(this._lastRenderIndex=-1);const u=[];for(const h of r){const f=s&&s[h.id];o(h);const g=this._getDrawLayerParams(h,e),m=h.subViewports||[h];for(const y of m){const b=this._drawLayersInViewport(l,{target:n,moduleParameters:i,viewport:y,view:f,pass:e.pass,layers:e.layers},g);u.push(b)}}return u}_getDrawLayerParams(e,{layers:n,pass:i,layerFilter:r,cullRect:s,effects:o,moduleParameters:a}){const c=[],l=_G(this._lastRenderIndex+1),u={layer:n[0],viewport:e,isPicking:i.startsWith("picking"),renderPass:i,cullRect:s},h={};for(let f=0;f<n.length;f++){const g=n[f],m=this._shouldDrawLayer(g,u,r,h),y={shouldDrawLayer:m};m&&(y.layerRenderIndex=l(g,m),y.moduleParameters=this._getModuleParameters(g,o,i,a),y.layerParameters=this.getLayerParameters(g,f,e)),c[f]=y}return c}_drawLayersInViewport(e,{layers:n,moduleParameters:i,pass:r,target:s,viewport:o,view:a},c){const l=function mhe(t,{moduleParameters:e,target:n,viewport:i}){const r=n&&"default-framebuffer"!==n.id,s=e&&e.devicePixelRatio||om(t);return[i.x*s,(r?n.height:t.drawingBufferHeight)-(i.y+i.height)*s,i.width*s,i.height*s]}(e,{moduleParameters:i,target:s,viewport:o});if(a&&a.props.clear){const h=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;gc(e,{scissorTest:!0,scissor:l},()=>_R(e,h))}const u={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Du(e,{viewport:l});for(let h=0;h<n.length;h++){const f=n[h],{shouldDrawLayer:g,layerRenderIndex:m,moduleParameters:y,layerParameters:b}=c[h];if(g&&f.props.pickable&&u.pickableCount++,f.isComposite)u.compositeCount++;else if(g){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,m),y.viewport=o;try{f._drawLayer({moduleParameters:y,uniforms:{layerIndex:m},parameters:b})}catch(R){f.raiseError(R,"drawing ".concat(f," to ").concat(r))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,i){return e.props.parameters}_shouldDrawLayer(e,n,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(i){const a=n.layer.id;if(a in r||(r[a]=i(n)),!r[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,i,r){var s;const o=Object.assign(Object.create((null===(s=e.internalState)||void 0===s?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:om(this.gl)});if(n)for(const c of n){var a;Object.assign(o,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(o,this.getModuleParameters(e,n),r)}}function _G(t=0,e={}){const n={},i=(r,s)=>{const o=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in n){const u=n[c]=n[c]||_G(e[c],e);l=u(r,s),n[a]=u}else Number.isFinite(o)?(l=o+(e[c]||0),n[a]=null):l=t;return s&&l>=t&&(t=l+1),e[a]=l,l};return i}class yhe extends hA{constructor(e,n){super(e,n),ge(this,"shadowMap",void 0),ge(this,"depthBuffer",void 0),ge(this,"fbo",void 0),this.shadowMap=new io(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new lm(e,{format:33189,width:1,height:1}),this.fbo=new As(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;gc(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=om(this.gl),s=i.width*r,o=i.height*r;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const yG="#define SMOOTH_EDGE_RADIUS 0.5",xhe={name:"geometry",vs:"\n".concat(yG,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(yG,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},Ehe=Object.keys(_i).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(_i[t],";")).join(""),Ahe=Object.keys(xl).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(xl[t],";")).join(""),She=Object.keys(eA).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(eA[t],";")).join(""),Che="".concat(Ehe,"\n").concat(Ahe,"\n").concat(She,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\n\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n');function Mhe(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}return!1}function fA(t){let n,e={};return i=>{for(const r in i)if(!Mhe(i[r],e[r])){n=t(i),e=i;break}return n}}const vG=[0,0,0,0],The=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],bG=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Ihe=[0,0,0],wG=[0,0,0],Dhe=fA(function Nhe({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function Rhe(t,e,n){const{viewMatrixUncentered:i,projectionMatrix:r}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=vG,c=vG,l=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:h,offsetMode:f}=xG(t,e,n);return f&&(c=t.projectPosition(u||h),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=S0([],c,o),s=i||s,o=Mf([],r,s),o=Mf([],o,The)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:h,geospatialOrigin:u}}(t,n,i),u=t.getDistanceScales(),h=[t.width*e,t.height*e],f=S0([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,g={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:o.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:h,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Ihe,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:bG,project_uCameraPosition:a};if(l){const m=t.getDistanceScales(l);switch(n){case _i.METER_OFFSETS:g.project_uCommonUnitsPerWorldUnit=m.unitsPerMeter,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerMeter2;break;case _i.LNGLAT:case _i.LNGLAT_OFFSETS:t._pseudoMeters||(g.project_uCommonUnitsPerMeter=m.unitsPerMeter),g.project_uCommonUnitsPerWorldUnit=m.unitsPerDegree,g.project_uCommonUnitsPerWorldUnit2=m.unitsPerDegree2;break;case _i.CARTESIAN:g.project_uCommonUnitsPerWorldUnit=[1,1,m.unitsPerMeter[2]],g.project_uCommonUnitsPerWorldUnit2=[0,0,m.unitsPerMeter2[2]]}}return g});function xG(t,e,n=wG){n.length<3&&(n=[n[0],n[1],0]);let r,i=n,s=!0;switch(r=e===_i.LNGLAT_OFFSETS||e===_i.METER_OFFSETS?n:t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case xl.WEB_MERCATOR:(e===_i.LNGLAT||e===_i.CARTESIAN)&&(r=[0,0,0],s=!1);break;case xl.WEB_MERCATOR_AUTO_OFFSET:e===_i.LNGLAT?i=r:e===_i.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(i),i[0]-=n[0],i[1]-=n[1],i[2]-=n[2]);break;case xl.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case xl.GLOBE:s=!1,r=null;break;default:s=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}const Phe={},SR={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},xhe],vs:Che,getUniforms:function Fhe(t=Phe){return"viewport"in t?function Ohe({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:i=_i.DEFAULT,coordinateOrigin:r=wG,autoWrapLongitude:s=!1}){i===_i.DEFAULT&&(i=t.isGeospatial?_i.LNGLAT:_i.CARTESIAN);const o=Dhe({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||bG,o}(t):{}}},khe=fA(function Ghe({viewport:t,center:e}){return new kn(t.viewProjectionMatrix).invert().transform(e)}),jhe=fA(function zhe({viewport:t,shadowMatrices:e}){const n=[],i=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,s=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>function Hhe(t,e){const[n,i,r]=t,s=C0([n,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}(o,i));for(const o of e){const a=o.clone().translate(new Oo(t.center).negate()),c=s.map(u=>a.transform(u)),l=(new kn).ortho({left:Math.min(...c.map(u=>u[0])),right:Math.max(...c.map(u=>u[0])),bottom:Math.min(...c.map(u=>u[1])),top:Math.max(...c.map(u=>u[1])),near:Math.min(...c.map(u=>-u[2])),far:Math.max(...c.map(u=>-u[2]))});n.push(l.multiplyRight(o))}return n}),Uhe=[0,0,0,1],Vhe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],CR={name:"shadow",dependencies:[SR],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?function Whe(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,shadow_uColor:t.shadowColor||Uhe,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},r=khe({viewport:t.viewport,center:e.project_uCenter}),s=[],o=jhe({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const c=o[a],l=c.clone().translate(new Oo(t.viewport.center).negate());e.project_uCoordinateSystem===_i.LNGLAT&&e.project_uProjectionMode===xl.WEB_MERCATOR?(o[a]=l,s[a]=r):(o[a]=c.clone().multiplyRight(Vhe),s[a]=l.transform(r))}for(let a=0;a<o.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],i["shadow_uProjectCenters[".concat(a,"]")]=s[a],i["shadow_uShadowMap".concat(a)]=t.shadowMaps&&t.shadowMaps.length>0?t.shadowMaps[a]:t.dummyShadowMap;return i}(t,e):{}},$he={color:[255,255,255],intensity:1},EG=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],qhe=[0,0,0,200/255];class MR{constructor(e={}){ge(this,"id","lighting-effect"),ge(this,"props",null),ge(this,"shadowColor",qhe),ge(this,"shadow",void 0),ge(this,"ambientLight",null),ge(this,"directionalLights",[]),ge(this,"pointLights",[]),ge(this,"shadowPasses",[]),ge(this,"shadowMaps",[]),ge(this,"dummyShadowMap",null),ge(this,"programManager",void 0),ge(this,"shadowMatrices",void 0);for(const n in e){const i=e[n];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow)}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=j0.getDefaultProgramManager(e),CR&&this.programManager.addDefaultModule(CR)),this.dummyShadowMap||(this.dummyShadowMap=new io(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(CR),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const i=(new kn).lookAt({eye:new Oo(n.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const i=new yhe(e);this.shadowPasses[n]=i,this.shadowMaps[n]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:i}=this;!e&&0===n.length&&0===i.length&&(this.ambientLight=new gG($he),this.directionalLights.push(new mG(EG[0]),new mG(EG[1])))}}let Xhe=1,Yhe=1;class AG{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,o=Xhe++,a={time:0,delay:n,duration:i,rate:r,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,i]of this.animations)i.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return void 0!==n&&this.time>=n.delay+n.duration*n.repeat}getTime(e){if(void 0===e)return this.time;const n=this.channels.get(e);return void 0===n?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const r of n)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:o}=r;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const i=Yhe++;return this.animations.set(i,{animation:e,channel:n}),e.setTime(this.getTime(n)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const i=n-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}const pA=Symbol.for("component"),fm=Symbol.for("asyncPropDefaults"),Pf=Symbol.for("asyncPropOriginal"),zd=Symbol.for("asyncPropResolved");let TR={};function Fo(t,e,n,i){oi.level>0&&TR[t]&&TR[t].call(null,e,n,i)}function IR(t,e=(()=>!0)){return Array.isArray(t)?SG(t,e,[]):e(t)?[t]:[]}function SG(t,e,n){let i=-1;for(;++i<t.length;){const r=t[i];Array.isArray(r)?SG(r,e,n):e(r)&&n.push(r)}return n}function Jhe({target:t,source:e,start:n=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=n;o<r;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}const Vc=t=>"function"==typeof t,Wd=t=>null!==t&&"object"==typeof t,MG=t=>Wd(t)&&t.constructor==={}.constructor,Zhe=t=>t&&"function"==typeof t[Symbol.iterator],Qhe=t=>t&&"function"==typeof t[Symbol.asyncIterator],pm=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,gm=t=>typeof Blob<"u"&&t instanceof Blob,efe=t=>t&&"object"==typeof t&&t.isBuffer,TG=t=>(t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Wd(t)&&Vc(t.tee)&&Vc(t.cancel)&&Vc(t.getReader))(t)||(t=>Wd(t)&&Vc(t.read)&&Vc(t.pipe)&&(t=>"boolean"==typeof t)(t.readable))(t);function IG(t,e){if(!t)throw new Error(e||"loader assertion failed.")}function DR(t){var e;return!!t&&(Array.isArray(t)&&(t=t[0]),Array.isArray(null===(e=t)||void 0===e?void 0:e.extensions))}function RR(t){var e,n;let i;return IG(t,"null loader"),IG(DR(t),"invalid loader"),Array.isArray(t)&&(i=t[1],t=t[0],t={...t,options:{...t.options,...i}}),(null!==(e=t)&&void 0!==e&&e.parseTextSync||null!==(n=t)&&void 0!==n&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}let OR="";const NR={},ofe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,afe=/^([-\w.]+\/[-\w.+]+)/;function cfe(t){const e=afe.exec(t);return e?e[1]:t}function DG(t){const e=ofe.exec(t);return e?e[1]:""}const lfe=/\?.*/;function gA(t){if(pm(t)){const e=PR(t.url||"");return{url:e,type:cfe(t.headers.get("content-type")||"")||DG(e)}}return gm(t)?{url:PR(t.name||""),type:t.type||""}:"string"==typeof t?{url:PR(t),type:DG(t)}:{url:"",type:""}}function PR(t){return t.replace(lfe,"")}function RG(t){return FR.apply(this,arguments)}function FR(){return FR=C(function*(t){if(pm(t))return t;const e={},n=function ufe(t){return pm(t)?t.headers["content-length"]||-1:gm(t)?t.size:"string"==typeof t?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}(t);n>=0&&(e["content-length"]=String(n));const{url:i,type:r}=gA(t);r&&(e["content-type"]=r);const s=yield function ffe(t){return kR.apply(this,arguments)}(t);s&&(e["x-first-bytes"]=s),"string"==typeof t&&(t=(new TextEncoder).encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:i}),o}),FR.apply(this,arguments)}function LR(){return LR=C(function*(t){if(!t.ok){const e=yield function hfe(t){return BR.apply(this,arguments)}(t);throw new Error(e)}}),LR.apply(this,arguments)}function BR(){return BR=C(function*(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let i=t.statusText;n.includes("application/json")&&(i+=" ".concat(yield t.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),BR.apply(this,arguments)}function kR(){return kR=C(function*(t){if("string"==typeof t)return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=s=>{var o;return i(null==s||null===(o=s.target)||void 0===o?void 0:o.result)},r.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const i=function pfe(t){let e="";const n=new Uint8Array(t);for(let i=0;i<n.byteLength;i++)e+=String.fromCharCode(n[i]);return btoa(e)}(t.slice(0,5));return"data:base64,".concat(i)}return null}),kR.apply(this,arguments)}function OG(t,e){return jR.apply(this,arguments)}function jR(){return jR=C(function*(t,e){if("string"==typeof t){t=function sfe(t){for(const e in NR)t.startsWith(e)&&(t=t.replace(e,NR[e]));return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(OR).concat(t)),t}(t);let n=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(n=e.fetch),yield fetch(t,n)}return yield RG(t)}),jR.apply(this,arguments)}const NG=new w0({id:"loaders.gl"});class gfe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const PG=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),FG=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),LG=(FG&&parseFloat(FG[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class mfe{constructor(){ge(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:PG,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),_fe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function UR(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const VR=()=>{const t=UR();return t.globalOptions=t.globalOptions||{...LG},t.globalOptions};function yfe(t,e,n,i){return n=n||[],function vfe(t,e){kG(t,null,LG,_fe,e);for(const n of e)kG(t&&t[n.id]||{},n.id,n.options&&n.options[n.id]||{},n.deprecatedOptions&&n.deprecatedOptions[n.id]||{},e)}(t,n=Array.isArray(n)?n:[n]),function jG(t,e,n){const r={...t.options||{}};return function wfe(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}(r,n),null===r.log&&(r.log=new gfe),UG(r,VR()),UG(r,e),r}(e,t,i)}function BG(t,e){const n=VR(),i=t||n;return"function"==typeof i.fetch?i.fetch:Wd(i.fetch)?r=>OG(r,i):null!=e&&e.fetch?e?.fetch:OG}function kG(t,e,n,i,r){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const c=!e&&Wd(t[a]);if(!(a in n)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)NG.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const h=bfe(a,r);NG.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(h))()}}}function bfe(t,e){const n=t.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(t===s)return"Did you mean '".concat(r.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(i=i||"Did you mean '".concat(r.id,".").concat(s,"'?"))}return i}function UG(t,e){for(const n in e)n in e&&(t[n]=MG(e[n])&&MG(t[n])?{...t[n],...e[n]}:e[n])}function Sl(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const xfe="3.2.13",Cl={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},Afe=Cl.global||Cl.self||Cl.window||{},$d="object"!=typeof process||"[object process]"!==String(process)||process.browser,HR="function"==typeof importScripts,Sfe=typeof window<"u"&&typeof window.orientation<"u",VG=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);VG&&parseFloat(VG[1]);class GR{}const zR=new Map;function HG(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function GG(t,e=!0,n){const i=n||new Set;if(t)if(zG(t))i.add(t);else if(zG(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)&&e&&"object"==typeof t)for(const r in t)GG(t[r],e,i);return void 0===n?Array.from(i):[]}function zG(t){return!!t&&(t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)}const WR=()=>{};class $R{static isSupported(){return typeof Worker<"u"&&$d||typeof GR<"u"&&!$d}constructor(e){ge(this,"name",void 0),ge(this,"source",void 0),ge(this,"url",void 0),ge(this,"terminated",!1),ge(this,"worker",void 0),ge(this,"onMessage",void 0),ge(this,"onError",void 0),ge(this,"_loadableURL","");const{name:n,source:i,url:r}=e;Sl(i||r),this.name=n,this.source=i,this.url=r,this.onMessage=WR,this.onError=s=>console.log(s),this.worker=$d?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=WR,this.onError=WR,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||GG(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=function Cfe(t){Sl(t.source&&!t.url||!t.source&&t.url);let e=zR.get(t.source||t.url);return e||(t.url&&(e=function Mfe(t){if(!t.startsWith("http"))return t;const e=function Tfe(t){return"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(t);return HG(e)}(t.url),zR.set(t.url,e)),t.source&&(e=HG(t.source),zR.set(t.source,e))),Sl(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new GR(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new GR(this.source,{eval:!0})}return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class Dfe{constructor(e,n){ge(this,"name",void 0),ge(this,"workerThread",void 0),ge(this,"isRunning",!0),ge(this,"result",void 0),ge(this,"_resolve",()=>{}),ge(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Sl(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Sl(this.isRunning),this.isRunning=!1,this._reject(e)}}class Rfe{static isSupported(){return $R.isSupported()}constructor(e){ge(this,"name","unnamed"),ge(this,"source",void 0),ge(this,"url",void 0),ge(this,"maxConcurrency",1),ge(this,"maxMobileConcurrency",1),ge(this,"onDebug",()=>{}),ge(this,"reuseWorkers",!0),ge(this,"props",{}),ge(this,"jobQueue",[]),ge(this,"idleQueue",[]),ge(this,"count",0),ge(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,n=((r,s,o)=>r.done(o)),i=((r,s)=>r.error(s))){var r=this;return C(function*(){const s=new Promise(o=>(r.jobQueue.push({name:e,onMessage:n,onError:i,onStart:o}),r));return r._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return C(function*(){if(!e.jobQueue.length)return;const n=e._getAvailableWorker();if(!n)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:n,backlog:e.jobQueue.length});const r=new Dfe(i.name,n);n.onMessage=s=>i.onMessage(r,s.type,s.payload),n.onError=s=>i.onError(r,s),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(n)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new $R({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Sfe?this.maxMobileConcurrency:this.maxConcurrency}}const Ofe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Nu{static isSupported(){return $R.isSupported()}static getWorkerFarm(e={}){return Nu._workerFarm=Nu._workerFarm||new Nu({}),Nu._workerFarm.setProps(e),Nu._workerFarm}constructor(e){ge(this,"props",void 0),ge(this,"workerPools",new Map),this.props={...Ofe},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:i,url:r}=e;let s=this.workerPools.get(n);return s||(s=new Rfe({name:n,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}ge(Nu,"_workerFarm",void 0);const Nfe="latest";function qR(){return qR=C(function*(t,e,n,i,r){const s=t.id,o=function Pfe(t,e={}){const n=e[t.id]||{},i="".concat(t.id,"-worker.js");let r=n.workerUrl;if(!r&&"compression"===t.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(t.module,"/dist/").concat(i)),!r){let s=t.version;"latest"===s&&(s=Nfe);const o=s?"@".concat(s):"";r="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(i)}return Sl(r),r}(t,n),c=Nu.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",Bfe.bind(null,r));return l.postMessage("process",{input:e,options:n,context:i}),yield(yield l.result).result}),qR.apply(this,arguments)}function Bfe(t,e,n,i){return XR.apply(this,arguments)}function XR(){return XR=C(function*(t,e,n,i){switch(n){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:s,options:o}=i;try{const a=yield t(s,o);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}),XR.apply(this,arguments)}function YR(t){var e,n,i,r=2;for(typeof Symbol<"u"&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(e=t[n]))return e.call(t);if(i&&null!=(e=t[i]))return new mA(e.call(t));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function mA(t){function e(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var i=n.done;return Promise.resolve(n.value).then(function(r){return{value:r,done:i}})}return(mA=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new mA(t)}function $G(t){return t&&"object"==typeof t&&t.isBuffer}function qG(t){if($G(t))return function kfe(t){return $G(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return 0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if("string"==typeof t){const e=t;return(new TextEncoder).encode(e).buffer}if(t&&"object"==typeof t&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function JR(){return JR=C(function*(t){const e=[];var r,n=!1,i=!1;try{for(var o,s=YR(t);n=!(o=yield s.next()).done;n=!1)e.push(o.value)}catch(a){i=!0,r=a}finally{try{n&&null!=s.return&&(yield s.return())}finally{if(i)throw r}}return function Ufe(...t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,o)=>s+o.byteLength,0),i=new Uint8Array(n);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}(...e)}),JR.apply(this,arguments)}M(1492);const Hfe=262144,zfe=262144;function XG(t,e){this.v=t,this.k=e}function _A(t){return new XG(t,0)}function U0(t){var e,n;function i(s,o){try{var a=t[s](o),c=a.value,l=c instanceof XG;Promise.resolve(l?c.v:c).then(function(u){if(l){var h="return"===s?"return":"next";if(!c.k||u.done)return i(h,u);u=t[h](u).value}r(a.done?"return":"normal",u)},function(u){i("throw",u)})}catch(u){r("throw",u)}}function r(s,o){switch(s){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?i(e.key,e.arg):n=null}this._invoke=function(s,o){return new Promise(function(a,c){var l={key:s,arg:o,resolve:a,reject:c,next:null};n?n=n.next=l:(e=n=l,i(s,o))})},"function"!=typeof t.return&&(this.return=void 0)}function QR(t){return function(){return new U0(t.apply(this,arguments))}}U0.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},U0.prototype.next=function(t){return this._invoke("next",t)},U0.prototype.throw=function(t){return this._invoke("throw",t)},U0.prototype.return=function(t){return this._invoke("return",t)};const $fe=1048576;function eO(){return eO=QR(function*(t,e){const n=e?.chunkSize||$fe;let i=0;for(;i<t.size;){const r=i+n,s=yield _A(t.slice(i,r).arrayBuffer());i=r,yield s}}),eO.apply(this,arguments)}function YG(t,e){return PG?function Xfe(t,e){return tO.apply(this,arguments)}(t,e):function Yfe(t,e){return nO.apply(this,arguments)}(t,e)}function tO(){return tO=QR(function*(t,e){const n=t.getReader();let i;try{for(;;){const r=i||n.read();null!=e&&e._streamReadAhead&&(i=n.read());const{done:s,value:o}=yield _A(r);if(s)return;yield qG(o)}}catch{n.releaseLock()}}),tO.apply(this,arguments)}function nO(){return nO=QR(function*(t,e){var r,n=!1,i=!1;try{for(var o,s=YR(t);n=!(o=yield _A(s.next())).done;n=!1){const a=o.value;yield qG(a)}}catch(a){i=!0,r=a}finally{try{n&&null!=s.return&&(yield _A(s.return()))}finally{if(i)throw r}}}),nO.apply(this,arguments)}const iO="Cannot convert supplied data type";function rO(){return rO=C(function*(t,e,n){const i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if("string"==typeof t||i)return function Jfe(t,e,n){if(e.text&&"string"==typeof t)return t;if(efe(t)&&(t=t.buffer),t instanceof ArrayBuffer){const i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer;const r=t.byteLength||t.length;return(0!==t.byteOffset||r!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+r)),i}throw new Error(iO)}(t,e);if(gm(t)&&(t=yield RG(t)),pm(t)){const r=t;return yield function dfe(t){return LR.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(TG(t)&&(t=function Kfe(t,e){if("string"==typeof t)return function*Gfe(t,e){const n=e?.chunkSize||Hfe;let i=0;const r=new TextEncoder;for(;i<t.length;){const s=Math.min(t.length-i,n),o=t.slice(i,i+s);i+=s,yield r.encode(o)}}(t,e);if(t instanceof ArrayBuffer)return function*Wfe(t,e={}){const{chunkSize:n=zfe}=e;let i=0;for(;i<t.byteLength;){const r=Math.min(t.byteLength-i,n),s=new ArrayBuffer(r),o=new Uint8Array(t,i,r);new Uint8Array(s).set(o),i+=r,yield s}}(t,e);if(gm(t))return function qfe(t,e){return eO.apply(this,arguments)}(t,e);if(TG(t))return YG(t,e);if(pm(t))return YG(t.body,e);throw new Error("makeIterator")}(t,n)),Zhe(t)||Qhe(t))return function Vfe(t){return JR.apply(this,arguments)}(t);throw new Error(iO)}),rO.apply(this,arguments)}const ipe=new w0({id:"loaders.gl"}),KG=()=>{const t=UR();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function JG(t){const e=KG();t=Array.isArray(t)?t:[t];for(const n of t){const i=RR(n);e.find(r=>i===r)||e.unshift(i)}}const spe=/\.([^.]+)$/;function aO(){return aO=C(function*(t,e=[],n,i){if(!QG(t))return null;let r=ZG(t,e,{...n,nothrow:!0},i);if(r)return r;if(gm(t)&&(r=ZG(t=yield t.slice(0,10).arrayBuffer(),e,n,i)),!(r||null!=n&&n.nothrow))throw new Error(ez(t));return r}),aO.apply(this,arguments)}function ZG(t,e=[],n,i){if(!QG(t))return null;if(e&&!Array.isArray(e))return RR(e);let r=[];e&&(r=r.concat(e)),null!=n&&n.ignoreRegisteredLoaders||r.push(...function rpe(){return KG()}()),function cpe(t){for(const e of t)RR(e)}(r);const s=function ape(t,e,n,i){const{url:r,type:s}=gA(t),o=r||i?.url;let a=null,c="";var l;return null!=n&&n.mimeType&&(a=cO(e,n?.mimeType),c="match forced by supplied MIME type ".concat(n?.mimeType)),a=a||function lpe(t,e){const n=e&&spe.exec(e),i=n&&n[1];return i?function upe(t,e){e=e.toLowerCase();for(const n of t)for(const i of n.extensions)if(i.toLowerCase()===e)return n;return null}(t,i):null}(e,o),c=c||(a?"matched url ".concat(o):""),a=a||cO(e,s),c=c||(a?"matched MIME type ".concat(s):""),a=a||function dpe(t,e){if(!e)return null;for(const n of t)if("string"==typeof e){if(hpe(e,n))return n}else if(ArrayBuffer.isView(e)){if(tz(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&tz(e,0,n))return n;return null}(e,t),c=c||(a?"matched initial data ".concat(nz(t)):""),a=a||cO(e,n?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(s):""),c&&ipe.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(t,r,n,i);if(!(s||null!=n&&n.nothrow))throw new Error(ez(t));return s}function QG(t){return!(t instanceof Response&&204===t.status)}function ez(t){const{url:e,type:n}=gA(t);let i="No valid loader found (";i+=e?"".concat(function npe(t){const e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}(e),", "):"no url provided, ",i+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const r=t?nz(t):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function cO(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function hpe(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>t.startsWith(i))}function tz(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(r=>function fpe(t,e,n,i){if(i instanceof ArrayBuffer)return function jfe(t,e,n){if(t.byteLength<(n=n||t.byteLength)||e.byteLength<n)return!1;const i=new Uint8Array(t),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(i,t,i.byteLength);switch(typeof i){case"function":return i(t,n);case"string":return i===lO(t,e,i.length);default:return!1}}(t,e,n,r))}function nz(t,e=5){return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?lO(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?lO(t,0,e):""}function lO(t,e,n){if(t.byteLength<e+n)return"";const i=new DataView(t);let r="";for(let s=0;s<n;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function yA(t,e,n,i){return uO.apply(this,arguments)}function uO(){return uO=C(function*(t,e,n,i){Sl(!i||"object"==typeof i),e&&!Array.isArray(e)&&!DR(e)&&(i=void 0,n=e,e=void 0),t=yield t,n=n||{};const{url:r}=gA(t),o=function tpe(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...i]:i}return n&&n.length?n:null}(e,i),a=yield function ope(t){return aO.apply(this,arguments)}(t,o,n);return a?(i=function epe(t,e,n=null){if(n)return n;const i={fetch:BG(e,t),...t};return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:yA,loaders:o},n=yfe(n,a,o,r),i),yield function ppe(t,e,n,i){return dO.apply(this,arguments)}(a,t,n,i)):null}),uO.apply(this,arguments)}function dO(){return dO=C(function*(t,e,n,i){if(function Efe(t,e=xfe){Sl(t,"no worker provided")}(t),pm(e)){const r=e,{ok:s,redirected:o,status:a,statusText:c,type:l,url:u}=r,h=Object.fromEntries(r.headers.entries());i.response={headers:h,ok:s,redirected:o,status:a,statusText:c,type:l,url:u}}if(e=yield function Zfe(t,e,n){return rO.apply(this,arguments)}(e,t,n),t.parseTextSync&&"string"==typeof e)return n.dataType="text",t.parseTextSync(e,n,i,t);if(function Ffe(t,e){return!(!Nu.isSupported()||!($d||null!=e&&e._nodeWorkers))&&t.worker&&e?.worker}(t,n))return yield function Lfe(t,e,n,i,r){return qR.apply(this,arguments)}(t,e,n,i,yA);if(t.parseText&&"string"==typeof e)return yield t.parseText(e,n,i,t);if(t.parse)return yield t.parse(e,n,i,t);throw Sl(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}),dO.apply(this,arguments)}function V0(t,e,n,i){return hO.apply(this,arguments)}function hO(){return hO=C(function*(t,e,n,i){!Array.isArray(e)&&!DR(e)&&(n=e,e=void 0);const r=BG(n);let s=t;return"string"==typeof t&&(s=yield r(t)),gm(t)&&(s=yield r(t)),yield yA(s,e,n)}),hO.apply(this,arguments)}class gpe{constructor(e,n,i){ge(this,"id",void 0),ge(this,"context",void 0),ge(this,"isLoaded",void 0),ge(this,"persistent",void 0),ge(this,"_loadCount",0),ge(this,"_subscribers",new Set),ge(this,"_data",void 0),ge(this,"_loader",void 0),ge(this,"_error",void 0),ge(this,"_content",void 0),this.id=e,this.context=i,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=V0(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class mpe{constructor({gl:e,protocol:n}){ge(this,"protocol",void 0),ge(this,"_context",void 0),ge(this,"_resources",void 0),ge(this,"_consumers",void 0),ge(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:n,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(n,i):(s=new gpe(e,n,this._context),this._resources[e]=s),s.persistent=r}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const i in n){const r=n[i],s=this._resources[r.resourceId];s&&s.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(s[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(i,r,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,i,r){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(o[n]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const _pe=[SR],ype=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function vpe(t){const e=j0.getDefaultProgramManager(t);for(const n of _pe)e.addDefaultModule(n);for(const n of ype)e.addShaderHook(n);return e}class xpe{constructor(e,{deck:n,stats:i,viewport:r,timeline:s}={}){ge(this,"layers",void 0),ge(this,"context",void 0),ge(this,"resourceManager",void 0),ge(this,"_lastRenderedLayers",[]),ge(this,"_needsRedraw",!1),ge(this,"_needsUpdate",!1),ge(this,"_nextLayers",null),ge(this,"_debug",!1),ge(this,"activateViewport",o=>{Fo("layerManager.activateViewport",this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new mpe({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&vpe(e),stats:i||new uR({id:"deck.gl"}),viewport:r||new Bd({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new AG,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);n=n||r}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(i=>0===n.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Fo("layerManager.setLayers",this,n,e),this._lastRenderedLayers=e;const i=IR(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,i){i.raiseError(n,"".concat(e," of ").concat(i))}_updateLayers(e,n){const i={};for(const o of e)i[o.id]?oi.warn("Multiple old layers with same id ".concat(o.id))():i[o.id]=o;const r=[];this._updateSublayersRecursively(n,i,r),this._finalizeOldLayers(i);let s=!1;for(const o of r)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,n,i){for(const r of e){r.context=this.context;const s=n[r.id];null===s&&oi.warn("Multiple new layers with same id ".concat(r.id))(),n[r.id]=null;let o=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),o=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}o&&this._updateSublayersRecursively(o,n,i)}}_finalizeOldLayers(e){for(const n in e){const i=e[n];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle="Matched. State transferred from previous layer",n!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(n){this._handleError("finalization",n,e)}}}class Epe{constructor(e){ge(this,"width",void 0),ge(this,"height",void 0),ge(this,"views",void 0),ge(this,"viewState",void 0),ge(this,"controllers",void 0),ge(this,"timeline",void 0),ge(this,"_viewports",void 0),ge(this,"_viewportMap",void 0),ge(this,"_isUpdating",void 0),ge(this,"_needsRedraw",void 0),ge(this,"_needsUpdate",void 0),ge(this,"_eventManager",void 0),ge(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n="string"==typeof e?this.getView(e):e,i=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,n){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const o=i[s];if(o.containsPixel(r)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=IR(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!im(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):oi.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){return new(0,n.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return null===(o=this.getView(e.id))||void 0===o?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,i,r){const s=e.controller;if(s){const o={...n,...s,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return r||(r=this._createController(e,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const s=e[r],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let c=n[s.id];const l=!!s.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[s.id]=this._updateController(s,o,a,c),this._viewports.unshift(a)}for(const r in n){const s=n[r];s&&!this.controllers[r]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length||e.some((i,r)=>!e[r].equals(n[r]))}}const Cpe=Math.PI/180;function iz(t){return 512/4003e4/Math.cos(t*Cpe)}class qd extends Bd{constructor(e={}){const{latitude:n=0,longitude:i=0,zoom:r=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:u,repeat:h=!1,worldOffset:f=0,legacyMeterSizes:g=!1}=e;let{width:m,height:y,altitude:b=1.5}=e;const R=Math.pow(2,r);m=m||1,y=y||1;let L,ie=null;u?(b=u[5]/2,L=QE(b)):(e.fovy?(L=e.fovy,b=HD(L)):L=QE(b),ie=function XH(t){const{width:e,height:n,altitude:i,pitch:r=0,offset:s,center:o,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=t;let{fovy:u=QE(Oce)}=t;void 0!==i&&(u=QE(i));const h=u*pc,f=r*pc,g=HD(u);let m=g;o&&(m+=o[2]*a/Math.cos(f)/n);const y=h*(.5+(s?s[1]:0)/n),b=Math.sin(y)*m/Math.sin(kD(Math.PI/2-f-y,.01,Math.PI-.01)),R=Math.sin(f)*b+m;return{fov:h,aspect:e/n,focalDistance:g,near:c,far:Math.min(R*l,10*m)}}({width:m,height:y,pitch:s,fovy:L,nearZMultiplier:a,farZMultiplier:c}));let q=function Fce(t){const{height:e,pitch:n,bearing:i,altitude:r,scale:s,center:o}=t,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];$E(a,a,[0,0,-r]),kH(a,a,-n*pc),jH(a,a,i*pc);const c=s/e;return FD(a,a,[c,c,c]),o&&$E(a,a,function Dae(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}([],o)),a}({height:y,pitch:s,bearing:o,scale:R,altitude:b});f&&(q=(new kn).translate([512*f,0,0]).multiplyLeft(q)),super({...e,width:m,height:y,viewMatrix:q,longitude:i,latitude:n,zoom:r,...ie,fovy:L,focalDistance:b}),ge(this,"longitude",void 0),ge(this,"latitude",void 0),ge(this,"pitch",void 0),ge(this,"bearing",void 0),ge(this,"altitude",void 0),ge(this,"fovy",void 0),ge(this,"orthographic",void 0),ge(this,"_subViewports",void 0),ge(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=i,this.zoom=r,this.pitch=s,this.bearing=o,this.altitude=b,this.fovy=L,this.orthographic=l,this._subViewports=h?[]:null,this._pseudoMeters=g,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=n;r<=i;r++){const s=r?new qd({...this,worldOffset:r}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,i]=this.projectFlat(e);return[n,i,(e[2]||0)*iz(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,i]=this.unprojectFlat(e);return[n,i,(e[2]||0)/iz(i)]}addMetersToLngLat(e,n){return qH(e,n)}panByPosition(e,n){const i=C0(n,this.pixelUnprojectionMatrix),s=qE([],this.projectFlat(e),UH([],i)),o=qE([],this.center,s),[a,c]=this.unprojectFlat(o);return{longitude:a,latitude:c}}getBounds(e={}){const n=function Bce(t,e=0){const{width:n,height:i,unproject:r}=t,s={targetZ:e},o=r([0,i],s),a=r([n,i],s);let c,l;return(t.fovy?.5*t.fovy*JH:Math.atan(.5/t.altitude))>(90-t.pitch)*JH-.01?(c=ZH(t,0,e),l=ZH(t,n,e)):(c=r([0,0],s),l=r([n,0],s)),[o,a,l,c]}(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:i,height:r}=this,{longitude:s,latitude:o,zoom:a}=KH({width:i,height:r,bounds:e,...n});return new qd({width:i,height:r,longitude:s,latitude:o,zoom:a})}}ge(qd,"displayName","WebMercatorViewport");class Tpe extends o4{constructor(e){const{width:n,height:i,latitude:r,longitude:s,zoom:o,bearing:a=0,pitch:c=0,altitude:l=1.5,position:u=[0,0,0],maxZoom:h=20,minZoom:f=0,maxPitch:g=60,minPitch:m=0,startPanLngLat:y,startZoomLngLat:b,startRotatePos:R,startBearing:L,startPitch:ie,startZoom:q,normalize:Ee=!0}=e;no(Number.isFinite(s)),no(Number.isFinite(r)),no(Number.isFinite(o)),super({width:n,height:i,latitude:r,longitude:s,zoom:o,bearing:a,pitch:c,altitude:l,maxZoom:h,minZoom:f,maxPitch:g,minPitch:m,normalize:Ee,position:u},{startPanLngLat:y,startZoomLngLat:b,startRotatePos:R,startBearing:L,startPitch:ie,startZoom:q}),ge(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const i=this.getState().startPanLngLat||this._unproject(n);if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:o}=this.getState();if(!r||void 0===s||void 0===o)return this;let a;return a=e?this._getNewRotation(e,r,o,s):{bearing:s+n,pitch:o+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:i}){let{startZoom:r,startZoomLngLat:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=jr(c,a,o);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:s}=i;return Math.abs(r-n.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-n.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}applyConstraints(e){const{maxZoom:n,minZoom:i,zoom:r}=e;e.zoom=jr(r,i,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=jr(a,o,s);const{normalize:c=!0}=e;return c&&Object.assign(e,function kce(t){const{width:e,height:n,pitch:i=0}=t;let{longitude:r,latitude:s,zoom:o,bearing:a=0}=t;(r<-180||r>180)&&(r=WH(r+180,360)-180),(a<-180||a>180)&&(a=WH(a+180,360)-180);const c=jD(n/512);if(o<=c)o=c,s=0;else{const l=n/2/Math.pow(2,o),u=nm([0,l])[1];if(s<u)s=u;else{const h=nm([0,512-l])[1];s>h&&(s=h)}}return{width:e,height:n,longitude:r,latitude:s,zoom:o,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.zoom({pos:[n/2,i/2],scale:e})}_panFromCenter(e){const{width:n,height:i}=this.getViewportProps();return this.pan({startPos:[n/2,i/2],pos:[n/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,i,r){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],c=n[1],{width:l,height:u}=this.getViewportProps(),h=s/l;let f=0;o>0?Math.abs(u-c)>5&&(f=o/(c-u)*1.2):o<0&&c>5&&(f=1-a/c),f=jr(f,-1,1);const{minPitch:g,maxPitch:m}=this.getViewportProps();let b=i;return f>0?b=i+f*(m-i):f<0&&(b=i-f*(g-i)),{pitch:b,bearing:r+180*h}}}class Ipe extends $D{constructor(...e){super(...e),ge(this,"ControllerState",Tpe),ge(this,"transition",{transitionDuration:300,transitionInterpolator:new tA({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),ge(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class sz extends zD{get ViewportType(){return qd}get ControllerType(){return Ipe}}ge(sz,"displayName","MapView");class Dpe extends hA{constructor(e,n){super(e,n),ge(this,"maskMap",void 0),ge(this,"fbo",void 0);const{mapSize:i=2048}=n;this.maskMap=new io(e,{width:i,height:i,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new As(e,{id:"maskmap",width:i,height:i,attachments:{36064:this.maskMap}})}render(e){const n=this.gl,i=[!1,!1,!1,!1];return i[e.channel]=!0,gc(n,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return"mask"===e.props.operation}delete(){this.fbo.delete(),this.maskMap.delete()}}class Ppe{constructor(){ge(this,"id","mask-effect"),ge(this,"props",null),ge(this,"useInPicking",!0),ge(this,"dummyMaskMap",void 0),ge(this,"channels",[]),ge(this,"masks",null),ge(this,"maskPass",void 0),ge(this,"maskMap",void 0),ge(this,"lastViewport",void 0)}preRender(e,{layers:n,layerFilter:i,viewports:r,onViewportActive:s,views:o}){this.dummyMaskMap||(this.dummyMaskMap=new io(e,{width:1,height:1}));const a=n.filter(h=>h.props.visible&&"mask"===h.props.operation);if(0===a.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new Dpe(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const c=this._sortMaskChannels(a),l=r[0],u=!this.lastViewport||!this.lastViewport.equals(l);for(const h in c)this._renderChannel(c[h],{layerFilter:i,onViewportActive:s,views:o,viewport:l,viewportChanged:u})}_renderChannel(e,{layerFilter:n,onViewportActive:i,views:r,viewport:s,viewportChanged:o}){const a=this.channels[e.index];if(!a)return;const c=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,u)=>l!==a.layerBounds[u]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(c||o)&&(this.lastViewport=s,e.bounds=function Rpe({layers:t,viewport:e}){let n=null;for(const s of t){const o=s.getBounds();o&&(n?(n[0]=Math.min(n[0],o[0][0]),n[1]=Math.min(n[1],o[0][1]),n[2]=Math.max(n[2],o[1][0]),n[3]=Math.max(n[3],o[1][1])):n=[o[0][0],o[0][1],o[1][0],o[1][1]])}const i=e.getBounds();if(!n)return i;const r=function Npe(t){const e_x=t[2]-t[0],e_y=t[3]-t[1],n_x=t[0]+.5*e_x,n_y=t[1]+.5*e_y;return[n_x-e_x,n_y-e_y,n_x+e_x,n_y+e_y]}(i);return n[2]-n[0]<r[2]-r[0]||n[3]-n[1]<r[3]-r[1]||(n[0]=Math.max(n[0],r[0]),n[1]=Math.max(n[1],r[1]),n[2]=Math.min(n[2],r[2]),n[3]=Math.min(n[3],r[3])),n}({layers:e.layers,viewport:s}),c||!Zg(e.bounds,a.bounds))){const{maskPass:l,maskMap:u}=this,h=function Ope({bounds:t,viewport:e,width:n,height:i}){if(t[2]<=t[0]||t[3]<=t[1])return null;if(n-=2,i-=2,e instanceof qd){const{longitude:a,latitude:c,zoom:l}=KH({width:n,height:i,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new qd({longitude:a,latitude:c,zoom:l,x:1,y:1,width:n,height:i})}const s=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],o=Math.min(20,n/(t[2]-t[0]),i/(t[3]-t[1]));return new qD({x:1,y:1}).makeViewport({width:n,height:i,viewState:{target:s,zoom:Math.log2(o)}})}({bounds:e.bounds,viewport:s,width:u.width,height:u.height});e.maskBounds=h?h.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:n,viewports:h?[h]:[],onViewportActive:i,views:r,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const n={};let i=0;for(const r of e){const{id:s}=r.root;let o=n[s];if(!o){if(++i>4){oi.warn("Too many mask layers. The max supported is 4")();continue}o={id:s,index:this.channels.findIndex(a=>a?.id===s),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},n[s]=o}o.layers.push(r),o.layerBounds.push(r.getBounds())}for(let r=0;r<4;r++){const s=this.channels[r];(!s||!(s.id in n))&&(this.channels[r]=null)}for(const r in n){const s=n[r];s.index<0&&(s.index=this.channels.findIndex(o=>!o),this.channels[s.index]=s)}return n}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const Fpe=new MR;class Lpe{constructor(){ge(this,"effects",void 0),ge(this,"_internalEffects",void 0),ge(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!im(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new Ppe),e.some(n=>n instanceof MR)||this._internalEffects.push(Fpe)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class Bpe extends hA{shouldDrawLayer(e){return"draw"===e.props.operation}}const oz={blendFunc:[1,0,32771,0],blendEquation:32774};class az extends hA{constructor(...e){super(...e),ge(this,"pickZ",void 0),ge(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:c,width:l,height:u},cullRect:h,effects:f,pass:g="picking",pickZ:m}){const y=this.gl;this.pickZ=m;const b=m?null:{byLayer:new Map,byAlpha:[]};this._colors=b;const R=gc(y,{scissorTest:!0,scissor:[a,c,l,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...oz,blend:!m},()=>super.render({target:o,layers:e,layerFilter:n,views:i,viewports:r,onViewportActive:s,cullRect:h,effects:f?.filter(ie=>ie.useInPicking),pass:g}));return this._colors=null,{decodePickingColor:b&&jpe.bind(null,b),stats:R}}shouldDrawLayer(e){return e.props.pickable&&"draw"===e.props.operation}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,i){const r={...e.props.parameters};return this._colors?(Object.assign(r,oz),r.blend=!0,r.blendColor=function kpe(t,e,n){const{byLayer:i,byAlpha:r}=t;let s,o=i.get(e);return o?(o.viewports.push(n),s=o.a):(s=i.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},i.set(e,o),r[s]=o):(oi.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}(this._colors,e,i)):r.blend=!1,r}}function jpe(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}class Vpe{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Bpe(e),this.pickLayersPass=new az(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||As.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=n.render({...e,target:i});this._postRender(e.effects,e),this.renderCount++,Fo("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){let i=null;for(const r of e)r.preRender(this.gl,n),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new As(this.gl),new As(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){r.target=n.target,s.postRender(this.gl,r);break}const o=s.postRender(this.gl,r);r.inputBuffer=o,r.swapBuffer=o===i[0]?i[1]:i[0]}}}const Hpe={pickedColor:null,pickedObjectIndex:-1};function Gpe({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:i,deviceRadius:r,deviceRect:s}){const{x:o,y:a,width:c,height:l}=s;let u=r*r,h=-1,f=0;for(let g=0;g<l;g++){const m=g+a-i,y=m*m;if(y>u)f+=4*c;else for(let b=0;b<c;b++){if(t[f+3]-1>=0){const L=b+o-n,ie=L*L+y;ie<=u&&(u=ie,h=f)}f+=4}}if(h>=0){const g=t.slice(h,h+4),m=e(g);if(m){const y=Math.floor(h/4/c),b=h/4-y*c;return{...m,pickedColor:g,pickedX:o+b,pickedY:a+y}}oi.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Hpe}function cz({pickInfo:t,viewports:e,pixelRatio:n,x:i,y:r,z:s}){let a,o=e[0];if(e.length>1&&(o=function $pe(t,e){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.containsPixel(e))return i}return t[0]}(t?.pickedViewports||e,{x:i,y:r})),o){const c=[i-o.x,r-o.y];void 0!==s&&(c[2]=s),a=o.unproject(c)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function Wpe(t){const{pickInfo:e,lastPickedInfo:n,mode:i,layers:r}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,c=o?[o]:[];if("hover"===i){const f=n.layerId,g=o?o.props.id:null;if(g!==f||a!==n.index){if(g!==f){const m=r.find(y=>y.props.id===f);m&&c.unshift(m)}n.layerId=g,n.index=a,n.info=null}}const l=cz(t),u=new Map;return u.set(null,l),c.forEach(h=>{let f={...l};h===o&&(f.color=s,f.index=a,f.picked=!0),f=lz({layer:h,info:f,mode:i});const g=f.layer;h===o&&"hover"===i&&(n.info=f),u.set(g.id,f),"hover"===i&&g.updateAutoHighlight(f)}),u}function lz({layer:t,info:e,mode:n}){for(;t&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:i}),t=t.parent}return e}class qpe{constructor(e){ge(this,"gl",void 0),ge(this,"pickingFBO",void 0),ge(this,"depthFBO",void 0),ge(this,"pickLayersPass",void 0),ge(this,"layerFilter",void 0),ge(this,"lastPickedInfo",void 0),ge(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new az(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:i,viewports:r},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,c=o?i.find(f=>f.id===o):null,l=a&&r.find(f=>f.id===a)||r[0],u=l&&l.unproject([e-l.x,n-l.y]);return{...s,x:e,y:n,viewport:l,coordinate:u,layer:c}}_resizeBuffer(){var e,n;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new As(i),As.isSupported(i,{colorBufferFloat:!0}))){const r=new As(i);r.attach({36064:new io(i,{format:ei(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(n=this.depthFBO)||void 0===n||n.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const n=e.filter(i=>i.isPickable()&&!i.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:i,x:r,y:s,radius:o=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:u,effects:h}){const f=this._getPickable(e),g=om(this.gl);if(!f)return{result:[],emptyInfo:cz({viewports:i,x:r,y:s,pixelRatio:g})};this._resizeBuffer();const m=aR(this.gl,[r,s],!0),y=[m.x+Math.floor(m.width/2),m.y+Math.floor(m.height/2)],b=Math.round(o*g),{width:R,height:L}=this.pickingFBO,ie=this._getPickingRect({deviceX:y[0],deviceY:y[1],deviceRadius:b,deviceWidth:R,deviceHeight:L}),q={x:r-o,y:s-o,width:2*o+1,height:2*o+1};let Ee;const Re=[],tt=new Set;for(let dt=0;dt<a;dt++){let We,ht;We=ie?Gpe({...this._drawAndSample({layers:f,views:n,viewports:i,onViewportActive:u,deviceRect:ie,cullRect:q,effects:h,pass:"picking:".concat(c)}),deviceX:y[0],deviceY:y[1],deviceRadius:b,deviceRect:ie}):{pickedColor:null,pickedObjectIndex:-1},We.pickedLayer&&l&&this.depthFBO&&(ht=this._drawAndSample({layers:[We.pickedLayer],views:n,viewports:i,onViewportActive:u,deviceRect:{x:We.pickedX,y:We.pickedY,width:1,height:1},cullRect:q,effects:h,pass:"picking:".concat(c,":z")},!0).pickedColors[0]),We.pickedLayer&&dt+1<a&&(tt.add(We.pickedLayer),We.pickedLayer.disablePickingIndex(We.pickedObjectIndex)),Ee=Wpe({pickInfo:We,lastPickedInfo:this.lastPickedInfo,mode:c,layers:f,viewports:i,x:r,y:s,z:ht,pixelRatio:g});for(const bt of Ee.values())bt.layer&&Re.push(bt);if(!We.pickedColor)break}for(const dt of tt)dt.restorePickingColors();return{result:Re,emptyInfo:Ee.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:i,x:r,y:s,width:o=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:u,effects:h}){const f=this._getPickable(e);if(!f)return[];this._resizeBuffer();const g=om(this.gl),m=aR(this.gl,[r,s],!0),y=m.x,b=m.y+m.height,R=aR(this.gl,[r+o,s+a],!0),ie=R.y,Re=function zpe({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t)for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){const s=t.slice(i,i+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):oi.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(n.values())}(this._drawAndSample({layers:f,views:n,viewports:i,onViewportActive:u,deviceRect:{x:y,y:ie,width:R.x+R.width-y,height:b-ie},cullRect:{x:r,y:s,width:o,height:a},effects:h,pass:"picking:".concat(c)})),tt=new Map,dt=Number.isFinite(l);for(let We=0;We<Re.length&&!(dt&&l&&tt.size>=l);We++){const ht=Re[We];let bt={color:ht.pickedColor,layer:null,index:ht.pickedObjectIndex,picked:!0,x:r,y:s,pixelRatio:g};bt=lz({layer:ht.pickedLayer,info:bt,mode:c}),tt.has(bt.object)||tt.set(bt.object,bt)}return Array.from(tt.values())}_drawAndSample({layers:e,views:n,viewports:i,onViewportActive:r,deviceRect:s,cullRect:o,effects:a,pass:c},l=!1){const u=l?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:i,onViewportActive:r,pickingFBO:u,deviceRect:s,cullRect:o,effects:a,pass:c,pickZ:l}),{x:f,y:g,width:m,height:y}=s,b=new(l?Float32Array:Uint8Array)(m*y*4);return cA(u,{sourceX:f,sourceY:g,sourceWidth:m,sourceHeight:y,target:b}),{pickedColors:b,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const o=Math.max(0,e-i),a=Math.max(0,n-i),c=Math.min(r,e+i+1)-o,l=Math.min(s,n+i+1)-a;return c<=0||l<=0?null:{x:o,y:a,width:c,height:l}}}const Xpe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class Ype{constructor(e){ge(this,"el",null),ge(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Xpe),n.appendChild(this.el))}setTooltip(e,n,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(n,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}function uz(t,e){if(!t)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const Jpe=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),dz=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:Zpe}=(dz&&parseFloat(dz[1]),globalThis),fO=typeof Image<"u",pO=typeof ImageBitmap<"u",gO=!!Jpe||!!Zpe;function hz(t){const e=function pz(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const tge=/^data:image\/svg\+xml/,nge=/\.svg((\?|#).*)?$/;function mO(t){return t&&(tge.test(t)||nge.test(t))}function gz(t,e){if(mO(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function mz(t,e,n){return _O.apply(this,arguments)}function _O(){return _O=C(function*(t,e,n){const i=function ige(t,e){if(mO(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return gz(t,e)}(t,n),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function rge(t,e){return yO.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),_O.apply(this,arguments)}function yO(){return yO=C(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=s=>r(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){r(s)}})}),yO.apply(this,arguments)}const sge={};let _z=!0;function vO(){return vO=C(function*(t,e,n){let i;i=mO(n)?yield mz(t,e,n):gz(t,n);const r=e&&e.imagebitmap;return yield function age(t){return bO.apply(this,arguments)}(i,r)}),vO.apply(this,arguments)}function bO(){return bO=C(function*(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function cge(t){for(const e in t||sge)return!1;return!0}(e)||!_z)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),_z=!1}return yield createImageBitmap(t)}),bO.apply(this,arguments)}const Tl=!1,H0=!0;function yz(t){const e=G0(t);return function gge(t){const e=G0(t);return e.byteLength>=24&&2303741511===e.getUint32(0,Tl)?{mimeType:"image/png",width:e.getUint32(16,Tl),height:e.getUint32(20,Tl)}:null}(e)||function yge(t){const e=G0(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,Tl)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function vge(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Tl);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Tl),width:e.getUint16(s+7,Tl)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,Tl)}return null}(e)||function mge(t){const e=G0(t);return e.byteLength>=10&&1195984440===e.getUint32(0,Tl)?{mimeType:"image/gif",width:e.getUint16(6,H0),height:e.getUint16(8,H0)}:null}(e)||function _ge(t){const e=G0(t);return e.byteLength>=14&&16973===e.getUint16(0,Tl)&&e.getUint32(2,H0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,H0),height:e.getUint32(22,H0)}:null}(e)||function pge(t){const n=function lge(t){return function fge(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function hge(t){return[...t].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==t[r+n])return!1;return!0}(t,"ftyp",4)&&96&t[8]?function uge(t){switch(function dge(t,e,n){return String.fromCharCode(...t.slice(e,n))}(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(t):null}(new Uint8Array(t instanceof DataView?t.buffer:t));return n?{mimeType:n.mimeType,width:0,height:0}:null}(e)}function G0(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function wO(){return wO=C(function*(t,e){const{mimeType:n}=yz(t)||{},i=globalThis._parseImageNode;return uz(i),yield i(t,n)}),wO.apply(this,arguments)}function xO(){return xO=C(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:s}=n||{},o=function xge(t){switch(t){case"auto":case"data":return function ege(){if(pO)return"imagebitmap";if(fO)return"image";if(gO)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function Qpe(t){switch(t){case"auto":return pO||fO||gO;case"imagebitmap":return pO;case"image":return fO;case"data":return gO;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(o){case"imagebitmap":a=yield function oge(t,e,n){return vO.apply(this,arguments)}(t,e,s);break;case"image":a=yield mz(t,e,s);break;case"data":a=yield function bge(t,e){return wO.apply(this,arguments)}(t,e);break;default:uz(!1)}return"data"===r&&(a=function fz(t){switch(hz(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),xO.apply(this,arguments)}const vz={id:"image",module:"images",name:"Images",version:"3.4.15",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function wge(t,e,n){return xO.apply(this,arguments)},tests:[t=>!!yz(new DataView(t))],options:{image:{type:"auto",decode:!0}}},Age={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function Ege(t){const e=t[0],n=t[t.length-1];return"{"===e&&"}"===n||"["===e&&"]"===n},parseTextSync:JSON.parse},z0="8.8.27",vA=globalThis.deck&&globalThis.deck.VERSION;if(vA&&vA!==z0)throw new Error("deck.gl - multiple versions detected: ".concat(vA," vs ").concat(z0));vA||(oi.log(1,"deck.gl ".concat(z0))(),globalThis.deck={...globalThis.deck,VERSION:z0,version:z0,log:oi,_registerLoggers:function Khe(t){TR=t}},JG([Age,[vz,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Sge=globalThis.deck,bA=globalThis;function bz(t){if(!t&&!bl())return"Node";if(wH(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const i=-1!==n.indexOf("MSIE "),r=-1!==n.indexOf("Trident/");return i||r?"IE":bA.chrome?"Chrome":bA.safari?"Safari":bA.mozInnerScreenX?"Firefox":"Unknown"}class wA extends Ru{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=ei(e),r=Z4(e,"TIMER_QUERY");let s=i||r;for(const o of n)switch(o){case"queries":s=s&&i;break;case"timers":s=s&&r;break;default:Jt(!1)}return s}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):n++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return wA.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const wz=bl()&&typeof document<"u";let Fge=0;class Lge{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:n=(b=>F4(b)),onAddHTML:i=null,onInitialize:r=(()=>{}),onRender:s=(()=>{}),onFinalize:o=(()=>{}),onError:a,gl:c=null,glOptions:l={},debug:u=!1,createFramebuffer:h=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:g=!0,stats:m=Rf.get("animation-loop-".concat(Fge++))}=e;let{useDevicePixels:y=!0}=e;"useDevicePixelRatio"in e&&(an.deprecated("useDevicePixelRatio","useDevicePixels")(),y=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:i,onInitialize:r,onRender:s,onFinalize:o,onError:a,gl:c,glOptions:l,debug:u,createFramebuffer:h},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=m,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:g,useDevicePixels:y}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return Jt("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=wA.isSupported(this.gl,["timers"])?new wA(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return C(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):n}setViewParameters(){return an.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=wz?new Promise((e,n)=>{wz&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function Pge(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function Nge(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?lR(this.props.gl,e):this.onCreateContext(e),!oA(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function Iue(t){Du(t,oR)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const i=this.props.onAddHTML(n);i&&(n.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&n>0&&(i=e/n),{width:e,height:n,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function Pue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.canvas){const i=function Due(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}(e.useDevicePixels);return void function jue(t,e,n){let i="width"in n?n.width:t.canvas.clientWidth,r="height"in n?n.height:t.canvas.clientHeight;(!i||!r)&&(an.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,r=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==e){let o=e;const a=Math.floor(i*o),c=Math.floor(r*o);t.canvas.width=a,t.canvas.height=c,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==c)&&(an.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/r),t.canvas.width=Math.floor(i*o),t.canvas.height=Math.floor(r*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(t,i,e)}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new As(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var xA=M(4511);const Bge={mousedown:1,mousemove:2,mouseup:4};(function jge(t){const e=t.prototype.handler;t.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function kge(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}(r,s=>s.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(xA.PointerEventInput),function Uge(t){t.prototype.handler=function(n){let i=Bge[n.type];1&i&&n.button>=0&&(this.pressed=!0),2&i&&0===n.which&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}(xA.MouseInput);const Vge=xA.Manager,Il=xA;class EA{constructor(e,n,i){this.element=e,this.callback=n,this.options={enable:!0,...i}}}const Hge=Il?[[Il.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Il.Rotate,{enable:!1}],[Il.Pinch,{enable:!1}],[Il.Swipe,{enable:!1}],[Il.Pan,{threshold:0,enable:!1}],[Il.Press,{enable:!1}],[Il.Tap,{event:"doubletap",taps:2,enable:!1}],[Il.Tap,{event:"anytap",enable:!1}],[Il.Tap,{enable:!1}]]:null,Az={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Gge={doubletap:["tap"]},zge={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},AO={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Wge={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},Sz={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},$ge=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",mm=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let SO=!1;try{mm.addEventListener("test",null,{get passive(){return SO=!0,!0}}),mm.removeEventListener("test",null)}catch{SO=!1}const qge=-1!==$ge.indexOf("firefox"),{WHEEL_EVENTS:Xge}=AO,Mz=4.000244140625;class Jge extends EA{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{if(!this.options.enable)return;let s=r.deltaY;mm.WheelEvent&&(qge&&r.deltaMode===mm.WheelEvent.DOM_DELTA_PIXEL&&(s/=mm.devicePixelRatio),r.deltaMode===mm.WheelEvent.DOM_DELTA_LINE&&(s*=40)),0!==s&&s%Mz==0&&(s=Math.floor(s/Mz)),r.shiftKey&&s&&(s*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-s,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(Xge),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!SO&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){"wheel"===e&&(this.options.enable=n)}}const{MOUSE_EVENTS:Zge}=AO,Tz="pointermove",Iz="pointerover",Dz="pointerout",Rz="pointerenter",Oz="pointerleave";class Qge extends EA{constructor(e,n,i){super(e,n,i),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(Zge),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Tz&&(this.enableMoveEvent=n),e===Iz&&(this.enableOverEvent=n),e===Dz&&(this.enableOutEvent=n),e===Rz&&(this.enableEnterEvent=n),e===Oz&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(Iz,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(Dz,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(Rz,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(Oz,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.which&&(this.pressed=!1),this.pressed||this._emit(Tz,e);break;case"mouseup":this.pressed=!1}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:eme}=AO,Nz="keydown";class tme extends EA{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{const s=r.target||r.srcElement;"INPUT"===s.tagName&&"text"===s.type||"TEXTAREA"===s.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:Nz,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(eme),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Nz&&(this.enableDownEvent=n),"keyup"===e&&(this.enableUpEvent=n)}}const Fz="contextmenu";class nme extends EA{constructor(e,n,i){super(e,n,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:Fz,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===Fz&&(this.options.enable=n)}}const ime={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function fme(t){const e=ime[t.srcEvent.type];if(!e)return null;const{buttons:n,button:i,which:r}=t.srcEvent;let s=!1,o=!1,a=!1;return 4===e||2===e&&!Number.isFinite(n)?(s=1===r,o=2===r,a=3===r):2===e?(s=!!(1&n),o=!!(4&n),a=!!(2&n)):1===e&&(s=0===i,o=1===i,a=2===i),{leftButton:s,middleButton:o,rightButton:a}}function pme(t,e){const n=t.center;if(!n)return null;const i=e.getBoundingClientRect();return{center:n,offsetCenter:{x:(n.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(n.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const TO={srcElement:"root",priority:0};class gme{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const i=this._normalizeEvent(n);let r=n.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,i,r=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let c=TO;"string"==typeof i||i&&i.addEventListener?c={...TO,srcElement:i}:i&&(c={...TO,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const u={type:e,handler:n,srcElement:c.srcElement,priority:c.priority};r&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=u.priority);)h--;l.splice(h+1,0,u)}remove(e,n){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type===e&&o.handler===n){i.splice(s,1);const a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=i.some(s=>!s.passive)}_emit(e,n){const i=this.handlersByElement.get(n);if(i){let r=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:u,once:h}=i[c];if(u({...e,type:l,stopPropagation:s,stopImmediatePropagation:o}),h&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:u}=a[c];this.remove(l,u)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...fme(e),...pme(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const mme={events:null,recognizers:null,recognizerOptions:{},Manager:Vge,touchAction:"none",tabIndex:0};class _me{constructor(e=null,n){this._onBasicInput=r=>{const{srcEvent:s}=r,o=zge[s.type];o&&this.manager.emit(o,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...mme,...n},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this;this.manager=new(0,n.Manager)(e,{touchAction:n.touchAction,recognizers:n.recognizers||Hge}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(Az).forEach(r=>{const s=this.manager.get(r);s&&Az[r].forEach(o=>{s.recognizeWith(o)})});for(const r in n.recognizerOptions){const s=this.manager.get(r);if(s){const o=n.recognizerOptions[r];delete o.enable,s.set(o)}}this.wheelInput=new Jge(e,this._onOtherEvent,{enable:!1}),this.moveInput=new Qge(e,this._onOtherEvent,{enable:!1}),this.keyInput=new tme(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new nme(e,this._onOtherEvent,{enable:!1});for(const[r,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(r,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,i){this._addEventHandler(e,n,i,!1)}once(e,n,i){this._addEventHandler(e,n,i,!0)}watch(e,n,i){this._addEventHandler(e,n,i,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==n){r.set({enable:n});const s=Gge[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=i.get(o);n?(a.requireFailure(e),r.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,i,r,s){if("string"!=typeof e){i=n;for(const u in e)this._addEventHandler(u,e[u],i,r,s);return}const{manager:o,events:a}=this,c=Sz[e]||e;let l=a.get(c);l||(l=new gme(this),a.set(c,l),l.recognizerName=Wge[c]||c,o&&o.on(c,l.handleEvent)),l.add(e,n,i,r,s),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,n){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:i}=this,s=i.get(Sz[e]||e);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const c of i.values())if(c.recognizerName===o&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function Ff(){}const Lz={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Ff,onResize:Ff,onViewStateChange:Ff,onInteractionStateChange:Ff,onBeforeRender:Ff,onAfterRender:Ff,onLoad:Ff,onError:t=>oi.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class IO{constructor(e){ge(this,"props",void 0),ge(this,"width",0),ge(this,"height",0),ge(this,"userData",{}),ge(this,"canvas",null),ge(this,"viewManager",null),ge(this,"layerManager",null),ge(this,"effectManager",null),ge(this,"deckRenderer",null),ge(this,"deckPicker",null),ge(this,"eventManager",null),ge(this,"tooltip",null),ge(this,"metrics",void 0),ge(this,"animationLoop",void 0),ge(this,"stats",void 0),ge(this,"viewState",void 0),ge(this,"cursorState",void 0),ge(this,"_needsRedraw",void 0),ge(this,"_pickRequest",void 0),ge(this,"_lastPointerDownInfo",null),ge(this,"_metricsCounter",void 0),ge(this,"_onPointerMove",n=>{const{_pickRequest:i}=this;if("pointerleave"===n.type)i.x=-1,i.y=-1,i.radius=0;else{if(n.leftButton||n.rightButton)return;{const r=n.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=n}),ge(this,"_onEvent",n=>{const i=i4[n.type],r=n.offsetCenter;if(!i||!r||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:s,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=o,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let u=!1;c&&(u=c.call(a,o,n)),!u&&l&&l(o,n)}),ge(this,"_onPointerDown",n=>{const i=n.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...Lz,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&oi.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===bz()&&oi.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new uR({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&x0.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,i,r,s,o,a,c;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(n=this.viewManager)||void 0===n||n.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(s=this.deckPicker)||void 0===s||s.finalize(),this.deckPicker=null,null===(o=this.eventManager)||void 0===o||o.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(c=this.canvas.parentElement)||void 0===c||c.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&oi.removed("onLayerHover","onHover")(),"onLayerClick"in e&&oi.removed("onLayerClick","onClick")(),e.initialViewState&&!im(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||i||r||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return null!==this.viewManager}getViews(){return no(this.viewManager),this.viewManager.views}getViewports(e){return no(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_pick(e,n,i){no(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return"string"==typeof n&&(n=document.getElementById(n),no(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:i}=e;if(n||0===n){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(i||0===i){var r;const s=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const n=e.clientWidth||e.width,i=e.clientHeight||e.height;var r;n===this.width&&i===this.height||(this.width=n,this.height=i,null===(r=this.viewManager)||void 0===r||r.setProps({width:n,height:i}),this.props.onResize({width:n,height:i}))}_createAnimationLoop(e){const{width:n,height:i,gl:r,glOptions:s,debug:o,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:u}=e;return new Lge({width:n,height:i,useDevicePixels:u,autoResizeViewport:!1,gl:r,onCreateContext:h=>F4({...s,...h,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new sz({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let s=r,o=!1;for(const a of i){var n;s=a,o=(null===(n=a.layer)||void 0===n?void 0:n.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,lR(e,{enable:!0,copyState:!0})),this.tooltip=new Ype(this.canvas),Du(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new AG;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new _me(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in i4)this.eventManager.on(r,this._onEvent);this.viewManager=new Epe({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new xpe(e,{deck:this,stats:this.stats,viewport:i,timeline:n}),this.effectManager=new Lpe,this.deckRenderer=new Vpe(e),this.deckPicker=new qpe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:i}=this.layerManager.context;Du(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),oi.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const i=Rf.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}ge(IO,"defaultProps",Lz),ge(IO,"VERSION",Sge.VERSION);var Lf=M(6887);function Pu(t={}){const{connector:e=(()=>new qt),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,c,l=0,u=!1,h=!1;const f=()=>{a?.unsubscribe(),a=void 0},g=()=>{f(),o=c=void 0,u=h=!1},m=()=>{const y=o;g(),y?.unsubscribe()};return T((y,b)=>{l++,!h&&!u&&f();const R=c=c??e();b.add(()=>{l--,0===l&&!h&&!u&&(a=DO(m,r))}),R.subscribe(b),!o&&l>0&&(o=new $i({next:L=>R.next(L),error:L=>{h=!0,f(),a=DO(g,n,L),R.error(L)},complete:()=>{u=!0,f(),a=DO(g,i),R.complete()}}),ws(y).subscribe(o))})(s)}}function DO(t,e,...n){if(!0===e)return void t();if(!1===e)return;const i=new $i({next:()=>{i.unsubscribe(),t()}});return ws(e(...n)).subscribe(i)}class RO{constructor(e,n){ge(this,"opts",void 0),ge(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:i}=this.source,{size:r}=n;let s=i;if(i&&i.length!==r){s=new Float32Array(r);const o=n.elementOffset||0;for(let a=0;a<r;++a)s[a]=i[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function SA(t){return t.stride||t.size*t.bytesPerElement}function Bz(t,e){e.offset&&oi.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=SA(t),s=(void 0!==e.vertexOffset?e.vertexOffset:t.vertexOffset||0)*n+(e.elementOffset||0)*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}class bme{constructor(e,n,i){ge(this,"gl",void 0),ge(this,"id",void 0),ge(this,"size",void 0),ge(this,"settings",void 0),ge(this,"value",void 0),ge(this,"doublePrecision",void 0),ge(this,"_buffer",void 0),ge(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const r=n.logicalType||n.type,s=5130===r;let a,{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),a=s?5126:!r&&n.isIndexed?e&&bR(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function yme(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=s,s&&!1===n.fp64&&(c=Float32Array),this.value=null,this.settings={...n,defaultType:c,defaultValue:o,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new Ji(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*SA(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),x0.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,s=function vme(t,e){const n=Bz(t,e);return{high:n,low:{...n,offset:n.offset+4*t.size}}}(this.getAccessor(),n||{});return i[e]=new RO(this,s.high),i["".concat(e,"64Low")]=r?new RO(this,s.low):new Float32Array(this.size),i}if(n){const i=Bz(this.getAccessor(),n);return{[e]:new RO(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:i,size:r}=this,s=i*r;if(n&&s&&n.length>=s){const o=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<s;)for(let l=0;l<r;l++){const u=n[c++];u<o[l]&&(o[l]=u),u>a[l]&&(a[l]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof Ji?{buffer:e}:e;const r={...this.settings,...i};if(n.bufferAccessor=r,n.bounds=null,i.constant){let s=i.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),n.constant&&this._areValuesEqual(s,this.value))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(i.buffer){const s=i.buffer;n.externalBuffer=s,n.constant=!1,this.value=i.value||null;const o=i.value instanceof Float64Array;r.type=i.type||s.accessor.type,r.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),r.stride=SA(r)}else if(i.value){this._checkExternalBuffer(i);let s=i.value;n.externalBuffer=null,n.constant=!1,this.value=s,r.bytesPerElement=s.BYTES_PER_ELEMENT,r.stride=SA(r);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=ND(s,r));const c=s.byteLength+a+2*r.stride;o.byteLength<c&&o.reallocate(c),o.setAccessor(null),o.subData({data:s,offset:a}),r.type=i.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?ND(n,{size:this.size,startIndex:i,endIndex:r}):n.subarray(i,r),offset:i*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:i}=this,r=i.allocatedValue,s=x0.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&r&&o.subData({data:r instanceof Float64Array?ND(r,this):r,offset:a})),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=n.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof i)&&this.settings.normalized&&!("normalized"in e)&&oi.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return n[i]=e,n;if(!e)return n[i]=r[0],n;switch(s){case 4:n[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:n[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:n[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:n[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=s;for(;--o>=0;)n[i+o]=Number.isFinite(e[o])?e[o]:r[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==n[r])return!1;return!0}}const kz=[],jz=[];function CA(t,e=0,n=1/0){let i=kz;const r={index:-1,data:t,target:[]};return t?"function"==typeof t[Symbol.iterator]?i=t:t.length>0&&(jz.length=t.length,i=jz):i=kz,(e>0||Number.isFinite(n))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,n),r.index=e-1),{iterable:i,objectInfo:r}}function Uz(t){return t&&t[Symbol.asyncIterator]}const xme=[],MA=[[0,1/0]];function OO(t){const{source:e,target:n,start:i=0,size:r,getData:s}=t,a=e.length,c=(t.end||n.length)-i;if(a>c)return void n.set(e.subarray(0,c),i);if(n.set(e,i),!s)return;let l=a;for(;l<c;){const u=s(l,e);for(let h=0;h<r;h++)n[i+l]=u[h]||0,l++}}const Sme={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function Vz(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...Sme[n],...e,...t,type:n}}function Hz(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function Gz(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function zz(t){t.push(t.shift())}function NO(t,e){const{doublePrecision:n,settings:i,value:r,size:s}=t,o=n&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*s)*o}function Wz({buffer:t,numInstances:e,attribute:n,fromLength:i,fromStartIndices:r,getData:s=(o=>o)}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,c=n.byteOffset,l=n.startIndices,u=r&&l,h=NO(n,e),f=n.isConstant;if(!u&&i>=h)return;const g=f?n.value:n.getBuffer().getData({srcByteOffset:c});if(n.settings.normalized&&!f){const R=s;s=(L,ie)=>n.normalizeConstant(R(L,ie))}const m=f?(R,L)=>s(g,L):(R,L)=>s(g.subarray(R,R+a),L),y=t.getData({length:i}),b=new Float32Array(h);(function Ame({source:t,target:e,size:n,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!Array.isArray(s))return OO({source:t,target:e,size:n,getData:i}),e;let o=0,a=0;const c=i&&((u,h)=>i(u+a,h)),l=Math.min(r.length,s.length);for(let u=1;u<l;u++){const h=r[u]*n,f=s[u]*n;OO({source:t.subarray(o,h),target:e,start:a,end:f,size:n,getData:c}),o=h,a=f}a<e.length&&OO({source:[],target:e,start:a,size:n,getData:c})})({source:y,target:b,sourceStartIndices:r,targetStartIndices:l,size:a,getData:m}),t.byteLength<b.byteLength+c&&t.reallocate(b.byteLength+c),t.subData({data:b,offset:c})}class PO extends bme{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:MA}),ge(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,i=this.settings.transition;return Vz(Array.isArray(n)?e[n.find(s=>e[s])]:e[n],i)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:i=0,endRow:r=1/0}=n;this.state.updateRanges=function Eme(t,e){if(t===MA||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],i=t.length;let r=0;for(let s=0;s<i;s++){const o=t[s];o[1]<e[0]?(n.push(o),r=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(r,0,e),n}(this.state.updateRanges,[i,r])}else this.state.updateRanges=MA}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=xme}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,n.updateRanges!==MA),!0)}updateBuffer({numInstances:e,data:n,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let c=!0;if(o){for(const[l,u]of s)o.call(r,this,{data:n,startRow:l,endRow:u,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,u]of s){const h=Number.isFinite(l)?this.getVertexOffset(l):0,f=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:h,endOffset:f})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;return no(ArrayBuffer.isView(o.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function wme(t,e){const{size:n,stride:i,offset:r,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,c=i?i/a:n,l=r?r/a:0,u=Math.floor((t.length-l)/c);return(h,{index:f,target:g})=>{if(!s){const R=f*c+l;for(let L=0;L<n;L++)g[L]=t[R+L];return g}const m=s[f],y=s[f+1]||u;let b;if(o){b=new Array(y-m);for(let R=m;R<y;R++){const L=R*c+l;g=new Array(n);for(let ie=0;ie<n;ie++)g[ie]=t[L+ie];b[R-m]=g}}else if(c===n)b=t.subarray(m*n+l,y*n+l);else{b=new t.constructor((y-m)*n);let R=0;for(let L=m;L<y;L++){const ie=L*c+l;for(let q=0;q<n;q++)b[R++]=t[ie+q]}}return b}}(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:!!o.size&&o.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const i in e)Object.assign(n,super.getShaderAttributes(i,e[i]));return n}_autoUpdater(e,{data:n,startRow:i,endRow:r,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:c,value:l,size:u,startIndices:h}=e,{accessor:f,transform:g}=a,m=c.binaryAccessor||("function"==typeof f?f:s[f]);no("function"==typeof m,'accessor "'.concat(f,'" is not a function'));let y=e.getVertexOffset(i);const{iterable:b,objectInfo:R}=CA(n,i,r);for(const L of b){R.index++;let ie=m(L,R);if(g&&(ie=g.call(this,ie)),h){const q=(R.index<h.length-1?h[R.index+1]:o)-h[R.index];if(ie&&Array.isArray(ie[0])){let Ee=y;for(const Re of ie)e._normalizeValue(Re,l,Ee),Ee+=u}else ie&&ie.length>u?l.set(ie,y):(e._normalizeValue(ie,R.target,0),Jhe({target:l,source:R.target,start:y,count:q}));y+=q*u}else e._normalizeValue(ie,l,y),y+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let i=!0;switch(n){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const $z="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",Mme="#version 300 es\n".concat($z);function qz(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[i,r,s]=n;return e.includes(i)&&r&&s?{qualifier:i,type:r,name:s.split(";")[0]}:null}function Xz(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:n,inputType:i,output:r}=t;if(!n)return 300===e?Mme:e>300?"#version ".concat(e,"\n").concat($z):"void main() {gl_FragColor = vec4(0);}";const s=function Dme(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Ua(!1),null}}(n,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(n,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(s,";\n}"):"varying ".concat(i," ").concat(n,";\nvoid main() {\n  gl_FragColor = ").concat(s,";\n}")}class Yz extends Ru{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return ei(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};No(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,am(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(n);return i<0?(this.unused[e]=r,an.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=n,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,i,r;return e instanceof Ji?r=e:(r=e.buffer,i=e.byteSize,n=e.byteOffset),(void 0!==n||void 0!==i)&&(n=n||0,i=i||r.byteLength-n),{buffer:r,byteOffset:n,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class Rme{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=n;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],i=e?n[e]:null;return i?i instanceof Ji?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:n}=e,i=this.getBuffer(n);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&Jt(ei(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in n&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const s=i[r];if("string"==typeof s){const o=n[s],{byteLength:a,usage:c,accessor:l}=o;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:i})}_setupTransformFeedback(e,n){let{model:i}=n;const{program:r}=i;e.transformFeedback=new Yz(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:n,feedbackBuffers:i})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const s=this.feedbackMap[r];n[r]=e.feedbackBuffers[s],i[s]=e.sourceBuffers[r],Jt(i[s]instanceof Ji)}return{sourceBuffers:n,feedbackBuffers:i}}_createNewBuffer(e,n){const i=new Ji(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function Kz(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&"#version"===n[0]){const i=parseInt(n[1],10);Number.isFinite(i)&&(e=i)}return e}const Ome={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},TA="transform_uSize_",Jz="transform_position";const Ume={10241:9728,10240:9728,10242:33071,10243:33071};class Hme{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,sourceTextures:i,framebuffer:r,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const h in this.samplerTextureMap)a[h]=i[this.samplerTextureMap[h]];this._setSourceTextureParameters();const u=function Fme(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:i}=t;const r={};let s,o;n&&(({width:s,height:o}=i),r["".concat(TA).concat(n)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),r["".concat(TA).concat(a)]=[s,o];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],i=cA(n);if(!e)return i;const r=i.constructor,s=function Ime(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ua(!1),null}}(this.targetTextureType),o=new r(i.length*s/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<s;l++)o[a++]=i[c+l];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:i}=e;if(i instanceof io)return i;const r=n[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:i={},_targetTexture:r}=e,s=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:i,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((i,r,s)=>{s[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Ji(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:n,targetTexture:i})}}_updateBinding(e,n){const{sourceBuffers:i,sourceTextures:r,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:c}=e;c?(c.update({attachments:{36064:s},resizeAttachments:!1}),c.resize({width:o,height:a})):e.framebuffer=new As(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const i in n)n[i].setParameters(Ume)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);return n[this._swapTexture]=e.targetTexture,{sourceTextures:n,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const n=function ade(t,e){Jt(t instanceof io||t instanceof sde||t instanceof ode);const n=t.constructor,{gl:i,width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:u}=t;return new n(i,Object.assign({width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:u},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:n,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:c}=function Pme(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:i,targetTexture:r}=t,o=Object.keys(n).length,a=null;const c={};let l=e,u={};if(o>0||i){const h=l.split("\n"),f=h.slice();if(h.forEach((g,m,y)=>{if(o>0){const b=function jme(t,e){const n={},i=function Lme(t){return qz(t,["attribute","in"])}(t);if(!i)return null;const{type:r,name:s}=i;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function Bme(t){const e="".concat("transform_uSampler_").concat(t),n="".concat(TA).concat(t);return{samplerName:e,sizeName:n,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(n,";")}}(s),u=function Tme(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ua(!1),null}}(r),h="  ".concat(r," ").concat(s," = transform_getInput(").concat(a,", ").concat(c,").").concat(u,";\n");return n[a]=s,{updatedLine:o,inject:{"vs:#decl":l,"vs:#main-start":h},samplerTextureMap:n}}return null}(g,n);if(b){const{updatedLine:R,inject:L}=b;f[m]=R,u=nR([u,L]),Object.assign(c,b.samplerTextureMap),o--}}i&&!a&&(a=function kme(t,e){const n=qz(t,["varying","out"]);return n&&n.name===e?n.type:null}(g,i))}),i){Jt(r);const g="".concat(TA).concat(i),m="uniform vec2 ".concat(g,";\n"),y="     vec2 ".concat(Jz," = transform_getPos(").concat(g,");\n     gl_Position = vec4(").concat(Jz,", 0, 1.);\n");u=nR([u,{"vs:#decl":m,"vs:#main-start":y}])}l=f.join("\n")}return{vs:l,targetTextureType:a,inject:u,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=nR([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=c,{vs:r,fs:e._fs||Xz({version:Kz(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[Ome].concat(e.modules||[]):e.modules,uniforms:s,inject:l}}}let IA=null;class Ga extends Ru{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||ei(e)||"Chrome"===bz()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ga(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ga.MAX_ATTRIBUTES=Ga.MAX_ATTRIBUTES||e.getParameter(34921),Ga.MAX_ATTRIBUTES}static setConstant(e,n,i){switch(i.constructor){case Float32Array:Ga._setConstantFloatArray(e,n,i);break;case Int32Array:Ga._setConstantIntArray(e,n,i);break;case Uint32Array:Ga._setConstantUintArray(e,n,i);break;default:Jt(!1)}}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},n,{id:n.id||n.program&&n.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ga.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Jt(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,i){if(34963===n.target)return this.setElementBuffer(n,i);const{size:r,type:s,stride:o,offset:a,normalized:c,integer:l,divisor:u}=i,{gl:h,gl2:f}=this;return e=Number(e),this.bind(()=>{h.bindBuffer(34962,n.handle),l?(Jt(ei(h)),f.vertexAttribIPointer(e,r,s,o,a)):h.vertexAttribPointer(e,r,s,c,o,a),h.enableVertexAttribArray(e),f.vertexAttribDivisor(e,u||0)}),this}enable(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!n&&0===e&&!Ga.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const i=this._normalizeConstantArrayValue(n),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Ji(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function zme(t,e){const n=function Gme(t){return(!IA||IA.byteLength<t)&&(IA=new ArrayBuffer(t)),IA}(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}(n.constructor,s);(function Wme(t){let{target:e,source:n,start:i=0,count:r=1}=t;const s=n.length,o=r*s;let a=0;for(let c=i;a<s;a++)e[c++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+o-a),a=o)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==n[i])return!1;return!0}static _setConstantFloatArray(e,n,i){switch(i.length){case 1:e.vertexAttrib1fv(n,i);break;case 2:e.vertexAttrib2fv(n,i);break;case 3:e.vertexAttrib3fv(n,i);break;case 4:e.vertexAttrib4fv(n,i);break;default:Jt(!1)}}static _setConstantIntArray(e,n,i){switch(Jt(ei(e)),i.length){case 1:e.vertexAttribI1iv(n,i);break;case 2:e.vertexAttribI2iv(n,i);break;case 3:e.vertexAttribI3iv(n,i);break;case 4:e.vertexAttribI4iv(n,i);break;default:Jt(!1)}}static _setConstantUintArray(e,n,i){switch(Jt(ei(e)),i.length){case 1:e.vertexAttribI1uiv(n,i);break;case 2:e.vertexAttribI2uiv(n,i);break;case 3:e.vertexAttribI3uiv(n,i);break;case 4:e.vertexAttribI4uiv(n,i);break;default:Jt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:i}=n;return Jt(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const Xme=/^(.+)__LOCATION_([0-9]+)$/,Yme=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class Kme{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=n.id||n.program&&n.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ga(e),j4(this,"VertexArray","v6.0",Yme),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e)this._setAttribute(n,e[n]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===n.target)return this.setElementBuffer(n,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,i);return r>=0&&(this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,n,s)),this}setConstant(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},i));return r>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[r]=n,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Ji(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Ji&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof Ji&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),r=i()}),r}_resolveLocationAndAccessor(e,n,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,an.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const c=this._getAttributeInfo(a||o);if(!c)return s;const u=ya.resolve(c.accessor,this.accessors[o]||{},i,r),{size:h,type:f}=u;return Jt(Number.isFinite(h)&&Number.isFinite(f)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const i=Xme.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,n){if(n instanceof Ji)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Ji)this.setBuffer(e,n[0],n[1]);else if(ArrayBuffer.isView(n)||Array.isArray(n))this.setConstant(e,n);else{if(!(n.buffer instanceof Ji))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,n.buffer,n)}}_setConstantAttributes(e,n){const i=Math.max(0|e,0|n);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,n){if(Ga.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,n){Ga.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const i=this.values[n],r=this.accessors[n];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof Ji){const a=i;if(o){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return an.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function W0(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return function Jme(t,e){const{maxElts:n=16,size:i=1}=e;let r="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(r+=",".concat(o%i==0?" ":"")),r+=W0(t[o],e);const s=t.length>n?"...":"]";return"".concat(r).concat(s)}(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<1e-16)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const r=t.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function Zz(t,e,n,i){const{gl:r}=t;if(!e)return{[i]:"null","Format ":"N/A"};let l,u,h,s="NOT PROVIDED",o=1,a=0,c=0;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),l=-1!==s.indexOf("nt")),e instanceof Ji){const f=e,{data:g,changed:m}=f.getDebugData();let y;return u=m?"*":"",h=g,c=f.byteLength,a=c/g.BYTES_PER_ELEMENT/o,n?y="".concat(n.divisor>0?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(c," bytes ").concat(Hd(r,s),")"):(l=!0,y="".concat(c," bytes")),{[i]:"".concat(u).concat(W0(h,{size:o,isInteger:l})),"Format ":y}}return h=e,o=e.length,s=String(e.constructor.name).replace("Array",""),l=-1!==s.indexOf("nt"),{[i]:"".concat(W0(h,{size:o,isInteger:l})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function Qme(t,e){const{type:n,size:i}=e,r=hG(n,i);return r?"".concat(t," (").concat(r.name,")"):t}function Qz(t){let{header:e="Uniforms",program:n,uniforms:i,undefinedOnly:r=!1}=t;Jt(n);const o=".*Matrix",c={},l=Object.keys(n._uniformSetters).sort();let u=0;for(const g of l)!g.match(".*_.*")&&!g.match(o)&&FO({table:c,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;for(const g of l)g.match(o)&&FO({table:c,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;for(const g of l)c[g]||FO({table:c,header:e,uniforms:i,uniformName:g,undefinedOnly:r})&&u++;let h=0;const f={};if(!r)for(const g in i){const m=i[g];c[g]||(h++,f[g]={Type:"NOT USED: ".concat(m),[e]:W0(m)})}return{table:c,count:u,unusedTable:f,unusedCount:h}}function FO(t){let{table:e,header:n,uniforms:i,uniformName:r,undefinedOnly:s}=t;const o=i[r],a=function e_e(t){return null!=t}(o);return!(s&&a||(e[r]={[n]:a?W0(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},0))}function e8(t){const{type:e,size:n}=t.accessor,i=hG(e,n);return i?"".concat(i.name," ").concat(t.name):t.name}const n_e={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function r_e(t,e){const{attributeMap:n=n_e}=e||{};return n&&n[t]||t}function s_e(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}Jt(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const t8=()=>{},c_e={};class ym{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=_a("model")}=n;Jt(oA(e)),this.id=i,this.gl=e,this.id=n.id||_a("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||j0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},Jt(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:n,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return Jt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return Jt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function i_e(t,e,n){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=r_e(s,n);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const c=o.value,l={...o};delete l.value,i[a]=[new Ji(t,c),l],s_e(s,l)}}if(r){const s=r.value||r;Jt(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Ji(t,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(am(e))return this;const n={};for(const i in e){const r=e[i];n[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(n),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return _R(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(r),an.priority>=2&&(l=this._logDrawCallStart(2));const u=this.vertexArray.getDrawParams(),{isIndexed:h=u.isIndexed,indexType:f=u.indexType,indexOffset:g=u.indexOffset,vertexArrayInstanced:m=u.isInstanced}=this.props;m&&!this.isInstanced&&an.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:y,instanceCount:b}=this,{onBeforeRender:R=t8,onAfterRender:L=t8}=this.props;R(),this.program.setUniforms(this.uniforms);const ie=this.program.draw(Object.assign(c_e,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:o,isIndexed:h,indexType:f,isInstanced:y,instanceCount:b,offset:h?g:0}));return L(),an.priority>=2&&this._logDrawCallEnd(l,c,i),ie}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:n=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),n&&(s=Object.assign({},s,{35977:n})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return an.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=this.programProps;n=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Jt(n instanceof pG,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Kme(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Ji&&n.delete()}}_setAnimationProps(e){this.animated&&Jt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(am(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new Yz(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),an.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:an.level<=2})(),e}_logDrawCallEnd(e,n,i,r){if(void 0===e)return;const s=function Zme(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=Zz(e,e.elements,null,n));const r=e.values;for(const s in r){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const c=e.accessors[o.location];c&&(a="".concat(s,": ").concat(Qme(o.name,c))),i[a]=Zz(e,r[s],c,n)}}return i}({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:c}=Qz({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:u}=Qz({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});u>0&&an.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&an.log("UNUSED UNIFORMS",Object.keys(a))();const h=function t_e(t){const e={},n="Accessors for ".concat(t.id);for(const i of t.attributeInfos)if(i){const r=e8(i);e["in ".concat(r)]={[n]:JSON.stringify(i.accessor)}}for(const i of t.varyingInfos)if(i){const r=e8(i);e["out ".concat(r)]={[n]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);an.table(e,s)(),an.table(e,o)(),an.table(e+1,h)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),an.groupEnd(2)()}}class LO{static isSupported(e){return ei(e)}constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:i}=this;e&&e.delete(),n&&n.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:n=!0}=e,i=this._updateDrawOptions(e);n&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)e=e||i.swap();Jt(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new ym(n,Object.assign({},e,{fs:e.fs||Xz({version:Kz(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=r.updateModelProps(n);return n}_buildResourceTransforms(e,n){(function l_e(t){return!(am(t.feedbackBuffers)&&am(t.feedbackMap)&&!(t.varyings&&t.varyings.length>0))})(n)&&(this.bufferTransform=new Rme(e,n)),function u_e(t){return!(am(t._sourceTextures)&&!t._targetTexture&&!t._targetTextureVarying)}(n)&&(this.textureTransform=new Hme(e,n)),Jt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)n=Object.assign(n,r.getDrawOptions(n));return n}}const y_e={interpolation:class d_e{constructor({gl:e,attribute:n,timeline:i}){ge(this,"gl",void 0),ge(this,"type","interpolation"),ge(this,"attributeInTransition",void 0),ge(this,"settings",void 0),ge(this,"attribute",void 0),ge(this,"transition",void 0),ge(this,"currentStartIndices",void 0),ge(this,"currentLength",void 0),ge(this,"transform",void 0),ge(this,"buffers",void 0),this.gl=e,this.transition=new T0(i),this.attribute=n,this.attributeInTransition=new PO(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=function f_e(t,e){const n=Gz(e.size);return new LO(t,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}(e,n);const r={byteLength:0,usage:35050};this.buffers=[new Ji(e,r),new Ji(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:s}=this;zz(r);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)Wz({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=NO(s,n),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:r[0],aTo:Hz(0,s)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:i}=this.settings,{time:r}=this.transition;let s=r/n;i&&(s=i(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class p_e{constructor({gl:e,attribute:n,timeline:i}){ge(this,"gl",void 0),ge(this,"type","spring"),ge(this,"attributeInTransition",void 0),ge(this,"settings",void 0),ge(this,"attribute",void 0),ge(this,"transition",void 0),ge(this,"currentStartIndices",void 0),ge(this,"currentLength",void 0),ge(this,"texture",void 0),ge(this,"framebuffer",void 0),ge(this,"transform",void 0),ge(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new T0(i),this.attribute=n,this.attributeInTransition=new PO(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=function m_e(t){return new io(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function __e(t,e){return new As(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function g_e(t,e,n){const i=Gz(e.size);return new LO(t,{framebuffer:n,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,n,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Ji(e,r),new Ji(e,r),new Ji(e,r)]}get inProgress(){return this.transition.inProgress}start(e,n){const{buffers:r,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)Wz({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=NO(s,n),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:Hz(0,s)}})}update(){const{buffers:e,transform:n,framebuffer:i,transition:r}=this;if(!r.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),zz(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),cA(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class v_e{constructor(e,{id:n,timeline:i}){ge(this,"id",void 0),ge(this,"isSupported",void 0),ge(this,"gl",void 0),ge(this,"timeline",void 0),ge(this,"transitions",void 0),ge(this,"needsRedraw",void 0),ge(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=LO.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],o=s.getTransitionSetting(n);o&&this._updateAttribute(r,s,o)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(n))&&this._removeTransition(r)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const i=this.transitions[n];i.inProgress&&(e[n]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){if(!this.isSupported)return void oi.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=y_e[i.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(oi.error("unsupported transition type '".concat(i.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const n8="attributeManager.invalidate";class S_e{constructor(e,{id:n="attribute-manager",stats:i,timeline:r}={}){ge(this,"id",void 0),ge(this,"gl",void 0),ge(this,"attributes",void 0),ge(this,"updateTriggers",void 0),ge(this,"needsRedraw",void 0),ge(this,"userData",void 0),ge(this,"stats",void 0),ge(this,"attributeTransitionManager",void 0),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new v_e(e,{id:"".concat(n,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)void 0!==this.attributes[n]&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const i=this._invalidateTrigger(e,n);Fo(n8,this,e,i)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Fo(n8,this,"all")}update({data:e,numInstances:n,startIndices:i=null,transitions:r,props:s={},buffers:o={},context:a={}}){let c=!1;Fo("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const u=this.attributes[l],h=u.settings.accessor;u.startIndices=i,u.numInstances=n,s[l]&&oi.removed("props.".concat(l),"data.attributes.".concat(l))(),u.setExternalBuffer(o[l])||u.setBinaryValue("string"==typeof h?o[h]:void 0,e.startIndices)||"string"==typeof h&&!o[h]&&u.setConstantValue(s[h])||u.needsUpdate()&&(c=!0,this._updateAttribute({attribute:u,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}c&&Fo("attributeManager.updateEnd",this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=o)}return r}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const i={};for(const r in e)n[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,n={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],n);this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,i){const r={...n,id:e,size:(n.isIndexed?1:n.size)||1,divisor:i.instanced?1:n.divisor||0};return new PO(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(o=>{const a=i[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:i}=e;Fo("attribute.updateStart",n),n.constant?n.setConstantValue(n.value):(n.allocate(i)&&Fo("attribute.allocate",n,i),n.updateBuffer(e)&&(this.needsRedraw=!0,Fo("attribute.updateEnd",n,i)))}}function r8(t,e,n,i,r){const s=e-t;return(n-e)*r+-s*i+s+e}function s8(t,e){if(Array.isArray(t)){let n=0;for(let i=0;i<t.length;i++){const r=t[i]-e[i];n+=r*r}return Math.sqrt(n)}return Math.abs(t-e)}const I_e={interpolation:class C_e extends T0{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:i,duration:r,easing:s}}=this,o=s(e/r);this._value=VE(n,i,o)}},spring:class T_e extends T0{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=function M_e(t,e,n,i,r){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=r8(t[o],e[o],n[o],i,r);return s}return r8(t,e,n,i,r)}(s,o,n,i,r);const c=s8(a,n),l=s8(a,o);c<1e-5&&l<1e-5&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}};class D_e{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,i,r){const{transitions:s}=this;if(s.has(e)){const c=s.get(e),{value:l=c.settings.fromValue}=c;n=l,this.remove(e)}if(!(r=Vz(r)))return;const o=I_e[r.type];if(!o)return void oi.error("unsupported transition type '".concat(r.type,"'"))();const a=new o(this.timeline);a.start({...r,fromValue:n,toValue:i}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,i]of this.transitions)i.update(),e[n]=i.value,i.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function N_e(t,e){if(!t.transitions)return!1;const n={},i=kO(t);let r=!1;for(const s in t.transitions){const o=i[s],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&BO(t[s],e[s],o)&&(n[s]=!0,r=!0)}return!!r&&n}function o8({newProps:t,oldProps:e,ignoreProps:n={},propTypes:i={},triggerName:r="props"}){if(e===t)return!1;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(r,".").concat(s," added");const o=BO(t[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(r,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=BO(t[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}}return!1}function BO(t,e,n){let i=n&&n.equal;return i&&!i(t,e,n)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":i||e===t?null:"changed shallowly"}function L_e(t,e){if(null===e)return!0;const n=e.extensions,{extensions:i}=t;if(i===n)return!1;if(!n||!i||i.length!==n.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(n[r]))return!0;return!1}function a8(t,e,n){let i=t.updateTriggers[n];i=i??{};let r=e.updateTriggers[n];return r=r??{},o8({oldProps:r,newProps:i,triggerName:n})}function kO(t){const e=t[pA],n=e&&e.constructor;return n?n._propTypes:{}}function H_e(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=n.modules.findIndex(r=>"project32"===r.name);i>=0&&n.modules.splice(i,1)}if("inject"in e)if(t.inject){const i={...t.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];n.inject=i}else n.inject=e.inject;return n}function jO(t,e,n=!1){const i=e.projectPosition(t);if(n&&e instanceof qd){const[r,s,o=0]=t,a=e.getDistanceScales([r,s]);i[2]=o*a.unitsPerMeter[2]}return i}function c8(t,{viewport:e,modelMatrix:n,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[o,a,c=0]=t;switch(n&&([o,a,c]=S0([],[o,a,c,1],n)),i){case _i.LNGLAT:return jO([o,a,c],e,s);case _i.LNGLAT_OFFSETS:return jO([o+r[0],a+r[1],c+(r[2]||0)],e,s);case _i.METER_OFFSETS:return jO(qH(r,[o,a,c]),e,s);default:return e.isGeospatial?[o+r[0],a+r[1],c+r[2]]:e.projectPosition([o,a,c])}}const W_e={10241:9987,10240:9729,10242:33071,10243:33071},UO={},X_e={boolean:{validate:(t,e)=>!0,equal:(t,e,n)=>!!t==!!e},number:{validate:(t,e)=>Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)},color:{validate:(t,e)=>e.optional&&!t||q0(t)&&(3===t.length||4===t.length),equal:(t,e,n)=>VO(t,e)},accessor:{validate(t,e){const n=DA(t);return"function"===n||n===DA(e.value)},equal:(t,e,n)=>"function"==typeof e||VO(t,e)},array:{validate:(t,e)=>e.optional&&!t||q0(t),equal:(t,e,n)=>n.compare?VO(t,e):t===e},object:{equal:(t,e,n)=>n.compare?im(t,e):t===e},function:{validate:(t,e)=>e.optional&&!t||"function"==typeof t,equal:(t,e,n)=>!n.compare||t===e},data:{transform:(t,e,n)=>{const{dataTransform:i}=n.props;return i&&t?i(t):t}},image:{transform:(t,e,n)=>function $_e(t,e){const n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof io)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new io(n,{...e,parameters:{...W_e,...i,...t.props.textureParameters}});return UO[r.id]=!0,r}(n,t),release:t=>{!function q_e(t){!t||!(t instanceof io)||UO[t.id]&&(t.delete(),delete UO[t.id])}(t)}}};function VO(t,e){if(t===e)return!0;if(!q0(t)||!q0(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function K_e(t,e){switch(DA(e)){case"object":return $0(t,e);case"array":return $0(t,{type:"array",value:e,compare:!1});case"boolean":return $0(t,{type:"boolean",value:e});case"number":return $0(t,{type:"number",value:e});case"function":return $0(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function $0(t,e){return"type"in e?{name:t,...X_e[e.type],...e}:"value"in e?{name:t,type:DA(e.value),...e}:{name:t,type:"object",value:e}}function q0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function DA(t){return q0(t)?"array":null===t?"null":typeof t}function l8(t){return RA(t,"_mergedDefaultProps")||(function Z_e(t){if(!t.prototype)return;const n=Object.getPrototypeOf(t),i=l8(n),s=function Y_e(t){const e={},n={},i={};for(const[r,s]of Object.entries(t)){const o=s?.deprecatedFor;if(o)i[r]=Array.isArray(o)?o:[o];else{const a=K_e(r,s);e[r]=a,n[r]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:i}}(RA(t,"defaultProps")||{}),o=function Q_e(t,e,n){const i=Object.create(null);Object.assign(i,e,t);const r=function iye(t){const e=RA(t,"layerName")||RA(t,"componentName");return e||oi.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}(n);return delete t.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(s.defaultProps,i,t),a={...n._propTypes,...s.propTypes};!function tye(t,e){const n={},i={};for(const r in e){const s=e[r],{name:o,value:a}=s;s.async&&(n[o]=a,i[o]=nye(o))}t[fm]=n,t[Pf]={},Object.defineProperties(t,i)}(o,a);const c={...n._deprecatedProps,...s.deprecatedProps};(function eye(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(n);for(const s of e[n])u8(this,s)||(this[s]=i);oi.deprecated(r,e[n].join("/"))()}})})(o,c),t._mergedDefaultProps=o,t._propTypes=a,t._deprecatedProps=c}(t),t._mergedDefaultProps)}function nye(t){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||Uz(e)?this[Pf][t]=e:this[zd][t]=e},get(){if(this[zd]){if(t in this[zd])return this[zd][t]||this[fm][t];if(t in this[Pf]){const e=this[pA]&&this[pA].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[fm][t]}}return this[fm][t]}}}function u8(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function RA(t,e){return u8(t,e)&&t[e]}let rye=0;class HO{constructor(...e){ge(this,"id",void 0),ge(this,"props",void 0),ge(this,"count",void 0),this.props=function J_e(t,e){const n=l8(t.constructor),i=Object.create(n);i[pA]=t,i[Pf]={},i[zd]={};for(let r=0;r<e.length;++r){const s=e[r];for(const o in s)i[o]=s[o]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=rye++}clone(e){const{props:n}=this,i={};for(const r in n[fm])r in n[zd]?i[r]=n[zd][r]:r in n[Pf]&&(i[r]=n[Pf][r]);return new this.constructor({...n,...i,...e})}}ge(HO,"componentName","Component"),ge(HO,"defaultProps",{});const sye=Object.freeze({});class oye{constructor(e){ge(this,"component",void 0),ge(this,"onAsyncPropUpdated",void 0),ge(this,"asyncProps",void 0),ge(this,"oldProps",void 0),ge(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||sye}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){const n=e[zd]||{},i=e[Pf]||e,r=e[fm]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in i){const o=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if("string"==typeof n&&(n=this._fetch(e,n)),n instanceof Promise)return void this._watchPromise(e,n);if(Uz(n))return void this._resolveAsyncIterable(e,n);this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const i=this.asyncProps[e];return n!==i.resolvedValue&&n!==i.lastValue&&(i.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(n=this._postProcessValue(i,n),i.resolvedValue=n,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,n,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==n&&(this._freezeAsyncOldProps(),r.resolvedValue=n,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;n.then(s=>{s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r),this._onResolve(e,s)}).catch(s=>{this._onError(e,s)})}}_resolveAsyncIterable(e,n){var i=this;return C(function*(){if("data"!==e)return void i._setPropValue(e,n);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const s=r.pendingLoadCount;let o=[],a=0;var u,c=!1,l=!1;try{for(var f,h=YR(n);c=!(f=yield h.next()).done;c=!1){const g=f.value;{const{dataTransform:m}=i.component.props;o=m?m(g,o):o.concat(g),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,i._setAsyncPropValue(e,o,s)}}}catch(g){l=!0,u=g}finally{try{c&&null!=h.return&&(yield h.return())}finally{if(l)throw u}}i._onResolve(e,o)})()}_postProcessValue(e,n){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(n,i,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class aye extends oye{constructor({attributeManager:e,layer:n}){super(n),ge(this,"attributeManager",void 0),ge(this,"needsRedraw",void 0),ge(this,"needsUpdate",void 0),ge(this,"subLayers",void 0),ge(this,"usesPickingColorCache",void 0),ge(this,"changeFlags",void 0),ge(this,"viewport",void 0),ge(this,"uniformTransitions",void 0),ge(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,n){const i=this.component.props.fetch;return i?i(n,{propName:e,layer:this.layer}):super._fetch(e,n)}_onResolve(e,n){const i=this.component.props.onDataLoad;"data"===e&&i&&i(n,{propName:e,layer:this.layer})}_onError(e,n){this.layer.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const fye=Object.freeze([]),pye=fA(({oldViewport:t,viewport:e})=>t.equals(e));let Dl=new Uint8ClampedArray(0);const gye={data:{type:"data",value:fye,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:o}=n.context;var a;r=r||n.getLoadOptions(),i=i||n.props.loaders,s&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:s}});let c=o.contains(t);return!c&&!r&&(o.add({resourceId:t,data:V0(t,i),persistent:!1}),c=!0),c?o.subscribe({resourceId:t,onChange:l=>{var u;return null===(u=n.internalState)||void 0===u?void 0:u.reloadAsyncProp(e,l)},consumerId:n.id,requestId:e}):V0(t,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:_i.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,100*-t],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Bf extends HO{constructor(...e){super(...e),ge(this,"internalState",null),ge(this,"lifecycle","Awaiting state"),ge(this,"context",void 0),ge(this,"state",void 0),ge(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){no(this.internalState);const n=this.internalState.viewport||this.context.viewport,i=c8(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,s,o]=YH(i,n.pixelProjectionMatrix);return 2===e.length?[r,s]:[r,s,o]}unproject(e){return no(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){return no(this.internalState),function z_e(t,e){const{viewport:n,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function G_e(t){const{viewport:e,modelMatrix:n,coordinateOrigin:i}=t;let{coordinateSystem:r,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return r===_i.DEFAULT&&(r=e.isGeospatial?_i.LNGLAT:_i.CARTESIAN),void 0===s&&(s=r),void 0===o&&(o=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}(e),{geospatialOrigin:c,shaderCoordinateOrigin:l,offsetMode:u}=xG(n,i,r),h=c8(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:u});u&&function Iae(t,e,n){t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2]}(h,h,n.projectPosition(c||l));return h}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===_i.DEFAULT||e===_i.LNGLAT||e===_i.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){no(e instanceof Uint8Array);const[n,i,r]=e;return n+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function j_e(t){if(!function V_e(t){return null!==t&&"object"==typeof t}(t))throw new Error("count(): argument not an object");if("function"==typeof t.count)return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(function U_e(t){return null!==t&&"object"==typeof t&&t.constructor===Object}(t))return Object.keys(t).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const n=this.getAttributeManager();if(!n)return null;const{positions:i,instancePositions:r}=n.attributes;return null===(e=i||r)||void 0===e?void 0:e.getBounds()}getShaders(e){for(const n of this.props.extensions)e=H_e(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&n)if(Array.isArray(i))for(const c of i)n.invalidateAll(c);else n.invalidateAll();const{props:r,oldProps:s}=e,o=Number.isInteger(s.highlightedObjectIndex)||s.pickable,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(o!==a&&n){const{pickingColors:c,instancePickingColors:l}=n.attributes,u=c||l;u&&(a&&u.constant&&(u.constant=!1,n.invalidate(u.id)),!u.value&&!a&&(u.constant=!0,u.value=[0,0,0]))}}finalizeState(e){for(const i of this.getModels())i.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,n){var i,r,s,o;n&&(e.message="".concat(n,": ").concat(e.message)),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(s=this.context)||void 0===s||null===(o=s.onError)||void 0===o||o.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!pye({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&("all"===e?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:n.data,numInstances:i,startIndices:r,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),i=Object.create(this.props);for(const r in n)Object.defineProperty(i,r,{value:n[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const i=Math.floor(Dl.length/3);if(this.internalState.usesPickingColorCache=!0,i<n){n>16777215&&oi.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Dl=x0.allocate(Dl,n,{size:3,copy:!0,maxCount:Math.max(n,16777215)});const r=Math.floor(Dl.length/3),s=[];for(let o=i;o<r;o++)this.encodePickingColor(o,s),Dl[3*o+0]=s[0],Dl[3*o+1]=s[1],Dl[3*o+2]=s[2]}e.value=Dl.subarray(0,3*n)}_setModelAttributes(e,n){const s=this.getAttributeManager().getShaderAttributes(n,e.userData.excludeAttributes||{});e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:i}=this.getAttributeManager().attributes,r=n||i;if(!r)return;const s=r.getVertexOffset(e),o=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,i=e||n;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==Dl.buffer&&(i.value=Dl.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){no(!this.internalState),no(Number.isFinite(this.props.coordinateSystem)),Fo("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new aye({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(oi.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new D_e(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Fo("layer.matched",this,this===e);const{state:n,internalState:i}=e;this!==e&&(this.internalState=i,this.internalState.layer=this,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Fo("layer.update",this,e),!e)return;const n=this.props,i=this.context,r=this.internalState,s=i.viewport,o=this._updateUniformTransition();r.propsInTransition=o,i.viewport=r.viewport||s,this.props=o;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const u of this.props.extensions)u.updateState.call(this,a,u);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=s,this.props=n,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){Fo("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,s=this.context;this.props=this.internalState.propsInTransition||r,n.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(n)||[0,0];Du(s.gl,{polygonOffset:c}),gc(s.gl,i,()=>{const l={moduleParameters:e,uniforms:n,parameters:i,context:s};for(const u of this.props.extensions)u.draw.call(this,l,u);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const r in e)if(e[r]){let s=!1;if("dataChanged"===r){const o=e[r],a=n[r];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0)}n[r]||(n[r]=e[r],s=!0),s&&Fo("layer.changeFlag",this,r,e)}const i=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=i,n.somethingChanged=i||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const i=function O_e(t,e){const n=o8({newProps:t,oldProps:e,propTypes:kO(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function P_e(t,e){if(null===e)return"oldProps is null, initial diff";let n=!1;const{dataComparator:i,_dataDiff:r}=t;return i?i(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&r&&(n=r(t.data,e.data)||n),n}(t,e);let r=!1;return i||(r=function F_e(t,e){if(null===e)return{all:!0};if("all"in t.updateTriggers&&a8(t,e,"all"))return{all:!0};const n={};let i=!1;for(const r in t.updateTriggers)"all"!==r&&a8(t,e,r)&&(n[r]=!0,i=!0);return!!i&&n}(t,e)),{dataChanged:i,propsChanged:n,updateTriggersChanged:r,extensionsChanged:L_e(t,e),transitionsChanged:N_e(t,e)}}(e,n);if(i.updateTriggersChanged)for(const s in i.updateTriggersChanged)i.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(i.transitionsChanged)for(const s in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(s,n[s],e[s],null===(r=e.transitions)||void 0===r?void 0:r[s])}return this.setChangeFlags(i)}validateProps(){!function R_e(t){const e=kO(t);for(const n in e){const i=e[n],{validate:r}=i;if(r&&!r(t[n],i))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(n.pickingHighlightColor=i(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new S_e(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s?.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:c}=i;if(n||r.autoHighlight!==o||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};o||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(n||a!==r.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);return n=n||r,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}ge(Bf,"defaultProps",gye),ge(Bf,"layerName","Layer");class GO extends Bf{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||n}getSubLayerRow(e,n,i){return e.__source={parent:this,object:n,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const n={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(n.index=i.__source.index,e(i.__source.object,n)):e(i,r)}return e}getSubLayerProps(e={}){var n;const{opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:y,extensions:b,fetch:R,operation:L,_subLayerProps:ie}=this.props,q={id:"",updateTriggers:{},opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:h,coordinateOrigin:f,wrapLongitude:g,positionFormat:m,modelMatrix:y,extensions:b,fetch:R,operation:L},Ee=ie&&e.id&&ie[e.id],Re=Ee&&Ee.updateTriggers,tt=e.id||"sublayer";if(Ee){const dt=this.constructor._propTypes,We=e.type?e.type._propTypes:{};for(const ht in Ee){const bt=We[ht]||dt[ht];bt&&"accessor"===bt.type&&(Ee[ht]=this.getSubLayerAccessor(Ee[ht]))}}Object.assign(q,e,Ee),q.id="".concat(this.props.id,"-").concat(tt),q.updateTriggers={all:null===(n=this.props.updateTriggers)||void 0===n?void 0:n.all,...e.updateTriggers,...Re};for(const dt of b){const We=dt.getSubLayerProps.call(this,dt);We&&Object.assign(q,We,{updateTriggers:Object.assign(q.updateTriggers,We.updateTriggers)})}return q}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=IR(this.renderLayers(),Boolean),this.internalState.subLayers=i),Fo("compositeLayer.renderLayers",this,r,i);for(const s of i)s.parent=this}}ge(GO,"layerName","CompositeLayer");const OA={name:"project32",dependencies:[SR],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},_ye={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},NA={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function yye(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_ye;const e={};if(void 0!==t.pickingSelectedColor)if(t.pickingSelectedColor){const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}else e.picking_uSelectedColorValid=0;if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,i=>i/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return void 0!==t.pickingActive&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}},h8={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Xd{static get DRAW_MODE(){return h8}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=_a("geometry"),drawMode:i=h8.TRIANGLES,attributes:r={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,Jt(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(Jt(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let i=1/0;for(const r in e){const s=e[r],{value:o,size:a,constant:c}=s;!c&&o&&a>=1&&(i=Math.min(i,o.length/a))}return Jt(Number.isFinite(i)),i}}const f8=()=>{},p8={10241:9987,10240:9729,10242:33071,10243:33071};function Eye(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Aye(t,e,n,i){return n===e.width&&i===e.height?e:(t.canvas.height=i,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,i),t.canvas)}function X0(t){return t&&(t.id||t.url)}function g8(t,e,n){for(let i=0;i<e.length;i++){const{icon:r,xOffset:s}=e[i];t[X0(r)]={...r,x:s,y:n}}}class Tye{constructor(e,{onUpdate:n=f8,onError:i=f8}){ge(this,"gl",void 0),ge(this,"onUpdate",void 0),ge(this,"onError",void 0),ge(this,"_loadOptions",null),ge(this,"_texture",null),ge(this,"_externalTexture",null),ge(this,"_mapping",{}),ge(this,"_textureParameters",null),ge(this,"_pendingCount",0),ge(this,"_autoPacking",!1),ge(this,"_xOffset",0),ge(this,"_yOffset",0),ge(this,"_rowHeight",0),ge(this,"_buffer",4),ge(this,"_canvasWidth",1024),ge(this,"_canvasHeight",0),ge(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?X0(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:i,iconMapping:r,textureParameters:s}){var o;e&&(this._loadOptions=e),void 0!==n&&(this._autoPacking=n),r&&(this._mapping=r),i&&(null===(o=this._texture)||void 0===o||o.delete(),this._texture=null,this._externalTexture=i),s&&(this._textureParameters=s)}get isLoaded(){return 0===this._pendingCount}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function Mye(t,e,n){if(!t||!e)return null;n=n||{};const i={},{iterable:r,objectInfo:s}=CA(t);for(const o of r){s.index++;const a=e(o,s),c=X0(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!n[c]||a.url!==n[c].url)&&(i[c]={...a,source:o,sourceIndex:s.index})}return i}(e,n,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:s,yOffset:o,rowHeight:a,canvasHeight:c}=function Cye({icons:t,buffer:e,mapping:n={},xOffset:i=0,yOffset:r=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let c=0;c<t.length;c++){const l=t[c];if(!n[X0(l)]){const{height:h,width:f}=l;i+f+e>o&&(g8(n,a,r),i=0,r=s+r+e,s=0,a=[]),a.push({icon:l,xOffset:i}),i=i+f+e,s=Math.max(s,h)}}return a.length>0&&g8(n,a,r),{mapping:n,rowHeight:s,xOffset:i,yOffset:r,canvasWidth:o,canvasHeight:Eye(s+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=s,this._yOffset=o,this._canvasHeight=c,this._texture||(this._texture=new io(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||p8})),this._texture.height!==this._canvasHeight&&(this._texture=function Sye(t,e,n,i){const r=t.width,s=t.height,o=new io(t.gl,{width:e,height:n,parameters:i});return function lde(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=n;let{targetX:a,targetY:c,targetZ:l,width:u,height:h}=n;const{framebuffer:f,deleteFramebuffer:g}=F0(t);Jt(f);const{gl:m,handle:y}=f,b=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const R=m.bindFramebuffer(36160,y);Jt(e);let L=null;if(e instanceof Of&&(L=e,u=Number.isFinite(u)?u:L.width,h=Number.isFinite(h)?h:L.height,L.bind(0),e=L.target),b)switch(e){case 3553:case 34067:m.copyTexSubImage2D(e,s,a,c,i,r,u,h);break;case 35866:case 32879:No(m).copyTexSubImage3D(e,s,a,c,l,i,r,u,h)}else m.copyTexImage2D(e,s,o,i,r,u,h,0);L&&L.unbind(),m.bindFramebuffer(36160,R||null),g&&f.delete()}(t,o,{targetY:0,width:r,height:s}),t.delete(),o}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||p8)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const n=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,V0(i.url,vz,this._loadOptions).then(r=>{const s=X0(i),{x:o,y:a,width:c,height:l}=this._mapping[s],u=Aye(n,r,c,l);this._texture.setSubImageData({data:u,x:o,y:a,width:c,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const m8=[0,0,0,255],Iye={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:m8},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class zO extends Bf{constructor(...e){super(...e),ge(this,"state",void 0)}getShaders(){return super.getShaders({vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  // convert size in meters to pixels, then scaled and clamp\n \n  // project meters to pixels and clamp to limits \n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[OA,NA]})}initializeState(){this.state={iconManager:new Tye(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:m8},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:c,getIcon:l,textureParameters:u}=n,{iconManager:h}=this.state,f=o||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:n.loadOptions,autoPacking:!f,iconAtlas:o,iconMapping:f?a:null,textureParameters:u}),f?i.iconMapping!==n.iconMapping&&s.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&h.packIcons(c,l),r.extensionsChanged){var g;const{gl:m}=this.context;null===(g=this.state.model)||void 0===g||g.delete(),this.state.model=this._getModel(m),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:s,billboard:o,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:eA[s],sizeScale:n,sizeMinPixels:i,sizeMaxPixels:r,billboard:o,alphaCutoff:a}).draw()}_getModel(e){return new ym(e,{...this.getShaders(),id:this.props.id,geometry:new Xd({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const i=null===(n=this.getCurrentLayer())||void 0===n?void 0:n.props.onIconError;i?i(e):oi.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:i,anchorX:r=n/2,anchorY:s=i/2}=this.state.iconManager.getIconMapping(e);return[n/2-r,i/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:i,width:r,height:s}=this.state.iconManager.getIconMapping(e);return[n,i,r,s]}}ge(zO,"defaultProps",Iye),ge(zO,"layerName","IconLayer");const y8=[];class WO extends zO{constructor(...e){super(...e),ge(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n\n    // if enable sdf (signed distance fields)\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n\n    // Take the global opacity and the alpha from color into account for the alpha component\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;let{outlineColor:r}=n;r!==i.outlineColor&&(r=r.map(s=>s/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!n.sdf&&n.outlineWidth&&oi.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:i,outlineWidth:r}=this.props,{outlineColor:s}=this.state;e.uniforms={...e.uniforms,buffer:.75,outlineBuffer:r?Math.max(i,.75*(1-r)):-1,gamma:i,sdf:!!n,outlineColor:s},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):y8}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):y8}}ge(WO,"defaultProps",{getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),ge(WO,"layerName","MultiIconLayer");var Oye=M(7772),Nye=M.n(Oye);const Pye=32,Fye=[];function Lye(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function v8(t,e,n,i){let r=0;for(let o=e;o<n;o++){var s;r+=(null===(s=i[t[o]])||void 0===s?void 0:s.width)||0}return r}function b8(t,e,n,i,r,s){let o=e,a=0;for(let c=e;c<n;c++){const l=v8(t,c,c+1,r);a+l>i&&(o<c&&s.push(c),o=c,a=0),a+=l}return a}function jye(t,e,n,i,r=0,s){void 0===s&&(s=t.length);const o=[];return"break-all"===e?b8(t,r,s,n,i,o):function kye(t,e,n,i,r,s){let o=e,a=e,c=e,l=0;for(let u=e;u<n;u++)if((" "===t[u]||" "===t[u+1]||u+1===n)&&(c=u+1),c>a){let h=v8(t,a,c,r);l+h>i&&(o<a&&(s.push(a),o=a,l=0),h>i&&(h=b8(t,a,c,i,r,s),o=s[s.length-1])),a=c,l+=h}}(t,r,s,n,i,o),o}function Uye(t,e,n,i,r,s){let o=0,a=0;for(let c=e;c<n;c++){const l=t[c],u=i[l];u?(a||(a=u.height),r[c]=o+u.width/2,o+=u.width):(oi.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=o,o+=Pye)}s[0]=o,s[1]=a}function w8(t,e,n,i,r){const s=Array.from(t),o=s.length,a=new Array(o),c=new Array(o),l=new Array(o),u=("break-word"===n||"break-all"===n)&&isFinite(i)&&i>0,h=[0,0],f=[0,0];let g=0,m=0,y=0;for(let b=0;b<=o;b++){const R=s[b];if(("\n"===R||b===o)&&(y=b),y>m){const L=u?jye(s,n,i,r,m,y):Fye;for(let ie=0;ie<=L.length;ie++){const q=0===ie?m:L[ie-1],Ee=ie<L.length?L[ie]:y;Uye(s,q,Ee,r,a,f);for(let Re=q;Re<Ee;Re++)c[Re]=g+f[1]/2,l[Re]=f[0];g+=f[1]*e,h[0]=Math.max(h[0],f[0])}m=y}"\n"===R&&(a[m]=0,c[m]=0,l[m]=0,m++)}return h[1]=g,{x:a,y:c,rowWidth:l,size:h}}class x8{constructor(e=5){ge(this,"limit",void 0),ge(this,"_cache",{}),ge(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}const Y0={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function Hye(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let PA=new x8(3);function Wye(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function C8(t,e,n,i){t.font="".concat(i," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}class qye{constructor(){ge(this,"props",{...Y0}),ge(this,"_key",void 0),ge(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){Object.assign(this.props,e);const n=this._key;this._key=this._getKey();const i=function zye(t,e){let n;n="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=PA.get(t);if(!i)return n;for(const r in i.mapping)n.has(r)&&n.delete(r);return n}(this._key,this.props.characterSet),r=PA.get(this._key);if(r&&0===i.size)return void(this._key!==n&&(this._atlas=r));const s=this._generateFontAtlas(this._key,i,r);this._atlas=s,PA.set(this._key,s)}_generateFontAtlas(e,n,i){const{fontFamily:r,fontWeight:s,fontSize:o,buffer:a,sdf:c,radius:l,cutoff:u}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=1024);const f=h.getContext("2d");C8(f,r,o,s);const{mapping:g,canvasHeight:m,xOffset:y,yOffset:b}=function Bye({characterSet:t,getFontWidth:e,fontHeight:n,buffer:i,maxCanvasWidth:r,mapping:s={},xOffset:o=0,yOffset:a=0}){let c=0,l=o;for(const h of t)if(!s[h]){const f=e(h);l+f+2*i>r&&(l=0,c++),s[h]={x:l+i,y:a+c*(n+2*i)+i,width:f,height:n},l+=f+2*i}const u=n+2*i;return{mapping:s,xOffset:l,yOffset:a+c*u,canvasHeight:Lye(a+(c+1)*u)}}({getFontWidth:R=>f.measureText(R).width,fontHeight:1.2*o,buffer:a,characterSet:n,maxCanvasWidth:1024,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(h.height!==m){const R=f.getImageData(0,0,h.width,h.height);h.height=m,f.putImageData(R,0,0)}if(C8(f,r,o,s),c){const R=new(Nye())(o,a,l,u,r,s),L=f.getImageData(0,0,R.size,R.size);for(const ie of n)Wye(R.draw(ie),L),f.putImageData(L,g[ie].x-a,g[ie].y+a)}else for(const R of n)f.fillText(R,g[R].x,g[R].y+.9*o);return{xOffset:y,yOffset:b,mapping:g,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:i,buffer:r,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(n," ").concat(i," ").concat(r," ").concat(o," ").concat(a):"".concat(e," ").concat(n," ").concat(i," ").concat(r)}}const Kye={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class $O extends Bf{constructor(...e){super(...e),ge(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n\n  // convert size in meters to pixels, then scaled and clamp\n\n  // project meters to pixels and clamp to limits\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[OA,NA]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:i,sizeUnits:r,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!a,padding:c,sizeUnits:eA[r],sizeScale:i,sizeMinPixels:s,sizeMaxPixels:o}).draw()}_getModel(e){return new ym(e,{...this.getShaders(),id:this.props.id,geometry:new Xd({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}ge($O,"defaultProps",Kye),ge($O,"layerName","TextBackgroundLayer");const M8={start:1,middle:0,end:-1},T8={top:1,center:0,bottom:-1},qO=[0,0,0,255],Jye={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:qO},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Y0.characterSet},fontFamily:Y0.fontFamily,fontWeight:Y0.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:qO},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:qO},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class XO extends GO{constructor(...e){super(...e),ge(this,"state",void 0),ge(this,"getBoundingRect",(n,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:u}=this.props,h=s(n,i)||"",{size:[f,g]}=w8(h,c,o,a,r);return[(M8["function"==typeof l?l(n,i):l]-1)*f/2,(T8["function"==typeof u?u(n,i):u]-1)*g/2,f,g]}),ge(this,"getIconOffsets",(n,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:u}=this.props,h=s(n,i)||"",{x:f,y:g,rowWidth:m,size:[y,b]}=w8(h,c,o,a,r),R=M8["function"==typeof l?l(n,i):l],L=T8["function"==typeof u?u(n,i):u],ie=f.length,q=new Array(2*ie);let Ee=0;for(let Re=0;Re<ie;Re++)q[Ee++]=(R-1)*y/2+(1-R)*(y-m[Re])/2+f[Re],q[Ee++]=(L-1)*b/2+g[Re];return q})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new qye}}updateState(e){const{props:n,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==i.lineHeight||n.wordBreak!==i.wordBreak||n.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:n,fontWeight:i};if(!r.mapping)return r.setProps(o),!0;for(const a in o)if(o[a]!==r.props[a])return r.setProps(o),!0;return!1}_updateText(){var e;const{data:n,characterSet:i}=this.props,r=null===(e=n.attributes)||void 0===e?void 0:e.getText;let a,{getText:s}=this.props,o=n.startIndices;const c="auto"===i&&new Set;if(r&&o){const{texts:l,characterCount:u}=function Vye({value:t,length:e,stride:n,offset:i,startIndices:r,characterSet:s}){const o=t.BYTES_PER_ELEMENT,a=n?n/o:1,c=i?i/o:0,l=r[e]||Math.ceil((t.length-c)/a),u=s&&new Set,h=new Array(e);let f=t;if(a>1||c>0){f=new(0,t.constructor)(l);for(let m=0;m<l;m++)f[m]=t[m*a+c]}for(let g=0;g<e;g++){const b=f.subarray(r[g],r[g+1]||l);h[g]=String.fromCodePoint.apply(null,b),u&&b.forEach(u.add,u)}if(u)for(const g of u)s.add(String.fromCodePoint(g));return{texts:h,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:n.length,startIndices:o,characterSet:c});a=u,s=(h,{index:f})=>l[f]}else{const{iterable:l,objectInfo:u}=CA(n);o=[0],a=0;for(const h of l){u.index++;const f=Array.from(s(h,u)||"");c&&f.forEach(c.add,c),a+=f.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:c||i})}renderLayers(){const{startIndices:e,numInstances:n,getText:i,fontAtlasManager:{scale:r,texture:s,mapping:o},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:u,getColor:h,getSize:f,getAngle:g,getPixelOffset:m,getBackgroundColor:y,getBorderColor:b,getBorderWidth:R,backgroundPadding:L,background:ie,billboard:q,fontSettings:Ee,outlineWidth:Re,outlineColor:tt,sizeScale:dt,sizeUnits:We,sizeMinPixels:ht,sizeMaxPixels:bt,transitions:Tt,updateTriggers:pt}=this.props,mt=this.getSubLayerClass("characters",WO),Lt=this.getSubLayerClass("background",$O);return[ie&&new Lt({getFillColor:y,getLineColor:b,getLineWidth:R,padding:L,getPosition:u,getSize:f,getAngle:g,getPixelOffset:m,billboard:q,sizeScale:dt/this.state.fontAtlasManager.props.fontSize,sizeUnits:We,sizeMinPixels:ht,sizeMaxPixels:bt,transitions:Tt&&{getPosition:Tt.getPosition,getAngle:Tt.getAngle,getSize:Tt.getSize,getFillColor:Tt.getBackgroundColor,getLineColor:Tt.getBorderColor,getLineWidth:Tt.getBorderWidth,getPixelOffset:Tt.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:pt.getPosition,getAngle:pt.getAngle,getSize:pt.getSize,getFillColor:pt.getBackgroundColor,getLineColor:pt.getBorderColor,getLineWidth:pt.getBorderWidth,getPixelOffset:pt.getPixelOffset,getBoundingRect:{getText:pt.getText,getTextAnchor:pt.getTextAnchor,getAlignmentBaseline:pt.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new mt({sdf:Ee.sdf,smoothing:Number.isFinite(Ee.smoothing)?Ee.smoothing:Y0.smoothing,outlineWidth:Re,outlineColor:tt,iconAtlas:s,iconMapping:o,getPosition:u,getColor:h,getSize:f,getAngle:g,getPixelOffset:m,billboard:q,sizeScale:dt*r,sizeUnits:We,sizeMinPixels:ht*r,sizeMaxPixels:bt*r,transitions:Tt&&{getPosition:Tt.getPosition,getAngle:Tt.getAngle,getColor:Tt.getColor,getSize:Tt.getSize,getPixelOffset:Tt.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:pt.getText,getPosition:pt.getPosition,getAngle:pt.getAngle,getColor:pt.getColor,getSize:pt.getSize,getPixelOffset:pt.getPixelOffset,getIconOffsets:{getText:pt.getText,getTextAnchor:pt.getTextAnchor,getAlignmentBaseline:pt.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function $ye(t){oi.assert(Number.isFinite(t)&&t>=3,"Invalid cache limit"),PA=new x8(t)}(e)}}ge(XO,"defaultProps",Jye),ge(XO,"layerName","TextLayer");const I8="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Zye={lightSources:{}};function YO(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.map(n=>n*e/255)}const KO={name:"lights",vs:I8,fs:I8,getUniforms:function D8(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zye;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:i}=t.lightSources||{};return e||n&&n.length>0||i&&i.length>0?Object.assign({},function Qye(t){let{ambientLight:e,pointLights:n=[],directionalLights:i=[]}=t;const r={};return r["lighting_uAmbientLight.color"]=e?YO(e):[0,0,0],n.forEach((s,o)=>{r["lighting_uPointLight[".concat(o,"].color")]=YO(s),r["lighting_uPointLight[".concat(o,"].position")]=s.position,r["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),r.lighting_uPointLightCount=n.length,i.forEach((s,o)=>{r["lighting_uDirectionalLight[".concat(o,"].color")]=YO(s),r["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:n,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n)}return D8({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},e0e={};const n0e={name:"phong-lighting",dependencies:[KO],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function O8(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e0e;if(!("material"in t))return{};const{material:e}=t;return e?function t0e(t){const{ambient:e=.35,diffuse:n=.6,shininess:i=32,specularColor:r=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:i,lighting_uSpecularColor:r.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},JO=Math.PI/180,FA=new Float32Array(16),N8=new Float32Array(12);function P8(t,e,n){const i=e[0]*JO,r=e[1]*JO,s=e[2]*JO,o=Math.sin(s),a=Math.sin(i),c=Math.sin(r),l=Math.cos(s),u=Math.cos(i),h=Math.cos(r),f=n[0],g=n[1],m=n[2];t[0]=f*h*u,t[1]=f*c*u,t[2]=f*-a,t[3]=g*(-c*l+h*a*o),t[4]=g*(h*l+c*a*o),t[5]=g*u*o,t[6]=m*(c*o+h*a*l),t[7]=m*(-h*o+c*a*l),t[8]=m*u*l}function F8(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}const L8={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){const{data:i,getOrientation:r,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,u=Array.isArray(s),h=Array.isArray(r),f=Array.isArray(o),g=l||!c&&!!a(i[0]);t.constant=g?l:h&&u&&f;const m=t.value;if(t.constant){let y;g?(FA.set(a),y=F8(FA)):(y=N8,P8(y,r,s),y.set(o,9)),t.value=new Float32Array(y)}else{let y=e*t.size;const{iterable:b,objectInfo:R}=CA(i,e,n);for(const L of b){let ie;R.index++,g?(FA.set(l?a:a(L,R)),ie=F8(FA)):(ie=N8,P8(ie,h?r:r(L,R),u?s:s(L,R)),ie.set(f?o:o(L,R),9)),m[y++]=ie[0],m[y++]=ie[1],m[y++]=ie[2],m[y++]=ie[3],m[y++]=ie[4],m[y++]=ie[5],m[y++]=ie[6],m[y++]=ie[7],m[y++]=ie[8],m[y++]=ie[9],m[y++]=ie[10],m[y++]=ie[11]}}}};function B8(t,e){return e===_i.CARTESIAN||e===_i.METER_OFFSETS||e===_i.DEFAULT&&!t.isGeospatial}function k8(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),oi.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function s0e(t,e){if(t.attributes)return k8(t.attributes,e),t instanceof Xd?t:new Xd(t);if(t.positions||t.POSITION)return k8(t,e),new Xd({attributes:t});throw Error("Invalid mesh")}class ZO extends Bf{constructor(...e){super(...e),ge(this,"state",void 0)}getShaders(){const e=!ei(this.context.gl),n={};return bR(this.context.gl,"GLSL_DERIVATIVES")&&(n.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\nuniform bool composeModelMatrix;\n\n// Primitive attributes\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Outputs to fragment shader\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n\n// NOTE(Tarek): This is necessary because\n// headless.gl reports the extension as\n// available but does not support it in\n// the shader.\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[OA,n0e,NA],transpileToGLSL100:e,defines:n})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:L8}),this.setState({emptyTexture:new io(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:n,oldProps:i,changeFlags:r}=e;if(n.mesh!==i.mesh||r.extensionsChanged){var s;if(null===(s=this.state.model)||void 0===s||s.delete(),n.mesh){this.state.model=this.getModel(n.mesh);const o=n.mesh.attributes||n.mesh;this.setState({hasNormals:!(!o.NORMAL&&!o.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==i.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:n}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:s}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!s||B8(n,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const n=new ym(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:s0e(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return n.setUniforms({sampler:i||r,hasTexture:!!i}),n}setTexture(e){const{emptyTexture:n,model:i}=this.state;i&&i.setUniforms({sampler:e||n,hasTexture:!!e})}}ge(ZO,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}}),ge(ZO,"layerName","SimpleMeshLayer");const j8={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[KO]};class vm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n}=e;this.id=n||_a(this.constructor.name),this.display=!0,this.position=new Oo,this.rotation=new Oo,this.scale=new Oo(1,1,1),this.matrix=new kn,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return Jt(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return Jt(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return Jt(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:n,rotation:i,scale:r,update:s=!0}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),s&&this.updateMatrix(),this}updateMatrix(){const e=this.position,n=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:n,rotation:i,scale:r}=e;return n&&this.setPosition(n),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,n){Jt(e),n=n||this.matrix;const i=new kn(e).multiplyRight(n),r=i.invert(),s=r.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class K0 extends vm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:n=[]}=e;an.assert(n.every(i=>i instanceof vm),"every child must an instance of ScenegraphNode"),super(e),this.children=n}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(const r of n)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const n=this.children,i=n.indexOf(e);return i>-1&&n.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((n,i)=>{let{worldMatrix:r}=i;const s=n.getBounds();if(!s)return;const[o,a]=s,c=new Oo(o).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new Oo(a).subtract(o).divide([2,2,2]);r.transformAsVector(l,l);for(let u=0;u<8;u++){const h=new Oo(1&u?-1:1,2&u?-1:1,4&u?-1:1).multiply(l).add(c);for(let f=0;f<3;f++)e[0][f]=Math.min(e[0][f],h[f]),e[1][f]=Math.max(e[1][f],h[f])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:n=new kn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new kn(n).multiplyRight(this.matrix);for(const r of this.children)r instanceof K0?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let LA;class QO extends RH{static get ZERO(){return LA||(LA=new QO(0,0,0,0),Object.freeze(LA)),LA}constructor(e=0,n=0,i=0,r=0){super(-0,-0,-0,-0),Mu(e)&&1===arguments.length?this.copy(e):(as.debug&&(Qn(e),Qn(n),Qn(i),Qn(r)),this[0]=e,this[1]=n,this[2]=i,this[3]=r)}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return as.debug&&(Qn(e.x),Qn(e.y),Qn(e.z),Qn(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=Qn(e)}get w(){return this[3]}set w(e){this[3]=Qn(e)}transform(e){return RD(this,this,e),this.check()}transformByMatrix3(e){return function Hae(t,e,n){const i=e[0],r=e[1],s=e[2];t[0]=n[0]*i+n[3]*r+n[6]*s,t[1]=n[1]*i+n[4]*r+n[7]*s,t[2]=n[2]*i+n[5]*r+n[8]*s,t[3]=e[3]}(this,this,e),this.check()}transformByMatrix2(e){return function Vae(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2],t[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return FH(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function U8(){var t=new ma(4);return ma!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function V8(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function H8(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],c=n[1],l=n[2],u=n[3];return t[0]=i*u+o*a+r*l-s*c,t[1]=r*u+o*c+s*a-i*l,t[2]=s*u+o*l+i*c-r*a,t[3]=o*u-i*a-r*c-s*l,t}var z8=HH,w0e=function(){var t=OH(),e=NH(1,0,0),n=NH(0,1,0);return function(i,r,s){var o=PH(r,s);return o<-.999999?(zE(t,e,r),function Tae(t){return Math.hypot(t[0],t[1],t[2])}(t)<1e-6&&zE(t,n,r),function Rae(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s}(t,t),V8(i,t,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(zE(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+o,function yce(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}(i,i))}}();U8(),U8(),function a0e(){var t=new ma(9);ma!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const x0e=[0,0,0,1];class e2 extends HE{constructor(e=0,n=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,n,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function G8(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,t[0]=(e[5]-e[7])*(i=.5/i),t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),t[r]=.5*i,t[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),t[s]=(e[3*s+r]+e[3*r+s])*i,t[o]=(e[3*o+r]+e[3*r+o])*i}return t}(this,e),this.check()}fromAxisRotation(e,n){return V8(this,e,n),this.check()}identity(){return function c0e(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Qn(e)}get y(){return this[1]}set y(e){this[1]=Qn(e)}get z(){return this[2]}set z(e){this[2]=Qn(e)}get w(){return this[3]}set w(e){this[3]=Qn(e)}len(){return function mce(t){return Math.hypot(t[0],t[1],t[2],t[3])}(this)}lengthSquared(){return function _ce(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}(this)}dot(e){return function vce(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,e)}rotationTo(e,n){return w0e(this,e,n),this.check()}add(e){return function gce(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3]}(this,this,e),this.check()}calculateW(){return function h0e(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){return function m0e(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function g0e(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=s*a}(this,this),this.check()}lerp(e,n,i){return void 0===i?this.lerp(this,e,n):(function bce(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3];t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t[3]=a+i*(n[3]-a)}(this,e,n,i),this.check())}multiplyRight(e){return H8(this,this,e),this.check()}multiplyLeft(e){return H8(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,0===e&&(this[3]=1),this.check()}rotateX(e){return function l0e(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+o*a,t[1]=r*c+s*a,t[2]=s*c-r*a,t[3]=o*c-i*a}(this,this,e),this.check()}rotateY(e){return function u0e(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c-s*a,t[1]=r*c+o*a,t[2]=s*c+i*a,t[3]=o*c-r*a}(this,this,e),this.check()}rotateZ(e){return function d0e(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+r*a,t[1]=r*c-i*a,t[2]=s*c+o*a,t[3]=o*c-s*a}(this,this,e),this.check()}scale(e){return z8(this,this,e),this.check()}slerp(e,n,i){let r,s,o;switch(arguments.length){case 1:({start:r=x0e,target:s,ratio:o}=e);break;case 2:r=this,s=e,o=n;break;default:r=e,s=n,o=i}return function BA(t,e,n,i){var f,g,m,y,b,r=e[0],s=e[1],o=e[2],a=e[3],c=n[0],l=n[1],u=n[2],h=n[3];return(g=r*c+s*l+o*u+a*h)<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>wl?(f=Math.acos(g),m=Math.sin(f),y=Math.sin((1-i)*f)/m,b=Math.sin(i*f)/m):(y=1-i,b=i),t[0]=y*r+b*c,t[1]=y*s+b*l,t[2]=y*o+b*u,t[3]=y*a+b*h,t}(this,r,s,o),this.check()}transformVector4(e,n=new QO){return function wce(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],c=n[2],l=n[3],u=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,g=-o*i-a*r-c*s;t[0]=u*l+g*-o+h*-c-f*-a,t[1]=h*l+g*-a+f*-o-u*-c,t[2]=f*l+g*-c+u*-a-h*-o,t[3]=e[3]}(n,e,this),GE(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const E0e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},A0e={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function q8(t){if(!t._animation){const e=A0e[t.componentType],n=E0e[t.type],i=n*t.count,{buffer:r,byteOffset:s}=t.bufferView.data,o=new e(r,s+(t.byteOffset||0),i);if(1===n)t._animation=Array.from(o);else{const a=[];for(let c=0;c<o.length;c+=n)a.push(Array.from(o.slice(c,c+n)));t._animation=a}}return t._animation}const S0e=new kn,t2=new e2;class R0e{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:s,target:o,path:a}=r;(function D0e(t,e,n,i){let{input:r,interpolation:s,output:o}=e;const c=t%r[r.length-1],l=r.findIndex(g=>g>=c),u=Math.max(0,l-1);if(!Array.isArray(n[i]))switch(i){case"translation":n[i]=[0,0,0];break;case"rotation":n[i]=[0,0,0,1];break;case"scale":n[i]=[1,1,1];break;default:an.warn("Bad animation path ".concat(i))()}Jt(n[i].length===o[u].length);const h=r[u],f=r[l];switch(s){case"STEP":!function I0e(t,e,n){for(let i=0;i<n.length;i++)t[e][i]=n[i]}(n,i,o[u]);break;case"LINEAR":f>h&&function M0e(t,e,n,i,r){if("rotation"===e){t2.slerp({start:n,target:i,ratio:r});for(let s=0;s<t2.length;s++)t[e][s]=t2[s]}else for(let s=0;s<n.length;s++)t[e][s]=r*i[s]+(1-r)*n[s]}(n,i,o[u],o[l],(c-h)/(f-h));break;case"CUBICSPLINE":f>h&&function T0e(t,e,n){let{p0:i,outTangent0:r,inTangent1:s,p1:o,tDiff:a,ratio:c}=n;for(let l=0;l<t[e].length;l++){const u=r[l]*a,h=s[l]*a;t[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*u+(-2*Math.pow(c,3)+3*Math.pow(c,2))*o[l]+(Math.pow(c,3)-Math.pow(c,2))*h}}(n,i,{p0:o[3*u+1],outTangent0:o[3*u+2],inTangent1:o[3*l+0],p1:o[3*l+1],tDiff:f-h,ratio:(c-h)/(f-h)});break;default:an.warn("Interpolation ".concat(s," not supported"))()}})(i,s,o,a),function C0e(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){const n=S0e.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}(o,o._node)})}}class O0e{constructor(e){this.animations=e.animations.map((n,i)=>{const r=n.name||"Animation-".concat(i),s=n.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:u}=a;return{input:q8(e.accessors[c]),interpolation:l,output:q8(e.accessors[u])}}),o=n.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:s[c],target:e.nodes[l.node],path:l.path}});return new R0e({name:r,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(n=>n.animate(e))}getAnimations(){return this.animations}}class N0e extends vm{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(n),this.onBeforeRender=null,this.AfterRender=null,e instanceof ym?(this.model=e,this._setModelNodeProps(n)):this.model=new ym(e,n),this.bounds=null,this.managedResources=n.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class P0e{constructor(e,n){let{attributes:i,material:r,pbrDebug:s,imageBasedLightingEnvironment:o,lights:a,useTangents:c}=n;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},bR(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),s&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(s,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,n){e&&(this.defines[n]=1)}parseTexture(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const c=new io(this.gl,{id:e.name||e.id,parameters:{...e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...o});this.uniforms[n]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:n=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[n,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:n=1}=e.normalTexture;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:n=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=n}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:n=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=n}else"BLEND"===e.alphaMode&&(an.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function X8(t,e){return ei(t)?"#version 300 es\n".concat(e):e}const k0e={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},j0e={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class U0e{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},j0e,n)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new O0e(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(s=>this.createNode(s));return new K0({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(s=>this.createNode(s));e.mesh&&i.push(this.createMesh(e.mesh));const r=new K0({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const s=(new kn).fromQuaternion(e.rotation);r.matrix.multiplyRight(s)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),r=new K0({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){an.warn("getVertexCount() not found")()}createPrimitive(e,n,i){const r=function B0e(t,e){const{id:n,drawMode:i,vertexCount:r,attributes:s,modelOptions:o}=e,a=new P0e(t,e);an.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(s).map(u=>u.buffer));const l=new N0e(t,{id:n,drawMode:i,vertexCount:r,modules:[j8],parameters:a.parameters,vs:X8(t,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:X8(t,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c,...o,defines:{...a.defines,...o.defines}});return l.setProps({attributes:s}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,n){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),n&&(i.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),an.info(4,"glTF Attributes",{attributes:e,indices:n,generated:i})(),i}createBuffer(e,n){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[n]||(i.lumaBuffers[n]=new Ji(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:n})),i.lumaBuffers[n]}createAccessor(e,n){return new ya({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:k0e[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var J0=M(2435);const z0e="3.2.13",n2={};function kf(t){return r2.apply(this,arguments)}function r2(){return r2=C(function*(t,e=null,n={}){return e&&(t=function W0e(t,e,n){if(t.startsWith("http"))return t;const i=n.modules||{};return i[t]?i[t]:$d?n.CDN?(Sl(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(z0e,"/dist/libs/").concat(t)):HR?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}(t,e,n)),n2[t]=n2[t]||function $0e(t){return s2.apply(this,arguments)}(t),yield n2[t]}),r2.apply(this,arguments)}function s2(){return s2=C(function*(t){if(t.endsWith("wasm"))return yield(yield fetch(t)).arrayBuffer();if(!$d)try{return J0&&J0.requireFromFile&&(yield J0.requireFromFile(t))}catch{return null}return HR?importScripts(t):function q0e(t,e){if(!$d)return J0.requireFromString&&J0.requireFromString(t,e);if(HR)return eval.call(Afe,t),null;const n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}(yield(yield fetch(t)).text(),t)}),s2.apply(this,arguments)}const X0e="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.wasm"),Y0e="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.js");let o2,l2;function K8(t){return a2.apply(this,arguments)}function a2(){return a2=C(function*(t){const e=t.modules||{};return e.basis?e.basis:(o2=o2||function K0e(t){return c2.apply(this,arguments)}(t),yield o2)}),a2.apply(this,arguments)}function c2(){return c2=C(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield kf("basis_transcoder.js","textures",t),yield kf("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,yield function J0e(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:s,initializeBasis:o}=r;o(),i({BasisFile:s})})})}(e,n)}),c2.apply(this,arguments)}function J8(t){return u2.apply(this,arguments)}function u2(){return u2=C(function*(t){const e=t.modules||{};return e.basisEncoder?e.basisEncoder:(l2=l2||function Z0e(t){return d2.apply(this,arguments)}(t),yield l2)}),u2.apply(this,arguments)}function d2(){return d2=C(function*(t){let e=null,n=null;return[e,n]=yield Promise.all([yield kf(Y0e,"textures",t),yield kf(X0e,"textures",t)]),e=e||globalThis.BASIS,yield function Q0e(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t(n).then(r=>{const{BasisFile:s,KTX2File:o,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:s,KTX2File:o,BasisEncoder:c})})})}(e,n)}),d2.apply(this,arguments)}const eve=["","WEBKIT_","MOZ_"],Z8={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let kA=null;var h2,jA,f2,UA,e6,p2,t6,n6;new Uint8Array([0]),function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"}(h2||(h2={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(jA||(jA={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(f2||(f2={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(UA||(UA={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(e6||(e6={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(p2||(p2={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(t6||(t6={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(n6||(n6={}));const za=[171,75,84,88,32,50,48,187,13,10,26,10],ove={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function m2(){return m2=C(function*(t,e){if("auto"===e.basis.containerFormat){if(function sve(t){const e=new Uint8Array(t);return!(e.byteLength<za.length||e[0]!==za[0]||e[1]!==za[1]||e[2]!==za[2]||e[3]!==za[3]||e[4]!==za[4]||e[5]!==za[5]||e[6]!==za[6]||e[7]!==za[7]||e[8]!==za[8]||e[9]!==za[9]||e[10]!==za[10]||e[11]!==za[11])}(t))return s6((yield J8(e)).KTX2File,t,e);const{BasisFile:n}=yield K8(e);return _2(n,t,e)}if("encoder"===e.basis.module){const n=yield J8(e);return"ktx2"===e.basis.containerFormat?s6(n.KTX2File,t,e):_2(n.BasisFile,t,e)}{const{BasisFile:i}=yield K8(e);return _2(i,t,e)}}),m2.apply(this,arguments)}function _2(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),s=[];for(let o=0;o<r;o++){const a=i.getNumLevels(o),c=[];for(let l=0;l<a;l++)c.push(cve(i,o,l,n));s.push(c)}return s}finally{i.close(),i.delete()}}function cve(t,e,n,i){const r=t.getImageWidth(e,n),s=t.getImageHeight(e,n),o=t.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=o6(i,o),u=t.getImageTranscodedSizeInBytes(e,n,l),h=new Uint8Array(u);if(!t.transcodeImage(h,e,n,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:s,data:h,compressed:a,format:c,hasAlpha:o}}function s6(t,e,n){const i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),s=[];for(let o=0;o<r;o++){s.push(lve(i,o,n));break}return[s]}finally{i.close(),i.delete()}}function lve(t,e,n){const{alphaFlag:i,height:r,width:s}=t.getImageLevelInfo(e,0,0),{compressed:o,format:a,basisFormat:c}=o6(n,i),l=t.getImageTranscodedSizeInBytes(e,0,0,c),u=new Uint8Array(l);if(!t.transcodeImage(u,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:r,data:u,compressed:o,hasAlpha:i,format:a}}function o6(t,e){let n=t&&t.basis&&t.basis.format;return"auto"===n&&(n=a6()),"object"==typeof n&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),ove[n]}function a6(){const t=function tve(t){if(!kA){t=t||function nve(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,kA=new Set;for(const e of eve)for(const n in Z8)t&&t.getExtension("".concat(e).concat(n))&&kA.add(Z8[n])}return kA}();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}const uve={name:"Basis",id:"basis",module:"textures",version:"3.2.13",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function ave(t,e){return m2.apply(this,arguments)}};function jf(t,e){if(!t)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const HA=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),c6=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:hve}=(c6&&parseFloat(c6[1]),globalThis),y2=typeof Image<"u",v2=typeof ImageBitmap<"u",b2=!!HA||!!hve;function l6(t){const e=function d6(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&"object"==typeof t&&t.data&&t.width&&t.height?"data":null}(t);if(!e)throw new Error("Not an image");return e}const gve=/^data:image\/svg\+xml/,mve=/\.svg((\?|#).*)?$/;function w2(t){return t&&(gve.test(t)||mve.test(t))}function h6(t,e){if(w2(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function f6(t,e,n){return x2.apply(this,arguments)}function x2(){return x2=C(function*(t,e,n){const i=function _ve(t,e){if(w2(e)){let i=(new TextDecoder).decode(t);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return h6(t,e)}(t,n),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function yve(t,e){return E2.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),x2.apply(this,arguments)}function E2(){return E2=C(function*(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((i,r)=>{try{n.onload=()=>i(n),n.onerror=s=>r(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){r(s)}})}),E2.apply(this,arguments)}const vve={};let p6=!0;function A2(){return A2=C(function*(t,e,n){let i;i=w2(n)?yield f6(t,e,n):h6(t,n);const r=e&&e.imagebitmap;return yield function wve(t){return S2.apply(this,arguments)}(i,r)}),A2.apply(this,arguments)}function S2(){return S2=C(function*(t,e=null){if((function xve(t){for(const e in t||vve)return!1;return!0}(e)||!p6)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),p6=!1}return yield createImageBitmap(t)}),S2.apply(this,arguments)}const Ol=!1,Q0=!0;function C2(t){const e=ev(t);return function Eve(t){const e=ev(t);return e.byteLength>=24&&2303741511===e.getUint32(0,Ol)?{mimeType:"image/png",width:e.getUint32(16,Ol),height:e.getUint32(20,Ol)}:null}(e)||function Cve(t){const e=ev(t);if(!(e.byteLength>=3&&65496===e.getUint16(0,Ol)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function Mve(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Ol);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Ol),width:e.getUint16(s+7,Ol)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,Ol)}return null}(e)||function Ave(t){const e=ev(t);return e.byteLength>=10&&1195984440===e.getUint32(0,Ol)?{mimeType:"image/gif",width:e.getUint16(6,Q0),height:e.getUint16(8,Q0)}:null}(e)||function Sve(t){const e=ev(t);return e.byteLength>=14&&16973===e.getUint16(0,Ol)&&e.getUint32(2,Q0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Q0),height:e.getUint32(22,Q0)}:null}(e)}function ev(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function M2(){return M2=C(function*(t,e){const{mimeType:n}=C2(t)||{},i=globalThis._parseImageNode;return jf(i),yield i(t,n)}),M2.apply(this,arguments)}function T2(){return T2=C(function*(t,e,n){const r=((e=e||{}).image||{}).type||"auto",{url:s}=n||{},o=function Dve(t){switch(t){case"auto":case"data":return function pve(){if(v2)return"imagebitmap";if(y2)return"image";if(b2)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function fve(t){switch(t){case"auto":return v2||y2||b2;case"imagebitmap":return v2;case"image":return y2;case"data":return b2;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}(t),t}}(r);let a;switch(o){case"imagebitmap":a=yield function bve(t,e,n){return A2.apply(this,arguments)}(t,e,s);break;case"image":a=yield f6(t,e,s);break;case"data":a=yield function Tve(t,e){return M2.apply(this,arguments)}(t,e);break;default:jf(!1)}return"data"===r&&(a=function u6(t){switch(l6(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}(a)),a}),T2.apply(this,arguments)}const Rve={id:"image",module:"images",name:"Images",version:"3.2.13",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function Ive(t,e,n){return T2.apply(this,arguments)},tests:[t=>!!C2(new DataView(t))],options:{image:{type:"auto",decode:!0}}};function g6(t,e,n){if(t.byteLength<=e+n)return"";const i=new DataView(t);let r="";for(let s=0;s<n;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function m6(t,e,n){const i=void 0!==n?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(i).buffer}function Wa(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function _6(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return i.substr(0,i.lastIndexOf("/")+1)+t}function tv(t,e){return jf(t>=0),jf(e>0),t+(e-1)&~(e-1)}function Pve(t,e,n){let i;return i=t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer||t.arrayBuffer,t.byteOffset,t.byteLength),e.set(i,n),n+tv(i.byteLength,4)}const v6=["SCALAR","VEC2","VEC3","VEC4"],Fve=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Lve=new Map(Fve),Bve={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},kve={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},jve={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function b6(t){return v6[t-1]||v6[0]}function w6(t){const e=Lve.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function x6(t,e){const n=jve[t.componentType],i=Bve[t.type],s=t.count*i,o=t.count*i*kve[t.componentType];return Wa(o>=0&&o<=e.byteLength),{ArrayType:n,length:s,byteLength:o}}const Uve={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class mc{constructor(e){ge(this,"gltf",void 0),ge(this,"sourceBuffers",void 0),ge(this,"byteLength",void 0),this.gltf=e||{json:{...Uve},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return Wa(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data,{ArrayType:s,length:o}=x6(e,n);return new s(r,n.byteOffset+e.byteOffset,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const n=this.getBufferView(e.bufferView),r=this.getBuffer(n.buffer).data;return new Uint8Array(r,n.byteOffset||0,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,i){return e.extensions=e.extensions||{},e.extensions[n]=i,this.registerUsedExtension(n),this}setObjectExtension(e,n,i){(e.extensions||{})[n]=i}removeObjectExtension(e,n){const i=e.extensions||{},r=i[n];return delete i[n],r}addExtension(e,n={}){return Wa(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e,n={}){return Wa(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){const{meshIndex:n,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:n};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:n,indices:i,material:r,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(n),mode:s}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,n){const i=C2(e),r=n||i?.mimeType,o={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const n=e.byteLength;Wa(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=tv(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,n){const i={bufferView:e,type:b6(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,n={size:3}){const i=this.addBufferView(e);let r={min:n.min,max:n.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,n.size));const s={size:n.size,componentType:w6(e),count:Math.round(e.length/n.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(s,n))}addTexture(e){const{imageIndex:n}=e,i={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,n;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),s=new Uint8Array(r);let o=0;for(const a of this.sourceBuffers||[])o=Pve(a,s,o);null!==(e=this.json)&&void 0!==e&&null!==(n=e.buffers)&&void 0!==n&&n[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,n){let i=!0;for(;i;){const r=e.indexOf(n);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const n={};for(const i in e){const r=e[i],s=this._getGltfAttributeName(i),o=this.addBinaryBuffer(r.value,r);n[s]=o}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){const i={min:null,max:null};if(e.length<n)return i;i.min=[],i.max=[];const r=e.subarray(0,n);for(const s of r)i.min.push(s),i.max.push(s);for(let s=n;s<e.length;s+=n)for(let o=0;o<n;o++)i.min[0+o]=Math.min(i.min[0+o],e[s+o]),i.max[0+o]=Math.max(i.max[0+o],e[s+o]);return i}}const Hve="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",Gve="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",zve=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),Wve=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),E6={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},$ve={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function O2(){return O2=C(function*(t,e,n,i,r,s="NONE"){const o=yield function GA(){return P2.apply(this,arguments)}();!function zA(t,e,n,i,r,s,o){const a=t.exports.sbrk,c=i+3&-4,l=a(c*r),u=a(s.length),h=new Uint8Array(t.exports.memory.buffer);h.set(s,u);const f=e(l,i,r,u,s.length);if(0===f&&o&&o(l,c,r),n.set(h.subarray(l,l+i*r)),a(l-a(0)),0!==f)throw new Error("Malformed buffer data: ".concat(f))}(o,o.exports[$ve[r]],t,e,n,i,o.exports[E6[s||"NONE"]])}),O2.apply(this,arguments)}let N2;function P2(){return P2=C(function*(){return N2||(N2=function Xve(){return F2.apply(this,arguments)}()),N2}),P2.apply(this,arguments)}function F2(){return F2=C(function*(){let t=Hve;WebAssembly.validate(zve)&&(t=Gve,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function Yve(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;++i){const r=t.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let n=0;for(let i=0;i<t.length;++i)e[n++]=e[i]<60?Wve[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,n)}(t),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),F2.apply(this,arguments)}const L2="EXT_meshopt_compression",Kve=L2;function Jve(t,e){return B2.apply(this,arguments)}function B2(){return B2=C(function*(t,e){var n;const i=new mc(t);if(null==e||null===(n=e.gltf)||void 0===n||!n.decompressMeshes)return;const r=[];for(const s of t.json.bufferViews||[])r.push(Zve(i,s));yield Promise.all(r),i.removeExtension(L2)}),B2.apply(this,arguments)}function Zve(t,e){return k2.apply(this,arguments)}function k2(){return k2=C(function*(t,e){const n=t.getObjectExtension(e,L2);if(n){const{byteOffset:i=0,byteLength:r=0,byteStride:s,count:o,mode:a,filter:c="NONE",buffer:l}=n,u=t.gltf.buffers[l],h=new Uint8Array(u.arrayBuffer,u.byteOffset+i,r),f=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function qve(t,e,n,i,r){return O2.apply(this,arguments)}(f,o,s,h,a,c),f}return null}),k2.apply(this,arguments)}const Qve=["image/png","image/jpeg","image/gif"],j2={};const wm="EXT_texture_webp",ibe=wm;function rbe(t,e){const n=new mc(t);if(!function ebe(t){return void 0===j2[t]&&(j2[t]=function tbe(t){switch(t){case"image/webp":return function nbe(){if(!HA)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return HA;default:if(!HA){const{_parseImageNode:e}=globalThis;return!!e&&Qve.includes(t)}return!0}}(t)),j2[t]}("image/webp")){if(n.getRequiredExtensions().includes(wm))throw new Error("gltf: Required extension ".concat(wm," not supported by browser"));return}const{json:i}=n;for(const r of i.textures||[]){const s=n.getObjectExtension(r,wm);s&&(r.source=s.source),n.removeObjectExtension(r,wm)}n.removeExtension(wm)}const WA="KHR_texture_basisu",sbe=WA;function obe(t,e){const n=new mc(t),{json:i}=n;for(const r of i.textures||[]){const s=n.getObjectExtension(r,WA);s&&(r.source=s.source),n.removeObjectExtension(r,WA)}n.removeExtension(WA)}const S6={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:"3.2.13",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class $A{constructor(e,n,i=!1,r=new Map){ge(this,"name",void 0),ge(this,"type",void 0),ge(this,"nullable",void 0),ge(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new $A(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let Ei,C6,M6,T6,I6,D6,R6,O6,N6;!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(Ei||(Ei={}));class _c{static isNull(e){return e&&e.typeId===Ei.Null}static isInt(e){return e&&e.typeId===Ei.Int}static isFloat(e){return e&&e.typeId===Ei.Float}static isBinary(e){return e&&e.typeId===Ei.Binary}static isUtf8(e){return e&&e.typeId===Ei.Utf8}static isBool(e){return e&&e.typeId===Ei.Bool}static isDecimal(e){return e&&e.typeId===Ei.Decimal}static isDate(e){return e&&e.typeId===Ei.Date}static isTime(e){return e&&e.typeId===Ei.Time}static isTimestamp(e){return e&&e.typeId===Ei.Timestamp}static isInterval(e){return e&&e.typeId===Ei.Interval}static isList(e){return e&&e.typeId===Ei.List}static isStruct(e){return e&&e.typeId===Ei.Struct}static isUnion(e){return e&&e.typeId===Ei.Union}static isFixedSizeBinary(e){return e&&e.typeId===Ei.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===Ei.FixedSizeList}static isMap(e){return e&&e.typeId===Ei.Map}static isDictionary(e){return e&&e.typeId===Ei.Dictionary}get typeId(){return Ei.NONE}compareTo(e){return this===e}}Symbol,Symbol,C6=Symbol.toStringTag;class Yd extends _c{constructor(e,n){super(),ge(this,"isSigned",void 0),ge(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return Ei.Int}get[C6](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class cbe extends Yd{constructor(){super(!0,8)}}class lbe extends Yd{constructor(){super(!0,16)}}class ube extends Yd{constructor(){super(!0,32)}}class dbe extends Yd{constructor(){super(!1,8)}}class hbe extends Yd{constructor(){super(!1,16)}}class fbe extends Yd{constructor(){super(!1,32)}}M6=Symbol.toStringTag;class V2 extends _c{constructor(e){super(),ge(this,"precision",void 0),this.precision=e}get typeId(){return Ei.Float}get[M6](){return"Float"}toString(){return"Float".concat(this.precision)}}class pbe extends V2{constructor(){super(32)}}class gbe extends V2{constructor(){super(64)}}Symbol,Symbol,T6=Symbol.toStringTag,I6=Symbol.toStringTag,D6=Symbol.toStringTag,R6=Symbol.toStringTag,O6=Symbol.toStringTag;class mbe extends _c{constructor(e,n){super(),ge(this,"listSize",void 0),ge(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return Ei.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[O6](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}N6=Symbol.toStringTag;class xm{constructor(e,n){ge(this,"fields",void 0),ge(this,"metadata",void 0),function bbe(t,e){if(!t)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function wbe(t){const e={};for(const n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(...e){const n=Object.create(null);for(const r of e)n[r]=!0;const i=this.fields.filter(r=>n[r.name]);return new xm(i,this.metadata)}selectAt(...e){const n=e.map(i=>this.fields[i]).filter(Boolean);return new xm(n,this.metadata)}assign(e){let n,i=this.metadata;if(e instanceof xm){const o=e;n=o.fields,i=k6(k6(new Map,this.metadata),o.metadata)}else n=e;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of n)r[o.name]=o;const s=Object.values(r);return new xm(s,i)}}function k6(t,e){return new Map([...t||new Map,...e||new Map])}function j6(t,e,n){return function B6(t,e,n){const i=function _be(t){switch(t.constructor){case Int8Array:return new cbe;case Uint8Array:return new dbe;case Int16Array:return new lbe;case Uint16Array:return new hbe;case Int32Array:return new ube;case Uint32Array:return new fbe;case Float32Array:return new pbe;case Float64Array:return new gbe;default:throw new Error("array type not supported")}}(e.value),r=n||function vbe(t){const e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}(e);return new $A(t,new mbe(e.size,new $A("value",i)),!1,r)}(t,e,n?U6(n.metadata):void 0)}function U6(t){const e=new Map;for(const n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}const V6={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},Abe={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class Cbe{constructor(e){ge(this,"draco",void 0),ge(this,"decoder",void 0),ge(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,n={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);const r=this.decoder.GetEncodedGeometryType(i),s=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(r){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(i,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(i,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const f="DRACO decompression failed: ".concat(o.error_msg());throw new Error(f)}const a=this._getDracoLoaderData(s,r,n),c=this._getMeshData(s,a,n),l=function abe(t){let e=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;const a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const u=a[l],h=a[l+1],f=a[l+2];e=u<e?u:e,n=h<n?h:n,i=f<i?f:i,r=u>r?u:r,s=h>s?h:s,o=f>o?f:o}return[[e,n,i],[r,s,o]]}(c.attributes),u=function xbe(t,e,n){const i=U6(e.metadata),r=[],s=function Ebe(t){const e={};for(const n in t){const i=t[n];e[i.name||"undefined"]=i}return e}(e.attributes);for(const o in t){const c=j6(o,t[o],s[o]);r.push(c)}if(n){const o=j6("indices",n);r.push(o)}return new xm(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:l},...c,schema:u}}finally{this.draco.destroy(i),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,n,i){const r=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,i);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:s}}_getDracoAttributes(e,n){const i={};for(let r=0;r<e.num_attributes();r++){const s=this.decoder.GetAttribute(e,r),o=this._getAttributeMetadata(e,r);i[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:r,metadata:o};const a=this._getQuantizationTransform(s,n);a&&(i[s.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(s,n);c&&(i[s.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,n,i){const r=this._getMeshAttributes(n,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,n,i){const r={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,i);s.name=o;const{value:a,size:c}=this._getAttributeValues(n,s);r[o]={value:a,size:c,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,s=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,s),new Uint32Array(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),function Ibe(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){const i=Abe[n.data_type],r=n.num_components,o=e.num_points()*r,a=o*i.BYTES_PER_ELEMENT,c=function Mbe(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}(this.draco,i);let l;const u=this.draco._malloc(a);try{const h=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,h,c,a,u),l=new i(this.draco.HEAPF32.buffer,u,o).slice()}finally{this.draco._free(u)}return{value:l,size:r}}_deduceAttributeName(e,n){const i=e.unique_id;for(const[o,a]of Object.entries(n.extraAttributes||{}))if(a===i)return o;const r=e.attribute_type;for(const o in V6)if(this.draco[o]===r)return V6[o];const s=n.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){const i=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const n={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const s=this.metadataQuerier.GetEntryName(e,r);n[s]=this._getDracoMetadataField(e,s)}return n}_getDracoMetadataField(e,n){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,i);const r=function Tbe(t){const e=t.size(),n=new Int32Array(e);for(let i=0;i<e;i++)n[i]=t.GetValue(i);return n}(i);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:n=[],octahedronAttributes:i=[]}=e,r=[...n,...i];for(const s of r)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,n){const{quantizedAttributes:i=[]}=n,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,n){const{octahedronAttributes:i=[]}=n,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}const XA="1.4.1",Dbe="https://www.gstatic.com/draco/versioned/decoders/".concat(XA,"/draco_decoder.js"),Rbe="https://www.gstatic.com/draco/versioned/decoders/".concat(XA,"/draco_wasm_wrapper.js"),Obe="https://www.gstatic.com/draco/versioned/decoders/".concat(XA,"/draco_decoder.wasm");let nv;function z2(){return z2=C(function*(t){const e=t.modules||{};return nv=e.draco3d?nv||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):nv||function Fbe(t){return $2.apply(this,arguments)}(t),yield nv}),z2.apply(this,arguments)}function $2(){return $2=C(function*(t){let e,n;return"js"===(t.draco&&t.draco.decoderType)?e=yield kf(Dbe,"draco",t):[e,n]=yield Promise.all([yield kf(Rbe,"draco",t),yield kf(Obe,"draco",t)]),e=e||globalThis.DracoDecoderModule,yield function Lbe(t,e){const n={};return e&&(n.wasmBinary=e),new Promise(i=>{t({...n,onModuleLoaded:r=>i({draco:r})})})}(e,n)}),$2.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat(XA,"/javascript/draco_encoder.js");const X2={...S6,parse:function kbe(t,e){return Y2.apply(this,arguments)}};function Y2(){return Y2=C(function*(t,e){const{draco:n}=yield function Pbe(t){return z2.apply(this,arguments)}(e),i=new Cbe(n);try{return i.parseSync(t,e?.draco)}finally{i.destroy()}}),Y2.apply(this,arguments)}function H6(t){const{buffer:e,size:n,count:i}=function Ube(t){let e=t,n=1,i=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=function Vbe(t,e,n=!1){return t?Array.isArray(t)?new e(t):!n||t instanceof e?t:new e(t):null}(e,Float32Array)),i=e.length/n),{buffer:e,size:n,count:i}}(t);return{value:e,size:n,byteOffset:0,count:i,type:b6(n),componentType:w6(e)}}const Uf="KHR_draco_mesh_compression",Hbe=Uf;function Gbe(t,e,n){const i=new mc(t);for(const r of G6(i))i.getObjectExtension(r,Uf)}function zbe(t,e,n){return K2.apply(this,arguments)}function K2(){return K2=C(function*(t,e,n){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new mc(t),s=[];for(const o of G6(r))r.getObjectExtension(o,Uf)&&s.push($be(r,o,e,n));yield Promise.all(s),r.removeExtension(Uf)}),K2.apply(this,arguments)}function Wbe(t,e={}){const n=new mc(t);for(const i of n.json.meshes||[])qbe(i),n.addRequiredExtension(Uf)}function $be(t,e,n,i){return J2.apply(this,arguments)}function J2(){return J2=C(function*(t,e,n,i){const r=t.getObjectExtension(e,Uf);if(!r)return;const s=t.getTypedArrayForBufferView(r.bufferView),o=m6(s.buffer,s.byteOffset),{parse:a}=i,c={...n};delete c["3d-tiles"];const l=yield a(o,X2,c,i),u=function jbe(t){const e={};for(const n in t)if("indices"!==n){const r=H6(t[n]);e[n]=r}return e}(l.attributes);for(const[h,f]of Object.entries(u))if(h in e.attributes){const m=t.getAccessor(e.attributes[h]);null!=m&&m.min&&null!=m&&m.max&&(f.min=m.min,f.max=m.max)}e.attributes=u,l.indices&&(e.indices=H6(l.indices)),function Xbe(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),J2.apply(this,arguments)}function qbe(t,e,n=4,i,r){var s;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:t}),a=null==r||null===(s=r.parseSync)||void 0===s?void 0:s.call(r,{attributes:t}),c=i._addFauxAttributes(a.attributes),l=i.addBufferView(o);return{primitives:[{attributes:c,mode:n,extensions:{[Uf]:{bufferView:l,attributes:c}}}]}}function*G6(t){for(const e of t.json.meshes||[])for(const n of e.primitives)yield n}const Vf="KHR_lights_punctual",Ybe=Vf;function Kbe(t){return Z2.apply(this,arguments)}function Z2(){return Z2=C(function*(t){const e=new mc(t),{json:n}=e,i=e.getExtension(Vf);i&&(e.json.lights=i.lights,e.removeExtension(Vf));for(const r of n.nodes||[]){const s=e.getObjectExtension(r,Vf);s&&(r.light=s.light),e.removeObjectExtension(r,Vf)}}),Z2.apply(this,arguments)}function Jbe(t){return Q2.apply(this,arguments)}function Q2(){return Q2=C(function*(t){const e=new mc(t),{json:n}=e;if(n.lights){const i=e.addExtension(Vf);Wa(!i.lights),i.lights=n.lights,delete n.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,Vf,i);delete e.json.lights}}),Q2.apply(this,arguments)}const rv="KHR_materials_unlit",Zbe=rv;function Qbe(t){return eN.apply(this,arguments)}function eN(){return eN=C(function*(t){const e=new mc(t),{json:n}=e;e.removeExtension(rv);for(const i of n.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,rv)}),eN.apply(this,arguments)}function ewe(t){const e=new mc(t),{json:n}=e;if(e.materials)for(const i of n.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,rv,{}),e.addExtension(rv))}const sv="KHR_techniques_webgl",twe=sv;function nwe(t){return tN.apply(this,arguments)}function tN(){return tN=C(function*(t){const e=new mc(t),{json:n}=e,i=e.getExtension(sv);if(i){const r=function rwe(t,e){const{programs:n=[],shaders:i=[],techniques:r=[]}=t,s=new TextDecoder;return i.forEach(o=>{if(!Number.isFinite(o.bufferView))throw new Error("KHR_techniques_webgl: no shader code");o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView))}),n.forEach(o=>{o.fragmentShader=i[o.fragmentShader],o.vertexShader=i[o.vertexShader]}),r.forEach(o=>{o.program=n[o.program]}),r}(i,e);for(const s of n.materials||[]){const o=e.getObjectExtension(s,sv);o&&(s.technique=Object.assign({},o,r[o.technique]),s.technique.values=swe(s.technique,e)),e.removeObjectExtension(s,sv)}e.removeExtension(sv)}}),tN.apply(this,arguments)}function iwe(t,e){return nN.apply(this,arguments)}function nN(){return(nN=C(function*(t,e){})).apply(this,arguments)}function swe(t,e){const n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(i=>{t.uniforms[i].value&&!(i in n)&&(n[i]=t.uniforms[i].value)}),Object.keys(n).forEach(i=>{"object"==typeof n[i]&&void 0!==n[i].index&&(n[i].texture=e.getTexture(n[i].index))}),n}const z6=[ee,A,$,j,W,x,E];function iN(){return iN=C(function*(t,e={},n){const i=z6.filter(s=>W6(s.name,e));for(const s of i){var r;yield null===(r=s.decode)||void 0===r?void 0:r.call(s,t,e,n)}}),iN.apply(this,arguments)}function W6(t,e){var n;const i=(null==e||null===(n=e.gltf)||void 0===n?void 0:n.excludeExtensions)||{};return!(t in i&&!i[t])}const rN="KHR_binary_glTF",$6={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},lwe={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class uwe{constructor(){ge(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),ge(this,"json",void 0)}normalize(e,n){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function cwe(t){const e=new mc(t),{json:n}=e;for(const i of n.images||[]){const r=e.getObjectExtension(i,rN);r&&Object.assign(i,r),e.removeObjectExtension(i,rN)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(rN)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const n in $6)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){const i=e[n];if(i&&!Array.isArray(i)){e[n]=[];for(const r in i){const s=i[r];s.id=s.id||r;const o=e[n].length;e[n].push(s),this.idToIndexMap[n][r]=o}}}_convertObjectIdsToArrayIndices(e){for(const n in $6)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const n of e.textures)this._convertTextureIds(n);for(const n of e.meshes)this._convertMeshIds(n);for(const n of e.nodes)this._convertNodeIds(n);for(const n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const n of e.primitives){const{attributes:i,indices:r,material:s}=n;for(const o in i)i[o]=this._convertIdToIndex(i[o],"accessor");r&&(n.indices=this._convertIdToIndex(r,"accessor")),s&&(n.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);for(const i of e[n])for(const r in i){const o=this._convertIdToIndex(i[r],r);i[r]=o}}_convertIdToIndex(e,n){const i=lwe[n];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return r}return e}_updateObjects(e){for(const n of this.json.buffers)delete n.type}_updateMaterial(e){for(const s of e.materials){var n,i,r;s.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const o=(null===(n=s.values)||void 0===n?void 0:n.tex)||(null===(i=s.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=s.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===o);-1!==a&&(s.pbrMetallicRoughness.baseColorTexture={index:a})}}}const hwe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},fwe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},pwe={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},gwe={10240:9729,10241:9986,10242:10497,10243:10497};class ywe{constructor(){ge(this,"baseUri",""),ge(this,"json",{}),ge(this,"buffers",[]),ge(this,"images",[])}postProcess(e,n={}){const{json:i,buffers:r=[],images:s=[],baseUri:o=""}=e;return Wa(i),this.baseUri=o,this.json=i,this.buffers=r,this.images=s,this._resolveTree(this.json,n),this.json}_resolveTree(e,n={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,n){if("object"==typeof n)return n;const i=this.json[e]&&this.json[e][n];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),i}_resolveScene(e,n){return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,n){return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const s=this.getMesh(r);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,n){return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const s in r)i.attributes[s]=this.getAccessor(r[s]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,n){if(e.id=e.id||"accessor-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function mwe(t){return fwe[t]}(e.componentType),e.components=function _we(t){return hwe[t]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:s}=x6(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(o,o+s);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,o,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,n,i,r,s){const o=new Uint8Array(s*r);for(let a=0;a<s;a++){const c=n+a*i;o.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return o.buffer}_resolveTexture(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):gwe,e.source=this.getImage(e.source),e}_resolveSampler(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return pwe[e]}_resolveImage(e,n){e.id=e.id||"image-".concat(n),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[n];return i&&(e.image=i),e}_resolveBufferView(e,n){const i=e.buffer,r={id:"bufferView-".concat(n),...e,buffer:this.buffers[i]};let o=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(o+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,o,e.byteLength),r}_resolveCamera(e,n){return e.id=e.id||"camera-".concat(n),e}}const q6=1735152710,sN=12,YA=8,bwe=1313821514,wwe=5130562,xwe=0,Ewe=1,Awe=0,Em=!0;function oN(t,e,n,i){const r=new Uint8Array(e.buffer,n,i),o=new TextDecoder("utf8").decode(r);return t.json=JSON.parse(o),tv(i,4)}function aN(t,e,n,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:i,arrayBuffer:e.buffer}),tv(i,4)}function cN(){return cN=C(function*(t,e,n=0,i,r){var s,o,a,c;(function Owe(t,e,n,i){if(i.uri&&(t.baseUri=i.uri),e instanceof ArrayBuffer&&!function Cwe(t,e=0,n={}){const i=new DataView(t),{magic:r=q6}=n,s=i.getUint32(e,!1);return s===r||s===q6}(e,n,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)t.json=function Nve(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function Ove(t,e=5){return"string"==typeof t?t.slice(0,e):ArrayBuffer.isView(t)?g6(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?g6(t,0,e):""}(t),'"'))}}(e);else if(e instanceof ArrayBuffer){const o={};n=function Mwe(t,e,n=0,i={}){const r=new DataView(e),s=function Swe(t,e=0){return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}(r,n+0),o=r.getUint32(n+4,Em),a=r.getUint32(n+8,Em);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),n+=sN,t.version){case 1:return function Twe(t,e,n){jf(t.header.byteLength>sN+YA);const i=e.getUint32(n+0,Em),r=e.getUint32(n+4,Em);return n+=YA,jf(r===Awe),oN(t,e,n,i),(n+=i)+aN(t,e,n,t.header.byteLength)}(t,r,n);case 2:return function Iwe(t,e,n,i){return jf(t.header.byteLength>sN+YA),function Dwe(t,e,n,i){for(;n+8<=t.header.byteLength;){const r=e.getUint32(n+0,Em),s=e.getUint32(n+4,Em);switch(n+=YA,s){case bwe:oN(t,e,n,r);break;case wwe:aN(t,e,n,r);break;case xwe:i.strict||oN(t,e,n,r);break;case Ewe:i.strict||aN(t,e,n,r)}n+=tv(r,4)}}(t,e,n,i),n+t.header.byteLength}(t,r,n,{});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}(o,e,n,i.glb),Wa("glTF"===o.type,"Invalid GLB magic string ".concat(o.type)),t._glb=o,t.json=o.json}else Wa(!1,"GLTF: must be ArrayBuffer or string");if(t.buffers=new Array((t.json.buffers||[]).length).fill(null),t._glb&&t._glb.header.hasBinChunk){const{binChunks:o}=t._glb;t.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}t.images=new Array((t.json.images||[]).length).fill({})})(t,e,n,i),function dwe(t,e={}){(new uwe).normalize(t,e)}(t,{normalize:null==i||null===(s=i.gltf)||void 0===s?void 0:s.normalize}),function owe(t,e={},n){const i=z6.filter(s=>W6(s.name,e));for(const s of i){var r;null===(r=s.preprocess)||void 0===r||r.call(s,t,e,n)}}(t,i,r);const l=[];if(null!=i&&null!==(o=i.gltf)&&void 0!==o&&o.loadBuffers&&t.json.buffers&&(yield function Nwe(t,e,n){return lN.apply(this,arguments)}(t,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const h=function Pwe(t,e,n){return uN.apply(this,arguments)}(t,i,r);l.push(h)}const u=function awe(t){return iN.apply(this,arguments)}(t,i,r);return l.push(u),yield Promise.all(l),null!=i&&null!==(c=i.gltf)&&void 0!==c&&c.postProcess?function vwe(t,e){return(new ywe).postProcess(t,e)}(t,i):t}),cN.apply(this,arguments)}function lN(){return lN=C(function*(t,e,n){const i=t.json.buffers||[];for(let o=0;o<i.length;++o){const a=i[o];if(a.uri){var r,s;const{fetch:c}=n;Wa(c);const l=_6(a.uri,e),u=yield null==n||null===(r=n.fetch)||void 0===r?void 0:r.call(n,l),h=yield null==u||null===(s=u.arrayBuffer)||void 0===s?void 0:s.call(u);t.buffers[o]={arrayBuffer:h,byteOffset:0,byteLength:h.byteLength},delete a.uri}else null===t.buffers[o]&&(t.buffers[o]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),lN.apply(this,arguments)}function uN(){return uN=C(function*(t,e,n){const i=function Fwe(t){const e=new Set,n=t.json.textures||[];for(const i of n)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(t),r=t.json.images||[],s=[];for(const o of i)s.push(Lwe(t,r[o],o,e,n));return yield Promise.all(s)}),uN.apply(this,arguments)}function Lwe(t,e,n,i,r){return dN.apply(this,arguments)}function dN(){return dN=C(function*(t,e,n,i,r){const{fetch:s,parse:o}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=_6(e.uri,i);a=yield(yield s(l)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const l=function y6(t,e,n){const i=t.bufferViews[n];Wa(i);const s=e[i.buffer];return Wa(s),new Uint8Array(s.arrayBuffer,(i.byteOffset||0)+s.byteOffset,i.byteLength)}(t.json,t.buffers,e.bufferView);a=m6(l.buffer,l.byteOffset,l.byteLength)}Wa(a,"glTF image has no data");let c=yield o(a,[Rve,uve],{mimeType:e.mimeType,basis:i.basis||{format:a6()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),t.images=t.images||[],t.images[n]=c}),dN.apply(this,arguments)}const Am={name:"glTF",id:"gltf",module:"gltf",version:"3.2.13",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function Bwe(t){return hN.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function hN(){return hN=C(function*(t,e={},n){(e={...Am.options,...e}).gltf={...Am.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function Rwe(t,e){return cN.apply(this,arguments)}({},t,i,e,n)}),hN.apply(this,arguments)}function fN(){return fN=C(function*(t){const e=[];return t.scenes.forEach(n=>{n.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function jwe(t){return pN.apply(this,arguments)}(()=>e.some(n=>!n.loaded))}),fN.apply(this,arguments)}function pN(){return pN=C(function*(t){for(;t();)yield new Promise(e=>requestAnimationFrame(e))}),pN.apply(this,arguments)}const X6=[255,255,255,255],Hwe={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?"object"==typeof t.scene?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:X6},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Am]};class gN extends Bf{constructor(...e){super(...e),ge(this,"state",void 0)}getShaders(){const e=[OA,NA];return"pbr"===this.props._lighting&&e.push(j8),{vs:"#version 300 es\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Uniforms\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\n\n// Attributes\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\n\n// Varying\nout vec4 vColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\n\n// Main\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    // set PBR data\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n\n// Uniforms\nuniform float opacity;\n\n// Varying\nin vec4 vColor;\n\nout vec4 fragmentColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:X6,transition:!0},instanceModelMatrix:L8})}updateState(e){super.updateState(e);const{props:n,oldProps:i}=e;n.scenegraph!==i.scenegraph?this._updateScenegraph():n._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:n}=this.context;let i=null;if(e.scenegraph instanceof vm)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function V0e(t,e,n){const i=new U0e(t,n);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(n,a,this._getModelOptions());i={gltf:a,...c},function kwe(t){return fN.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(oi.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:n},s=e.getScene(i,r),o=e.getAnimator(i,r);s instanceof vm?(this._deleteScenegraph(),this._applyAllAttributes(s),this._applyAnimationsProp(s,o,e._animations),this.setState({scenegraph:s,animator:o})):null!==s&&oi.warn("invalid scenegraph:",s)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const n=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,n)})}}_applyAnimationsProp(e,n,i){if(!e||!n||!i)return;const r=n.getAnimations();Object.keys(i).sort().forEach(s=>{const o=i[s];if("*"===s)r.forEach(a=>{Object.assign(a,o)});else if(Number.isFinite(Number(s))){const a=Number(s);a>=0&&a<r.length?Object.assign(r[a],o):oi.warn("animation ".concat(s," not found"))()}else{const a=r.find(({name:c})=>c===s);a?Object.assign(a,o):oi.warn("animation ".concat(s," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof vm&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let n=null;return e&&(n="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:n,modelOptions:{isInstanced:!0,transpileToGLSL100:!ei(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(n=>{this._setModelAttributes(n.model,e)})}draw({moduleParameters:e=null,parameters:n={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:s,sizeMinPixels:o,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,u=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:f})=>{h.model.setInstanceCount(u),h.updateModuleSettings(e),h.draw({parameters:n,uniforms:{sizeScale:s,opacity:c,sizeMinPixels:o,sizeMaxPixels:a,composeModelMatrix:B8(r,l),sceneModelMatrix:f,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}}ge(gN,"defaultProps",Hwe),ge(gN,"layerName","ScenegraphLayer");class Gwe extends Xd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=_a("sphere-geometry")}=e,{indices:i,attributes:r}=function zwe(t){const{nlat:e=10,nlong:n=10}=t;let{radius:i=1}=t;const o=Math.PI-0,l=2*Math.PI-0,u=(e+1)*(n+1);if("number"==typeof i){const R=i;i=(L,ie,q,Ee,Re)=>R}const h=new Float32Array(3*u),f=new Float32Array(3*u),g=new Float32Array(2*u),y=new(u>65535?Uint32Array:Uint16Array)(e*n*6);for(let R=0;R<=e;R++)for(let L=0;L<=n;L++){const ie=L/n,q=R/e,Ee=L+R*(n+1),Re=2*Ee,tt=3*Ee,dt=l*ie,We=o*q,ht=Math.sin(dt),bt=Math.cos(dt),Tt=Math.sin(We),mt=bt*Tt,Lt=Math.cos(We),kt=ht*Tt,dn=i(mt,Lt,kt,ie,q);h[tt+0]=dn*mt,h[tt+1]=dn*Lt,h[tt+2]=dn*kt,f[tt+0]=mt,f[tt+1]=Lt,f[tt+2]=kt,g[Re+0]=ie,g[Re+1]=1-q}const b=n+1;for(let R=0;R<n;R++)for(let L=0;L<e;L++){const ie=6*(R*e+L);y[ie+0]=L*b+R,y[ie+1]=L*b+R+1,y[ie+2]=(L+1)*b+R,y[ie+3]=(L+1)*b+R,y[ie+4]=L*b+R+1,y[ie+5]=(L+1)*b+R+1}return{indices:{size:1,value:y},attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:g}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}const Wwe={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class Y6 extends Xd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=_a("truncated-code-geometry")}=e,{indices:i,attributes:r}=function $we(t){const{bottomRadius:e=0,topRadius:n=0,height:i=1,nradial:r=10,nvertical:s=10,verticalAxis:o="y",topCap:a=!1,bottomCap:c=!1}=t,l=(a?2:0)+(c?2:0),u=(r+1)*(s+1+l),h=Math.atan2(e-n,i),f=Math.sin,g=Math.cos,m=Math.PI,y=g(h),b=f(h),R=a?-2:0,L=s+(c?2:0),ie=r+1,q=new Uint16Array(r*(s+l)*6),Ee=Wwe[o],Re=new Float32Array(3*u),tt=new Float32Array(3*u),dt=new Float32Array(2*u);let We=0,ht=0;for(let bt=R;bt<=L;bt++){let mt,Tt=bt/s,pt=i*Tt;bt<0?(pt=0,Tt=1,mt=e):bt>s?(pt=i,Tt=1,mt=n):mt=e+bt/s*(n-e),(-2===bt||bt===s+2)&&(mt=0,Tt=0),pt-=i/2;for(let Lt=0;Lt<ie;Lt++){const kt=f(Lt*m*2/r),dn=g(Lt*m*2/r);Re[We+Ee[0]]=kt*mt,Re[We+Ee[1]]=pt,Re[We+Ee[2]]=dn*mt,tt[We+Ee[0]]=bt<0||bt>s?0:kt*y,tt[We+Ee[1]]=bt<0?-1:bt>s?1:b,tt[We+Ee[2]]=bt<0||bt>s?0:dn*y,dt[ht+0]=Lt/r,dt[ht+1]=Tt,ht+=2,We+=3}}for(let bt=0;bt<s+l;bt++)for(let Tt=0;Tt<r;Tt++){const pt=6*(bt*r+Tt);q[pt+0]=ie*(bt+0)+0+Tt,q[pt+1]=ie*(bt+0)+1+Tt,q[pt+2]=ie*(bt+1)+1+Tt,q[pt+3]=ie*(bt+0)+0+Tt,q[pt+4]=ie*(bt+1)+1+Tt,q[pt+5]=ie*(bt+1)+0+Tt}return{indices:q,attributes:{POSITION:{size:3,value:Re},NORMAL:{size:3,value:tt},TEXCOORD_0:{size:2,value:dt}}}}(e);super({...e,id:n,indices:i,attributes:{...r,...e.attributes}})}}class qwe extends Y6{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=_a("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:n,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class Xwe extends Y6{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=_a("cylinder-geometry"),radius:i=1}=e;super({...e,id:n,bottomRadius:i,topRadius:i})}}const Ywe=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Kwe=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),Jwe=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),Zwe=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),Qwe={POSITION:{size:3,value:new Float32Array(Kwe)},NORMAL:{size:3,value:new Float32Array(Jwe)},TEXCOORD_0:{size:2,value:new Float32Array(Zwe)}};class exe extends Xd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:n=_a("cube-geometry")}=e;super({...e,id:n,indices:{size:1,value:new Uint16Array(Ywe)},attributes:{...Qwe,...e.attributes}})}}function KA(t,e,n){e||(e=new kn(kn.IDENTITY));const i=new kn(kn.IDENTITY);if(!t)return!0;if(t.matrix)i.copy(t.matrix);else{if(i.identity(),t.translation&&i.translate(t.translation),t.rotation){const s=new kn(kn.IDENTITY).fromQuaternion(t.rotation);i.multiplyRight(s)}t.scale&&i.scale(t.scale)}const r=new kn(e).multiplyRight(i);if(!1===n(t,r,e))return!1;for(const s of t.nodes||t.children||[])if(!1===KA(s,r,n))return!1;return!0}function K6(){JG([S6,Am])}function J6(t,e){const n=e.nodes?.find(i=>i.name===t);if(n){let i=!1;for(const r of e.scenes)i||KA(r,new kn(kn.IDENTITY),(s,o)=>s!==n||(s.matrix=o,s.translation=void 0,s.rotation=void 0,s.scale=void 0,i=!0,!1));return e.scene={id:t,name:t,nodes:[n]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function Z6(t,e){return mN.apply(this,arguments)}function mN(){return mN=C(function*(t,e){const n=t.scenegraph;let i;i=e?e[n]||(e[n]=fetch(n).then(s=>s.blob())):fetch(n);const r=yield yA(i,Am,{DracoLoader:X2,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",n,r),J6(t.scenegraphNode,r)}),mN.apply(this,arguments)}function txe(t,e){return _N.apply(this,arguments)}function _N(){return _N=C(function*(t,e){return J6(t,yield e)}),_N.apply(this,arguments)}class Hc{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const n=this.elements;n[0]=e.x,n[4]=e.y,n[8]=e.z}getTrace(e){void 0===e&&(e=new fe);const n=this.elements;return e.x=n[0],e.y=n[4],e.z=n[8],e}vmult(e,n){void 0===n&&(n=new fe);const i=this.elements,r=e.x,s=e.y,o=e.z;return n.x=i[0]*r+i[1]*s+i[2]*o,n.y=i[3]*r+i[4]*s+i[5]*o,n.z=i[6]*r+i[7]*s+i[8]*o,n}smult(e){for(let n=0;n<this.elements.length;n++)this.elements[n]*=e}mmult(e,n){void 0===n&&(n=new Hc);const i=this.elements,r=e.elements,s=n.elements,o=i[0],a=i[1],c=i[2],l=i[3],u=i[4],h=i[5],f=i[6],g=i[7],m=i[8],y=r[0],b=r[1],R=r[2],L=r[3],ie=r[4],q=r[5],Ee=r[6],Re=r[7],tt=r[8];return s[0]=o*y+a*L+c*Ee,s[1]=o*b+a*ie+c*Re,s[2]=o*R+a*q+c*tt,s[3]=l*y+u*L+h*Ee,s[4]=l*b+u*ie+h*Re,s[5]=l*R+u*q+h*tt,s[6]=f*y+g*L+m*Ee,s[7]=f*b+g*ie+m*Re,s[8]=f*R+g*q+m*tt,n}scale(e,n){void 0===n&&(n=new Hc);const i=this.elements,r=n.elements;for(let s=0;3!==s;s++)r[3*s+0]=e.x*i[3*s+0],r[3*s+1]=e.y*i[3*s+1],r[3*s+2]=e.z*i[3*s+2];return n}solve(e,n){void 0===n&&(n=new fe);const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let c=3;const l=c;let u,f;do{if(o=l-c,0===s[o+4*o])for(a=o+1;a<l;a++)if(0!==s[o+4*a]){u=4;do{f=4-u,s[f+4*o]+=s[f+4*a]}while(--u);break}if(0!==s[o+4*o])for(a=o+1;a<l;a++){const g=s[o+4*a]/s[o+4*o];u=4;do{f=4-u,s[f+4*a]=f<=o?0:s[f+4*a]-s[f+4*o]*g}while(--u)}}while(--c);if(n.z=s[11]/s[10],n.y=(s[7]-s[6]*n.z)/s[5],n.x=(s[3]-s[2]*n.z-s[1]*n.y)/s[0],isNaN(n.x)||isNaN(n.y)||isNaN(n.z)||n.x===1/0||n.y===1/0||n.z===1/0)throw`Could not solve equation! Got x=[${n.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return n}e(e,n,i){if(void 0===i)return this.elements[n+3*e];this.elements[n+3*e]=i}copy(e){for(let n=0;n<e.elements.length;n++)this.elements[n]=e.elements[n];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new Hc);const r=nxe;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)r[s+6*o]=this.elements[s+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,h;do{if(s=c-a,0===r[s+6*s])for(o=s+1;o<c;o++)if(0!==r[s+6*o]){l=6;do{h=6-l,r[h+6*s]+=r[h+6*o]}while(--l);break}if(0!==r[s+6*s])for(o=s+1;o<c;o++){const f=r[s+6*o]/r[s+6*s];l=6;do{h=6-l,r[h+6*o]=h<=s?0:r[h+6*o]-r[h+6*s]*f}while(--l)}}while(--a);s=2;do{o=s-1;do{const f=r[s+6*o]/r[s+6*s];l=6;do{h=6-l,r[h+6*o]=r[h+6*o]-r[h+6*s]*f}while(--l)}while(o--)}while(--s);s=2;do{const f=1/r[s+6*s];l=6;do{h=6-l,r[h+6*s]=r[h+6*s]*f}while(--l)}while(s--);s=2;do{o=2;do{if(h=r[3+o+6*s],isNaN(h)||h===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(s,o,h)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const n=e.x,i=e.y,r=e.z,s=e.w,o=n+n,a=i+i,c=r+r,l=n*o,u=n*a,h=n*c,f=i*a,g=i*c,m=r*c,y=s*o,b=s*a,R=s*c,L=this.elements;return L[0]=1-(f+m),L[1]=u-R,L[2]=h+b,L[3]=u+R,L[4]=1-(l+m),L[5]=g-y,L[6]=h-b,L[7]=g+y,L[8]=1-(l+f),this}transpose(e){void 0===e&&(e=new Hc);const n=this.elements,i=e.elements;let r;return i[0]=n[0],i[4]=n[4],i[8]=n[8],r=n[1],i[1]=n[3],i[3]=r,r=n[2],i[2]=n[6],i[6]=r,r=n[5],i[5]=n[7],i[7]=r,e}}const nxe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class fe{constructor(e,n,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=e,this.y=n,this.z=i}cross(e,n){void 0===n&&(n=new fe);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z;return n.x=a*s-c*r,n.y=c*i-o*s,n.z=o*r-a*i,n}set(e,n,i){return this.x=e,this.y=n,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,n){if(!n)return new fe(this.x+e.x,this.y+e.y,this.z+e.z);n.x=e.x+this.x,n.y=e.y+this.y,n.z=e.z+this.z}vsub(e,n){if(!n)return new fe(this.x-e.x,this.y-e.y,this.z-e.z);n.x=this.x-e.x,n.y=this.y-e.y,n.z=this.z-e.z}crossmat(){return new Hc([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,n=this.y,i=this.z,r=Math.sqrt(e*e+n*n+i*i);if(r>0){const s=1/r;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new fe);const n=this.x,i=this.y,r=this.z;let s=Math.sqrt(n*n+i*i+r*r);return s>0?(s=1/s,e.x=n*s,e.y=i*s,e.z=r*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,n=this.y,i=this.z;return Math.sqrt(e*e+n*n+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-n)*(s-n)+(o-i)*(o-i)+(a-r)*(a-r))}distanceSquared(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return(s-n)*(s-n)+(o-i)*(o-i)+(a-r)*(a-r)}scale(e,n){void 0===n&&(n=new fe);const r=this.y,s=this.z;return n.x=e*this.x,n.y=e*r,n.z=e*s,n}vmul(e,n){return void 0===n&&(n=new fe),n.x=e.x*this.x,n.y=e.y*this.y,n.z=e.z*this.z,n}addScaledVector(e,n,i){return void 0===i&&(i=new fe),i.x=this.x+e*n.x,i.y=this.y+e*n.y,i.z=this.z+e*n.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new fe),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,n){const i=this.length();if(i>0){const r=ixe,s=1/i;r.set(this.x*s,this.y*s,this.z*s);const o=rxe;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,e)):(o.set(0,1,0),r.cross(o,e)),r.cross(e,n)}else e.set(1,0,0),n.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,n,i){const r=this.x,s=this.y,o=this.z;i.x=r+(e.x-r)*n,i.y=s+(e.y-s)*n,i.z=o+(e.z-o)*n}almostEquals(e,n){return void 0===n&&(n=1e-6),!(Math.abs(this.x-e.x)>n||Math.abs(this.y-e.y)>n||Math.abs(this.z-e.z)>n)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,n){return this.negate(Q6),Q6.almostEquals(e,n)}clone(){return new fe(this.x,this.y,this.z)}}fe.ZERO=new fe(0,0,0),fe.UNIT_X=new fe(1,0,0),fe.UNIT_Y=new fe(0,1,0),fe.UNIT_Z=new fe(0,0,1);const ixe=new fe,rxe=new fe,Q6=new fe;class ur{constructor(e){void 0===e&&(e={}),this.lowerBound=new fe,this.upperBound=new fe,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,n,i,r){const s=this.lowerBound,o=this.upperBound,a=i;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,e5),l=e5),l.x>o.x&&(o.x=l.x),l.x<s.x&&(s.x=l.x),l.y>o.y&&(o.y=l.y),l.y<s.y&&(s.y=l.y),l.z>o.z&&(o.z=l.z),l.z<s.z&&(s.z=l.z)}return n&&(n.vadd(s,s),n.vadd(o,o)),r&&(s.x-=r,s.y-=r,s.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new ur).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return(r.x<=i.x&&i.x<=s.x||n.x<=s.x&&s.x<=i.x)&&(r.y<=i.y&&i.y<=s.y||n.y<=s.y&&s.y<=i.y)&&(r.z<=i.z&&i.z<=s.z||n.z<=s.z&&s.z<=i.z)}volume(){const e=this.lowerBound,n=this.upperBound;return(n.x-e.x)*(n.y-e.y)*(n.z-e.z)}contains(e){const n=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return n.x<=r.x&&i.x>=s.x&&n.y<=r.y&&i.y>=s.y&&n.z<=r.z&&i.z>=s.z}getCorners(e,n,i,r,s,o,a,c){const l=this.lowerBound,u=this.upperBound;e.copy(l),n.set(u.x,l.y,l.z),i.set(u.x,u.y,l.z),r.set(l.x,u.y,u.z),s.set(u.x,l.y,u.z),o.set(l.x,u.y,l.z),a.set(l.x,l.y,u.z),c.copy(u)}toLocalFrame(e,n){const i=t5;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const g=i[f];e.pointToLocal(g,g)}return n.setFromPoints(i)}toWorldFrame(e,n){const i=t5;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let f=0;8!==f;f++){const g=i[f];e.pointToWorld(g,g)}return n.setFromPoints(i)}overlapsRay(e){const{direction:n,from:i}=e,r=1/n.x,s=1/n.y,o=1/n.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*s,u=(this.upperBound.y-i.y)*s,h=(this.lowerBound.z-i.z)*o,f=(this.upperBound.z-i.z)*o,g=Math.max(Math.max(Math.min(a,c),Math.min(l,u)),Math.min(h,f)),m=Math.min(Math.min(Math.max(a,c),Math.max(l,u)),Math.max(h,f));return!(m<0||g>m)}}const e5=new fe,t5=[new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe];class r5{addEventListener(e,n){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(n)||i[e].push(n),this}hasEventListener(e,n){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(n))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,n){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(n);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}return this}}class Xr{constructor(e,n,i,r){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=n,this.z=i,this.w=r}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,n){const i=Math.sin(.5*n);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*n),this}toAxisAngle(e){void 0===e&&(e=new fe),this.normalize();const n=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,n]}setFromVectors(e,n){if(e.isAntiparallelTo(n)){const i=sxe;e.tangents(i,oxe),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(n);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*n.length()**2)+e.dot(n),this.normalize()}return this}mult(e,n){void 0===n&&(n=new Xr);const i=this.x,r=this.y,s=this.z,o=this.w,a=e.x,c=e.y,l=e.z,u=e.w;return n.x=i*u+o*a+r*l-s*c,n.y=r*u+o*c+s*a-i*l,n.z=s*u+o*l+i*c-r*a,n.w=o*u-i*a-r*c-s*l,n}inverse(e){void 0===e&&(e=new Xr);const n=this.x,i=this.y,r=this.z,s=this.w;this.conjugate(e);const o=1/(n*n+i*i+r*r+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e){return void 0===e&&(e=new Xr),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,n){void 0===n&&(n=new fe);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z,l=this.w,u=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,g=-o*i-a*r-c*s;return n.x=u*l+g*-o+h*-c-f*-a,n.y=h*l+g*-a+f*-o-u*-c,n.z=f*l+g*-c+u*-a-h*-o,n}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,n){let i,r,s;void 0===n&&(n="YZX");const o=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==n)throw new Error(`Euler order ${n} not supported yet.`);{const u=o*a+c*l;if(u>.499&&(i=2*Math.atan2(o,l),r=Math.PI/2,s=0),u<-.499&&(i=-2*Math.atan2(o,l),r=-Math.PI/2,s=0),void 0===i){const h=o*o,g=c*c;i=Math.atan2(2*a*l-2*o*c,1-a*a*2-2*g),r=Math.asin(2*u),s=Math.atan2(2*o*l-2*a*c,1-2*h-2*g)}}e.y=i,e.z=r,e.x=s}setFromEuler(e,n,i,r){void 0===r&&(r="XYZ");const s=Math.cos(e/2),o=Math.cos(n/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(n/2),u=Math.sin(i/2);return"XYZ"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a-c*l*u):"YXZ"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a+c*l*u):"ZXY"===r?(this.x=c*o*a-s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a-c*l*u):"ZYX"===r?(this.x=c*o*a-s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a+c*l*u):"YZX"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a-c*l*u):"XZY"===r&&(this.x=c*o*a-s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a+c*l*u),this}clone(){return new Xr(this.x,this.y,this.z,this.w)}slerp(e,n,i){void 0===i&&(i=new Xr);const r=this.x,s=this.y,o=this.z,a=this.w;let f,g,m,y,b,c=e.x,l=e.y,u=e.z,h=e.w;return g=r*c+s*l+o*u+a*h,g<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>1e-6?(f=Math.acos(g),m=Math.sin(f),y=Math.sin((1-n)*f)/m,b=Math.sin(n*f)/m):(y=1-n,b=n),i.x=y*r+b*c,i.y=y*s+b*l,i.z=y*o+b*u,i.w=y*a+b*h,i}integrate(e,n,i,r){void 0===r&&(r=new Xr);const s=e.x*i.x,o=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,u=this.z,h=this.w,f=.5*n;return r.x+=f*(s*h+o*u-a*l),r.y+=f*(o*h+a*c-s*u),r.z+=f*(a*h+s*l-o*c),r.w+=f*(-s*c-o*l-a*u),r}}const sxe=new fe,oxe=new fe,axe={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let nn=(()=>{class t{constructor(n){void 0===n&&(n={}),this.id=t.idCounter++,this.type=n.type||0,this.boundingSphereRadius=0,this.collisionResponse=!n.collisionResponse||n.collisionResponse,this.collisionFilterGroup=void 0!==n.collisionFilterGroup?n.collisionFilterGroup:1,this.collisionFilterMask=void 0!==n.collisionFilterMask?n.collisionFilterMask:-1,this.material=n.material?n.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(n,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(n,i,r,s){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return t.idCounter=0,t.types=axe,t})();class Ai{constructor(e){void 0===e&&(e={}),this.position=new fe,this.quaternion=new Xr,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,n){return Ai.pointToLocalFrame(this.position,this.quaternion,e,n)}pointToWorld(e,n){return Ai.pointToWorldFrame(this.position,this.quaternion,e,n)}vectorToWorldFrame(e,n){return void 0===n&&(n=new fe),this.quaternion.vmult(e,n),n}static pointToLocalFrame(e,n,i,r){return void 0===r&&(r=new fe),i.vsub(e,r),n.conjugate(s5),s5.vmult(r,r),r}static pointToWorldFrame(e,n,i,r){return void 0===r&&(r=new fe),n.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,n,i){return void 0===i&&(i=new fe),e.vmult(n,i),i}static vectorToLocalFrame(e,n,i,r){return void 0===r&&(r=new fe),n.w*=-1,n.vmult(i,r),n.w*=-1,r}}const s5=new Xr;class Jd extends nn{constructor(e){void 0===e&&(e={});const{vertices:n=[],faces:i=[],normals:r=[],axes:s,boundingSphereRadius:o}=e;super({type:nn.types.CONVEXPOLYHEDRON}),this.vertices=n,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,n=this.vertices,i=this.uniqueEdges;i.length=0;const r=new fe;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let c=0;c!==a;c++){n[o[c]].vsub(n[o[(c+1)%a]],r),r.normalize();let u=!1;for(let h=0;h!==i.length;h++)if(i[h].almostEquals(r)||i[h].almostEquals(r)){u=!0;break}u||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const n=this.faceNormals[e]||new fe;if(this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n,n.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${n.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,n){const i=this.faces[e];Jd.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],n)}static computeNormal(e,n,i,r){const s=new fe,o=new fe;n.vsub(e,o),i.vsub(n,s),s.cross(o,r),r.isZero()||r.normalize()}clipAgainstHull(e,n,i,r,s,o,a,c,l){const u=new fe;let h=-1,f=-Number.MAX_VALUE;for(let m=0;m<i.faces.length;m++){u.copy(i.faceNormals[m]),s.vmult(u,u);const y=u.dot(o);y>f&&(f=y,h=m)}const g=[];for(let m=0;m<i.faces[h].length;m++){const y=i.vertices[i.faces[h][m]],b=new fe;b.copy(y),s.vmult(b,b),r.vadd(b,b),g.push(b)}h>=0&&this.clipFaceAgainstHull(o,e,n,g,a,c,l)}findSeparatingAxis(e,n,i,r,s,o,a,c){const l=new fe,u=new fe,h=new fe,f=new fe,g=new fe,m=new fe;let y=Number.MAX_VALUE;const b=this;if(b.uniqueAxes)for(let R=0;R!==b.uniqueAxes.length;R++){i.vmult(b.uniqueAxes[R],l);const L=b.testSepAxis(l,e,n,i,r,s);if(!1===L)return!1;L<y&&(y=L,o.copy(l))}else{const R=a?a.length:b.faces.length;for(let L=0;L<R;L++){l.copy(b.faceNormals[a?a[L]:L]),i.vmult(l,l);const q=b.testSepAxis(l,e,n,i,r,s);if(!1===q)return!1;q<y&&(y=q,o.copy(l))}}if(e.uniqueAxes)for(let R=0;R!==e.uniqueAxes.length;R++){s.vmult(e.uniqueAxes[R],u);const L=b.testSepAxis(u,e,n,i,r,s);if(!1===L)return!1;L<y&&(y=L,o.copy(u))}else{const R=c?c.length:e.faces.length;for(let L=0;L<R;L++){u.copy(e.faceNormals[c?c[L]:L]),s.vmult(u,u);const q=b.testSepAxis(u,e,n,i,r,s);if(!1===q)return!1;q<y&&(y=q,o.copy(u))}}for(let R=0;R!==b.uniqueEdges.length;R++){i.vmult(b.uniqueEdges[R],f);for(let L=0;L!==e.uniqueEdges.length;L++)if(s.vmult(e.uniqueEdges[L],g),f.cross(g,m),!m.almostZero()){m.normalize();const ie=b.testSepAxis(m,e,n,i,r,s);if(!1===ie)return!1;ie<y&&(y=ie,o.copy(m))}}return r.vsub(n,h),h.dot(o)>0&&o.negate(o),!0}testSepAxis(e,n,i,r,s,o){Jd.project(this,e,i,r,yN),Jd.project(n,e,s,o,vN);const c=yN[0],l=yN[1],u=vN[0],h=vN[1];if(c<h||u<l)return!1;const f=c-h,g=u-l;return f<g?f:g}calculateLocalInertia(e,n){const i=new fe,r=new fe;this.computeLocalAABB(r,i);const s=i.x-r.x,o=i.y-r.y,a=i.z-r.z;n.x=1/12*e*(2*o*2*o+2*a*2*a),n.y=1/12*e*(2*s*2*s+2*a*2*a),n.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,n,i,r,s,o,a){const c=new fe,l=new fe,u=new fe,h=new fe,f=new fe,g=new fe,m=new fe,y=new fe,b=this,L=r,ie=[];let q=-1,Ee=Number.MAX_VALUE;for(let ht=0;ht<b.faces.length;ht++){c.copy(b.faceNormals[ht]),i.vmult(c,c);const bt=c.dot(e);bt<Ee&&(Ee=bt,q=ht)}if(q<0)return;const Re=b.faces[q];Re.connectedFaces=[];for(let ht=0;ht<b.faces.length;ht++)for(let bt=0;bt<b.faces[ht].length;bt++)-1!==Re.indexOf(b.faces[ht][bt])&&ht!==q&&-1===Re.connectedFaces.indexOf(ht)&&Re.connectedFaces.push(ht);const tt=Re.length;for(let ht=0;ht<tt;ht++){const bt=b.vertices[Re[ht]];bt.vsub(b.vertices[Re[(ht+1)%tt]],l),u.copy(l),i.vmult(u,u),n.vadd(u,u),h.copy(this.faceNormals[q]),i.vmult(h,h),n.vadd(h,h),u.cross(h,f),f.negate(f),g.copy(bt),i.vmult(g,g),n.vadd(g,g);const pt=Re.connectedFaces[ht];m.copy(this.faceNormals[pt]);const mt=this.getPlaneConstantOfFace(pt);y.copy(m),i.vmult(y,y);const Lt=mt-y.dot(n);for(this.clipFaceAgainstPlane(L,ie,y,Lt);L.length;)L.shift();for(;ie.length;)L.push(ie.shift())}m.copy(this.faceNormals[q]);const dt=this.getPlaneConstantOfFace(q);y.copy(m),i.vmult(y,y);const We=dt-y.dot(n);for(let ht=0;ht<L.length;ht++){let bt=y.dot(L[ht])+We;bt<=s&&(console.log(`clamped: depth=${bt} to minDist=${s}`),bt=s),bt<=o&&bt<=1e-6&&a.push({point:L[ht],normal:y,depth:bt})}}clipFaceAgainstPlane(e,n,i,r){let s,o;const a=e.length;if(a<2)return n;let c=e[e.length-1],l=e[0];s=i.dot(c)+r;for(let u=0;u<a;u++){if(l=e[u],o=i.dot(l)+r,s<0)if(o<0){const h=new fe;h.copy(l),n.push(h)}else{const h=new fe;c.lerp(l,s/(s-o),h),n.push(h)}else if(o<0){const h=new fe;c.lerp(l,s/(s-o),h),n.push(h),n.push(l)}c=l,s=o}return n}computeWorldVertices(e,n){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new fe);const i=this.vertices,r=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)n.vmult(i[s],r[s]),e.vadd(r[s],r[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,n){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const s=i[r];s.x<e.x?e.x=s.x:s.x>n.x&&(n.x=s.x),s.y<e.y?e.y=s.y:s.y>n.y&&(n.y=s.y),s.z<e.z?e.z=s.z:s.z>n.z&&(n.z=s.z)}}computeWorldFaceNormals(e){const n=this.faceNormals.length;for(;this.worldFaceNormals.length<n;)this.worldFaceNormals.push(new fe);const i=this.faceNormals,r=this.worldFaceNormals;for(let s=0;s!==n;s++)e.vmult(i[s],r[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const n=this.vertices;for(let i=0;i!==n.length;i++){const r=n[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,n,i,r){const s=this.vertices;let o,a,c,l,u,h,f=new fe;for(let g=0;g<s.length;g++)f.copy(s[g]),n.vmult(f,f),e.vadd(f,f),(void 0===o||f.x<o)&&(o=f.x),(void 0===l||f.x>l)&&(l=f.x),(void 0===a||f.y<a)&&(a=f.y),(void 0===u||f.y>u)&&(u=f.y),(void 0===c||f.z<c)&&(c=f.z),(void 0===h||f.z>h)&&(h=f.z);i.set(o,a,c),r.set(l,u,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new fe);const n=this.vertices;for(let i=0;i<n.length;i++)e.vadd(n[i],e);return e.scale(1/n.length,e),e}transformAllPoints(e,n){const i=this.vertices.length,r=this.vertices;if(n){for(let s=0;s<i;s++){const o=r[s];n.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];n.vmult(o,o)}}if(e)for(let s=0;s<i;s++){const o=r[s];o.vadd(e,o)}}pointIsInside(e){const n=this.vertices,i=this.faces,r=this.faceNormals,o=new fe;this.getAveragePointLocal(o);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=n[i[a][0]],u=new fe;e.vsub(l,u);const h=c.dot(u),f=new fe;o.vsub(l,f);const g=c.dot(f);if(h<0&&g>0||h>0&&g<0)return!1}return-1}static project(e,n,i,r,s){const o=e.vertices.length,a=lxe;let c=0,l=0;const u=uxe,h=e.vertices;u.setZero(),Ai.vectorToLocalFrame(i,r,n,a),Ai.pointToLocalFrame(i,r,u,u);const f=u.dot(a);l=c=h[0].dot(a);for(let g=1;g<o;g++){const m=h[g].dot(a);m>c&&(c=m),m<l&&(l=m)}if(l-=f,c-=f,l>c){const g=l;l=c,c=g}s[0]=c,s[1]=l}}const yN=[],vN=[],lxe=(new fe,new fe),uxe=new fe;class JA extends nn{constructor(e){super({type:nn.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,n=this.halfExtents.y,i=this.halfExtents.z,r=fe,s=[new r(-e,-n,-i),new r(e,-n,-i),new r(e,n,-i),new r(-e,n,-i),new r(-e,-n,i),new r(e,-n,i),new r(e,n,i),new r(-e,n,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new Jd({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,n){return void 0===n&&(n=new fe),JA.calculateInertia(this.halfExtents,e,n),n}static calculateInertia(e,n,i){const r=e;i.x=1/12*n*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*n*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*n*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,n){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==n)for(let s=0;s!==i.length;s++)n.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,n,i){const r=this.halfExtents,s=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let o=0;o<s.length;o++)Zd.set(s[o][0],s[o][1],s[o][2]),n.vmult(Zd,Zd),e.vadd(Zd,Zd),i(Zd.x,Zd.y,Zd.z)}calculateWorldAABB(e,n,i,r){const s=this.halfExtents;Nl[0].set(s.x,s.y,s.z),Nl[1].set(-s.x,s.y,s.z),Nl[2].set(-s.x,-s.y,s.z),Nl[3].set(-s.x,-s.y,-s.z),Nl[4].set(s.x,-s.y,-s.z),Nl[5].set(s.x,s.y,-s.z),Nl[6].set(-s.x,s.y,-s.z),Nl[7].set(s.x,-s.y,s.z);const o=Nl[0];n.vmult(o,o),e.vadd(o,o),r.copy(o),i.copy(o);for(let a=1;a<8;a++){const c=Nl[a];n.vmult(c,c),e.vadd(c,c);const l=c.x,u=c.y,h=c.z;l>r.x&&(r.x=l),u>r.y&&(r.y=u),h>r.z&&(r.z=h),l<i.x&&(i.x=l),u<i.y&&(i.y=u),h<i.z&&(i.z=h)}}}const Zd=new fe,Nl=[new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe];class cn extends r5{constructor(e){void 0===e&&(e={}),super(),this.id=cn.idCounter++,this.index=-1,this.world=null,this.vlambda=new fe,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new fe,this.previousPosition=new fe,this.interpolatedPosition=new fe,this.initPosition=new fe,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new fe,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new fe,this.force=new fe;const n="number"==typeof e.mass?e.mass:0;this.mass=n,this.invMass=n>0?1/n:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=n<=0?cn.STATIC:cn.DYNAMIC,typeof e.type==typeof cn.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=cn.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new fe,this.quaternion=new Xr,this.initQuaternion=new Xr,this.previousQuaternion=new Xr,this.interpolatedQuaternion=new Xr,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new fe,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new fe,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new fe,this.invInertia=new fe,this.invInertiaWorld=new Hc,this.invMassSolve=0,this.invInertiaSolve=new fe,this.invInertiaWorldSolve=new Hc,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new fe(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new fe(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new ur,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new fe,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=cn.AWAKE,this.wakeUpAfterNarrowphase=!1,e===cn.SLEEPING&&this.dispatchEvent(cn.wakeupEvent)}sleep(){this.sleepState=cn.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const n=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;n===cn.AWAKE&&i<r?(this.sleepState=cn.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(cn.sleepyEvent)):n===cn.SLEEPY&&i>r?this.wakeUp():n===cn.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(cn.sleepEvent))}}updateSolveMassProperties(){this.sleepState===cn.SLEEPING||this.type===cn.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,n){return void 0===n&&(n=new fe),e.vsub(this.position,n),this.quaternion.conjugate().vmult(n,n),n}vectorToLocalFrame(e,n){return void 0===n&&(n=new fe),this.quaternion.conjugate().vmult(e,n),n}pointToWorldFrame(e,n){return void 0===n&&(n=new fe),this.quaternion.vmult(e,n),n.vadd(this.position,n),n}vectorToWorldFrame(e,n){return void 0===n&&(n=new fe),this.quaternion.vmult(e,n),n}addShape(e,n,i){const r=new fe,s=new Xr;return n&&r.copy(n),i&&s.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const n=this.shapes.indexOf(e);return-1===n?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(n,1),this.shapeOffsets.splice(n,1),this.shapeOrientations.splice(n,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,n=this.shapeOffsets,i=e.length;let r=0;for(let s=0;s!==i;s++){const o=e[s];o.updateBoundingSphereRadius();const a=n[s].length(),c=o.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,n=this.shapeOffsets,i=this.shapeOrientations,r=e.length,s=dxe,o=hxe,a=this.quaternion,c=this.aabb,l=fxe;for(let u=0;u!==r;u++){const h=e[u];a.vmult(n[u],s),s.vadd(this.position,s),a.mult(i[u],o),h.calculateWorldAABB(s,o,l.lowerBound,l.upperBound),0===u?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const n=this.invInertia;if(n.x!==n.y||n.y!==n.z||e){const i=pxe,r=gxe;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(n,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,n){if(void 0===n&&(n=new fe),this.type!==cn.DYNAMIC)return;this.sleepState===cn.SLEEPING&&this.wakeUp();const i=_xe;n.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,n){if(void 0===n&&(n=new fe),this.type!==cn.DYNAMIC)return;const i=yxe,r=vxe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyForce(i,r)}applyTorque(e){this.type===cn.DYNAMIC&&(this.sleepState===cn.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,n){if(void 0===n&&(n=new fe),this.type!==cn.DYNAMIC)return;this.sleepState===cn.SLEEPING&&this.wakeUp();const i=n,r=bxe;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const s=wxe;i.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,n){if(void 0===n&&(n=new fe),this.type!==cn.DYNAMIC)return;const i=xxe,r=Exe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(n,r),this.applyImpulse(i,r)}updateMassProperties(){const e=Axe;this.invMass=this.mass>0?1/this.mass:0;const n=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),JA.calculateInertia(e,this.mass,n),this.invInertia.set(n.x>0&&!i?1/n.x:0,n.y>0&&!i?1/n.y:0,n.z>0&&!i?1/n.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,n){const i=new fe;return e.vsub(this.position,i),this.angularVelocity.cross(i,n),this.velocity.vadd(n,n),n}integrate(e,n,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==cn.DYNAMIC&&this.type!==cn.KINEMATIC||this.sleepState===cn.SLEEPING)return;const r=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,c=this.torque,l=this.quaternion,h=this.invInertiaWorld,f=this.linearFactor,g=this.invMass*e;r.x+=a.x*g*f.x,r.y+=a.y*g*f.y,r.z+=a.z*g*f.z;const m=h.elements,y=this.angularFactor,b=c.x*y.x,R=c.y*y.y,L=c.z*y.z;s.x+=e*(m[0]*b+m[1]*R+m[2]*L),s.y+=e*(m[3]*b+m[4]*R+m[5]*L),s.z+=e*(m[6]*b+m[7]*R+m[8]*L),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),n&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}cn.idCounter=0,cn.COLLIDE_EVENT_NAME="collide",cn.DYNAMIC=1,cn.STATIC=2,cn.KINEMATIC=4,cn.AWAKE=0,cn.SLEEPY=1,cn.SLEEPING=2,cn.wakeupEvent={type:"wakeup"},cn.sleepyEvent={type:"sleepy"},cn.sleepEvent={type:"sleep"};const dxe=new fe,hxe=new Xr,fxe=new ur,pxe=new Hc,gxe=new Hc,_xe=(new Hc,new fe),yxe=new fe,vxe=new fe,bxe=new fe,wxe=new fe,xxe=new fe,Exe=new fe,Axe=new fe;new fe,new fe,new Xr,new fe,new fe,new fe,new fe;class ov{constructor(){this.rayFromWorld=new fe,this.rayToWorld=new fe,this.hitNormalWorld=new fe,this.hitPointWorld=new fe,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,n,i,r,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(n),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=s,this.body=o,this.distance=a}}let o5,a5,c5,l5,u5,d5,h5;o5=nn.types.SPHERE,a5=nn.types.PLANE,c5=nn.types.BOX,l5=nn.types.CYLINDER,u5=nn.types.CONVEXPOLYHEDRON,d5=nn.types.HEIGHTFIELD,h5=nn.types.TRIMESH;class Ss{get[o5](){return this._intersectSphere}get[a5](){return this._intersectPlane}get[c5](){return this._intersectBox}get[l5](){return this._intersectConvex}get[u5](){return this._intersectConvex}get[d5](){return this._intersectHeightfield}get[h5](){return this._intersectTrimesh}constructor(e,n){void 0===e&&(e=new fe),void 0===n&&(n=new fe),this.from=e.clone(),this.to=n.clone(),this.direction=new fe,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Ss.ANY,this.result=new ov,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,n){return this.mode=n.mode||Ss.ANY,this.result=n.result||new ov,this.skipBackfaces=!!n.skipBackfaces,this.collisionFilterMask=typeof n.collisionFilterMask<"u"?n.collisionFilterMask:-1,this.collisionFilterGroup=typeof n.collisionFilterGroup<"u"?n.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof n.checkCollisionResponse<"u")||n.checkCollisionResponse,n.from&&this.from.copy(n.from),n.to&&this.to.copy(n.to),this.callback=n.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(f5),AN.length=0,e.broadphase.aabbQuery(e,f5,AN),this.intersectBodies(AN),this.hasHit}intersectBody(e,n){n&&(this.result=n,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=Rxe,s=Oxe;for(let o=0,a=e.shapes.length;o<a;o++){const c=e.shapes[o];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(c,s,r,e),this.result.shouldStop))break}}intersectBodies(e,n){n&&(this.result=n,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,n,i,r){if(function Xxe(t,e,n){n.vsub(t,Hf);const i=Hf.dot(e);return e.scale(i,QA),QA.vadd(t,QA),n.distanceTo(QA)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,n,i,r,e)}_intersectBox(e,n,i,r,s){return this._intersectConvex(e.convexPolyhedronRepresentation,n,i,r,s)}_intersectPlane(e,n,i,r,s){const o=this.from,a=this.to,c=this.direction,l=new fe(0,0,1);n.vmult(l,l);const u=new fe;o.vsub(i,u);const h=u.dot(l);if(a.vsub(i,u),h*u.dot(l)>0||o.distanceTo(a)<h)return;const g=l.dot(c);if(Math.abs(g)<this.precision)return;const m=new fe,y=new fe,b=new fe;o.vsub(i,m);const R=-l.dot(m)/g;c.scale(R,y),o.vadd(y,b),this.reportIntersection(l,b,s,r,-1)}getAABB(e){const{lowerBound:n,upperBound:i}=e,r=this.to,s=this.from;n.x=Math.min(r.x,s.x),n.y=Math.min(r.y,s.y),n.z=Math.min(r.z,s.z),i.x=Math.max(r.x,s.x),i.y=Math.max(r.y,s.y),i.z=Math.max(r.z,s.z)}_intersectHeightfield(e,n,i,r,s){const o=Nxe;o.from.copy(this.from),o.to.copy(this.to),Ai.pointToLocalFrame(i,n,o.from,o.from),Ai.pointToLocalFrame(i,n,o.to,o.to),o.updateDirection();const a=Pxe;let c,l,u,h;c=l=0,u=h=e.data.length-1;const f=new ur;o.getAABB(f),e.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(f.upperBound.x,f.upperBound.y,a,!0),u=Math.min(u,a[0]+1),h=Math.min(h,a[1]+1);for(let g=c;g<u;g++)for(let m=l;m<h;m++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(g,m,f),f.overlapsRay(o)){if(e.getConvexTrianglePillar(g,m,!1),Ai.pointToWorldFrame(i,n,e.pillarOffset,ZA),this._intersectConvex(e.pillarConvex,n,ZA,r,s,p5),this.result.shouldStop)return;e.getConvexTrianglePillar(g,m,!0),Ai.pointToWorldFrame(i,n,e.pillarOffset,ZA),this._intersectConvex(e.pillarConvex,n,ZA,r,s,p5)}}}_intersectSphere(e,n,i,r,s){const o=this.from,a=this.to,l=(a.x-o.x)**2+(a.y-o.y)**2+(a.z-o.z)**2,u=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),f=u**2-4*l*((o.x-i.x)**2+(o.y-i.y)**2+(o.z-i.z)**2-e.radius**2),g=Fxe,m=Lxe;if(!(f<0))if(0===f)o.lerp(a,f,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1);else{const y=(-u-Math.sqrt(f))/(2*l),b=(-u+Math.sqrt(f))/(2*l);if(y>=0&&y<=1&&(o.lerp(a,y,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1)),this.result.shouldStop)return;b>=0&&b<=1&&(o.lerp(a,b,g),g.vsub(i,m),m.normalize(),this.reportIntersection(m,g,s,r,-1))}}_intersectConvex(e,n,i,r,s,o){const a=Bxe,c=g5,l=o&&o.faceList||null,u=e.faces,h=e.vertices,f=e.faceNormals,g=this.direction,m=this.from,b=m.distanceTo(this.to),R=l?l.length:u.length,L=this.result;for(let ie=0;!L.shouldStop&&ie<R;ie++){const q=l?l[ie]:ie,Ee=u[q],Re=f[q],tt=n,dt=i;c.copy(h[Ee[0]]),tt.vmult(c,c),c.vadd(dt,c),c.vsub(m,c),tt.vmult(Re,a);const We=g.dot(a);if(Math.abs(We)<this.precision)continue;const ht=a.dot(c)/We;if(!(ht<0)){g.scale(ht,va),va.vadd(m,va),Gc.copy(h[Ee[0]]),tt.vmult(Gc,Gc),dt.vadd(Gc,Gc);for(let bt=1;!L.shouldStop&&bt<Ee.length-1;bt++){Pl.copy(h[Ee[bt]]),Fl.copy(h[Ee[bt+1]]),tt.vmult(Pl,Pl),tt.vmult(Fl,Fl),dt.vadd(Pl,Pl),dt.vadd(Fl,Fl);const Tt=va.distanceTo(m);!Ss.pointInTriangle(va,Gc,Pl,Fl)&&!Ss.pointInTriangle(va,Pl,Gc,Fl)||Tt>b||this.reportIntersection(a,va,s,r,q)}}}}_intersectTrimesh(e,n,i,r,s,o){const a=Uxe,c=$xe,l=qxe,u=g5,h=Vxe,f=Hxe,g=Gxe,m=Wxe,y=zxe,b=e.indices,R=this.from,L=this.to,ie=this.direction;l.position.copy(i),l.quaternion.copy(n),Ai.vectorToLocalFrame(i,n,ie,h),Ai.pointToLocalFrame(i,n,R,f),Ai.pointToLocalFrame(i,n,L,g),g.x*=e.scale.x,g.y*=e.scale.y,g.z*=e.scale.z,f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,g.vsub(f,h),h.normalize();const q=f.distanceSquared(g);e.tree.rayQuery(this,l,c);for(let Ee=0,Re=c.length;!this.result.shouldStop&&Ee!==Re;Ee++){const tt=c[Ee];e.getNormal(tt,a),e.getVertex(b[3*tt],Gc),Gc.vsub(f,u);const dt=h.dot(a),We=a.dot(u)/dt;if(We<0)continue;h.scale(We,va),va.vadd(f,va),e.getVertex(b[3*tt+1],Pl),e.getVertex(b[3*tt+2],Fl);const ht=va.distanceSquared(f);!Ss.pointInTriangle(va,Pl,Gc,Fl)&&!Ss.pointInTriangle(va,Gc,Pl,Fl)||ht>q||(Ai.vectorToWorldFrame(n,a,y),Ai.pointToWorldFrame(i,n,va,m),this.reportIntersection(y,m,s,r,tt))}c.length=0}reportIntersection(e,n,i,r,s){const o=this.from,a=this.to,c=o.distanceTo(n),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof s<"u"?s:-1,this.mode){case Ss.ALL:this.hasHit=!0,l.set(o,a,e,n,i,r,c),l.hasHit=!0,this.callback(l);break;case Ss.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,n,i,r,c));break;case Ss.ANY:this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,n,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,n,i,r){r.vsub(n,Hf),i.vsub(n,av),e.vsub(n,SN);const s=Hf.dot(Hf),o=Hf.dot(av),a=Hf.dot(SN),c=av.dot(av),l=av.dot(SN);let u,h;return(u=c*a-o*l)>=0&&(h=s*l-o*a)>=0&&u+h<s*c-o*o}}Ss.CLOSEST=1,Ss.ANY=2,Ss.ALL=4;const f5=new ur,AN=[],av=new fe,SN=new fe,Rxe=new fe,Oxe=new Xr,va=new fe,Gc=new fe,Pl=new fe,Fl=new fe;new fe,new ov;const p5={faceList:[0]},ZA=new fe,Nxe=new Ss,Pxe=[],Fxe=new fe,Lxe=new fe,Bxe=new fe,g5=(new fe,new fe,new fe),Uxe=new fe,Vxe=new fe,Hxe=new fe,Gxe=new fe,zxe=new fe,Wxe=new fe;new ur;const $xe=[],qxe=new Ai,Hf=new fe,QA=new fe;new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new Ss,new fe,new fe,new fe,new fe(1,0,0),new fe(0,1,0),new fe(0,0,1),new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new ur,new fe,new ur,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new ur,new fe,new Ai,new ur,new fe,new fe,new fe,new fe,new fe,new Xr,new Xr,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new ur,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new Xr,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new fe,new ur,new Ss;const js=globalThis.performance||{};if(!js.now){let t=Date.now();js.timing&&js.timing.navigationStart&&(t=js.timing.navigationStart),js.now=()=>Date.now()-t}function DN(){return DN=C(function*(t){console.log("Starting Collisioning");const e=t.filter(o=>!o.scenegraph&&"wireframe"!==o.geometry).map(o=>{const a=new kn(o.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new ur({lowerBound:new fe(...c.map((u,h)=>Math.min(u,l[h]))),upperBound:new fe(...l.map((u,h)=>Math.max(u,c[h])))})}}),n=[];for(const o of t.filter(a=>!!a.scenegraph)){const a=yield V0(o.scenegraph,Am,{DracoLoader:X2,decompress:!0,postProcess:!0});for(const c of a.scenes??[])KA(c,new kn(o.transformMatrix),(l,u)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const h of l.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=u.transformAsPoint(h.attributes.POSITION.min,[]),g=u.transformAsPoint(h.attributes.POSITION.max,[]);n.push({"@id":o["@id"],name:l.name,entityId:o.entityId,bbox:new ur({lowerBound:new fe(...f.map((m,y)=>Math.min(m,g[y]))),upperBound:new fe(...g.map((m,y)=>Math.max(m,f[y])))}),gltf:a})}return!0})}const i=[],r=[];for(const o of e){const a=[];for(const c of n)o.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":o.entityId,name:o.name,hits:a}):r.push(o)}console.log({sourceBoxes:e,targetBoxes:n,report:i,sad:r,maxHits:Math.max(...i.map(o=>o.hits.length))});const s=[];for(const o of i){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),i}),DN.apply(this,arguments)}function RN(t,e,n){if(e&&0!==e.length){let i;switch(n.geometry){case"sphere":i=new Gwe;break;case"cone":i=new qwe;break;case"cylinder":i=new Xwe;break;default:i=new exe}return new ZO({id:t,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:_i.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...n})}}function V5(t,e,n){if(e&&0!==e.length)return new XO({id:t,pickable:!0,data:e.map(i=>({...i,position:new kn(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...n})}new fe;let Q1e=(()=>{class t extends GO{static#e=this.layerName="BodyUILayer";static#t=this.gltfCache={};initializeState(){const{data:n}=this.props;this.setState({data:n??[],zoomOpacity:.8,doCollisions:!1}),K6()}renderLayers(){const n=this.state,i={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const o of n.data){const a=o.geometry??"cube";o.scenegraph?i.scenegraph.push(o):void 0!==i[a]&&i[a].push(o)}const r={};for(const o of i.scenegraph)o.scenegraph&&o.scenegraphNode&&!Object.prototype.hasOwnProperty.call(r,o.scenegraph)&&(r[o.scenegraph]=Z6({scenegraph:o.scenegraph},t.gltfCache));const s=[];for(const[o,a]of Object.entries(i))if("scenegraph"===o)for(const c of a)s.push(new gN({id:"models-"+c["@id"],opacity:c.zoomBasedOpacity?n.zoomOpacity:c.opacity??1,pickable:!c.unpickable,coordinateSystem:_i.CARTESIAN,data:[c],scenegraph:c.scenegraphNode?txe(c.scenegraphNode,r[c.scenegraph]):c.scenegraph,_lighting:c._lighting,getTransformMatrix:c.transformMatrix,getColor:c.color??[0,255,0,127.5],parameters:{depthMask:!c.zoomBasedOpacity&&(void 0===c.opacity||1===c.opacity)}}));else"text"===o?(s.push(V5("text",a.filter(c=>c.unpickable),{pickable:!1})),s.push(V5("textPickable",a.filter(c=>!c.unpickable),{pickable:!0}))):"wireframe"===o?s.push(RN(o,a,{wireframe:!0,pickable:!1,geometry:o})):(s.push(RN(o,a.filter(c=>c.unpickable),{wireframe:!1,pickable:!1,geometry:o})),s.push(RN(`${o}Pickable`,a.filter(c=>!c.unpickable),{wireframe:!1,pickable:!0,geometry:o})));return n.doCollisions&&function Z1e(t){DN.apply(this,arguments)}(n.data),s.filter(o=>!!o)}getPickingInfo(n){return n.info}}return t})();function H5(t,e=[]){for(const n of t.nodes||t.children||[])e.push(n.name),H5(n,e);return e}function ON(){return ON=C(function*(t,e,n,i){K6();const r=yield Z6({scenegraph:t,scenegraphNode:n},i),s={},o=[];e=new kn(e??kn.IDENTITY);for(const a of r.scenes)KA(a,e,(c,l)=>{const u={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new kn(l),geometry:"wireframe",node:c};if(o.push({"@id":`GLTF:${u["@id"]}`,"@type":"GLTFNode",scenegraph:t,scenegraphNode:u["@id"],transformMatrix:new kn(e||kn.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const h of c.mesh.primitives)if(h.attributes.POSITION&&h.attributes.POSITION.min){const f=l.transformAsPoint(h.attributes.POSITION.min,[]),g=l.transformAsPoint(h.attributes.POSITION.max,[]);u.bbox=new ur({lowerBound:new fe(...f.map((m,y)=>Math.min(m,g[y]))),upperBound:new fe(...g.map((m,y)=>Math.max(m,f[y])))})}return s[u["@id"]]=u,!0});for(const a of Object.values(s).filter(c=>!c.bbox)){for(const c of H5(a.node).map(l=>s[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete s[a["@id"]]}for(const a of Object.values(s)){const c=a.bbox.lowerBound,h=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new fe(.5,.5,.5)),f=a.center=c.clone().vadd(h);a.transformMatrix=new kn(kn.IDENTITY).translate(f.toArray()).scale(h.toArray())}for(const a of o)s[a["@id"]]=a;return s}),ON.apply(this,arguments)}class $f{constructor(e){this.deckProps=e,this.bodyUILayer=new Q1e({}),this.nodeClickSubject=new qt,this.nodeHoverStartSubject=new qt,this.nodeHoverStopSubject=new qt,this.sceneRotationSubject=new ye([0,0]),this.nodeDragStartSubject=new qt,this.nodeDragSubject=new qt,this.nodeDragEndSubject=new qt,this.nodeClick$=this.nodeClickSubject.pipe(Pu()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(Pu()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(Pu()),this.sceneRotation$=this.sceneRotationSubject.pipe(Pu()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(Pu()),this.nodeDrag$=this.nodeDragSubject.pipe(Pu()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(Pu());const n={...e,views:["orthographic"===e.camera?new qD({flipY:!1,near:-1e3}):new c4({orbitAxis:"Y"})],controller:e.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:i=>this.cursor??(i.isDragging?"grabbing":"grab")};e.legacyLighting&&(n.effects=[new MR({ambientLight:new gG({color:[255,255,255],intensity:10})})]),this.deck=new IO(n),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:e.minRotationX??-15,maxRotationX:e.maxRotationX??15,target:e.target??[.5,.5,0],rotationX:0,rotationOrbit:e.rotation??0,zoom:e.zoom??9.5,camera:e.camera}}),e.rotation&&this.sceneRotationSubject.next([e.rotation,0])}initialize(){var e=this;return C(function*(){for(;!e.bodyUILayer.state;)yield new Promise(n=>{setTimeout(n,200)})})()}finalize(){this.deck.finalize()}setScene(e){if(e?.length>0){let n=this.bodyUILayer.state.zoomOpacity,i=!1;for(const r of e)r.zoomToOnLoad&&(this.zoomTo(r),i=!0);n=i?.05:n,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(e,n):this.bodyUILayer.setState({data:e,zoomOpacity:n})}}debugSceneNodeProcessing(e,n){const i="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",r=new kn([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function eSe(t,e,n,i){return ON.apply(this,arguments)})(i,r,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",e),(e=e.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:i,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:r,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:e,zoomOpacity:n})})}zoomTo(e){const n=new kn(e.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:n.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(e){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:e}})}setRotationX(e){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:e}})}setZoom(e){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:e}})}setTarget(e){this.deck.setProps({viewState:{...this.deck.props.viewState,target:e}})}setInteractive(e){this.deck.setProps({controller:e})}_onHover(e){const{lastHovered:n}=this;this.cursor=e.picked?"pointer":void 0,e.picked&&e.object?.["@id"]?n!==e.object&&(n&&this.nodeHoverStopSubject.next(n),this.lastHovered=e.object,this.nodeHoverStartSubject.next(e.object)):n&&(this.nodeHoverStopSubject.next(n),this.lastHovered=void 0)}_onClick(e,n){e.picked&&e.object?.["@id"]&&this.nodeClickSubject.next({node:e.object,ctrlClick:n?.srcEvent?.ctrlKey??void 0})}_onViewStateChange(e){if(e.interactionState?.isZooming){const n=this.bodyUILayer.state,i=Math.min(Math.max(1-(e.viewState.zoom-8.9)/2,.05),1);n.zoomOpacity!==i&&this.bodyUILayer.setState({data:n.data,zoomOpacity:i})}this.deck.setProps({viewState:{...e.viewState}}),this.sceneRotationSubject.next([e.viewState.rotationOrbit,e.viewState.rotationX])}_onDragStart(e,n){this._dragEvent(e,n,this.nodeDragStartSubject)}_onDrag(e,n){this._dragEvent(e,n,this.nodeDragSubject)}_onDragEnd(e,n){this._dragEvent(e,n,this.nodeDragEndSubject)}_dragEvent(e,n,i){e?.object?.["@id"]&&i.next({node:e.object,info:e,e:n})}}Un([Lf.oI,jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",void 0)],$f.prototype,"_onHover",null),Un([Lf.oI,jt("design:type",Function),jt("design:paramtypes",[Object,Object]),jt("design:returntype",void 0)],$f.prototype,"_onClick",null),Un([Lf.oI,jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",void 0)],$f.prototype,"_onViewStateChange",null),Un([Lf.oI,jt("design:type",Function),jt("design:paramtypes",[Object,MouseEvent]),jt("design:returntype",void 0)],$f.prototype,"_onDragStart",null),Un([Lf.oI,jt("design:type",Function),jt("design:paramtypes",[Object,MouseEvent]),jt("design:returntype",void 0)],$f.prototype,"_onDrag",null),Un([Lf.oI,jt("design:type",Function),jt("design:paramtypes",[Object,MouseEvent]),jt("design:returntype",void 0)],$f.prototype,"_onDragEnd",null);const tSe=["bodyCanvas"];let nSe=(()=>{class t{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new _n,this.nodeDrag=new _n,this.nodeClick=new _n,this.nodeHoverStart=new _n,this.nodeHoverStop=new _n,this.initialized=new _n,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(n){this._scene=n,this.bodyUI?.setScene(n)}get rotation(){return this._rotation}set rotation(n){this._rotation=n,this.bodyUI?.setRotation(n)}get rotationX(){return this._rotationX}set rotationX(n){this._rotationX=n,this.bodyUI?.setRotationX(n)}get zoom(){return this._zoom}set zoom(n){this._zoom=n,this.bodyUI?.setZoom(n)}get target(){return this._target}set target(n){this._target=n,this.bodyUI?.setTarget(n)}get bounds(){return this._bounds}set bounds(n){this._bounds=n,this.zoomToBounds(n)}get camera(){return this._camera}set camera(n){this._camera=n}get interactive(){return this._interactive}set interactive(n){this._interactive=n,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(n,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:s}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/o/n.x),Math.log2((s-i.y)/o/n.y));this.zoom=a}}setupBodyUI(){var n=this;return C(function*(){const i=n.bodyCanvas.nativeElement,r=new $f({id:"body-ui",canvas:i,zoom:n.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:n.interactive,camera:n.camera});i.addEventListener("contextmenu",s=>s.preventDefault()),yield r.initialize(),n.bodyUI=r,window.bodyUI=r,n.scene?.length>0&&n.bodyUI.setScene(n.scene),n.bounds&&n.zoomToBounds(n.bounds),n.target&&n.bodyUI.setTarget(n.target),n.subscriptions=[n.bodyUI.sceneRotation$.subscribe(s=>n.rotationChange.next(s)),n.bodyUI.nodeDrag$.subscribe(s=>n.nodeDrag.emit(s)),n.bodyUI.nodeClick$.subscribe(s=>n.nodeClick.emit(s)),n.bodyUI.nodeHoverStart$.subscribe(s=>n.nodeHoverStart.emit(s)),n.bodyUI.nodeHoverStop$.subscribe(s=>n.nodeHoverStop.emit(s))],n.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(n=>n.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=gi({type:t,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&Do(tSe,5,ui),2&i){let s;ar(s=cr())&&(r.bodyCanvas=s.first)}},hostVars:2,hostBindings:function(i,r){2&i&&yf(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[["bodyCanvas",""],[1,"body-ui"]],template:function(i,r){1&i&&ss(0,"canvas",1,0)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0})}return t})(),G5=(()=>{class t{constructor(){this.bootstrap$=new Cf(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function iSe(t,e){return t===e}function NN(t,e=iSe){let n=null,i=null;function r(){return function rSe(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!t(e[r],n[r]))return!1;return!0}(e,n,arguments)||(i=t.apply(null,arguments)),n=arguments,i}return r.reset=function(){n=null,i=null},r}let sSe=(()=>{class t{static set(n){this._value=n}static pop(){const n=this._value;return this._value={},n}}return t._value={},t})();const z5=new St("INITIAL_STATE_TOKEN",{providedIn:"root",factory:()=>sSe.pop()}),W5=new St("\u0275NGXS_STATE_FACTORY"),$5=new St("\u0275NGXS_STATE_CONTEXT_FACTORY");function sn(...t){return Es(t,y0(t))}const{isArray:oSe}=Array,{getPrototypeOf:aSe,prototype:cSe,keys:lSe}=Object;function q5(t){if(1===t.length){const e=t[0];if(oSe(e))return{args:e,keys:null};if(function uSe(t){return t&&"object"==typeof t&&aSe(t)===cSe}(e)){const n=lSe(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}const{isArray:dSe}=Array;function l1(t){return Y(e=>function hSe(t,e){return dSe(e)?t(...e):t(e)}(t,e))}function X5(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function pv(...t){const e=_H(t),{args:n,keys:i}=q5(t),r=new At(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let h=!1;ws(n[u]).subscribe(v(s,f=>{h||(h=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||s.next(i?X5(i,a):a),s.complete())}))}});return e?r.pipe(l1(e)):r}function Qd(t,e){const n=Ke(t)?t:()=>t,i=r=>r.error(n());return new At(e?r=>e.schedule(i,0,r):i)}function eh(t){return!!t&&(t instanceof At||Ke(t.lift)&&Ke(t.subscribe))}function yi(t,e){return T((n,i)=>{let r=0;n.subscribe(v(i,s=>t.call(e,s,r++)&&i.next(s)))})}function Qo(t,e,n){let i,r=!1;return t&&"object"==typeof t?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t):i=t??1/0,Pu({connector:()=>new Cf(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Si(t){return t<=0?()=>Ro:T((e,n)=>{let i=0;e.subscribe(v(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function Y5(t,e){return e?n=>n.pipe(Y5((i,r)=>ws(t(i,r)).pipe(Y((s,o)=>e(i,s,r,o))))):T((n,i)=>{let r=0,s=null,o=!1;n.subscribe(v(i,a=>{s||(s=v(i,void 0,()=>{s=null,o&&i.complete()}),ws(t(a,r++)).subscribe(s))},()=>{o=!0,!s&&i.complete()}))})}function Tm(t){return T((e,n)=>{let i=!1;e.subscribe(v(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function zc(t){return T((e,n)=>{let s,i=null,r=!1;i=e.subscribe(v(n,void 0,void 0,o=>{s=ws(t(o,zc(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function $a(t){return T((e,n)=>{ws(t).subscribe(v(n,()=>n.complete(),wt)),!n.closed&&e.subscribe(n)})}function qf(t,e=He){return t=t??fSe,T((n,i)=>{let r,s=!0;n.subscribe(v(i,o=>{const a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}function fSe(t,e){return t===e}function br(t,e,n){const i=Ke(t)||e||n?{next:t,error:e,complete:n}:t;return i?T((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(v(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):He}function u1(...t){return function pSe(){return LE(1)}()(Es(t,y0(t)))}function Bl(...t){const e=y0(t);return T((n,i)=>{(e?u1(t,n,e):u1(t,n)).subscribe(i)})}function Xf(t){return t.constructor&&t.constructor.type?t.constructor.type:t.type}const e9=(t,e,n)=>{t=Object.assign({},t);const i=e.split("."),r=i.length-1;return i.reduce((s,o,a)=>(s[o]=a===r?n:Array.isArray(s[o])?s[o].slice():Object.assign({},s[o]),s&&s[o]),t),t},FN=(t,e)=>e.split(".").reduce((n,i)=>n&&n[i],t),LN=t=>t&&"object"==typeof t&&!Array.isArray(t),BN=(t,...e)=>{if(!e.length)return t;const n=e.shift();if(LN(t)&&LN(n))for(const i in n)LN(n[i])?(t[i]||Object.assign(t,{[i]:{}}),BN(t[i],n[i])):Object.assign(t,{[i]:n[i]});return BN(t,...e)};let t9=(()=>{class t{constructor(n,i){this._ngZone=n,this._platformId=i}enter(n){return hD(this._platformId)?this.runInsideAngular(n):this.runOutsideAngular(n)}leave(n){return this.runInsideAngular(n)}runInsideAngular(n){return yn.isInAngularZone()?n():this._ngZone.run(n)}runOutsideAngular(n){return yn.isInAngularZone()?this._ngZone.runOutsideAngular(n):n()}}return t.\u0275fac=function(n){return new(n||t)(lt(yn),lt(nc))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const n9=new St("ROOT_OPTIONS"),i9=new St("ROOT_STATE_TOKEN"),r9=new St("FEATURE_STATE_TOKEN"),s9=new St("NGXS_PLUGINS"),Uu="NGXS_META",o9="NGXS_OPTIONS_META",kN="NGXS_SELECTOR_META";let h1=(()=>{class t{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=t9}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Pt({token:t,factory:function(n){let i=null;return n?i=new n:(r=lt(n9),i=BN(new t,r)),i;var r},providedIn:"root"}),t})();class ASe{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}}let SSe=(()=>{class t{enter(n){return n()}leave(n){return n()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const a9=new St("USER_PROVIDED_NGXS_EXECUTION_STRATEGY"),CSe=new St("NGXS_EXECUTION_STRATEGY",{providedIn:"root",factory:()=>{const t=Ut(li),e=t.get(a9);return t.get(e||(typeof Bn.Zone<"u"?t9:SSe))}});function jN(t){if(!t.hasOwnProperty(Uu)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,Uu,{value:e})}return Yf(t)}function Yf(t){return t[Uu]}function f1(t){return t[kN]}function c9(t,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function MSe(t){const e=t.slice();return n=>e.reduce((i,r)=>i&&i[r],n)}(t):function TSe(t){const e=t;let n="store."+e[0],i=0;const r=e.length;let s=n;for(;++i<r;)s=s+" && "+(n=n+"."+e[i]);return new Function("store","return "+s+";")}(t)}function PSe(...t){return function Im(t,e,n=BSe){const i=function kSe(t){return t.reduce((e,n)=>(e[Xf(n)]=!0,e),{})}(t),r=e&&function jSe(t){return t.reduce((e,n)=>(e[n]=!0,e),{})}(e);return function(s){return s.pipe(function FSe(t,e){return yi(n=>{const i=Xf(n.action);return t[i]&&(!e||e[n.status])})}(i,r),n())}}(t,["DISPATCHED"])}function BSe(){return Y(t=>t.action)}function p1(t){return e=>new At(n=>e.subscribe({next(i){t.leave(()=>n.next(i))},error(i){t.leave(()=>n.error(i))},complete(){t.leave(()=>n.complete())}}))}let l9=(()=>{class t{constructor(n){this._executionStrategy=n}enter(n){return this._executionStrategy.enter(n)}leave(n){return this._executionStrategy.leave(n)}}return t.\u0275fac=function(n){return new(n||t)(lt(CSe))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function u9(t){const e=[];let n=!1;return function(...r){if(n)e.unshift(r);else{for(n=!0,t(...r);e.length>0;){const s=e.pop();s&&t(...s)}n=!1}}}class USe extends qt{constructor(){super(...arguments),this._orderedNext=u9(e=>super.next(e))}next(e){this._orderedNext(e)}}class VSe extends ye{constructor(e){super(e),this._orderedNext=u9(n=>super.next(n)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}let d9=(()=>{class t extends USe{ngOnDestroy(){this.complete()}}return t.\u0275fac=(()=>{let e;return function(i){return(e||(e=Xi(t)))(i||t)}})(),t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const h9=t=>(...e)=>t.shift()(...e,(...i)=>h9(t)(...i));let f9=(()=>{class t{constructor(n){this._injector=n,this._errorHandler=null}reportErrorSafely(n){null===this._errorHandler&&(this._errorHandler=this._injector.get(Ao));try{this._errorHandler.handleError(n)}catch{}}}return t.\u0275fac=function(n){return new(n||t)(lt(Gi))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),VN=(()=>{class t extends VSe{constructor(){super({})}ngOnDestroy(){this.complete()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),HN=(()=>{class t{constructor(n,i){this._parentManager=n,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const n=this.getPluginHandlers();this.rootPlugins.push(...n)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}}return t.\u0275fac=function(n){return new(n||t)(lt(t,12),lt(s9,8))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t})(),p9=(()=>{class t extends qt{}return t.\u0275fac=(()=>{let e;return function(i){return(e||(e=Xi(t)))(i||t)}})(),t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),GSe=(()=>{class t{constructor(n,i,r,s,o,a){this._actions=n,this._actionResults=i,this._pluginManager=r,this._stateStream=s,this._ngxsExecutionStrategy=o,this._internalErrorReporter=a}dispatch(n){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(n)).pipe(function HSe(t,e){return n=>{let i=!1;return n.subscribe({error:r=>{e.enter(()=>Promise.resolve().then(()=>{i||e.leave(()=>t.reportErrorSafely(r))}))}}),new At(r=>(i=!0,n.pipe(p1(e)).subscribe(r)))}}(this._internalErrorReporter,this._ngxsExecutionStrategy))}dispatchByEvents(n){return Array.isArray(n)?0===n.length?sn(this._stateStream.getValue()):pv(n.map(i=>this.dispatchSingle(i))):this.dispatchSingle(n)}dispatchSingle(n){const i=this._stateStream.getValue();return h9([...this._pluginManager.plugins,(s,o)=>{s!==i&&this._stateStream.next(s);const a=this.getActionResultStream(o);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:o,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,n).pipe(Qo())}getActionResultStream(n){return this._actionResults.pipe(yi(i=>i.action===n&&"DISPATCHED"!==i.status),Si(1),Qo())}createDispatchObservable(n){return n.pipe(Y5(i=>{switch(i.status){case"SUCCESSFUL":return sn(this._stateStream.getValue());case"ERRORED":return Qd(i.error);default:return Ro}})).pipe(Qo())}}return t.\u0275fac=function(n){return new(n||t)(lt(d9),lt(p9),lt(HN),lt(VN),lt(l9),lt(f9))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gv=(()=>{class t{constructor(n,i,r){this._stateStream=n,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(n){const i=this.getRootStateOperations(),r=i.getState();i.setState(Object.assign(Object.assign({},r),n.defaults))}}return t.\u0275fac=function(n){return new(n||t)(lt(VN),lt(GSe),lt(h1))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),GN=(()=>{class t{constructor(n){this._internalStateOperations=n}createStateContext(n){const i=this._internalStateOperations.getRootStateOperations();return{getState:()=>y9(i.getState(),n.path),patchState(r){const s=i.getState(),o=function zSe(t){return e=>{const n=Object.assign({},e);for(const i in t)n[i]=t[i];return n}}(r);return _9(i,s,o,n.path)},setState(r){const s=i.getState();return function d1(t){return"function"==typeof t}(r)?_9(i,s,r,n.path):m9(i,s,r,n.path)},dispatch:r=>i.dispatch(r)}}}return t.\u0275fac=function(n){return new(n||t)(lt(gv))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function m9(t,e,n,i){const r=e9(e,i,n);return t.setState(r),r}function _9(t,e,n,i){return m9(t,e,n(y9(e,i)),i)}function y9(t,e){return FN(t,e)}new RegExp("^[a-zA-Z0-9_]+$");let v9=(()=>{class t{}return t.type="@@INIT",t})(),b9=(()=>{class t{constructor(n){this.addedStates=n}}return t.type="@@UPDATE_STATE",t})();new St("NGXS_DEVELOPMENT_OPTIONS",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let Dm=(()=>{class t{constructor(n,i,r,s,o,a,c){this._injector=n,this._config=i,this._parentFactory=r,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=NN(()=>{const l=this;function u(f){const g=l.statePaths[f];return g?c9(g.split("."),l._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let g=u(f);return g||((...m)=>(g||(g=u(f)),g?g(...m):void 0))},getSelectorOptions:f=>Object.assign(Object.assign({},l._config.selectorOptions),f||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static _cloneDefaults(n){let i=n;return Array.isArray(n)?i=n.slice():function NSe(t){return"object"==typeof t&&null!==t||"function"==typeof t}(n)?i=Object.assign({},n):void 0===n&&(i={}),i}ngOnDestroy(){var n;null===(n=this._actionsSubscription)||void 0===n||n.unsubscribe()}add(n){const{newStates:i}=this.addToStatesMap(n);if(!i.length)return[];const r=function ISe(t){const e=n=>t.find(r=>r===n)[Uu].name;return t.reduce((n,i)=>{const{name:r,children:s}=i[Uu];return n[r]=(s||[]).map(e),n},{})}(i),s=function OSe(t){const e=[],n={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),n[r]=!0,t[r].forEach(o=>{n[o]||i(o,s.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(t).forEach(r=>i(r)),e.reverse()}(r),o=function RSe(t,e={}){const n=(i,r)=>{for(const s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(r)>=0){const o=n(i,s);return null!==o?`${o}.${s}`:s}return null};for(const i in t)if(t.hasOwnProperty(i)){const r=n(t,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function DSe(t){return t.reduce((e,n)=>(e[n[Uu].name]=n,e),{})}(i),c=[];for(const l of s){const u=a[l],h=o[l],f=u[Uu];this.addRuntimeInfoToMeta(f,h);const g={name:l,path:h,isInitialised:!1,actions:f.actions,instance:this._injector.get(u),defaults:t._cloneDefaults(f.defaults)};this.hasBeenMountedAndBootstrapped(l,h)||c.push(g),this.states.push(g)}return c}addAndReturnDefaults(n){const r=this.add(n||[]);return{defaults:r.reduce((o,a)=>e9(o,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const n=new qt;this._actionsSubscription=this._actions.pipe(yi(i=>"DISPATCHED"===i.status),xs(i=>{n.next(i);const r=i.action;return this.invokeActions(n,r).pipe(Y(()=>({action:r,status:"SUCCESSFUL"})),Tm({action:r,status:"CANCELED"}),zc(s=>sn({action:r,status:"ERRORED",error:s})))})).subscribe(i=>this._actionResults.next(i))}invokeActions(n,i){const r=Xf(i),s=[];let o=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const u=this._stateContextFactory.createStateContext(a);try{let h=a.instance[l.fn](u,i);h instanceof Promise&&(h=Es(h)),eh(h)?(h=h.pipe(xs(f=>f instanceof Promise?Es(f):eh(f)?f:sn(f)),Tm({})),l.options.cancelUncompleted&&(h=h.pipe($a(n.pipe(PSe(i)))))):h=sn({}).pipe(Qo()),s.push(h)}catch(h){s.push(Qd(h))}o=!0}}return s.length||s.push(sn({})),pv(s)}addToStatesMap(n){const i=[],r=this.statesByName;for(const s of n){const o=Yf(s).name;!r[o]&&(i.push(s),r[o]=s)}return{newStates:i}}addRuntimeInfoToMeta(n,i){this.statePaths[n.name]=i,n.path=i}hasBeenMountedAndBootstrapped(n,i){const r=void 0!==FN(this._initialState,i);return this.statesByName[n]&&r}}return t.\u0275fac=function(n){return new(n||t)(lt(Gi),lt(h1),lt(t,12),lt(d9),lt(p9),lt(GN),lt(z5,8))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t})();function w9(t){const e=f1(t)||Yf(t);return e&&e.makeRootSelector||(()=>t)}let Vu=(()=>{class t{constructor(n,i,r,s,o,a){this._stateStream=n,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=s,this._stateFactory=o,this._selectableStateStream=this._stateStream.pipe(p1(this._internalExecutionStrategy),Qo({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(n){return this._internalStateOperations.getRootStateOperations().dispatch(n)}select(n){const i=this.getStoreBoundSelectorFn(n);return this._selectableStateStream.pipe(Y(i),zc(r=>{const{suppressErrors:s}=this._config.selectorOptions;return r instanceof TypeError&&s?sn(void 0):Qd(r)}),qf(),p1(this._internalExecutionStrategy))}selectOnce(n){return this.select(n).pipe(Si(1))}selectSnapshot(n){return this.getStoreBoundSelectorFn(n)(this._stateStream.getValue())}subscribe(n){return this._selectableStateStream.pipe(p1(this._internalExecutionStrategy)).subscribe(n)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(n){return this._internalStateOperations.getRootStateOperations().setState(n)}getStoreBoundSelectorFn(n){return w9(n)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(n){const i=this._stateStream.value;if(!i||0===Object.keys(i).length){const o=Object.keys(this._config.defaultsState).length>0?Object.assign(Object.assign({},this._config.defaultsState),n):n;this._stateStream.next(o)}}}return t.\u0275fac=function(n){return new(n||t)(lt(VN),lt(gv),lt(h1),lt(l9),lt(Dm),lt(z5,8))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),m1=(()=>{class t{constructor(n,i){t.store=n,t.config=i}ngOnDestroy(){t.store=null,t.config=null}}return t.store=null,t.config=null,t.\u0275fac=function(n){return new(n||t)(lt(Vu),lt(h1))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),x9=(()=>{class t{constructor(n,i,r,s,o){this._store=n,this._internalErrorReporter=i,this._internalStateOperations=r,this._stateContextFactory=s,this._bootstrapper=o,this._destroy$=new qt}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(n,i){this._internalStateOperations.getRootStateOperations().dispatch(n).pipe(yi(()=>!!i),br(()=>this._invokeInitOnStates(i.states)),xs(()=>this._bootstrapper.appBootstrapped$),yi(r=>!!r),zc(r=>(this._internalErrorReporter.reportErrorSafely(r),Ro)),$a(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(n){for(const i of n){const r=i.instance;r.ngxsOnChanges&&this._store.select(s=>FN(s,i.path)).pipe(Bl(void 0),T((t,e)=>{let n,i=!1;t.subscribe(v(e,r=>{const s=n;n=r,i&&e.next([s,r]),i=!0}))}),$a(this._destroy$)).subscribe(([s,o])=>{const a=new ASe(s,o,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(n){for(const i of n){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(n){return this._stateContextFactory.createStateContext(n)}}return t.\u0275fac=function(n){return new(n||t)(lt(Vu),lt(f9),lt(gv),lt(GN),lt(G5))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),iCe=(()=>{class t{constructor(n,i,r,s,o=[],a){const c=n.addAndReturnDefaults(o);i.setStateToTheCurrentWithNew(c),n.connectActionHandlers(),a.ngxsBootstrap(new v9,c)}}return t.\u0275fac=function(n){return new(n||t)(lt(Dm),lt(gv),lt(Vu),lt(m1),lt(i9,8),lt(x9))},t.\u0275mod=sa({type:t}),t.\u0275inj=Ho({}),t})(),rCe=(()=>{class t{constructor(n,i,r,s=[],o){const a=t.flattenStates(s),c=r.addAndReturnDefaults(a);c.states.length&&(i.setStateToTheCurrentWithNew(c),o.ngxsBootstrap(new b9(c.defaults),c))}static flattenStates(n=[]){return n.reduce((i,r)=>i.concat(r),[])}}return t.\u0275fac=function(n){return new(n||t)(lt(Vu),lt(gv),lt(Dm),lt(r9,8),lt(x9))},t.\u0275mod=sa({type:t}),t.\u0275inj=Ho({}),t})(),sCe=(()=>{class t{static forRoot(n=[],i={}){return{ngModule:iCe,providers:[Dm,HN,...n,...t.ngxsTokenProviders(n,i)]}}static forFeature(n=[]){return{ngModule:rCe,providers:[Dm,HN,...n,{provide:r9,multi:!0,useValue:n}]}}static ngxsTokenProviders(n,i){return[{provide:a9,useValue:i.executionStrategy},{provide:i9,useValue:n},{provide:n9,useValue:i},{provide:cE,useFactory:t.appBootstrapListenerFactory,multi:!0,deps:[G5]},{provide:$5,useExisting:GN},{provide:W5,useExisting:Dm}]}static appBootstrapListenerFactory(n){return()=>n.bootstrap()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=sa({type:t}),t.\u0275inj=Ho({}),t})();function zN(t,e){return(n,i)=>{const r=jN(n.constructor);Array.isArray(t)||(t=[t]);for(const s of t){const o=s.type;r.actions[o]||(r.actions[o]=[]),r.actions[o].push({fn:i,options:e||{},type:o})}}}function WN(t){return e=>{const n=e,i=jN(n),r=Object.getPrototypeOf(n),s=function oCe(t,e){return Object.assign(Object.assign({},t[o9]||{}),e)}(r,t);(function aCe(t){const{meta:e,inheritedStateClass:n,optionsWithInheritance:i}=t,{children:r,defaults:s,name:o}=i,a="string"==typeof o?o:o&&o.getName()||null;if(n.hasOwnProperty(Uu)){const c=n[Uu]||{};e.actions=Object.assign(Object.assign({},e.actions),c.actions)}e.children=r,e.defaults=s,e.name=a})({meta:i,inheritedStateClass:r,optionsWithInheritance:s}),n[o9]=s}}const cCe=36;function _1(t,...e){return function(n,i){const r=i.toString(),s=`__${r}__selector`,o=function uCe(t,e,n=[]){return e=e||function dCe(t){const e=t.length-1;return t.charCodeAt(e)===cCe?t.slice(0,e):t}(t),"string"==typeof e?c9(n.length?[e,...n]:e.split("."),m1.config):e}(r,t,e);Object.defineProperties(n,{[s]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[s]||(this[s]=function lCe(t){return m1.store||function ESe(){throw new Error("You have forgotten to import the NGXS module!")}(),m1.store.select(t)}(o))}}})}}const E9="NGXS_SELECTOR_OPTIONS_META",y1={getOptions:t=>t&&t[E9]||{},defineOptions:(t,e)=>{t&&(t[E9]=e)}};function hCe(t,e){const n=function UN(t){return t.hasOwnProperty(kN)||Object.defineProperty(t,kN,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),f1(t)}(t);n.originalFn=t;let i=()=>({});e&&(n.containerClass=e.containerClass,n.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r=Object.assign({},n);return n.getSelectorOptions=()=>function fCe(t,e){return Object.assign(Object.assign(Object.assign(Object.assign({},y1.getOptions(t.containerClass)||{}),y1.getOptions(t.originalFn)||{}),t.getSelectorOptions()||{}),e)}(r,i()),n}function mv(t,e,n){const i=function eCe(t,e){const n=e&&e.containerClass,r=NN(function(...o){const a=t.apply(n,o);return a instanceof Function?NN.apply(null,[a]):a});return Object.setPrototypeOf(r,t),r}(e,n),r=hCe(e,n);return r.makeRootSelector=function QSe(t,e,n){return i=>{const{argumentSelectorFunctions:r,selectorOptions:s}=function tCe(t,e,n=[]){const i=e.getSelectorOptions(),r=t.getSelectorOptions(i),o=function nCe(t=[],e,n){const i=[];return n&&(0===t.length||e.injectContainerState)&&Yf(n)&&i.push(n),t&&i.push(...t),i}(n,r,e.containerClass).map(a=>w9(a)(t));return{selectorOptions:r,argumentSelectorFunctions:o}}(i,t,e);return function(a){const c=r.map(l=>l(a));try{return n(...c)}catch(l){if(l instanceof TypeError&&s.suppressErrors)return;throw l}}}}(r,t,i),i}function Rm(t){return(e,n,i)=>{i||(i=Object.getOwnPropertyDescriptor(e,n));const r=i?.value,s=mv(t,r,{containerClass:e,selectorName:n.toString(),getSelectorOptions:()=>({})}),o={configurable:!0,get:()=>s};return o.originalFn=r,o}}let A9=(()=>{class t{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(i){return new(i||t)(st(bu),st(ui))};static#t=this.\u0275dir=Xt({type:t})}return t})(),Kf=(()=>{class t extends A9{static#e=this.\u0275fac=(()=>{let n;return function(r){return(n||(n=Xi(t)))(r||t)}})();static#t=this.\u0275dir=Xt({type:t,features:[di]})}return t})();const Wc=new St(""),_Ce={provide:Wc,useExisting:pi(()=>b1),multi:!0},vCe=new St("");let b1=(()=>{class t extends A9{constructor(n,i,r){super(n,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function yCe(){const t=Nd()?Nd().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static#e=this.\u0275fac=function(i){return new(i||t)(st(bu),st(ui),st(vCe,8))};static#t=this.\u0275dir=Xt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&zi("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Ni([_Ce]),di]})}return t})();function th(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function C9(t){return null!=t&&"number"==typeof t.length}const Lo=new St(""),nh=new St(""),bCe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class wCe{static min(e){return function M9(t){return e=>{if(th(e.value)||th(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(e)}static max(e){return function T9(t){return e=>{if(th(e.value)||th(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(e)}static required(e){return function I9(t){return th(t.value)?{required:!0}:null}(e)}static requiredTrue(e){return function D9(t){return!0===t.value?null:{required:!0}}(e)}static email(e){return function R9(t){return th(t.value)||bCe.test(t.value)?null:{email:!0}}(e)}static minLength(e){return function O9(t){return e=>th(e.value)||!C9(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function N9(t){return e=>C9(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(e)}static pattern(e){return function P9(t){if(!t)return w1;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(th(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return U9(e)}static composeAsync(e){return V9(e)}}function w1(t){return null}function F9(t){return null!=t}function L9(t){return qg(t)?Es(t):t}function B9(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function k9(t,e){return e.map(n=>n(t))}function j9(t){return t.map(e=>function xCe(t){return!t.validate}(e)?e:n=>e.validate(n))}function U9(t){if(!t)return null;const e=t.filter(F9);return 0==e.length?null:function(n){return B9(k9(n,e))}}function $N(t){return null!=t?U9(j9(t)):null}function V9(t){if(!t)return null;const e=t.filter(F9);return 0==e.length?null:function(n){return pv(k9(n,e).map(L9)).pipe(Y(B9))}}function qN(t){return null!=t?V9(j9(t)):null}function H9(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function G9(t){return t._rawValidators}function z9(t){return t._rawAsyncValidators}function XN(t){return t?Array.isArray(t)?t:[t]:[]}function x1(t,e){return Array.isArray(t)?t.includes(e):t===e}function W9(t,e){const n=XN(e);return XN(t).forEach(r=>{x1(n,r)||n.push(r)}),n}function $9(t,e){return XN(e).filter(n=>!x1(t,n))}class q9{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$N(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=qN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class ea extends q9{get formDirective(){return null}get path(){return null}}class Hu extends q9{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class X9{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Y9=(()=>{class t extends X9{constructor(n){super(n)}static#e=this.\u0275fac=function(i){return new(i||t)(st(Hu,2))};static#t=this.\u0275dir=Xt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&Er("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[di]})}return t})(),K9=(()=>{class t extends X9{constructor(n){super(n)}static#e=this.\u0275fac=function(i){return new(i||t)(st(ea,10))};static#t=this.\u0275dir=Xt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){2&i&&Er("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[di]})}return t})();const _v="VALID",A1="INVALID",Om="PENDING",yv="DISABLED";function JN(t){return(S1(t)?t.validators:t)||null}function ZN(t,e){return(S1(e)?e.asyncValidators:t)||null}function S1(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class QN{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_v}get invalid(){return this.status===A1}get pending(){return this.status==Om}get disabled(){return this.status===yv}get enabled(){return this.status!==yv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(W9(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(W9(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($9(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($9(e,this._rawAsyncValidators))}hasValidator(e){return x1(this._rawValidators,e)}hasAsyncValidator(e){return x1(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Om,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=yv,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=_v,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_v||this.status===Om)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yv:_v}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Om,this._hasOwnPendingAsyncValidator=!0;const n=L9(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){const i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new _n,this.statusChanges=new _n}_calculateStatus(){return this._allControlsDisabled()?yv:this.errors?A1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Om)?Om:this._anyControlsHaveStatus(A1)?A1:_v}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){S1(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function CCe(t){return Array.isArray(t)?$N(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function MCe(t){return Array.isArray(t)?qN(t):t||null}(this._rawAsyncValidators)}}class eP extends QN{constructor(e,n,i){super(JN(n),ZN(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function Q9(t,e,n){t._forEachChild((i,r)=>{if(void 0===n[r])throw new $e(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function Z9(t,e,n){const i=t.controls;if(!(e?Object.keys(i):i).length)throw new $e(1e3,"");if(!i[n])throw new $e(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>!!i._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const vv=new St("CallSetDisabledState",{providedIn:"root",factory:()=>tP}),tP="always";function bv(t,e,n=tP){nP(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function DCe(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&eW(t,e)})}(t,e),function OCe(t,e){const n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function RCe(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&eW(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function ICe(t,e){if(e.valueAccessor.setDisabledState){const n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function M1(t,e,n=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),I1(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function T1(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function nP(t,e){const n=G9(t);null!==e.validator?t.setValidators(H9(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const i=z9(t);null!==e.asyncValidator?t.setAsyncValidators(H9(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();T1(e._rawValidators,r),T1(e._rawAsyncValidators,r)}function I1(t,e){let n=!1;if(null!==t){if(null!==e.validator){const r=G9(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(null!==e.asyncValidator){const r=z9(t);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}const i=()=>{};return T1(e._rawValidators,i),T1(e._rawAsyncValidators,i),n}function eW(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function tW(t,e){nP(t,e)}function nW(t,e){t._syncPendingControls(),e.forEach(n=>{const i=n.control;"submit"===i.updateOn&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const BCe={provide:ea,useExisting:pi(()=>xv)},wv=Promise.resolve();let xv=(()=>{class t extends ea{constructor(n,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new _n,this.form=new eP({},$N(n),qN(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){wv.then(()=>{const i=this._findContainer(n.path);n.control=i.registerControl(n.name,n.control),bv(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){wv.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){wv.then(()=>{const i=this._findContainer(n.path),r=new eP({});tW(r,n),i.registerControl(n.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){wv.then(()=>{const i=this._findContainer(n.path);i&&i.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,i){wv.then(()=>{this.form.get(n.path).setValue(i)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,nW(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(i){return new(i||t)(st(Lo,10),st(nh,10),st(vv,8))};static#t=this.\u0275dir=Xt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,r){1&i&&zi("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[Yt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ni([BCe]),di]})}return t})();function iW(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function rW(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const oP=class extends QN{constructor(e=null,n,i){super(JN(n),ZN(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),S1(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=rW(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){iW(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){iW(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){rW(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},kCe=oP;Promise.resolve();let lW=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Xt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const fW=new St(""),$Ce={provide:Hu,useExisting:pi(()=>aP)};let aP=(()=>{class t extends Hu{set isDisabled(n){}static#e=this._ngModelWarningSentOnce=!1;constructor(n,i,r,s,o){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=o,this.update=new _n,this._ngModelWarningSent=!1,this._setValidators(n),this._setAsyncValidators(i),this.valueAccessor=function sP(t,e){if(!e)return null;let n,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===b1?n=s:function FCe(t){return Object.getPrototypeOf(t.constructor)===Kf}(s)?i=s:r=s}),r||i||n||null}(0,r)}ngOnChanges(n){if(this._isControlChanged(n)){const i=n.form.previousValue;i&&M1(i,this,!1),bv(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}(function rP(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)})(n,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&M1(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_isControlChanged(n){return n.hasOwnProperty("form")}static#t=this.\u0275fac=function(i){return new(i||t)(st(Lo,10),st(nh,10),st(Wc,10),st(fW,8),st(vv,8))};static#n=this.\u0275dir=Xt({type:t,selectors:[["","formControl",""]],inputs:{form:[Yt.None,"formControl","form"],isDisabled:[Yt.None,"disabled","isDisabled"],model:[Yt.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Ni([$Ce]),di,Lr]})}return t})();const qCe={provide:ea,useExisting:pi(()=>D1)};let D1=(()=>{class t extends ea{constructor(n,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _n,this._setValidators(n),this._setAsyncValidators(i)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(I1(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const i=this.form.get(n.path);return bv(i,n,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),i}getControl(n){return this.form.get(n.path)}removeControl(n){M1(n.control||null,n,!1),function LCe(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,i){this.form.get(n.path).setValue(i)}onSubmit(n){return this.submitted=!0,nW(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const i=n.control,r=this.form.get(n.path);i!==r&&(M1(i||null,n),(t=>t instanceof oP)(r)&&(bv(r,n,this.callSetDisabledState),n.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const i=this.form.get(n.path);tW(i,n),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const i=this.form.get(n.path);i&&function NCe(t,e){return I1(t,e)}(i,n)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){nP(this.form,this),this._oldForm&&I1(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(i){return new(i||t)(st(Lo,10),st(nh,10),st(vv,8))};static#t=this.\u0275dir=Xt({type:t,selectors:[["","formGroup",""]],hostBindings:function(i,r){1&i&&zi("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[Yt.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ni([qCe]),di,Lr]})}return t})();const Ev=vt(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function MW(t,e){const n="object"==typeof e;return new Promise((i,r)=>{let o,s=!1;t.subscribe({next:a=>{o=a,s=!0},error:r,complete:()=>{s?i(o):n?i(e.defaultValue):r(new Ev)}})})}let fP;try{fP=typeof Intl<"u"&&Intl.v8BreakIterator}catch{fP=!1}let Nm,ba=(()=>{class t{constructor(n){this._platformId=n,this.isBrowser=this._platformId?Pd(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!fP)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||t)(lt(nc))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const TW=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function IW(){if(Nm)return Nm;if("object"!=typeof document||!document)return Nm=new Set(TW),Nm;let t=document.createElement("input");return Nm=new Set(TW.filter(e=>(t.setAttribute("type",e),t.type===e))),Nm}let Av,Zf,pP;function Sv(t){return function hMe(){if(null==Av&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Av=!0}))}finally{Av=Av||!1}return Av}()?t:!!t.capture}function fMe(){if(null==Zf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Zf=!1,Zf;if("scrollBehavior"in document.documentElement.style)Zf=!0;else{const t=Element.prototype.scrollTo;Zf=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return Zf}function gP(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function Gu(t){return t.composedPath?t.composedPath()[0]:t.target}function DW(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ih(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}class RMe extends Bt{constructor(e,n){super()}schedule(e,n=0){return this}}const N1={setInterval(t,e,...n){const{delegate:i}=N1;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=N1;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class yP extends RMe{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,i=0){return N1.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&N1.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Et(i,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}class Mv{constructor(e,n=Mv.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}}Mv.now=wD.now;class vP extends Mv{constructor(e,n=Mv.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}}const P1=new vP(yP),OMe=P1;function F1(t){return null!=t&&"false"!=`${t}`}function FW(t,e=0){return function PMe(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function LW(t){return Array.isArray(t)?t:[t]}function Cs(t){return null==t?"":"string"==typeof t?t:`${t}px`}function rh(t){return t instanceof ui?t.nativeElement:t}function kW(t,e,n){const i=jW(t,e);n=n.trim(),!i.some(r=>r.trim()===n)&&(i.push(n),t.setAttribute(e,i.join(" ")))}function bP(t,e,n){const i=jW(t,e);n=n.trim();const r=i.filter(s=>s!==n);r.length?t.setAttribute(e,r.join(" ")):t.removeAttribute(e)}function jW(t,e){return t.getAttribute(e)?.match(/\S+/g)??[]}class UW{constructor(e,n){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new qt,this._typeaheadSubscription=Bt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=i=>i.disabled,this._pressedLetters=[],this.tabOut=new qt,this.change=new qt,e instanceof Jh?this._itemChangesSubscription=e.changes.subscribe(i=>this._itemsChanged(i.toArray())):Ux(e)&&(this._effectRef=lV(()=>this._itemsChanged(e()),{injector:n}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(br(n=>this._pressedLetters.push(n)),function NMe(t,e=P1){return T((n,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=s;s=null,i.next(l)}};function c(){const l=o+t,u=e.now();if(u<l)return r=this.schedule(void 0,l-u),void i.add(r);a()}n.subscribe(v(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}(e),yi(()=>this._pressedLetters.length>0),Y(()=>this._pressedLetters.join(""))).subscribe(n=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(n)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,n=10){return this._pageUpAndDown={enabled:e,delta:n},this}setActiveItem(e){const n=this._activeItem;this.updateActiveItem(e),this._activeItem!==n&&this.change.next(this._activeItemIndex)}onKeydown(e){const n=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(n){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||ih(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(n>=65&&n<=90||n>=48&&n<=57)&&this._letterKeyStream.next(String.fromCharCode(n))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const n=this._getItemsArray(),i="number"==typeof e?e:n.indexOf(e);this._activeItem=n[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const n=this._getItemsArray();for(let i=1;i<=n.length;i++){const r=(this._activeItemIndex+e*i+n.length)%n.length;if(!this._skipPredicateFn(n[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,n){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=n])return;this.setActiveItem(e)}}_getItemsArray(){return Ux(this._items)?this._items():this._items instanceof Jh?this._items.toArray():this._items}_itemsChanged(e){if(this._activeItem){const n=e.indexOf(this._activeItem);n>-1&&n!==this._activeItemIndex&&(this._activeItemIndex=n)}}}class kMe extends UW{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}let wP=(()=>{class t{constructor(n){this._platform=n}isDisabled(n){return n.hasAttribute("disabled")}isVisible(n){return function UMe(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(n)&&"visible"===getComputedStyle(n).visibility}isTabbable(n){if(!this._platform.isBrowser)return!1;const i=function jMe(t){try{return t.frameElement}catch{return null}}(function XMe(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}(n));if(i&&(-1===HW(i)||!this.isVisible(i)))return!1;let r=n.nodeName.toLowerCase(),s=HW(n);return n.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function $Me(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(n))&&("audio"===r?!!n.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||n.hasAttribute("controls")):n.tabIndex>=0)}isFocusable(n,i){return function qMe(t){return!function HMe(t){return function zMe(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function VMe(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function GMe(t){return function WMe(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||VW(t))}(n)&&!this.isDisabled(n)&&(i?.ignoreVisibility||this.isVisible(n))}static#e=this.\u0275fac=function(i){return new(i||t)(lt(ba))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function VW(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function HW(t){if(!VW(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class GW{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,s=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){const i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){const n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=0;i<n.length;i++){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let i=n.length-1;i>=0;i--){const r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Si(1)).subscribe(e)}}let zW=(()=>{class t{constructor(n,i,r){this._checker=n,this._ngZone=i,this._document=r}create(n,i=!1){return new GW(n,this._checker,this._ngZone,this._document,i)}static#e=this.\u0275fac=function(i){return new(i||t)(lt(wP),lt(yn),lt(hi))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function WW(t){return 0===t.buttons||0===t.detail}function $W(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const YMe=new St("cdk-input-modality-detector-options"),KMe={ignoreKeys:[18,17,224,91,16]},Pm=Sv({passive:!0,capture:!0});let JMe=(()=>{class t{get mostRecentModality(){return this._modality.value}constructor(n,i,r,s){this._platform=n,this._mostRecentTarget=null,this._modality=new ye(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Gu(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(WW(o)?"keyboard":"mouse"),this._mostRecentTarget=Gu(o))},this._onTouchstart=o=>{$W(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Gu(o))},this._options={...KMe,...s},this.modalityDetected=this._modality.pipe(function PW(t){return yi((e,n)=>t<=n)}(1)),this.modalityChanged=this.modalityDetected.pipe(qf()),n.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Pm),r.addEventListener("mousedown",this._onMousedown,Pm),r.addEventListener("touchstart",this._onTouchstart,Pm)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Pm),document.removeEventListener("mousedown",this._onMousedown,Pm),document.removeEventListener("touchstart",this._onTouchstart,Pm))}static#e=this.\u0275fac=function(i){return new(i||t)(lt(ba),lt(yn),lt(hi),lt(YMe,8))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var L1=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(L1||{});const QMe=new St("cdk-focus-monitor-default-options"),B1=Sv({passive:!0,capture:!0});let xP=(()=>{class t{constructor(n,i,r,s,o){this._ngZone=n,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new qt,this._rootNodeFocusAndBlurListener=a=>{for(let l=Gu(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=s,this._detectionMode=o?.detectionMode||L1.IMMEDIATE}monitor(n,i=!1){const r=rh(n);if(!this._platform.isBrowser||1!==r.nodeType)return sn();const s=function gMe(t){if(function pMe(){if(null==pP){const t=typeof document<"u"?document.head:null;pP=!(!t||!t.createShadowRoot&&!t.attachShadow)}return pP}()){const e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new qt,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(n){const i=rh(n),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(n,i,r){const s=rh(n);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((n,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(n){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(n)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:n&&this._isLastInteractionFromInputLabel(n)?"mouse":"program"}_shouldBeAttributedToTouch(n){return this._detectionMode===L1.EVENTUAL||!!n?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(n,i){n.classList.toggle("cdk-focused",!!i),n.classList.toggle("cdk-touch-focused","touch"===i),n.classList.toggle("cdk-keyboard-focused","keyboard"===i),n.classList.toggle("cdk-mouse-focused","mouse"===i),n.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(n,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=n,this._originFromTouchInteraction="touch"===n&&i,this._detectionMode===L1.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(n,i){const r=this._elementInfo.get(i),s=Gu(n);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(n,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&n.relatedTarget instanceof Node&&i.contains(n.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(n,i){n.subject.observers.length&&this._ngZone.run(()=>n.subject.next(i))}_registerGlobalListeners(n){if(!this._platform.isBrowser)return;const i=n.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,B1),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,B1)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe($a(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(n){const i=n.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,B1),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,B1),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(n,i,r){this._setClasses(n,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(n){const i=[];return this._elementInfo.forEach((r,s)=>{(s===n||r.checkChildren&&s.contains(n))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(n){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===n||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName||n.disabled)return!1;const s=n.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||t)(lt(yn),lt(ba),lt(JMe),lt(hi,8),lt(QMe,8))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const tTe=["text"],nTe=[[["mat-icon"]],"*"],iTe=["mat-icon","*"];function rTe(t,e){if(1&t&&ss(0,"mat-pseudo-checkbox",1),2&t){const n=$r();Oi("disabled",n.disabled)("state",n.selected?"checked":"unchecked")}}function sTe(t,e){1&t&&ss(0,"mat-pseudo-checkbox",3),2&t&&Oi("disabled",$r().disabled)}function oTe(t,e){if(1&t&&(Rn(0,"span",4),Lc(1),Nn()),2&t){const n=$r();bn(),r0("(",n.group.label,")")}}class YW{constructor(e,n,i,r,s){this._defaultMatcher=e,this.ngControl=n,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){const e=this.errorState,n=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=i?.isErrorState(r,n)??!1;s!==e&&(this.errorState=s,this._stateChanges.next())}}let fTe=(()=>{class t{isErrorState(n,i){return!!(n&&n.invalid&&(n.touched||i&&i.submitted))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var vc=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(vc||{});class pTe{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=vc.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const KW=Sv({passive:!0,capture:!0});class gTe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=Gu(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,i,r){const s=this._events.get(n);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,KW)})}removeHandler(e,n,i){const r=this._events.get(e);if(!r)return;const s=r.get(n);s&&(s.delete(i),0===s.size&&r.delete(n),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,KW)))}}const JW={enterDuration:225,exitDuration:150},ZW=Sv({passive:!0,capture:!0}),QW=["mousedown","touchstart"],e$=["mouseup","mouseleave","touchend","touchcancel"];class k1{static#e=this._eventManager=new gTe;constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=rh(i))}fadeInRipple(e,n,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...JW,...i.animation};i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);const o=i.radius||function _Te(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(e,n,r),a=e-r.left,c=n-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=c-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);const h=window.getComputedStyle(u),g=h.transitionDuration,m="none"===h.transitionProperty||"0s"===g||"0s, 0s"===g||0===r.width&&0===r.height,y=new pTe(this,u,i,m);u.style.transform="scale3d(1, 1, 1)",y.state=vc.FADING_IN,i.persistent||(this._mostRecentTransientRipple=y);let b=null;return!m&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const R=()=>this._finishRippleTransition(y),L=()=>this._destroyRipple(y);u.addEventListener("transitionend",R),u.addEventListener("transitioncancel",L),b={onTransitionEnd:R,onTransitionCancel:L}}),this._activeRipples.set(y,b),(m||!l)&&this._finishRippleTransition(y),y}fadeOutRipple(e){if(e.state===vc.FADING_OUT||e.state===vc.HIDDEN)return;const n=e.element,i={...JW,...e.config.animation};n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=vc.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=rh(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,QW.forEach(i=>{k1._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{e$.forEach(n=>{this._triggerElement.addEventListener(n,this,ZW)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===vc.FADING_IN?this._startFadeOutTransition(e):e.state===vc.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=vc.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=vc.HIDDEN,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=WW(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!$W(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===vc.VISIBLE||e.config.terminateOnPointerUp&&e.state===vc.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(QW.forEach(n=>k1._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&e$.forEach(n=>e.removeEventListener(n,this,ZW)))}}const yTe=new St("mat-ripple-global-options");let vTe=(()=>{class t{get disabled(){return this._disabled}set disabled(n){n&&this.fadeOutAllNonPersistent(),this._disabled=n,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(n){this._trigger=n,this._setupTriggerEventsIfEnabled()}constructor(n,i,r,s,o){this._elementRef=n,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new k1(this,i,n,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(n,i=0,r){return"number"==typeof n?this._rippleRenderer.fadeInRipple(n,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...n})}static#e=this.\u0275fac=function(i){return new(i||t)(st(ui),st(yn),st(ba),st(yTe,8),st(ic,8))};static#t=this.\u0275dir=Xt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&Er("mat-ripple-unbounded",r.unbounded)},inputs:{color:[Yt.None,"matRippleColor","color"],unbounded:[Yt.None,"matRippleUnbounded","unbounded"],centered:[Yt.None,"matRippleCentered","centered"],radius:[Yt.None,"matRippleRadius","radius"],animation:[Yt.None,"matRippleAnimation","animation"],disabled:[Yt.None,"matRippleDisabled","disabled"],trigger:[Yt.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return t})(),bTe=(()=>{class t{constructor(n){this._animationMode=n,this.state="unchecked",this.disabled=!1,this.appearance="full"}static#e=this.\u0275fac=function(i){return new(i||t)(st(ic,8))};static#t=this.\u0275cmp=gi({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(i,r){2&i&&Er("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal","minimal"===r.appearance)("mat-pseudo-checkbox-full","full"===r.appearance)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[Ls],decls:0,vars:0,template:function(i,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color);border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color);border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}return t})();const t$=new St("MAT_OPTION_PARENT_COMPONENT"),n$=new St("MatOptgroup");let wTe=0;class i${constructor(e,n=!1){this.source=e,this.isUserInput=n}}let r$=(()=>{class t{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(n){this._disabled=n}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(n,i,r,s){this._element=n,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+wTe++,this.onSelectionChange=new _n,this._stateChanges=new qt}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(n=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),n&&this._emitSelectionChangeEvent())}deselect(n=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),n&&this._emitSelectionChangeEvent())}focus(n,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(n){(13===n.keyCode||32===n.keyCode)&&!ih(n)&&(this._selectViaInteraction(),n.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const n=this.viewValue;n!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=n)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(n=!1){this.onSelectionChange.emit(new i$(this,n))}static#e=this.\u0275fac=function(i){return new(i||t)(st(ui),st(to),st(t$,8),st(n$,8))};static#t=this.\u0275cmp=gi({type:t,selectors:[["mat-option"]],viewQuery:function(i,r){if(1&i&&Do(tTe,7),2&i){let s;ar(s=cr())&&(r._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(i,r){1&i&&zi("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),2&i&&(vf("id",r.id),kr("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),Er("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[Yt.HasDecoratorInputTransform,"disabled","disabled",os]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[ml,Ls],ngContentSelectors:iTe,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(i,r){1&i&&(ka(nTe),Ri(0,rTe,1,2,"mat-pseudo-checkbox",1),Li(1),Rn(2,"span",2,0),Li(4,1),Nn(),Ri(5,sTe,1,1,"mat-pseudo-checkbox",3)(6,oTe,2,1,"span",4),ss(7,"div",5)),2&i&&(Fs(0,r.multiple?0:-1),bn(5),Fs(5,r.multiple||!r.selected||r.hideSingleSelectionIndicator?-1:5),bn(),Fs(6,r.group&&r.group._inert?6:-1),bn(),Oi("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[bTe,vTe],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})();const ATe=["addListener","removeListener"],STe=["addEventListener","removeEventListener"],CTe=["on","off"];function Fm(t,e,n,i){if(Ke(n)&&(i=n,n=void 0),i)return Fm(t,e,n).pipe(l1(i));const[r,s]=function ITe(t){return Ke(t.addEventListener)&&Ke(t.removeEventListener)}(t)?STe.map(o=>a=>t[o](e,a,n)):function MTe(t){return Ke(t.addListener)&&Ke(t.removeListener)}(t)?ATe.map(s$(t,e)):function TTe(t){return Ke(t.on)&&Ke(t.off)}(t)?CTe.map(s$(t,e)):[];if(!r&&MD(t))return xs(o=>Fm(o,e,n))(ws(t));if(!r)throw new TypeError("Invalid event target");return new At(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function s$(t,e){return n=>i=>t[n](e,i)}const Iv={schedule(t){let e=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:i}=Iv;i&&(e=i.requestAnimationFrame,n=i.cancelAnimationFrame);const r=e(s=>{n=void 0,t(s)});return new Bt(()=>n?.(r))},requestAnimationFrame(...t){const{delegate:e}=Iv;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){const{delegate:e}=Iv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0};new class RTe extends vP{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class DTe extends yP{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=Iv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:s}=e;null!=n&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==n&&(Iv.cancelAnimationFrame(n),e._scheduled=void 0)}});let EP,NTe=1;const j1={};function o$(t){return t in j1&&(delete j1[t],!0)}const PTe={setImmediate(t){const e=NTe++;return j1[e]=!0,EP||(EP=Promise.resolve()),EP.then(()=>o$(e)&&t()),e},clearImmediate(t){o$(t)}},{setImmediate:FTe,clearImmediate:LTe}=PTe,U1={setImmediate(...t){const{delegate:e}=U1;return(e?.setImmediate||FTe)(...t)},clearImmediate(t){const{delegate:e}=U1;return(e?.clearImmediate||LTe)(t)},delegate:void 0};new class kTe extends vP{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===n&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===n&&i.shift();)e.unsubscribe();throw r}}}(class BTe extends yP{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,i=0){return null!==i&&i>0?super.requestAsyncId(e,n,i):(e.actions.push(this),e._scheduled||(e._scheduled=U1.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,n,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,n,i);const{actions:s}=e;null!=n&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==n&&(U1.clearImmediate(n),e._scheduled=void 0)}});function AP(t=0,e,n=OMe){let i=-1;return null!=e&&(mH(e)?n=e:i=e),new At(r=>{let s=function VTe(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function a$(t,e=P1){return function UTe(t){return T((e,n)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const l=r;r=null,n.next(l)}o&&n.complete()},c=()=>{s=null,o&&n.complete()};e.subscribe(v(n,l=>{i=!0,r=l,s||ws(t(l)).subscribe(s=v(n,a,c))},()=>{o=!0,(!i||!s||s.closed)&&n.complete()}))})}(()=>AP(t,e))}let GTe=(()=>{class t{constructor(n,i,r){this._ngZone=n,this._platform=i,this._scrolled=new qt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(n){this.scrollContainers.has(n)||this.scrollContainers.set(n,n.elementScrolled().subscribe(()=>this._scrolled.next(n)))}deregister(n){const i=this.scrollContainers.get(n);i&&(i.unsubscribe(),this.scrollContainers.delete(n))}scrolled(n=20){return this._platform.isBrowser?new At(i=>{this._globalSubscription||this._addGlobalListener();const r=n>0?this._scrolled.pipe(a$(n)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):sn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((n,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(n,i){const r=this.getAncestorScrollContainers(n);return this.scrolled(i).pipe(yi(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(n){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,n)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(n,i){let r=rh(i),s=n.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Fm(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||t)(lt(yn),lt(ba),lt(hi,8))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),SP=(()=>{class t{constructor(n,i,r){this._platform=n,this._change=new qt,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(n.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const n=this._getWindow();n.removeEventListener("resize",this._changeListener),n.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const n={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),n}getViewportRect(){const n=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:n.top,left:n.left,bottom:n.top+r,right:n.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const n=this._document,i=this._getWindow(),r=n.documentElement,s=r.getBoundingClientRect();return{top:-s.top||n.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||n.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(n=20){return n>0?this._change.pipe(a$(n)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const n=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:n.innerWidth,height:n.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||t)(lt(ba),lt(yn),lt(hi,8))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const WTe=new St("cdk-dir-doc",{providedIn:"root",factory:function $Te(){return Ut(hi)}}),qTe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Dv=(()=>{class t{constructor(n){this.value="ltr",this.change=new _n,n&&(this.value=function XTe(t){const e=t?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?qTe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((n.body?n.body.dir:null)||(n.documentElement?n.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||t)(lt(WTe,8))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class CP{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class MP extends CP{constructor(e,n,i,r,s){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class V1 extends CP{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class YTe extends CP{constructor(e){super(),this.element=e instanceof ui?e.nativeElement:e}}class TP{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof MP?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof V1?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof YTe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class KTe extends TP{constructor(e,n,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Gi.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);-1!==r&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let H1=(()=>{class t extends TP{constructor(n,i,r){super(),this._componentFactoryResolver=n,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new _n,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(n){this.hasAttached()&&!n&&!this._isInitialized||(this.hasAttached()&&super.detach(),n&&super.attach(n),this._attachedPortal=n||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(n){n.setAttachedHost(this);const i=null!=n.viewContainerRef?n.viewContainerRef:this._viewContainerRef,s=(n.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(n.component),o=i.createComponent(s,i.length,n.injector||i.injector,n.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=n,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(n){n.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(n.templateRef,n.context,{injector:n.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=n,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const n=this._viewContainerRef.element.nativeElement;return n.nodeType===n.ELEMENT_NODE?n:n.parentNode}static#e=this.\u0275fac=function(i){return new(i||t)(st(Sd),st(Io),st(hi))};static#t=this.\u0275dir=Xt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[Yt.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[di]})}return t})();const c$=fMe();class JTe{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Cs(-this._previousScrollPosition.left),e.style.top=Cs(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),c$&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),c$&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}}class ZTe{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(yi(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class l${enable(){}disable(){}attach(){}}function IP(t,e){return e.some(n=>t.bottom<n.top||t.top>n.bottom||t.right<n.left||t.left>n.right)}function u$(t,e){return e.some(n=>t.top<n.top||t.bottom>n.bottom||t.left<n.left||t.right>n.right)}class QTe{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();IP(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let eIe=(()=>{class t{constructor(n,i,r,s){this._scrollDispatcher=n,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new l$,this.close=o=>new ZTe(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new JTe(this._viewportRuler,this._document),this.reposition=o=>new QTe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(i){return new(i||t)(lt(GTe),lt(SP),lt(yn),lt(hi))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class DP{constructor(e){if(this.scrollStrategy=new l$,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const n=Object.keys(e);for(const i of n)void 0!==e[i]&&(this[i]=e[i])}}}class tIe{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}}let d$=(()=>{class t{constructor(n){this._attachedOverlays=[],this._document=n}ngOnDestroy(){this.detach()}add(n){this.remove(n),this._attachedOverlays.push(n)}remove(n){const i=this._attachedOverlays.indexOf(n);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||t)(lt(hi))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),nIe=(()=>{class t extends d${constructor(n,i){super(n),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(n){super.add(n),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||t)(lt(hi),lt(yn,8))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),iIe=(()=>{class t extends d${constructor(n,i,r){super(n),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Gu(s)},this._clickListener=s=>{const o=Gu(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const u=c[l];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(n){if(super.add(n),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const n=this._document.body;n.removeEventListener("pointerdown",this._pointerDownListener,!0),n.removeEventListener("click",this._clickListener,!0),n.removeEventListener("auxclick",this._clickListener,!0),n.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(n.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(n){n.addEventListener("pointerdown",this._pointerDownListener,!0),n.addEventListener("click",this._clickListener,!0),n.addEventListener("auxclick",this._clickListener,!0),n.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||t)(lt(hi),lt(ba),lt(yn,8))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),G1=(()=>{class t{constructor(n,i){this._platform=i,this._document=n}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const n="cdk-overlay-container";if(this._platform.isBrowser||DW()){const r=this._document.querySelectorAll(`.${n}[platform="server"], .${n}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(n),DW()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||t)(lt(hi),lt(ba))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class z1{constructor(e,n,i,r,s,o,a,c,l,u=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new qt,this._attachments=new qt,this._detachments=new qt,this._locationChanges=Bt.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new qt,this._outsidePointerEvents=new qt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Si(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof n?.onDestroy&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Cs(this._config.width),e.height=Cs(this._config.height),e.minWidth=Cs(this._config.minWidth),e.minHeight=Cs(this._config.minHeight),e.maxWidth=Cs(this._config.maxWidth),e.maxHeight=Cs(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){const r=LW(n||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe($a(jc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const h$="cdk-overlay-connected-position-bounding-box",rIe=/([A-Za-z%]+)$/;class sIe{get positions(){return this._preferredPositions}constructor(e,n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new qt,this._resizeSubscription=Bt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(h$),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,n,a),u=this._getOverlayFit(l,n,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(u,l,i)?s.push({position:a,origin:c,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:n})}if(s.length){let a=null,c=-1;for(const l of s){const u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Qf(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(h$),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return n.left<0&&(r-=n.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(e,n,i){let r,s;return r="center"==i.overlayX?-n.width/2:"start"===i.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,s="center"==i.overlayY?-n.height/2:"top"==i.overlayY?0:-n.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,n,i,r){const s=p$(n);let{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let f=0-a,g=a+s.height-i.height,m=this._subtractOverflows(s.width,0-o,o+s.width-i.width),y=this._subtractOverflows(s.height,f,g),b=m*y;return{visibleArea:b,isCompletelyWithinViewport:s.width*s.height===b,fitsInViewportVertically:y===s.height,fitsInViewportHorizontally:m==s.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){const r=i.bottom-n.y,s=i.right-n.x,o=f$(this._overlayRef.getConfig().minHeight),a=f$(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=p$(n),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0);let u=0,h=0;return u=r.width<=s.width?l||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,h=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){const i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!function oIe(t,e){return t===e||t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}(this._lastScrollVisibility,i)){const r=new tIe(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,h,f;if("top"===n.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===n.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const g=Math.min(i.bottom-e.y+i.top,e.y),m=this._lastBoundingBoxSize.height;s=2*g,o=e.y-g,s>m&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-m/2)}if("end"===n.overlayX&&!r||"start"===n.overlayX&&r)f=i.width-e.x+2*this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===n.overlayX&&!r||"end"===n.overlayX&&r)h=e.x,u=i.right-e.x;else{const g=Math.min(i.right-e.x+i.left,e.x),m=this._lastBoundingBoxSize.width;u=2*g,h=e.x-g,u>m&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-m/2)}return{top:o,left:h,bottom:a,right:f,width:u,height:s}}_setBoundingBoxStyles(e,n){const i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Cs(i.height),r.top=Cs(i.top),r.bottom=Cs(i.bottom),r.width=Cs(i.width),r.left=Cs(i.left),r.right=Cs(i.right),r.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",r.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Cs(s)),o&&(r.maxWidth=Cs(o))}this._lastBoundingBoxSize=i,Qf(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Qf(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Qf(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();Qf(i,this._getExactOverlayY(n,e,u)),Qf(i,this._getExactOverlayX(n,e,u))}else i.position="static";let a="",c=this._getOffset(n,"x"),l=this._getOffset(n,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=Cs(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=Cs(o.maxWidth):s&&(i.maxWidth="")),Qf(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Cs(s.y),r}_getExactOverlayX(e,n,i){let o,r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Cs(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:u$(e,i),isOriginOutsideView:IP(e,i),isOverlayClipped:u$(n,i),isOverlayOutsideView:IP(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return"x"===n?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&LW(e).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof ui)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}}function Qf(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function f$(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(rIe);return n&&"px"!==n?null:parseFloat(e)}return t||null}function p$(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}const g$="cdk-global-overlay-wrapper";class aIe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(g$),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,h=this._xOffset,f="rtl"===this._overlayRef.getConfig().direction;let g="",m="",y="";c?y="flex-start":"center"===u?(y="center",f?m=h:g=h):f?"left"===u||"end"===u?(y="flex-end",g=h):("right"===u||"start"===u)&&(y="flex-start",m=h):"left"===u||"start"===u?(y="flex-start",g=h):("right"===u||"end"===u)&&(y="flex-end",m=h),e.position=this._cssPosition,e.marginLeft=c?"0":g,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":m,n.justifyContent=y,n.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(g$),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let cIe=(()=>{class t{constructor(n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new aIe}flexibleConnectedTo(n){return new sIe(n,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||t)(lt(SP),lt(hi),lt(ba),lt(G1))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),lIe=0,$c=(()=>{class t{constructor(n,i,r,s,o,a,c,l,u,h,f,g){this.scrollStrategies=n,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=l,this._directionality=u,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=g}create(n){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new DP(n);return o.direction=o.direction||this._directionality.value,new z1(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(n){const i=this._document.createElement("div");return i.id="cdk-overlay-"+lIe++,i.classList.add("cdk-overlay-pane"),n.appendChild(i),i}_createHostElement(){const n=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(n),n}_createPortalOutlet(n){return this._appRef||(this._appRef=this._injector.get(Eu)),new KTe(n,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||t)(lt(eIe),lt(G1),lt(Sd),lt(cIe),lt(nIe),lt(Gi),lt(yn),lt(hi),lt(Dv),lt(Sf),lt(iIe),lt(ic,8))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var wa=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(wa||{});function Rv(t,e){return{type:wa.Trigger,name:t,definitions:e,options:{}}}function sh(t,e=null){return{type:wa.Animate,styles:e,timings:t}}function RP(t,e=null){return{type:wa.Group,steps:t,options:e}}function xa(t){return{type:wa.Style,styles:t,offset:null}}function oh(t,e,n){return{type:wa.State,name:t,styles:e,options:n}}function ep(t,e,n=null){return{type:wa.Transition,expr:t,animation:e,options:n}}function Ov(t){return new At(e=>{ws(t()).subscribe(e)})}class mIe{constructor(e){this._box=e,this._destroyed=new qt,this._resizeSubject=new qt,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(n=>this._resizeSubject.next(n)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new At(n=>{const i=this._resizeSubject.subscribe(n);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),i.unsubscribe(),this._elementObservables.delete(e)}}).pipe(yi(n=>n.some(i=>i.target===e)),Qo({bufferSize:1,refCount:!0}),$a(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let _Ie=(()=>{class t{constructor(){this._observers=new Map,this._ngZone=Ut(yn)}ngOnDestroy(){for(const[,n]of this._observers)n.destroy();this._observers.clear()}observe(n,i){const r=i?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new mIe(r)),this._observers.get(r).observe(n)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const yIe=["notch"],vIe=["matFormFieldNotchedOutline",""],bIe=["*"],wIe=["textField"],xIe=["iconPrefixContainer"],EIe=["textPrefixContainer"],AIe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],SIe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function CIe(t,e){1&t&&ss(0,"span",17)}function MIe(t,e){if(1&t&&(Rn(0,"label",16),Li(1,1),Ri(2,CIe,1,0,"span",17),Nn()),2&t){const n=$r(2);Oi("floating",n._shouldLabelFloat())("monitorResize",n._hasOutline())("id",n._labelId),kr("for",n._control.id),bn(2),Fs(2,!n.hideRequiredMarker&&n._control.required?2:-1)}}function TIe(t,e){1&t&&Ri(0,MIe,3,5,"label",16),2&t&&Fs(0,$r()._hasFloatingLabel()?0:-1)}function IIe(t,e){1&t&&ss(0,"div",5)}function DIe(t,e){}function RIe(t,e){1&t&&Ri(0,DIe,0,0,"ng-template",11),2&t&&($r(2),Oi("ngTemplateOutlet",iE(1)))}function OIe(t,e){if(1&t&&(Rn(0,"div",7),Ri(1,RIe,1,1,null,11),Nn()),2&t){const n=$r();Oi("matFormFieldNotchedOutlineOpen",n._shouldLabelFloat()),bn(),Fs(1,n._forceDisplayInfixLabel()?-1:1)}}function NIe(t,e){1&t&&(Rn(0,"div",8,2),Li(2,2),Nn())}function PIe(t,e){1&t&&(Rn(0,"div",9,3),Li(2,3),Nn())}function FIe(t,e){}function LIe(t,e){1&t&&Ri(0,FIe,0,0,"ng-template",11),2&t&&($r(),Oi("ngTemplateOutlet",iE(1)))}function BIe(t,e){1&t&&(Rn(0,"div",12),Li(1,4),Nn())}function kIe(t,e){1&t&&(Rn(0,"div",13),Li(1,5),Nn())}function jIe(t,e){1&t&&ss(0,"div",14)}function UIe(t,e){1&t&&(Rn(0,"div",18),Li(1,6),Nn()),2&t&&Oi("@transitionMessages",$r()._subscriptAnimationState)}function VIe(t,e){if(1&t&&(Rn(0,"mat-hint",20),Lc(1),Nn()),2&t){const n=$r(2);Oi("id",n._hintLabelId),bn(),Rd(n.hintLabel)}}function HIe(t,e){if(1&t&&(Rn(0,"div",19),Ri(1,VIe,2,2,"mat-hint",20),Li(2,7),ss(3,"div",21),Li(4,8),Nn()),2&t){const n=$r();Oi("@transitionMessages",n._subscriptAnimationState),bn(),Fs(1,n.hintLabel?1:-1)}}let y$=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Xt({type:t,selectors:[["mat-label"]],standalone:!0})}return t})();const GIe=new St("MatError");let zIe=0,v$=(()=>{class t{constructor(){this.align="start",this.id="mat-mdc-hint-"+zIe++}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Xt({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(i,r){2&i&&(vf("id",r.id),kr("align",null),Er("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"},standalone:!0})}return t})();const b$=new St("MatPrefix");let WIe=(()=>{class t{constructor(){this._isText=!1}set _isTextSelector(n){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Xt({type:t,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:[Yt.None,"matTextPrefix","_isTextSelector"]},standalone:!0,features:[Ni([{provide:b$,useExisting:t}])]})}return t})();const w$=new St("MatSuffix");let $Ie=(()=>{class t{constructor(){this._isText=!1}set _isTextSelector(n){this._isText=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Xt({type:t,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[Yt.None,"matTextSuffix","_isTextSelector"]},standalone:!0,features:[Ni([{provide:w$,useExisting:t}])]})}return t})();const x$=new St("FloatingLabelParent");let E$=(()=>{class t{get floating(){return this._floating}set floating(n){this._floating=n,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(n){this._monitorResize=n,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(n){this._elementRef=n,this._floating=!1,this._monitorResize=!1,this._resizeObserver=Ut(_Ie),this._ngZone=Ut(yn),this._parent=Ut(x$),this._resizeSubscription=new Bt}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function qIe(t){if(null!==t.offsetParent)return t.scrollWidth;const n=t.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);const i=n.scrollWidth;return n.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(i){return new(i||t)(st(ui))};static#t=this.\u0275dir=Xt({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(i,r){2&i&&Er("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}return t})();const A$="mdc-line-ripple--active",W1="mdc-line-ripple--deactivating";let S$=(()=>{class t{constructor(n,i){this._elementRef=n,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,o=s.contains(W1);"opacity"===r.propertyName&&o&&s.remove(A$,W1)},i.runOutsideAngular(()=>{n.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const n=this._elementRef.nativeElement.classList;n.remove(W1),n.add(A$)}deactivate(){this._elementRef.nativeElement.classList.add(W1)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(i){return new(i||t)(st(ui),st(yn))};static#t=this.\u0275dir=Xt({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}return t})(),C$=(()=>{class t{constructor(n,i){this._elementRef=n,this._ngZone=i,this.open=!1}ngAfterViewInit(){const n=this._elementRef.nativeElement.querySelector(".mdc-floating-label");n?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(n.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>n.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(n){this._notch.nativeElement.style.width=this.open&&n?`calc(${n}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(i){return new(i||t)(st(ui),st(yn))};static#t=this.\u0275cmp=gi({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(i,r){if(1&i&&Do(yIe,5),2&i){let s;ar(s=cr())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(i,r){2&i&&Er("mdc-notched-outline--notched",r.open)},inputs:{open:[Yt.None,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[Ls],attrs:vIe,ngContentSelectors:bIe,decls:5,vars:0,consts:[["notch",""],[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(i,r){1&i&&(ka(),ss(0,"div",1),Rn(1,"div",2,0),Li(3),Nn(),ss(4,"div",3))},encapsulation:2,changeDetection:0})}return t})();const XIe={transitionMessages:Rv("transitionMessages",[oh("enter",xa({opacity:1,transform:"translateY(0%)"})),ep("void => enter",[xa({opacity:0,transform:"translateY(-5px)"}),sh("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let M$=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Xt({type:t})}return t})();const OP=new St("MatFormField"),YIe=new St("MAT_FORM_FIELD_DEFAULT_OPTIONS");let T$=0,ZIe=(()=>{class t{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(n){this._hideRequiredMarker=F1(n)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(n){n!==this._floatLabel&&(this._floatLabel=n,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(n){const i=this._appearance;this._appearance=n||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(n){this._subscriptSizing=n||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(n){this._hintLabel=n,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(n){this._explicitFormFieldControl=n}constructor(n,i,r,s,o,a,c,l){this._elementRef=n,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=c,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+T$++,this._hintLabelId="mat-mdc-hint-"+T$++,this._subscriptAnimationState="",this._destroyed=new qt,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const n=this._control;n.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${n.controlType}`),n.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),n.ngControl&&n.ngControl.valueChanges&&n.ngControl.valueChanges.pipe($a(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(n=>!n._isText),this._hasTextPrefix=!!this._prefixChildren.find(n=>n._isText),this._hasIconSuffix=!!this._suffixChildren.find(n=>!n._isText),this._hasTextSuffix=!!this._suffixChildren.find(n=>n._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),jc(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe($a(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe($a(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(n){const i=this._control?this._control.ngControl:null;return i&&i[n]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let n=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&n.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?n.push(i.id):this._hintLabel&&n.push(this._hintLabelId),r&&n.push(r.id)}else this._errorChildren&&n.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(n)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const n=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(n.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0;n.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const n=this._elementRef.nativeElement;if(n.getRootNode){const i=n.getRootNode();return i&&i!==n}return document.documentElement.contains(n)}static#e=this.\u0275fac=function(i){return new(i||t)(st(ui),st(to),st(yn),st(Dv),st(ba),st(YIe,8),st(ic,8),st(hi))};static#t=this.\u0275cmp=gi({type:t,selectors:[["mat-form-field"]],contentQueries:function(i,r,s){if(1&i&&(uc(s,y$,5),uc(s,y$,7),uc(s,M$,5),uc(s,b$,5),uc(s,w$,5),uc(s,GIe,5),uc(s,v$,5)),2&i){let o;ar(o=cr())&&(r._labelChildNonStatic=o.first),ar(o=cr())&&(r._labelChildStatic=o.first),ar(o=cr())&&(r._formFieldControl=o.first),ar(o=cr())&&(r._prefixChildren=o),ar(o=cr())&&(r._suffixChildren=o),ar(o=cr())&&(r._errorChildren=o),ar(o=cr())&&(r._hintChildren=o)}},viewQuery:function(i,r){if(1&i&&(Do(wIe,5),Do(xIe,5),Do(EIe,5),Do(E$,5),Do(C$,5),Do(S$,5)),2&i){let s;ar(s=cr())&&(r._textField=s.first),ar(s=cr())&&(r._iconPrefixContainer=s.first),ar(s=cr())&&(r._textPrefixContainer=s.first),ar(s=cr())&&(r._floatingLabel=s.first),ar(s=cr())&&(r._notchedOutline=s.first),ar(s=cr())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(i,r){2&i&&Er("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[Ni([{provide:OP,useExisting:t},{provide:x$,useExisting:t}]),Ls],ngContentSelectors:SIe,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(i,r){if(1&i){const s=Dd();ka(AIe),Ri(0,TIe,1,1,"ng-template",null,0,Kj),Rn(2,"div",4,1),zi("click",function(a){return Gs(s),ms(r._control.onContainerClick(a))}),Ri(4,IIe,1,0,"div",5),Rn(5,"div",6),Ri(6,OIe,2,2,"div",7)(7,NIe,3,0,"div",8)(8,PIe,3,0,"div",9),Rn(9,"div",10),Ri(10,LIe,1,1,null,11),Li(11),Nn(),Ri(12,BIe,2,0,"div",12)(13,kIe,2,0,"div",13),Nn(),Ri(14,jIe,1,0,"div",14),Nn(),Rn(15,"div",15),Ri(16,UIe,2,1)(17,HIe,5,2),Nn()}if(2&i){let s;bn(2),Er("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),bn(2),Fs(4,r._hasOutline()||r._control.disabled?-1:4),bn(2),Fs(6,r._hasOutline()?6:-1),bn(),Fs(7,r._hasIconPrefix?7:-1),bn(),Fs(8,r._hasTextPrefix?8:-1),bn(2),Fs(10,!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),bn(2),Fs(12,r._hasTextSuffix?12:-1),bn(),Fs(13,r._hasIconSuffix?13:-1),bn(),Fs(14,r._hasOutline()?-1:14),bn(),Er("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),bn(),Fs(16,"error"===(s=r._getDisplayedMessages())?16:"hint"===s?17:-1)}},dependencies:[E$,C$,IV,S$,v$],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 96px/0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px*2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-hover-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-hover-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-hover-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-hover-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(.75*var(--mdc-outlined-text-field-label-text-size))}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mdc-outlined-text-field-label-text-size)}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color)}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color)}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color)}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[XIe.transitionMessages]},changeDetection:0})}return t})();function NP(t){return Y(()=>t)}function R$(t,e){return e?n=>u1(e.pipe(Si(1),function QIe(){return T((t,e)=>{t.subscribe(v(e,wt))})}()),n.pipe(R$(t))):xs((n,i)=>ws(t(n,i)).pipe(Si(1),NP(n)))}function O$(t,e=P1){const n=AP(t,e);return R$(()=>n)}const eDe=["panel"],tDe=["*"];function nDe(t,e){if(1&t){const n=Dd();Rn(0,"div",1,0),zi("@panelAnimation.done",function(r){return Gs(n),ms($r()._animationDone.next(r))}),Li(2),Nn()}if(2&t){const n=e.id,i=$r();Oi("id",i.id)("ngClass",i._classList)("@panelAnimation",i.isOpen?"visible":"hidden"),kr("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(n))}}const iDe=Rv("panelAnimation",[oh("void, hidden",xa({opacity:0,transform:"scaleY(0.8)"})),ep(":enter, hidden => visible",[RP([sh("0.03s linear",xa({opacity:1})),sh("0.12s cubic-bezier(0, 0, 0.2, 1)",xa({transform:"scaleY(1)"}))])]),ep(":leave, visible => hidden",[sh("0.075s linear",xa({opacity:0}))])]);let rDe=0;class sDe{constructor(e,n){this.source=e,this.option=n}}const N$=new St("mat-autocomplete-default-options",{providedIn:"root",factory:function oDe(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}});let aDe=(()=>{class t{get isOpen(){return this._isOpen&&this.showPanel}_setColor(n){this._color=n,this._setThemeClasses(this._classList)}set classList(n){this._classList=n&&n.length?function FMe(t,e=/\s+/){const n=[];if(null!=t){const i=Array.isArray(t)?t:`${t}`.split(e);for(const r of i){const s=`${r}`.trim();s&&n.push(s)}}return n}(n).reduce((i,r)=>(i[r]=!0,i),{}):{},this._setVisibilityClasses(this._classList),this._setThemeClasses(this._classList),this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(n){this._hideSingleSelectionIndicator=n,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const n of this.options)n._changeDetectorRef.markForCheck()}constructor(n,i,r,s){this._changeDetectorRef=n,this._elementRef=i,this._defaults=r,this._activeOptionChanges=Bt.EMPTY,this._visibleClass="mat-mdc-autocomplete-visible",this._hiddenClass="mat-mdc-autocomplete-hidden",this._animationDone=new _n,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new _n,this.opened=new _n,this.closed=new _n,this.optionActivated=new _n,this._classList={},this.id="mat-autocomplete-"+rDe++,this.inertGroups=s?.SAFARI||!1,this.autoActiveFirstOption=!!r.autoActiveFirstOption,this.autoSelectActiveOption=!!r.autoSelectActiveOption,this.requireSelection=!!r.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new kMe(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(n=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[n]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(n){this.panel&&(this.panel.nativeElement.scrollTop=n)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(n){const i=new sDe(this,n);this.optionSelected.emit(i)}_getPanelAriaLabelledby(n){return this.ariaLabel?null:this.ariaLabelledby?(n?n+" ":"")+this.ariaLabelledby:n}_setVisibilityClasses(n){n[this._visibleClass]=this.showPanel,n[this._hiddenClass]=!this.showPanel}_setThemeClasses(n){n["mat-primary"]="primary"===this._color,n["mat-warn"]="warn"===this._color,n["mat-accent"]="accent"===this._color}_skipPredicate(){return!1}static#e=this.\u0275fac=function(i){return new(i||t)(st(to),st(ui),st(N$),st(ba))};static#t=this.\u0275cmp=gi({type:t,selectors:[["mat-autocomplete"]],contentQueries:function(i,r,s){if(1&i&&(uc(s,r$,5),uc(s,n$,5)),2&i){let o;ar(o=cr())&&(r.options=o),ar(o=cr())&&(r.optionGroups=o)}},viewQuery:function(i,r){if(1&i&&(Do(cc,7),Do(eDe,5)),2&i){let s;ar(s=cr())&&(r.template=s.first),ar(s=cr())&&(r.panel=s.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[Yt.None,"aria-label","ariaLabel"],ariaLabelledby:[Yt.None,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[Yt.HasDecoratorInputTransform,"autoActiveFirstOption","autoActiveFirstOption",os],autoSelectActiveOption:[Yt.HasDecoratorInputTransform,"autoSelectActiveOption","autoSelectActiveOption",os],requireSelection:[Yt.HasDecoratorInputTransform,"requireSelection","requireSelection",os],panelWidth:"panelWidth",disableRipple:[Yt.HasDecoratorInputTransform,"disableRipple","disableRipple",os],classList:[Yt.None,"class","classList"],hideSingleSelectionIndicator:[Yt.HasDecoratorInputTransform,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",os]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[Ni([{provide:t$,useExisting:t}]),ml,Ls],ngContentSelectors:tDe,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id","ngClass"]],template:function(i,r){1&i&&(ka(),Ri(0,nDe,3,5,"ng-template"))},dependencies:[AV],styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape);box-shadow:var(--mat-autocomplete-container-elevation-shadow);background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[iDe]},changeDetection:0})}return t})();const cDe={provide:Wc,useExisting:pi(()=>F$),multi:!0},P$=new St("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{const t=Ut($c);return()=>t.scrollStrategies.reposition()}});let F$=(()=>{class t{constructor(n,i,r,s,o,a,c,l,u,h,f){this._element=n,this._overlay=i,this._viewContainerRef=r,this._zone=s,this._changeDetectorRef=o,this._dir=c,this._formField=l,this._document=u,this._viewportRuler=h,this._defaults=f,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=Bt.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new qt,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=Ov(()=>{const g=this.autocomplete?this.autocomplete.options:null;return g?g.changes.pipe(Bl(g),Ki(()=>jc(...g.map(m=>m.onSelectionChange)))):this._zone.onStable.pipe(Si(1),Ki(()=>this.optionSelections))}),this._handlePanelKeydown=g=>{(27===g.keyCode&&!ih(g)||38===g.keyCode&&ih(g,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),g.stopPropagation(),g.preventDefault())},this._trackedModal=null,this._scrollStrategy=a}ngAfterViewInit(){const n=this._getWindow();typeof n<"u"&&this._zone.runOutsideAngular(()=>n.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(n){n.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const n=this._getWindow();typeof n<"u"&&n.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal)&&bP(this._trackedModal,"aria-owns",this.autocomplete.id)}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return jc(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(yi(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(yi(()=>this._overlayAttached)):sn()).pipe(Y(n=>n instanceof i$?n:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return jc(Fm(this._document,"click"),Fm(this._document,"auxclick"),Fm(this._document,"touchend")).pipe(yi(n=>{const i=Gu(n),r=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,s=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!r||!r.contains(i))&&(!s||!s.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(n){Promise.resolve(null).then(()=>this._assignOptionValue(n))}registerOnChange(n){this._onChange=n}registerOnTouched(n){this._onTouched=n}setDisabledState(n){this._element.nativeElement.disabled=n}_handleKeydown(n){const i=n.keyCode,r=ih(n);if(27===i&&!r&&n.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&13===i&&this.panelOpen&&!r)this.activeOption._selectViaInteraction(),this._resetActiveItem(),n.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,o=38===i||40===i;9===i||o&&!r&&this.panelOpen?this.autocomplete._keyManager.onKeydown(n):o&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(o||this.autocomplete._keyManager.activeItem!==s)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(n){let i=n.target,r=i.value;if("number"===i.type&&(r=""==r?null:parseFloat(r)),this._previousValue!==r){if(this._previousValue=r,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(r),r){if(this.panelOpen&&!this.autocomplete.requireSelection){const s=this.autocomplete.options?.find(o=>o.selected);s&&r!==this._getDisplayValue(s.value)&&s.deselect(!1)}}else this._clearPreviousSelectedOption(null,!1);if(this._canOpen()&&this._document.activeElement===n.target){const s=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(s)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(n=!1){this._formField&&"auto"===this._formField.floatLabel&&(n?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){return jc(this._zone.onStable.pipe(Si(1)),this.autocomplete.options.changes.pipe(br(()=>this._positionStrategy.reapplyLastPosition()),O$(0))).pipe(Ki(()=>(this._zone.run(()=>{const r=this.panelOpen;this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),r!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit())}),this.panelClosingActions)),Si(1)).subscribe(r=>this._setValueAndClose(r))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(n){const i=this.autocomplete;return i&&i.displayWith?i.displayWith(n):n}_assignOptionValue(n){const i=this._getDisplayValue(n);null==n&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(i??"")}_updateNativeInputValue(n){this._formField?this._formField._control.value=n:this._element.nativeElement.value=n,this._previousValue=n}_setValueAndClose(n){const i=this.autocomplete,r=n?n.source:this._pendingAutoselectedOption;r?(this._clearPreviousSelectedOption(r),this._assignOptionValue(r.value),this._onChange(r.value),i._emitSelectEvent(r),this._element.nativeElement.focus()):i.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),i._animationDone?i._animationDone.pipe(Si(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(n,i){this.autocomplete?.options?.forEach(r=>{r!==n&&r.selected&&r.deselect(i)})}_openPanelInternal(n=this._element.nativeElement.value){this._attachOverlay(n),this._floatLabel(),this._trackedModal&&kW(this._trackedModal,"aria-owns",this.autocomplete.id)}_attachOverlay(n){let i=this._overlayRef;i?(this._positionStrategy.setOrigin(this._getConnectedElement()),i.updateSize({width:this._getPanelWidth()})):(this._portal=new V1(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),i=this._overlay.create(this._getOverlayConfig()),this._overlayRef=i,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&i&&i.updateSize({width:this._getPanelWidth()})})),i&&!i.hasAttached()&&(i.attach(this._portal),this._valueOnAttach=n,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());const r=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&r!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){const n=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=n.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=n.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new DP({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){const n=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(n),this._positionStrategy=n,n}_setStrategyPositions(n){const i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],r=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:r},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:r}];let o;o="above"===this.position?s:"below"===this.position?i:[...i,...s],n.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const n=this.autocomplete;if(n.autoActiveFirstOption){let i=-1;for(let r=0;r<n.options.length;r++)if(!n.options.get(r).disabled){i=r;break}n._keyManager.setActiveItem(i)}else n._keyManager.setActiveItem(-1)}_canOpen(){const n=this._element.nativeElement;return!n.readOnly&&!n.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(n){const i=this.autocomplete,r=function xTe(t,e,n){if(n.length){let i=e.toArray(),r=n.toArray(),s=0;for(let o=0;o<t+1;o++)i[o].group&&i[o].group===r[s]&&s++;return s}return 0}(n,i.options,i.optionGroups);if(0===n&&1===r)i._setScrollTop(0);else if(i.panel){const s=i.options.toArray()[n];if(s){const o=s._getHostElement(),a=function ETe(t,e,n,i){return t<n?t:t+e>n+i?Math.max(0,t-i+e):n}(o.offsetTop,o.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(a)}}}_applyModalPanelOwnership(){const n=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!n)return;const i=this.autocomplete.id;this._trackedModal&&bP(this._trackedModal,"aria-owns",i),kW(n,"aria-owns",i),this._trackedModal=n}_clearFromModal(){this._trackedModal&&(bP(this._trackedModal,"aria-owns",this.autocomplete.id),this._trackedModal=null)}static#e=this.\u0275fac=function(i){return new(i||t)(st(ui),st($c),st(Io),st(yn),st(to),st(P$),st(Dv,8),st(OP,9),st(hi,8),st(SP),st(N$,8))};static#t=this.\u0275dir=Xt({type:t,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(i,r){1&i&&zi("focusin",function(){return r._handleFocus()})("blur",function(){return r._onTouched()})("input",function(o){return r._handleInput(o)})("keydown",function(o){return r._handleKeydown(o)})("click",function(){return r._handleClick()}),2&i&&kr("autocomplete",r.autocompleteAttribute)("role",r.autocompleteDisabled?null:"combobox")("aria-autocomplete",r.autocompleteDisabled?null:"list")("aria-activedescendant",r.panelOpen&&r.activeOption?r.activeOption.id:null)("aria-expanded",r.autocompleteDisabled?null:r.panelOpen.toString())("aria-controls",r.autocompleteDisabled||!r.panelOpen||null==r.autocomplete?null:r.autocomplete.id)("aria-haspopup",r.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[Yt.None,"matAutocomplete","autocomplete"],position:[Yt.None,"matAutocompletePosition","position"],connectedTo:[Yt.None,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[Yt.None,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[Yt.HasDecoratorInputTransform,"matAutocompleteDisabled","autocompleteDisabled",os]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[Ni([cDe]),ml,Lr]})}return t})();const L$=Sv({passive:!0});let uDe=(()=>{class t{constructor(n,i){this._platform=n,this._ngZone=i,this._monitoredElements=new Map}monitor(n){if(!this._platform.isBrowser)return Ro;const i=rh(n),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new qt,o="cdk-text-field-autofilled",a=c=>{"cdk-text-field-autofill-start"!==c.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===c.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:c.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:c.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,L$),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,L$)}}),s}stopMonitoring(n){const i=rh(n),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((n,i)=>this.stopMonitoring(i))}static#e=this.\u0275fac=function(i){return new(i||t)(lt(ba),lt(yn))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const dDe=new St("MAT_INPUT_VALUE_ACCESSOR"),hDe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let fDe=0,pDe=(()=>{class t{get disabled(){return this._disabled}set disabled(n){this._disabled=F1(n),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(n){this._id=n||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(wCe.required)??!1}set required(n){this._required=F1(n)}get type(){return this._type}set type(n){this._type=n||"text",this._validateType(),!this._isTextarea&&IW().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(n){this._errorStateTracker.matcher=n}get value(){return this._inputValueAccessor.value}set value(n){n!==this.value&&(this._inputValueAccessor.value=n,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(n){this._readonly=F1(n)}get errorState(){return this._errorStateTracker.errorState}set errorState(n){this._errorStateTracker.errorState=n}constructor(n,i,r,s,o,a,c,l,u,h){this._elementRef=n,this._platform=i,this.ngControl=r,this._autofillMonitor=l,this._formField=h,this._uid="mat-input-"+fDe++,this.focused=!1,this.stateChanges=new qt,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(m=>IW().has(m)),this._iOSKeyupListener=m=>{const y=m.target;!y.value&&0===y.selectionStart&&0===y.selectionEnd&&(y.setSelectionRange(1,1),y.setSelectionRange(0,0))};const f=this._elementRef.nativeElement,g=f.nodeName.toLowerCase();this._inputValueAccessor=c||f,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{n.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new YW(a,r,o,s,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===g,this._isTextarea="textarea"===g,this._isInFormField=!!h,this._isNativeSelect&&(this.controlType=f.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(n=>{this.autofilled=n.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(n){this._elementRef.nativeElement.focus(n)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(n){n!==this.focused&&(this.focused=n,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const n=this._elementRef.nativeElement.value;this._previousNativeValue!==n&&(this._previousNativeValue=n,this.stateChanges.next())}_dirtyCheckPlaceholder(){const n=this._getPlaceholder();if(n!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=n,n?i.setAttribute("placeholder",n):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){hDe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let n=this._elementRef.nativeElement.validity;return n&&n.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const n=this._elementRef.nativeElement,i=n.options[0];return this.focused||n.multiple||!this.empty||!!(n.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(n){n.length?this._elementRef.nativeElement.setAttribute("aria-describedby",n.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const n=this._elementRef.nativeElement;return this._isNativeSelect&&(n.multiple||n.size>1)}static#e=this.\u0275fac=function(i){return new(i||t)(st(ui),st(ba),st(Hu,10),st(xv,8),st(D1,8),st(fTe),st(dDe,10),st(uDe),st(yn),st(OP,8))};static#t=this.\u0275dir=Xt({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(i,r){1&i&&zi("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&i&&(vf("id",r.id)("disabled",r.disabled)("required",r.required),kr("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Er("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[Yt.None,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[Ni([{provide:M$,useExisting:t}]),Lr]})}return t})();function B$(t,e){return t>=0&&t<e?t:t>=e?e:t+e<0?0:t+e}function mDe(t,e){if(1&t&&(Rn(0,"span"),Lc(1),Nn()),2&t){const n=e.$implicit;(function Nc(t){Fc(C3,aQ,t,!1)})(n.styles),yf(n.classes),bn(),r0(" ",n.text,"\n")}}let _De=(()=>{class t{constructor(){this.clsName="ccf-decorated-text",this.segments=[]}ngOnChanges(n){("text"in n||"decorations"in n)&&(this.segments=this.createSegments())}createSegments(){const{text:n}=this;if(!n)return[this.makeUndecoratedSegment(n)];const i=this.getNormalizedDecorations();if(0===i.length)return[this.makeUndecoratedSegment(n)];const r=this.createStackOps(i),s=[];let o=[],a=0;0===r[0].index&&(o=this.updateStack(o,r.shift()));for(const c of r)s.push(this.makeDecoratedSegment(n.slice(a,c.index),o)),a=c.index,o=this.updateStack(o,c);return a!==n.length&&s.push(this.makeDecoratedSegment(n.slice(a),o)),s}createStackOps(n){const i={},r=s=>i[s]??={index:s,added:[],removed:[]};for(const s of n)r(s.start).added.push(s),r(s.end).removed.push(s);return Object.entries(i).sort((s,o)=>+s[0]-+o[0]).map(s=>s[1])}updateStack(n,i){return n.filter(r=>!i.removed.includes(r)).concat(i.added)}getNormalizedDecorations(){const{decorations:n=[],text:{length:i}}=this;return n.map(r=>function gDe(t,e){return{start:B$(t.start??0,e),end:B$(t.end??e,e),classes:t.classes??[],styles:t.styles??{}}}(r,i)).filter(r=>r.start<i&&r.start<r.end)}makeUndecoratedSegment(n){return{text:n,classes:[],styles:{}}}makeDecoratedSegment(n,i){return{text:n,classes:i.reduce((o,a)=>o.concat(a.classes),[]),styles:i.reduce((o,a)=>({...o,...a.styles}),{})}}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=gi({type:t,selectors:[["ccf-decorated-text"]],hostVars:2,hostBindings:function(i,r){2&i&&yf(r.clsName)},inputs:{text:"text",decorations:"decorations"},features:[Lr],decls:1,vars:1,consts:[[3,"class","style",4,"ngFor","ngForOf"]],template:function(i,r){1&i&&Ri(0,mDe,2,5,"span",0),2&i&&Oi("ngForOf",r.segments)},dependencies:[OE],styles:["[_nghost-%COMP%]{display:flex}"],changeDetection:0})}return t})();const yDe=[[["","matPrefix",""]],[["","matSuffix",""]]],vDe=["[matPrefix]","[matSuffix]"];function bDe(t,e){if(1&t&&(Rn(0,"mat-option"),ss(1,"ccf-decorated-text",8),Nn()),2&t){const n=e.$implicit;bn(),Oi("text",n.label)("decorations",n.decorations)}}const wDe=new St("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10});class $1{get value(){return this.controller.value}set value(e){this.controller.setValue(e,{emitEvent:!1})}constructor(e){this.defaultMaxOptions=e,this.clsName="ccf-text-search",this.placeholder="Search...",this.optionSelected=new _n,this.controller=new kCe,this.options=this.controller.valueChanges.pipe(Bl(""),qf(),Ki(this.getOptions)),this.valueChange=this.controller.valueChanges}getOptions(e){var n=this;return C(function*(){const{autoCompleter:i,maxOptions:r=n.defaultMaxOptions}=n;return!i||r<1?[]:MW(Es(i(e,r)).pipe(Si(1),Y(o=>o.length<=r?o:o.slice(0,r))))})()}optionDisplay(e){return e?.label??""}optionId(e,n){return n.id}static#e=this.\u0275fac=function(n){return new(n||$1)(st(wDe))};static#t=this.\u0275cmp=gi({type:$1,selectors:[["ccf-text-search"]],hostVars:2,hostBindings:function(n,i){2&n&&yf(i.clsName)},inputs:{placeholder:"placeholder",value:"value",maxOptions:"maxOptions",autoCompleter:"autoCompleter"},outputs:{valueChange:"valueChange",optionSelected:"optionSelected"},ngContentSelectors:vDe,decls:11,vars:8,consts:[["auto","matAutocomplete"],[1,"form"],["appearance","outline",1,"form-field"],["matPrefix",""],["matInput","","type","search",1,"input",3,"placeholder","formControl","matAutocomplete"],[1,"autocomplete",3,"optionSelected","displayWith"],[4,"ngFor","ngForOf","ngForTrackBy"],["matSuffix",""],[3,"text","decorations"]],template:function(n,i){if(1&n){const r=Dd();ka(yDe),Rn(0,"form",1)(1,"mat-form-field",2),Yy(2,3),Li(3),Ky(),ss(4,"input",4),Rn(5,"mat-autocomplete",5,0),zi("optionSelected",function(o){return Gs(r),ms(i.optionSelected.emit(o.option.value))}),Ri(7,bDe,2,2,"mat-option",6),wu(8,"async"),Nn(),Yy(9,7),Li(10,1),Ky(),Nn()()}if(2&n){const r=iE(6);bn(4),Oi("placeholder",i.placeholder)("formControl",i.controller)("matAutocomplete",r),bn(),Oi("displayWith",i.optionDisplay),bn(2),Oi("ngForOf",xu(8,6,i.options))("ngForTrackBy",i.optionId)}},dependencies:[OE,lW,b1,Y9,K9,xv,aP,aDe,r$,F$,ZIe,WIe,$Ie,pDe,_De,h0],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper{margin:0}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex{align-items:center}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{height:3rem;border:none}[_nghost-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-suffix{top:0;border:none}"],changeDetection:0})}function Lm(t){return!0===t}function Ea(t){return null===t||typeof t>"u"}function Bo(t){return!Ea(t)}function PP(t){return!!t}function H$(t){return Ea(t)?t:JSON.parse(JSON.stringify(t))}function G$(t){return Bo(t)&&"object"==typeof t&&function FP(t){return"[object Object]"===Object.prototype.toString.call(t)}(t)}Un([Lf.oI,jt("design:type",Function),jt("design:paramtypes",[String]),jt("design:returntype",Promise)],$1.prototype,"getOptions",null),M(1123),[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((t,e)=>t.name.localeCompare(e.name)).filter(t=>!0!==t.disabled);const $De="NGXS_COMPUTED_OPTION",q$="NGXS_DATA_META",LP="NGXS_META",X$="NGXS_ARGUMENT_REGISTRY_META";function Y$(t=XDe){return T((e,n)=>{let i=!1;e.subscribe(v(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function XDe(){return new Ev}let K$=(()=>{class t{constructor(n){this.subscription=null,this.sequence$=new ye(0),n&&(this.subscription=n.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return t.\u0275fac=function(n){return new(n||t)(lt(Vu,8))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t})();function Pv(t){return t[q$]}let bc=(()=>{class t{constructor(n,i,r){t.store=n.get(Vu),t.ngZone=n.get(yn),t.factory=i,t.context=r,t.computed=n.get(K$),t.injector=n}}return t.store=null,t.computed=null,t.context=null,t.factory=null,t.ngZone=null,t.injector=null,t.\u0275fac=function(n){return new(n||t)(lt(Gi),lt(W5),lt($5))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t})();class cs{constructor(){cs.statesCachedMeta.clear()}static createStateContext(e){return bc.context.createStateContext(e)}static ensureMappedState(e){if(Ea(bc.factory)||Ea(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(Bo(e.name)?cs.statesCachedMeta.get(e.name):null)||cs.ensureMeta(e)}static getRepositoryByInstance(e){const i=Pv(cs.getStateClassByInstance(e))??null;if(Ea(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const n=cs.getRepositoryByInstance(e);n.stateMeta.actions={},n.operations={}}static createPayload(e,n){const i={},r=Array.from(e);for(const[s,o]of r.entries()){const a=n?.getPayloadTypeByIndex(s);Bo(a)&&(i[a]=o)}return Object.keys(i).length>0?i:null}static createAction(e,n,i){const r=cs.createPayload(n,i),s=function JDe(t){return class{constructor(n){if(n)for(const i of Object.keys(n))this[i]=n[i]}static get type(){return t}}}(e.type);return new s(r)}static ensureMeta(e){const n=Bo(e.name)?bc.factory.states?.find(i=>i.name===e.name):null;return Bo(n)&&Bo(e.name)&&cs.statesCachedMeta.set(e.name,n),n}}cs.statesCachedMeta=new Map,cs.\u0275fac=function(e){return new(e||cs)},cs.\u0275prov=Pt({token:cs,factory:cs.\u0275fac}),new class ZDe{constructor(){this.subject=new Cf(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function zu(t,e){const n=arguments.length>=2;return i=>i.pipe(t?yi((r,s)=>t(r,s,i)):He,Si(1),n?Tm(e):Y$(()=>new Ev))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new Cf(1)}};class eRe extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${Bo(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function J$(t){return t.NGXS_OPTIONS_META??{name:""}}function Z$(t){const e=J$(t),n=e.children??[],r=H$(void 0===e.defaults?{}:e.defaults);if(n.length>0){if(G$(r))return function tRe(t,e){return e.reduce((n,i)=>{const r=J$(i);if(function Nv(t){const e="string"==typeof t?t.trim():t;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return n[r.name.toString()]=Z$(i),n},t??{})}(r,n);throw new eRe(r)}return r}function Q$(){return`__${$De}__`}function e7(t){return t[Q$()]??null}function t7(){return bc?.computed?.sequenceValue??0}function rRe(t){let e=!1;return eh(t)&&(e=!0),e}function BP(t){return t[X$]}class sRe extends Error{constructor(e,n){super(`An argument with the name '${e}' already exists in the method '${n}'`)}}class oRe{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,n,i){this.checkDuplicateName(e,n),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,n,i){this.checkDuplicateName(e,n),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,n){if(PP(this.argumentMap.has(e))||PP(this.payloadMap.has(e)))throw new sRe(e,n)}}function hRe(t){return{enumerable:!0,configurable:!0,get(){const e=Pv(t),n=cs.ensureMappedState(e.stateMeta);return cs.createStateContext(n)}}}const yRe={dataActionSubscribeRequired:!0},vRe=new St("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>yRe});let bRe=(()=>{class t{constructor(n,i){this.accessor=n,this.injector=i}static forRoot(n=[]){return{ngModule:t,providers:[cs,bc,K$,...n]}}}return t.\u0275fac=function(n){return new(n||t)(lt(cs,2),lt(bc,2))},t.\u0275mod=sa({type:t}),t.\u0275inj=Ho({}),t})();function n7(){return(t,e,n)=>{!function KDe(t,e){if(!function jDe(t,e){let n=t,i=!1;if(G$(n))for(;null!==n;){if(Lm(n?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(n,e)?.get;break}n=Object.getPrototypeOf(n)}return i}(t,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(t,e);const i=n.get;return n.get=function(...r){const s=function iRe(t){return Ea(e7(t))&&Object.defineProperties(t,{[Q$()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),e7(t)}(this),o=s?.get(i);if(Lm(o?.isObservable))return o?.value;if(Ea(o)||o.sequenceId!==t7()){s.delete(i);const c=i.apply(this,r);return s.set(i,{value:c,sequenceId:t7(),isObservable:rRe(c)}),c}return o?.value},n}}const wRe={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function J1(t={}){const e=function xRe(t){const e=bc?.injector?.get(vRe,void 0,ii.Optional),n={...wRe};return Bo(e)&&void 0!==e?.dataActionSubscribeRequired&&(n.subscribeRequired=e.dataActionSubscribeRequired),{...n,...t}}(t);return(n,i,r)=>{!function YDe(t,e){if(t.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(n,r);const s=r.value,o=i.toString();return r.value=function(...a){const c=this;let l=null;const u=cs.getRepositoryByInstance(c),h=u.operations;let f=h[o];const g=u.stateMeta,m=BP(s);if(Ea(f)){const ie=function _Re(t){return String(t).replace(/\/\/.*$/gm,"").replace(/\s+/g,"").replace(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(s),q=function QDe(t){const{statePath:e,argumentsNames:n,methodName:i,argumentRegistry:r}=t;let s="";for(let o=0;o<n.length;o++)Bo(r?.getArgumentNameByIndex(o))?s+=r?.getArgumentNameByIndex(o):Bo(r?.getPayloadTypeByIndex(o))?s+=r?.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==n.length-1&&(s+=", ");return`@${e.replace(/\./g,"/")}.${i}(${s})`}({statePath:g.path,methodName:o,argumentsNames:ie,argumentRegistry:m});f=h[o]={type:q,options:{cancelUncompleted:e.cancelUncompleted??!1}},Bo(f)&&(g.actions[f.type]=[{type:f.type,options:f.options,fn:f.type}])}cs.ensureMappedState(g).instance[f.type]=()=>(Lm(e.insideZone)?bc.ngZone?.run(()=>{l=s.apply(c,a)}):l=s.apply(c,a),eh(l)&&Lm(e.subscribeRequired)?sn(null).pipe(Y(()=>l)):l);const R=cs.createAction(f,a,m),L=bc.store.dispatch(R);return eh(l)?function nRe(t,e){return pv([t,e]).pipe(Y(n=>n.pop()))}(L,l):l},r}}function i7(t){return(e,n,i)=>{const r=t.trim();if(!r)throw new Error("Payload name should be initialized");(function aRe(t,e){const n=t[e];return Ea(BP(n))&&Object.defineProperties(n,{[X$]:{enumerable:!0,configurable:!0,value:new oRe}}),BP(n)})(e,n).createPayloadType(r,n,i)}}function r7(){return t=>{const e=function mRe(t){if(function TDe(t){return!PP(t)}(t.hasOwnProperty(LP))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:n=>n.getStateGetter(e.name),children:[]};Object.defineProperty(t,LP,{value:e})}return function gRe(t){return t?.[LP]}(t)}(t);if(Ea(e.name))throw new Error("@StateRepository should be add before decorator @State");!function uRe(t,e){(function lRe(t){const e=Pv(t)??null;return(Ea(e)||e?.stateClass!==t)&&function cRe(t){Object.defineProperty(t,q$,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:t}})}(t),Pv(t)}(t)).stateMeta=e}(t,e),function ARe(t,e,n){Object.defineProperties(t.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>H$(n)},context:hRe(t)})}(t,e,Z$(t)),function fRe(t){const n=Pv(t)?.stateMeta?.name??null;if(Bo(n)){const i=`__${n}__selector`;Object.defineProperties(t.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(Bo(this[i]))return this[i];if(Ea(bc.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=bc.store.select(t).pipe(Y(r=>r),Qo({refCount:!0,bufferSize:1})),this[i]}}})}}(t)}}let SRe=(()=>{class t{constructor(){this._dirty=!0,this.browserStorageEvents$=new qt,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(n){this._dirty=n}ngxsOnChanges(n){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t})(),s7=(()=>{class t extends SRe{get snapshot(){return this.getState()}get ctx(){return function pRe(t){if(!t)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...t,getState:()=>t.getState(),setState(e){t.setState(e)},patchState(e){t.patchState(e)}}}(this.context)}patchState(n){this.ctx.patchState(n)}setState(n){this.ctx.setState(n)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(n){return this.ctx.dispatch(n)}}return t.\u0275fac=(()=>{let e;return function(i){return(e||(e=Xi(t)))(i||t)}})(),t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),Un([n7(),jt("design:type",Object),jt("design:paramtypes",[])],t.prototype,"snapshot",null),Un([J1(),AD(0,i7("patchValue")),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",void 0)],t.prototype,"patchState",null),Un([J1(),AD(0,i7("stateValue")),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",void 0)],t.prototype,"setState",null),Un([J1(),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",void 0)],t.prototype,"reset",null),t})();function o7(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return Y(n=>{let i=n;for(let r=0;r<e;r++){const s=i?.[t[r]];if(!(typeof s<"u"))return;i=s}return i})}let Wu=class wb extends s7{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function CRe(){return yi(t=>null!=t)}(),Qo(1))}setConfig(e){this.setState(e)}patchConfig(e){this.patchState(e)}getProperty(e){return this.config$.pipe(o7(...e),qf(),Qo(1))}getOption(...e){const n=this.getPathKey(e);if(this.optionCache.has(n))return this.optionCache.get(n)??sn();const i=this.config$.pipe(o7(...e),qf(),Qo(1));return this.optionCache.set(n,i),i}getPathKey(e){return`${e.length}:${e.join(".")}`}static#e=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Xi(wb)))(i||wb)}})();static#t=this.\u0275prov=Pt({token:wb,factory:wb.\u0275fac})};Un([n7(),jt("design:type",At),jt("design:paramtypes",[])],Wu.prototype,"config$",null),Wu=Un([r7(),WN({name:"globalConfig",defaults:null})],Wu);const a7="ALLOW_TELEMETRY",TRe=c7();function c7(){const t=localStorage.getItem(a7);return null===t?void 0:"true"===t.toLowerCase()}let kP=class xb extends s7{setAllowTelemetry(e){const n=c7();localStorage.setItem(a7,e.toString()),this.ctx.patchState({allowTelemetry:e}),(void 0!==n||!1===e)&&location.reload()}static#e=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=Xi(xb)))(i||xb)}})();static#t=this.\u0275prov=Pt({token:xb,factory:xb.\u0275fac})};function ah(...t){const e=y0(t),n=_H(t),{args:i,keys:r}=q5(t);if(0===i.length)return Es([],e);const s=new At(function IRe(t,e,n=He){return i=>{l7(e,()=>{const{length:r}=t,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)l7(e,()=>{const l=Es(t[c],e);let u=!1;l.subscribe(v(i,h=>{s[c]=h,u||(u=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>X5(r,o):He));return n?s.pipe(l1(n)):s}function l7(t,e,n){t?Cu(n,t,e):e()}function Z1(){return T((t,e)=>{let n=null;t._refCount++;const i=v(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}Un([J1(),jt("design:type",Function),jt("design:paramtypes",[Boolean]),jt("design:returntype",void 0)],kP.prototype,"setAllowTelemetry",null),kP=Un([r7(),WN({name:"tracking",defaults:{allowTelemetry:TRe}})],kP);class UP extends At{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,de(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Bt;const n=this.getSubject();e.add(this.source.subscribe(v(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Bt.EMPTY)}return e}refCount(){return Z1()(this)}}function Lv(t){return T((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}Error;const gF=new St("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),mF=new St("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:t}=Ut(hi);if(!t)throw new Error("Window is not available");return t}}),W2e=new St("ngx-data-layer",{providedIn:"root",factory:()=>function z2e(t){return t?t.dataLayer=t.dataLayer||[]:null}(Ut(mF))}),cq=new St("ngx-gtag-fn",{providedIn:"root",factory:()=>function $2e(t,e){return t?t.gtag=t.gtag||function(){e.push(arguments)}:null}(Ut(mF),Ut(W2e))});let _F=(()=>{class t{constructor(n,i,r){this.settings=n,this._document=i,this._gtag=r}get document(){return this._document}throw(n){this.settings.enableTracing&&console&&console.error&&console.error(n)}toKeyValue(n){return n.size>0?Array.from(n).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...n){try{this._gtag(...n.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(n,i,r,s,o,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),s&&c.set("value",s),void 0!==o&&c.set("interaction",o),a&&Object.entries(a).map(([u,h])=>c.set(u,h));const l=this.toKeyValue(c);l?this.gtag("event",n,l):this.gtag("event",n)}catch(c){this.throw(c)}}pageView(n,i,r,s){try{const o=new Map([["page_path",n]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,c])=>o.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(n,i,r,s,o){try{const a=new Map([["screen_name",n],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...n){try{this._gtag("set",...n)}catch(i){this.throw(i)}}exception(n,i){try{const r=new Map;n&&r.set("description",n),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return t.\u0275fac=function(n){return new(n||t)(lt(gF),lt(hi),lt(cq))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();new St("ngx-google-analytics-routing-settings",{factory:()=>({})}),new St("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"});const tNe={connector:()=>new qt};function rNe(t,e,n,i){n&&!Ke(n)&&(i=n);const r=Ke(n)?n:void 0;return s=>function iNe(t,e){const n=Ke(t)?t:()=>t;return Ke(e)?function nNe(t,e=tNe){const{connector:n}=e;return T((i,r)=>{const s=n();ws(t(function eNe(t){return new At(e=>t.subscribe(e))}(s))).subscribe(r),r.add(i.subscribe(s))})}(e,{connector:n}):i=>new UP(i,n)}(new Cf(t,e,i),r)(s)}class sNe{}const aNe=(t,e)=>JSON.stringify(t)===JSON.stringify(e),cNe=t=>t.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),Xc={storageStrategy:class oNe extends sNe{constructor(){super(...arguments),this.cachePairs=[]}add(e,n,i){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,n){Object.assign(this.cachePairs[e],n)}update(e,n){Object.assign(this.cachePairs[e],n)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},lNe=new qt;function Xa(t={}){return function(e,n,i){const r=t.cacheKey||e.constructor.name+"#"+n,s=i.value;if(i&&i.value){let o=t.storageStrategy?new t.storageStrategy:new Xc.storageStrategy;const a=[];t.cacheModifier&&t.cacheModifier.subscribe(u=>o.addMany(u(o.getAll(r,this)),r,this)),jc(lNe.asObservable(),t.cacheBusterObserver?t.cacheBusterObserver:function Doe(t){return t?function Roe(t){return new At(e=>t.schedule(()=>e.complete()))}(t):Ro}()).subscribe(u=>{o.removeAll(r,this),a.length=0}),t.cacheResolver=t.cacheResolver||Xc.cacheResolver||aNe,t.cacheHasher=t.cacheHasher||Xc.cacheHasher||cNe,i.value=function(...u){const h=o.getAll(r,this);let f=t.cacheHasher(u),g=h.find(y=>t.cacheResolver(y.parameters,f));const m=a.find(y=>t.cacheResolver(y.parameters,f));if((t.maxAge||Xc.maxAge)&&g&&g.created&&((new Date).getTime()-new Date(g.created).getTime()>(t.maxAge||Xc.maxAge)?(o.remove?o.remove(h.indexOf(g),g,r,this):o.removeAtIndex(h.indexOf(g),r,this),g=null):(t.slidingExpiration||Xc.slidingExpiration)&&(g.created=new Date,o.update?o.update(h.indexOf(g),g,r,this):o.updateAtIndex(h.indexOf(g),g,r,this))),g){const y=sn(g.response);return t.async?y.pipe(O$(0)):y}if(m)return m.response;{const y=s.call(this,...u).pipe(Lv(()=>{const b=a.find(R=>t.cacheResolver(R.parameters,f));a.splice(a.indexOf(b),1)}),br(b=>{(!t.shouldCacheDecider||t.shouldCacheDecider(b))&&((!(t.maxCacheCount||Xc.maxCacheCount)||1===(t.maxCacheCount||Xc.maxCacheCount)||(t.maxCacheCount||Xc.maxCacheCount)&&(t.maxCacheCount||Xc.maxCacheCount)<h.length+1)&&(o.remove?o.remove(0,h[0],r,this):o.removeAtIndex(0,r,this)),o.add({parameters:f,response:b,created:t.maxAge||Xc.maxAge?new Date:null},r,this))}),rNe(1),Z1());return a.push({parameters:f,response:y,created:new Date}),y}}}return i}}class yF{}class Gl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const i=n.indexOf(":");if(i>0){const r=n.slice(0,i),s=r.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Gl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Gl;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Gl?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,n);const r=("a"===e.op?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const i=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class uNe{encodeKey(e){return uq(e)}encodeValue(e){return uq(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const hNe=/%(\d[a-f0-9])/gi,fNe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function uq(t){return encodeURIComponent(t).replace(hNe,(e,n)=>fNe[n]??e)}function hS(t){return`${t}`}class dr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new uNe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function dNe(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const i=e.fromObject[n],r=Array.isArray(i)?i.map(hS):[hS(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{n.push({param:i,value:s,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new dr({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(hS(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(hS(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class ls{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function dq(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function hq(t){return typeof Blob<"u"&&t instanceof Blob}function fq(t){return typeof FormData<"u"&&t instanceof FormData}class Zv{constructor(e,n,i,r){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function pNe(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Gl,this.context??=new ls,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new dr,this.urlWithParams=n}serializeBody(){return null===this.body?null:"string"==typeof this.body||dq(this.body)||hq(this.body)||fq(this.body)||function gNe(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof dr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||fq(this.body)?null:hq(this.body)?this.body.type||null:dq(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof dr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress;let l=e.headers||this.headers,u=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((f,g)=>f.set(g,e.setHeaders[g]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,g)=>f.set(g,e.setParams[g]),u)),new Zv(n,i,o,{params:u,headers:l,context:h,reportProgress:c,responseType:r,withCredentials:a,transferCache:s})}}var bF=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(bF||{});class wF{constructor(e,n=gq.Ok,i="OK"){this.headers=e.headers||new Gl,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Qv extends wF{constructor(e={}){super(e),this.type=bF.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Qv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}var gq=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(gq||{});function xF(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let uh=(()=>{class t{constructor(n){this.handler=n}request(n,i,r={}){let s;if(n instanceof Zv)s=n;else{let c,l;c=r.headers instanceof Gl?r.headers:new Gl(r.headers),r.params&&(l=r.params instanceof dr?r.params:new dr({fromObject:r.params})),s=new Zv(n,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const o=sn(s).pipe(function Fv(t,e){return Ke(e)?xs(t,e,1):xs(t,1)}(c=>this.handler.handle(c)));if(n instanceof Zv||"events"===r.observe)return o;const a=o.pipe(yi(c=>c instanceof Qv));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Y(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Y(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Y(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(Y(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(n,i={}){return this.request("DELETE",n,i)}get(n,i={}){return this.request("GET",n,i)}head(n,i={}){return this.request("HEAD",n,i)}jsonp(n,i){return this.request("JSONP",n,{params:(new dr).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,i={}){return this.request("OPTIONS",n,i)}patch(n,i,r={}){return this.request("PATCH",n,xF(r,i))}post(n,i,r={}){return this.request("POST",n,xF(r,i))}put(n,i,r={}){return this.request("PUT",n,xF(r,i))}static#e=this.\u0275fac=function(i){return new(i||t)(lt(yF))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac})}return t})();class BNe{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const kNe=new St("basePath");class Dq{constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.encodeParam=e.encodeParam?e.encodeParam:n=>this.defaultEncodeParam(n),this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const n=e.find(i=>this.isJsonMime(i));return void 0===n?e[0]:n}selectHeaderAccept(e){if(0===e.length)return;const n=e.find(i=>this.isJsonMime(i));return void 0===n?e[0]:n}isJsonMime(e){const n=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(n.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const n=this.credentials[e];return"function"==typeof n?n():n}defaultEncodeParam(e){const n="date-time"===e.dataFormat&&e.value instanceof Date?e.value.toISOString():e.value;return encodeURIComponent(String(n))}}let Rq=(()=>{class t{constructor(n,i,r){this.httpClient=n,this.basePath="https://apps.humanatlas.io/hra-api/v1",this.defaultHeaders=new Gl,this.configuration=new Dq,r&&(this.configuration=r),"string"!=typeof this.configuration.basePath&&("string"!=typeof i&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new BNe}addToHttpParams(n,i,r){return this.addToHttpParamsRecursive(n,i,r)}addToHttpParamsRecursive(n,i,r){if(null==i)return n;if("object"==typeof i)if(Array.isArray(i))i.forEach(s=>n=this.addToHttpParamsRecursive(n,s,r));else if(i instanceof Date){if(null==r)throw Error("key may not be null if value is Date");n=n.append(r,i.toISOString().substr(0,10))}else Object.keys(i).forEach(s=>n=this.addToHttpParamsRecursive(n,i[s],null!=r?`${r}.${s}`:s));else{if(null==r)throw Error("key may not be null if value is not object or array");n=n.append(r,i)}return n}aggregateResults(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,y=n.providers,b=n.sex,R=n.spatial,L=n.technologies,ie=n.token;let q=new dr({encoder:this.encoder});null!=o&&(q=this.addToHttpParams(q,o,"age")),null!=a&&(q=this.addToHttpParams(q,a,"age-range")),null!=c&&(q=this.addToHttpParams(q,c,"bmi")),null!=l&&(q=this.addToHttpParams(q,l,"bmi-range")),null!=u&&(q=this.addToHttpParams(q,u,"cache")),h&&h.forEach(We=>{q=this.addToHttpParams(q,We,"ontology-terms")}),f&&f.forEach(We=>{q=this.addToHttpParams(q,We,"cell-type-terms")}),g&&g.forEach(We=>{q=this.addToHttpParams(q,We,"biomarker-terms")}),m&&m.forEach(We=>{q=this.addToHttpParams(q,We,"consortiums")}),y&&y.forEach(We=>{q=this.addToHttpParams(q,We,"providers")}),null!=b&&(q=this.addToHttpParams(q,b,"sex")),R&&R.forEach(We=>{q=this.addToHttpParams(q,We,"spatial")}),L&&L.forEach(We=>{q=this.addToHttpParams(q,We,"technologies")}),null!=ie&&(q=this.addToHttpParams(q,ie,"token"));let Ee=this.defaultHeaders,Re=s&&s.httpHeaderAccept;void 0===Re&&(Re=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Re&&(Ee=Ee.set("Accept",Re));let tt=s&&s.context;void 0===tt&&(tt=new ls);let dt="json";return Re&&(dt=Re.startsWith("text")?"text":this.configuration.isJsonMime(Re)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/aggregate-results`,{context:tt,params:q,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Ee,observe:i,reportProgress:r})}biomarkerTermOccurences(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,y=n.providers,b=n.sex,R=n.spatial,L=n.technologies,ie=n.token;let q=new dr({encoder:this.encoder});null!=o&&(q=this.addToHttpParams(q,o,"age")),null!=a&&(q=this.addToHttpParams(q,a,"age-range")),null!=c&&(q=this.addToHttpParams(q,c,"bmi")),null!=l&&(q=this.addToHttpParams(q,l,"bmi-range")),null!=u&&(q=this.addToHttpParams(q,u,"cache")),h&&h.forEach(We=>{q=this.addToHttpParams(q,We,"ontology-terms")}),f&&f.forEach(We=>{q=this.addToHttpParams(q,We,"cell-type-terms")}),g&&g.forEach(We=>{q=this.addToHttpParams(q,We,"biomarker-terms")}),m&&m.forEach(We=>{q=this.addToHttpParams(q,We,"consortiums")}),y&&y.forEach(We=>{q=this.addToHttpParams(q,We,"providers")}),null!=b&&(q=this.addToHttpParams(q,b,"sex")),R&&R.forEach(We=>{q=this.addToHttpParams(q,We,"spatial")}),L&&L.forEach(We=>{q=this.addToHttpParams(q,We,"technologies")}),null!=ie&&(q=this.addToHttpParams(q,ie,"token"));let Ee=this.defaultHeaders,Re=s&&s.httpHeaderAccept;void 0===Re&&(Re=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Re&&(Ee=Ee.set("Accept",Re));let tt=s&&s.context;void 0===tt&&(tt=new ls);let dt="json";return Re&&(dt=Re.startsWith("text")?"text":this.configuration.isJsonMime(Re)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-term-occurences`,{context:tt,params:q,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Ee,observe:i,reportProgress:r})}biomarkerTreeModel(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ls);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/biomarker-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}cellTypeTermOccurences(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,y=n.providers,b=n.sex,R=n.spatial,L=n.technologies,ie=n.token;let q=new dr({encoder:this.encoder});null!=o&&(q=this.addToHttpParams(q,o,"age")),null!=a&&(q=this.addToHttpParams(q,a,"age-range")),null!=c&&(q=this.addToHttpParams(q,c,"bmi")),null!=l&&(q=this.addToHttpParams(q,l,"bmi-range")),null!=u&&(q=this.addToHttpParams(q,u,"cache")),h&&h.forEach(We=>{q=this.addToHttpParams(q,We,"ontology-terms")}),f&&f.forEach(We=>{q=this.addToHttpParams(q,We,"cell-type-terms")}),g&&g.forEach(We=>{q=this.addToHttpParams(q,We,"biomarker-terms")}),m&&m.forEach(We=>{q=this.addToHttpParams(q,We,"consortiums")}),y&&y.forEach(We=>{q=this.addToHttpParams(q,We,"providers")}),null!=b&&(q=this.addToHttpParams(q,b,"sex")),R&&R.forEach(We=>{q=this.addToHttpParams(q,We,"spatial")}),L&&L.forEach(We=>{q=this.addToHttpParams(q,We,"technologies")}),null!=ie&&(q=this.addToHttpParams(q,ie,"token"));let Ee=this.defaultHeaders,Re=s&&s.httpHeaderAccept;void 0===Re&&(Re=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Re&&(Ee=Ee.set("Accept",Re));let tt=s&&s.context;void 0===tt&&(tt=new ls);let dt="json";return Re&&(dt=Re.startsWith("text")?"text":this.configuration.isJsonMime(Re)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-term-occurences`,{context:tt,params:q,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Ee,observe:i,reportProgress:r})}cellTypeTreeModel(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ls);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/cell-type-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}dbStatus(n,i="body",r=!1,s){const o=n.token;let a=new dr({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"token"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let u=s&&s.context;void 0===u&&(u=new ls);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/db-status`,{context:u,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}getSpatialPlacement(n,i="body",r=!1,s){const o=n.getSpatialPlacementRequest;if(null==o)throw new Error("Required parameter getSpatialPlacementRequest was null or undefined when calling getSpatialPlacement.");let a=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=s&&s.context;void 0===l&&(l=new ls);const h=this.configuration.selectHeaderContentType(["application/json"]);void 0!==h&&(a=a.set("Content-Type",h));let f="json";return c&&(f=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/get-spatial-placement`,o,{context:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}gtexRuiLocations(n,i="body",r=!1,s){const o=n.cache;let a=new dr({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"cache"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let u=s&&s.context;void 0===u&&(u=new ls);let h="json";return l&&(h=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/gtex/rui_locations.jsonld`,{context:u,params:a,responseType:h,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}hubmapRuiLocations(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ls);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/hubmap/rui_locations.jsonld`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}ontologyTermOccurences(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,y=n.providers,b=n.sex,R=n.spatial,L=n.technologies,ie=n.token;let q=new dr({encoder:this.encoder});null!=o&&(q=this.addToHttpParams(q,o,"age")),null!=a&&(q=this.addToHttpParams(q,a,"age-range")),null!=c&&(q=this.addToHttpParams(q,c,"bmi")),null!=l&&(q=this.addToHttpParams(q,l,"bmi-range")),null!=u&&(q=this.addToHttpParams(q,u,"cache")),h&&h.forEach(We=>{q=this.addToHttpParams(q,We,"ontology-terms")}),f&&f.forEach(We=>{q=this.addToHttpParams(q,We,"cell-type-terms")}),g&&g.forEach(We=>{q=this.addToHttpParams(q,We,"biomarker-terms")}),m&&m.forEach(We=>{q=this.addToHttpParams(q,We,"consortiums")}),y&&y.forEach(We=>{q=this.addToHttpParams(q,We,"providers")}),null!=b&&(q=this.addToHttpParams(q,b,"sex")),R&&R.forEach(We=>{q=this.addToHttpParams(q,We,"spatial")}),L&&L.forEach(We=>{q=this.addToHttpParams(q,We,"technologies")}),null!=ie&&(q=this.addToHttpParams(q,ie,"token"));let Ee=this.defaultHeaders,Re=s&&s.httpHeaderAccept;void 0===Re&&(Re=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Re&&(Ee=Ee.set("Accept",Re));let tt=s&&s.context;void 0===tt&&(tt=new ls);let dt="json";return Re&&(dt=Re.startsWith("text")?"text":this.configuration.isJsonMime(Re)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-term-occurences`,{context:tt,params:q,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Ee,observe:i,reportProgress:r})}ontologyTreeModel(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ls);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/ontology-tree-model`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}providerNames(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ls);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/provider-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}referenceOrganScene(n,i="body",r=!1,s){const o=n.organIri;if(null==o)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=n.age,c=n.ageRange,l=n.bmi,u=n.bmiRange,h=n.cache,f=n.ontologyTerms,g=n.cellTypeTerms,m=n.biomarkerTerms,y=n.consortiums,b=n.providers,R=n.sex,L=n.spatial,ie=n.technologies,q=n.token;let Ee=new dr({encoder:this.encoder});null!=a&&(Ee=this.addToHttpParams(Ee,a,"age")),null!=c&&(Ee=this.addToHttpParams(Ee,c,"age-range")),null!=l&&(Ee=this.addToHttpParams(Ee,l,"bmi")),null!=u&&(Ee=this.addToHttpParams(Ee,u,"bmi-range")),null!=h&&(Ee=this.addToHttpParams(Ee,h,"cache")),f&&f.forEach(ht=>{Ee=this.addToHttpParams(Ee,ht,"ontology-terms")}),g&&g.forEach(ht=>{Ee=this.addToHttpParams(Ee,ht,"cell-type-terms")}),m&&m.forEach(ht=>{Ee=this.addToHttpParams(Ee,ht,"biomarker-terms")}),null!=o&&(Ee=this.addToHttpParams(Ee,o,"organ-iri")),y&&y.forEach(ht=>{Ee=this.addToHttpParams(Ee,ht,"consortiums")}),b&&b.forEach(ht=>{Ee=this.addToHttpParams(Ee,ht,"providers")}),null!=R&&(Ee=this.addToHttpParams(Ee,R,"sex")),L&&L.forEach(ht=>{Ee=this.addToHttpParams(Ee,ht,"spatial")}),ie&&ie.forEach(ht=>{Ee=this.addToHttpParams(Ee,ht,"technologies")}),null!=q&&(Ee=this.addToHttpParams(Ee,q,"token"));let Re=this.defaultHeaders,tt=s&&s.httpHeaderAccept;void 0===tt&&(tt=this.configuration.selectHeaderAccept(["application/json"])),void 0!==tt&&(Re=Re.set("Accept",tt));let dt=s&&s.context;void 0===dt&&(dt=new ls);let We="json";return tt&&(We=tt.startsWith("text")?"text":this.configuration.isJsonMime(tt)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organ-scene`,{context:dt,params:Ee,responseType:We,withCredentials:this.configuration.withCredentials,headers:Re,observe:i,reportProgress:r})}referenceOrgans(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ls);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/reference-organs`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}scene(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,y=n.providers,b=n.sex,R=n.spatial,L=n.technologies,ie=n.token;let q=new dr({encoder:this.encoder});null!=o&&(q=this.addToHttpParams(q,o,"age")),null!=a&&(q=this.addToHttpParams(q,a,"age-range")),null!=c&&(q=this.addToHttpParams(q,c,"bmi")),null!=l&&(q=this.addToHttpParams(q,l,"bmi-range")),null!=u&&(q=this.addToHttpParams(q,u,"cache")),h&&h.forEach(We=>{q=this.addToHttpParams(q,We,"ontology-terms")}),f&&f.forEach(We=>{q=this.addToHttpParams(q,We,"cell-type-terms")}),g&&g.forEach(We=>{q=this.addToHttpParams(q,We,"biomarker-terms")}),m&&m.forEach(We=>{q=this.addToHttpParams(q,We,"consortiums")}),y&&y.forEach(We=>{q=this.addToHttpParams(q,We,"providers")}),null!=b&&(q=this.addToHttpParams(q,b,"sex")),R&&R.forEach(We=>{q=this.addToHttpParams(q,We,"spatial")}),L&&L.forEach(We=>{q=this.addToHttpParams(q,We,"technologies")}),null!=ie&&(q=this.addToHttpParams(q,ie,"token"));let Ee=this.defaultHeaders,Re=s&&s.httpHeaderAccept;void 0===Re&&(Re=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Re&&(Ee=Ee.set("Accept",Re));let tt=s&&s.context;void 0===tt&&(tt=new ls);let dt="json";return Re&&(dt=Re.startsWith("text")?"text":this.configuration.isJsonMime(Re)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/scene`,{context:tt,params:q,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Ee,observe:i,reportProgress:r})}sennetRuiLocations(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ls);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sennet/rui_locations.jsonld`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}sparql(n,i="body",r=!1,s){const o=n.query;if(null==o)throw new Error("Required parameter query was null or undefined when calling sparql.");const a=n.token,c=n.format;let l=new dr({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"query")),null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let u=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(u=u.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new ls);let g="json";return h&&(g=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/sparql`,{context:f,params:l,responseType:g,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}sparqlPost(n,i="body",r=!1,s){const o=n.sparqlQueryRequest;if(null==o)throw new Error("Required parameter sparqlQueryRequest was null or undefined when calling sparqlPost.");const a=n.token,c=n.format;let l=new dr({encoder:this.encoder});null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let u=this.defaultHeaders,h=s&&s.httpHeaderAccept;void 0===h&&(h=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==h&&(u=u.set("Accept",h));let f=s&&s.context;void 0===f&&(f=new ls);const m=this.configuration.selectHeaderContentType(["application/json","application/x-www-form-urlencoded"]);void 0!==m&&(u=u.set("Content-Type",m));let y="json";return h&&(y=h.startsWith("text")?"text":this.configuration.isJsonMime(h)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/sparql`,o,{context:f,params:l,responseType:y,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}technologyNames(n,i="body",r=!1,s){const o=n.cache,a=n.token;let c=new dr({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let h=s&&s.context;void 0===h&&(h=new ls);let f="json";return u&&(f=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/technology-names`,{context:h,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}tissueBlocks(n,i="body",r=!1,s){const o=n.age,a=n.ageRange,c=n.bmi,l=n.bmiRange,u=n.cache,h=n.ontologyTerms,f=n.cellTypeTerms,g=n.biomarkerTerms,m=n.consortiums,y=n.providers,b=n.sex,R=n.spatial,L=n.technologies,ie=n.token;let q=new dr({encoder:this.encoder});null!=o&&(q=this.addToHttpParams(q,o,"age")),null!=a&&(q=this.addToHttpParams(q,a,"age-range")),null!=c&&(q=this.addToHttpParams(q,c,"bmi")),null!=l&&(q=this.addToHttpParams(q,l,"bmi-range")),null!=u&&(q=this.addToHttpParams(q,u,"cache")),h&&h.forEach(We=>{q=this.addToHttpParams(q,We,"ontology-terms")}),f&&f.forEach(We=>{q=this.addToHttpParams(q,We,"cell-type-terms")}),g&&g.forEach(We=>{q=this.addToHttpParams(q,We,"biomarker-terms")}),m&&m.forEach(We=>{q=this.addToHttpParams(q,We,"consortiums")}),y&&y.forEach(We=>{q=this.addToHttpParams(q,We,"providers")}),null!=b&&(q=this.addToHttpParams(q,b,"sex")),R&&R.forEach(We=>{q=this.addToHttpParams(q,We,"spatial")}),L&&L.forEach(We=>{q=this.addToHttpParams(q,We,"technologies")}),null!=ie&&(q=this.addToHttpParams(q,ie,"token"));let Ee=this.defaultHeaders,Re=s&&s.httpHeaderAccept;void 0===Re&&(Re=this.configuration.selectHeaderAccept(["application/json"])),void 0!==Re&&(Ee=Ee.set("Accept",Re));let tt=s&&s.context;void 0===tt&&(tt=new ls);let dt="json";return Re&&(dt=Re.startsWith("text")?"text":this.configuration.isJsonMime(Re)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/tissue-blocks`,{context:tt,params:q,responseType:dt,withCredentials:this.configuration.withCredentials,headers:Ee,observe:i,reportProgress:r})}}return t.\u0275fac=function(n){return new(n||t)(lt(uh),lt(kNe,8),lt(Dq,8))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const SF=new qt,qm={cacheBusterObserver:SF},ip={cacheBusterObserver:SF,maxCacheCount:4};function Oq(t,e,n){return t?{min:t[0]>e?t[0]:void 0,max:t[1]<n?t[1]:void 0}:void 0}function jNe(t){return{age:Oq(t?.ageRange,1,110),bmi:Oq(t?.bmiRange,13,83),sex:t?.sex?.toLowerCase?.(),ontologyTerms:t?.ontologyTerms,cellTypeTerms:t?.cellTypeTerms,biomarkerTerms:t?.biomarkerTerms,consortiums:t?.consortiums,providers:t?.tmc,technologies:t?.technologies,spatial:t?.spatialSearches}}function Nq(t){return t.map(e=>({...e,transformMatrix:new kn(e.transformMatrix??[])}))}class oo{constructor(e,n){this.api=e,this.globalConfig=n,n.getOption("hubmapToken").subscribe(SF)}getDatabaseStatus(){return this.doRequest(e=>this.api.dbStatus(e))}getProviderNames(){return this.doRequest(e=>this.api.providerNames(e))}getDatasetTechnologyNames(){return this.doRequest(e=>this.api.technologyNames(e))}getOntologyTreeModel(){return this.doRequest(e=>this.api.ontologyTreeModel(e),void 0,{},t=>t)}getCellTypeTreeModel(){return this.doRequest(e=>this.api.cellTypeTreeModel(e),void 0,{},t=>t)}getBiomarkerTreeModel(){return this.doRequest(e=>this.api.biomarkerTreeModel(e),void 0,{},t=>t)}getReferenceOrgans(){return this.doRequest(e=>this.api.referenceOrgans(e),void 0,{},t=>t)}getTissueBlockResults(e){return this.doRequest(n=>this.api.tissueBlocks(n),e,{},t=>t)}getAggregateResults(e){return this.doRequest(n=>this.api.aggregateResults(n),e)}getOntologyTermOccurences(e){return this.doRequest(n=>this.api.ontologyTermOccurences(n),e)}getCellTypeTermOccurences(e){return this.doRequest(n=>this.api.cellTypeTermOccurences(n),e)}getBiomarkerTermOccurences(e){return this.doRequest(n=>this.api.biomarkerTermOccurences(n),e)}getScene(e){return this.doRequest(n=>this.api.scene(n),e,{},Nq)}getReferenceOrganScene(e,n){return this.doRequest(i=>this.api.referenceOrganScene(i),n,{organIri:e},Nq)}doRequest(e,n,i,r){const{api:s,globalConfig:o}=this,a={...jNe(n),...i};return ah([o.getOption("remoteApiEndpoint"),o.getOption("hubmapToken")]).pipe(Si(1),br(([c,l])=>{s.configuration.basePath=c,l&&(a.token=l)}),Ki(()=>e(a)),Y(c=>r?r(c):c))}static#e=this.\u0275fac=function(n){return new(n||oo)(lt(Rq),lt(Wu))};static#t=this.\u0275prov=Pt({token:oo,factory:oo.\u0275fac,providedIn:"root"})}function Aa(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}let CF;function Yc(){return CF||(CF=function UNe(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const i=Aa(n);return(r,s)=>i.then(o=>s(o.transaction(e,r).objectStore(e)))}("keyval-store","keyval")),CF}function VNe(t,e=Yc()){return e("readonly",n=>Aa(n.get(t)))}function HNe(t,e=Yc()){return e("readwrite",n=>(t.forEach(i=>n.put(i[1],i[0])),Aa(n.transaction)))}function GNe(t,e=Yc()){return e("readwrite",n=>(t.forEach(i=>n.delete(i)),Aa(n.transaction)))}Un([Xa(qm),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",At)],oo.prototype,"getProviderNames",null),Un([Xa(qm),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",At)],oo.prototype,"getDatasetTechnologyNames",null),Un([Xa(qm),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",At)],oo.prototype,"getOntologyTreeModel",null),Un([Xa(qm),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",At)],oo.prototype,"getCellTypeTreeModel",null),Un([Xa(qm),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",At)],oo.prototype,"getBiomarkerTreeModel",null),Un([Xa(qm),jt("design:type",Function),jt("design:paramtypes",[]),jt("design:returntype",At)],oo.prototype,"getReferenceOrgans",null),Un([Xa(ip),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],oo.prototype,"getTissueBlockResults",null),Un([Xa(ip),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],oo.prototype,"getAggregateResults",null),Un([Xa(ip),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],oo.prototype,"getOntologyTermOccurences",null),Un([Xa(ip),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],oo.prototype,"getCellTypeTermOccurences",null),Un([Xa(ip),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],oo.prototype,"getBiomarkerTermOccurences",null),Un([Xa(ip),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],oo.prototype,"getScene",null),Un([Xa(ip),jt("design:type",Function),jt("design:paramtypes",[String,Object]),jt("design:returntype",At)],oo.prototype,"getReferenceOrganScene",null);var zNe=M(7783),WNe=M(4515),$Ne=M.n(WNe);const tb="http://www.w3.org/1999/02/22-rdf-syntax-ns#",nb="http://www.w3.org/2001/XMLSchema#",TF="http://www.w3.org/2000/10/swap/",ko={xsd:{decimal:`${nb}decimal`,boolean:`${nb}boolean`,double:`${nb}double`,integer:`${nb}integer`,string:`${nb}string`},rdf:{type:`${tb}type`,nil:`${tb}nil`,first:`${tb}first`,rest:`${tb}rest`,langString:`${tb}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${TF}reify#forSome`,forAll:`${TF}reify#forAll`},log:{implies:`${TF}log#implies`}},{xsd:gS}=ko,qNe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Pq={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},XNe=/[\x00-\x20<>\\"\{\}\|\^\`]/,YNe={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},KNe=/$0^/;class Fq{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,this._lineMode=!!(e=e||{}).lineMode){this._n3Mode=!1;for(const n in this)!(n in YNe)&&this[n]instanceof RegExp&&(this[n]=KNe)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,n){let i=this._input,r=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this._comments&&(c=this._comment.exec(a[0]))&&s("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),r=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return n&&(this._comments&&(c=this._comment.exec(i))&&s("comment",c[1],"",this._line,i.length),i=null,s("eof","","",this._line,0)),this._input=i;const l=this._line,u=i[0];let h="",f="",g="",m=null,y=0,b=!1;switch(u){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(y=1,h="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){b=!0;break}case"<":if(m=this._unescapedIri.exec(i))h="IRI",f=m[1];else if(m=this._iri.exec(i)){if(f=this._unescape(m[1]),null===f||XNe.test(f))return o(this);h="IRI"}else i.length>1&&"<"===i[1]?(h="<<",y=2):this._n3Mode&&i.length>1&&"="===i[1]&&(h="inverse",y=2,f=">");break;case">":i.length>1&&">"===i[1]&&(h=">>",y=2);break;case"_":((m=this._blank.exec(i))||n&&(m=this._blank.exec(`${i} `)))&&(h="blank",g="_",f=m[1]);break;case'"':if(m=this._simpleQuotedString.exec(i))f=m[1];else if(({value:f,matchLength:y}=this._parseLiteral(i)),null===f)return o(this);(null!==m||0!==y)&&(h="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(m=this._simpleApostropheString.exec(i))f=m[1];else if(({value:f,matchLength:y}=this._parseLiteral(i)),null===f)return o(this);(null!==m||0!==y)&&(h="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(m=this._variable.exec(i))&&(h="var",f=m[0]);break;case"@":"literal"===this._previousMarker&&(m=this._langcode.exec(i))?(h="langcode",f=m[1]):(m=this._keyword.exec(i))&&(h=m[0]);break;case".":if(1===i.length?n:i[1]<"0"||i[1]>"9"){h=".",y=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(m=this._number.exec(i)||n&&(m=this._number.exec(`${i} `)))&&(h="literal",f=m[0],g="string"==typeof m[1]?gS.double:"string"==typeof m[2]?gS.decimal:gS.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(m=this._sparqlKeyword.exec(i))?h=m[0].toUpperCase():b=!0;break;case"f":case"t":(m=this._boolean.exec(i))?(h="literal",f=m[0],g=gS.boolean):b=!0;break;case"a":(m=this._shortPredicates.exec(i))?(h="abbreviation",f="a"):b=!0;break;case"=":this._n3Mode&&i.length>1&&(h="abbreviation",">"!==i[1]?(y=1,f="="):(y=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(y=1,h=u);break;case"{":!this._lineMode&&i.length>=2&&("|"===i[1]?(h="{|",y=2):(h=u,y=1));break;case"|":i.length>=2&&"}"===i[1]&&(h="|}",y=2);break;default:b=!0}if(b&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(m=this._prefix.exec(i))?((m=this._prefixed.exec(i))||n&&(m=this._prefixed.exec(`${i} `)))&&(h="prefixed",g=m[1]||"",f=this._unescape(m[2])):(h="prefix",f=m[1]||"")),"^^"===this._previousMarker)switch(h){case"prefixed":h="type";break;case"IRI":h="typeIRI";break;default:h=""}if(!h)return n||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?o(this):this._input=i;const R=y||m[0].length,L=s(h,f,g,l,R);this.previousToken=L,this._previousMarker=h,i=i.substr(R,i.length)}function s(a,c,l,u,h){const f=i?r-i.length:r,m={type:a,value:c,prefix:l,line:u,start:f,end:f+h};return e(null,m),m}function o(a){e(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let n=!1;const i=e.replace(qNe,(r,s,o,a)=>{if("string"==typeof s)return String.fromCharCode(Number.parseInt(s,16));if("string"==typeof o){let c=Number.parseInt(o,16);return c<=65535?String.fromCharCode(Number.parseInt(o,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(1023&c))}return a in Pq?Pq[a]:(n=!0,"")});return n?null:i}_parseLiteral(e){if(e.length>=3){const n=e.match(/^(?:"""|"|'''|'|)/)[0],i=n.length;let r=Math.max(this._literalClosingPos,i);for(;(r=e.indexOf(n,r))>0;){let s=0;for(;"\\"===e[r-s-1];)s++;if(s%2==0){const o=e.substring(i,r),a=o.split(/\r\n|\r|\n/).length-1,c=r+i;if(1===i&&0!==a||3===i&&this._lineMode)break;return this._line+=a,{value:this._unescape(o),matchLength:c}}r++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const n=new Error(`Unexpected "${e}" on line ${this._line}.`);return n.context={token:void 0,line:this._line,previousToken:this.previousToken},n}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,n){if(this._line=1,"string"==typeof e){if(this._input=this._readStartingBom(e),"function"!=typeof n){const i=[];let r;if(this._tokenizeToEnd((s,o)=>s?r=s:i.push(o),!0),r)throw r;return i}$Ne()(()=>this._tokenizeToEnd(n,!0))}else this._pendingBuffer=null,"function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",i=>{null!==this._input&&0!==i.length&&(this._pendingBuffer&&(i=Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),128&i[i.length-1]?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof i?i:i.toString()):this._input+=i,this._tokenizeToEnd(n,!1)))}),e.on("end",()=>{"string"==typeof this._input&&this._tokenizeToEnd(n,!0)}),e.on("error",n)}}const{rdf:JNe,xsd:rp}=ko;let ib,ZNe=0;const IF={namedNode:function QNe(t){return new DF(t)},blankNode:function ePe(t){return new Bq(t||"n3-"+ZNe++)},variable:function nPe(t){return new kq(t)},literal:function tPe(t,e){if("string"==typeof e)return new sp(`"${t}"@${e.toLowerCase()}`);let n=e?e.value:"";return""===n&&("boolean"==typeof t?n=rp.boolean:"number"==typeof t&&(Number.isFinite(t)?n=Number.isInteger(t)?rp.integer:rp.double:(n=rp.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),new sp(""===n||n===rp.string?`"${t}"`:`"${t}"^^${n}`)},defaultGraph:function iPe(){return ib},quad:Uq,triple:Uq},wr=IF;class Kc{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Kc?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class DF extends Kc{get termType(){return"NamedNode"}}class sp extends Kc{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let n=e.lastIndexOf('"')+1;return n<e.length&&"@"===e[n++]?e.substr(n).toLowerCase():""}get datatype(){return new DF(this.datatypeString)}get datatypeString(){const e=this.id,n=e.lastIndexOf('"')+1,i=n<e.length?e[n]:"";return"^"===i?e.substr(n+2):"@"!==i?rp.string:JNe.langString}equals(e){return e instanceof sp?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Bq extends Kc{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class kq extends Kc{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}function Xm(t,e,n){if(e=e||IF,!t)return e.defaultGraph();switch(t[0]){case"?":return e.variable(t.substr(1));case"_":return e.blankNode(t.substr(2));case'"':if(e===IF)return new sp(t);if('"'===t[t.length-1])return e.literal(t.substr(1,t.length-2));const i=t.lastIndexOf('"',t.length-1);return e.literal(t.substr(1,i-1),"@"===t[i+1]?t.substr(i+2):e.namedNode(t.substr(i+3)));case"[":t=JSON.parse(t);break;default:if(!n||!Array.isArray(t))return e.namedNode(t)}return e.quad(Xm(t[0],e,!0),Xm(t[1],e,!0),Xm(t[2],e,!0),t[3]&&Xm(t[3],e,!0))}function Sa(t,e){if("string"==typeof t)return t;if(t instanceof Kc&&"Quad"!==t.termType)return t.id;if(!t)return ib.id;switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return`_:${t.value}`;case"Variable":return`?${t.value}`;case"DefaultGraph":return"";case"Literal":return`"${t.value}"${t.language?`@${t.language}`:t.datatype&&t.datatype.value!==rp.string?`^^${t.datatype.value}`:""}`;case"Quad":const n=[Sa(t.subject,!0),Sa(t.predicate,!0),Sa(t.object,!0)];return t.graph&&"DefaultGraph"!==t.graph.termType&&n.push(Sa(t.graph,!0)),e?n:JSON.stringify(n);default:throw new Error(`Unexpected termType: ${t.termType}`)}}ib=new class jq extends Kc{constructor(){return super(""),ib||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};class RF extends Kc{constructor(e,n,i,r){super(""),this._subject=e,this._predicate=n,this._object=i,this._graph=r||ib}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function Uq(t,e,n,i){return new RF(t,e,n,i)}let Vq=0;class mS{constructor(e){this._contextStack=[],this._graph=null,this._setBase((e=e||{}).baseIRI),e.factory&&Hq(this,e.factory);const n="string"==typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(n),r=/trig/.test(n),s=/triple/.test(n),o=/quad/.test(n),a=this._n3Mode=/n3/.test(n),c=s||o;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||r||s||a),this._supportsRDFStar=""===n||/star|\*$/.test(n),c&&(this._resolveRelativeIRI=l=>null),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new Fq({lineMode:c,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Vq=0}_setBase(e){if(e){const n=e.indexOf("#");n>=0&&(e=e.substr(0,n)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,n,i,r,s){const o=this._n3Mode;this._contextStack.push({type:e,subject:i,predicate:r,object:s,graph:n,inverse:!!o&&this._inversePredicate,blankPrefix:o?this._prefixes._:"",quantified:o?this._quantified:null}),o&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,n){const i=this._contextStack.pop();if(!i||i.type!==e)return this._error(`Unexpected ${n.type}`,n);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,n){let i;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(null===r)return this._error("Invalid IRI",e);i=this._namedNode(r);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(void 0===s)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(s+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!n&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const n=e.type;switch(n){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${n}`,e):(this._subject=null,"]"===n?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const n=null===this._predicate;return this._restoreContext("blank",e),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:n?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let n=null,i=null,r=this._readListItem;const s=this._subject,o=this._contextStack,a=o[o.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=n=this._blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),0!==o.length&&"list"===o[o.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(n=this._literal(e.value,this._namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(n=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===s?null===a.predicate?a.subject=i:a.object=i:this._emit(s,this.RDF_REST,i,this._graph),null!==n){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,n),this._subject=n,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,n,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let n=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;n=this._literal(this._literalValue,i),e=null;break;case"langcode":n=this._literal(this._literalValue,e.value),e=null}return{token:e,literal:n}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,n){const i=this._completeLiteral(e);if(i)return this._object=i.literal,n&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let n,i=this._graph;const r=this._subject,s=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,n=this._contextStack.length?this._readSubject:this._readInTopContext,s&&(this._inversePredicate=!1);break;case";":n=this._readPredicate;break;case",":n=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF* syntax",e);this._subject=this._quad(r,this._predicate,this._object,this.DEFAULTGRAPH),n=this._readPredicate;break;case"|}":if("Quad"!==this._subject.termType)return this._error("Unexpected asserted triple closing",e);this._subject=null,n=this._readPunctuation;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){n=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==r){const o=this._predicate,a=this._object;s?this._emit(a,o,r,i):this._emit(r,o,a,i)}return n}_readBlankNodePunctuation(e){let n;switch(e.type){case";":n=this._readPredicate;break;case",":n=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),n}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const n=this._readEntity(e);return this._prefixes[this._prefix]=n.value,this._prefixCallback(this._prefix,n),this._readDeclarationPunctuation}_readBaseIRI(e){const n="IRI"===e.type&&this._resolveIRI(e.value);return n?(this._setBase(n),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let n;switch(e.type){case"IRI":case"prefixed":if(void 0!==(n=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,n,this.QUANTIFIERS_GRAPH)):this._quantified[n.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const n=this._contextStack,i=n.length&&n[n.length-1];if(i&&"item"===i.type){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let n,i;const r=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(n=this._subject,this._subject=r):(n=this._object,this._object=r),this._emit(n,i,r,this._graph),this._readPath}_readBackwardPath(e){const n=this._blankNode();let i,r;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(r=this._subject,this._subject=n):(r=this._object,this._object=n),this._emit(n,i,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const n=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),null===this._subject?(this._subject=n,this._readPredicate):(this._object=n,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,n,i,r){this._callback(null,this._quad(e,n,i,r||this.DEFAULTGRAPH))}_error(e,n){const i=new Error(`${e} on line ${n.line}.`);i.context={token:n,line:n.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=OF}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const n=e.length;let i="",r=-1,s=-1,o=0,a="/";for(;r<n;){switch(a){case":":if(s<0&&"/"===e[++r]&&"/"===e[++r])for(;(s=r+1)<n&&"/"!==e[s];)r=s;break;case"?":case"#":r=n;break;case"/":if("."===e[r+1])switch(a=e[1+ ++r],a){case"/":i+=e.substring(o,r-1),o=r+1;break;case void 0:case"?":case"#":return i+e.substring(o,r)+e.substr(r+1);case".":if(a=e[1+ ++r],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(o,r-2),(o=i.lastIndexOf("/"))>=s&&(i=i.substr(0,o)),"/"!==a)return`${i}/${e.substr(r+1)}`;o=r+1}}}a=e[++r]}return i+e.substring(o)}parse(e,n,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Vq++}_`,this._prefixCallback=i||OF,this._inversePredicate=!1,this._quantified=Object.create(null),!n){const r=[];let s;if(this._callback=(o,a)=>{o?s=o:a&&r.push(a)},this._lexer.tokenize(e).every(o=>this._readCallback=this._readCallback(o)),s)throw s;return r}this._callback=n,this._lexer.tokenize(e,(r,s)=>{null!==r?(this._callback(r),this._callback=OF):this._readCallback&&(this._readCallback=this._readCallback(s))})}}function OF(){}function Hq(t,e){const n=e.namedNode;t._namedNode=n,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=n(ko.rdf.first),t.RDF_REST=n(ko.rdf.rest),t.RDF_NIL=n(ko.rdf.nil),t.N3_FORALL=n(ko.r.forAll),t.N3_FORSOME=n(ko.r.forSome),t.ABBREVIATIONS={a:n(ko.rdf.type),"=":n(ko.owl.sameAs),">":n(ko.log.implies)},t.QUANTIFIERS_GRAPH=n("urn:n3:quantifiers")}function rPe(t){return!!t&&"NamedNode"===t.termType}function sPe(t){return!!t&&"BlankNode"===t.termType}function oPe(t){return!!t&&"Literal"===t.termType}function aPe(t){return!!t&&"Variable"===t.termType}function rb(t){return!!t&&"DefaultGraph"===t.termType}function cPe(t){return rb(t.graph)}function lPe(t,e){return NF({"":t.value||t},e)("")}function NF(t,e){const n=Object.create(null);for(const r in t)i(r,t[r]);function i(r,s){if("string"==typeof s){const o=Object.create(null);n[r]=a=>o[a]||(o[a]=e.namedNode(s+a))}else if(!(r in n))throw new Error(`Unknown prefix: ${r}`);return n[r]}return e=e||wr,i}Hq(mS.prototype,wr),wr.defaultGraph();var ab=M(6947);class _S{constructor(e,n){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._entities=Object.create(null),this._blankNodeIndex=0,!n&&e&&!e[0]&&(n=e,e=null),this._factory=(n=n||{}).factory||wr,e&&this.addQuads(e)}_termFromId(e,n){if("."===e[0]){const i=this._entities,r=e.split(".");return this._factory.quad(this._termFromId(i[r[1]]),this._termFromId(i[r[2]]),this._termFromId(i[r[3]]),r[4]&&this._termFromId(i[r[4]]))}return Xm(e,n)}_termToNumericId(e){if("Quad"===e.termType){const n=this._termToNumericId(e.subject),i=this._termToNumericId(e.predicate),r=this._termToNumericId(e.object);let s;return n&&i&&r&&(rb(e.graph)||(s=this._termToNumericId(e.graph)))&&this._ids[s?`.${n}.${i}.${r}.${s}`:`.${n}.${i}.${r}`]}return this._ids[Sa(e)]}_termToNewNumericId(e){const n=e&&"Quad"===e.termType?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${rb(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:Sa(e);return this._ids[n]||(this._ids[this._entities[++this._id]=n]=this._id)}get size(){let e=this._size;if(null!==e)return e;e=0;const n=this._graphs;let i,r;for(const s in n)for(const o in i=n[s].subjects)for(const a in r=i[o])e+=Object.keys(r[a]).length;return this._size=e}_addToIndex(e,n,i,r){const s=e[n]||(e[n]={}),o=s[i]||(s[i]={}),a=r in o;return a||(o[r]=null),!a}_removeFromIndex(e,n,i,r){const s=e[n],o=s[i];delete o[r];for(const a in o)return;delete s[i];for(const a in s)return;delete e[n]}*_findInIndex(e,n,i,r,s,o,a,c){let l,u,h;const f=this._entities,g=this._termFromId(c,this._factory),m={subject:null,predicate:null,object:null};n&&((l=e,e={})[n]=l[n]);for(const y in e)if(u=e[y]){m[s]=this._termFromId(f[y],this._factory),i&&((l=u,u={})[i]=l[i]);for(const b in u)if(h=u[b]){m[o]=this._termFromId(f[b],this._factory);const R=r?r in h?[r]:[]:Object.keys(h);for(let L=0;L<R.length;L++)m[a]=this._termFromId(f[R[L]],this._factory),yield this._factory.quad(m.subject,m.predicate,m.object,g)}}}_loop(e,n){for(const i in e)n(i)}_loopByKey0(e,n,i){let r,s;if(r=e[n])for(s in r)i(s)}_loopByKey1(e,n,i){let r,s;for(r in e)s=e[r],s[n]&&i(r)}_loopBy2Keys(e,n,i,r){let s,o,a;if((s=e[n])&&(o=s[i]))for(a in o)r(a)}_countInIndex(e,n,i,r){let o,a,c,s=0;n&&((o=e,e={})[n]=o[n]);for(const l in e)if(a=e[l]){i&&((o=a,a={})[i]=o[i]);for(const u in a)(c=a[u])&&(r?r in c&&s++:s+=Object.keys(c).length)}return s}_getGraphs(e){if(!function hPe(t){return"string"==typeof t||t instanceof String}(e))return this._graphs;const n={};return n[e]=this._graphs[e],n}_uniqueEntities(e){const n=Object.create(null);return i=>{i in n||(n[i]=!0,e(this._termFromId(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),r=Sa(r);let s=this._graphs[r];s||(s=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(s)),e=this._termToNewNumericId(e),n=this._termToNewNumericId(n),i=this._termToNewNumericId(i);const o=this._addToIndex(s.subjects,e,n,i);return this._addToIndex(s.predicates,n,i,e),this._addToIndex(s.objects,i,e,n),this._size=null,o}addQuads(e){for(let n=0;n<e.length;n++)this.addQuad(e[n])}delete(e){return this.removeQuad(e),this}has(e,n,i,r){return e&&e.subject&&({subject:e,predicate:n,object:i,graph:r}=e),!this.readQuads(e,n,i,r).next().done}import(e){return e.on("data",n=>{this.addQuad(n)}),e}removeQuad(e,n,i,r){n||(r=e.graph,i=e.object,n=e.predicate,e=e.subject),r=Sa(r);const s=this._graphs;let o,a,c;if(!((e=e&&this._termToNumericId(e))&&(n=n&&this._termToNumericId(n))&&(i=i&&this._termToNumericId(i))&&(o=s[r])&&(a=o.subjects[e])&&(c=a[n])&&i in c))return!1;for(e in this._removeFromIndex(o.subjects,e,n,i),this._removeFromIndex(o.predicates,n,i,e),this._removeFromIndex(o.objects,i,e,n),null!==this._size&&this._size--,o.subjects)return!0;return delete s[r],!0}removeQuads(e){for(let n=0;n<e.length;n++)this.removeQuad(e[n])}remove(e){return e.on("data",n=>{this.removeQuad(n)}),e}removeMatches(e,n,i,r){const s=new ab.Readable({objectMode:!0});return s._read=()=>{for(const o of this.readQuads(e,n,i,r))s.push(o);s.push(null)},this.remove(s)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,n,i,r){return[...this.readQuads(e,n,i,r)]}*readQuads(e,n,i,r){r=r&&Sa(r);const s=this._getGraphs(r);let o,a,c,l;if(!(e&&!(a=this._termToNumericId(e))||n&&!(c=this._termToNumericId(n))||i&&!(l=this._termToNumericId(i))))for(const u in s)(o=s[u])&&(a?l?yield*this._findInIndex(o.objects,l,a,c,"object","subject","predicate",u):yield*this._findInIndex(o.subjects,a,c,null,"subject","predicate","object",u):c?yield*this._findInIndex(o.predicates,c,l,null,"predicate","object","subject",u):l?yield*this._findInIndex(o.objects,l,null,null,"object","subject","predicate",u):yield*this._findInIndex(o.subjects,null,null,null,"subject","predicate","object",u))}match(e,n,i,r){return new PF(this,e,n,i,r)}countQuads(e,n,i,r){r=r&&Sa(r);const s=this._getGraphs(r);let a,c,l,u,o=0;if(e&&!(c=this._termToNumericId(e))||n&&!(l=this._termToNumericId(n))||i&&!(u=this._termToNumericId(i)))return 0;for(const h in s)(a=s[h])&&(o+=e?i?this._countInIndex(a.objects,u,c,l):this._countInIndex(a.subjects,c,l,u):n?this._countInIndex(a.predicates,l,u,c):this._countInIndex(a.objects,u,c,l));return o}forEach(e,n,i,r,s){this.some(o=>(e(o),!1),n,i,r,s)}every(e,n,i,r,s){let o=!1;const a=!this.some(c=>(o=!0,!e(c)),n,i,r,s);return o&&a}some(e,n,i,r,s){for(const o of this.readQuads(n,i,r,s))if(e(o))return!0;return!1}getSubjects(e,n,i){const r=[];return this.forSubjects(s=>{r.push(s)},e,n,i),r}forSubjects(e,n,i,r){r=r&&Sa(r);const s=this._getGraphs(r);let o,a,c;if(e=this._uniqueEntities(e),!(n&&!(a=this._termToNumericId(n))||i&&!(c=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?c?this._loopBy2Keys(o.predicates,a,c,e):this._loopByKey1(o.subjects,a,e):c?this._loopByKey0(o.objects,c,e):this._loop(o.subjects,e))}getPredicates(e,n,i){const r=[];return this.forPredicates(s=>{r.push(s)},e,n,i),r}forPredicates(e,n,i,r){r=r&&Sa(r);const s=this._getGraphs(r);let o,a,c;if(e=this._uniqueEntities(e),!(n&&!(a=this._termToNumericId(n))||i&&!(c=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?c?this._loopBy2Keys(o.objects,c,a,e):this._loopByKey0(o.subjects,a,e):c?this._loopByKey1(o.predicates,c,e):this._loop(o.predicates,e))}getObjects(e,n,i){const r=[];return this.forObjects(s=>{r.push(s)},e,n,i),r}forObjects(e,n,i,r){r=r&&Sa(r);const s=this._getGraphs(r);let o,a,c;if(e=this._uniqueEntities(e),!(n&&!(a=this._termToNumericId(n))||i&&!(c=this._termToNumericId(i))))for(r in s)(o=s[r])&&(a?c?this._loopBy2Keys(o.subjects,a,c,e):this._loopByKey1(o.objects,a,e):c?this._loopByKey0(o.predicates,c,e):this._loop(o.objects,e))}getGraphs(e,n,i){const r=[];return this.forGraphs(s=>{r.push(s)},e,n,i),r}forGraphs(e,n,i,r){for(const s in this._graphs)this.some(o=>(e(o.graph),!0),n,i,r,s)}createBlankNode(e){let n,i;if(e)for(n=e=`_:${e}`,i=1;this._ids[n];)n=e+i++;else do{n="_:b"+this._blankNodeIndex++}while(this._ids[n]);return this._ids[n]=++this._id,this._entities[this._id]=n,this._factory.blankNode(n.substr(2))}extractLists({remove:e=!1,ignoreErrors:n=!1}={}){const i={},r=n?()=>!0:(a,c)=>{throw new Error(`${a.value} ${c}`)},s=this.getQuads(null,ko.rdf.rest,ko.rdf.nil,null),o=e?[...s]:[];return s.forEach(a=>{const c=[];let u,h,l=!1;const f=a.graph;let g=a.subject;for(;g&&!l;){const m=this.getQuads(null,null,g,null),y=this.getQuads(g,null,null,null);let b,R=null,L=null,ie=null;for(let q=0;q<y.length&&!l;q++)b=y[q],b.graph.equals(f)?u?l=r(g,"has non-list arcs out"):b.predicate.value===ko.rdf.first?R?l=r(g,"has multiple rdf:first arcs"):o.push(R=b):b.predicate.value===ko.rdf.rest?L?l=r(g,"has multiple rdf:rest arcs"):o.push(L=b):m.length?l=r(g,"can't be subject and object"):(u=b,h="subject"):l=r(g,"not confined to single graph");for(let q=0;q<m.length&&!l;++q)b=m[q],u?l=r(g,"can't have coreferences"):b.predicate.value===ko.rdf.rest?ie?l=r(g,"has incoming rdf:rest arcs"):ie=b:(u=b,h="object");R?c.unshift(R.object):l=r(g,"has no list head"),g=ie&&ie.subject}l?e=!1:u&&(i[u[h].value]=c)}),e&&this.removeQuads(o),i}*[Symbol.iterator](){yield*this.readQuads()}}class PF extends ab.Readable{constructor(e,n,i,r,s){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:n,predicate:i,object:r,graph:s})}get filtered(){if(!this._filtered){const{n3Store:e,graph:n,object:i,predicate:r,subject:s}=this,o=this._filtered=new _S({factory:e._factory});for(const a of e.readQuads(s,r,i,n))o.addQuad(a)}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this)this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,n,i,r){return new PF(this.filtered,e,n,i,r)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}var gPe=M(2130),mPe=M(2756);function Rr(t,e,n,i,r){return t.readQuads(e,n,i,r)}function Xq(t){const e=t.length;let n=0;return new ab.Readable({objectMode:!0,read(){this.push(n<e?t[n++]:null)}})}function FF(t,e){return LF.apply(this,arguments)}function LF(){return LF=C(function*(t,e){let n;if("string"==typeof t){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.json())}else n=t;if(n){const i=yield(0,gPe.toRDF)(n);e.import(Xq(i))}return e}),LF.apply(this,arguments)}function BF(){return BF=C(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new mPe.RdfXmlParser({dataFactory:wr}),r=new Promise(s=>{i.once("end",()=>s(e))});return e.import(i),i.write(n),i.end(),r}return e}),BF.apply(this,arguments)}function kF(){return kF=C(function*(t,e){let n;if("string"==typeof t&&t?.startsWith("http")){const i=yield fetch(t,{redirect:"follow"});i.ok&&(n=yield i.text())}else n=t;if(n){const i=new mS({format:"n3"}).parse(n);e.import(Xq(i))}return e}),kF.apply(this,arguments)}function jF(t,e){const n=JSON.parse(t),i=new _S;return Object.assign(i,n,{_factory:e??wr}),i}const yS="Unknown Euler angle order",Km=.99999;var qs=function(t){return t[t.ZYX=0]="ZYX",t[t.YXZ=1]="YXZ",t[t.XZY=2]="XZY",t[t.ZXY=3]="ZXY",t[t.YZX=4]="YZX",t[t.XYZ=5]="XYZ",t}(qs||{});class us extends HE{static get ZYX(){return qs.ZYX}static get YXZ(){return qs.YXZ}static get XZY(){return qs.XZY}static get ZXY(){return qs.ZXY}static get YZX(){return qs.YZX}static get XYZ(){return qs.XYZ}static get RollPitchYaw(){return qs.ZYX}static get DefaultOrder(){return qs.ZYX}static get RotationOrders(){return qs}static rotationOrder(e){return qs[e]}get ELEMENTS(){return 4}constructor(e=0,n=0,i=0,r=us.DefaultOrder){super(-0,-0,-0,-0),arguments.length>0&&Array.isArray(arguments[0])?this.fromVector3(...arguments):this.set(e,n,i,r)}fromQuaternion(e){const[n,i,r,s]=e,o=i*i,a=-2*(o+r*r)+1,c=2*(n*i+s*r);let l=-2*(n*r-s*i);l=l>1?1:l,l=l<-1?-1:l;const f=Math.atan2(2*(i*r+s*n),-2*(n*n+o)+1),g=Math.asin(l),m=Math.atan2(c,a);return this.set(f,g,m,us.RollPitchYaw)}fromObject(e){throw new Error("not implemented")}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=Number.isFinite(e[3])||this.order,this.check()}set(e=0,n=0,i=0,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=Number.isFinite(r)?r:this[3],this.check()}validate(){return function bPe(t){return t>=0&&t<6}(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}toArray(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e}toArray4(e=[],n=0){return e[n]=this[0],e[n+1]=this[1],e[n+2]=this[2],e[n+3]=this[3],e}toVector3(e=[-0,-0,-0]){return e[0]=this[0],e[1]=this[1],e[2]=this[2],e}get x(){return this[0]}set x(e){this[0]=Qn(e)}get y(){return this[1]}set y(e){this[1]=Qn(e)}get z(){return this[2]}set z(e){this[2]=Qn(e)}get alpha(){return this[0]}set alpha(e){this[0]=Qn(e)}get beta(){return this[1]}set beta(e){this[1]=Qn(e)}get gamma(){return this[2]}set gamma(e){this[2]=Qn(e)}get phi(){return this[0]}set phi(e){this[0]=Qn(e)}get theta(){return this[1]}set theta(e){this[1]=Qn(e)}get psi(){return this[2]}set psi(e){this[2]=Qn(e)}get roll(){return this[0]}set roll(e){this[0]=Qn(e)}get pitch(){return this[1]}set pitch(e){this[1]=Qn(e)}get yaw(){return this[2]}set yaw(e){this[2]=Qn(e)}get order(){return this[3]}set order(e){this[3]=function wPe(t){if(t<0&&t>=6)throw new Error(yS);return t}(e)}fromVector3(e,n){return this.set(e[0],e[1],e[2],Number.isFinite(n)?n:this[3])}fromArray(e,n=0){return this[0]=e[0+n],this[1]=e[1+n],this[2]=e[2+n],void 0!==e[3]&&(this[3]=e[3]),this.check()}fromRollPitchYaw(e,n,i){return this.set(e,n,i,qs.ZYX)}fromRotationMatrix(e,n=us.DefaultOrder){return this._fromRotationMatrix(e,n),this.check()}getRotationMatrix(e){return this._getRotationMatrix(e)}getQuaternion(){const e=new e2;switch(this[4]){case qs.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case qs.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case qs.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case qs.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case qs.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case qs.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(yS)}}_fromRotationMatrix(e,n=us.DefaultOrder){const i=e[0],r=e[4],s=e[8],o=e[1],a=e[5],c=e[9],l=e[2],u=e[6],h=e[10];switch(n=n||this[3]){case us.XYZ:this[1]=Math.asin(jr(s,-1,1)),Math.abs(s)<Km?(this[0]=Math.atan2(-c,h),this[2]=Math.atan2(-r,i)):(this[0]=Math.atan2(u,a),this[2]=0);break;case us.YXZ:this[0]=Math.asin(-jr(c,-1,1)),Math.abs(c)<Km?(this[1]=Math.atan2(s,h),this[2]=Math.atan2(o,a)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case us.ZXY:this[0]=Math.asin(jr(u,-1,1)),Math.abs(u)<Km?(this[1]=Math.atan2(-l,h),this[2]=Math.atan2(-r,a)):(this[1]=0,this[2]=Math.atan2(o,i));break;case us.ZYX:this[1]=Math.asin(-jr(l,-1,1)),Math.abs(l)<Km?(this[0]=Math.atan2(u,h),this[2]=Math.atan2(o,i)):(this[0]=0,this[2]=Math.atan2(-r,a));break;case us.YZX:this[2]=Math.asin(jr(o,-1,1)),Math.abs(o)<Km?(this[0]=Math.atan2(-c,a),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(s,h));break;case us.XZY:this[2]=Math.asin(-jr(r,-1,1)),Math.abs(r)<Km?(this[0]=Math.atan2(u,a),this[1]=Math.atan2(s,i)):(this[0]=Math.atan2(-c,h),this[1]=0);break;default:throw new Error(yS)}return this[3]=n,this}_getRotationMatrix(e){const n=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=this.x,r=this.y,s=this.z,o=Math.cos(i),a=Math.cos(r),c=Math.cos(s),l=Math.sin(i),u=Math.sin(r),h=Math.sin(s);switch(this[3]){case us.XYZ:{const f=o*c,g=o*h,m=l*c,y=l*h;n[0]=a*c,n[4]=-a*h,n[8]=u,n[1]=g+m*u,n[5]=f-y*u,n[9]=-l*a,n[2]=y-f*u,n[6]=m+g*u,n[10]=o*a;break}case us.YXZ:{const f=a*c,g=a*h,m=u*c,y=u*h;n[0]=f+y*l,n[4]=m*l-g,n[8]=o*u,n[1]=o*h,n[5]=o*c,n[9]=-l,n[2]=g*l-m,n[6]=y+f*l,n[10]=o*a;break}case us.ZXY:{const f=a*c,g=a*h,m=u*c,y=u*h;n[0]=f-y*l,n[4]=-o*h,n[8]=m+g*l,n[1]=g+m*l,n[5]=o*c,n[9]=y-f*l,n[2]=-o*u,n[6]=l,n[10]=o*a;break}case us.ZYX:{const f=o*c,g=o*h,m=l*c,y=l*h;n[0]=a*c,n[4]=m*u-g,n[8]=f*u+y,n[1]=a*h,n[5]=y*u+f,n[9]=g*u-m,n[2]=-u,n[6]=l*a,n[10]=o*a;break}case us.YZX:{const f=o*a,g=o*u,m=l*a,y=l*u;n[0]=a*c,n[4]=y-f*h,n[8]=m*h+g,n[1]=h,n[5]=o*c,n[9]=-l*c,n[2]=-u*c,n[6]=g*h+m,n[10]=f-y*h;break}case us.XZY:{const f=o*a,g=o*u,m=l*a,y=l*u;n[0]=a*c,n[4]=-h,n[8]=u*c,n[1]=f*h+y,n[5]=o*c,n[9]=g*h-m,n[2]=m*h-g,n[6]=l*c,n[10]=y*h+f;break}default:throw new Error(yS)}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}toQuaternion(){const e=Math.cos(.5*this.yaw),n=Math.sin(.5*this.yaw),i=Math.cos(.5*this.roll),r=Math.sin(.5*this.roll),s=Math.cos(.5*this.pitch),o=Math.sin(.5*this.pitch);return new e2(e*r*s-n*i*o,e*i*o+n*r*s,n*i*s-e*r*o,e*i*s+n*r*o)}}var xPe=M(2475),EPe=M(689),Qi=M(7376);const Yq={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let vS;const APe=new Uint8Array(16);function SPe(){if(!vS&&(vS=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vS))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vS(APe)}const ao=[];for(let t=0;t<256;++t)ao.push((t+256).toString(16).slice(1));const MPe=function CPe(t,e,n){if(Yq.randomUUID&&!e&&!t)return Yq.randomUUID();const i=(t=t||{}).random||(t.rng||SPe)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return function Kq(t,e=0){return ao[t[e+0]]+ao[t[e+1]]+ao[t[e+2]]+ao[t[e+3]]+"-"+ao[t[e+4]]+ao[t[e+5]]+"-"+ao[t[e+6]]+ao[t[e+7]]+"-"+ao[t[e+8]]+ao[t[e+9]]+"-"+ao[t[e+10]]+ao[t[e+11]]+ao[t[e+12]]+ao[t[e+13]]+ao[t[e+14]]+ao[t[e+15]]}(i)};var bS=M(1994);function*wS(t,e,n){for(const[i,r]of Object.entries(n))for(const s of Rr(t,e,i,null,null)){const o="Literal"===s.object.termType?(0,bS.fromRdf)(s.object):s.object.id;yield[r,o]}}function op(t,e,n,i){const r={"@id":e,"@type":n};for(const[s,o]of Object.entries(i))for(const a of Rr(t,r["@id"],s,null,null)){const c="Literal"===a.object.termType?(0,bS.fromRdf)(a.object):a.object.id;r[o]=c}return r}const Wi=NF({base:"http://purl.org/ccf/latest/ccf.owl#",ccf:"http://purl.org/ccf/",fma:"http://purl.org/sig/ont/fma/fma",obo:"http://purl.obolibrary.org/obo/",uberon:"http://purl.obolibrary.org/obo/UBERON_",cl:"http://purl.obolibrary.org/obo/CL_",lmha:"http://purl.obolibrary.org/obo/LMHA_",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/"},wr),Jq={x:Wi("rdf"),type:Wi("rdf")("type")},TPe_label=(Wi("rdfs"),Wi("rdfs")("label")),Zt=(Wi("rdfs")("comment"),Wi("rdfs")("isDefinedBy"),Wi("rdfs")("seeAlso"),Wi("ccf")),Wn={id:Wi("ccf")("has_registration_location"),label:Wi("rdfs")("label"),description:Wi("rdfs")("comment"),link:Zt("url"),sex:Zt("sex"),age:Zt("age"),bmi:Zt("bmi"),Male:wr.literal("Male"),Female:wr.literal("Female"),consortiumName:Zt("consortium_name"),providerName:Zt("tissue_provider_name"),providerUUID:Zt("tissue_provider_uuid"),donor:Zt("comes_from"),sections:Zt("subdivided_into_sections"),datasets:Zt("generates_dataset"),sampleType:Zt("sample_type"),TissueBlock:wr.literal("Tissue Block"),TissueSection:wr.literal("Tissue Section"),NonStandard:wr.literal("Non-standard"),sectionCount:Zt("section_count"),sectionSize:Zt("section_size"),sectionUnits:Zt("section_size_unit"),sectionNumber:Zt("section_number"),spatialEntity:Zt("has_registration_location"),ontologyTerms:Zt("has_ontology_term"),cellTypeTerms:Zt("has_cell_type_term"),biomarkerTerms:Zt("has_biomarker_term"),technology:Zt("technology"),thumbnail:Zt("thumbnail")},ti={x:Zt,base:Wi("base"),ontologyNode:{label:Zt("ccf_pref_label"),parent:Zt("ccf_part_of"),children:Zt("ccf_part_of"),rui_rank:Zt("rui_rank"),synonymLabels:wr.namedNode("http://www.geneontology.org/formats/oboInOwl#hasExactSynonym")},asctb:{part_of:Zt("ccf_part_of"),ct_is_a:Zt("ccf_ct_isa"),located_in:Zt("ccf_located_in"),characterizes:Zt("ccf_characterizes"),bm_located_in:Zt("ccf_bm_located_in")},spatial:{Female:Wi("base")("VHFemale"),Male:Wi("base")("VHMale"),BothSexes:Wi("base")("VHBothSexes"),FemaleOrgans:Wi("base")("VHFemaleOrgans"),MaleOrgans:Wi("base")("VHMaleOrgans")},SpatialObjectReference:Zt("spatial_object_reference"),SpatialEntity:Zt("spatial_entity"),SpatialPlacement:Zt("spatial_placement"),spatialObjectReference:{file:Zt("file_url"),file_format:Zt("file_format"),file_subpath:Zt("file_subpath")},extractionSet:{label:Wi("rdfs")("label"),rui_rank:Zt("rui_rank")},spatialEntity:{label:Wi("rdfs")("label"),description:Wi("rdfs")("comment"),creator:Wi("dcterms")("creator"),creator_first_name:Zt("creator_first_name"),creator_last_name:Zt("creator_last_name"),creator_middle_name:Zt("creator_middle_name"),creator_orcid:Zt("creator_orcid"),creation_date:Wi("dcterms")("created"),updated_date:Zt("updated_date"),ccf_annotations:Zt("collides_with"),representation_of:Zt("representation_of"),reference_organ:Zt("has_reference_organ"),extraction_set_for:Zt("extraction_set_for"),extraction_set:Zt("has_extraction_set"),sex:Zt("organ_owner_sex"),side:Zt("organ_side"),rui_rank:Zt("rui_rank"),slice_thickness:Zt("slice_thickness"),slice_count:Zt("slice_count"),x_dimension:Zt("x_dimension"),y_dimension:Zt("y_dimension"),z_dimension:Zt("z_dimension"),dimension_units:Zt("dimension_unit"),object:Zt("has_object_reference")},spatialPlacement:{source:Zt("placement_for"),target:Zt("placement_relative_to"),placement_date:Wi("dcterms")("created"),x_scaling:Zt("x_scaling"),y_scaling:Zt("y_scaling"),z_scaling:Zt("z_scaling"),scaling_units:Zt("scaling_unit"),x_rotation:Zt("x_rotation"),y_rotation:Zt("y_rotation"),z_rotation:Zt("z_rotation"),w_rotation:Zt("theta_rotation"),rotation_order:Zt("rotation_order"),rotation_units:Zt("rotation_unit"),x_translation:Zt("x_translation"),y_translation:Zt("y_translation"),z_translation:Zt("z_translation"),translation_units:Zt("translation_unit")}},$n={x:Wi("uberon"),body:Wi("uberon")("0013702")},IPe={x:Wi("cl"),cell:Wi("cl")("0000000")},cb={x:Wi("fma")},Jc=(Wi("lmha"),{body:$n.body,cell:IPe.cell,respiratory_system:$n.x("0001004"),colon:$n.x("0001155"),left_lung:$n.x("0002168"),right_lung:$n.x("0002167"),left_bronchus:$n.x("0002178"),right_bronchus:$n.x("0002177"),kidney:$n.x("0002113"),ureter:$n.x("0000056"),eye:$n.x("0000970"),fallopian_tube:$n.x("0003889"),knee:$n.x("0001465"),ovary:$n.x("0000992"),trachea:$n.x("0003126"),aorta:$n.x("0000947"),blood:$n.x("0000178"),bone_marrow:$n.x("0002371"),male_reproductive_system:$n.x("0000079"),lymph_node:$n.x("0000029"),blood_vasculature:$n.x("0004537"),brain:$n.x("0000955"),eye_left:$n.x("0004548"),eye_right:cb.x("54449"),fallopian_tube_left:$n.x("0001303"),fallopian_tube_right:$n.x("0001302"),heart:$n.x("0000948"),kidney_left:$n.x("0004538"),kidney_right:$n.x("0004539"),knee_left:cb.x("24978"),knee_right:cb.x("24977"),large_intestine:$n.x("0000059"),liver:$n.x("0002107"),lungs:$n.x("0002048"),mesenteric_lymph_node:$n.x("0002509"),ovary_left:cb.x("7214"),ovary_right:cb.x("7213"),pancreas:$n.x("0001264"),pelvis:$n.x("0001270"),prostate_gland:$n.x("0002367"),skin:$n.x("0002097"),small_intestine:$n.x("0002108"),spleen:$n.x("0002106"),thymus:$n.x("0002370"),ureter_left:$n.x("0001223"),ureter_right:$n.x("0001222"),urinary_bladder:$n.x("0001255"),uterus:$n.x("0000995")});function UF(t){const e={};return Object.entries(t).forEach(([n,i])=>{e[i.id]=n}),e}const xS={spatialObjectReference:UF(ti.spatialObjectReference),spatialEntity:UF(ti.spatialEntity),spatialPlacement:UF(ti.spatialPlacement)};function Zq(t,e){const n=op(t,e,"ExtractionSet",xS.spatialEntity);return n.extractionSites=(0,Qi.sortBy)(t.getSubjects(ti.spatialEntity.extraction_set,e,null).map(i=>ap(t,i.id)),["rui_rank"]),n}function ap(t,e){const n=op(t,e,"SpatialEntity",xS.spatialEntity);return n.object&&(n.object=function DPe(t,e){return op(t,e,"SpatialObjectReference",xS.spatialObjectReference)}(t,n.object)),n.ccf_annotations&&(n.ccf_annotations=t.getObjects(e,ti.spatialEntity.ccf_annotations,null).map(i=>i.id)),t.forSubjects(i=>n.entityId=i.id,Wn.spatialEntity,e,null),n}function PPe(t,e){const n=op(t,e,"SpatialPlacement",xS.spatialPlacement);return n.source&&(n.source=ap(t,n.source)),n.target&&(n.target=ap(t,n.target)),n}function Qq(t,e){const n=e;let i;switch(n.translation_units){case"centimeter":i=.01;break;case"millimeter":i=.001;break;default:i=1}const r=[n.x_translation,n.y_translation,n.z_translation].map(a=>a*i),s=[n.x_rotation,n.y_rotation,n.z_rotation].map(TH),o=[n.x_scaling,n.y_scaling,n.z_scaling];return t.translate(r).rotateXYZ(s).scale(o)}class eX{constructor(e){this.db=e,this.createGraph()}createGraph(){this.graph=new xPe.DirectedGraph;const e=this.db.store;e.forSubjects(i=>{this.addNode(i.id,"SpatialObjectReference")},Jq.type,ti.SpatialObjectReference,null),e.forSubjects(i=>{this.addNode(i.id,"SpatialEntity")},Jq.type,ti.SpatialEntity,null);const n={};for(const i of Rr(e,null,ti.spatialPlacement.source,null,null))n[i.subject.id]=i.object.id;for(const i of Rr(e,null,ti.spatialPlacement.target,null,null)){const r=n[i.subject.id];r&&this.addEdge(i.subject.id,r,i.object.id,"SpatialPlacement")}}addNode(e,n){this.graph.mergeNode(e,{type:n})}addEdge(e,n,i,r){this.graph.mergeDirectedEdge(n,i,{type:r,id:e})}getTransformationMatrix(e,n){if(e===n)return new kn(kn.IDENTITY);if(!this.graph.hasNode(e)||!this.graph.hasNode(n))return;const i=this.db.store,r=new kn(kn.IDENTITY),s=(0,EPe.Wq)(this.graph,e,n);if(s&&s.length>0){s.reverse();let o="";for(const a of s)o&&Qq(r,PPe(i,this.graph.getEdgeAttribute(a,o,"id"))),o=a;return r}}getSpatialPlacement(e,n){const i=this.graph.hasNode(e["@id"])?e["@id"]:void 0,r=(0,Qi.get)(e,"placement[0]",(0,Qi.get)(e,"placement",void 0));let s;if(r&&this.graph.hasNode(r.target)?(s=this.getTransformationMatrix(r.target,n),s&&(s=Qq(s,r))):i&&(s=this.getTransformationMatrix(i,n)),s){const o=(new us).fromRotationMatrix(s,us.XYZ),a=s.getTranslation().map(u=>1e3*u),c=o.toVector3().map(vae),l=s.getScale().map(u=>u<1&&u>.999999?1:u);return{"@context":"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${MPe()}_placement`,"@type":"SpatialPlacement",source:e["@id"],target:n,placement_date:(new Date).toISOString().split("T")[0],x_scaling:l[0],y_scaling:l[1],z_scaling:l[2],scaling_units:"ratio",x_rotation:c[0],y_rotation:c[1],z_rotation:c[2],rotation_order:"XYZ",rotation_units:"degree",x_translation:a[0],y_translation:a[1],z_translation:a[2],translation_units:"millimeter"}}}}class tX{constructor(e){this.db=e}getSpatialEntity(e){return ap(this.db.store,e)}getExtractionSets(e){return function RPe(t,e){return(0,Qi.sortBy)(t.getSubjects(ti.spatialEntity.extraction_set_for,e,null).map(n=>Zq(t,n.id)),["rui_rank"])}(this.db.store,e)}getExtractionSet(e){return Zq(this.db.store,e)}getAnatomicalStructures(e){return function OPe(t,e){return(0,Qi.sortBy)(t.getSubjects(ti.spatialEntity.reference_organ,e,null).map(n=>ap(t,n.id)).filter(n=>n["@id"]!==e),["rui_rank"])}(this.db.store,e)}getReferenceOrgans(){return function NPe(t){const e=[];return t.forEach(n=>{n.subject.id===n.object.id&&e.push(ap(t,n.subject.id))},null,ti.spatialEntity.reference_organ,null,null),(0,Qi.sortBy)(e,["rui_rank"])}(this.db.store)}getReferenceBody(e){let n;switch(e?.sex){case"Male":n=ti.spatial.Male.id;break;case"Female":n=ti.spatial.Female.id;break;default:n=ti.spatial.BothSexes.id}return this.getSpatialEntity(n)}getReferenceOrganSets(e){let n=this.getReferenceOrgans();switch(e?.sex){case"Male":n=n.filter(i=>"Male"===i.sex);break;case"Female":n=n.filter(i=>"Female"===i.sex)}return e?.debug&&(n=n.map(i=>[[i],this.getAnatomicalStructures(i["@id"])]).reduce((i,[r,s])=>i.concat(s.length>0?s:r),[])),n}getReferenceSceneNodes(e){const n=this.getReferenceBody(e),i=[];let r=[...this.getReferenceOrganSets(e).map(s=>{const o="http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of,a=this.getSceneNode(s,n,{color:[255,255,255,255],opacity:o?.5:.2,unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!o});return o&&a?void i.push(a):a})];return i.length>0&&(r=[...i,...r]),e?.debug&&(r=r.concat([this.getSceneNode(this.getSpatialEntity(ti.base("VHRightKidney").id),n,{color:[0,0,255,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ti.base("VHLeftKidney").id),n,{color:[255,0,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ti.base("VHSpleenCC1").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ti.base("VHSpleenCC2").id),n,{color:[0,255,0,127.5],geometry:"wireframe"}),this.getSceneNode(this.getSpatialEntity(ti.base("VHSpleenCC3").id),n,{color:[0,255,0,127.5],geometry:"wireframe"})])),r.filter(s=>void 0!==s)}getReferenceOrganScene(e,n){const i=void 0!==n?.sex&&"both"!==n?.sex?.toLowerCase(),r=this.getReferenceOrgans().filter(s=>s.representation_of===e&&(!i||s.sex===n?.sex));if(r.length>0){const s=r[0],a=this.getSceneNode(s,s,{color:[255,255,255,255],opacity:"http://purl.obolibrary.org/obo/UBERON_0002097"===s.representation_of?.5:.2,unpickable:!0,_lighting:"pbr"}),c=(this.db.getSpatialEntities(n)??[]).map(l=>this.getSceneNode(l,s,{color:[255,255,255,229.5]}));return[a].concat(c).filter(l=>void 0!==l)}return[]}getEntitySceneNodes(e){const n=this.getReferenceBody(e);return this.db.getSpatialEntities(e).map(i=>this.getSceneNode(i,n,{color:[255,255,255,229.5]})).filter(i=>void 0!==i)}getSceneNode(e,n,i={}){const r=e?.object?.file_format?.startsWith("model/gltf");let o=this.db.graph.getTransformationMatrix(r&&e.object?e.object["@id"]:e["@id"],n["@id"]);if(o){if(r)o=new kn(kn.IDENTITY).rotateX(TH(90)).multiplyLeft(o);else{let a;switch(e.dimension_units){case"centimeter":a=.01;break;case"millimeter":a=.001;break;default:a=1}const c=[e.x_dimension,e.y_dimension,e.z_dimension].map(l=>l*a/2);o.scale(c)}return{"@id":e["@id"],"@type":"SpatialSceneNode",entityId:e.entityId,ccf_annotations:e.ccf_annotations,representation_of:e.representation_of,reference_organ:e.reference_organ,sex:e.sex,scenegraph:r?e.object?.file:void 0,scenegraphNode:r?e.object?.file_subpath:void 0,transformMatrix:o,tooltip:e.label,...i}}}getScene(e){return[...this.getReferenceSceneNodes(e),...this.getEntitySceneNodes(e)]}}function lb(t,e,n){const i=new Set;for(const r of e)for(const s of Rr(t,r,n,null,null))i.add(s.object.id);return i}const Jm=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),Cr=(Math,Math,{});function HPe(t,{precision:e=Cr.precision||4}={}){return t=function VPe(t){return Math.round(t/Cr.EPSILON)*Cr.EPSILON}(t),"".concat(parseFloat(t.toPrecision(e)))}function hh(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ub(t,e,n){const i=Cr.EPSILON;n&&(Cr.EPSILON=n);try{if(t===e)return!0;if(hh(t)&&hh(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!ub(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=Cr.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{Cr.EPSILON=i}}function Zc(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}Cr.EPSILON=1e-12,Cr.debug=!1,Cr.precision=4,Cr.printTypes=!1,Cr.printDegrees=!1,Cr.printRowMajor=!0;class VF extends(function XPe(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}(Array)){get ELEMENTS(){return Zc(!1),0}clone(){return(new this.constructor).copy(this)}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}fromArray(e,n=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+n];return this.check()}to(e){return e===this?this:hh(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toArray(e=[],n=0){for(let i=0;i<this.ELEMENTS;++i)e[n+i]=this[i];return e}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Cr)}formatString(e){let n="";for(let i=0;i<this.ELEMENTS;++i)n+=(i>0?", ":"")+HPe(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!ub(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,i){void 0===i&&(i=n,n=e,e=this);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(n[r]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),n[i]);return this.check()}add(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=n[i];return this.check()}subtract(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=n[i];return this.check()}scale(e){if(Array.isArray(e))return this.multiply(e);for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.scale(1/e)}clampScalar(e,n){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),n);return this.check()}multiplyByScalar(e){return this.scale(e)}get elements(){return this}check(){if(Cr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}}function co(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function nX(t,e,n=""){if(Cr.debug&&!function YPe(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}const iX={};function HF(t,e){iX[t]||(iX[t]=!0,console.warn("".concat(t," has been removed in version ").concat(e,", see upgrade guide for more information")))}class KPe extends VF{get ELEMENTS(){return Zc(!1),0}copy(e){return Zc(!1),this}get x(){return this[0]}set x(e){this[0]=co(e)}get y(){return this[1]}set y(e){this[1]=co(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];n+=r*r}return co(n)}dot(e){let n=0;for(let i=0;i<this.ELEMENTS;++i)n+=this[i]*e[i];return co(n)}normalize(){const e=this.magnitude();if(0!==e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=n[i];return this.check()}divide(...e){for(const n of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=n[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Zc(e>=0&&e<this.ELEMENTS,"index is out of range"),co(this[e])}setComponent(e,n){return Zc(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var Ca=typeof Float32Array<"u"?Float32Array:Array;function rX(){var t=new Ca(3);return Ca!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function sX(t,e,n){var i=new Ca(3);return i[0]=t,i[1]=e,i[2]=n,i}function oX(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ES(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],c=n[2];return t[0]=r*c-s*a,t[1]=s*o-i*c,t[2]=i*a-r*o,t}function aX(t,e,n){var i=e[0],r=e[1],s=e[2];return t[0]=i*n[0]+r*n[3]+s*n[6],t[1]=i*n[1]+r*n[4]+s*n[7],t[2]=i*n[2]+r*n[5]+s*n[8],t}Math,Math,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});rX();const GF=[0,0,0],cX={};class En extends KPe{static get ZERO(){return cX.ZERO=cX.ZERO||Object.freeze(new En(0,0,0,0))}constructor(e=0,n=0,i=0){super(-0,-0,-0),1===arguments.length&&hh(e)?this.copy(e):(Cr.debug&&(co(e),co(n),co(i)),this[0]=e,this[1]=n,this[2]=i)}set(e,n,i){return this[0]=e,this[1]=n,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Cr.debug&&(co(e.x),co(e.y),co(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=co(e)}angle(e){return function sFe(t,e){var n=t[0],i=t[1],r=t[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(n*n+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),h=u&&oX(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}(this,e)}cross(e){return ES(this,this,e),this.check()}rotateX({radians:e,origin:n=GF}){return function nFe(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateY({radians:e,origin:n=GF}){return function iFe(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=GF}){return function rFe(t,e,n,i){var r=[],s=[];r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2]}(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return function eFe(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s+n[15];t[0]=(n[0]*i+n[4]*r+n[8]*s+n[12])/(o=o||1),t[1]=(n[1]*i+n[5]*r+n[9]*s+n[13])/o,t[2]=(n[2]*i+n[6]*r+n[10]*s+n[14])/o}(this,this,e),this.check()}transformAsVector(e){return function aFe(t,e,n){const i=e[0],r=e[1],s=e[2],o=n[3]*i+n[7]*r+n[11]*s||1;t[0]=(n[0]*i+n[4]*r+n[8]*s)/o,t[1]=(n[1]*i+n[5]*r+n[9]*s)/o,t[2]=(n[2]*i+n[6]*r+n[10]*s)/o}(this,this,e),this.check()}transformByMatrix3(e){return aX(this,this,e),this.check()}transformByMatrix2(e){return function cFe(t,e,n){const i=e[0],r=e[1];t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return function tFe(t,e,n){var i=n[0],r=n[1],s=n[2],a=e[0],c=e[1],l=e[2],u=r*l-s*c,h=s*a-i*l,f=i*c-r*a,g=r*f-s*h,m=s*u-i*f,y=i*h-r*u,b=2*n[3];h*=b,f*=b,m*=2,y*=2,t[0]=a+(u*=b)+(g*=2),t[1]=c+h+m,t[2]=l+f+y}(this,this,e),this.check()}}new En,new En;const db=new En,hX=new En;class zF{constructor(e=[0,0,0],n=0){this.radius=-0,this.center=new En,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=db.from(n),this.center=(new En).from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new zF(this.center,this.radius)}union(e){const n=this.center,i=this.radius,s=e.radius,o=db.copy(e.center).subtract(n),a=o.magnitude();if(i>=a+s)return this.clone();if(s>=a+i)return e.clone();const c=.5*(i+a+s);return hX.copy(o).scale((-i+c)/a).add(n),this.center.copy(hX),this.radius=c,this}expand(e){const n=(e=db.from(e)).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(e){this.center.transform(e);const n=function dX(t,e){var s=e[4],o=e[5],a=e[6],c=e[8],l=e[9],u=e[10];return t[0]=Math.hypot(e[0],e[1],e[2]),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(c,l,u),t}(db,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){const n=(e=db.from(e)).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(e){const i=this.radius,s=e.normal.dot(this.center)+e.distance;return s<-i?Jm.OUTSIDE:s<i?Jm.INTERSECTING:Jm.INSIDE}}class fFe extends VF{get ELEMENTS(){return Zc(!1),0}get RANK(){return Zc(!1),0}toString(){let e="[";if(Cr.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,i){return this[n*this.RANK+e]=co(i),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)n[r]=this[i+r];return n}setColumn(e,n){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=n[r];return this}}function fX(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=n[0],g=n[1],m=n[2],y=n[3],b=n[4],R=n[5],L=n[6],ie=n[7],q=n[8];return t[0]=f*i+g*o+m*l,t[1]=f*r+g*a+m*u,t[2]=f*s+g*c+m*h,t[3]=y*i+b*o+R*l,t[4]=y*r+b*a+R*u,t[5]=y*s+b*c+R*h,t[6]=L*i+ie*o+q*l,t[7]=L*r+ie*a+q*u,t[8]=L*s+ie*c+q*h,t}function pX(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}!function wFe(){var t=new Ca(2);Ca!=Float32Array&&(t[0]=0,t[1]=0)}();const gX=Object.freeze([1,0,0,0,1,0,0,0,1]),EFe=Object.freeze([0,0,0,0,0,0,0,0,0]),AFe=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),Qm={};class ta extends fFe{static get IDENTITY(){return Qm.IDENTITY=Qm.IDENTITY||Object.freeze(new ta(gX)),Qm.IDENTITY}static get ZERO(){return Qm.ZERO=Qm.ZERO||Object.freeze(new ta(EFe)),Qm.ZERO}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return AFe}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}set(e,n,i,r,s,o,a,c,l){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this.check()}setRowMajor(e,n,i,r,s,o,a,c,l){return this[0]=e,this[1]=r,this[2]=a,this[3]=n,this[4]=s,this[5]=c,this[6]=i,this[7]=o,this[8]=l,this.check()}determinant(){return function _Fe(t){var r=t[3],s=t[4],o=t[5],a=t[6],c=t[7],l=t[8];return t[0]*(l*s-o*c)+t[1]*(-l*r+o*a)+t[2]*(c*r-s*a)}(this)}identity(){return this.copy(gX)}fromQuaternion(e){return function bFe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n+n,a=i+i,c=r+r,l=n*o,u=i*o,h=i*a,f=r*o,g=r*a,m=r*c,y=s*o,b=s*a,R=s*c;t[0]=1-h-m,t[3]=u-R,t[6]=f+b,t[1]=u+R,t[4]=1-l-m,t[7]=g-y,t[2]=f-b,t[5]=g+y,t[8]=1-l-h}(this,e),this.check()}transpose(){return function gFe(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8]}(this,this),this.check()}invert(){return function mFe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],h=u*o-a*l,f=-u*s+a*c,g=l*s-o*c,m=n*h+i*f+r*g;m&&(t[0]=h*(m=1/m),t[1]=(-u*i+r*l)*m,t[2]=(a*i-r*o)*m,t[3]=f*m,t[4]=(u*n-r*c)*m,t[5]=(-a*n+r*s)*m,t[6]=g*m,t[7]=(-l*n+i*c)*m,t[8]=(o*n-i*s)*m)}(this,this),this.check()}multiplyLeft(e){return fX(this,e,this),this.check()}multiplyRight(e){return fX(this,this,e),this.check()}rotate(e){return function vFe(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=Math.sin(n),g=Math.cos(n);t[0]=g*i+f*o,t[1]=g*r+f*a,t[2]=g*s+f*c,t[3]=g*o-f*i,t[4]=g*a-f*r,t[5]=g*c-f*s,t[6]=l,t[7]=u,t[8]=h}(this,this,e),this.check()}scale(e){return Array.isArray(e)?pX(this,this,e):pX(this,this,[e,e,e]),this.check()}translate(e){return function yFe(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],h=e[8],f=n[0],g=n[1];t[0]=i,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=c,t[6]=f*i+g*o+l,t[7]=f*r+g*a+u,t[8]=f*s+g*c+h}(this,this,e),this.check()}transform(e,n){switch(e.length){case 2:n=function xFe(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t}(n||[-0,-0],e,this);break;case 3:n=aX(n||[-0,-0,-0],e,this);break;case 4:n=function lFe(t,e,n){const i=e[0],r=e[1],s=e[2];return t[0]=n[0]*i+n[3]*r+n[6]*s,t[1]=n[1]*i+n[4]*r+n[7]*s,t[2]=n[2]*i+n[5]*r+n[8]*s,t[3]=e[3],t}(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return nX(n,e.length),n}transformVector(e,n){return HF("Matrix3.transformVector"),this.transform(e,n)}transformVector2(e,n){return HF("Matrix3.transformVector"),this.transform(e,n)}transformVector3(e,n){return HF("Matrix3.transformVector"),this.transform(e,n)}}function mX(){var t=new Ca(4);return Ca!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function _X(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function yX(t,e,n){var i=e[0],r=e[1],s=e[2],o=e[3],a=n[0],c=n[1],l=n[2],u=n[3];return t[0]=i*u+o*a+r*l-s*c,t[1]=r*u+o*c+s*a-i*l,t[2]=s*u+o*l+i*c-r*a,t[3]=o*u-i*a-r*c-s*l,t}!function SFe(){var t=new Ca(4);Ca!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var QFe=function(){var t=rX(),e=sX(1,0,0),n=sX(0,1,0);return function(i,r,s){var o=oX(r,s);return o<-.999999?(ES(t,e,r),function ZPe(t){return Math.hypot(t[0],t[1],t[2])}(t)<1e-6&&ES(t,n,r),function QPe(t,e){var n=e[0],i=e[1],r=e[2],s=n*n+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s}(t,t),_X(i,t,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(ES(t,r,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+o,function PFe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=i*o,t[2]=r*o,t[3]=s*o,t}(i,i))}}();mX(),mX(),function pFe(){var t=new Ca(9);Ca!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();const eLe=[0,0,0,1];class EX extends VF{constructor(e=0,n=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,n,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,i,r){return this[0]=e,this[1]=n,this[2]=i,this[3]=r,this.check()}fromMatrix3(e){return function vX(t,e){var i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,t[0]=(e[5]-e[7])*(i=.5/i),t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),t[r]=.5*i,t[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),t[s]=(e[3*s+r]+e[3*r+s])*i,t[o]=(e[3*o+r]+e[3*r+o])*i}return t}(this,e),this.check()}identity(){return function UFe(t){t[0]=0,t[1]=0,t[2]=0,t[3]=1}(this),this.check()}fromAxisRotation(e,n){return _X(this,e,n),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=co(e)}get y(){return this[1]}set y(e){this[1]=co(e)}get z(){return this[2]}set z(e){this[2]=co(e)}get w(){return this[3]}set w(e){this[3]=co(e)}len(){return function OFe(t){return Math.hypot(t[0],t[1],t[2],t[3])}(this)}lengthSquared(){return function NFe(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r}(this)}dot(e,n){if(void 0!==n)throw new Error("Quaternion.dot only takes one argument");return function FFe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}(this,e)}rotationTo(e,n){return QFe(this,e,n),this.check()}add(e,n){if(void 0!==n)throw new Error("Quaternion.add only takes one argument");return function DFe(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3]}(this,this,e),this.check()}calculateW(){return function zFe(t,e){var n=e[0],i=e[1],r=e[2];t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r))}(this,this),this.check()}conjugate(){return function XFe(t,e){t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3]}(this,this),this.check()}invert(){return function qFe(t,e){var n=e[0],i=e[1],r=e[2],s=e[3],o=n*n+i*i+r*r+s*s,a=o?1/o:0;t[0]=-n*a,t[1]=-i*a,t[2]=-r*a,t[3]=s*a}(this,this),this.check()}lerp(e,n,i){return function LFe(t,e,n,i){var r=e[0],s=e[1],o=e[2],a=e[3];t[0]=r+i*(n[0]-r),t[1]=s+i*(n[1]-s),t[2]=o+i*(n[2]-o),t[3]=a+i*(n[3]-a)}(this,e,n,i),this.check()}multiplyRight(e,n){return Zc(!n),yX(this,this,e),this.check()}multiplyLeft(e,n){return Zc(!n),yX(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,0===e&&(this[3]=1),this.check()}rotateX(e){return function VFe(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+o*a,t[1]=r*c+s*a,t[2]=s*c-r*a,t[3]=o*c-i*a}(this,this,e),this.check()}rotateY(e){return function HFe(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c-s*a,t[1]=r*c+o*a,t[2]=s*c+i*a,t[3]=o*c-r*a}(this,this,e),this.check()}rotateZ(e){return function GFe(t,e,n){n*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(n),c=Math.cos(n);t[0]=i*c+r*a,t[1]=r*c-i*a,t[2]=s*c+o*a,t[3]=o*c-s*a}(this,this,e),this.check()}scale(e){return function RFe(t,e,n){t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n}(this,this,e),this.check()}slerp(e,n,i){switch(arguments.length){case 1:({start:e=eLe,target:n,ratio:i}=arguments[0]);break;case 2:[n,i]=arguments,e=this}return function AS(t,e,n,i){var f,g,m,y,b,r=e[0],s=e[1],o=e[2],a=e[3],c=n[0],l=n[1],u=n[2],h=n[3];return(g=r*c+s*l+o*u+a*h)<0&&(g=-g,c=-c,l=-l,u=-u,h=-h),1-g>1e-6?(f=Math.acos(g),m=Math.sin(f),y=Math.sin((1-i)*f)/m,b=Math.sin(i*f)/m):(y=1-i,b=i),t[0]=y*r+b*c,t[1]=y*s+b*l,t[2]=y*o+b*u,t[3]=y*a+b*h,t}(this,e,n,i),this.check()}transformVector4(e,n=e){return function BFe(t,e,n){var i=e[0],r=e[1],s=e[2],o=n[0],a=n[1],c=n[2],l=n[3],u=l*i+a*s-c*r,h=l*r+c*i-o*s,f=l*s+o*r-a*i,g=-o*i-a*r-c*s;t[0]=u*l+g*-o+h*-c-f*-a,t[1]=h*l+g*-a+f*-o-u*-c,t[2]=f*l+g*-c+u*-a-h*-o,t[3]=e[3]}(n,e,this),nX(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e,n){return this.multiplyLeft(e,n)}multiply(e,n){return this.multiplyRight(e,n)}}const tLe=new En,nLe=new En,SS=new En,CS=new En,MS=new En,iLe=new En,rLe=new En;class WF{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){this.center=(new En).from(e),this.halfAxes=new ta(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2);return[new En(e).len(),new En(n).len(),new En(i).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),i=this.halfAxes.getColumn(2),r=new En(e).normalize(),s=new En(n).normalize(),o=new En(i).normalize();return(new EX).fromMatrix3(new ta([...r,...s,...o]))}fromCenterHalfSizeQuaternion(e,n,i){const r=new EX(i),s=(new ta).fromQuaternion(r);return s[0]=s[0]*n[0],s[1]=s[1]*n[0],s[2]=s[2]*n[0],s[3]=s[3]*n[1],s[4]=s[4]*n[1],s[5]=s[5]*n[1],s[6]=s[6]*n[2],s[7]=s[7]*n[2],s[8]=s[8]*n[2],this.center=(new En).from(e),this.halfAxes=s,this}clone(){return new WF(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new zF){const n=this.halfAxes,i=n.getColumn(0,SS),r=n.getColumn(1,CS),s=n.getColumn(2,MS),o=tLe.copy(i).add(r).add(s);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const n=this.center,i=e.normal,r=this.halfAxes,s=i.x,o=i.y,a=i.z,c=Math.abs(s*r[0]+o*r[1]+a*r[2])+Math.abs(s*r[3]+o*r[4]+a*r[5])+Math.abs(s*r[6]+o*r[7]+a*r[8]),l=i.dot(n)+e.distance;return l<=-c?Jm.OUTSIDE:l>=c?Jm.INSIDE:Jm.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=nLe.from(e).subtract(this.center),i=this.halfAxes,r=i.getColumn(0,SS),s=i.getColumn(1,CS),o=i.getColumn(2,MS),a=r.magnitude(),c=s.magnitude(),l=o.magnitude();r.normalize(),s.normalize(),o.normalize();let h,u=0;return h=Math.abs(n.dot(r))-a,h>0&&(u+=h*h),h=Math.abs(n.dot(s))-c,h>0&&(u+=h*h),h=Math.abs(n.dot(o))-l,h>0&&(u+=h*h),u}computePlaneDistances(e,n,i=[-0,-0]){let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,c=a.getColumn(0,SS),l=a.getColumn(1,CS),u=a.getColumn(2,MS),h=iLe.copy(c).add(l).add(u).add(o),f=rLe.copy(h).subtract(e);let g=n.dot(f);return r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(c).add(l).subtract(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(c).subtract(l).add(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),h.copy(o).add(c).subtract(l).subtract(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).add(l).add(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).add(l).subtract(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).subtract(l).add(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),o.copy(h).subtract(c).subtract(l).subtract(u),f.copy(h).subtract(e),g=n.dot(f),r=Math.min(g,r),s=Math.max(g,s),i[0]=r,i[1]=s,i}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,SS);n.transformAsPoint(e);const i=this.halfAxes.getColumn(1,CS);i.transformAsPoint(e);const r=this.halfAxes.getColumn(2,MS);return r.transformAsPoint(e),this.halfAxes=new ta([...n,...i,...r]),this}getTransform(){throw new Error("not implemented")}}const AX=new En,SX=new En;class $F{constructor(e=[0,0,1],n=0){this.normal=new En,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return Zc(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=AX.from(e),this.normal.from(n).normalize();const i=-this.normal.dot(e);return this.distance=i,this}fromCoefficients(e,n,i,r){return this.normal.set(e,n,i),Zc(ub(this.normal.len(),1)),this.distance=r,this}clone(e){return new $F(this.normal,this.distance)}equals(e){return ub(this.distance,e.distance)&&ub(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=SX.copy(this.normal).transformAsVector(e).normalize(),i=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(i,n)}projectPointOntoPlane(e,n=[0,0,0]){e=AX.from(e);const i=this.getPointDistance(e),r=SX.copy(this.normal).scale(i);return e.subtract(r).to(n)}}new En([1,0,0]),new En([0,1,0]),new En([0,0,1]),new En,new En,new $F(new En(1,0,0),0),new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,new En,Math,new ta,new ta,new ta,new ta,new ta,new En,new En,new En,new En,new En,new ta,new ta,new ta;const PLe={[ti.spatialEntity.x_dimension.id]:"x",[ti.spatialEntity.y_dimension.id]:"y",[ti.spatialEntity.z_dimension.id]:"z"};function LLe(t,e,n,i){const r=e.getTransformationMatrix(n,i);let s;if(r){const o=r.getTranslation(),a=function FLe(t,e){const n=op(t,e,"Dimensions",PLe);return[n.x,n.y,n.z]}(t,n).map(l=>l/1e3/2),c=(new us).fromRotationMatrix(r,us.XYZ).toQuaternion().normalize().calculateW();s=(new WF).fromCenterHalfSizeQuaternion(o,a,c)}return s}function BLe(t,e,n,i){const{x:r,y:s,z:o,radius:a,target:c}=i,l=new Set,u=a/1e3*(a/1e3);for(const h of n){const f=LLe(t,e,h,c);f&&f.distanceSquaredTo([r,s,o].map(m=>m/1e3))<=u&&l.add(h)}return l}function fb(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of Rr(t,a,Wn.donor,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const s=n(r),o=new Set;for(const a of s)for(const c of i.get(a)??[])o.add(c);return o}function IS(t,e,n){const i=new Map,r=new Set;for(const a of e)for(const c of Rr(t,a,Wn.spatialEntity,null,null))r.add(c.object.id),i.has(c.object.id)?i.get(c.object.id)?.push(a):i.set(c.object.id,[a]);const s=n(r),o=new Set;for(const a of s)for(const c of i.get(a)??[])o.add(c);return o}function t_(t,e){return function(n){t.has(n.id)&&e.add(n.id)}}function ZF(t,e,n){const i=new Set;for(const r of n){const s=wr.namedNode(r);t.forSubjects(t_(e,i),ti.spatialEntity.ccf_annotations,s,null)}return i}function QF(t,e){const n=function JLe(t,e){const n=new Map;for(const i of t)for(const r of Rr(e,i,Wn.spatialEntity,null,null))n.has(r.object.id)?n.get(r.object.id)?.add(i):n.set(r.object.id,new Set([i]));return n}(t,e),i=new Map;for(const r of n.keys()){const s=n.get(r);for(const o of Rr(e,r,ti.spatialEntity.ccf_annotations,null,null))if(i.has(o.object.id)){const a=i.get(o.object.id);s?.forEach(c=>a?.add(c))}else i.set(o.object.id,new Set(s))}return i}function tBe(t,e,n){const i={"@id":e,"@type":"OntologyTreeNode",id:e,parent:"",children:[],synonymLabels:[],label:""},r={[ti.ontologyNode.label.id]:"label",[n]:"parent",[ti.ontologyNode.synonymLabels.id]:"synonymLabels"};for(const[s,o]of wS(t,e,r))"synonymLabels"===s?i.synonymLabels.push(o):i[s]=o;return i.children=t.getSubjects(n,e,null).map(s=>s.id),i}function IX(t,e,n,i){const r={root:e,nodes:{}},s=new Set;for(const a of Rr(t,null,i,null,null))s.add(a.subject.id),s.add(a.object.id);for(const a of s)r.nodes[a]=tBe(t,a,i);r.nodes[e]||(r.nodes[e]={"@id":e,"@type":"OntologyTreeNode",id:e,label:n,children:[],synonymLabels:[]});const o=t.getSubjects(i,e,null).map(a=>a.id).sort((a,c)=>r.nodes[a].label.localeCompare(r.nodes[c].label));return r.nodes[e].children=o,DX(r),r}function DX(t,e=void 0,n=new Set){const i=t.nodes[e??t.root];if(i){i.children=i.children.filter(r=>!n.has(r)),i.children.forEach(r=>n.add(r));for(const r of i.children)DX(t,r,n),t.nodes[r]&&(t.nodes[r].parent=i["@id"])}}const RX=(0,Qi.memoize)(function nBe(t){const e=IX(t,Jc.body.id,"body",ti.asctb.part_of.id);return e.nodes[Jc.body.id].children=["http://purl.obolibrary.org/obo/UBERON_0000955","http://purl.obolibrary.org/obo/UBERON_0000029","http://purl.obolibrary.org/obo/UBERON_0000970","http://purl.obolibrary.org/obo/UBERON_0003889","http://purl.obolibrary.org/obo/UBERON_0000948","http://purl.obolibrary.org/obo/UBERON_0002113","http://purl.obolibrary.org/obo/UBERON_0001465","http://purl.obolibrary.org/obo/UBERON_0001737","http://purl.obolibrary.org/obo/UBERON_0002107","http://purl.obolibrary.org/obo/UBERON_0002048","http://purl.obolibrary.org/obo/UBERON_0002182","http://purl.obolibrary.org/obo/UBERON_0001911","http://purl.obolibrary.org/obo/UBERON_0000992","http://purl.obolibrary.org/obo/UBERON_0002373","http://purl.obolibrary.org/obo/UBERON_0001264","http://purl.obolibrary.org/obo/UBERON_0001270","http://purl.obolibrary.org/obo/UBERON_0001987","http://purl.obolibrary.org/obo/UBERON_0002367","http://purl.obolibrary.org/obo/UBERON_0002097","http://purl.obolibrary.org/obo/UBERON_0002108","http://purl.obolibrary.org/obo/UBERON_0002240","http://purl.obolibrary.org/obo/UBERON_0000059","http://purl.obolibrary.org/obo/UBERON_0002106","http://purl.obolibrary.org/obo/UBERON_0002370","http://purl.obolibrary.org/obo/UBERON_0003126","http://purl.obolibrary.org/obo/UBERON_0000056","http://purl.obolibrary.org/obo/UBERON_0001255","http://purl.obolibrary.org/obo/UBERON_0000995","http://purl.obolibrary.org/obo/UBERON_0004537"].filter(n=>n in e.nodes),e},()=>"");function eL(t,e,n,i){return{"@id":`http://purl.org/ccf/${t}`,id:t,label:e,parent:n??"",children:i??[],synonymLabels:[],"@type":"OntologyTreeNode"}}const DS={[Wn.label.id]:"label",[Wn.description.id]:"description",[Wn.link.id]:"link"},sBe={...DS,[Wn.providerName.id]:"providerName"},oBe={...DS,[Wn.technology.id]:"technology",[Wn.thumbnail.id]:"thumbnail"},aBe={...DS,[Wn.sampleType.id]:"sampleType",[Wn.sectionNumber.id]:"sectionNumber",[Wn.datasets.id]:"datasets"},cBe={...DS,[Wn.sampleType.id]:"sampleType",[Wn.sectionCount.id]:"sectionCount",[Wn.sectionSize.id]:"sectionSize",[Wn.sectionUnits.id]:"sectionUnits",[Wn.donor.id]:"donor",[Wn.spatialEntity.id]:"spatialEntityId",[Wn.sections.id]:"sections",[Wn.datasets.id]:"datasets"};function lBe(t,e){return op(t,e,"Donor",sBe)}function OX(t,e){return op(t,e,"Dataset",oBe)}function uBe(t,e){const n={"@id":e,"@type":"Sample",datasets:[]};for(const[i,r]of wS(t,e,aBe))if("datasets"===i){const s=OX(t,r);n[i].push(s)}else n[i]=r;return n}class hBe{constructor(e){this.database=e,this.status="Loading",this.connect()}toJson(){return{status:this.status,message:this.message,checkback:"Ready"===this.status||"Error"===this.status?36e5:2e3,loadTime:this.loadTime,timestamp:this.timestamp}}connect(){var e=this;return C(function*(){e.status="Loading",e.message="Loading database";const n=Date.now();return e.database.connect().then(function(){var i=C(function*(r){r?(e.message="Building scene",e.timestamp=(new Date).toISOString(),yield e.database.getScene(),e.message="Building tissue block results",e.timestamp=(new Date).toISOString(),yield e.database.getTissueBlockResults(),e.message="Aggregating results",e.timestamp=(new Date).toISOString(),yield e.database.getAggregateResults(),e.status="Ready",e.message="Database successfully loaded",e.timestamp=(new Date).toISOString()):(e.status="Error",e.message="Unknown error while loading database",e.timestamp=(new Date).toISOString())});return function(r){return i.apply(this,arguments)}}()).catch(i=>{e.status="Error",e.message=i?.message??"Unknown error while loading database",e.timestamp=(new Date).toISOString()}).finally(()=>{e.loadTime=Date.now()-n})})()}}function tL(){return tL=C(function*(){const t=`https://lod.humanatlas.io/sparql?query=${encodeURIComponent("\nPREFIX owl: <http://www.w3.org/2002/07/owl#>\nPREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\nPREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>\nPREFIX ccf: <http://purl.org/ccf/>\nPREFIX has_characterizing_biomarker_set: <http://purl.obolibrary.org/obo/RO_0015004>\n\nCONSTRUCT { ?bm ccf:ccf_bm_located_in ?as }\nFROM <https://purl.org/ccf/ccf.owl>\nWHERE {\n  ?ct ccf:ccf_located_in ?as .\n\n  ?ct rdfs:subClassOf [\n  \towl:onProperty has_characterizing_biomarker_set: ;\n  \towl:someValuesFrom [ owl:intersectionOf ?bn3 ]] .\n  ?bn3 rdf:rest*/rdf:first [\n  \towl:onProperty ccf:has_marker_component ;\n    owl:someValuesFrom ?bm\n  ] .\n}\n")}`;return fetch(t,{headers:{Accept:"application/ld+json"}}).then(e=>e.json()).catch(e=>(console.log("Error querying lod.humanatlas.io",e),[]))}),tL.apply(this,arguments)}const nL="http://purl.org/ccf/",_Be={"@context":{"@base":nL,"@vocab":nL,ccf:nL,rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",label:"rdfs:label",description:"rdfs:comment",link:"ccf:url",sex:"ccf:sex",age:"ccf:age",bmi:"ccf:bmi",consortium_name:"ccf:consortium_name",provider_name:"ccf:tissue_provider_name",provider_uuid:"ccf:tissue_provider_uuid",donor:{"@id":"ccf:comes_from","@type":"@id"},samples:{"@reverse":"donor"},sections:{"@id":"ccf:subdivided_into_sections","@type":"@id"},datasets:{"@id":"ccf:generates_dataset","@type":"@id"},sample_type:"ccf:sample_type",section_count:"ccf:section_count",section_size:"ccf:section_size",section_units:"ccf:section_size_unit",section_number:"ccf:section_number",rui_location:{"@id":"ccf:has_registration_location","@type":"@id"},ccf_annotations:{"@id":"ccf:collides_with","@type":"@id","@container":"@set"},representation_of:{"@id":"ccf:representation_of","@type":"@id"},reference_organ:{"@id":"ccf:has_reference_organ","@type":"@id"},extraction_set_for:{"@id":"ccf:extraction_set_for","@type":"@id"},extraction_set:{"@id":"ccf:has_extraction_set","@type":"@id"},organ_owner_sex:"ccf:organ_owner_sex",side:"ccf:organ_side",rui_rank:"ccf:rui_rank",slice_thickness:"ccf:slice_thickness",slice_count:"ccf:slice_count",object:{"@id":"ccf:has_object_reference","@type":"@id"},creation_date:"dcterms:created",updated_date:"ccf:updated_date",creator:"dcterms:creator",creator_first_name:"ccf:creator_first_name",creator_last_name:"ccf:creator_last_name",placement:{"@reverse":"ccf:placement_for"},placement_date:"dcterms:created",rotation_order:"ccf:rotation_order",dimension_units:"ccf:dimension_unit",rotation_units:"ccf:rotation_unit",scaling_units:"ccf:scaling_unit",translation_units:"ccf:translation_unit",source:{"@id":"ccf:placement_for","@type":"@id"},target:{"@id":"ccf:placement_relative_to","@type":"@id"},x_rotation:"ccf:x_rotation",y_rotation:"ccf:y_rotation",z_rotation:"ccf:z_rotation",x_scaling:"ccf:x_scaling",y_scaling:"ccf:y_scaling",z_scaling:"ccf:z_scaling",x_translation:"ccf:x_translation",y_translation:"ccf:y_translation",z_translation:"ccf:z_translation",x_dimension:"ccf:x_dimension",y_dimension:"ccf:y_dimension",z_dimension:"ccf:z_dimension",ontology_terms:{"@id":"ccf:has_ontology_term","@type":"@id"},technology:"ccf:technology",thumbnail:"ccf:thumbnail",file:"ccf:file_url",file_format:"ccf:file_format",file_subpath:"ccf:file_subpath"}};function RS(t,e=_Be){return JSON.parse(t,(n,i)=>"ccf_annotations"===n&&Array.isArray(i)?i.map(r=>r?.startsWith("http://purl.obolibrary.org/obo/FMA_")?r.replace("http://purl.obolibrary.org/obo/FMA_","http://purl.org/sig/ont/fma/fma"):r):"@context"!==n||!i||"https://hubmapconsortium.github.io/hubmap-ontology/ccf-entity-context.jsonld"!==i&&"https://hubmapconsortium.github.io/hubmap-ontology/ccf-context.jsonld"!==i&&"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"!==i&&"http://purl.org/ccf/latest/ccf-entity.owl#"!==i["@base"]?i:e)}const NX={idPrefix:"https://entity.api.hubmapconsortium.org/entities/",portal:"https://portal.hubmapconsortium.org/browse/",portalParams:"/",donorName:"donor",assets:"https://assets.hubmapconsortium.org"},yBe={idPrefix:"https://entity.api.sennetconsortium.org/entities/",portal:"https://data.sennetconsortium.org/",portalParams:"?uuid=",donorName:"source",assets:"https://assets.sennetconsortium.org"},PX=new Set(["VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0009-LK-102-7-AF_preIMS_registered_thumbnail.jpg","VAN0009-LK-102-7-IMS_NegMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-IMS_PosMode_multilayer_thumbnail.jpg","VAN0009-LK-102-7-PAS_registered_thumbnail.jpg","VAN0010-LK-155-40-AF_preIMS_registered_thumbnail.jpg","VAN0010-LK-155-40-IMS_NegMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-IMS_PosMode_multilayer_thumbnail.jpg","VAN0010-LK-155-40-PAS_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg","VAN0013-LK-202-96-AF_preIMS_registered_thumbnail.jpg","VAN0013-LK-202-96-IMS_NegMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-IMS_PosMode_multilayer_thumbnail.jpg","VAN0013-LK-202-96-PAS_registered_thumbnail.jpg","VAN0013-LK-202-97-AF_preMxIF_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc1_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc2_registered_thumbnail.jpg","VAN0013-LK-202-97-MxIF_cyc3_registered_thumbnail.jpg","VAN0014-LK-203-108-AF_preIMS_registered_thumbnail.jpg","VAN0014-LK-203-108-IMS_NegMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-IMS_PosMode_multilayer_thumbnail.jpg","VAN0014-LK-203-108-PAS_registered_thumbnail.jpg","VAN0016-LK-202-89-AF_preIMS_registered_thumbnail.jpg","VAN0016-LK-202-89-IMS_NegMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-IMS_PosMode_multilayer_thumbnail.jpg","VAN0016-LK-202-89-PAS_registered_thumbnail.jpg","VAN0003-LK-32-21-AF_preIMS_registered_thumbnail.jpg","VAN0003-LK-32-21-IMS_NegMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-IMS_PosMode_multilayer_thumbnail.jpg","VAN0003-LK-32-21-PAS_registered_thumbnail.jpg","VAN0003-LK-32-22-AF_preMxIF_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc1_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc2_registered_thumbnail.jpg","VAN0003-LK-32-22-MxIF_cyc3_registered_thumbnail.jpg","VAN0005-RK-1-1-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-1-1-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-1-1-PAS_registered_thumbnail.jpg","VAN0005-RK-4-172-AF_preIMS_registered_thumbnail.jpg","VAN0005-RK-4-172-IMS_NegMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-IMS_PosMode_multilayer_thumbnail.jpg","VAN0005-RK-4-172-PAS_registered_thumbnail.jpg","VAN0006-LK-2-85-AF_preIMS_registered_thumbnail.jpg","VAN0006-LK-2-85-IMS_NegMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-IMS_PosMode_multilayer_thumbnail.jpg","VAN0006-LK-2-85-PAS_registered_thumbnail.jpg","VAN0006-LK-2-86-AF_preMxIF_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc1_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc2_registered_thumbnail.jpg","VAN0006-LK-2-86-MxIF_cyc3_registered_thumbnail.jpg","VAN0007-LK-203-103-AF_preIMS_registered_thumbnail.jpg","VAN0007-LK-203-103-IMS_NegMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-IMS_PosMode_multilayer_thumbnail.jpg","VAN0007-LK-203-103-PAS_registered_thumbnail.jpg","VAN0008-RK-403-100-AF_preIMS_registered_thumbnail.jpg","VAN0008-RK-403-100-IMS_NegMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-IMS_PosMode_multilayer_thumbnail.jpg","VAN0008-RK-403-100-PAS_registered_thumbnail.jpg","VAN0008-RK-403-101-AF_preMxIF_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc1_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc2_registered_thumbnail.jpg","VAN0008-RK-403-101-MxIF_cyc3_registered_thumbnail.jpg","VAN0011-RK-3-10-AF_preIMS_registered_thumbnail.jpg","VAN0011-RK-3-10-IMS_NegMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-IMS_PosMode_multilayer_thumbnail.jpg","VAN0011-RK-3-10-PAS_registered_thumbnail.jpg","VAN0011-RK-3-11-AF_preMxIF_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc1_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc2_registered_thumbnail.jpg","VAN0011-RK-3-11-MxIF_cyc3_registered_thumbnail.jpg","VAN0012-RK-103-75-AF_preIMS_registered_thumbnail.jpg","VAN0012-RK-103-75-IMS_NegMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-IMS_PosMode_multilayer_thumbnail.jpg","VAN0012-RK-103-75-PAS_registered_thumbnail.jpg","VAN0012-RK-103-76-AF_preMxIF_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc1_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc2_registered_thumbnail.jpg","VAN0012-RK-103-76-MxIF_cyc3_registered_thumbnail.jpg"]),vBe={"HBM558.SRZG.629":"HBM558.SRZG.629_UFL0002-SP-3-4-1.jpg","HBM562.NTMH.548":"HBM562.NTMH.548_UFL0006-SP-1-2-1.jpg","HBM685.KHRQ.684":"HBM685.KHRQ.684_UFL0008-LY07-1-1.jpg","HBM278.SFQW.627":"HBM278.SFQW.627_UFL0008-LY09-1-1.jpg","HBM427.SMGB.866":"HBM427.SMGB.866_UFL0004-SP-1-4-1.jpg","HBM432.LLCF.677":"HBM432.LLCF.677_UFL0001-SP-2-5-1.jpg","HBM586.ZSVS.996":"HBM586.ZSVS.996_UFL0008-SP-1-1-1.jpg","HBM285.XMBT.542":"HBM285.XMBT.542_UFL0006-TH-1-3-1.jpg","HBM289.BWJW.663":"HBM289.BWJW.663_UFL0006-TH-1-2-1.jpg","HBM255.SRPR.985":"HBM255.SRPR.985_UFL0005-TH-2-2-1.jpg","HBM799.WXHD.535":"HBM799.WXHD.535_UFL0009-LY02-1-1.jpg","HBM294.RZFN.624":"HBM294.RZFN.624_UFL0005-TH-1-1-1.jpg","HBM383.TRQG.424":"HBM383.TRQG.424_UFL0006-SP-1-3-1.jpg","HBM647.MFQB.496":"HBM647.MFQB.496_UFL0001-SP-1-2-1.jpg","HBM237.GGPR.739":"HBM237.GGPR.739_UFL0006-LY01-1-1.jpg","HBM288.TPBD.654":"HBM288.TPBD.654_UFL0003-SP-2-2-1.jpg","HBM974.NDXT.675":"HBM974.NDXT.675_UFL0008-TH-2-2-1.jpg","HBM589.SLVV.423":"HBM589.SLVV.423_UFL0008-LY10-1-1.jpg","HBM794.RLFN.358":"HBM794.RLFN.358_UFL0006-LY03-1-1.jpg","HBM372.BQSR.778":"HBM372.BQSR.778_UFL0007-SP-1-1-1.jpg","HBM499.TKDW.458":"HBM499.TKDW.458_UFL0009-LY03-1-1.jpg","HBM342.PRQB.739":"HBM342.PRQB.739_UFL0003-LY06-1-1.jpg","HBM633.CLVN.674":"HBM633.CLVN.674_UFL0003-SP-3-6-1.jpg","HBM343.JQKM.578":"HBM343.JQKM.578_UFL0009-LY01-1-1.jpg","HBM987.XGTH.368":"HBM987.XGTH.368_UFL0002-SP-2-4-1.jpg","HBM964.CWCP.788":"HBM964.CWCP.788_UFL0006-LY02-2-1.jpg","HBM244.TJLK.223":"HBM244.TJLK.223_UFL0003-SP-1-4-1.jpg","HBM646.FSBQ.966":"HBM646.FSBQ.966_UFL0007-SP-2-2-1.jpg","HBM572.GXSB.234":"HBM572.GXSB.234_UFL0003-SP-3-2-1.jpg","HBM772.TKGJ.794":"HBM772.TKGJ.794_UFL0008-SP-2-1-1.jpg","HBM239.CBWR.263":"HBM239.CBWR.263_UFL0008-SP-1-2-1.jpg","HBM992.NRTT.383":"HBM992.NRTT.383_UFL0006-SP-1-1-1.jpg","HBM283.DQXD.546":"HBM283.DQXD.546_UFL0003-SP-1-2-1.jpg","HBM795.JHND.856":"HBM795.JHND.856_UFL0007-SP-1-2-1.jpg","HBM267.BZKT.867":"HBM267.BZKT.867_UFL0003-SP-2-6-1.jpg","HBM838.DLMJ.782":"HBM838.DLMJ.782_UFL0008-TH-1-1-1.jpg","HBM337.FSXL.564":"HBM337.FSXL.564_UFL0001-SP-3-8-2.jpg","HBM355.JDLK.244":"HBM355.JDLK.244_UFL0004-SP-2-4-1.jpg","HBM599.PSZG.737":"HBM599.PSZG.737_UFL0006-LY02-1-1.jpg"},n_={"03b3d854-ed44-11e8-8bce-0e368f3075e8":"TMC-UCSD","07a29e4c-ed43-11e8-b56a-0e8017bdda58":"TMC-Florida","308f5ffc-ed43-11e8-b56a-0e8017bdda58":"TMC-CalTech","5bd084c8-edc2-11e8-802f-0e368f3075e8":"HBM-TestingGroup","73bb26e4-ed43-11e8-8f19-0a7c1eab007a":"TMC-Vanderbilt","def5fd76-ed43-11e8-b56a-0e8017bdda58":"TMC-Stanford","5c106f29-ea2d-11e9-85e8-0efb3ba9a670":"RTI-General Electric","301615f9-c870-11eb-a8dc-35ce3d8786fe":"TMC-UConn"},iL="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld";class xBe{constructor(e,n){if(this.data=e,this.bad=!1,this["@type"]="Sample",this.sample_type="Tissue Block","Sample"!==this.data.entity_type)return void(this.bad=!0);if(e.sennet_id)this.portal=yBe;else{if(!e.hubmap_id)return void(this.bad=!0);this.portal=NX}const r=this.data.descendants||[];this.donor=this.getDonor(this.data.donor??this.data.source);const o=this.getRuiLocation(e,this.donor);o?this.rui_location=o:this.bad=!0,n_[e.group_uuid]||(n_[e.group_uuid]=e.group_name);const a=new Date(e.last_modified_timestamp).toLocaleDateString(),c=n_[e.group_uuid]||e.group_name,l=e.created_by_user_displayname;this["@id"]=this.portal.idPrefix+e.uuid,this.label=`Registered ${a}, ${l}, ${c}`,this.link=`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`;const u={},h=[];this.sections=h;const f=[];this.datasets=f;for(const R of r.filter(L=>"Sample"===L.entity_type)){const L=this.getSection(R,e);u[R.submission_id]=L,h.push(L),L.section_number=L.section_number??h.length}for(const R of r)if("Dataset"===R.entity_type){const L=this.getDataset(R,n),ie=(0,Qi.get)(R,["ingest_metadata","metadata","tissue_id"]);u[ie]?u[ie].datasets?.push(L):f.push(L)}const g=o??{},m=`${g.x_dimension} x ${g.y_dimension} x ${g.z_dimension} ${g.dimension_units}`;this.section_count=g.slice_count||h.length;const y=parseFloat((g.slice_thickness||(g.z_dimension||0)/Math.max(this.section_count,1)).toFixed(1));this.section_size=y;const b=g.dimension_units||"millimeter";this.section_units=b,this.description=`${m}, ${y} ${b}, ${this.section_count} Sections`,h.forEach((R,L)=>{R.description=`${g.x_dimension} x ${g.y_dimension} x ${y} ${b}, ${y} ${b}, ${R.description}`,R.section_number=L+1})}getSection(e,n){const i=new Date(e.last_modified_timestamp).toLocaleDateString();return{"@id":this.portal.idPrefix+e.uuid,"@type":"Sample",label:`Registered ${i}, ${e.created_by_user_displayname}, ${n_[e.group_uuid]||e.group_name}`,description:`${n.sample_category}`,link:`${this.portal.portal}sample${this.portal.portalParams}${e.uuid}`,sample_type:"Tissue Section",section_number:1,samples:[],datasets:[]}}getDataset(e,n){const i=new Date(e.last_modified_timestamp).toLocaleDateString(),r=n_[e.group_uuid]||e.group_name,s=e.created_by_user_displayname,o=e.dataset_type??"",a=o.toLowerCase();let c,l="assets/icons/ico-unknown.svg";return-1!==a.indexOf("10x")?(c="10x",l="assets/icons/ico-bulk-10x.svg"):-1!==a.indexOf("af")||-1!==a.indexOf("auto-fluorescence")?(c="AF",l="assets/icons/ico-spatial-af.svg"):-1!==a.indexOf("codex")?(c="CODEX",l="assets/icons/ico-spatial-codex.svg"):-1!==a.indexOf("imc")||-1!==a.indexOf("imaging mass cytometry")?(c="IMC",l="assets/icons/ico-spatial-imc.svg"):-1!==a.indexOf("lc")&&-1===a.indexOf("af")?(c="LC",l="assets/icons/ico-bulk-lc.svg"):c=-1!==a.indexOf("maldi")?"MALDI":-1!==a.indexOf("pas")?"PAS":o.split(/ \[/)[0],l=this.getDatasetThumbnail(e,n)??l,{"@id":this.portal.idPrefix+e.uuid,"@type":"Dataset",label:`Registered ${i}, ${s}, ${r}`,description:`Dataset Type: ${o}`,link:`${this.portal.portal}dataset${this.portal.portalParams}${e.uuid}`,technology:c,thumbnail:l}}getDatasetThumbnail(e,n){if(e.thumbnail_file){const i=e.thumbnail_file;return`${this.portal.assets}/${i.file_uuid}/${i.filename}`+(n?`?token=${n}`:"")}if("73bb26e4-ed43-11e8-8f19-0a7c1eab007a"===e.group_uuid){const i=(0,Qi.get)(e,"metadata.files",[]).filter(r=>/\.(ome\.tif|ome\.tiff)$/.test(r.rel_path)).filter(r=>!/(multilayer\.ome\.tif|_ac\.ome\.tif)/.test(r.rel_path)).filter(r=>PX.has(r.rel_path.split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg"))).map(r=>`${this.portal.assets}/${e.uuid}/${r.rel_path}`+(n?`?token=${n}`:""));if(i.length>0){const r=i[0].split("/").slice(-1)[0].split("?")[0].replace(".ome.tif","_thumbnail.jpg");if(PX.has(r))return`assets/thumbnails/TMC-Vanderbilt/DR1/${r}`}}else if("07a29e4c-ed43-11e8-b56a-0e8017bdda58"===e.group_uuid){const i=vBe[e.hubmap_id];if(i)return`assets/thumbnails/TMC-Florida/${i}`}}getDonor(e){const n=(e.description||"").toLowerCase();let i;n.includes("female")?i="Female":n.includes("male")&&(i="Male");const r=n.match(/age ([0-9]+)/)??n.match(/ ([0-9]+) years/);let s,o,a;r&&(s=(0,Qi.toNumber)(r[1]));const c=(0,Qi.get)(e,"mapped_metadata",(0,Qi.get)(e,"source_mapped_metadata",{}));!i&&c.sex?.length>0&&(i=c.sex[0]),!a&&c.race?.length>0&&(a=c.race[0]),!s&&c.age_value?.length>0&&(s=c.age_value[0]),!o&&c.body_mass_index_value?.length>0&&(o=c.body_mass_index_value[0]);for(const g of(0,Qi.get)(e,"metadata.organ_donor_data",(0,Qi.get)(e,"metadata.living_donor_data",[])))"Feminine gender"===g.preferred_term||"Female"===g.preferred_term?i="Female":"Masculine gender"===g.preferred_term||"Male"===g.preferred_term?i="Male":"Current chronological age"===g.preferred_term||"Age"===g.preferred_term?s=(0,Qi.toNumber)(g.data_value):"Body mass index"===g.preferred_term?o=(0,Qi.toNumber)(g.data_value):"Race"===g.grouping_concept_preferred_term&&(a=g.preferred_term);let l="";i&&s?(l+=`${i}, Age ${s}`,o&&(l+=`, BMI ${o.toFixed(1)}`)):i&&(l=i);const u=new Date(e.last_modified_timestamp).toLocaleDateString(),h=n_[e.group_uuid]||e.group_name;return{"@id":this.portal.idPrefix+e.uuid,"@type":"Donor",label:l,description:`Entered ${u}, ${e.created_by_user_displayname}, ${h}`,link:`${this.portal.portal}${this.portal.donorName}${this.portal.portalParams}${e.uuid}`,age:s,sex:i,bmi:o,race:a,consortium_name:this.portal===NX?"HuBMAP":"SenNet",provider_name:h,provider_uuid:e.group_uuid,samples:[]}}getRuiLocation(e,n){let i,r=e.rui_location;if(r&&("string"==typeof r&&(r=JSON.parse(r)),r.alignment_id?console.log("Detected a deprecated rui_location",e.uuid):r["@id"]&&(i=r),r["@context"]="https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld"),i){const s=(0,Qi.get)(i,["placement","target"])??"";s.startsWith("http://purl.org/ccf/latest/ccf.owl#VHSpleenCC")?(0,Qi.set)(i,["placement","target"],s.replace("#VHSpleenCC","Male"===n.sex?"#VHMSpleenCC":"#VHFSpleenCC")):("http://purl.org/ccf/latest/ccf.owl#VHLeftKidney"===s||"http://purl.org/ccf/latest/ccf.owl#VHRightKidney"===s)&&(0,Qi.set)(i,["placement","target"],"Male"===n.sex?s.replace("#VH","#VHM")+"_Patch":s.replace("#VH","#VHF")+"_Patch")}return i}getTissueBlock(){return(0,Qi.omit)({...this},["data","bad","donor","portal"])}toJsonLd(){return{...this.donor,samples:[this.getTissueBlock()]}}}const EBe=1e4,ABe=["uuid","entity_type","hubmap_id","sennet_id","group_uuid","group_name","last_modified_timestamp","created_by_user_displayname","donor","source","descendants.entity_type","descendants.ingest_metadata.metadata.tissue_id","descendants.last_modified_timestamp","descendants.group_uuid","descendants.group_name","descendants.created_by_user_displayname","descendants.uuid","descendants.hubmap_id","descendants.sennet_id","descendants.dataset_type","descendants.thumbnail_file","descendants.metadata.files.rel_path","rui_location","sample_category"],SBe={exists:{field:"rui_location"}};function FX(t,e,n){return JSON.stringify({version:!0,from:t,size:e,stored_fields:["*"],script_fields:{},docvalue_fields:[],query:n??SBe,_source:{includes:ABe}})}function rL(t,e){return sL.apply(this,arguments)}function sL(){return sL=C(function*(t,e){try{const n=yield fetch(t,e),i=yield n.text();return n.ok||i.startsWith("https")?i.startsWith("https")?yield fetch(i).then(s=>s.json()):JSON.parse(i):void 0}catch{return}}),sL.apply(this,arguments)}function oL(){return oL=C(function*(t,e,n){const i=EBe,r=function CBe(t){const e=new Headers;return e.append("Content-type","application/json"),t&&e.append("Authorization",`Bearer ${t}`),e}(e),s=FX(0,i,n),o=yield rL(t,{method:"POST",headers:r,body:s});if(!o)return;const a=o.hits.total.value;if(a<=i)return o;const c=[];for(let h=i;h<a;h+=i)c.push(rL(t,{method:"POST",headers:r,body:FX(h,i,n)}));const l=yield Promise.all(c);if(l.some(h=>!h))return;const u=l.map(h=>h?.hits.hits);return{...o,hits:{...o.hits,hits:o.hits.hits.concat(...u)}}}),oL.apply(this,arguments)}function aL(){return aL=C(function*(t,e,n,i,r="",s=""){let o;if("static"===e?o=yield rL(t):"search-api"===e&&(o=yield function MBe(t,e,n){return oL.apply(this,arguments)}(t,i,n)),o)return function bBe(t,e,n=!1){const r={},s=(0,Qi.get)(t,"hits.hits",[]).map(a=>(0,Qi.get)(a,"_source",{})).sort((a,c)=>a.uuid.localeCompare(c.uuid)).map(a=>new xBe(a,e).toJsonLd());for(const a of s){const c=a["@id"];r[c]?r[c].samples.push(a.samples[0]):r[c]=a}const o=Object.values(r);return n&&(function wBe(t){let e=[],n=0;for(const i of t.filter(r=>r.samples.length>1)){const r=i.samples;for(let s=0;s<r.length;s++){const o=r[s]["@id"];e=e.concat(r[s].datasets);for(const a of r[s].sections)e=e.concat(a.datasets);for(let a=s+1;a<r.length;a++)r[a].sections.find(l=>l["@id"]===o)&&(r[s].deleteMe=!0,n++)}i.samples=r.filter(s=>!0!==s.deleteMe)}n>0&&console.log(`\u26a0 ${n} sections identified as blocks`)}(o),console.log(o.map(a=>({"@context":iL,...a})))),RS(JSON.stringify({"@context":iL,"@graph":o}),iL)}(o,i);console.warn(`Unable to load ${t}`)}),aL.apply(this,arguments)}const{delMany:IBe,get:LX,setMany:DBe}=N,BX={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://purl.org/ccf/latest/ccf-context.jsonld",dataSources:[],hubmapDataService:"static",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"",hubmapAssetsUrl:"https://assets.hubmapconsortium.org"};class RBe{constructor(e=BX){this.options=e,this.store=new _S(void 0,{factory:wr}),this.graph=new eX(this),this.scene=new tX(this)}connect(e,n=!1){var i=this;return C(function*(){return e&&(i.options=e),i.initializing||(i.initializing=n?i.cachedConnect():i.doConnect()),yield i.initializing,i.store.size>0})()}cachedConnect(){var e=this;return C(function*(){const n=(new Date).getTime(),i=zNe(e.options,{encoding:"base64",ignoreUnknown:!0,respectType:!1,unorderedArrays:!0,unorderedObjects:!0,unorderedSets:!0}),r=`ccf-database.last_modified.${i}`,s=`ccf-database.${i}`,o=yield LX(r).catch(()=>{});let a;o&&n-new Date(+o).getTime()>36e5?yield IBe([s,r]).catch(()=>{}):a=yield LX(s).catch(()=>{}),a?yield e.deserialize(a):(yield e.doConnect(),DBe([[s,e.serialize()],[r,""+n]]).catch(()=>{}))})()}doConnect(){var e=this;return C(function*(){const n=[],i=e.options.dataSources?.concat()??[],r=e.options.ccfOwlUrl;if(r.startsWith("{"))e.store=jF(r,wr);else if(r.endsWith(".n3store.json")){const s=yield fetch(r).then(o=>o.text()).catch(()=>console.log("Couldn't locate serialized store."));s&&(e.store=jF(s,wr))}else r?.length>0&&i.push(r);i.push(yield function gBe(){return tL.apply(this,arguments)}()),e.options.hubmapDataUrl&&(e.options.hubmapDataUrl.endsWith("jsonld")?i.push(e.options.hubmapDataUrl):n.push(function TBe(t,e,n,i){return aL.apply(this,arguments)}(e.options.hubmapDataUrl,e.options.hubmapDataService,e.options.hubmapQuery,e.options.hubmapToken).then(s=>{if(s)return e.addDataSources([s])}))),n.push(e.addDataSources(i)),yield Promise.all(n),yield e.synchronize()})()}addDataSources(e,n){var i=this;return C(function*(){const r=n??i.store;return yield Promise.all(e.map(function(){var s=C(function*(o){if("string"==typeof o)if((o.startsWith("http")||o.startsWith("assets/"))&&o.includes("jsonld")){const a=o;o=RS(o=yield fetch(a).then(c=>c.text()).catch(c=>(console.log(`Error fetching ${a}`,c),"[]"))),yield FF(o,r)}else o.endsWith("n3")?yield function yPe(t,e){return kF.apply(this,arguments)}(o,r):o.endsWith("rdf")||o.endsWith("owl")||o.endsWith("xml")?yield function _Pe(t,e){return BF.apply(this,arguments)}(o,r):(o=RS(o),yield FF(o,r));else o=RS(JSON.stringify(o)),yield FF(o,r)});return function(o){return s.apply(this,arguments)}}())),i})()}synchronize(){var e=this;return C(function*(){return yield new Promise(n=>{setTimeout(n,500)}),e.graph.createGraph(),function mBe(t){const e=RX(t),n=new Map;for(const{subject:i,object:r}of Rr(t,null,ti.spatialEntity.representation_of,null,null)){const s=new Set([r.id]);let o=e.nodes[r.id]?.parent;for(;o&&!s.has(o);)s.add(o),o=e.nodes[o]?.parent;n.set(i.id,[...s].map(a=>wr.namedNode(a)))}for(const{object:i}of Rr(t,null,Wn.spatialEntity,null,null))for(const{subject:r}of Rr(t,null,ti.spatialPlacement.source,i,null))for(const{object:s}of Rr(t,r,ti.spatialPlacement.target,null,null))for(const o of n.get(s.id)??[])t.addQuad(wr.namedNode(i.id),ti.spatialEntity.ccf_annotations,o)}(e.store),e})()}serialize(){return function vPe(t){const e=Object.assign({},t);return delete e._factory,JSON.stringify(e)}(this.store)}deserialize(e){var n=this;return C(function*(){n.store=jF(e,wr),n.graph=new eX(n),n.scene=new tX(n),yield new Promise(i=>{setTimeout(i,10)})})()}getIds(e={}){return function jLe(t,e,n){let i=function ULe(t){const e=new Set;return t.forSubjects(n=>e.add(n.id),Wn.spatialEntity,null,null),e}(t);if(i.size>0&&(i=function YLe(t,e,n=!0){const i=new Set;if(t.forSubjects(t_(e,i),Wn.spatialEntity,null,null),!n){const r=new Set;return e.forEach(s=>i.has(s)?void 0:r.add(s)),r}return i}(t,i)),i.size>0&&("Male"===n.sex||"Female"===n.sex)){const r=n.sex;i=fb(t,i,s=>function VLe(t,e,n){const i=new Set;return t.forSubjects(t_(e,i),Wn.sex,Wn[n],null),i}(t,s,r))}if(i.size>0&&n.consortiums?.length>0&&(i=fb(t,i,r=>function HLe(t,e,n){const i=new Set;for(const r of n){const s=wr.literal(r);t.forSubjects(t_(e,i),Wn.consortiumName,s,null)}return i}(t,r,n.consortiums))),i.size>0&&n.tmc?.length>0&&(i=fb(t,i,r=>function GLe(t,e,n){const i=new Set;for(const r of n){const s=wr.literal(r);t.forSubjects(t_(e,i),Wn.providerName,s,null)}return i}(t,r,n.tmc))),i.size>0&&n.technologies?.length>0&&(i=function kLe(t,e,n){const i=new Map,r=new Set,s=new Set(e);for(const c of e)for(const l of Rr(t,c,Wn.sections,null,null))s.add(l.object.id);for(const c of s)for(const l of Rr(t,c,Wn.datasets,null,null))r.add(l.object.id),i.has(l.object.id)?i.get(l.object.id)?.push(c):i.set(l.object.id,[c]);const o=n(r),a=new Set;for(const c of o)for(const l of i.get(c)??[])a.add(l);return a}(t,i,r=>function zLe(t,e,n){const i=new Set;for(const r of n){const s=wr.literal(r);t.forSubjects(t_(e,i),Wn.technology,s,null)}return i}(t,r,n.technologies))),i.size>0&&n.spatialSearches?.length>0&&(i=IS(t,i,r=>function KLe(t,e,n,i){const r=new Set;for(const s of i)BLe(t,e,n,s).forEach(a=>r.add(a));return r}(t,e,r,n.spatialSearches))),i.size>0&&n.ontologyTerms?.length>0){const r=n.ontologyTerms;-1===r.indexOf(Jc.body.id)&&(i=IS(t,i,s=>ZF(t,s,r)))}if(i.size>0&&n.cellTypeTerms?.length>0){const r=n.cellTypeTerms;-1===r.indexOf(Jc.cell.id)&&(i=IS(t,i,s=>function WLe(t,e,n){const i=new Set;for(const r of n)t.forObjects(s=>{i.add(s.id)},r,ti.asctb.located_in,null),r===Jc.cell.id&&i.add(Jc.body.id);return ZF(t,e,[...i])}(t,s,r)))}if(i.size>0&&n.biomarkerTerms?.length>0){const r=n.biomarkerTerms;-1===r.indexOf("http://purl.org/ccf/biomarkers")&&(i=IS(t,i,s=>function $Le(t,e,n){const i=new Set;for(const r of n)t.forObjects(s=>{i.add(s.id)},r,ti.asctb.bm_located_in,null),"http://purl.org/ccf/biomarkers"===r&&i.add(Jc.body.id);return ZF(t,e,[...i])}(t,s,r)))}if(i.size>0&&2===n.ageRange?.length&&(0,Qi.isFinite)(n.ageRange[0])&&(0,Qi.isFinite)(n.ageRange[1])){const r=Math.max(...n.ageRange),s=Math.min(...n.ageRange);1===s&&110===r||(i=fb(t,i,o=>function qLe(t,e,n,i){const r=new Set;for(const s of e)for(const o of Rr(t,s,Wn.age,null,null)){const a=(0,bS.fromRdf)(o.object);a>=n&&a<=i&&r.add(s)}return r}(t,o,s,r)))}if(i.size>0&&2===n.bmiRange?.length&&(0,Qi.isFinite)(n.bmiRange[0])&&(0,Qi.isFinite)(n.bmiRange[1])){const r=Math.max(...n.bmiRange),s=Math.min(...n.bmiRange);13===s&&83===r||(i=fb(t,i,o=>function XLe(t,e,n,i){const r=new Set;for(const s of e)for(const o of Rr(t,s,Wn.bmi,null,null)){const a=(0,bS.fromRdf)(o.object);a>=n&&a<=i&&r.add(s)}return r}(t,o,s,r)))}return i}(this.store,this.graph,e)}get(e){return this.store.getQuads(wr.namedNode(e),null,null,null)}search(e={}){return[...this.getIds(e)].map(n=>this.get(n))}getSpatialEntities(e){return e={...e,hasSpatialEntity:!0},[...this.getIds(e)].map(n=>function FPe(t,e){const n=t.getObjects(wr.namedNode(e),Wn.spatialEntity,null);if(n.length>0)return ap(t,n[0].id)}(this.store,n))}getDatabaseStatus(){var e=this;return C(function*(){return e.status||(e.status=new hBe(e)),e.status.toJson()})()}getDatasetTechnologyNames(){var e=this;return C(function*(){return function BPe(t){const e=new Set;for(const n of Rr(t,null,Wn.technology,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getProviderNames(){var e=this;return C(function*(){return function kPe(t){const e=new Set;for(const n of Rr(t,null,Wn.providerName,null,null))e.add(n.object.value);return Array.from(e).sort()}(e.store)})()}getTissueBlockResults(e){var n=this;return C(function*(){return e={...e,hasSpatialEntity:!0},[...n.getIds(e)].map(i=>function dBe(t,e){const n={"@id":e,"@type":"Sample",sections:[],datasets:[]};for(const[i,r]of wS(t,e,cBe))if("sections"===i){const s=uBe(t,r);n[i].push(s)}else if("datasets"===i){const s=OX(t,r);n[i].push(s)}else n[i]="donor"===i?lBe(t,r):r;return n}(n.store,i))})()}getAggregateResults(e){var n=this;return C(function*(){return function LPe(t,e){const n=lb(e,t,Wn.donor.id),i=lb(e,n,Wn.providerUUID.id),r=new Set;for(const c of t)for(const l of Rr(e,c,Wn.spatialEntity,null,null))r.add(l.subject.id);const s=lb(e,r,Wn.sections.id),o=new Set([...lb(e,r,Wn.datasets.id),...lb(e,s,Wn.datasets.id)]);return Object.entries({"Tissue Data Providers":i.size,Donors:n.size,"Tissue Blocks":r.size,"Tissue Sections":s.size,"Tissue Datasets":o.size}).map(([c,l])=>({label:c,count:l}))}(n.getIds(e),n.store)})()}getOntologyTermOccurences(e){var n=this;return C(function*(){return function ZLe(t,e){const n={};return QF(t,e).forEach((r,s)=>{n[s]=r.size}),n}(n.getIds(e),n.store)})()}getCellTypeTermOccurences(e){var n=this;return C(function*(){return function eBe(t,e){const n=QF(t,e),i=new Map;for(const s of n.keys()){const o=n.get(s);for(const a of Rr(e,null,ti.asctb.located_in,s,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);o?.forEach(u=>l?.add(u))}else i.set(c,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r[Jc.cell.id]=n.get(Jc.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getBiomarkerTermOccurences(e){var n=this;return C(function*(){return function QLe(t,e){const n=QF(t,e),i=new Map;for(const s of n.keys()){const o=n.get(s);for(const a of Rr(e,null,ti.asctb.bm_located_in,s,null)){const c=a.subject.id;if(i.has(c)){const l=i.get(c);o?.forEach(u=>l?.add(u))}else i.set(c,new Set(o))}}const r={};return i.forEach((s,o)=>{r[o]=s.size}),r.biomarkers=n.get(Jc.body.id)?.size??0,r}(n.getIds(e),n.store)})()}getOntologyTreeModel(){var e=this;return C(function*(){return RX(e.store)})()}getCellTypeTreeModel(){var e=this;return C(function*(){return function iBe(t){return IX(t,Jc.cell.id,"cell",ti.asctb.ct_is_a.id)}(e.store)})()}getBiomarkerTreeModel(){var e=this;return C(function*(){return function rBe(t){const e=ti.x("ccf_biomarker_type"),n={biomarkers:eL("biomarkers","Biomarkers","",[])};for(const i of Rr(t,null,e,null,null)){const r=i.object.value,s=i.subject.id;n[r]||(n[r]=eL(r,r[0].toUpperCase()+r.slice(1),"biomarkers",[]),n.biomarkers.children.push(r)),n[r].children.push(s);const o=eL(s,"",r,[]),a={[ti.ontologyNode.label.id]:"label",[TPe_label.id]:"synonymLabels"};for(const[c,l]of wS(t,s,a))"synonymLabels"===c?l&&l!==o.label&&o.synonymLabels.push(l):o[c]=l;for(const c of Object.values(n))c.children.length>1&&c.children.sort((l,u)=>n[l]?.label.localeCompare(n[u]?.label));n[s]=o}return{root:"biomarkers",nodes:n}}(e.store)})()}getReferenceOrgans(){var e=this;return C(function*(){return e.scene.getReferenceOrgans()})()}getScene(e){var n=this;return C(function*(){return n.graph.createGraph(),n.scene.getScene(e)})()}getReferenceOrganScene(e,n){var i=this;return C(function*(){return i.graph.createGraph(),i.scene.getReferenceOrganScene(e,n)})()}getSpatialPlacement(e,n){var i=this;return C(function*(){return i.graph.getSpatialPlacement(e,n)})()}}class kX extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class BBe{constructor(){this.cancelUncompleted$=new qt}cancelPreviousAction(){this.cancelUncompleted$.next()}}const cL="\u0275fac",jX=Symbol("InjectorInstance"),UX=Symbol("FactoryHasBeenDecorated");function VX(t,e){const n=t[jX];return n?n.get(e):null}const UBe={cancelUncompleted:!1};function HX(t=UBe){return(e,n,i)=>{let r;const s=function kBe(t){return t?new BBe:null}(t.cancelUncompleted);function o(){null!==s&&s.cancelPreviousAction();const a=VX(this,Vu)||function FBe(){throw new kX}(),c=VX(this,yn)||function LBe(){throw new kX}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function PBe(t,e,n){return qg(e)?function NBe(t,e){return e.then(n=>(t.dispatch(n),n))}(t,e):eh(e)?function OBe(t,e,n){return null!==n&&(e=e.pipe($a(n.cancelUncompleted$))),e.subscribe({next:i=>t.dispatch(i)}),e}(t,e,n):(t.dispatch(e),e)}(a,l,s))}"function"==typeof i?.value?(r=i.value,i.value=o):Object.defineProperty(e,n,{set:a=>r=a,get:()=>o}),function jBe(t){if(UX in t.constructor.prototype)return;const e=t.constructor;"function"==typeof e[cL]&&function lL(t){const e=t[cL];if("function"!=typeof e)return;const n=t.\u0275prov||t.\u0275pipe||t.\u0275cmp||t.\u0275dir,i=()=>{const r=e();return r[jX]=st(li),r};n&&(n.factory=i),Object.defineProperty(t,cL,{get:()=>i})}(e),t.constructor.prototype[UX]=!0}(e)}}let GX=(()=>{class t{static#e=this.type="[CallToAction] Learn More"}return t})(),zX=(()=>{class t{static#e=this.type="[CallToAction] Open Dialog"}return t})(),WX=(()=>{class t{static#e=this.type="[CallToAction] Close Dialog"}return t})();function VBe(t,e){}class OS{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let $X=(()=>{class t extends TP{constructor(n,i,r,s,o,a,c,l){super(),this._elementRef=n,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._platform=Ut(ba),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=Ut(to),this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),h},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(n){this._ariaLabelledByQueue.push(n),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(n){const i=this._ariaLabelledByQueue.indexOf(n);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(n){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(n);return this._contentAttached(),i}attachTemplatePortal(n){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(n);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(n,i){this._interactivityChecker.isFocusable(n)||(n.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{n.removeEventListener("blur",r),n.removeEventListener("mousedown",r),n.removeAttribute("tabindex")};n.addEventListener("blur",r),n.addEventListener("mousedown",r)})),n.focus(i)}_focusByCssSelector(n,i){let r=this._elementRef.nativeElement.querySelector(n);r&&this._forceFocus(r,i)}_trapFocus(){const n=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||n.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const n=this._config.restoreFocus;let i=null;if("string"==typeof n?i=this._document.querySelector(n):"boolean"==typeof n?i=n?this._elementFocusedBeforeDialogWasOpened:null:n&&(i=n),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=gP(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const n=this._elementRef.nativeElement,i=gP();return n===i||n.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=gP()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||t)(st(ui),st(zW),st(hi,8),st(OS),st(wP),st(yn),st(z1),st(xP))};static#t=this.\u0275cmp=gi({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Do(H1,7),2&i){let s;ar(s=cr())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&kr("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[di,Ls],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&Ri(0,VBe,0,0,"ng-template",0)},dependencies:[H1],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return t})();class uL{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new qt,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!ih(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==n.closeOnOverlayDetachments&&this.close()})}close(e,n){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const qX=new St("DialogScrollStrategy",{providedIn:"root",factory:()=>{const t=Ut($c);return()=>t.scrollStrategies.block()}}),HBe=new St("DialogData"),GBe=new St("DefaultDialogConfig");let WBe=0,$Be=(()=>{class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(n,i,r,s,o,a){this._overlay=n,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new qt,this._afterOpenedAtThisLevel=new qt,this._ariaHiddenElements=new Map,this.afterAllClosed=Ov(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Bl(void 0))),this._scrollStrategy=a}open(n,i){(i={...this._defaultOptions||new OS,...i}).id=i.id||"cdk-dialog-"+WBe++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new uL(o,i),c=this._attachContainer(o,a,i);return a.containerInstance=c,this._attachDialogContent(n,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){dL(this.openDialogs,n=>n.close())}getDialogById(n){return this.openDialogs.find(i=>i.id===n)}ngOnDestroy(){dL(this._openDialogsAtThisLevel,n=>{!1===n.config.closeOnDestroy&&this._removeOpenDialog(n,!1)}),dL(this._openDialogsAtThisLevel,n=>n.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(n){const i=new DP({positionStrategy:n.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:n.scrollStrategy||this._scrollStrategy(),panelClass:n.panelClass,hasBackdrop:n.hasBackdrop,direction:n.direction,minWidth:n.minWidth,minHeight:n.minHeight,maxWidth:n.maxWidth,maxHeight:n.maxHeight,width:n.width,height:n.height,disposeOnNavigation:n.closeOnNavigation});return n.backdropClass&&(i.backdropClass=n.backdropClass),i}_attachContainer(n,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:OS,useValue:r},{provide:uL,useValue:i},{provide:z1,useValue:n}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=$X;const c=new MP(a,r.viewContainerRef,Gi.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return n.attach(c).instance}_attachDialogContent(n,i,r,s){if(n instanceof cc){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new V1(n,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new MP(n,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(n,i,r,s){const o=n.injector||n.viewContainerRef?.injector,a=[{provide:HBe,useValue:n.data},{provide:uL,useValue:i}];return n.providers&&("function"==typeof n.providers?a.push(...n.providers(i,n,r)):a.push(...n.providers)),n.direction&&(!o||!o.get(Dv,null,{optional:!0}))&&a.push({provide:Dv,useValue:{value:n.direction,change:sn()}}),Gi.create({parent:o||s,providers:a})}_removeOpenDialog(n,i){const r=this.openDialogs.indexOf(n);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const n=this._overlayContainer.getContainerElement();if(n.parentElement){const i=n.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==n&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const n=this._parentDialog;return n?n._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||t)(lt($c),lt(Gi),lt(GBe,8),lt(t,12),lt(G1),lt(qX))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dL(t,e){let n=t.length;for(;n--;)e(t[n])}function qBe(t,e){}class hL{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const fL="mdc-dialog--open",XX="mdc-dialog--opening",YX="mdc-dialog--closing";let KX=(()=>{class t extends $X{constructor(n,i,r,s,o,a,c,l,u){super(n,i,r,s,o,a,c,u),this._animationMode=l,this._animationStateChanged=new _n,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?ZX(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?ZX(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(JX,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(XX,fL)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(fL),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(fL),this._animationsEnabled?(this._hostElement.style.setProperty(JX,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(YX)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(n){this._actionSectionCount+=n,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(XX,YX)}_waitForAnimationToComplete(n,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,n)}_requestAnimationFrame(n){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(n):n()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(n){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(n){const i=super.attachComponentPortal(n);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static#e=this.\u0275fac=function(i){return new(i||t)(st(ui),st(zW),st(hi,8),st(hL),st(wP),st(yn),st(z1),st(ic,8),st(xP))};static#t=this.\u0275cmp=gi({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){2&i&&(vf("id",r._config.id),kr("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Er("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},standalone:!0,features:[di,Ls],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(Rn(0,"div",0)(1,"div",1),Ri(2,qBe,0,0,"ng-template",2),Nn()())},dependencies:[H1],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition:opacity linear var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container .mdc-dialog__surface{transition:transform var(--mat-dialog-transition-duration, 0ms) 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container,.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__surface{transition:none}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-title{padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}return t})();const JX="--mat-dialog-transition-duration";function ZX(t){return null==t?null:"number"==typeof t?t:t.endsWith("ms")?FW(t.substring(0,t.length-2)):t.endsWith("s")?1e3*FW(t.substring(0,t.length-1)):"0"===t?0:null}var NS=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(NS||{});class PS{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new qt,this._beforeClosed=new qt,this._state=NS.OPEN,this.disableClose=n.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(yi(r=>"opened"===r.state),Si(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(yi(r=>"closed"===r.state),Si(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),jc(this.backdropClick(),this.keydownEvents().pipe(yi(r=>27===r.keyCode&&!this.disableClose&&!ih(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function QX(t,e,n){return t._closeInteractionType=e,t.close(n)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(yi(n=>"closing"===n.state),Si(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=NS.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=NS.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const eY=new St("MatMdcDialogData"),KBe=new St("mat-mdc-dialog-default-options"),tY=new St("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const t=Ut($c);return()=>t.scrollStrategies.block()}});let ZBe=0,FS=(()=>{class t{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const n=this._parentDialog;return n?n._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(n,i,r,s,o,a,c,l){this._overlay=n,this._defaultOptions=s,this._scrollStrategy=o,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new qt,this._afterOpenedAtThisLevel=new qt,this.dialogConfigClass=hL,this.afterAllClosed=Ov(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Bl(void 0))),this._dialog=i.get($Be),this._dialogRefConstructor=PS,this._dialogContainerType=KX,this._dialogDataToken=eY}open(n,i){let r;(i={...this._defaultOptions||new hL,...i}).id=i.id||"mat-mdc-dialog-"+ZBe++,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(n,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:OS,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,c)=>(r=new this._dialogRefConstructor(o,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(n){return this.openDialogs.find(i=>i.id===n)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(n){let i=n.length;for(;i--;)n[i].close()}static#e=this.\u0275fac=function(i){return new(i||t)(lt($c),lt(Gi),lt(Sf,8),lt(KBe,8),lt(tY),lt(t,12),lt(G1),lt(ic,8))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),QBe=0,nY=(()=>{class t{constructor(n,i,r){this._dialogRef=n,this._elementRef=i,this._dialog=r}ngOnInit(){this._dialogRef||(this._dialogRef=function iY(t,e){let n=t.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-mdc-dialog-container");)n=n.parentElement;return n?e.find(i=>i.id===n.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static#e=this.\u0275fac=function(i){return new(i||t)(st(PS,8),st(ui),st(FS))};static#t=this.\u0275dir=Xt({type:t,standalone:!0})}return t})(),pL=(()=>{class t extends nY{constructor(){super(...arguments),this.id="mat-mdc-dialog-title-"+QBe++}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static#e=this.\u0275fac=(()=>{let n;return function(r){return(n||(n=Xi(t)))(r||t)}})();static#t=this.\u0275dir=Xt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&vf("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[di]})}return t})(),gL=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Xt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0})}return t})();let sY=(()=>{class t{constructor(n){this.http=n,this.panelContent=new ye({content:[],infoTitle:"",videoID:""})}updateData(n,i,r){this.http.get(n,{responseType:"text"}).subscribe(s=>{const o={content:this.parseMarkdown(s),infoTitle:r,videoID:i};this.panelContent.next(o)})}parseMarkdown(n){const i=[],r=n.split("# ");for(const s of r)if(s.length){const o=s.includes("\n\n")?"\n\n":"\r\n\r\n",a=s.split(o);i.push({title:a[0],content:a.splice(1).join(o)})}return i}static#e=this.\u0275fac=function(i){return new(i||t)(lt(uh))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const nke=["*"];let LS;function gb(t){return function ike(){if(void 0===LS&&(LS=null,typeof window<"u")){const t=window;void 0!==t.trustedTypes&&(LS=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return LS}()?.createHTML(t)||t}function oY(t){return Error(`Unable to find icon with the name "${t}"`)}function aY(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function cY(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class cp{constructor(e,n,i){this.url=e,this.svgText=n,this.options=i}}let BS=(()=>{class t{constructor(n,i,r,s){this._httpClient=n,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(n,i,r){return this.addSvgIconInNamespace("",n,i,r)}addSvgIconLiteral(n,i,r){return this.addSvgIconLiteralInNamespace("",n,i,r)}addSvgIconInNamespace(n,i,r,s){return this._addSvgIconConfig(n,i,new cp(r,null,s))}addSvgIconResolver(n){return this._resolvers.push(n),this}addSvgIconLiteralInNamespace(n,i,r,s){const o=this._sanitizer.sanitize(Ns.HTML,r);if(!o)throw cY(r);const a=gb(o);return this._addSvgIconConfig(n,i,new cp("",a,s))}addSvgIconSet(n,i){return this.addSvgIconSetInNamespace("",n,i)}addSvgIconSetLiteral(n,i){return this.addSvgIconSetLiteralInNamespace("",n,i)}addSvgIconSetInNamespace(n,i,r){return this._addSvgIconSetConfig(n,new cp(i,null,r))}addSvgIconSetLiteralInNamespace(n,i,r){const s=this._sanitizer.sanitize(Ns.HTML,i);if(!s)throw cY(i);const o=gb(s);return this._addSvgIconSetConfig(n,new cp("",o,r))}registerFontClassAlias(n,i=n){return this._fontCssClassesByAlias.set(n,i),this}classNameForFontAlias(n){return this._fontCssClassesByAlias.get(n)||n}setDefaultFontSetClass(...n){return this._defaultFontSetClass=n,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(n){const i=this._sanitizer.sanitize(Ns.RESOURCE_URL,n);if(!i)throw aY(n);const r=this._cachedIconsByUrl.get(i);return r?sn(kS(r)):this._loadSvgIconFromConfig(new cp(n,null)).pipe(br(s=>this._cachedIconsByUrl.set(i,s)),Y(s=>kS(s)))}getNamedSvgIcon(n,i=""){const r=lY(i,n);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,n),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(n,o):Qd(oY(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(n){return n.svgText?sn(kS(this._svgElementFromConfig(n))):this._loadSvgIconFromConfig(n).pipe(Y(i=>kS(i)))}_getSvgFromIconSetConfigs(n,i){const r=this._extractIconWithNameFromAnySet(n,i);return r?sn(r):pv(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(zc(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(Ns.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),sn(null)})))).pipe(Y(()=>{const o=this._extractIconWithNameFromAnySet(n,i);if(!o)throw oY(n);return o}))}_extractIconWithNameFromAnySet(n,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(n)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,n,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(n){return this._fetchIcon(n).pipe(br(i=>n.svgText=i),Y(()=>this._svgElementFromConfig(n)))}_loadSvgIconSetFromConfig(n){return n.svgText?sn(null):this._fetchIcon(n).pipe(br(i=>n.svgText=i))}_extractSvgIconFromSet(n,i,r){const s=n.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(gb("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(n){const i=this._document.createElement("DIV");i.innerHTML=n;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(n){const i=this._svgElementFromString(gb("<svg></svg>")),r=n.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<n.childNodes.length;s++)n.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(n.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(n,i){return n.setAttribute("fit",""),n.setAttribute("height","100%"),n.setAttribute("width","100%"),n.setAttribute("preserveAspectRatio","xMidYMid meet"),n.setAttribute("focusable","false"),i&&i.viewBox&&n.setAttribute("viewBox",i.viewBox),n}_fetchIcon(n){const{url:i,options:r}=n,s=r?.withCredentials??!1;if(!this._httpClient)throw function rke(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(Ns.RESOURCE_URL,i);if(!o)throw aY(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Y(l=>gb(l)),Lv(()=>this._inProgressUrlFetches.delete(o)),Pu());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(n,i,r){return this._svgIconConfigs.set(lY(n,i),r),this}_addSvgIconSetConfig(n,i){const r=this._iconSetConfigs.get(n);return r?r.push(i):this._iconSetConfigs.set(n,[i]),this}_svgElementFromConfig(n){if(!n.svgElement){const i=this._svgElementFromString(n.svgText);this._setSvgAttributes(i,n.options),n.svgElement=i}return n.svgElement}_getIconConfigFromResolvers(n,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,n);if(s)return oke(s)?new cp(s.url,null,s.options):new cp(s,null)}}static#e=this.\u0275fac=function(i){return new(i||t)(lt(uh,8),lt(m0),lt(hi,8),lt(Ao))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kS(t){return t.cloneNode(!0)}function lY(t,e){return t+":"+e}function oke(t){return!(!t.url||!t.options)}const ake=new St("MAT_ICON_DEFAULT_OPTIONS"),cke=new St("mat-icon-location",{providedIn:"root",factory:function lke(){const t=Ut(hi),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),uY=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],uke=uY.map(t=>`[${t}]`).join(", "),dke=/^url\(['"]?#(.*?)['"]?\)$/;let dY=(()=>{class t{get color(){return this._color||this._defaultColor}set color(n){this._color=n}get svgIcon(){return this._svgIcon}set svgIcon(n){n!==this._svgIcon&&(n?this._updateSvgIcon(n):this._svgIcon&&this._clearSvgElement(),this._svgIcon=n)}get fontSet(){return this._fontSet}set fontSet(n){const i=this._cleanupFontValue(n);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(n){const i=this._cleanupFontValue(n);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(n,i,r,s,o,a){this._elementRef=n,this._iconRegistry=i,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Bt.EMPTY,a&&(a.color&&(this.color=this._defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||n.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(n){if(!n)return["",""];const i=n.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${n}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const n=this._elementsWithExternalReferences;if(n&&n.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(n){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(n),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(n)}_clearSvgElement(){const n=this._elementRef.nativeElement;let i=n.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=n.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const n=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>n.classList.remove(r)),i.forEach(r=>n.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&n.classList.remove(this._previousFontIconClass),this.fontIcon&&n.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(n){return"string"==typeof n?n.trim().split(" ")[0]:n}_prependPathToReferences(n){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${n}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(n){const i=n.querySelectorAll(uke),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)uY.forEach(o=>{const a=i[s],c=a.getAttribute(o),l=c?c.match(dke):null;if(l){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(n){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),n){const[i,r]=this._splitIconName(n);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Si(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||t)(st(ui),st(BS),gu("aria-hidden"),st(cke),st(Ao),st(ake,8))};static#t=this.\u0275cmp=gi({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){2&i&&(kr("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),yf(r.color?"mat-"+r.color:""),Er("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:[Yt.HasDecoratorInputTransform,"inline","inline",os],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[ml,Ls],ngContentSelectors:nke,decls:1,vars:0,template:function(i,r){1&i&&(ka(),Li(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return t})(),hY=(()=>{class t{constructor(){this._listeners=[]}notify(n,i){for(let r of this._listeners)r(n,i)}listen(n){return this._listeners.push(n),()=>{this._listeners=this._listeners.filter(i=>n!==i)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const fY=new St("CdkAccordion");let fke=0,pke=(()=>{class t{get expanded(){return this._expanded}set expanded(n){this._expanded!==n&&(this._expanded=n,this.expandedChange.emit(n),n?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}constructor(n,i,r){this.accordion=n,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=Bt.EMPTY,this.closed=new _n,this.opened=new _n,this.destroyed=new _n,this.expandedChange=new _n,this.id="cdk-accordion-child-"+fke++,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(n=>{this.disabled||(this.expanded=n)})}static#e=this.\u0275fac=function(i){return new(i||t)(st(fY,12),st(to),st(hY))};static#t=this.\u0275dir=Xt({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[Yt.HasDecoratorInputTransform,"expanded","expanded",os],disabled:[Yt.HasDecoratorInputTransform,"disabled","disabled",os]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[Ni([{provide:fY,useValue:void 0}]),ml]})}return t})();const gke=["body"],mke=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],_ke=["mat-expansion-panel-header","*","mat-action-row"];function yke(t,e){}const vke=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],bke=["mat-panel-title","mat-panel-description","*"];function wke(t,e){1&t&&(Rn(0,"span",1),vn(),Rn(1,"svg",2),ss(2,"path",3),Nn()()),2&t&&Oi("@indicatorRotate",$r()._getExpandedState())}const pY=new St("MAT_ACCORDION"),gY="225ms cubic-bezier(0.4,0.0,0.2,1)",mY={indicatorRotate:Rv("indicatorRotate",[oh("collapsed, void",xa({transform:"rotate(0deg)"})),oh("expanded",xa({transform:"rotate(180deg)"})),ep("expanded <=> collapsed, void => collapsed",sh(gY))]),bodyExpansion:Rv("bodyExpansion",[oh("collapsed, void",xa({height:"0px",visibility:"hidden"})),oh("expanded",xa({height:"*",visibility:""})),ep("expanded <=> collapsed, void => collapsed",sh(gY))])},_Y=new St("MAT_EXPANSION_PANEL");let xke=(()=>{class t{constructor(n,i){this._template=n,this._expansionPanel=i}static#e=this.\u0275fac=function(i){return new(i||t)(st(cc),st(_Y,8))};static#t=this.\u0275dir=Xt({type:t,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0})}return t})(),Eke=0;const yY=new St("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let vY=(()=>{class t extends pke{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(n){this._hideToggle=n}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(n){this._togglePosition=n}constructor(n,i,r,s,o,a,c){super(n,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new _n,this.afterCollapse=new _n,this._inputChanges=new qt,this._headerId="mat-expansion-panel-header-"+Eke++,this.accordion=n,this._document=o,this._animationsDisabled="NoopAnimations"===a,c&&(this.hideToggle=c.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Bl(null),yi(()=>this.expanded&&!this._portal),Si(1)).subscribe(()=>{this._portal=new V1(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(n){this._inputChanges.next(n)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){const n=this._document.activeElement,i=this._body.nativeElement;return n===i||i.contains(n)}return!1}_animationStarted(n){!bY(n)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(n){bY(n)||("expanded"===n.toState?this.afterExpand.emit():"collapsed"===n.toState&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}static#e=this.\u0275fac=function(i){return new(i||t)(st(pY,12),st(to),st(hY),st(Io),st(hi),st(ic,8),st(yY,8))};static#t=this.\u0275cmp=gi({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,s){if(1&i&&uc(s,xke,5),2&i){let o;ar(o=cr())&&(r._lazyContent=o.first)}},viewQuery:function(i,r){if(1&i&&Do(gke,5),2&i){let s;ar(s=cr())&&(r._body=s.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&Er("mat-expanded",r.expanded)("_mat-animation-noopable",r._animationsDisabled)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:[Yt.HasDecoratorInputTransform,"hideToggle","hideToggle",os],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[Ni([{provide:pY,useValue:void 0},{provide:_Y,useExisting:t}]),ml,di,Lr,Ls],ngContentSelectors:_ke,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){if(1&i){const s=Dd();ka(mke),Li(0),Rn(1,"div",1,0),zi("@bodyExpansion.start",function(a){return Gs(s),ms(r._animationStarted(a))})("@bodyExpansion.done",function(a){return Gs(s),ms(r._animationDone(a))}),Rn(3,"div",2),Li(4,1),Ri(5,yke,0,0,"ng-template",3),Nn(),Li(6,2),Nn()}2&i&&(bn(),Oi("@bodyExpansion",r._getExpandedState())("id",r.id),kr("aria-labelledby",r._headerId),bn(4),Oi("cdkPortalOutlet",r._portal))},dependencies:[H1],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[mY.bodyExpansion]},changeDetection:0})}return t})();function bY(t){return"void"===t.fromState}let Ake=(()=>{class t{constructor(n,i,r,s,o,a,c){this.panel=n,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=Bt.EMPTY,this.tabIndex=0;const l=n.accordion?n.accordion._stateChanges.pipe(yi(u=>!(!u.hideToggle&&!u.togglePosition))):Ro;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=jc(n.opened,n.closed,l,n._inputChanges.pipe(yi(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),n.closed.pipe(yi(()=>n._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const n=this._isExpanded();return n&&this.expandedHeight?this.expandedHeight:!n&&this.collapsedHeight?this.collapsedHeight:null}_keydown(n){switch(n.keyCode){case 32:case 13:ih(n)||(n.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(n))}}focus(n,i){n?this._focusMonitor.focusVia(this._element,n,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(n=>{n&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static#e=this.\u0275fac=function(i){return new(i||t)(st(vY,1),st(ui),st(xP),st(to),st(yY,8),st(ic,8),gu("tabindex"))};static#t=this.\u0275cmp=gi({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&zi("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),2&i&&(kr("id",r.panel._headerId)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),qy("height",r._getHeaderHeight()),Er("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[Yt.HasDecoratorInputTransform,"tabIndex","tabIndex",n=>null==n?0:vE(n)]},standalone:!0,features:[ml,Ls],ngContentSelectors:bke,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(i,r){1&i&&(ka(vke),Rn(0,"span",0),Li(1),Li(2,1),Li(3,2),Nn(),Ri(4,wke,3,1,"span",1)),2&i&&(Er("mat-content-hide-toggle",!r._showToggle()),bn(4),Fs(4,r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color);display:inline-block;display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color);display:none;display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[mY.indicatorRotate]},changeDetection:0})}return t})();function wY(t,e,n){return n?wY(t,e).pipe(l1(n)):new At(i=>{const r=(...o)=>i.next(1===o.length?o[0]:o),s=t(r);return Ke(e)?()=>e(r,s):void 0})}const Ske=["youtubeContainer"];function Cke(t,e){if(1&t){const n=Dd();Rn(0,"youtube-player-placeholder",2),zi("click",function(){return Gs(n),ms($r()._load(!0))}),Nn()}if(2&t){const n=$r();Oi("videoId",n.videoId)("width",n.width)("height",n.height)("isLoading",n._isLoading)("buttonLabel",n.placeholderButtonLabel)("quality",n.placeholderImageQuality)}}let Mke=(()=>{class t{_getBackgroundImage(){let n;return n="low"===this.quality?`https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg`:"high"===this.quality?`https://i.ytimg.com/vi/${this.videoId}/maxresdefault.jpg`:`https://i.ytimg.com/vi_webp/${this.videoId}/sddefault.webp`,`url(${n})`}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=gi({type:t,selectors:[["youtube-player-placeholder"]],hostAttrs:[1,"youtube-player-placeholder"],hostVars:8,hostBindings:function(i,r){2&i&&(qy("background-image",r._getBackgroundImage())("width",r.width,"px")("height",r.height,"px"),Er("youtube-player-placeholder-loading",r.isLoading))},inputs:{videoId:"videoId",width:"width",height:"height",isLoading:"isLoading",buttonLabel:"buttonLabel",quality:"quality"},standalone:!0,features:[Ls],decls:4,vars:1,consts:[["type","button",1,"youtube-player-placeholder-button"],["height","100%","version","1.1","viewBox","0 0 68 48","focusable","false","aria-hidden","true"],["d","M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z","fill","#f00"],["d","M 45,24 27,14 27,34","fill","#fff"]],template:function(i,r){1&i&&(Rn(0,"button",0),vn(),Rn(1,"svg",1),ss(2,"path",2)(3,"path",3),Nn()()),2&i&&kr("aria-label",r.buttonLabel)},styles:[".youtube-player-placeholder{display:flex;align-items:center;justify-content:center;width:100%;overflow:hidden;cursor:pointer;background-color:#000;background-position:center center;background-size:cover;transition:box-shadow 300ms ease;box-shadow:inset 0 120px 90px -90px rgba(0,0,0,.8)}.youtube-player-placeholder-button{transition:opacity 300ms ease;-moz-appearance:none;-webkit-appearance:none;background:none;border:none;padding:0;display:flex}.youtube-player-placeholder-button svg{width:68px;height:48px}.youtube-player-placeholder-loading{box-shadow:none}.youtube-player-placeholder-loading .youtube-player-placeholder-button{opacity:0}"],encapsulation:2,changeDetection:0})}return t})();const Tke=new St("YOUTUBE_PLAYER_CONFIG");function AY(t){return null==t?t:vE(t,0)}let Ike=(()=>{class t{get height(){return this._height}set height(n){this._height=null==n||isNaN(n)?390:n}get width(){return this._width}set width(n){this._width=null==n||isNaN(n)?640:n}constructor(n,i){this._ngZone=n,this._destroyed=new qt,this._playerChanges=new ye(void 0),this._nonce=Ut(lg,{optional:!0}),this._changeDetectorRef=Ut(to),this._isLoading=!1,this._hasPlaceholder=!0,this._height=390,this._width=640,this.disableCookies=!1,this.disablePlaceholder=!1,this.showBeforeIframeApiLoads=!1,this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange");const r=Ut(Tke,{optional:!0});this.loadApi=r?.loadApi??!0,this.disablePlaceholder=!!r?.disablePlaceholder,this.placeholderButtonLabel=r?.placeholderButtonLabel||"Play video",this.placeholderImageQuality=r?.placeholderImageQuality||"standard",this._isBrowser=Pd(i)}ngAfterViewInit(){this._conditionallyLoad()}ngOnChanges(n){this._shouldRecreatePlayer(n)?this._conditionallyLoad():this._player&&((n.width||n.height)&&this._setSize(),n.suggestedQuality&&this._setQuality(),(n.startSeconds||n.endSeconds||n.suggestedQuality)&&this._cuePlayer())}ngOnDestroy(){this._pendingPlayer?.destroy(),this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(n,i){this._player?this._player.seekTo(n,i):this._getPendingState().seek={seconds:n,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(n){this._player?this._player.setVolume(n):this._getPendingState().volume=n}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(n){if(this._player)return this._player.setPlaybackRate(n);this._getPendingState().playbackRate=n}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_load(n){this._isBrowser&&(window.YT&&window.YT.Player?this._createPlayer(n):(this.loadApi&&(this._isLoading=!0,function Dke(t){if(mL)return;const n=document.createElement("script"),i=r=>{n.removeEventListener("load",i),n.removeEventListener("error",i),"error"===r.type&&(mL=!1)};n.addEventListener("load",i),n.addEventListener("error",i),n.src="https://www.youtube.com/iframe_api",n.async=!0,t&&n.setAttribute("nonce",t),mL=!0,document.body.appendChild(n)}(this._nonce)),this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback?.(),this._ngZone.run(()=>this._createPlayer(n))}))}_conditionallyLoad(){this._shouldShowPlaceholder()?1===this.playerVars?.autoplay&&this._load(!0):this._load(!1)}_shouldShowPlaceholder(){return!this.disablePlaceholder&&(!this._isBrowser||this._hasPlaceholder&&!!this.videoId&&!this._player)}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_shouldRecreatePlayer(n){const i=n.videoId||n.playerVars||n.disableCookies||n.disablePlaceholder;return!!i&&!i.isFirstChange()}_createPlayer(n){if(this._player?.destroy(),this._pendingPlayer?.destroy(),typeof YT>"u"||!this.videoId&&!this.playerVars?.list)return;const i=this._ngZone.runOutsideAngular(()=>new YT.Player(this.youtubeContainer.nativeElement,{videoId:this.videoId,host:this.disableCookies?"https://www.youtube-nocookie.com":void 0,width:this.width,height:this.height,playerVars:n?{...this.playerVars||{},autoplay:1}:this.playerVars})),r=()=>{this._ngZone.run(()=>{this._isLoading=!1,this._hasPlaceholder=!1,this._player=i,this._pendingPlayer=void 0,i.removeEventListener("onReady",r),this._playerChanges.next(i),this._setSize(),this._setQuality(),this._pendingPlayerState&&(this._applyPendingPlayerState(i,this._pendingPlayerState),this._pendingPlayerState=void 0);const s=i.getPlayerState();(s===YT.PlayerState.UNSTARTED||s===YT.PlayerState.CUED||null==s)&&this._cuePlayer(),this._changeDetectorRef.markForCheck()})};this._pendingPlayer=i,i.addEventListener("onReady",r)}_applyPendingPlayerState(n,i){const{playbackState:r,playbackRate:s,volume:o,muted:a,seek:c}=i;switch(r){case YT.PlayerState.PLAYING:n.playVideo();break;case YT.PlayerState.PAUSED:n.pauseVideo();break;case YT.PlayerState.CUED:n.stopVideo()}null!=s&&n.setPlaybackRate(s),null!=o&&n.setVolume(o),null!=a&&(a?n.mute():n.unMute()),null!=c&&n.seekTo(c.seconds,c.allowSeekAhead)}_cuePlayer(){this._player&&this.videoId&&this._player.cueVideoById({videoId:this.videoId,startSeconds:this.startSeconds,endSeconds:this.endSeconds,suggestedQuality:this.suggestedQuality})}_setSize(){this._player?.setSize(this.width,this.height)}_setQuality(){this._player&&this.suggestedQuality&&this._player.setPlaybackQuality(this.suggestedQuality)}_getLazyEmitter(n){return this._playerChanges.pipe(Ki(i=>i?wY(r=>{i.addEventListener(n,r)},r=>{try{i?.removeEventListener?.(n,r)}catch{}}):sn()),i=>new At(r=>i.subscribe({next:s=>this._ngZone.run(()=>r.next(s)),error:s=>r.error(s),complete:()=>r.complete()})),$a(this._destroyed))}static#e=this.\u0275fac=function(i){return new(i||t)(st(yn),st(nc))};static#t=this.\u0275cmp=gi({type:t,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&Do(Ske,7),2&i){let s;ar(s=cr())&&(r.youtubeContainer=s.first)}},inputs:{videoId:"videoId",height:[Yt.HasDecoratorInputTransform,"height","height",vE],width:[Yt.HasDecoratorInputTransform,"width","width",vE],startSeconds:[Yt.HasDecoratorInputTransform,"startSeconds","startSeconds",AY],endSeconds:[Yt.HasDecoratorInputTransform,"endSeconds","endSeconds",AY],suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:[Yt.HasDecoratorInputTransform,"disableCookies","disableCookies",os],loadApi:[Yt.HasDecoratorInputTransform,"loadApi","loadApi",os],disablePlaceholder:[Yt.HasDecoratorInputTransform,"disablePlaceholder","disablePlaceholder",os],showBeforeIframeApiLoads:[Yt.HasDecoratorInputTransform,"showBeforeIframeApiLoads","showBeforeIframeApiLoads",os],placeholderButtonLabel:"placeholderButtonLabel",placeholderImageQuality:"placeholderImageQuality"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},standalone:!0,features:[ml,Lr,Ls],decls:4,vars:3,consts:[["youtubeContainer",""],[3,"videoId","width","height","isLoading","buttonLabel","quality"],[3,"click","videoId","width","height","isLoading","buttonLabel","quality"]],template:function(i,r){1&i&&(Ri(0,Cke,1,6,"youtube-player-placeholder",1),Rn(1,"div"),ss(2,"div",null,0),Nn()),2&i&&(Fs(0,r._shouldShowPlaceholder()?0:-1),bn(),qy("display",r._shouldShowPlaceholder()?"none":""))},dependencies:[Mke],encapsulation:2,changeDetection:0})}return t})(),mL=!1;let lp={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function SY(t){lp=t}const CY=/[&<>"']/,Rke=new RegExp(CY.source,"g"),MY=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Oke=new RegExp(MY.source,"g"),Nke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},TY=t=>Nke[t];function Ya(t,e){if(e){if(CY.test(t))return t.replace(Rke,TY)}else if(MY.test(t))return t.replace(Oke,TY);return t}const Pke=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Fke(t){return t.replace(Pke,(e,n)=>"colon"===(n=n.toLowerCase())?":":"#"===n.charAt(0)?"x"===n.charAt(1)?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):"")}const Lke=/(^|[^\[])\^/g;function er(t,e){let n="string"==typeof t?t:t.source;e=e||"";const i={replace:(r,s)=>{let o="string"==typeof s?s:s.source;return o=o.replace(Lke,"$1"),n=n.replace(r,o),i},getRegex:()=>new RegExp(n,e)};return i}function IY(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const mb={exec:()=>null};function DY(t,e){const i=t.replace(/\|/g,(s,o,a)=>{let c=!1,l=o;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function jS(t,e,n){const i=t.length;if(0===i)return"";let r=0;for(;r<i;){const s=t.charAt(i-r-1);if(s!==e||n){if(s===e||!n)break;r++}else r++}return t.slice(0,i-r)}function RY(t,e,n,i){const r=e.href,s=e.title?Ya(e.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:n,href:r,title:s,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:r,title:s,text:Ya(o)}}class US{options;rules;lexer;constructor(e){this.options=e||lp}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const i=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?i:jS(i,"\n")}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const i=n[0],r=function kke(t,e){const n=t.match(/^(\s+)(?:```)/);if(null===n)return e;const i=n[1];return e.split("\n").map(r=>{const s=r.match(/^\s+/);if(null===s)return r;const[o]=s;return o.length>=i.length?r.slice(i.length):r}).join("\n")}(i,n[3]||"");return{type:"code",raw:i,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:r}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let i=n[2].trim();if(/#$/.test(i)){const r=jS(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){const i=jS(n[0].replace(/^ *>[ \t]?/gm,""),"\n"),r=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:n[0],tokens:s,text:i}}}list(e){let n=this.rules.block.list.exec(e);if(n){let i=n[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const o=new RegExp(`^( {0,3}${i})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a="",c="",l=!1;for(;e;){let u=!1;if(!(n=o.exec(e))||this.rules.block.hr.test(e))break;a=n[0],e=e.substring(a.length);let h=n[2].split("\n",1)[0].replace(/^\t+/,R=>" ".repeat(3*R.length)),f=e.split("\n",1)[0],g=0;this.options.pedantic?(g=2,c=h.trimStart()):(g=n[2].search(/[^ ]/),g=g>4?1:g,c=h.slice(g),g+=n[1].length);let m=!1;if(!h&&/^ *$/.test(f)&&(a+=f+"\n",e=e.substring(f.length+1),u=!0),!u){const R=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),L=new RegExp(`^ {0,${Math.min(3,g-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ie=new RegExp(`^ {0,${Math.min(3,g-1)}}(?:\`\`\`|~~~)`),q=new RegExp(`^ {0,${Math.min(3,g-1)}}#`);for(;e;){const Ee=e.split("\n",1)[0];if(f=Ee,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),ie.test(f)||q.test(f)||R.test(f)||L.test(e))break;if(f.search(/[^ ]/)>=g||!f.trim())c+="\n"+f.slice(g);else{if(m||h.search(/[^ ]/)>=4||ie.test(h)||q.test(h)||L.test(h))break;c+="\n"+f}!m&&!f.trim()&&(m=!0),a+=Ee+"\n",e=e.substring(Ee.length+1),h=f.slice(g)}}s.loose||(l?s.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let b,y=null;this.options.gfm&&(y=/^\[[ xX]\] /.exec(c),y&&(b="[ ] "!==y[0],c=c.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!y,checked:b,loose:!1,text:c,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=c.trimEnd(),s.raw=s.raw.trimEnd();for(let u=0;u<s.items.length;u++)if(this.lexer.state.top=!1,s.items[u].tokens=this.lexer.blockTokens(s.items[u].text,[]),!s.loose){const h=s.items[u].tokens.filter(g=>"space"===g.type),f=h.length>0&&h.some(g=>/\n.*\n/.test(g.raw));s.loose=f}if(s.loose)for(let u=0;u<s.items.length;u++)s.items[u].loose=!0;return s}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:"pre"===n[1]||"script"===n[1]||"style"===n[1],text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const i=n[1].toLowerCase().replace(/\s+/g," "),r=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:i,raw:n[0],href:r,title:s}}}table(e){const n=this.rules.block.table.exec(e);if(!n||!/[:|]/.test(n[2]))return;const i=DY(n[1]),r=n[2].replace(/^\||\| *$/g,"").split("|"),s=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split("\n"):[],o={type:"table",raw:n[0],header:[],align:[],rows:[]};if(i.length===r.length){for(const a of r)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(const a of i)o.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of s)o.rows.push(DY(a,o.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return o}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:"="===n[2].charAt(0)?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const i="\n"===n[1].charAt(n[1].length-1)?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:Ya(n[1])}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const i=n[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=jS(i.slice(0,-1),"\\");if((i.length-o.length)%2==0)return}else{const o=function Bke(t,e){if(-1===t.indexOf(e[1]))return-1;let n=0;for(let i=0;i<t.length;i++)if("\\"===t[i])i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}(n[2],"()");if(o>-1){const c=(0===n[0].indexOf("!")?5:4)+n[1].length+o;n[2]=n[2].substring(0,o),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let r=n[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],s=o[3])}else s=n[3]?n[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),RY(n,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(e,n){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const s=n[(i[2]||i[1]).replace(/\s+/g," ").toLowerCase()];if(!s){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return RY(i,s,i[0],this.lexer)}}emStrong(e,n,i=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))&&(!r[1]&&!r[2]||!i||this.rules.inline.punctuation.exec(i))){const o=[...r[0]].length-1;let a,c,l=o,u=0;const h="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,n=n.slice(-1*e.length+o);null!=(r=h.exec(n));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=[...a].length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&o%3&&!((o+c)%3)){u+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+u);const f=[...r[0]][0].length,g=e.slice(0,o+r.index+f+c);if(Math.min(o,c)%2){const y=g.slice(1,-1);return{type:"em",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}const m=g.slice(2,-2);return{type:"strong",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let i=n[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=Ya(i,!0),{type:"codespan",raw:n[0],text:i}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let i,r;return"@"===n[2]?(i=Ya(n[1]),r="mailto:"+i):(i=Ya(n[1]),r=i),{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let n;if(n=this.rules.inline.url.exec(e)){let i,r;if("@"===n[2])i=Ya(n[0]),r="mailto:"+i;else{let s;do{s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??""}while(s!==n[0]);i=Ya(n[0]),r="www."===n[1]?"http://"+n[0]:n[0]}return{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){let i;return i=this.lexer.state.inRawBlock?n[0]:Ya(n[0]),{type:"text",raw:n[0],text:i}}}}const _b=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,OY=/(?:[*+-]|\d{1,9}[.)])/,NY=er(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,OY).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),yL=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,vL=/(?!\s*\])(?:\\.|[^\[\]\\])+/,zke=er(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",vL).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Wke=er(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,OY).getRegex(),VS="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",bL=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,$ke=er("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",bL).replace("tag",VS).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),PY=er(yL).replace("hr",_b).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",VS).getRegex(),wL={blockquote:er(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",PY).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:zke,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:_b,html:$ke,lheading:NY,list:Wke,newline:/^(?: *(?:\n|$))+/,paragraph:PY,table:mb,text:/^[^\n]+/},FY=er("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",_b).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",VS).getRegex(),qke={...wL,table:FY,paragraph:er(yL).replace("hr",_b).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",FY).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",VS).getRegex()},Xke={...wL,html:er("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",bL).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:mb,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:er(yL).replace("hr",_b).replace("heading"," *#{1,6} *[^\n]").replace("lheading",NY).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},LY=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,BY=/^( {2,}|\\)\n(?!\s*$)/,yb="\\p{P}\\p{S}",Jke=er(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,yb).getRegex(),Qke=er(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,yb).getRegex(),e3e=er("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,yb).getRegex(),t3e=er("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,yb).getRegex(),n3e=er(/\\([punct])/,"gu").replace(/punct/g,yb).getRegex(),i3e=er(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),r3e=er(bL).replace("(?:--\x3e|$)","--\x3e").getRegex(),s3e=er("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",r3e).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),HS=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,o3e=er(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",HS).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),kY=er(/^!?\[(label)\]\[(ref)\]/).replace("label",HS).replace("ref",vL).getRegex(),jY=er(/^!?\[(ref)\](?:\[\])?/).replace("ref",vL).getRegex(),xL={_backpedal:mb,anyPunctuation:n3e,autolink:i3e,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:BY,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:mb,emStrongLDelim:Qke,emStrongRDelimAst:e3e,emStrongRDelimUnd:t3e,escape:LY,link:o3e,nolink:jY,punctuation:Jke,reflink:kY,reflinkSearch:er("reflink|nolink(?!\\()","g").replace("reflink",kY).replace("nolink",jY).getRegex(),tag:s3e,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:mb},c3e={...xL,link:er(/^!?\[(label)\]\((.*?)\)/).replace("label",HS).getRegex(),reflink:er(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",HS).getRegex()},EL={...xL,escape:er(LY).replace("])","~|])").getRegex(),url:er(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},l3e={...EL,br:er(BY).replace("{2,}","*").getRegex(),text:er(EL.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},GS={normal:wL,gfm:qke,pedantic:Xke},vb={normal:xL,gfm:EL,breaks:l3e,pedantic:c3e};class Wl{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||lp,this.options.tokenizer=this.options.tokenizer||new US,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:GS.normal,inline:vb.normal};this.options.pedantic?(n.block=GS.pedantic,n.inline=vb.pedantic):this.options.gfm&&(n.block=GS.gfm,n.inline=this.options.breaks?vb.breaks:vb.gfm),this.tokenizer.rules=n}static get rules(){return{block:GS,inline:vb}}static lex(e,n){return new Wl(n).lex(e)}static lexInline(e,n){return new Wl(n).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[]){let i,r,s,o;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&n.length>0?n[n.length-1].raw+="\n":n.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?n.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=n[n.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){r=n[n.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i),o=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):n.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){let i,r,s,a,c,l,o=e;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(o));)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(o));)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(o));)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>!!(i=u.call({lexer:this},e,n))&&(e=e.substring(i.raw.length),n.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=n[n.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(i=this.tokenizer.emStrong(e,o,l)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),n.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),n.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),n.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=e.slice(1);let f;this.options.extensions.startInline.forEach(g=>{f=g.call({lexer:this},h),"number"==typeof f&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(i=this.tokenizer.inlineText(s)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=n[n.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):n.push(i);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}return n}}class up{options;constructor(e){this.options=e||lp}code(e,n,i){const r=(n||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="language-'+Ya(r)+'">'+(i?e:Ya(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:Ya(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,n){return e}heading(e,n,i){return`<h${n}>${e}</h${n}>\n`}hr(){return"<hr>\n"}list(e,n,i){const r=n?"ol":"ul";return"<"+r+(n&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e,n,i){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,n){return n&&(n=`<tbody>${n}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+n+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,n){const i=n.header?"th":"td";return(n.align?`<${i} align="${n.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,n,i){const r=IY(e);if(null===r)return i;let s='<a href="'+(e=r)+'"';return n&&(s+=' title="'+n+'"'),s+=">"+i+"</a>",s}image(e,n,i){const r=IY(e);if(null===r)return i;let s=`<img src="${e=r}" alt="${i}"`;return n&&(s+=` title="${n}"`),s+=">",s}text(e){return e}}class AL{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,i){return""+i}image(e,n,i){return""+i}br(){return""}}class $l{options;renderer;textRenderer;constructor(e){this.options=e||lp,this.options.renderer=this.options.renderer||new up,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new AL}static parse(e,n){return new $l(n).parse(e)}static parseInline(e,n){return new $l(n).parseInline(e)}parse(e,n=!0){let i="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==a||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){i+=a||"";continue}}switch(s.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":{const o=s;i+=this.renderer.heading(this.parseInline(o.tokens),o.depth,Fke(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":i+=this.renderer.code(s.text,s.lang,!!s.escaped);continue;case"table":{const o=s;let a="",c="";for(let u=0;u<o.header.length;u++)c+=this.renderer.tablecell(this.parseInline(o.header[u].tokens),{header:!0,align:o.align[u]});a+=this.renderer.tablerow(c);let l="";for(let u=0;u<o.rows.length;u++){const h=o.rows[u];c="";for(let f=0;f<h.length;f++)c+=this.renderer.tablecell(this.parseInline(h[f].tokens),{header:!1,align:o.align[f]});l+=this.renderer.tablerow(c)}i+=this.renderer.table(a,l);continue}case"blockquote":{const a=this.parse(s.tokens);i+=this.renderer.blockquote(a);continue}case"list":{const o=s,a=o.ordered,c=o.start,l=o.loose;let u="";for(let h=0;h<o.items.length;h++){const f=o.items[h],g=f.checked,m=f.task;let y="";if(f.task){const b=this.renderer.checkbox(!!g);l?f.tokens.length>0&&"paragraph"===f.tokens[0].type?(f.tokens[0].text=b+" "+f.tokens[0].text,f.tokens[0].tokens&&f.tokens[0].tokens.length>0&&"text"===f.tokens[0].tokens[0].type&&(f.tokens[0].tokens[0].text=b+" "+f.tokens[0].tokens[0].text)):f.tokens.unshift({type:"text",text:b+" "}):y+=b+" "}y+=this.parse(f.tokens,l),u+=this.renderer.listitem(y,m,!!g)}i+=this.renderer.list(u,a,c);continue}case"html":i+=this.renderer.html(s.text,s.block);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(s.tokens));continue;case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<e.length&&"text"===e[r+1].type;)o=e[++r],a+="\n"+(o.tokens?this.parseInline(o.tokens):o.text);i+=n?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}parseInline(e,n){n=n||this.renderer;let i="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==o||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=o||"";continue}}switch(s.type){case"escape":case"text":i+=n.text(s.text);break;case"html":i+=n.html(s.text);break;case"link":i+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break;case"image":i+=n.image(s.href,s.title,s.text);break;case"strong":i+=n.strong(this.parseInline(s.tokens,n));break;case"em":i+=n.em(this.parseInline(s.tokens,n));break;case"codespan":i+=n.codespan(s.text);break;case"br":i+=n.br();break;case"del":i+=n.del(this.parseInline(s.tokens,n));break;default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}}class zS{options;constructor(e){this.options=e||lp}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}const dp=new class u3e{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(Wl.lex,$l.parse);parseInline=this.#e(Wl.lexInline,$l.parseInline);Parser=$l;Renderer=up;TextRenderer=AL;Lexer=Wl;Tokenizer=US;Hooks=zS;constructor(...e){this.use(...e)}walkTokens(e,n){let i=[];for(const r of e)switch(i=i.concat(n.call(this,r)),r.type){case"table":{const s=r;for(const o of s.header)i=i.concat(this.walkTokens(o.tokens,n));for(const o of s.rows)for(const a of o)i=i.concat(this.walkTokens(a.tokens,n));break}case"list":i=i.concat(this.walkTokens(r.items,n));break;default:{const s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{const a=s[o].flat(1/0);i=i.concat(this.walkTokens(a,n))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,n)))}}return i}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=n.renderers[s.name];n.renderers[s.name]=o?function(...a){let c=s.renderer.apply(this,a);return!1===c&&(c=o.apply(this,a)),c}:s.renderer}if("tokenizer"in s){if(!s.level||"block"!==s.level&&"inline"!==s.level)throw new Error("extension level must be 'block' or 'inline'");const o=n[s.level];o?o.unshift(s.tokenizer):n[s.level]=[s.tokenizer],s.start&&("block"===s.level?n.startBlock?n.startBlock.push(s.start):n.startBlock=[s.start]:"inline"===s.level&&(n.startInline?n.startInline.push(s.start):n.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(n.childTokens[s.name]=s.childTokens)}),r.extensions=n),i.renderer){const s=this.defaults.renderer||new up(this.defaults);for(const o in i.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if("options"===o)continue;const c=i.renderer[o],l=s[o];s[o]=(...u)=>{let h=c.apply(s,u);return!1===h&&(h=l.apply(s,u)),h||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new US(this.defaults);for(const o in i.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const c=i.tokenizer[o],l=s[o];s[o]=(...u)=>{let h=c.apply(s,u);return!1===h&&(h=l.apply(s,u)),h}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new zS;for(const o in i.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if("options"===o)continue;const c=i.hooks[o],l=s[o];s[o]=zS.passThroughHooks.has(o)?u=>{if(this.defaults.async)return Promise.resolve(c.call(s,u)).then(f=>l.call(s,f));const h=c.call(s,u);return l.call(s,h)}:(...u)=>{let h=c.apply(s,u);return!1===h&&(h=l.apply(s,u)),h}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,o=i.walkTokens;r.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),s&&(c=c.concat(s.call(this,a))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return Wl.lex(e,n??this.defaults)}parser(e,n){return $l.parse(e,n??this.defaults)}#e(e,n){return(i,r)=>{const s={...r},o={...this.defaults,...s};!0===this.defaults.async&&!1===s.async&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=this.#t(!!o.silent,!!o.async);if(typeof i>"u"||null===i)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>n(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));let c=e(i,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=n(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}#t(e,n){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const r="<p>An error occurred:</p><pre>"+Ya(i.message+"",!0)+"</pre>";return n?Promise.resolve(r):r}if(n)return Promise.reject(i);throw i}}};function Pi(t,e){return dp.parse(t,e)}Pi.options=Pi.setOptions=function(t){return dp.setOptions(t),SY(Pi.defaults=dp.defaults),Pi},Pi.getDefaults=function _L(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Pi.defaults=lp,Pi.use=function(...t){return dp.use(...t),SY(Pi.defaults=dp.defaults),Pi},Pi.walkTokens=function(t,e){return dp.walkTokens(t,e)},Pi.parseInline=dp.parseInline,Pi.Parser=$l,Pi.parser=$l.parse,Pi.Renderer=up,Pi.TextRenderer=AL,Pi.Lexer=Wl,Pi.lexer=Wl.lex,Pi.Tokenizer=US,Pi.Hooks=zS,Pi.parse=Pi;const d3e=["*"];let UY=(()=>{class t{constructor(){this._buttonClick$=new qt,this.copied$=this._buttonClick$.pipe(Ki(()=>jc(sn(!0),AP(3e3).pipe(NP(!1)))),qf(),Qo(1)),this.copiedText$=this.copied$.pipe(Bl(!1),Y(n=>n?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=gi({type:t,selectors:[["markdown-clipboard"]],standalone:!0,features:[Ls],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(Rn(0,"button",0),wu(1,"async"),zi("click",function(){return r.onCopyToClipboardClick()}),Lc(2),wu(3,"async"),Nn()),2&i&&(Er("copied",xu(1,3,r.copied$)),bn(2),Rd(xu(3,5,r.copiedText$)))},dependencies:[h0],encapsulation:2,changeDetection:0})}return t})();const p3e=new St("CLIPBOARD_OPTIONS");var SL=function(t){return t.CommandLine="command-line",t.LineHighlight="line-highlight",t.LineNumbers="line-numbers",t}(SL||{});const VY=new St("MARKED_EXTENSIONS"),m3e=new St("MARKED_OPTIONS"),HY=new St("SECURITY_CONTEXT");let CL=(()=>{class t{get options(){return this._options}set options(n){this._options={...this.DEFAULT_MARKED_OPTIONS,...n}}get renderer(){return this.options.renderer}set renderer(n){this.options.renderer=n}constructor(n,i,r,s,o,a,c){this.clipboardOptions=n,this.extensions=i,this.platform=s,this.securityContext=o,this.http=a,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new up},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new qt,this.reload$=this._reload$.asObservable(),this.options=r}parse(n,i=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:r,inline:s,emoji:o,mermaid:a,disableSanitizer:c}=i,l={...this.options,...i.markedOptions},u=l.renderer||this.renderer||new up;this.extensions&&(this.renderer=this.extendsRendererForExtensions(u)),a&&(this.renderer=this.extendsRendererForMermaid(u));const h=this.trimIndentation(n),f=r?this.decodeHtml(h):h,g=o?this.parseEmoji(f):f,m=this.parseMarked(g,l,s);return(c?m:this.sanitizer.sanitize(this.securityContext,m))||""}render(n,i=this.DEFAULT_RENDER_OPTIONS,r){const{clipboard:s,clipboardOptions:o,katex:a,katexOptions:c,mermaid:l,mermaidOptions:u}=i;s&&this.renderClipboard(n,r,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...o}),a&&this.renderKatex(n,{...this.DEFAULT_KATEX_OPTIONS,...c}),l&&this.renderMermaid(n,{...this.DEFAULT_MERMAID_OPTIONS,...u}),this.highlight(n)}reload(){this._reload$.next()}getSource(n){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(n,{responseType:"text"}).pipe(Y(i=>this.handleExtension(n,i)))}highlight(n){if(!Pd(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;n||(n=document);const i=n.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(n)}decodeHtml(n){if(!Pd(this.platform))return n;const i=document.createElement("textarea");return i.innerHTML=n,i.value}extendsRendererForExtensions(n){const i=n;return!0===i.\u0275NgxMarkdownRendererExtendedForExtensions||(this.extensions?.length>0&&Pi.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),n}extendsRendererForMermaid(n){const i=n;if(!0===i.\u0275NgxMarkdownRendererExtendedForMermaid)return n;const r=n.code;return n.code=function(s,o,a){return"mermaid"===o?`<div class="mermaid">${s}</div>`:r.call(this,s,o,a)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,n}handleExtension(n,i){const r=n.lastIndexOf("://"),s=r>-1?n.substring(r+4):n,o=s.lastIndexOf("/"),a=o>-1?s.substring(o+1).split("?")[0]:"",c=a.lastIndexOf("."),l=c>-1?a.substring(c+1):"";return l&&"md"!==l?"```"+l+"\n"+i+"\n```":i}parseMarked(n,i,r=!1){if(i.renderer){const s={...i.renderer};delete s.\u0275NgxMarkdownRendererExtendedForExtensions,delete s.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,Pi.use({renderer:s})}return r?Pi.parseInline(n,i):Pi.parse(n,i)}parseEmoji(n){if(!Pd(this.platform))return n;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(n)}renderKatex(n,i){if(Pd(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(n,i)}}renderClipboard(n,i,r){if(!Pd(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!i)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:s,buttonTemplate:o}=r,a=n.querySelectorAll("pre");for(let c=0;c<a.length;c++){const l=a.item(c),u=document.createElement("div");u.style.position="relative",l.parentNode.insertBefore(u,l),u.appendChild(l);const h=document.createElement("div");let f,g;h.style.position="absolute",h.style.top=".5em",h.style.right=".5em",h.style.opacity="0",h.style.transition="opacity 250ms ease-out",u.insertAdjacentElement("beforeend",h),l.onmouseover=()=>h.style.opacity="1",l.onmouseout=()=>h.style.opacity="0",f=s?i.createComponent(s).hostView:o?i.createEmbeddedView(o):i.createComponent(UY).hostView,f.rootNodes.forEach(m=>{m.onmouseover=()=>h.style.opacity="1",h.appendChild(m),g=new ClipboardJS(m,{text:()=>l.innerText})}),f.onDestroy(()=>g.destroy())}}renderMermaid(n,i=this.DEFAULT_MERMAID_OPTIONS){if(!Pd(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const r=n.querySelectorAll(".mermaid");0!==r.length&&(mermaid.initialize(i),mermaid.run({nodes:r}))}trimIndentation(n){if(!n)return"";let i;return n.split("\n").map(r=>{let s=i;return r.length>0&&(s=isNaN(s)?r.search(/\S|$/):Math.min(r.search(/\S|$/),s)),isNaN(i)&&(i=s),s?r.substring(s):r}).join("\n")}static#e=this.\u0275fac=function(i){return new(i||t)(lt(p3e,8),lt(VY,8),lt(m3e,8),lt(nc),lt(HY),lt(uh,8),lt(m0))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac})}return t})(),GY=(()=>{class t{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(n){this._disableSanitizer=this.coerceBooleanProperty(n)}get inline(){return this._inline}set inline(n){this._inline=this.coerceBooleanProperty(n)}get clipboard(){return this._clipboard}set clipboard(n){this._clipboard=this.coerceBooleanProperty(n)}get emoji(){return this._emoji}set emoji(n){this._emoji=this.coerceBooleanProperty(n)}get katex(){return this._katex}set katex(n){this._katex=this.coerceBooleanProperty(n)}get mermaid(){return this._mermaid}set mermaid(n){this._mermaid=this.coerceBooleanProperty(n)}get lineHighlight(){return this._lineHighlight}set lineHighlight(n){this._lineHighlight=this.coerceBooleanProperty(n)}get lineNumbers(){return this._lineNumbers}set lineNumbers(n){this._lineNumbers=this.coerceBooleanProperty(n)}get commandLine(){return this._commandLine}set commandLine(n){this._commandLine=this.coerceBooleanProperty(n)}constructor(n,i,r){this.element=n,this.markdownService=i,this.viewContainerRef=r,this.error=new _n,this.load=new _n,this.ready=new _n,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new qt}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe($a(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(n,i=!1){var r=this;return C(function*(){const s={decodeHtml:i,inline:r.inline,emoji:r.emoji,mermaid:r.mermaid,disableSanitizer:r.disableSanitizer},o={clipboard:r.clipboard,clipboardOptions:{buttonComponent:r.clipboardButtonComponent,buttonTemplate:r.clipboardButtonTemplate},katex:r.katex,katexOptions:r.katexOptions,mermaid:r.mermaid,mermaidOptions:r.mermaidOptions},a=yield r.markdownService.parse(n,s);r.element.nativeElement.innerHTML=a,r.handlePlugins(),r.markdownService.render(r.element.nativeElement,o,r.viewContainerRef),r.ready.emit()})()}coerceBooleanProperty(n){return null!=n&&"false"!=`${String(n)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:n=>{this.render(n).then(()=>{this.load.emit(n)})},error:n=>this.error.emit(n)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,SL.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,SL.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(n,i){const r=n.querySelectorAll("pre");for(let s=0;s<r.length;s++){const o=i instanceof Array?i:[i];r.item(s).classList.add(...o)}}setPluginOptions(n,i){const r=n.querySelectorAll("pre");for(let s=0;s<r.length;s++)Object.keys(i).forEach(o=>{const a=i[o];if(a){const c=this.toLispCase(o);r.item(s).setAttribute(c,a.toString())}})}toLispCase(n){const i=n.match(/([A-Z])/g);if(!i)return n;let r=n.toString();for(let s=0,o=i.length;s<o;s++)r=r.replace(new RegExp(i[s]),"-"+i[s].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}static#e=this.\u0275fac=function(i){return new(i||t)(st(ui),st(CL),st(Io))};static#t=this.\u0275cmp=gi({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[Lr,Ls],ngContentSelectors:d3e,decls:1,vars:0,template:function(i,r){1&i&&(ka(),Li(0))},encapsulation:2})}return t})();var zY;function A3e(t,e){if(1&t&&(Rn(0,"div",16),ss(1,"youtube-player",17),Nn()),2&t){const n=$r(3);bn(),CI("videoId",n.videoID)}}function S3e(t,e){if(1&t&&(Rn(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),Lc(3),Nn()(),Rn(4,"div",13),ss(5,"markdown",14),Ri(6,A3e,2,1,"div",15),Nn()()),2&t){const n=$r(),i=n.$implicit,r=n.index;Oi("expanded",0===r),bn(3),Rd(i.title),bn(2),Er("first",0===r),Oi("data",i.content),bn(),Oi("ngIf",0===r)}}function C3e(t,e){if(1&t&&(Rn(0,"div",9),Ri(1,S3e,7,6,"mat-expansion-panel",10),Nn()),2&t){const n=e.$implicit;bn(),Oi("ngIf",n)}}!function(t){let e;var r;let n,i;(r=e=t.SecurityLevel||(t.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(n=t.Theme||(t.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=t.LogLevel||(t.LogLevel={}))}(zY||(zY={}));let M3e=(()=>{class t{constructor(n,i){this.dialogRef=n,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const n=document.createElement("script");n.src="https://www.youtube.com/iframe_api",document.body.appendChild(n)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}static#e=this.\u0275fac=function(i){return new(i||t)(st(PS),st(eY))};static#t=this.\u0275cmp=gi({type:t,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(Rn(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),Lc(5),Nn(),Rn(6,"div",5)(7,"mat-icon",6),zi("click",function(){return r.close()}),Lc(8,"clear"),Nn()()(),Rn(9,"mat-dialog-content",7),Ri(10,C3e,2,1,"div",8),Nn()()()()),2&i&&(bn(5),Rd(r.infoTitle),bn(5),Oi("ngForOf",r.documentationContents))},dependencies:[OE,aD,pL,gL,dY,vY,Ake,Ike,GY],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0})}return t})();class wc{static#e=this.storage=(()=>{let e;try{e=window.localStorage;const n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(n){return n instanceof DOMException&&(22===n.code||1014===n.code||"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name)&&e&&0!==e.length?e:void 0}})();get length(){return wc.storage?.length??0}key(e){return wc.storage?.key(e)??null}getItem(e,n){return wc.storage?.getItem(e)??n??null}setItem(e,n){try{return wc.storage?.setItem(e,n),!0}catch{return!1}}removeItem(e){wc.storage?.removeItem(e)}clear(){wc.storage?.clear()}static#t=this.\u0275fac=function(n){return new(n||wc)};static#n=this.\u0275prov=Pt({token:wc,factory:wc.\u0275fac,providedIn:"root"})}var ML;const WY="callToActionPopupShown";let Qc=class $S{static#e=ML=this;static ctaDatePassed(e,n=Date.now){return+n()>+new Date(e)}constructor(e,n,i,r,s){this.dialog=e,this.ga=n,this.storage=i,this.infoService=r,this.http=s}ngxsOnInit(e){const{expirationDate:n,popupShown:i}=e.getState(),r=this.storage.getItem(WY,`${i}`),s=ML.ctaDatePassed(n);"true"!==r&&!s&&e.dispatch(new zX)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(Y(e=>this.infoService.parseMarkdown(e)))}launchLearnMore(e){this.dialog.open(M3e,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:e,videoID:"UfxMpzatowE"}})}learnMore(e){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(br(n=>this.launchLearnMore(n)))}open(e){this.dialog.open(Xl,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(WY,"true"),e.patchState({popupShown:!0})}close(e){this.dialog.closeAll(),this.ga.event("close","call_to_action")}static#t=this.\u0275fac=function(n){return new(n||$S)(lt(FS),lt(_F),lt(wc),lt(sY),lt(uh))};static#n=this.\u0275prov=Pt({token:$S,factory:$S.\u0275fac})};Un([zN(GX),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",At)],Qc.prototype,"learnMore",null),Un([zN(zX),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",void 0)],Qc.prototype,"open",null),Un([zN(WX),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",void 0)],Qc.prototype,"close",null),Qc=ML=Un([WN({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}}),jt("design:paramtypes",[FS,_F,wc,sY,uh])],Qc);class ql{static title(e){return e.title}static message(e){return e.message}static callToAction(e){return e.callToAction}static imageUrl(e){return e.imageUrl}static expirationDate(e){return e.expirationDate}static popupShown(e){return e.popupShown}}Un([Rm([Qc]),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",String)],ql,"title",null),Un([Rm([Qc]),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",String)],ql,"message",null),Un([Rm([Qc]),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",String)],ql,"callToAction",null),Un([Rm([Qc]),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",String)],ql,"imageUrl",null),Un([Rm([Qc]),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",String)],ql,"expirationDate",null),Un([Rm([Qc]),jt("design:type",Function),jt("design:paramtypes",[Object]),jt("design:returntype",Boolean)],ql,"popupShown",null);let $Y=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275dir=Xt({type:t,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"],standalone:!0})}return t})(),z3e=(()=>{class t{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new _n,this.closeClicked=new _n}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=gi({type:t,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&yf(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"click","text"]],template:function(i,r){1&i&&(Rn(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),Lc(5),Nn(),Rn(6,"mat-icon",5),zi("click",function(){return r.close()}),Lc(7,"clear"),Nn()(),ss(8,"img",6),Rn(9,"mat-dialog-content",7)(10,"div",8),Lc(11),Nn(),Rn(12,"a",9),zi("click",function(){return r.onDialogButtonClick()}),Nn()()()()()),2&i&&(bn(5),Rd(r.infoTitle),bn(3),Oi("src",r.imageUrl,gy),bn(3),Rd(r.message),bn(),Oi("text",r.callToAction))},dependencies:[dY,pL,gL,$Y],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0})}return t})();class Xl{constructor(){this.close=()=>new WX,this.learnMore=()=>new GX}static#e=this.\u0275fac=function(n){return new(n||Xl)};static#t=this.\u0275cmp=gi({type:Xl,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"callToActionClicked","closeClicked","infoTitle","message","callToAction","imageUrl"]],template:function(n,i){if(1&n&&(Rn(0,"ccf-call-to-action",0),wu(1,"async"),wu(2,"async"),wu(3,"async"),wu(4,"async"),zi("callToActionClicked",function(){return i.learnMore()})("closeClicked",function(){return i.close()}),Nn()),2&n){let r,s,o,a;Oi("infoTitle",null!==(r=xu(1,4,i.title$))&&void 0!==r?r:"")("message",null!==(s=xu(2,6,i.message$))&&void 0!==s?s:"")("callToAction",null!==(o=xu(3,8,i.callToAction$))&&void 0!==o?o:"")("imageUrl",null!==(a=xu(4,10,i.imageUrl$))&&void 0!==a?a:"")}},dependencies:[z3e,h0],changeDetection:0})}Un([_1(ql.title),jt("design:type",At)],Xl.prototype,"title$",void 0),Un([_1(ql.message),jt("design:type",At)],Xl.prototype,"message$",void 0),Un([_1(ql.callToAction),jt("design:type",At)],Xl.prototype,"callToAction$",void 0),Un([_1(ql.imageUrl),jt("design:type",At)],Xl.prototype,"imageUrl$",void 0),Un([HX(),jt("design:type",Object)],Xl.prototype,"close",void 0),Un([HX(),jt("design:type",Object)],Xl.prototype,"learnMore",void 0);const W3e={initialConfig:{},parse:{},rename:{}};class $3e{constructor(e,n){this.configState=e,this.storedChanges={},this.options={...W3e,...n}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,n={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,o={...r,...i.snapshot,...n};for(const[a,c]of Object.entries(e))this.processChange(a,c,o);i.setConfig(o)}processChange(e,n,i){const{options:{parse:r,rename:s}}=this,o=s[e]??e,a=n.currentValue,c=r[e]??r[o];if(null==a)delete i[o];else if(c)try{i[o]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a} (${typeof a})`,l.message)}else i[o]=a}}let q3e=(()=>{class t{constructor(n,i,r={}){this.configState=n,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new $3e(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(n){this.configManager.addChanges(n),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}static#e=this.\u0275fac=function(i){!function ac(){throw new Error("invalid")}()};static#t=this.\u0275dir=Xt({type:t,features:[Lr]})}return t})();const bb_dbOptions={ccfOwlUrl:"https://apps.humanatlas.io/hra-api/v1/ccf.owl.n3store.json",ccfContextUrl:"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld",dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@1/assets/sparc/data/rui_locations.jsonld"],hubmapDataService:"search-api",hubmapPortalUrl:"https://portal.hubmapconsortium.org/",hubmapDataUrl:"https://search.api.hubmapconsortium.org/v3/entities/search",hubmapAssetsUrl:"https://assets.hubmapconsortium.org",hubmapToken:localStorage.getItem("HUBMAP_TOKEN")??""},qY=(window,"http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity"),K3e=[173,255,47,229.5];function nje(t,e){return t===e}let ije=(()=>{class t{constructor(n){this.subscriptions=new Bt,this.dataSource=n.getOption("data").pipe(Y(i=>({...BX,dataSources:i})),yi(i=>Object.keys(i).length>0),Y(i=>i),qf(nje),Ki(i=>function tje(t,e){return new At(n=>{const i=t(),r=e(i);return(r?ws(r):Ro).subscribe(n),()=>{i&&i.unsubscribe()}})}(()=>this.createDataSource(),r=>this.connectDataSource(r.source,i))),Qo(1)),this.subscriptions.add(this.dataSource.subscribe())}ngOnDestroy(){this.subscriptions.unsubscribe()}getTissueBlockResults(n){return this.dataSource.pipe(Ki(i=>i.getTissueBlockResults(n)),Si(1))}getAggregateResults(n){return this.dataSource.pipe(Ki(i=>i.getAggregateResults(n)),Si(1))}getOntologyTermOccurences(n){return this.dataSource.pipe(Ki(i=>i.getOntologyTermOccurences(n)),Si(1))}getCellTypeTermOccurences(n){return this.dataSource.pipe(Ki(i=>i.getCellTypeTermOccurences(n)),Si(1))}getOntologyTreeModel(){return this.dataSource.pipe(Ki(n=>n.getOntologyTreeModel()),Si(1))}getCellTypeTreeModel(){return this.dataSource.pipe(Ki(n=>n.getCellTypeTreeModel()),Si(1))}getReferenceOrgans(){return this.dataSource.pipe(Ki(n=>n.getReferenceOrgans()),Si(1))}getScene(n){return this.dataSource.pipe(Ki(i=>i.getScene(n)),Si(1))}getOrganScene(n,i){return this.dataSource.pipe(Ki(r=>r.getReferenceOrganScene(n,i)),Si(1))}createDataSource(){return{source:new RBe,unsubscribe:()=>{}}}connectDataSource(n,i){return C(function*(){(new Date).getTime();return yield n.connect(i,!1),n})()}static#e=this.\u0275fac=function(i){return new(i||t)(lt(Wu))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rje=(()=>{class t{constructor(n,i){this.configState=n,this.source=i,this.data$=this.configState.getOption("data"),this.zoomToID$=this.configState.getOption("zoomToID").pipe(Y(r=>`http://purl.org/ccf/1.5/entity/${r}`)),this.highlightID$=this.configState.getOption("highlightID").pipe(Y(r=>`http://purl.org/ccf/1.5/entity/${r}`)),this.referenceOrgans$=this.source.getReferenceOrgans(),this.scene$=ah([this.data$,this.referenceOrgans$,this.source.dataSource]).pipe(Ki(([r,s,o])=>this.chooseScene(r,s))),this.organs$=this.configState.getOption("data").pipe(Y(r=>this.selectOrgans(r)),Qo(1)),this.filteredOrgans$=ah([this.organs$,this.referenceOrgans$]).pipe(Y(([r,s])=>this.getNeededReferenceOrgans(s,r)),Qo(1)),this.filteredScene$=ah([this.scene$,this.organs$,this.referenceOrgans$]).pipe(Y(([r,s,o])=>this.filterSceneNodes(r,s,o)),function Z3e(t,e){const n=t.pipe(Bl(""));return i=>ah([i,n]).pipe(Y(([r,s])=>r.map(o=>function J3e(t,e,n){return t.entityId!==e?t:{...t,color:n}}(o,s,e))))}(this.highlightID$,K3e),function eje(t){const e=t.pipe(Bl(""));return n=>ah([n,e]).pipe(Y(([i,r])=>i.map(s=>function Q3e(t,e){return t.entityId!==e?t:{...t,zoomToOnLoad:!0}}(s,r))))}(this.zoomToID$),Qo(1))}chooseScene(n,i){const r=n?.map(o=>o[qY]?.placement.target)??[];if(new Set(r).size>1)return this.source.getScene();if(i){const o=i.find(a=>a["@id"]===r[0]);if(o)return this.source.getOrganScene(o.representation_of??"",{ontologyTerms:[o.reference_organ],sex:o.sex})}return sn([])}selectOrgans(n){const r=(n??[]).map(s=>s[qY].placement.target);return new Set(r)}filterSceneNodes(n,i,r){const s=this.getNeededReferenceOrgans(r,i),o=this.getNeededSkins(s),a=new Set([...i,...o]);return n.filter(c=>!c.reference_organ||a.has(c.reference_organ))}getNeededReferenceOrgans(n,i){return n.filter(r=>i.has(r.reference_organ??""))}getNeededSkins(n){if(1===n.length)return[];const i=new Set;return n.forEach(r=>{"Female"===r.sex?i.add("http://purl.org/ccf/latest/ccf.owl#VHFSkin"):"Male"===r.sex&&i.add("http://purl.org/ccf/latest/ccf.owl#VHMSkin")}),[...i]}static#e=this.\u0275fac=function(i){return new(i||t)(lt(Wu),lt(ije))};static#t=this.\u0275prov=Pt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const sje=["bodyUI"],oje=()=>[];let aje=(()=>{class t{constructor(n,i,r){this.configState=n,this.sceneSource=i,this.cdr=r,this.onMouseEnter=new _n,this.onMouseLeave=new _n,this.onClick=new _n,this.data$=this.configState.getOption("data"),this.organs$=this.sceneSource.filteredOrgans$,this.scene$=this.sceneSource.filteredScene$.pipe(br(s=>this.reset()))}reset(){var n=this;return C(function*(){const{bodyUI:i}=n;yield new Promise(o=>{setTimeout(o,200)});const r=yield MW(n.organs$.pipe(Si(1))),s=!!i.scene?.find(o=>o.zoomToOnLoad);if(i.rotation=0,i.rotationX=0,!s)if(r&&1===r.length){const{x_dimension:o,y_dimension:a,z_dimension:c}=r[0];i.bounds={x:1.25*o/1e3,y:1.25*a/1e3,z:1.25*c/1e3},i.target=[o/1e3/2,a/1e3/2,c/1e3/2]}else i.bounds={x:2.2,y:2,z:.4},i.target=[0,0,0];n.cdr.detectChanges()})()}static#e=this.\u0275fac=function(i){return new(i||t)(st(Wu),st(rje),st(to))};static#t=this.\u0275cmp=gi({type:t,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&Do(sje,7),2&i){let s;ar(s=cr())&&(r.bodyUI=s.first)}},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},decls:3,vars:5,consts:[["bodyUI",""],["camera","perspective",1,"body-ui",3,"nodeClick","nodeHoverStart","nodeHoverStop","scene","interactive"]],template:function(i,r){if(1&i){const s=Dd();Rn(0,"ccf-body-ui",1,0),wu(2,"async"),zi("nodeClick",function(a){return Gs(s),ms(r.onClick.emit(a))})("nodeHoverStart",function(a){return Gs(s),ms(r.onMouseEnter.emit(a))})("nodeHoverStop",function(a){return Gs(s),ms(r.onMouseLeave.emit(a))}),Nn()}if(2&i){let s;Oi("scene",null!==(s=xu(2,2,r.scene$))&&void 0!==s?s:function zj(t,e,n){const i=_s()+t,r=It();return r[i]===hn?_l(r,i,n?e.call(n):e()):function Hy(t,e){return t[e]}(r,i)}(4,oje))("interactive",!0)}},dependencies:[nSe,h0],styles:[".body-ui[_ngcontent-%COMP%]{height:100%;width:100%}"],changeDetection:0})}return t})();function cje(t,e){if(1&t){const n=Dd();Rn(0,"ccf-root",1),zi("onMouseEnter",function(r){return Gs(n),ms($r().onMouseEnter.emit(r))})("onMouseLeave",function(r){return Gs(n),ms($r().onMouseLeave.emit(r))})("onClick",function(r){return Gs(n),ms($r().onClick.emit(r))}),Nn()}}function lje(t){return"string"==typeof t&&(t=JSON.parse(t)),t.map(e=>({"@id":`http://purl.org/ccf/1.5/entity/${e.id}`,"@type":"http://purl.org/ccf/latest/ccf-entity.owl#Sample","http://purl.org/ccf/latest/ccf-entity.owl#has_spatial_entity":e.rui_location}))}let uje=(()=>{class t extends q3e{constructor(n,i){super(n,i,{initialDelay:10,initialConfig:{...bb_dbOptions,...globalThis.dbOptions},parse:{data:lje}}),this.onMouseEnter=new _n,this.onMouseLeave=new _n,this.onClick=new _n}static#e=this.\u0275fac=function(i){return new(i||t)(st(Wu),st(to))};static#t=this.\u0275cmp=gi({type:t,selectors:[["ccf-root-wc"]],inputs:{data:"data",highlightID:"highlightID",zoomToID:"zoomToID"},outputs:{onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onClick:"onClick"},features:[di],decls:1,vars:1,consts:[[3,"onMouseEnter","onMouseLeave","onClick",4,"ngIf"],[3,"onMouseEnter","onMouseLeave","onClick"]],template:function(i,r){1&i&&Ri(0,cje,1,0,"ccf-root",0),2&i&&Oi("ngIf",r.initialized)},dependencies:[aD,aje],encapsulation:2,changeDetection:0})}return t})();const WS=(t,e)=>((t,e)=>new Array(e+1).join("0"))(0,e-t.toString().length)+t;class fje{constructor(e,n,i){this.action=e,this.store=n,this.logWriter=i}dispatched(e){const n=Xf(this.action),i=function hje(t){return WS(t.getHours(),2)+":"+WS(t.getMinutes(),2)+":"+WS(t.getSeconds(),2)+"."+WS(t.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${n} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class pje{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const n=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{n.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,n){this.log(e,"color: #9E9E9E; font-weight: bold",n)}logGreen(e,n){this.log(e,"color: #4CAF50; font-weight: bold",n)}logRedish(e,n){this.log(e,"color: #FD8182; font-weight: bold",n)}log(e,n,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,n,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let n=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(n=!0),n}}const XY=new St("NGXS_LOGGER_PLUGIN_OPTIONS");let gje=(()=>{class t{constructor(n,i){this._options=n,this._injector=i}handle(n,i,r){if(this._options.disabled||!this._options.filter(i,n))return r(n,i);this._logWriter=this._logWriter||new pje(this._options),this._store=this._store||this._injector.get(Vu);const s=new fje(i,this._store,this._logWriter);return s.dispatched(n),r(n,i).pipe(br(o=>{s.completed(o)}),zc(o=>{throw s.errored(o),o}))}}return t.\u0275fac=function(n){return new(n||t)(lt(XY),lt(Gi))},t.\u0275prov=Pt({token:t,factory:t.\u0275fac}),t})();const YY=new St("LOGGER_USER_OPTIONS");function mje(t){return Object.assign(Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),t)}let _je=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:s9,useClass:gje,multi:!0},{provide:YY,useValue:n},{provide:XY,useFactory:mje,deps:[YY]}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=sa({type:t}),t.\u0275inj=Ho({}),t})();const yje=[Wu];let vje=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=sa({type:t});static#n=this.\u0275inj=Ho({imports:[bRe.forRoot(),sCe.forRoot(yje,{developmentMode:!1}),_je.forRoot({disabled:true})]})}return t})(),bje=(()=>{class t{constructor(n){this.injector=n}ngDoBootstrap(){const n=function Zoe(t,e){const n=function Woe(t,e){return e.get(Sd).resolveComponentFactory(t).inputs}(t,e.injector),i=e.strategyFactory||new Yoe(t,e.injector),r=function zoe(t){const e={};return t.forEach(({propName:n,templateName:i,transform:r})=>{e[function joe(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[n,r]}),e}(n);class s extends Joe{static#e=this.observedAttributes=Object.keys(r);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);n.forEach(({propName:c,transform:l})=>{if(!this.hasOwnProperty(c))return;const u=this[c];delete this[c],a.setInputValue(c,u,l)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,c,l,u){const[h,f]=r[a];this.ngElementStrategy.setInputValue(h,l,f)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const c=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(c)})}}return n.forEach(({propName:o,transform:a})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(c){this.ngElementStrategy.setInputValue(o,c,a)},configurable:!0,enumerable:!0})}),s}(uje,{injector:this.injector});customElements.define("ccf-body-ui-wc",n)}static#e=this.\u0275fac=function(i){return new(i||t)(lt(Gi))};static#t=this.\u0275mod=sa({type:t});static#n=this.\u0275inj=Ho({imports:[Zse,vje,Qoe]})}return t})();Kse().bootstrapModule(bje).catch(t=>console.error(t))},6576:(Ge,ne,M)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.SaxesParser=ne.EVENTS=void 0;const ee=M(5114),A=M(5940),$=M(4327);var j=ee.isS,W=ee.isChar,x=ee.isNameStartChar,E=ee.isNameChar,N=ee.S_LIST,te=ee.NAME_RE,F=A.isChar,C=$.isNCNameStartChar,oe=$.isNCNameChar,S=$.NC_NAME_RE;const k="http://www.w3.org/XML/1998/namespace",ce="http://www.w3.org/2000/xmlns/",X={__proto__:null,xml:k,xmlns:ce},K={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},J=-1,U=-2,P=33,Ys=T=>34===T||39===T,Uo=[34,39],Vo=[...Uo,91,62],He=[...Uo,60,93],qe=[61,63,...N],Nt=[...N,62,38,60];function At(T,v,H){switch(v){case"xml":H!==k&&T.fail(`xml prefix must be bound to ${k}.`);break;case"xmlns":H!==ce&&T.fail(`xmlns prefix must be bound to ${ce}.`)}switch(H){case ce:T.fail(""===v?`the default namespace may not be set to ${H}.`:`may not assign a prefix (even "xmlns") to the URI ${ce}.`);break;case k:switch(v){case"xml":break;case"":T.fail(`the default namespace may not be set to ${H}.`);break;default:T.fail("may not assign the xml namespace to another prefix.")}}}const Vi=T=>S.test(T),Nr=T=>te.test(T);ne.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const ye={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};ne.SaxesParser=class de{get closed(){return this._closed}constructor(v){this.opt=v??{},this.fragmentOpt=!!this.opt.fragment;const H=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=!1!==this.opt.position,this.fileName=this.opt.fileName,H){this.nameStartCheck=C,this.nameCheck=oe,this.isName=Vi,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},X);const Y=this.opt.additionalNamespaces;null!=Y&&(function en(T,v){for(const H of Object.keys(v))At(T,H,v[H])}(this,Y),Object.assign(this.ns,Y))}else this.nameStartCheck=x,this.nameCheck=E,this.isName=Nr,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var v;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=0,this.attribList=[];const{fragmentOpt:H}=this;this.state=H?13:0,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=H,this.xmlDeclPossible=!H,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:Y}=this.opt;if(void 0===Y){if(!0===this.opt.forceXMLVersion)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");Y="1.0"}this.setXMLVersion(Y),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(K),null===(v=this.readyHandler)||void 0===v||v.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(v,H){this[ye[v]]=H}off(v){this[ye[v]]=void 0}makeError(v){var H;let Y=null!==(H=this.fileName)&&void 0!==H?H:"";return this.trackPosition&&(Y.length>0&&(Y+=":"),Y+=`${this.line}:${this.column}`),Y.length>0&&(Y+=": "),new Error(Y+v)}fail(v){const H=this.makeError(v),Y=this.errorHandler;if(void 0===Y)throw H;return Y(H),this}write(v){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let H=!1;null===v?(H=!0,v=""):"object"==typeof v&&(v=v.toString()),void 0!==this.carriedFromPrevious&&(v=`${this.carriedFromPrevious}${v}`,this.carriedFromPrevious=void 0);let Y=v.length;const De=v.charCodeAt(Y-1);!H&&(13===De||De>=55296&&De<=56319)&&(this.carriedFromPrevious=v[Y-1],Y--,v=v.slice(0,Y));const{stateTable:rt}=this;for(this.chunk=v,this.i=0;this.i<Y;)rt[this.state].call(this);return this.chunkPosition+=Y,H?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:v,i:H}=this;if(this.prevI=H,this.i=H+1,H>=v.length)return J;const Y=v.charCodeAt(H);if(this.column++,Y<55296){if(Y>=32||9===Y)return Y;switch(Y){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:return 10===v.charCodeAt(H+1)&&(this.i=H+2),this.line++,this.column=0,this.positionAtNewLine=this.position,U;default:return this.fail("disallowed character."),Y}}if(Y>56319)return Y>=57344&&Y<=65533||this.fail("disallowed character."),Y;const De=65536+1024*(Y-55296)+(v.charCodeAt(H+1)-56320);return this.i=H+2,De>1114111&&this.fail("disallowed character."),De}getCode11(){const{chunk:v,i:H}=this;if(this.prevI=H,this.i=H+1,H>=v.length)return J;const Y=v.charCodeAt(H);if(this.column++,Y<55296){if(Y>31&&Y<127||Y>159&&8232!==Y||9===Y)return Y;switch(Y){case 10:return this.line++,this.column=0,this.positionAtNewLine=this.position,10;case 13:{const rt=v.charCodeAt(H+1);(10===rt||133===rt)&&(this.i=H+2)}case 133:case 8232:return this.line++,this.column=0,this.positionAtNewLine=this.position,U;default:return this.fail("disallowed character."),Y}}if(Y>56319)return Y>=57344&&Y<=65533||this.fail("disallowed character."),Y;const De=65536+1024*(Y-55296)+(v.charCodeAt(H+1)-56320);return this.i=H+2,De>1114111&&this.fail("disallowed character."),De}getCodeNorm(){const v=this.getCode();return v===U?10:v}unget(){this.i=this.prevI,this.column--}captureTo(v){let{i:H}=this;const{chunk:Y}=this;for(;;){const De=this.getCode(),rt=De===U,$e=rt?10:De;if($e===J||v.includes($e))return this.text+=Y.slice(H,this.prevI),$e;rt&&(this.text+=`${Y.slice(H,this.prevI)}\n`,H=this.i)}}captureToChar(v){let{i:H}=this;const{chunk:Y}=this;for(;;){let De=this.getCode();switch(De){case U:this.text+=`${Y.slice(H,this.prevI)}\n`,H=this.i,De=10;break;case J:return this.text+=Y.slice(H),!1}if(De===v)return this.text+=Y.slice(H,this.prevI),!0}}captureNameChars(){const{chunk:v,i:H}=this;for(;;){const Y=this.getCode();if(Y===J)return this.name+=v.slice(H),J;if(!E(Y))return this.name+=v.slice(H,this.prevI),Y===U?10:Y}}skipSpaces(){for(;;){const v=this.getCodeNorm();if(v===J||!j(v))return v}}setXMLVersion(v){this.currentXMLVersion=v,"1.0"===v?(this.isChar=W,this.getCode=this.getCode10):(this.isChar=F,this.getCode=this.getCode11)}sBegin(){65279===this.chunk.charCodeAt(0)&&(this.i++,this.column++),this.state=1}sBeginWhitespace(){const v=this.i,H=this.skipSpaces();switch(this.prevI!==v&&(this.xmlDeclPossible=!1),H){case 60:if(this.state=15,0!==this.text.length)throw new Error("no-empty text at start");break;case J:break;default:this.unget(),this.state=13,this.xmlDeclPossible=!1}}sDoctype(){var v;const H=this.captureTo(Vo);switch(H){case 62:null===(v=this.doctypeHandler)||void 0===v||v.call(this,this.text),this.text="",this.state=13,this.doctype=!0;break;case J:break;default:this.text+=String.fromCodePoint(H),91===H?this.state=4:Ys(H)&&(this.state=3,this.q=H)}}sDoctypeQuote(){const v=this.q;this.captureToChar(v)&&(this.text+=String.fromCodePoint(v),this.q=null,this.state=2)}sDTD(){const v=this.captureTo(He);v!==J&&(this.text+=String.fromCodePoint(v),93===v?this.state=2:60===v?this.state=6:Ys(v)&&(this.state=5,this.q=v))}sDTDQuoted(){const v=this.q;this.captureToChar(v)&&(this.text+=String.fromCodePoint(v),this.state=4,this.q=null)}sDTDOpenWaka(){const v=this.getCodeNorm();switch(this.text+=String.fromCodePoint(v),v){case 33:this.state=7,this.openWakaBang="";break;case 63:this.state=11;break;default:this.state=4}}sDTDOpenWakaBang(){const v=String.fromCodePoint(this.getCodeNorm()),H=this.openWakaBang+=v;this.text+=v,"-"!==H&&(this.state="--"===H?8:4,this.openWakaBang="")}sDTDComment(){this.captureToChar(45)&&(this.text+="-",this.state=9)}sDTDCommentEnding(){const v=this.getCodeNorm();this.text+=String.fromCodePoint(v),this.state=45===v?10:8}sDTDCommentEnded(){const v=this.getCodeNorm();this.text+=String.fromCodePoint(v),62===v?this.state=4:(this.fail("malformed comment."),this.state=8)}sDTDPI(){this.captureToChar(63)&&(this.text+="?",this.state=12)}sDTDPIEnding(){const v=this.getCodeNorm();this.text+=String.fromCodePoint(v),62===v&&(this.state=4)}sText(){0!==this.tags.length?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:v}=this;const{chunk:H}=this;e:for(;;)switch(this.getCode()){case U:this.entity+=`${H.slice(v,this.prevI)}\n`,v=this.i;break;case 59:{const{entityReturnState:Y}=this,De=this.entity+H.slice(v,this.prevI);let rt;this.state=Y,""===De?(this.fail("empty entity name."),rt="&;"):(rt=this.parseEntity(De),this.entity=""),(13!==Y||void 0!==this.textHandler)&&(this.text+=rt);break e}case J:this.entity+=H.slice(v);break e}}sOpenWaka(){const v=this.getCode();if(x(v))this.state=34,this.unget(),this.xmlDeclPossible=!1;else switch(v){case 47:this.state=43,this.xmlDeclPossible=!1;break;case 33:this.state=16,this.openWakaBang="",this.xmlDeclPossible=!1;break;case 63:this.state=23;break;default:this.fail("disallowed character in tag name"),this.state=13,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=20,this.openWakaBang="";break;case"--":this.state=17,this.openWakaBang="";break;case"DOCTYPE":this.state=2,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(45)&&(this.state=18)}sCommentEnding(){var v;const H=this.getCodeNorm();45===H?(this.state=19,null===(v=this.commentHandler)||void 0===v||v.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(H)}`,this.state=17)}sCommentEnded(){const v=this.getCodeNorm();62!==v?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(v)}`,this.state=17):this.state=13}sCData(){this.captureToChar(93)&&(this.state=21)}sCDataEnding(){const v=this.getCodeNorm();93===v?this.state=22:(this.text+=`]${String.fromCodePoint(v)}`,this.state=20)}sCDataEnding2(){var v;const H=this.getCodeNorm();switch(H){case 62:null===(v=this.cdataHandler)||void 0===v||v.call(this,this.text),this.text="",this.state=13;break;case 93:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(H)}`,this.state=20}}sPIFirstChar(){const v=this.getCodeNorm();this.nameStartCheck(v)?(this.piTarget+=String.fromCodePoint(v),this.state=24):63===v||j(v)?(this.fail("processing instruction without a target."),this.state=63===v?26:25):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(v),this.state=24)}sPIRest(){const{chunk:v,i:H}=this;for(;;){const Y=this.getCodeNorm();if(Y===J)return void(this.piTarget+=v.slice(H));if(!this.nameCheck(Y)){this.piTarget+=v.slice(H,this.prevI);const De=63===Y;De||j(Y)?"xml"===this.piTarget?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=De?P:27):this.state=De?26:25:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(Y));break}}}sPIBody(){if(0===this.text.length){const v=this.getCodeNorm();63===v?this.state=26:j(v)||(this.text=String.fromCodePoint(v))}else this.captureToChar(63)&&(this.state=26)}sPIEnding(){var v;const H=this.getCodeNorm();if(62===H){const{piTarget:Y}=this;"xml"===Y.toLowerCase()&&this.fail("the XML declaration must appear at the start of the document."),null===(v=this.piHandler)||void 0===v||v.call(this,{target:Y,body:this.text}),this.piTarget=this.text="",this.state=13}else 63===H?this.text+="?":(this.text+=`?${String.fromCodePoint(H)}`,this.state=25);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const v=this.skipSpaces();63!==v?v!==J&&(this.state=28,this.name=String.fromCodePoint(v)):this.state=P}sXMLDeclName(){const v=this.captureTo(qe);if(63===v)return this.state=P,this.name+=this.text,this.text="",void this.fail("XML declaration is incomplete.");if(j(v)||61===v){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=61===v?30:29}}sXMLDeclEq(){const v=this.getCodeNorm();if(63===v)return this.state=P,void this.fail("XML declaration is incomplete.");j(v)||(61!==v&&this.fail("value required."),this.state=30)}sXMLDeclValueStart(){const v=this.getCodeNorm();if(63===v)return this.state=P,void this.fail("XML declaration is incomplete.");j(v)||(Ys(v)?this.q=v:(this.fail("value must be quoted."),this.q=32),this.state=31)}sXMLDeclValue(){const v=this.captureTo([this.q,63]);if(63===v)return this.state=P,this.text="",void this.fail("XML declaration is incomplete.");if(v===J)return;const H=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const Y=H;this.xmlDecl.version=Y,/^1\.[0-9]+$/.test(Y)?this.opt.forceXMLVersion||this.setXMLVersion(Y):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(H)||this.fail("encoding value must match /^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=H;break;case"standalone":"yes"!==H&&"no"!==H&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=H}this.name="",this.state=32}sXMLDeclSeparator(){const v=this.getCodeNorm();63!==v?(j(v)||(this.fail("whitespace required."),this.unget()),this.state=27):this.state=P}sXMLDeclEnding(){var v;62===this.getCodeNorm()?("xml"!==this.piTarget?this.fail("processing instructions are not allowed before root."):"version"!==this.name&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),null===(v=this.xmldeclHandler)||void 0===v||v.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=13):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var v;const H=this.captureNameChars();if(H===J)return;const Y=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=Y.ns=Object.create(null)),null===(v=this.openTagStartHandler)||void 0===v||v.call(this,Y),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),H){case 62:this.openTag();break;case 47:this.state=35;break;default:j(H)||this.fail("disallowed character in tag name."),this.state=36}}sOpenTagSlash(){62===this.getCode()?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=36)}sAttrib(){const v=this.skipSpaces();v!==J&&(x(v)?(this.unget(),this.state=37):62===v?this.openTag():47===v?this.state=35:this.fail("disallowed character in attribute name."))}sAttribName(){const v=this.captureNameChars();61===v?this.state=39:j(v)?this.state=38:62===v?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):v!==J&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const v=this.skipSpaces();switch(v){case J:return;case 61:this.state=39;break;default:this.fail("attribute without value."),this.text="",this.name="",62===v?this.openTag():x(v)?(this.unget(),this.state=37):(this.fail("disallowed character in attribute name."),this.state=36)}}sAttribValue(){const v=this.getCodeNorm();Ys(v)?(this.q=v,this.state=40):j(v)||(this.fail("unquoted attribute value."),this.state=42,this.unget())}sAttribValueQuoted(){const{q:v,chunk:H}=this;let{i:Y}=this;for(;;)switch(this.getCode()){case v:return this.pushAttrib(this.name,this.text+H.slice(Y,this.prevI)),this.name=this.text="",this.q=null,void(this.state=41);case 38:return this.text+=H.slice(Y,this.prevI),this.state=14,void(this.entityReturnState=40);case 10:case U:case 9:this.text+=`${H.slice(Y,this.prevI)} `,Y=this.i;break;case 60:return this.text+=H.slice(Y,this.prevI),void this.fail("disallowed character.");case J:return void(this.text+=H.slice(Y))}}sAttribValueClosed(){const v=this.getCodeNorm();j(v)?this.state=36:62===v?this.openTag():47===v?this.state=35:x(v)?(this.fail("no whitespace between attributes."),this.unget(),this.state=37):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const v=this.captureTo(Nt);switch(v){case 38:this.state=14,this.entityReturnState=42;break;case 60:this.fail("disallowed character.");break;case J:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",62===v?this.openTag():this.state=36}}sCloseTag(){const v=this.captureNameChars();62===v?this.closeTag():j(v)?this.state=44:v!==J&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case 62:this.closeTag();break;case J:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:v,forbiddenState:H}=this;const{chunk:Y,textHandler:De}=this;e:for(;;)switch(this.getCode()){case 60:if(this.state=15,void 0!==De){const{text:rt}=this,$e=Y.slice(v,this.prevI);0!==rt.length?(De(rt+$e),this.text=""):0!==$e.length&&De($e)}H=0;break e;case 38:this.state=14,this.entityReturnState=13,void 0!==De&&(this.text+=Y.slice(v,this.prevI)),H=0;break e;case 93:switch(H){case 0:H=1;break;case 1:H=2;break;case 2:break;default:throw new Error("impossible state")}break;case 62:2===H&&this.fail('the string "]]>" is disallowed in char data.'),H=0;break;case U:void 0!==De&&(this.text+=`${Y.slice(v,this.prevI)}\n`),v=this.i,H=0;break;case J:void 0!==De&&(this.text+=Y.slice(v));break e;default:H=0}this.forbiddenState=H}handleTextOutsideRoot(){let{i:v}=this;const{chunk:H,textHandler:Y}=this;let De=!1;e:for(;;){const rt=this.getCode();switch(rt){case 60:if(this.state=15,void 0!==Y){const{text:$e}=this,Mt=H.slice(v,this.prevI);0!==$e.length?(Y($e+Mt),this.text=""):0!==Mt.length&&Y(Mt)}break e;case 38:this.state=14,this.entityReturnState=13,void 0!==Y&&(this.text+=H.slice(v,this.prevI)),De=!0;break e;case U:void 0!==Y&&(this.text+=`${H.slice(v,this.prevI)}\n`),v=this.i;break;case J:void 0!==Y&&(this.text+=H.slice(v));break e;default:j(rt)||(De=!0)}}De&&(!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(v,H){var Y;const{prefix:De,local:rt}=this.qname(v),$e={name:v,prefix:De,local:rt,value:H};if(this.attribList.push($e),null===(Y=this.attributeHandler)||void 0===Y||Y.call(this,$e),"xmlns"===De){const Mt=H.trim();"1.0"===this.currentXMLVersion&&""===Mt&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[rt]=Mt,At(this,rt,Mt)}else if("xmlns"===v){const Mt=H.trim();this.topNS[""]=Mt,At(this,"",Mt)}}pushAttribPlain(v,H){var Y;const De={name:v,value:H};this.attribList.push(De),null===(Y=this.attributeHandler)||void 0===Y||Y.call(this,De)}end(){var v,H;this.sawRoot||this.fail("document must contain a root element.");const{tags:Y}=this;for(;Y.length>0;){const rt=Y.pop();this.fail(`unclosed tag: ${rt.name}`)}0!==this.state&&13!==this.state&&this.fail("unexpected end.");const{text:De}=this;return 0!==De.length&&(null===(v=this.textHandler)||void 0===v||v.call(this,De),this.text=""),this._closed=!0,null===(H=this.endHandler)||void 0===H||H.call(this),this._init(),this}resolve(v){var H,Y;let De=this.topNS[v];if(void 0!==De)return De;const{tags:rt}=this;for(let $e=rt.length-1;$e>=0;$e--)if(De=rt[$e].ns[v],void 0!==De)return De;return De=this.ns[v],void 0!==De?De:null===(Y=(H=this.opt).resolvePrefix)||void 0===Y?void 0:Y.call(H,v)}qname(v){const H=v.indexOf(":");if(-1===H)return{prefix:"",local:v};const Y=v.slice(H+1),De=v.slice(0,H);return(""===De||""===Y||Y.includes(":"))&&this.fail(`malformed name: ${v}.`),{prefix:De,local:Y}}processAttribsNS(){var v;const{attribList:H}=this,Y=this.tag;{const{prefix:$e,local:Mt}=this.qname(Y.name);Y.prefix=$e,Y.local=Mt;const Ct=Y.uri=null!==(v=this.resolve($e))&&void 0!==v?v:"";""!==$e&&("xmlns"===$e&&this.fail('tags may not have "xmlns" as prefix.'),""===Ct&&(this.fail(`unbound namespace prefix: ${JSON.stringify($e)}.`),Y.uri=$e))}if(0===H.length)return;const{attributes:De}=Y,rt=new Set;for(const $e of H){const{name:Mt,prefix:Ct,local:Wt}=$e;let Ht,on;""===Ct?(Ht="xmlns"===Mt?ce:"",on=Mt):(Ht=this.resolve(Ct),void 0===Ht&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Ct)}.`),Ht=Ct),on=`{${Ht}}${Wt}`),rt.has(on)&&this.fail(`duplicate attribute: ${on}.`),rt.add(on),$e.uri=Ht,De[Mt]=$e}this.attribList=[]}processAttribsPlain(){const{attribList:v}=this,H=this.tag.attributes;for(const{name:Y,value:De}of v)void 0!==H[Y]&&this.fail(`duplicate attribute: ${Y}.`),H[Y]=De;this.attribList=[]}openTag(){var v;this.processAttribs();const{tags:H}=this,Y=this.tag;Y.isSelfClosing=!1,null===(v=this.openTagHandler)||void 0===v||v.call(this,Y),H.push(Y),this.state=13,this.name=""}openSelfClosingTag(){var v,H,Y;this.processAttribs();const{tags:De}=this,rt=this.tag;rt.isSelfClosing=!0,null===(v=this.openTagHandler)||void 0===v||v.call(this,rt),null===(H=this.closeTagHandler)||void 0===H||H.call(this,rt),null===(this.tag=null!==(Y=De[De.length-1])&&void 0!==Y?Y:null)&&(this.closedRoot=!0),this.state=13,this.name=""}closeTag(){const{tags:v,name:H}=this;if(this.state=13,this.name="",""===H)return this.fail("weird empty close tag."),void(this.text+="</>");const Y=this.closeTagHandler;let De=v.length;for(;De-- >0;){const rt=this.tag=v.pop();if(this.topNS=rt.ns,Y?.(rt),rt.name===H)break;this.fail("unexpected close tag.")}0===De?this.closedRoot=!0:De<0&&(this.fail(`unmatched closing tag: ${H}.`),this.text+=`</${H}>`)}parseEntity(v){if("#"!==v[0]){const Y=this.ENTITIES[v];return void 0!==Y?Y:(this.fail(this.isName(v)?"undefined entity.":"disallowed character in entity name."),`&${v};`)}let H=NaN;return"x"===v[1]&&/^#x[0-9a-f]+$/i.test(v)?H=parseInt(v.slice(2),16):/^#[0-9]+$/.test(v)&&(H=parseInt(v.slice(1),10)),this.isChar(H)?String.fromCodePoint(H):(this.fail("malformed character entity."),`&${v};`)}}},2683:Ge=>{Ge.exports=function(M,ee){var A=ee.length;if(0!==A){var $=M.length;M.length+=A;for(var j=0;j<A;j++)M[$+j]=ee[j]}}},9465:Ge=>{"use strict";const{AbortController:ne,AbortSignal:M}=typeof self<"u"?self:typeof window<"u"?window:void 0;Ge.exports=ne,Ge.exports.AbortSignal=M,Ge.exports.default=ne},3981:(Ge,ne)=>{"use strict";ne.byteLength=function E(S){var k=x(S),X=k[1];return 3*(k[0]+X)/4-X},ne.toByteArray=function te(S){var k,w,ce=x(S),X=ce[0],K=ce[1],J=new A(function N(S,k,ce){return 3*(k+ce)/4-ce}(0,X,K)),U=0,G=K>0?X-4:X;for(w=0;w<G;w+=4)k=ee[S.charCodeAt(w)]<<18|ee[S.charCodeAt(w+1)]<<12|ee[S.charCodeAt(w+2)]<<6|ee[S.charCodeAt(w+3)],J[U++]=k>>16&255,J[U++]=k>>8&255,J[U++]=255&k;return 2===K&&(k=ee[S.charCodeAt(w)]<<2|ee[S.charCodeAt(w+1)]>>4,J[U++]=255&k),1===K&&(k=ee[S.charCodeAt(w)]<<10|ee[S.charCodeAt(w+1)]<<4|ee[S.charCodeAt(w+2)]>>2,J[U++]=k>>8&255,J[U++]=255&k),J},ne.fromByteArray=function oe(S){for(var k,ce=S.length,X=ce%3,K=[],J=16383,U=0,G=ce-X;U<G;U+=J)K.push(C(S,U,U+J>G?G:U+J));return 1===X?K.push(M[(k=S[ce-1])>>2]+M[k<<4&63]+"=="):2===X&&K.push(M[(k=(S[ce-2]<<8)+S[ce-1])>>10]+M[k>>4&63]+M[k<<2&63]+"="),K.join("")};for(var M=[],ee=[],A=typeof Uint8Array<"u"?Uint8Array:Array,$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",j=0;j<64;++j)M[j]=$[j],ee[$.charCodeAt(j)]=j;function x(S){var k=S.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var ce=S.indexOf("=");return-1===ce&&(ce=k),[ce,ce===k?0:4-ce%4]}function F(S){return M[S>>18&63]+M[S>>12&63]+M[S>>6&63]+M[63&S]}function C(S,k,ce){for(var K=[],J=k;J<ce;J+=3)K.push(F((S[J]<<16&16711680)+(S[J+1]<<8&65280)+(255&S[J+2])));return K.join("")}ee[45]=62,ee[95]=63},6887:(Ge,ne)=>{"use strict";var ee=function($){return $.typeOfFunction="function",$.boolTrue=!0,$}(ee||{});ne.oI=function A($,j,W){if(!W||typeof W.value!==ee.typeOfFunction)throw new TypeError("Only methods can be decorated with @bind. <"+j+"> is not a method!");return{configurable:ee.boolTrue,get:function(){var x=W.value.bind(this);return Object.defineProperty(this,j,{value:x,configurable:ee.boolTrue,writable:ee.boolTrue}),x}}}},3838:(Ge,ne,M)=>{"use strict";var ee=M(3981),A=M(2020);ne.Buffer=x,ne.SlowBuffer=function X(Z){return+Z!=Z&&(Z=0),x.alloc(+Z)},ne.INSPECT_MAX_BYTES=50;var $=2147483647;function W(Z){if(Z>$)throw new RangeError('The value "'+Z+'" is invalid for option "size"');var O=new Uint8Array(Z);return O.__proto__=x.prototype,O}function x(Z,O,P){if("number"==typeof Z){if("string"==typeof O)throw new TypeError('The "string" argument must be of type string. Received type number');return F(Z)}return E(Z,O,P)}function E(Z,O,P){if("string"==typeof Z)return function C(Z,O){if(("string"!=typeof O||""===O)&&(O="utf8"),!x.isEncoding(O))throw new TypeError("Unknown encoding: "+O);var P=0|K(Z,O),_e=W(P),ze=_e.write(Z,O);return ze!==P&&(_e=_e.slice(0,ze)),_e}(Z,O);if(ArrayBuffer.isView(Z))return oe(Z);if(null==Z)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Z);if(ut(Z,ArrayBuffer)||Z&&ut(Z.buffer,ArrayBuffer))return function S(Z,O,P){if(O<0||Z.byteLength<O)throw new RangeError('"offset" is outside of buffer bounds');if(Z.byteLength<O+(P||0))throw new RangeError('"length" is outside of buffer bounds');var _e;return(_e=void 0===O&&void 0===P?new Uint8Array(Z):void 0===P?new Uint8Array(Z,O):new Uint8Array(Z,O,P)).__proto__=x.prototype,_e}(Z,O,P);if("number"==typeof Z)throw new TypeError('The "value" argument must not be of type number. Received type number');var _e=Z.valueOf&&Z.valueOf();if(null!=_e&&_e!==Z)return x.from(_e,O,P);var ze=function k(Z){if(x.isBuffer(Z)){var O=0|ce(Z.length),P=W(O);return 0===P.length||Z.copy(P,0,0,O),P}return void 0!==Z.length?"number"!=typeof Z.length||Le(Z.length)?W(0):oe(Z):"Buffer"===Z.type&&Array.isArray(Z.data)?oe(Z.data):void 0}(Z);if(ze)return ze;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof Z[Symbol.toPrimitive])return x.from(Z[Symbol.toPrimitive]("string"),O,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Z)}function N(Z){if("number"!=typeof Z)throw new TypeError('"size" argument must be of type number');if(Z<0)throw new RangeError('The value "'+Z+'" is invalid for option "size"')}function F(Z){return N(Z),W(Z<0?0:0|ce(Z))}function oe(Z){for(var O=Z.length<0?0:0|ce(Z.length),P=W(O),_e=0;_e<O;_e+=1)P[_e]=255&Z[_e];return P}function ce(Z){if(Z>=$)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$.toString(16)+" bytes");return 0|Z}function K(Z,O){if(x.isBuffer(Z))return Z.length;if(ArrayBuffer.isView(Z)||ut(Z,ArrayBuffer))return Z.byteLength;if("string"!=typeof Z)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Z);var P=Z.length,_e=arguments.length>2&&!0===arguments[2];if(!_e&&0===P)return 0;for(var ze=!1;;)switch(O){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":return Ae(Z).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*P;case"hex":return P>>>1;case"base64":return Je(Z).length;default:if(ze)return _e?-1:Ae(Z).length;O=(""+O).toLowerCase(),ze=!0}}function J(Z,O,P){var _e=!1;if((void 0===O||O<0)&&(O=0),O>this.length||((void 0===P||P>this.length)&&(P=this.length),P<=0)||(P>>>=0)<=(O>>>=0))return"";for(Z||(Z="utf8");;)switch(Z){case"hex":return Be(this,O,P);case"utf8":case"utf-8":return Oe(this,O,P);case"ascii":return Qe(this,O,P);case"latin1":case"binary":return xe(this,O,P);case"base64":return we(this,O,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,O,P);default:if(_e)throw new TypeError("Unknown encoding: "+Z);Z=(Z+"").toLowerCase(),_e=!0}}function U(Z,O,P){var _e=Z[O];Z[O]=Z[P],Z[P]=_e}function G(Z,O,P,_e,ze){if(0===Z.length)return-1;if("string"==typeof P?(_e=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),Le(P=+P)&&(P=ze?0:Z.length-1),P<0&&(P=Z.length+P),P>=Z.length){if(ze)return-1;P=Z.length-1}else if(P<0){if(!ze)return-1;P=0}if("string"==typeof O&&(O=x.from(O,_e)),x.isBuffer(O))return 0===O.length?-1:w(Z,O,P,_e,ze);if("number"==typeof O)return O&=255,"function"==typeof Uint8Array.prototype.indexOf?ze?Uint8Array.prototype.indexOf.call(Z,O,P):Uint8Array.prototype.lastIndexOf.call(Z,O,P):w(Z,[O],P,_e,ze);throw new TypeError("val must be string, number or Buffer")}function w(Z,O,P,_e,ze){var Ot,ve=1,Ve=Z.length,Ke=O.length;if(void 0!==_e&&("ucs2"===(_e=String(_e).toLowerCase())||"ucs-2"===_e||"utf16le"===_e||"utf-16le"===_e)){if(Z.length<2||O.length<2)return-1;ve=2,Ve/=2,Ke/=2,P/=2}function vt(B,z){return 1===ve?B[z]:B.readUInt16BE(z*ve)}if(ze){var Et=-1;for(Ot=P;Ot<Ve;Ot++)if(vt(Z,Ot)===vt(O,-1===Et?0:Ot-Et)){if(-1===Et&&(Et=Ot),Ot-Et+1===Ke)return Et*ve}else-1!==Et&&(Ot-=Ot-Et),Et=-1}else for(P+Ke>Ve&&(P=Ve-Ke),Ot=P;Ot>=0;Ot--){for(var Bt=!0,he=0;he<Ke;he++)if(vt(Z,Ot+he)!==vt(O,he)){Bt=!1;break}if(Bt)return Ot}return-1}function I(Z,O,P,_e){P=Number(P)||0;var ze=Z.length-P;_e?(_e=Number(_e))>ze&&(_e=ze):_e=ze;var ve=O.length;_e>ve/2&&(_e=ve/2);for(var Ve=0;Ve<_e;++Ve){var Ke=parseInt(O.substr(2*Ve,2),16);if(Le(Ke))return Ve;Z[P+Ve]=Ke}return Ve}function D(Z,O,P,_e){return ot(Ae(O,Z.length-P),Z,P,_e)}function ue(Z,O,P,_e){return ot(function Fe(Z){for(var O=[],P=0;P<Z.length;++P)O.push(255&Z.charCodeAt(P));return O}(O),Z,P,_e)}function re(Z,O,P,_e){return ue(Z,O,P,_e)}function Ce(Z,O,P,_e){return ot(Je(O),Z,P,_e)}function ae(Z,O,P,_e){return ot(function Te(Z,O){for(var P,_e,ve=[],Ve=0;Ve<Z.length&&!((O-=2)<0);++Ve)_e=(P=Z.charCodeAt(Ve))>>8,ve.push(P%256),ve.push(_e);return ve}(O,Z.length-P),Z,P,_e)}function we(Z,O,P){return ee.fromByteArray(0===O&&P===Z.length?Z:Z.slice(O,P))}function Oe(Z,O,P){P=Math.min(Z.length,P);for(var _e=[],ze=O;ze<P;){var vt,Ot,Et,Bt,ve=Z[ze],Ve=null,Ke=ve>239?4:ve>223?3:ve>191?2:1;if(ze+Ke<=P)switch(Ke){case 1:ve<128&&(Ve=ve);break;case 2:128==(192&(vt=Z[ze+1]))&&(Bt=(31&ve)<<6|63&vt)>127&&(Ve=Bt);break;case 3:Ot=Z[ze+2],128==(192&(vt=Z[ze+1]))&&128==(192&Ot)&&(Bt=(15&ve)<<12|(63&vt)<<6|63&Ot)>2047&&(Bt<55296||Bt>57343)&&(Ve=Bt);break;case 4:Ot=Z[ze+2],Et=Z[ze+3],128==(192&(vt=Z[ze+1]))&&128==(192&Ot)&&128==(192&Et)&&(Bt=(15&ve)<<18|(63&vt)<<12|(63&Ot)<<6|63&Et)>65535&&Bt<1114112&&(Ve=Bt)}null===Ve?(Ve=65533,Ke=1):Ve>65535&&(_e.push((Ve-=65536)>>>10&1023|55296),Ve=56320|1023&Ve),_e.push(Ve),ze+=Ke}return function Ye(Z){var O=Z.length;if(O<=ke)return String.fromCharCode.apply(String,Z);for(var P="",_e=0;_e<O;)P+=String.fromCharCode.apply(String,Z.slice(_e,_e+=ke));return P}(_e)}ne.kMaxLength=$,!(x.TYPED_ARRAY_SUPPORT=function j(){try{var Z=new Uint8Array(1);return Z.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===Z.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(x.prototype,"parent",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.buffer}}),Object.defineProperty(x.prototype,"offset",{enumerable:!0,get:function(){if(x.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&null!=Symbol.species&&x[Symbol.species]===x&&Object.defineProperty(x,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),x.poolSize=8192,x.from=function(Z,O,P){return E(Z,O,P)},x.prototype.__proto__=Uint8Array.prototype,x.__proto__=Uint8Array,x.alloc=function(Z,O,P){return function te(Z,O,P){return N(Z),Z<=0?W(Z):void 0!==O?"string"==typeof P?W(Z).fill(O,P):W(Z).fill(O):W(Z)}(Z,O,P)},x.allocUnsafe=function(Z){return F(Z)},x.allocUnsafeSlow=function(Z){return F(Z)},x.isBuffer=function(O){return null!=O&&!0===O._isBuffer&&O!==x.prototype},x.compare=function(O,P){if(ut(O,Uint8Array)&&(O=x.from(O,O.offset,O.byteLength)),ut(P,Uint8Array)&&(P=x.from(P,P.offset,P.byteLength)),!x.isBuffer(O)||!x.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(O===P)return 0;for(var _e=O.length,ze=P.length,ve=0,Ve=Math.min(_e,ze);ve<Ve;++ve)if(O[ve]!==P[ve]){_e=O[ve],ze=P[ve];break}return _e<ze?-1:ze<_e?1:0},x.isEncoding=function(O){switch(String(O).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.concat=function(O,P){if(!Array.isArray(O))throw new TypeError('"list" argument must be an Array of Buffers');if(0===O.length)return x.alloc(0);var _e;if(void 0===P)for(P=0,_e=0;_e<O.length;++_e)P+=O[_e].length;var ze=x.allocUnsafe(P),ve=0;for(_e=0;_e<O.length;++_e){var Ve=O[_e];if(ut(Ve,Uint8Array)&&(Ve=x.from(Ve)),!x.isBuffer(Ve))throw new TypeError('"list" argument must be an Array of Buffers');Ve.copy(ze,ve),ve+=Ve.length}return ze},x.byteLength=K,x.prototype._isBuffer=!0,x.prototype.swap16=function(){var O=this.length;if(O%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var P=0;P<O;P+=2)U(this,P,P+1);return this},x.prototype.swap32=function(){var O=this.length;if(O%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var P=0;P<O;P+=4)U(this,P,P+3),U(this,P+1,P+2);return this},x.prototype.swap64=function(){var O=this.length;if(O%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var P=0;P<O;P+=8)U(this,P,P+7),U(this,P+1,P+6),U(this,P+2,P+5),U(this,P+3,P+4);return this},x.prototype.toLocaleString=x.prototype.toString=function(){var O=this.length;return 0===O?"":0===arguments.length?Oe(this,0,O):J.apply(this,arguments)},x.prototype.equals=function(O){if(!x.isBuffer(O))throw new TypeError("Argument must be a Buffer");return this===O||0===x.compare(this,O)},x.prototype.inspect=function(){var O="",P=ne.INSPECT_MAX_BYTES;return O=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(O+=" ... "),"<Buffer "+O+">"},x.prototype.compare=function(O,P,_e,ze,ve){if(ut(O,Uint8Array)&&(O=x.from(O,O.offset,O.byteLength)),!x.isBuffer(O))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof O);if(void 0===P&&(P=0),void 0===_e&&(_e=O?O.length:0),void 0===ze&&(ze=0),void 0===ve&&(ve=this.length),P<0||_e>O.length||ze<0||ve>this.length)throw new RangeError("out of range index");if(ze>=ve&&P>=_e)return 0;if(ze>=ve)return-1;if(P>=_e)return 1;if(this===O)return 0;for(var Ve=(ve>>>=0)-(ze>>>=0),Ke=(_e>>>=0)-(P>>>=0),vt=Math.min(Ve,Ke),Ot=this.slice(ze,ve),Et=O.slice(P,_e),Bt=0;Bt<vt;++Bt)if(Ot[Bt]!==Et[Bt]){Ve=Ot[Bt],Ke=Et[Bt];break}return Ve<Ke?-1:Ke<Ve?1:0},x.prototype.includes=function(O,P,_e){return-1!==this.indexOf(O,P,_e)},x.prototype.indexOf=function(O,P,_e){return G(this,O,P,_e,!0)},x.prototype.lastIndexOf=function(O,P,_e){return G(this,O,P,_e,!1)},x.prototype.write=function(O,P,_e,ze){if(void 0===P)ze="utf8",_e=this.length,P=0;else if(void 0===_e&&"string"==typeof P)ze=P,_e=this.length,P=0;else{if(!isFinite(P))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");P>>>=0,isFinite(_e)?(_e>>>=0,void 0===ze&&(ze="utf8")):(ze=_e,_e=void 0)}var ve=this.length-P;if((void 0===_e||_e>ve)&&(_e=ve),O.length>0&&(_e<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");ze||(ze="utf8");for(var Ve=!1;;)switch(ze){case"hex":return I(this,O,P,_e);case"utf8":case"utf-8":return D(this,O,P,_e);case"ascii":return ue(this,O,P,_e);case"latin1":case"binary":return re(this,O,P,_e);case"base64":return Ce(this,O,P,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ae(this,O,P,_e);default:if(Ve)throw new TypeError("Unknown encoding: "+ze);ze=(""+ze).toLowerCase(),Ve=!0}},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ke=4096;function Qe(Z,O,P){var _e="";P=Math.min(Z.length,P);for(var ze=O;ze<P;++ze)_e+=String.fromCharCode(127&Z[ze]);return _e}function xe(Z,O,P){var _e="";P=Math.min(Z.length,P);for(var ze=O;ze<P;++ze)_e+=String.fromCharCode(Z[ze]);return _e}function Be(Z,O,P){var _e=Z.length;(!O||O<0)&&(O=0),(!P||P<0||P>_e)&&(P=_e);for(var ze="",ve=O;ve<P;++ve)ze+=se(Z[ve]);return ze}function Ie(Z,O,P){for(var _e=Z.slice(O,P),ze="",ve=0;ve<_e.length;ve+=2)ze+=String.fromCharCode(_e[ve]+256*_e[ve+1]);return ze}function et(Z,O,P){if(Z%1!=0||Z<0)throw new RangeError("offset is not uint");if(Z+O>P)throw new RangeError("Trying to access beyond buffer length")}function pe(Z,O,P,_e,ze,ve){if(!x.isBuffer(Z))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>ze||O<ve)throw new RangeError('"value" argument is out of bounds');if(P+_e>Z.length)throw new RangeError("Index out of range")}function be(Z,O,P,_e,ze,ve){if(P+_e>Z.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("Index out of range")}function nt(Z,O,P,_e,ze){return O=+O,P>>>=0,ze||be(Z,0,P,4),A.write(Z,O,P,_e,23,4),P+4}function _t(Z,O,P,_e,ze){return O=+O,P>>>=0,ze||be(Z,0,P,8),A.write(Z,O,P,_e,52,8),P+8}x.prototype.slice=function(O,P){var _e=this.length;(O=~~O)<0?(O+=_e)<0&&(O=0):O>_e&&(O=_e),(P=void 0===P?_e:~~P)<0?(P+=_e)<0&&(P=0):P>_e&&(P=_e),P<O&&(P=O);var ze=this.subarray(O,P);return ze.__proto__=x.prototype,ze},x.prototype.readUIntLE=function(O,P,_e){O>>>=0,P>>>=0,_e||et(O,P,this.length);for(var ze=this[O],ve=1,Ve=0;++Ve<P&&(ve*=256);)ze+=this[O+Ve]*ve;return ze},x.prototype.readUIntBE=function(O,P,_e){O>>>=0,P>>>=0,_e||et(O,P,this.length);for(var ze=this[O+--P],ve=1;P>0&&(ve*=256);)ze+=this[O+--P]*ve;return ze},x.prototype.readUInt8=function(O,P){return O>>>=0,P||et(O,1,this.length),this[O]},x.prototype.readUInt16LE=function(O,P){return O>>>=0,P||et(O,2,this.length),this[O]|this[O+1]<<8},x.prototype.readUInt16BE=function(O,P){return O>>>=0,P||et(O,2,this.length),this[O]<<8|this[O+1]},x.prototype.readUInt32LE=function(O,P){return O>>>=0,P||et(O,4,this.length),(this[O]|this[O+1]<<8|this[O+2]<<16)+16777216*this[O+3]},x.prototype.readUInt32BE=function(O,P){return O>>>=0,P||et(O,4,this.length),16777216*this[O]+(this[O+1]<<16|this[O+2]<<8|this[O+3])},x.prototype.readIntLE=function(O,P,_e){O>>>=0,P>>>=0,_e||et(O,P,this.length);for(var ze=this[O],ve=1,Ve=0;++Ve<P&&(ve*=256);)ze+=this[O+Ve]*ve;return ze>=(ve*=128)&&(ze-=Math.pow(2,8*P)),ze},x.prototype.readIntBE=function(O,P,_e){O>>>=0,P>>>=0,_e||et(O,P,this.length);for(var ze=P,ve=1,Ve=this[O+--ze];ze>0&&(ve*=256);)Ve+=this[O+--ze]*ve;return Ve>=(ve*=128)&&(Ve-=Math.pow(2,8*P)),Ve},x.prototype.readInt8=function(O,P){return O>>>=0,P||et(O,1,this.length),128&this[O]?-1*(255-this[O]+1):this[O]},x.prototype.readInt16LE=function(O,P){O>>>=0,P||et(O,2,this.length);var _e=this[O]|this[O+1]<<8;return 32768&_e?4294901760|_e:_e},x.prototype.readInt16BE=function(O,P){O>>>=0,P||et(O,2,this.length);var _e=this[O+1]|this[O]<<8;return 32768&_e?4294901760|_e:_e},x.prototype.readInt32LE=function(O,P){return O>>>=0,P||et(O,4,this.length),this[O]|this[O+1]<<8|this[O+2]<<16|this[O+3]<<24},x.prototype.readInt32BE=function(O,P){return O>>>=0,P||et(O,4,this.length),this[O]<<24|this[O+1]<<16|this[O+2]<<8|this[O+3]},x.prototype.readFloatLE=function(O,P){return O>>>=0,P||et(O,4,this.length),A.read(this,O,!0,23,4)},x.prototype.readFloatBE=function(O,P){return O>>>=0,P||et(O,4,this.length),A.read(this,O,!1,23,4)},x.prototype.readDoubleLE=function(O,P){return O>>>=0,P||et(O,8,this.length),A.read(this,O,!0,52,8)},x.prototype.readDoubleBE=function(O,P){return O>>>=0,P||et(O,8,this.length),A.read(this,O,!1,52,8)},x.prototype.writeUIntLE=function(O,P,_e,ze){O=+O,P>>>=0,_e>>>=0,ze||pe(this,O,P,_e,Math.pow(2,8*_e)-1,0);var Ve=1,Ke=0;for(this[P]=255&O;++Ke<_e&&(Ve*=256);)this[P+Ke]=O/Ve&255;return P+_e},x.prototype.writeUIntBE=function(O,P,_e,ze){O=+O,P>>>=0,_e>>>=0,ze||pe(this,O,P,_e,Math.pow(2,8*_e)-1,0);var Ve=_e-1,Ke=1;for(this[P+Ve]=255&O;--Ve>=0&&(Ke*=256);)this[P+Ve]=O/Ke&255;return P+_e},x.prototype.writeUInt8=function(O,P,_e){return O=+O,P>>>=0,_e||pe(this,O,P,1,255,0),this[P]=255&O,P+1},x.prototype.writeUInt16LE=function(O,P,_e){return O=+O,P>>>=0,_e||pe(this,O,P,2,65535,0),this[P]=255&O,this[P+1]=O>>>8,P+2},x.prototype.writeUInt16BE=function(O,P,_e){return O=+O,P>>>=0,_e||pe(this,O,P,2,65535,0),this[P]=O>>>8,this[P+1]=255&O,P+2},x.prototype.writeUInt32LE=function(O,P,_e){return O=+O,P>>>=0,_e||pe(this,O,P,4,4294967295,0),this[P+3]=O>>>24,this[P+2]=O>>>16,this[P+1]=O>>>8,this[P]=255&O,P+4},x.prototype.writeUInt32BE=function(O,P,_e){return O=+O,P>>>=0,_e||pe(this,O,P,4,4294967295,0),this[P]=O>>>24,this[P+1]=O>>>16,this[P+2]=O>>>8,this[P+3]=255&O,P+4},x.prototype.writeIntLE=function(O,P,_e,ze){if(O=+O,P>>>=0,!ze){var ve=Math.pow(2,8*_e-1);pe(this,O,P,_e,ve-1,-ve)}var Ve=0,Ke=1,vt=0;for(this[P]=255&O;++Ve<_e&&(Ke*=256);)O<0&&0===vt&&0!==this[P+Ve-1]&&(vt=1),this[P+Ve]=(O/Ke|0)-vt&255;return P+_e},x.prototype.writeIntBE=function(O,P,_e,ze){if(O=+O,P>>>=0,!ze){var ve=Math.pow(2,8*_e-1);pe(this,O,P,_e,ve-1,-ve)}var Ve=_e-1,Ke=1,vt=0;for(this[P+Ve]=255&O;--Ve>=0&&(Ke*=256);)O<0&&0===vt&&0!==this[P+Ve+1]&&(vt=1),this[P+Ve]=(O/Ke|0)-vt&255;return P+_e},x.prototype.writeInt8=function(O,P,_e){return O=+O,P>>>=0,_e||pe(this,O,P,1,127,-128),O<0&&(O=255+O+1),this[P]=255&O,P+1},x.prototype.writeInt16LE=function(O,P,_e){return O=+O,P>>>=0,_e||pe(this,O,P,2,32767,-32768),this[P]=255&O,this[P+1]=O>>>8,P+2},x.prototype.writeInt16BE=function(O,P,_e){return O=+O,P>>>=0,_e||pe(this,O,P,2,32767,-32768),this[P]=O>>>8,this[P+1]=255&O,P+2},x.prototype.writeInt32LE=function(O,P,_e){return O=+O,P>>>=0,_e||pe(this,O,P,4,2147483647,-2147483648),this[P]=255&O,this[P+1]=O>>>8,this[P+2]=O>>>16,this[P+3]=O>>>24,P+4},x.prototype.writeInt32BE=function(O,P,_e){return O=+O,P>>>=0,_e||pe(this,O,P,4,2147483647,-2147483648),O<0&&(O=4294967295+O+1),this[P]=O>>>24,this[P+1]=O>>>16,this[P+2]=O>>>8,this[P+3]=255&O,P+4},x.prototype.writeFloatLE=function(O,P,_e){return nt(this,O,P,!0,_e)},x.prototype.writeFloatBE=function(O,P,_e){return nt(this,O,P,!1,_e)},x.prototype.writeDoubleLE=function(O,P,_e){return _t(this,O,P,!0,_e)},x.prototype.writeDoubleBE=function(O,P,_e){return _t(this,O,P,!1,_e)},x.prototype.copy=function(O,P,_e,ze){if(!x.isBuffer(O))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),!ze&&0!==ze&&(ze=this.length),P>=O.length&&(P=O.length),P||(P=0),ze>0&&ze<_e&&(ze=_e),ze===_e||0===O.length||0===this.length)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(ze<0)throw new RangeError("sourceEnd out of bounds");ze>this.length&&(ze=this.length),O.length-P<ze-_e&&(ze=O.length-P+_e);var ve=ze-_e;if(this===O&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(P,_e,ze);else if(this===O&&_e<P&&P<ze)for(var Ve=ve-1;Ve>=0;--Ve)O[Ve+P]=this[Ve+_e];else Uint8Array.prototype.set.call(O,this.subarray(_e,ze),P);return ve},x.prototype.fill=function(O,P,_e,ze){if("string"==typeof O){if("string"==typeof P?(ze=P,P=0,_e=this.length):"string"==typeof _e&&(ze=_e,_e=this.length),void 0!==ze&&"string"!=typeof ze)throw new TypeError("encoding must be a string");if("string"==typeof ze&&!x.isEncoding(ze))throw new TypeError("Unknown encoding: "+ze);if(1===O.length){var ve=O.charCodeAt(0);("utf8"===ze&&ve<128||"latin1"===ze)&&(O=ve)}}else"number"==typeof O&&(O&=255);if(P<0||this.length<P||this.length<_e)throw new RangeError("Out of range index");if(_e<=P)return this;var Ve;if(P>>>=0,_e=void 0===_e?this.length:_e>>>0,O||(O=0),"number"==typeof O)for(Ve=P;Ve<_e;++Ve)this[Ve]=O;else{var Ke=x.isBuffer(O)?O:x.from(O,ze),vt=Ke.length;if(0===vt)throw new TypeError('The value "'+O+'" is invalid for argument "value"');for(Ve=0;Ve<_e-P;++Ve)this[Ve+P]=Ke[Ve%vt]}return this};var je=/[^+/0-9A-Za-z-_]/g;function se(Z){return Z<16?"0"+Z.toString(16):Z.toString(16)}function Ae(Z,O){O=O||1/0;for(var P,_e=Z.length,ze=null,ve=[],Ve=0;Ve<_e;++Ve){if((P=Z.charCodeAt(Ve))>55295&&P<57344){if(!ze){if(P>56319){(O-=3)>-1&&ve.push(239,191,189);continue}if(Ve+1===_e){(O-=3)>-1&&ve.push(239,191,189);continue}ze=P;continue}if(P<56320){(O-=3)>-1&&ve.push(239,191,189),ze=P;continue}P=65536+(ze-55296<<10|P-56320)}else ze&&(O-=3)>-1&&ve.push(239,191,189);if(ze=null,P<128){if((O-=1)<0)break;ve.push(P)}else if(P<2048){if((O-=2)<0)break;ve.push(P>>6|192,63&P|128)}else if(P<65536){if((O-=3)<0)break;ve.push(P>>12|224,P>>6&63|128,63&P|128)}else{if(!(P<1114112))throw new Error("Invalid code point");if((O-=4)<0)break;ve.push(P>>18|240,P>>12&63|128,P>>6&63|128,63&P|128)}}return ve}function Je(Z){return ee.toByteArray(function Q(Z){if((Z=(Z=Z.split("=")[0]).trim().replace(je,"")).length<2)return"";for(;Z.length%4!=0;)Z+="=";return Z}(Z))}function ot(Z,O,P,_e){for(var ze=0;ze<_e&&!(ze+P>=O.length||ze>=Z.length);++ze)O[ze+P]=Z[ze];return ze}function ut(Z,O){return Z instanceof O||null!=Z&&null!=Z.constructor&&null!=Z.constructor.name&&Z.constructor.name===O.name}function Le(Z){return Z!=Z}},8846:Ge=>{"use strict";Ge.exports=function ne(M){return null===M||"object"!=typeof M||null!=M.toJSON?JSON.stringify(M):Array.isArray(M)?"["+M.reduce((ee,A,$)=>ee+(0===$?"":",")+ne(void 0===A||"symbol"==typeof A?null:A),"")+"]":"{"+Object.keys(M).sort().reduce((ee,A,$)=>void 0===M[A]||"symbol"==typeof M[A]?ee:ee+(0===ee.length?"":",")+ne(A)+":"+ne(M[A]),"")+"}"}},1123:(Ge,ne,M)=>{Ge.exports={ResizeSensor:M(4718),ElementQueries:M(7240)}},7240:function(Ge,ne,M){"use strict";var ee,A,$;typeof window<"u"&&window,A=[M(4718)],void 0!==($="function"==typeof(ee=function(j){var W=function(){var E,N={},te=[];function F(re){re||(re=document.documentElement);var Ce=window.getComputedStyle(re,null).fontSize;return parseFloat(Ce)||16}function oe(re,Ce){var ae=Ce.split(/\d/),we=ae[ae.length-1];switch(Ce=parseFloat(Ce),we){case"px":default:return Ce;case"em":return Ce*F(re);case"rem":return Ce*F();case"vw":return Ce*document.documentElement.clientWidth/100;case"vh":return Ce*document.documentElement.clientHeight/100;case"vmin":case"vmax":var Oe=document.documentElement.clientWidth/100,ke=document.documentElement.clientHeight/100;return Ce*(0,Math["vmin"===we?"min":"max"])(Oe,ke)}}function S(re,Ce){this.element=re;var ae,we,Oe,ke,Ye,Qe,xe,Be,Ie=["min-width","min-height","max-width","max-height"];this.call=function(){for(ae in Oe=function C(re){if(!re.getBoundingClientRect)return{width:re.offsetWidth,height:re.offsetHeight};var Ce=re.getBoundingClientRect();return{width:Math.round(Ce.width),height:Math.round(Ce.height)}}(this.element),Qe={},N[Ce])N[Ce].hasOwnProperty(ae)&&(ke=oe(this.element,(we=N[Ce][ae]).value),Ye="width"===we.property?Oe.width:Oe.height,xe="","min"===we.mode&&Ye>=ke&&(xe+=we.value),"max"===we.mode&&Ye<=ke&&(xe+=we.value),Qe[Be=we.mode+"-"+we.property]||(Qe[Be]=""),xe&&-1===(" "+Qe[Be]+" ").indexOf(" "+xe+" ")&&(Qe[Be]+=" "+xe));for(var et in Ie)Ie.hasOwnProperty(et)&&(Qe[Ie[et]]?this.element.setAttribute(Ie[et],Qe[Ie[et]].substr(1)):this.element.removeAttribute(Ie[et]))}}function k(re,Ce){re.elementQueriesSetupInformation||(re.elementQueriesSetupInformation=new S(re,Ce)),re.elementQueriesSensor||(re.elementQueriesSensor=new j(re,function(){re.elementQueriesSetupInformation.call()}))}function ce(re,Ce,ae,we){if(typeof N[re]>"u"){N[re]=[];var Oe=te.length;E.innerHTML+="\n"+re+" {animation: 0.1s element-queries;}",E.innerHTML+="\n"+re+" > .resize-sensor {min-width: "+Oe+"px;}",te.push(re)}N[re].push({mode:Ce,property:ae,value:we})}function X(re){var Ce;if(document.querySelectorAll&&(Ce=re?re.querySelectorAll.bind(re):document.querySelectorAll.bind(document)),!Ce&&typeof $$<"u"&&(Ce=$$),!Ce&&typeof jQuery<"u"&&(Ce=jQuery),!Ce)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return Ce}function J(re){var Ce=[],ae=[],we=[],Oe=0,ke=-1,Ye=[];for(var Qe in re.children)if(re.children.hasOwnProperty(Qe)&&re.children[Qe].tagName&&"img"===re.children[Qe].tagName.toLowerCase()){Ce.push(re.children[Qe]);var xe=re.children[Qe].getAttribute("min-width")||re.children[Qe].getAttribute("data-min-width"),Be=re.children[Qe].getAttribute("data-src")||re.children[Qe].getAttribute("url");we.push(Be),ae.push({minWidth:xe}),xe?re.children[Qe].style.display="none":(Oe=Ce.length-1,re.children[Qe].style.display="block")}function et(){var be,pe=!1;for(be in Ce)Ce.hasOwnProperty(be)&&ae[be].minWidth&&re.offsetWidth>ae[be].minWidth&&(pe=be);if(pe||(pe=Oe),ke!==pe)if(Ye[pe])Ce[ke].style.display="none",Ce[pe].style.display="block",ke=pe;else{var nt=new Image;nt.onload=function(){Ce[pe].src=we[pe],Ce[ke].style.display="none",Ce[pe].style.display="block",Ye[pe]=!0,ke=pe},nt.src=we[pe]}else Ce[pe].src=we[pe]}ke=Oe,re.resizeSensorInstance=new j(re,et),et()}var G=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,w=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function I(re){var Ce,ae,we,Oe;for(re=re.replace(/'/g,'"');null!==(Ce=G.exec(re));)for(ae=Ce[1]+Ce[3],we=Ce[2];null!==(Oe=w.exec(we));)ce(ae,Oe[1],Oe[2],Oe[3])}function D(re){var Ce="";if(re)if("string"==typeof re)(-1!==(re=re.toLowerCase()).indexOf("min-width")||-1!==re.indexOf("max-width"))&&I(re);else for(var ae=0,we=re.length;ae<we;ae++)1===re[ae].type?(-1!==(Ce=re[ae].selectorText||re[ae].cssText).indexOf("min-height")||-1!==Ce.indexOf("max-height")||-1!==Ce.indexOf("min-width")||-1!==Ce.indexOf("max-width"))&&I(Ce):4===re[ae].type?D(re[ae].cssRules||re[ae].rules):3===re[ae].type&&re[ae].styleSheet.hasOwnProperty("cssRules")&&D(re[ae].styleSheet.cssRules)}var ue=!1;this.init=function(){var re="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?re="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?re="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(re="oanimationstart"),document.body.addEventListener(re,function(we){var Oe=we.target,ke=Oe&&window.getComputedStyle(Oe,null),Ye=ke&&ke.getPropertyValue("animation-name");if(Ye&&-1!==Ye.indexOf("element-queries")){Oe.elementQueriesSensor=new j(Oe,function(){Oe.elementQueriesSetupInformation&&Oe.elementQueriesSetupInformation.call()});var Be=window.getComputedStyle(Oe.resizeSensor,null).getPropertyValue("min-width");Be=parseInt(Be.replace("px","")),k(we.target,te[Be])}}),ue||((E=document.createElement("style")).type="text/css",E.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",E.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(E),ue=!0);for(var Ce=0,ae=document.styleSheets.length;Ce<ae;Ce++)try{document.styleSheets[Ce].href&&0===document.styleSheets[Ce].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[Ce].href),D(document.styleSheets[Ce].cssRules||document.styleSheets[Ce].rules||document.styleSheets[Ce].cssText)}catch{}!function U(){for(var Ce=X()("[data-responsive-image],[responsive-image]"),ae=0,we=Ce.length;ae<we;ae++)J(Ce[ae])}()},this.findElementQueriesElements=function(re){!function K(re){var Ce=X(re);for(var ae in N)if(N.hasOwnProperty(ae))for(var we=Ce(ae,re),Oe=0,ke=we.length;Oe<ke;Oe++)k(we[Oe],ae)}(re)},this.update=function(){this.init()}};W.update=function(){W.instance.update()},W.detach=function(E){E.elementQueriesSetupInformation?(E.elementQueriesSensor.detach(),delete E.elementQueriesSetupInformation,delete E.elementQueriesSensor):E.resizeSensorInstance&&(E.resizeSensorInstance.detach(),delete E.resizeSensorInstance)},W.init=function(){W.instance||(W.instance=new W),W.instance.init()};return W.findElementQueriesElements=function(E){W.instance.findElementQueriesElements(E)},W.listen=function(){!function(E){if(document.addEventListener)document.addEventListener("DOMContentLoaded",E,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var N=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(E(),clearInterval(N))},10);else window.onload=E}(W.init)},W})?ee.apply(ne,A):ee)&&(Ge.exports=$)},4718:function(Ge,ne,M){"use strict";var ee,A;typeof window<"u"&&window,void 0!==(A="function"==typeof(ee=function(){if(typeof window>"u")return null;var $=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),j=$.requestAnimationFrame||$.mozRequestAnimationFrame||$.webkitRequestAnimationFrame||function(C){return $.setTimeout(C,20)},W=$.cancelAnimationFrame||$.mozCancelAnimationFrame||$.webkitCancelAnimationFrame||function(C){$.clearTimeout(C)};function x(C,oe){var S=Object.prototype.toString.call(C),k="[object Array]"===S||"[object NodeList]"===S||"[object HTMLCollection]"===S||"[object Object]"===S||typeof jQuery<"u"&&C instanceof jQuery||typeof Elements<"u"&&C instanceof Elements,ce=0,X=C.length;if(k)for(;ce<X;ce++)oe(C[ce]);else oe(C)}function E(C){if(!C.getBoundingClientRect)return{width:C.offsetWidth,height:C.offsetHeight};var oe=C.getBoundingClientRect();return{width:Math.round(oe.width),height:Math.round(oe.height)}}function N(C,oe){Object.keys(oe).forEach(function(S){C.style[S]=oe[S]})}var te=function(C,oe){var S=0;function k(){var K,J,X=[];this.add=function(U){X.push(U)},this.call=function(U){for(K=0,J=X.length;K<J;K++)X[K].call(this,U)},this.remove=function(U){var G=[];for(K=0,J=X.length;K<J;K++)X[K]!==U&&G.push(X[K]);X=G},this.length=function(){return X.length}}function ce(X,K){if(X){if(X.resizedAttached)return void X.resizedAttached.add(K);X.resizedAttached=new k,X.resizedAttached.add(K),X.resizeSensor=document.createElement("div"),X.resizeSensor.dir="ltr",X.resizeSensor.className="resize-sensor";var J={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},U={position:"absolute",left:"0px",top:"0px",transition:"0s"};N(X.resizeSensor,J);var G=document.createElement("div");G.className="resize-sensor-expand",N(G,J);var w=document.createElement("div");N(w,U),G.appendChild(w);var I=document.createElement("div");I.className="resize-sensor-shrink",N(I,J);var D=document.createElement("div");N(D,U),N(D,{width:"200%",height:"200%"}),I.appendChild(D),X.resizeSensor.appendChild(G),X.resizeSensor.appendChild(I),X.appendChild(X.resizeSensor);var ue=window.getComputedStyle(X),re=ue?ue.getPropertyValue("position"):null;"absolute"!==re&&"relative"!==re&&"fixed"!==re&&"sticky"!==re&&(X.style.position="relative");var Ce=!1,ae=0,we=E(X),Oe=0,ke=0,Ye=!0;S=0;var xe=function(){if(Ye){if(0===X.offsetWidth&&0===X.offsetHeight)return void(S||(S=j(function(){S=0,xe()})));Ye=!1}var pe,be;be=X.offsetHeight,w.style.width=(pe=X.offsetWidth)+10+"px",w.style.height=be+10+"px",G.scrollLeft=pe+10,G.scrollTop=be+10,I.scrollLeft=pe+10,I.scrollTop=be+10};X.resizeSensor.resetSensor=xe;var Be=function(){ae=0,Ce&&(Oe=we.width,ke=we.height,X.resizedAttached&&X.resizedAttached.call(we))},Ie=function(){we=E(X),(Ce=we.width!==Oe||we.height!==ke)&&!ae&&(ae=j(Be)),xe()},et=function(pe,be,nt){pe.attachEvent?pe.attachEvent("on"+be,nt):pe.addEventListener(be,nt)};et(G,"scroll",Ie),et(I,"scroll",Ie),S=j(function(){S=0,xe()})}}x(C,function(X){ce(X,oe)}),this.detach=function(X){S||(W(S),S=0),te.detach(C,X)},this.reset=function(){C.resizeSensor.resetSensor()}};if(te.reset=function(C){x(C,function(oe){oe.resizeSensor.resetSensor()})},te.detach=function(C,oe){x(C,function(S){S&&(S.resizedAttached&&"function"==typeof oe&&(S.resizedAttached.remove(oe),S.resizedAttached.length())||S.resizeSensor&&(S.contains(S.resizeSensor)&&S.removeChild(S.resizeSensor),delete S.resizeSensor,delete S.resizedAttached))})},typeof MutationObserver<"u"){var F=new MutationObserver(function(C){for(var oe in C)if(C.hasOwnProperty(oe))for(var S=C[oe].addedNodes,k=0;k<S.length;k++)S[k].resizeSensor&&te.reset(S[k])});document.addEventListener("DOMContentLoaded",function(C){F.observe(document.body,{childList:!0,subtree:!0})})}return te})?ee.call(ne,M,ne,Ge):ee)&&(Ge.exports=A)},4356:Ge=>{"use strict";var ee,ne="object"==typeof Reflect?Reflect:null,M=ne&&"function"==typeof ne.apply?ne.apply:function(G,w,I){return Function.prototype.apply.call(G,w,I)};ee=ne&&"function"==typeof ne.ownKeys?ne.ownKeys:Object.getOwnPropertySymbols?function(G){return Object.getOwnPropertyNames(G).concat(Object.getOwnPropertySymbols(G))}:function(G){return Object.getOwnPropertyNames(G)};var $=Number.isNaN||function(G){return G!=G};function j(){j.init.call(this)}Ge.exports=j,Ge.exports.once=function X(U,G){return new Promise(function(w,I){function D(re){U.removeListener(G,ue),I(re)}function ue(){"function"==typeof U.removeListener&&U.removeListener("error",D),w([].slice.call(arguments))}J(U,G,ue,{once:!0}),"error"!==G&&function K(U,G,w){"function"==typeof U.on&&J(U,"error",G,w)}(U,D,{once:!0})})},j.EventEmitter=j,j.prototype._events=void 0,j.prototype._eventsCount=0,j.prototype._maxListeners=void 0;var W=10;function x(U){if("function"!=typeof U)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof U)}function E(U){return void 0===U._maxListeners?j.defaultMaxListeners:U._maxListeners}function N(U,G,w,I){var D,ue,re;if(x(w),void 0===(ue=U._events)?(ue=U._events=Object.create(null),U._eventsCount=0):(void 0!==ue.newListener&&(U.emit("newListener",G,w.listener?w.listener:w),ue=U._events),re=ue[G]),void 0===re)re=ue[G]=w,++U._eventsCount;else if("function"==typeof re?re=ue[G]=I?[w,re]:[re,w]:I?re.unshift(w):re.push(w),(D=E(U))>0&&re.length>D&&!re.warned){re.warned=!0;var Ce=new Error("Possible EventEmitter memory leak detected. "+re.length+" "+String(G)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ce.name="MaxListenersExceededWarning",Ce.emitter=U,Ce.type=G,Ce.count=re.length,function A(U){console&&console.warn&&console.warn(U)}(Ce)}return U}function te(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function F(U,G,w){var I={fired:!1,wrapFn:void 0,target:U,type:G,listener:w},D=te.bind(I);return D.listener=w,I.wrapFn=D,D}function C(U,G,w){var I=U._events;if(void 0===I)return[];var D=I[G];return void 0===D?[]:"function"==typeof D?w?[D.listener||D]:[D]:w?function ce(U){for(var G=new Array(U.length),w=0;w<G.length;++w)G[w]=U[w].listener||U[w];return G}(D):S(D,D.length)}function oe(U){var G=this._events;if(void 0!==G){var w=G[U];if("function"==typeof w)return 1;if(void 0!==w)return w.length}return 0}function S(U,G){for(var w=new Array(G),I=0;I<G;++I)w[I]=U[I];return w}function J(U,G,w,I){if("function"==typeof U.on)I.once?U.once(G,w):U.on(G,w);else{if("function"!=typeof U.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof U);U.addEventListener(G,function D(ue){I.once&&U.removeEventListener(G,D),w(ue)})}}Object.defineProperty(j,"defaultMaxListeners",{enumerable:!0,get:function(){return W},set:function(U){if("number"!=typeof U||U<0||$(U))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+U+".");W=U}}),j.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},j.prototype.setMaxListeners=function(G){if("number"!=typeof G||G<0||$(G))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+G+".");return this._maxListeners=G,this},j.prototype.getMaxListeners=function(){return E(this)},j.prototype.emit=function(G){for(var w=[],I=1;I<arguments.length;I++)w.push(arguments[I]);var D="error"===G,ue=this._events;if(void 0!==ue)D=D&&void 0===ue.error;else if(!D)return!1;if(D){var re;if(w.length>0&&(re=w[0]),re instanceof Error)throw re;var Ce=new Error("Unhandled error."+(re?" ("+re.message+")":""));throw Ce.context=re,Ce}var ae=ue[G];if(void 0===ae)return!1;if("function"==typeof ae)M(ae,this,w);else{var we=ae.length,Oe=S(ae,we);for(I=0;I<we;++I)M(Oe[I],this,w)}return!0},j.prototype.on=j.prototype.addListener=function(G,w){return N(this,G,w,!1)},j.prototype.prependListener=function(G,w){return N(this,G,w,!0)},j.prototype.once=function(G,w){return x(w),this.on(G,F(this,G,w)),this},j.prototype.prependOnceListener=function(G,w){return x(w),this.prependListener(G,F(this,G,w)),this},j.prototype.off=j.prototype.removeListener=function(G,w){var I,D,ue,re,Ce;if(x(w),void 0===(D=this._events))return this;if(void 0===(I=D[G]))return this;if(I===w||I.listener===w)0==--this._eventsCount?this._events=Object.create(null):(delete D[G],D.removeListener&&this.emit("removeListener",G,I.listener||w));else if("function"!=typeof I){for(ue=-1,re=I.length-1;re>=0;re--)if(I[re]===w||I[re].listener===w){Ce=I[re].listener,ue=re;break}if(ue<0)return this;0===ue?I.shift():function k(U,G){for(;G+1<U.length;G++)U[G]=U[G+1];U.pop()}(I,ue),1===I.length&&(D[G]=I[0]),void 0!==D.removeListener&&this.emit("removeListener",G,Ce||w)}return this},j.prototype.removeAllListeners=function(G){var w,I,D;if(void 0===(I=this._events))return this;if(void 0===I.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==I[G]&&(0==--this._eventsCount?this._events=Object.create(null):delete I[G]),this;if(0===arguments.length){var re,ue=Object.keys(I);for(D=0;D<ue.length;++D)"removeListener"!==(re=ue[D])&&this.removeAllListeners(re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(w=I[G]))this.removeListener(G,w);else if(void 0!==w)for(D=w.length-1;D>=0;D--)this.removeListener(G,w[D]);return this},j.prototype.listeners=function(G){return C(this,G,!0)},j.prototype.rawListeners=function(G){return C(this,G,!1)},j.listenerCount=function(U,G){return"function"==typeof U.listenerCount?U.listenerCount(G):oe.call(U,G)},j.prototype.listenerCount=oe,j.prototype.eventNames=function(){return this._eventsCount>0?ee(this._events):[]}},689:(Ge,ne,M)=>{var A=M(9791),j=(M(2963),M(2683));function E(C,oe,S){if(!A(oe))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!oe.hasNode(S))throw new Error('graphology-shortest-path: the "'+S+'" source node does not exist in the given graph.');S=""+S;var k=new Set,ce={},X=0;ce[S]=0;for(var J,U,G,K=[S];0!==K.length;){var w=[];for(J=0,U=K.length;J<U;J++)!k.has(G=K[J])&&(k.add(G),j(w,oe[C](G)),ce[G]=X);X++,K=w}return ce}E.bind(null,"outboundNeighbors"),E.bind(null,"neighbors");ne.Wq=function W(C,oe,S){if(!A(C))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!C.hasNode(oe))throw new Error('graphology-shortest-path: the "'+oe+'" source node does not exist in the given graph.');if(!C.hasNode(S))throw new Error('graphology-shortest-path: the "'+S+'" target node does not exist in the given graph.');if((oe=""+oe)==(S=""+S))return[oe];var k=C.inboundNeighbors.bind(C),ce=C.outboundNeighbors.bind(C),X={},K={};X[oe]=null,K[S]=null;var G,w,I,D,ue,re,Ce,ae,J=[oe],U=[S],we=!1;e:for(;J.length&&U.length;)if(J.length<=U.length){for(G=J,J=[],ue=0,Ce=G.length;ue<Ce;ue++)for(re=0,ae=(I=ce(w=G[ue])).length;re<ae;re++)if((D=I[re])in X||(J.push(D),X[D]=w),D in K){we=!0;break e}}else for(G=U,U=[],ue=0,Ce=G.length;ue<Ce;ue++)for(w=G[ue],I=k(w),re=0,ae=I.length;re<ae;re++)if(D=I[re],D in K||(U.push(D),K[D]=w),D in X){we=!0;break e}if(!we)return null;for(var Oe=[];D;)Oe.unshift(D),D=X[D];for(D=K[Oe[Oe.length-1]];D;)Oe.push(D),D=K[D];return Oe.length?Oe:null}},9791:Ge=>{Ge.exports=function(M){return null!==M&&"object"==typeof M&&"function"==typeof M.addUndirectedEdgeWithKey&&"function"==typeof M.dropNode&&"boolean"==typeof M.multi}},2475:function(Ge){Ge.exports=function(){"use strict";function ne(le){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ye){return typeof ye}:function(ye){return ye&&"function"==typeof Symbol&&ye.constructor===Symbol&&ye!==Symbol.prototype?"symbol":typeof ye})(le)}function M(le,ye){le.prototype=Object.create(ye.prototype),le.prototype.constructor=le,A(le,ye)}function ee(le){return(ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ye){return ye.__proto__||Object.getPrototypeOf(ye)})(le)}function A(le,ye){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(de,T){return de.__proto__=T,de})(le,ye)}function j(le,ye,de){return(j=function $(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(T,v,H){var Y=[null];Y.push.apply(Y,v);var De=new(Function.bind.apply(T,Y));return H&&A(De,H.prototype),De}).apply(null,arguments)}function W(le){var ye="function"==typeof Map?new Map:void 0;return W=function(de){if(null===de||-1===Function.toString.call(de).indexOf("[native code]"))return de;if("function"!=typeof de)throw new TypeError("Super expression must either be null or a function");if(void 0!==ye){if(ye.has(de))return ye.get(de);ye.set(de,v)}function v(){return j(de,arguments,ee(this).constructor)}return v.prototype=Object.create(de.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),A(v,de)},W(le)}function x(le){if(void 0===le)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le}var E=function(){for(var le=arguments[0],ye=1,de=arguments.length;ye<de;ye++)if(arguments[ye])for(var T in arguments[ye])le[T]=arguments[ye][T];return le};function N(le,ye,de,T){var v=le._nodes.get(ye),H=null;return v?H="mixed"===T?v.out&&v.out[de]||v.undirected&&v.undirected[de]:"directed"===T?v.out&&v.out[de]:v.undirected&&v.undirected[de]:H}function te(le){return"object"===ne(le)&&null!==le}function F(le){var ye;for(ye in le)return!1;return!0}function C(le,ye,de){Object.defineProperty(le,ye,{enumerable:!1,configurable:!1,writable:!0,value:de})}function oe(le,ye,de){var T={enumerable:!0,configurable:!0};"function"==typeof de?T.get=de:(T.value=de,T.writable=!1),Object.defineProperty(le,ye,T)}function S(le){return!(!te(le)||le.attributes&&!Array.isArray(le.attributes))}"function"==typeof Object.assign&&(E=Object.assign);var k,ce={exports:{}},X="object"==typeof Reflect?Reflect:null,K=X&&"function"==typeof X.apply?X.apply:function(le,ye,de){return Function.prototype.apply.call(le,ye,de)};k=X&&"function"==typeof X.ownKeys?X.ownKeys:Object.getOwnPropertySymbols?function(le){return Object.getOwnPropertyNames(le).concat(Object.getOwnPropertySymbols(le))}:function(le){return Object.getOwnPropertyNames(le)};var J=Number.isNaN||function(le){return le!=le};function U(){U.init.call(this)}ce.exports=U,ce.exports.once=function(le,ye){return new Promise(function(de,T){function v(Y){le.removeListener(ye,H),T(Y)}function H(){"function"==typeof le.removeListener&&le.removeListener("error",v),de([].slice.call(arguments))}var Y;Oe(le,ye,H,{once:!0}),"error"!==ye&&("function"==typeof(Y=le).on&&Oe(Y,"error",v,{once:!0}))})},U.EventEmitter=U,U.prototype._events=void 0,U.prototype._eventsCount=0,U.prototype._maxListeners=void 0;var G=10;function w(le){if("function"!=typeof le)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof le)}function I(le){return void 0===le._maxListeners?U.defaultMaxListeners:le._maxListeners}function D(le,ye,de,T){var v,H,Y;if(w(de),void 0===(H=le._events)?(H=le._events=Object.create(null),le._eventsCount=0):(void 0!==H.newListener&&(le.emit("newListener",ye,de.listener?de.listener:de),H=le._events),Y=H[ye]),void 0===Y)Y=H[ye]=de,++le._eventsCount;else if("function"==typeof Y?Y=H[ye]=T?[de,Y]:[Y,de]:T?Y.unshift(de):Y.push(de),(v=I(le))>0&&Y.length>v&&!Y.warned){Y.warned=!0;var rt=new Error("Possible EventEmitter memory leak detected. "+Y.length+" "+String(ye)+" listeners added. Use emitter.setMaxListeners() to increase limit");rt.name="MaxListenersExceededWarning",rt.emitter=le,rt.type=ye,rt.count=Y.length,console&&console.warn&&console.warn(rt)}return le}function ue(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function re(le,ye,de){var T={fired:!1,wrapFn:void 0,target:le,type:ye,listener:de},v=ue.bind(T);return v.listener=de,T.wrapFn=v,v}function Ce(le,ye,de){var T=le._events;if(void 0===T)return[];var v=T[ye];return void 0===v?[]:"function"==typeof v?de?[v.listener||v]:[v]:de?function(H){for(var Y=new Array(H.length),De=0;De<Y.length;++De)Y[De]=H[De].listener||H[De];return Y}(v):we(v,v.length)}function ae(le){var ye=this._events;if(void 0!==ye){var de=ye[le];if("function"==typeof de)return 1;if(void 0!==de)return de.length}return 0}function we(le,ye){for(var de=new Array(ye),T=0;T<ye;++T)de[T]=le[T];return de}function Oe(le,ye,de,T){if("function"==typeof le.on)T.once?le.once(ye,de):le.on(ye,de);else{if("function"!=typeof le.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof le);le.addEventListener(ye,function v(H){T.once&&le.removeEventListener(ye,v),de(H)})}}function ke(le){if("function"!=typeof le)throw new Error("obliterator/iterator: expecting a function!");this.next=le}Object.defineProperty(U,"defaultMaxListeners",{enumerable:!0,get:function(){return G},set:function(le){if("number"!=typeof le||le<0||J(le))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+le+".");G=le}}),U.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},U.prototype.setMaxListeners=function(le){if("number"!=typeof le||le<0||J(le))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+le+".");return this._maxListeners=le,this},U.prototype.getMaxListeners=function(){return I(this)},U.prototype.emit=function(le){for(var ye=[],de=1;de<arguments.length;de++)ye.push(arguments[de]);var T="error"===le,v=this._events;if(void 0!==v)T=T&&void 0===v.error;else if(!T)return!1;if(T){var H;if(ye.length>0&&(H=ye[0]),H instanceof Error)throw H;var Y=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw Y.context=H,Y}var De=v[le];if(void 0===De)return!1;if("function"==typeof De)K(De,this,ye);else{var rt=De.length,$e=we(De,rt);for(de=0;de<rt;++de)K($e[de],this,ye)}return!0},U.prototype.addListener=function(le,ye){return D(this,le,ye,!1)},U.prototype.on=U.prototype.addListener,U.prototype.prependListener=function(le,ye){return D(this,le,ye,!0)},U.prototype.once=function(le,ye){return w(ye),this.on(le,re(this,le,ye)),this},U.prototype.prependOnceListener=function(le,ye){return w(ye),this.prependListener(le,re(this,le,ye)),this},U.prototype.removeListener=function(le,ye){var de,T,v,H,Y;if(w(ye),void 0===(T=this._events))return this;if(void 0===(de=T[le]))return this;if(de===ye||de.listener===ye)0==--this._eventsCount?this._events=Object.create(null):(delete T[le],T.removeListener&&this.emit("removeListener",le,de.listener||ye));else if("function"!=typeof de){for(v=-1,H=de.length-1;H>=0;H--)if(de[H]===ye||de[H].listener===ye){Y=de[H].listener,v=H;break}if(v<0)return this;0===v?de.shift():function(De,rt){for(;rt+1<De.length;rt++)De[rt]=De[rt+1];De.pop()}(de,v),1===de.length&&(T[le]=de[0]),void 0!==T.removeListener&&this.emit("removeListener",le,Y||ye)}return this},U.prototype.off=U.prototype.removeListener,U.prototype.removeAllListeners=function(le){var ye,de,T;if(void 0===(de=this._events))return this;if(void 0===de.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==de[le]&&(0==--this._eventsCount?this._events=Object.create(null):delete de[le]),this;if(0===arguments.length){var v,H=Object.keys(de);for(T=0;T<H.length;++T)"removeListener"!==(v=H[T])&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ye=de[le]))this.removeListener(le,ye);else if(void 0!==ye)for(T=ye.length-1;T>=0;T--)this.removeListener(le,ye[T]);return this},U.prototype.listeners=function(le){return Ce(this,le,!0)},U.prototype.rawListeners=function(le){return Ce(this,le,!1)},U.listenerCount=function(le,ye){return"function"==typeof le.listenerCount?le.listenerCount(ye):ae.call(le,ye)},U.prototype.listenerCount=ae,U.prototype.eventNames=function(){return this._eventsCount>0?k(this._events):[]},typeof Symbol<"u"&&(ke.prototype[Symbol.iterator]=function(){return this}),ke.of=function(){var le=arguments,ye=le.length,de=0;return new ke(function(){return de>=ye?{done:!0}:{done:!1,value:le[de++]}})},ke.empty=function(){return new ke(function(){return{done:!0}})},ke.fromSequence=function(le){var ye=0,de=le.length;return new ke(function(){return ye>=de?{done:!0}:{done:!1,value:le[ye++]}})},ke.is=function(le){return le instanceof ke||"object"==typeof le&&null!==le&&"function"==typeof le.next};var Ye=ke,Qe={};Qe.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",Qe.SYMBOL_SUPPORT=typeof Symbol<"u";var xe=Ye,Ie=Qe.ARRAY_BUFFER_SUPPORT,et=Qe.SYMBOL_SUPPORT,pe=function(le){var de,ye="string"==typeof(de=le)||Array.isArray(de)||Ie&&ArrayBuffer.isView(de)?xe.fromSequence(de):"object"!=typeof de||null===de?null:et&&"function"==typeof de[Symbol.iterator]?de[Symbol.iterator]():"function"==typeof de.next?de:null;if(!ye)throw new Error("obliterator: target is not iterable nor a valid iterator.");return ye},be=pe,nt=function(le,ye){for(var de,T=arguments.length>1?ye:1/0,v=T!==1/0?new Array(T):[],H=0,Y=be(le);;){if(H===T)return v;if((de=Y.next()).done)return H!==ye&&(v.length=H),v;v[H++]=de.value}},_t=function(le){function ye(de){var T;return(T=le.call(this)||this).name="GraphError",T.message=de,T}return M(ye,le),ye}(W(Error)),je=function(le){function ye(de){var T;return(T=le.call(this,de)||this).name="InvalidArgumentsGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(x(T),ye.prototype.constructor),T}return M(ye,le),ye}(_t),Q=function(le){function ye(de){var T;return(T=le.call(this,de)||this).name="NotFoundGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(x(T),ye.prototype.constructor),T}return M(ye,le),ye}(_t),se=function(le){function ye(de){var T;return(T=le.call(this,de)||this).name="UsageGraphError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(x(T),ye.prototype.constructor),T}return M(ye,le),ye}(_t);function Ae(le,ye){this.key=le,this.attributes=ye,this.clear()}function Fe(le,ye){this.key=le,this.attributes=ye,this.clear()}function Te(le,ye){this.key=le,this.attributes=ye,this.clear()}function Je(le,ye,de,T,v){this.key=ye,this.attributes=v,this.undirected=le,this.source=de,this.target=T}function ot(le,ye,de,T,v,H,Y){var De,rt,$e,Mt;if(T=""+T,0===de){if(!(De=le._nodes.get(T)))throw new Q("Graph.".concat(ye,': could not find the "').concat(T,'" node in the graph.'));$e=v,Mt=H}else if(3===de){if(!(rt=le._edges.get(v=""+v)))throw new Q("Graph.".concat(ye,': could not find the "').concat(v,'" edge in the graph.'));var Ct=rt.source.key,Wt=rt.target.key;if(T===Ct)De=rt.target;else{if(T!==Wt)throw new Q("Graph.".concat(ye,': the "').concat(T,'" node is not attached to the "').concat(v,'" edge (').concat(Ct,", ").concat(Wt,")."));De=rt.source}$e=H,Mt=Y}else{if(!(rt=le._edges.get(T)))throw new Q("Graph.".concat(ye,': could not find the "').concat(T,'" edge in the graph.'));De=1===de?rt.source:rt.target,$e=v,Mt=H}return[De,$e,Mt]}Ae.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}},Fe.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}},Te.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}},Je.prototype.attach=function(){var le="out",ye="in";this.undirected&&(le=ye="undirected");var de=this.source.key,T=this.target.key;this.source[le][T]=this,this.undirected&&de===T||(this.target[ye][de]=this)},Je.prototype.attachMulti=function(){var le="out",ye="in",de=this.source.key,T=this.target.key;this.undirected&&(le=ye="undirected");var v=this.source[le],H=v[T];if(void 0===H)return v[T]=this,void(this.undirected&&de===T||(this.target[ye][de]=this));H.previous=this,this.next=H,v[T]=this,this.target[ye][de]=this},Je.prototype.detach=function(){var le=this.source.key,de="out",T="in";this.undirected&&(de=T="undirected"),delete this.source[de][this.target.key],delete this.target[T][le]},Je.prototype.detachMulti=function(){var le=this.source.key,ye=this.target.key,de="out",T="in";this.undirected&&(de=T="undirected"),void 0===this.previous?void 0===this.next?(delete this.source[de][ye],delete this.target[T][le]):(this.next.previous=void 0,this.source[de][ye]=this.next,this.target[T][le]=this.next):(this.previous.next=this.next,void 0!==this.next&&(this.next.previous=this.previous))};var ut=[{name:function(le){return"get".concat(le,"Attribute")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v,H){var Y=ot(this,ye,de,T,v,H);return Y[0].attributes[Y[1]]}}},{name:function(le){return"get".concat(le,"Attributes")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v){return ot(this,ye,de,T,v)[0].attributes}}},{name:function(le){return"has".concat(le,"Attribute")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v,H){var Y=ot(this,ye,de,T,v,H);return Y[0].attributes.hasOwnProperty(Y[1])}}},{name:function(le){return"set".concat(le,"Attribute")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v,H,Y){var De=ot(this,ye,de,T,v,H,Y),rt=De[0],$e=De[1];return rt.attributes[$e]=De[2],this.emit("nodeAttributesUpdated",{key:rt.key,type:"set",attributes:rt.attributes,name:$e}),this}}},{name:function(le){return"update".concat(le,"Attribute")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v,H,Y){var De=ot(this,ye,de,T,v,H,Y),rt=De[0],$e=De[1],Mt=De[2];if("function"!=typeof Mt)throw new je("Graph.".concat(ye,": updater should be a function."));var Ct=rt.attributes,Wt=Mt(Ct[$e]);return Ct[$e]=Wt,this.emit("nodeAttributesUpdated",{key:rt.key,type:"set",attributes:rt.attributes,name:$e}),this}}},{name:function(le){return"remove".concat(le,"Attribute")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v,H){var Y=ot(this,ye,de,T,v,H),De=Y[0],rt=Y[1];return delete De.attributes[rt],this.emit("nodeAttributesUpdated",{key:De.key,type:"remove",attributes:De.attributes,name:rt}),this}}},{name:function(le){return"replace".concat(le,"Attributes")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v,H){var Y=ot(this,ye,de,T,v,H),De=Y[0],rt=Y[1];if(!te(rt))throw new je("Graph.".concat(ye,": provided attributes are not a plain object."));return De.attributes=rt,this.emit("nodeAttributesUpdated",{key:De.key,type:"replace",attributes:De.attributes}),this}}},{name:function(le){return"merge".concat(le,"Attributes")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v,H){var Y=ot(this,ye,de,T,v,H),De=Y[0],rt=Y[1];if(!te(rt))throw new je("Graph.".concat(ye,": provided attributes are not a plain object."));return E(De.attributes,rt),this.emit("nodeAttributesUpdated",{key:De.key,type:"merge",attributes:De.attributes,data:rt}),this}}},{name:function(le){return"update".concat(le,"Attributes")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v,H){var Y=ot(this,ye,de,T,v,H),De=Y[0],rt=Y[1];if("function"!=typeof rt)throw new je("Graph.".concat(ye,": provided updater is not a function."));return De.attributes=rt(De.attributes),this.emit("nodeAttributesUpdated",{key:De.key,type:"update",attributes:De.attributes}),this}}}],Le=[{name:function(le){return"get".concat(le,"Attribute")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v){var H;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new se("Graph.".concat(ye,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new se("Graph.".concat(ye,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Y=""+T,De=""+v;if(v=arguments[2],!(H=N(this,Y,De,de)))throw new Q("Graph.".concat(ye,': could not find an edge for the given path ("').concat(Y,'" - "').concat(De,'").'))}else{if("mixed"!==de)throw new se("Graph.".concat(ye,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(H=this._edges.get(T=""+T)))throw new Q("Graph.".concat(ye,': could not find the "').concat(T,'" edge in the graph.'))}return H.attributes[v]}}},{name:function(le){return"get".concat(le,"Attributes")},attacher:function(le,ye,de){le.prototype[ye]=function(T){var v;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new se("Graph.".concat(ye,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>1){if(this.multi)throw new se("Graph.".concat(ye,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var H=""+T,Y=""+arguments[1];if(!(v=N(this,H,Y,de)))throw new Q("Graph.".concat(ye,': could not find an edge for the given path ("').concat(H,'" - "').concat(Y,'").'))}else{if("mixed"!==de)throw new se("Graph.".concat(ye,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(v=this._edges.get(T=""+T)))throw new Q("Graph.".concat(ye,': could not find the "').concat(T,'" edge in the graph.'))}return v.attributes}}},{name:function(le){return"has".concat(le,"Attribute")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v){var H;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new se("Graph.".concat(ye,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new se("Graph.".concat(ye,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Y=""+T,De=""+v;if(v=arguments[2],!(H=N(this,Y,De,de)))throw new Q("Graph.".concat(ye,': could not find an edge for the given path ("').concat(Y,'" - "').concat(De,'").'))}else{if("mixed"!==de)throw new se("Graph.".concat(ye,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(H=this._edges.get(T=""+T)))throw new Q("Graph.".concat(ye,': could not find the "').concat(T,'" edge in the graph.'))}return H.attributes.hasOwnProperty(v)}}},{name:function(le){return"set".concat(le,"Attribute")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v,H){var Y;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new se("Graph.".concat(ye,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new se("Graph.".concat(ye,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var De=""+T,rt=""+v;if(v=arguments[2],H=arguments[3],!(Y=N(this,De,rt,de)))throw new Q("Graph.".concat(ye,': could not find an edge for the given path ("').concat(De,'" - "').concat(rt,'").'))}else{if("mixed"!==de)throw new se("Graph.".concat(ye,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Y=this._edges.get(T=""+T)))throw new Q("Graph.".concat(ye,': could not find the "').concat(T,'" edge in the graph.'))}return Y.attributes[v]=H,this.emit("edgeAttributesUpdated",{key:Y.key,type:"set",attributes:Y.attributes,name:v}),this}}},{name:function(le){return"update".concat(le,"Attribute")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v,H){var Y;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new se("Graph.".concat(ye,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>3){if(this.multi)throw new se("Graph.".concat(ye,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var De=""+T,rt=""+v;if(v=arguments[2],H=arguments[3],!(Y=N(this,De,rt,de)))throw new Q("Graph.".concat(ye,': could not find an edge for the given path ("').concat(De,'" - "').concat(rt,'").'))}else{if("mixed"!==de)throw new se("Graph.".concat(ye,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(Y=this._edges.get(T=""+T)))throw new Q("Graph.".concat(ye,': could not find the "').concat(T,'" edge in the graph.'))}if("function"!=typeof H)throw new je("Graph.".concat(ye,": updater should be a function."));return Y.attributes[v]=H(Y.attributes[v]),this.emit("edgeAttributesUpdated",{key:Y.key,type:"set",attributes:Y.attributes,name:v}),this}}},{name:function(le){return"remove".concat(le,"Attribute")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v){var H;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new se("Graph.".concat(ye,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new se("Graph.".concat(ye,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Y=""+T,De=""+v;if(v=arguments[2],!(H=N(this,Y,De,de)))throw new Q("Graph.".concat(ye,': could not find an edge for the given path ("').concat(Y,'" - "').concat(De,'").'))}else{if("mixed"!==de)throw new se("Graph.".concat(ye,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(H=this._edges.get(T=""+T)))throw new Q("Graph.".concat(ye,': could not find the "').concat(T,'" edge in the graph.'))}return delete H.attributes[v],this.emit("edgeAttributesUpdated",{key:H.key,type:"remove",attributes:H.attributes,name:v}),this}}},{name:function(le){return"replace".concat(le,"Attributes")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v){var H;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new se("Graph.".concat(ye,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new se("Graph.".concat(ye,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Y=""+T,De=""+v;if(v=arguments[2],!(H=N(this,Y,De,de)))throw new Q("Graph.".concat(ye,': could not find an edge for the given path ("').concat(Y,'" - "').concat(De,'").'))}else{if("mixed"!==de)throw new se("Graph.".concat(ye,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(H=this._edges.get(T=""+T)))throw new Q("Graph.".concat(ye,': could not find the "').concat(T,'" edge in the graph.'))}if(!te(v))throw new je("Graph.".concat(ye,": provided attributes are not a plain object."));return H.attributes=v,this.emit("edgeAttributesUpdated",{key:H.key,type:"replace",attributes:H.attributes}),this}}},{name:function(le){return"merge".concat(le,"Attributes")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v){var H;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new se("Graph.".concat(ye,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new se("Graph.".concat(ye,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Y=""+T,De=""+v;if(v=arguments[2],!(H=N(this,Y,De,de)))throw new Q("Graph.".concat(ye,': could not find an edge for the given path ("').concat(Y,'" - "').concat(De,'").'))}else{if("mixed"!==de)throw new se("Graph.".concat(ye,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(H=this._edges.get(T=""+T)))throw new Q("Graph.".concat(ye,': could not find the "').concat(T,'" edge in the graph.'))}if(!te(v))throw new je("Graph.".concat(ye,": provided attributes are not a plain object."));return E(H.attributes,v),this.emit("edgeAttributesUpdated",{key:H.key,type:"merge",attributes:H.attributes,data:v}),this}}},{name:function(le){return"update".concat(le,"Attributes")},attacher:function(le,ye,de){le.prototype[ye]=function(T,v){var H;if("mixed"!==this.type&&"mixed"!==de&&de!==this.type)throw new se("Graph.".concat(ye,": cannot find this type of edges in your ").concat(this.type," graph."));if(arguments.length>2){if(this.multi)throw new se("Graph.".concat(ye,": cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about."));var Y=""+T,De=""+v;if(v=arguments[2],!(H=N(this,Y,De,de)))throw new Q("Graph.".concat(ye,': could not find an edge for the given path ("').concat(Y,'" - "').concat(De,'").'))}else{if("mixed"!==de)throw new se("Graph.".concat(ye,": calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type."));if(!(H=this._edges.get(T=""+T)))throw new Q("Graph.".concat(ye,': could not find the "').concat(T,'" edge in the graph.'))}if("function"!=typeof v)throw new je("Graph.".concat(ye,": provided updater is not a function."));return H.attributes=v(H.attributes),this.emit("edgeAttributesUpdated",{key:H.key,type:"update",attributes:H.attributes}),this}}}],Z=Ye,O=pe,P=function(){var le=arguments,ye=null,de=-1;return new Z(function(){for(var T=null;;){if(null===ye){if(++de>=le.length)return{done:!0};ye=O(le[de])}if(!0!==(T=ye.next()).done)break;ye=null}return T})},_e=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function ze(le,ye,de,T){var v=!1;for(var H in ye)if(H!==T){var Y=ye[H];if(v=de(Y.key,Y.attributes,Y.source.key,Y.target.key,Y.source.attributes,Y.target.attributes,Y.undirected),le&&v)return Y.key}}function ve(le,ye,de,T){var v,H,Y,De=!1;for(var rt in ye)if(rt!==T){v=ye[rt];do{if(De=de(v.key,v.attributes,(H=v.source).key,(Y=v.target).key,H.attributes,Y.attributes,v.undirected),le&&De)return v.key;v=v.next}while(void 0!==v)}}function Ve(le,ye){var de,T=Object.keys(le),v=T.length,H=0;return new Ye(function(){do{if(de)de=de.next;else{if(H>=v)return{done:!0};var Y=T[H++];if(Y===ye){de=void 0;continue}de=le[Y]}}while(!de);return{done:!1,value:{edge:de.key,attributes:de.attributes,source:de.source.key,target:de.target.key,sourceAttributes:de.source.attributes,targetAttributes:de.target.attributes,undirected:de.undirected}}})}function Ke(le,ye,de,T){var v=ye[de];if(v){var H=v.source,Y=v.target;return T(v.key,v.attributes,H.key,Y.key,H.attributes,Y.attributes,v.undirected)&&le?v.key:void 0}}function vt(le,ye,de,T){var v=ye[de];if(v){var H=!1;do{if(H=T(v.key,v.attributes,v.source.key,v.target.key,v.source.attributes,v.target.attributes,v.undirected),le&&H)return v.key;v=v.next}while(void 0!==v)}}function Ot(le,ye){var de=le[ye];return void 0!==de.next?new Ye(function(){if(!de)return{done:!0};var T={edge:de.key,attributes:de.attributes,source:de.source.key,target:de.target.key,sourceAttributes:de.source.attributes,targetAttributes:de.target.attributes,undirected:de.undirected};return de=de.next,{done:!1,value:T}}):Ye.of({edge:de.key,attributes:de.attributes,source:de.source.key,target:de.target.key,sourceAttributes:de.source.attributes,targetAttributes:de.target.attributes,undirected:de.undirected})}function Bt(le,ye,de,T){if(0!==ye.size)for(var v,H,Y="mixed"!==de&&de!==ye.type,De="undirected"===de,rt=!1,$e=ye._edges.values();!0!==(v=$e.next()).done;)if(H=v.value,!Y||H.undirected===De){var Ct=H.key,Ht=H.source,on=H.target;if(rt=T(Ct,H.attributes,Ht.key,on.key,Ht.attributes,on.attributes,H.undirected),le&&rt)return Ct}}function B(le,ye,de,T,v,H){var Y,De=ye?ve:ze;if("undirected"!==de&&("out"!==T&&(Y=De(le,v.in,H),le&&Y)||"in"!==T&&(Y=De(le,v.out,H,T?void 0:v.key),le&&Y))||"directed"!==de&&(Y=De(le,v.undirected,H),le&&Y))return Y}function Ze(le,ye,de,T,v,H,Y){var De,rt=de?vt:Ke;if("undirected"!==ye&&(void 0!==v.in&&"out"!==T&&(De=rt(le,v.in,H,Y),le&&De)||void 0!==v.out&&"in"!==T&&(T||v.key!==H)&&(De=rt(le,v.out,H,Y),le&&De))||"directed"!==ye&&void 0!==v.undirected&&(De=rt(le,v.undirected,H,Y),le&&De))return De}var Qt=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function gn(){this.A=null,this.B=null}function In(le,ye,de,T,v){for(var H in T){var Y=T[H],De=Y.source,$e=De===de?Y.target:De;if(!ye||!ye.has($e.key)){var Mt=v($e.key,$e.attributes);if(le&&Mt)return $e.key}}}function un(le,ye,de,T,v){if("mixed"!==ye){if("undirected"===ye)return In(le,null,T,T.undirected,v);if("string"==typeof de)return In(le,null,T,T[de],v)}var H,Y=new gn;if("undirected"!==ye){if("out"!==de){if(H=In(le,null,T,T.in,v),le&&H)return H;Y.wrap(T.in)}if("in"!==de){if(H=In(le,Y,T,T.out,v),le&&H)return H;Y.wrap(T.out)}}if("directed"!==ye&&(H=In(le,Y,T,T.undirected,v),le&&H))return H}function rn(le,ye,de){var T=Object.keys(de),v=T.length,H=0;return new Ye(function(){var Y=null;do{if(H>=v)return le&&le.wrap(de),{done:!0};var De=de[T[H++]],rt=De.source;Y=rt===ye?De.target:rt,le&&le.has(Y.key)&&(Y=null)}while(null===Y);return{done:!1,value:{neighbor:Y.key,attributes:Y.attributes}}})}function fi(le,ye,de,T,v){for(var H,Y,De,rt,$e,Mt,Ct,Wt=T._nodes.values(),Ht=T.type;!0!==(H=Wt.next()).done;){var on=!1;if(Y=H.value,"undirected"!==Ht)for(De in rt=Y.out){$e=rt[De];do{if(on=!0,Ct=v(Y.key,(Mt=$e.target).key,Y.attributes,Mt.attributes,$e.key,$e.attributes,$e.undirected),le&&Ct)return $e;$e=$e.next}while($e)}if("directed"!==Ht)for(De in rt=Y.undirected)if(!(ye&&Y.key>De)){$e=rt[De];do{if((Mt=$e.target).key!==De&&(Mt=$e.source),on=!0,Ct=v(Y.key,Mt.key,Y.attributes,Mt.attributes,$e.key,$e.attributes,$e.undirected),le&&Ct)return $e;$e=$e.next}while($e)}if(de&&!on&&(Ct=v(Y.key,null,Y.attributes,null,null,null,null),le&&Ct))return null}}function ai(le){if(!te(le))throw new je('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in le))throw new je("Graph.import: serialized node is missing its key.");if("attributes"in le&&(!te(le.attributes)||null===le.attributes))throw new je("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function vi(le){if(!te(le))throw new je('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in le))throw new je("Graph.import: serialized edge is missing its source.");if(!("target"in le))throw new je("Graph.import: serialized edge is missing its target.");if("attributes"in le&&(!te(le.attributes)||null===le.attributes))throw new je("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in le&&"boolean"!=typeof le.undirected)throw new je("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}gn.prototype.wrap=function(le){null===this.A?this.A=le:null===this.B&&(this.B=le)},gn.prototype.has=function(le){return null!==this.A&&le in this.A||null!==this.B&&le in this.B};var ji,$i=(ji=255&Math.floor(256*Math.random()),function(){return ji++}),Xs=new Set(["directed","undirected","mixed"]),ia=new Set(["domain","_events","_eventsCount","_maxListeners"]),Ys={allowSelfLoops:!0,multi:!1,type:"mixed"};function Uo(le,ye,de){var T=new le.NodeDataClass(ye,de);return le._nodes.set(ye,T),le.emit("nodeAdded",{key:ye,attributes:de}),T}function Vo(le,ye,de,T,v,H,Y,De){if(!T&&"undirected"===le.type)throw new se("Graph.".concat(ye,": you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead."));if(T&&"directed"===le.type)throw new se("Graph.".concat(ye,": you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead."));if(De&&!te(De))throw new je("Graph.".concat(ye,': invalid attributes. Expecting an object but got "').concat(De,'"'));if(H=""+H,Y=""+Y,De=De||{},!le.allowSelfLoops&&H===Y)throw new se("Graph.".concat(ye,': source & target are the same ("').concat(H,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var rt=le._nodes.get(H),$e=le._nodes.get(Y);if(!rt)throw new Q("Graph.".concat(ye,': source node "').concat(H,'" not found.'));if(!$e)throw new Q("Graph.".concat(ye,': target node "').concat(Y,'" not found.'));var Mt={key:null,undirected:T,source:H,target:Y,attributes:De};if(de)v=le._edgeKeyGenerator();else if(le._edges.has(v=""+v))throw new se("Graph.".concat(ye,': the "').concat(v,'" edge already exists in the graph.'));if(!le.multi&&(T?void 0!==rt.undirected[Y]:void 0!==rt.out[Y]))throw new se("Graph.".concat(ye,': an edge linking "').concat(H,'" to "').concat(Y,"\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option."));var Ct=new Je(T,v,rt,$e,De);le._edges.set(v,Ct);var Wt=H===Y;return T?(rt.undirectedDegree++,$e.undirectedDegree++,Wt&&(rt.undirectedLoops++,le._undirectedSelfLoopCount++)):(rt.outDegree++,$e.inDegree++,Wt&&(rt.directedLoops++,le._directedSelfLoopCount++)),le.multi?Ct.attachMulti():Ct.attach(),T?le._undirectedSize++:le._directedSize++,Mt.key=v,le.emit("edgeAdded",Mt),v}function He(le,ye,de,T,v,H,Y,De,rt){if(!T&&"undirected"===le.type)throw new se("Graph.".concat(ye,": you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead."));if(T&&"directed"===le.type)throw new se("Graph.".concat(ye,": you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead."));if(De)if(rt){if("function"!=typeof De)throw new je("Graph.".concat(ye,': invalid updater function. Expecting a function but got "').concat(De,'"'))}else if(!te(De))throw new je("Graph.".concat(ye,': invalid attributes. Expecting an object but got "').concat(De,'"'));var $e;if(H=""+H,Y=""+Y,rt&&($e=De,De=void 0),!le.allowSelfLoops&&H===Y)throw new se("Graph.".concat(ye,': source & target are the same ("').concat(H,"\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false."));var Mt,Ct,Wt=le._nodes.get(H),Ht=le._nodes.get(Y);if(!de&&(Mt=le._edges.get(v))){if(!(Mt.source.key===H&&Mt.target.key===Y||T&&Mt.source.key===Y&&Mt.target.key===H))throw new se("Graph.".concat(ye,': inconsistency detected when attempting to merge the "').concat(v,'" edge with "').concat(H,'" source & "').concat(Y,'" target vs. ("').concat(Mt.source.key,'", "').concat(Mt.target.key,'").'));Ct=Mt}if(Ct||le.multi||!Wt||(Ct=T?Wt.undirected[Y]:Wt.out[Y]),Ct){var on=[Ct.key,!1,!1,!1];return(rt?$e:De)?(rt?(Ct.attributes=$e(Ct.attributes),le.emit("edgeAttributesUpdated",{type:"replace",key:Ct.key,attributes:Ct.attributes})):(E(Ct.attributes,De),le.emit("edgeAttributesUpdated",{type:"merge",key:Ct.key,attributes:Ct.attributes,data:De})),on):on}De=De||{},rt&&$e&&(De=$e(De));var Pn={key:null,undirected:T,source:H,target:Y,attributes:De};if(de)v=le._edgeKeyGenerator();else if(le._edges.has(v=""+v))throw new se("Graph.".concat(ye,': the "').concat(v,'" edge already exists in the graph.'));var bi=!1,ni=!1;Wt||(Wt=Uo(le,H,{}),bi=!0,H===Y&&(Ht=Wt,ni=!0)),Ht||(Ht=Uo(le,Y,{}),ni=!0),Mt=new Je(T,v,Wt,Ht,De),le._edges.set(v,Mt);var Ci=H===Y;return T?(Wt.undirectedDegree++,Ht.undirectedDegree++,Ci&&(Wt.undirectedLoops++,le._undirectedSelfLoopCount++)):(Wt.outDegree++,Ht.inDegree++,Ci&&(Wt.directedLoops++,le._directedSelfLoopCount++)),le.multi?Mt.attachMulti():Mt.attach(),T?le._undirectedSize++:le._directedSize++,Pn.key=v,le.emit("edgeAdded",Pn),[v,!0,bi,ni]}function qe(le,ye){le._edges.delete(ye.key);var de=ye.source,T=ye.target,v=ye.attributes,H=ye.undirected,Y=de===T;H?(de.undirectedDegree--,T.undirectedDegree--,Y&&(de.undirectedLoops--,le._undirectedSelfLoopCount--)):(de.outDegree--,T.inDegree--,Y&&(de.directedLoops--,le._directedSelfLoopCount--)),le.multi?ye.detachMulti():ye.detach(),H?le._undirectedSize--:le._directedSize--,le.emit("edgeDropped",{key:ye.key,attributes:v,source:de.key,target:T.key,undirected:H})}var le,Nt=function(le){function ye(T){var v;if(v=le.call(this)||this,"boolean"!=typeof(T=E({},Ys,T)).multi)throw new je("Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"".concat(T.multi,'".'));if(!Xs.has(T.type))throw new je('Graph.constructor: invalid \'type\' option. Should be one of "mixed", "directed" or "undirected" but got "'.concat(T.type,'".'));if("boolean"!=typeof T.allowSelfLoops)throw new je("Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"".concat(T.allowSelfLoops,'".'));var H="mixed"===T.type?Ae:"directed"===T.type?Fe:Te;C(x(v),"NodeDataClass",H);var Y="geid_"+$i()+"_",De=0;return C(x(v),"_attributes",{}),C(x(v),"_nodes",new Map),C(x(v),"_edges",new Map),C(x(v),"_directedSize",0),C(x(v),"_undirectedSize",0),C(x(v),"_directedSelfLoopCount",0),C(x(v),"_undirectedSelfLoopCount",0),C(x(v),"_edgeKeyGenerator",function(){var rt;do{rt=Y+De++}while(v._edges.has(rt));return rt}),C(x(v),"_options",T),ia.forEach(function(rt){return C(x(v),rt,v[rt])}),oe(x(v),"order",function(){return v._nodes.size}),oe(x(v),"size",function(){return v._edges.size}),oe(x(v),"directedSize",function(){return v._directedSize}),oe(x(v),"undirectedSize",function(){return v._undirectedSize}),oe(x(v),"selfLoopCount",function(){return v._directedSelfLoopCount+v._undirectedSelfLoopCount}),oe(x(v),"directedSelfLoopCount",function(){return v._directedSelfLoopCount}),oe(x(v),"undirectedSelfLoopCount",function(){return v._undirectedSelfLoopCount}),oe(x(v),"multi",v._options.multi),oe(x(v),"type",v._options.type),oe(x(v),"allowSelfLoops",v._options.allowSelfLoops),oe(x(v),"implementation",function(){return"graphology"}),v}M(ye,le);var de=ye.prototype;return de._resetInstanceCounters=function(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0},de.hasNode=function(T){return this._nodes.has(""+T)},de.hasDirectedEdge=function(T,v){if("undirected"===this.type)return!1;if(1===arguments.length){var Y=this._edges.get(""+T);return!!Y&&!Y.undirected}if(2===arguments.length){v=""+v;var De=this._nodes.get(T=""+T);return!!De&&De.out.hasOwnProperty(v)}throw new je("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},de.hasUndirectedEdge=function(T,v){if("directed"===this.type)return!1;if(1===arguments.length){var Y=this._edges.get(""+T);return!!Y&&Y.undirected}if(2===arguments.length){v=""+v;var De=this._nodes.get(T=""+T);return!!De&&De.undirected.hasOwnProperty(v)}throw new je("Graph.hasDirectedEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},de.hasEdge=function(T,v){if(1===arguments.length)return this._edges.has(""+T);if(2===arguments.length){v=""+v;var Y=this._nodes.get(T=""+T);return!!Y&&(void 0!==Y.out&&Y.out.hasOwnProperty(v)||void 0!==Y.undirected&&Y.undirected.hasOwnProperty(v))}throw new je("Graph.hasEdge: invalid arity (".concat(arguments.length,", instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target."))},de.directedEdge=function(T,v){if("undirected"!==this.type){if(T=""+T,v=""+v,this.multi)throw new se("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");var H=this._nodes.get(T);if(!H)throw new Q('Graph.directedEdge: could not find the "'.concat(T,'" source node in the graph.'));if(!this._nodes.has(v))throw new Q('Graph.directedEdge: could not find the "'.concat(v,'" target node in the graph.'));var Y=H.out&&H.out[v]||void 0;return Y?Y.key:void 0}},de.undirectedEdge=function(T,v){if("directed"!==this.type){if(T=""+T,v=""+v,this.multi)throw new se("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");var H=this._nodes.get(T);if(!H)throw new Q('Graph.undirectedEdge: could not find the "'.concat(T,'" source node in the graph.'));if(!this._nodes.has(v))throw new Q('Graph.undirectedEdge: could not find the "'.concat(v,'" target node in the graph.'));var Y=H.undirected&&H.undirected[v]||void 0;return Y?Y.key:void 0}},de.edge=function(T,v){if(this.multi)throw new se("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");v=""+v;var H=this._nodes.get(T=""+T);if(!H)throw new Q('Graph.edge: could not find the "'.concat(T,'" source node in the graph.'));if(!this._nodes.has(v))throw new Q('Graph.edge: could not find the "'.concat(v,'" target node in the graph.'));var Y=H.out&&H.out[v]||H.undirected&&H.undirected[v]||void 0;if(Y)return Y.key},de.areDirectedNeighbors=function(T,v){v=""+v;var H=this._nodes.get(T=""+T);if(!H)throw new Q('Graph.areDirectedNeighbors: could not find the "'.concat(T,'" node in the graph.'));return"undirected"!==this.type&&(v in H.in||v in H.out)},de.areOutNeighbors=function(T,v){v=""+v;var H=this._nodes.get(T=""+T);if(!H)throw new Q('Graph.areOutNeighbors: could not find the "'.concat(T,'" node in the graph.'));return"undirected"!==this.type&&v in H.out},de.areInNeighbors=function(T,v){v=""+v;var H=this._nodes.get(T=""+T);if(!H)throw new Q('Graph.areInNeighbors: could not find the "'.concat(T,'" node in the graph.'));return"undirected"!==this.type&&v in H.in},de.areUndirectedNeighbors=function(T,v){v=""+v;var H=this._nodes.get(T=""+T);if(!H)throw new Q('Graph.areUndirectedNeighbors: could not find the "'.concat(T,'" node in the graph.'));return"directed"!==this.type&&v in H.undirected},de.areNeighbors=function(T,v){v=""+v;var H=this._nodes.get(T=""+T);if(!H)throw new Q('Graph.areNeighbors: could not find the "'.concat(T,'" node in the graph.'));return"undirected"!==this.type&&(v in H.in||v in H.out)||"directed"!==this.type&&v in H.undirected},de.areInboundNeighbors=function(T,v){v=""+v;var H=this._nodes.get(T=""+T);if(!H)throw new Q('Graph.areInboundNeighbors: could not find the "'.concat(T,'" node in the graph.'));return"undirected"!==this.type&&v in H.in||"directed"!==this.type&&v in H.undirected},de.areOutboundNeighbors=function(T,v){v=""+v;var H=this._nodes.get(T=""+T);if(!H)throw new Q('Graph.areOutboundNeighbors: could not find the "'.concat(T,'" node in the graph.'));return"undirected"!==this.type&&v in H.out||"directed"!==this.type&&v in H.undirected},de.inDegree=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.inDegree: could not find the "'.concat(T,'" node in the graph.'));return"undirected"===this.type?0:v.inDegree},de.outDegree=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.outDegree: could not find the "'.concat(T,'" node in the graph.'));return"undirected"===this.type?0:v.outDegree},de.directedDegree=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.directedDegree: could not find the "'.concat(T,'" node in the graph.'));return"undirected"===this.type?0:v.inDegree+v.outDegree},de.undirectedDegree=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.undirectedDegree: could not find the "'.concat(T,'" node in the graph.'));return"directed"===this.type?0:v.undirectedDegree},de.inboundDegree=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.inboundDegree: could not find the "'.concat(T,'" node in the graph.'));var H=0;return"directed"!==this.type&&(H+=v.undirectedDegree),"undirected"!==this.type&&(H+=v.inDegree),H},de.outboundDegree=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.outboundDegree: could not find the "'.concat(T,'" node in the graph.'));var H=0;return"directed"!==this.type&&(H+=v.undirectedDegree),"undirected"!==this.type&&(H+=v.outDegree),H},de.degree=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.degree: could not find the "'.concat(T,'" node in the graph.'));var H=0;return"directed"!==this.type&&(H+=v.undirectedDegree),"undirected"!==this.type&&(H+=v.inDegree+v.outDegree),H},de.inDegreeWithoutSelfLoops=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.inDegreeWithoutSelfLoops: could not find the "'.concat(T,'" node in the graph.'));return"undirected"===this.type?0:v.inDegree-v.directedLoops},de.outDegreeWithoutSelfLoops=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.outDegreeWithoutSelfLoops: could not find the "'.concat(T,'" node in the graph.'));return"undirected"===this.type?0:v.outDegree-v.directedLoops},de.directedDegreeWithoutSelfLoops=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.directedDegreeWithoutSelfLoops: could not find the "'.concat(T,'" node in the graph.'));return"undirected"===this.type?0:v.inDegree+v.outDegree-2*v.directedLoops},de.undirectedDegreeWithoutSelfLoops=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.undirectedDegreeWithoutSelfLoops: could not find the "'.concat(T,'" node in the graph.'));return"directed"===this.type?0:v.undirectedDegree-2*v.undirectedLoops},de.inboundDegreeWithoutSelfLoops=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.inboundDegreeWithoutSelfLoops: could not find the "'.concat(T,'" node in the graph.'));var H=0,Y=0;return"directed"!==this.type&&(H+=v.undirectedDegree,Y+=2*v.undirectedLoops),"undirected"!==this.type&&(H+=v.inDegree,Y+=v.directedLoops),H-Y},de.outboundDegreeWithoutSelfLoops=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.outboundDegreeWithoutSelfLoops: could not find the "'.concat(T,'" node in the graph.'));var H=0,Y=0;return"directed"!==this.type&&(H+=v.undirectedDegree,Y+=2*v.undirectedLoops),"undirected"!==this.type&&(H+=v.outDegree,Y+=v.directedLoops),H-Y},de.degreeWithoutSelfLoops=function(T){var v=this._nodes.get(T=""+T);if(!v)throw new Q('Graph.degreeWithoutSelfLoops: could not find the "'.concat(T,'" node in the graph.'));var H=0,Y=0;return"directed"!==this.type&&(H+=v.undirectedDegree,Y+=2*v.undirectedLoops),"undirected"!==this.type&&(H+=v.inDegree+v.outDegree,Y+=2*v.directedLoops),H-Y},de.source=function(T){var v=this._edges.get(T=""+T);if(!v)throw new Q('Graph.source: could not find the "'.concat(T,'" edge in the graph.'));return v.source.key},de.target=function(T){var v=this._edges.get(T=""+T);if(!v)throw new Q('Graph.target: could not find the "'.concat(T,'" edge in the graph.'));return v.target.key},de.extremities=function(T){var v=this._edges.get(T=""+T);if(!v)throw new Q('Graph.extremities: could not find the "'.concat(T,'" edge in the graph.'));return[v.source.key,v.target.key]},de.opposite=function(T,v){T=""+T;var H=this._edges.get(v=""+v);if(!H)throw new Q('Graph.opposite: could not find the "'.concat(v,'" edge in the graph.'));var Y=H.source.key,De=H.target.key;if(T===Y)return De;if(T===De)return Y;throw new Q('Graph.opposite: the "'.concat(T,'" node is not attached to the "').concat(v,'" edge (').concat(Y,", ").concat(De,")."))},de.hasExtremity=function(T,v){v=""+v;var H=this._edges.get(T=""+T);if(!H)throw new Q('Graph.hasExtremity: could not find the "'.concat(T,'" edge in the graph.'));return H.source.key===v||H.target.key===v},de.isUndirected=function(T){var v=this._edges.get(T=""+T);if(!v)throw new Q('Graph.isUndirected: could not find the "'.concat(T,'" edge in the graph.'));return v.undirected},de.isDirected=function(T){var v=this._edges.get(T=""+T);if(!v)throw new Q('Graph.isDirected: could not find the "'.concat(T,'" edge in the graph.'));return!v.undirected},de.isSelfLoop=function(T){var v=this._edges.get(T=""+T);if(!v)throw new Q('Graph.isSelfLoop: could not find the "'.concat(T,'" edge in the graph.'));return v.source===v.target},de.addNode=function(T,v){return function(Y,De,rt){if(rt&&!te(rt))throw new je('Graph.addNode: invalid attributes. Expecting an object but got "'.concat(rt,'"'));if(rt=rt||{},Y._nodes.has(De=""+De))throw new se('Graph.addNode: the "'.concat(De,'" node already exist in the graph.'));var $e=new Y.NodeDataClass(De,rt);return Y._nodes.set(De,$e),Y.emit("nodeAdded",{key:De,attributes:rt}),$e}(this,T,v).key},de.mergeNode=function(T,v){if(v&&!te(v))throw new je('Graph.mergeNode: invalid attributes. Expecting an object but got "'.concat(v,'"'));v=v||{};var H=this._nodes.get(T=""+T);return H?(v&&(E(H.attributes,v),this.emit("nodeAttributesUpdated",{type:"merge",key:T,attributes:H.attributes,data:v})),[T,!1]):(H=new this.NodeDataClass(T,v),this._nodes.set(T,H),this.emit("nodeAdded",{key:T,attributes:v}),[T,!0])},de.updateNode=function(T,v){if(v&&"function"!=typeof v)throw new je('Graph.updateNode: invalid updater function. Expecting a function but got "'.concat(v,'"'));var H=this._nodes.get(T=""+T);if(H)return v&&(H.attributes=v(H.attributes),this.emit("nodeAttributesUpdated",{type:"replace",key:T,attributes:H.attributes})),[T,!1];var De=v?v({}):{};return H=new this.NodeDataClass(T,De),this._nodes.set(T,H),this.emit("nodeAdded",{key:T,attributes:De}),[T,!0]},de.dropNode=function(T){var v,H=this._nodes.get(T=""+T);if(!H)throw new Q('Graph.dropNode: could not find the "'.concat(T,'" node in the graph.'));if("undirected"!==this.type){for(var Y in H.out){v=H.out[Y];do{qe(this,v),v=v.next}while(v)}for(var De in H.in){v=H.in[De];do{qe(this,v),v=v.next}while(v)}}if("directed"!==this.type)for(var rt in H.undirected){v=H.undirected[rt];do{qe(this,v),v=v.next}while(v)}this._nodes.delete(T),this.emit("nodeDropped",{key:T,attributes:H.attributes})},de.dropEdge=function(T){var v;if(arguments.length>1){var H=""+arguments[0],Y=""+arguments[1];if(!(v=N(this,H,Y,this.type)))throw new Q('Graph.dropEdge: could not find the "'.concat(H,'" -> "').concat(Y,'" edge in the graph.'))}else if(!(v=this._edges.get(T=""+T)))throw new Q('Graph.dropEdge: could not find the "'.concat(T,'" edge in the graph.'));return qe(this,v),this},de.dropDirectedEdge=function(T,v){if(arguments.length<2)throw new se("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new se("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var H=N(this,T=""+T,v=""+v,"directed");if(!H)throw new Q('Graph.dropDirectedEdge: could not find a "'.concat(T,'" -> "').concat(v,'" edge in the graph.'));return qe(this,H),this},de.dropUndirectedEdge=function(T,v){if(arguments.length<2)throw new se("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new se("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");var H=N(this,T,v,"undirected");if(!H)throw new Q('Graph.dropUndirectedEdge: could not find a "'.concat(T,'" -> "').concat(v,'" edge in the graph.'));return qe(this,H),this},de.clear=function(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")},de.clearEdges=function(){for(var T,v=this._nodes.values();!0!==(T=v.next()).done;)T.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")},de.getAttribute=function(T){return this._attributes[T]},de.getAttributes=function(){return this._attributes},de.hasAttribute=function(T){return this._attributes.hasOwnProperty(T)},de.setAttribute=function(T,v){return this._attributes[T]=v,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:T}),this},de.updateAttribute=function(T,v){if("function"!=typeof v)throw new je("Graph.updateAttribute: updater should be a function.");return this._attributes[T]=v(this._attributes[T]),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:T}),this},de.removeAttribute=function(T){return delete this._attributes[T],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:T}),this},de.replaceAttributes=function(T){if(!te(T))throw new je("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=T,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this},de.mergeAttributes=function(T){if(!te(T))throw new je("Graph.mergeAttributes: provided attributes are not a plain object.");return E(this._attributes,T),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:T}),this},de.updateAttributes=function(T){if("function"!=typeof T)throw new je("Graph.updateAttributes: provided updater is not a function.");return this._attributes=T(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this},de.updateEachNodeAttributes=function(T,v){if("function"!=typeof T)throw new je("Graph.updateEachNodeAttributes: expecting an updater function.");if(v&&!S(v))throw new je("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var H,Y,De=this._nodes.values();!0!==(H=De.next()).done;)(Y=H.value).attributes=T(Y.key,Y.attributes);this.emit("eachNodeAttributesUpdated",{hints:v||null})},de.updateEachEdgeAttributes=function(T,v){if("function"!=typeof T)throw new je("Graph.updateEachEdgeAttributes: expecting an updater function.");if(v&&!S(v))throw new je("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");for(var H,Y,De,rt,$e=this._edges.values();!0!==(H=$e.next()).done;)De=(Y=H.value).source,Y.attributes=T(Y.key,Y.attributes,De.key,(rt=Y.target).key,De.attributes,rt.attributes,Y.undirected);this.emit("eachEdgeAttributesUpdated",{hints:v||null})},de.forEachAdjacencyEntry=function(T){if("function"!=typeof T)throw new je("Graph.forEachAdjacencyEntry: expecting a callback.");fi(!1,!1,!1,this,T)},de.forEachAdjacencyEntryWithOrphans=function(T){if("function"!=typeof T)throw new je("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");fi(!1,!1,!0,this,T)},de.forEachAssymetricAdjacencyEntry=function(T){if("function"!=typeof T)throw new je("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");fi(!1,!0,!1,this,T)},de.forEachAssymetricAdjacencyEntryWithOrphans=function(T){if("function"!=typeof T)throw new je("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");fi(!1,!0,!0,this,T)},de.nodes=function(){return"function"==typeof Array.from?Array.from(this._nodes.keys()):nt(this._nodes.keys(),this._nodes.size)},de.forEachNode=function(T){if("function"!=typeof T)throw new je("Graph.forEachNode: expecting a callback.");for(var v,H,Y=this._nodes.values();!0!==(v=Y.next()).done;)T((H=v.value).key,H.attributes)},de.findNode=function(T){if("function"!=typeof T)throw new je("Graph.findNode: expecting a callback.");for(var v,H,Y=this._nodes.values();!0!==(v=Y.next()).done;)if(T((H=v.value).key,H.attributes))return H.key},de.mapNodes=function(T){if("function"!=typeof T)throw new je("Graph.mapNode: expecting a callback.");for(var v,H,Y=this._nodes.values(),De=new Array(this.order),rt=0;!0!==(v=Y.next()).done;)De[rt++]=T((H=v.value).key,H.attributes);return De},de.someNode=function(T){if("function"!=typeof T)throw new je("Graph.someNode: expecting a callback.");for(var v,H,Y=this._nodes.values();!0!==(v=Y.next()).done;)if(T((H=v.value).key,H.attributes))return!0;return!1},de.everyNode=function(T){if("function"!=typeof T)throw new je("Graph.everyNode: expecting a callback.");for(var v,H,Y=this._nodes.values();!0!==(v=Y.next()).done;)if(!T((H=v.value).key,H.attributes))return!1;return!0},de.filterNodes=function(T){if("function"!=typeof T)throw new je("Graph.filterNodes: expecting a callback.");for(var v,H,Y=this._nodes.values(),De=[];!0!==(v=Y.next()).done;)T((H=v.value).key,H.attributes)&&De.push(H.key);return De},de.reduceNodes=function(T,v){if("function"!=typeof T)throw new je("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new je("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");for(var H,Y,De=v,rt=this._nodes.values();!0!==(H=rt.next()).done;)De=T(De,(Y=H.value).key,Y.attributes);return De},de.nodeEntries=function(){var T=this._nodes.values();return new Ye(function(){var v=T.next();if(v.done)return v;var H=v.value;return{value:{node:H.key,attributes:H.attributes},done:!1}})},de.export=function(){var T=this,v=new Array(this._nodes.size),H=0;this._nodes.forEach(function(De,rt){var Mt,Ct;v[H++]=(Ct={key:rt},F((Mt=De).attributes)||(Ct.attributes=E({},Mt.attributes)),Ct)});var Y=new Array(this._edges.size);return H=0,this._edges.forEach(function(De,rt){var $e,Ct,Wt;Y[H++]=($e=T.type,Wt={key:rt,source:(Ct=De).source.key,target:Ct.target.key},F(Ct.attributes)||(Wt.attributes=E({},Ct.attributes)),"mixed"===$e&&Ct.undirected&&(Wt.undirected=!0),Wt)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:v,edges:Y}},de.import=function(T){var v,H,Y,De,rt,$e=this,Mt=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(T instanceof ye)return T.forEachNode(function(Ur,hr){Mt?$e.mergeNode(Ur,hr):$e.addNode(Ur,hr)}),T.forEachEdge(function(Ur,hr,fs,Bn,Yl,mh,Kn){Mt?Kn?$e.mergeUndirectedEdgeWithKey(Ur,fs,Bn,hr):$e.mergeDirectedEdgeWithKey(Ur,fs,Bn,hr):Kn?$e.addUndirectedEdgeWithKey(Ur,fs,Bn,hr):$e.addDirectedEdgeWithKey(Ur,fs,Bn,hr)}),this;if(!te(T))throw new je("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(T.attributes){if(!te(T.attributes))throw new je("Graph.import: invalid attributes. Expecting a plain object.");Mt?this.mergeAttributes(T.attributes):this.replaceAttributes(T.attributes)}if(T.nodes){if(Y=T.nodes,!Array.isArray(Y))throw new je("Graph.import: invalid nodes. Expecting an array.");for(v=0,H=Y.length;v<H;v++){ai(De=Y[v]);var Wt=De.key,Ht=De.attributes;Mt?this.mergeNode(Wt,Ht):this.addNode(Wt,Ht)}}if(T.edges){var on=!1;if("undirected"===this.type&&(on=!0),Y=T.edges,!Array.isArray(Y))throw new je("Graph.import: invalid edges. Expecting an array.");for(v=0,H=Y.length;v<H;v++){vi(rt=Y[v]);var Pn=rt.source,bi=rt.target,ni=rt.attributes,Ci=rt.undirected,hs=void 0===Ci?on:Ci;"key"in rt?(Mt?hs?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:hs?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey).call(this,rt.key,Pn,bi,ni):(Mt?hs?this.mergeUndirectedEdge:this.mergeDirectedEdge:hs?this.addUndirectedEdge:this.addDirectedEdge).call(this,Pn,bi,ni)}}return this},de.nullCopy=function(T){var v=new ye(E({},this._options,T));return v.replaceAttributes(E({},this.getAttributes())),v},de.emptyCopy=function(T){var v=this.nullCopy(T);return this._nodes.forEach(function(H,Y){var De=E({},H.attributes);H=new v.NodeDataClass(Y,De),v._nodes.set(Y,H)}),v},de.copy=function(T){if("string"==typeof(T=T||{}).type&&T.type!==this.type&&"mixed"!==T.type)throw new se('Graph.copy: cannot create an incompatible copy from "'.concat(this.type,'" type to "').concat(T.type,'" because this would mean losing information about the current graph.'));if("boolean"==typeof T.multi&&T.multi!==this.multi&&!0!==T.multi)throw new se("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if("boolean"==typeof T.allowSelfLoops&&T.allowSelfLoops!==this.allowSelfLoops&&!0!==T.allowSelfLoops)throw new se("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");for(var v,H,Y=this.emptyCopy(T),De=this._edges.values();!0!==(v=De.next()).done;)Vo(Y,"copy",!1,(H=v.value).undirected,H.key,H.source.key,H.target.key,E({},H.attributes));return Y},de.toJSON=function(){return this.export()},de.toString=function(){return"[object Graph]"},de.inspect=function(){var T=this,v={};this._nodes.forEach(function($e,Mt){v[Mt]=$e.attributes});var H={},Y={};this._edges.forEach(function($e,Mt){var Ct,Wt=$e.undirected?"--":"->",Ht="",on=$e.source.key,jn=$e.target.key;$e.undirected&&on>jn&&(Ct=on,on=jn,jn=Ct);var Pn="(".concat(on,")").concat(Wt,"(").concat(jn,")");Mt.startsWith("geid_")?T.multi&&(void 0===Y[Pn]?Y[Pn]=0:Y[Pn]++,Ht+="".concat(Y[Pn],". ")):Ht+="[".concat(Mt,"]: "),H[Ht+=Pn]=$e.attributes});var De={};for(var rt in this)this.hasOwnProperty(rt)&&!ia.has(rt)&&"function"!=typeof this[rt]&&"symbol"!==ne(rt)&&(De[rt]=this[rt]);return De.attributes=this._attributes,De.nodes=v,De.edges=H,C(De,"constructor",this.constructor),De},ye}(ce.exports.EventEmitter);typeof Symbol<"u"&&(Nt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Nt.prototype.inspect),[{name:function(le){return"".concat(le,"Edge")},generateKey:!0},{name:function(le){return"".concat(le,"DirectedEdge")},generateKey:!0,type:"directed"},{name:function(le){return"".concat(le,"UndirectedEdge")},generateKey:!0,type:"undirected"},{name:function(le){return"".concat(le,"EdgeWithKey")}},{name:function(le){return"".concat(le,"DirectedEdgeWithKey")},type:"directed"},{name:function(le){return"".concat(le,"UndirectedEdgeWithKey")},type:"undirected"}].forEach(function(le){["add","merge","update"].forEach(function(ye){var de=le.name(ye),T="add"===ye?Vo:He;Nt.prototype[de]=le.generateKey?function(v,H,Y){return T(this,de,!0,"undirected"===(le.type||this.type),null,v,H,Y,"update"===ye)}:function(v,H,Y,De){return T(this,de,!1,"undirected"===(le.type||this.type),v,H,Y,De,"update"===ye)}})}),le=Nt,ut.forEach(function(ye){var de=ye.name,T=ye.attacher;T(le,de("Node"),0),T(le,de("Source"),1),T(le,de("Target"),2),T(le,de("Opposite"),3)}),function(le){Le.forEach(function(ye){var de=ye.name,T=ye.attacher;T(le,de("Edge"),"mixed"),T(le,de("DirectedEdge"),"directed"),T(le,de("UndirectedEdge"),"undirected")})}(Nt),function(le){_e.forEach(function(ye){var T,v,H,Y;H=(T=ye).type,Y=T.direction,le.prototype[v=T.name]=function(De,rt){if("mixed"!==H&&"mixed"!==this.type&&H!==this.type)return[];if(!arguments.length)return function Et(le,ye){if(0===le.size)return[];if("mixed"===ye||ye===le.type)return"function"==typeof Array.from?Array.from(le._edges.keys()):nt(le._edges.keys(),le._edges.size);for(var de,T,H=new Array("undirected"===ye?le.undirectedSize:le.directedSize),Y="undirected"===ye,De=le._edges.values(),rt=0;!0!==(de=De.next()).done;)(T=de.value).undirected===Y&&(H[rt++]=T.key);return H}(this,H);if(1===arguments.length){var $e=this._nodes.get(De=""+De);if(void 0===$e)throw new Q("Graph.".concat(v,': could not find the "').concat(De,'" node in the graph.'));return function z(le,ye,de,T){var v=[];return B(!1,le,ye,de,T,function(H){v.push(H)}),v}(this.multi,"mixed"===H?this.type:H,Y,$e)}if(2===arguments.length){rt=""+rt;var Mt=this._nodes.get(De=""+De);if(!Mt)throw new Q("Graph.".concat(v,':  could not find the "').concat(De,'" source node in the graph.'));if(!this._nodes.has(rt))throw new Q("Graph.".concat(v,':  could not find the "').concat(rt,'" target node in the graph.'));return function ct(le,ye,de,T,v){var H=[];return Ze(!1,le,ye,de,T,v,function(Y){H.push(Y)}),H}(H,this.multi,Y,Mt,rt)}throw new je("Graph.".concat(v,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))},function(de,T){var v=T.name,H=T.type,Y=T.direction,De="forEach"+v[0].toUpperCase()+v.slice(1,-1);de.prototype[De]=function(Ct,Wt,Ht){if("mixed"===H||"mixed"===this.type||H===this.type){if(1===arguments.length)return Bt(!1,this,H,Ht=Ct);if(2===arguments.length){Ht=Wt;var on=this._nodes.get(Ct=""+Ct);if(void 0===on)throw new Q("Graph.".concat(De,': could not find the "').concat(Ct,'" node in the graph.'));return B(!1,this.multi,"mixed"===H?this.type:H,Y,on,Ht)}if(3===arguments.length){Wt=""+Wt;var jn=this._nodes.get(Ct=""+Ct);if(!jn)throw new Q("Graph.".concat(De,':  could not find the "').concat(Ct,'" source node in the graph.'));if(!this._nodes.has(Wt))throw new Q("Graph.".concat(De,':  could not find the "').concat(Wt,'" target node in the graph.'));return Ze(!1,H,this.multi,Y,jn,Wt,Ht)}throw new je("Graph.".concat(De,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))}};var rt="map"+v[0].toUpperCase()+v.slice(1);de.prototype[rt]=function(){var Ct,Wt=Array.prototype.slice.call(arguments),Ht=Wt.pop();if(0===Wt.length){var on=0;"directed"!==H&&(on+=this.undirectedSize),"undirected"!==H&&(on+=this.directedSize),Ct=new Array(on);var jn=0;Wt.push(function(Pn,bi,ni,Ci,hs,Ur,hr){Ct[jn++]=Ht(Pn,bi,ni,Ci,hs,Ur,hr)})}else Ct=[],Wt.push(function(Pn,bi,ni,Ci,hs,Ur,hr){Ct.push(Ht(Pn,bi,ni,Ci,hs,Ur,hr))});return this[De].apply(this,Wt),Ct};var $e="filter"+v[0].toUpperCase()+v.slice(1);de.prototype[$e]=function(){var Ct=Array.prototype.slice.call(arguments),Wt=Ct.pop(),Ht=[];return Ct.push(function(on,jn,Pn,bi,ni,Ci,hs){Wt(on,jn,Pn,bi,ni,Ci,hs)&&Ht.push(on)}),this[De].apply(this,Ct),Ht};var Mt="reduce"+v[0].toUpperCase()+v.slice(1);de.prototype[Mt]=function(){var Ct,Wt,Ht=Array.prototype.slice.call(arguments);if(Ht.length<2||Ht.length>4)throw new je("Graph.".concat(Mt,": invalid number of arguments (expecting 2, 3 or 4 and got ").concat(Ht.length,")."));if("function"==typeof Ht[Ht.length-1]&&"function"!=typeof Ht[Ht.length-2])throw new je("Graph.".concat(Mt,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));2===Ht.length?(Ct=Ht[0],Wt=Ht[1],Ht=[]):3===Ht.length?(Ct=Ht[1],Wt=Ht[2],Ht=[Ht[0]]):4===Ht.length&&(Ct=Ht[2],Wt=Ht[3],Ht=[Ht[0],Ht[1]]);var on=Wt;return Ht.push(function(jn,Pn,bi,ni,Ci,hs,Ur){on=Ct(on,jn,Pn,bi,ni,Ci,hs,Ur)}),this[De].apply(this,Ht),on}}(le,ye),function(de,T){var v=T.name,H=T.type,Y=T.direction,De="find"+v[0].toUpperCase()+v.slice(1,-1);de.prototype[De]=function(Mt,Ct,Wt){if("mixed"!==H&&"mixed"!==this.type&&H!==this.type)return!1;if(1===arguments.length)return Bt(!0,this,H,Wt=Mt);if(2===arguments.length){Wt=Ct;var Ht=this._nodes.get(Mt=""+Mt);if(void 0===Ht)throw new Q("Graph.".concat(De,': could not find the "').concat(Mt,'" node in the graph.'));return B(!0,this.multi,"mixed"===H?this.type:H,Y,Ht,Wt)}if(3===arguments.length){Ct=""+Ct;var on=this._nodes.get(Mt=""+Mt);if(!on)throw new Q("Graph.".concat(De,':  could not find the "').concat(Mt,'" source node in the graph.'));if(!this._nodes.has(Ct))throw new Q("Graph.".concat(De,':  could not find the "').concat(Ct,'" target node in the graph.'));return Ze(!0,H,this.multi,Y,on,Ct,Wt)}throw new je("Graph.".concat(De,": too many arguments (expecting 1, 2 or 3 and got ").concat(arguments.length,")."))};var rt="some"+v[0].toUpperCase()+v.slice(1,-1);de.prototype[rt]=function(){var Mt=Array.prototype.slice.call(arguments),Ct=Mt.pop();return Mt.push(function(Wt,Ht,on,jn,Pn,bi,ni){return Ct(Wt,Ht,on,jn,Pn,bi,ni)}),!!this[De].apply(this,Mt)};var $e="every"+v[0].toUpperCase()+v.slice(1,-1);de.prototype[$e]=function(){var Mt=Array.prototype.slice.call(arguments),Ct=Mt.pop();return Mt.push(function(Wt,Ht,on,jn,Pn,bi,ni){return!Ct(Wt,Ht,on,jn,Pn,bi,ni)}),!this[De].apply(this,Mt)}}(le,ye),function(de,T){var H=T.type,Y=T.direction,De=T.name.slice(0,-1)+"Entries";de.prototype[De]=function(rt,$e){if("mixed"!==H&&"mixed"!==this.type&&H!==this.type)return Ye.empty();if(!arguments.length)return function he(le,ye){if(0===le.size)return Ye.empty();var de="mixed"!==ye&&ye!==le.type,T="undirected"===ye,v=le._edges.values();return new Ye(function(){for(var H,Y;;){if((H=v.next()).done)return H;if(Y=H.value,!de||Y.undirected===T)break}return{value:{edge:Y.key,attributes:Y.attributes,source:Y.source.key,target:Y.target.key,sourceAttributes:Y.source.attributes,targetAttributes:Y.target.attributes,undirected:Y.undirected},done:!1}})}(this,H);if(1===arguments.length){var Mt=this._nodes.get(rt=""+rt);if(!Mt)throw new Q("Graph.".concat(De,': could not find the "').concat(rt,'" node in the graph.'));return function Ne(le,ye,de){var T=Ye.empty();return"undirected"!==le&&("out"!==ye&&void 0!==de.in&&(T=P(T,Ve(de.in))),"in"!==ye&&void 0!==de.out&&(T=P(T,Ve(de.out,ye?void 0:de.key)))),"directed"!==le&&void 0!==de.undirected&&(T=P(T,Ve(de.undirected))),T}(H,Y,Mt)}if(2===arguments.length){$e=""+$e;var Ct=this._nodes.get(rt=""+rt);if(!Ct)throw new Q("Graph.".concat(De,':  could not find the "').concat(rt,'" source node in the graph.'));if(!this._nodes.has($e))throw new Q("Graph.".concat(De,':  could not find the "').concat($e,'" target node in the graph.'));return function wt(le,ye,de,T){var v=Ye.empty();return"undirected"!==le&&(void 0!==de.in&&"out"!==ye&&T in de.in&&(v=P(v,Ot(de.in,T))),void 0!==de.out&&"in"!==ye&&T in de.out&&(ye||de.key!==T)&&(v=P(v,Ot(de.out,T)))),"directed"!==le&&void 0!==de.undirected&&T in de.undirected&&(v=P(v,Ot(de.undirected,T))),v}(H,Y,Ct,$e)}throw new je("Graph.".concat(De,": too many arguments (expecting 0, 1 or 2 and got ").concat(arguments.length,")."))}}(le,ye)})}(Nt),function(le){Qt.forEach(function(ye){var de,T,v,H,Y,De,rt;(function Fi(le,ye){var de=ye.name,T=ye.type,v=ye.direction;le.prototype[de]=function(H){if("mixed"!==T&&"mixed"!==this.type&&T!==this.type)return[];var Y=this._nodes.get(H=""+H);if(void 0===Y)throw new Q("Graph.".concat(de,': could not find the "').concat(H,'" node in the graph.'));return function(De,rt,$e){if("mixed"!==De){if("undirected"===De)return Object.keys($e.undirected);if("string"==typeof rt)return Object.keys($e[rt])}var Mt=[];return un(!1,De,rt,$e,function(Ct){Mt.push(Ct)}),Mt}("mixed"===T?this.type:T,v,Y)}})(le,ye),function(de,T){var v=T.name,H=T.type,Y=T.direction,De="forEach"+v[0].toUpperCase()+v.slice(1,-1);de.prototype[De]=function(Ct,Wt){if("mixed"===H||"mixed"===this.type||H===this.type){var Ht=this._nodes.get(Ct=""+Ct);if(void 0===Ht)throw new Q("Graph.".concat(De,': could not find the "').concat(Ct,'" node in the graph.'));un(!1,"mixed"===H?this.type:H,Y,Ht,Wt)}};var rt="map"+v[0].toUpperCase()+v.slice(1);de.prototype[rt]=function(Ct,Wt){var Ht=[];return this[De](Ct,function(on,jn){Ht.push(Wt(on,jn))}),Ht};var $e="filter"+v[0].toUpperCase()+v.slice(1);de.prototype[$e]=function(Ct,Wt){var Ht=[];return this[De](Ct,function(on,jn){Wt(on,jn)&&Ht.push(on)}),Ht};var Mt="reduce"+v[0].toUpperCase()+v.slice(1);de.prototype[Mt]=function(Ct,Wt,Ht){if(arguments.length<3)throw new je("Graph.".concat(Mt,": missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array."));var on=Ht;return this[De](Ct,function(jn,Pn){on=Wt(on,jn,Pn)}),on}}(le,ye),de=le,H=(T=ye).type,Y=T.direction,De=(v=T.name)[0].toUpperCase()+v.slice(1,-1),de.prototype[rt="find"+De]=function(Ct,Wt){if("mixed"===H||"mixed"===this.type||H===this.type){var Ht=this._nodes.get(Ct=""+Ct);if(void 0===Ht)throw new Q("Graph.".concat(rt,': could not find the "').concat(Ct,'" node in the graph.'));return un(!0,"mixed"===H?this.type:H,Y,Ht,Wt)}},de.prototype["some"+De]=function(Ct,Wt){return!!this[rt](Ct,Wt)},de.prototype["every"+De]=function(Ct,Wt){return!this[rt](Ct,function(Ht,on){return!Wt(Ht,on)})},function Or(le,ye){var T=ye.type,v=ye.direction,H=ye.name.slice(0,-1)+"Entries";le.prototype[H]=function(Y){if("mixed"!==T&&"mixed"!==this.type&&T!==this.type)return Ye.empty();var De=this._nodes.get(Y=""+Y);if(void 0===De)throw new Q("Graph.".concat(H,': could not find the "').concat(Y,'" node in the graph.'));return function(rt,$e,Mt){if("mixed"!==rt){if("undirected"===rt)return rn(null,Mt,Mt.undirected);if("string"==typeof $e)return rn(null,Mt,Mt[$e])}var Ct=Ye.empty(),Wt=new gn;return"undirected"!==rt&&("out"!==$e&&(Ct=P(Ct,rn(Wt,Mt,Mt.in))),"in"!==$e&&(Ct=P(Ct,rn(Wt,Mt,Mt.out)))),"directed"!==rt&&(Ct=P(Ct,rn(Wt,Mt,Mt.undirected))),Ct}("mixed"===T?this.type:T,v,De)}}(le,ye)})}(Nt);var At=function(le){function ye(de){var T=E({type:"directed"},de);if("multi"in T&&!1!==T.multi)throw new je("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("directed"!==T.type)throw new je('DirectedGraph.from: inconsistent "'+T.type+'" type in given options!');return le.call(this,T)||this}return M(ye,le),ye}(Nt),en=function(le){function ye(de){var T=E({type:"undirected"},de);if("multi"in T&&!1!==T.multi)throw new je("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if("undirected"!==T.type)throw new je('UndirectedGraph.from: inconsistent "'+T.type+'" type in given options!');return le.call(this,T)||this}return M(ye,le),ye}(Nt),Vi=function(le){function ye(de){var T=E({multi:!0},de);if("multi"in T&&!0!==T.multi)throw new je("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");return le.call(this,T)||this}return M(ye,le),ye}(Nt),Nr=function(le){function ye(de){var T=E({type:"directed",multi:!0},de);if("multi"in T&&!0!==T.multi)throw new je("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("directed"!==T.type)throw new je('MultiDirectedGraph.from: inconsistent "'+T.type+'" type in given options!');return le.call(this,T)||this}return M(ye,le),ye}(Nt),ds=function(le){function ye(de){var T=E({type:"undirected",multi:!0},de);if("multi"in T&&!0!==T.multi)throw new je("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if("undirected"!==T.type)throw new je('MultiUndirectedGraph.from: inconsistent "'+T.type+'" type in given options!');return le.call(this,T)||this}return M(ye,le),ye}(Nt);function qt(le){le.from=function(ye,de){var T=E({},ye.options,de),v=new le(T);return v.import(ye),v}}return qt(Nt),qt(At),qt(en),qt(Vi),qt(Nr),qt(ds),Nt.Graph=Nt,Nt.DirectedGraph=At,Nt.UndirectedGraph=en,Nt.MultiGraph=Vi,Nt.MultiDirectedGraph=Nr,Nt.MultiUndirectedGraph=ds,Nt.InvalidArgumentsGraphError=je,Nt.NotFoundGraphError=Q,Nt.UsageGraphError=se,Nt}()},4511:(Ge,ne,M)=>{var ee;!function(A,$,j,W){"use strict";var X,x=["","webkit","Moz","MS","ms","o"],E=$.createElement("div"),N="function",te=Math.round,F=Math.abs,C=Date.now;function oe(Se,Ue,it){return setTimeout(G(Se,it),Ue)}function S(Se,Ue,it){return!!Array.isArray(Se)&&(k(Se,it[Ue],it),!0)}function k(Se,Ue,it){var yt;if(Se)if(Se.forEach)Se.forEach(Ue,it);else if(Se.length!==W)for(yt=0;yt<Se.length;)Ue.call(it,Se[yt],yt,Se),yt++;else for(yt in Se)Se.hasOwnProperty(yt)&&Ue.call(it,Se[yt],yt,Se)}function ce(Se,Ue,it){var yt="DEPRECATED METHOD: "+Ue+"\n"+it+" AT \n";return function(){var Gt=new Error("get-stack-trace"),tn=Gt&&Gt.stack?Gt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Xn=A.console&&(A.console.warn||A.console.log);return Xn&&Xn.call(A.console,yt,tn),Se.apply(this,arguments)}}X="function"!=typeof Object.assign?function(Ue){if(Ue===W||null===Ue)throw new TypeError("Cannot convert undefined or null to object");for(var it=Object(Ue),yt=1;yt<arguments.length;yt++){var Gt=arguments[yt];if(Gt!==W&&null!==Gt)for(var tn in Gt)Gt.hasOwnProperty(tn)&&(it[tn]=Gt[tn])}return it}:Object.assign;var K=ce(function(Ue,it,yt){for(var Gt=Object.keys(it),tn=0;tn<Gt.length;)(!yt||yt&&Ue[Gt[tn]]===W)&&(Ue[Gt[tn]]=it[Gt[tn]]),tn++;return Ue},"extend","Use `assign`."),J=ce(function(Ue,it){return K(Ue,it,!0)},"merge","Use `assign`.");function U(Se,Ue,it){var Gt,yt=Ue.prototype;(Gt=Se.prototype=Object.create(yt)).constructor=Se,Gt._super=yt,it&&X(Gt,it)}function G(Se,Ue){return function(){return Se.apply(Ue,arguments)}}function w(Se,Ue){return typeof Se==N?Se.apply(Ue&&Ue[0]||W,Ue):Se}function I(Se,Ue){return Se===W?Ue:Se}function D(Se,Ue,it){k(ae(Ue),function(yt){Se.addEventListener(yt,it,!1)})}function ue(Se,Ue,it){k(ae(Ue),function(yt){Se.removeEventListener(yt,it,!1)})}function re(Se,Ue){for(;Se;){if(Se==Ue)return!0;Se=Se.parentNode}return!1}function Ce(Se,Ue){return Se.indexOf(Ue)>-1}function ae(Se){return Se.trim().split(/\s+/g)}function we(Se,Ue,it){if(Se.indexOf&&!it)return Se.indexOf(Ue);for(var yt=0;yt<Se.length;){if(it&&Se[yt][it]==Ue||!it&&Se[yt]===Ue)return yt;yt++}return-1}function Oe(Se){return Array.prototype.slice.call(Se,0)}function ke(Se,Ue,it){for(var yt=[],Gt=[],tn=0;tn<Se.length;){var Xn=Ue?Se[tn][Ue]:Se[tn];we(Gt,Xn)<0&&yt.push(Se[tn]),Gt[tn]=Xn,tn++}return it&&(yt=Ue?yt.sort(function(Hr,Us){return Hr[Ue]>Us[Ue]}):yt.sort()),yt}function Ye(Se,Ue){for(var it,yt,Gt=Ue[0].toUpperCase()+Ue.slice(1),tn=0;tn<x.length;){if((yt=(it=x[tn])?it+Gt:Ue)in Se)return yt;tn++}return W}var Qe=1;function Be(Se){var Ue=Se.ownerDocument||Se;return Ue.defaultView||Ue.parentWindow||A}var et="ontouchstart"in A,pe=Ye(A,"PointerEvent")!==W,be=et&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),nt="touch",je="mouse",se=25,Ae=1,Te=4,Je=8,ot=1,ut=2,Le=4,Z=8,O=16,P=ut|Le,_e=Z|O,ze=P|_e,ve=["x","y"],Ve=["clientX","clientY"];function Ke(Se,Ue){var it=this;this.manager=Se,this.callback=Ue,this.element=Se.element,this.target=Se.options.inputTarget,this.domHandler=function(yt){w(Se.options.enable,[Se])&&it.handler(yt)},this.init()}function Ot(Se,Ue,it){var yt=it.pointers.length,Gt=it.changedPointers.length,tn=Ue&Ae&&yt-Gt==0,Xn=Ue&(Te|Je)&&yt-Gt==0;it.isFirst=!!tn,it.isFinal=!!Xn,tn&&(Se.session={}),it.eventType=Ue,function Et(Se,Ue){var it=Se.session,yt=Ue.pointers,Gt=yt.length;it.firstInput||(it.firstInput=B(Ue)),Gt>1&&!it.firstMultiple?it.firstMultiple=B(Ue):1===Gt&&(it.firstMultiple=!1);var tn=it.firstInput,Xn=it.firstMultiple,Vr=Xn?Xn.center:tn.center,Hr=Ue.center=z(yt);Ue.timeStamp=C(),Ue.deltaTime=Ue.timeStamp-tn.timeStamp,Ue.angle=wt(Vr,Hr),Ue.distance=ct(Vr,Hr),function Bt(Se,Ue){var it=Ue.center,yt=Se.offsetDelta||{},Gt=Se.prevDelta||{},tn=Se.prevInput||{};(Ue.eventType===Ae||tn.eventType===Te)&&(Gt=Se.prevDelta={x:tn.deltaX||0,y:tn.deltaY||0},yt=Se.offsetDelta={x:it.x,y:it.y}),Ue.deltaX=Gt.x+(it.x-yt.x),Ue.deltaY=Gt.y+(it.y-yt.y)}(it,Ue),Ue.offsetDirection=Ze(Ue.deltaX,Ue.deltaY);var Us=Ne(Ue.deltaTime,Ue.deltaX,Ue.deltaY);Ue.overallVelocityX=Us.x,Ue.overallVelocityY=Us.y,Ue.overallVelocity=F(Us.x)>F(Us.y)?Us.x:Us.y,Ue.scale=Xn?function gn(Se,Ue){return ct(Ue[0],Ue[1],Ve)/ct(Se[0],Se[1],Ve)}(Xn.pointers,yt):1,Ue.rotation=Xn?function Qt(Se,Ue){return wt(Ue[1],Ue[0],Ve)+wt(Se[1],Se[0],Ve)}(Xn.pointers,yt):0,Ue.maxPointers=it.prevInput?Ue.pointers.length>it.prevInput.maxPointers?Ue.pointers.length:it.prevInput.maxPointers:Ue.pointers.length,function he(Se,Ue){var Gt,tn,Xn,Vr,it=Se.lastInterval||Ue,yt=Ue.timeStamp-it.timeStamp;if(Ue.eventType!=Je&&(yt>se||it.velocity===W)){var Hr=Ue.deltaX-it.deltaX,Us=Ue.deltaY-it.deltaY,ra=Ne(yt,Hr,Us);tn=ra.x,Xn=ra.y,Gt=F(ra.x)>F(ra.y)?ra.x:ra.y,Vr=Ze(Hr,Us),Se.lastInterval=Ue}else Gt=it.velocity,tn=it.velocityX,Xn=it.velocityY,Vr=it.direction;Ue.velocity=Gt,Ue.velocityX=tn,Ue.velocityY=Xn,Ue.direction=Vr}(it,Ue);var ra=Se.element;re(Ue.srcEvent.target,ra)&&(ra=Ue.srcEvent.target),Ue.target=ra}(Se,it),Se.emit("hammer.input",it),Se.recognize(it),Se.session.prevInput=it}function B(Se){for(var Ue=[],it=0;it<Se.pointers.length;)Ue[it]={clientX:te(Se.pointers[it].clientX),clientY:te(Se.pointers[it].clientY)},it++;return{timeStamp:C(),pointers:Ue,center:z(Ue),deltaX:Se.deltaX,deltaY:Se.deltaY}}function z(Se){var Ue=Se.length;if(1===Ue)return{x:te(Se[0].clientX),y:te(Se[0].clientY)};for(var it=0,yt=0,Gt=0;Gt<Ue;)it+=Se[Gt].clientX,yt+=Se[Gt].clientY,Gt++;return{x:te(it/Ue),y:te(yt/Ue)}}function Ne(Se,Ue,it){return{x:Ue/Se||0,y:it/Se||0}}function Ze(Se,Ue){return Se===Ue?ot:F(Se)>=F(Ue)?Se<0?ut:Le:Ue<0?Z:O}function ct(Se,Ue,it){it||(it=ve);var yt=Ue[it[0]]-Se[it[0]],Gt=Ue[it[1]]-Se[it[1]];return Math.sqrt(yt*yt+Gt*Gt)}function wt(Se,Ue,it){return it||(it=ve),180*Math.atan2(Ue[it[1]]-Se[it[1]],Ue[it[0]]-Se[it[0]])/Math.PI}Ke.prototype={handler:function(){},init:function(){this.evEl&&D(this.element,this.evEl,this.domHandler),this.evTarget&&D(this.target,this.evTarget,this.domHandler),this.evWin&&D(Be(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&ue(this.element,this.evEl,this.domHandler),this.evTarget&&ue(this.target,this.evTarget,this.domHandler),this.evWin&&ue(Be(this.element),this.evWin,this.domHandler)}};var In={mousedown:Ae,mousemove:2,mouseup:Te},un="mousedown",rn="mousemove mouseup";function Fi(){this.evEl=un,this.evWin=rn,this.pressed=!1,Ke.apply(this,arguments)}U(Fi,Ke,{handler:function(Ue){var it=In[Ue.type];it&Ae&&0===Ue.button&&(this.pressed=!0),2&it&&1!==Ue.which&&(it=Te),this.pressed&&(it&Te&&(this.pressed=!1),this.callback(this.manager,it,{pointers:[Ue],changedPointers:[Ue],pointerType:je,srcEvent:Ue}))}});var Or={pointerdown:Ae,pointermove:2,pointerup:Te,pointercancel:Je,pointerout:Je},fi={2:nt,3:"pen",4:je,5:"kinect"},ai="pointerdown",vi="pointermove pointerup pointercancel";function ji(){this.evEl=ai,this.evWin=vi,Ke.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}A.MSPointerEvent&&!A.PointerEvent&&(ai="MSPointerDown",vi="MSPointerMove MSPointerUp MSPointerCancel"),U(ji,Ke,{handler:function(Ue){var it=this.store,yt=!1,Gt=Ue.type.toLowerCase().replace("ms",""),tn=Or[Gt],Xn=fi[Ue.pointerType]||Ue.pointerType,Vr=Xn==nt,Hr=we(it,Ue.pointerId,"pointerId");tn&Ae&&(0===Ue.button||Vr)?Hr<0&&(it.push(Ue),Hr=it.length-1):tn&(Te|Je)&&(yt=!0),!(Hr<0)&&(it[Hr]=Ue,this.callback(this.manager,tn,{pointers:it,changedPointers:[Ue],pointerType:Xn,srcEvent:Ue}),yt&&it.splice(Hr,1))}});var $i={touchstart:Ae,touchmove:2,touchend:Te,touchcancel:Je};function Ys(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,Ke.apply(this,arguments)}function Uo(Se,Ue){var it=Oe(Se.touches),yt=Oe(Se.changedTouches);return Ue&(Te|Je)&&(it=ke(it.concat(yt),"identifier",!0)),[it,yt]}U(Ys,Ke,{handler:function(Ue){var it=$i[Ue.type];if(it===Ae&&(this.started=!0),this.started){var yt=Uo.call(this,Ue,it);it&(Te|Je)&&yt[0].length-yt[1].length==0&&(this.started=!1),this.callback(this.manager,it,{pointers:yt[0],changedPointers:yt[1],pointerType:nt,srcEvent:Ue})}}});var Vo={touchstart:Ae,touchmove:2,touchend:Te,touchcancel:Je},He="touchstart touchmove touchend touchcancel";function qe(){this.evTarget=He,this.targetIds={},Ke.apply(this,arguments)}function Nt(Se,Ue){var it=Oe(Se.touches),yt=this.targetIds;if(Ue&(2|Ae)&&1===it.length)return yt[it[0].identifier]=!0,[it,it];var Gt,tn,Xn=Oe(Se.changedTouches),Vr=[],Hr=this.target;if(tn=it.filter(function(Us){return re(Us.target,Hr)}),Ue===Ae)for(Gt=0;Gt<tn.length;)yt[tn[Gt].identifier]=!0,Gt++;for(Gt=0;Gt<Xn.length;)yt[Xn[Gt].identifier]&&Vr.push(Xn[Gt]),Ue&(Te|Je)&&delete yt[Xn[Gt].identifier],Gt++;return Vr.length?[ke(tn.concat(Vr),"identifier",!0),Vr]:void 0}U(qe,Ke,{handler:function(Ue){var it=Vo[Ue.type],yt=Nt.call(this,Ue,it);yt&&this.callback(this.manager,it,{pointers:yt[0],changedPointers:yt[1],pointerType:nt,srcEvent:Ue})}});var At=2500;function Vi(){Ke.apply(this,arguments);var Se=G(this.handler,this);this.touch=new qe(this.manager,Se),this.mouse=new Fi(this.manager,Se),this.primaryTouch=null,this.lastTouches=[]}function Nr(Se,Ue){Se&Ae?(this.primaryTouch=Ue.changedPointers[0].identifier,ds.call(this,Ue)):Se&(Te|Je)&&ds.call(this,Ue)}function ds(Se){var Ue=Se.changedPointers[0];if(Ue.identifier===this.primaryTouch){var it={x:Ue.clientX,y:Ue.clientY};this.lastTouches.push(it);var yt=this.lastTouches;setTimeout(function(){var tn=yt.indexOf(it);tn>-1&&yt.splice(tn,1)},At)}}function qt(Se){for(var Ue=Se.srcEvent.clientX,it=Se.srcEvent.clientY,yt=0;yt<this.lastTouches.length;yt++){var Gt=this.lastTouches[yt],tn=Math.abs(Ue-Gt.x),Xn=Math.abs(it-Gt.y);if(tn<=25&&Xn<=25)return!0}return!1}U(Vi,Ke,{handler:function(Ue,it,yt){var tn=yt.pointerType==je;if(!(tn&&yt.sourceCapabilities&&yt.sourceCapabilities.firesTouchEvents)){if(yt.pointerType==nt)Nr.call(this,it,yt);else if(tn&&qt.call(this,yt))return;this.callback(Ue,it,yt)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var le=Ye(E.style,"touchAction"),ye=le!==W,de="compute",T="auto",v="manipulation",H="none",Y="pan-x",De="pan-y",rt=function Ct(){if(!ye)return!1;var Se={},Ue=A.CSS&&A.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(it){Se[it]=!Ue||A.CSS.supports("touch-action",it)}),Se}();function $e(Se,Ue){this.manager=Se,this.set(Ue)}$e.prototype={set:function(Se){Se==de&&(Se=this.compute()),ye&&this.manager.element.style&&rt[Se]&&(this.manager.element.style[le]=Se),this.actions=Se.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var Se=[];return k(this.manager.recognizers,function(Ue){w(Ue.options.enable,[Ue])&&(Se=Se.concat(Ue.getTouchAction()))}),function Mt(Se){if(Ce(Se,H))return H;var Ue=Ce(Se,Y),it=Ce(Se,De);return Ue&&it?H:Ue||it?Ue?Y:De:Ce(Se,v)?v:T}(Se.join(" "))},preventDefaults:function(Se){var Ue=Se.srcEvent,it=Se.offsetDirection;if(!this.manager.session.prevented){var yt=this.actions,Gt=Ce(yt,H)&&!rt[H],tn=Ce(yt,De)&&!rt[De],Xn=Ce(yt,Y)&&!rt[Y];if(Gt&&1===Se.pointers.length&&Se.distance<2&&Se.deltaTime<250)return;return Xn&&tn||!(Gt||tn&&it&P||Xn&&it&_e)?void 0:this.preventSrc(Ue)}Ue.preventDefault()},preventSrc:function(Se){this.manager.session.prevented=!0,Se.preventDefault()}};var Wt=1;function Ci(Se){this.options=X({},this.defaults,Se||{}),this.id=function xe(){return Qe++}(),this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=Wt,this.simultaneous={},this.requireFail=[]}function hs(Se){return 16&Se?"cancel":8&Se?"end":4&Se?"move":2&Se?"start":""}function Ur(Se){return Se==O?"down":Se==Z?"up":Se==ut?"left":Se==Le?"right":""}function hr(Se,Ue){var it=Ue.manager;return it?it.get(Se):Se}function fs(){Ci.apply(this,arguments)}function Bn(){fs.apply(this,arguments),this.pX=null,this.pY=null}function Yl(){fs.apply(this,arguments)}function mh(){Ci.apply(this,arguments),this._timer=null,this._input=null}function Kn(){fs.apply(this,arguments)}function el(){fs.apply(this,arguments)}function tr(){Ci.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Ta(Se,Ue){return(Ue=Ue||{}).recognizers=I(Ue.recognizers,Ta.defaults.preset),new pi(Se,Ue)}function pi(Se,Ue){this.options=X({},Ta.defaults,Ue||{}),this.options.inputTarget=this.options.inputTarget||Se,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=Se,this.input=function vt(Se){return new(Se.options.inputClass||(pe?ji:be?qe:et?Vi:Fi))(Se,Ot)}(this),this.touchAction=new $e(this,this.options.touchAction),wn(this,!0),k(this.options.recognizers,function(it){var yt=this.add(new it[0](it[1]));it[2]&&yt.recognizeWith(it[2]),it[3]&&yt.requireFailure(it[3])},this)}function wn(Se,Ue){var yt,it=Se.element;it.style&&(k(Se.options.cssProps,function(Gt,tn){yt=Ye(it.style,tn),Ue?(Se.oldCssProps[yt]=it.style[yt],it.style[yt]=Gt):it.style[yt]=Se.oldCssProps[yt]||""}),Ue||(Se.oldCssProps={}))}Ci.prototype={defaults:{},set:function(Se){return X(this.options,Se),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(Se){if(S(Se,"recognizeWith",this))return this;var Ue=this.simultaneous;return Ue[(Se=hr(Se,this)).id]||(Ue[Se.id]=Se,Se.recognizeWith(this)),this},dropRecognizeWith:function(Se){return S(Se,"dropRecognizeWith",this)||(Se=hr(Se,this),delete this.simultaneous[Se.id]),this},requireFailure:function(Se){if(S(Se,"requireFailure",this))return this;var Ue=this.requireFail;return-1===we(Ue,Se=hr(Se,this))&&(Ue.push(Se),Se.requireFailure(this)),this},dropRequireFailure:function(Se){if(S(Se,"dropRequireFailure",this))return this;Se=hr(Se,this);var Ue=we(this.requireFail,Se);return Ue>-1&&this.requireFail.splice(Ue,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(Se){return!!this.simultaneous[Se.id]},emit:function(Se){var Ue=this,it=this.state;function yt(Gt){Ue.manager.emit(Gt,Se)}it<8&&yt(Ue.options.event+hs(it)),yt(Ue.options.event),Se.additionalEvent&&yt(Se.additionalEvent),it>=8&&yt(Ue.options.event+hs(it))},tryEmit:function(Se){if(this.canEmit())return this.emit(Se);this.state=32},canEmit:function(){for(var Se=0;Se<this.requireFail.length;){if(!(this.requireFail[Se].state&(32|Wt)))return!1;Se++}return!0},recognize:function(Se){var Ue=X({},Se);if(!w(this.options.enable,[this,Ue]))return this.reset(),void(this.state=32);56&this.state&&(this.state=Wt),this.state=this.process(Ue),30&this.state&&this.tryEmit(Ue)},process:function(Se){},getTouchAction:function(){},reset:function(){}},U(fs,Ci,{defaults:{pointers:1},attrTest:function(Se){var Ue=this.options.pointers;return 0===Ue||Se.pointers.length===Ue},process:function(Se){var Ue=this.state,it=Se.eventType,yt=6&Ue,Gt=this.attrTest(Se);return yt&&(it&Je||!Gt)?16|Ue:yt||Gt?it&Te?8|Ue:2&Ue?4|Ue:2:32}}),U(Bn,fs,{defaults:{event:"pan",threshold:10,pointers:1,direction:ze},getTouchAction:function(){var Se=this.options.direction,Ue=[];return Se&P&&Ue.push(De),Se&_e&&Ue.push(Y),Ue},directionTest:function(Se){var Ue=this.options,it=!0,yt=Se.distance,Gt=Se.direction,tn=Se.deltaX,Xn=Se.deltaY;return Gt&Ue.direction||(Ue.direction&P?(Gt=0===tn?ot:tn<0?ut:Le,it=tn!=this.pX,yt=Math.abs(Se.deltaX)):(Gt=0===Xn?ot:Xn<0?Z:O,it=Xn!=this.pY,yt=Math.abs(Se.deltaY))),Se.direction=Gt,it&&yt>Ue.threshold&&Gt&Ue.direction},attrTest:function(Se){return fs.prototype.attrTest.call(this,Se)&&(2&this.state||!(2&this.state)&&this.directionTest(Se))},emit:function(Se){this.pX=Se.deltaX,this.pY=Se.deltaY;var Ue=Ur(Se.direction);Ue&&(Se.additionalEvent=this.options.event+Ue),this._super.emit.call(this,Se)}}),U(Yl,fs,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[H]},attrTest:function(Se){return this._super.attrTest.call(this,Se)&&(Math.abs(Se.scale-1)>this.options.threshold||2&this.state)},emit:function(Se){1!==Se.scale&&(Se.additionalEvent=this.options.event+(Se.scale<1?"in":"out")),this._super.emit.call(this,Se)}}),U(mh,Ci,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[T]},process:function(Se){var Ue=this.options,it=Se.pointers.length===Ue.pointers,yt=Se.distance<Ue.threshold,Gt=Se.deltaTime>Ue.time;if(this._input=Se,!yt||!it||Se.eventType&(Te|Je)&&!Gt)this.reset();else if(Se.eventType&Ae)this.reset(),this._timer=oe(function(){this.state=8,this.tryEmit()},Ue.time,this);else if(Se.eventType&Te)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(Se){8===this.state&&(Se&&Se.eventType&Te?this.manager.emit(this.options.event+"up",Se):(this._input.timeStamp=C(),this.manager.emit(this.options.event,this._input)))}}),U(Kn,fs,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[H]},attrTest:function(Se){return this._super.attrTest.call(this,Se)&&(Math.abs(Se.rotation)>this.options.threshold||2&this.state)}}),U(el,fs,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:P|_e,pointers:1},getTouchAction:function(){return Bn.prototype.getTouchAction.call(this)},attrTest:function(Se){var it,Ue=this.options.direction;return Ue&(P|_e)?it=Se.overallVelocity:Ue&P?it=Se.overallVelocityX:Ue&_e&&(it=Se.overallVelocityY),this._super.attrTest.call(this,Se)&&Ue&Se.offsetDirection&&Se.distance>this.options.threshold&&Se.maxPointers==this.options.pointers&&F(it)>this.options.velocity&&Se.eventType&Te},emit:function(Se){var Ue=Ur(Se.offsetDirection);Ue&&this.manager.emit(this.options.event+Ue,Se),this.manager.emit(this.options.event,Se)}}),U(tr,Ci,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[v]},process:function(Se){var Ue=this.options,it=Se.pointers.length===Ue.pointers,yt=Se.distance<Ue.threshold,Gt=Se.deltaTime<Ue.time;if(this.reset(),Se.eventType&Ae&&0===this.count)return this.failTimeout();if(yt&&Gt&&it){if(Se.eventType!=Te)return this.failTimeout();var tn=!this.pTime||Se.timeStamp-this.pTime<Ue.interval,Xn=!this.pCenter||ct(this.pCenter,Se.center)<Ue.posThreshold;if(this.pTime=Se.timeStamp,this.pCenter=Se.center,Xn&&tn?this.count+=1:this.count=1,this._input=Se,0==this.count%Ue.taps)return this.hasRequireFailures()?(this._timer=oe(function(){this.state=8,this.tryEmit()},Ue.interval,this),2):8}return 32},failTimeout:function(){return this._timer=oe(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Ta.VERSION="2.0.7",Ta.defaults={domEvents:!1,touchAction:de,enable:!0,inputTarget:null,inputClass:null,preset:[[Kn,{enable:!1}],[Yl,{enable:!1},["rotate"]],[el,{direction:P}],[Bn,{direction:P},["swipe"]],[tr],[tr,{event:"doubletap",taps:2},["tap"]],[mh]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},pi.prototype={set:function(Se){return X(this.options,Se),Se.touchAction&&this.touchAction.update(),Se.inputTarget&&(this.input.destroy(),this.input.target=Se.inputTarget,this.input.init()),this},stop:function(Se){this.session.stopped=Se?2:1},recognize:function(Se){var Ue=this.session;if(!Ue.stopped){this.touchAction.preventDefaults(Se);var it,yt=this.recognizers,Gt=Ue.curRecognizer;(!Gt||Gt&&8&Gt.state)&&(Gt=Ue.curRecognizer=null);for(var tn=0;tn<yt.length;)it=yt[tn],2===Ue.stopped||Gt&&it!=Gt&&!it.canRecognizeWith(Gt)?it.reset():it.recognize(Se),!Gt&&14&it.state&&(Gt=Ue.curRecognizer=it),tn++}},get:function(Se){if(Se instanceof Ci)return Se;for(var Ue=this.recognizers,it=0;it<Ue.length;it++)if(Ue[it].options.event==Se)return Ue[it];return null},add:function(Se){if(S(Se,"add",this))return this;var Ue=this.get(Se.options.event);return Ue&&this.remove(Ue),this.recognizers.push(Se),Se.manager=this,this.touchAction.update(),Se},remove:function(Se){if(S(Se,"remove",this))return this;if(Se=this.get(Se)){var Ue=this.recognizers,it=we(Ue,Se);-1!==it&&(Ue.splice(it,1),this.touchAction.update())}return this},on:function(Se,Ue){if(Se!==W&&Ue!==W){var it=this.handlers;return k(ae(Se),function(yt){it[yt]=it[yt]||[],it[yt].push(Ue)}),this}},off:function(Se,Ue){if(Se!==W){var it=this.handlers;return k(ae(Se),function(yt){Ue?it[yt]&&it[yt].splice(we(it[yt],Ue),1):delete it[yt]}),this}},emit:function(Se,Ue){this.options.domEvents&&function Kl(Se,Ue){var it=$.createEvent("Event");it.initEvent(Se,!0,!0),it.gesture=Ue,Ue.target.dispatchEvent(it)}(Se,Ue);var it=this.handlers[Se]&&this.handlers[Se].slice();if(it&&it.length){Ue.type=Se,Ue.preventDefault=function(){Ue.srcEvent.preventDefault()};for(var yt=0;yt<it.length;)it[yt](Ue),yt++}},destroy:function(){this.element&&wn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},X(Ta,{INPUT_START:Ae,INPUT_MOVE:2,INPUT_END:Te,INPUT_CANCEL:Je,STATE_POSSIBLE:Wt,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:ot,DIRECTION_LEFT:ut,DIRECTION_RIGHT:Le,DIRECTION_UP:Z,DIRECTION_DOWN:O,DIRECTION_HORIZONTAL:P,DIRECTION_VERTICAL:_e,DIRECTION_ALL:ze,Manager:pi,Input:Ke,TouchAction:$e,TouchInput:qe,MouseInput:Fi,PointerEventInput:ji,TouchMouseInput:Vi,SingleTouchInput:Ys,Recognizer:Ci,AttrRecognizer:fs,Tap:tr,Pan:Bn,Swipe:el,Pinch:Yl,Rotate:Kn,Press:mh,on:D,off:ue,each:k,merge:J,extend:K,assign:X,inherit:U,bindFn:G,prefixed:Ye}),(typeof A<"u"?A:typeof self<"u"?self:{}).Hammer=Ta,(ee=function(){return Ta}.call(ne,M,ne,Ge))!==W&&(Ge.exports=ee)}(window,document)},2020:(Ge,ne)=>{ne.read=function(M,ee,A,$,j){var W,x,E=8*j-$-1,N=(1<<E)-1,te=N>>1,F=-7,C=A?j-1:0,oe=A?-1:1,S=M[ee+C];for(C+=oe,W=S&(1<<-F)-1,S>>=-F,F+=E;F>0;W=256*W+M[ee+C],C+=oe,F-=8);for(x=W&(1<<-F)-1,W>>=-F,F+=$;F>0;x=256*x+M[ee+C],C+=oe,F-=8);if(0===W)W=1-te;else{if(W===N)return x?NaN:1/0*(S?-1:1);x+=Math.pow(2,$),W-=te}return(S?-1:1)*x*Math.pow(2,W-$)},ne.write=function(M,ee,A,$,j,W){var x,E,N,te=8*W-j-1,F=(1<<te)-1,C=F>>1,oe=23===j?Math.pow(2,-24)-Math.pow(2,-77):0,S=$?0:W-1,k=$?1:-1,ce=ee<0||0===ee&&1/ee<0?1:0;for(ee=Math.abs(ee),isNaN(ee)||ee===1/0?(E=isNaN(ee)?1:0,x=F):(x=Math.floor(Math.log(ee)/Math.LN2),ee*(N=Math.pow(2,-x))<1&&(x--,N*=2),(ee+=x+C>=1?oe/N:oe*Math.pow(2,1-C))*N>=2&&(x++,N/=2),x+C>=F?(E=0,x=F):x+C>=1?(E=(ee*N-1)*Math.pow(2,j),x+=C):(E=ee*Math.pow(2,C-1)*Math.pow(2,j),x=0));j>=8;M[A+S]=255&E,S+=k,E/=256,j-=8);for(x=x<<j|E,te+=j;te>0;M[A+S]=255&x,S+=k,x/=256,te-=8);M[A+S-k]|=128*ce}},7839:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;const{isArray:A,isObject:$,isString:j}=M(2831),{asArray:W}=M(9420),{prependBase:x}=M(2051),E=M(262),N=M(6181);function F(oe){throw new E("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:oe})}function C({context:oe,base:S}){if(!oe)return;const k=oe["@context"];if(j(k))oe["@context"]=x(S,k);else if(A(k))for(let ce=0;ce<k.length;++ce){const X=k[ce];j(X)?k[ce]=x(S,X):$(X)&&C({context:{"@context":X},base:S})}else if($(k))for(const ce in k)C({context:k[ce],base:S})}Ge.exports=class{constructor({sharedCache:S}){this.perOpCache=new Map,this.sharedCache=S}resolve({activeCtx:S,context:k,documentLoader:ce,base:X,cycles:K=new Set}){var J=this;return ee(function*(){k&&$(k)&&k["@context"]&&(k=k["@context"]),k=W(k);const U=[];for(const G of k){if(j(G)){let D=J._get(G);D||(D=yield J._resolveRemoteContext({activeCtx:S,url:G,documentLoader:ce,base:X,cycles:K})),A(D)?U.push(...D):U.push(D);continue}if(null===G){U.push(new N({document:null}));continue}$(G)||F(k);const w=JSON.stringify(G);let I=J._get(w);I||(I=new N({document:G}),J._cacheResolvedContext({key:w,resolved:I,tag:"static"})),U.push(I)}return U})()}_get(S){let k=this.perOpCache.get(S);if(!k){const ce=this.sharedCache.get(S);ce&&(k=ce.get("static"),k&&this.perOpCache.set(S,k))}return k}_cacheResolvedContext({key:S,resolved:k,tag:ce}){if(this.perOpCache.set(S,k),void 0!==ce){let X=this.sharedCache.get(S);X||(X=new Map,this.sharedCache.set(S,X)),X.set(ce,k)}return k}_resolveRemoteContext({activeCtx:S,url:k,documentLoader:ce,base:X,cycles:K}){var J=this;return ee(function*(){k=x(X,k);const{context:U,remoteDoc:G}=yield J._fetchContext({activeCtx:S,url:k,documentLoader:ce,cycles:K});C({context:U,base:X=G.documentUrl||k});const w=yield J.resolve({activeCtx:S,context:U,documentLoader:ce,base:X,cycles:K});return J._cacheResolvedContext({key:k,resolved:w,tag:G.tag}),w})()}_fetchContext({activeCtx:S,url:k,documentLoader:ce,cycles:X}){return ee(function*(){if(X.size>10)throw new E("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"json-ld-1.0"===S.processingMode?"loading remote context failed":"context overflow",max:10});if(X.has(k))throw new E("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"json-ld-1.0"===S.processingMode?"recursive context inclusion":"context overflow",url:k});let K,J;X.add(k);try{J=yield ce(k),K=J.document||null,j(K)&&(K=JSON.parse(K))}catch(U){throw new E("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:k,cause:U})}if(!$(K))throw new E("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:k});return K="@context"in K?{"@context":K["@context"]}:{"@context":{}},J.contextUrl&&(A(K["@context"])||(K["@context"]=[K["@context"]]),K["@context"].push(J.contextUrl)),{context:K,remoteDoc:J}})()}}},262:Ge=>{"use strict";Ge.exports=class extends Error{constructor(M="An unspecified JSON-LD error occurred.",ee="jsonld.Error",A={}){super(M),this.name=ee,this.message=M,this.details=A}}},1328:Ge=>{"use strict";Ge.exports=ne=>{class M{toString(){return"[object JsonLdProcessor]"}}return Object.defineProperty(M,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(M.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:M}),M.compact=function(ee,A){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):ne.compact(ee,A)},M.expand=function(ee){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):ne.expand(ee)},M.flatten=function(ee){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):ne.flatten(ee)},M}},5426:(Ge,ne,M)=>{"use strict";Ge.exports=M(1224).NQuads},4808:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;Ge.exports=class{constructor(){this._requests={}}wrapLoader($){const j=this;return j._loader=$,function(){return j.add.apply(j,arguments)}}add($){var j=this;return ee(function*(){let W=j._requests[$];if(W)return Promise.resolve(W);W=j._requests[$]=j._loader($);try{return yield W}finally{delete j._requests[$]}})()}}},6181:(Ge,ne,M)=>{"use strict";const ee=M(3052);Ge.exports=class{constructor({document:j}){this.document=j,this.cache=new ee({max:10})}getProcessed(j){return this.cache.get(j)}setProcessed(j,W){this.cache.set(j,W)}}},3763:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;const A=M(262),{isArray:$,isObject:j,isString:W,isUndefined:x}=M(2831),{isList:E,isValue:N,isGraph:te,isSimpleGraph:F,isSubjectReference:C}=M(4209),{expandIri:oe,getContextValue:S,isKeyword:k,process:ce,processingMode:X}=M(429),{removeBase:K,prependBase:J}=M(2051),{REGEX_KEYWORD:U,addValue:G,asArray:w,compareShortestLeast:I}=M(9420),D={};function re(Ce,ae,we){if("@nest"!==oe(Ce,ae,{vocab:!0},we))throw new A("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}Ge.exports=D,D.compact=function(){var Ce=ee(function*({activeCtx:ae,activeProperty:we=null,element:Oe,options:ke={}}){if($(Oe)){let Qe=[];for(let xe=0;xe<Oe.length;++xe){const Be=yield D.compact({activeCtx:ae,activeProperty:we,element:Oe[xe],options:ke});null!==Be&&Qe.push(Be)}return ke.compactArrays&&1===Qe.length&&0===(S(ae,we,"@container")||[]).length&&(Qe=Qe[0]),Qe}const Ye=S(ae,we,"@context");if(x(Ye)||(ae=yield ce({activeCtx:ae,localCtx:Ye,propagate:!0,overrideProtected:!0,options:ke})),j(Oe)){if(ke.link&&"@id"in Oe&&ke.link.hasOwnProperty(Oe["@id"])){const nt=ke.link[Oe["@id"]];for(let _t=0;_t<nt.length;++_t)if(nt[_t].expanded===Oe)return nt[_t].compacted}if(N(Oe)||C(Oe)){const nt=D.compactValue({activeCtx:ae,activeProperty:we,value:Oe,options:ke});return ke.link&&C(Oe)&&(ke.link.hasOwnProperty(Oe["@id"])||(ke.link[Oe["@id"]]=[]),ke.link[Oe["@id"]].push({expanded:Oe,compacted:nt})),nt}if(E(Oe)&&(S(ae,we,"@container")||[]).includes("@list"))return D.compact({activeCtx:ae,activeProperty:we,element:Oe["@list"],options:ke});const Qe="@reverse"===we,xe={},Be=ae;!N(Oe)&&!C(Oe)&&(ae=ae.revertToPreviousContext());const Ie=S(Be,we,"@context");x(Ie)||(ae=yield ce({activeCtx:ae,localCtx:Ie,propagate:!0,overrideProtected:!0,options:ke})),ke.link&&"@id"in Oe&&(ke.link.hasOwnProperty(Oe["@id"])||(ke.link[Oe["@id"]]=[]),ke.link[Oe["@id"]].push({expanded:Oe,compacted:xe}));let et=Oe["@type"]||[];et.length>1&&(et=Array.from(et).sort());const pe=ae;for(const nt of et){const _t=D.compactIri({activeCtx:pe,iri:nt,relativeTo:{vocab:!0}}),je=S(Be,_t,"@context");x(je)||(ae=yield ce({activeCtx:ae,localCtx:je,options:ke,propagate:!1}))}const be=Object.keys(Oe).sort();for(const nt of be){const _t=Oe[nt];if("@id"!==nt)if("@type"!==nt)if("@reverse"!==nt)if("@preserve"!==nt)if("@index"!==nt)if("@graph"!==nt&&"@list"!==nt&&"@included"!==nt&&k(nt)){const je=D.compactIri({activeCtx:ae,iri:nt,relativeTo:{vocab:!0}});G(xe,je,_t)}else{if(!$(_t))throw new A("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(0===_t.length){const je=D.compactIri({activeCtx:ae,iri:nt,value:_t,relativeTo:{vocab:!0},reverse:Qe}),Q=ae.mappings.has(je)?ae.mappings.get(je)["@nest"]:null;let se=xe;Q&&(re(ae,Q,ke),j(xe[Q])||(xe[Q]={}),se=xe[Q]),G(se,je,_t,{propertyIsArray:!0})}for(const je of _t){const Q=D.compactIri({activeCtx:ae,iri:nt,value:je,relativeTo:{vocab:!0},reverse:Qe}),se=ae.mappings.has(Q)?ae.mappings.get(Q)["@nest"]:null;let Ae=xe;se&&(re(ae,se,ke),j(xe[se])||(xe[se]={}),Ae=xe[se]);const Fe=S(ae,Q,"@container")||[],Te=te(je),Je=E(je);let ot;Je?ot=je["@list"]:Te&&(ot=je["@graph"]);let ut=yield D.compact({activeCtx:ae,activeProperty:Q,element:Je||Te?ot:je,options:ke});if(Je){if($(ut)||(ut=[ut]),Fe.includes("@list")){G(Ae,Q,ut,{valueIsArray:!0,allowDuplicate:!0});continue}ut={[D.compactIri({activeCtx:ae,iri:"@list",relativeTo:{vocab:!0}})]:ut},"@index"in je&&(ut[D.compactIri({activeCtx:ae,iri:"@index",relativeTo:{vocab:!0}})]=je["@index"])}if(Te)if(Fe.includes("@graph")&&(Fe.includes("@id")||Fe.includes("@index")&&F(je))){let Le;Ae.hasOwnProperty(Q)?Le=Ae[Q]:Ae[Q]=Le={};const Z=(Fe.includes("@id")?je["@id"]:je["@index"])||D.compactIri({activeCtx:ae,iri:"@none",relativeTo:{vocab:!0}});G(Le,Z,ut,{propertyIsArray:!ke.compactArrays||Fe.includes("@set")})}else Fe.includes("@graph")&&F(je)?($(ut)&&ut.length>1&&(ut={"@included":ut}),G(Ae,Q,ut,{propertyIsArray:!ke.compactArrays||Fe.includes("@set")})):($(ut)&&1===ut.length&&ke.compactArrays&&(ut=ut[0]),ut={[D.compactIri({activeCtx:ae,iri:"@graph",relativeTo:{vocab:!0}})]:ut},"@id"in je&&(ut[D.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}})]=je["@id"]),"@index"in je&&(ut[D.compactIri({activeCtx:ae,iri:"@index",relativeTo:{vocab:!0}})]=je["@index"]),G(Ae,Q,ut,{propertyIsArray:!ke.compactArrays||Fe.includes("@set")}));else if(Fe.includes("@language")||Fe.includes("@index")||Fe.includes("@id")||Fe.includes("@type")){let Le,Z;if(Ae.hasOwnProperty(Q)?Le=Ae[Q]:Ae[Q]=Le={},Fe.includes("@language"))N(ut)&&(ut=ut["@value"]),Z=je["@language"];else if(Fe.includes("@index")){const O=S(ae,Q,"@index")||"@index",P=D.compactIri({activeCtx:ae,iri:O,relativeTo:{vocab:!0}});if("@index"===O)Z=je["@index"],delete ut[P];else{let _e;if([Z,..._e]=w(ut[O]||[]),W(Z))switch(_e.length){case 0:delete ut[O];break;case 1:ut[O]=_e[0];break;default:ut[O]=_e}else Z=null}}else if(Fe.includes("@id")){const O=D.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}});Z=ut[O],delete ut[O]}else if(Fe.includes("@type")){const O=D.compactIri({activeCtx:ae,iri:"@type",relativeTo:{vocab:!0}});let P;switch([Z,...P]=w(ut[O]||[]),P.length){case 0:delete ut[O];break;case 1:ut[O]=P[0];break;default:ut[O]=P}1===Object.keys(ut).length&&"@id"in je&&(ut=yield D.compact({activeCtx:ae,activeProperty:Q,element:{"@id":je["@id"]},options:ke}))}Z||(Z=D.compactIri({activeCtx:ae,iri:"@none",relativeTo:{vocab:!0}})),G(Le,Z,ut,{propertyIsArray:Fe.includes("@set")})}else{const Le=!ke.compactArrays||Fe.includes("@set")||Fe.includes("@list")||$(ut)&&0===ut.length||"@list"===nt||"@graph"===nt;G(Ae,Q,ut,{propertyIsArray:Le})}}}else{if((S(ae,we,"@container")||[]).includes("@index"))continue;const Q=D.compactIri({activeCtx:ae,iri:nt,relativeTo:{vocab:!0}});G(xe,Q,_t)}else{const je=yield D.compact({activeCtx:ae,activeProperty:we,element:_t,options:ke});$(je)&&0===je.length||G(xe,nt,je)}else{const je=yield D.compact({activeCtx:ae,activeProperty:"@reverse",element:_t,options:ke});for(const Q in je)if(ae.mappings.has(Q)&&ae.mappings.get(Q).reverse){const se=je[Q],Fe=(S(ae,Q,"@container")||[]).includes("@set")||!ke.compactArrays;G(xe,Q,se,{propertyIsArray:Fe}),delete je[Q]}if(Object.keys(je).length>0){const Q=D.compactIri({activeCtx:ae,iri:nt,relativeTo:{vocab:!0}});G(xe,Q,je)}}else{let je=w(_t).map(Te=>D.compactIri({activeCtx:Be,iri:Te,relativeTo:{vocab:!0}}));1===je.length&&(je=je[0]);const Q=D.compactIri({activeCtx:ae,iri:"@type",relativeTo:{vocab:!0}}),Fe=(S(ae,Q,"@container")||[]).includes("@set")&&X(ae,1.1)||$(je)&&0===_t.length;G(xe,Q,je,{propertyIsArray:Fe})}else{let je=w(_t).map(se=>D.compactIri({activeCtx:ae,iri:se,relativeTo:{vocab:!1},base:ke.base}));1===je.length&&(je=je[0]),xe[D.compactIri({activeCtx:ae,iri:"@id",relativeTo:{vocab:!0}})]=je}}return xe}return Oe});return function(ae){return Ce.apply(this,arguments)}}(),D.compactIri=({activeCtx:Ce,iri:ae,value:we=null,relativeTo:Oe={vocab:!1},reverse:ke=!1,base:Ye=null})=>{if(null===ae)return ae;Ce.isPropertyTermScoped&&Ce.previousContext&&(Ce=Ce.previousContext);const Qe=Ce.getInverse();if(k(ae)&&ae in Qe&&"@none"in Qe[ae]&&"@type"in Qe[ae]["@none"]&&"@none"in Qe[ae]["@none"]["@type"])return Qe[ae]["@none"]["@type"]["@none"];if(Oe.vocab&&ae in Qe){const pe=Ce["@language"]||"@none",be=[];j(we)&&"@index"in we&&!("@graph"in we)&&be.push("@index","@index@set"),j(we)&&"@preserve"in we&&(we=we["@preserve"][0]),te(we)?("@index"in we&&be.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in we&&be.push("@graph@id","@graph@id@set"),be.push("@graph","@graph@set","@set"),"@index"in we||be.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in we||be.push("@graph@id","@graph@id@set")):j(we)&&!N(we)&&be.push("@id","@id@set","@type","@set@type");let nt="@language",_t="@null";if(ke)nt="@type",_t="@reverse",be.push("@set");else if(E(we)){"@index"in we||be.push("@list");const Q=we["@list"];if(0===Q.length)nt="@any",_t="@none";else{let se=0===Q.length?pe:null,Ae=null;for(let Fe=0;Fe<Q.length;++Fe){const Te=Q[Fe];let Je="@none",ot="@none";if(N(Te)?"@direction"in Te?Je=`${(Te["@language"]||"").toLowerCase()}_${Te["@direction"]}`:"@language"in Te?Je=Te["@language"].toLowerCase():"@type"in Te?ot=Te["@type"]:Je="@null":ot="@id",null===se?se=Je:Je!==se&&N(Te)&&(se="@none"),null===Ae?Ae=ot:ot!==Ae&&(Ae="@none"),"@none"===se&&"@none"===Ae)break}se=se||"@none",Ae=Ae||"@none","@none"!==Ae?(nt="@type",_t=Ae):_t=se}}else{if(N(we))if("@language"in we&&!("@index"in we)){be.push("@language","@language@set"),_t=we["@language"];const Q=we["@direction"];Q&&(_t=`${_t}_${Q}`)}else"@direction"in we&&!("@index"in we)?_t=`_${we["@direction"]}`:"@type"in we&&(nt="@type",_t=we["@type"]);else nt="@type",_t="@id";be.push("@set")}be.push("@none"),j(we)&&!("@index"in we)&&be.push("@index","@index@set"),N(we)&&1===Object.keys(we).length&&be.push("@language","@language@set");const je=function ue(Ce,ae,we,Oe,ke,Ye){null===Ye&&(Ye="@null");const Qe=[];if(("@id"===Ye||"@reverse"===Ye)&&j(we)&&"@id"in we){"@reverse"===Ye&&Qe.push("@reverse");const Be=D.compactIri({activeCtx:Ce,iri:we["@id"],relativeTo:{vocab:!0}});Ce.mappings.has(Be)&&Ce.mappings.get(Be)&&Ce.mappings.get(Be)["@id"]===we["@id"]?Qe.push.apply(Qe,["@vocab","@id"]):Qe.push.apply(Qe,["@id","@vocab"])}else{Qe.push(Ye);const Be=Qe.find(Ie=>Ie.includes("_"));Be&&Qe.push(Be.replace(/^[^_]+_/,"_"))}Qe.push("@none");const xe=Ce.inverse[ae];for(const Be of Oe){if(!(Be in xe))continue;const Ie=xe[Be][ke];for(const et of Qe)if(et in Ie)return Ie[et]}return null}(Ce,ae,we,be,nt,_t);if(null!==je)return je}if(Oe.vocab&&"@vocab"in Ce){const pe=Ce["@vocab"];if(0===ae.indexOf(pe)&&ae!==pe){const be=ae.substr(pe.length);if(!Ce.mappings.has(be))return be}}let xe=null;const Be=[];let Ie=Ce.fastCurieMap;const et=ae.length-1;for(let pe=0;pe<et&&ae[pe]in Ie;++pe)Ie=Ie[ae[pe]],""in Ie&&Be.push(Ie[""][0]);for(let pe=Be.length-1;pe>=0;--pe){const be=Be[pe],nt=be.terms;for(const _t of nt){const je=_t+":"+ae.substr(be.iri.length);Ce.mappings.get(_t)._prefix&&(!Ce.mappings.has(je)||null===we&&Ce.mappings.get(je)["@id"]===ae)&&(null===xe||I(je,xe)<0)&&(xe=je)}}if(null!==xe)return xe;for(const[pe,be]of Ce.mappings)if(be&&be._prefix&&ae.startsWith(pe+":"))throw new A(`Absolute IRI "${ae}" confused with prefix "${pe}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:Ce});if(!Oe.vocab){if("@base"in Ce){if(Ce["@base"]){const pe=K(J(Ye,Ce["@base"]),ae);return U.test(pe)?`./${pe}`:pe}return ae}return K(Ye,ae)}return ae},D.compactValue=({activeCtx:Ce,activeProperty:ae,value:we,options:Oe})=>{if(N(we)){const xe=S(Ce,ae,"@type"),Be=S(Ce,ae,"@language"),Ie=S(Ce,ae,"@direction"),et=S(Ce,ae,"@container")||[],pe="@index"in we&&!et.includes("@index");if(!pe&&"@none"!==xe&&(we["@type"]===xe||"@language"in we&&we["@language"]===Be&&"@direction"in we&&we["@direction"]===Ie||"@language"in we&&we["@language"]===Be||"@direction"in we&&we["@direction"]===Ie))return we["@value"];const be=Object.keys(we).length,nt=1===be||2===be&&"@index"in we&&!pe,_t="@language"in Ce,je=W(we["@value"]),Q=Ce.mappings.has(ae)&&null===Ce.mappings.get(ae)["@language"];if(nt&&"@none"!==xe&&(!_t||!je||Q))return we["@value"];const se={};return pe&&(se[D.compactIri({activeCtx:Ce,iri:"@index",relativeTo:{vocab:!0}})]=we["@index"]),"@type"in we?se[D.compactIri({activeCtx:Ce,iri:"@type",relativeTo:{vocab:!0}})]=D.compactIri({activeCtx:Ce,iri:we["@type"],relativeTo:{vocab:!0}}):"@language"in we&&(se[D.compactIri({activeCtx:Ce,iri:"@language",relativeTo:{vocab:!0}})]=we["@language"]),"@direction"in we&&(se[D.compactIri({activeCtx:Ce,iri:"@direction",relativeTo:{vocab:!0}})]=we["@direction"]),se[D.compactIri({activeCtx:Ce,iri:"@value",relativeTo:{vocab:!0}})]=we["@value"],se}const ke=oe(Ce,ae,{vocab:!0},Oe),Ye=S(Ce,ae,"@type"),Qe=D.compactIri({activeCtx:Ce,iri:we["@id"],relativeTo:{vocab:"@vocab"===Ye},base:Oe.base});return"@id"===Ye||"@vocab"===Ye||"@graph"===ke?Qe:{[D.compactIri({activeCtx:Ce,iri:"@id",relativeTo:{vocab:!0}})]:Qe}}},5315:Ge=>{"use strict";const ne="http://www.w3.org/1999/02/22-rdf-syntax-ns#",M="http://www.w3.org/2001/XMLSchema#";Ge.exports={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF:ne,RDF_LIST:ne+"List",RDF_FIRST:ne+"first",RDF_REST:ne+"rest",RDF_NIL:ne+"nil",RDF_TYPE:ne+"type",RDF_PLAIN_LITERAL:ne+"PlainLiteral",RDF_XML_LITERAL:ne+"XMLLiteral",RDF_JSON_LITERAL:ne+"JSON",RDF_OBJECT:ne+"object",RDF_LANGSTRING:ne+"langString",XSD:M,XSD_BOOLEAN:M+"boolean",XSD_DOUBLE:M+"double",XSD_INTEGER:M+"integer",XSD_STRING:M+"string"}},429:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;const A=M(9420),$=M(262),{isArray:j,isObject:W,isString:x,isUndefined:E}=M(2831),{isAbsolute:N,isRelative:te,prependBase:F}=M(2051),{handleEvent:C}=M(2585),{REGEX_BCP47:oe,REGEX_KEYWORD:S,asArray:k,compareShortestLeast:ce}=M(9420),X=new Map,J={};function U(w,I,D,ue,re,Ce){if(null===I||!x(I)||J.isKeyword(I))return I;if(I.match(S))return null;if(ue&&ue.hasOwnProperty(I)&&!0!==re.get(I)&&J.createTermDefinition({activeCtx:w,localCtx:ue,term:I,defined:re,options:Ce}),(D=D||{}).vocab){const we=w.mappings.get(I);if(null===we)return null;if(W(we)&&"@id"in we)return we["@id"]}const ae=I.indexOf(":");if(ae>0){const we=I.substr(0,ae),Oe=I.substr(ae+1);if("_"===we||0===Oe.indexOf("//"))return I;ue&&ue.hasOwnProperty(we)&&J.createTermDefinition({activeCtx:w,localCtx:ue,term:we,defined:re,options:Ce});const ke=w.mappings.get(we);if(ke&&ke._prefix)return ke["@id"]+Oe;if(N(I))return I}if(D.vocab&&"@vocab"in w)I=w["@vocab"]+I;else if(D.base){let we,Oe;"@base"in w?w["@base"]?(Oe=F(Ce.base,w["@base"]),we=F(Oe,I)):(Oe=w["@base"],we=I):(Oe=Ce.base,we=F(Ce.base,I)),I=we}return I}function G(w,I){if(!w||"object"!=typeof w||!I||"object"!=typeof I)return w===I;const D=Array.isArray(w);if(D!==Array.isArray(I))return!1;if(D){if(w.length!==I.length)return!1;for(let Ce=0;Ce<w.length;++Ce)if(!G(w[Ce],I[Ce]))return!1;return!0}const ue=Object.keys(w),re=Object.keys(I);if(ue.length!==re.length)return!1;for(const Ce in w){let ae=w[Ce],we=I[Ce];if("@container"===Ce&&Array.isArray(ae)&&Array.isArray(we)&&(ae=ae.slice().sort(),we=we.slice().sort()),!G(ae,we))return!1}return!0}Ge.exports=J,J.process=function(){var w=ee(function*({activeCtx:I,localCtx:D,options:ue,propagate:re=!0,overrideProtected:Ce=!1,cycles:ae=new Set}){if(W(D)&&"@context"in D&&j(D["@context"])&&(D=D["@context"]),0===k(D).length)return I;const Oe=[],ke=[({event:Be,next:Ie})=>{Oe.push(Be),Ie()}];ue.eventHandler&&ke.push(ue.eventHandler);const Ye=ue;ue={...ue,eventHandler:ke};const Qe=yield ue.contextResolver.resolve({activeCtx:I,context:D,documentLoader:ue.documentLoader,base:ue.base});W(Qe[0].document)&&"boolean"==typeof Qe[0].document["@propagate"]&&(re=Qe[0].document["@propagate"]);let xe=I;!re&&!xe.previousContext&&(xe=xe.clone(),xe.previousContext=I);for(const Be of Qe){let{document:Ie}=Be;if(I=xe,null===Ie){if(!Ce&&0!==Object.keys(I.protected).length)throw new $("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});xe=I=J.getInitialContext(ue).clone();continue}const et=Be.getProcessed(I);if(et){if(Ye.eventHandler)for(const be of et.events)C({event:be,options:Ye});xe=I=et.context;continue}if(W(Ie)&&"@context"in Ie&&(Ie=Ie["@context"]),!W(Ie))throw new $("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:Ie});xe=xe.clone();const pe=new Map;if("@version"in Ie){if(1.1!==Ie["@version"])throw new $("Unsupported JSON-LD version: "+Ie["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:Ie});if(I.processingMode&&"json-ld-1.0"===I.processingMode)throw new $("@version: "+Ie["@version"]+" not compatible with "+I.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:Ie});xe.processingMode="json-ld-1.1",xe["@version"]=Ie["@version"],pe.set("@version",!0)}if(xe.processingMode=xe.processingMode||I.processingMode,"@base"in Ie){let be=Ie["@base"];if(null!==be&&!N(be)){if(!te(be))throw new $('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:Ie});be=F(xe["@base"],be)}xe["@base"]=be,pe.set("@base",!0)}if("@vocab"in Ie){const be=Ie["@vocab"];if(null===be)delete xe["@vocab"];else{if(!x(be))throw new $('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ie});if(!N(be)&&J.processingMode(xe,1))throw new $('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:Ie});{const nt=U(xe,be,{vocab:!0,base:!0},void 0,void 0,ue);N(nt)||ue.eventHandler&&C({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab:nt}},options:ue}),xe["@vocab"]=nt}}pe.set("@vocab",!0)}if("@language"in Ie){const be=Ie["@language"];if(null===be)delete xe["@language"];else{if(!x(be))throw new $('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:Ie});be.match(oe)||ue.eventHandler&&C({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:be}},options:ue}),xe["@language"]=be.toLowerCase()}pe.set("@language",!0)}if("@direction"in Ie){const be=Ie["@direction"];if("json-ld-1.0"===I.processingMode)throw new $("Invalid JSON-LD syntax; @direction not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:Ie});if(null===be)delete xe["@direction"];else{if("ltr"!==be&&"rtl"!==be)throw new $('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:Ie});xe["@direction"]=be}pe.set("@direction",!0)}if("@propagate"in Ie){const be=Ie["@propagate"];if("json-ld-1.0"===I.processingMode)throw new $("Invalid JSON-LD syntax; @propagate not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ie});if("boolean"!=typeof be)throw new $("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:D});pe.set("@propagate",!0)}if("@import"in Ie){const be=Ie["@import"];if("json-ld-1.0"===I.processingMode)throw new $("Invalid JSON-LD syntax; @import not compatible with "+I.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:Ie});if(!x(be))throw new $("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:D});const nt=yield ue.contextResolver.resolve({activeCtx:I,context:be,documentLoader:ue.documentLoader,base:ue.base});if(1!==nt.length)throw new $("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:D});const _t=nt[0].getProcessed(I);if(_t)Ie=_t;else{const je=nt[0].document;if("@import"in je)throw new $("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:D});for(const Q in je)Ie.hasOwnProperty(Q)||(Ie[Q]=je[Q]);nt[0].setProcessed(I,Ie)}pe.set("@import",!0)}pe.set("@protected",Ie["@protected"]||!1);for(const be in Ie)if(J.createTermDefinition({activeCtx:xe,localCtx:Ie,term:be,defined:pe,options:ue,overrideProtected:Ce}),W(Ie[be])&&"@context"in Ie[be]){const nt=Ie[be]["@context"];let _t=!0;if(x(nt)){const je=F(ue.base,nt);ae.has(je)?_t=!1:ae.add(je)}if(_t)try{yield J.process({activeCtx:xe.clone(),localCtx:Ie[be]["@context"],overrideProtected:!0,options:ue,cycles:ae})}catch{throw new $("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:Ie[be]["@context"],term:be})}}Be.setProcessed(I,{context:xe,events:Oe})}return xe});return function(I){return w.apply(this,arguments)}}(),J.createTermDefinition=({activeCtx:w,localCtx:I,term:D,defined:ue,options:re,overrideProtected:Ce=!1})=>{if(ue.has(D)){if(ue.get(D))return;throw new $("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:I,term:D})}let ae;if(ue.set(D,!1),I.hasOwnProperty(D)&&(ae=I[D]),"@type"===D&&W(ae)&&"@set"===(ae["@container"]||"@set")&&J.processingMode(w,1.1)){const Be=["@container","@id","@protected"],Ie=Object.keys(ae);if(0===Ie.length||Ie.some(et=>!Be.includes(et)))throw new $("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:I,term:D})}else{if(J.isKeyword(D))throw new $("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:I,term:D});if(D.match(S))return void(re.eventHandler&&C({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term:D}},options:re}));if(""===D)throw new $("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:I})}const we=w.mappings.get(D);w.mappings.has(D)&&w.mappings.delete(D);let Oe=!1;if((x(ae)||null===ae)&&(Oe=!0,ae={"@id":ae}),!W(ae))throw new $("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:I});const ke={};w.mappings.set(D,ke),ke.reverse=!1;const Ye=["@container","@id","@language","@reverse","@type"];J.processingMode(w,1.1)&&Ye.push("@context","@direction","@index","@nest","@prefix","@protected");for(const Be in ae)if(!Ye.includes(Be))throw new $("Invalid JSON-LD syntax; a term definition must not contain "+Be,"jsonld.SyntaxError",{code:"invalid term definition",context:I});const Qe=D.indexOf(":");if(ke._termHasColon=Qe>0,"@reverse"in ae){if("@id"in ae)throw new $("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:I});if("@nest"in ae)throw new $("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:I});const Be=ae["@reverse"];if(!x(Be))throw new $("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});if(Be.match(S))return re.eventHandler&&C({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse:Be}},options:re}),void(we?w.mappings.set(D,we):w.mappings.delete(D));const Ie=U(w,Be,{vocab:!0,base:!1},I,ue,re);if(!N(Ie))throw new $("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});ke["@id"]=Ie,ke.reverse=!0}else if("@id"in ae){let Be=ae["@id"];if(Be&&!x(Be))throw new $("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});if(null===Be)ke["@id"]=null;else{if(!J.isKeyword(Be)&&Be.match(S))return re.eventHandler&&C({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:Be}},options:re}),void(we?w.mappings.set(D,we):w.mappings.delete(D));if(Be!==D){if(Be=U(w,Be,{vocab:!0,base:!1},I,ue,re),!N(Be)&&!J.isKeyword(Be))throw new $("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});if(D.match(/(?::[^:])|\//)&&U(w,D,{vocab:!0,base:!1},I,new Map(ue).set(D,!0),re)!==Be)throw new $("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I});ke["@id"]=Be,ke._prefix=Oe&&!ke._termHasColon&&null!==Be.match(/[:\/\?#\[\]@]$/)}}}if(!("@id"in ke))if(ke._termHasColon){const Be=D.substr(0,Qe);if(I.hasOwnProperty(Be)&&J.createTermDefinition({activeCtx:w,localCtx:I,term:Be,defined:ue,options:re}),w.mappings.has(Be)){const Ie=D.substr(Qe+1);ke["@id"]=w.mappings.get(Be)["@id"]+Ie}else ke["@id"]=D}else if("@type"===D)ke["@id"]=D;else{if(!("@vocab"in w))throw new $("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:I,term:D});ke["@id"]=w["@vocab"]+D}if((!0===ae["@protected"]||!0===ue.get("@protected")&&!1!==ae["@protected"])&&(w.protected[D]=!0,ke.protected=!0),ue.set(D,!0),"@type"in ae){let Be=ae["@type"];if(!x(Be))throw new $("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:I});if("@json"===Be||"@none"===Be){if(J.processingMode(w,1))throw new $(`Invalid JSON-LD syntax; an @context @type value must not be "${Be}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:I})}else if("@id"!==Be&&"@vocab"!==Be){if(Be=U(w,Be,{vocab:!0,base:!1},I,ue,re),!N(Be))throw new $("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:I});if(0===Be.indexOf("_:"))throw new $("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:I})}ke["@type"]=Be}if("@container"in ae){const Be=x(ae["@container"])?[ae["@container"]]:ae["@container"]||[],Ie=["@list","@set","@index","@language"];let et=!0;const pe=Be.includes("@set");if(J.processingMode(w,1.1)){if(Ie.push("@graph","@id","@type"),Be.includes("@list")){if(1!==Be.length)throw new $("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:I})}else if(Be.includes("@graph")){if(Be.some(be=>"@graph"!==be&&"@id"!==be&&"@index"!==be&&"@set"!==be))throw new $("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:I})}else et&=Be.length<=(pe?2:1);if(Be.includes("@type")&&(ke["@type"]=ke["@type"]||"@id",!["@id","@vocab"].includes(ke["@type"])))throw new $("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:I})}else et&=!j(ae["@container"]),et&=Be.length<=1;if(et&=Be.every(be=>Ie.includes(be)),et&=!(pe&&Be.includes("@list")),!et)throw new $("Invalid JSON-LD syntax; @context @container value must be one of the following: "+Ie.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:I});if(ke.reverse&&!Be.every(be=>["@index","@set"].includes(be)))throw new $("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:I});ke["@container"]=Be}if("@index"in ae){if(!("@container"in ae)||!ke["@container"].includes("@index"))throw new $(`Invalid JSON-LD syntax; @index without @index in @container: "${ae["@index"]}" on term "${D}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:I});if(!x(ae["@index"])||0===ae["@index"].indexOf("@"))throw new $(`Invalid JSON-LD syntax; @index must expand to an IRI: "${ae["@index"]}" on term "${D}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:I});ke["@index"]=ae["@index"]}if("@context"in ae&&(ke["@context"]=ae["@context"]),"@language"in ae&&!("@type"in ae)){let Be=ae["@language"];if(null!==Be&&!x(Be))throw new $("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:I});null!==Be&&(Be=Be.toLowerCase()),ke["@language"]=Be}if("@prefix"in ae){if(D.match(/:|\//))throw new $("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:I});if(J.isKeyword(ke["@id"]))throw new $("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:I});if("boolean"!=typeof ae["@prefix"])throw new $("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:I});ke._prefix=!0===ae["@prefix"]}if("@direction"in ae){const Be=ae["@direction"];if(null!==Be&&"ltr"!==Be&&"rtl"!==Be)throw new $('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:I});ke["@direction"]=Be}if("@nest"in ae){const Be=ae["@nest"];if(!x(Be)||"@nest"!==Be&&0===Be.indexOf("@"))throw new $("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:I});ke["@nest"]=Be}const xe=ke["@id"];if("@context"===xe||"@preserve"===xe)throw new $("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:I});if(we&&we.protected&&!Ce&&(w.protected[D]=!0,ke.protected=!0,!G(we,ke)))throw new $("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:I,term:D})},J.expandIri=(w,I,D,ue)=>U(w,I,D,void 0,void 0,ue),J.getInitialContext=w=>{const I=JSON.stringify({processingMode:w.processingMode}),D=X.get(I);if(D)return D;const ue={processingMode:w.processingMode,mappings:new Map,inverse:null,getInverse:function re(){const ke=this;if(ke.inverse)return ke.inverse;const Ye=ke.inverse={},Qe=ke.fastCurieMap={},xe={},Be=(ke["@language"]||"@none").toLowerCase(),Ie=ke["@direction"],et=ke.mappings,pe=[...et.keys()].sort(ce);for(const be of pe){const nt=et.get(be);if(null===nt)continue;let _t=nt["@container"]||"@none";if(_t=[].concat(_t).sort().join(""),null===nt["@id"])continue;const je=k(nt["@id"]);for(const Q of je){let se=Ye[Q];const Ae=J.isKeyword(Q);if(se)!Ae&&!nt._termHasColon&&xe[Q].push(be);else if(Ye[Q]=se={},!Ae&&!nt._termHasColon){xe[Q]=[be];const Fe={iri:Q,terms:xe[Q]};Q[0]in Qe?Qe[Q[0]].push(Fe):Qe[Q[0]]=[Fe]}if(se[_t]||(se[_t]={"@language":{},"@type":{},"@any":{}}),se=se[_t],ae(be,se["@any"],"@none"),nt.reverse)ae(be,se["@type"],"@reverse");else if("@none"===nt["@type"])ae(be,se["@any"],"@none"),ae(be,se["@language"],"@none"),ae(be,se["@type"],"@none");else if("@type"in nt)ae(be,se["@type"],nt["@type"]);else if("@language"in nt&&"@direction"in nt){const Fe=nt["@language"],Te=nt["@direction"];ae(be,se["@language"],Fe&&Te?`${Fe}_${Te}`.toLowerCase():Fe?Fe.toLowerCase():Te?`_${Te}`:"@null")}else"@language"in nt?ae(be,se["@language"],(nt["@language"]||"@null").toLowerCase()):"@direction"in nt?ae(be,se["@language"],nt["@direction"]?`_${nt["@direction"]}`:"@none"):Ie?(ae(be,se["@language"],`_${Ie}`),ae(be,se["@language"],"@none"),ae(be,se["@type"],"@none")):(ae(be,se["@language"],Be),ae(be,se["@language"],"@none"),ae(be,se["@type"],"@none"))}}for(const be in Qe)Ce(Qe,be,1);return Ye},clone:function we(){const ke={};return ke.mappings=A.clone(this.mappings),ke.clone=this.clone,ke.inverse=null,ke.getInverse=this.getInverse,ke.protected=A.clone(this.protected),this.previousContext&&(ke.previousContext=this.previousContext.clone()),ke.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(ke["@base"]=this["@base"]),"@language"in this&&(ke["@language"]=this["@language"]),"@vocab"in this&&(ke["@vocab"]=this["@vocab"]),ke},revertToPreviousContext:function Oe(){return this.previousContext?this.previousContext.clone():this},protected:{}};return 1e4===X.size&&X.clear(),X.set(I,ue),ue;function Ce(ke,Ye,Qe){const xe=ke[Ye],Be=ke[Ye]={};let Ie,et;for(const pe of xe)Ie=pe.iri,et=Qe>=Ie.length?"":Ie[Qe],et in Be?Be[et].push(pe):Be[et]=[pe];for(const pe in Be)""!==pe&&Ce(Be,pe,Qe+1)}function ae(ke,Ye,Qe){Ye.hasOwnProperty(Qe)||(Ye[Qe]=ke)}},J.getContextValue=(w,I,D)=>{if(null===I)return"@context"===D?void 0:null;if(w.mappings.has(I)){const ue=w.mappings.get(I);if(E(D))return ue;if(ue.hasOwnProperty(D))return ue[D]}return"@language"===D&&D in w||"@direction"===D&&D in w?w[D]:"@context"!==D?null:void 0},J.processingMode=(w,I)=>I.toString()>="1.1"?!w.processingMode||w.processingMode>="json-ld-"+I.toString():"json-ld-1.0"===w.processingMode,J.isKeyword=w=>{if(!x(w)||"@"!==w[0])return!1;switch(w){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1}},3120:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;const{parseLinkHeader:A,buildHeaders:$}=M(9420),{LINK_HEADER_CONTEXT:j}=M(5315),W=M(262),x=M(4808),{prependBase:E}=M(2051),N=/(^|(\r\n))link:/i;Ge.exports=({secure:F,headers:C={},xhr:oe}={headers:{}})=>{return C=$(C),(new x).wrapLoader(k);function k(X){return ce.apply(this,arguments)}function ce(){return ce=ee(function*(X){if(0!==X.indexOf("http:")&&0!==X.indexOf("https:"))throw new W('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:X});if(F&&0!==X.indexOf("https"))throw new W('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:X});let K;try{K=yield function te(F,C,oe){const S=new(F=F||XMLHttpRequest);return new Promise((k,ce)=>{S.onload=()=>k(S),S.onerror=X=>ce(X),S.open("GET",C,!0);for(const X in oe)S.setRequestHeader(X,oe[X]);S.send()})}(oe,X,C)}catch(I){throw new W("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:X,cause:I})}if(K.status>=400)throw new W("URL could not be dereferenced: "+K.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:X,httpStatusCode:K.status});let J={contextUrl:null,documentUrl:X,document:K.response},U=null;const G=K.getResponseHeader("Content-Type");let w;if(N.test(K.getAllResponseHeaders())&&(w=K.getResponseHeader("Link")),w&&"application/ld+json"!==G){const I=A(w),D=I[j];if(Array.isArray(D))throw new W("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:X});D&&(J.contextUrl=D.target),U=I.alternate,U&&"application/ld+json"==U.type&&!(G||"").match(/^application\/(\w*\+)?json$/)&&(J=yield k(E(X,U.target)))}return J}),ce.apply(this,arguments)}}},2585:(Ge,ne,M)=>{"use strict";const ee=M(262),{isArray:A}=M(2831),{asArray:$}=M(9420),j={};function W({event:E,handlers:N}){let te=!0;for(let F=0;te&&F<N.length;++F){te=!1;const C=N[F];if(A(C))te=W({event:E,handlers:C});else if("function"==typeof C)C({event:E,next:()=>{te=!0}});else{if("object"!=typeof C)throw new ee("Invalid event handler.","jsonld.InvalidEventHandler",{event:E});E.code in C?C[E.code]({event:E,next:()=>{te=!0}}):te=!0}}return te}Ge.exports=j,j.defaultEventHandler=null,j.setupEventHandler=({options:E={}})=>{const N=[].concat(E.safe?j.safeEventHandler:[],E.eventHandler?$(E.eventHandler):[],j.defaultEventHandler?j.defaultEventHandler:[]);return 0===N.length?null:N},j.handleEvent=({event:E,options:N})=>{W({event:E,handlers:N.eventHandler})};const x=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference","rdfDirection not set"]);j.safeEventHandler=function({event:N,next:te}){if("warning"===N.level&&x.has(N.code))throw new ee("Safe mode validation error.","jsonld.ValidationError",{event:N});te()},j.logEventHandler=function({event:N,next:te}){console.log(`EVENT: ${N.message}`,{event:N}),te()},j.logWarningEventHandler=function({event:N,next:te}){"warning"===N.level&&console.warn(`WARNING: ${N.message}`,{event:N}),te()},j.unhandledEventHandler=function({event:N}){throw new ee("No handler for event.","jsonld.UnhandledEvent",{event:N})},j.setDefaultEventHandler=function({eventHandler:E}={}){j.defaultEventHandler=E?$(E):null}},7336:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;const A=M(262),{isArray:$,isObject:j,isEmptyObject:W,isString:x,isUndefined:E}=M(2831),{isList:N,isValue:te,isGraph:F,isSubject:C}=M(4209),{expandIri:oe,getContextValue:S,isKeyword:k,process:ce,processingMode:X}=M(429),{isAbsolute:K}=M(2051),{REGEX_BCP47:J,REGEX_KEYWORD:U,addValue:G,asArray:w,getValues:I,validateTypeValue:D}=M(9420),{handleEvent:ue}=M(2585),re={};function Ce({value:xe,count:Be,options:Ie}){if(0===Be||"@value"in xe||"@list"in xe||1===Be&&"@id"in xe){if(Ie.eventHandler){let et,pe;0===Be?(et="empty object",pe="Dropping empty object."):"@value"in xe?(et="object with only @value",pe="Dropping object with only @value."):"@list"in xe?(et="object with only @list",pe="Dropping object with only @list."):1===Be&&"@id"in xe&&(et="object with only @id",pe="Dropping object with only @id."),ue({event:{type:["JsonLdEvent"],code:et,level:"warning",message:pe,details:{value:xe}},options:Ie})}return null}return xe}function ae(xe){return we.apply(this,arguments)}function we(){return(we=ee(function*({activeCtx:xe,activeProperty:Be,expandedActiveProperty:Ie,element:et,expandedParent:pe,options:be={},insideList:nt,typeKey:_t,typeScopedContext:je}){const Q=Object.keys(et).sort(),se=[];let Ae;const Fe=et[_t]&&"@json"===oe(xe,$(et[_t])?et[_t][0]:et[_t],{vocab:!0},{...be,typeExpansion:!0});for(const Te of Q){let ot,Je=et[Te];if("@context"===Te)continue;const ut=oe(xe,Te,{vocab:!0},be);if(null===ut||!K(ut)&&!k(ut)){be.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:Te,expandedProperty:ut}},options:be});continue}if(k(ut)){if("@reverse"===Ie)throw new A("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:Je});if(ut in pe&&"@included"!==ut&&"@type"!==ut)throw new A("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:ut})}if("@id"===ut){if(!x(Je)){if(!be.isFrame)throw new A('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:Je});if(j(Je)){if(!W(Je))throw new A('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Je})}else{if(!$(Je))throw new A('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Je});if(!Je.every(P=>x(P)))throw new A('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value:Je})}}G(pe,"@id",w(Je).map(P=>{if(x(P)){const _e=oe(xe,P,{base:!0},be);return be.eventHandler&&(null===_e?ue(null===P?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:P}},options:be}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:P}},options:be}):K(_e)||ue({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:P,expandedId:_e}},options:be})),_e}return P}),{propertyIsArray:be.isFrame});continue}if("@type"===ut){j(Je)&&(Je=Object.fromEntries(Object.entries(Je).map(([P,_e])=>[oe(je,P,{vocab:!0}),w(_e).map(ze=>oe(je,ze,{base:!0,vocab:!0},{...be,typeExpansion:!0}))]))),D(Je,be.isFrame),G(pe,"@type",w(Je).map(P=>{if(x(P)){const _e=oe(je,P,{base:!0,vocab:!0},{...be,typeExpansion:!0});return"@json"!==_e&&!K(_e)&&be.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:P}},options:be}),_e}return P}),{propertyIsArray:!!be.isFrame});continue}if("@included"===ut&&X(xe,1.1)){const P=w(yield re.expand({activeCtx:xe,activeProperty:Be,element:Je,options:be}));if(!P.every(_e=>C(_e)))throw new A("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value:Je});G(pe,"@included",P,{propertyIsArray:!0});continue}if("@graph"===ut&&!j(Je)&&!$(Je))throw new A('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:Je});if("@value"===ut){Ae=Je,Fe&&X(xe,1.1)?pe["@value"]=Je:G(pe,"@value",Je,{propertyIsArray:be.isFrame});continue}if("@language"===ut){if(null===Je)continue;if(!x(Je)&&!be.isFrame)throw new A('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:Je});Je=w(Je).map(P=>x(P)?P.toLowerCase():P);for(const P of Je)x(P)&&!P.match(J)&&be.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:P}},options:be});G(pe,"@language",Je,{propertyIsArray:be.isFrame});continue}if("@direction"===ut){if(!x(Je)&&!be.isFrame)throw new A('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value:Je});Je=w(Je);for(const P of Je)if(x(P)&&"ltr"!==P&&"rtl"!==P)throw new A('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value:Je});G(pe,"@direction",Je,{propertyIsArray:be.isFrame});continue}if("@index"===ut){if(!x(Je))throw new A('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:Je});G(pe,"@index",Je);continue}if("@reverse"===ut){if(!j(Je))throw new A('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:Je});if(ot=yield re.expand({activeCtx:xe,activeProperty:"@reverse",element:Je,options:be}),"@reverse"in ot)for(const _e in ot["@reverse"])G(pe,_e,ot["@reverse"][_e],{propertyIsArray:!0});let P=pe["@reverse"]||null;for(const _e in ot){if("@reverse"===_e)continue;null===P&&(P=pe["@reverse"]={}),G(P,_e,[],{propertyIsArray:!0});const ze=ot[_e];for(let ve=0;ve<ze.length;++ve){const Ve=ze[ve];if(te(Ve)||N(Ve))throw new A('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:ot});G(P,_e,Ve,{propertyIsArray:!0})}}continue}if("@nest"===ut){se.push(Te);continue}let Le=xe;const Z=S(xe,Te,"@context");E(Z)||(Le=yield ce({activeCtx:xe,localCtx:Z,propagate:!0,overrideProtected:!0,options:be}));const O=S(xe,Te,"@container")||[];if(O.includes("@language")&&j(Je))ot=ke(Le,Je,S(Le,Te,"@direction"),be);else if(O.includes("@index")&&j(Je)){const P=O.includes("@graph"),_e=S(Le,Te,"@index")||"@index",ze="@index"!==_e&&oe(xe,_e,{vocab:!0},be);ot=yield Ye({activeCtx:Le,options:be,activeProperty:Te,value:Je,asGraph:P,indexKey:_e,propertyIndex:ze})}else if(O.includes("@id")&&j(Je)){const P=O.includes("@graph");ot=yield Ye({activeCtx:Le,options:be,activeProperty:Te,value:Je,asGraph:P,indexKey:"@id"})}else if(O.includes("@type")&&j(Je))ot=yield Ye({activeCtx:Le.revertToPreviousContext(),options:be,activeProperty:Te,value:Je,asGraph:!1,indexKey:"@type"});else{const P="@list"===ut;if(P||"@set"===ut){let _e=Be;P&&"@graph"===Ie&&(_e=null),ot=yield re.expand({activeCtx:Le,activeProperty:_e,element:Je,options:be,insideList:P})}else ot="@json"===S(xe,Te,"@type")?{"@type":"@json","@value":Je}:yield re.expand({activeCtx:Le,activeProperty:Te,element:Je,options:be,insideList:!1})}if(null!==ot||"@value"===ut){if("@list"!==ut&&!N(ot)&&O.includes("@list")&&(ot={"@list":w(ot)}),O.includes("@graph")&&!O.some(P=>"@id"===P||"@index"===P)){if(ot=w(ot),be.isFrame||(ot=ot.filter(P=>null!==Ce({value:P,count:Object.keys(P).length,options:be}))),0===ot.length)continue;ot=ot.map(P=>({"@graph":w(P)}))}if(Le.mappings.has(Te)&&Le.mappings.get(Te).reverse){const P=pe["@reverse"]=pe["@reverse"]||{};ot=w(ot);for(let _e=0;_e<ot.length;++_e){const ze=ot[_e];if(te(ze)||N(ze))throw new A('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:ot});G(P,ut,ze,{propertyIsArray:!0})}continue}G(pe,ut,ot,{propertyIsArray:!0})}}if("@value"in pe&&("@json"!==pe["@type"]||!X(xe,1.1))&&(j(Ae)||$(Ae))&&!be.isFrame)throw new A('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:Ae});for(const Te of se){const Je=$(et[Te])?et[Te]:[et[Te]];for(const ot of Je){if(!j(ot)||Object.keys(ot).some(ut=>"@value"===oe(xe,ut,{vocab:!0},be)))throw new A("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:ot});yield ae({activeCtx:xe,activeProperty:Be,expandedActiveProperty:Ie,element:ot,expandedParent:pe,options:be,insideList:nt,typeScopedContext:je,typeKey:_t})}}})).apply(this,arguments)}function Oe({activeCtx:xe,activeProperty:Be,value:Ie,options:et}){if(null==Ie)return null;const pe=oe(xe,Be,{vocab:!0},et);if("@id"===pe)return oe(xe,Ie,{base:!0},et);if("@type"===pe)return oe(xe,Ie,{vocab:!0,base:!0},{...et,typeExpansion:!0});const be=S(xe,Be,"@type");if(("@id"===be||"@graph"===pe)&&x(Ie)){const _t=oe(xe,Ie,{base:!0},et);return null===_t&&Ie.match(U)&&et.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:Be}},options:et}),{"@id":_t}}if("@vocab"===be&&x(Ie))return{"@id":oe(xe,Ie,{vocab:!0,base:!0},et)};if(k(pe))return Ie;const nt={};if(be&&!["@id","@vocab","@none"].includes(be))nt["@type"]=be;else if(x(Ie)){const _t=S(xe,Be,"@language");null!==_t&&(nt["@language"]=_t);const je=S(xe,Be,"@direction");null!==je&&(nt["@direction"]=je)}return["boolean","number","string"].includes(typeof Ie)||(Ie=Ie.toString()),nt["@value"]=Ie,nt}function ke(xe,Be,Ie,et){const pe=[],be=Object.keys(Be).sort();for(const nt of be){const _t=oe(xe,nt,{vocab:!0},et);let je=Be[nt];$(je)||(je=[je]);for(const Q of je){if(null===Q)continue;if(!x(Q))throw new A("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:Be});const se={"@value":Q};"@none"!==_t&&(nt.match(J)||et.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:nt}},options:et}),se["@language"]=nt.toLowerCase()),Ie&&(se["@direction"]=Ie),pe.push(se)}}return pe}function Ye(xe){return Qe.apply(this,arguments)}function Qe(){return(Qe=ee(function*({activeCtx:xe,options:Be,activeProperty:Ie,value:et,asGraph:pe,indexKey:be,propertyIndex:nt}){const _t=[],je=Object.keys(et).sort(),Q="@type"===be;for(let se of je){if(Q){const Te=S(xe,se,"@context");E(Te)||(xe=yield ce({activeCtx:xe,localCtx:Te,propagate:!1,options:Be}))}let Fe,Ae=et[se];$(Ae)||(Ae=[Ae]),Ae=yield re.expand({activeCtx:xe,activeProperty:Ie,element:Ae,options:Be,insideList:!1,insideIndex:!0}),Fe=nt?"@none"===se?"@none":Oe({activeCtx:xe,activeProperty:be,value:se,options:Be}):oe(xe,se,{vocab:!0},Be),"@id"===be?se=oe(xe,se,{base:!0},Be):Q&&(se=Fe);for(let Te of Ae){if(pe&&!F(Te)&&(Te={"@graph":[Te]}),"@type"===be)"@none"===Fe||(Te["@type"]=Te["@type"]?[se].concat(Te["@type"]):[se]);else{if(te(Te)&&!["@language","@type","@index"].includes(be))throw new A(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${be}".`,"jsonld.SyntaxError",{code:"invalid value object",value:Te});nt?"@none"!==Fe&&G(Te,nt,Fe,{propertyIsArray:!0,prependValue:!0}):"@none"!==Fe&&!(be in Te)&&(Te[be]=se)}_t.push(Te)}}return _t})).apply(this,arguments)}Ge.exports=re,re.expand=function(){var xe=ee(function*({activeCtx:Be,activeProperty:Ie=null,element:et,options:pe={},insideList:be=!1,insideIndex:nt=!1,typeScopedContext:_t=null}){if(null==et)return null;if("@default"===Ie&&(pe=Object.assign({},pe,{isFrame:!1})),!$(et)&&!j(et))return be||null!==Ie&&"@graph"!==oe(Be,Ie,{vocab:!0},pe)?Oe({activeCtx:Be,activeProperty:Ie,value:et,options:pe}):(pe.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:et}},options:pe}),null);if($(et)){let ot=[];const ut=S(Be,Ie,"@container")||[];be=be||ut.includes("@list");for(let Le=0;Le<et.length;++Le){let Z=yield re.expand({activeCtx:Be,activeProperty:Ie,element:et[Le],options:pe,insideIndex:nt,typeScopedContext:_t});be&&$(Z)&&(Z={"@list":Z}),null!==Z&&($(Z)?ot=ot.concat(Z):ot.push(Z))}return ot}const je=oe(Be,Ie,{vocab:!0},pe),Q=S(Be,Ie,"@context");_t=_t||(Be.previousContext?Be:null);let se=Object.keys(et).sort(),Ae=!nt;if(Ae&&_t&&se.length<=2&&!se.includes("@context"))for(const ot of se){const ut=oe(_t,ot,{vocab:!0},pe);if("@value"===ut){Ae=!1,Be=_t;break}if("@id"===ut&&1===se.length){Ae=!1;break}}Ae&&(Be=Be.revertToPreviousContext()),E(Q)||(Be=yield ce({activeCtx:Be,localCtx:Q,propagate:!0,overrideProtected:!0,options:pe})),"@context"in et&&(Be=yield ce({activeCtx:Be,localCtx:et["@context"],options:pe})),_t=Be;let Fe=null;for(const ot of se)if("@type"===oe(Be,ot,{vocab:!0},pe)){Fe=Fe||ot;const Le=et[ot],Z=Array.isArray(Le)?Le.length>1?Le.slice().sort():Le:[Le];for(const O of Z){const P=S(_t,O,"@context");E(P)||(Be=yield ce({activeCtx:Be,localCtx:P,options:pe,propagate:!1}))}}let Te={};yield ae({activeCtx:Be,activeProperty:Ie,expandedActiveProperty:je,element:et,expandedParent:Te,options:pe,insideList:be,typeKey:Fe,typeScopedContext:_t}),se=Object.keys(Te);let Je=se.length;if("@value"in Te){if("@type"in Te&&("@language"in Te||"@direction"in Te))throw new A('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Te});let ot=Je-1;if("@type"in Te&&(ot-=1),"@index"in Te&&(ot-=1),"@language"in Te&&(ot-=1),"@direction"in Te&&(ot-=1),0!==ot)throw new A('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:Te});const ut=null===Te["@value"]?[]:w(Te["@value"]),Le=I(Te,"@type");if(!X(Be,1.1)||!Le.includes("@json")||1!==Le.length)if(0===ut.length)pe.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:Te}},options:pe}),Te=null;else{if(!ut.every(Z=>x(Z)||W(Z))&&"@language"in Te)throw new A("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:Te});if(!Le.every(Z=>K(Z)&&!(x(Z)&&0===Z.indexOf("_:"))||W(Z)))throw new A('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:Te})}}else if("@type"in Te&&!$(Te["@type"]))Te["@type"]=[Te["@type"]];else if("@set"in Te||"@list"in Te){if(Je>1&&(2!==Je||!("@index"in Te)))throw new A('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:Te});"@set"in Te&&(Te=Te["@set"],se=Object.keys(Te),Je=se.length)}else 1===Je&&"@language"in Te&&(pe.eventHandler&&ue({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:Te}},options:pe}),Te=null);return j(Te)&&!pe.keepFreeFloatingNodes&&!be&&(null===Ie||"@graph"===je||(S(Be,Ie,"@container")||[]).includes("@graph"))&&(Te=Ce({value:Te,count:Je,options:pe})),Te});return function(Be){return xe.apply(this,arguments)}}()},9392:(Ge,ne,M)=>{"use strict";const{isSubjectReference:ee}=M(4209),{createMergedNodeMap:A}=M(5096),$={};Ge.exports=$,$.flatten=j=>{const W=A(j),x=[],E=Object.keys(W).sort();for(let N=0;N<E.length;++N){const te=W[E[N]];ee(te)||x.push(te)}return x}},7031:(Ge,ne,M)=>{"use strict";const{isKeyword:ee}=M(429),A=M(4209),$=M(2831),j=M(9420),W=M(2051),x=M(262),{createNodeMap:E,mergeNodeMapGraphs:N}=M(5096),te={};function F(w){const I={};for(const D in w)void 0!==w[D]&&(I["@"+D]=[w[D]]);return[I]}function C(w,I,D){for(let ue=D.length-1;ue>=0;--ue){const re=D[ue];if(re.graph===I&&re.subject["@id"]===w["@id"])return!0}return!1}function oe(w,I,D){const ue="@"+D;let re=ue in w?w[ue][0]:I[D];if("embed"===D)if(!0===re)re="@once";else if(!1===re)re="@never";else if("@always"!==re&&"@never"!==re&&"@link"!==re&&"@first"!==re&&"@last"!==re&&"@once"!==re)throw new x("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:w});return re}function S(w){if(!$.isArray(w)||1!==w.length||!$.isObject(w[0]))throw new x("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:w});if("@id"in w[0])for(const I of j.asArray(w[0]["@id"]))if(!$.isObject(I)&&!W.isAbsolute(I)||$.isString(I)&&0===I.indexOf("_:"))throw new x("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:w});if("@type"in w[0])for(const I of j.asArray(w[0]["@type"]))if(!$.isObject(I)&&!W.isAbsolute(I)&&"@json"!==I||$.isString(I)&&0===I.indexOf("_:"))throw new x("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:w})}function ce(w,I,D,ue){let re=!0,Ce=!1;for(const ae in D){let we=!1;const Oe=j.getValues(I,ae),ke=0===j.getValues(D,ae).length;if("@id"===ae){if($.isEmptyObject(D["@id"][0]||{})?we=!0:D["@id"].length>=0&&(we=D["@id"].includes(Oe[0])),!ue.requireAll)return we}else if("@type"===ae){if(re=!1,ke){if(Oe.length>0)return!1;we=!0}else if(1===D["@type"].length&&$.isEmptyObject(D["@type"][0]))we=Oe.length>0;else for(const Ye of D["@type"])we=!(!$.isObject(Ye)||!("@default"in Ye))||we||Oe.some(Qe=>Qe===Ye);if(!ue.requireAll)return we}else{if(ee(ae))continue;{const Ye=j.getValues(D,ae)[0];let Qe=!1;if(Ye&&(S([Ye]),Qe="@default"in Ye),re=!1,0===Oe.length&&Qe)continue;if(Oe.length>0&&ke)return!1;if(void 0===Ye){if(Oe.length>0)return!1;we=!0}else if(A.isList(Ye)){const xe=Ye["@list"][0];if(A.isList(Oe[0])){const Be=Oe[0]["@list"];A.isValue(xe)?we=Be.some(Ie=>G(xe,Ie)):(A.isSubject(xe)||A.isSubjectReference(xe))&&(we=Be.some(Ie=>U(w,xe,Ie,ue)))}}else we=A.isValue(Ye)?Oe.some(xe=>G(Ye,xe)):A.isSubjectReference(Ye)?Oe.some(xe=>U(w,Ye,xe,ue)):!!$.isObject(Ye)&&Oe.length>0}}if(!we&&ue.requireAll)return!1;Ce=Ce||we}return re||Ce}function X(w,I){const D=w.uniqueEmbeds[w.graph],ue=D[I],re=ue.parent,Ce=ue.property,ae={"@id":I};if($.isArray(re)){for(let Oe=0;Oe<re.length;++Oe)if(j.compareValues(re[Oe],ae)){re[Oe]=ae;break}}else{const Oe=$.isArray(re[Ce]);j.removeValue(re,Ce,ae,{propertyIsArray:Oe}),j.addValue(re,Ce,ae,{propertyIsArray:Oe})}const we=Oe=>{const ke=Object.keys(D);for(const Ye of ke)Ye in D&&$.isObject(D[Ye].parent)&&D[Ye].parent["@id"]===Oe&&(delete D[Ye],we(Ye))};we(I)}function K(w,I){if($.isArray(w))return w.map(D=>K(D,I));if($.isObject(w)){if("@preserve"in w)return w["@preserve"][0];if(A.isValue(w))return w;if(A.isList(w))return w["@list"]=K(w["@list"],I),w;if("@id"in w){const D=w["@id"];if(I.link.hasOwnProperty(D)){const ue=I.link[D].indexOf(w);if(-1!==ue)return I.link[D][ue];I.link[D].push(w)}else I.link[D]=[w]}for(const D in w)"@id"===D&&I.bnodesToClear.includes(w[D])?delete w["@id"]:w[D]=K(w[D],I)}return w}function J(w,I,D){$.isObject(w)?j.addValue(w,I,D,{propertyIsArray:!0}):w.push(D)}function U(w,I,D,ue){if(!("@id"in D))return!1;const re=w.subjects[D["@id"]];return re&&ce(w,re,I,ue)}function G(w,I){const D=I["@value"],ue=I["@type"],re=I["@language"],Ce=w["@value"]?$.isArray(w["@value"])?w["@value"]:[w["@value"]]:[],ae=w["@type"]?$.isArray(w["@type"])?w["@type"]:[w["@type"]]:[],we=w["@language"]?$.isArray(w["@language"])?w["@language"]:[w["@language"]]:[];return 0===Ce.length&&0===ae.length&&0===we.length||!(!Ce.includes(D)&&!$.isEmptyObject(Ce[0])||!(!ue&&0===ae.length||ae.includes(ue)||ue&&$.isEmptyObject(ae[0]))||!(!re&&0===we.length||we.includes(re)||re&&$.isEmptyObject(we[0])))}Ge.exports=te,te.frameMergedOrDefault=(w,I,D)=>{const ue={options:D,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},re=new j.IdentifierIssuer("_:b");E(w,ue.graphMap,"@default",re),D.merged&&(ue.graphMap["@merged"]=N(ue.graphMap),ue.graph="@merged"),ue.subjects=ue.graphMap[ue.graph];const Ce=[];return te.frame(ue,Object.keys(ue.subjects).sort(),I,Ce),D.pruneBlankNodeIdentifiers&&(D.bnodesToClear=Object.keys(ue.bnodeMap).filter(ae=>1===ue.bnodeMap[ae].length)),D.link={},K(Ce,D)},te.frame=(w,I,D,ue,re=null)=>{S(D);const Ce=w.options,ae={embed:oe(D=D[0],Ce,"embed"),explicit:oe(D,Ce,"explicit"),requireAll:oe(D,Ce,"requireAll")};w.link.hasOwnProperty(w.graph)||(w.link[w.graph]={});const we=w.link[w.graph],Oe=function k(w,I,D,ue){const re={};for(const Ce of I){const ae=w.graphMap[w.graph][Ce];ce(w,ae,D,ue)&&(re[Ce]=ae)}return re}(w,I,D,ae),ke=Object.keys(Oe).sort();for(const Ye of ke){const Qe=Oe[Ye];if(null===re?w.uniqueEmbeds={[w.graph]:{}}:w.uniqueEmbeds[w.graph]=w.uniqueEmbeds[w.graph]||{},"@link"===ae.embed&&Ye in we){J(ue,re,we[Ye]);continue}const xe={"@id":Ye};if(0===Ye.indexOf("_:")&&j.addValue(w.bnodeMap,Ye,xe,{propertyIsArray:!0}),we[Ye]=xe,("@first"===ae.embed||"@last"===ae.embed)&&w.is11)throw new x("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:D});if(w.embedded||!w.uniqueEmbeds[w.graph].hasOwnProperty(Ye)){if(w.embedded&&("@never"===ae.embed||C(Qe,w.graph,w.subjectStack))){J(ue,re,xe);continue}if(w.embedded&&("@first"==ae.embed||"@once"==ae.embed)&&w.uniqueEmbeds[w.graph].hasOwnProperty(Ye)){J(ue,re,xe);continue}if("@last"===ae.embed&&Ye in w.uniqueEmbeds[w.graph]&&X(w,Ye),w.uniqueEmbeds[w.graph][Ye]={parent:ue,property:re},w.subjectStack.push({subject:Qe,graph:w.graph}),Ye in w.graphMap){let Be=!1,Ie=null;"@graph"in D?(Ie=D["@graph"][0],Be=!("@merged"===Ye||"@default"===Ye),$.isObject(Ie)||(Ie={})):(Be="@merged"!==w.graph,Ie={}),Be&&te.frame({...w,graph:Ye,embedded:!1},Object.keys(w.graphMap[Ye]).sort(),[Ie],xe,"@graph")}"@included"in D&&te.frame({...w,embedded:!1},I,D["@included"],xe,"@included");for(const Be of Object.keys(Qe).sort())if(ee(Be)){if(xe[Be]=j.clone(Qe[Be]),"@type"===Be)for(const Ie of Qe["@type"])0===Ie.indexOf("_:")&&j.addValue(w.bnodeMap,Ie,xe,{propertyIsArray:!0})}else if(!ae.explicit||Be in D)for(const Ie of Qe[Be]){const et=Be in D?D[Be]:F(ae);if(A.isList(Ie)){const pe=D[Be]&&D[Be][0]&&D[Be][0]["@list"]?D[Be][0]["@list"]:F(ae),be={"@list":[]};J(xe,Be,be);const nt=Ie["@list"];for(const _t of nt)A.isSubjectReference(_t)?te.frame({...w,embedded:!0},[_t["@id"]],pe,be,"@list"):J(be,"@list",j.clone(_t))}else A.isSubjectReference(Ie)?te.frame({...w,embedded:!0},[Ie["@id"]],et,xe,Be):G(et[0],Ie)&&J(xe,Be,j.clone(Ie))}for(const Be of Object.keys(D).sort()){if("@type"===Be){if(!$.isObject(D[Be][0])||!("@default"in D[Be][0]))continue}else if(ee(Be))continue;const Ie=D[Be][0]||{};if(!oe(Ie,Ce,"omitDefault")&&!(Be in xe)){let pe="@null";"@default"in Ie&&(pe=j.clone(Ie["@default"])),$.isArray(pe)||(pe=[pe]),xe[Be]=[{"@preserve":pe}]}}for(const Be of Object.keys(D["@reverse"]||{}).sort()){const Ie=D["@reverse"][Be];for(const et of Object.keys(w.subjects))j.getValues(w.subjects[et],Be).some(be=>be["@id"]===Ye)&&(xe["@reverse"]=xe["@reverse"]||{},j.addValue(xe["@reverse"],Be,[],{propertyIsArray:!0}),te.frame({...w,embedded:!0},[et],Ie,xe["@reverse"][Be],re))}J(ue,re,xe),w.subjectStack.pop()}}},te.cleanupNull=(w,I)=>{if($.isArray(w))return w.map(ue=>te.cleanupNull(ue,I)).filter(ue=>ue);if("@null"===w)return null;if($.isObject(w)){if("@id"in w){const D=w["@id"];if(I.link.hasOwnProperty(D)){const ue=I.link[D].indexOf(w);if(-1!==ue)return I.link[D][ue];I.link[D].push(w)}else I.link[D]=[w]}for(const D in w)w[D]=te.cleanupNull(w[D],I)}return w}},4814:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;const A=M(262),$=M(4209),j=M(2831),{REGEX_BCP47:W,addValue:x}=M(9420),{handleEvent:E}=M(2585),{RDF_LIST:N,RDF_FIRST:te,RDF_REST:F,RDF_NIL:C,RDF_TYPE:oe,RDF_JSON_LITERAL:S,XSD_BOOLEAN:k,XSD_DOUBLE:ce,XSD_INTEGER:X,XSD_STRING:K}=M(5315),J={};function U(G,w,I,D){if(G.termType.endsWith("Node"))return{"@id":G.value};const ue={"@value":G.value};if(G.language)G.language.match(W)||D.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:G.language}},options:D}),ue["@language"]=G.language;else{let re=G.datatype.value;if(re||(re=K),re===S){re="@json";try{ue["@value"]=JSON.parse(ue["@value"])}catch(Ce){throw new A("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:ue["@value"],cause:Ce})}}if(w){if(re===k)"true"===ue["@value"]?ue["@value"]=!0:"false"===ue["@value"]&&(ue["@value"]=!1);else if(j.isNumeric(ue["@value"]))if(re===X){const Ce=parseInt(ue["@value"],10);Ce.toFixed(0)===ue["@value"]&&(ue["@value"]=Ce)}else re===ce&&(ue["@value"]=parseFloat(ue["@value"]));[k,X,ce,K].includes(re)||(ue["@type"]=re)}else if("i18n-datatype"===I&&re.startsWith("https://www.w3.org/ns/i18n#")){const[,Ce,ae]=re.split(/[#_]/);Ce.length>0&&(ue["@language"]=Ce,Ce.match(W)||D.eventHandler&&E({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:Ce}},options:D})),ue["@direction"]=ae}else re!==K&&(ue["@type"]=re)}return ue}Ge.exports=J,J.fromRDF=function(){var G=ee(function*(w,I){const{useRdfType:D=!1,useNativeTypes:ue=!1,rdfDirection:re=null}=I,Ce={},ae={"@default":Ce},we={};if(re){if("compound-literal"===re)throw new A("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:re});if("i18n-datatype"!==re)throw new A("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:re})}for(const Ye of w){const Qe="DefaultGraph"===Ye.graph.termType?"@default":Ye.graph.value;Qe in ae||(ae[Qe]={}),"@default"!==Qe&&!(Qe in Ce)&&(Ce[Qe]={"@id":Qe});const xe=ae[Qe],Be=Ye.subject.value,Ie=Ye.predicate.value,et=Ye.object;Be in xe||(xe[Be]={"@id":Be});const pe=xe[Be],be=et.termType.endsWith("Node");if(be&&!(et.value in xe)&&(xe[et.value]={"@id":et.value}),Ie===oe&&!D&&be){x(pe,"@type",et.value,{propertyIsArray:!0});continue}const nt=U(et,ue,re,I);if(x(pe,Ie,nt,{propertyIsArray:!0}),be)if(et.value===C){const _t=xe[et.value];"usages"in _t||(_t.usages=[]),_t.usages.push({node:pe,property:Ie,value:nt})}else we[et.value]=!(et.value in we)&&{node:pe,property:Ie,value:nt}}for(const Ye in ae){const Qe=ae[Ye];if(!(C in Qe))continue;const xe=Qe[C];if(xe.usages){for(let Be of xe.usages){let Ie=Be.node,et=Be.property,pe=Be.value;const be=[],nt=[];let _t=Object.keys(Ie).length;for(;et===F&&j.isObject(we[Ie["@id"]])&&j.isArray(Ie[te])&&1===Ie[te].length&&j.isArray(Ie[F])&&1===Ie[F].length&&(3===_t||4===_t&&j.isArray(Ie["@type"])&&1===Ie["@type"].length&&Ie["@type"][0]===N)&&(be.push(Ie[te][0]),nt.push(Ie["@id"]),Be=we[Ie["@id"]],Ie=Be.node,et=Be.property,pe=Be.value,_t=Object.keys(Ie).length,$.isBlankNode(Ie)););delete pe["@id"],pe["@list"]=be.reverse();for(const je of nt)delete Qe[je]}delete xe.usages}}const Oe=[],ke=Object.keys(Ce).sort();for(const Ye of ke){const Qe=Ce[Ye];if(Ye in ae){const xe=Qe["@graph"]=[],Be=ae[Ye],Ie=Object.keys(Be).sort();for(const et of Ie){const pe=Be[et];$.isSubjectReference(pe)||xe.push(pe)}}$.isSubjectReference(Qe)||Oe.push(Qe)}return Oe});return function(w,I){return G.apply(this,arguments)}}()},4209:(Ge,ne,M)=>{"use strict";const ee=M(2831),A={};Ge.exports=A,A.isSubject=$=>!(!ee.isObject($)||"@value"in $||"@set"in $||"@list"in $)&&(Object.keys($).length>1||!("@id"in $)),A.isSubjectReference=$=>ee.isObject($)&&1===Object.keys($).length&&"@id"in $,A.isValue=$=>ee.isObject($)&&"@value"in $,A.isList=$=>ee.isObject($)&&"@list"in $,A.isGraph=$=>ee.isObject($)&&"@graph"in $&&1===Object.keys($).filter(j=>"@id"!==j&&"@index"!==j).length,A.isSimpleGraph=$=>A.isGraph($)&&!("@id"in $),A.isBlankNode=$=>{if(ee.isObject($)){if("@id"in $){const j=$["@id"];return!ee.isString(j)||0===j.indexOf("_:")}return 0===Object.keys($).length||!("@value"in $||"@set"in $||"@list"in $)}return!1}},2130:(Ge,ne,M)=>{var ee=M(9293).default;const A=M(1224),$=M(8666),j=M(9420),W=M(7839),x=j.IdentifierIssuer,E=M(262),N=M(3052),te=M(5426),{expand:F}=M(7336),{flatten:C}=M(9392),{fromRDF:oe}=M(4814),{toRDF:S}=M(6397),{frameMergedOrDefault:k,cleanupNull:ce}=M(7031),{isArray:X,isObject:K,isString:J}=M(2831),{isSubjectReference:U}=M(4209),{expandIri:G,getInitialContext:w,process:I,processingMode:D}=M(429),{compact:ue,compactIri:re}=M(3763),{createNodeMap:Ce,createMergedNodeMap:ae,mergeNodeMaps:we}=M(5096),{logEventHandler:Oe,logWarningEventHandler:ke,safeEventHandler:Ye,setDefaultEventHandler:Qe,setupEventHandler:xe,strictEventHandler:Be,unhandledEventHandler:Ie}=M(2585),et=function(be){const nt={},je=new N({max:100});function Q(se,{documentLoader:Ae=be.documentLoader,...Fe}){if(se&&"compactionMap"in se)throw new E('"compactionMap" not supported.',"jsonld.OptionsError");if(se&&"expansionMap"in se)throw new E('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader:Ae},Fe,se,{eventHandler:xe({options:se})})}return be.compact=function(){var se=ee(function*(Ae,Fe,Te){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(null===Fe)throw new E("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(null===Ae)return null;let Je;(Te=Q(Te,{base:J(Ae)?Ae:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new x("_:b"),contextResolver:new W({sharedCache:je})})).link&&(Te.skipExpansion=!0),Te.compactToRelative||delete Te.base,Je=Te.skipExpansion?Ae:yield be.expand(Ae,Te);const ot=yield be.processContext(w(Te),Fe,Te);let ut=yield ue({activeCtx:ot,element:Je,options:Te});Te.compactArrays&&!Te.graph&&X(ut)?1===ut.length?ut=ut[0]:0===ut.length&&(ut={}):Te.graph&&K(ut)&&(ut=[ut]),K(Fe)&&"@context"in Fe&&(Fe=Fe["@context"]),Fe=j.clone(Fe),X(Fe)||(Fe=[Fe]);const Le=Fe;Fe=[];for(let O=0;O<Le.length;++O)(!K(Le[O])||Object.keys(Le[O]).length>0)&&Fe.push(Le[O]);const Z=Fe.length>0;if(1===Fe.length&&(Fe=Fe[0]),X(ut)){const O=re({activeCtx:ot,iri:"@graph",relativeTo:{vocab:!0}}),P=ut;ut={},Z&&(ut["@context"]=Fe),ut[O]=P}else if(K(ut)&&Z){const O=ut;ut={"@context":Fe};for(const P in O)ut[P]=O[P]}return ut});return function(Ae,Fe,Te){return se.apply(this,arguments)}}(),be.expand=function(){var se=ee(function*(Ae,Fe){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");const Te={},Je=[];if("expandContext"in(Fe=Q(Fe,{keepFreeFloatingNodes:!1,contextResolver:new W({sharedCache:je})}))){const Z=j.clone(Fe.expandContext);Te.expandContext=K(Z)&&"@context"in Z?Z:{"@context":Z},Je.push(Te.expandContext)}let ot;if(J(Ae)){const Z=yield be.get(Ae,Fe);ot=Z.documentUrl,Te.input=Z.document,Z.contextUrl&&(Te.remoteContext={"@context":Z.contextUrl},Je.push(Te.remoteContext))}else Te.input=j.clone(Ae);"base"in Fe||(Fe.base=ot||"");let ut=w(Fe);for(const Z of Je)ut=yield I({activeCtx:ut,localCtx:Z,options:Fe});let Le=yield F({activeCtx:ut,element:Te.input,options:Fe});return K(Le)&&"@graph"in Le&&1===Object.keys(Le).length?Le=Le["@graph"]:null===Le&&(Le=[]),X(Le)||(Le=[Le]),Le});return function(Ae,Fe){return se.apply(this,arguments)}}(),be.flatten=function(){var se=ee(function*(Ae,Fe,Te){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");Fe="function"==typeof Fe?null:Fe||null,Te=Q(Te,{base:J(Ae)?Ae:"",contextResolver:new W({sharedCache:je})});const Je=yield be.expand(Ae,Te),ot=C(Je);return null===Fe?ot:(Te.graph=!0,Te.skipExpansion=!0,yield be.compact(ot,Fe,Te))});return function(Ae,Fe,Te){return se.apply(this,arguments)}}(),be.frame=function(){var se=ee(function*(Ae,Fe,Te){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(Te=Q(Te,{base:J(Ae)?Ae:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new W({sharedCache:je})}),J(Fe)){const ze=yield be.get(Fe,Te);if(Fe=ze.document,ze.contextUrl){let ve=Fe["@context"];ve?X(ve)?ve.push(ze.contextUrl):ve=[ve,ze.contextUrl]:ve=ze.contextUrl,Fe["@context"]=ve}}const Je=Fe&&Fe["@context"]||{},ot=yield be.processContext(w(Te),Je,Te);Te.hasOwnProperty("omitGraph")||(Te.omitGraph=D(ot,1.1)),Te.hasOwnProperty("pruneBlankNodeIdentifiers")||(Te.pruneBlankNodeIdentifiers=D(ot,1.1));const ut=yield be.expand(Ae,Te),Le={...Te};Le.isFrame=!0,Le.keepFreeFloatingNodes=!0;const Z=yield be.expand(Fe,Le),O=Object.keys(Fe).map(ze=>G(ot,ze,{vocab:!0}));Le.merged=!O.includes("@graph"),Le.is11=D(ot,1.1);const P=k(ut,Z,Le);Le.graph=!Te.omitGraph,Le.skipExpansion=!0,Le.link={},Le.framing=!0;let _e=yield be.compact(P,Je,Le);return Le.link={},_e=ce(_e,Le),_e});return function(Ae,Fe,Te){return se.apply(this,arguments)}}(),be.link=function(){var se=ee(function*(Ae,Fe,Te){const Je={};return Fe&&(Je["@context"]=Fe),Je["@embed"]="@link",be.frame(Ae,Je,Te)});return function(Ae,Fe,Te){return se.apply(this,arguments)}}(),be.normalize=be.canonize=function(){var se=ee(function*(Ae,Fe){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if("inputFormat"in(Fe=Q(Fe,{base:J(Ae)?Ae:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new W({sharedCache:je})}))){if("application/n-quads"!==Fe.inputFormat&&"application/nquads"!==Fe.inputFormat)throw new E("Unknown canonicalization input format.","jsonld.CanonizeError");const ot=te.parse(Ae);return A.canonize(ot,Fe)}const Te={...Fe};delete Te.format,Te.produceGeneralizedRdf=!1;const Je=yield be.toRDF(Ae,Te);return A.canonize(Je,Fe)});return function(Ae,Fe){return se.apply(this,arguments)}}(),be.fromRDF=function(){var se=ee(function*(Ae,Fe){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");Fe=Q(Fe,{format:J(Ae)?"application/n-quads":void 0});const{format:Te}=Fe;let{rdfParser:Je}=Fe;if(Te){if(Je=Je||nt[Te],!Je)throw new E("Unknown input format.","jsonld.UnknownFormat",{format:Te})}else Je=()=>Ae;const ot=yield Je(Ae);return oe(ot,Fe)});return function(Ae,Fe){return se.apply(this,arguments)}}(),be.toRDF=function(){var se=ee(function*(Ae,Fe){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");let Te;Te=(Fe=Q(Fe,{base:J(Ae)?Ae:"",skipExpansion:!1,contextResolver:new W({sharedCache:je})})).skipExpansion?Ae:yield be.expand(Ae,Fe);const Je=S(Te,Fe);if(Fe.format){if("application/n-quads"===Fe.format||"application/nquads"===Fe.format)return te.serialize(Je);throw new E("Unknown output format.","jsonld.UnknownFormat",{format:Fe.format})}return Je});return function(Ae,Fe){return se.apply(this,arguments)}}(),be.createNodeMap=function(){var se=ee(function*(Ae,Fe){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");Fe=Q(Fe,{base:J(Ae)?Ae:"",contextResolver:new W({sharedCache:je})});const Te=yield be.expand(Ae,Fe);return ae(Te,Fe)});return function(Ae,Fe){return se.apply(this,arguments)}}(),be.merge=function(){var se=ee(function*(Ae,Fe,Te){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!X(Ae))throw new TypeError('Could not merge, "docs" must be an array.');Fe="function"==typeof Fe?null:Fe||null,Te=Q(Te,{contextResolver:new W({sharedCache:je})});const Je=yield Promise.all(Ae.map(ze=>{const ve={...Te};return be.expand(ze,ve)}));let ot=!0;"mergeNodes"in Te&&(ot=Te.mergeNodes);const ut=Te.issuer||new x("_:b"),Le={"@default":{}};for(let ze=0;ze<Je.length;++ze){const ve=j.relabelBlankNodes(Je[ze],{issuer:new x("_:b"+ze+"-")}),Ve=ot||0===ze?Le:{"@default":{}};if(Ce(ve,Ve,"@default",ut),Ve!==Le)for(const Ke in Ve){const vt=Ve[Ke];if(!(Ke in Le)){Le[Ke]=vt;continue}const Ot=Le[Ke];for(const Et in vt)Et in Ot||(Ot[Et]=vt[Et])}}const Z=we(Le),O=[],P=Object.keys(Z).sort();for(let ze=0;ze<P.length;++ze){const ve=Z[P[ze]];U(ve)||O.push(ve)}return null===Fe?O:(Te.graph=!0,Te.skipExpansion=!0,yield be.compact(O,Fe,Te))});return function(Ae,Fe,Te){return se.apply(this,arguments)}}(),Object.defineProperty(be,"documentLoader",{get:()=>be._documentLoader,set:se=>be._documentLoader=se}),be.documentLoader=function(){var se=ee(function*(Ae){throw new E("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:Ae})});return function(Ae){return se.apply(this,arguments)}}(),be.get=function(){var se=ee(function*(Ae,Fe){let Te;Te="function"==typeof Fe.documentLoader?Fe.documentLoader:be.documentLoader;const Je=yield Te(Ae);try{if(!Je.document)throw new E("No remote document found at the given URL.","jsonld.NullRemoteDocument");J(Je.document)&&(Je.document=JSON.parse(Je.document))}catch(ot){throw new E("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:ot,remoteDoc:Je})}return Je});return function(Ae,Fe){return se.apply(this,arguments)}}(),be.processContext=function(){var se=ee(function*(Ae,Fe,Te){return Te=Q(Te,{base:"",contextResolver:new W({sharedCache:je})}),null===Fe?w(Te):(Fe=j.clone(Fe),K(Fe)&&"@context"in Fe||(Fe={"@context":Fe}),I({activeCtx:Ae,localCtx:Fe,options:Te}))});return function(Ae,Fe,Te){return se.apply(this,arguments)}}(),be.getContextValue=M(429).getContextValue,be.documentLoaders={},be.useDocumentLoader=function(se){if(!(se in be.documentLoaders))throw new E('Unknown document loader type: "'+se+'"',"jsonld.UnknownDocumentLoader",{type:se});be.documentLoader=be.documentLoaders[se].apply(be,Array.prototype.slice.call(arguments,1))},be.registerRDFParser=function(se,Ae){nt[se]=Ae},be.unregisterRDFParser=function(se){delete nt[se]},be.registerRDFParser("application/n-quads",te.parse),be.registerRDFParser("application/nquads",te.parse),be.url=M(2051),be.logEventHandler=Oe,be.logWarningEventHandler=ke,be.safeEventHandler=Ye,be.setDefaultEventHandler=Qe,be.strictEventHandler=Be,be.unhandledEventHandler=Ie,be.util=j,Object.assign(be,j),be.promises=be,be.RequestQueue=M(4808),be.JsonLdProcessor=M(1328)(be),$.setupGlobals(be),$.setupDocumentLoaders(be),be},pe=function(){return et(function(){return pe()})};et(pe),Ge.exports=pe},5096:(Ge,ne,M)=>{"use strict";const{isKeyword:ee}=M(429),A=M(4209),$=M(2831),j=M(9420),W=M(262),x={};Ge.exports=x,x.createMergedNodeMap=(E,N)=>{const te=(N=N||{}).issuer||new j.IdentifierIssuer("_:b"),F={"@default":{}};return x.createNodeMap(E,F,"@default",te),x.mergeNodeMaps(F)},x.createNodeMap=(E,N,te,F,C,oe)=>{if($.isArray(E)){for(const X of E)x.createNodeMap(X,N,te,F,void 0,oe);return}if(!$.isObject(E))return void(oe&&oe.push(E));if(A.isValue(E)){if("@type"in E){let X=E["@type"];0===X.indexOf("_:")&&(E["@type"]=X=F.getId(X))}return void(oe&&oe.push(E))}if(oe&&A.isList(E)){const X=[];return x.createNodeMap(E["@list"],N,te,F,C,X),void oe.push({"@list":X})}if("@type"in E){const X=E["@type"];for(const K of X)0===K.indexOf("_:")&&F.getId(K)}$.isUndefined(C)&&(C=A.isBlankNode(E)?F.getId(E["@id"]):E["@id"]),oe&&oe.push({"@id":C});const S=N[te],k=S[C]=S[C]||{};k["@id"]=C;const ce=Object.keys(E).sort();for(let X of ce){if("@id"===X)continue;if("@reverse"===X){const J={"@id":C},U=E["@reverse"];for(const G in U){const w=U[G];for(const I of w){let D=I["@id"];A.isBlankNode(I)&&(D=F.getId(D)),x.createNodeMap(I,N,te,F,D),j.addValue(S[D],G,J,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if("@graph"===X){C in N||(N[C]={}),x.createNodeMap(E[X],N,C,F);continue}if("@included"===X){x.createNodeMap(E[X],N,te,F);continue}if("@type"!==X&&ee(X)){if("@index"===X&&X in k&&(E[X]!==k[X]||E[X]["@id"]!==k[X]["@id"]))throw new W("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:k});k[X]=E[X];continue}const K=E[X];if(0===X.indexOf("_:")&&(X=F.getId(X)),0!==K.length)for(let J of K)if("@type"===X&&(J=0===J.indexOf("_:")?F.getId(J):J),A.isSubject(J)||A.isSubjectReference(J)){if("@id"in J&&!J["@id"])continue;const U=A.isBlankNode(J)?F.getId(J["@id"]):J["@id"];j.addValue(k,X,{"@id":U},{propertyIsArray:!0,allowDuplicate:!1}),x.createNodeMap(J,N,te,F,U)}else if(A.isValue(J))j.addValue(k,X,J,{propertyIsArray:!0,allowDuplicate:!1});else if(A.isList(J)){const U=[];x.createNodeMap(J["@list"],N,te,F,C,U),J={"@list":U},j.addValue(k,X,J,{propertyIsArray:!0,allowDuplicate:!1})}else x.createNodeMap(J,N,te,F,C),j.addValue(k,X,J,{propertyIsArray:!0,allowDuplicate:!1});else j.addValue(k,X,[],{propertyIsArray:!0})}},x.mergeNodeMapGraphs=E=>{const N={};for(const te of Object.keys(E).sort())for(const F of Object.keys(E[te]).sort()){const C=E[te][F];F in N||(N[F]={"@id":F});const oe=N[F];for(const S of Object.keys(C).sort())if(ee(S)&&"@type"!==S)oe[S]=j.clone(C[S]);else for(const k of C[S])j.addValue(oe,S,j.clone(k),{propertyIsArray:!0,allowDuplicate:!1})}return N},x.mergeNodeMaps=E=>{const N=E["@default"],te=Object.keys(E).sort();for(const F of te){if("@default"===F)continue;const C=E[F];let oe=N[F];oe?"@graph"in oe||(oe["@graph"]=[]):N[F]=oe={"@id":F,"@graph":[]};const S=oe["@graph"];for(const k of Object.keys(C).sort()){const ce=C[k];A.isSubjectReference(ce)||S.push(ce)}}return N}},8666:(Ge,ne,M)=>{"use strict";const ee=M(3120),A={};Ge.exports=A,A.setupDocumentLoaders=function($){typeof XMLHttpRequest<"u"&&($.documentLoaders.xhr=ee,$.useDocumentLoader("xhr"))},A.setupGlobals=function($){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:$.JsonLdProcessor})}},6397:(Ge,ne,M)=>{"use strict";const{createNodeMap:ee}=M(5096),{isKeyword:A}=M(429),$=M(4209),j=M(8846),W=M(262),x=M(2831),E=M(9420),{handleEvent:N}=M(2585),{RDF_FIRST:te,RDF_REST:F,RDF_NIL:C,RDF_TYPE:oe,RDF_JSON_LITERAL:S,RDF_LANGSTRING:k,XSD_BOOLEAN:ce,XSD_DOUBLE:X,XSD_INTEGER:K,XSD_STRING:J}=M(5315),{isAbsolute:U}=M(2051),G={};function w(ue,re,Ce,ae,we){const Oe=Object.keys(re).sort();for(const ke of Oe){const Ye=re[ke],Qe=Object.keys(Ye).sort();for(let xe of Qe){const Be=Ye[xe];if("@type"===xe)xe=oe;else if(A(xe))continue;for(const Ie of Be){const et={termType:ke.startsWith("_:")?"BlankNode":"NamedNode",value:ke};if(!U(ke)){we.eventHandler&&N({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:ke}},options:we});continue}const pe={termType:xe.startsWith("_:")?"BlankNode":"NamedNode",value:xe};if(!U(xe)){we.eventHandler&&N({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:xe}},options:we});continue}if("BlankNode"===pe.termType&&!we.produceGeneralizedRdf){we.eventHandler&&N({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:ae.getOldIds().find(nt=>ae.getId(nt)===xe)}},options:we});continue}const be=D(Ie,ae,ue,Ce,we.rdfDirection,we);be&&ue.push({subject:et,predicate:pe,object:be,graph:Ce})}}}}function D(ue,re,Ce,ae,we,Oe){const ke={};if($.isValue(ue)){ke.termType="Literal",ke.value=void 0,ke.datatype={termType:"NamedNode"};let Ye=ue["@value"];const Qe=ue["@type"]||null;if("@json"===Qe)ke.value=j(Ye),ke.datatype.value=S;else if(x.isBoolean(Ye))ke.value=Ye.toString(),ke.datatype.value=Qe||ce;else if(x.isDouble(Ye)||Qe===X)x.isDouble(Ye)||(Ye=parseFloat(Ye)),ke.value=Ye.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),ke.datatype.value=Qe||X;else if(x.isNumber(Ye))ke.value=Ye.toFixed(0),ke.datatype.value=Qe||K;else if("@direction"in ue&&"i18n-datatype"===we){const xe=(ue["@language"]||"").toLowerCase();ke.datatype.value=`https://www.w3.org/ns/i18n#${xe}_${ue["@direction"]}`,ke.value=Ye}else{if("@direction"in ue&&"compound-literal"===we)throw new W("Unsupported rdfDirection value.","jsonld.InvalidRdfDirection",{value:we});if("@direction"in ue&&we)throw new W("Unknown rdfDirection value.","jsonld.InvalidRdfDirection",{value:we});"@language"in ue?("@direction"in ue&&!we&&Oe.eventHandler&&N({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:ke.value}},options:Oe}),ke.value=Ye,ke.datatype.value=Qe||k,ke.language=ue["@language"]):("@direction"in ue&&!we&&Oe.eventHandler&&N({event:{type:["JsonLdEvent"],code:"rdfDirection not set",level:"warning",message:"rdfDirection not set for @direction.",details:{object:ke.value}},options:Oe}),ke.value=Ye,ke.datatype.value=Qe||J)}}else if($.isList(ue)){const Ye=function I(ue,re,Ce,ae,we,Oe){const ke={termType:"NamedNode",value:te},Ye={termType:"NamedNode",value:F},Qe={termType:"NamedNode",value:C},xe=ue.pop(),Be=xe?{termType:"BlankNode",value:re.getId()}:Qe;let Ie=Be;for(const et of ue){const pe=D(et,re,Ce,ae,we,Oe),be={termType:"BlankNode",value:re.getId()};Ce.push({subject:Ie,predicate:ke,object:pe,graph:ae}),Ce.push({subject:Ie,predicate:Ye,object:be,graph:ae}),Ie=be}if(xe){const et=D(xe,re,Ce,ae,we,Oe);Ce.push({subject:Ie,predicate:ke,object:et,graph:ae}),Ce.push({subject:Ie,predicate:Ye,object:Qe,graph:ae})}return Be}(ue["@list"],re,Ce,ae,we,Oe);ke.termType=Ye.termType,ke.value=Ye.value}else{const Ye=x.isObject(ue)?ue["@id"]:ue;ke.termType=Ye.startsWith("_:")?"BlankNode":"NamedNode",ke.value=Ye}return"NamedNode"!==ke.termType||U(ke.value)?ke:(Oe.eventHandler&&N({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:ke.value}},options:Oe}),null)}Ge.exports=G,G.toRDF=(ue,re)=>{const Ce=new E.IdentifierIssuer("_:b"),ae={"@default":{}};ee(ue,ae,"@default",Ce);const we=[],Oe=Object.keys(ae).sort();for(const ke of Oe){let Ye;if("@default"===ke)Ye={termType:"DefaultGraph",value:""};else{if(!U(ke)){re.eventHandler&&N({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:ke}},options:re});continue}Ye=ke.startsWith("_:")?{termType:"BlankNode"}:{termType:"NamedNode"},Ye.value=ke}w(we,ae[ke],Ye,Ce,re)}return we}},2831:Ge=>{"use strict";const ne={};Ge.exports=ne,ne.isArray=Array.isArray,ne.isBoolean=M=>"boolean"==typeof M||"[object Boolean]"===Object.prototype.toString.call(M),ne.isDouble=M=>ne.isNumber(M)&&(-1!==String(M).indexOf(".")||Math.abs(M)>=1e21),ne.isEmptyObject=M=>ne.isObject(M)&&0===Object.keys(M).length,ne.isNumber=M=>"number"==typeof M||"[object Number]"===Object.prototype.toString.call(M),ne.isNumeric=M=>!isNaN(parseFloat(M))&&isFinite(M),ne.isObject=M=>"[object Object]"===Object.prototype.toString.call(M),ne.isString=M=>"string"==typeof M||"[object String]"===Object.prototype.toString.call(M),ne.isUndefined=M=>typeof M>"u"},2051:(Ge,ne,M)=>{"use strict";const ee=M(2831),A={};Ge.exports=A,A.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([a-zA-Z][a-zA-Z0-9+-.]*):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},A.parse=(j,W)=>{const x={},E=A.parsers[W||"full"],N=E.regex.exec(j);let te=E.keys.length;for(;te--;)x[E.keys[te]]=void 0===N[te]?null:N[te];return("https"===x.scheme&&"443"===x.port||"http"===x.scheme&&"80"===x.port)&&(x.href=x.href.replace(":"+x.port,""),x.authority=x.authority.replace(":"+x.port,""),x.port=null),x.normalizedPath=A.removeDotSegments(x.path),x},A.prependBase=(j,W)=>{if(null===j||A.isAbsolute(W))return W;(!j||ee.isString(j))&&(j=A.parse(j||""));const x=A.parse(W),E={protocol:j.protocol||""};if(null!==x.authority)E.authority=x.authority,E.path=x.path,E.query=x.query;else if(E.authority=j.authority,""===x.path)E.path=j.path,E.query=null!==x.query?x.query:j.query;else{if(0===x.path.indexOf("/"))E.path=x.path;else{let te=j.path;te=te.substr(0,te.lastIndexOf("/")+1),(te.length>0||j.authority)&&"/"!==te.substr(-1)&&(te+="/"),te+=x.path,E.path=te}E.query=x.query}""!==x.path&&(E.path=A.removeDotSegments(E.path));let N=E.protocol;return null!==E.authority&&(N+="//"+E.authority),N+=E.path,null!==E.query&&(N+="?"+E.query),null!==x.fragment&&(N+="#"+x.fragment),""===N&&(N="./"),N},A.removeBase=(j,W)=>{if(null===j)return W;(!j||ee.isString(j))&&(j=A.parse(j||""));let x="";if(""!==j.href?x+=(j.protocol||"")+"//"+(j.authority||""):W.indexOf("//")&&(x+="//"),0!==W.indexOf(x))return W;const E=A.parse(W.substr(x.length)),N=j.normalizedPath.split("/"),te=E.normalizedPath.split("/"),F=E.fragment||E.query?0:1;for(;N.length>0&&te.length>F&&N[0]===te[0];)N.shift(),te.shift();let C="";if(N.length>0){N.pop();for(let oe=0;oe<N.length;++oe)C+="../"}return C+=te.join("/"),null!==E.query&&(C+="?"+E.query),null!==E.fragment&&(C+="#"+E.fragment),""===C&&(C="./"),C},A.removeDotSegments=j=>{if(0===j.length)return"";const W=j.split("/"),x=[];for(;W.length>0;){const E=W.shift(),N=0===W.length;"."!==E?".."!==E?x.push(E):(x.pop(),N&&x.push("")):N&&x.push("")}return"/"===j[0]&&x.length>0&&""!==x[0]&&x.unshift(""),1===x.length&&""===x[0]?"/":x.join("/")};const $=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;A.isAbsolute=j=>ee.isString(j)&&$.test(j),A.isRelative=j=>ee.isString(j)},9420:(Ge,ne,M)=>{"use strict";const ee=M(4209),A=M(2831),$=M(1224).IdentifierIssuer,j=M(262),x=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,E=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,N=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,F_headers_accept="application/ld+json, application/json",C={};function oe(S,k){if(A.isArray(k))for(let ce=0;ce<k.length;++ce)k[ce]=oe(S,k[ce]);else if(ee.isList(k))k["@list"]=oe(S,k["@list"]);else if(A.isObject(k)){ee.isBlankNode(k)&&(k["@id"]=S.getId(k["@id"]));const ce=Object.keys(k).sort();for(let X=0;X<ce.length;++X){const K=ce[X];"@id"!==K&&(k[K]=oe(S,k[K]))}}return k}Ge.exports=C,C.IdentifierIssuer=$,C.REGEX_BCP47=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,C.REGEX_KEYWORD=/^@[a-zA-Z]+$/,C.clone=function(S){if(S&&"object"==typeof S){let k;if(A.isArray(S)){k=[];for(let ce=0;ce<S.length;++ce)k[ce]=C.clone(S[ce])}else if(S instanceof Map){k=new Map;for(const[ce,X]of S)k.set(ce,C.clone(X))}else if(S instanceof Set){k=new Set;for(const ce of S)k.add(C.clone(ce))}else if(A.isObject(S)){k={};for(const ce in S)k[ce]=C.clone(S[ce])}else k=S.toString();return k}return S},C.asArray=function(S){return Array.isArray(S)?S:[S]},C.buildHeaders=(S={})=>{if(Object.keys(S).some(ce=>"accept"===ce.toLowerCase()))throw new RangeError('Accept header may not be specified; only "'+F_headers_accept+'" is supported.');return Object.assign({Accept:F_headers_accept},S)},C.parseLinkHeader=S=>{const k={},ce=S.match(x);for(let X=0;X<ce.length;++X){let K=ce[X].match(E);if(!K)continue;const J={target:K[1]},U=K[2];for(;K=N.exec(U);)J[K[1]]=void 0===K[2]?K[3]:K[2];const G=J.rel||"";Array.isArray(k[G])?k[G].push(J):k[G]=k.hasOwnProperty(G)?[k[G],J]:J}return k},C.validateTypeValue=(S,k)=>{if(!(A.isString(S)||A.isArray(S)&&S.every(ce=>A.isString(ce)))){if(k&&A.isObject(S))switch(Object.keys(S).length){case 0:return;case 1:if("@default"in S&&C.asArray(S["@default"]).every(ce=>A.isString(ce)))return}throw new j('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:S})}},C.hasProperty=(S,k)=>{if(S.hasOwnProperty(k)){const ce=S[k];return!A.isArray(ce)||ce.length>0}return!1},C.hasValue=(S,k,ce)=>{if(C.hasProperty(S,k)){let X=S[k];const K=ee.isList(X);if(A.isArray(X)||K){K&&(X=X["@list"]);for(let J=0;J<X.length;++J)if(C.compareValues(ce,X[J]))return!0}else if(!A.isArray(ce))return C.compareValues(ce,X)}return!1},C.addValue=(S,k,ce,X)=>{if("propertyIsArray"in(X=X||{})||(X.propertyIsArray=!1),"valueIsArray"in X||(X.valueIsArray=!1),"allowDuplicate"in X||(X.allowDuplicate=!0),"prependValue"in X||(X.prependValue=!1),X.valueIsArray)S[k]=ce;else if(A.isArray(ce)){0===ce.length&&X.propertyIsArray&&!S.hasOwnProperty(k)&&(S[k]=[]),X.prependValue&&(ce=ce.concat(S[k]),S[k]=[]);for(let K=0;K<ce.length;++K)C.addValue(S,k,ce[K],X)}else if(S.hasOwnProperty(k)){const K=!X.allowDuplicate&&C.hasValue(S,k,ce);!A.isArray(S[k])&&(!K||X.propertyIsArray)&&(S[k]=[S[k]]),K||(X.prependValue?S[k].unshift(ce):S[k].push(ce))}else S[k]=X.propertyIsArray?[ce]:ce},C.getValues=(S,k)=>[].concat(S[k]||[]),C.removeProperty=(S,k)=>{delete S[k]},C.removeValue=(S,k,ce,X)=>{"propertyIsArray"in(X=X||{})||(X.propertyIsArray=!1);const K=C.getValues(S,k).filter(J=>!C.compareValues(J,ce));0===K.length?C.removeProperty(S,k):S[k]=1!==K.length||X.propertyIsArray?K:K[0]},C.relabelBlankNodes=(S,k)=>oe((k=k||{}).issuer||new $("_:b"),S),C.compareValues=(S,k)=>!!(S===k||ee.isValue(S)&&ee.isValue(k)&&S["@value"]===k["@value"]&&S["@type"]===k["@type"]&&S["@language"]===k["@language"]&&S["@index"]===k["@index"])||!!(A.isObject(S)&&"@id"in S&&A.isObject(k)&&"@id"in k)&&S["@id"]===k["@id"],C.compareShortestLeast=(S,k)=>S.length<k.length?-1:k.length<S.length?1:S===k?0:S<k?-1:1},3052:(Ge,ne,M)=>{"use strict";const ee=M(4842),A=Symbol("max"),$=Symbol("length"),j=Symbol("lengthCalculator"),W=Symbol("allowStale"),x=Symbol("maxAge"),E=Symbol("dispose"),N=Symbol("noDisposeOnSet"),te=Symbol("lruList"),F=Symbol("cache"),C=Symbol("updateAgeOnGet"),oe=()=>1,k=(G,w,I)=>{const D=G[F].get(w);if(D){const ue=D.value;if(ce(G,ue)){if(K(G,D),!G[W])return}else I&&(G[C]&&(D.value.now=Date.now()),G[te].unshiftNode(D));return ue.value}},ce=(G,w)=>{if(!w||!w.maxAge&&!G[x])return!1;const I=Date.now()-w.now;return w.maxAge?I>w.maxAge:G[x]&&I>G[x]},X=G=>{if(G[$]>G[A])for(let w=G[te].tail;G[$]>G[A]&&null!==w;){const I=w.prev;K(G,w),w=I}},K=(G,w)=>{if(w){const I=w.value;G[E]&&G[E](I.key,I.value),G[$]-=I.length,G[F].delete(I.key),G[te].removeNode(w)}};class J{constructor(w,I,D,ue,re){this.key=w,this.value=I,this.length=D,this.now=ue,this.maxAge=re||0}}const U=(G,w,I,D)=>{let ue=I.value;ce(G,ue)&&(K(G,I),G[W]||(ue=void 0)),ue&&w.call(D,ue.value,ue.key,G)};Ge.exports=class S{constructor(w){if("number"==typeof w&&(w={max:w}),w||(w={}),w.max&&("number"!=typeof w.max||w.max<0))throw new TypeError("max must be a non-negative number");this[A]=w.max||1/0;const D=w.length||oe;if(this[j]="function"!=typeof D?oe:D,this[W]=w.stale||!1,w.maxAge&&"number"!=typeof w.maxAge)throw new TypeError("maxAge must be a number");this[x]=w.maxAge||0,this[E]=w.dispose,this[N]=w.noDisposeOnSet||!1,this[C]=w.updateAgeOnGet||!1,this.reset()}set max(w){if("number"!=typeof w||w<0)throw new TypeError("max must be a non-negative number");this[A]=w||1/0,X(this)}get max(){return this[A]}set allowStale(w){this[W]=!!w}get allowStale(){return this[W]}set maxAge(w){if("number"!=typeof w)throw new TypeError("maxAge must be a non-negative number");this[x]=w,X(this)}get maxAge(){return this[x]}set lengthCalculator(w){"function"!=typeof w&&(w=oe),w!==this[j]&&(this[j]=w,this[$]=0,this[te].forEach(I=>{I.length=this[j](I.value,I.key),this[$]+=I.length})),X(this)}get lengthCalculator(){return this[j]}get length(){return this[$]}get itemCount(){return this[te].length}rforEach(w,I){I=I||this;for(let D=this[te].tail;null!==D;){const ue=D.prev;U(this,w,D,I),D=ue}}forEach(w,I){I=I||this;for(let D=this[te].head;null!==D;){const ue=D.next;U(this,w,D,I),D=ue}}keys(){return this[te].toArray().map(w=>w.key)}values(){return this[te].toArray().map(w=>w.value)}reset(){this[E]&&this[te]&&this[te].length&&this[te].forEach(w=>this[E](w.key,w.value)),this[F]=new Map,this[te]=new ee,this[$]=0}dump(){return this[te].map(w=>!ce(this,w)&&{k:w.key,v:w.value,e:w.now+(w.maxAge||0)}).toArray().filter(w=>w)}dumpLru(){return this[te]}set(w,I,D){if((D=D||this[x])&&"number"!=typeof D)throw new TypeError("maxAge must be a number");const ue=D?Date.now():0,re=this[j](I,w);if(this[F].has(w)){if(re>this[A])return K(this,this[F].get(w)),!1;const we=this[F].get(w).value;return this[E]&&(this[N]||this[E](w,we.value)),we.now=ue,we.maxAge=D,we.value=I,this[$]+=re-we.length,we.length=re,this.get(w),X(this),!0}const Ce=new J(w,I,re,ue,D);return Ce.length>this[A]?(this[E]&&this[E](w,I),!1):(this[$]+=Ce.length,this[te].unshift(Ce),this[F].set(w,this[te].head),X(this),!0)}has(w){if(!this[F].has(w))return!1;const I=this[F].get(w).value;return!ce(this,I)}get(w){return k(this,w,!0)}peek(w){return k(this,w,!1)}pop(){const w=this[te].tail;return w?(K(this,w),w.value):null}del(w){K(this,this[F].get(w))}load(w){this.reset();const I=Date.now();for(let D=w.length-1;D>=0;D--){const ue=w[D],re=ue.e||0;if(0===re)this.set(ue.k,ue.v);else{const Ce=re-I;Ce>0&&this.set(ue.k,ue.v,Ce)}}}prune(){this[F].forEach((w,I)=>k(this,I,!1))}}},7568:Ge=>{"use strict";Ge.exports=function(ne){ne.prototype[Symbol.iterator]=function*(){for(let M=this.head;M;M=M.next)yield M.value}}},4842:(Ge,ne,M)=>{"use strict";function ee(x){var E=this;if(E instanceof ee||(E=new ee),E.tail=null,E.head=null,E.length=0,x&&"function"==typeof x.forEach)x.forEach(function(F){E.push(F)});else if(arguments.length>0)for(var N=0,te=arguments.length;N<te;N++)E.push(arguments[N]);return E}function A(x,E,N){var te=E===x.head?new W(N,null,E,x):new W(N,E,E.next,x);return null===te.next&&(x.tail=te),null===te.prev&&(x.head=te),x.length++,te}function $(x,E){x.tail=new W(E,x.tail,null,x),x.head||(x.head=x.tail),x.length++}function j(x,E){x.head=new W(E,null,x.head,x),x.tail||(x.tail=x.head),x.length++}function W(x,E,N,te){if(!(this instanceof W))return new W(x,E,N,te);this.list=te,this.value=x,E?(E.next=this,this.prev=E):this.prev=null,N?(N.prev=this,this.next=N):this.next=null}Ge.exports=ee,ee.Node=W,ee.create=ee,ee.prototype.removeNode=function(x){if(x.list!==this)throw new Error("removing node which does not belong to this list");var E=x.next,N=x.prev;return E&&(E.prev=N),N&&(N.next=E),x===this.head&&(this.head=E),x===this.tail&&(this.tail=N),x.list.length--,x.next=null,x.prev=null,x.list=null,E},ee.prototype.unshiftNode=function(x){if(x!==this.head){x.list&&x.list.removeNode(x);var E=this.head;x.list=this,x.next=E,E&&(E.prev=x),this.head=x,this.tail||(this.tail=x),this.length++}},ee.prototype.pushNode=function(x){if(x!==this.tail){x.list&&x.list.removeNode(x);var E=this.tail;x.list=this,x.prev=E,E&&(E.next=x),this.tail=x,this.head||(this.head=x),this.length++}},ee.prototype.push=function(){for(var x=0,E=arguments.length;x<E;x++)$(this,arguments[x]);return this.length},ee.prototype.unshift=function(){for(var x=0,E=arguments.length;x<E;x++)j(this,arguments[x]);return this.length},ee.prototype.pop=function(){if(this.tail){var x=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,x}},ee.prototype.shift=function(){if(this.head){var x=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,x}},ee.prototype.forEach=function(x,E){E=E||this;for(var N=this.head,te=0;null!==N;te++)x.call(E,N.value,te,this),N=N.next},ee.prototype.forEachReverse=function(x,E){E=E||this;for(var N=this.tail,te=this.length-1;null!==N;te--)x.call(E,N.value,te,this),N=N.prev},ee.prototype.get=function(x){for(var E=0,N=this.head;null!==N&&E<x;E++)N=N.next;if(E===x&&null!==N)return N.value},ee.prototype.getReverse=function(x){for(var E=0,N=this.tail;null!==N&&E<x;E++)N=N.prev;if(E===x&&null!==N)return N.value},ee.prototype.map=function(x,E){E=E||this;for(var N=new ee,te=this.head;null!==te;)N.push(x.call(E,te.value,this)),te=te.next;return N},ee.prototype.mapReverse=function(x,E){E=E||this;for(var N=new ee,te=this.tail;null!==te;)N.push(x.call(E,te.value,this)),te=te.prev;return N},ee.prototype.reduce=function(x,E){var N,te=this.head;if(arguments.length>1)N=E;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");te=this.head.next,N=this.head.value}for(var F=0;null!==te;F++)N=x(N,te.value,F),te=te.next;return N},ee.prototype.reduceReverse=function(x,E){var N,te=this.tail;if(arguments.length>1)N=E;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");te=this.tail.prev,N=this.tail.value}for(var F=this.length-1;null!==te;F--)N=x(N,te.value,F),te=te.prev;return N},ee.prototype.toArray=function(){for(var x=new Array(this.length),E=0,N=this.head;null!==N;E++)x[E]=N.value,N=N.next;return x},ee.prototype.toArrayReverse=function(){for(var x=new Array(this.length),E=0,N=this.tail;null!==N;E++)x[E]=N.value,N=N.prev;return x},ee.prototype.slice=function(x,E){(E=E||this.length)<0&&(E+=this.length),(x=x||0)<0&&(x+=this.length);var N=new ee;if(E<x||E<0)return N;x<0&&(x=0),E>this.length&&(E=this.length);for(var te=0,F=this.head;null!==F&&te<x;te++)F=F.next;for(;null!==F&&te<E;te++,F=F.next)N.push(F.value);return N},ee.prototype.sliceReverse=function(x,E){(E=E||this.length)<0&&(E+=this.length),(x=x||0)<0&&(x+=this.length);var N=new ee;if(E<x||E<0)return N;x<0&&(x=0),E>this.length&&(E=this.length);for(var te=this.length,F=this.tail;null!==F&&te>E;te--)F=F.prev;for(;null!==F&&te>x;te--,F=F.prev)N.push(F.value);return N},ee.prototype.splice=function(x,E,...N){x>this.length&&(x=this.length-1),x<0&&(x=this.length+x);for(var te=0,F=this.head;null!==F&&te<x;te++)F=F.next;var C=[];for(te=0;F&&te<E;te++)C.push(F.value),F=this.removeNode(F);for(null===F&&(F=this.tail),F!==this.head&&F!==this.tail&&(F=F.prev),te=0;te<N.length;te++)F=A(this,F,N[te]);return C},ee.prototype.reverse=function(){for(var x=this.head,E=this.tail,N=x;null!==N;N=N.prev){var te=N.prev;N.prev=N.next,N.next=te}return this.head=E,this.tail=x,this};try{M(7568)(ee)}catch{}},7376:function(Ge,ne,M){var ee;Ge=M.nmd(Ge),function(){var A,x="Expected a function",N="__lodash_hash_undefined__",F="__lodash_placeholder__",w=32,D=128,xe=1/0,Be=9007199254740991,pe=4294967295,_t=[["ary",D],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",w],["partialRight",64],["rearg",256]],je="[object Arguments]",Q="[object Array]",Ae="[object Boolean]",Fe="[object Date]",Je="[object Error]",ot="[object Function]",ut="[object GeneratorFunction]",Le="[object Map]",Z="[object Number]",P="[object Object]",_e="[object Promise]",ve="[object RegExp]",Ve="[object Set]",Ke="[object String]",vt="[object Symbol]",Et="[object WeakMap]",he="[object ArrayBuffer]",B="[object DataView]",z="[object Float32Array]",Ne="[object Float64Array]",Ze="[object Int8Array]",ct="[object Int16Array]",wt="[object Int32Array]",Qt="[object Uint8Array]",gn="[object Uint8ClampedArray]",In="[object Uint16Array]",un="[object Uint32Array]",rn=/\b__p \+= '';/g,Fi=/\b(__p \+=) '' \+/g,Or=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fi=/&(?:amp|lt|gt|quot|#39);/g,ai=/[&<>"']/g,vi=RegExp(fi.source),ji=RegExp(ai.source),$i=/<%-([\s\S]+?)%>/g,Xs=/<%([\s\S]+?)%>/g,ia=/<%=([\s\S]+?)%>/g,Ys=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Uo=/^\w*$/,Vo=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,He=/[\\^$.*+?()[\]{}|]/g,qe=RegExp(He.source),Nt=/^\s+/,At=/\s/,en=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Vi=/\{\n\/\* \[wrapped with (.+)\] \*/,Nr=/,? & /,ds=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qt=/[()=,{}\[\]\/\s]/,le=/\\(\\)?/g,ye=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,T=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,H=/^\[object .+?Constructor\]$/,Y=/^0o[0-7]+$/i,De=/^(?:0|[1-9]\d*)$/,rt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$e=/($^)/,Mt=/['\n\r\u2028\u2029\\]/g,Ct="\\ud800-\\udfff",jn="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Pn="\\u2700-\\u27bf",bi="a-z\\xdf-\\xf6\\xf8-\\xff",hr="A-Z\\xc0-\\xd6\\xd8-\\xde",fs="\\ufe0e\\ufe0f",Bn="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mh="["+Ct+"]",Kn="["+Bn+"]",el="["+jn+"]",tr="\\d+",Ta="["+Pn+"]",o_="["+bi+"]",_h="[^"+Ct+Bn+tr+Pn+bi+hr+"]",pi="\\ud83c[\\udffb-\\udfff]",Kl="[^"+Ct+"]",Ts="(?:\\ud83c[\\udde6-\\uddff]){2}",Se="[\\ud800-\\udbff][\\udc00-\\udfff]",Ue="["+hr+"]",yt="(?:"+o_+"|"+_h+")",Gt="(?:"+Ue+"|"+_h+")",tn="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Xn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Vr="(?:"+el+"|"+pi+")?",Hr="["+fs+"]?",uo=Hr+Vr+"(?:\\u200d(?:"+[Kl,Ts,Se].join("|")+")"+Hr+Vr+")*",Cn="(?:"+[Ta,Ts,Se].join("|")+")"+uo,IL="(?:"+[Kl+el+"?",el,Ts,Se,mh].join("|")+")",DL=RegExp("['\u2019]","g"),RL=RegExp(el,"g"),Eb=RegExp(pi+"(?="+pi+")|"+IL+uo,"g"),OL=RegExp([Ue+"?"+o_+"+"+tn+"(?="+[Kn,Ue,"$"].join("|")+")",Gt+"+"+Xn+"(?="+[Kn,Ue+yt,"$"].join("|")+")",Ue+"?"+yt+"+"+tn,Ue+"+"+Xn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tr,Cn].join("|"),"g"),Pt=RegExp("[\\u200d"+Ct+jn+fs+"]"),NL=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ho=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],hp=-1,nr={};nr[z]=nr[Ne]=nr[Ze]=nr[ct]=nr[wt]=nr[Qt]=nr[gn]=nr[In]=nr[un]=!0,nr[je]=nr[Q]=nr[he]=nr[Ae]=nr[B]=nr[Fe]=nr[Je]=nr[ot]=nr[Le]=nr[Z]=nr[P]=nr[ve]=nr[Ve]=nr[Ke]=nr[Et]=!1;var Hi={};Hi[je]=Hi[Q]=Hi[he]=Hi[B]=Hi[Ae]=Hi[Fe]=Hi[z]=Hi[Ne]=Hi[Ze]=Hi[ct]=Hi[wt]=Hi[Le]=Hi[Z]=Hi[P]=Hi[ve]=Hi[Ve]=Hi[Ke]=Hi[vt]=Hi[Qt]=Hi[gn]=Hi[In]=Hi[un]=!0,Hi[Je]=Hi[ot]=Hi[Et]=!1;var a_={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ab=parseFloat,YS=parseInt,St="object"==typeof global&&global&&global.Object===Object&&global,c_="object"==typeof self&&self&&self.Object===Object&&self,Yr=St||c_||Function("return this")(),l_=ne&&!ne.nodeType&&ne,Jl=l_&&Ge&&!Ge.nodeType&&Ge,Sb=Jl&&Jl.exports===l_,yh=Sb&&St.process,Ia=function(){try{return Jl&&Jl.require&&Jl.require("util").types||yh&&yh.binding&&yh.binding("util")}catch{}}(),KS=Ia&&Ia.isArrayBuffer,JS=Ia&&Ia.isDate,ZS=Ia&&Ia.isMap,gp=Ia&&Ia.isRegExp,Zu=Ia&&Ia.isSet,mp=Ia&&Ia.isTypedArray;function Ks(ft,Dt,xt){switch(xt.length){case 0:return ft.call(Dt);case 1:return ft.call(Dt,xt[0]);case 2:return ft.call(Dt,xt[0],xt[1]);case 3:return ft.call(Dt,xt[0],xt[1],xt[2])}return ft.apply(Dt,xt)}function Cb(ft,Dt,xt,zt){for(var Mn=-1,li=null==ft?0:ft.length;++Mn<li;){var Pr=ft[Mn];Dt(zt,Pr,xt(Pr),ft)}return zt}function Gr(ft,Dt){for(var xt=-1,zt=null==ft?0:ft.length;++xt<zt&&!1!==Dt(ft[xt],xt,ft););return ft}function vh(ft,Dt){for(var xt=null==ft?0:ft.length;xt--&&!1!==Dt(ft[xt],xt,ft););return ft}function u_(ft,Dt){for(var xt=-1,zt=null==ft?0:ft.length;++xt<zt;)if(!Dt(ft[xt],xt,ft))return!1;return!0}function xn(ft,Dt){for(var xt=-1,zt=null==ft?0:ft.length,Mn=0,li=[];++xt<zt;){var Pr=ft[xt];Dt(Pr,xt,ft)&&(li[Mn++]=Pr)}return li}function ci(ft,Dt){return!(null==ft||!ft.length)&&xh(ft,Dt,0)>-1}function Mb(ft,Dt,xt){for(var zt=-1,Mn=null==ft?0:ft.length;++zt<Mn;)if(xt(Dt,ft[zt]))return!0;return!1}function fr(ft,Dt){for(var xt=-1,zt=null==ft?0:ft.length,Mn=Array(zt);++xt<zt;)Mn[xt]=Dt(ft[xt],xt,ft);return Mn}function tl(ft,Dt){for(var xt=-1,zt=Dt.length,Mn=ft.length;++xt<zt;)ft[Mn+xt]=Dt[xt];return ft}function Tb(ft,Dt,xt,zt){var Mn=-1,li=null==ft?0:ft.length;for(zt&&li&&(xt=ft[++Mn]);++Mn<li;)xt=Dt(xt,ft[Mn],Mn,ft);return xt}function QS(ft,Dt,xt,zt){var Mn=null==ft?0:ft.length;for(zt&&Mn&&(xt=ft[--Mn]);Mn--;)xt=Dt(xt,ft[Mn],Mn,ft);return xt}function bh(ft,Dt){for(var xt=-1,zt=null==ft?0:ft.length;++xt<zt;)if(Dt(ft[xt],xt,ft))return!0;return!1}var ii=ed("length");function Js(ft,Dt,xt){var zt;return xt(ft,function(Mn,li,Pr){if(Dt(Mn,li,Pr))return zt=li,!1}),zt}function wh(ft,Dt,xt,zt){for(var Mn=ft.length,li=xt+(zt?1:-1);zt?li--:++li<Mn;)if(Dt(ft[li],li,ft))return li;return-1}function xh(ft,Dt,xt){return Dt==Dt?function sd(ft,Dt,xt){for(var zt=xt-1,Mn=ft.length;++zt<Mn;)if(ft[zt]===Dt)return zt;return-1}(ft,Dt,xt):wh(ft,Qu,xt)}function PL(ft,Dt,xt,zt){for(var Mn=xt-1,li=ft.length;++Mn<li;)if(zt(ft[Mn],Dt))return Mn;return-1}function Qu(ft){return ft!=ft}function _p(ft,Dt){var xt=null==ft?0:ft.length;return xt?yp(ft,Dt)/xt:NaN}function ed(ft){return function(Dt){return null==Dt?A:Dt[ft]}}function h_(ft){return function(Dt){return null==ft?A:ft[Dt]}}function Db(ft,Dt,xt,zt,Mn){return Mn(ft,function(li,Pr,Mi){xt=zt?(zt=!1,li):Dt(xt,li,Pr,Mi)}),xt}function yp(ft,Dt){for(var xt,zt=-1,Mn=ft.length;++zt<Mn;){var li=Dt(ft[zt]);li!==A&&(xt=xt===A?li:xt+li)}return xt}function nl(ft,Dt){for(var xt=-1,zt=Array(ft);++xt<ft;)zt[xt]=Dt(xt);return zt}function xc(ft){return ft&&ft.slice(0,bp(ft)+1).replace(Nt,"")}function Go(ft){return function(Dt){return ft(Dt)}}function lt(ft,Dt){return fr(Dt,function(xt){return ft[xt]})}function td(ft,Dt){return ft.has(Dt)}function Ut(ft,Dt){for(var xt=-1,zt=ft.length;++xt<zt&&xh(Dt,ft[xt],0)>-1;);return xt}function Eh(ft,Dt){for(var xt=ft.length;xt--&&xh(Dt,ft[xt],0)>-1;);return xt}var Ah=h_({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),nC=h_({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function iC(ft){return"\\"+a_[ft]}function nd(ft){return Pt.test(ft)}function rd(ft){var Dt=-1,xt=Array(ft.size);return ft.forEach(function(zt,Mn){xt[++Dt]=[Mn,zt]}),xt}function Rb(ft,Dt){return function(xt){return ft(Dt(xt))}}function ho(ft,Dt){for(var xt=-1,zt=ft.length,Mn=0,li=[];++xt<zt;){var Pr=ft[xt];(Pr===Dt||Pr===F)&&(ft[xt]=F,li[Mn++]=xt)}return li}function vp(ft){var Dt=-1,xt=Array(ft.size);return ft.forEach(function(zt){xt[++Dt]=zt}),xt}function Ec(ft){return nd(ft)?function Nb(ft){for(var Dt=Eb.lastIndex=0;Eb.test(ft);)++Dt;return Dt}(ft):ii(ft)}function po(ft){return nd(ft)?function LL(ft){return ft.match(Eb)||[]}(ft):function d_(ft){return ft.split("")}(ft)}function bp(ft){for(var Dt=ft.length;Dt--&&At.test(ft.charAt(Dt)););return Dt}var FL=h_({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ac=function ft(Dt){var d,xt=(Dt=null==Dt?Yr:Ac.defaults(Yr.Object(),Dt,Ac.pick(Yr,Ho))).Array,zt=Dt.Date,Mn=Dt.Error,li=Dt.Function,Pr=Dt.Math,Mi=Dt.Object,od=Dt.RegExp,Da=Dt.String,Yt=Dt.TypeError,wp=xt.prototype,Zl=Mi.prototype,Sh=Dt["__core-js_shared__"],il=li.prototype.toString,Ti=Zl.hasOwnProperty,Pb=0,Fb=(d=/[^.]+$/.exec(Sh&&Sh.keys&&Sh.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",ad=Zl.toString,oC=il.call(Mi),aC=Yr._,Ra=od("^"+il.call(Ti).replace(He,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xp=Sb?Dt.Buffer:A,Sc=Dt.Symbol,Ep=Dt.Uint8Array,Lb=xp?xp.allocUnsafe:A,Ap=Rb(Mi.getPrototypeOf,Mi),Bb=Mi.create,m_=Zl.propertyIsEnumerable,Sp=wp.splice,kb=Sc?Sc.isConcatSpreadable:A,Ch=Sc?Sc.iterator:A,gi=Sc?Sc.toStringTag:A,Cp=function(){try{var d=hu(Mi,"defineProperty");return d({},"",{}),d}catch{}}(),cC=Dt.clearTimeout!==Yr.clearTimeout&&Dt.clearTimeout,sa=zt&&zt.now!==Yr.Date.now&&zt.now,jb=Dt.setTimeout!==Yr.setTimeout&&Dt.setTimeout,Xt=Pr.ceil,Kr=Pr.floor,Hn=Mi.getOwnPropertySymbols,Jr=xp?xp.isBuffer:A,ps=Dt.isFinite,rl=wp.join,Vs=Rb(Mi.keys,Mi),zr=Pr.max,Is=Pr.min,Mp=zt.now,lC=Dt.parseInt,Ub=Pr.random,Tp=wp.reverse,__=hu(Dt,"DataView"),Ql=hu(Dt,"Map"),Ip=hu(Dt,"Promise"),Cc=hu(Dt,"Set"),Dp=hu(Dt,"WeakMap"),eu=hu(Mi,"create"),Rp=Dp&&new Dp,sl={},Vb=fu(__),Hb=fu(Ql),tu=fu(Ip),uC=fu(Cc),y_=fu(Dp),nu=Sc?Sc.prototype:A,Mh=nu?nu.valueOf:A,Op=nu?nu.toString:A;function Me(d){if(Br(d)&&!Ln(d)&&!(d instanceof ri)){if(d instanceof go)return d;if(Ti.call(d,"__wrapped__"))return W_(d)}return new go(d)}var Ds=function(){function d(){}return function(p){if(!Ir(p))return{};if(Bb)return Bb(p);d.prototype=p;var _=new d;return d.prototype=A,_}}();function Mc(){}function go(d,p){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=A}function ri(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=pe,this.__views__=[]}function iu(d){var p=-1,_=null==d?0:d.length;for(this.clear();++p<_;){var V=d[p];this.set(V[0],V[1])}}function oa(d){var p=-1,_=null==d?0:d.length;for(this.clear();++p<_;){var V=d[p];this.set(V[0],V[1])}}function Tc(d){var p=-1,_=null==d?0:d.length;for(this.clear();++p<_;){var V=d[p];this.set(V[0],V[1])}}function ru(d){var p=-1,_=null==d?0:d.length;for(this.__data__=new Tc;++p<_;)this.add(d[p])}function mo(d){var p=this.__data__=new oa(d);this.size=p.size}function Rs(d,p){var _=Ln(d),V=!_&&Dc(d),me=!_&&!V&&Rc(d),Pe=!_&&!V&&!me&&La(d),Xe=_||V||me||Pe,at=Xe?nl(d.length,Da):[],gt=at.length;for(var Rt in d)(p||Ti.call(d,Rt))&&(!Xe||!("length"==Rt||me&&("offset"==Rt||"parent"==Rt)||Pe&&("buffer"==Rt||"byteLength"==Rt||"byteOffset"==Rt)||xo(Rt,gt)))&&at.push(Rt);return at}function _o(d){var p=d.length;return p?d[Fh(0,p-1)]:A}function ud(d,p){return Xh(wo(d),aa(p,0,d.length))}function qi(d){return Xh(wo(d))}function Qr(d,p,_){(_!==A&&!Co(d[p],_)||_===A&&!(p in d))&&wi(d,p,_)}function Zs(d,p,_){var V=d[p];(!Ti.call(d,p)||!Co(V,_)||_===A&&!(p in d))&&wi(d,p,_)}function An(d,p){for(var _=d.length;_--;)if(Co(d[_][0],p))return _;return-1}function Ih(d,p,_,V){return yo(d,function(me,Pe,Xe){p(V,me,_(me),Xe)}),V}function w_(d,p){return d&&Za(p,Os(p),d)}function wi(d,p,_){"__proto__"==p&&Cp?Cp(d,p,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[p]=_}function su(d,p){for(var _=-1,V=p.length,me=xt(V),Pe=null==d;++_<V;)me[_]=Pe?A:_u(d,p[_]);return me}function aa(d,p,_){return d==d&&(_!==A&&(d=d<=_?d:_),p!==A&&(d=d>=p?d:p)),d}function Wr(d,p,_,V,me,Pe){var Xe,at=1&p,gt=2&p,Rt=4&p;if(_&&(Xe=me?_(d,V,me,Pe):_(d)),Xe!==A)return Xe;if(!Ir(d))return d;var Ft=Ln(d);if(Ft){if(Xe=function $p(d){var p=d.length,_=new d.constructor(p);return p&&"string"==typeof d[0]&&Ti.call(d,"index")&&(_.index=d.index,_.input=d.input),_}(d),!at)return wo(d,Xe)}else{var Vt=sr(d),Kt=Vt==ot||Vt==ut;if(Rc(d))return I_(d,at);if(Vt==P||Vt==je||Kt&&!me){if(Xe=gt||Kt?{}:qp(d),!at)return gt?function Jn(d,p){return Za(d,fd(d),p)}(d,function dd(d,p){return d&&Za(p,$s(p),d)}(Xe,d)):function It(d,p){return Za(d,zp(d),p)}(d,w_(Xe,d))}else{if(!Hi[Vt])return me?d:{};Xe=function uw(d,p,_){var V=d.constructor;switch(p){case he:return nw(d);case Ae:case Fe:return new V(+d);case B:return function NC(d,p){var _=p?nw(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.byteLength)}(d,_);case z:case Ne:case Ze:case ct:case wt:case Qt:case gn:case In:case un:return D_(d,_);case Le:return new V;case Z:case Ke:return new V(d);case ve:return function PC(d){var p=new d.constructor(d.source,de.exec(d));return p.lastIndex=d.lastIndex,p}(d);case Ve:return new V;case vt:return function FC(d){return Mh?Mi(Mh.call(d)):{}}(d)}}(d,Vt,at)}}Pe||(Pe=new mo);var ln=Pe.get(d);if(ln)return ln;Pe.set(d,Xe),ly(d)?d.forEach(function(Tn){Xe.add(Wr(Tn,p,_,Tn,d,Pe))}):bd(d)&&d.forEach(function(Tn,Zn){Xe.set(Zn,Wr(Tn,p,_,Zn,d,Pe))});var zn=Ft?A:(Rt?gt?k_:Hh:gt?$s:Os)(d);return Gr(zn||d,function(Tn,Zn){zn&&(Tn=d[Zn=Tn]),Zs(Xe,Zn,Wr(Tn,p,_,Zn,d,Pe))}),Xe}function x_(d,p,_){var V=_.length;if(null==d)return!V;for(d=Mi(d);V--;){var me=_[V],Xe=d[me];if(Xe===A&&!(me in d)||!(0,p[me])(Xe))return!1}return!0}function Ic(d,p,_){if("function"!=typeof d)throw new Yt(x);return Eo(function(){d.apply(A,_)},p)}function al(d,p,_,V){var me=-1,Pe=ci,Xe=!0,at=d.length,gt=[],Rt=p.length;if(!at)return gt;_&&(p=fr(p,Go(_))),V?(Pe=Mb,Xe=!1):p.length>=200&&(Pe=td,Xe=!1,p=new ru(p));e:for(;++me<at;){var Ft=d[me],Vt=null==_?Ft:_(Ft);if(Ft=V||0!==Ft?Ft:0,Xe&&Vt==Vt){for(var Kt=Rt;Kt--;)if(p[Kt]===Vt)continue e;gt.push(Ft)}else Pe(p,Vt,V)||gt.push(Ft)}return gt}Me.templateSettings={escape:$i,evaluate:Xs,interpolate:ia,variable:"",imports:{_:Me}},(Me.prototype=Mc.prototype).constructor=Me,(go.prototype=Ds(Mc.prototype)).constructor=go,(ri.prototype=Ds(Mc.prototype)).constructor=ri,iu.prototype.clear=function hC(){this.__data__=eu?eu(null):{},this.size=0},iu.prototype.delete=function fC(d){var p=this.has(d)&&delete this.__data__[d];return this.size-=p?1:0,p},iu.prototype.get=function v_(d){var p=this.__data__;if(eu){var _=p[d];return _===N?A:_}return Ti.call(p,d)?p[d]:A},iu.prototype.has=function ol(d){var p=this.__data__;return eu?p[d]!==A:Ti.call(p,d)},iu.prototype.set=function zb(d,p){var _=this.__data__;return this.size+=this.has(d)?0:1,_[d]=eu&&p===A?N:p,this},oa.prototype.clear=function ld(){this.__data__=[],this.size=0},oa.prototype.delete=function pC(d){var p=this.__data__,_=An(p,d);return!(_<0||(_==p.length-1?p.pop():Sp.call(p,_,1),--this.size,0))},oa.prototype.get=function gC(d){var p=this.__data__,_=An(p,d);return _<0?A:p[_][1]},oa.prototype.has=function Zr(d){return An(this.__data__,d)>-1},oa.prototype.set=function Wb(d,p){var _=this.__data__,V=An(_,d);return V<0?(++this.size,_.push([d,p])):_[V][1]=p,this},Tc.prototype.clear=function Th(){this.size=0,this.__data__={hash:new iu,map:new(Ql||oa),string:new iu}},Tc.prototype.delete=function mC(d){var p=Gp(this,d).delete(d);return this.size-=p?1:0,p},Tc.prototype.get=function _C(d){return Gp(this,d).get(d)},Tc.prototype.has=function yC(d){return Gp(this,d).has(d)},Tc.prototype.set=function vC(d,p){var _=Gp(this,d),V=_.size;return _.set(d,p),this.size+=_.size==V?0:1,this},ru.prototype.add=ru.prototype.push=function bC(d){return this.__data__.set(d,N),this},ru.prototype.has=function b_(d){return this.__data__.has(d)},mo.prototype.clear=function pr(){this.__data__=new oa,this.size=0},mo.prototype.delete=function $t(d){var p=this.__data__,_=p.delete(d);return this.size=p.size,_},mo.prototype.get=function mn(d){return this.__data__.get(d)},mo.prototype.has=function Fr(d){return this.__data__.has(d)},mo.prototype.set=function Oa(d,p){var _=this.__data__;if(_ instanceof oa){var V=_.__data__;if(!Ql||V.length<199)return V.push([d,p]),this.size=++_.size,this;_=this.__data__=new Tc(V)}return _.set(d,p),this.size=_.size,this};var yo=Ii(ir),Fn=Ii(gs,!0);function E_(d,p){var _=!0;return yo(d,function(V,me,Pe){return _=!!p(V,me,Pe)}),_}function cl(d,p,_){for(var V=-1,me=d.length;++V<me;){var Pe=d[V],Xe=p(Pe);if(null!=Xe&&(at===A?Xe==Xe&&!eo(Xe):_(Xe,at)))var at=Xe,gt=Pe}return gt}function Rh(d,p){var _=[];return yo(d,function(V,me,Pe){p(V,me,Pe)&&_.push(V)}),_}function Tr(d,p,_,V,me){var Pe=-1,Xe=d.length;for(_||(_=VC),me||(me=[]);++Pe<Xe;){var at=d[Pe];p>0&&_(at)?p>1?Tr(at,p-1,_,V,me):tl(me,at):V||(me[me.length]=at)}return me}var xr=R_(),Np=R_(!0);function ir(d,p){return d&&xr(d,p,Os)}function gs(d,p){return d&&Np(d,p,Os)}function hd(d,p){return xn(p,function(_){return rc(d[_])})}function Wo(d,p){for(var _=0,V=(p=Pa(p,d)).length;null!=d&&_<V;)d=d[da(p[_++])];return _&&_==V?d:A}function Oh(d,p,_){var V=p(d);return Ln(d)?V:tl(V,_(d))}function rr(d){return null==d?d===A?"[object Undefined]":"[object Null]":gi&&gi in Mi(d)?function lw(d){var p=Ti.call(d,gi),_=d[gi];try{d[gi]=A;var V=!0}catch{}var me=ad.call(d);return V&&(p?d[gi]=_:delete d[gi]),me}(d):function G_(d){return ad.call(d)}(d)}function Nh(d,p){return d>p}function wC(d,p){return null!=d&&Ti.call(d,p)}function xC(d,p){return null!=d&&p in Mi(d)}function Pp(d,p,_){for(var V=_?Mb:ci,me=d[0].length,Pe=d.length,Xe=Pe,at=xt(Pe),gt=1/0,Rt=[];Xe--;){var Ft=d[Xe];Xe&&p&&(Ft=fr(Ft,Go(p))),gt=Is(Ft.length,gt),at[Xe]=!_&&(p||me>=120&&Ft.length>=120)?new ru(Xe&&Ft):A}Ft=d[0];var Vt=-1,Kt=at[0];e:for(;++Vt<me&&Rt.length<gt;){var ln=Ft[Vt],Sn=p?p(ln):ln;if(ln=_||0!==ln?ln:0,!(Kt?td(Kt,Sn):V(Rt,Sn,_))){for(Xe=Pe;--Xe;){var zn=at[Xe];if(!(zn?td(zn,Sn):V(d[Xe],Sn,_)))continue e}Kt&&Kt.push(Sn),Rt.push(ln)}}return Rt}function ou(d,p,_){var V=null==(d=$C(d,p=Pa(p,d)))?d:d[da(ha(p))];return null==V?A:Ks(V,d,_)}function AC(d){return Br(d)&&rr(d)==je}function Fp(d,p,_,V,me){return d===p||(null==d||null==p||!Br(d)&&!Br(p)?d!=d&&p!=p:function jL(d,p,_,V,me,Pe){var Xe=Ln(d),at=Ln(p),gt=Xe?Q:sr(d),Rt=at?Q:sr(p),Ft=(gt=gt==je?P:gt)==P,Vt=(Rt=Rt==je?P:Rt)==P,Kt=gt==Rt;if(Kt&&Rc(d)){if(!Rc(p))return!1;Xe=!0,Ft=!1}if(Kt&&!Ft)return Pe||(Pe=new mo),Xe||La(d)?B_(d,p,_,V,me,Pe):function aw(d,p,_,V,me,Pe,Xe){switch(_){case B:if(d.byteLength!=p.byteLength||d.byteOffset!=p.byteOffset)return!1;d=d.buffer,p=p.buffer;case he:return!(d.byteLength!=p.byteLength||!Pe(new Ep(d),new Ep(p)));case Ae:case Fe:case Z:return Co(+d,+p);case Je:return d.name==p.name&&d.message==p.message;case ve:case Ke:return d==p+"";case Le:var at=rd;case Ve:if(at||(at=vp),d.size!=p.size&&!(1&V))return!1;var Rt=Xe.get(d);if(Rt)return Rt==p;V|=2,Xe.set(d,p);var Ft=B_(at(d),at(p),V,me,Pe,Xe);return Xe.delete(d),Ft;case vt:if(Mh)return Mh.call(d)==Mh.call(p)}return!1}(d,p,gt,_,V,me,Pe);if(!(1&_)){var ln=Ft&&Ti.call(d,"__wrapped__"),Sn=Vt&&Ti.call(p,"__wrapped__");if(ln||Sn){var zn=ln?d.value():d,Tn=Sn?p.value():p;return Pe||(Pe=new mo),me(zn,Tn,_,V,Pe)}}return!!Kt&&(Pe||(Pe=new mo),function cw(d,p,_,V,me,Pe){var Xe=1&_,at=Hh(d),gt=at.length;if(gt!=Hh(p).length&&!Xe)return!1;for(var Vt=gt;Vt--;){var Kt=at[Vt];if(!(Xe?Kt in p:Ti.call(p,Kt)))return!1}var ln=Pe.get(d),Sn=Pe.get(p);if(ln&&Sn)return ln==p&&Sn==d;var zn=!0;Pe.set(d,p),Pe.set(p,d);for(var Tn=Xe;++Vt<gt;){var Zn=d[Kt=at[Vt]],si=p[Kt];if(V)var To=Xe?V(si,Zn,Kt,p,d,Pe):V(Zn,si,Kt,d,p,Pe);if(!(To===A?Zn===si||me(Zn,si,_,V,Pe):To)){zn=!1;break}Tn||(Tn="constructor"==Kt)}if(zn&&!Tn){var hn=d.constructor,bn=p.constructor;hn!=bn&&"constructor"in d&&"constructor"in p&&!("function"==typeof hn&&hn instanceof hn&&"function"==typeof bn&&bn instanceof bn)&&(zn=!1)}return Pe.delete(d),Pe.delete(p),zn}(d,p,_,V,me,Pe))}(d,p,_,V,Fp,me))}function $b(d,p,_,V){var me=_.length,Pe=me,Xe=!V;if(null==d)return!Pe;for(d=Mi(d);me--;){var at=_[me];if(Xe&&at[2]?at[1]!==d[at[0]]:!(at[0]in d))return!1}for(;++me<Pe;){var gt=(at=_[me])[0],Rt=d[gt],Ft=at[1];if(Xe&&at[2]){if(Rt===A&&!(gt in d))return!1}else{var Vt=new mo;if(V)var Kt=V(Rt,Ft,gt,d,p,Vt);if(!(Kt===A?Fp(Ft,Rt,3,V,Vt):Kt))return!1}}return!0}function SC(d){return!(!Ir(d)||function HC(d){return!!Fb&&Fb in d}(d))&&(rc(d)?Ra:H).test(fu(d))}function CC(d){return"function"==typeof d?d:null==d?Yi:"object"==typeof d?Ln(d)?IC(d[0],d[1]):TC(d):wx(d)}function Lp(d){if(!Xp(d))return Vs(d);var p=[];for(var _ in Mi(d))Ti.call(d,_)&&"constructor"!=_&&p.push(_);return p}function Xb(d,p){return d<p}function MC(d,p){var _=-1,V=Ws(d)?xt(d.length):[];return yo(d,function(me,Pe,Xe){V[++_]=p(me,Pe,Xe)}),V}function TC(d){var p=j_(d);return 1==p.length&&p[0][2]?Yp(p[0][0],p[0][1]):function(_){return _===d||$b(_,d,p)}}function IC(d,p){return U_(d)&&zC(p)?Yp(da(d),p):function(_){var V=_u(_,d);return V===A&&V===p?_g(_,d):Fp(p,V,3)}}function Ph(d,p,_,V,me){d!==p&&xr(p,function(Pe,Xe){if(me||(me=new mo),Ir(Pe))!function Yb(d,p,_,V,me,Pe,Xe){var at=Kp(d,_),gt=Kp(p,_),Rt=Xe.get(gt);if(Rt)Qr(d,_,Rt);else{var Ft=Pe?Pe(at,gt,_+"",d,p,Xe):A,Vt=Ft===A;if(Vt){var Kt=Ln(gt),ln=!Kt&&Rc(gt),Sn=!Kt&&!ln&&La(gt);Ft=gt,Kt||ln||Sn?Ln(at)?Ft=at:or(at)?Ft=wo(at):ln?(Vt=!1,Ft=I_(gt,!0)):Sn?(Vt=!1,Ft=D_(gt,!0)):Ft=[]:dl(gt)||Dc(gt)?(Ft=at,Dc(at)?Ft=Qw(at):(!Ir(at)||rc(at))&&(Ft=qp(gt))):Vt=!1}Vt&&(Xe.set(gt,Ft),me(Ft,gt,V,Pe,Xe),Xe.delete(gt)),Qr(d,_,Ft)}}(d,p,Xe,_,Ph,V,me);else{var at=V?V(Kp(d,Xe),Pe,Xe+"",d,p,me):A;at===A&&(at=Pe),Qr(d,Xe,at)}},$s)}function Lr(d,p){var _=d.length;if(_)return xo(p+=p<0?_:0,_)?d[p]:A}function S_(d,p,_){p=p.length?fr(p,function(Pe){return Ln(Pe)?function(Xe){return Wo(Xe,1===Pe.length?Pe[0]:Pe)}:Pe}):[Yi];var V=-1;return p=fr(p,Go(vn())),function eC(ft,Dt){var xt=ft.length;for(ft.sort(Dt);xt--;)ft[xt]=ft[xt].value;return ft}(MC(d,function(Pe,Xe,at){return{criteria:fr(p,function(Rt){return Rt(Pe)}),index:++V,value:Pe}}),function(Pe,Xe){return function LC(d,p,_){for(var V=-1,me=d.criteria,Pe=p.criteria,Xe=me.length,at=_.length;++V<Xe;){var gt=uu(me[V],Pe[V]);if(gt)return V>=at?gt:gt*("desc"==_[V]?-1:1)}return d.index-p.index}(Pe,Xe,_)})}function Kb(d,p,_){for(var V=-1,me=p.length,Pe={};++V<me;){var Xe=p[V],at=Wo(d,Xe);_(at,Xe)&&Lh(Pe,Pa(Xe,d),at)}return Pe}function Bp(d,p,_,V){var me=V?PL:xh,Pe=-1,Xe=p.length,at=d;for(d===p&&(p=wo(p)),_&&(at=fr(d,Go(_)));++Pe<Xe;)for(var gt=0,Rt=p[Pe],Ft=_?_(Rt):Rt;(gt=me(at,Ft,gt,V))>-1;)at!==d&&Sp.call(at,gt,1),Sp.call(d,gt,1);return d}function Zb(d,p){for(var _=d?p.length:0,V=_-1;_--;){var me=p[_];if(_==V||me!==Pe){var Pe=me;xo(me)?Sp.call(d,me,1):M_(d,me)}}return d}function Fh(d,p){return d+Kr(Ub()*(p-d+1))}function ca(d,p){var _="";if(!d||p<1||p>Be)return _;do{p%2&&(_+=d),(p=Kr(p/2))&&(d+=d)}while(p);return _}function Gn(d,p){return z_($h(d,p,Yi),d+"")}function Qb(d){return _o(wd(d))}function ew(d,p){var _=wd(d);return Xh(_,aa(p,0,_.length))}function Lh(d,p,_,V){if(!Ir(d))return d;for(var me=-1,Pe=(p=Pa(p,d)).length,Xe=Pe-1,at=d;null!=at&&++me<Pe;){var gt=da(p[me]),Rt=_;if("__proto__"===gt||"constructor"===gt||"prototype"===gt)return d;if(me!=Xe){var Ft=at[gt];(Rt=V?V(Ft,gt,at):A)===A&&(Rt=Ir(Ft)?Ft:xo(p[me+1])?[]:{})}Zs(at,gt,Rt),at=at[gt]}return d}var OC=Rp?function(d,p){return Rp.set(d,p),d}:Yi,Ui=Cp?function(d,p){return Cp(d,"toString",{configurable:!0,enumerable:!1,value:by(p),writable:!0})}:Yi;function C_(d){return Xh(wd(d))}function Hs(d,p,_){var V=-1,me=d.length;p<0&&(p=-p>me?0:me+p),(_=_>me?me:_)<0&&(_+=me),me=p>_?0:_-p>>>0,p>>>=0;for(var Pe=xt(me);++V<me;)Pe[V]=d[V+p];return Pe}function Qs(d,p){var _;return yo(d,function(V,me,Pe){return!(_=p(V,me,Pe))}),!!_}function kp(d,p,_){var V=0,me=null==d?V:d.length;if("number"==typeof p&&p==p&&me<=2147483647){for(;V<me;){var Pe=V+me>>>1,Xe=d[Pe];null!==Xe&&!eo(Xe)&&(_?Xe<=p:Xe<p)?V=Pe+1:me=Pe}return me}return au(d,p,Yi,_)}function au(d,p,_,V){var me=0,Pe=null==d?0:d.length;if(0===Pe)return 0;for(var Xe=(p=_(p))!=p,at=null===p,gt=eo(p),Rt=p===A;me<Pe;){var Ft=Kr((me+Pe)/2),Vt=_(d[Ft]),Kt=Vt!==A,ln=null===Vt,Sn=Vt==Vt,zn=eo(Vt);if(Xe)var Tn=V||Sn;else Tn=Rt?Sn&&(V||Kt):at?Sn&&Kt&&(V||!ln):gt?Sn&&Kt&&!ln&&(V||!zn):!ln&&!zn&&(V?Vt<=p:Vt<p);Tn?me=Ft+1:Pe=Ft}return Is(Pe,4294967294)}function cu(d,p){for(var _=-1,V=d.length,me=0,Pe=[];++_<V;){var Xe=d[_],at=p?p(Xe):Xe;if(!_||!Co(at,gt)){var gt=at;Pe[me++]=0===Xe?0:Xe}}return Pe}function vo(d){return"number"==typeof d?d:eo(d)?NaN:+d}function $o(d){if("string"==typeof d)return d;if(Ln(d))return fr(d,$o)+"";if(eo(d))return Op?Op.call(d):"";var p=d+"";return"0"==p&&1/d==-xe?"-0":p}function Ja(d,p,_){var V=-1,me=ci,Pe=d.length,Xe=!0,at=[],gt=at;if(_)Xe=!1,me=Mb;else if(Pe>=200){var Rt=p?null:P_(d);if(Rt)return vp(Rt);Xe=!1,me=td,gt=new ru}else gt=p?[]:at;e:for(;++V<Pe;){var Ft=d[V],Vt=p?p(Ft):Ft;if(Ft=_||0!==Ft?Ft:0,Xe&&Vt==Vt){for(var Kt=gt.length;Kt--;)if(gt[Kt]===Vt)continue e;p&&gt.push(Vt),at.push(Ft)}else me(gt,Vt,_)||(gt!==at&&gt.push(Vt),at.push(Ft))}return at}function M_(d,p){return null==(d=$C(d,p=Pa(p,d)))||delete d[da(ha(p))]}function Na(d,p,_,V){return Lh(d,p,_(Wo(d,p)),V)}function Bh(d,p,_,V){for(var me=d.length,Pe=V?me:-1;(V?Pe--:++Pe<me)&&p(d[Pe],Pe,d););return _?Hs(d,V?0:Pe,V?Pe+1:me):Hs(d,V?Pe+1:0,V?me:Pe)}function tw(d,p){var _=d;return _ instanceof ri&&(_=_.value()),Tb(p,function(V,me){return me.func.apply(me.thisArg,tl([V],me.args))},_)}function jp(d,p,_){var V=d.length;if(V<2)return V?Ja(d[0]):[];for(var me=-1,Pe=xt(V);++me<V;)for(var Xe=d[me],at=-1;++at<V;)at!=me&&(Pe[me]=al(Pe[me]||Xe,d[at],p,_));return Ja(Tr(Pe,1),p,_)}function Up(d,p,_){for(var V=-1,me=d.length,Pe=p.length,Xe={};++V<me;)_(Xe,d[V],V<Pe?p[V]:A);return Xe}function kh(d){return or(d)?d:[]}function lu(d){return"function"==typeof d?d:Yi}function Pa(d,p){return Ln(d)?d:U_(d,p)?[d]:Yh(Di(d))}var T_=Gn;function bo(d,p,_){var V=d.length;return _=_===A?V:_,!p&&_>=V?d:Hs(d,p,_)}var Dn=cC||function(d){return Yr.clearTimeout(d)};function I_(d,p){if(p)return d.slice();var _=d.length,V=Lb?Lb(_):new d.constructor(_);return d.copy(V),V}function nw(d){var p=new d.constructor(d.byteLength);return new Ep(p).set(new Ep(d)),p}function D_(d,p){var _=p?nw(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}function uu(d,p){if(d!==p){var _=d!==A,V=null===d,me=d==d,Pe=eo(d),Xe=p!==A,at=null===p,gt=p==p,Rt=eo(p);if(!at&&!Rt&&!Pe&&d>p||Pe&&Xe&&gt&&!at&&!Rt||V&&Xe&&gt||!_&&gt||!me)return 1;if(!V&&!Pe&&!Rt&&d<p||Rt&&_&&me&&!V&&!Pe||at&&_&&me||!Xe&&me||!gt)return-1}return 0}function iw(d,p,_,V){for(var me=-1,Pe=d.length,Xe=_.length,at=-1,gt=p.length,Rt=zr(Pe-Xe,0),Ft=xt(gt+Rt),Vt=!V;++at<gt;)Ft[at]=p[at];for(;++me<Xe;)(Vt||me<Pe)&&(Ft[_[me]]=d[me]);for(;Rt--;)Ft[at++]=d[me++];return Ft}function rw(d,p,_,V){for(var me=-1,Pe=d.length,Xe=-1,at=_.length,gt=-1,Rt=p.length,Ft=zr(Pe-at,0),Vt=xt(Ft+Rt),Kt=!V;++me<Ft;)Vt[me]=d[me];for(var ln=me;++gt<Rt;)Vt[ln+gt]=p[gt];for(;++Xe<at;)(Kt||me<Pe)&&(Vt[ln+_[Xe]]=d[me++]);return Vt}function wo(d,p){var _=-1,V=d.length;for(p||(p=xt(V));++_<V;)p[_]=d[_];return p}function Za(d,p,_,V){var me=!_;_||(_={});for(var Pe=-1,Xe=p.length;++Pe<Xe;){var at=p[Pe],gt=V?V(_[at],d[at],at,_,d):A;gt===A&&(gt=d[at]),me?wi(_,at,gt):Zs(_,at,gt)}return _}function Gs(d,p){return function(_,V){var me=Ln(_)?Cb:Ih,Pe=p?p():{};return me(_,d,vn(V,2),Pe)}}function ms(d){return Gn(function(p,_){var V=-1,me=_.length,Pe=me>1?_[me-1]:A,Xe=me>2?_[2]:A;for(Pe=d.length>3&&"function"==typeof Pe?(me--,Pe):A,Xe&&es(_[0],_[1],Xe)&&(Pe=me<3?A:Pe,me=1),p=Mi(p);++V<me;){var at=_[V];at&&d(p,at,V,Pe)}return p})}function Ii(d,p){return function(_,V){if(null==_)return _;if(!Ws(_))return d(_,V);for(var me=_.length,Pe=p?me:-1,Xe=Mi(_);(p?Pe--:++Pe<me)&&!1!==V(Xe[Pe],Pe,Xe););return _}}function R_(d){return function(p,_,V){for(var me=-1,Pe=Mi(p),Xe=V(p),at=Xe.length;at--;){var gt=Xe[d?at:++me];if(!1===_(Pe[gt],gt,Pe))break}return p}}function Fa(d){return function(p){var _=nd(p=Di(p))?po(p):A,V=_?_[0]:p.charAt(0),me=_?bo(_,1).join(""):p.slice(1);return V[d]()+me}}function ll(d){return function(p){return Tb(lf(hx(p).replace(DL,"")),d,"")}}function du(d){return function(){var p=arguments;switch(p.length){case 0:return new d;case 1:return new d(p[0]);case 2:return new d(p[0],p[1]);case 3:return new d(p[0],p[1],p[2]);case 4:return new d(p[0],p[1],p[2],p[3]);case 5:return new d(p[0],p[1],p[2],p[3],p[4]);case 6:return new d(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new d(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var _=Ds(d.prototype),V=d.apply(_,p);return Ir(V)?V:_}}function kC(d){return function(p,_,V){var me=Mi(p);if(!Ws(p)){var Pe=vn(_,3);p=Os(p),_=function(at){return Pe(me[at],at,me)}}var Xe=d(p,_,V);return Xe>-1?me[Pe?p[Xe]:Xe]:A}}function O_(d){return ec(function(p){var _=p.length,V=_,me=go.prototype.thru;for(d&&p.reverse();V--;){var Pe=p[V];if("function"!=typeof Pe)throw new Yt(x);if(me&&!Xe&&"wrapper"==tc(Pe))var Xe=new go([],!0)}for(V=Xe?V:_;++V<_;){var at=tc(Pe=p[V]),gt="wrapper"==at?ys(Pe):A;Xe=gt&&H_(gt[0])&&424==gt[1]&&!gt[4].length&&1==gt[9]?Xe[tc(gt[0])].apply(Xe,gt[3]):1==Pe.length&&H_(Pe)?Xe[at]():Xe.thru(Pe)}return function(){var Rt=arguments,Ft=Rt[0];if(Xe&&1==Rt.length&&Ln(Ft))return Xe.plant(Ft).value();for(var Vt=0,Kt=_?p[Vt].apply(this,Rt):Ft;++Vt<_;)Kt=p[Vt].call(this,Kt);return Kt}})}function _s(d,p,_,V,me,Pe,Xe,at,gt,Rt){var Ft=p&D,Vt=1&p,Kt=2&p,ln=24&p,Sn=512&p,zn=Kt?A:du(d);return function Tn(){for(var Zn=arguments.length,si=xt(Zn),To=Zn;To--;)si[To]=arguments[To];if(ln)var hn=xi(Tn),bn=function f_(ft,Dt){for(var xt=ft.length,zt=0;xt--;)ft[xt]===Dt&&++zt;return zt}(si,hn);if(V&&(si=iw(si,V,me,ln)),Pe&&(si=rw(si,Pe,Xe,ln)),Zn-=bn,ln&&Zn<Rt){var Dr=ho(si,hn);return sw(d,p,_s,Tn.placeholder,_,si,Dr,at,gt,Rt-Zn)}var st=Vt?_:this,ac=Kt?st[d]:d;return Zn=si.length,at?si=function hw(d,p){for(var _=d.length,V=Is(p.length,_),me=wo(d);V--;){var Pe=p[V];d[V]=xo(Pe,_)?me[Pe]:A}return d}(si,at):Sn&&Zn>1&&si.reverse(),Ft&&gt<Zn&&(si.length=gt),this&&this!==Yr&&this instanceof Tn&&(ac=zn||du(ac)),ac.apply(st,si)}}function Qa(d,p){return function(_,V){return function EC(d,p,_,V){return ir(d,function(me,Pe,Xe){p(V,_(me),Pe,Xe)}),V}(_,d,p(V),{})}}function Uh(d,p){return function(_,V){var me;if(_===A&&V===A)return p;if(_!==A&&(me=_),V!==A){if(me===A)return V;"string"==typeof _||"string"==typeof V?(_=$o(_),V=$o(V)):(_=vo(_),V=vo(V)),me=d(_,V)}return me}}function qo(d){return ec(function(p){return p=fr(p,Go(vn())),Gn(function(_){var V=this;return d(p,function(me){return Ks(me,V,_)})})})}function la(d,p){var _=(p=p===A?" ":$o(p)).length;if(_<2)return _?ca(p,d):p;var V=ca(p,Xt(d/Ec(p)));return nd(p)?bo(po(V),0,d).join(""):V.slice(0,d)}function N_(d){return function(p,_,V){return V&&"number"!=typeof V&&es(p,_,V)&&(_=V=A),p=sc(p),_===A?(_=p,p=0):_=sc(_),function RC(d,p,_,V){for(var me=-1,Pe=zr(Xt((p-d)/(_||1)),0),Xe=xt(Pe);Pe--;)Xe[V?Pe:++me]=d,d+=_;return Xe}(p,_,V=V===A?p<_?1:-1:sc(V),d)}}function Vp(d){return function(p,_){return"string"==typeof p&&"string"==typeof _||(p=fa(p),_=fa(_)),d(p,_)}}function sw(d,p,_,V,me,Pe,Xe,at,gt,Rt){var Ft=8&p;p|=Ft?w:64,4&(p&=~(Ft?64:w))||(p&=-4);var zn=[d,p,me,Ft?Pe:A,Ft?Xe:A,Ft?A:Pe,Ft?A:Xe,at,gt,Rt],Tn=_.apply(A,zn);return H_(d)&&fw(Tn,zn),Tn.placeholder=V,qh(Tn,d,p)}function Vh(d){var p=Pr[d];return function(_,V){if(_=fa(_),(V=null==V?0:Is(Vn(V),292))&&ps(_)){var me=(Di(_)+"e").split("e");return+((me=(Di(p(me[0]+"e"+(+me[1]+V)))+"e").split("e"))[0]+"e"+(+me[1]-V))}return p(_)}}var P_=Cc&&1/vp(new Cc([,-0]))[1]==xe?function(d){return new Cc(d)}:vg;function Hp(d){return function(p){var _=sr(p);return _==Le?rd(p):_==Ve?function fo(ft){var Dt=-1,xt=Array(ft.size);return ft.forEach(function(zt){xt[++Dt]=[zt,zt]}),xt}(p):function tC(ft,Dt){return fr(Dt,function(xt){return[xt,ft[xt]]})}(p,d(p))}}function ua(d,p,_,V,me,Pe,Xe,at){var gt=2&p;if(!gt&&"function"!=typeof d)throw new Yt(x);var Rt=V?V.length:0;if(Rt||(p&=-97,V=me=A),Xe=Xe===A?Xe:zr(Vn(Xe),0),at=at===A?at:Vn(at),Rt-=me?me.length:0,64&p){var Ft=V,Vt=me;V=me=A}var Kt=gt?A:ys(d),ln=[d,p,_,V,me,Ft,Vt,Pe,Xe,at];if(Kt&&function WC(d,p){var _=d[1],V=p[1],me=_|V;if(!(me<131)&&!(V==D&&8==_||V==D&&256==_&&d[7].length<=p[8]||384==V&&p[7].length<=p[8]&&8==_))return d;1&V&&(d[2]=p[2],me|=1&_?0:4);var at=p[3];if(at){var gt=d[3];d[3]=gt?iw(gt,at,p[4]):at,d[4]=gt?ho(d[3],F):p[4]}(at=p[5])&&(d[5]=(gt=d[5])?rw(gt,at,p[6]):at,d[6]=gt?ho(d[5],F):p[6]),(at=p[7])&&(d[7]=at),V&D&&(d[8]=null==d[8]?p[8]:Is(d[8],p[8])),null==d[9]&&(d[9]=p[9]),d[0]=p[0],d[1]=me}(ln,Kt),d=ln[0],p=ln[1],_=ln[2],V=ln[3],me=ln[4],!(at=ln[9]=ln[9]===A?gt?0:d.length:zr(ln[9]-Rt,0))&&24&p&&(p&=-25),p&&1!=p)Sn=8==p||16==p?function BC(d,p,_){var V=du(d);return function me(){for(var Pe=arguments.length,Xe=xt(Pe),at=Pe,gt=xi(me);at--;)Xe[at]=arguments[at];var Rt=Pe<3&&Xe[0]!==gt&&Xe[Pe-1]!==gt?[]:ho(Xe,gt);return(Pe-=Rt.length)<_?sw(d,p,_s,me.placeholder,A,Xe,Rt,A,A,_-Pe):Ks(this&&this!==Yr&&this instanceof me?V:d,this,Xe)}}(d,p,at):p!=w&&33!=p||me.length?_s.apply(A,ln):function jC(d,p,_,V){var me=1&p,Pe=du(d);return function Xe(){for(var at=-1,gt=arguments.length,Rt=-1,Ft=V.length,Vt=xt(Ft+gt),Kt=this&&this!==Yr&&this instanceof Xe?Pe:d;++Rt<Ft;)Vt[Rt]=V[Rt];for(;gt--;)Vt[Rt++]=arguments[++at];return Ks(Kt,me?_:this,Vt)}}(d,p,_,V);else var Sn=function jh(d,p,_){var V=1&p,me=du(d);return function Pe(){return(this&&this!==Yr&&this instanceof Pe?me:d).apply(V?_:this,arguments)}}(d,p,_);return qh((Kt?OC:fw)(Sn,ln),d,p)}function ow(d,p,_,V){return d===A||Co(d,Zl[_])&&!Ti.call(V,_)?p:d}function F_(d,p,_,V,me,Pe){return Ir(d)&&Ir(p)&&(Pe.set(p,d),Ph(d,p,A,F_,Pe),Pe.delete(p)),d}function L_(d){return dl(d)?A:d}function B_(d,p,_,V,me,Pe){var Xe=1&_,at=d.length,gt=p.length;if(at!=gt&&!(Xe&&gt>at))return!1;var Rt=Pe.get(d),Ft=Pe.get(p);if(Rt&&Ft)return Rt==p&&Ft==d;var Vt=-1,Kt=!0,ln=2&_?new ru:A;for(Pe.set(d,p),Pe.set(p,d);++Vt<at;){var Sn=d[Vt],zn=p[Vt];if(V)var Tn=Xe?V(zn,Sn,Vt,p,d,Pe):V(Sn,zn,Vt,d,p,Pe);if(Tn!==A){if(Tn)continue;Kt=!1;break}if(ln){if(!bh(p,function(Zn,si){if(!td(ln,si)&&(Sn===Zn||me(Sn,Zn,_,V,Pe)))return ln.push(si)})){Kt=!1;break}}else if(Sn!==zn&&!me(Sn,zn,_,V,Pe)){Kt=!1;break}}return Pe.delete(d),Pe.delete(p),Kt}function ec(d){return z_($h(d,A,Qp),d+"")}function Hh(d){return Oh(d,Os,zp)}function k_(d){return Oh(d,$s,fd)}var ys=Rp?function(d){return Rp.get(d)}:vg;function tc(d){for(var p=d.name+"",_=sl[p],V=Ti.call(sl,p)?_.length:0;V--;){var me=_[V],Pe=me.func;if(null==Pe||Pe==d)return me.name}return p}function xi(d){return(Ti.call(Me,"placeholder")?Me:d).placeholder}function vn(){var d=Me.iteratee||oc;return d=d===oc?CC:d,arguments.length?d(arguments[0],arguments[1]):d}function Gp(d,p){var _=d.__data__;return function V_(d){var p=typeof d;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==d:null===d}(p)?_["string"==typeof p?"string":"hash"]:_.map}function j_(d){for(var p=Os(d),_=p.length;_--;){var V=p[_],me=d[V];p[_]=[V,me,zC(me)]}return p}function hu(d,p){var _=function rC(ft,Dt){return null==ft?A:ft[Dt]}(d,p);return SC(_)?_:A}var zp=Hn?function(d){return null==d?[]:(d=Mi(d),xn(Hn(d),function(p){return m_.call(d,p)}))}:df,fd=Hn?function(d){for(var p=[];d;)tl(p,zp(d)),d=Ap(d);return p}:df,sr=rr;function Gh(d,p,_){for(var V=-1,me=(p=Pa(p,d)).length,Pe=!1;++V<me;){var Xe=da(p[V]);if(!(Pe=null!=d&&_(d,Xe)))break;d=d[Xe]}return Pe||++V!=me?Pe:!!(me=null==d?0:d.length)&&hg(me)&&xo(Xe,me)&&(Ln(d)||Dc(d))}function qp(d){return"function"!=typeof d.constructor||Xp(d)?{}:Ds(Ap(d))}function VC(d){return Ln(d)||Dc(d)||!!(kb&&d&&d[kb])}function xo(d,p){var _=typeof d;return!!(p=p??Be)&&("number"==_||"symbol"!=_&&De.test(d))&&d>-1&&d%1==0&&d<p}function es(d,p,_){if(!Ir(_))return!1;var V=typeof p;return!!("number"==V?Ws(_)&&xo(p,_.length):"string"==V&&p in _)&&Co(_[p],d)}function U_(d,p){if(Ln(d))return!1;var _=typeof d;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=d&&!eo(d))||Uo.test(d)||!Ys.test(d)||null!=p&&d in Mi(p)}function H_(d){var p=tc(d),_=Me[p];if("function"!=typeof _||!(p in ri.prototype))return!1;if(d===_)return!0;var V=ys(_);return!!V&&d===V[0]}(__&&sr(new __(new ArrayBuffer(1)))!=B||Ql&&sr(new Ql)!=Le||Ip&&sr(Ip.resolve())!=_e||Cc&&sr(new Cc)!=Ve||Dp&&sr(new Dp)!=Et)&&(sr=function(d){var p=rr(d),_=p==P?d.constructor:A,V=_?fu(_):"";if(V)switch(V){case Vb:return B;case Hb:return Le;case tu:return _e;case uC:return Ve;case y_:return Et}return p});var GC=Sh?rc:Ad;function Xp(d){var p=d&&d.constructor;return d===("function"==typeof p&&p.prototype||Zl)}function zC(d){return d==d&&!Ir(d)}function Yp(d,p){return function(_){return null!=_&&_[d]===p&&(p!==A||d in Mi(_))}}function $h(d,p,_){return p=zr(p===A?d.length-1:p,0),function(){for(var V=arguments,me=-1,Pe=zr(V.length-p,0),Xe=xt(Pe);++me<Pe;)Xe[me]=V[p+me];me=-1;for(var at=xt(p+1);++me<p;)at[me]=V[me];return at[p]=_(Xe),Ks(d,this,at)}}function $C(d,p){return p.length<2?d:Wo(d,Hs(p,0,-1))}function Kp(d,p){if(("constructor"!==p||"function"!=typeof d[p])&&"__proto__"!=p)return d[p]}var fw=Jp(OC),Eo=jb||function(d,p){return Yr.setTimeout(d,p)},z_=Jp(Ui);function qh(d,p,_){var V=p+"";return z_(d,function dw(d,p){var _=p.length;if(!_)return d;var V=_-1;return p[V]=(_>1?"& ":"")+p[V],p=p.join(_>2?", ":" "),d.replace(en,"{\n/* [wrapped with "+p+"] */\n")}(V,function pw(d,p){return Gr(_t,function(_){var V="_."+_[0];p&_[1]&&!ci(d,V)&&d.push(V)}),d.sort()}(function Wp(d){var p=d.match(Vi);return p?p[1].split(Nr):[]}(V),_)))}function Jp(d){var p=0,_=0;return function(){var V=Mp(),me=16-(V-_);if(_=V,me>0){if(++p>=800)return arguments[0]}else p=0;return d.apply(A,arguments)}}function Xh(d,p){var _=-1,V=d.length,me=V-1;for(p=p===A?V:p;++_<p;){var Pe=Fh(_,me),Xe=d[Pe];d[Pe]=d[_],d[_]=Xe}return d.length=p,d}var Yh=function zh(d){var p=cg(d,function(V){return 500===_.size&&_.clear(),V}),_=p.cache;return p}(function(d){var p=[];return 46===d.charCodeAt(0)&&p.push(""),d.replace(Vo,function(_,V,me,Pe){p.push(me?Pe.replace(le,"$1"):V||_)}),p});function da(d){if("string"==typeof d||eo(d))return d;var p=d+"";return"0"==p&&1/d==-xe?"-0":p}function fu(d){if(null!=d){try{return il.call(d)}catch{}try{return d+""}catch{}}return""}function W_(d){if(d instanceof ri)return d.clone();var p=new go(d.__wrapped__,d.__chain__);return p.__actions__=wo(d.__actions__),p.__index__=d.__index__,p.__values__=d.__values__,p}var Zp=Gn(function(d,p){return or(d)?al(d,Tr(p,1,or,!0)):[]}),pu=Gn(function(d,p){var _=ha(p);return or(_)&&(_=A),or(d)?al(d,Tr(p,1,or,!0),vn(_,2)):[]}),XC=Gn(function(d,p){var _=ha(p);return or(_)&&(_=A),or(d)?al(d,Tr(p,1,or,!0),A,_):[]});function vw(d,p,_){var V=null==d?0:d.length;if(!V)return-1;var me=null==_?0:Vn(_);return me<0&&(me=zr(V+me,0)),wh(d,vn(p,3),me)}function Xi(d,p,_){var V=null==d?0:d.length;if(!V)return-1;var me=V-1;return _!==A&&(me=Vn(_),me=_<0?zr(V+me,0):Is(me,V-1)),wh(d,vn(p,3),me,!0)}function Qp(d){return null!=d&&d.length?Tr(d,1):[]}function ww(d){return d&&d.length?d[0]:A}var eg=Gn(function(d){var p=fr(d,kh);return p.length&&p[0]===d[0]?Pp(p):[]}),Ew=Gn(function(d){var p=ha(d),_=fr(d,kh);return p===ha(_)?p=A:_.pop(),_.length&&_[0]===d[0]?Pp(_,vn(p,2)):[]}),KC=Gn(function(d){var p=ha(d),_=fr(d,kh);return(p="function"==typeof p?p:A)&&_.pop(),_.length&&_[0]===d[0]?Pp(_,A,p):[]});function ha(d){var p=null==d?0:d.length;return p?d[p-1]:A}var Sw=Gn(Cw);function Cw(d,p){return d&&d.length&&p&&p.length?Bp(d,p):d}var Mw=ec(function(d,p){var _=null==d?0:d.length,V=su(d,p);return Zb(d,fr(p,function(me){return xo(me,_)?+me:me}).sort(uu)),V});function Gi(d){return null==d?d:Tp.call(d)}var JL=Gn(function(d){return Ja(Tr(d,1,or,!0))}),nM=Gn(function(d){var p=ha(d);return or(p)&&(p=A),Ja(Tr(d,1,or,!0),vn(p,2))}),_d=Gn(function(d){var p=ha(d);return p="function"==typeof p?p:A,Ja(Tr(d,1,or,!0),A,p)});function Kh(d){if(!d||!d.length)return[];var p=0;return d=xn(d,function(_){if(or(_))return p=zr(_.length,p),!0}),nl(p,function(_){return fr(d,ed(_))})}function _n(d,p){if(!d||!d.length)return[];var _=Kh(d);return null==p?_:fr(_,function(V){return Ks(p,A,V)})}var rM=Gn(function(d,p){return or(d)?al(d,p):[]}),Jh=Gn(function(d){return jp(xn(d,or))}),Zh=Gn(function(d){var p=ha(d);return or(p)&&(p=A),jp(xn(d,or),vn(p,2))}),sM=Gn(function(d){var p=ha(d);return p="function"==typeof p?p:A,jp(xn(d,or),A,p)}),Nw=Gn(Kh),ng=Gn(function(d){var p=d.length,_=p>1?d[p-1]:A;return _="function"==typeof _?(d.pop(),_):A,_n(d,_)});function ig(d){var p=Me(d);return p.__chain__=!0,p}function rg(d,p){return p(d)}var aM=ec(function(d){var p=d.length,_=p?d[0]:0,V=this.__wrapped__,me=function(Pe){return su(Pe,d)};return!(p>1||this.__actions__.length)&&V instanceof ri&&xo(_)?((V=V.slice(_,+_+(p?1:0))).__actions__.push({func:rg,args:[me],thisArg:A}),new go(V,this.__chain__).thru(function(Pe){return p&&!Pe.length&&Pe.push(A),Pe})):this.thru(me)}),zs=Gs(function(d,p,_){Ti.call(d,_)?++d[_]:wi(d,_,1)}),kw=kC(vw),uM=kC(Xi);function Vw(d,p){return(Ln(d)?Gr:yo)(d,vn(p,3))}function K_(d,p){return(Ln(d)?vh:Fn)(d,vn(p,3))}var hM=Gs(function(d,p,_){Ti.call(d,_)?d[_].push(p):wi(d,_,[p])}),pM=Gn(function(d,p,_){var V=-1,me="function"==typeof p,Pe=Ws(d)?xt(d.length):[];return yo(d,function(Xe){Pe[++V]=me?Ks(p,Xe,_):ou(Xe,p,_)}),Pe}),gM=Gs(function(d,p,_){wi(d,_,p)});function ef(d,p){return(Ln(d)?fr:MC)(d,vn(p,3))}var Gw=Gs(function(d,p,_){d[_?0:1].push(p)},function(){return[[],[]]}),vM=Gn(function(d,p){if(null==d)return[];var _=p.length;return _>1&&es(d,p[0],p[1])?p=[]:_>2&&es(p[0],p[1],p[2])&&(p=[p[0]]),S_(d,Tr(p,1),[])}),tf=sa||function(){return Yr.Date.now()};function J_(d,p,_){return p=_?A:p,ua(d,D,A,A,A,A,p=d&&null==p?d.length:p)}function Xw(d,p){var _;if("function"!=typeof p)throw new Yt(x);return d=Vn(d),function(){return--d>0&&(_=p.apply(this,arguments)),d<=1&&(p=A),_}}var Z_=Gn(function(d,p,_){var V=1;if(_.length){var me=ho(_,xi(Z_));V|=w}return ua(d,V,p,_,me)}),bM=Gn(function(d,p,_){var V=3;if(_.length){var me=ho(_,xi(bM));V|=w}return ua(p,V,d,_,me)});function og(d,p,_){var V,me,Pe,Xe,at,gt,Rt=0,Ft=!1,Vt=!1,Kt=!0;if("function"!=typeof d)throw new Yt(x);function ln(Dr){var st=V,ac=me;return V=me=A,Rt=Dr,Xe=d.apply(ac,st)}function Tn(Dr){var st=Dr-gt;return gt===A||st>=p||st<0||Vt&&Dr-Rt>=Pe}function Zn(){var Dr=tf();if(Tn(Dr))return si(Dr);at=Eo(Zn,function zn(Dr){var Cy=p-(Dr-gt);return Vt?Is(Cy,Pe-(Dr-Rt)):Cy}(Dr))}function si(Dr){return at=A,Kt&&V?ln(Dr):(V=me=A,Xe)}function bn(){var Dr=tf(),st=Tn(Dr);if(V=arguments,me=this,gt=Dr,st){if(at===A)return function Sn(Dr){return Rt=Dr,at=Eo(Zn,p),Ft?ln(Dr):Xe}(gt);if(Vt)return Dn(at),at=Eo(Zn,p),ln(gt)}return at===A&&(at=Eo(Zn,p)),Xe}return p=fa(p)||0,Ir(_)&&(Ft=!!_.leading,Pe=(Vt="maxWait"in _)?zr(fa(_.maxWait)||0,p):Pe,Kt="trailing"in _?!!_.trailing:Kt),bn.cancel=function To(){at!==A&&Dn(at),Rt=0,V=gt=me=at=A},bn.flush=function hn(){return at===A?Xe:si(tf())},bn}var wM=Gn(function(d,p){return Ic(d,1,p)}),ul=Gn(function(d,p,_){return Ic(d,fa(p)||0,_)});function cg(d,p){if("function"!=typeof d||null!=p&&"function"!=typeof p)throw new Yt(x);var _=function(){var V=arguments,me=p?p.apply(this,V):V[0],Pe=_.cache;if(Pe.has(me))return Pe.get(me);var Xe=d.apply(this,V);return _.cache=Pe.set(me,Xe)||Pe,Xe};return _.cache=new(cg.Cache||Tc),_}function nf(d){if("function"!=typeof d)throw new Yt(x);return function(){var p=arguments;switch(p.length){case 0:return!d.call(this);case 1:return!d.call(this,p[0]);case 2:return!d.call(this,p[0],p[1]);case 3:return!d.call(this,p[0],p[1],p[2])}return!d.apply(this,p)}}cg.Cache=Tc;var QL=T_(function(d,p){var _=(p=1==p.length&&Ln(p[0])?fr(p[0],Go(vn())):fr(Tr(p,1),Go(vn()))).length;return Gn(function(V){for(var me=-1,Pe=Is(V.length,_);++me<Pe;)V[me]=p[me].call(this,V[me]);return Ks(d,this,V)})}),ic=Gn(function(d,p){var _=ho(p,xi(ic));return ua(d,w,A,p,_)}),lg=Gn(function(d,p){var _=ho(p,xi(lg));return ua(d,64,A,p,_)}),xM=ec(function(d,p){return ua(d,256,A,A,A,p)});function Co(d,p){return d===p||d!=d&&p!=p}var vd=Vp(Nh),ry=Vp(function(d,p){return d>=p}),Dc=AC(function(){return arguments}())?AC:function(d){return Br(d)&&Ti.call(d,"callee")&&!m_.call(d,"callee")},Ln=xt.isArray,nB=KS?Go(KS):function BL(d){return Br(d)&&rr(d)==he};function Ws(d){return null!=d&&hg(d.length)&&!rc(d)}function or(d){return Br(d)&&Ws(d)}var Rc=Jr||Ad,CM=JS?Go(JS):function kL(d){return Br(d)&&rr(d)==Fe};function oy(d){if(!Br(d))return!1;var p=rr(d);return p==Je||"[object DOMException]"==p||"string"==typeof d.message&&"string"==typeof d.name&&!dl(d)}function rc(d){if(!Ir(d))return!1;var p=rr(d);return p==ot||p==ut||"[object AsyncFunction]"==p||"[object Proxy]"==p}function dg(d){return"number"==typeof d&&d==Vn(d)}function hg(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=Be}function Ir(d){var p=typeof d;return null!=d&&("object"==p||"function"==p)}function Br(d){return null!=d&&"object"==typeof d}var bd=ZS?Go(ZS):function UL(d){return Br(d)&&sr(d)==Le};function af(d){return"number"==typeof d||Br(d)&&rr(d)==Z}function dl(d){if(!Br(d)||rr(d)!=P)return!1;var p=Ap(d);if(null===p)return!0;var _=Ti.call(p,"constructor")&&p.constructor;return"function"==typeof _&&_ instanceof _&&il.call(_)==oC}var pg=gp?Go(gp):function VL(d){return Br(d)&&rr(d)==ve},ly=Zu?Go(Zu):function HL(d){return Br(d)&&sr(d)==Ve};function mu(d){return"string"==typeof d||!Ln(d)&&Br(d)&&rr(d)==Ke}function eo(d){return"symbol"==typeof d||Br(d)&&rr(d)==vt}var La=mp?Go(mp):function GL(d){return Br(d)&&hg(d.length)&&!!nr[rr(d)]},gg=Vp(Xb),uy=Vp(function(d,p){return d<=p});function dy(d){if(!d)return[];if(Ws(d))return mu(d)?po(d):wo(d);if(Ch&&d[Ch])return function sC(ft){for(var Dt,xt=[];!(Dt=ft.next()).done;)xt.push(Dt.value);return xt}(d[Ch]());var p=sr(d);return(p==Le?rd:p==Ve?vp:wd)(d)}function sc(d){return d?(d=fa(d))===xe||d===-xe?17976931348623157e292*(d<0?-1:1):d==d?d:0:0===d?d:0}function Vn(d){var p=sc(d),_=p%1;return p==p?_?p-_:p:0}function hl(d){return d?aa(Vn(d),0,pe):0}function fa(d){if("number"==typeof d)return d;if(eo(d))return NaN;if(Ir(d)){var p="function"==typeof d.valueOf?d.valueOf():d;d=Ir(p)?p+"":p}if("string"!=typeof d)return 0===d?d:+d;d=xc(d);var _=v.test(d);return _||Y.test(d)?YS(d.slice(2),_?2:8):T.test(d)?NaN:+d}function Qw(d){return Za(d,$s(d))}function Di(d){return null==d?"":$o(d)}var PM=ms(function(d,p){if(Xp(p)||Ws(p))Za(p,Os(p),d);else for(var _ in p)Ti.call(p,_)&&Zs(d,_,p[_])}),Mo=ms(function(d,p){Za(p,$s(p),d)}),Xo=ms(function(d,p,_,V){Za(p,$s(p),d,V)}),FM=ms(function(d,p,_,V){Za(p,Os(p),d,V)}),LM=ec(su),kM=Gn(function(d,p){d=Mi(d);var _=-1,V=p.length,me=V>2?p[2]:A;for(me&&es(p[0],p[1],me)&&(V=1);++_<V;)for(var Pe=p[_],Xe=$s(Pe),at=-1,gt=Xe.length;++at<gt;){var Rt=Xe[at],Ft=d[Rt];(Ft===A||Co(Ft,Zl[Rt])&&!Ti.call(d,Rt))&&(d[Rt]=Pe[Rt])}return d}),jM=Gn(function(d){return d.push(A,F_),Ks(fy,A,d)});function _u(d,p,_){var V=null==d?A:Wo(d,p);return V===A?_:V}function _g(d,p){return null!=d&&Gh(d,p,xC)}var nx=Qa(function(d,p,_){null!=p&&"function"!=typeof p.toString&&(p=ad.call(p)),d[p]=_},by(Yi)),rB=Qa(function(d,p,_){null!=p&&"function"!=typeof p.toString&&(p=ad.call(p)),Ti.call(d,p)?d[p].push(_):d[p]=[_]},vn),sB=Gn(ou);function Os(d){return Ws(d)?Rs(d):Lp(d)}function $s(d){return Ws(d)?Rs(d,!0):function qb(d){if(!Ir(d))return function Wh(d){var p=[];if(null!=d)for(var _ in Mi(d))p.push(_);return p}(d);var p=Xp(d),_=[];for(var V in d)"constructor"==V&&(p||!Ti.call(d,V))||_.push(V);return _}(d)}var aB=ms(function(d,p,_){Ph(d,p,_)}),fy=ms(function(d,p,_,V){Ph(d,p,_,V)}),WM=ec(function(d,p){var _={};if(null==d)return _;var V=!1;p=fr(p,function(Pe){return Pe=Pa(Pe,d),V||(V=Pe.length>1),Pe}),Za(d,k_(d),_),V&&(_=Wr(_,7,L_));for(var me=p.length;me--;)M_(_,p[me]);return _}),qM=ec(function(d,p){return null==d?{}:function DC(d,p){return Kb(d,p,function(_,V){return _g(d,V)})}(d,p)});function ix(d,p){if(null==d)return{};var _=fr(k_(d),function(V){return[V]});return p=vn(p),Kb(d,_,function(V,me){return p(V,me[0])})}var ox=Hp(Os),ax=Hp($s);function wd(d){return null==d?[]:lt(d,Os(d))}var ux=ll(function(d,p,_){return p=p.toLowerCase(),d+(_?dx(p):p)});function dx(d){return yy(Di(d).toLowerCase())}function hx(d){return(d=Di(d))&&d.replace(rt,Ah).replace(RL,"")}var cB=ll(function(d,p,_){return d+(_?"-":"")+p.toLowerCase()}),lB=ll(function(d,p,_){return d+(_?" ":"")+p.toLowerCase()}),cf=Fa("toLowerCase"),rT=ll(function(d,p,_){return d+(_?"_":"")+p.toLowerCase()}),oT=ll(function(d,p,_){return d+(_?" ":"")+yy(p)}),mB=ll(function(d,p,_){return d+(_?" ":"")+p.toUpperCase()}),yy=Fa("toUpperCase");function lf(d,p,_){return d=Di(d),(p=_?A:p)===A?function id(ft){return NL.test(ft)}(d)?function zo(ft){return ft.match(OL)||[]}(d):function Ib(ft){return ft.match(ds)||[]}(d):d.match(p)||[]}var uf=Gn(function(d,p){try{return Ks(d,A,p)}catch(_){return oy(_)?_:new Mn(_)}}),vy=ec(function(d,p){return Gr(p,function(_){_=da(_),wi(d,_,Z_(d[_],d))}),d});function by(d){return function(){return d}}var _x=O_(),xd=O_(!0);function Yi(d){return d}function oc(d){return CC("function"==typeof d?d:Wr(d,1))}var lT=Gn(function(d,p){return function(_){return ou(_,d,p)}}),yB=Gn(function(d,p){return function(_){return ou(d,_,p)}});function vx(d,p,_){var V=Os(p),me=hd(p,V);null==_&&(!Ir(p)||!me.length&&V.length)&&(_=p,p=d,d=this,me=hd(p,Os(p)));var Pe=!(Ir(_)&&"chain"in _&&!_.chain),Xe=rc(d);return Gr(me,function(at){var gt=p[at];d[at]=gt,Xe&&(d.prototype[at]=function(){var Rt=this.__chain__;if(Pe||Rt){var Ft=d(this.__wrapped__);return(Ft.__actions__=wo(this.__actions__)).push({func:gt,args:arguments,thisArg:d}),Ft.__chain__=Rt,Ft}return gt.apply(d,tl([this.value()],arguments))})}),d}function vg(){}var fl=qo(fr),wy=qo(u_),xy=qo(bh);function wx(d){return U_(d)?ed(da(d)):function Jb(d){return function(p){return Wo(p,d)}}(d)}var Ey=N_(),xx=N_(!0);function df(){return[]}function Ad(){return!1}var Ax=Uh(function(d,p){return d+p},0),hf=Vh("ceil"),bg=Uh(function(d,p){return d/p},1),Ay=Vh("floor"),Mx=Uh(function(d,p){return d*p},1),_T=Vh("round"),bB=Uh(function(d,p){return d-p},0);return Me.after=function ZL(d,p){if("function"!=typeof p)throw new Yt(x);return d=Vn(d),function(){if(--d<1)return p.apply(this,arguments)}},Me.ary=J_,Me.assign=PM,Me.assignIn=Mo,Me.assignInWith=Xo,Me.assignWith=FM,Me.at=LM,Me.before=Xw,Me.bind=Z_,Me.bindAll=vy,Me.bindKey=bM,Me.castArray=function ey(){if(!arguments.length)return[];var d=arguments[0];return Ln(d)?d:[d]},Me.chain=ig,Me.chunk=function gw(d,p,_){p=(_?es(d,p,_):p===A)?1:zr(Vn(p),0);var V=null==d?0:d.length;if(!V||p<1)return[];for(var me=0,Pe=0,Xe=xt(Xt(V/p));me<V;)Xe[Pe++]=Hs(d,me,me+=p);return Xe},Me.compact=function mw(d){for(var p=-1,_=null==d?0:d.length,V=0,me=[];++p<_;){var Pe=d[p];Pe&&(me[V++]=Pe)}return me},Me.concat=function qC(){var d=arguments.length;if(!d)return[];for(var p=xt(d-1),_=arguments[0],V=d;V--;)p[V-1]=arguments[V];return tl(Ln(_)?wo(_):[_],Tr(p,1))},Me.cond=function gx(d){var p=null==d?0:d.length,_=vn();return d=p?fr(d,function(V){if("function"!=typeof V[1])throw new Yt(x);return[_(V[0]),V[1]]}):[],Gn(function(V){for(var me=-1;++me<p;){var Pe=d[me];if(Ks(Pe[0],this,V))return Ks(Pe[1],this,V)}})},Me.conforms=function mx(d){return function Dh(d){var p=Os(d);return function(_){return x_(_,d,p)}}(Wr(d,1))},Me.constant=by,Me.countBy=zs,Me.create=function BM(d,p){var _=Ds(d);return null==p?_:w_(_,p)},Me.curry=function Yw(d,p,_){var V=ua(d,8,A,A,A,A,A,p=_?A:p);return V.placeholder=Yw.placeholder,V},Me.curryRight=function Q_(d,p,_){var V=ua(d,16,A,A,A,A,A,p=_?A:p);return V.placeholder=Q_.placeholder,V},Me.debounce=og,Me.defaults=kM,Me.defaultsDeep=jM,Me.defer=wM,Me.delay=ul,Me.difference=Zp,Me.differenceBy=pu,Me.differenceWith=XC,Me.drop=function _w(d,p,_){var V=null==d?0:d.length;return V?Hs(d,(p=_||p===A?1:Vn(p))<0?0:p,V):[]},Me.dropRight=function yw(d,p,_){var V=null==d?0:d.length;return V?Hs(d,0,(p=V-(p=_||p===A?1:Vn(p)))<0?0:p):[]},Me.dropRightWhile=function pd(d,p){return d&&d.length?Bh(d,vn(p,3),!0,!0):[]},Me.dropWhile=function gd(d,p){return d&&d.length?Bh(d,vn(p,3),!0):[]},Me.fill=function ts(d,p,_,V){var me=null==d?0:d.length;return me?(_&&"number"!=typeof _&&es(d,p,_)&&(_=0,V=me),function Ka(d,p,_,V){var me=d.length;for((_=Vn(_))<0&&(_=-_>me?0:me+_),(V=V===A||V>me?me:Vn(V))<0&&(V+=me),V=_>V?0:hl(V);_<V;)d[_++]=p;return d}(d,p,_,V)):[]},Me.filter=function Bw(d,p){return(Ln(d)?xn:Rh)(d,vn(p,3))},Me.flatMap=function jw(d,p){return Tr(ef(d,p),1)},Me.flatMapDeep=function dM(d,p){return Tr(ef(d,p),xe)},Me.flatMapDepth=function Uw(d,p,_){return _=_===A?1:Vn(_),Tr(ef(d,p),_)},Me.flatten=Qp,Me.flattenDeep=function YC(d){return null!=d&&d.length?Tr(d,xe):[]},Me.flattenDepth=function bw(d,p){return null!=d&&d.length?Tr(d,p=p===A?1:Vn(p)):[]},Me.flip=function ag(d){return ua(d,512)},Me.flow=_x,Me.flowRight=xd,Me.fromPairs=function gu(d){for(var p=-1,_=null==d?0:d.length,V={};++p<_;){var me=d[p];V[me[0]]=me[1]}return V},Me.functions=function mg(d){return null==d?[]:hd(d,Os(d))},Me.functionsIn=function Oc(d){return null==d?[]:hd(d,$s(d))},Me.groupBy=hM,Me.initial=function $_(d){return null!=d&&d.length?Hs(d,0,-1):[]},Me.intersection=eg,Me.intersectionBy=Ew,Me.intersectionWith=KC,Me.invert=nx,Me.invertBy=rB,Me.invokeMap=pM,Me.iteratee=oc,Me.keyBy=gM,Me.keys=Os,Me.keysIn=$s,Me.map=ef,Me.mapKeys=function hy(d,p){var _={};return p=vn(p,3),ir(d,function(V,me,Pe){wi(_,p(V,me,Pe),V)}),_},Me.mapValues=function oB(d,p){var _={};return p=vn(p,3),ir(d,function(V,me,Pe){wi(_,me,p(V,me,Pe))}),_},Me.matches=function yx(d){return TC(Wr(d,1))},Me.matchesProperty=function _B(d,p){return IC(d,Wr(p,1))},Me.memoize=cg,Me.merge=aB,Me.mergeWith=fy,Me.method=lT,Me.methodOf=yB,Me.mixin=vx,Me.negate=nf,Me.nthArg=function vB(d){return d=Vn(d),Gn(function(p){return Lr(p,d)})},Me.omit=WM,Me.omitBy=function $M(d,p){return ix(d,nf(vn(p)))},Me.once=function nc(d){return Xw(2,d)},Me.orderBy=function Hw(d,p,_,V){return null==d?[]:(Ln(p)||(p=null==p?[]:[p]),Ln(_=V?A:_)||(_=null==_?[]:[_]),S_(d,p,_))},Me.over=fl,Me.overArgs=QL,Me.overEvery=wy,Me.overSome=xy,Me.partial=ic,Me.partialRight=lg,Me.partition=Gw,Me.pick=qM,Me.pickBy=ix,Me.property=wx,Me.propertyOf=function Ed(d){return function(p){return null==d?A:Wo(d,p)}},Me.pull=Sw,Me.pullAll=Cw,Me.pullAllBy=function QC(d,p,_){return d&&d.length&&p&&p.length?Bp(d,p,vn(_,2)):d},Me.pullAllWith=function zL(d,p,_){return d&&d.length&&p&&p.length?Bp(d,p,A,_):d},Me.pullAt=Mw,Me.range=Ey,Me.rangeRight=xx,Me.rearg=xM,Me.reject=function Ww(d,p){return(Ln(d)?xn:Rh)(d,nf(vn(p,3)))},Me.remove=function Tw(d,p){var _=[];if(!d||!d.length)return _;var V=-1,me=[],Pe=d.length;for(p=vn(p,3);++V<Pe;){var Xe=d[V];p(Xe,V,d)&&(_.push(Xe),me.push(V))}return Zb(d,me),_},Me.rest=function EM(d,p){if("function"!=typeof d)throw new Yt(x);return Gn(d,p=p===A?p:Vn(p))},Me.reverse=Gi,Me.sampleSize=function qw(d,p,_){return p=(_?es(d,p,_):p===A)?1:Vn(p),(Ln(d)?ud:ew)(d,p)},Me.set=function rx(d,p,_){return null==d?d:Lh(d,p,_)},Me.setWith=function sx(d,p,_,V){return V="function"==typeof V?V:A,null==d?d:Lh(d,p,_,V)},Me.shuffle=function mM(d){return(Ln(d)?qi:C_)(d)},Me.slice=function WL(d,p,_){var V=null==d?0:d.length;return V?(_&&"number"!=typeof _&&es(d,p,_)?(p=0,_=V):(p=null==p?0:Vn(p),_=_===A?V:Vn(_)),Hs(d,p,_)):[]},Me.sortBy=vM,Me.sortedUniq=function eM(d){return d&&d.length?cu(d):[]},Me.sortedUniqBy=function tM(d,p){return d&&d.length?cu(d,vn(p,2)):[]},Me.split=function sT(d,p,_){return _&&"number"!=typeof _&&es(d,p,_)&&(p=_=A),(_=_===A?pe:_>>>0)?(d=Di(d))&&("string"==typeof p||null!=p&&!pg(p))&&!(p=$o(p))&&nd(d)?bo(po(d),0,_):d.split(p,_):[]},Me.spread=function eB(d,p){if("function"!=typeof d)throw new Yt(x);return p=null==p?0:zr(Vn(p),0),Gn(function(_){var V=_[p],me=bo(_,0,p);return V&&tl(me,V),Ks(d,this,me)})},Me.tail=function Rw(d){var p=null==d?0:d.length;return p?Hs(d,1,p):[]},Me.take=function qL(d,p,_){return d&&d.length?Hs(d,0,(p=_||p===A?1:Vn(p))<0?0:p):[]},Me.takeRight=function XL(d,p,_){var V=null==d?0:d.length;return V?Hs(d,(p=V-(p=_||p===A?1:Vn(p)))<0?0:p,V):[]},Me.takeRightWhile=function YL(d,p){return d&&d.length?Bh(d,vn(p,3),!1,!0):[]},Me.takeWhile=function KL(d,p){return d&&d.length?Bh(d,vn(p,3)):[]},Me.tap=function oM(d,p){return p(d),d},Me.throttle=function tB(d,p,_){var V=!0,me=!0;if("function"!=typeof d)throw new Yt(x);return Ir(_)&&(V="leading"in _?!!_.leading:V,me="trailing"in _?!!_.trailing:me),og(d,p,{leading:V,maxWait:p,trailing:me})},Me.thru=rg,Me.toArray=dy,Me.toPairs=ox,Me.toPairsIn=ax,Me.toPath=function fT(d){return Ln(d)?fr(d,da):eo(d)?[d]:wo(Yh(Di(d)))},Me.toPlainObject=Qw,Me.transform=function cx(d,p,_){var V=Ln(d),me=V||Rc(d)||La(d);if(p=vn(p,4),null==_){var Pe=d&&d.constructor;_=me?V?new Pe:[]:Ir(d)&&rc(Pe)?Ds(Ap(d)):{}}return(me?Gr:ir)(d,function(Xe,at,gt){return p(_,Xe,at,gt)}),_},Me.unary=function ug(d){return J_(d,1)},Me.union=JL,Me.unionBy=nM,Me.unionWith=_d,Me.uniq=function ui(d){return d&&d.length?Ja(d):[]},Me.uniqBy=function Ow(d,p){return d&&d.length?Ja(d,vn(p,2)):[]},Me.uniqWith=function iM(d,p){return p="function"==typeof p?p:A,d&&d.length?Ja(d,A,p):[]},Me.unset=function yg(d,p){return null==d||M_(d,p)},Me.unzip=Kh,Me.unzipWith=_n,Me.update=function lx(d,p,_){return null==d?d:Na(d,p,lu(_))},Me.updateWith=function py(d,p,_,V){return V="function"==typeof V?V:A,null==d?d:Na(d,p,lu(_),V)},Me.values=wd,Me.valuesIn=function Ns(d){return null==d?[]:lt(d,$s(d))},Me.without=rM,Me.words=lf,Me.wrap=function AM(d,p){return ic(lu(p),d)},Me.xor=Jh,Me.xorBy=Zh,Me.xorWith=sM,Me.zip=Nw,Me.zipObject=function Pw(d,p){return Up(d||[],p||[],Zs)},Me.zipObjectDeep=function tg(d,p){return Up(d||[],p||[],Lh)},Me.zipWith=ng,Me.entries=ox,Me.entriesIn=ax,Me.extend=Mo,Me.extendWith=Xo,vx(Me,Me),Me.add=Ax,Me.attempt=uf,Me.camelCase=ux,Me.capitalize=dx,Me.ceil=hf,Me.clamp=function YM(d,p,_){return _===A&&(_=p,p=A),_!==A&&(_=(_=fa(_))==_?_:0),p!==A&&(p=(p=fa(p))==p?p:0),aa(fa(d),p,_)},Me.clone=function ty(d){return Wr(d,4)},Me.cloneDeep=function ny(d){return Wr(d,5)},Me.cloneDeepWith=function iy(d,p){return Wr(d,5,p="function"==typeof p?p:A)},Me.cloneWith=function yd(d,p){return Wr(d,4,p="function"==typeof p?p:A)},Me.conformsTo=function rf(d,p){return null==p||x_(d,p,Os(p))},Me.deburr=hx,Me.defaultTo=function cT(d,p){return null==d||d!=d?p:d},Me.divide=bg,Me.endsWith=function JM(d,p,_){d=Di(d),p=$o(p);var V=d.length,me=_=_===A?V:aa(Vn(_),0,V);return(_-=p.length)>=0&&d.slice(_,me)==p},Me.eq=Co,Me.escape=function ZM(d){return(d=Di(d))&&ji.test(d)?d.replace(ai,nC):d},Me.escapeRegExp=function fx(d){return(d=Di(d))&&qe.test(d)?d.replace(He,"\\$&"):d},Me.every=function Qh(d,p,_){var V=Ln(d)?u_:E_;return _&&es(d,p,_)&&(p=A),V(d,vn(p,3))},Me.find=kw,Me.findIndex=vw,Me.findKey=function UM(d,p){return Js(d,vn(p,3),ir)},Me.findLast=uM,Me.findLastIndex=Xi,Me.findLastKey=function ex(d,p){return Js(d,vn(p,3),gs)},Me.floor=Ay,Me.forEach=Vw,Me.forEachRight=K_,Me.forIn=function VM(d,p){return null==d?d:xr(d,vn(p,3),$s)},Me.forInRight=function HM(d,p){return null==d?d:Np(d,vn(p,3),$s)},Me.forOwn=function GM(d,p){return d&&ir(d,vn(p,3))},Me.forOwnRight=function zM(d,p){return d&&gs(d,vn(p,3))},Me.get=_u,Me.gt=vd,Me.gte=ry,Me.has=function tx(d,p){return null!=d&&Gh(d,p,wC)},Me.hasIn=_g,Me.head=ww,Me.identity=Yi,Me.includes=function fM(d,p,_,V){d=Ws(d)?d:wd(d),_=_&&!V?Vn(_):0;var me=d.length;return _<0&&(_=zr(me+_,0)),mu(d)?_<=me&&d.indexOf(p,_)>-1:!!me&&xh(d,p,_)>-1},Me.indexOf=function xw(d,p,_){var V=null==d?0:d.length;if(!V)return-1;var me=null==_?0:Vn(_);return me<0&&(me=zr(V+me,0)),xh(d,p,me)},Me.inRange=function KM(d,p,_){return p=sc(p),_===A?(_=p,p=0):_=sc(_),function A_(d,p,_){return d>=Is(p,_)&&d<zr(p,_)}(d=fa(d),p,_)},Me.invoke=sB,Me.isArguments=Dc,Me.isArray=Ln,Me.isArrayBuffer=nB,Me.isArrayLike=Ws,Me.isArrayLikeObject=or,Me.isBoolean=function SM(d){return!0===d||!1===d||Br(d)&&rr(d)==Ae},Me.isBuffer=Rc,Me.isDate=CM,Me.isElement=function MM(d){return Br(d)&&1===d.nodeType&&!dl(d)},Me.isEmpty=function sy(d){if(null==d)return!0;if(Ws(d)&&(Ln(d)||"string"==typeof d||"function"==typeof d.splice||Rc(d)||La(d)||Dc(d)))return!d.length;var p=sr(d);if(p==Le||p==Ve)return!d.size;if(Xp(d))return!Lp(d).length;for(var _ in d)if(Ti.call(d,_))return!1;return!0},Me.isEqual=function Kw(d,p){return Fp(d,p)},Me.isEqualWith=function TM(d,p,_){var V=(_="function"==typeof _?_:A)?_(d,p):A;return V===A?Fp(d,p,A,_):!!V},Me.isError=oy,Me.isFinite=function sf(d){return"number"==typeof d&&ps(d)},Me.isFunction=rc,Me.isInteger=dg,Me.isLength=hg,Me.isMap=bd,Me.isMatch=function IM(d,p){return d===p||$b(d,p,j_(p))},Me.isMatchWith=function fg(d,p,_){return _="function"==typeof _?_:A,$b(d,p,j_(p),_)},Me.isNaN=function ay(d){return af(d)&&d!=+d},Me.isNative=function DM(d){if(GC(d))throw new Mn("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return SC(d)},Me.isNil=function cy(d){return null==d},Me.isNull=function Jw(d){return null===d},Me.isNumber=af,Me.isObject=Ir,Me.isObjectLike=Br,Me.isPlainObject=dl,Me.isRegExp=pg,Me.isSafeInteger=function Zw(d){return dg(d)&&d>=-Be&&d<=Be},Me.isSet=ly,Me.isString=mu,Me.isSymbol=eo,Me.isTypedArray=La,Me.isUndefined=function RM(d){return d===A},Me.isWeakMap=function OM(d){return Br(d)&&sr(d)==Et},Me.isWeakSet=function iB(d){return Br(d)&&"[object WeakSet]"==rr(d)},Me.join=function JC(d,p){return null==d?"":rl.call(d,p)},Me.kebabCase=cB,Me.last=ha,Me.lastIndexOf=function Aw(d,p,_){var V=null==d?0:d.length;if(!V)return-1;var me=V;return _!==A&&(me=(me=Vn(_))<0?zr(V+me,0):Is(me,V-1)),p==p?function Ob(ft,Dt,xt){for(var zt=xt+1;zt--;)if(ft[zt]===Dt)return zt;return zt}(d,p,me):wh(d,Qu,me,!0)},Me.lowerCase=lB,Me.lowerFirst=cf,Me.lt=gg,Me.lte=uy,Me.max=function gT(d){return d&&d.length?cl(d,Yi,Nh):A},Me.maxBy=function mT(d,p){return d&&d.length?cl(d,vn(p,2),Nh):A},Me.mean=function Sy(d){return _p(d,Yi)},Me.meanBy=function Sx(d,p){return _p(d,vn(p,2))},Me.min=function yu(d){return d&&d.length?cl(d,Yi,Xb):A},Me.minBy=function Cx(d,p){return d&&d.length?cl(d,vn(p,2),Xb):A},Me.stubArray=df,Me.stubFalse=Ad,Me.stubObject=function uT(){return{}},Me.stubString=function dT(){return""},Me.stubTrue=function Ex(){return!0},Me.multiply=Mx,Me.nth=function ZC(d,p){return d&&d.length?Lr(d,Vn(p)):A},Me.noConflict=function bx(){return Yr._===this&&(Yr._=aC),this},Me.noop=vg,Me.now=tf,Me.pad=function QM(d,p,_){d=Di(d);var V=(p=Vn(p))?Ec(d):0;if(!p||V>=p)return d;var me=(p-V)/2;return la(Kr(me),_)+d+la(Xt(me),_)},Me.padEnd=function eT(d,p,_){d=Di(d);var V=(p=Vn(p))?Ec(d):0;return p&&V<p?d+la(p-V,_):d},Me.padStart=function tT(d,p,_){d=Di(d);var V=(p=Vn(p))?Ec(d):0;return p&&V<p?la(p-V,_)+d:d},Me.parseInt=function px(d,p,_){return _||null==p?p=0:p&&(p=+p),lC(Di(d).replace(Nt,""),p||0)},Me.random=function gy(d,p,_){if(_&&"boolean"!=typeof _&&es(d,p,_)&&(p=_=A),_===A&&("boolean"==typeof p?(_=p,p=A):"boolean"==typeof d&&(_=d,d=A)),d===A&&p===A?(d=0,p=1):(d=sc(d),p===A?(p=d,d=0):p=sc(p)),d>p){var V=d;d=p,p=V}if(_||d%1||p%1){var me=Ub();return Is(d+me*(p-d+Ab("1e-"+((me+"").length-1))),p)}return Fh(d,p)},Me.reduce=function sg(d,p,_){var V=Ln(d)?Tb:Db,me=arguments.length<3;return V(d,vn(p,4),_,me,yo)},Me.reduceRight=function zw(d,p,_){var V=Ln(d)?QS:Db,me=arguments.length<3;return V(d,vn(p,4),_,me,Fn)},Me.repeat=function nT(d,p,_){return p=(_?es(d,p,_):p===A)?1:Vn(p),ca(Di(d),p)},Me.replace=function iT(){var d=arguments,p=Di(d[0]);return d.length<3?p:p.replace(d[1],d[2])},Me.result=function XM(d,p,_){var V=-1,me=(p=Pa(p,d)).length;for(me||(me=1,d=A);++V<me;){var Pe=null==d?A:d[da(p[V])];Pe===A&&(V=me,Pe=_),d=rc(Pe)?Pe.call(d):Pe}return d},Me.round=_T,Me.runInContext=ft,Me.sample=function $w(d){return(Ln(d)?_o:Qb)(d)},Me.size=function _M(d){if(null==d)return 0;if(Ws(d))return mu(d)?Ec(d):d.length;var p=sr(d);return p==Le||p==Ve?d.size:Lp(d).length},Me.snakeCase=rT,Me.some=function yM(d,p,_){var V=Ln(d)?bh:Qs;return _&&es(d,p,_)&&(p=A),V(d,vn(p,3))},Me.sortedIndex=function Iw(d,p){return kp(d,p)},Me.sortedIndexBy=function $L(d,p,_){return au(d,p,vn(_,2))},Me.sortedIndexOf=function q_(d,p){var _=null==d?0:d.length;if(_){var V=kp(d,p);if(V<_&&Co(d[V],p))return V}return-1},Me.sortedLastIndex=function Ao(d,p){return kp(d,p,!0)},Me.sortedLastIndexBy=function Dw(d,p,_){return au(d,p,vn(_,2),!0)},Me.sortedLastIndexOf=function md(d,p){if(null!=d&&d.length){var V=kp(d,p,!0)-1;if(Co(d[V],p))return V}return-1},Me.startCase=oT,Me.startsWith=function aT(d,p,_){return d=Di(d),_=null==_?0:aa(Vn(_),0,d.length),p=$o(p),d.slice(_,_+p.length)==p},Me.subtract=bB,Me.sum=function wg(d){return d&&d.length?yp(d,Yi):0},Me.sumBy=function yT(d,p){return d&&d.length?yp(d,vn(p,2)):0},Me.template=function my(d,p,_){var V=Me.templateSettings;_&&es(d,p,_)&&(p=A),d=Di(d),p=Xo({},p,V,ow);var at,gt,me=Xo({},p.imports,V.imports,ow),Pe=Os(me),Xe=lt(me,Pe),Rt=0,Ft=p.interpolate||$e,Vt="__p += '",Kt=od((p.escape||$e).source+"|"+Ft.source+"|"+(Ft===ia?ye:$e).source+"|"+(p.evaluate||$e).source+"|$","g"),ln="//# sourceURL="+(Ti.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++hp+"]")+"\n";d.replace(Kt,function(Tn,Zn,si,To,hn,bn){return si||(si=To),Vt+=d.slice(Rt,bn).replace(Mt,iC),Zn&&(at=!0,Vt+="' +\n__e("+Zn+") +\n'"),hn&&(gt=!0,Vt+="';\n"+hn+";\n__p += '"),si&&(Vt+="' +\n((__t = ("+si+")) == null ? '' : __t) +\n'"),Rt=bn+Tn.length,Tn}),Vt+="';\n";var Sn=Ti.call(p,"variable")&&p.variable;if(Sn){if(qt.test(Sn))throw new Mn("Invalid `variable` option passed into `_.template`")}else Vt="with (obj) {\n"+Vt+"\n}\n";Vt=(gt?Vt.replace(rn,""):Vt).replace(Fi,"$1").replace(Or,"$1;"),Vt="function("+(Sn||"obj")+") {\n"+(Sn?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(at?", __e = _.escape":"")+(gt?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Vt+"return __p\n}";var zn=uf(function(){return li(Pe,ln+"return "+Vt).apply(A,Xe)});if(zn.source=Vt,oy(zn))throw zn;return zn},Me.times=function hT(d,p){if((d=Vn(d))<1||d>Be)return[];var _=pe,V=Is(d,pe);p=vn(p),d-=pe;for(var me=nl(V,p);++_<d;)p(_);return me},Me.toFinite=sc,Me.toInteger=Vn,Me.toLength=hl,Me.toLower=function uB(d){return Di(d).toLowerCase()},Me.toNumber=fa,Me.toSafeInteger=function NM(d){return d?aa(Vn(d),-Be,Be):0===d?d:0},Me.toString=Di,Me.toUpper=function dB(d){return Di(d).toUpperCase()},Me.trim=function _y(d,p,_){if((d=Di(d))&&(_||p===A))return xc(d);if(!d||!(p=$o(p)))return d;var V=po(d),me=po(p);return bo(V,Ut(V,me),Eh(V,me)+1).join("")},Me.trimEnd=function hB(d,p,_){if((d=Di(d))&&(_||p===A))return d.slice(0,bp(d)+1);if(!d||!(p=$o(p)))return d;var V=po(d);return bo(V,0,Eh(V,po(p))+1).join("")},Me.trimStart=function fB(d,p,_){if((d=Di(d))&&(_||p===A))return d.replace(Nt,"");if(!d||!(p=$o(p)))return d;var V=po(d);return bo(V,Ut(V,po(p))).join("")},Me.truncate=function pB(d,p){var _=30,V="...";if(Ir(p)){var me="separator"in p?p.separator:me;_="length"in p?Vn(p.length):_,V="omission"in p?$o(p.omission):V}var Pe=(d=Di(d)).length;if(nd(d)){var Xe=po(d);Pe=Xe.length}if(_>=Pe)return d;var at=_-Ec(V);if(at<1)return V;var gt=Xe?bo(Xe,0,at).join(""):d.slice(0,at);if(me===A)return gt+V;if(Xe&&(at+=gt.length-at),pg(me)){if(d.slice(at).search(me)){var Rt,Ft=gt;for(me.global||(me=od(me.source,Di(de.exec(me))+"g")),me.lastIndex=0;Rt=me.exec(Ft);)var Vt=Rt.index;gt=gt.slice(0,Vt===A?at:Vt)}}else if(d.indexOf($o(me),at)!=at){var Kt=gt.lastIndexOf(me);Kt>-1&&(gt=gt.slice(0,Kt))}return gt+V},Me.unescape=function gB(d){return(d=Di(d))&&vi.test(d)?d.replace(fi,FL):d},Me.uniqueId=function pT(d){var p=++Pb;return Di(d)+p},Me.upperCase=mB,Me.upperFirst=yy,Me.each=Vw,Me.eachRight=K_,Me.first=ww,vx(Me,function(){var d={};return ir(Me,function(p,_){Ti.call(Me.prototype,_)||(d[_]=p)}),d}(),{chain:!1}),Me.VERSION="4.17.21",Gr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){Me[d].placeholder=Me}),Gr(["drop","take"],function(d,p){ri.prototype[d]=function(_){_=_===A?1:zr(Vn(_),0);var V=this.__filtered__&&!p?new ri(this):this.clone();return V.__filtered__?V.__takeCount__=Is(_,V.__takeCount__):V.__views__.push({size:Is(_,pe),type:d+(V.__dir__<0?"Right":"")}),V},ri.prototype[d+"Right"]=function(_){return this.reverse()[d](_).reverse()}}),Gr(["filter","map","takeWhile"],function(d,p){var _=p+1,V=1==_||3==_;ri.prototype[d]=function(me){var Pe=this.clone();return Pe.__iteratees__.push({iteratee:vn(me,3),type:_}),Pe.__filtered__=Pe.__filtered__||V,Pe}}),Gr(["head","last"],function(d,p){var _="take"+(p?"Right":"");ri.prototype[d]=function(){return this[_](1).value()[0]}}),Gr(["initial","tail"],function(d,p){var _="drop"+(p?"":"Right");ri.prototype[d]=function(){return this.__filtered__?new ri(this):this[_](1)}}),ri.prototype.compact=function(){return this.filter(Yi)},ri.prototype.find=function(d){return this.filter(d).head()},ri.prototype.findLast=function(d){return this.reverse().find(d)},ri.prototype.invokeMap=Gn(function(d,p){return"function"==typeof d?new ri(this):this.map(function(_){return ou(_,d,p)})}),ri.prototype.reject=function(d){return this.filter(nf(vn(d)))},ri.prototype.slice=function(d,p){d=Vn(d);var _=this;return _.__filtered__&&(d>0||p<0)?new ri(_):(d<0?_=_.takeRight(-d):d&&(_=_.drop(d)),p!==A&&(_=(p=Vn(p))<0?_.dropRight(-p):_.take(p-d)),_)},ri.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},ri.prototype.toArray=function(){return this.take(pe)},ir(ri.prototype,function(d,p){var _=/^(?:filter|find|map|reject)|While$/.test(p),V=/^(?:head|last)$/.test(p),me=Me[V?"take"+("last"==p?"Right":""):p],Pe=V||/^find/.test(p);me&&(Me.prototype[p]=function(){var Xe=this.__wrapped__,at=V?[1]:arguments,gt=Xe instanceof ri,Rt=at[0],Ft=gt||Ln(Xe),Vt=function(Zn){var si=me.apply(Me,tl([Zn],at));return V&&Kt?si[0]:si};Ft&&_&&"function"==typeof Rt&&1!=Rt.length&&(gt=Ft=!1);var Kt=this.__chain__,Sn=Pe&&!Kt,zn=gt&&!this.__actions__.length;if(!Pe&&Ft){Xe=zn?Xe:new ri(this);var Tn=d.apply(Xe,at);return Tn.__actions__.push({func:rg,args:[Vt],thisArg:A}),new go(Tn,Kt)}return Sn&&zn?d.apply(this,at):(Tn=this.thru(Vt),Sn?V?Tn.value()[0]:Tn.value():Tn)})}),Gr(["pop","push","shift","sort","splice","unshift"],function(d){var p=wp[d],_=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",V=/^(?:pop|shift)$/.test(d);Me.prototype[d]=function(){var me=arguments;if(V&&!this.__chain__){var Pe=this.value();return p.apply(Ln(Pe)?Pe:[],me)}return this[_](function(Xe){return p.apply(Ln(Xe)?Xe:[],me)})}}),ir(ri.prototype,function(d,p){var _=Me[p];if(_){var V=_.name+"";Ti.call(sl,V)||(sl[V]=[]),sl[V].push({name:p,func:_})}}),sl[_s(A,2).name]=[{name:"wrapper",func:A}],ri.prototype.clone=function dC(){var d=new ri(this.__wrapped__);return d.__actions__=wo(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=wo(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=wo(this.__views__),d},ri.prototype.reverse=function Gb(){if(this.__filtered__){var d=new ri(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},ri.prototype.value=function cd(){var d=this.__wrapped__.value(),p=this.__dir__,_=Ln(d),V=p<0,me=_?d.length:0,Pe=function UC(d,p,_){for(var V=-1,me=_.length;++V<me;){var Pe=_[V],Xe=Pe.size;switch(Pe.type){case"drop":d+=Xe;break;case"dropRight":p-=Xe;break;case"take":p=Is(p,d+Xe);break;case"takeRight":d=zr(d,p-Xe)}}return{start:d,end:p}}(0,me,this.__views__),Xe=Pe.start,at=Pe.end,gt=at-Xe,Rt=V?at:Xe-1,Ft=this.__iteratees__,Vt=Ft.length,Kt=0,ln=Is(gt,this.__takeCount__);if(!_||!V&&me==gt&&ln==gt)return tw(d,this.__actions__);var Sn=[];e:for(;gt--&&Kt<ln;){for(var zn=-1,Tn=d[Rt+=p];++zn<Vt;){var Zn=Ft[zn],To=Zn.type,hn=(0,Zn.iteratee)(Tn);if(2==To)Tn=hn;else if(!hn){if(1==To)continue e;break e}}Sn[Kt++]=Tn}return Sn},Me.prototype.at=aM,Me.prototype.chain=function Fw(){return ig(this)},Me.prototype.commit=function cM(){return new go(this.value(),this.__chain__)},Me.prototype.next=function lM(){this.__values__===A&&(this.__values__=dy(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?A:this.__values__[this.__index__++]}},Me.prototype.plant=function X_(d){for(var p,_=this;_ instanceof Mc;){var V=W_(_);V.__index__=0,V.__values__=A,p?me.__wrapped__=V:p=V;var me=V;_=_.__wrapped__}return me.__wrapped__=d,p},Me.prototype.reverse=function Lw(){var d=this.__wrapped__;if(d instanceof ri){var p=d;return this.__actions__.length&&(p=new ri(this)),(p=p.reverse()).__actions__.push({func:rg,args:[Gi],thisArg:A}),new go(p,this.__chain__)}return this.thru(Gi)},Me.prototype.toJSON=Me.prototype.valueOf=Me.prototype.value=function Y_(){return tw(this.__wrapped__,this.__actions__)},Me.prototype.first=Me.prototype.head,Ch&&(Me.prototype[Ch]=function So(){return this}),Me}();Yr._=Ac,(ee=function(){return Ac}.call(ne,M,ne,Ge))!==A&&(Ge.exports=ee)}.call(this)},2963:(Ge,ne,M)=>{var ee=M(5383),A=M(4915);function $(){this.clear()}$.prototype.clear=function(){this.items=[],this.offset=0,this.size=0},$.prototype.enqueue=function(j){return this.items.push(j),++this.size},$.prototype.dequeue=function(){if(this.size){var j=this.items[this.offset];return 2*++this.offset>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,j}},$.prototype.peek=function(){if(this.size)return this.items[this.offset]},$.prototype.forEach=function(j,W){W=arguments.length>1?W:this;for(var x=this.offset,E=0,N=this.items.length;x<N;x++,E++)j.call(W,this.items[x],E,this)},$.prototype.toArray=function(){return this.items.slice(this.offset)},$.prototype.values=function(){var j=this.items,W=this.offset;return new ee(function(){if(W>=j.length)return{done:!0};var x=j[W];return W++,{value:x,done:!1}})},$.prototype.entries=function(){var j=this.items,W=this.offset,x=0;return new ee(function(){if(W>=j.length)return{done:!0};var E=j[W];return W++,{value:[x++,E],done:!1}})},typeof Symbol<"u"&&($.prototype[Symbol.iterator]=$.prototype.values),$.prototype.toString=function(){return this.toArray().join(",")},$.prototype.toJSON=function(){return this.toArray()},$.prototype.inspect=function(){var j=this.toArray();return Object.defineProperty(j,"constructor",{value:$,enumerable:!1}),j},typeof Symbol<"u"&&($.prototype[Symbol.for("nodejs.util.inspect.custom")]=$.prototype.inspect),$.from=function(j){var W=new $;return A(j,function(x){W.enqueue(x)}),W},$.of=function(){return $.from(arguments)},Ge.exports=$},7783:Ge=>{Ge.exports=function ne(M,ee,A){function $(x,E){if(!ee[x]){if(!M[x]){if(j)return j(x,!0);throw new Error("Cannot find module '"+x+"'")}E=ee[x]={exports:{}},M[x][0].call(E.exports,function(te){return $(M[x][1][te]||te)},E,E.exports,ne,M,ee,A)}return ee[x].exports}for(var j=void 0,W=0;W<A.length;W++)$(A[W]);return $}({1:[function(ne,M,ee){(function(A,$,j,W,x,E,N,te,F){"use strict";var C=ne("crypto");function oe(U,G){var w;return void 0===(w="passthrough"!==(G=ce(U,G)).algorithm?C.createHash(G.algorithm):new J).write&&(w.write=w.update,w.end=w.update),K(G,w).dispatch(U),w.update||w.end(""),w.digest?w.digest("buffer"===G.encoding?void 0:G.encoding):(U=w.read(),"buffer"!==G.encoding?U.toString(G.encoding):U)}(ee=M.exports=oe).sha1=function(U){return oe(U)},ee.keys=function(U){return oe(U,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},ee.MD5=function(U){return oe(U,{algorithm:"md5",encoding:"hex"})},ee.keysMD5=function(U){return oe(U,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var S=C.getHashes?C.getHashes().slice():["sha1","md5"],k=(S.push("passthrough"),["buffer","hex","binary","base64"]);function ce(U,G){var w={};if(w.algorithm=(G=G||{}).algorithm||"sha1",w.encoding=G.encoding||"hex",w.excludeValues=!!G.excludeValues,w.algorithm=w.algorithm.toLowerCase(),w.encoding=w.encoding.toLowerCase(),w.ignoreUnknown=!0===G.ignoreUnknown,w.respectType=!1!==G.respectType,w.respectFunctionNames=!1!==G.respectFunctionNames,w.respectFunctionProperties=!1!==G.respectFunctionProperties,w.unorderedArrays=!0===G.unorderedArrays,w.unorderedSets=!1!==G.unorderedSets,w.unorderedObjects=!1!==G.unorderedObjects,w.replacer=G.replacer||void 0,w.excludeKeys=G.excludeKeys||void 0,void 0===U)throw new Error("Object argument required.");for(var I=0;I<S.length;++I)S[I].toLowerCase()===w.algorithm.toLowerCase()&&(w.algorithm=S[I]);if(-1===S.indexOf(w.algorithm))throw new Error('Algorithm "'+w.algorithm+'"  not supported. supported values: '+S.join(", "));if(-1===k.indexOf(w.encoding)&&"passthrough"!==w.algorithm)throw new Error('Encoding "'+w.encoding+'"  not supported. supported values: '+k.join(", "));return w}function X(U){if("function"==typeof U)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(U))}function K(U,G,w){function I(D){return G.update?G.update(D,"utf8"):G.write(D,"utf8")}return w=w||[],{dispatch:function(D){return this["_"+(null===(D=U.replacer?U.replacer(D):D)?"null":typeof D)](D)},_object:function(D){var ue,re=Object.prototype.toString.call(D),Ce=/\[object (.*)\]/i.exec(re);if(Ce=(Ce=Ce?Ce[1]:"unknown:["+re+"]").toLowerCase(),0<=(re=w.indexOf(D)))return this.dispatch("[CIRCULAR:"+re+"]");if(w.push(D),void 0!==j&&j.isBuffer&&j.isBuffer(D))return I("buffer:"),I(D);if("object"===Ce||"function"===Ce||"asyncfunction"===Ce)return re=Object.keys(D),U.unorderedObjects&&(re=re.sort()),!1===U.respectType||X(D)||re.splice(0,0,"prototype","__proto__","constructor"),U.excludeKeys&&(re=re.filter(function(ae){return!U.excludeKeys(ae)})),I("object:"+re.length+":"),ue=this,re.forEach(function(ae){ue.dispatch(ae),I(":"),U.excludeValues||ue.dispatch(D[ae]),I(",")});if(!this["_"+Ce]){if(U.ignoreUnknown)return I("["+Ce+"]");throw new Error('Unknown object type "'+Ce+'"')}this["_"+Ce](D)},_array:function(D,ae){ae=void 0!==ae?ae:!1!==U.unorderedArrays;var re=this;if(I("array:"+D.length+":"),!ae||D.length<=1)return D.forEach(function(we){return re.dispatch(we)});var Ce=[];return ae=D.map(function(we){var Oe=new J,ke=w.slice();return K(U,Oe,ke).dispatch(we),Ce=Ce.concat(ke.slice(w.length)),Oe.read().toString()}),w=w.concat(Ce),ae.sort(),this._array(ae,!1)},_date:function(D){return I("date:"+D.toJSON())},_symbol:function(D){return I("symbol:"+D.toString())},_error:function(D){return I("error:"+D.toString())},_boolean:function(D){return I("bool:"+D.toString())},_string:function(D){I("string:"+D.length+":"),I(D.toString())},_function:function(D){I("fn:"),X(D)?this.dispatch("[native]"):this.dispatch(D.toString()),!1!==U.respectFunctionNames&&this.dispatch("function-name:"+String(D.name)),U.respectFunctionProperties&&this._object(D)},_number:function(D){return I("number:"+D.toString())},_xml:function(D){return I("xml:"+D.toString())},_null:function(){return I("Null")},_undefined:function(){return I("Undefined")},_regexp:function(D){return I("regex:"+D.toString())},_uint8array:function(D){return I("uint8array:"),this.dispatch(Array.prototype.slice.call(D))},_uint8clampedarray:function(D){return I("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(D))},_int8array:function(D){return I("int8array:"),this.dispatch(Array.prototype.slice.call(D))},_uint16array:function(D){return I("uint16array:"),this.dispatch(Array.prototype.slice.call(D))},_int16array:function(D){return I("int16array:"),this.dispatch(Array.prototype.slice.call(D))},_uint32array:function(D){return I("uint32array:"),this.dispatch(Array.prototype.slice.call(D))},_int32array:function(D){return I("int32array:"),this.dispatch(Array.prototype.slice.call(D))},_float32array:function(D){return I("float32array:"),this.dispatch(Array.prototype.slice.call(D))},_float64array:function(D){return I("float64array:"),this.dispatch(Array.prototype.slice.call(D))},_arraybuffer:function(D){return I("arraybuffer:"),this.dispatch(new Uint8Array(D))},_url:function(D){return I("url:"+D.toString())},_map:function(D){return I("map:"),D=Array.from(D),this._array(D,!1!==U.unorderedSets)},_set:function(D){return I("set:"),D=Array.from(D),this._array(D,!1!==U.unorderedSets)},_file:function(D){return I("file:"),this.dispatch([D.name,D.size,D.type,D.lastModfied])},_blob:function(){if(U.ignoreUnknown)return I("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return I("domwindow")},_bigint:function(D){return I("bigint:"+D.toString())},_process:function(){return I("process")},_timer:function(){return I("timer")},_pipe:function(){return I("pipe")},_tcp:function(){return I("tcp")},_udp:function(){return I("udp")},_tty:function(){return I("tty")},_statwatcher:function(){return I("statwatcher")},_securecontext:function(){return I("securecontext")},_connection:function(){return I("connection")},_zlib:function(){return I("zlib")},_context:function(){return I("context")},_nodescript:function(){return I("nodescript")},_httpparser:function(){return I("httpparser")},_dataview:function(){return I("dataview")},_signal:function(){return I("signal")},_fsevent:function(){return I("fsevent")},_tlswrap:function(){return I("tlswrap")}}}function J(){return{buf:"",write:function(U){this.buf+=U},end:function(U){this.buf+=U},read:function(){return this.buf}}}ee.writeToStream=function(U,G,w){return void 0===w&&(w=G,G={}),K(G=ce(U,G),w).dispatch(U)}}).call(this,ne("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ne("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(ne,M,ee){(function(A,$,j,W,x,E,N,te,F){!function(C){"use strict";var oe=typeof Uint8Array<"u"?Uint8Array:Array;function G(w){return 43===(w=w.charCodeAt(0))||45===w?62:47===w||95===w?63:w<48?-1:w<58?w-48+26+26:w<91?w-65:w<123?w-97+26:void 0}C.toByteArray=function(w){var I,D;if(0<w.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var ue="="===w.charAt((ue=w.length)-2)?2:"="===w.charAt(ue-1)?1:0,re=new oe(3*w.length/4-ue),Ce=0<ue?w.length-4:w.length,ae=0;function we(Oe){re[ae++]=Oe}for(I=0;I<Ce;I+=4,0)we((16711680&(D=G(w.charAt(I))<<18|G(w.charAt(I+1))<<12|G(w.charAt(I+2))<<6|G(w.charAt(I+3))))>>16),we((65280&D)>>8),we(255&D);return 2==ue?we(255&(D=G(w.charAt(I))<<2|G(w.charAt(I+1))>>4)):1==ue&&(we((D=G(w.charAt(I))<<10|G(w.charAt(I+1))<<4|G(w.charAt(I+2))>>2)>>8&255),we(255&D)),re},C.fromByteArray=function(w){var I,D,ue,re,Ce=w.length%3,ae="";function we(Oe){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Oe)}for(I=0,ue=w.length-Ce;I<ue;I+=3)ae+=we((re=D=(w[I]<<16)+(w[I+1]<<8)+w[I+2])>>18&63)+we(re>>12&63)+we(re>>6&63)+we(63&re);switch(Ce){case 1:ae=(ae+=we((D=w[w.length-1])>>2))+we(D<<4&63)+"==";break;case 2:ae=(ae=(ae+=we((D=(w[w.length-2]<<8)+w[w.length-1])>>10))+we(D>>4&63))+we(D<<2&63)+"="}return ae}}(void 0===ee?this.base64js={}:ee)}).call(this,ne("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ne("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(ne,M,ee){(function(A,$,S,W,x,E,N,te,F){var C=ne("base64-js"),oe=ne("ieee754");function S(Q,se,Ae){if(!(this instanceof S))return new S(Q,se,Ae);var Fe,Te,Je,ot,ut=typeof Q;if("base64"===se&&"string"==ut)for(Q=(ot=Q).trim?ot.trim():ot.replace(/^\s+|\s+$/g,"");Q.length%4!=0;)Q+="=";if("number"==ut)Fe=Ye(Q);else if("string"==ut)Fe=S.byteLength(Q,se);else{if("object"!=ut)throw new Error("First argument needs to be a number, array or string.");Fe=Ye(Q.length)}if(S._useTypedArrays?Te=S._augment(new Uint8Array(Fe)):((Te=this).length=Fe,Te._isBuffer=!0),S._useTypedArrays&&"number"==typeof Q.byteLength)Te._set(Q);else if(Qe(ot=Q)||S.isBuffer(ot)||ot&&"object"==typeof ot&&"number"==typeof ot.length)for(Je=0;Je<Fe;Je++)Te[Je]=S.isBuffer(Q)?Q.readUInt8(Je):Q[Je];else if("string"==ut)Te.write(Q,0,se);else if("number"==ut&&!S._useTypedArrays&&!Ae)for(Je=0;Je<Fe;Je++)Te[Je]=0;return Te}function K(Q,se,Ae,Je){var Te;if(Je||(je("boolean"==typeof Ae,"missing or invalid endian"),je(null!=se,"missing offset"),je(se+1<Q.length,"Trying to read beyond buffer length")),!((Je=Q.length)<=se))return Ae?(Te=Q[se],se+1<Je&&(Te|=Q[se+1]<<8)):(Te=Q[se]<<8,se+1<Je&&(Te|=Q[se+1])),Te}function J(Q,se,Ae,Je){var Te;if(Je||(je("boolean"==typeof Ae,"missing or invalid endian"),je(null!=se,"missing offset"),je(se+3<Q.length,"Trying to read beyond buffer length")),!((Je=Q.length)<=se))return Ae?(se+2<Je&&(Te=Q[se+2]<<16),se+1<Je&&(Te|=Q[se+1]<<8),Te|=Q[se],se+3<Je&&(Te+=Q[se+3]<<24>>>0)):(se+1<Je&&(Te=Q[se+1]<<16),se+2<Je&&(Te|=Q[se+2]<<8),se+3<Je&&(Te|=Q[se+3]),Te+=Q[se]<<24>>>0),Te}function U(Q,se,Ae,Fe){if(Fe||(je("boolean"==typeof Ae,"missing or invalid endian"),je(null!=se,"missing offset"),je(se+1<Q.length,"Trying to read beyond buffer length")),!(Q.length<=se))return 32768&(Fe=K(Q,se,Ae,!0))?-1*(65535-Fe+1):Fe}function G(Q,se,Ae,Fe){if(Fe||(je("boolean"==typeof Ae,"missing or invalid endian"),je(null!=se,"missing offset"),je(se+3<Q.length,"Trying to read beyond buffer length")),!(Q.length<=se))return 2147483648&(Fe=J(Q,se,Ae,!0))?-1*(4294967295-Fe+1):Fe}function w(Q,se,Ae,Fe){return Fe||(je("boolean"==typeof Ae,"missing or invalid endian"),je(se+3<Q.length,"Trying to read beyond buffer length")),oe.read(Q,se,Ae,23,4)}function I(Q,se,Ae,Fe){return Fe||(je("boolean"==typeof Ae,"missing or invalid endian"),je(se+7<Q.length,"Trying to read beyond buffer length")),oe.read(Q,se,Ae,52,8)}function D(Q,se,Ae,Fe,Te){if(Te||(je(null!=se,"missing value"),je("boolean"==typeof Fe,"missing or invalid endian"),je(null!=Ae,"missing offset"),je(Ae+1<Q.length,"trying to write beyond buffer length"),be(se,65535)),!((Te=Q.length)<=Ae))for(var Je=0,ot=Math.min(Te-Ae,2);Je<ot;Je++)Q[Ae+Je]=(se&255<<8*(Fe?Je:1-Je))>>>8*(Fe?Je:1-Je)}function ue(Q,se,Ae,Fe,Te){if(Te||(je(null!=se,"missing value"),je("boolean"==typeof Fe,"missing or invalid endian"),je(null!=Ae,"missing offset"),je(Ae+3<Q.length,"trying to write beyond buffer length"),be(se,4294967295)),!((Te=Q.length)<=Ae))for(var Je=0,ot=Math.min(Te-Ae,4);Je<ot;Je++)Q[Ae+Je]=se>>>8*(Fe?Je:3-Je)&255}function re(Q,se,Ae,Fe,Te){Te||(je(null!=se,"missing value"),je("boolean"==typeof Fe,"missing or invalid endian"),je(null!=Ae,"missing offset"),je(Ae+1<Q.length,"Trying to write beyond buffer length"),nt(se,32767,-32768)),Q.length<=Ae||D(Q,0<=se?se:65535+se+1,Ae,Fe,Te)}function Ce(Q,se,Ae,Fe,Te){Te||(je(null!=se,"missing value"),je("boolean"==typeof Fe,"missing or invalid endian"),je(null!=Ae,"missing offset"),je(Ae+3<Q.length,"Trying to write beyond buffer length"),nt(se,2147483647,-2147483648)),Q.length<=Ae||ue(Q,0<=se?se:4294967295+se+1,Ae,Fe,Te)}function ae(Q,se,Ae,Fe,Te){Te||(je(null!=se,"missing value"),je("boolean"==typeof Fe,"missing or invalid endian"),je(null!=Ae,"missing offset"),je(Ae+3<Q.length,"Trying to write beyond buffer length"),_t(se,34028234663852886e22,-34028234663852886e22)),Q.length<=Ae||oe.write(Q,se,Ae,Fe,23,4)}function we(Q,se,Ae,Fe,Te){Te||(je(null!=se,"missing value"),je("boolean"==typeof Fe,"missing or invalid endian"),je(null!=Ae,"missing offset"),je(Ae+7<Q.length,"Trying to write beyond buffer length"),_t(se,17976931348623157e292,-17976931348623157e292)),Q.length<=Ae||oe.write(Q,se,Ae,Fe,52,8)}ee.Buffer=S,ee.SlowBuffer=S,ee.INSPECT_MAX_BYTES=50,S.poolSize=8192,S._useTypedArrays=function(){try{var Q=new ArrayBuffer(0),se=new Uint8Array(Q);return se.foo=function(){return 42},42===se.foo()&&"function"==typeof se.subarray}catch{return!1}}(),S.isEncoding=function(Q){switch(String(Q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.isBuffer=function(Q){return!(null==Q||!Q._isBuffer)},S.byteLength=function(Q,se){var Ae;switch(Q+="",se||"utf8"){case"hex":Ae=Q.length/2;break;case"utf8":case"utf-8":Ae=Be(Q).length;break;case"ascii":case"binary":case"raw":Ae=Q.length;break;case"base64":Ae=Ie(Q).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Ae=2*Q.length;break;default:throw new Error("Unknown encoding")}return Ae},S.concat=function(Q,se){if(je(Qe(Q),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===Q.length)return new S(0);if(1===Q.length)return Q[0];if("number"!=typeof se)for(Te=se=0;Te<Q.length;Te++)se+=Q[Te].length;for(var Ae=new S(se),Fe=0,Te=0;Te<Q.length;Te++){var Je=Q[Te];Je.copy(Ae,Fe),Fe+=Je.length}return Ae},S.prototype.write=function(Q,se,Ae,Fe){isFinite(se)?isFinite(Ae)||(Fe=Ae,Ae=void 0):(Le=Fe,Fe=se,se=Ae,Ae=Le),se=Number(se)||0;var Te,Je,ot,ut,Le=this.length-se;switch((!Ae||Le<(Ae=Number(Ae)))&&(Ae=Le),Fe=String(Fe||"utf8").toLowerCase()){case"hex":Te=function(Z,O,P,_e){P=Number(P)||0;var ze=Z.length-P;(!_e||ze<(_e=Number(_e)))&&(_e=ze),je((ze=O.length)%2==0,"Invalid hex string"),ze/2<_e&&(_e=ze/2);for(var ve=0;ve<_e;ve++){var Ve=parseInt(O.substr(2*ve,2),16);je(!isNaN(Ve),"Invalid hex string"),Z[P+ve]=Ve}return S._charsWritten=2*ve,ve}(this,Q,se,Ae);break;case"utf8":case"utf-8":Je=this,ot=se,ut=Ae,Te=S._charsWritten=et(Be(Q),Je,ot,ut);break;case"ascii":case"binary":Te=function k(Q,se,Ae,Fe){return S._charsWritten=et(function(Te){for(var Je=[],ot=0;ot<Te.length;ot++)Je.push(255&Te.charCodeAt(ot));return Je}(se),Q,Ae,Fe)}(this,Q,se,Ae);break;case"base64":Je=this,ot=se,ut=Ae,Te=S._charsWritten=et(Ie(Q),Je,ot,ut);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Te=function ce(Q,se,Ae,Fe){return S._charsWritten=et(function(Te){for(var Je,ot,ut=[],Le=0;Le<Te.length;Le++)Je=(ot=Te.charCodeAt(Le))>>8,ut.push(ot%=256),ut.push(Je);return ut}(se),Q,Ae,Fe)}(this,Q,se,Ae);break;default:throw new Error("Unknown encoding")}return Te},S.prototype.toString=function(Q,se,Ae){var Fe,Te,Je,ot,ut=this;if(Q=String(Q||"utf8").toLowerCase(),se=Number(se)||0,(Ae=void 0!==Ae?Number(Ae):ut.length)===se)return"";switch(Q){case"hex":Fe=function(Le,Z,O){var P=Le.length;(!Z||Z<0)&&(Z=0),(!O||O<0||P<O)&&(O=P);for(var _e="",ze=Z;ze<O;ze++)_e+=xe(Le[ze]);return _e}(ut,se,Ae);break;case"utf8":case"utf-8":Fe=function(Le,Z,O){var P="",_e="";O=Math.min(Le.length,O);for(var ze=Z;ze<O;ze++)Le[ze]<=127?(P+=pe(_e)+String.fromCharCode(Le[ze]),_e=""):_e+="%"+Le[ze].toString(16);return P+pe(_e)}(ut,se,Ae);break;case"ascii":case"binary":Fe=function X(Q,se,Ae){var Fe="";Ae=Math.min(Q.length,Ae);for(var Te=se;Te<Ae;Te++)Fe+=String.fromCharCode(Q[Te]);return Fe}(ut,se,Ae);break;case"base64":Te=ut,ot=Ae,Fe=0===(Je=se)&&ot===Te.length?C.fromByteArray(Te):C.fromByteArray(Te.slice(Je,ot));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":Fe=function(Le,Z,O){for(var P=Le.slice(Z,O),_e="",ze=0;ze<P.length;ze+=2)_e+=String.fromCharCode(P[ze]+256*P[ze+1]);return _e}(ut,se,Ae);break;default:throw new Error("Unknown encoding")}return Fe},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},S.prototype.copy=function(Q,se,Ae,Fe){if(se=se||0,(Fe=Fe||0===Fe?Fe:this.length)!==(Ae=Ae||0)&&0!==Q.length&&0!==this.length){je(Ae<=Fe,"sourceEnd < sourceStart"),je(0<=se&&se<Q.length,"targetStart out of bounds"),je(0<=Ae&&Ae<this.length,"sourceStart out of bounds"),je(0<=Fe&&Fe<=this.length,"sourceEnd out of bounds"),Fe>this.length&&(Fe=this.length);var Te=(Fe=Q.length-se<Fe-Ae?Q.length-se+Ae:Fe)-Ae;if(Te<100||!S._useTypedArrays)for(var Je=0;Je<Te;Je++)Q[Je+se]=this[Je+Ae];else Q._set(this.subarray(Ae,Ae+Te),se)}},S.prototype.slice=function(Q,se){var Ae=this.length;if(Q=ke(Q,Ae,0),se=ke(se,Ae,Ae),S._useTypedArrays)return S._augment(this.subarray(Q,se));for(var Fe=se-Q,Te=new S(Fe,void 0,!0),Je=0;Je<Fe;Je++)Te[Je]=this[Je+Q];return Te},S.prototype.get=function(Q){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(Q)},S.prototype.set=function(Q,se){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(Q,se)},S.prototype.readUInt8=function(Q,se){if(se||(je(null!=Q,"missing offset"),je(Q<this.length,"Trying to read beyond buffer length")),!(Q>=this.length))return this[Q]},S.prototype.readUInt16LE=function(Q,se){return K(this,Q,!0,se)},S.prototype.readUInt16BE=function(Q,se){return K(this,Q,!1,se)},S.prototype.readUInt32LE=function(Q,se){return J(this,Q,!0,se)},S.prototype.readUInt32BE=function(Q,se){return J(this,Q,!1,se)},S.prototype.readInt8=function(Q,se){if(se||(je(null!=Q,"missing offset"),je(Q<this.length,"Trying to read beyond buffer length")),!(Q>=this.length))return 128&this[Q]?-1*(255-this[Q]+1):this[Q]},S.prototype.readInt16LE=function(Q,se){return U(this,Q,!0,se)},S.prototype.readInt16BE=function(Q,se){return U(this,Q,!1,se)},S.prototype.readInt32LE=function(Q,se){return G(this,Q,!0,se)},S.prototype.readInt32BE=function(Q,se){return G(this,Q,!1,se)},S.prototype.readFloatLE=function(Q,se){return w(this,Q,!0,se)},S.prototype.readFloatBE=function(Q,se){return w(this,Q,!1,se)},S.prototype.readDoubleLE=function(Q,se){return I(this,Q,!0,se)},S.prototype.readDoubleBE=function(Q,se){return I(this,Q,!1,se)},S.prototype.writeUInt8=function(Q,se,Ae){Ae||(je(null!=Q,"missing value"),je(null!=se,"missing offset"),je(se<this.length,"trying to write beyond buffer length"),be(Q,255)),se>=this.length||(this[se]=Q)},S.prototype.writeUInt16LE=function(Q,se,Ae){D(this,Q,se,!0,Ae)},S.prototype.writeUInt16BE=function(Q,se,Ae){D(this,Q,se,!1,Ae)},S.prototype.writeUInt32LE=function(Q,se,Ae){ue(this,Q,se,!0,Ae)},S.prototype.writeUInt32BE=function(Q,se,Ae){ue(this,Q,se,!1,Ae)},S.prototype.writeInt8=function(Q,se,Ae){Ae||(je(null!=Q,"missing value"),je(null!=se,"missing offset"),je(se<this.length,"Trying to write beyond buffer length"),nt(Q,127,-128)),se>=this.length||this.writeUInt8(0<=Q?Q:255+Q+1,se,Ae)},S.prototype.writeInt16LE=function(Q,se,Ae){re(this,Q,se,!0,Ae)},S.prototype.writeInt16BE=function(Q,se,Ae){re(this,Q,se,!1,Ae)},S.prototype.writeInt32LE=function(Q,se,Ae){Ce(this,Q,se,!0,Ae)},S.prototype.writeInt32BE=function(Q,se,Ae){Ce(this,Q,se,!1,Ae)},S.prototype.writeFloatLE=function(Q,se,Ae){ae(this,Q,se,!0,Ae)},S.prototype.writeFloatBE=function(Q,se,Ae){ae(this,Q,se,!1,Ae)},S.prototype.writeDoubleLE=function(Q,se,Ae){we(this,Q,se,!0,Ae)},S.prototype.writeDoubleBE=function(Q,se,Ae){we(this,Q,se,!1,Ae)},S.prototype.fill=function(Q,se,Ae){if(se=se||0,Ae=Ae||this.length,je("number"==typeof(Q="string"==typeof(Q=Q||0)?Q.charCodeAt(0):Q)&&!isNaN(Q),"value is not a number"),je(se<=Ae,"end < start"),Ae!==se&&0!==this.length){je(0<=se&&se<this.length,"start out of bounds"),je(0<=Ae&&Ae<=this.length,"end out of bounds");for(var Fe=se;Fe<Ae;Fe++)this[Fe]=Q}},S.prototype.inspect=function(){for(var Q=[],se=this.length,Ae=0;Ae<se;Ae++)if(Q[Ae]=xe(this[Ae]),Ae===ee.INSPECT_MAX_BYTES){Q[Ae+1]="...";break}return"<Buffer "+Q.join(" ")+">"},S.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(S._useTypedArrays)return new S(this).buffer;for(var Q=new Uint8Array(this.length),se=0,Ae=Q.length;se<Ae;se+=1)Q[se]=this[se];return Q.buffer};var Oe=S.prototype;function ke(Q,se,Ae){return"number"!=typeof Q?Ae:se<=(Q=~~Q)?se:0<=Q||0<=(Q+=se)?Q:0}function Ye(Q){return(Q=~~Math.ceil(+Q))<0?0:Q}function Qe(Q){return(Array.isArray||function(se){return"[object Array]"===Object.prototype.toString.call(se)})(Q)}function xe(Q){return Q<16?"0"+Q.toString(16):Q.toString(16)}function Be(Q){for(var se=[],Ae=0;Ae<Q.length;Ae++){var Fe=Q.charCodeAt(Ae);if(Fe<=127)se.push(Q.charCodeAt(Ae));else for(var Te=Ae,Je=(55296<=Fe&&Fe<=57343&&Ae++,encodeURIComponent(Q.slice(Te,Ae+1)).substr(1).split("%")),ot=0;ot<Je.length;ot++)se.push(parseInt(Je[ot],16))}return se}function Ie(Q){return C.toByteArray(Q)}function et(Q,se,Ae,Fe){for(var Te=0;Te<Fe&&!(Te+Ae>=se.length||Te>=Q.length);Te++)se[Te+Ae]=Q[Te];return Te}function pe(Q){try{return decodeURIComponent(Q)}catch{return"\ufffd"}}function be(Q,se){je("number"==typeof Q,"cannot write a non-number as a number"),je(0<=Q,"specified a negative value for writing an unsigned value"),je(Q<=se,"value is larger than maximum value for type"),je(Math.floor(Q)===Q,"value has a fractional component")}function nt(Q,se,Ae){je("number"==typeof Q,"cannot write a non-number as a number"),je(Q<=se,"value larger than maximum allowed value"),je(Ae<=Q,"value smaller than minimum allowed value"),je(Math.floor(Q)===Q,"value has a fractional component")}function _t(Q,se,Ae){je("number"==typeof Q,"cannot write a non-number as a number"),je(Q<=se,"value larger than maximum allowed value"),je(Ae<=Q,"value smaller than minimum allowed value")}function je(Q,se){if(!Q)throw new Error(se||"Failed assertion")}S._augment=function(Q){return Q._isBuffer=!0,Q._get=Q.get,Q._set=Q.set,Q.get=Oe.get,Q.set=Oe.set,Q.write=Oe.write,Q.toString=Oe.toString,Q.toLocaleString=Oe.toString,Q.toJSON=Oe.toJSON,Q.copy=Oe.copy,Q.slice=Oe.slice,Q.readUInt8=Oe.readUInt8,Q.readUInt16LE=Oe.readUInt16LE,Q.readUInt16BE=Oe.readUInt16BE,Q.readUInt32LE=Oe.readUInt32LE,Q.readUInt32BE=Oe.readUInt32BE,Q.readInt8=Oe.readInt8,Q.readInt16LE=Oe.readInt16LE,Q.readInt16BE=Oe.readInt16BE,Q.readInt32LE=Oe.readInt32LE,Q.readInt32BE=Oe.readInt32BE,Q.readFloatLE=Oe.readFloatLE,Q.readFloatBE=Oe.readFloatBE,Q.readDoubleLE=Oe.readDoubleLE,Q.readDoubleBE=Oe.readDoubleBE,Q.writeUInt8=Oe.writeUInt8,Q.writeUInt16LE=Oe.writeUInt16LE,Q.writeUInt16BE=Oe.writeUInt16BE,Q.writeUInt32LE=Oe.writeUInt32LE,Q.writeUInt32BE=Oe.writeUInt32BE,Q.writeInt8=Oe.writeInt8,Q.writeInt16LE=Oe.writeInt16LE,Q.writeInt16BE=Oe.writeInt16BE,Q.writeInt32LE=Oe.writeInt32LE,Q.writeInt32BE=Oe.writeInt32BE,Q.writeFloatLE=Oe.writeFloatLE,Q.writeFloatBE=Oe.writeFloatBE,Q.writeDoubleLE=Oe.writeDoubleLE,Q.writeDoubleBE=Oe.writeDoubleBE,Q.fill=Oe.fill,Q.inspect=Oe.inspect,Q.toArrayBuffer=Oe.toArrayBuffer,Q}}).call(this,ne("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ne("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(ne,M,ee){(function(A,$,C,W,x,E,N,te,F){C=ne("buffer").Buffer;var S=new C(4);S.fill(0),M.exports={hash:function(k,ce,X,K){for(var J=ce(function(D,ue){D.length%4!=0&&(D=C.concat([D,S],D.length+(4-D.length%4)));for(var Ce=[],ae=ue?D.readInt32BE:D.readInt32LE,we=0;we<D.length;we+=4)Ce.push(ae.call(D,we));return Ce}(k=C.isBuffer(k)?k:new C(k),K),8*k.length),U=(ce=K,new C(X)),G=ce?U.writeInt32BE:U.writeInt32LE,w=0;w<J.length;w++)G.call(U,J[w],4*w,!0);return U}}}).call(this,ne("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ne("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(ne,M,ee){(function(A,$,C,W,x,E,N,te,F){C=ne("buffer").Buffer;var oe=ne("./sha"),S=ne("./sha256"),k=ne("./rng"),ce={sha1:oe,sha256:S,md5:ne("./md5")},X=64,K=new C(X);function J(D,ue){var re=ce[D=D||"sha1"],Ce=[];return re||U("algorithm:",D,"is not yet supported"),{update:function(ae){return C.isBuffer(ae)||(ae=new C(ae)),Ce.push(ae),this},digest:function(ae){var we=C.concat(Ce);return we=ue?function(Oe,ke,Ye){C.isBuffer(ke)||(ke=new C(ke)),C.isBuffer(Ye)||(Ye=new C(Ye)),ke.length>X?ke=Oe(ke):ke.length<X&&(ke=C.concat([ke,K],X));for(var Qe=new C(X),xe=new C(X),Be=0;Be<X;Be++)Qe[Be]=54^ke[Be],xe[Be]=92^ke[Be];return Ye=Oe(C.concat([Qe,Ye])),Oe(C.concat([xe,Ye]))}(re,ue,we):re(we),Ce=null,ae?we.toString(ae):we}}}function U(){var D=[].slice.call(arguments).join(" ");throw new Error([D,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}K.fill(0),ee.createHash=function(D){return J(D)},ee.createHmac=J,ee.randomBytes=function(D,ue){if(!ue||!ue.call)return new C(k(D));try{ue.call(this,void 0,new C(k(D)))}catch(re){ue(re)}};var G,w=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],I=function(D){ee[D]=function(){U("sorry,",D,"is not implemented yet")}};for(G in w)I(w[G])}).call(this,ne("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ne("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(ne,M,ee){(function(A,$,j,W,x,E,N,te,F){var C=ne("./helpers");function oe(U,G){U[G>>5]|=128<<G%32,U[14+(G+64>>>9<<4)]=G;for(var w=1732584193,I=-271733879,D=-1732584194,ue=271733878,re=0;re<U.length;re+=16){var Ce=w,ae=I,we=D,Oe=ue;w=k(w,I,D,ue,U[re+0],7,-680876936),ue=k(ue,w,I,D,U[re+1],12,-389564586),D=k(D,ue,w,I,U[re+2],17,606105819),I=k(I,D,ue,w,U[re+3],22,-1044525330),w=k(w,I,D,ue,U[re+4],7,-176418897),ue=k(ue,w,I,D,U[re+5],12,1200080426),D=k(D,ue,w,I,U[re+6],17,-1473231341),I=k(I,D,ue,w,U[re+7],22,-45705983),w=k(w,I,D,ue,U[re+8],7,1770035416),ue=k(ue,w,I,D,U[re+9],12,-1958414417),D=k(D,ue,w,I,U[re+10],17,-42063),I=k(I,D,ue,w,U[re+11],22,-1990404162),w=k(w,I,D,ue,U[re+12],7,1804603682),ue=k(ue,w,I,D,U[re+13],12,-40341101),D=k(D,ue,w,I,U[re+14],17,-1502002290),w=ce(w,I=k(I,D,ue,w,U[re+15],22,1236535329),D,ue,U[re+1],5,-165796510),ue=ce(ue,w,I,D,U[re+6],9,-1069501632),D=ce(D,ue,w,I,U[re+11],14,643717713),I=ce(I,D,ue,w,U[re+0],20,-373897302),w=ce(w,I,D,ue,U[re+5],5,-701558691),ue=ce(ue,w,I,D,U[re+10],9,38016083),D=ce(D,ue,w,I,U[re+15],14,-660478335),I=ce(I,D,ue,w,U[re+4],20,-405537848),w=ce(w,I,D,ue,U[re+9],5,568446438),ue=ce(ue,w,I,D,U[re+14],9,-1019803690),D=ce(D,ue,w,I,U[re+3],14,-187363961),I=ce(I,D,ue,w,U[re+8],20,1163531501),w=ce(w,I,D,ue,U[re+13],5,-1444681467),ue=ce(ue,w,I,D,U[re+2],9,-51403784),D=ce(D,ue,w,I,U[re+7],14,1735328473),w=X(w,I=ce(I,D,ue,w,U[re+12],20,-1926607734),D,ue,U[re+5],4,-378558),ue=X(ue,w,I,D,U[re+8],11,-2022574463),D=X(D,ue,w,I,U[re+11],16,1839030562),I=X(I,D,ue,w,U[re+14],23,-35309556),w=X(w,I,D,ue,U[re+1],4,-1530992060),ue=X(ue,w,I,D,U[re+4],11,1272893353),D=X(D,ue,w,I,U[re+7],16,-155497632),I=X(I,D,ue,w,U[re+10],23,-1094730640),w=X(w,I,D,ue,U[re+13],4,681279174),ue=X(ue,w,I,D,U[re+0],11,-358537222),D=X(D,ue,w,I,U[re+3],16,-722521979),I=X(I,D,ue,w,U[re+6],23,76029189),w=X(w,I,D,ue,U[re+9],4,-640364487),ue=X(ue,w,I,D,U[re+12],11,-421815835),D=X(D,ue,w,I,U[re+15],16,530742520),w=K(w,I=X(I,D,ue,w,U[re+2],23,-995338651),D,ue,U[re+0],6,-198630844),ue=K(ue,w,I,D,U[re+7],10,1126891415),D=K(D,ue,w,I,U[re+14],15,-1416354905),I=K(I,D,ue,w,U[re+5],21,-57434055),w=K(w,I,D,ue,U[re+12],6,1700485571),ue=K(ue,w,I,D,U[re+3],10,-1894986606),D=K(D,ue,w,I,U[re+10],15,-1051523),I=K(I,D,ue,w,U[re+1],21,-2054922799),w=K(w,I,D,ue,U[re+8],6,1873313359),ue=K(ue,w,I,D,U[re+15],10,-30611744),D=K(D,ue,w,I,U[re+6],15,-1560198380),I=K(I,D,ue,w,U[re+13],21,1309151649),w=K(w,I,D,ue,U[re+4],6,-145523070),ue=K(ue,w,I,D,U[re+11],10,-1120210379),D=K(D,ue,w,I,U[re+2],15,718787259),I=K(I,D,ue,w,U[re+9],21,-343485551),w=J(w,Ce),I=J(I,ae),D=J(D,we),ue=J(ue,Oe)}return Array(w,I,D,ue)}function S(U,G,w,I,D,ue){return J((G=J(J(G,U),J(I,ue)))<<D|G>>>32-D,w)}function k(U,G,w,I,D,ue,re){return S(G&w|~G&I,U,G,D,ue,re)}function ce(U,G,w,I,D,ue,re){return S(G&I|w&~I,U,G,D,ue,re)}function X(U,G,w,I,D,ue,re){return S(G^w^I,U,G,D,ue,re)}function K(U,G,w,I,D,ue,re){return S(w^(G|~I),U,G,D,ue,re)}function J(U,G){var w=(65535&U)+(65535&G);return(U>>16)+(G>>16)+(w>>16)<<16|65535&w}M.exports=function(U){return C.hash(U,oe,16)}}).call(this,ne("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ne("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(ne,M,ee){(function(A,$,j,W,x,E,N,te,F){M.exports=function(oe){for(var S,k=new Array(oe),ce=0;ce<oe;ce++)!(3&ce)&&(S=4294967296*Math.random()),k[ce]=S>>>((3&ce)<<3)&255;return k}}).call(this,ne("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ne("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(ne,M,ee){(function(A,$,j,W,x,E,N,te,F){var C=ne("./helpers");function oe(ce,X){ce[X>>5]|=128<<24-X%32,ce[15+(X+64>>9<<4)]=X;for(var K,J,U,G=Array(80),w=1732584193,I=-271733879,D=-1732584194,ue=271733878,re=-1009589776,Ce=0;Ce<ce.length;Ce+=16){for(var ae=w,we=I,Oe=D,ke=ue,Ye=re,Qe=0;Qe<80;Qe++){G[Qe]=Qe<16?ce[Ce+Qe]:k(G[Qe-3]^G[Qe-8]^G[Qe-14]^G[Qe-16],1);var xe=S(S(k(w,5),(xe=I,J=D,U=ue,(K=Qe)<20?xe&J|~xe&U:!(K<40)&&K<60?xe&J|xe&U|J&U:xe^J^U)),S(S(re,G[Qe]),(K=Qe)<20?1518500249:K<40?1859775393:K<60?-1894007588:-899497514));re=ue,ue=D,D=k(I,30),I=w,w=xe}w=S(w,ae),I=S(I,we),D=S(D,Oe),ue=S(ue,ke),re=S(re,Ye)}return Array(w,I,D,ue,re)}function S(ce,X){var K=(65535&ce)+(65535&X);return(ce>>16)+(X>>16)+(K>>16)<<16|65535&K}function k(ce,X){return ce<<X|ce>>>32-X}M.exports=function(ce){return C.hash(ce,oe,20,!0)}}).call(this,ne("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ne("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(ne,M,ee){(function(A,$,j,W,x,E,N,te,F){function C(X,K){var J=(65535&X)+(65535&K);return(X>>16)+(K>>16)+(J>>16)<<16|65535&J}function oe(X,K){var J,U=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),G=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),w=new Array(64);X[K>>5]|=128<<24-K%32,X[15+(K+64>>9<<4)]=K;for(var I,D,ue=0;ue<X.length;ue+=16){for(var re=G[0],Ce=G[1],ae=G[2],we=G[3],Oe=G[4],ke=G[5],Ye=G[6],Qe=G[7],xe=0;xe<64;xe++)w[xe]=xe<16?X[xe+ue]:C(C(C(k(D=w[xe-2],17)^k(D,19)^ce(D,10),w[xe-7]),k(D=w[xe-15],7)^k(D,18)^ce(D,3)),w[xe-16]),J=C(C(C(C(Qe,k(D=Oe,6)^k(D,11)^k(D,25)),Oe&ke^~Oe&Ye),U[xe]),w[xe]),I=C(k(I=re,2)^k(I,13)^k(I,22),re&Ce^re&ae^Ce&ae),Qe=Ye,Ye=ke,ke=Oe,Oe=C(we,J),we=ae,ae=Ce,Ce=re,re=C(J,I);G[0]=C(re,G[0]),G[1]=C(Ce,G[1]),G[2]=C(ae,G[2]),G[3]=C(we,G[3]),G[4]=C(Oe,G[4]),G[5]=C(ke,G[5]),G[6]=C(Ye,G[6]),G[7]=C(Qe,G[7])}return G}var S=ne("./helpers"),k=function(X,K){return X>>>K|X<<32-K},ce=function(X,K){return X>>>K};M.exports=function(X){return S.hash(X,oe,32,!0)}}).call(this,ne("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ne("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(ne,M,ee){(function(A,$,j,W,x,E,N,te,F){ee.read=function(C,oe,S,k,ue){var X,K,J=8*ue-k-1,U=(1<<J)-1,G=U>>1,w=-7,I=S?ue-1:0,D=S?-1:1;for(ue=C[oe+I],I+=D,X=ue&(1<<-w)-1,ue>>=-w,w+=J;0<w;X=256*X+C[oe+I],I+=D,w-=8);for(K=X&(1<<-w)-1,X>>=-w,w+=k;0<w;K=256*K+C[oe+I],I+=D,w-=8);if(0===X)X=1-G;else{if(X===U)return K?NaN:1/0*(ue?-1:1);K+=Math.pow(2,k),X-=G}return(ue?-1:1)*K*Math.pow(2,X-k)},ee.write=function(C,oe,S,k,ce,re){var K,J,U=8*re-ce-1,G=(1<<U)-1,w=G>>1,I=23===ce?Math.pow(2,-24)-Math.pow(2,-77):0,D=k?0:re-1,ue=k?1:-1;for(re=oe<0||0===oe&&1/oe<0?1:0,oe=Math.abs(oe),isNaN(oe)||oe===1/0?(J=isNaN(oe)?1:0,K=G):(K=Math.floor(Math.log(oe)/Math.LN2),oe*(k=Math.pow(2,-K))<1&&(K--,k*=2),2<=(oe+=1<=K+w?I/k:I*Math.pow(2,1-w))*k&&(K++,k/=2),G<=K+w?(J=0,K=G):1<=K+w?(J=(oe*k-1)*Math.pow(2,ce),K+=w):(J=oe*Math.pow(2,w-1)*Math.pow(2,ce),K=0));8<=ce;C[S+D]=255&J,D+=ue,J/=256,ce-=8);for(K=K<<ce|J,U+=ce;0<U;C[S+D]=255&K,D+=ue,K/=256,U-=8);C[S+D-ue]|=128*re}}).call(this,ne("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ne("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(ne,M,ee){(function(A,$,j,W,x,E,N,te,F){var C,oe,S;function k(){}(A=M.exports={}).nextTick=(oe=typeof window<"u"&&window.setImmediate,S=typeof window<"u"&&window.postMessage&&window.addEventListener,oe?function(ce){return window.setImmediate(ce)}:S?(C=[],window.addEventListener("message",function(ce){var X=ce.source;X!==window&&null!==X||"process-tick"!==ce.data||(ce.stopPropagation(),0<C.length&&C.shift()())},!0),function(ce){C.push(ce),window.postMessage("process-tick","*")}):function(ce){setTimeout(ce,0)}),A.title="browser",A.browser=!0,A.env={},A.argv=[],A.on=k,A.addListener=k,A.once=k,A.off=k,A.removeListener=k,A.removeAllListeners=k,A.emit=k,A.binding=function(ce){throw new Error("process.binding is not supported")},A.cwd=function(){return"/"},A.chdir=function(ce){throw new Error("process.chdir is not supported")}}).call(this,ne("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},ne("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},4915:(Ge,ne,M)=>{var ee=M(2762),A=ee.ARRAY_BUFFER_SUPPORT,$=ee.SYMBOL_SUPPORT;Ge.exports=function(W,x){var E,N,te,F,C;if(!W)throw new Error("obliterator/forEach: invalid iterable.");if("function"!=typeof x)throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(W)||A&&ArrayBuffer.isView(W)||"string"==typeof W||"[object Arguments]"===W.toString())for(te=0,F=W.length;te<F;te++)x(W[te],te);else if("function"!=typeof W.forEach)if($&&Symbol.iterator in W&&"function"!=typeof W.next&&(W=W[Symbol.iterator]()),"function"!=typeof W.next)for(N in W)W.hasOwnProperty(N)&&x(W[N],N);else for(E=W,te=0;!0!==(C=E.next()).done;)x(C.value,te),te++;else W.forEach(x)}},5383:Ge=>{function ne(M){if("function"!=typeof M)throw new Error("obliterator/iterator: expecting a function!");this.next=M}typeof Symbol<"u"&&(ne.prototype[Symbol.iterator]=function(){return this}),ne.of=function(){var M=arguments,ee=M.length,A=0;return new ne(function(){return A>=ee?{done:!0}:{done:!1,value:M[A++]}})},ne.empty=function(){return new ne(function(){return{done:!0}})},ne.fromSequence=function(M){var ee=0,A=M.length;return new ne(function(){return ee>=A?{done:!0}:{done:!1,value:M[ee++]}})},ne.is=function(M){return M instanceof ne||"object"==typeof M&&null!==M&&"function"==typeof M.next},Ge.exports=ne},2762:(Ge,ne)=>{ne.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u",ne.SYMBOL_SUPPORT=typeof Symbol<"u"},573:Ge=>{var M,ee,ne=Ge.exports={};function A(){throw new Error("setTimeout has not been defined")}function $(){throw new Error("clearTimeout has not been defined")}function j(k){if(M===setTimeout)return setTimeout(k,0);if((M===A||!M)&&setTimeout)return M=setTimeout,setTimeout(k,0);try{return M(k,0)}catch{try{return M.call(null,k,0)}catch{return M.call(this,k,0)}}}!function(){try{M="function"==typeof setTimeout?setTimeout:A}catch{M=A}try{ee="function"==typeof clearTimeout?clearTimeout:$}catch{ee=$}}();var N,x=[],E=!1,te=-1;function F(){!E||!N||(E=!1,N.length?x=N.concat(x):te=-1,x.length&&C())}function C(){if(!E){var k=j(F);E=!0;for(var ce=x.length;ce;){for(N=x,x=[];++te<ce;)N&&N[te].run();te=-1,ce=x.length}N=null,E=!1,function W(k){if(ee===clearTimeout)return clearTimeout(k);if((ee===$||!ee)&&clearTimeout)return ee=clearTimeout,clearTimeout(k);try{return ee(k)}catch{try{return ee.call(null,k)}catch{return ee.call(this,k)}}}(k)}}function oe(k,ce){this.fun=k,this.array=ce}function S(){}ne.nextTick=function(k){var ce=new Array(arguments.length-1);if(arguments.length>1)for(var X=1;X<arguments.length;X++)ce[X-1]=arguments[X];x.push(new oe(k,ce)),1===x.length&&!E&&j(C)},oe.prototype.run=function(){this.fun.apply(null,this.array)},ne.title="browser",ne.browser=!0,ne.env={},ne.argv=[],ne.version="",ne.versions={},ne.on=S,ne.addListener=S,ne.once=S,ne.off=S,ne.removeListener=S,ne.removeAllListeners=S,ne.emit=S,ne.prependListener=S,ne.prependOnceListener=S,ne.listeners=function(k){return[]},ne.binding=function(k){throw new Error("process.binding is not supported")},ne.cwd=function(){return"/"},ne.chdir=function(k){throw new Error("process.chdir is not supported")},ne.umask=function(){return 0}},4515:Ge=>{let ne;Ge.exports="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:global):M=>(ne||(ne=Promise.resolve())).then(M).catch(ee=>setTimeout(()=>{throw ee},0))},1224:(Ge,ne,M)=>{Ge.exports=M(4548)},250:Ge=>{"use strict";Ge.exports=class JY{constructor(M,ee=new Map,A=0){this.prefix=M,this._existing=ee,this.counter=A}clone(){const{prefix:M,_existing:ee,counter:A}=this;return new JY(M,new Map(ee),A)}getId(M){const ee=M&&this._existing.get(M);if(ee)return ee;const A=this.prefix+this.counter;return this.counter++,M&&this._existing.set(M,A),A}hasId(M){return this._existing.has(M)}getOldIds(){return[...this._existing.keys()]}}},1126:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;M(7140);const A=self.crypto||self.msCrypto;Ge.exports=class{constructor(j){if(!A||!A.subtle)throw new Error("crypto.subtle not found.");if("sha256"===j)this.algorithm={name:"SHA-256"};else{if("sha1"!==j)throw new Error(`Unsupported algorithm "${j}".`);this.algorithm={name:"SHA-1"}}this._content=""}update(j){this._content+=j}digest(){var j=this;return ee(function*(){const W=(new TextEncoder).encode(j._content),x=new Uint8Array(yield A.subtle.digest(j.algorithm,W));let E="";for(let N=0;N<x.length;++N)E+=x[N].toString(16).padStart(2,"0");return E})()}}},8276:Ge=>{"use strict";const ee="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",A="http://www.w3.org/2001/XMLSchema#string",$="NamedNode",j="BlankNode",W="Literal",x="DefaultGraph",E={};function N(S,k){return S.subject.termType===k.subject.termType&&S.object.termType===k.object.termType&&S.subject.value===k.subject.value&&S.predicate.value===k.predicate.value&&S.object.value===k.object.value&&(S.object.termType!==W||S.object.datatype.termType===k.object.datatype.termType&&S.object.language===k.object.language&&S.object.datatype.value===k.object.datatype.value)}(()=>{const S="(?:<([^:]+:[^>]*)>)",ce="A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd_",X=ce+"0-9-\xb7\u0300-\u036f\u203f-\u2040",J="(_:(?:["+ce+"0-9])(?:(?:["+X+".])*(?:["+X+"]))?)",D="[ \\t]+",ue="[ \\t]*",re="(?:"+S+"|"+J+")"+D,Ce=S+D,ae="(?:"+S+"|"+J+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+S+")|(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)))?))"+ue,we="(?:\\.|(?:(?:"+S+"|"+J+")"+ue+"\\.))";E.eoln=/(?:\r\n)|(?:\n)|(?:\r)/g,E.empty=new RegExp("^[ \\t]*$"),E.quad=new RegExp("^"+ue+re+Ce+ae+we+ue+"$")})(),Ge.exports=class qS{static parse(k){const ce=[],X={},K=k.split(E.eoln);let J=0;for(const U of K){if(J++,E.empty.test(U))continue;const G=U.match(E.quad);if(null===G)throw new Error("N-Quads parse error on line "+J+".");const w={subject:null,predicate:null,object:null,graph:null};if(w.subject=void 0!==G[1]?{termType:$,value:G[1]}:{termType:j,value:G[2]},w.predicate={termType:$,value:G[3]},void 0!==G[4]?w.object={termType:$,value:G[4]}:void 0!==G[5]?w.object={termType:j,value:G[5]}:(w.object={termType:W,value:void 0,datatype:{termType:$}},void 0!==G[7]?w.object.datatype.value=G[7]:void 0!==G[8]?(w.object.datatype.value=ee,w.object.language=G[8]):w.object.datatype.value=A,w.object.value=G[6].replace(C,function(k,ce,X,K){if(ce)switch(ce){case"t":return"\t";case"b":return"\b";case"n":return"\n";case"r":return"\r";case"f":return"\f";case'"':return'"';case"'":return"'";case"\\":return"\\"}if(X)return String.fromCharCode(parseInt(X,16));if(K)throw new Error("Unsupported U escape")})),w.graph=void 0!==G[9]?{termType:$,value:G[9]}:void 0!==G[10]?{termType:j,value:G[10]}:{termType:x,value:""},w.graph.value in X){let I=!0;const D=X[w.graph.value];for(const ue of D)if(N(ue,w)){I=!1;break}I&&(D.push(w),ce.push(w))}else X[w.graph.value]=[w],ce.push(w)}return ce}static serialize(k){Array.isArray(k)||(k=qS.legacyDatasetToQuads(k));const ce=[];for(const X of k)ce.push(qS.serializeQuad(X));return ce.sort().join("")}static serializeQuadComponents(k,ce,X,K){let J="";return J+=k.termType===$?`<${k.value}>`:`${k.value}`,J+=` <${ce.value}> `,X.termType===$?J+=`<${X.value}>`:X.termType===j?J+=X.value:(J+=`"${function F(S){return S.replace(te,function(k){switch(k){case'"':return'\\"';case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r"}})}(X.value)}"`,X.datatype.value===ee?X.language&&(J+=`@${X.language}`):X.datatype.value!==A&&(J+=`^^<${X.datatype.value}>`)),K.termType===$?J+=` <${K.value}>`:K.termType===j&&(J+=` ${K.value}`),J+=" .\n",J}static serializeQuad(k){return qS.serializeQuadComponents(k.subject,k.predicate,k.object,k.graph)}static legacyDatasetToQuads(k){const ce=[],X={"blank node":j,IRI:$,literal:W};for(const K in k)k[K].forEach(U=>{const G={};for(const w in U){const I=U[w],D={termType:X[I.type],value:I.value};D.termType===W&&(D.datatype={termType:$},"datatype"in I&&(D.datatype.value=I.datatype),"language"in I?("datatype"in I||(D.datatype.value=ee),D.language=I.language):"datatype"in I||(D.datatype.value=A)),G[w]=D}G.graph="@default"===K?{termType:x,value:""}:{termType:K.startsWith("_:")?j:$,value:K},ce.push(G)});return ce}};const te=/["\\\n\r]/g,C=/(?:\\([tbnrf"'\\]))|(?:\\u([0-9A-Fa-f]{4}))|(?:\\U([0-9A-Fa-f]{8}))/g},7794:Ge=>{"use strict";Ge.exports=class{constructor(M){this.current=M.sort(),this.done=!1,this.dir=new Map;for(let ee=0;ee<M.length;++ee)this.dir.set(M[ee],!0)}hasNext(){return!this.done}next(){const{current:M,dir:ee}=this,A=M.slice();let $=null,j=0;const W=M.length;for(let x=0;x<W;++x){const E=M[x],N=ee.get(E);(null===$||E>$)&&(N&&x>0&&E>M[x-1]||!N&&x<W-1&&E>M[x+1])&&($=E,j=x)}if(null===$)this.done=!0;else{const x=ee.get($)?j-1:j+1;M[j]=M[x],M[x]=$;for(const E of M)E>$&&ee.set(E,!ee.get(E))}return A}}},624:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;const A=M(250),$=M(1126),j=M(7794),W=M(8276);function x(E,N){return E.hash<N.hash?-1:E.hash>N.hash?1:0}Ge.exports=class{constructor({createMessageDigest:N=(()=>new $("sha256")),canonicalIdMap:te=new Map,maxDeepIterations:F=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new A("_:c14n",te),this.createMessageDigest=N,this.maxDeepIterations=F,this.quads=null,this.deepIterations=null}main(N){var te=this;return ee(function*(){te.deepIterations=new Map,te.quads=N;for(const X of N)te._addBlankNodeQuadInfo({quad:X,component:X.subject}),te._addBlankNodeQuadInfo({quad:X,component:X.object}),te._addBlankNodeQuadInfo({quad:X,component:X.graph});const F=new Map,C=[...te.blankNodeInfo.keys()];let oe=0;for(const X of C)++oe%100==0&&(yield te._yield()),yield te._hashAndTrackBlankNode({id:X,hashToBlankNodes:F});const S=[...F.keys()].sort(),k=[];for(const X of S){const K=F.get(X);K.length>1?k.push(K):te.canonicalIssuer.getId(K[0])}for(const X of k){const K=[];for(const J of X){if(te.canonicalIssuer.hasId(J))continue;const U=new A("_:b");U.getId(J);const G=yield te.hashNDegreeQuads(J,U);K.push(G)}K.sort(x);for(const J of K){const U=J.issuer.getOldIds();for(const G of U)te.canonicalIssuer.getId(G)}}const ce=[];for(const X of te.quads){const K=W.serializeQuadComponents(te._componentWithCanonicalId(X.subject),X.predicate,te._componentWithCanonicalId(X.object),te._componentWithCanonicalId(X.graph));ce.push(K)}return ce.sort(),ce.join("")})()}hashFirstDegreeQuads(N){var te=this;return ee(function*(){const F=[],C=te.blankNodeInfo.get(N),oe=C.quads;for(const k of oe){const ce={subject:null,predicate:k.predicate,object:null,graph:null};ce.subject=te.modifyFirstDegreeComponent(N,k.subject,"subject"),ce.object=te.modifyFirstDegreeComponent(N,k.object,"object"),ce.graph=te.modifyFirstDegreeComponent(N,k.graph,"graph"),F.push(W.serializeQuad(ce))}F.sort();const S=te.createMessageDigest();for(const k of F)S.update(k);return C.hash=yield S.digest(),C.hash})()}hashRelatedBlankNode(N,te,F,C){var oe=this;return ee(function*(){let S;S=oe.canonicalIssuer.hasId(N)?oe.canonicalIssuer.getId(N):F.hasId(N)?F.getId(N):oe.blankNodeInfo.get(N).hash;const k=oe.createMessageDigest();return k.update(C),"g"!==C&&k.update(oe.getRelatedPredicate(te)),k.update(S),k.digest()})()}hashNDegreeQuads(N,te){var F=this;return ee(function*(){const C=F.deepIterations.get(N)||0;if(C>F.maxDeepIterations)throw new Error(`Maximum deep iterations (${F.maxDeepIterations}) exceeded.`);F.deepIterations.set(N,C+1);const oe=F.createMessageDigest(),S=yield F.createHashToRelated(N,te),k=[...S.keys()].sort();for(const ce of k){oe.update(ce);let K,X="";const J=new j(S.get(ce));let U=0;for(;J.hasNext();){const G=J.next();++U%3==0&&(yield F._yield());let w=te.clone(),I="";const D=[];let ue=!1;for(const re of G)if(F.canonicalIssuer.hasId(re)?I+=F.canonicalIssuer.getId(re):(w.hasId(re)||D.push(re),I+=w.getId(re)),0!==X.length&&I>X){ue=!0;break}if(!ue){for(const re of D){const Ce=yield F.hashNDegreeQuads(re,w);if(I+=w.getId(re),I+=`<${Ce.hash}>`,w=Ce.issuer,0!==X.length&&I>X){ue=!0;break}}ue||(0===X.length||I<X)&&(X=I,K=w)}}oe.update(X),te=K}return{hash:yield oe.digest(),issuer:te}})()}modifyFirstDegreeComponent(N,te){return"BlankNode"!==te.termType?te:{termType:"BlankNode",value:te.value===N?"_:a":"_:z"}}getRelatedPredicate(N){return`<${N.predicate.value}>`}createHashToRelated(N,te){var F=this;return ee(function*(){const C=new Map,oe=F.blankNodeInfo.get(N).quads;let S=0;for(const k of oe)++S%100==0&&(yield F._yield()),yield Promise.all([F._addRelatedBlankNodeHash({quad:k,component:k.subject,position:"s",id:N,issuer:te,hashToRelated:C}),F._addRelatedBlankNodeHash({quad:k,component:k.object,position:"o",id:N,issuer:te,hashToRelated:C}),F._addRelatedBlankNodeHash({quad:k,component:k.graph,position:"g",id:N,issuer:te,hashToRelated:C})]);return C})()}_hashAndTrackBlankNode({id:N,hashToBlankNodes:te}){var F=this;return ee(function*(){const C=yield F.hashFirstDegreeQuads(N),oe=te.get(C);oe?oe.push(N):te.set(C,[N])})()}_addBlankNodeQuadInfo({quad:N,component:te}){if("BlankNode"!==te.termType)return;const F=te.value,C=this.blankNodeInfo.get(F);C?C.quads.add(N):this.blankNodeInfo.set(F,{quads:new Set([N]),hash:null})}_addRelatedBlankNodeHash({quad:N,component:te,position:F,id:C,issuer:oe,hashToRelated:S}){var k=this;return ee(function*(){if("BlankNode"!==te.termType||te.value===C)return;const ce=te.value,X=yield k.hashRelatedBlankNode(ce,N,oe,F),K=S.get(X);K?K.push(ce):S.set(X,[ce])})()}_componentWithCanonicalId(N){return"BlankNode"!==N.termType||N.value.startsWith(this.canonicalIssuer.prefix)?N:{termType:"BlankNode",value:this.canonicalIssuer.getId(N.value)}}_yield(){return ee(function*(){return new Promise(N=>setImmediate(N))})()}}},203:(Ge,ne,M)=>{"use strict";const ee=M(250),A=M(1126),$=M(7794),j=M(8276);function W(x,E){return x.hash<E.hash?-1:x.hash>E.hash?1:0}Ge.exports=class{constructor({createMessageDigest:E=(()=>new A("sha256")),canonicalIdMap:N=new Map,maxDeepIterations:te=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new ee("_:c14n",N),this.createMessageDigest=E,this.maxDeepIterations=te,this.quads=null,this.deepIterations=null}main(E){this.deepIterations=new Map,this.quads=E;for(const S of E)this._addBlankNodeQuadInfo({quad:S,component:S.subject}),this._addBlankNodeQuadInfo({quad:S,component:S.object}),this._addBlankNodeQuadInfo({quad:S,component:S.graph});const N=new Map,te=[...this.blankNodeInfo.keys()];for(const S of te)this._hashAndTrackBlankNode({id:S,hashToBlankNodes:N});const F=[...N.keys()].sort(),C=[];for(const S of F){const k=N.get(S);k.length>1?C.push(k):this.canonicalIssuer.getId(k[0])}for(const S of C){const k=[];for(const ce of S){if(this.canonicalIssuer.hasId(ce))continue;const X=new ee("_:b");X.getId(ce);const K=this.hashNDegreeQuads(ce,X);k.push(K)}k.sort(W);for(const ce of k){const X=ce.issuer.getOldIds();for(const K of X)this.canonicalIssuer.getId(K)}}const oe=[];for(const S of this.quads){const k=j.serializeQuadComponents(this._componentWithCanonicalId({component:S.subject}),S.predicate,this._componentWithCanonicalId({component:S.object}),this._componentWithCanonicalId({component:S.graph}));oe.push(k)}return oe.sort(),oe.join("")}hashFirstDegreeQuads(E){const N=[],te=this.blankNodeInfo.get(E),F=te.quads;for(const oe of F){const S={subject:null,predicate:oe.predicate,object:null,graph:null};S.subject=this.modifyFirstDegreeComponent(E,oe.subject,"subject"),S.object=this.modifyFirstDegreeComponent(E,oe.object,"object"),S.graph=this.modifyFirstDegreeComponent(E,oe.graph,"graph"),N.push(j.serializeQuad(S))}N.sort();const C=this.createMessageDigest();for(const oe of N)C.update(oe);return te.hash=C.digest(),te.hash}hashRelatedBlankNode(E,N,te,F){let C;C=this.canonicalIssuer.hasId(E)?this.canonicalIssuer.getId(E):te.hasId(E)?te.getId(E):this.blankNodeInfo.get(E).hash;const oe=this.createMessageDigest();return oe.update(F),"g"!==F&&oe.update(this.getRelatedPredicate(N)),oe.update(C),oe.digest()}hashNDegreeQuads(E,N){const te=this.deepIterations.get(E)||0;if(te>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(E,te+1);const F=this.createMessageDigest(),C=this.createHashToRelated(E,N),oe=[...C.keys()].sort();for(const S of oe){F.update(S);let ce,k="";const X=new $(C.get(S));for(;X.hasNext();){const K=X.next();let J=N.clone(),U="";const G=[];let w=!1;for(const I of K)if(this.canonicalIssuer.hasId(I)?U+=this.canonicalIssuer.getId(I):(J.hasId(I)||G.push(I),U+=J.getId(I)),0!==k.length&&U>k){w=!0;break}if(!w){for(const I of G){const D=this.hashNDegreeQuads(I,J);if(U+=J.getId(I),U+=`<${D.hash}>`,J=D.issuer,0!==k.length&&U>k){w=!0;break}}w||(0===k.length||U<k)&&(k=U,ce=J)}}F.update(k),N=ce}return{hash:F.digest(),issuer:N}}modifyFirstDegreeComponent(E,N){return"BlankNode"!==N.termType?N:{termType:"BlankNode",value:N.value===E?"_:a":"_:z"}}getRelatedPredicate(E){return`<${E.predicate.value}>`}createHashToRelated(E,N){const te=new Map,F=this.blankNodeInfo.get(E).quads;for(const C of F)this._addRelatedBlankNodeHash({quad:C,component:C.subject,position:"s",id:E,issuer:N,hashToRelated:te}),this._addRelatedBlankNodeHash({quad:C,component:C.object,position:"o",id:E,issuer:N,hashToRelated:te}),this._addRelatedBlankNodeHash({quad:C,component:C.graph,position:"g",id:E,issuer:N,hashToRelated:te});return te}_hashAndTrackBlankNode({id:E,hashToBlankNodes:N}){const te=this.hashFirstDegreeQuads(E),F=N.get(te);F?F.push(E):N.set(te,[E])}_addBlankNodeQuadInfo({quad:E,component:N}){if("BlankNode"!==N.termType)return;const te=N.value,F=this.blankNodeInfo.get(te);F?F.quads.add(E):this.blankNodeInfo.set(te,{quads:new Set([E]),hash:null})}_addRelatedBlankNodeHash({quad:E,component:N,position:te,id:F,issuer:C,hashToRelated:oe}){if("BlankNode"!==N.termType||N.value===F)return;const S=N.value,k=this.hashRelatedBlankNode(S,E,C,te),ce=oe.get(k);ce?ce.push(S):oe.set(k,[S])}_componentWithCanonicalId({component:E}){return"BlankNode"!==E.termType||E.value.startsWith(this.canonicalIssuer.prefix)?E:{termType:"BlankNode",value:this.canonicalIssuer.getId(E.value)}}}},6268:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;const A=M(1126),$=M(624);Ge.exports=class extends ${constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new A("sha1")}modifyFirstDegreeComponent(W,x,E){return"BlankNode"!==x.termType?x:"graph"===E?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:x.value===W?"_:a":"_:z"}}getRelatedPredicate(W){return W.predicate.value}createHashToRelated(W,x){var E=this;return ee(function*(){const N=new Map,te=E.blankNodeInfo.get(W).quads;let F=0;for(const C of te){let oe,S;if("BlankNode"===C.subject.termType&&C.subject.value!==W)S=C.subject.value,oe="p";else{if("BlankNode"!==C.object.termType||C.object.value===W)continue;S=C.object.value,oe="r"}++F%100==0&&(yield E._yield());const k=yield E.hashRelatedBlankNode(S,C,x,oe),ce=N.get(k);ce?ce.push(S):N.set(k,[S])}return N})()}}},8911:(Ge,ne,M)=>{"use strict";const ee=M(1126),A=M(203);Ge.exports=class extends A{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new ee("sha1")}modifyFirstDegreeComponent(j,W,x){return"BlankNode"!==W.termType?W:"graph"===x?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:W.value===j?"_:a":"_:z"}}getRelatedPredicate(j){return j.predicate.value}createHashToRelated(j,W){const x=new Map,E=this.blankNodeInfo.get(j).quads;for(const N of E){let te,F;if("BlankNode"===N.subject.termType&&N.subject.value!==j)F=N.subject.value,te="p";else{if("BlankNode"!==N.object.termType||N.object.value===j)continue;F=N.object.value,te="r"}const C=this.hashRelatedBlankNode(F,N,W,te),oe=x.get(C);oe?oe.push(F):x.set(C,[F])}return x}}},4548:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;const A=M(624),$=M(6268),j=M(203),W=M(8911);let x;try{x=M(7789)}catch{}function E(N){return Array.isArray(N)?N:ne.NQuads.legacyDatasetToQuads(N)}ne.NQuads=M(8276),ne.IdentifierIssuer=M(250),ne._rdfCanonizeNative=function(N){return N&&(x=N),x},ne.canonize=function(){var N=ee(function*(te,F){const C=E(te);if(F.useNative){if(!x)throw new Error("rdf-canonize-native not available");if(F.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((oe,S)=>x.canonize(C,F,(k,ce)=>k?S(k):oe(ce)))}if("URDNA2015"===F.algorithm)return new A(F).main(C);if("URGNA2012"===F.algorithm){if(F.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new $(F).main(C)}throw"algorithm"in F?new Error("Invalid RDF Dataset Canonicalization algorithm: "+F.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")});return function(te,F){return N.apply(this,arguments)}}(),ne._canonizeSync=function(N,te){const F=E(N);if(te.useNative){if(!x)throw new Error("rdf-canonize-native not available");if(te.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return x.canonizeSync(F,te)}if("URDNA2015"===te.algorithm)return new j(te).main(F);if("URGNA2012"===te.algorithm){if(te.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new W(te).main(F)}throw"algorithm"in te?new Error("Invalid RDF Dataset Canonicalization algorithm: "+te.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}},5376:function(Ge,ne,M){"use strict";var ee=this&&this.__createBinding||(Object.create?function($,j,W,x){void 0===x&&(x=W),Object.defineProperty($,x,{enumerable:!0,get:function(){return j[W]}})}:function($,j,W,x){void 0===x&&(x=W),$[x]=j[W]}),A=this&&this.__exportStar||function($,j){for(var W in $)"default"!==W&&!Object.prototype.hasOwnProperty.call(j,W)&&ee(j,$,W)};Object.defineProperty(ne,"__esModule",{value:!0}),A(M(1006),ne),A(M(4122),ne),A(M(2653),ne),A(M(8327),ne),A(M(7265),ne),A(M(9797),ne),A(M(8866),ne)},1006:(Ge,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.BlankNode=void 0,ne.BlankNode=class M{constructor(A){this.termType="BlankNode",this.value=A}equals(A){return!!A&&"BlankNode"===A.termType&&A.value===this.value}}},4122:(Ge,ne,M)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.DataFactory=void 0;const ee=M(1006),A=M(2653),$=M(8327),j=M(7265),W=M(9797),x=M(8866);let E=0;ne.DataFactory=class N{constructor(F){this.blankNodeCounter=0,this.blankNodePrefix=(F=F||{}).blankNodePrefix||`df_${E++}_`}namedNode(F){return new j.NamedNode(F)}blankNode(F){return new ee.BlankNode(F||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(F,C){return new $.Literal(F,C)}variable(F){return new x.Variable(F)}defaultGraph(){return A.DefaultGraph.INSTANCE}quad(F,C,oe,S){return new W.Quad(F,C,oe,S||this.defaultGraph())}fromTerm(F){switch(F.termType){case"NamedNode":return this.namedNode(F.value);case"BlankNode":return this.blankNode(F.value);case"Literal":return F.language?this.literal(F.value,F.language):F.datatype.equals($.Literal.XSD_STRING)?this.literal(F.value):this.literal(F.value,this.fromTerm(F.datatype));case"Variable":return this.variable(F.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(F.subject),this.fromTerm(F.predicate),this.fromTerm(F.object),this.fromTerm(F.graph))}}fromQuad(F){return this.fromTerm(F)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},2653:(Ge,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.DefaultGraph=void 0;class M{constructor(){this.termType="DefaultGraph",this.value=""}equals(A){return!!A&&"DefaultGraph"===A.termType}}ne.DefaultGraph=M,M.INSTANCE=new M},8327:(Ge,ne,M)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.Literal=void 0;const ee=M(7265);class A{constructor(j,W){this.termType="Literal",this.value=j,"string"==typeof W?(this.language=W,this.datatype=A.RDF_LANGUAGE_STRING):W?(this.language="",this.datatype=W):(this.language="",this.datatype=A.XSD_STRING)}equals(j){return!!j&&"Literal"===j.termType&&j.value===this.value&&j.language===this.language&&this.datatype.equals(j.datatype)}}ne.Literal=A,A.RDF_LANGUAGE_STRING=new ee.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),A.XSD_STRING=new ee.NamedNode("http://www.w3.org/2001/XMLSchema#string")},7265:(Ge,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.NamedNode=void 0,ne.NamedNode=class M{constructor(A){this.termType="NamedNode",this.value=A}equals(A){return!!A&&"NamedNode"===A.termType&&A.value===this.value}}},9797:(Ge,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.Quad=void 0,ne.Quad=class M{constructor(A,$,j,W){this.termType="Quad",this.value="",this.subject=A,this.predicate=$,this.object=j,this.graph=W}equals(A){return!!A&&("Quad"===A.termType||!A.termType)&&this.subject.equals(A.subject)&&this.predicate.equals(A.predicate)&&this.object.equals(A.object)&&this.graph.equals(A.graph)}}},8866:(Ge,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.Variable=void 0,ne.Variable=class M{constructor(A){this.termType="Variable",this.value=A}equals(A){return!!A&&"Variable"===A.termType&&A.value===this.value}}},1994:function(Ge,ne,M){"use strict";var ee=this&&this.__createBinding||(Object.create?function(S,k,ce,X){void 0===X&&(X=ce);var K=Object.getOwnPropertyDescriptor(k,ce);(!K||("get"in K?!k.__esModule:K.writable||K.configurable))&&(K={enumerable:!0,get:function(){return k[ce]}}),Object.defineProperty(S,X,K)}:function(S,k,ce,X){void 0===X&&(X=ce),S[X]=k[ce]}),A=this&&this.__exportStar||function(S,k){for(var ce in S)"default"!==ce&&!Object.prototype.hasOwnProperty.call(k,ce)&&ee(k,S,ce)};Object.defineProperty(ne,"__esModule",{value:!0}),ne.getSupportedJavaScriptPrimitives=ne.getSupportedRdfDatatypes=ne.getTermRaw=ne.toRdf=ne.fromRdf=void 0;const $=M(5376),j=M(8193),W=M(7006);A(M(8193),ne),A(M(6997),ne),A(M(7006),ne);const x=new $.DataFactory,E=new W.Translator;function N(S,k){return E.fromRdf(S,k)}E.registerHandler(new j.TypeHandlerString,j.TypeHandlerString.TYPES.map(S=>x.namedNode(S)),["string"]),E.registerHandler(new j.TypeHandlerBoolean,[j.TypeHandlerBoolean.TYPE].map(S=>x.namedNode(S)),["boolean"]),E.registerHandler(new j.TypeHandlerNumberDouble,j.TypeHandlerNumberDouble.TYPES.map(S=>x.namedNode(S)),["number"]),E.registerHandler(new j.TypeHandlerNumberInteger,j.TypeHandlerNumberInteger.TYPES.map(S=>x.namedNode(S)),["number"]),E.registerHandler(new j.TypeHandlerDate,j.TypeHandlerDate.TYPES.map(S=>x.namedNode(S)),["object"]),ne.fromRdf=N,ne.toRdf=function te(S,k){return k&&"namedNode"in k&&(k={dataFactory:k}),(k=k||{})&&!k.dataFactory&&(k.dataFactory=x),E.toRdf(S,k)},ne.getTermRaw=function F(S,k){return"Literal"===S.termType?N(S,k):S.value},ne.getSupportedRdfDatatypes=function C(){return E.getSupportedRdfDatatypes()},ne.getSupportedJavaScriptPrimitives=function oe(){return E.getSupportedJavaScriptPrimitives()}},6997:(Ge,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0})},7006:(Ge,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.Translator=void 0,ne.Translator=class M{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(A){throw new Error(`Invalid RDF ${A.datatype.value} value: '${A.value}'`)}registerHandler(A,$,j){for(const W of $)this.supportedRdfDatatypes.push(W),this.fromRdfHandlers[W.value]=A;for(const W of j){let x=this.toRdfHandlers[W];x||(this.toRdfHandlers[W]=x=[]),x.push(A)}}fromRdf(A,$){const j=this.fromRdfHandlers[A.datatype.value];return j?j.fromRdf(A,$):A.value}toRdf(A,$){const j=this.toRdfHandlers[typeof A];if(j)for(const W of j){const x=W.toRdf(A,$);if(x)return x}throw new Error(`Invalid JavaScript value: '${A}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}}},3133:(Ge,ne,M)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.TypeHandlerBoolean=void 0;const ee=M(7006);ne.TypeHandlerBoolean=(()=>{class ${fromRdf(W,x){switch(W.value){case"true":case"1":return!0;case"false":case"0":return!1}return x&&ee.Translator.incorrectRdfDataType(W),!1}toRdf(W,{datatype:x,dataFactory:E}){return E.literal(W?"true":"false",x||E.namedNode($.TYPE))}}return $.TYPE="http://www.w3.org/2001/XMLSchema#boolean",$})()},3177:(Ge,ne,M)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.TypeHandlerDate=void 0;const ee=M(7006);ne.TypeHandlerDate=(()=>{class ${fromRdf(W,x){switch(x&&!W.value.match($.VALIDATORS[W.datatype.value.substr(33,W.datatype.value.length)])&&ee.Translator.incorrectRdfDataType(W),W.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(W.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const E=W.value.split("-");return new Date(0,parseInt(E[0],10)-1,parseInt(E[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(W.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(W.value+"-01");default:return new Date(W.value)}}toRdf(W,{datatype:x,dataFactory:E}){if(x=x||E.namedNode($.TYPES[0]),!(W instanceof Date))return null;const N=W;let te;switch(x.value){case"http://www.w3.org/2001/XMLSchema#gDay":te=String(N.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":te=N.getUTCMonth()+1+"-"+N.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":te=String(N.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":te=N.getUTCFullYear()+"-"+(N.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":te=N.toISOString().replace(/T.*$/,"");break;default:te=N.toISOString()}return E.literal(te,x)}}return $.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],$.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},$})()},6861:(Ge,ne,M)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.TypeHandlerNumberDouble=void 0;const ee=M(7006);ne.TypeHandlerNumberDouble=(()=>{class ${fromRdf(W,x){const E=parseFloat(W.value);return x&&isNaN(E)&&ee.Translator.incorrectRdfDataType(W),E}toRdf(W,{datatype:x,dataFactory:E}){return x=x||E.namedNode($.TYPES[0]),isNaN(W)?E.literal("NaN",x):isFinite(W)?W%1==0?null:E.literal(W.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),x):E.literal(W>0?"INF":"-INF",x)}}return $.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],$})()},8796:(Ge,ne,M)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.TypeHandlerNumberInteger=void 0;const ee=M(7006);ne.TypeHandlerNumberInteger=(()=>{class ${fromRdf(W,x){const E=parseInt(W.value,10);return x&&(isNaN(E)||W.value.indexOf(".")>=0)&&ee.Translator.incorrectRdfDataType(W),E}toRdf(W,{datatype:x,dataFactory:E}){return E.literal(String(W),x||E.namedNode(W<=$.MAX_INT&&W>=$.MIN_INT?$.TYPES[0]:$.TYPES[1]))}}return $.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],$.MAX_INT=2147483647,$.MIN_INT=-2147483648,$})()},4440:(Ge,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.TypeHandlerString=void 0,ne.TypeHandlerString=(()=>{class ee{fromRdf($){return $.value}toRdf($,{datatype:j,dataFactory:W}){return W.literal($,j)}}return ee.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],ee})()},8193:function(Ge,ne,M){"use strict";var ee=this&&this.__createBinding||(Object.create?function($,j,W,x){void 0===x&&(x=W);var E=Object.getOwnPropertyDescriptor(j,W);(!E||("get"in E?!j.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return j[W]}}),Object.defineProperty($,x,E)}:function($,j,W,x){void 0===x&&(x=W),$[x]=j[W]}),A=this&&this.__exportStar||function($,j){for(var W in $)"default"!==W&&!Object.prototype.hasOwnProperty.call(j,W)&&ee(j,$,W)};Object.defineProperty(ne,"__esModule",{value:!0}),A(M(3133),ne),A(M(3177),ne),A(M(6861),ne),A(M(8796),ne),A(M(4440),ne)},2756:function(Ge,ne,M){"use strict";var ee=this&&this.__createBinding||(Object.create?function($,j,W,x){void 0===x&&(x=W);var E=Object.getOwnPropertyDescriptor(j,W);(!E||("get"in E?!j.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return j[W]}}),Object.defineProperty($,x,E)}:function($,j,W,x){void 0===x&&(x=W),$[x]=j[W]}),A=this&&this.__exportStar||function($,j){for(var W in $)"default"!==W&&!Object.prototype.hasOwnProperty.call(j,W)&&ee(j,$,W)};Object.defineProperty(ne,"__esModule",{value:!0}),A(M(392),ne)},2725:(Ge,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.ParseError=void 0;class M extends Error{constructor(A,$){const j=A.saxParser;super(A.trackPosition?`Line ${j.line} column ${j.column+1}: ${$}`:$)}}ne.ParseError=M},392:(Ge,ne,M)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.ParseType=ne.RdfXmlParser=void 0;const ee=M(2011),A=M(6576),$=M(6947),j=M(2725),W=M(5376),x=M(9805);class E extends $.Transform{constructor(F){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},F&&(Object.assign(this,F),this.options=F),this.dataFactory||(this.dataFactory=new W.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),!1!==this.validateUri&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?x.IriValidationStrategy.Pragmatic:x.IriValidationStrategy.None),this.saxParser=new A.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(F){const C=new $.PassThrough({readableObjectMode:!0});F.on("error",S=>oe.emit("error",S)),F.on("data",S=>C.push(S)),F.on("end",()=>C.push(null));const oe=C.pipe(new E(this.options));return oe}_transform(F,C,oe){try{this.saxParser.write(F)}catch(S){return oe(S)}oe()}newParseError(F){return new j.ParseError(this,F)}valueToUri(F,C){return this.uriToNamedNode((0,ee.resolve)(F,C.baseIRI))}uriToNamedNode(F){const C=(0,x.validateIri)(F,this.iriValidationStrategy);if(C instanceof Error)throw this.newParseError(C.message);return this.dataFactory.namedNode(F)}validateNcname(F){if(!E.NCNAME_MATCHER.test(F))throw this.newParseError(`Not a valid NCName: ${F}`)}attachSaxListeners(){this.saxParser.on("error",F=>this.emit("error",F)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(F){const C=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let oe=N.RESOURCE;if(C&&(C.hadChildren=!0,oe=C.childrenParseType),C&&C.childrenStringTags){const k=F.name;let ce="";for(const U in F.attributes)ce+=` ${U}="${F.attributes[U].value}"`;C.childrenStringTags.push(`<${k}${ce}>`);const J={childrenStringTags:C.childrenStringTags};return J.childrenStringEmitClosingTag=`</${k}>`,void this.activeTagStack.push(J)}const S={};C?(S.language=C.language,S.baseIRI=C.baseIRI):S.baseIRI=this.baseIRI,this.activeTagStack.push(S),oe===N.RESOURCE?this.onTagResource(F,S,C,!C):this.onTagProperty(F,S,C)}onTagResource(F,C,oe,S){C.childrenParseType=N.PROPERTY;let k=!0;if(F.uri===E.RDF){if(!S&&E.FORBIDDEN_NODE_ELEMENTS.indexOf(F.local)>=0)throw this.newParseError(`Illegal node element name: ${F.local}`);switch(F.local){case"RDF":C.childrenParseType=N.RESOURCE;case"Description":k=!1}}const ce=[],X=[];let K=null,J=!1,U=!1,G=null;for(const w in F.attributes){const I=F.attributes[w];if(oe&&I.uri===E.RDF)switch(I.local){case"about":if(K)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${I.value} and ${K} where found.`);K=I.value;continue;case"ID":if(K)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${I.value} and ${K} where found.`);this.validateNcname(I.value),K="#"+I.value,J=!0;continue;case"nodeID":if(K)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${I.value} and ${K} where found.`);this.validateNcname(I.value),K=I.value,U=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":G=I.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(I.uri===E.XML){if("lang"===I.local){C.language=""===I.value?null:I.value.toLowerCase();continue}if("base"===I.local){C.baseIRI=(0,ee.resolve)(I.value,C.baseIRI);continue}}"xml"!==I.prefix&&"xmlns"!==I.prefix&&(""!==I.prefix||"xmlns"!==I.local)&&I.uri&&(ce.push(this.uriToNamedNode(I.uri+I.local)),X.push(I.value))}if(null!==K&&(C.subject=U?this.dataFactory.blankNode(K):this.valueToUri(K,C),J&&this.claimNodeId(C.subject)),C.subject||(C.subject=this.dataFactory.blankNode()),k){const w=this.uriToNamedNode(F.uri+F.local);this.emitTriple(C.subject,this.dataFactory.namedNode(E.RDF+"type"),w,oe?oe.reifiedStatementId:null)}if(oe){if(oe.predicate)if(oe.childrenCollectionSubject){const w=this.dataFactory.blankNode();this.emitTriple(oe.childrenCollectionSubject,oe.childrenCollectionPredicate,w,oe.reifiedStatementId),this.emitTriple(w,this.dataFactory.namedNode(E.RDF+"first"),C.subject,C.reifiedStatementId),oe.childrenCollectionSubject=w,oe.childrenCollectionPredicate=this.dataFactory.namedNode(E.RDF+"rest")}else{this.emitTriple(oe.subject,oe.predicate,C.subject,oe.reifiedStatementId);for(let w=0;w<oe.predicateSubPredicates.length;w++)this.emitTriple(C.subject,oe.predicateSubPredicates[w],oe.predicateSubObjects[w],null);oe.predicateSubPredicates=[],oe.predicateSubObjects=[],oe.predicateEmitted=!0}for(let w=0;w<ce.length;w++){const I=this.dataFactory.literal(X[w],C.datatype||C.language);this.emitTriple(C.subject,ce[w],I,oe.reifiedStatementId)}G&&this.emitTriple(C.subject,this.dataFactory.namedNode(E.RDF+"type"),this.uriToNamedNode(G),null)}}onTagProperty(F,C,oe){if(C.childrenParseType=N.RESOURCE,C.subject=oe.subject,F.uri===E.RDF&&"li"===F.local?(oe.listItemCounter||(oe.listItemCounter=1),C.predicate=this.uriToNamedNode(F.uri+"_"+oe.listItemCounter++)):C.predicate=this.uriToNamedNode(F.uri+F.local),F.uri===E.RDF&&E.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(F.local)>=0)throw this.newParseError(`Illegal property element name: ${F.local}`);C.predicateSubPredicates=[],C.predicateSubObjects=[];let S=!1,k=!1,ce=null,X=!0;const K=[],J=[];for(const U in F.attributes){const G=F.attributes[U];if(G.uri===E.RDF)switch(G.local){case"resource":if(ce)throw this.newParseError(`Found both rdf:resource (${G.value}) and rdf:nodeID (${ce}).`);if(S)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${G.value})`);C.hadChildren=!0,ce=G.value,X=!1;continue;case"datatype":if(k)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${G.value}).`);if(S)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${G.value})`);C.datatype=this.valueToUri(G.value,C);continue;case"nodeID":if(k)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${G.value}).`);if(C.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${G.value}).`);if(S)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${G.value})`);this.validateNcname(G.value),C.hadChildren=!0,ce=G.value,X=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(k)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(C.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${C.datatype.value})`);if(ce)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${ce})`);if("Resource"===G.value){S=!0,C.childrenParseType=N.PROPERTY;const w=this.dataFactory.blankNode();this.emitTriple(C.subject,C.predicate,w,C.reifiedStatementId),C.subject=w,C.predicate=null}else"Collection"===G.value?(S=!0,C.hadChildren=!0,C.childrenCollectionSubject=C.subject,C.childrenCollectionPredicate=C.predicate,X=!1):"Literal"===G.value&&(S=!0,C.childrenTagsToString=!0,C.childrenStringTags=[]);continue;case"ID":this.validateNcname(G.value),C.reifiedStatementId=this.valueToUri("#"+G.value,C),this.claimNodeId(C.reifiedStatementId);continue}else if(G.uri===E.XML&&"lang"===G.local){C.language=""===G.value?null:G.value.toLowerCase();continue}if("xml"!==G.prefix&&"xmlns"!==G.prefix&&(""!==G.prefix||"xmlns"!==G.local)&&G.uri){if(S||C.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${G.value}`);C.hadChildren=!0,k=!0,K.push(this.uriToNamedNode(G.uri+G.local)),J.push(this.dataFactory.literal(G.value,C.datatype||C.language))}}if(null!==ce){const U=C.subject;C.subject=X?this.dataFactory.blankNode(ce):this.valueToUri(ce,C),this.emitTriple(U,C.predicate,C.subject,C.reifiedStatementId);for(let G=0;G<K.length;G++)this.emitTriple(C.subject,K[G],J[G],null);C.predicateEmitted=!0}else X&&(C.predicateSubPredicates=K,C.predicateSubObjects=J,C.predicateEmitted=!1)}emitTriple(F,C,oe,S){this.push(this.dataFactory.quad(F,C,oe,this.defaultGraph)),S&&(this.push(this.dataFactory.quad(S,this.dataFactory.namedNode(E.RDF+"type"),this.dataFactory.namedNode(E.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(S,this.dataFactory.namedNode(E.RDF+"subject"),F,this.defaultGraph)),this.push(this.dataFactory.quad(S,this.dataFactory.namedNode(E.RDF+"predicate"),C,this.defaultGraph)),this.push(this.dataFactory.quad(S,this.dataFactory.namedNode(E.RDF+"object"),oe,this.defaultGraph)))}claimNodeId(F){if(!this.allowDuplicateRdfIds){if(this.nodeIds[F.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${F.value}'.`);this.nodeIds[F.value]=!0}}onText(F){const C=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;C&&(C.childrenStringTags?C.childrenStringTags.push(F):C.predicate&&(C.text=F))}onCloseTag(){const F=this.activeTagStack.pop();if(F.childrenStringEmitClosingTag&&F.childrenStringTags.push(F.childrenStringEmitClosingTag),F.childrenTagsToString&&(F.datatype=this.dataFactory.namedNode(E.RDF+"XMLLiteral"),F.text=F.childrenStringTags.join(""),F.hadChildren=!1),F.childrenCollectionSubject)this.emitTriple(F.childrenCollectionSubject,F.childrenCollectionPredicate,this.dataFactory.namedNode(E.RDF+"nil"),F.reifiedStatementId);else if(F.predicate)if(F.hadChildren||F.childrenParseType===N.PROPERTY){if(!F.predicateEmitted){const C=this.dataFactory.blankNode();this.emitTriple(F.subject,F.predicate,C,F.reifiedStatementId);for(let oe=0;oe<F.predicateSubPredicates.length;oe++)this.emitTriple(C,F.predicateSubPredicates[oe],F.predicateSubObjects[oe],null)}}else this.emitTriple(F.subject,F.predicate,this.dataFactory.literal(F.text||"",F.datatype||F.language),F.reifiedStatementId)}onDoctype(F){F.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(C,oe,S)=>(this.saxParser.ENTITIES[oe]=S,""))}}ne.RdfXmlParser=E,E.MIME_TYPE="application/rdf+xml",E.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",E.XML="http://www.w3.org/XML/1998/namespace",E.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],E.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],E.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u;var N=function(te){return te[te.RESOURCE=0]="RESOURCE",te[te.PROPERTY=1]="PROPERTY",te}(N||(ne.ParseType=N={}))},8992:(Ge,ne,M)=>{"use strict";const{SymbolDispose:ee}=M(1251),{AbortError:A,codes:$}=M(5480),{isNodeStream:j,isWebStream:W,kControllerErrorFunction:x}=M(6110),E=M(3139),{ERR_INVALID_ARG_TYPE:N}=$;let te;Ge.exports.addAbortSignal=function(oe,S){if(((C,oe)=>{if("object"!=typeof C||!("aborted"in C))throw new N("signal","AbortSignal",C)})(oe),!j(S)&&!W(S))throw new N("stream",["ReadableStream","WritableStream","Stream"],S);return Ge.exports.addAbortSignalNoValidate(oe,S)},Ge.exports.addAbortSignalNoValidate=function(C,oe){if("object"!=typeof C||!("aborted"in C))return oe;const S=j(oe)?()=>{oe.destroy(new A(void 0,{cause:C.reason}))}:()=>{oe[x](new A(void 0,{cause:C.reason}))};if(C.aborted)S();else{te=te||M(1663).addAbortListener;const k=te(C,S);E(oe,k[ee])}return oe}},9588:(Ge,ne,M)=>{"use strict";const{StringPrototypeSlice:ee,SymbolIterator:A,TypedArrayPrototypeSet:$,Uint8Array:j}=M(1251),{Buffer:W}=M(2317),{inspect:x}=M(1663);Ge.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(N){const te={data:N,next:null};this.length>0?this.tail.next=te:this.head=te,this.tail=te,++this.length}unshift(N){const te={data:N,next:this.head};0===this.length&&(this.tail=te),this.head=te,++this.length}shift(){if(0===this.length)return;const N=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,N}clear(){this.head=this.tail=null,this.length=0}join(N){if(0===this.length)return"";let te=this.head,F=""+te.data;for(;null!==(te=te.next);)F+=N+te.data;return F}concat(N){if(0===this.length)return W.alloc(0);const te=W.allocUnsafe(N>>>0);let F=this.head,C=0;for(;F;)$(te,F.data,C),C+=F.data.length,F=F.next;return te}consume(N,te){const F=this.head.data;if(N<F.length){const C=F.slice(0,N);return this.head.data=F.slice(N),C}return N===F.length?this.shift():te?this._getString(N):this._getBuffer(N)}first(){return this.head.data}*[A](){for(let N=this.head;N;N=N.next)yield N.data}_getString(N){let te="",F=this.head,C=0;do{const oe=F.data;if(!(N>oe.length)){N===oe.length?(te+=oe,++C,this.head=F.next?F.next:this.tail=null):(te+=ee(oe,0,N),this.head=F,F.data=ee(oe,N));break}te+=oe,N-=oe.length,++C}while(null!==(F=F.next));return this.length-=C,te}_getBuffer(N){const te=W.allocUnsafe(N),F=N;let C=this.head,oe=0;do{const S=C.data;if(!(N>S.length)){N===S.length?($(te,S,F-N),++oe,this.head=C.next?C.next:this.tail=null):($(te,new j(S.buffer,S.byteOffset,N),F-N),this.head=C,C.data=S.slice(N));break}$(te,S,F-N),N-=S.length,++oe}while(null!==(C=C.next));return this.length-=oe,te}[Symbol.for("nodejs.util.inspect.custom")](N,te){return x(this,{...te,depth:0,customInspect:!1})}}},6683:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;const{pipeline:A}=M(6249),$=M(9613),{destroyer:j}=M(1509),{isNodeStream:W,isReadable:x,isWritable:E,isWebStream:N,isTransformStream:te,isWritableStream:F,isReadableStream:C}=M(6110),{AbortError:oe,codes:{ERR_INVALID_ARG_VALUE:S,ERR_MISSING_ARGS:k}}=M(5480),ce=M(3139);Ge.exports=function(...K){if(0===K.length)throw new k("streams");if(1===K.length)return $.from(K[0]);const J=[...K];if("function"==typeof K[0]&&(K[0]=$.from(K[0])),"function"==typeof K[K.length-1]){const Oe=K.length-1;K[Oe]=$.from(K[Oe])}for(let Oe=0;Oe<K.length;++Oe)if(W(K[Oe])||N(K[Oe])){if(Oe<K.length-1&&!(x(K[Oe])||C(K[Oe])||te(K[Oe])))throw new S(`streams[${Oe}]`,J[Oe],"must be readable");if(Oe>0&&!(E(K[Oe])||F(K[Oe])||te(K[Oe])))throw new S(`streams[${Oe}]`,J[Oe],"must be writable")}let U,G,w,I,D;const re=K[0],Ce=A(K,function ue(Oe){const ke=I;I=null,ke?ke(Oe):Oe?D.destroy(Oe):!we&&!ae&&D.destroy()}),ae=!!(E(re)||F(re)||te(re)),we=!!(x(Ce)||C(Ce)||te(Ce));if(D=new $({writableObjectMode:!(null==re||!re.writableObjectMode),readableObjectMode:!(null==Ce||!Ce.readableObjectMode),writable:ae,readable:we}),ae){if(W(re))D._write=function(ke,Ye,Qe){re.write(ke,Ye)?Qe():U=Qe},D._final=function(ke){re.end(),G=ke},re.on("drain",function(){if(U){const ke=U;U=null,ke()}});else if(N(re)){const Ye=(te(re)?re.writable:re).getWriter();D._write=function(){var Qe=ee(function*(xe,Be,Ie){try{yield Ye.ready,Ye.write(xe).catch(()=>{}),Ie()}catch(et){Ie(et)}});return function(xe,Be,Ie){return Qe.apply(this,arguments)}}(),D._final=function(){var Qe=ee(function*(xe){try{yield Ye.ready,Ye.close().catch(()=>{}),G=xe}catch(Be){xe(Be)}});return function(xe){return Qe.apply(this,arguments)}}()}const Oe=te(Ce)?Ce.readable:Ce;ce(Oe,()=>{if(G){const ke=G;G=null,ke()}})}if(we)if(W(Ce))Ce.on("readable",function(){if(w){const Oe=w;w=null,Oe()}}),Ce.on("end",function(){D.push(null)}),D._read=function(){for(;;){const Oe=Ce.read();if(null===Oe)return void(w=D._read);if(!D.push(Oe))return}};else if(N(Ce)){const ke=(te(Ce)?Ce.readable:Ce).getReader();D._read=ee(function*(){for(;;)try{const{value:Ye,done:Qe}=yield ke.read();if(!D.push(Ye))return;if(Qe)return void D.push(null)}catch{return}})}return D._destroy=function(Oe,ke){!Oe&&null!==I&&(Oe=new oe),w=null,U=null,G=null,null===I?ke(Oe):(I=ke,W(Ce)&&j(Ce,Oe))},D}},1509:(Ge,ne,M)=>{"use strict";const ee=M(573),{aggregateTwoErrors:A,codes:{ERR_MULTIPLE_CALLBACK:$},AbortError:j}=M(5480),{Symbol:W}=M(1251),{kIsDestroyed:x,isDestroyed:E,isFinished:N,isServerRequest:te}=M(6110),F=W("kDestroy"),C=W("kConstruct");function oe(ae,we,Oe){ae&&(we&&!we.errored&&(we.errored=ae),Oe&&!Oe.errored&&(Oe.errored=ae))}function k(ae,we,Oe){let ke=!1;function Ye(Qe){if(ke)return;ke=!0;const xe=ae._readableState,Be=ae._writableState;oe(Qe,Be,xe),Be&&(Be.closed=!0),xe&&(xe.closed=!0),"function"==typeof Oe&&Oe(Qe),Qe?ee.nextTick(ce,ae,Qe):ee.nextTick(X,ae)}try{ae._destroy(we||null,Ye)}catch(Qe){Ye(Qe)}}function ce(ae,we){K(ae,we),X(ae)}function X(ae){const we=ae._readableState,Oe=ae._writableState;Oe&&(Oe.closeEmitted=!0),we&&(we.closeEmitted=!0),(null!=Oe&&Oe.emitClose||null!=we&&we.emitClose)&&ae.emit("close")}function K(ae,we){const Oe=ae._readableState,ke=ae._writableState;null!=ke&&ke.errorEmitted||null!=Oe&&Oe.errorEmitted||(ke&&(ke.errorEmitted=!0),Oe&&(Oe.errorEmitted=!0),ae.emit("error",we))}function U(ae,we,Oe){const ke=ae._readableState,Ye=ae._writableState;if(null!=Ye&&Ye.destroyed||null!=ke&&ke.destroyed)return this;null!=ke&&ke.autoDestroy||null!=Ye&&Ye.autoDestroy?ae.destroy(we):we&&(Ye&&!Ye.errored&&(Ye.errored=we),ke&&!ke.errored&&(ke.errored=we),Oe?ee.nextTick(K,ae,we):K(ae,we))}function w(ae){let we=!1;function Oe(ke){if(we)return void U(ae,ke??new $);we=!0;const Ye=ae._readableState,Qe=ae._writableState,xe=Qe||Ye;Ye&&(Ye.constructed=!0),Qe&&(Qe.constructed=!0),xe.destroyed?ae.emit(F,ke):ke?U(ae,ke,!0):ee.nextTick(I,ae)}try{ae._construct(ke=>{ee.nextTick(Oe,ke)})}catch(ke){ee.nextTick(Oe,ke)}}function I(ae){ae.emit(C)}function D(ae){return ae?.setHeader&&"function"==typeof ae.abort}function ue(ae){ae.emit("close")}function re(ae,we){ae.emit("error",we),ee.nextTick(ue,ae)}Ge.exports={construct:function G(ae,we){if("function"!=typeof ae._construct)return;const Oe=ae._readableState,ke=ae._writableState;Oe&&(Oe.constructed=!1),ke&&(ke.constructed=!1),ae.once(C,we),!(ae.listenerCount(C)>1)&&ee.nextTick(w,ae)},destroyer:function Ce(ae,we){!ae||E(ae)||(!we&&!N(ae)&&(we=new j),te(ae)?(ae.socket=null,ae.destroy(we)):D(ae)?ae.abort():D(ae.req)?ae.req.abort():"function"==typeof ae.destroy?ae.destroy(we):"function"==typeof ae.close?ae.close():we?ee.nextTick(re,ae,we):ee.nextTick(ue,ae),ae.destroyed||(ae[x]=!0))},destroy:function S(ae,we){const Oe=this._readableState,ke=this._writableState,Ye=ke||Oe;return null!=ke&&ke.destroyed||null!=Oe&&Oe.destroyed?("function"==typeof we&&we(),this):(oe(ae,ke,Oe),ke&&(ke.destroyed=!0),Oe&&(Oe.destroyed=!0),Ye.constructed?k(this,ae,we):this.once(F,function(Qe){k(this,A(Qe,ae),we)}),this)},undestroy:function J(){const ae=this._readableState,we=this._writableState;ae&&(ae.constructed=!0,ae.closed=!1,ae.closeEmitted=!1,ae.destroyed=!1,ae.errored=null,ae.errorEmitted=!1,ae.reading=!1,ae.ended=!1===ae.readable,ae.endEmitted=!1===ae.readable),we&&(we.constructed=!0,we.destroyed=!1,we.closed=!1,we.closeEmitted=!1,we.errored=null,we.errorEmitted=!1,we.finalCalled=!1,we.prefinished=!1,we.ended=!1===we.writable,we.ending=!1===we.writable,we.finished=!1===we.writable)},errorOrDestroy:U}},9613:(Ge,ne,M)=>{"use strict";const{ObjectDefineProperties:ee,ObjectGetOwnPropertyDescriptor:A,ObjectKeys:$,ObjectSetPrototypeOf:j}=M(1251);Ge.exports=E;const W=M(5779),x=M(2983);j(E.prototype,W.prototype),j(E,W);{const C=$(x.prototype);for(let oe=0;oe<C.length;oe++){const S=C[oe];E.prototype[S]||(E.prototype[S]=x.prototype[S])}}function E(C){if(!(this instanceof E))return new E(C);W.call(this,C),x.call(this,C),C?(this.allowHalfOpen=!1!==C.allowHalfOpen,!1===C.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===C.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let N,F;function te(){return void 0===N&&(N={}),N}ee(E.prototype,{writable:{__proto__:null,...A(x.prototype,"writable")},writableHighWaterMark:{__proto__:null,...A(x.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...A(x.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...A(x.prototype,"writableBuffer")},writableLength:{__proto__:null,...A(x.prototype,"writableLength")},writableFinished:{__proto__:null,...A(x.prototype,"writableFinished")},writableCorked:{__proto__:null,...A(x.prototype,"writableCorked")},writableEnded:{__proto__:null,...A(x.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...A(x.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(C){this._readableState&&this._writableState&&(this._readableState.destroyed=C,this._writableState.destroyed=C)}}}),E.fromWeb=function(C,oe){return te().newStreamDuplexFromReadableWritablePair(C,oe)},E.toWeb=function(C){return te().newReadableWritablePairFromDuplex(C)},E.from=function(C){return F||(F=M(4803)),F(C,"body")}},4803:(Ge,ne,M)=>{var ee=M(9293).default,A=M(3344).default,$=M(2958).default;const j=M(573),W=M(2317),{isReadable:x,isWritable:E,isIterable:N,isNodeStream:te,isReadableNodeStream:F,isWritableNodeStream:C,isDuplexNodeStream:oe,isReadableStream:S,isWritableStream:k}=M(6110),ce=M(3139),{AbortError:X,codes:{ERR_INVALID_ARG_TYPE:K,ERR_INVALID_RETURN_VALUE:J}}=M(5480),{destroyer:U}=M(1509),G=M(9613),w=M(5779),I=M(2983),{createDeferredPromise:D}=M(1663),ue=M(3447),re=globalThis.Blob||W.Blob,Ce=typeof re<"u"?function(xe){return xe instanceof re}:function(xe){return!1},ae=globalThis.AbortController||M(9465).AbortController,{FunctionPrototypeCall:we}=M(1251);class Oe extends G{constructor(xe){super(xe),!1===xe?.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===xe?.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function Ye(Qe){const xe=Qe.readable&&"function"!=typeof Qe.readable.read?w.wrap(Qe.readable):Qe.readable,Be=Qe.writable;let pe,be,nt,_t,je,Ie=!!x(xe),et=!!E(Be);function Q(se){const Ae=_t;_t=null,Ae?Ae(se):se&&je.destroy(se)}return je=new Oe({readableObjectMode:!(null==xe||!xe.readableObjectMode),writableObjectMode:!(null==Be||!Be.writableObjectMode),readable:Ie,writable:et}),et&&(ce(Be,se=>{et=!1,se&&U(xe,se),Q(se)}),je._write=function(se,Ae,Fe){Be.write(se,Ae)?Fe():pe=Fe},je._final=function(se){Be.end(),be=se},Be.on("drain",function(){if(pe){const se=pe;pe=null,se()}}),Be.on("finish",function(){if(be){const se=be;be=null,se()}})),Ie&&(ce(xe,se=>{Ie=!1,se&&U(xe,se),Q(se)}),xe.on("readable",function(){if(nt){const se=nt;nt=null,se()}}),xe.on("end",function(){je.push(null)}),je._read=function(){for(;;){const se=xe.read();if(null===se)return void(nt=je._read);if(!je.push(se))return}}),je._destroy=function(se,Ae){!se&&null!==_t&&(se=new X),nt=null,pe=null,be=null,null===_t?Ae(se):(_t=Ae,U(Be,se),U(xe,se))},je}Ge.exports=function Qe(xe,Be){if(oe(xe))return xe;if(F(xe))return Ye({readable:xe});if(C(xe))return Ye({writable:xe});if(te(xe))return Ye({writable:!1,readable:!1});if(S(xe))return Ye({readable:w.fromWeb(xe)});if(k(xe))return Ye({writable:I.fromWeb(xe)});if("function"==typeof xe){const{value:et,write:pe,final:be,destroy:nt}=function ke(Qe){let{promise:xe,resolve:Be}=D();const Ie=new ae,et=Ie.signal;return{value:Qe($(function*(){for(;;){const be=xe;xe=null;const{chunk:nt,done:_t,cb:je}=yield A(be);if(j.nextTick(je),_t)return;if(et.aborted)throw new X(void 0,{cause:et.reason});({promise:xe,resolve:Be}=D()),yield nt}})(),{signal:et}),write(be,nt,_t){const je=Be;Be=null,je({chunk:be,done:!1,cb:_t})},final(be){const nt=Be;Be=null,nt({done:!0,cb:be})},destroy(be,nt){Ie.abort(),nt(be)}}}(xe);if(N(et))return ue(Oe,et,{objectMode:!0,write:pe,final:be,destroy:nt});const _t=et?.then;if("function"==typeof _t){let je;const Q=we(_t,et,se=>{if(null!=se)throw new J("nully","body",se)},se=>{U(je,se)});return je=new Oe({objectMode:!0,readable:!1,write:pe,final(se){be(ee(function*(){try{yield Q,j.nextTick(se,null)}catch(Ae){j.nextTick(se,Ae)}}))},destroy:nt})}throw new J("Iterable, AsyncIterable or AsyncFunction",Be,et)}if(Ce(xe))return Qe(xe.arrayBuffer());if(N(xe))return ue(Oe,xe,{objectMode:!0,writable:!1});if(S(xe?.readable)&&k(xe?.writable))return Oe.fromWeb(xe);if("object"==typeof xe?.writable||"object"==typeof xe?.readable)return Ye({readable:null!=xe&&xe.readable?F(xe?.readable)?xe?.readable:Qe(xe.readable):void 0,writable:null!=xe&&xe.writable?C(xe?.writable)?xe?.writable:Qe(xe.writable):void 0});const Ie=xe?.then;if("function"==typeof Ie){let et;return we(Ie,xe,pe=>{null!=pe&&et.push(pe),et.push(null)},pe=>{U(et,pe)}),et=new Oe({objectMode:!0,writable:!1,read(){}})}throw new K(Be,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],xe)}},3139:(Ge,ne,M)=>{const ee=M(573),{AbortError:A,codes:$}=M(5480),{ERR_INVALID_ARG_TYPE:j,ERR_STREAM_PREMATURE_CLOSE:W}=$,{kEmptyObject:x,once:E}=M(1663),{validateAbortSignal:N,validateFunction:te,validateObject:F,validateBoolean:C}=M(438),{Promise:oe,PromisePrototypeThen:S,SymbolDispose:k}=M(1251),{isClosed:ce,isReadable:X,isReadableNodeStream:K,isReadableStream:J,isReadableFinished:U,isReadableErrored:G,isWritable:w,isWritableNodeStream:I,isWritableStream:D,isWritableFinished:ue,isWritableErrored:re,isNodeStream:Ce,willEmitClose:ae,kIsClosedPromise:we}=M(6110);let Oe;const Ye=()=>{};function Qe(Ie,et,pe){var be,nt;if(2===arguments.length?(pe=et,et=x):null==et?et=x:F(et,"options"),te(pe,"callback"),N(et.signal,"options.signal"),pe=E(pe),J(Ie)||D(Ie))return function xe(Ie,et,pe){let be=!1,nt=Ye;if(et.signal)if(nt=()=>{be=!0,pe.call(Ie,new A(void 0,{cause:et.signal.reason}))},et.signal.aborted)ee.nextTick(nt);else{Oe=Oe||M(1663).addAbortListener;const je=Oe(et.signal,nt),Q=pe;pe=E((...se)=>{je[k](),Q.apply(Ie,se)})}const _t=(...je)=>{be||ee.nextTick(()=>pe.apply(Ie,je))};return S(Ie[we].promise,_t,_t),Ye}(Ie,et,pe);if(!Ce(Ie))throw new j("stream",["ReadableStream","WritableStream","Stream"],Ie);const _t=null!==(be=et.readable)&&void 0!==be?be:K(Ie),je=null!==(nt=et.writable)&&void 0!==nt?nt:I(Ie),Q=Ie._writableState,se=Ie._readableState,Ae=()=>{Ie.writable||Je()};let Fe=ae(Ie)&&K(Ie)===_t&&I(Ie)===je,Te=ue(Ie,!1);const Je=()=>{Te=!0,Ie.destroyed&&(Fe=!1),(!Fe||Ie.readable&&!_t)&&(!_t||ot)&&pe.call(Ie)};let ot=U(Ie,!1);const ut=()=>{ot=!0,Ie.destroyed&&(Fe=!1),(!Fe||Ie.writable&&!je)&&(!je||Te)&&pe.call(Ie)},Le=ve=>{pe.call(Ie,ve)};let Z=ce(Ie);const O=()=>{Z=!0;const ve=re(Ie)||G(Ie);return ve&&"boolean"!=typeof ve?pe.call(Ie,ve):_t&&!ot&&K(Ie,!0)&&!U(Ie,!1)?pe.call(Ie,new W):!je||Te||ue(Ie,!1)?void pe.call(Ie):pe.call(Ie,new W)},P=()=>{Z=!0;const ve=re(Ie)||G(Ie);if(ve&&"boolean"!=typeof ve)return pe.call(Ie,ve);pe.call(Ie)},_e=()=>{Ie.req.on("finish",Je)};!function ke(Ie){return Ie.setHeader&&"function"==typeof Ie.abort}(Ie)?je&&!Q&&(Ie.on("end",Ae),Ie.on("close",Ae)):(Ie.on("complete",Je),Fe||Ie.on("abort",O),Ie.req?_e():Ie.on("request",_e)),!Fe&&"boolean"==typeof Ie.aborted&&Ie.on("aborted",O),Ie.on("end",ut),Ie.on("finish",Je),!1!==et.error&&Ie.on("error",Le),Ie.on("close",O),Z?ee.nextTick(O):null!=Q&&Q.errorEmitted||null!=se&&se.errorEmitted?Fe||ee.nextTick(P):(!_t&&(!Fe||X(Ie))&&(Te||!1===w(Ie))||!je&&(!Fe||w(Ie))&&(ot||!1===X(Ie))||se&&Ie.req&&Ie.aborted)&&ee.nextTick(P);const ze=()=>{pe=Ye,Ie.removeListener("aborted",O),Ie.removeListener("complete",Je),Ie.removeListener("abort",O),Ie.removeListener("request",_e),Ie.req&&Ie.req.removeListener("finish",Je),Ie.removeListener("end",Ae),Ie.removeListener("close",Ae),Ie.removeListener("finish",Je),Ie.removeListener("end",ut),Ie.removeListener("error",Le),Ie.removeListener("close",O)};if(et.signal&&!Z){const ve=()=>{const Ve=pe;ze(),Ve.call(Ie,new A(void 0,{cause:et.signal.reason}))};if(et.signal.aborted)ee.nextTick(ve);else{Oe=Oe||M(1663).addAbortListener;const Ve=Oe(et.signal,ve),Ke=pe;pe=E((...vt)=>{Ve[k](),Ke.apply(Ie,vt)})}}return ze}Ge.exports=Qe,Ge.exports.finished=function Be(Ie,et){var pe;let be=!1;return null===et&&(et=x),null!==(pe=et)&&void 0!==pe&&pe.cleanup&&(C(et.cleanup,"cleanup"),be=et.cleanup),new oe((nt,_t)=>{const je=Qe(Ie,et,Q=>{be&&je(),Q?_t(Q):nt()})})}},3447:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;const A=M(573),{PromisePrototypeThen:$,SymbolAsyncIterator:j,SymbolIterator:W}=M(1251),{Buffer:x}=M(2317),{ERR_INVALID_ARG_TYPE:E,ERR_STREAM_NULL_VALUES:N}=M(5480).codes;Ge.exports=function te(F,C,oe){let S,k;if("string"==typeof C||C instanceof x)return new F({objectMode:!0,...oe,read(){this.push(C),this.push(null)}});if(C&&C[j])k=!0,S=C[j]();else{if(!C||!C[W])throw new E("iterable",["Iterable"],C);k=!1,S=C[W]()}const ce=new F({objectMode:!0,highWaterMark:1,...oe});let X=!1;function J(){return(J=ee(function*(w){if(null!=w&&"function"==typeof S.throw){const{value:ue,done:re}=yield S.throw(w);if(yield ue,re)return}if("function"==typeof S.return){const{value:ue}=yield S.return();yield ue}})).apply(this,arguments)}function G(){return(G=ee(function*(){for(;;){try{const{value:w,done:I}=k?yield S.next():S.next();if(I)ce.push(null);else{const D=w&&"function"==typeof w.then?yield w:w;if(null===D)throw X=!1,new N;if(ce.push(D))continue;X=!1}}catch(w){ce.destroy(w)}break}})).apply(this,arguments)}return ce._read=function(){X||(X=!0,function U(){G.apply(this,arguments)}())},ce._destroy=function(w,I){$(function K(w){return J.apply(this,arguments)}(w),()=>A.nextTick(I,w),D=>A.nextTick(I,D||w))},ce}},8708:(Ge,ne,M)=>{"use strict";const{ArrayIsArray:ee,ObjectSetPrototypeOf:A}=M(1251),{EventEmitter:$}=M(4356);function j(x){$.call(this,x)}function W(x,E,N){if("function"==typeof x.prependListener)return x.prependListener(E,N);x._events&&x._events[E]?ee(x._events[E])?x._events[E].unshift(N):x._events[E]=[N,x._events[E]]:x.on(E,N)}A(j.prototype,$.prototype),A(j,$),j.prototype.pipe=function(x,E){const N=this;function te(X){x.writable&&!1===x.write(X)&&N.pause&&N.pause()}function F(){N.readable&&N.resume&&N.resume()}N.on("data",te),x.on("drain",F),!x._isStdio&&(!E||!1!==E.end)&&(N.on("end",oe),N.on("close",S));let C=!1;function oe(){C||(C=!0,x.end())}function S(){C||(C=!0,"function"==typeof x.destroy&&x.destroy())}function k(X){ce(),0===$.listenerCount(this,"error")&&this.emit("error",X)}function ce(){N.removeListener("data",te),x.removeListener("drain",F),N.removeListener("end",oe),N.removeListener("close",S),N.removeListener("error",k),x.removeListener("error",k),N.removeListener("end",ce),N.removeListener("close",ce),x.removeListener("close",ce)}return W(N,"error",k),W(x,"error",k),N.on("end",ce),N.on("close",ce),x.on("close",ce),x.emit("pipe",N),x},Ge.exports={Stream:j,prependListener:W}},1210:(Ge,ne,M)=>{"use strict";var ee=M(9293).default,A=M(3513).default,$=M(2881).default,j=M(3344).default,W=M(2958).default;const x=globalThis.AbortController||M(9465).AbortController,{codes:{ERR_INVALID_ARG_VALUE:E,ERR_INVALID_ARG_TYPE:N,ERR_MISSING_ARGS:te,ERR_OUT_OF_RANGE:F},AbortError:C}=M(5480),{validateAbortSignal:oe,validateInteger:S,validateObject:k}=M(438),ce=M(1251).Symbol("kWeak"),X=M(1251).Symbol("kResistStopPropagation"),{finished:K}=M(3139),J=M(6683),{addAbortSignalNoValidate:U}=M(8992),{isWritable:G,isNodeStream:w}=M(6110),{deprecate:I}=M(1663),{ArrayPrototypePush:D,Boolean:ue,MathFloor:re,Number:Ce,NumberIsNaN:ae,Promise:we,PromiseReject:Oe,PromiseResolve:ke,PromisePrototypeThen:Ye,Symbol:Qe}=M(1251),xe=Qe("kEmpty"),Be=Qe("kEof");function et(ve,Ve){if("function"!=typeof ve)throw new N("fn",["Function","AsyncFunction"],ve);null!=Ve&&k(Ve,"options"),null!=Ve?.signal&&oe(Ve.signal,"options.signal");let Ke=1;null!=Ve?.concurrency&&(Ke=re(Ve.concurrency));let vt=Ke-1;return null!=Ve?.highWaterMark&&(vt=re(Ve.highWaterMark)),S(Ke,"options.concurrency",1),S(vt,"options.highWaterMark",0),vt+=Ke,function(){var Ot=W(function*(){const Bt=M(1663).AbortSignalAny([Ve?.signal].filter(ue)),he=this,B=[],z={signal:Bt};let Ne,Ze,ct=!1,wt=0;function Qt(){ct=!0,gn()}function gn(){wt-=1,In()}function In(){Ze&&!ct&&wt<Ke&&B.length<vt&&(Ze(),Ze=null)}function rn(){return(rn=ee(function*(){try{var fi,Fi=!1,Or=!1;try{for(var vi,ai=$(he);Fi=!(vi=yield ai.next()).done;Fi=!1){let ji=vi.value;if(ct)return;if(Bt.aborted)throw new C;try{if(ji=ve(ji,z),ji===xe)continue;ji=ke(ji)}catch($i){ji=Oe($i)}wt+=1,Ye(ji,gn,Qt),B.push(ji),Ne&&(Ne(),Ne=null),!ct&&(B.length>=vt||wt>=Ke)&&(yield new we($i=>{Ze=$i}))}}catch(ji){Or=!0,fi=ji}finally{try{Fi&&null!=ai.return&&(yield ai.return())}finally{if(Or)throw fi}}B.push(Be)}catch(ji){const $i=Oe(ji);Ye($i,gn,Qt),B.push($i)}finally{ct=!0,Ne&&(Ne(),Ne=null)}})).apply(this,arguments)}!function un(){rn.apply(this,arguments)}();try{for(;;){for(;B.length>0;){const Fi=yield j(B[0]);if(Fi===Be)return;if(Bt.aborted)throw new C;Fi!==xe&&(yield Fi),B.shift(),In()}yield j(new we(Fi=>{Ne=Fi}))}}finally{ct=!0,Ze&&(Ze(),Ze=null)}});return function Et(){return Ot.apply(this,arguments)}}().call(this)}function be(ve){return nt.apply(this,arguments)}function nt(){return(nt=ee(function*(ve,Ve=void 0){var Ot,Ke=!1,vt=!1;try{for(var Et=$(Te.call(this,ve,Ve));Ke=!(yield Et.next()).done;Ke=!1)return!0}catch(he){vt=!0,Ot=he}finally{try{Ke&&null!=Et.return&&(yield Et.return())}finally{if(vt)throw Ot}}return!1})).apply(this,arguments)}function je(){return(je=ee(function*(ve,Ve=void 0){if("function"!=typeof ve)throw new N("fn",["Function","AsyncFunction"],ve);return!(yield be.call(this,ee(function*(...Ke){return!(yield ve(...Ke))}),Ve))})).apply(this,arguments)}function se(){return(se=ee(function*(ve,Ve){var Ot,Ke=!1,vt=!1;try{for(var Bt,Et=$(Te.call(this,ve,Ve));Ke=!(Bt=yield Et.next()).done;Ke=!1)return Bt.value}catch(he){vt=!0,Ot=he}finally{try{Ke&&null!=Et.return&&(yield Et.return())}finally{if(vt)throw Ot}}})).apply(this,arguments)}function Fe(){return Fe=ee(function*(ve,Ve){if("function"!=typeof ve)throw new N("fn",["Function","AsyncFunction"],ve);function vt(){return(vt=ee(function*(z,Ne){return yield ve(z,Ne),xe})).apply(this,arguments)}var Bt,Ot=!1,Et=!1;try{for(var he=$(et.call(this,function Ke(z,Ne){return vt.apply(this,arguments)},Ve));Ot=!(yield he.next()).done;Ot=!1);}catch(z){Et=!0,Bt=z}finally{try{Ot&&null!=he.return&&(yield he.return())}finally{if(Et)throw Bt}}}),Fe.apply(this,arguments)}function Te(ve,Ve){if("function"!=typeof ve)throw new N("fn",["Function","AsyncFunction"],ve);function vt(){return(vt=ee(function*(Ot,Et){return(yield ve(Ot,Et))?Ot:xe})).apply(this,arguments)}return et.call(this,function Ke(Ot,Et){return vt.apply(this,arguments)},Ve)}class Je extends te{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function ut(){return ut=ee(function*(ve,Ve,Ke){var vt;if("function"!=typeof ve)throw new N("reducer",["Function","AsyncFunction"],ve);null!=Ke&&k(Ke,"options"),null!=Ke?.signal&&oe(Ke.signal,"options.signal");let Ot=arguments.length>1;if(null!=Ke&&null!==(vt=Ke.signal)&&void 0!==vt&&vt.aborted){const Qt=new C(void 0,{cause:Ke.signal.reason});throw this.once("error",()=>{}),yield K(this.destroy(Qt)),Qt}const Et=new x,Bt=Et.signal;null!=Ke&&Ke.signal&&Ke.signal.addEventListener("abort",()=>Et.abort(),{once:!0,[ce]:this,[X]:!0});let he=!1;try{var Ne,B=!1,z=!1;try{for(var ct,Ze=$(this);B=!(ct=yield Ze.next()).done;B=!1){const Qt=ct.value;var wt;if(he=!0,null!=Ke&&null!==(wt=Ke.signal)&&void 0!==wt&&wt.aborted)throw new C;Ot?Ve=yield ve(Ve,Qt,{signal:Bt}):(Ve=Qt,Ot=!0)}}catch(Qt){z=!0,Ne=Qt}finally{try{B&&null!=Ze.return&&(yield Ze.return())}finally{if(z)throw Ne}}if(!he&&!Ot)throw new Je}finally{Et.abort()}return Ve}),ut.apply(this,arguments)}function Z(){return(Z=ee(function*(ve){null!=ve&&k(ve,"options"),null!=ve?.signal&&oe(ve.signal,"options.signal");const Ve=[];var Ot,Ke=!1,vt=!1;try{for(var Bt,Et=$(this);Ke=!(Bt=yield Et.next()).done;Ke=!1){const B=Bt.value;var he;if(null!=ve&&null!==(he=ve.signal)&&void 0!==he&&he.aborted)throw new C(void 0,{cause:ve.signal.reason});D(Ve,B)}}catch(B){vt=!0,Ot=B}finally{try{Ke&&null!=Et.return&&(yield Et.return())}finally{if(vt)throw Ot}}return Ve})).apply(this,arguments)}function P(ve){if(ve=Ce(ve),ae(ve))return 0;if(ve<0)throw new F("number",">= 0",ve);return ve}Ge.exports.streamReturningOperators={asIndexedPairs:I(function pe(ve=void 0){return null!=ve&&k(ve,"options"),null!=ve?.signal&&oe(ve.signal,"options.signal"),function(){var Ve=W(function*(){let vt=0;var Bt,Ot=!1,Et=!1;try{for(var B,he=$(this);Ot=!(B=yield j(he.next())).done;Ot=!1){const Ne=B.value;var z;if(null!=ve&&null!==(z=ve.signal)&&void 0!==z&&z.aborted)throw new C({cause:ve.signal.reason});yield[vt++,Ne]}}catch(Ne){Et=!0,Bt=Ne}finally{try{Ot&&null!=he.return&&(yield j(he.return()))}finally{if(Et)throw Bt}}});return function Ke(){return Ve.apply(this,arguments)}}().call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function _e(ve,Ve=void 0){return null!=Ve&&k(Ve,"options"),null!=Ve?.signal&&oe(Ve.signal,"options.signal"),ve=P(ve),function(){var Ke=W(function*(){var Ot;if(null!=Ve&&null!==(Ot=Ve.signal)&&void 0!==Ot&&Ot.aborted)throw new C;var he,Et=!1,Bt=!1;try{for(var z,B=$(this);Et=!(z=yield j(B.next())).done;Et=!1){const Ze=z.value;var Ne;if(null!=Ve&&null!==(Ne=Ve.signal)&&void 0!==Ne&&Ne.aborted)throw new C;ve--<=0&&(yield Ze)}}catch(Ze){Bt=!0,he=Ze}finally{try{Et&&null!=B.return&&(yield j(B.return()))}finally{if(Bt)throw he}}});return function vt(){return Ke.apply(this,arguments)}}().call(this)},filter:Te,flatMap:function O(ve,Ve){const Ke=et.call(this,ve,Ve);return function(){var vt=W(function*(){var he,Et=!1,Bt=!1;try{for(var z,B=$(Ke);Et=!(z=yield j(B.next())).done;Et=!1){const Ne=z.value;yield*A($(Ne),j)}}catch(Ne){Bt=!0,he=Ne}finally{try{Et&&null!=B.return&&(yield j(B.return()))}finally{if(Bt)throw he}}});return function Ot(){return vt.apply(this,arguments)}}().call(this)},map:et,take:function ze(ve,Ve=void 0){return null!=Ve&&k(Ve,"options"),null!=Ve?.signal&&oe(Ve.signal,"options.signal"),ve=P(ve),function(){var Ke=W(function*(){var Ot;if(null!=Ve&&null!==(Ot=Ve.signal)&&void 0!==Ot&&Ot.aborted)throw new C;var he,Et=!1,Bt=!1;try{for(var z,B=$(this);Et=!(z=yield j(B.next())).done;Et=!1){const Ze=z.value;var Ne;if(null!=Ve&&null!==(Ne=Ve.signal)&&void 0!==Ne&&Ne.aborted)throw new C;if(ve-- >0&&(yield Ze),ve<=0)return}}catch(Ze){Bt=!0,he=Ze}finally{try{Et&&null!=B.return&&(yield j(B.return()))}finally{if(Bt)throw he}}});return function vt(){return Ke.apply(this,arguments)}}().call(this)},compose:function Ie(ve,Ve){if(null!=Ve&&k(Ve,"options"),null!=Ve?.signal&&oe(Ve.signal,"options.signal"),w(ve)&&!G(ve))throw new E("stream",ve,"must be writable");const Ke=J(this,ve);return null!=Ve&&Ve.signal&&U(Ve.signal,Ke),Ke}},Ge.exports.promiseReturningOperators={every:function _t(ve){return je.apply(this,arguments)},forEach:function Ae(ve,Ve){return Fe.apply(this,arguments)},reduce:function ot(ve,Ve,Ke){return ut.apply(this,arguments)},toArray:function Le(ve){return Z.apply(this,arguments)},some:be,find:function Q(ve,Ve){return se.apply(this,arguments)}}},6569:(Ge,ne,M)=>{"use strict";const{ObjectSetPrototypeOf:ee}=M(1251);Ge.exports=$;const A=M(9059);function $(j){if(!(this instanceof $))return new $(j);A.call(this,j)}ee($.prototype,A.prototype),ee($,A),$.prototype._transform=function(j,W,x){x(null,j)}},6249:(Ge,ne,M)=>{var ee=M(9293).default,A=M(2958).default,$=M(3344).default,j=M(3513).default,W=M(2881).default;const x=M(573),{ArrayIsArray:E,Promise:N,SymbolAsyncIterator:te,SymbolDispose:F}=M(1251),C=M(3139),{once:oe}=M(1663),S=M(1509),k=M(9613),{aggregateTwoErrors:ce,codes:{ERR_INVALID_ARG_TYPE:X,ERR_INVALID_RETURN_VALUE:K,ERR_MISSING_ARGS:J,ERR_STREAM_DESTROYED:U,ERR_STREAM_PREMATURE_CLOSE:G},AbortError:w}=M(5480),{validateFunction:I,validateAbortSignal:D}=M(438),{isIterable:ue,isReadable:re,isReadableNodeStream:Ce,isNodeStream:ae,isTransformStream:we,isWebStream:Oe,isReadableStream:ke,isReadableFinished:Ye}=M(6110),Qe=globalThis.AbortController||M(9465).AbortController;let xe,Be,Ie;function et(ot,ut,Le){let Z=!1;return ot.on("close",()=>{Z=!0}),{destroy:P=>{Z||(Z=!0,S.destroyer(ot,P||new U("pipe")))},cleanup:C(ot,{readable:ut,writable:Le},P=>{Z=!P})}}function be(ot){if(ue(ot))return ot;if(Ce(ot))return function nt(ot){return _t.apply(this,arguments)}(ot);throw new X("val",["Readable","Iterable","AsyncIterable"],ot)}function _t(){return(_t=A(function*(ot){Be||(Be=M(5779)),yield*j(W(Be.prototype[te].call(ot)),$)})).apply(this,arguments)}function je(ot,ut,Le,Z){return Q.apply(this,arguments)}function Q(){return(Q=ee(function*(ot,ut,Le,{end:Z}){let O,P=null;const _e=Bt=>{if(Bt&&(O=Bt),P){const he=P;P=null,he()}},ze=()=>new N((Bt,he)=>{O?he(O):P=()=>{O?he(O):Bt()}});ut.on("drain",_e);const ve=C(ut,{readable:!1},_e);try{ut.writableNeedDrain&&(yield ze());var vt,Ve=!1,Ke=!1;try{for(var Et,Ot=W(ot);Ve=!(Et=yield Ot.next()).done;Ve=!1)ut.write(Et.value)||(yield ze())}catch(Bt){Ke=!0,vt=Bt}finally{try{Ve&&null!=Ot.return&&(yield Ot.return())}finally{if(Ke)throw vt}}Z&&(ut.end(),yield ze()),Le()}catch(Bt){Le(O!==Bt?ce(O,Bt):Bt)}finally{ve(),ut.off("drain",_e)}})).apply(this,arguments)}function se(ot,ut,Le,Z){return Ae.apply(this,arguments)}function Ae(){return(Ae=ee(function*(ot,ut,Le,{end:Z}){we(ut)&&(ut=ut.writable);const O=ut.getWriter();try{var ze,P=!1,_e=!1;try{for(var Ve,ve=W(ot);P=!(Ve=yield ve.next()).done;P=!1){const Ke=Ve.value;yield O.ready,O.write(Ke).catch(()=>{})}}catch(Ke){_e=!0,ze=Ke}finally{try{P&&null!=ve.return&&(yield ve.return())}finally{if(_e)throw ze}}yield O.ready,Z&&(yield O.close()),Le()}catch(Ke){try{yield O.abort(Ke),Le(Ke)}catch(vt){Le(vt)}}})).apply(this,arguments)}function Te(ot,ut,Le){if(1===ot.length&&E(ot[0])&&(ot=ot[0]),ot.length<2)throw new J("streams");const Z=new Qe,O=Z.signal,P=Le?.signal,_e=[];function ze(){Bt(new w)}let ve,Ve,Ke;D(P,"options.signal"),Ie=Ie||M(1663).addAbortListener,P&&(ve=Ie(P,ze));const vt=[];let he,Ot=0;function Et(Ze){Bt(Ze,0==--Ot)}function Bt(Ze,ct){var wt;if(Ze&&(!Ve||"ERR_STREAM_PREMATURE_CLOSE"===Ve.code)&&(Ve=Ze),Ve||ct){for(;vt.length;)vt.shift()(Ve);null===(wt=ve)||void 0===wt||wt[F](),Z.abort(),ct&&(Ve||_e.forEach(Qt=>Qt()),x.nextTick(ut,Ve,Ke))}}for(let Ze=0;Ze<ot.length;Ze++){const ct=ot[Ze],wt=Ze<ot.length-1,Qt=Ze>0,gn=wt||!1!==Le?.end,In=Ze===ot.length-1;if(ae(ct)){let un=function(rn){rn&&"AbortError"!==rn.name&&"ERR_STREAM_PREMATURE_CLOSE"!==rn.code&&Et(rn)};if(gn){const{destroy:rn,cleanup:Fi}=et(ct,wt,Qt);vt.push(rn),re(ct)&&In&&_e.push(Fi)}ct.on("error",un),re(ct)&&In&&_e.push(()=>{ct.removeListener("error",un)})}if(0===Ze)if("function"==typeof ct){if(he=ct({signal:O}),!ue(he))throw new K("Iterable, AsyncIterable or Stream","source",he)}else he=ue(ct)||Ce(ct)||we(ct)?ct:k.from(ct);else if("function"==typeof ct){var B;if(he=we(he)?be(null===(B=he)||void 0===B?void 0:B.readable):be(he),he=ct(he,{signal:O}),wt){if(!ue(he,!0))throw new K("AsyncIterable",`transform[${Ze-1}]`,he)}else{var z;xe||(xe=M(6569));const un=new xe({objectMode:!0}),rn=null===(z=he)||void 0===z?void 0:z.then;if("function"==typeof rn)Ot++,rn.call(he,fi=>{Ke=fi,null!=fi&&un.write(fi),gn&&un.end(),x.nextTick(Et)},fi=>{un.destroy(fi),x.nextTick(Et,fi)});else if(ue(he,!0))Ot++,je(he,un,Et,{end:gn});else{if(!ke(he)&&!we(he))throw new K("AsyncIterable or Promise","destination",he);Ot++,je(he.readable||he,un,Et,{end:gn})}he=un;const{destroy:Fi,cleanup:Or}=et(he,!1,!0);vt.push(Fi),In&&_e.push(Or)}}else if(ae(ct)){if(Ce(he)){Ot+=2;const un=Je(he,ct,Et,{end:gn});re(ct)&&In&&_e.push(un)}else if(we(he)||ke(he))Ot++,je(he.readable||he,ct,Et,{end:gn});else{if(!ue(he))throw new X("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],he);Ot++,je(he,ct,Et,{end:gn})}he=ct}else if(Oe(ct)){if(Ce(he))Ot++,se(be(he),ct,Et,{end:gn});else if(ke(he)||ue(he))Ot++,se(he,ct,Et,{end:gn});else{if(!we(he))throw new X("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],he);Ot++,se(he.readable,ct,Et,{end:gn})}he=ct}else he=k.from(ct)}return(null!=O&&O.aborted||null!=P&&P.aborted)&&x.nextTick(ze),he}function Je(ot,ut,Le,{end:Z}){let O=!1;if(ut.on("close",()=>{O||Le(new G)}),ot.pipe(ut,{end:!1}),Z){let _e=function(){O=!0,ut.end()};Ye(ot)?x.nextTick(_e):ot.once("end",_e)}else Le();return C(ot,{readable:!0,writable:!1},_e=>{const ze=ot._readableState;_e&&"ERR_STREAM_PREMATURE_CLOSE"===_e.code&&ze&&ze.ended&&!ze.errored&&!ze.errorEmitted?ot.once("end",Le).once("error",Le):Le(_e)}),C(ut,{readable:!1,writable:!0},Le)}Ge.exports={pipelineImpl:Te,pipeline:function Fe(...ot){return Te(ot,oe(function pe(ot){return I(ot[ot.length-1],"streams[stream.length - 1]"),ot.pop()}(ot)))}}},5779:(Ge,ne,M)=>{var ee=M(3344).default,A=M(2958).default;const $=M(573),{ArrayPrototypeIndexOf:j,NumberIsInteger:W,NumberIsNaN:x,NumberParseInt:E,ObjectDefineProperties:N,ObjectKeys:te,ObjectSetPrototypeOf:F,Promise:C,SafeSet:oe,SymbolAsyncDispose:S,SymbolAsyncIterator:k,Symbol:ce}=M(1251);Ge.exports=Et,Et.ReadableState=Ot;const{EventEmitter:X}=M(4356),{Stream:K,prependListener:J}=M(8708),{Buffer:U}=M(2317),{addAbortSignal:G}=M(8992),w=M(3139);let I=M(1663).debuglog("stream",He=>{I=He});const D=M(9588),ue=M(1509),{getHighWaterMark:re,getDefaultHighWaterMark:Ce}=M(2934),{aggregateTwoErrors:ae,codes:{ERR_INVALID_ARG_TYPE:we,ERR_METHOD_NOT_IMPLEMENTED:Oe,ERR_OUT_OF_RANGE:ke,ERR_STREAM_PUSH_AFTER_EOF:Ye,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Qe},AbortError:xe}=M(5480),{validateObject:Be}=M(438),Ie=ce("kPaused"),{StringDecoder:et}=M(8454),pe=M(3447);F(Et.prototype,K.prototype),F(Et,K);const be=()=>{},{errorOrDestroy:nt}=ue,_t=1,Ae=16,Fe=32,Te=64,Z=2048,O=4096,ve=65536;function vt(He){return{enumerable:!1,get(){return!!(this.state&He)},set(qe){qe?this.state|=He:this.state&=~He}}}function Ot(He,qe,Nt){"boolean"!=typeof Nt&&(Nt=qe instanceof M(9613)),this.state=Z|O|Ae|Fe,He&&He.objectMode&&(this.state|=_t),Nt&&He&&He.readableObjectMode&&(this.state|=_t),this.highWaterMark=He?re(this,He,"readableHighWaterMark",Nt):Ce(!1),this.buffer=new D,this.length=0,this.pipes=[],this.flowing=null,this[Ie]=null,He&&!1===He.emitClose&&(this.state&=~Z),He&&!1===He.autoDestroy&&(this.state&=~O),this.errored=null,this.defaultEncoding=He&&He.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,He&&He.encoding&&(this.decoder=new et(He.encoding),this.encoding=He.encoding)}function Et(He){if(!(this instanceof Et))return new Et(He);const qe=this instanceof M(9613);this._readableState=new Ot(He,this,qe),He&&("function"==typeof He.read&&(this._read=He.read),"function"==typeof He.destroy&&(this._destroy=He.destroy),"function"==typeof He.construct&&(this._construct=He.construct),He.signal&&!qe&&G(He.signal,this)),K.call(this,He),ue.construct(this,()=>{this._readableState.needReadable&&Qt(this,this._readableState)})}function Bt(He,qe,Nt,At){I("readableAddChunk",qe);const en=He._readableState;let Vi;if(en.state&_t||("string"==typeof qe?en.encoding!==(Nt=Nt||en.defaultEncoding)&&(At&&en.encoding?qe=U.from(qe,Nt).toString(en.encoding):(qe=U.from(qe,Nt),Nt="")):qe instanceof U?Nt="":K._isUint8Array(qe)?(qe=K._uint8ArrayToBuffer(qe),Nt=""):null!=qe&&(Vi=new we("chunk",["string","Buffer","Uint8Array"],qe))),Vi)nt(He,Vi);else if(null===qe)en.state&=-9,function Ze(He,qe){if(I("onEofChunk"),!qe.ended){if(qe.decoder){const Nt=qe.decoder.end();Nt&&Nt.length&&(qe.buffer.push(Nt),qe.length+=qe.objectMode?1:Nt.length)}qe.ended=!0,qe.sync?ct(He):(qe.needReadable=!1,qe.emittedReadable=!0,wt(He))}}(He,en);else if(en.state&_t||qe&&qe.length>0)if(At)if(4&en.state)nt(He,new Qe);else{if(en.destroyed||en.errored)return!1;he(He,en,qe,!0)}else if(en.ended)nt(He,new Ye);else{if(en.destroyed||en.errored)return!1;en.state&=-9,en.decoder&&!Nt?(qe=en.decoder.write(qe),en.objectMode||0!==qe.length?he(He,en,qe,!1):Qt(He,en)):he(He,en,qe,!1)}else At||(en.state&=-9,Qt(He,en));return!en.ended&&(en.length<en.highWaterMark||0===en.length)}function he(He,qe,Nt,At){qe.flowing&&0===qe.length&&!qe.sync&&He.listenerCount("data")>0?(qe.state&ve?qe.awaitDrainWriters.clear():qe.awaitDrainWriters=null,qe.dataEmitted=!0,He.emit("data",Nt)):(qe.length+=qe.objectMode?1:Nt.length,At?qe.buffer.unshift(Nt):qe.buffer.push(Nt),qe.state&Te&&ct(He)),Qt(He,qe)}function Ne(He,qe){return He<=0||0===qe.length&&qe.ended?0:qe.state&_t?1:x(He)?qe.flowing&&qe.length?qe.buffer.first().length:qe.length:He<=qe.length?He:qe.ended?qe.length:0}function ct(He){const qe=He._readableState;I("emitReadable",qe.needReadable,qe.emittedReadable),qe.needReadable=!1,qe.emittedReadable||(I("emitReadable",qe.flowing),qe.emittedReadable=!0,$.nextTick(wt,He))}function wt(He){const qe=He._readableState;I("emitReadable_",qe.destroyed,qe.length,qe.ended),!qe.destroyed&&!qe.errored&&(qe.length||qe.ended)&&(He.emit("readable"),qe.emittedReadable=!1),qe.needReadable=!qe.flowing&&!qe.ended&&qe.length<=qe.highWaterMark,fi(He)}function Qt(He,qe){!qe.readingMore&&qe.constructed&&(qe.readingMore=!0,$.nextTick(gn,He,qe))}function gn(He,qe){for(;!qe.reading&&!qe.ended&&(qe.length<qe.highWaterMark||qe.flowing&&0===qe.length);){const Nt=qe.length;if(I("maybeReadMore read 0"),He.read(0),Nt===qe.length)break}qe.readingMore=!1}function un(He){const qe=He._readableState;qe.readableListening=He.listenerCount("readable")>0,qe.resumeScheduled&&!1===qe[Ie]?qe.flowing=!0:He.listenerCount("data")>0?He.resume():qe.readableListening||(qe.flowing=null)}function rn(He){I("readable nexttick read 0"),He.read(0)}function Or(He,qe){I("resume",qe.reading),qe.reading||He.read(0),qe.resumeScheduled=!1,He.emit("resume"),fi(He),qe.flowing&&!qe.reading&&He.read(0)}function fi(He){const qe=He._readableState;for(I("flow",qe.flowing);qe.flowing&&null!==He.read(););}function ai(He,qe){"function"!=typeof He.read&&(He=Et.wrap(He,{objectMode:!0}));const Nt=function vi(He,qe){return ji.apply(this,arguments)}(He,qe);return Nt.stream=He,Nt}function ji(){return(ji=A(function*(He,qe){let en,Nt=be;function At(Nr){this===He?(Nt(),Nt=be):Nt=Nr}He.on("readable",At);const Vi=w(He,{writable:!1},Nr=>{en=Nr?ae(en,Nr):null,Nt(),Nt=be});try{for(;;){const Nr=He.destroyed?null:He.read();if(null!==Nr)yield Nr;else{if(en)throw en;if(null===en)return;yield ee(new C(At))}}}catch(Nr){throw en=ae(en,Nr),en}finally{!en&&!1===qe?.destroyOnReturn||void 0!==en&&!He._readableState.autoDestroy?(He.off("readable",At),Vi()):ue.destroyer(He,null)}})).apply(this,arguments)}function $i(He,qe){if(0===qe.length)return null;let Nt;return qe.objectMode?Nt=qe.buffer.shift():!He||He>=qe.length?(Nt=qe.decoder?qe.buffer.join(""):1===qe.buffer.length?qe.buffer.first():qe.buffer.concat(qe.length),qe.buffer.clear()):Nt=qe.buffer.consume(He,qe.decoder),Nt}function Xs(He){const qe=He._readableState;I("endReadable",qe.endEmitted),qe.endEmitted||(qe.ended=!0,$.nextTick(ia,qe,He))}function ia(He,qe){if(I("endReadableNT",He.endEmitted,He.length),!He.errored&&!He.closeEmitted&&!He.endEmitted&&0===He.length)if(He.endEmitted=!0,qe.emit("end"),qe.writable&&!1===qe.allowHalfOpen)$.nextTick(Ys,qe);else if(He.autoDestroy){const Nt=qe._writableState;(!Nt||Nt.autoDestroy&&(Nt.finished||!1===Nt.writable))&&qe.destroy()}}function Ys(He){He.writable&&!He.writableEnded&&!He.destroyed&&He.end()}let Uo;function Vo(){return void 0===Uo&&(Uo={}),Uo}N(Ot.prototype,{objectMode:vt(_t),ended:vt(2),endEmitted:vt(4),reading:vt(8),constructed:vt(Ae),sync:vt(Fe),needReadable:vt(Te),emittedReadable:vt(128),readableListening:vt(256),resumeScheduled:vt(512),errorEmitted:vt(1024),emitClose:vt(Z),autoDestroy:vt(O),destroyed:vt(8192),closed:vt(16384),closeEmitted:vt(32768),multiAwaitDrain:vt(ve),readingMore:vt(1<<17),dataEmitted:vt(1<<18)}),Et.prototype.destroy=ue.destroy,Et.prototype._undestroy=ue.undestroy,Et.prototype._destroy=function(He,qe){qe(He)},Et.prototype[X.captureRejectionSymbol]=function(He){this.destroy(He)},Et.prototype[S]=function(){let He;return this.destroyed||(He=this.readableEnded?null:new xe,this.destroy(He)),new C((qe,Nt)=>w(this,At=>At&&At!==He?Nt(At):qe(null)))},Et.prototype.push=function(He,qe){return Bt(this,He,qe,!1)},Et.prototype.unshift=function(He,qe){return Bt(this,He,qe,!0)},Et.prototype.isPaused=function(){const He=this._readableState;return!0===He[Ie]||!1===He.flowing},Et.prototype.setEncoding=function(He){const qe=new et(He);this._readableState.decoder=qe,this._readableState.encoding=this._readableState.decoder.encoding;const Nt=this._readableState.buffer;let At="";for(const en of Nt)At+=qe.write(en);return Nt.clear(),""!==At&&Nt.push(At),this._readableState.length=At.length,this},Et.prototype.read=function(He){I("read",He),void 0===He?He=NaN:W(He)||(He=E(He,10));const qe=this._readableState,Nt=He;if(He>qe.highWaterMark&&(qe.highWaterMark=function z(He){if(He>1073741824)throw new ke("size","<= 1GiB",He);return He--,He|=He>>>1,He|=He>>>2,He|=He>>>4,He|=He>>>8,He|=He>>>16,++He}(He)),0!==He&&(qe.state&=-129),0===He&&qe.needReadable&&((0!==qe.highWaterMark?qe.length>=qe.highWaterMark:qe.length>0)||qe.ended))return I("read: emitReadable",qe.length,qe.ended),0===qe.length&&qe.ended?Xs(this):ct(this),null;if(0===(He=Ne(He,qe))&&qe.ended)return 0===qe.length&&Xs(this),null;let en,At=!!(qe.state&Te);if(I("need readable",At),(0===qe.length||qe.length-He<qe.highWaterMark)&&(At=!0,I("length less than watermark",At)),qe.ended||qe.reading||qe.destroyed||qe.errored||!qe.constructed)At=!1,I("reading, ended or constructing",At);else if(At){I("do read"),qe.state|=8|Fe,0===qe.length&&(qe.state|=Te);try{this._read(qe.highWaterMark)}catch(Vi){nt(this,Vi)}qe.state&=~Fe,qe.reading||(He=Ne(Nt,qe))}return en=He>0?$i(He,qe):null,null===en?(qe.needReadable=qe.length<=qe.highWaterMark,He=0):(qe.length-=He,qe.multiAwaitDrain?qe.awaitDrainWriters.clear():qe.awaitDrainWriters=null),0===qe.length&&(qe.ended||(qe.needReadable=!0),Nt!==He&&qe.ended&&Xs(this)),null!==en&&!qe.errorEmitted&&!qe.closeEmitted&&(qe.dataEmitted=!0,this.emit("data",en)),en},Et.prototype._read=function(He){throw new Oe("_read()")},Et.prototype.pipe=function(He,qe){const Nt=this,At=this._readableState;1===At.pipes.length&&(At.multiAwaitDrain||(At.multiAwaitDrain=!0,At.awaitDrainWriters=new oe(At.awaitDrainWriters?[At.awaitDrainWriters]:[]))),At.pipes.push(He),I("pipe count=%d opts=%j",At.pipes.length,qe);const Vi=qe&&!1===qe.end||He===$.stdout||He===$.stderr?De:ds;function ds(){I("onend"),He.end()}At.endEmitted?$.nextTick(Vi):Nt.once("end",Vi),He.on("unpipe",function Nr(rt,$e){I("onunpipe"),rt===Nt&&$e&&!1===$e.hasUnpiped&&($e.hasUnpiped=!0,function ye(){I("cleanup"),He.removeListener("close",H),He.removeListener("finish",Y),qt&&He.removeListener("drain",qt),He.removeListener("error",v),He.removeListener("unpipe",Nr),Nt.removeListener("end",ds),Nt.removeListener("end",De),Nt.removeListener("data",T),le=!0,qt&&At.awaitDrainWriters&&(!He._writableState||He._writableState.needDrain)&&qt()}())});let qt,le=!1;function de(){le||(1===At.pipes.length&&At.pipes[0]===He?(I("false write response, pause",0),At.awaitDrainWriters=He,At.multiAwaitDrain=!1):At.pipes.length>1&&At.pipes.includes(He)&&(I("false write response, pause",At.awaitDrainWriters.size),At.awaitDrainWriters.add(He)),Nt.pause()),qt||(qt=function In(He,qe){return function(){const At=He._readableState;At.awaitDrainWriters===qe?(I("pipeOnDrain",1),At.awaitDrainWriters=null):At.multiAwaitDrain&&(I("pipeOnDrain",At.awaitDrainWriters.size),At.awaitDrainWriters.delete(qe)),(!At.awaitDrainWriters||0===At.awaitDrainWriters.size)&&He.listenerCount("data")&&He.resume()}}(Nt,He),He.on("drain",qt))}function T(rt){I("ondata");const $e=He.write(rt);I("dest.write",$e),!1===$e&&de()}function v(rt){if(I("onerror",rt),De(),He.removeListener("error",v),0===He.listenerCount("error")){const $e=He._writableState||He._readableState;$e&&!$e.errorEmitted?nt(He,rt):He.emit("error",rt)}}function H(){He.removeListener("finish",Y),De()}function Y(){I("onfinish"),He.removeListener("close",H),De()}function De(){I("unpipe"),Nt.unpipe(He)}return Nt.on("data",T),J(He,"error",v),He.once("close",H),He.once("finish",Y),He.emit("pipe",Nt),!0===He.writableNeedDrain?de():At.flowing||(I("pipe resume"),Nt.resume()),He},Et.prototype.unpipe=function(He){const qe=this._readableState;if(0===qe.pipes.length)return this;if(!He){const en=qe.pipes;qe.pipes=[],this.pause();for(let Vi=0;Vi<en.length;Vi++)en[Vi].emit("unpipe",this,{hasUnpiped:!1});return this}const At=j(qe.pipes,He);return-1===At||(qe.pipes.splice(At,1),0===qe.pipes.length&&this.pause(),He.emit("unpipe",this,{hasUnpiped:!1})),this},Et.prototype.addListener=Et.prototype.on=function(He,qe){const Nt=K.prototype.on.call(this,He,qe),At=this._readableState;return"data"===He?(At.readableListening=this.listenerCount("readable")>0,!1!==At.flowing&&this.resume()):"readable"===He&&!At.endEmitted&&!At.readableListening&&(At.readableListening=At.needReadable=!0,At.flowing=!1,At.emittedReadable=!1,I("on readable",At.length,At.reading),At.length?ct(this):At.reading||$.nextTick(rn,this)),Nt},Et.prototype.off=Et.prototype.removeListener=function(He,qe){const Nt=K.prototype.removeListener.call(this,He,qe);return"readable"===He&&$.nextTick(un,this),Nt},Et.prototype.removeAllListeners=function(He){const qe=K.prototype.removeAllListeners.apply(this,arguments);return("readable"===He||void 0===He)&&$.nextTick(un,this),qe},Et.prototype.resume=function(){const He=this._readableState;return He.flowing||(I("resume"),He.flowing=!He.readableListening,function Fi(He,qe){qe.resumeScheduled||(qe.resumeScheduled=!0,$.nextTick(Or,He,qe))}(this,He)),He[Ie]=!1,this},Et.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[Ie]=!0,this},Et.prototype.wrap=function(He){let qe=!1;He.on("data",At=>{!this.push(At)&&He.pause&&(qe=!0,He.pause())}),He.on("end",()=>{this.push(null)}),He.on("error",At=>{nt(this,At)}),He.on("close",()=>{this.destroy()}),He.on("destroy",()=>{this.destroy()}),this._read=()=>{qe&&He.resume&&(qe=!1,He.resume())};const Nt=te(He);for(let At=1;At<Nt.length;At++){const en=Nt[At];void 0===this[en]&&"function"==typeof He[en]&&(this[en]=He[en].bind(He))}return this},Et.prototype[k]=function(){return ai(this)},Et.prototype.iterator=function(He){return void 0!==He&&Be(He,"options"),ai(this,He)},N(Et.prototype,{readable:{__proto__:null,get(){const He=this._readableState;return!(!He||!1===He.readable||He.destroyed||He.errorEmitted||He.endEmitted)},set(He){this._readableState&&(this._readableState.readable=!!He)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(He){this._readableState&&(this._readableState.flowing=He)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(He){this._readableState&&(this._readableState.destroyed=He)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),N(Ot.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[Ie]},set(He){this[Ie]=!!He}}}),Et._fromList=$i,Et.from=function(He,qe){return pe(Et,He,qe)},Et.fromWeb=function(He,qe){return Vo().newStreamReadableFromReadableStream(He,qe)},Et.toWeb=function(He,qe){return Vo().newReadableStreamFromStreamReadable(He,qe)},Et.wrap=function(He,qe){var Nt,At;return new Et({objectMode:null===(Nt=null!==(At=He.readableObjectMode)&&void 0!==At?At:He.objectMode)||void 0===Nt||Nt,...qe,destroy(en,Vi){ue.destroyer(He,en),Vi(en)}}).wrap(He)}},2934:(Ge,ne,M)=>{"use strict";const{MathFloor:ee,NumberIsInteger:A}=M(1251),{validateInteger:$}=M(438),{ERR_INVALID_ARG_VALUE:j}=M(5480).codes;let W=16384,x=16;function N(C){return C?x:W}Ge.exports={getHighWaterMark:function F(C,oe,S,k){const ce=function E(C,oe,S){return null!=C.highWaterMark?C.highWaterMark:oe?C[S]:null}(oe,k,S);if(null!=ce){if(!A(ce)||ce<0)throw new j(k?`options.${S}`:"options.highWaterMark",ce);return ee(ce)}return N(C.objectMode)},getDefaultHighWaterMark:N,setDefaultHighWaterMark:function te(C,oe){$(oe,"value",0),C?x=oe:W=oe}}},9059:(Ge,ne,M)=>{"use strict";const{ObjectSetPrototypeOf:ee,Symbol:A}=M(1251);Ge.exports=E;const{ERR_METHOD_NOT_IMPLEMENTED:$}=M(5480).codes,j=M(9613),{getHighWaterMark:W}=M(2934);ee(E.prototype,j.prototype),ee(E,j);const x=A("kCallback");function E(F){if(!(this instanceof E))return new E(F);const C=F?W(this,F,"readableHighWaterMark",!0):null;0===C&&(F={...F,highWaterMark:null,readableHighWaterMark:C,writableHighWaterMark:F.writableHighWaterMark||0}),j.call(this,F),this._readableState.sync=!1,this[x]=null,F&&("function"==typeof F.transform&&(this._transform=F.transform),"function"==typeof F.flush&&(this._flush=F.flush)),this.on("prefinish",te)}function N(F){"function"!=typeof this._flush||this.destroyed?(this.push(null),F&&F()):this._flush((C,oe)=>{C?F?F(C):this.destroy(C):(null!=oe&&this.push(oe),this.push(null),F&&F())})}function te(){this._final!==N&&N.call(this)}E.prototype._final=N,E.prototype._transform=function(F,C,oe){throw new $("_transform()")},E.prototype._write=function(F,C,oe){const S=this._readableState,k=this._writableState,ce=S.length;this._transform(F,C,(X,K)=>{X?oe(X):(null!=K&&this.push(K),k.ended||ce===S.length||S.length<S.highWaterMark?oe():this[x]=oe)})},E.prototype._read=function(){if(this[x]){const F=this[x];this[x]=null,F()}}},6110:(Ge,ne,M)=>{"use strict";const{SymbolAsyncIterator:ee,SymbolIterator:A,SymbolFor:$}=M(1251),j=$("nodejs.stream.destroyed"),W=$("nodejs.stream.errored"),x=$("nodejs.stream.readable"),E=$("nodejs.stream.writable"),N=$("nodejs.stream.disturbed"),te=$("nodejs.webstream.isClosedPromise"),F=$("nodejs.webstream.controllerErrorFunction");function C(pe,be=!1){var nt;return!(!pe||"function"!=typeof pe.pipe||"function"!=typeof pe.on||be&&("function"!=typeof pe.pause||"function"!=typeof pe.resume)||pe._writableState&&!1===(null===(nt=pe._readableState)||void 0===nt?void 0:nt.readable)||pe._writableState&&!pe._readableState)}function oe(pe){var be;return!(!pe||"function"!=typeof pe.write||"function"!=typeof pe.on||pe._readableState&&!1===(null===(be=pe._writableState)||void 0===be?void 0:be.writable))}function k(pe){return pe&&(pe._readableState||pe._writableState||"function"==typeof pe.write&&"function"==typeof pe.on||"function"==typeof pe.pipe&&"function"==typeof pe.on)}function ce(pe){return!(!pe||k(pe)||"function"!=typeof pe.pipeThrough||"function"!=typeof pe.getReader||"function"!=typeof pe.cancel)}function X(pe){return!(!pe||k(pe)||"function"!=typeof pe.getWriter||"function"!=typeof pe.abort)}function K(pe){return!(!pe||k(pe)||"object"!=typeof pe.readable||"object"!=typeof pe.writable)}function G(pe){if(!k(pe))return null;const _t=pe._writableState||pe._readableState;return!!(pe.destroyed||pe[j]||null!=_t&&_t.destroyed)}function w(pe){if(!oe(pe))return null;if(!0===pe.writableEnded)return!0;const be=pe._writableState;return(null==be||!be.errored)&&("boolean"!=typeof be?.ended?null:be.ended)}function ue(pe,be){if(!C(pe))return null;const nt=pe._readableState;return(null==nt||!nt.errored)&&("boolean"!=typeof nt?.endEmitted?null:!!(nt.endEmitted||!1===be&&!0===nt.ended&&0===nt.length))}function re(pe){return pe&&null!=pe[x]?pe[x]:"boolean"!=typeof pe?.readable?null:!G(pe)&&C(pe)&&pe.readable&&!ue(pe)}function Ce(pe){return pe&&null!=pe[E]?pe[E]:"boolean"!=typeof pe?.writable?null:!G(pe)&&oe(pe)&&pe.writable&&!w(pe)}function Ye(pe){return"boolean"==typeof pe._closed&&"boolean"==typeof pe._defaultKeepAlive&&"boolean"==typeof pe._removedConnection&&"boolean"==typeof pe._removedContLen}function Qe(pe){return"boolean"==typeof pe._sent100&&Ye(pe)}Ge.exports={isDestroyed:G,kIsDestroyed:j,isDisturbed:function Ie(pe){var be;return!(!pe||!(null!==(be=pe[N])&&void 0!==be?be:pe.readableDidRead||pe.readableAborted))},kIsDisturbed:N,isErrored:function et(pe){var be,nt,_t,je,Q,se,Ae,Fe,Te,Je;return!(!pe||!(null!==(be=null!==(nt=null!==(_t=null!==(je=null!==(Q=null!==(se=pe[W])&&void 0!==se?se:pe.readableErrored)&&void 0!==Q?Q:pe.writableErrored)&&void 0!==je?je:null===(Ae=pe._readableState)||void 0===Ae?void 0:Ae.errorEmitted)&&void 0!==_t?_t:null===(Fe=pe._writableState)||void 0===Fe?void 0:Fe.errorEmitted)&&void 0!==nt?nt:null===(Te=pe._readableState)||void 0===Te?void 0:Te.errored)&&void 0!==be?be:null!==(Je=pe._writableState)&&void 0!==Je&&Je.errored))},kIsErrored:W,isReadable:re,kIsReadable:x,kIsClosedPromise:te,kControllerErrorFunction:F,kIsWritable:E,isClosed:function ke(pe){if(!k(pe))return null;if("boolean"==typeof pe.closed)return pe.closed;const be=pe._writableState,nt=pe._readableState;return"boolean"==typeof be?.closed||"boolean"==typeof nt?.closed?be?.closed||nt?.closed:"boolean"==typeof pe._closed&&Ye(pe)?pe._closed:null},isDuplexNodeStream:function S(pe){return!(!pe||"function"!=typeof pe.pipe||!pe._readableState||"function"!=typeof pe.on||"function"!=typeof pe.write)},isFinished:function ae(pe,be){return k(pe)?!!G(pe)||!(!1!==be?.readable&&re(pe)||!1!==be?.writable&&Ce(pe)):null},isIterable:function U(pe,be){return null!=pe&&(!0===be?"function"==typeof pe[ee]:!1===be?"function"==typeof pe[A]:"function"==typeof pe[ee]||"function"==typeof pe[A])},isReadableNodeStream:C,isReadableStream:ce,isReadableEnded:function D(pe){if(!C(pe))return null;if(!0===pe.readableEnded)return!0;const be=pe._readableState;return!(!be||be.errored)&&("boolean"!=typeof be?.ended?null:be.ended)},isReadableFinished:ue,isReadableErrored:function Oe(pe){var be,nt;return k(pe)?pe.readableErrored?pe.readableErrored:null!==(be=null===(nt=pe._readableState)||void 0===nt?void 0:nt.errored)&&void 0!==be?be:null:null},isNodeStream:k,isWebStream:function J(pe){return ce(pe)||X(pe)||K(pe)},isWritable:Ce,isWritableNodeStream:oe,isWritableStream:X,isWritableEnded:w,isWritableFinished:function I(pe,be){if(!oe(pe))return null;if(!0===pe.writableFinished)return!0;const nt=pe._writableState;return(null==nt||!nt.errored)&&("boolean"!=typeof nt?.finished?null:!!(nt.finished||!1===be&&!0===nt.ended&&0===nt.length))},isWritableErrored:function we(pe){var be,nt;return k(pe)?pe.writableErrored?pe.writableErrored:null!==(be=null===(nt=pe._writableState)||void 0===nt?void 0:nt.errored)&&void 0!==be?be:null:null},isServerRequest:function xe(pe){var be;return"boolean"==typeof pe._consuming&&"boolean"==typeof pe._dumped&&void 0===(null===(be=pe.req)||void 0===be?void 0:be.upgradeOrConnect)},isServerResponse:Qe,willEmitClose:function Be(pe){if(!k(pe))return null;const _t=pe._writableState||pe._readableState;return!_t&&Qe(pe)||!!(_t&&_t.autoDestroy&&_t.emitClose&&!1===_t.closed)},isTransformStream:K}},2983:(Ge,ne,M)=>{const ee=M(573),{ArrayPrototypeSlice:A,Error:$,FunctionPrototypeSymbolHasInstance:j,ObjectDefineProperty:W,ObjectDefineProperties:x,ObjectSetPrototypeOf:E,StringPrototypeToLowerCase:N,Symbol:te,SymbolHasInstance:F}=M(1251);Ge.exports=Qe,Qe.WritableState=ke;const{EventEmitter:C}=M(4356),oe=M(8708).Stream,{Buffer:S}=M(2317),k=M(1509),{addAbortSignal:ce}=M(8992),{getHighWaterMark:X,getDefaultHighWaterMark:K}=M(2934),{ERR_INVALID_ARG_TYPE:J,ERR_METHOD_NOT_IMPLEMENTED:U,ERR_MULTIPLE_CALLBACK:G,ERR_STREAM_CANNOT_PIPE:w,ERR_STREAM_DESTROYED:I,ERR_STREAM_ALREADY_FINISHED:D,ERR_STREAM_NULL_VALUES:ue,ERR_STREAM_WRITE_AFTER_END:re,ERR_UNKNOWN_ENCODING:Ce}=M(5480).codes,{errorOrDestroy:ae}=k;function we(){}E(Qe.prototype,oe.prototype),E(Qe,oe);const Oe=te("kOnFinished");function ke(Le,Z,O){"boolean"!=typeof O&&(O=Z instanceof M(9613)),this.objectMode=!(!Le||!Le.objectMode),O&&(this.objectMode=this.objectMode||!(!Le||!Le.writableObjectMode)),this.highWaterMark=Le?X(this,Le,"writableHighWaterMark",O):K(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(Le&&!1===Le.decodeStrings),this.defaultEncoding=Le&&Le.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=pe.bind(void 0,Z),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,Ye(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Le||!1!==Le.emitClose,this.autoDestroy=!Le||!1!==Le.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[Oe]=[]}function Ye(Le){Le.buffered=[],Le.bufferedIndex=0,Le.allBuffers=!0,Le.allNoop=!0}function Qe(Le){const Z=this instanceof M(9613);if(!Z&&!j(Qe,this))return new Qe(Le);this._writableState=new ke(Le,this,Z),Le&&("function"==typeof Le.write&&(this._write=Le.write),"function"==typeof Le.writev&&(this._writev=Le.writev),"function"==typeof Le.destroy&&(this._destroy=Le.destroy),"function"==typeof Le.final&&(this._final=Le.final),"function"==typeof Le.construct&&(this._construct=Le.construct),Le.signal&&ce(Le.signal,this)),oe.call(this,Le),k.construct(this,()=>{const O=this._writableState;O.writing||je(this,O),Fe(this,O)})}function xe(Le,Z,O,P){const _e=Le._writableState;if("function"==typeof O)P=O,O=_e.defaultEncoding;else{if(O){if("buffer"!==O&&!S.isEncoding(O))throw new Ce(O)}else O=_e.defaultEncoding;"function"!=typeof P&&(P=we)}if(null===Z)throw new ue;if(!_e.objectMode)if("string"==typeof Z)!1!==_e.decodeStrings&&(Z=S.from(Z,O),O="buffer");else if(Z instanceof S)O="buffer";else{if(!oe._isUint8Array(Z))throw new J("chunk",["string","Buffer","Uint8Array"],Z);Z=oe._uint8ArrayToBuffer(Z),O="buffer"}let ze;return _e.ending?ze=new re:_e.destroyed&&(ze=new I("write")),ze?(ee.nextTick(P,ze),ae(Le,ze,!0),ze):(_e.pendingcb++,function Be(Le,Z,O,P,_e){const ze=Z.objectMode?1:O.length;Z.length+=ze;const ve=Z.length<Z.highWaterMark;return ve||(Z.needDrain=!0),Z.writing||Z.corked||Z.errored||!Z.constructed?(Z.buffered.push({chunk:O,encoding:P,callback:_e}),Z.allBuffers&&"buffer"!==P&&(Z.allBuffers=!1),Z.allNoop&&_e!==we&&(Z.allNoop=!1)):(Z.writelen=ze,Z.writecb=_e,Z.writing=!0,Z.sync=!0,Le._write(O,P,Z.onwrite),Z.sync=!1),ve&&!Z.errored&&!Z.destroyed}(Le,_e,Z,O,P))}function Ie(Le,Z,O,P,_e,ze,ve){Z.writelen=P,Z.writecb=ve,Z.writing=!0,Z.sync=!0,Z.destroyed?Z.onwrite(new I("write")):O?Le._writev(_e,Z.onwrite):Le._write(_e,ze,Z.onwrite),Z.sync=!1}function et(Le,Z,O,P){--Z.pendingcb,P(O),_t(Z),ae(Le,O)}function pe(Le,Z){const O=Le._writableState,P=O.sync,_e=O.writecb;"function"==typeof _e?(O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0,Z?(O.errored||(O.errored=Z),Le._readableState&&!Le._readableState.errored&&(Le._readableState.errored=Z),P?ee.nextTick(et,Le,O,Z,_e):et(Le,O,Z,_e)):(O.buffered.length>O.bufferedIndex&&je(Le,O),P?null!==O.afterWriteTickInfo&&O.afterWriteTickInfo.cb===_e?O.afterWriteTickInfo.count++:(O.afterWriteTickInfo={count:1,cb:_e,stream:Le,state:O},ee.nextTick(be,O.afterWriteTickInfo)):nt(Le,O,1,_e))):ae(Le,new G)}function be({stream:Le,state:Z,count:O,cb:P}){return Z.afterWriteTickInfo=null,nt(Le,Z,O,P)}function nt(Le,Z,O,P){for(!Z.ending&&!Le.destroyed&&0===Z.length&&Z.needDrain&&(Z.needDrain=!1,Le.emit("drain"));O-- >0;)Z.pendingcb--,P();Z.destroyed&&_t(Z),Fe(Le,Z)}function _t(Le){if(Le.writing)return;for(let _e=Le.bufferedIndex;_e<Le.buffered.length;++_e){var Z;const{chunk:ze,callback:ve}=Le.buffered[_e];Le.length-=Le.objectMode?1:ze.length,ve(null!==(Z=Le.errored)&&void 0!==Z?Z:new I("write"))}const O=Le[Oe].splice(0);for(let _e=0;_e<O.length;_e++){var P;O[_e](null!==(P=Le.errored)&&void 0!==P?P:new I("end"))}Ye(Le)}function je(Le,Z){if(Z.corked||Z.bufferProcessing||Z.destroyed||!Z.constructed)return;const{buffered:O,bufferedIndex:P,objectMode:_e}=Z,ze=O.length-P;if(!ze)return;let ve=P;if(Z.bufferProcessing=!0,ze>1&&Le._writev){Z.pendingcb-=ze-1;const Ve=Z.allNoop?we:vt=>{for(let Ot=ve;Ot<O.length;++Ot)O[Ot].callback(vt)},Ke=Z.allNoop&&0===ve?O:A(O,ve);Ke.allBuffers=Z.allBuffers,Ie(Le,Z,!0,Z.length,Ke,"",Ve),Ye(Z)}else{do{const{chunk:Ve,encoding:Ke,callback:vt}=O[ve];O[ve++]=null,Ie(Le,Z,!1,_e?1:Ve.length,Ve,Ke,vt)}while(ve<O.length&&!Z.writing);ve===O.length?Ye(Z):ve>256?(O.splice(0,ve),Z.bufferedIndex=0):Z.bufferedIndex=ve}Z.bufferProcessing=!1}function Q(Le){return Le.ending&&!Le.destroyed&&Le.constructed&&0===Le.length&&!Le.errored&&0===Le.buffered.length&&!Le.finished&&!Le.writing&&!Le.errorEmitted&&!Le.closeEmitted}function Fe(Le,Z,O){Q(Z)&&(function Ae(Le,Z){!Z.prefinished&&!Z.finalCalled&&("function"!=typeof Le._final||Z.destroyed?(Z.prefinished=!0,Le.emit("prefinish")):(Z.finalCalled=!0,function se(Le,Z){let O=!1;function P(_e){if(O)ae(Le,_e??G());else if(O=!0,Z.pendingcb--,_e){const ze=Z[Oe].splice(0);for(let ve=0;ve<ze.length;ve++)ze[ve](_e);ae(Le,_e,Z.sync)}else Q(Z)&&(Z.prefinished=!0,Le.emit("prefinish"),Z.pendingcb++,ee.nextTick(Te,Le,Z))}Z.sync=!0,Z.pendingcb++;try{Le._final(P)}catch(_e){P(_e)}Z.sync=!1}(Le,Z)))}(Le,Z),0===Z.pendingcb&&(O?(Z.pendingcb++,ee.nextTick((P,_e)=>{Q(_e)?Te(P,_e):_e.pendingcb--},Le,Z)):Q(Z)&&(Z.pendingcb++,Te(Le,Z))))}function Te(Le,Z){Z.pendingcb--,Z.finished=!0;const O=Z[Oe].splice(0);for(let P=0;P<O.length;P++)O[P]();if(Le.emit("finish"),Z.autoDestroy){const P=Le._readableState;(!P||P.autoDestroy&&(P.endEmitted||!1===P.readable))&&Le.destroy()}}ke.prototype.getBuffer=function(){return A(this.buffered,this.bufferedIndex)},W(ke.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),W(Qe,F,{__proto__:null,value:function(Le){return!!j(this,Le)||this===Qe&&Le&&Le._writableState instanceof ke}}),Qe.prototype.pipe=function(){ae(this,new w)},Qe.prototype.write=function(Le,Z,O){return!0===xe(this,Le,Z,O)},Qe.prototype.cork=function(){this._writableState.corked++},Qe.prototype.uncork=function(){const Le=this._writableState;Le.corked&&(Le.corked--,Le.writing||je(this,Le))},Qe.prototype.setDefaultEncoding=function(Z){if("string"==typeof Z&&(Z=N(Z)),!S.isEncoding(Z))throw new Ce(Z);return this._writableState.defaultEncoding=Z,this},Qe.prototype._write=function(Le,Z,O){if(!this._writev)throw new U("_write()");this._writev([{chunk:Le,encoding:Z}],O)},Qe.prototype._writev=null,Qe.prototype.end=function(Le,Z,O){const P=this._writableState;let _e;if("function"==typeof Le?(O=Le,Le=null,Z=null):"function"==typeof Z&&(O=Z,Z=null),null!=Le){const ze=xe(this,Le,Z);ze instanceof $&&(_e=ze)}return P.corked&&(P.corked=1,this.uncork()),_e||(P.errored||P.ending?P.finished?_e=new D("end"):P.destroyed&&(_e=new I("end")):(P.ending=!0,Fe(this,P,!0),P.ended=!0)),"function"==typeof O&&(_e||P.finished?ee.nextTick(O,_e):P[Oe].push(O)),this},x(Qe.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(Le){this._writableState&&(this._writableState.destroyed=Le)}},writable:{__proto__:null,get(){const Le=this._writableState;return!(!Le||!1===Le.writable||Le.destroyed||Le.errored||Le.ending||Le.ended)},set(Le){this._writableState&&(this._writableState.writable=!!Le)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const Le=this._writableState;return!!Le&&!Le.destroyed&&!Le.ending&&Le.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const Je=k.destroy;let ot;function ut(){return void 0===ot&&(ot={}),ot}Qe.prototype.destroy=function(Le,Z){const O=this._writableState;return!O.destroyed&&(O.bufferedIndex<O.buffered.length||O[Oe].length)&&ee.nextTick(_t,O),Je.call(this,Le,Z),this},Qe.prototype._undestroy=k.undestroy,Qe.prototype._destroy=function(Le,Z){Z(Le)},Qe.prototype[C.captureRejectionSymbol]=function(Le){this.destroy(Le)},Qe.fromWeb=function(Le,Z){return ut().newStreamWritableFromWritableStream(Le,Z)},Qe.toWeb=function(Le){return ut().newWritableStreamFromStreamWritable(Le)}},438:(Ge,ne,M)=>{"use strict";const{ArrayIsArray:ee,ArrayPrototypeIncludes:A,ArrayPrototypeJoin:$,ArrayPrototypeMap:j,NumberIsInteger:W,NumberIsNaN:x,NumberMAX_SAFE_INTEGER:E,NumberMIN_SAFE_INTEGER:N,NumberParseInt:te,ObjectPrototypeHasOwnProperty:F,RegExpPrototypeExec:C,String:oe,StringPrototypeToUpperCase:S,StringPrototypeTrim:k}=M(1251),{hideStackFrames:ce,codes:{ERR_SOCKET_BAD_PORT:X,ERR_INVALID_ARG_TYPE:K,ERR_INVALID_ARG_VALUE:J,ERR_OUT_OF_RANGE:U,ERR_UNKNOWN_SIGNAL:G}}=M(5480),{normalizeEncoding:w}=M(1663),{isAsyncFunction:I,isArrayBufferView:D}=M(1663).types,ue={},ae=/^[0-7]+$/,ke=ce((ve,Ve,Ke=N,vt=E)=>{if("number"!=typeof ve)throw new K(Ve,"number",ve);if(!W(ve))throw new U(Ve,"an integer",ve);if(ve<Ke||ve>vt)throw new U(Ve,`>= ${Ke} && <= ${vt}`,ve)}),Ye=ce((ve,Ve,Ke=-2147483648,vt=2147483647)=>{if("number"!=typeof ve)throw new K(Ve,"number",ve);if(!W(ve))throw new U(Ve,"an integer",ve);if(ve<Ke||ve>vt)throw new U(Ve,`>= ${Ke} && <= ${vt}`,ve)}),Qe=ce((ve,Ve,Ke=!1)=>{if("number"!=typeof ve)throw new K(Ve,"number",ve);if(!W(ve))throw new U(Ve,"an integer",ve);const vt=Ke?1:0,Ot=4294967295;if(ve<vt||ve>Ot)throw new U(Ve,`>= ${vt} && <= ${Ot}`,ve)});function xe(ve,Ve){if("string"!=typeof ve)throw new K(Ve,"string",ve)}const Ie=ce((ve,Ve,Ke)=>{if(!A(Ke,ve)){const Ot="must be one of: "+$(j(Ke,Et=>"string"==typeof Et?`'${Et}'`:oe(Et)),", ");throw new J(Ve,ve,Ot)}});function et(ve,Ve){if("boolean"!=typeof ve)throw new K(Ve,"boolean",ve)}function pe(ve,Ve,Ke){return null!=ve&&F(ve,Ve)?ve[Ve]:Ke}const be=ce((ve,Ve,Ke=null)=>{const vt=pe(Ke,"allowArray",!1),Ot=pe(Ke,"allowFunction",!1);if(!pe(Ke,"nullable",!1)&&null===ve||!vt&&ee(ve)||"object"!=typeof ve&&(!Ot||"function"!=typeof ve))throw new K(Ve,"Object",ve)}),nt=ce((ve,Ve)=>{if(null!=ve&&"object"!=typeof ve&&"function"!=typeof ve)throw new K(Ve,"a dictionary",ve)}),_t=ce((ve,Ve,Ke=0)=>{if(!ee(ve))throw new K(Ve,"Array",ve);if(ve.length<Ke)throw new J(Ve,ve,`must be longer than ${Ke}`)}),Fe=ce((ve,Ve="buffer")=>{if(!D(ve))throw new K(Ve,["Buffer","TypedArray","DataView"],ve)}),ot=ce((ve,Ve)=>{if(void 0!==ve&&(null===ve||"object"!=typeof ve||!("aborted"in ve)))throw new K(Ve,"AbortSignal",ve)}),ut=ce((ve,Ve)=>{if("function"!=typeof ve)throw new K(Ve,"Function",ve)}),Le=ce((ve,Ve)=>{if("function"!=typeof ve||I(ve))throw new K(Ve,"Function",ve)}),Z=ce((ve,Ve)=>{if(void 0!==ve)throw new K(Ve,"undefined",ve)}),P=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function _e(ve,Ve){if(typeof ve>"u"||!C(P,ve))throw new J(Ve,ve,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}Ge.exports={isInt32:function re(ve){return ve===(0|ve)},isUint32:function Ce(ve){return ve===ve>>>0},parseFileMode:function Oe(ve,Ve,Ke){if(typeof ve>"u"&&(ve=Ke),"string"==typeof ve){if(null===C(ae,ve))throw new J(Ve,ve,"must be a 32-bit unsigned integer or an octal string");ve=te(ve,8)}return Qe(ve,Ve),ve},validateArray:_t,validateStringArray:function je(ve,Ve){_t(ve,Ve);for(let Ke=0;Ke<ve.length;Ke++)xe(ve[Ke],`${Ve}[${Ke}]`)},validateBooleanArray:function Q(ve,Ve){_t(ve,Ve);for(let Ke=0;Ke<ve.length;Ke++)et(ve[Ke],`${Ve}[${Ke}]`)},validateAbortSignalArray:function se(ve,Ve){_t(ve,Ve);for(let Ke=0;Ke<ve.length;Ke++){const vt=ve[Ke],Ot=`${Ve}[${Ke}]`;if(null==vt)throw new K(Ot,"AbortSignal",vt);ot(vt,Ot)}},validateBoolean:et,validateBuffer:Fe,validateDictionary:nt,validateEncoding:function Te(ve,Ve){const Ke=w(Ve),vt=ve.length;if("hex"===Ke&&vt%2!=0)throw new J("encoding",Ve,`is invalid for data of length ${vt}`)},validateFunction:ut,validateInt32:Ye,validateInteger:ke,validateNumber:function Be(ve,Ve,Ke=void 0,vt){if("number"!=typeof ve)throw new K(Ve,"number",ve);if(null!=Ke&&ve<Ke||null!=vt&&ve>vt||(null!=Ke||null!=vt)&&x(ve))throw new U(Ve,`${null!=Ke?`>= ${Ke}`:""}${null!=Ke&&null!=vt?" && ":""}${null!=vt?`<= ${vt}`:""}`,ve)},validateObject:be,validateOneOf:Ie,validatePlainFunction:Le,validatePort:function Je(ve,Ve="Port",Ke=!0){if("number"!=typeof ve&&"string"!=typeof ve||"string"==typeof ve&&0===k(ve).length||+ve!=+ve>>>0||ve>65535||0===ve&&!Ke)throw new X(Ve,ve,Ke);return 0|ve},validateSignalName:function Ae(ve,Ve="signal"){if(xe(ve,Ve),void 0===ue[ve])throw void 0!==ue[S(ve)]?new G(ve+" (signals must use all capital letters)"):new G(ve)},validateString:xe,validateUint32:Qe,validateUndefined:Z,validateUnion:function O(ve,Ve,Ke){if(!A(Ke,ve))throw new K(Ve,`('${$(Ke,"|")}')`,ve)},validateAbortSignal:ot,validateLinkHeaderValue:function ze(ve){if("string"==typeof ve)return _e(ve,"hints"),ve;if(ee(ve)){const Ve=ve.length;let Ke="";if(0===Ve)return Ke;for(let vt=0;vt<Ve;vt++){const Ot=ve[vt];_e(Ot,"hints"),Ke+=Ot,vt!==Ve-1&&(Ke+=", ")}return Ke}throw new J("hints",ve,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},6947:(Ge,ne,M)=>{"use strict";const ee=M(5603),A=M(9204),$=ee.Readable.destroy;Ge.exports=ee.Readable,Ge.exports._uint8ArrayToBuffer=ee._uint8ArrayToBuffer,Ge.exports._isUint8Array=ee._isUint8Array,Ge.exports.isDisturbed=ee.isDisturbed,Ge.exports.isErrored=ee.isErrored,Ge.exports.isReadable=ee.isReadable,Ge.exports.Readable=ee.Readable,Ge.exports.Writable=ee.Writable,Ge.exports.Duplex=ee.Duplex,Ge.exports.Transform=ee.Transform,Ge.exports.PassThrough=ee.PassThrough,Ge.exports.addAbortSignal=ee.addAbortSignal,Ge.exports.finished=ee.finished,Ge.exports.destroy=ee.destroy,Ge.exports.destroy=$,Ge.exports.pipeline=ee.pipeline,Ge.exports.compose=ee.compose,Object.defineProperty(ee,"promises",{configurable:!0,enumerable:!0,get:()=>A}),Ge.exports.Stream=ee.Stream,Ge.exports.default=Ge.exports},5480:(Ge,ne,M)=>{"use strict";const{format:ee,inspect:A,AggregateError:$}=M(1663),j=globalThis.AggregateError||$,W=Symbol("kIsNodeError"),x=["string","function","number","object","Function","Object","boolean","bigint","symbol"],E=/^([A-Z][a-z0-9]*)+$/,te={};function F(K,J){if(!K)throw new te.ERR_INTERNAL_ASSERTION(J)}function C(K){let J="",U=K.length;const G="-"===K[0]?1:0;for(;U>=G+4;U-=3)J=`_${K.slice(U-3,U)}${J}`;return`${K.slice(0,U)}${J}`}function S(K,J,U){U||(U=Error);class G extends U{constructor(...I){super(function oe(K,J,U){if("function"==typeof J)return F(J.length<=U.length,`Code: ${K}; The provided arguments length (${U.length}) does not match the required ones (${J.length}).`),J(...U);const G=(J.match(/%[dfijoOs]/g)||[]).length;return F(G===U.length,`Code: ${K}; The provided arguments length (${U.length}) does not match the required ones (${G}).`),0===U.length?J:ee(J,...U)}(K,J,I))}toString(){return`${this.name} [${K}]: ${this.message}`}}Object.defineProperties(G.prototype,{name:{value:U.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${K}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),G.prototype.code=K,G.prototype[W]=!0,te[K]=G}function k(K){return Object.defineProperty(K,"name",{value:"__node_internal_"+K.name}),K}class X extends Error{constructor(J="The operation was aborted",U=void 0){if(void 0!==U&&"object"!=typeof U)throw new te.ERR_INVALID_ARG_TYPE("options","Object",U);super(J,U),this.code="ABORT_ERR",this.name="AbortError"}}S("ERR_ASSERTION","%s",Error),S("ERR_INVALID_ARG_TYPE",(K,J,U)=>{F("string"==typeof K,"'name' must be a string"),Array.isArray(J)||(J=[J]);let G="The ";K.endsWith(" argument")?G+=`${K} `:G+=`"${K}" ${K.includes(".")?"property":"argument"} `,G+="must be ";const w=[],I=[],D=[];for(const re of J)F("string"==typeof re,"All expected entries have to be of type string"),x.includes(re)?w.push(re.toLowerCase()):E.test(re)?I.push(re):(F("object"!==re,'The value "object" should be written as "Object"'),D.push(re));if(I.length>0){const re=w.indexOf("object");-1!==re&&(w.splice(w,re,1),I.push("Object"))}if(w.length>0){switch(w.length){case 1:G+=`of type ${w[0]}`;break;case 2:G+=`one of type ${w[0]} or ${w[1]}`;break;default:{const re=w.pop();G+=`one of type ${w.join(", ")}, or ${re}`}}(I.length>0||D.length>0)&&(G+=" or ")}if(I.length>0){switch(I.length){case 1:G+=`an instance of ${I[0]}`;break;case 2:G+=`an instance of ${I[0]} or ${I[1]}`;break;default:{const re=I.pop();G+=`an instance of ${I.join(", ")}, or ${re}`}}D.length>0&&(G+=" or ")}switch(D.length){case 0:break;case 1:D[0].toLowerCase()!==D[0]&&(G+="an "),G+=`${D[0]}`;break;case 2:G+=`one of ${D[0]} or ${D[1]}`;break;default:{const re=D.pop();G+=`one of ${D.join(", ")}, or ${re}`}}if(null==U)G+=`. Received ${U}`;else if("function"==typeof U&&U.name)G+=`. Received function ${U.name}`;else if("object"==typeof U){var ue;null!==(ue=U.constructor)&&void 0!==ue&&ue.name?G+=`. Received an instance of ${U.constructor.name}`:G+=`. Received ${A(U,{depth:-1})}`}else{let re=A(U,{colors:!1});re.length>25&&(re=`${re.slice(0,25)}...`),G+=`. Received type ${typeof U} (${re})`}return G},TypeError),S("ERR_INVALID_ARG_VALUE",(K,J,U="is invalid")=>{let G=A(J);return G.length>128&&(G=G.slice(0,128)+"..."),`The ${K.includes(".")?"property":"argument"} '${K}' ${U}. Received ${G}`},TypeError),S("ERR_INVALID_RETURN_VALUE",(K,J,U)=>{var G;return`Expected ${K} to be returned from the "${J}" function but got ${null!=U&&null!==(G=U.constructor)&&void 0!==G&&G.name?`instance of ${U.constructor.name}`:"type "+typeof U}.`},TypeError),S("ERR_MISSING_ARGS",(...K)=>{let J;F(K.length>0,"At least one arg needs to be specified");const U=K.length;switch(K=(Array.isArray(K)?K:[K]).map(G=>`"${G}"`).join(" or "),U){case 1:J+=`The ${K[0]} argument`;break;case 2:J+=`The ${K[0]} and ${K[1]} arguments`;break;default:{const G=K.pop();J+=`The ${K.join(", ")}, and ${G} arguments`}}return`${J} must be specified`},TypeError),S("ERR_OUT_OF_RANGE",(K,J,U)=>{let G;return F(J,'Missing "range" argument'),Number.isInteger(U)&&Math.abs(U)>2**32?G=C(String(U)):"bigint"==typeof U?(G=String(U),(U>2n**32n||U<-(2n**32n))&&(G=C(G)),G+="n"):G=A(U),`The value of "${K}" is out of range. It must be ${J}. Received ${G}`},RangeError),S("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),S("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),S("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),S("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),S("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),S("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),S("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),S("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),S("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),S("ERR_STREAM_WRITE_AFTER_END","write after end",Error),S("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),Ge.exports={AbortError:X,aggregateTwoErrors:k(function ce(K,J){if(K&&J&&K!==J){if(Array.isArray(J.errors))return J.errors.push(K),J;const U=new j([J,K],J.message);return U.code=J.code,U}return K||J}),hideStackFrames:k,codes:te}},1251:Ge=>{"use strict";Ge.exports={ArrayIsArray:ne=>Array.isArray(ne),ArrayPrototypeIncludes:(ne,M)=>ne.includes(M),ArrayPrototypeIndexOf:(ne,M)=>ne.indexOf(M),ArrayPrototypeJoin:(ne,M)=>ne.join(M),ArrayPrototypeMap:(ne,M)=>ne.map(M),ArrayPrototypePop:(ne,M)=>ne.pop(M),ArrayPrototypePush:(ne,M)=>ne.push(M),ArrayPrototypeSlice:(ne,M,ee)=>ne.slice(M,ee),Error,FunctionPrototypeCall:(ne,M,...ee)=>ne.call(M,...ee),FunctionPrototypeSymbolHasInstance:(ne,M)=>Function.prototype[Symbol.hasInstance].call(ne,M),MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(ne,M)=>Object.defineProperties(ne,M),ObjectDefineProperty:(ne,M,ee)=>Object.defineProperty(ne,M,ee),ObjectGetOwnPropertyDescriptor:(ne,M)=>Object.getOwnPropertyDescriptor(ne,M),ObjectKeys:ne=>Object.keys(ne),ObjectSetPrototypeOf:(ne,M)=>Object.setPrototypeOf(ne,M),Promise,PromisePrototypeCatch:(ne,M)=>ne.catch(M),PromisePrototypeThen:(ne,M,ee)=>ne.then(M,ee),PromiseReject:ne=>Promise.reject(ne),PromiseResolve:ne=>Promise.resolve(ne),ReflectApply:Reflect.apply,RegExpPrototypeTest:(ne,M)=>ne.test(M),SafeSet:Set,String,StringPrototypeSlice:(ne,M,ee)=>ne.slice(M,ee),StringPrototypeToLowerCase:ne=>ne.toLowerCase(),StringPrototypeToUpperCase:ne=>ne.toUpperCase(),StringPrototypeTrim:ne=>ne.trim(),Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(ne,M,ee)=>ne.set(M,ee),Boolean,Uint8Array}},1663:(Ge,ne,M)=>{"use strict";var ee=M(9293).default;const A=M(2317),{kResistStopPropagation:$,SymbolDispose:j}=M(1251),W=globalThis.AbortSignal||M(9465).AbortSignal,x=globalThis.AbortController||M(9465).AbortController,E=Object.getPrototypeOf(ee(function*(){})).constructor,N=globalThis.Blob||A.Blob,te=typeof N<"u"?function(k){return k instanceof N}:function(k){return!1},F=(S,k)=>{if(void 0!==S&&(null===S||"object"!=typeof S||!("aborted"in S)))throw new ERR_INVALID_ARG_TYPE(k,"AbortSignal",S)};class oe extends Error{constructor(k){if(!Array.isArray(k))throw new TypeError("Expected input to be an Array, got "+typeof k);let ce="";for(let X=0;X<k.length;X++)ce+=`    ${k[X].stack}\n`;super(ce),this.name="AggregateError",this.errors=k}}Ge.exports={AggregateError:oe,kEmptyObject:Object.freeze({}),once(S){let k=!1;return function(...ce){k||(k=!0,S.apply(this,ce))}},createDeferredPromise:function(){let S,k;return{promise:new Promise((X,K)=>{S=X,k=K}),resolve:S,reject:k}},promisify:S=>new Promise((k,ce)=>{S((X,...K)=>X?ce(X):k(...K))}),debuglog:()=>function(){},format:(S,...k)=>S.replace(/%([sdifj])/g,function(...[ce,X]){const K=k.shift();return"f"===X?K.toFixed(6):"j"===X?JSON.stringify(K):"s"===X&&"object"==typeof K?`${K.constructor!==Object?K.constructor.name:""} {}`.trim():K.toString()}),inspect(S){switch(typeof S){case"string":if(S.includes("'")){if(!S.includes('"'))return`"${S}"`;if(!S.includes("`")&&!S.includes("${"))return`\`${S}\``}return`'${S}'`;case"number":return isNaN(S)?"NaN":Object.is(S,-0)?String(S):S;case"bigint":return`${String(S)}n`;case"boolean":case"undefined":return String(S);case"object":return"{}"}},types:{isAsyncFunction:S=>S instanceof E,isArrayBufferView:S=>ArrayBuffer.isView(S)},isBlob:te,deprecate:(S,k)=>S,addAbortListener:M(4356).addAbortListener||function(k,ce){if(void 0===k)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",k);let X;return F(k,"signal"),((S,k)=>{if("function"!=typeof S)throw new ERR_INVALID_ARG_TYPE("listener","Function",S)})(ce),k.aborted?queueMicrotask(()=>ce()):(k.addEventListener("abort",ce,{__proto__:null,once:!0,[$]:!0}),X=()=>{k.removeEventListener("abort",ce)}),{__proto__:null,[j](){var K;null===(K=X)||void 0===K||K()}}},AbortSignalAny:W.any||function(k){if(1===k.length)return k[0];const ce=new x,X=()=>ce.abort();return k.forEach(K=>{F(K,"signals"),K.addEventListener("abort",X,{once:!0})}),ce.signal.addEventListener("abort",()=>{k.forEach(K=>K.removeEventListener("abort",X))},{once:!0}),ce.signal}},Ge.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},5603:(Ge,ne,M)=>{const{Buffer:ee}=M(2317),{ObjectDefineProperty:A,ObjectKeys:$,ReflectApply:j}=M(1251),{promisify:{custom:W}}=M(1663),{streamReturningOperators:x,promiseReturningOperators:E}=M(1210),{codes:{ERR_ILLEGAL_CONSTRUCTOR:N}}=M(5480),te=M(6683),{setDefaultHighWaterMark:F,getDefaultHighWaterMark:C}=M(2934),{pipeline:oe}=M(6249),{destroyer:S}=M(1509),k=M(3139),X=M(9204),K=M(6110),J=Ge.exports=M(8708).Stream;J.isDestroyed=K.isDestroyed,J.isDisturbed=K.isDisturbed,J.isErrored=K.isErrored,J.isReadable=K.isReadable,J.isWritable=K.isWritable,J.Readable=M(5779);for(const w of $(x)){let D=function(...ue){if(new.target)throw N();return J.Readable.from(j(I,this,ue))};const I=x[w];A(D,"name",{__proto__:null,value:I.name}),A(D,"length",{__proto__:null,value:I.length}),A(J.Readable.prototype,w,{__proto__:null,value:D,enumerable:!1,configurable:!0,writable:!0})}for(const w of $(E)){let D=function(...re){if(new.target)throw N();return j(I,this,re)};const I=E[w];A(D,"name",{__proto__:null,value:I.name}),A(D,"length",{__proto__:null,value:I.length}),A(J.Readable.prototype,w,{__proto__:null,value:D,enumerable:!1,configurable:!0,writable:!0})}J.Writable=M(2983),J.Duplex=M(9613),J.Transform=M(9059),J.PassThrough=M(6569),J.pipeline=oe;const{addAbortSignal:U}=M(8992);J.addAbortSignal=U,J.finished=k,J.destroy=S,J.compose=te,J.setDefaultHighWaterMark=F,J.getDefaultHighWaterMark=C,A(J,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>X}),A(oe,W,{__proto__:null,enumerable:!0,get:()=>X.pipeline}),A(k,W,{__proto__:null,enumerable:!0,get:()=>X.finished}),J.Stream=J,J._isUint8Array=function(I){return I instanceof Uint8Array},J._uint8ArrayToBuffer=function(I){return ee.from(I.buffer,I.byteOffset,I.byteLength)}},9204:(Ge,ne,M)=>{"use strict";const{ArrayPrototypePop:ee,Promise:A}=M(1251),{isIterable:$,isNodeStream:j,isWebStream:W}=M(6110),{pipelineImpl:x}=M(6249),{finished:E}=M(3139);M(5603),Ge.exports={finished:E,pipeline:function N(...te){return new A((F,C)=>{let oe,S;const k=te[te.length-1];if(k&&"object"==typeof k&&!j(k)&&!$(k)&&!W(k)){const ce=ee(te);oe=ce.signal,S=ce.end}x(te,(ce,X)=>{ce?C(ce):F(X)},{signal:oe,end:S})})}}},2317:(Ge,ne,M)=>{"use strict";const ee=M(3981),A=M(2020),$="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;ne.Buffer=E,ne.SlowBuffer=function J(he){return+he!=he&&(he=0),E.alloc(+he)},ne.INSPECT_MAX_BYTES=50;const j=2147483647;function x(he){if(he>j)throw new RangeError('The value "'+he+'" is invalid for option "size"');const B=new Uint8Array(he);return Object.setPrototypeOf(B,E.prototype),B}function E(he,B,z){if("number"==typeof he){if("string"==typeof B)throw new TypeError('The "string" argument must be of type string. Received type number');return C(he)}return N(he,B,z)}function N(he,B,z){if("string"==typeof he)return function oe(he,B){if(("string"!=typeof B||""===B)&&(B="utf8"),!E.isEncoding(B))throw new TypeError("Unknown encoding: "+B);const z=0|U(he,B);let Ne=x(z);const Ze=Ne.write(he,B);return Ze!==z&&(Ne=Ne.slice(0,Ze)),Ne}(he,B);if(ArrayBuffer.isView(he))return function k(he){if(Ke(he,Uint8Array)){const B=new Uint8Array(he);return ce(B.buffer,B.byteOffset,B.byteLength)}return S(he)}(he);if(null==he)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof he);if(Ke(he,ArrayBuffer)||he&&Ke(he.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ke(he,SharedArrayBuffer)||he&&Ke(he.buffer,SharedArrayBuffer)))return ce(he,B,z);if("number"==typeof he)throw new TypeError('The "value" argument must not be of type number. Received type number');const Ne=he.valueOf&&he.valueOf();if(null!=Ne&&Ne!==he)return E.from(Ne,B,z);const Ze=function X(he){if(E.isBuffer(he)){const B=0|K(he.length),z=x(B);return 0===z.length||he.copy(z,0,0,B),z}return void 0!==he.length?"number"!=typeof he.length||vt(he.length)?x(0):S(he):"Buffer"===he.type&&Array.isArray(he.data)?S(he.data):void 0}(he);if(Ze)return Ze;if(typeof Symbol<"u"&&null!=Symbol.toPrimitive&&"function"==typeof he[Symbol.toPrimitive])return E.from(he[Symbol.toPrimitive]("string"),B,z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof he)}function te(he){if("number"!=typeof he)throw new TypeError('"size" argument must be of type number');if(he<0)throw new RangeError('The value "'+he+'" is invalid for option "size"')}function C(he){return te(he),x(he<0?0:0|K(he))}function S(he){const B=he.length<0?0:0|K(he.length),z=x(B);for(let Ne=0;Ne<B;Ne+=1)z[Ne]=255&he[Ne];return z}function ce(he,B,z){if(B<0||he.byteLength<B)throw new RangeError('"offset" is outside of buffer bounds');if(he.byteLength<B+(z||0))throw new RangeError('"length" is outside of buffer bounds');let Ne;return Ne=void 0===B&&void 0===z?new Uint8Array(he):void 0===z?new Uint8Array(he,B):new Uint8Array(he,B,z),Object.setPrototypeOf(Ne,E.prototype),Ne}function K(he){if(he>=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");return 0|he}function U(he,B){if(E.isBuffer(he))return he.length;if(ArrayBuffer.isView(he)||Ke(he,ArrayBuffer))return he.byteLength;if("string"!=typeof he)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof he);const z=he.length,Ne=arguments.length>2&&!0===arguments[2];if(!Ne&&0===z)return 0;let Ze=!1;for(;;)switch(B){case"ascii":case"latin1":case"binary":return z;case"utf8":case"utf-8":return P(he).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*z;case"hex":return z>>>1;case"base64":return ve(he).length;default:if(Ze)return Ne?-1:P(he).length;B=(""+B).toLowerCase(),Ze=!0}}function G(he,B,z){let Ne=!1;if((void 0===B||B<0)&&(B=0),B>this.length||((void 0===z||z>this.length)&&(z=this.length),z<=0)||(z>>>=0)<=(B>>>=0))return"";for(he||(he="utf8");;)switch(he){case"hex":return Ie(this,B,z);case"utf8":case"utf-8":return ke(this,B,z);case"ascii":return xe(this,B,z);case"latin1":case"binary":return Be(this,B,z);case"base64":return Oe(this,B,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return et(this,B,z);default:if(Ne)throw new TypeError("Unknown encoding: "+he);he=(he+"").toLowerCase(),Ne=!0}}function w(he,B,z){const Ne=he[B];he[B]=he[z],he[z]=Ne}function I(he,B,z,Ne,Ze){if(0===he.length)return-1;if("string"==typeof z?(Ne=z,z=0):z>2147483647?z=2147483647:z<-2147483648&&(z=-2147483648),vt(z=+z)&&(z=Ze?0:he.length-1),z<0&&(z=he.length+z),z>=he.length){if(Ze)return-1;z=he.length-1}else if(z<0){if(!Ze)return-1;z=0}if("string"==typeof B&&(B=E.from(B,Ne)),E.isBuffer(B))return 0===B.length?-1:D(he,B,z,Ne,Ze);if("number"==typeof B)return B&=255,"function"==typeof Uint8Array.prototype.indexOf?Ze?Uint8Array.prototype.indexOf.call(he,B,z):Uint8Array.prototype.lastIndexOf.call(he,B,z):D(he,[B],z,Ne,Ze);throw new TypeError("val must be string, number or Buffer")}function D(he,B,z,Ne,Ze){let In,ct=1,wt=he.length,Qt=B.length;if(void 0!==Ne&&("ucs2"===(Ne=String(Ne).toLowerCase())||"ucs-2"===Ne||"utf16le"===Ne||"utf-16le"===Ne)){if(he.length<2||B.length<2)return-1;ct=2,wt/=2,Qt/=2,z/=2}function gn(un,rn){return 1===ct?un[rn]:un.readUInt16BE(rn*ct)}if(Ze){let un=-1;for(In=z;In<wt;In++)if(gn(he,In)===gn(B,-1===un?0:In-un)){if(-1===un&&(un=In),In-un+1===Qt)return un*ct}else-1!==un&&(In-=In-un),un=-1}else for(z+Qt>wt&&(z=wt-Qt),In=z;In>=0;In--){let un=!0;for(let rn=0;rn<Qt;rn++)if(gn(he,In+rn)!==gn(B,rn)){un=!1;break}if(un)return In}return-1}function ue(he,B,z,Ne){z=Number(z)||0;const Ze=he.length-z;Ne?(Ne=Number(Ne))>Ze&&(Ne=Ze):Ne=Ze;const ct=B.length;let wt;for(Ne>ct/2&&(Ne=ct/2),wt=0;wt<Ne;++wt){const Qt=parseInt(B.substr(2*wt,2),16);if(vt(Qt))return wt;he[z+wt]=Qt}return wt}function re(he,B,z,Ne){return Ve(P(B,he.length-z),he,z,Ne)}function Ce(he,B,z,Ne){return Ve(function _e(he){const B=[];for(let z=0;z<he.length;++z)B.push(255&he.charCodeAt(z));return B}(B),he,z,Ne)}function ae(he,B,z,Ne){return Ve(ve(B),he,z,Ne)}function we(he,B,z,Ne){return Ve(function ze(he,B){let z,Ne,Ze;const ct=[];for(let wt=0;wt<he.length&&!((B-=2)<0);++wt)z=he.charCodeAt(wt),Ne=z>>8,Ze=z%256,ct.push(Ze),ct.push(Ne);return ct}(B,he.length-z),he,z,Ne)}function Oe(he,B,z){return ee.fromByteArray(0===B&&z===he.length?he:he.slice(B,z))}function ke(he,B,z){z=Math.min(he.length,z);const Ne=[];let Ze=B;for(;Ze<z;){const ct=he[Ze];let wt=null,Qt=ct>239?4:ct>223?3:ct>191?2:1;if(Ze+Qt<=z){let gn,In,un,rn;switch(Qt){case 1:ct<128&&(wt=ct);break;case 2:gn=he[Ze+1],128==(192&gn)&&(rn=(31&ct)<<6|63&gn,rn>127&&(wt=rn));break;case 3:gn=he[Ze+1],In=he[Ze+2],128==(192&gn)&&128==(192&In)&&(rn=(15&ct)<<12|(63&gn)<<6|63&In,rn>2047&&(rn<55296||rn>57343)&&(wt=rn));break;case 4:gn=he[Ze+1],In=he[Ze+2],un=he[Ze+3],128==(192&gn)&&128==(192&In)&&128==(192&un)&&(rn=(15&ct)<<18|(63&gn)<<12|(63&In)<<6|63&un,rn>65535&&rn<1114112&&(wt=rn))}}null===wt?(wt=65533,Qt=1):wt>65535&&(wt-=65536,Ne.push(wt>>>10&1023|55296),wt=56320|1023&wt),Ne.push(wt),Ze+=Qt}return function Qe(he){const B=he.length;if(B<=Ye)return String.fromCharCode.apply(String,he);let z="",Ne=0;for(;Ne<B;)z+=String.fromCharCode.apply(String,he.slice(Ne,Ne+=Ye));return z}(Ne)}ne.kMaxLength=j,!(E.TYPED_ARRAY_SUPPORT=function W(){try{const he=new Uint8Array(1),B={foo:function(){return 42}};return Object.setPrototypeOf(B,Uint8Array.prototype),Object.setPrototypeOf(he,B),42===he.foo()}catch{return!1}}())&&typeof console<"u"&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}}),E.poolSize=8192,E.from=function(he,B,z){return N(he,B,z)},Object.setPrototypeOf(E.prototype,Uint8Array.prototype),Object.setPrototypeOf(E,Uint8Array),E.alloc=function(he,B,z){return function F(he,B,z){return te(he),he<=0?x(he):void 0!==B?"string"==typeof z?x(he).fill(B,z):x(he).fill(B):x(he)}(he,B,z)},E.allocUnsafe=function(he){return C(he)},E.allocUnsafeSlow=function(he){return C(he)},E.isBuffer=function(B){return null!=B&&!0===B._isBuffer&&B!==E.prototype},E.compare=function(B,z){if(Ke(B,Uint8Array)&&(B=E.from(B,B.offset,B.byteLength)),Ke(z,Uint8Array)&&(z=E.from(z,z.offset,z.byteLength)),!E.isBuffer(B)||!E.isBuffer(z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(B===z)return 0;let Ne=B.length,Ze=z.length;for(let ct=0,wt=Math.min(Ne,Ze);ct<wt;++ct)if(B[ct]!==z[ct]){Ne=B[ct],Ze=z[ct];break}return Ne<Ze?-1:Ze<Ne?1:0},E.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(B,z){if(!Array.isArray(B))throw new TypeError('"list" argument must be an Array of Buffers');if(0===B.length)return E.alloc(0);let Ne;if(void 0===z)for(z=0,Ne=0;Ne<B.length;++Ne)z+=B[Ne].length;const Ze=E.allocUnsafe(z);let ct=0;for(Ne=0;Ne<B.length;++Ne){let wt=B[Ne];if(Ke(wt,Uint8Array))ct+wt.length>Ze.length?(E.isBuffer(wt)||(wt=E.from(wt)),wt.copy(Ze,ct)):Uint8Array.prototype.set.call(Ze,wt,ct);else{if(!E.isBuffer(wt))throw new TypeError('"list" argument must be an Array of Buffers');wt.copy(Ze,ct)}ct+=wt.length}return Ze},E.byteLength=U,E.prototype._isBuffer=!0,E.prototype.swap16=function(){const B=this.length;if(B%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let z=0;z<B;z+=2)w(this,z,z+1);return this},E.prototype.swap32=function(){const B=this.length;if(B%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let z=0;z<B;z+=4)w(this,z,z+3),w(this,z+1,z+2);return this},E.prototype.swap64=function(){const B=this.length;if(B%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let z=0;z<B;z+=8)w(this,z,z+7),w(this,z+1,z+6),w(this,z+2,z+5),w(this,z+3,z+4);return this},E.prototype.toLocaleString=E.prototype.toString=function(){const B=this.length;return 0===B?"":0===arguments.length?ke(this,0,B):G.apply(this,arguments)},E.prototype.equals=function(B){if(!E.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B||0===E.compare(this,B)},E.prototype.inspect=function(){let B="";const z=ne.INSPECT_MAX_BYTES;return B=this.toString("hex",0,z).replace(/(.{2})/g,"$1 ").trim(),this.length>z&&(B+=" ... "),"<Buffer "+B+">"},$&&(E.prototype[$]=E.prototype.inspect),E.prototype.compare=function(B,z,Ne,Ze,ct){if(Ke(B,Uint8Array)&&(B=E.from(B,B.offset,B.byteLength)),!E.isBuffer(B))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof B);if(void 0===z&&(z=0),void 0===Ne&&(Ne=B?B.length:0),void 0===Ze&&(Ze=0),void 0===ct&&(ct=this.length),z<0||Ne>B.length||Ze<0||ct>this.length)throw new RangeError("out of range index");if(Ze>=ct&&z>=Ne)return 0;if(Ze>=ct)return-1;if(z>=Ne)return 1;if(this===B)return 0;let wt=(ct>>>=0)-(Ze>>>=0),Qt=(Ne>>>=0)-(z>>>=0);const gn=Math.min(wt,Qt),In=this.slice(Ze,ct),un=B.slice(z,Ne);for(let rn=0;rn<gn;++rn)if(In[rn]!==un[rn]){wt=In[rn],Qt=un[rn];break}return wt<Qt?-1:Qt<wt?1:0},E.prototype.includes=function(B,z,Ne){return-1!==this.indexOf(B,z,Ne)},E.prototype.indexOf=function(B,z,Ne){return I(this,B,z,Ne,!0)},E.prototype.lastIndexOf=function(B,z,Ne){return I(this,B,z,Ne,!1)},E.prototype.write=function(B,z,Ne,Ze){if(void 0===z)Ze="utf8",Ne=this.length,z=0;else if(void 0===Ne&&"string"==typeof z)Ze=z,Ne=this.length,z=0;else{if(!isFinite(z))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");z>>>=0,isFinite(Ne)?(Ne>>>=0,void 0===Ze&&(Ze="utf8")):(Ze=Ne,Ne=void 0)}const ct=this.length-z;if((void 0===Ne||Ne>ct)&&(Ne=ct),B.length>0&&(Ne<0||z<0)||z>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ze||(Ze="utf8");let wt=!1;for(;;)switch(Ze){case"hex":return ue(this,B,z,Ne);case"utf8":case"utf-8":return re(this,B,z,Ne);case"ascii":case"latin1":case"binary":return Ce(this,B,z,Ne);case"base64":return ae(this,B,z,Ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return we(this,B,z,Ne);default:if(wt)throw new TypeError("Unknown encoding: "+Ze);Ze=(""+Ze).toLowerCase(),wt=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const Ye=4096;function xe(he,B,z){let Ne="";z=Math.min(he.length,z);for(let Ze=B;Ze<z;++Ze)Ne+=String.fromCharCode(127&he[Ze]);return Ne}function Be(he,B,z){let Ne="";z=Math.min(he.length,z);for(let Ze=B;Ze<z;++Ze)Ne+=String.fromCharCode(he[Ze]);return Ne}function Ie(he,B,z){const Ne=he.length;(!B||B<0)&&(B=0),(!z||z<0||z>Ne)&&(z=Ne);let Ze="";for(let ct=B;ct<z;++ct)Ze+=Ot[he[ct]];return Ze}function et(he,B,z){const Ne=he.slice(B,z);let Ze="";for(let ct=0;ct<Ne.length-1;ct+=2)Ze+=String.fromCharCode(Ne[ct]+256*Ne[ct+1]);return Ze}function pe(he,B,z){if(he%1!=0||he<0)throw new RangeError("offset is not uint");if(he+B>z)throw new RangeError("Trying to access beyond buffer length")}function be(he,B,z,Ne,Ze,ct){if(!E.isBuffer(he))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>Ze||B<ct)throw new RangeError('"value" argument is out of bounds');if(z+Ne>he.length)throw new RangeError("Index out of range")}function nt(he,B,z,Ne,Ze){ot(B,Ne,Ze,he,z,7);let ct=Number(B&BigInt(4294967295));he[z++]=ct,ct>>=8,he[z++]=ct,ct>>=8,he[z++]=ct,ct>>=8,he[z++]=ct;let wt=Number(B>>BigInt(32)&BigInt(4294967295));return he[z++]=wt,wt>>=8,he[z++]=wt,wt>>=8,he[z++]=wt,wt>>=8,he[z++]=wt,z}function _t(he,B,z,Ne,Ze){ot(B,Ne,Ze,he,z,7);let ct=Number(B&BigInt(4294967295));he[z+7]=ct,ct>>=8,he[z+6]=ct,ct>>=8,he[z+5]=ct,ct>>=8,he[z+4]=ct;let wt=Number(B>>BigInt(32)&BigInt(4294967295));return he[z+3]=wt,wt>>=8,he[z+2]=wt,wt>>=8,he[z+1]=wt,wt>>=8,he[z]=wt,z+8}function je(he,B,z,Ne,Ze,ct){if(z+Ne>he.length)throw new RangeError("Index out of range");if(z<0)throw new RangeError("Index out of range")}function Q(he,B,z,Ne,Ze){return B=+B,z>>>=0,Ze||je(he,0,z,4),A.write(he,B,z,Ne,23,4),z+4}function se(he,B,z,Ne,Ze){return B=+B,z>>>=0,Ze||je(he,0,z,8),A.write(he,B,z,Ne,52,8),z+8}E.prototype.slice=function(B,z){const Ne=this.length;(B=~~B)<0?(B+=Ne)<0&&(B=0):B>Ne&&(B=Ne),(z=void 0===z?Ne:~~z)<0?(z+=Ne)<0&&(z=0):z>Ne&&(z=Ne),z<B&&(z=B);const Ze=this.subarray(B,z);return Object.setPrototypeOf(Ze,E.prototype),Ze},E.prototype.readUintLE=E.prototype.readUIntLE=function(B,z,Ne){B>>>=0,z>>>=0,Ne||pe(B,z,this.length);let Ze=this[B],ct=1,wt=0;for(;++wt<z&&(ct*=256);)Ze+=this[B+wt]*ct;return Ze},E.prototype.readUintBE=E.prototype.readUIntBE=function(B,z,Ne){B>>>=0,z>>>=0,Ne||pe(B,z,this.length);let Ze=this[B+--z],ct=1;for(;z>0&&(ct*=256);)Ze+=this[B+--z]*ct;return Ze},E.prototype.readUint8=E.prototype.readUInt8=function(B,z){return B>>>=0,z||pe(B,1,this.length),this[B]},E.prototype.readUint16LE=E.prototype.readUInt16LE=function(B,z){return B>>>=0,z||pe(B,2,this.length),this[B]|this[B+1]<<8},E.prototype.readUint16BE=E.prototype.readUInt16BE=function(B,z){return B>>>=0,z||pe(B,2,this.length),this[B]<<8|this[B+1]},E.prototype.readUint32LE=E.prototype.readUInt32LE=function(B,z){return B>>>=0,z||pe(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+16777216*this[B+3]},E.prototype.readUint32BE=E.prototype.readUInt32BE=function(B,z){return B>>>=0,z||pe(B,4,this.length),16777216*this[B]+(this[B+1]<<16|this[B+2]<<8|this[B+3])},E.prototype.readBigUInt64LE=Et(function(B){ut(B>>>=0,"offset");const z=this[B],Ne=this[B+7];(void 0===z||void 0===Ne)&&Le(B,this.length-8);const Ze=z+256*this[++B]+65536*this[++B]+this[++B]*2**24,ct=this[++B]+256*this[++B]+65536*this[++B]+Ne*2**24;return BigInt(Ze)+(BigInt(ct)<<BigInt(32))}),E.prototype.readBigUInt64BE=Et(function(B){ut(B>>>=0,"offset");const z=this[B],Ne=this[B+7];(void 0===z||void 0===Ne)&&Le(B,this.length-8);const Ze=z*2**24+65536*this[++B]+256*this[++B]+this[++B],ct=this[++B]*2**24+65536*this[++B]+256*this[++B]+Ne;return(BigInt(Ze)<<BigInt(32))+BigInt(ct)}),E.prototype.readIntLE=function(B,z,Ne){B>>>=0,z>>>=0,Ne||pe(B,z,this.length);let Ze=this[B],ct=1,wt=0;for(;++wt<z&&(ct*=256);)Ze+=this[B+wt]*ct;return ct*=128,Ze>=ct&&(Ze-=Math.pow(2,8*z)),Ze},E.prototype.readIntBE=function(B,z,Ne){B>>>=0,z>>>=0,Ne||pe(B,z,this.length);let Ze=z,ct=1,wt=this[B+--Ze];for(;Ze>0&&(ct*=256);)wt+=this[B+--Ze]*ct;return ct*=128,wt>=ct&&(wt-=Math.pow(2,8*z)),wt},E.prototype.readInt8=function(B,z){return B>>>=0,z||pe(B,1,this.length),128&this[B]?-1*(255-this[B]+1):this[B]},E.prototype.readInt16LE=function(B,z){B>>>=0,z||pe(B,2,this.length);const Ne=this[B]|this[B+1]<<8;return 32768&Ne?4294901760|Ne:Ne},E.prototype.readInt16BE=function(B,z){B>>>=0,z||pe(B,2,this.length);const Ne=this[B+1]|this[B]<<8;return 32768&Ne?4294901760|Ne:Ne},E.prototype.readInt32LE=function(B,z){return B>>>=0,z||pe(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},E.prototype.readInt32BE=function(B,z){return B>>>=0,z||pe(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},E.prototype.readBigInt64LE=Et(function(B){ut(B>>>=0,"offset");const z=this[B],Ne=this[B+7];return(void 0===z||void 0===Ne)&&Le(B,this.length-8),(BigInt(this[B+4]+256*this[B+5]+65536*this[B+6]+(Ne<<24))<<BigInt(32))+BigInt(z+256*this[++B]+65536*this[++B]+this[++B]*2**24)}),E.prototype.readBigInt64BE=Et(function(B){ut(B>>>=0,"offset");const z=this[B],Ne=this[B+7];(void 0===z||void 0===Ne)&&Le(B,this.length-8);const Ze=(z<<24)+65536*this[++B]+256*this[++B]+this[++B];return(BigInt(Ze)<<BigInt(32))+BigInt(this[++B]*2**24+65536*this[++B]+256*this[++B]+Ne)}),E.prototype.readFloatLE=function(B,z){return B>>>=0,z||pe(B,4,this.length),A.read(this,B,!0,23,4)},E.prototype.readFloatBE=function(B,z){return B>>>=0,z||pe(B,4,this.length),A.read(this,B,!1,23,4)},E.prototype.readDoubleLE=function(B,z){return B>>>=0,z||pe(B,8,this.length),A.read(this,B,!0,52,8)},E.prototype.readDoubleBE=function(B,z){return B>>>=0,z||pe(B,8,this.length),A.read(this,B,!1,52,8)},E.prototype.writeUintLE=E.prototype.writeUIntLE=function(B,z,Ne,Ze){B=+B,z>>>=0,Ne>>>=0,Ze||be(this,B,z,Ne,Math.pow(2,8*Ne)-1,0);let ct=1,wt=0;for(this[z]=255&B;++wt<Ne&&(ct*=256);)this[z+wt]=B/ct&255;return z+Ne},E.prototype.writeUintBE=E.prototype.writeUIntBE=function(B,z,Ne,Ze){B=+B,z>>>=0,Ne>>>=0,Ze||be(this,B,z,Ne,Math.pow(2,8*Ne)-1,0);let ct=Ne-1,wt=1;for(this[z+ct]=255&B;--ct>=0&&(wt*=256);)this[z+ct]=B/wt&255;return z+Ne},E.prototype.writeUint8=E.prototype.writeUInt8=function(B,z,Ne){return B=+B,z>>>=0,Ne||be(this,B,z,1,255,0),this[z]=255&B,z+1},E.prototype.writeUint16LE=E.prototype.writeUInt16LE=function(B,z,Ne){return B=+B,z>>>=0,Ne||be(this,B,z,2,65535,0),this[z]=255&B,this[z+1]=B>>>8,z+2},E.prototype.writeUint16BE=E.prototype.writeUInt16BE=function(B,z,Ne){return B=+B,z>>>=0,Ne||be(this,B,z,2,65535,0),this[z]=B>>>8,this[z+1]=255&B,z+2},E.prototype.writeUint32LE=E.prototype.writeUInt32LE=function(B,z,Ne){return B=+B,z>>>=0,Ne||be(this,B,z,4,4294967295,0),this[z+3]=B>>>24,this[z+2]=B>>>16,this[z+1]=B>>>8,this[z]=255&B,z+4},E.prototype.writeUint32BE=E.prototype.writeUInt32BE=function(B,z,Ne){return B=+B,z>>>=0,Ne||be(this,B,z,4,4294967295,0),this[z]=B>>>24,this[z+1]=B>>>16,this[z+2]=B>>>8,this[z+3]=255&B,z+4},E.prototype.writeBigUInt64LE=Et(function(B,z=0){return nt(this,B,z,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeBigUInt64BE=Et(function(B,z=0){return _t(this,B,z,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeIntLE=function(B,z,Ne,Ze){if(B=+B,z>>>=0,!Ze){const gn=Math.pow(2,8*Ne-1);be(this,B,z,Ne,gn-1,-gn)}let ct=0,wt=1,Qt=0;for(this[z]=255&B;++ct<Ne&&(wt*=256);)B<0&&0===Qt&&0!==this[z+ct-1]&&(Qt=1),this[z+ct]=(B/wt|0)-Qt&255;return z+Ne},E.prototype.writeIntBE=function(B,z,Ne,Ze){if(B=+B,z>>>=0,!Ze){const gn=Math.pow(2,8*Ne-1);be(this,B,z,Ne,gn-1,-gn)}let ct=Ne-1,wt=1,Qt=0;for(this[z+ct]=255&B;--ct>=0&&(wt*=256);)B<0&&0===Qt&&0!==this[z+ct+1]&&(Qt=1),this[z+ct]=(B/wt|0)-Qt&255;return z+Ne},E.prototype.writeInt8=function(B,z,Ne){return B=+B,z>>>=0,Ne||be(this,B,z,1,127,-128),B<0&&(B=255+B+1),this[z]=255&B,z+1},E.prototype.writeInt16LE=function(B,z,Ne){return B=+B,z>>>=0,Ne||be(this,B,z,2,32767,-32768),this[z]=255&B,this[z+1]=B>>>8,z+2},E.prototype.writeInt16BE=function(B,z,Ne){return B=+B,z>>>=0,Ne||be(this,B,z,2,32767,-32768),this[z]=B>>>8,this[z+1]=255&B,z+2},E.prototype.writeInt32LE=function(B,z,Ne){return B=+B,z>>>=0,Ne||be(this,B,z,4,2147483647,-2147483648),this[z]=255&B,this[z+1]=B>>>8,this[z+2]=B>>>16,this[z+3]=B>>>24,z+4},E.prototype.writeInt32BE=function(B,z,Ne){return B=+B,z>>>=0,Ne||be(this,B,z,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),this[z]=B>>>24,this[z+1]=B>>>16,this[z+2]=B>>>8,this[z+3]=255&B,z+4},E.prototype.writeBigInt64LE=Et(function(B,z=0){return nt(this,B,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeBigInt64BE=Et(function(B,z=0){return _t(this,B,z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeFloatLE=function(B,z,Ne){return Q(this,B,z,!0,Ne)},E.prototype.writeFloatBE=function(B,z,Ne){return Q(this,B,z,!1,Ne)},E.prototype.writeDoubleLE=function(B,z,Ne){return se(this,B,z,!0,Ne)},E.prototype.writeDoubleBE=function(B,z,Ne){return se(this,B,z,!1,Ne)},E.prototype.copy=function(B,z,Ne,Ze){if(!E.isBuffer(B))throw new TypeError("argument should be a Buffer");if(Ne||(Ne=0),!Ze&&0!==Ze&&(Ze=this.length),z>=B.length&&(z=B.length),z||(z=0),Ze>0&&Ze<Ne&&(Ze=Ne),Ze===Ne||0===B.length||0===this.length)return 0;if(z<0)throw new RangeError("targetStart out of bounds");if(Ne<0||Ne>=this.length)throw new RangeError("Index out of range");if(Ze<0)throw new RangeError("sourceEnd out of bounds");Ze>this.length&&(Ze=this.length),B.length-z<Ze-Ne&&(Ze=B.length-z+Ne);const ct=Ze-Ne;return this===B&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(z,Ne,Ze):Uint8Array.prototype.set.call(B,this.subarray(Ne,Ze),z),ct},E.prototype.fill=function(B,z,Ne,Ze){if("string"==typeof B){if("string"==typeof z?(Ze=z,z=0,Ne=this.length):"string"==typeof Ne&&(Ze=Ne,Ne=this.length),void 0!==Ze&&"string"!=typeof Ze)throw new TypeError("encoding must be a string");if("string"==typeof Ze&&!E.isEncoding(Ze))throw new TypeError("Unknown encoding: "+Ze);if(1===B.length){const wt=B.charCodeAt(0);("utf8"===Ze&&wt<128||"latin1"===Ze)&&(B=wt)}}else"number"==typeof B?B&=255:"boolean"==typeof B&&(B=Number(B));if(z<0||this.length<z||this.length<Ne)throw new RangeError("Out of range index");if(Ne<=z)return this;let ct;if(z>>>=0,Ne=void 0===Ne?this.length:Ne>>>0,B||(B=0),"number"==typeof B)for(ct=z;ct<Ne;++ct)this[ct]=B;else{const wt=E.isBuffer(B)?B:E.from(B,Ze),Qt=wt.length;if(0===Qt)throw new TypeError('The value "'+B+'" is invalid for argument "value"');for(ct=0;ct<Ne-z;++ct)this[ct+z]=wt[ct%Qt]}return this};const Ae={};function Fe(he,B,z){Ae[he]=class extends z{constructor(){super(),Object.defineProperty(this,"message",{value:B.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${he}]`,delete this.name}get code(){return he}set code(Ze){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ze,writable:!0})}toString(){return`${this.name} [${he}]: ${this.message}`}}}function Te(he){let B="",z=he.length;const Ne="-"===he[0]?1:0;for(;z>=Ne+4;z-=3)B=`_${he.slice(z-3,z)}${B}`;return`${he.slice(0,z)}${B}`}function ot(he,B,z,Ne,Ze,ct){if(he>z||he<B){const wt="bigint"==typeof B?"n":"";let Qt;throw Qt=ct>3?0===B||B===BigInt(0)?`>= 0${wt} and < 2${wt} ** ${8*(ct+1)}${wt}`:`>= -(2${wt} ** ${8*(ct+1)-1}${wt}) and < 2 ** ${8*(ct+1)-1}${wt}`:`>= ${B}${wt} and <= ${z}${wt}`,new Ae.ERR_OUT_OF_RANGE("value",Qt,he)}!function Je(he,B,z){ut(B,"offset"),(void 0===he[B]||void 0===he[B+z])&&Le(B,he.length-(z+1))}(Ne,Ze,ct)}function ut(he,B){if("number"!=typeof he)throw new Ae.ERR_INVALID_ARG_TYPE(B,"number",he)}function Le(he,B,z){throw Math.floor(he)!==he?(ut(he,z),new Ae.ERR_OUT_OF_RANGE(z||"offset","an integer",he)):B<0?new Ae.ERR_BUFFER_OUT_OF_BOUNDS:new Ae.ERR_OUT_OF_RANGE(z||"offset",`>= ${z?1:0} and <= ${B}`,he)}Fe("ERR_BUFFER_OUT_OF_BOUNDS",function(he){return he?`${he} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Fe("ERR_INVALID_ARG_TYPE",function(he,B){return`The "${he}" argument must be of type number. Received type ${typeof B}`},TypeError),Fe("ERR_OUT_OF_RANGE",function(he,B,z){let Ne=`The value of "${he}" is out of range.`,Ze=z;return Number.isInteger(z)&&Math.abs(z)>2**32?Ze=Te(String(z)):"bigint"==typeof z&&(Ze=String(z),(z>BigInt(2)**BigInt(32)||z<-(BigInt(2)**BigInt(32)))&&(Ze=Te(Ze)),Ze+="n"),Ne+=` It must be ${B}. Received ${Ze}`,Ne},RangeError);const Z=/[^+/0-9A-Za-z-_]/g;function P(he,B){let z;B=B||1/0;const Ne=he.length;let Ze=null;const ct=[];for(let wt=0;wt<Ne;++wt){if(z=he.charCodeAt(wt),z>55295&&z<57344){if(!Ze){if(z>56319){(B-=3)>-1&&ct.push(239,191,189);continue}if(wt+1===Ne){(B-=3)>-1&&ct.push(239,191,189);continue}Ze=z;continue}if(z<56320){(B-=3)>-1&&ct.push(239,191,189),Ze=z;continue}z=65536+(Ze-55296<<10|z-56320)}else Ze&&(B-=3)>-1&&ct.push(239,191,189);if(Ze=null,z<128){if((B-=1)<0)break;ct.push(z)}else if(z<2048){if((B-=2)<0)break;ct.push(z>>6|192,63&z|128)}else if(z<65536){if((B-=3)<0)break;ct.push(z>>12|224,z>>6&63|128,63&z|128)}else{if(!(z<1114112))throw new Error("Invalid code point");if((B-=4)<0)break;ct.push(z>>18|240,z>>12&63|128,z>>6&63|128,63&z|128)}}return ct}function ve(he){return ee.toByteArray(function O(he){if((he=(he=he.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;he.length%4!=0;)he+="=";return he}(he))}function Ve(he,B,z,Ne){let Ze;for(Ze=0;Ze<Ne&&!(Ze+z>=B.length||Ze>=he.length);++Ze)B[Ze+z]=he[Ze];return Ze}function Ke(he,B){return he instanceof B||null!=he&&null!=he.constructor&&null!=he.constructor.name&&he.constructor.name===B.name}function vt(he){return he!=he}const Ot=function(){const he="0123456789abcdef",B=new Array(256);for(let z=0;z<16;++z){const Ne=16*z;for(let Ze=0;Ze<16;++Ze)B[Ne+Ze]=he[z]+he[Ze]}return B}();function Et(he){return typeof BigInt>"u"?Bt:he}function Bt(){throw new Error("BigInt not supported")}},2011:function(Ge,ne,M){"use strict";var ee=this&&this.__createBinding||(Object.create?function($,j,W,x){void 0===x&&(x=W),Object.defineProperty($,x,{enumerable:!0,get:function(){return j[W]}})}:function($,j,W,x){void 0===x&&(x=W),$[x]=j[W]}),A=this&&this.__exportStar||function($,j){for(var W in $)"default"!==W&&!Object.prototype.hasOwnProperty.call(j,W)&&ee(j,$,W)};Object.defineProperty(ne,"__esModule",{value:!0}),A(M(9787),ne)},9787:(Ge,ne)=>{"use strict";function ee(j){const W=[];let x=0;for(;x<j.length;)switch(j[x]){case"/":if("."===j[x+1])if("."===j[x+2]){if(!$(j[x+3])){W.push([]),x++;break}W.pop(),j[x+3]||W.push([]),x+=3}else{if(!$(j[x+2])){W.push([]),x++;break}j[x+2]||W.push([]),x+=2}else W.push([]),x++;break;case"#":case"?":W.length||W.push([]),W[W.length-1].push(j.substr(x)),x=j.length;break;default:W.length||W.push([]),W[W.length-1].push(j[x]),x++}return"/"+W.map(E=>E.join("")).join("/")}function A(j,W){let x=W+1;W>=0?"/"===j[W+1]&&"/"===j[W+2]&&(x=W+3):"/"===j[0]&&"/"===j[1]&&(x=2);const E=j.indexOf("/",x);return E<0?j:j.substr(0,E)+ee(j.substr(E))}function $(j){return!j||"#"===j||"?"===j||"/"===j}Object.defineProperty(ne,"__esModule",{value:!0}),ne.removeDotSegmentsOfPath=ne.removeDotSegments=ne.resolve=void 0,ne.resolve=function M(j,W){const x=(W=W||"").indexOf("#");if(x>0&&(W=W.substr(0,x)),!j.length){if(W.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${W}' for value '${j}'`);return W}if(j.startsWith("?")){const S=W.indexOf("?");return S>0&&(W=W.substr(0,S)),W+j}if(j.startsWith("#"))return W+j;if(!W.length){const S=j.indexOf(":");if(S<0)throw new Error(`Found invalid relative IRI '${j}' for a missing baseIRI`);return A(j,S)}const E=j.indexOf(":");if(E>=0)return A(j,E);const N=W.indexOf(":");if(N<0)throw new Error(`Found invalid baseIRI '${W}' for value '${j}'`);const te=W.substr(0,N+1);if(0===j.indexOf("//"))return te+A(j,E);let F;if(W.indexOf("//",N)===N+1){if(F=W.indexOf("/",N+3),F<0)return W.length>N+3?W+"/"+A(j,E):te+A(j,E)}else if(F=W.indexOf("/",N+1),F<0)return te+A(j,E);if(0===j.indexOf("/"))return W.substr(0,F)+ee(j);let C=W.substr(F);const oe=C.lastIndexOf("/");return oe>=0&&oe<C.length-1&&(C=C.substr(0,oe+1),"."===j[0]&&"."!==j[1]&&"/"!==j[1]&&j[2]&&(j=j.substr(1))),j=ee(j=C+j),W.substr(0,F)+j},ne.removeDotSegments=ee,ne.removeDotSegmentsOfPath=A},7140:function(){!function(Ge,ne){"use strict";if(!Ge.setImmediate){var j,M=1,ee={},A=!1,$=Ge.document,ce=Object.getPrototypeOf&&Object.getPrototypeOf(Ge);ce=ce&&ce.setTimeout?ce:Ge,"[object process]"==={}.toString.call(Ge.process)?function te(){j=function(X){process.nextTick(function(){N(X)})}}():function F(){if(Ge.postMessage&&!Ge.importScripts){var X=!0,K=Ge.onmessage;return Ge.onmessage=function(){X=!1},Ge.postMessage("","*"),Ge.onmessage=K,X}}()?function C(){var X="setImmediate$"+Math.random()+"$",K=function(J){J.source===Ge&&"string"==typeof J.data&&0===J.data.indexOf(X)&&N(+J.data.slice(X.length))};Ge.addEventListener?Ge.addEventListener("message",K,!1):Ge.attachEvent("onmessage",K),j=function(J){Ge.postMessage(X+J,"*")}}():Ge.MessageChannel?function oe(){var X=new MessageChannel;X.port1.onmessage=function(K){N(K.data)},j=function(K){X.port2.postMessage(K)}}():$&&"onreadystatechange"in $.createElement("script")?function S(){var X=$.documentElement;j=function(K){var J=$.createElement("script");J.onreadystatechange=function(){N(K),J.onreadystatechange=null,X.removeChild(J),J=null},X.appendChild(J)}}():function k(){j=function(X){setTimeout(N,0,X)}}(),ce.setImmediate=function W(X){"function"!=typeof X&&(X=new Function(""+X));for(var K=new Array(arguments.length-1),J=0;J<K.length;J++)K[J]=arguments[J+1];return ee[M]={callback:X,args:K},j(M),M++},ce.clearImmediate=x}function x(X){delete ee[X]}function N(X){if(A)setTimeout(N,0,X);else{var K=ee[X];if(K){A=!0;try{!function E(X){var K=X.callback,J=X.args;switch(J.length){case 0:K();break;case 1:K(J[0]);break;case 2:K(J[0],J[1]);break;case 3:K(J[0],J[1],J[2]);break;default:K.apply(undefined,J)}}(K)}finally{x(X),A=!1}}}}}(typeof self>"u"?typeof global>"u"?this:global:self)},8454:(Ge,ne,M)=>{"use strict";var ee=M(4272).Buffer,A=ee.isEncoding||function(J){switch((J=""+J)&&J.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function W(J){var U;switch(this.encoding=function j(J){var U=function $(J){if(!J)return"utf8";for(var U;;)switch(J){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return J;default:if(U)return;J=(""+J).toLowerCase(),U=!0}}(J);if("string"!=typeof U&&(ee.isEncoding===A||!A(J)))throw new Error("Unknown encoding: "+J);return U||J}(J),this.encoding){case"utf16le":this.text=oe,this.end=S,U=4;break;case"utf8":this.fillLast=te,U=4;break;case"base64":this.text=k,this.end=ce,U=3;break;default:return this.write=X,void(this.end=K)}this.lastNeed=0,this.lastTotal=0,this.lastChar=ee.allocUnsafe(U)}function x(J){return J<=127?0:J>>5==6?2:J>>4==14?3:J>>3==30?4:J>>6==2?-1:-2}function te(J){var U=this.lastTotal-this.lastNeed,G=function N(J,U,G){if(128!=(192&U[0]))return J.lastNeed=0,"\ufffd";if(J.lastNeed>1&&U.length>1){if(128!=(192&U[1]))return J.lastNeed=1,"\ufffd";if(J.lastNeed>2&&U.length>2&&128!=(192&U[2]))return J.lastNeed=2,"\ufffd"}}(this,J);return void 0!==G?G:this.lastNeed<=J.length?(J.copy(this.lastChar,U,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(J.copy(this.lastChar,U,0,J.length),void(this.lastNeed-=J.length))}function oe(J,U){if((J.length-U)%2==0){var G=J.toString("utf16le",U);if(G){var w=G.charCodeAt(G.length-1);if(w>=55296&&w<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=J[J.length-2],this.lastChar[1]=J[J.length-1],G.slice(0,-1)}return G}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=J[J.length-1],J.toString("utf16le",U,J.length-1)}function S(J){var U=J&&J.length?this.write(J):"";return this.lastNeed?U+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):U}function k(J,U){var G=(J.length-U)%3;return 0===G?J.toString("base64",U):(this.lastNeed=3-G,this.lastTotal=3,1===G?this.lastChar[0]=J[J.length-1]:(this.lastChar[0]=J[J.length-2],this.lastChar[1]=J[J.length-1]),J.toString("base64",U,J.length-G))}function ce(J){var U=J&&J.length?this.write(J):"";return this.lastNeed?U+this.lastChar.toString("base64",0,3-this.lastNeed):U}function X(J){return J.toString(this.encoding)}function K(J){return J&&J.length?this.write(J):""}ne.StringDecoder=W,W.prototype.write=function(J){if(0===J.length)return"";var U,G;if(this.lastNeed){if(void 0===(U=this.fillLast(J)))return"";G=this.lastNeed,this.lastNeed=0}else G=0;return G<J.length?U?U+this.text(J,G):this.text(J,G):U||""},W.prototype.end=function C(J){var U=J&&J.length?this.write(J):"";return this.lastNeed?U+"\ufffd":U},W.prototype.text=function F(J,U){var G=function E(J,U,G){var w=U.length-1;if(w<G)return 0;var I=x(U[w]);return I>=0?(I>0&&(J.lastNeed=I-1),I):--w<G||-2===I?0:(I=x(U[w]))>=0?(I>0&&(J.lastNeed=I-2),I):--w<G||-2===I?0:(I=x(U[w]))>=0?(I>0&&(2===I?I=0:J.lastNeed=I-3),I):0}(this,J,U);if(!this.lastNeed)return J.toString("utf8",U);this.lastTotal=G;var w=J.length-(G-this.lastNeed);return J.copy(this.lastChar,0,w),J.toString("utf8",U,w)},W.prototype.fillLast=function(J){if(this.lastNeed<=J.length)return J.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);J.copy(this.lastChar,this.lastTotal-this.lastNeed,0,J.length),this.lastNeed-=J.length}},4272:(Ge,ne,M)=>{var ee=M(3838),A=ee.Buffer;function $(W,x){for(var E in W)x[E]=W[E]}function j(W,x,E){return A(W,x,E)}A.from&&A.alloc&&A.allocUnsafe&&A.allocUnsafeSlow?Ge.exports=ee:($(ee,ne),ne.Buffer=j),j.prototype=Object.create(A.prototype),$(A,j),j.from=function(W,x,E){if("number"==typeof W)throw new TypeError("Argument must not be a number");return A(W,x,E)},j.alloc=function(W,x,E){if("number"!=typeof W)throw new TypeError("Argument must be a number");var N=A(W);return void 0!==x?"string"==typeof E?N.fill(x,E):N.fill(x):N.fill(0),N},j.allocUnsafe=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return A(W)},j.allocUnsafeSlow=function(W){if("number"!=typeof W)throw new TypeError("Argument must be a number");return ee.SlowBuffer(W)}},9805:function(Ge,ne,M){"use strict";var ee=this&&this.__createBinding||(Object.create?function($,j,W,x){void 0===x&&(x=W);var E=Object.getOwnPropertyDescriptor(j,W);(!E||("get"in E?!j.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return j[W]}}),Object.defineProperty($,x,E)}:function($,j,W,x){void 0===x&&(x=W),$[x]=j[W]}),A=this&&this.__exportStar||function($,j){for(var W in $)"default"!==W&&!Object.prototype.hasOwnProperty.call(j,W)&&ee(j,$,W)};Object.defineProperty(ne,"__esModule",{value:!0}),A(M(8759),ne)},8759:(Ge,ne)=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0}),ne.validateIri=ne.IriValidationStrategy=void 0;const ee=function M(){const x="[!$&'()*+,;=]",E="%[a-fA-F0-9]{2}",N="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",te=`${N}\\.${N}\\.${N}\\.${N}`,F="[a-fA-F0-9]{1,4}",C=`(${F}:${F}|${te})`,w="[a-zA-Z0-9\\-._~\xa0-\ud7ff\uf900-\ufdcf\ufdf0-\uffef\u{10000}-\u{1fffd}\u{20000}-\u{2fffd}\u{30000}-\u{3fffd}\u{40000}-\u{4fffd}\u{50000}-\u{5fffd}\u{60000}-\u{6fffd}\u{70000}-\u{7fffd}\u{80000}-\u{8fffd}\u{90000}-\u{9fffd}\u{a0000}-\u{afffd}\u{b0000}-\u{bfffd}\u{c0000}-\u{cfffd}\u{d0000}-\u{dfffd}\u{e1000}-\u{efffd}]",I=`(${w}|${E}|${x}|[:@])*`,re=`(${I})+`,Ce=`(${I})*`;return new RegExp(`^[a-zA-Z][a-zA-Z0-9+\\-.]*:(\\/\\/((${w}|${E}|${x}|:)*@)?(\\[(((${F}:){6}${C}|::(${F}:){5}${C}|(${F})?::(${F}:){4}${C}|((${F}:){0,1}${F})?::(${F}:){3}${C}|((${F}:){0,2}${F})?::(${F}:){2}${C}|((${F}:){0,3}${F})?::${F}:${C}|((${F}:){0,4}${F})?::${C}|((${F}:){0,5}${F})?::${F}|((${F}:){0,6}${F})?::)|v[a-fA-F0-9]+\\.(${x}|${x}|":)+)\\]|${te}|(${w}|${E}|${x})*)(:[0-9]*)?(\\/${Ce})*|\\/(${re}(\\/${Ce})*)?|${re}(\\/${Ce})*|)(\\?(${I}|[\ue000-\uf8ff\u{f0000}-\u{ffffd}\u{100000}-\u{10fffd}]|[\\/?])*)?(#(${I}|[\\/?])*)?$`,"u")}(),A=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var $,W;(W=$=ne.IriValidationStrategy||(ne.IriValidationStrategy={})).Strict="strict",W.Pragmatic="pragmatic",W.None="none",ne.validateIri=function j(W,x=$.Strict){switch(x){case $.Strict:return ee.test(W)?void 0:new Error(`Invalid IRI according to RFC 3987: '${W}'`);case $.Pragmatic:return A.test(W)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${W}'`);case $.None:return;default:return new Error(`Not supported validation strategy "${x}"`)}}},5114:(Ge,ne)=>{"use strict";function x(N){return N>=65&&N<=90||N>=97&&N<=122||58===N||95===N||8204===N||8205===N||N>=192&&N<=214||N>=216&&N<=246||N>=248&&N<=767||N>=880&&N<=893||N>=895&&N<=8191||N>=8304&&N<=8591||N>=11264&&N<=12271||N>=12289&&N<=55295||N>=63744&&N<=64975||N>=65008&&N<=65533||N>=65536&&N<=983039}Object.defineProperty(ne,"__esModule",{value:!0}),ne.CHAR="\t\n\r -\ud7ff\ue000-\ufffd\u{10000}-\u{10ffff}",ne.S=" \t\r\n",ne.NAME_START_CHAR=":A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u{10000}-\u{effff}",ne.NAME_CHAR="-"+ne.NAME_START_CHAR+".0-9\xb7\u0300-\u036f\u203f-\u2040",ne.CHAR_RE=new RegExp("^["+ne.CHAR+"]$","u"),ne.S_RE=new RegExp("^["+ne.S+"]+$","u"),ne.NAME_START_CHAR_RE=new RegExp("^["+ne.NAME_START_CHAR+"]$","u"),ne.NAME_CHAR_RE=new RegExp("^["+ne.NAME_CHAR+"]$","u"),ne.NAME_RE=new RegExp("^["+ne.NAME_START_CHAR+"]["+ne.NAME_CHAR+"]*$","u"),ne.NMTOKEN_RE=new RegExp("^["+ne.NAME_CHAR+"]+$","u"),ne.S_LIST=[32,10,13,9],ne.isChar=function j(N){return N>=32&&N<=55295||10===N||13===N||9===N||N>=57344&&N<=65533||N>=65536&&N<=1114111},ne.isS=function W(N){return 32===N||10===N||13===N||9===N},ne.isNameStartChar=x,ne.isNameChar=function E(N){return x(N)||N>=48&&N<=57||45===N||46===N||183===N||N>=768&&N<=879||N>=8255&&N<=8256}},5940:(Ge,ne)=>{"use strict";function N(F){return F>=65&&F<=90||F>=97&&F<=122||58===F||95===F||8204===F||8205===F||F>=192&&F<=214||F>=216&&F<=246||F>=248&&F<=767||F>=880&&F<=893||F>=895&&F<=8191||F>=8304&&F<=8591||F>=11264&&F<=12271||F>=12289&&F<=55295||F>=63744&&F<=64975||F>=65008&&F<=65533||F>=65536&&F<=983039}Object.defineProperty(ne,"__esModule",{value:!0}),ne.CHAR="\x01-\ud7ff\ue000-\ufffd\u{10000}-\u{10ffff}",ne.RESTRICTED_CHAR="\x01-\b\v\f\x0e-\x1f\x7f-\x84\x86-\x9f",ne.S=" \t\r\n",ne.NAME_START_CHAR=":A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u{10000}-\u{effff}",ne.NAME_CHAR="-"+ne.NAME_START_CHAR+".0-9\xb7\u0300-\u036f\u203f-\u2040",ne.CHAR_RE=new RegExp("^["+ne.CHAR+"]$","u"),ne.RESTRICTED_CHAR_RE=new RegExp("^["+ne.RESTRICTED_CHAR+"]$","u"),ne.S_RE=new RegExp("^["+ne.S+"]+$","u"),ne.NAME_START_CHAR_RE=new RegExp("^["+ne.NAME_START_CHAR+"]$","u"),ne.NAME_CHAR_RE=new RegExp("^["+ne.NAME_CHAR+"]$","u"),ne.NAME_RE=new RegExp("^["+ne.NAME_START_CHAR+"]["+ne.NAME_CHAR+"]*$","u"),ne.NMTOKEN_RE=new RegExp("^["+ne.NAME_CHAR+"]+$","u"),ne.S_LIST=[32,10,13,9],ne.isChar=function j(F){return F>=1&&F<=55295||F>=57344&&F<=65533||F>=65536&&F<=1114111},ne.isRestrictedChar=function W(F){return F>=1&&F<=8||11===F||12===F||F>=14&&F<=31||F>=127&&F<=132||F>=134&&F<=159},ne.isCharAndNotRestricted=function x(F){return 9===F||10===F||13===F||F>31&&F<127||133===F||F>159&&F<=55295||F>=57344&&F<=65533||F>=65536&&F<=1114111},ne.isS=function E(F){return 32===F||10===F||13===F||9===F},ne.isNameStartChar=N,ne.isNameChar=function te(F){return N(F)||F>=48&&F<=57||45===F||46===F||183===F||F>=768&&F<=879||F>=8255&&F<=8256}},4327:(Ge,ne)=>{"use strict";function M(A){return A>=65&&A<=90||95===A||A>=97&&A<=122||A>=192&&A<=214||A>=216&&A<=246||A>=248&&A<=767||A>=880&&A<=893||A>=895&&A<=8191||A>=8204&&A<=8205||A>=8304&&A<=8591||A>=11264&&A<=12271||A>=12289&&A<=55295||A>=63744&&A<=64975||A>=65008&&A<=65533||A>=65536&&A<=983039}Object.defineProperty(ne,"__esModule",{value:!0}),ne.NC_NAME_START_CHAR="A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u{10000}-\u{effff}",ne.NC_NAME_CHAR="-"+ne.NC_NAME_START_CHAR+".0-9\xb7\u0300-\u036f\u203f-\u2040",ne.NC_NAME_START_CHAR_RE=new RegExp("^["+ne.NC_NAME_START_CHAR+"]$","u"),ne.NC_NAME_CHAR_RE=new RegExp("^["+ne.NC_NAME_CHAR+"]$","u"),ne.NC_NAME_RE=new RegExp("^["+ne.NC_NAME_START_CHAR+"]["+ne.NC_NAME_CHAR+"]*$","u"),ne.isNCNameStartChar=M,ne.isNCNameChar=function ee(A){return M(A)||45===A||46===A||A>=48&&A<=57||183===A||A>=768&&A<=879||A>=8255&&A<=8256}},1492:()=>{},2435:()=>{},7789:()=>{},7490:(Ge,ne,M)=>{var ee=M(5172);function A($){var j,W;function x(N,te){try{var F=$[N](te),C=F.value,oe=C instanceof ee;Promise.resolve(oe?C.v:C).then(function(S){if(oe){var k="return"===N?"return":"next";if(!C.k||S.done)return x(k,S);S=$[k](S).value}E(F.done?"return":"normal",S)},function(S){x("throw",S)})}catch(S){E("throw",S)}}function E(N,te){switch(N){case"return":j.resolve({value:te,done:!0});break;case"throw":j.reject(te);break;default:j.resolve({value:te,done:!1})}(j=j.next)?x(j.key,j.arg):W=null}this._invoke=function(N,te){return new Promise(function(F,C){var oe={key:N,arg:te,resolve:F,reject:C,next:null};W?W=W.next=oe:(j=W=oe,x(N,te))})},"function"!=typeof $.return&&(this.return=void 0)}A.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},A.prototype.next=function($){return this._invoke("next",$)},A.prototype.throw=function($){return this._invoke("throw",$)},A.prototype.return=function($){return this._invoke("return",$)},Ge.exports=A,Ge.exports.__esModule=!0,Ge.exports.default=Ge.exports},5172:Ge=>{Ge.exports=function ne(M,ee){this.v=M,this.k=ee},Ge.exports.__esModule=!0,Ge.exports.default=Ge.exports},3513:(Ge,ne,M)=>{var ee=M(5172);Ge.exports=function A($){var j={},W=!1;function x(E,N){return W=!0,N=new Promise(function(te){te($[E](N))}),{done:!1,value:new ee(N,1)}}return j[typeof Symbol<"u"&&Symbol.iterator||"@@iterator"]=function(){return this},j.next=function(E){return W?(W=!1,E):x("next",E)},"function"==typeof $.throw&&(j.throw=function(E){if(W)throw W=!1,E;return x("throw",E)}),"function"==typeof $.return&&(j.return=function(E){return W?(W=!1,E):x("return",E)}),j},Ge.exports.__esModule=!0,Ge.exports.default=Ge.exports},2881:Ge=>{function M(ee){function A($){if(Object($)!==$)return Promise.reject(new TypeError($+" is not an object."));var j=$.done;return Promise.resolve($.value).then(function(W){return{value:W,done:j}})}return(M=function(j){this.s=j,this.n=j.next}).prototype={s:null,n:null,next:function(){return A(this.n.apply(this.s,arguments))},return:function(j){var W=this.s.return;return void 0===W?Promise.resolve({value:j,done:!0}):A(W.apply(this.s,arguments))},throw:function(j){var W=this.s.return;return void 0===W?Promise.reject(j):A(W.apply(this.s,arguments))}},new M(ee)}Ge.exports=function ne(ee){var A,$,j,W=2;for(typeof Symbol<"u"&&($=Symbol.asyncIterator,j=Symbol.iterator);W--;){if($&&null!=(A=ee[$]))return A.call(ee);if(j&&null!=(A=ee[j]))return new M(A.call(ee));$="@@asyncIterator",j="@@iterator"}throw new TypeError("Object is not async iterable")},Ge.exports.__esModule=!0,Ge.exports.default=Ge.exports},9293:Ge=>{function ne(ee,A,$,j,W,x,E){try{var N=ee[x](E),te=N.value}catch(F){return void $(F)}N.done?A(te):Promise.resolve(te).then(j,W)}Ge.exports=function M(ee){return function(){var A=this,$=arguments;return new Promise(function(j,W){var x=ee.apply(A,$);function E(te){ne(x,j,W,E,N,"next",te)}function N(te){ne(x,j,W,E,N,"throw",te)}E(void 0)})}},Ge.exports.__esModule=!0,Ge.exports.default=Ge.exports},3344:(Ge,ne,M)=>{var ee=M(5172);Ge.exports=function A($){return new ee($,0)},Ge.exports.__esModule=!0,Ge.exports.default=Ge.exports},2958:(Ge,ne,M)=>{var ee=M(7490);Ge.exports=function A($){return function(){return new ee($.apply(this,arguments))}},Ge.exports.__esModule=!0,Ge.exports.default=Ge.exports}},Ge=>{Ge(Ge.s=8707)}]);