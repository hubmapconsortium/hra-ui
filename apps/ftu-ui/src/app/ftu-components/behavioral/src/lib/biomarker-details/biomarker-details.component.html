<mat-tab-group
  class="table"
  [class.table-fullscreen]="isTableFullScreen"
  mat-stretch-tabs="true"
  color="accent"
  (selectedTabChange)="logTabChange($event)"
  disablePagination="true"
  disableRipple="true"
>
  <mat-tab
    *ngFor="let tab of tabs; trackBy: trackByLabel"
    labelClass="table-tab-header"
    [label]="'Cell Types by ' + tab.label"
  >
    <ftu-biomarker-table
      #table
      *ngIf="tab.rows.length !== 0"
      [class.small]="tab.rows.length < 10"
      [data]="$any(tab.rows)"
      [columns]="tab.columns"
      [gradient]="gradients()"
      [sizes]="sizes()"
      [tissueInfo]="tissueInfo"
      [illustrationIds]="illustrationIds"
      [dataSources]="source()"
      [highlightedCellId]="selectedOnHovered()?.ontologyId ?? ''"
      (rowHover)="highlightCells($event)"
    ></ftu-biomarker-table>
    <ftu-empty-biomarker
      *ngIf="tab.rows.length === 0"
      [collaborateText]="collaborateText"
      [message]="message"
      (collaborateClick)="collaborate()"
    ></ftu-empty-biomarker>
  </mat-tab>
  <mat-tab labelClass="expansion-icon" disabled>
    <ng-template mat-tab-label>
      <span (click)="toggleFullscreen()" class="end material-symbols-outlined cursor">
        {{ isTableFullScreen ? 'close_fullscreen' : 'open_in_full' }}
      </span>
    </ng-template>
  </mat-tab>
</mat-tab-group>

<div class="legend-header gradient">Biomarker expression mean</div>
<div class="legend gradient">
  <ftu-gradient-legend [gradient]="gradients()" class="content"></ftu-gradient-legend>
</div>

<div class="legend-header size">Percentage of cells</div>
<div class="legend size">
  <ftu-size-legend [sizes]="sizes()" class="content"></ftu-size-legend>
</div>

<div class="source-list">
  <ftu-source-list
    [collaborateText]="collaborateText"
    [message]="message"
    (collaborateClick)="collaborate()"
    [sources]="source()"
    (selectionChanged)="setSelectedSources($event)"
    class="content"
  ></ftu-source-list>
</div>

<ng-template #infoTooltip let-tooltip>
  <div class="biomarker-details info-tooltip">
    {{ tooltip }}
  </div>
</ng-template>
