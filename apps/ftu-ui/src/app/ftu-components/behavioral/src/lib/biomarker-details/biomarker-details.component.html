<mat-button-toggle-group
  hraButtonToggleSize="small"
  [value]="selectedToggleValue"
  (change)="onToggleChange($event.value)"
  class="biomarker-toggle-group absolute-toggle"
>
  @for (option of toggleOptions; track option.value) {
    <mat-button-toggle [value]="option.value">{{ option.label }}</mat-button-toggle>
  }
</mat-button-toggle-group>
<ftu-biomarker-table
  #table
  *ngIf="tab.rows.length !== 0"
  [class.small]="tab.rows.length < 10"
  [data]="$any(tab.rows)"
  [columns]="tab.columns"
  [gradient]="gradients()"
  [sizes]="sizes()"
  [tissueInfo]="tissueInfo"
  [illustrationIds]="illustrationIds"
  [dataSources]="source()"
  [highlightedCellId]="selectedOnHovered()?.ontologyId ?? ''"
  (rowHover)="highlightCells($event)"
></ftu-biomarker-table>
<ftu-empty-biomarker
  *ngIf="tab.rows.length === 0"
  [collaborateText]="collaborateText"
  [message]="message"
  (collaborateClick)="collaborate()"
></ftu-empty-biomarker>

<div class="legend-header gradient">Biomarker expression mean</div>
<div class="legend gradient">
  <ftu-gradient-legend [gradient]="gradients()" class="content"></ftu-gradient-legend>
</div>

<div class="legend-header size">Percentage of cells</div>
<div class="legend size">
  <ftu-size-legend [sizes]="sizes()" class="content"></ftu-size-legend>
</div>

<div class="source-list">
  <ftu-source-list
    [collaborateText]="collaborateText"
    [message]="message"
    (collaborateClick)="collaborate()"
    [sources]="source()"
    (selectionChanged)="setSelectedSources($event)"
    class="content"
  ></ftu-source-list>
</div>

<ng-template #infoTooltip let-tooltip>
  <div class="biomarker-details info-tooltip">
    {{ tooltip }}
  </div>
</ng-template>
