<div class="biomarker-header">
  <span class="biomarker-header-title">Cell types by biomarkers</span>
  <button mat-icon-button hraIconButtonSize="large">
    <mat-icon>fullscreen</mat-icon>
  </button>
</div>

<mat-button-toggle-group
  hraButtonToggleSize="small"
  [value]="selectedToggleValue"
  (change)="onToggleChange($event.value)"
  class="biomarker-toggle-group absolute-toggle"
>
  @for (option of toggleOptions; track option.value) {
    <mat-button-toggle [value]="option.value">{{ option.label }}</mat-button-toggle>
  }
</mat-button-toggle-group>
<ftu-biomarker-table
  #table
  *ngIf="tab.rows.length !== 0"
  [class.small]="tab.rows.length < 10"
  [data]="$any(tab.rows)"
  [columns]="tab.columns"
  [gradient]="gradients()"
  [sizes]="sizes()"
  [tissueInfo]="tissueInfo"
  [illustrationIds]="illustrationIds"
  [dataSources]="source()"
  [highlightedCellId]="selectedOnHovered()?.ontologyId ?? ''"
  (rowHover)="highlightCells($event)"
></ftu-biomarker-table>
<ftu-empty-biomarker
  *ngIf="tab.rows.length === 0"
  [collaborateText]="collaborateText"
  [message]="message"
  (collaborateClick)="collaborate()"
></ftu-empty-biomarker>

<div class="legend">
  <button
    class="legend-percentage"
    [hraRichTooltip]
    hraRichTooltipTagline="Percentage of cells"
    [hraRichTooltipDescription]="percentageTooltipText"
  >
    <span class="legend-header-percentage">Percentage of cells</span>
    <ftu-size-legend [sizes]="sizes()" class="content"></ftu-size-legend>
  </button>
  <button
    class="legend-gradient"
    [hraRichTooltip]
    hraRichTooltipTagline="Biomarker expression mean"
    [hraRichTooltipDescription]="expressionTooltipText"
  >
    <span class="legend-header-gradient">Biomarker expression mean</span>
    <ftu-gradient-legend [gradient]="gradients()" class="content"></ftu-gradient-legend>
  </button>
</div>

<div class="source-list">
  <ftu-source-list
    [collaborateText]="collaborateText"
    [message]="message"
    (collaborateClick)="collaborate()"
    [sources]="source()"
    (selectionChanged)="setSelectedSources($event)"
    class="content"
  ></ftu-source-list>
</div>

<ng-template #infoTooltip let-tooltip>
  <div class="biomarker-details info-tooltip">
    {{ tooltip }}
  </div>
</ng-template>
