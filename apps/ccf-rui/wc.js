var Zw={};function lv(t){Object.assign(Zw,t)}function Iq(t){let e=String(t);for(let r in Zw)if(e.endsWith(r))return Zw[r]}function Oq(t,e){let r=new Blob([t],{type:"text/javascript"}),i=URL.createObjectURL(r),n=new Worker(i,e);return setTimeout(()=>URL.revokeObjectURL(i),1e3),n}var Zp=new Proxy(Worker,{construct:(t,e,r)=>{let i=Iq(e[0]);return i!==void 0?Oq(i,e[1]):new Worker(...e)}});var Sa=globalThis;function Os(t){return(Sa.__Zone_symbol_prefix||"__zone_symbol__")+t}function Pq(){let t=Sa.performance;function e(xt){t&&t.mark&&t.mark(xt)}function r(xt,Z){t&&t.measure&&t.measure(xt,Z)}e("Zone");let i=class Kw{static assertZonePatched(){if(Sa.Promise!==W.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let Z=Kw.current;for(;Z.parent;)Z=Z.parent;return Z}static get current(){return lt.zone}static get currentTask(){return Y}static __load_patch(Z,et,tt=!1){if(W.hasOwnProperty(Z)){let ct=Sa[Os("forceDuplicateZoneCheck")]===!0;if(!tt&&ct)throw Error("Already loaded patch: "+Z)}else if(!Sa["__Zone_disable_"+Z]){let ct="Zone:"+Z;e(ct),W[Z]=et(Sa,Kw,J),r(ct,ct)}}get parent(){return this._parent}get name(){return this._name}constructor(Z,et){this._parent=Z,this._name=et?et.name||"unnamed":"<root>",this._properties=et&&et.properties||{},this._zoneDelegate=new a(this,this._parent&&this._parent._zoneDelegate,et)}get(Z){let et=this.getZoneWith(Z);if(et)return et._properties[Z]}getZoneWith(Z){let et=this;for(;et;){if(et._properties.hasOwnProperty(Z))return et;et=et._parent}return null}fork(Z){if(!Z)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,Z)}wrap(Z,et){if(typeof Z!="function")throw new Error("Expecting function got: "+Z);let tt=this._zoneDelegate.intercept(this,Z,et),ct=this;return function(){return ct.runGuarded(tt,this,arguments,et)}}run(Z,et,tt,ct){lt={parent:lt,zone:this};try{return this._zoneDelegate.invoke(this,Z,et,tt,ct)}finally{lt=lt.parent}}runGuarded(Z,et=null,tt,ct){lt={parent:lt,zone:this};try{try{return this._zoneDelegate.invoke(this,Z,et,tt,ct)}catch(re){if(this._zoneDelegate.handleError(this,re))throw re}}finally{lt=lt.parent}}runTask(Z,et,tt){if(Z.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(Z.zone||S).name+"; Execution: "+this.name+")");let ct=Z,{type:re,data:{isPeriodic:me=!1,isRefreshable:Ze=!1}={}}=Z;if(Z.state===C&&(re===X||re===it))return;let li=Z.state!=L;li&&ct._transitionTo(L,P);let ci=Y;Y=ct,lt={parent:lt,zone:this};try{re==it&&Z.data&&!me&&!Ze&&(Z.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,ct,et,tt)}catch(wr){if(this._zoneDelegate.handleError(this,wr))throw wr}}finally{let wr=Z.state;if(wr!==C&&wr!==M)if(re==X||me||Ze&&wr===b)li&&ct._transitionTo(P,L,b);else{let Ct=ct._zoneDelegates;this._updateTaskCount(ct,-1),li&&ct._transitionTo(C,L,C),Ze&&(ct._zoneDelegates=Ct)}lt=lt.parent,Y=ci}}scheduleTask(Z){if(Z.zone&&Z.zone!==this){let tt=this;for(;tt;){if(tt===Z.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${Z.zone.name}`);tt=tt.parent}}Z._transitionTo(b,C);let et=[];Z._zoneDelegates=et,Z._zone=this;try{Z=this._zoneDelegate.scheduleTask(this,Z)}catch(tt){throw Z._transitionTo(M,b,C),this._zoneDelegate.handleError(this,tt),tt}return Z._zoneDelegates===et&&this._updateTaskCount(Z,1),Z.state==b&&Z._transitionTo(P,b),Z}scheduleMicroTask(Z,et,tt,ct){return this.scheduleTask(new o(E,Z,et,tt,ct,void 0))}scheduleMacroTask(Z,et,tt,ct,re){return this.scheduleTask(new o(it,Z,et,tt,ct,re))}scheduleEventTask(Z,et,tt,ct,re){return this.scheduleTask(new o(X,Z,et,tt,ct,re))}cancelTask(Z){if(Z.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(Z.zone||S).name+"; Execution: "+this.name+")");if(!(Z.state!==P&&Z.state!==L)){Z._transitionTo(H,P,L);try{this._zoneDelegate.cancelTask(this,Z)}catch(et){throw Z._transitionTo(M,H),this._zoneDelegate.handleError(this,et),et}return this._updateTaskCount(Z,-1),Z._transitionTo(C,H),Z.runCount=-1,Z}}_updateTaskCount(Z,et){let tt=Z._zoneDelegates;et==-1&&(Z._zoneDelegates=null);for(let ct=0;ct<tt.length;ct++)tt[ct]._updateTaskCount(Z.type,et)}};i.__symbol__=Os;let n=i,s={name:"",onHasTask:(xt,Z,et,tt)=>xt.hasTask(et,tt),onScheduleTask:(xt,Z,et,tt)=>xt.scheduleTask(et,tt),onInvokeTask:(xt,Z,et,tt,ct,re)=>xt.invokeTask(et,tt,ct,re),onCancelTask:(xt,Z,et,tt)=>xt.cancelTask(et,tt)};class a{get zone(){return this._zone}constructor(Z,et,tt){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=Z,this._parentDelegate=et,this._forkZS=tt&&(tt&&tt.onFork?tt:et._forkZS),this._forkDlgt=tt&&(tt.onFork?et:et._forkDlgt),this._forkCurrZone=tt&&(tt.onFork?this._zone:et._forkCurrZone),this._interceptZS=tt&&(tt.onIntercept?tt:et._interceptZS),this._interceptDlgt=tt&&(tt.onIntercept?et:et._interceptDlgt),this._interceptCurrZone=tt&&(tt.onIntercept?this._zone:et._interceptCurrZone),this._invokeZS=tt&&(tt.onInvoke?tt:et._invokeZS),this._invokeDlgt=tt&&(tt.onInvoke?et:et._invokeDlgt),this._invokeCurrZone=tt&&(tt.onInvoke?this._zone:et._invokeCurrZone),this._handleErrorZS=tt&&(tt.onHandleError?tt:et._handleErrorZS),this._handleErrorDlgt=tt&&(tt.onHandleError?et:et._handleErrorDlgt),this._handleErrorCurrZone=tt&&(tt.onHandleError?this._zone:et._handleErrorCurrZone),this._scheduleTaskZS=tt&&(tt.onScheduleTask?tt:et._scheduleTaskZS),this._scheduleTaskDlgt=tt&&(tt.onScheduleTask?et:et._scheduleTaskDlgt),this._scheduleTaskCurrZone=tt&&(tt.onScheduleTask?this._zone:et._scheduleTaskCurrZone),this._invokeTaskZS=tt&&(tt.onInvokeTask?tt:et._invokeTaskZS),this._invokeTaskDlgt=tt&&(tt.onInvokeTask?et:et._invokeTaskDlgt),this._invokeTaskCurrZone=tt&&(tt.onInvokeTask?this._zone:et._invokeTaskCurrZone),this._cancelTaskZS=tt&&(tt.onCancelTask?tt:et._cancelTaskZS),this._cancelTaskDlgt=tt&&(tt.onCancelTask?et:et._cancelTaskDlgt),this._cancelTaskCurrZone=tt&&(tt.onCancelTask?this._zone:et._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let ct=tt&&tt.onHasTask,re=et&&et._hasTaskZS;(ct||re)&&(this._hasTaskZS=ct?tt:s,this._hasTaskDlgt=et,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,tt.onScheduleTask||(this._scheduleTaskZS=s,this._scheduleTaskDlgt=et,this._scheduleTaskCurrZone=this._zone),tt.onInvokeTask||(this._invokeTaskZS=s,this._invokeTaskDlgt=et,this._invokeTaskCurrZone=this._zone),tt.onCancelTask||(this._cancelTaskZS=s,this._cancelTaskDlgt=et,this._cancelTaskCurrZone=this._zone))}fork(Z,et){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,Z,et):new n(Z,et)}intercept(Z,et,tt){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,Z,et,tt):et}invoke(Z,et,tt,ct,re){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,Z,et,tt,ct,re):et.apply(tt,ct)}handleError(Z,et){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,Z,et):!0}scheduleTask(Z,et){let tt=et;if(this._scheduleTaskZS)this._hasTaskZS&&tt._zoneDelegates.push(this._hasTaskDlgtOwner),tt=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,Z,et),tt||(tt=et);else if(et.scheduleFn)et.scheduleFn(et);else if(et.type==E)_(et);else throw new Error("Task is missing scheduleFn.");return tt}invokeTask(Z,et,tt,ct){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,Z,et,tt,ct):et.callback.apply(tt,ct)}cancelTask(Z,et){let tt;if(this._cancelTaskZS)tt=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,Z,et);else{if(!et.cancelFn)throw Error("Task is not cancelable");tt=et.cancelFn(et)}return tt}hasTask(Z,et){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,Z,et)}catch(tt){this.handleError(Z,tt)}}_updateTaskCount(Z,et){let tt=this._taskCounts,ct=tt[Z],re=tt[Z]=ct+et;if(re<0)throw new Error("More tasks executed then were scheduled.");if(ct==0||re==0){let me={microTask:tt.microTask>0,macroTask:tt.macroTask>0,eventTask:tt.eventTask>0,change:Z};this.hasTask(this._zone,me)}}}class o{constructor(Z,et,tt,ct,re,me){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=Z,this.source=et,this.data=ct,this.scheduleFn=re,this.cancelFn=me,!tt)throw new Error("callback is not defined");this.callback=tt;let Ze=this;Z===X&&ct&&ct.useG?this.invoke=o.invokeTask:this.invoke=function(){return o.invokeTask.call(Sa,Ze,this,arguments)}}static invokeTask(Z,et,tt){Z||(Z=this),nt++;try{return Z.runCount++,Z.zone.runTask(Z,et,tt)}finally{nt==1&&w(),nt--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(C,b)}_transitionTo(Z,et,tt){if(this._state===et||this._state===tt)this._state=Z,Z==C&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${Z}', expecting state '${et}'${tt?" or '"+tt+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let l=Os("setTimeout"),c=Os("Promise"),h=Os("then"),p=[],m=!1,f;function g(xt){if(f||Sa[c]&&(f=Sa[c].resolve(0)),f){let Z=f[h];Z||(Z=f.then),Z.call(f,xt)}else Sa[l](xt,0)}function _(xt){nt===0&&p.length===0&&g(w),xt&&p.push(xt)}function w(){if(!m){for(m=!0;p.length;){let xt=p;p=[];for(let Z=0;Z<xt.length;Z++){let et=xt[Z];try{et.zone.runTask(et,null,null)}catch(tt){J.onUnhandledError(tt)}}}J.microtaskDrainDone(),m=!1}}let S={name:"NO ZONE"},C="notScheduled",b="scheduling",P="scheduled",L="running",H="canceling",M="unknown",E="microTask",it="macroTask",X="eventTask",W={},J={symbol:Os,currentZoneFrame:()=>lt,onUnhandledError:ot,microtaskDrainDone:ot,scheduleMicroTask:_,showUncaughtError:()=>!n[Os("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:ot,patchMethod:()=>ot,bindArguments:()=>[],patchThen:()=>ot,patchMacroTask:()=>ot,patchEventPrototype:()=>ot,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>ot,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>ot,wrapWithCurrentZone:()=>ot,filterProperties:()=>[],attachOriginToPatched:()=>ot,_redefineProperty:()=>ot,patchCallbacks:()=>ot,nativeScheduleMicroTask:g},lt={parent:null,zone:new n(null,null)},Y=null,nt=0;function ot(){}return r("Zone","Zone"),n}function Mq(){let t=globalThis,e=t[Os("forceDuplicateZoneCheck")]===!0;if(t.Zone&&(e||typeof t.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return t.Zone??=Pq(),t.Zone}var Xp=Object.getOwnPropertyDescriptor,Jw=Object.defineProperty,Qw=Object.getPrototypeOf,Rq=Object.create,Bq=Array.prototype.slice,tx="addEventListener",ex="removeEventListener",$w=Os(tx),Xw=Os(ex),Ao="true",So="false",qp=Os("");function ix(t,e){return Zone.current.wrap(t,e)}function rx(t,e,r,i,n){return Zone.current.scheduleMacroTask(t,e,r,i,n)}var ki=Os,hv=typeof window<"u",Th=hv?window:void 0,Tr=hv&&Th||globalThis,Dq="removeAttribute";function nx(t,e){for(let r=t.length-1;r>=0;r--)typeof t[r]=="function"&&(t[r]=ix(t[r],e+"_"+r));return t}function Lq(t,e){let r=t.constructor.name;for(let i=0;i<e.length;i++){let n=e[i],s=t[n];if(s){let a=Xp(t,n);if(!wP(a))continue;t[n]=(o=>{let l=function(){return o.apply(this,nx(arguments,r+"."+n))};return To(l,o),l})(s)}}}function wP(t){return t?t.writable===!1?!1:!(typeof t.get=="function"&&typeof t.set>"u"):!0}var xP=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,dv=!("nw"in Tr)&&typeof Tr.process<"u"&&Tr.process.toString()==="[object process]",sx=!dv&&!xP&&!!(hv&&Th.HTMLElement),CP=typeof Tr.process<"u"&&Tr.process.toString()==="[object process]"&&!xP&&!!(hv&&Th.HTMLElement),uv={},Nq=ki("enable_beforeunload"),fP=function(t){if(t=t||Tr.event,!t)return;let e=uv[t.type];e||(e=uv[t.type]=ki("ON_PROPERTY"+t.type));let r=this||t.target||Tr,i=r[e],n;if(sx&&r===Th&&t.type==="error"){let s=t;n=i&&i.call(this,s.message,s.filename,s.lineno,s.colno,s.error),n===!0&&t.preventDefault()}else n=i&&i.apply(this,arguments),t.type==="beforeunload"&&Tr[Nq]&&typeof n=="string"?t.returnValue=n:n!=null&&!n&&t.preventDefault();return n};function gP(t,e,r){let i=Xp(t,e);if(!i&&r&&Xp(r,e)&&(i={enumerable:!0,configurable:!0}),!i||!i.configurable)return;let n=ki("on"+e+"patched");if(t.hasOwnProperty(n)&&t[n])return;delete i.writable,delete i.value;let s=i.get,a=i.set,o=e.slice(2),l=uv[o];l||(l=uv[o]=ki("ON_PROPERTY"+o)),i.set=function(c){let h=this;!h&&t===Tr&&(h=Tr),h&&(typeof h[l]=="function"&&h.removeEventListener(o,fP),a&&a.call(h,null),h[l]=c,typeof c=="function"&&h.addEventListener(o,fP,!1))},i.get=function(){let c=this;if(!c&&t===Tr&&(c=Tr),!c)return null;let h=c[l];if(h)return h;if(s){let p=s.call(this);if(p)return i.set.call(this,p),typeof c[Dq]=="function"&&c.removeAttribute(e),p}return null},Jw(t,e,i),t[n]=!0}function kP(t,e,r){if(e)for(let i=0;i<e.length;i++)gP(t,"on"+e[i],r);else{let i=[];for(let n in t)n.slice(0,2)=="on"&&i.push(n);for(let n=0;n<i.length;n++)gP(t,i[n],r)}}var ia=ki("originalInstance");function $p(t){let e=Tr[t];if(!e)return;Tr[ki(t)]=e,Tr[t]=function(){let n=nx(arguments,t);switch(n.length){case 0:this[ia]=new e;break;case 1:this[ia]=new e(n[0]);break;case 2:this[ia]=new e(n[0],n[1]);break;case 3:this[ia]=new e(n[0],n[1],n[2]);break;case 4:this[ia]=new e(n[0],n[1],n[2],n[3]);break;default:throw new Error("Arg list too long.")}},To(Tr[t],e);let r=new e(function(){}),i;for(i in r)t==="XMLHttpRequest"&&i==="responseBlob"||function(n){typeof r[n]=="function"?Tr[t].prototype[n]=function(){return this[ia][n].apply(this[ia],arguments)}:Jw(Tr[t].prototype,n,{set:function(s){typeof s=="function"?(this[ia][n]=ix(s,t+"."+n),To(this[ia][n],s)):this[ia][n]=s},get:function(){return this[ia][n]}})}(i);for(i in e)i!=="prototype"&&e.hasOwnProperty(i)&&(Tr[t][i]=e[i])}function Eo(t,e,r){let i=t;for(;i&&!i.hasOwnProperty(e);)i=Qw(i);!i&&t[e]&&(i=t);let n=ki(e),s=null;if(i&&(!(s=i[n])||!i.hasOwnProperty(n))){s=i[n]=i[e];let a=i&&Xp(i,e);if(wP(a)){let o=r(s,n,e);i[e]=function(){return o(this,arguments)},To(i[e],s)}}return s}function Fq(t,e,r){let i=null;function n(s){let a=s.data;return a.args[a.cbIdx]=function(){s.invoke.apply(this,arguments)},i.apply(a.target,a.args),s}i=Eo(t,e,s=>function(a,o){let l=r(a,o);return l.cbIdx>=0&&typeof o[l.cbIdx]=="function"?rx(l.name,o[l.cbIdx],l,n):s.apply(a,o)})}function To(t,e){t[ki("OriginalDelegate")]=e}var vP=!1,qw=!1;function zq(){try{let t=Th.navigator.userAgent;if(t.indexOf("MSIE ")!==-1||t.indexOf("Trident/")!==-1)return!0}catch{}return!1}function Vq(){if(vP)return qw;vP=!0;try{let t=Th.navigator.userAgent;(t.indexOf("MSIE ")!==-1||t.indexOf("Trident/")!==-1||t.indexOf("Edge/")!==-1)&&(qw=!0)}catch{}return qw}function _P(t){return typeof t=="function"}function bP(t){return typeof t=="number"}var Eh=!1;if(typeof window<"u")try{let t=Object.defineProperty({},"passive",{get:function(){Eh=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch{Eh=!1}var jq={useG:!0},Ps={},AP={},SP=new RegExp("^"+qp+"(\\w+)(true|false)$"),EP=ki("propagationStopped");function TP(t,e){let r=(e?e(t):t)+So,i=(e?e(t):t)+Ao,n=qp+r,s=qp+i;Ps[t]={},Ps[t][So]=n,Ps[t][Ao]=s}function Uq(t,e,r,i){let n=i&&i.add||tx,s=i&&i.rm||ex,a=i&&i.listeners||"eventListeners",o=i&&i.rmAll||"removeAllListeners",l=ki(n),c="."+n+":",h="prependListener",p="."+h+":",m=function(C,b,P){if(C.isRemoved)return;let L=C.callback;typeof L=="object"&&L.handleEvent&&(C.callback=E=>L.handleEvent(E),C.originalDelegate=L);let H;try{C.invoke(C,b,[P])}catch(E){H=E}let M=C.options;if(M&&typeof M=="object"&&M.once){let E=C.originalDelegate?C.originalDelegate:C.callback;b[s].call(b,P.type,E,M)}return H};function f(C,b,P){if(b=b||t.event,!b)return;let L=C||b.target||t,H=L[Ps[b.type][P?Ao:So]];if(H){let M=[];if(H.length===1){let E=m(H[0],L,b);E&&M.push(E)}else{let E=H.slice();for(let it=0;it<E.length&&!(b&&b[EP]===!0);it++){let X=m(E[it],L,b);X&&M.push(X)}}if(M.length===1)throw M[0];for(let E=0;E<M.length;E++){let it=M[E];e.nativeScheduleMicroTask(()=>{throw it})}}}let g=function(C){return f(this,C,!1)},_=function(C){return f(this,C,!0)};function w(C,b){if(!C)return!1;let P=!0;b&&b.useG!==void 0&&(P=b.useG);let L=b&&b.vh,H=!0;b&&b.chkDup!==void 0&&(H=b.chkDup);let M=!1;b&&b.rt!==void 0&&(M=b.rt);let E=C;for(;E&&!E.hasOwnProperty(n);)E=Qw(E);if(!E&&C[n]&&(E=C),!E||E[l])return!1;let it=b&&b.eventNameToString,X={},W=E[l]=E[n],J=E[ki(s)]=E[s],lt=E[ki(a)]=E[a],Y=E[ki(o)]=E[o],nt;b&&b.prepend&&(nt=E[ki(b.prepend)]=E[b.prepend]);function ot(at,Et){return!Eh&&typeof at=="object"&&at?!!at.capture:!Eh||!Et?at:typeof at=="boolean"?{capture:at,passive:!0}:at?typeof at=="object"&&at.passive!==!1?{...at,passive:!0}:at:{passive:!0}}let xt=function(at){if(!X.isExisting)return W.call(X.target,X.eventName,X.capture?_:g,X.options)},Z=function(at){if(!at.isRemoved){let Et=Ps[at.eventName],ie;Et&&(ie=Et[at.capture?Ao:So]);let fe=ie&&at.target[ie];if(fe){for(let $t=0;$t<fe.length;$t++)if(fe[$t]===at){fe.splice($t,1),at.isRemoved=!0,at.removeAbortListener&&(at.removeAbortListener(),at.removeAbortListener=null),fe.length===0&&(at.allRemoved=!0,at.target[ie]=null);break}}}if(at.allRemoved)return J.call(at.target,at.eventName,at.capture?_:g,at.options)},et=function(at){return W.call(X.target,X.eventName,at.invoke,X.options)},tt=function(at){return nt.call(X.target,X.eventName,at.invoke,X.options)},ct=function(at){return J.call(at.target,at.eventName,at.invoke,at.options)},re=P?xt:et,me=P?Z:ct,Ze=function(at,Et){let ie=typeof Et;return ie==="function"&&at.callback===Et||ie==="object"&&at.originalDelegate===Et},li=b&&b.diff?b.diff:Ze,ci=Zone[ki("UNPATCHED_EVENTS")],wr=t[ki("PASSIVE_EVENTS")];function Ct(at){if(typeof at=="object"&&at!==null){let Et={...at};return at.signal&&(Et.signal=at.signal),Et}return at}let Tt=function(at,Et,ie,fe,$t=!1,ve=!1){return function(){let Se=this||t,ne=arguments[0];b&&b.transferEventName&&(ne=b.transferEventName(ne));let $e=arguments[1];if(!$e)return at.apply(this,arguments);if(dv&&ne==="uncaughtException")return at.apply(this,arguments);let yi=!1;if(typeof $e!="function"){if(!$e.handleEvent)return at.apply(this,arguments);yi=!0}if(L&&!L(at,$e,Se,arguments))return;let jr=Eh&&!!wr&&wr.indexOf(ne)!==-1,Fi=Ct(ot(arguments[2],jr)),Ki=Fi?.signal;if(Ki?.aborted)return;if(ci){for(let Qr=0;Qr<ci.length;Qr++)if(ne===ci[Qr])return jr?at.call(Se,ne,$e,Fi):at.apply(this,arguments)}let ya=Fi?typeof Fi=="boolean"?!0:Fi.capture:!1,ah=Fi&&typeof Fi=="object"?Fi.once:!1,ho=Zone.current,fc=Ps[ne];fc||(TP(ne,it),fc=Ps[ne]);let wa=fc[ya?Ao:So],Jr=Se[wa],po=!1;if(Jr){if(po=!0,H){for(let Qr=0;Qr<Jr.length;Qr++)if(li(Jr[Qr],$e))return}}else Jr=Se[wa]=[];let Xs,mo=Se.constructor.name,qs=AP[mo];qs&&(Xs=qs[ne]),Xs||(Xs=mo+Et+(it?it(ne):ne)),X.options=Fi,ah&&(X.options.once=!1),X.target=Se,X.capture=ya,X.eventName=ne,X.isExisting=po;let Xn=P?jq:void 0;Xn&&(Xn.taskData=X),Ki&&(X.options.signal=void 0);let Ur=ho.scheduleEventTask(Xs,$e,Xn,ie,fe);if(Ki){X.options.signal=Ki;let Qr=()=>Ur.zone.cancelTask(Ur);at.call(Ki,"abort",Qr,{once:!0}),Ur.removeAbortListener=()=>Ki.removeEventListener("abort",Qr)}if(X.target=null,Xn&&(Xn.taskData=null),ah&&(X.options.once=!0),!Eh&&typeof Ur.options=="boolean"||(Ur.options=Fi),Ur.target=Se,Ur.capture=ya,Ur.eventName=ne,yi&&(Ur.originalDelegate=$e),ve?Jr.unshift(Ur):Jr.push(Ur),$t)return Se}};return E[n]=Tt(W,c,re,me,M),nt&&(E[h]=Tt(nt,p,tt,me,M,!0)),E[s]=function(){let at=this||t,Et=arguments[0];b&&b.transferEventName&&(Et=b.transferEventName(Et));let ie=arguments[2],fe=ie?typeof ie=="boolean"?!0:ie.capture:!1,$t=arguments[1];if(!$t)return J.apply(this,arguments);if(L&&!L(J,$t,at,arguments))return;let ve=Ps[Et],Se;ve&&(Se=ve[fe?Ao:So]);let ne=Se&&at[Se];if(ne)for(let $e=0;$e<ne.length;$e++){let yi=ne[$e];if(li(yi,$t)){if(ne.splice($e,1),yi.isRemoved=!0,ne.length===0&&(yi.allRemoved=!0,at[Se]=null,!fe&&typeof Et=="string")){let jr=qp+"ON_PROPERTY"+Et;at[jr]=null}return yi.zone.cancelTask(yi),M?at:void 0}}return J.apply(this,arguments)},E[a]=function(){let at=this||t,Et=arguments[0];b&&b.transferEventName&&(Et=b.transferEventName(Et));let ie=[],fe=IP(at,it?it(Et):Et);for(let $t=0;$t<fe.length;$t++){let ve=fe[$t],Se=ve.originalDelegate?ve.originalDelegate:ve.callback;ie.push(Se)}return ie},E[o]=function(){let at=this||t,Et=arguments[0];if(Et){b&&b.transferEventName&&(Et=b.transferEventName(Et));let ie=Ps[Et];if(ie){let fe=ie[So],$t=ie[Ao],ve=at[fe],Se=at[$t];if(ve){let ne=ve.slice();for(let $e=0;$e<ne.length;$e++){let yi=ne[$e],jr=yi.originalDelegate?yi.originalDelegate:yi.callback;this[s].call(this,Et,jr,yi.options)}}if(Se){let ne=Se.slice();for(let $e=0;$e<ne.length;$e++){let yi=ne[$e],jr=yi.originalDelegate?yi.originalDelegate:yi.callback;this[s].call(this,Et,jr,yi.options)}}}}else{let ie=Object.keys(at);for(let fe=0;fe<ie.length;fe++){let $t=ie[fe],ve=SP.exec($t),Se=ve&&ve[1];Se&&Se!=="removeListener"&&this[o].call(this,Se)}this[o].call(this,"removeListener")}if(M)return this},To(E[n],W),To(E[s],J),Y&&To(E[o],Y),lt&&To(E[a],lt),!0}let S=[];for(let C=0;C<r.length;C++)S[C]=w(r[C],i);return S}function IP(t,e){if(!e){let s=[];for(let a in t){let o=SP.exec(a),l=o&&o[1];if(l&&(!e||l===e)){let c=t[a];if(c)for(let h=0;h<c.length;h++)s.push(c[h])}}return s}let r=Ps[e];r||(TP(e),r=Ps[e]);let i=t[r[So]],n=t[r[Ao]];return i?n?i.concat(n):i.slice():n?n.slice():[]}function Hq(t,e){let r=t.Event;r&&r.prototype&&e.patchMethod(r.prototype,"stopImmediatePropagation",i=>function(n,s){n[EP]=!0,i&&i.apply(n,s)})}function Gq(t,e){e.patchMethod(t,"queueMicrotask",r=>function(i,n){Zone.current.scheduleMicroTask("queueMicrotask",n[0])})}var cv=ki("zoneTask");function Sh(t,e,r,i){let n=null,s=null;e+=i,r+=i;let a={};function o(c){let h=c.data;h.args[0]=function(){return c.invoke.apply(this,arguments)};let p=n.apply(t,h.args);return bP(p)?h.handleId=p:(h.handle=p,h.isRefreshable=_P(p.refresh)),c}function l(c){let{handle:h,handleId:p}=c.data;return s.call(t,h??p)}n=Eo(t,e,c=>function(h,p){if(_P(p[0])){let m={isRefreshable:!1,isPeriodic:i==="Interval",delay:i==="Timeout"||i==="Interval"?p[1]||0:void 0,args:p},f=p[0];p[0]=function(){try{return f.apply(this,arguments)}finally{let{handle:b,handleId:P,isPeriodic:L,isRefreshable:H}=m;!L&&!H&&(P?delete a[P]:b&&(b[cv]=null))}};let g=rx(e,p[0],m,o,l);if(!g)return g;let{handleId:_,handle:w,isRefreshable:S,isPeriodic:C}=g.data;if(_)a[_]=g;else if(w&&(w[cv]=g,S&&!C)){let b=w.refresh;w.refresh=function(){let{zone:P,state:L}=g;return L==="notScheduled"?(g._state="scheduled",P._updateTaskCount(g,1)):L==="running"&&(g._state="scheduling"),b.call(this)}}return w??_??g}else return c.apply(t,p)}),s=Eo(t,r,c=>function(h,p){let m=p[0],f;bP(m)?(f=a[m],delete a[m]):(f=m?.[cv],f?m[cv]=null:f=m),f?.type?f.cancelFn&&f.zone.cancelTask(f):c.apply(t,p)})}function Wq(t,e){let{isBrowser:r,isMix:i}=e.getGlobalObjects();if(!r&&!i||!t.customElements||!("customElements"in t))return;let n=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];e.patchCallbacks(e,t.customElements,"customElements","define",n)}function Zq(t,e){if(Zone[e.symbol("patchEventTarget")])return;let{eventNames:r,zoneSymbolEventNames:i,TRUE_STR:n,FALSE_STR:s,ZONE_SYMBOL_PREFIX:a}=e.getGlobalObjects();for(let l=0;l<r.length;l++){let c=r[l],h=c+s,p=c+n,m=a+h,f=a+p;i[c]={},i[c][s]=m,i[c][n]=f}let o=t.EventTarget;if(!(!o||!o.prototype))return e.patchEventTarget(t,e,[o&&o.prototype]),!0}function $q(t,e){e.patchEventPrototype(t,e)}function OP(t,e,r){if(!r||r.length===0)return e;let i=r.filter(s=>s.target===t);if(!i||i.length===0)return e;let n=i[0].ignoreProperties;return e.filter(s=>n.indexOf(s)===-1)}function yP(t,e,r,i){if(!t)return;let n=OP(t,e,r);kP(t,n,i)}function Yw(t){return Object.getOwnPropertyNames(t).filter(e=>e.startsWith("on")&&e.length>2).map(e=>e.substring(2))}function Xq(t,e){if(dv&&!CP||Zone[t.symbol("patchEvents")])return;let r=e.__Zone_ignore_on_properties,i=[];if(sx){let n=window;i=i.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let s=zq()?[{target:n,ignoreProperties:["error"]}]:[];yP(n,Yw(n),r&&r.concat(s),Qw(n))}i=i.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let n=0;n<i.length;n++){let s=e[i[n]];s&&s.prototype&&yP(s.prototype,Yw(s.prototype),r)}}function qq(t){t.__load_patch("legacy",e=>{let r=e[t.__symbol__("legacyPatch")];r&&r()}),t.__load_patch("timers",e=>{let r="set",i="clear";Sh(e,r,i,"Timeout"),Sh(e,r,i,"Interval"),Sh(e,r,i,"Immediate")}),t.__load_patch("requestAnimationFrame",e=>{Sh(e,"request","cancel","AnimationFrame"),Sh(e,"mozRequest","mozCancel","AnimationFrame"),Sh(e,"webkitRequest","webkitCancel","AnimationFrame")}),t.__load_patch("blocking",(e,r)=>{let i=["alert","prompt","confirm"];for(let n=0;n<i.length;n++){let s=i[n];Eo(e,s,(a,o,l)=>function(c,h){return r.current.run(a,e,h,l)})}}),t.__load_patch("EventTarget",(e,r,i)=>{$q(e,i),Zq(e,i);let n=e.XMLHttpRequestEventTarget;n&&n.prototype&&i.patchEventTarget(e,i,[n.prototype])}),t.__load_patch("MutationObserver",(e,r,i)=>{$p("MutationObserver"),$p("WebKitMutationObserver")}),t.__load_patch("IntersectionObserver",(e,r,i)=>{$p("IntersectionObserver")}),t.__load_patch("FileReader",(e,r,i)=>{$p("FileReader")}),t.__load_patch("on_property",(e,r,i)=>{Xq(i,e)}),t.__load_patch("customElements",(e,r,i)=>{Wq(e,i)}),t.__load_patch("XHR",(e,r)=>{c(e);let i=ki("xhrTask"),n=ki("xhrSync"),s=ki("xhrListener"),a=ki("xhrScheduled"),o=ki("xhrURL"),l=ki("xhrErrorBeforeScheduled");function c(h){let p=h.XMLHttpRequest;if(!p)return;let m=p.prototype;function f(W){return W[i]}let g=m[$w],_=m[Xw];if(!g){let W=h.XMLHttpRequestEventTarget;if(W){let J=W.prototype;g=J[$w],_=J[Xw]}}let w="readystatechange",S="scheduled";function C(W){let J=W.data,lt=J.target;lt[a]=!1,lt[l]=!1;let Y=lt[s];g||(g=lt[$w],_=lt[Xw]),Y&&_.call(lt,w,Y);let nt=lt[s]=()=>{if(lt.readyState===lt.DONE)if(!J.aborted&&lt[a]&&W.state===S){let ot=lt[r.__symbol__("loadfalse")];if(lt.status!==0&&ot&&ot.length>0){let xt=W.invoke;W.invoke=function(){let Z=lt[r.__symbol__("loadfalse")];for(let et=0;et<Z.length;et++)Z[et]===W&&Z.splice(et,1);!J.aborted&&W.state===S&&xt.call(W)},ot.push(W)}else W.invoke()}else!J.aborted&&lt[a]===!1&&(lt[l]=!0)};return g.call(lt,w,nt),lt[i]||(lt[i]=W),it.apply(lt,J.args),lt[a]=!0,W}function b(){}function P(W){let J=W.data;return J.aborted=!0,X.apply(J.target,J.args)}let L=Eo(m,"open",()=>function(W,J){return W[n]=J[2]==!1,W[o]=J[1],L.apply(W,J)}),H="XMLHttpRequest.send",M=ki("fetchTaskAborting"),E=ki("fetchTaskScheduling"),it=Eo(m,"send",()=>function(W,J){if(r.current[E]===!0||W[n])return it.apply(W,J);{let lt={target:W,url:W[o],isPeriodic:!1,args:J,aborted:!1},Y=rx(H,b,lt,C,P);W&&W[l]===!0&&!lt.aborted&&Y.state===S&&Y.invoke()}}),X=Eo(m,"abort",()=>function(W,J){let lt=f(W);if(lt&&typeof lt.type=="string"){if(lt.cancelFn==null||lt.data&&lt.data.aborted)return;lt.zone.cancelTask(lt)}else if(r.current[M]===!0)return X.apply(W,J)})}}),t.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&Lq(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),t.__load_patch("PromiseRejectionEvent",(e,r)=>{function i(n){return function(s){IP(e,n).forEach(a=>{let o=e.PromiseRejectionEvent;if(o){let l=new o(n,{promise:s.promise,reason:s.rejection});a.invoke(l)}})}}e.PromiseRejectionEvent&&(r[ki("unhandledPromiseRejectionHandler")]=i("unhandledrejection"),r[ki("rejectionHandledHandler")]=i("rejectionhandled"))}),t.__load_patch("queueMicrotask",(e,r,i)=>{Gq(e,i)})}function Kq(t){t.__load_patch("ZoneAwarePromise",(e,r,i)=>{let n=Object.getOwnPropertyDescriptor,s=Object.defineProperty;function a(Ct){return Ct&&Ct.toString===Object.prototype.toString?(Ct.constructor&&Ct.constructor.name||"")+": "+JSON.stringify(Ct):Ct?Ct.toString():Object.prototype.toString.call(Ct)}let o=i.symbol,l=[],c=e[o("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,h=o("Promise"),p=o("then"),m="__creationTrace__";i.onUnhandledError=Ct=>{if(i.showUncaughtError()){let Tt=Ct&&Ct.rejection;Tt?console.error("Unhandled Promise rejection:",Tt instanceof Error?Tt.message:Tt,"; Zone:",Ct.zone.name,"; Task:",Ct.task&&Ct.task.source,"; Value:",Tt,Tt instanceof Error?Tt.stack:void 0):console.error(Ct)}},i.microtaskDrainDone=()=>{for(;l.length;){let Ct=l.shift();try{Ct.zone.runGuarded(()=>{throw Ct.throwOriginal?Ct.rejection:Ct})}catch(Tt){g(Tt)}}};let f=o("unhandledPromiseRejectionHandler");function g(Ct){i.onUnhandledError(Ct);try{let Tt=r[f];typeof Tt=="function"&&Tt.call(this,Ct)}catch{}}function _(Ct){return Ct&&Ct.then}function w(Ct){return Ct}function S(Ct){return me.reject(Ct)}let C=o("state"),b=o("value"),P=o("finally"),L=o("parentPromiseValue"),H=o("parentPromiseState"),M="Promise.then",E=null,it=!0,X=!1,W=0;function J(Ct,Tt){return at=>{try{ot(Ct,Tt,at)}catch(Et){ot(Ct,!1,Et)}}}let lt=function(){let Ct=!1;return function(Tt){return function(){Ct||(Ct=!0,Tt.apply(null,arguments))}}},Y="Promise resolved with itself",nt=o("currentTaskTrace");function ot(Ct,Tt,at){let Et=lt();if(Ct===at)throw new TypeError(Y);if(Ct[C]===E){let ie=null;try{(typeof at=="object"||typeof at=="function")&&(ie=at&&at.then)}catch(fe){return Et(()=>{ot(Ct,!1,fe)})(),Ct}if(Tt!==X&&at instanceof me&&at.hasOwnProperty(C)&&at.hasOwnProperty(b)&&at[C]!==E)Z(at),ot(Ct,at[C],at[b]);else if(Tt!==X&&typeof ie=="function")try{ie.call(at,Et(J(Ct,Tt)),Et(J(Ct,!1)))}catch(fe){Et(()=>{ot(Ct,!1,fe)})()}else{Ct[C]=Tt;let fe=Ct[b];if(Ct[b]=at,Ct[P]===P&&Tt===it&&(Ct[C]=Ct[H],Ct[b]=Ct[L]),Tt===X&&at instanceof Error){let $t=r.currentTask&&r.currentTask.data&&r.currentTask.data[m];$t&&s(at,nt,{configurable:!0,enumerable:!1,writable:!0,value:$t})}for(let $t=0;$t<fe.length;)et(Ct,fe[$t++],fe[$t++],fe[$t++],fe[$t++]);if(fe.length==0&&Tt==X){Ct[C]=W;let $t=at;try{throw new Error("Uncaught (in promise): "+a(at)+(at&&at.stack?`
`+at.stack:""))}catch(ve){$t=ve}c&&($t.throwOriginal=!0),$t.rejection=at,$t.promise=Ct,$t.zone=r.current,$t.task=r.currentTask,l.push($t),i.scheduleMicroTask()}}}return Ct}let xt=o("rejectionHandledHandler");function Z(Ct){if(Ct[C]===W){try{let Tt=r[xt];Tt&&typeof Tt=="function"&&Tt.call(this,{rejection:Ct[b],promise:Ct})}catch{}Ct[C]=X;for(let Tt=0;Tt<l.length;Tt++)Ct===l[Tt].promise&&l.splice(Tt,1)}}function et(Ct,Tt,at,Et,ie){Z(Ct);let fe=Ct[C],$t=fe?typeof Et=="function"?Et:w:typeof ie=="function"?ie:S;Tt.scheduleMicroTask(M,()=>{try{let ve=Ct[b],Se=!!at&&P===at[P];Se&&(at[L]=ve,at[H]=fe);let ne=Tt.run($t,void 0,Se&&$t!==S&&$t!==w?[]:[ve]);ot(at,!0,ne)}catch(ve){ot(at,!1,ve)}},at)}let tt="function ZoneAwarePromise() { [native code] }",ct=function(){},re=e.AggregateError;class me{static toString(){return tt}static resolve(Tt){return Tt instanceof me?Tt:ot(new this(null),it,Tt)}static reject(Tt){return ot(new this(null),X,Tt)}static withResolvers(){let Tt={};return Tt.promise=new me((at,Et)=>{Tt.resolve=at,Tt.reject=Et}),Tt}static any(Tt){if(!Tt||typeof Tt[Symbol.iterator]!="function")return Promise.reject(new re([],"All promises were rejected"));let at=[],Et=0;try{for(let $t of Tt)Et++,at.push(me.resolve($t))}catch{return Promise.reject(new re([],"All promises were rejected"))}if(Et===0)return Promise.reject(new re([],"All promises were rejected"));let ie=!1,fe=[];return new me(($t,ve)=>{for(let Se=0;Se<at.length;Se++)at[Se].then(ne=>{ie||(ie=!0,$t(ne))},ne=>{fe.push(ne),Et--,Et===0&&(ie=!0,ve(new re(fe,"All promises were rejected")))})})}static race(Tt){let at,Et,ie=new this((ve,Se)=>{at=ve,Et=Se});function fe(ve){at(ve)}function $t(ve){Et(ve)}for(let ve of Tt)_(ve)||(ve=this.resolve(ve)),ve.then(fe,$t);return ie}static all(Tt){return me.allWithCallback(Tt)}static allSettled(Tt){return(this&&this.prototype instanceof me?this:me).allWithCallback(Tt,{thenCallback:at=>({status:"fulfilled",value:at}),errorCallback:at=>({status:"rejected",reason:at})})}static allWithCallback(Tt,at){let Et,ie,fe=new this((ne,$e)=>{Et=ne,ie=$e}),$t=2,ve=0,Se=[];for(let ne of Tt){_(ne)||(ne=this.resolve(ne));let $e=ve;try{ne.then(yi=>{Se[$e]=at?at.thenCallback(yi):yi,$t--,$t===0&&Et(Se)},yi=>{at?(Se[$e]=at.errorCallback(yi),$t--,$t===0&&Et(Se)):ie(yi)})}catch(yi){ie(yi)}$t++,ve++}return $t-=2,$t===0&&Et(Se),fe}constructor(Tt){let at=this;if(!(at instanceof me))throw new Error("Must be an instanceof Promise.");at[C]=E,at[b]=[];try{let Et=lt();Tt&&Tt(Et(J(at,it)),Et(J(at,X)))}catch(Et){ot(at,!1,Et)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return me}then(Tt,at){let Et=this.constructor?.[Symbol.species];(!Et||typeof Et!="function")&&(Et=this.constructor||me);let ie=new Et(ct),fe=r.current;return this[C]==E?this[b].push(fe,ie,Tt,at):et(this,fe,ie,Tt,at),ie}catch(Tt){return this.then(null,Tt)}finally(Tt){let at=this.constructor?.[Symbol.species];(!at||typeof at!="function")&&(at=me);let Et=new at(ct);Et[P]=P;let ie=r.current;return this[C]==E?this[b].push(ie,Et,Tt,Tt):et(this,ie,Et,Tt,Tt),Et}}me.resolve=me.resolve,me.reject=me.reject,me.race=me.race,me.all=me.all;let Ze=e[h]=e.Promise;e.Promise=me;let li=o("thenPatched");function ci(Ct){let Tt=Ct.prototype,at=n(Tt,"then");if(at&&(at.writable===!1||!at.configurable))return;let Et=Tt.then;Tt[p]=Et,Ct.prototype.then=function(ie,fe){return new me(($t,ve)=>{Et.call(this,$t,ve)}).then(ie,fe)},Ct[li]=!0}i.patchThen=ci;function wr(Ct){return function(Tt,at){let Et=Ct.apply(Tt,at);if(Et instanceof me)return Et;let ie=Et.constructor;return ie[li]||ci(ie),Et}}return Ze&&(ci(Ze),Eo(e,"fetch",Ct=>wr(Ct))),Promise[r.__symbol__("uncaughtPromiseErrors")]=l,me})}function Yq(t){t.__load_patch("toString",e=>{let r=Function.prototype.toString,i=ki("OriginalDelegate"),n=ki("Promise"),s=ki("Error"),a=function(){if(typeof this=="function"){let c=this[i];if(c)return typeof c=="function"?r.call(c):Object.prototype.toString.call(c);if(this===Promise){let h=e[n];if(h)return r.call(h)}if(this===Error){let h=e[s];if(h)return r.call(h)}}return r.call(this)};a[i]=r,Function.prototype.toString=a;let o=Object.prototype.toString,l="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?l:o.call(this)}})}function Jq(t,e,r,i,n){let s=Zone.__symbol__(i);if(e[s])return;let a=e[s]=e[i];e[i]=function(o,l,c){return l&&l.prototype&&n.forEach(function(h){let p=`${r}.${i}::`+h,m=l.prototype;try{if(m.hasOwnProperty(h)){let f=t.ObjectGetOwnPropertyDescriptor(m,h);f&&f.value?(f.value=t.wrapWithCurrentZone(f.value,p),t._redefineProperty(l.prototype,h,f)):m[h]&&(m[h]=t.wrapWithCurrentZone(m[h],p))}else m[h]&&(m[h]=t.wrapWithCurrentZone(m[h],p))}catch{}}),a.call(e,o,l,c)},t.attachOriginToPatched(e[i],a)}function Qq(t){t.__load_patch("util",(e,r,i)=>{let n=Yw(e);i.patchOnProperties=kP,i.patchMethod=Eo,i.bindArguments=nx,i.patchMacroTask=Fq;let s=r.__symbol__("BLACK_LISTED_EVENTS"),a=r.__symbol__("UNPATCHED_EVENTS");e[a]&&(e[s]=e[a]),e[s]&&(r[s]=r[a]=e[s]),i.patchEventPrototype=Hq,i.patchEventTarget=Uq,i.isIEOrEdge=Vq,i.ObjectDefineProperty=Jw,i.ObjectGetOwnPropertyDescriptor=Xp,i.ObjectCreate=Rq,i.ArraySlice=Bq,i.patchClass=$p,i.wrapWithCurrentZone=ix,i.filterProperties=OP,i.attachOriginToPatched=To,i._redefineProperty=Object.defineProperty,i.patchCallbacks=Jq,i.getGlobalObjects=()=>({globalSources:AP,zoneSymbolEventNames:Ps,eventNames:n,isBrowser:sx,isMix:CP,isNode:dv,TRUE_STR:Ao,FALSE_STR:So,ZONE_SYMBOL_PREFIX:qp,ADD_EVENT_LISTENER_STR:tx,REMOVE_EVENT_LISTENER_STR:ex})})}function tK(t){Kq(t),Yq(t),Qq(t)}var PP=Mq();tK(PP);qq(PP);var eK=Object.create,gy=Object.defineProperty,iK=Object.defineProperties,rK=Object.getOwnPropertyDescriptor,nK=Object.getOwnPropertyDescriptors,sK=Object.getOwnPropertyNames,U_=Object.getOwnPropertySymbols,aK=Object.getPrototypeOf,tA=Object.prototype.hasOwnProperty,lN=Object.prototype.propertyIsEnumerable,q1=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),MP=(t,e,r)=>e in t?gy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,x=(t,e)=>{for(var r in e||={})tA.call(e,r)&&MP(t,r,e[r]);if(U_)for(var r of U_(e))lN.call(e,r)&&MP(t,r,e[r]);return t},Q=(t,e)=>iK(t,nK(e)),oK=(t,e)=>{var r={};for(var i in t)tA.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&U_)for(var i of U_(t))e.indexOf(i)<0&&lN.call(t,i)&&(r[i]=t[i]);return r},oc=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),lc=(t,e)=>{for(var r in e)gy(t,r,{get:e[r],enumerable:!0})},lK=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of sK(e))!tA.call(t,n)&&n!==r&&gy(t,n,{get:()=>e[n],enumerable:!(i=rK(e,n))||i.enumerable});return t},tl=(t,e,r)=>(r=t!=null?eK(aK(t)):{},lK(e||!t||!t.__esModule?gy(r,"default",{value:t,enumerable:!0}):r,t)),Dt=(t,e,r)=>new Promise((i,n)=>{var s=l=>{try{o(r.next(l))}catch(c){n(c)}},a=l=>{try{o(r.throw(l))}catch(c){n(c)}},o=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,a);o((r=r.apply(t,e)).next())}),Vm=function(t,e){this[0]=t,this[1]=e},eA=(t,e,r)=>{var i=(a,o,l,c)=>{try{var h=r[a](o),p=(o=h.value)instanceof Vm,m=h.done;Promise.resolve(p?o[0]:o).then(f=>p?i(a==="return"?a:"next",o[1]?{done:f.done,value:f.value}:f,l,c):l({value:f,done:m})).catch(f=>i("throw",f,l,c))}catch(f){c(f)}},n=a=>s[a]=o=>new Promise((l,c)=>i(a,o,l,c)),s={};return r=r.apply(t,e),s[q1("asyncIterator")]=()=>s,n("next"),n("throw"),n("return"),s},iA=(t,e,r)=>(e=t[q1("asyncIterator")])?e.call(t):(t=t[q1("iterator")](),e={},r=(i,n)=>(n=t[i])&&(e[i]=s=>new Promise((a,o,l)=>(s=n.call(t,s),l=s.done,Promise.resolve(s.value).then(c=>a({value:c,done:l}),o)))),r("next"),r("return"),e),cK=oc(()=>{"use strict"}),uK=oc((t,e)=>{"use strict";(function(r,i,n,s){"use strict";var a=["","webkit","Moz","MS","ms","o"],o=i.createElement("div"),l="function",c=Math.round,h=Math.abs,p=Date.now;function m(T,D,G){return setTimeout(P(T,G),D)}function f(T,D,G){return Array.isArray(T)?(g(T,G[D],G),!0):!1}function g(T,D,G){var pt;if(T)if(T.forEach)T.forEach(D,G);else if(T.length!==s)for(pt=0;pt<T.length;)D.call(G,T[pt],pt,T),pt++;else for(pt in T)T.hasOwnProperty(pt)&&D.call(G,T[pt],pt,T)}function _(T,D,G){var pt="DEPRECATED METHOD: "+D+`
`+G+` AT 
`;return function(){var St=new Error("get-stack-trace"),he=St&&St.stack?St.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",ze=r.console&&(r.console.warn||r.console.log);return ze&&ze.call(r.console,pt,he),T.apply(this,arguments)}}var w;typeof Object.assign!="function"?w=function(T){if(T===s||T===null)throw new TypeError("Cannot convert undefined or null to object");for(var D=Object(T),G=1;G<arguments.length;G++){var pt=arguments[G];if(pt!==s&&pt!==null)for(var St in pt)pt.hasOwnProperty(St)&&(D[St]=pt[St])}return D}:w=Object.assign;var S=_(function(T,D,G){for(var pt=Object.keys(D),St=0;St<pt.length;)(!G||G&&T[pt[St]]===s)&&(T[pt[St]]=D[pt[St]]),St++;return T},"extend","Use `assign`."),C=_(function(T,D){return S(T,D,!0)},"merge","Use `assign`.");function b(T,D,G){var pt=D.prototype,St;St=T.prototype=Object.create(pt),St.constructor=T,St._super=pt,G&&w(St,G)}function P(T,D){return function(){return T.apply(D,arguments)}}function L(T,D){return typeof T==l?T.apply(D&&D[0]||s,D):T}function H(T,D){return T===s?D:T}function M(T,D,G){g(W(D),function(pt){T.addEventListener(pt,G,!1)})}function E(T,D,G){g(W(D),function(pt){T.removeEventListener(pt,G,!1)})}function it(T,D){for(;T;){if(T==D)return!0;T=T.parentNode}return!1}function X(T,D){return T.indexOf(D)>-1}function W(T){return T.trim().split(/\s+/g)}function J(T,D,G){if(T.indexOf&&!G)return T.indexOf(D);for(var pt=0;pt<T.length;){if(G&&T[pt][G]==D||!G&&T[pt]===D)return pt;pt++}return-1}function lt(T){return Array.prototype.slice.call(T,0)}function Y(T,D,G){for(var pt=[],St=[],he=0;he<T.length;){var ze=D?T[he][D]:T[he];J(St,ze)<0&&pt.push(T[he]),St[he]=ze,he++}return G&&(D?pt=pt.sort(function(Gi,In){return Gi[D]>In[D]}):pt=pt.sort()),pt}function nt(T,D){for(var G,pt,St=D[0].toUpperCase()+D.slice(1),he=0;he<a.length;){if(G=a[he],pt=G?G+St:D,pt in T)return pt;he++}return s}var ot=1;function xt(){return ot++}function Z(T){var D=T.ownerDocument||T;return D.defaultView||D.parentWindow||r}var et=/mobile|tablet|ip(ad|hone|od)|android/i,tt="ontouchstart"in r,ct=nt(r,"PointerEvent")!==s,re=tt&&et.test(navigator.userAgent),me="touch",Ze="pen",li="mouse",ci="kinect",wr=25,Ct=1,Tt=2,at=4,Et=8,ie=1,fe=2,$t=4,ve=8,Se=16,ne=fe|$t,$e=ve|Se,yi=ne|$e,jr=["x","y"],Fi=["clientX","clientY"];function Ki(T,D){var G=this;this.manager=T,this.callback=D,this.element=T.element,this.target=T.options.inputTarget,this.domHandler=function(pt){L(T.options.enable,[T])&&G.handler(pt)},this.init()}Ki.prototype={handler:function(){},init:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(Z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(Z(this.element),this.evWin,this.domHandler)}};function ya(T){var D,G=T.options.inputClass;return G?D=G:ct?D=xp:re?D=lh:tt?D=Ap:D=oh,new D(T,ah)}function ah(T,D,G){var pt=G.pointers.length,St=G.changedPointers.length,he=D&Ct&&pt-St===0,ze=D&(at|Et)&&pt-St===0;G.isFirst=!!he,G.isFinal=!!ze,he&&(T.session={}),G.eventType=D,ho(T,G),T.emit("hammer.input",G),T.recognize(G),T.session.prevInput=G}function ho(T,D){var G=T.session,pt=D.pointers,St=pt.length;G.firstInput||(G.firstInput=Jr(D)),St>1&&!G.firstMultiple?G.firstMultiple=Jr(D):St===1&&(G.firstMultiple=!1);var he=G.firstInput,ze=G.firstMultiple,Gi=ze?ze.center:he.center,In=D.center=po(pt);D.timeStamp=p(),D.deltaTime=D.timeStamp-he.timeStamp,D.angle=Xn(Gi,In),D.distance=qs(Gi,In),fc(G,D),D.offsetDirection=mo(D.deltaX,D.deltaY);var pn=Xs(D.deltaTime,D.deltaX,D.deltaY);D.overallVelocityX=pn.x,D.overallVelocityY=pn.y,D.overallVelocity=h(pn.x)>h(pn.y)?pn.x:pn.y,D.scale=ze?Qr(ze.pointers,pt):1,D.rotation=ze?Ur(ze.pointers,pt):0,D.maxPointers=G.prevInput?D.pointers.length>G.prevInput.maxPointers?D.pointers.length:G.prevInput.maxPointers:D.pointers.length,wa(G,D);var ws=T.element;it(D.srcEvent.target,ws)&&(ws=D.srcEvent.target),D.target=ws}function fc(T,D){var G=D.center,pt=T.offsetDelta||{},St=T.prevDelta||{},he=T.prevInput||{};(D.eventType===Ct||he.eventType===at)&&(St=T.prevDelta={x:he.deltaX||0,y:he.deltaY||0},pt=T.offsetDelta={x:G.x,y:G.y}),D.deltaX=St.x+(G.x-pt.x),D.deltaY=St.y+(G.y-pt.y)}function wa(T,D){var G=T.lastInterval||D,pt=D.timeStamp-G.timeStamp,St,he,ze,Gi;if(D.eventType!=Et&&(pt>wr||G.velocity===s)){var In=D.deltaX-G.deltaX,pn=D.deltaY-G.deltaY,ws=Xs(pt,In,pn);he=ws.x,ze=ws.y,St=h(ws.x)>h(ws.y)?ws.x:ws.y,Gi=mo(In,pn),T.lastInterval=D}else St=G.velocity,he=G.velocityX,ze=G.velocityY,Gi=G.direction;D.velocity=St,D.velocityX=he,D.velocityY=ze,D.direction=Gi}function Jr(T){for(var D=[],G=0;G<T.pointers.length;)D[G]={clientX:c(T.pointers[G].clientX),clientY:c(T.pointers[G].clientY)},G++;return{timeStamp:p(),pointers:D,center:po(D),deltaX:T.deltaX,deltaY:T.deltaY}}function po(T){var D=T.length;if(D===1)return{x:c(T[0].clientX),y:c(T[0].clientY)};for(var G=0,pt=0,St=0;St<D;)G+=T[St].clientX,pt+=T[St].clientY,St++;return{x:c(G/D),y:c(pt/D)}}function Xs(T,D,G){return{x:D/T||0,y:G/T||0}}function mo(T,D){return T===D?ie:h(T)>=h(D)?T<0?fe:$t:D<0?ve:Se}function qs(T,D,G){G||(G=jr);var pt=D[G[0]]-T[G[0]],St=D[G[1]]-T[G[1]];return Math.sqrt(pt*pt+St*St)}function Xn(T,D,G){G||(G=jr);var pt=D[G[0]]-T[G[0]],St=D[G[1]]-T[G[1]];return Math.atan2(St,pt)*180/Math.PI}function Ur(T,D){return Xn(D[1],D[0],Fi)+Xn(T[1],T[0],Fi)}function Qr(T,D){return qs(D[0],D[1],Fi)/qs(T[0],T[1],Fi)}var bp={mousedown:Ct,mousemove:Tt,mouseup:at},yp="mousedown",O0="mousemove mouseup";function oh(){this.evEl=yp,this.evWin=O0,this.pressed=!1,Ki.apply(this,arguments)}b(oh,Ki,{handler:function(T){var D=bp[T.type];D&Ct&&T.button===0&&(this.pressed=!0),D&Tt&&T.which!==1&&(D=at),this.pressed&&(D&at&&(this.pressed=!1),this.callback(this.manager,D,{pointers:[T],changedPointers:[T],pointerType:li,srcEvent:T}))}});var P0={pointerdown:Ct,pointermove:Tt,pointerup:at,pointercancel:Et,pointerout:Et},cg={2:me,3:Ze,4:li,5:ci},wp="pointerdown",ug="pointermove pointerup pointercancel";r.MSPointerEvent&&!r.PointerEvent&&(wp="MSPointerDown",ug="MSPointerMove MSPointerUp MSPointerCancel");function xp(){this.evEl=wp,this.evWin=ug,Ki.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}b(xp,Ki,{handler:function(T){var D=this.store,G=!1,pt=T.type.toLowerCase().replace("ms",""),St=P0[pt],he=cg[T.pointerType]||T.pointerType,ze=he==me,Gi=J(D,T.pointerId,"pointerId");St&Ct&&(T.button===0||ze)?Gi<0&&(D.push(T),Gi=D.length-1):St&(at|Et)&&(G=!0),!(Gi<0)&&(D[Gi]=T,this.callback(this.manager,St,{pointers:D,changedPointers:[T],pointerType:he,srcEvent:T}),G&&D.splice(Gi,1))}});var M0={touchstart:Ct,touchmove:Tt,touchend:at,touchcancel:Et},R0="touchstart",hg="touchstart touchmove touchend touchcancel";function dg(){this.evTarget=R0,this.evWin=hg,this.started=!1,Ki.apply(this,arguments)}b(dg,Ki,{handler:function(T){var D=M0[T.type];if(D===Ct&&(this.started=!0),!!this.started){var G=B0.call(this,T,D);D&(at|Et)&&G[0].length-G[1].length===0&&(this.started=!1),this.callback(this.manager,D,{pointers:G[0],changedPointers:G[1],pointerType:me,srcEvent:T})}}});function B0(T,D){var G=lt(T.touches),pt=lt(T.changedTouches);return D&(at|Et)&&(G=Y(G.concat(pt),"identifier",!0)),[G,pt]}var D0={touchstart:Ct,touchmove:Tt,touchend:at,touchcancel:Et},Cp="touchstart touchmove touchend touchcancel";function lh(){this.evTarget=Cp,this.targetIds={},Ki.apply(this,arguments)}b(lh,Ki,{handler:function(T){var D=D0[T.type],G=kp.call(this,T,D);G&&this.callback(this.manager,D,{pointers:G[0],changedPointers:G[1],pointerType:me,srcEvent:T})}});function kp(T,D){var G=lt(T.touches),pt=this.targetIds;if(D&(Ct|Tt)&&G.length===1)return pt[G[0].identifier]=!0,[G,G];var St,he,ze=lt(T.changedTouches),Gi=[],In=this.target;if(he=G.filter(function(pn){return it(pn.target,In)}),D===Ct)for(St=0;St<he.length;)pt[he[St].identifier]=!0,St++;for(St=0;St<ze.length;)pt[ze[St].identifier]&&Gi.push(ze[St]),D&(at|Et)&&delete pt[ze[St].identifier],St++;if(Gi.length)return[Y(he.concat(Gi),"identifier",!0),Gi]}var L0=2500,pg=25;function Ap(){Ki.apply(this,arguments);var T=P(this.handler,this);this.touch=new lh(this.manager,T),this.mouse=new oh(this.manager,T),this.primaryTouch=null,this.lastTouches=[]}b(Ap,Ki,{handler:function(T,D,G){var pt=G.pointerType==me,St=G.pointerType==li;if(!(St&&G.sourceCapabilities&&G.sourceCapabilities.firesTouchEvents)){if(pt)N0.call(this,D,G);else if(St&&F0.call(this,G))return;this.callback(T,D,G)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function N0(T,D){T&Ct?(this.primaryTouch=D.changedPointers[0].identifier,mg.call(this,D)):T&(at|Et)&&mg.call(this,D)}function mg(T){var D=T.changedPointers[0];if(D.identifier===this.primaryTouch){var G={x:D.clientX,y:D.clientY};this.lastTouches.push(G);var pt=this.lastTouches,St=function(){var he=pt.indexOf(G);he>-1&&pt.splice(he,1)};setTimeout(St,L0)}}function F0(T){for(var D=T.srcEvent.clientX,G=T.srcEvent.clientY,pt=0;pt<this.lastTouches.length;pt++){var St=this.lastTouches[pt],he=Math.abs(D-St.x),ze=Math.abs(G-St.y);if(he<=pg&&ze<=pg)return!0}return!1}var fg=nt(o.style,"touchAction"),gg=fg!==s,Sp="compute",vg="auto",Ep="manipulation",fo="none",gc="pan-x",vc="pan-y",ch=uh();function ml(T,D){this.manager=T,this.set(D)}ml.prototype={set:function(T){T==Sp&&(T=this.compute()),gg&&this.manager.element.style&&ch[T]&&(this.manager.element.style[fg]=T),this.actions=T.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var T=[];return g(this.manager.recognizers,function(D){L(D.options.enable,[D])&&(T=T.concat(D.getTouchAction()))}),z0(T.join(" "))},preventDefaults:function(T){var D=T.srcEvent,G=T.offsetDirection;if(this.manager.session.prevented){D.preventDefault();return}var pt=this.actions,St=X(pt,fo)&&!ch[fo],he=X(pt,vc)&&!ch[vc],ze=X(pt,gc)&&!ch[gc];if(St){var Gi=T.pointers.length===1,In=T.distance<2,pn=T.deltaTime<250;if(Gi&&In&&pn)return}if(!(ze&&he)&&(St||he&&G&ne||ze&&G&$e))return this.preventSrc(D)},preventSrc:function(T){this.manager.session.prevented=!0,T.preventDefault()}};function z0(T){if(X(T,fo))return fo;var D=X(T,gc),G=X(T,vc);return D&&G?fo:D||G?D?gc:vc:X(T,Ep)?Ep:vg}function uh(){if(!gg)return!1;var T={},D=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(G){T[G]=D?r.CSS.supports("touch-action",G):!0}),T}var hh=1,En=2,fl=4,Ks=8,bs=Ks,gl=16,ys=32;function Ys(T){this.options=w({},this.defaults,T||{}),this.id=xt(),this.manager=null,this.options.enable=H(this.options.enable,!0),this.state=hh,this.simultaneous={},this.requireFail=[]}Ys.prototype={defaults:{},set:function(T){return w(this.options,T),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(T){if(f(T,"recognizeWith",this))return this;var D=this.simultaneous;return T=_c(T,this),D[T.id]||(D[T.id]=T,T.recognizeWith(this)),this},dropRecognizeWith:function(T){return f(T,"dropRecognizeWith",this)?this:(T=_c(T,this),delete this.simultaneous[T.id],this)},requireFailure:function(T){if(f(T,"requireFailure",this))return this;var D=this.requireFail;return T=_c(T,this),J(D,T)===-1&&(D.push(T),T.requireFailure(this)),this},dropRequireFailure:function(T){if(f(T,"dropRequireFailure",this))return this;T=_c(T,this);var D=J(this.requireFail,T);return D>-1&&this.requireFail.splice(D,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(T){return!!this.simultaneous[T.id]},emit:function(T){var D=this,G=this.state;function pt(St){D.manager.emit(St,T)}G<Ks&&pt(D.options.event+_g(G)),pt(D.options.event),T.additionalEvent&&pt(T.additionalEvent),G>=Ks&&pt(D.options.event+_g(G))},tryEmit:function(T){if(this.canEmit())return this.emit(T);this.state=ys},canEmit:function(){for(var T=0;T<this.requireFail.length;){if(!(this.requireFail[T].state&(ys|hh)))return!1;T++}return!0},recognize:function(T){var D=w({},T);if(!L(this.options.enable,[this,D])){this.reset(),this.state=ys;return}this.state&(bs|gl|ys)&&(this.state=hh),this.state=this.process(D),this.state&(En|fl|Ks|gl)&&this.tryEmit(D)},process:function(T){},getTouchAction:function(){},reset:function(){}};function _g(T){return T&gl?"cancel":T&Ks?"end":T&fl?"move":T&En?"start":""}function bg(T){return T==Se?"down":T==ve?"up":T==fe?"left":T==$t?"right":""}function _c(T,D){var G=D.manager;return G?G.get(T):T}function Tn(){Ys.apply(this,arguments)}b(Tn,Ys,{defaults:{pointers:1},attrTest:function(T){var D=this.options.pointers;return D===0||T.pointers.length===D},process:function(T){var D=this.state,G=T.eventType,pt=D&(En|fl),St=this.attrTest(T);return pt&&(G&Et||!St)?D|gl:pt||St?G&at?D|Ks:D&En?D|fl:En:ys}});function bc(){Tn.apply(this,arguments),this.pX=null,this.pY=null}b(bc,Tn,{defaults:{event:"pan",threshold:10,pointers:1,direction:yi},getTouchAction:function(){var T=this.options.direction,D=[];return T&ne&&D.push(vc),T&$e&&D.push(gc),D},directionTest:function(T){var D=this.options,G=!0,pt=T.distance,St=T.direction,he=T.deltaX,ze=T.deltaY;return St&D.direction||(D.direction&ne?(St=he===0?ie:he<0?fe:$t,G=he!=this.pX,pt=Math.abs(T.deltaX)):(St=ze===0?ie:ze<0?ve:Se,G=ze!=this.pY,pt=Math.abs(T.deltaY))),T.direction=St,G&&pt>D.threshold&&St&D.direction},attrTest:function(T){return Tn.prototype.attrTest.call(this,T)&&(this.state&En||!(this.state&En)&&this.directionTest(T))},emit:function(T){this.pX=T.deltaX,this.pY=T.deltaY;var D=bg(T.direction);D&&(T.additionalEvent=this.options.event+D),this._super.emit.call(this,T)}});function yc(){Tn.apply(this,arguments)}b(yc,Tn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[fo]},attrTest:function(T){return this._super.attrTest.call(this,T)&&(Math.abs(T.scale-1)>this.options.threshold||this.state&En)},emit:function(T){if(T.scale!==1){var D=T.scale<1?"in":"out";T.additionalEvent=this.options.event+D}this._super.emit.call(this,T)}});function Tp(){Ys.apply(this,arguments),this._timer=null,this._input=null}b(Tp,Ys,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[vg]},process:function(T){var D=this.options,G=T.pointers.length===D.pointers,pt=T.distance<D.threshold,St=T.deltaTime>D.time;if(this._input=T,!pt||!G||T.eventType&(at|Et)&&!St)this.reset();else if(T.eventType&Ct)this.reset(),this._timer=m(function(){this.state=bs,this.tryEmit()},D.time,this);else if(T.eventType&at)return bs;return ys},reset:function(){clearTimeout(this._timer)},emit:function(T){this.state===bs&&(T&&T.eventType&at?this.manager.emit(this.options.event+"up",T):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}});function dh(){Tn.apply(this,arguments)}b(dh,Tn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[fo]},attrTest:function(T){return this._super.attrTest.call(this,T)&&(Math.abs(T.rotation)>this.options.threshold||this.state&En)}});function vl(){Tn.apply(this,arguments)}b(vl,Tn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ne|$e,pointers:1},getTouchAction:function(){return bc.prototype.getTouchAction.call(this)},attrTest:function(T){var D=this.options.direction,G;return D&(ne|$e)?G=T.overallVelocity:D&ne?G=T.overallVelocityX:D&$e&&(G=T.overallVelocityY),this._super.attrTest.call(this,T)&&D&T.offsetDirection&&T.distance>this.options.threshold&&T.maxPointers==this.options.pointers&&h(G)>this.options.velocity&&T.eventType&at},emit:function(T){var D=bg(T.offsetDirection);D&&this.manager.emit(this.options.event+D,T),this.manager.emit(this.options.event,T)}});function wc(){Ys.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}b(wc,Ys,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Ep]},process:function(T){var D=this.options,G=T.pointers.length===D.pointers,pt=T.distance<D.threshold,St=T.deltaTime<D.time;if(this.reset(),T.eventType&Ct&&this.count===0)return this.failTimeout();if(pt&&St&&G){if(T.eventType!=at)return this.failTimeout();var he=this.pTime?T.timeStamp-this.pTime<D.interval:!0,ze=!this.pCenter||qs(this.pCenter,T.center)<D.posThreshold;this.pTime=T.timeStamp,this.pCenter=T.center,!ze||!he?this.count=1:this.count+=1,this._input=T;var Gi=this.count%D.taps;if(Gi===0)return this.hasRequireFailures()?(this._timer=m(function(){this.state=bs,this.tryEmit()},D.interval,this),En):bs}return ys},failTimeout:function(){return this._timer=m(function(){this.state=ys},this.options.interval,this),ys},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==bs&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function xa(T,D){return D=D||{},D.recognizers=H(D.recognizers,xa.defaults.preset),new xc(T,D)}xa.VERSION="2.0.7",xa.defaults={domEvents:!1,touchAction:Sp,enable:!0,inputTarget:null,inputClass:null,preset:[[dh,{enable:!1}],[yc,{enable:!1},["rotate"]],[vl,{direction:ne}],[bc,{direction:ne},["swipe"]],[wc],[wc,{event:"doubletap",taps:2},["tap"]],[Tp]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var yg=1,Ip=2;function xc(T,D){this.options=w({},xa.defaults,D||{}),this.options.inputTarget=this.options.inputTarget||T,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=T,this.input=ya(this),this.touchAction=new ml(this,this.options.touchAction),wg(this,!0),g(this.options.recognizers,function(G){var pt=this.add(new G[0](G[1]));G[2]&&pt.recognizeWith(G[2]),G[3]&&pt.requireFailure(G[3])},this)}xc.prototype={set:function(T){return w(this.options,T),T.touchAction&&this.touchAction.update(),T.inputTarget&&(this.input.destroy(),this.input.target=T.inputTarget,this.input.init()),this},stop:function(T){this.session.stopped=T?Ip:yg},recognize:function(T){var D=this.session;if(!D.stopped){this.touchAction.preventDefaults(T);var G,pt=this.recognizers,St=D.curRecognizer;(!St||St&&St.state&bs)&&(St=D.curRecognizer=null);for(var he=0;he<pt.length;)G=pt[he],D.stopped!==Ip&&(!St||G==St||G.canRecognizeWith(St))?G.recognize(T):G.reset(),!St&&G.state&(En|fl|Ks)&&(St=D.curRecognizer=G),he++}},get:function(T){if(T instanceof Ys)return T;for(var D=this.recognizers,G=0;G<D.length;G++)if(D[G].options.event==T)return D[G];return null},add:function(T){if(f(T,"add",this))return this;var D=this.get(T.options.event);return D&&this.remove(D),this.recognizers.push(T),T.manager=this,this.touchAction.update(),T},remove:function(T){if(f(T,"remove",this))return this;if(T=this.get(T),T){var D=this.recognizers,G=J(D,T);G!==-1&&(D.splice(G,1),this.touchAction.update())}return this},on:function(T,D){if(T!==s&&D!==s){var G=this.handlers;return g(W(T),function(pt){G[pt]=G[pt]||[],G[pt].push(D)}),this}},off:function(T,D){if(T!==s){var G=this.handlers;return g(W(T),function(pt){D?G[pt]&&G[pt].splice(J(G[pt],D),1):delete G[pt]}),this}},emit:function(T,D){this.options.domEvents&&xg(T,D);var G=this.handlers[T]&&this.handlers[T].slice();if(!(!G||!G.length)){D.type=T,D.preventDefault=function(){D.srcEvent.preventDefault()};for(var pt=0;pt<G.length;)G[pt](D),pt++}},destroy:function(){this.element&&wg(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function wg(T,D){var G=T.element;if(G.style){var pt;g(T.options.cssProps,function(St,he){pt=nt(G.style,he),D?(T.oldCssProps[pt]=G.style[pt],G.style[pt]=St):G.style[pt]=T.oldCssProps[pt]||""}),D||(T.oldCssProps={})}}function xg(T,D){var G=i.createEvent("Event");G.initEvent(T,!0,!0),G.gesture=D,D.target.dispatchEvent(G)}w(xa,{INPUT_START:Ct,INPUT_MOVE:Tt,INPUT_END:at,INPUT_CANCEL:Et,STATE_POSSIBLE:hh,STATE_BEGAN:En,STATE_CHANGED:fl,STATE_ENDED:Ks,STATE_RECOGNIZED:bs,STATE_CANCELLED:gl,STATE_FAILED:ys,DIRECTION_NONE:ie,DIRECTION_LEFT:fe,DIRECTION_RIGHT:$t,DIRECTION_UP:ve,DIRECTION_DOWN:Se,DIRECTION_HORIZONTAL:ne,DIRECTION_VERTICAL:$e,DIRECTION_ALL:yi,Manager:xc,Input:Ki,TouchAction:ml,TouchInput:lh,MouseInput:oh,PointerEventInput:xp,TouchMouseInput:Ap,SingleTouchInput:dg,Recognizer:Ys,AttrRecognizer:Tn,Tap:wc,Pan:bc,Swipe:vl,Pinch:yc,Rotate:dh,Press:Tp,on:M,off:E,each:g,merge:C,extend:S,assign:w,inherit:b,bindFn:P,prefixed:nt});var Op=typeof r<"u"?r:typeof self<"u"?self:{};Op.Hammer=xa,typeof e<"u"&&e.exports?e.exports=xa:r[n]=xa})(window,document,"Hammer")}),hK=oc((t,e)=>{"use strict";e.exports=i,e.exports.default=i;var r=1e20;function i(l,c,h,p,m,f){this.fontSize=l||24,this.buffer=c===void 0?3:c,this.cutoff=p||.25,this.fontFamily=m||"sans-serif",this.fontWeight=f||"normal",this.radius=h||8;var g=this.size=this.fontSize+this.buffer*2,_=g+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=g,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(_*_),this.gridInner=new Float64Array(_*_),this.f=new Float64Array(_),this.z=new Float64Array(_+1),this.v=new Uint16Array(_),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(g/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function n(l,c,h,p,m,f,g){f.fill(r,0,c*h),g.fill(0,0,c*h);for(var _=(c-p)/2,w=0;w<m;w++)for(var S=0;S<p;S++){var C=(w+_)*c+S+_,b=l.data[4*(w*p+S)+3]/255;if(b===1)f[C]=0,g[C]=r;else if(b===0)f[C]=r,g[C]=0;else{var P=Math.max(0,.5-b),L=Math.max(0,b-.5);f[C]=P*P,g[C]=L*L}}}function s(l,c,h,p,m,f,g){for(var _=0;_<c*h;_++){var w=Math.sqrt(p[_])-Math.sqrt(m[_]);l[_]=Math.round(255-255*(w/f+g))}}i.prototype._draw=function(l,c){var h=this.ctx.measureText(l),p=h.width,m=2*this.buffer,f,g,_,w,S,C,b,P;c&&this.useMetrics?(S=Math.floor(h.actualBoundingBoxAscent),P=this.buffer+Math.ceil(h.actualBoundingBoxAscent),C=this.buffer,b=this.buffer,g=Math.min(this.size,Math.ceil(h.actualBoundingBoxRight-h.actualBoundingBoxLeft)),w=Math.min(this.size-C,Math.ceil(h.actualBoundingBoxAscent+h.actualBoundingBoxDescent)),f=g+m,_=w+m,this.ctx.textBaseline="alphabetic"):(f=g=this.size,_=w=this.size,S=19*this.fontSize/24,C=b=0,P=this.middle,this.ctx.textBaseline="middle");var L;g&&w&&(this.ctx.clearRect(b,C,g,w),this.ctx.fillText(l,this.buffer,P),L=this.ctx.getImageData(b,C,g,w));var H=new Uint8ClampedArray(f*_);return n(L,f,_,g,w,this.gridOuter,this.gridInner),a(this.gridOuter,f,_,this.f,this.v,this.z),a(this.gridInner,f,_,this.f,this.v,this.z),s(H,f,_,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:H,metrics:{width:g,height:w,sdfWidth:f,sdfHeight:_,top:S,left:0,advance:p}}},i.prototype.draw=function(l){return this._draw(l,!1).data},i.prototype.drawWithMetrics=function(l){return this._draw(l,!0)};function a(l,c,h,p,m,f){for(var g=0;g<c;g++)o(l,g,c,h,p,m,f);for(var _=0;_<h;_++)o(l,_*c,1,c,p,m,f)}function o(l,c,h,p,m,f,g){var _,w,S,C;for(f[0]=0,g[0]=-r,g[1]=r,_=0;_<p;_++)m[_]=l[c+_*h];for(_=1,w=0,S=0;_<p;_++){do C=f[w],S=(m[_]-m[C]+_*_-C*C)/(_-C)/2;while(S<=g[w]&&--w>-1);w++,f[w]=_,g[w]=S,g[w+1]=r}for(_=0,w=0;_<p;_++){for(;g[w+1]<_;)w++;C=f[w],l[c+_*h]=m[C]+(_-C)*(_-C)}}}),cN=oc((t,e)=>{"use strict";(function(r,i){typeof t=="object"?e.exports=i():r.ResizeSensor=i()})(typeof window<"u"?window:t,function(){if(typeof window>"u")return null;var r=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),i=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||function(h){return r.setTimeout(h,20)},n=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||function(h){r.clearTimeout(h)};function s(h,p){var m=Object.prototype.toString.call(h),f=m==="[object Array]"||m==="[object NodeList]"||m==="[object HTMLCollection]"||m==="[object Object]"||typeof jQuery<"u"&&h instanceof jQuery||typeof Elements<"u"&&h instanceof Elements,g=0,_=h.length;if(f)for(;g<_;g++)p(h[g]);else p(h)}function a(h){if(!h.getBoundingClientRect)return{width:h.offsetWidth,height:h.offsetHeight};var p=h.getBoundingClientRect();return{width:Math.round(p.width),height:Math.round(p.height)}}function o(h,p){Object.keys(p).forEach(function(m){h.style[m]=p[m]})}var l=function(h,p){var m=0;function f(){var _=[];this.add=function(C){_.push(C)};var w,S;this.call=function(C){for(w=0,S=_.length;w<S;w++)_[w].call(this,C)},this.remove=function(C){var b=[];for(w=0,S=_.length;w<S;w++)_[w]!==C&&b.push(_[w]);_=b},this.length=function(){return _.length}}function g(_,w){if(_){if(_.resizedAttached){_.resizedAttached.add(w);return}_.resizedAttached=new f,_.resizedAttached.add(w),_.resizeSensor=document.createElement("div"),_.resizeSensor.dir="ltr",_.resizeSensor.className="resize-sensor";var S={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},C={position:"absolute",left:"0px",top:"0px",transition:"0s"};o(_.resizeSensor,S);var b=document.createElement("div");b.className="resize-sensor-expand",o(b,S);var P=document.createElement("div");o(P,C),b.appendChild(P);var L=document.createElement("div");L.className="resize-sensor-shrink",o(L,S);var H=document.createElement("div");o(H,C),o(H,{width:"200%",height:"200%"}),L.appendChild(H),_.resizeSensor.appendChild(b),_.resizeSensor.appendChild(L),_.appendChild(_.resizeSensor);var M=window.getComputedStyle(_),E=M?M.getPropertyValue("position"):null;E!=="absolute"&&E!=="relative"&&E!=="fixed"&&E!=="sticky"&&(_.style.position="relative");var it=!1,X=0,W=a(_),J=0,lt=0,Y=!0;m=0;var nt=function(){var tt=_.offsetWidth,ct=_.offsetHeight;P.style.width=tt+10+"px",P.style.height=ct+10+"px",b.scrollLeft=tt+10,b.scrollTop=ct+10,L.scrollLeft=tt+10,L.scrollTop=ct+10},ot=function(){if(Y){var tt=_.offsetWidth===0&&_.offsetHeight===0;if(tt){m||(m=i(function(){m=0,ot()}));return}else Y=!1}nt()};_.resizeSensor.resetSensor=ot;var xt=function(){X=0,it&&(J=W.width,lt=W.height,_.resizedAttached&&_.resizedAttached.call(W))},Z=function(){W=a(_),it=W.width!==J||W.height!==lt,it&&!X&&(X=i(xt)),ot()},et=function(tt,ct,re){tt.attachEvent?tt.attachEvent("on"+ct,re):tt.addEventListener(ct,re)};et(b,"scroll",Z),et(L,"scroll",Z),m=i(function(){m=0,ot()})}}s(h,function(_){g(_,p)}),this.detach=function(_){m||(n(m),m=0),l.detach(h,_)},this.reset=function(){h.resizeSensor.resetSensor()}};if(l.reset=function(h){s(h,function(p){p.resizeSensor.resetSensor()})},l.detach=function(h,p){s(h,function(m){m&&(m.resizedAttached&&typeof p=="function"&&(m.resizedAttached.remove(p),m.resizedAttached.length())||m.resizeSensor&&(m.contains(m.resizeSensor)&&m.removeChild(m.resizeSensor),delete m.resizeSensor,delete m.resizedAttached))})},typeof MutationObserver<"u"){var c=new MutationObserver(function(h){for(var p in h)if(h.hasOwnProperty(p))for(var m=h[p].addedNodes,f=0;f<m.length;f++)m[f].resizeSensor&&l.reset(m[f])});document.addEventListener("DOMContentLoaded",function(h){c.observe(document.body,{childList:!0,subtree:!0})})}return l})}),dK=oc((t,e)=>{"use strict";(function(r,i){typeof t=="object"?e.exports=i(cN()):(r.ElementQueries=i(r.ResizeSensor),r.ElementQueries.listen())})(typeof window<"u"?window:t,function(r){var i=function(){var s,a={},o=[];function l(M){M||(M=document.documentElement);var E=window.getComputedStyle(M,null).fontSize;return parseFloat(E)||16}function c(M){if(!M.getBoundingClientRect)return{width:M.offsetWidth,height:M.offsetHeight};var E=M.getBoundingClientRect();return{width:Math.round(E.width),height:Math.round(E.height)}}function h(M,E){var it=E.split(/\d/),X=it[it.length-1];switch(E=parseFloat(E),X){case"px":return E;case"em":return E*l(M);case"rem":return E*l();case"vw":return E*document.documentElement.clientWidth/100;case"vh":return E*document.documentElement.clientHeight/100;case"vmin":case"vmax":var W=document.documentElement.clientWidth/100,J=document.documentElement.clientHeight/100,lt=Math[X==="vmin"?"min":"max"];return E*lt(W,J);default:return E}}function p(M,E){this.element=M;var it,X,W,J,lt,Y,nt,ot,xt=["min-width","min-height","max-width","max-height"];this.call=function(){W=c(this.element),Y={};for(it in a[E])a[E].hasOwnProperty(it)&&(X=a[E][it],J=h(this.element,X.value),lt=X.property==="width"?W.width:W.height,ot=X.mode+"-"+X.property,nt="",X.mode==="min"&&lt>=J&&(nt+=X.value),X.mode==="max"&&lt<=J&&(nt+=X.value),Y[ot]||(Y[ot]=""),nt&&(" "+Y[ot]+" ").indexOf(" "+nt+" ")===-1&&(Y[ot]+=" "+nt));for(var Z in xt)xt.hasOwnProperty(Z)&&(Y[xt[Z]]?this.element.setAttribute(xt[Z],Y[xt[Z]].substr(1)):this.element.removeAttribute(xt[Z]))}}function m(M,E){M.elementQueriesSetupInformation||(M.elementQueriesSetupInformation=new p(M,E)),M.elementQueriesSensor||(M.elementQueriesSensor=new r(M,function(){M.elementQueriesSetupInformation.call()}))}function f(M,E,it,X){if(typeof a[M]>"u"){a[M]=[];var W=o.length;s.innerHTML+=`
`+M+" {animation: 0.1s element-queries;}",s.innerHTML+=`
`+M+" > .resize-sensor {min-width: "+W+"px;}",o.push(M)}a[M].push({mode:E,property:it,value:X})}function g(M){var E;if(document.querySelectorAll&&(E=M?M.querySelectorAll.bind(M):document.querySelectorAll.bind(document)),!E&&typeof $$<"u"&&(E=$$),!E&&typeof jQuery<"u"&&(E=jQuery),!E)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return E}function _(M){var E=g(M);for(var it in a)if(a.hasOwnProperty(it))for(var X=E(it,M),W=0,J=X.length;W<J;W++)m(X[W],it)}function w(M){var E=[],it=[],X=[],W=0,J=-1,lt=[];for(var Y in M.children)if(M.children.hasOwnProperty(Y)&&M.children[Y].tagName&&M.children[Y].tagName.toLowerCase()==="img"){E.push(M.children[Y]);var nt=M.children[Y].getAttribute("min-width")||M.children[Y].getAttribute("data-min-width"),ot=M.children[Y].getAttribute("data-src")||M.children[Y].getAttribute("url");X.push(ot);var xt={minWidth:nt};it.push(xt),nt?M.children[Y].style.display="none":(W=E.length-1,M.children[Y].style.display="block")}J=W;function Z(){var et=!1,tt;for(tt in E)E.hasOwnProperty(tt)&&it[tt].minWidth&&M.offsetWidth>it[tt].minWidth&&(et=tt);if(et||(et=W),J!==et)if(lt[et])E[J].style.display="none",E[et].style.display="block",J=et;else{var ct=new Image;ct.onload=function(){E[et].src=X[et],E[J].style.display="none",E[et].style.display="block",lt[et]=!0,J=et},ct.src=X[et]}else E[et].src=X[et]}M.resizeSensorInstance=new r(M,Z),Z()}function S(){for(var M=g(),E=M("[data-responsive-image],[responsive-image]"),it=0,X=E.length;it<X;it++)w(E[it])}var C=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/mgi,b=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/mgi;function P(M){var E,it,X,W;for(M=M.replace(/'/g,'"');(E=C.exec(M))!==null;)for(it=E[1]+E[3],X=E[2];(W=b.exec(X))!==null;)f(it,W[1],W[2],W[3])}function L(M){var E="";if(M)if(typeof M=="string")M=M.toLowerCase(),(M.indexOf("min-width")!==-1||M.indexOf("max-width")!==-1)&&P(M);else for(var it=0,X=M.length;it<X;it++)M[it].type===1?(E=M[it].selectorText||M[it].cssText,(E.indexOf("min-height")!==-1||E.indexOf("max-height")!==-1||E.indexOf("min-width")!==-1||E.indexOf("max-width")!==-1)&&P(E)):M[it].type===4?L(M[it].cssRules||M[it].rules):M[it].type===3&&M[it].styleSheet.hasOwnProperty("cssRules")&&L(M[it].styleSheet.cssRules)}var H=!1;this.init=function(){var M="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?M="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?M="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(M="oanimationstart"),document.body.addEventListener(M,function(X){var W=X.target,J=W&&window.getComputedStyle(W,null),lt=J&&J.getPropertyValue("animation-name"),Y=lt&&lt.indexOf("element-queries")!==-1;if(Y){W.elementQueriesSensor=new r(W,function(){W.elementQueriesSetupInformation&&W.elementQueriesSetupInformation.call()});var nt=window.getComputedStyle(W.resizeSensor,null),ot=nt.getPropertyValue("min-width");ot=parseInt(ot.replace("px","")),m(X.target,o[ot])}}),H||(s=document.createElement("style"),s.type="text/css",s.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",s.innerHTML+=`
@keyframes element-queries { 0% { visibility: inherit; } }`,document.getElementsByTagName("head")[0].appendChild(s),H=!0);for(var E=0,it=document.styleSheets.length;E<it;E++)try{document.styleSheets[E].href&&document.styleSheets[E].href.indexOf("file://")===0&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[E].href),L(document.styleSheets[E].cssRules||document.styleSheets[E].rules||document.styleSheets[E].cssText)}catch{}S()},this.findElementQueriesElements=function(M){_(M)},this.update=function(){this.init()}};i.update=function(){i.instance.update()},i.detach=function(s){s.elementQueriesSetupInformation?(s.elementQueriesSensor.detach(),delete s.elementQueriesSetupInformation,delete s.elementQueriesSensor):s.resizeSensorInstance&&(s.resizeSensorInstance.detach(),delete s.resizeSensorInstance)},i.init=function(){i.instance||(i.instance=new i),i.instance.init()};var n=function(s){if(document.addEventListener)document.addEventListener("DOMContentLoaded",s,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var a=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(s(),clearInterval(a))},10);else window.onload=s};return i.findElementQueriesElements=function(s){i.instance.findElementQueriesElements(s)},i.listen=function(){n(i.init)},i})}),uN=oc((t,e)=>{"use strict";e.exports={ResizeSensor:cN(),ElementQueries:dK()}}),rA=oc((t,e)=>{"use strict";(function(){var r,i="4.17.21",n=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",p=1,m=2,f=4,g=1,_=2,w=1,S=2,C=4,b=8,P=16,L=32,H=64,M=128,E=256,it=512,X=30,W="...",J=800,lt=16,Y=1,nt=2,ot=3,xt=1/0,Z=9007199254740991,et=17976931348623157e292,tt=NaN,ct=4294967295,re=ct-1,me=ct>>>1,Ze=[["ary",M],["bind",w],["bindKey",S],["curry",b],["curryRight",P],["flip",it],["partial",L],["partialRight",H],["rearg",E]],li="[object Arguments]",ci="[object Array]",wr="[object AsyncFunction]",Ct="[object Boolean]",Tt="[object Date]",at="[object DOMException]",Et="[object Error]",ie="[object Function]",fe="[object GeneratorFunction]",$t="[object Map]",ve="[object Number]",Se="[object Null]",ne="[object Object]",$e="[object Promise]",yi="[object Proxy]",jr="[object RegExp]",Fi="[object Set]",Ki="[object String]",ya="[object Symbol]",ah="[object Undefined]",ho="[object WeakMap]",fc="[object WeakSet]",wa="[object ArrayBuffer]",Jr="[object DataView]",po="[object Float32Array]",Xs="[object Float64Array]",mo="[object Int8Array]",qs="[object Int16Array]",Xn="[object Int32Array]",Ur="[object Uint8Array]",Qr="[object Uint8ClampedArray]",bp="[object Uint16Array]",yp="[object Uint32Array]",O0=/\b__p \+= '';/g,oh=/\b(__p \+=) '' \+/g,P0=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cg=/&(?:amp|lt|gt|quot|#39);/g,wp=/[&<>"']/g,ug=RegExp(cg.source),xp=RegExp(wp.source),M0=/<%-([\s\S]+?)%>/g,R0=/<%([\s\S]+?)%>/g,hg=/<%=([\s\S]+?)%>/g,dg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,B0=/^\w*$/,D0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cp=/[\\^$.*+?()[\]{}|]/g,lh=RegExp(Cp.source),kp=/^\s+/,L0=/\s/,pg=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ap=/\{\n\/\* \[wrapped with (.+)\] \*/,N0=/,? & /,mg=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,F0=/[()=,{}\[\]\/\s]/,fg=/\\(\\)?/g,gg=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Sp=/\w*$/,vg=/^[-+]0x[0-9a-f]+$/i,Ep=/^0b[01]+$/i,fo=/^\[object .+?Constructor\]$/,gc=/^0o[0-7]+$/i,vc=/^(?:0|[1-9]\d*)$/,ch=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ml=/($^)/,z0=/['\n\r\u2028\u2029\\]/g,uh="\\ud800-\\udfff",hh="\\u0300-\\u036f",En="\\ufe20-\\ufe2f",fl="\\u20d0-\\u20ff",Ks=hh+En+fl,bs="\\u2700-\\u27bf",gl="a-z\\xdf-\\xf6\\xf8-\\xff",ys="\\xac\\xb1\\xd7\\xf7",Ys="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_g="\\u2000-\\u206f",bg=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_c="A-Z\\xc0-\\xd6\\xd8-\\xde",Tn="\\ufe0e\\ufe0f",bc=ys+Ys+_g+bg,yc="['\u2019]",Tp="["+uh+"]",dh="["+bc+"]",vl="["+Ks+"]",wc="\\d+",xa="["+bs+"]",yg="["+gl+"]",Ip="[^"+uh+bc+wc+bs+gl+_c+"]",xc="\\ud83c[\\udffb-\\udfff]",wg="(?:"+vl+"|"+xc+")",xg="[^"+uh+"]",Op="(?:\\ud83c[\\udde6-\\uddff]){2}",T="[\\ud800-\\udbff][\\udc00-\\udfff]",D="["+_c+"]",G="\\u200d",pt="(?:"+yg+"|"+Ip+")",St="(?:"+D+"|"+Ip+")",he="(?:"+yc+"(?:d|ll|m|re|s|t|ve))?",ze="(?:"+yc+"(?:D|LL|M|RE|S|T|VE))?",Gi=wg+"?",In="["+Tn+"]?",pn="(?:"+G+"(?:"+[xg,Op,T].join("|")+")"+In+Gi+")*",ws="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",B9="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",oI=In+Gi+pn,D9="(?:"+[xa,Op,T].join("|")+")"+oI,L9="(?:"+[xg+vl+"?",vl,Op,T,Tp].join("|")+")",N9=RegExp(yc,"g"),F9=RegExp(vl,"g"),V0=RegExp(xc+"(?="+xc+")|"+L9+oI,"g"),z9=RegExp([D+"?"+yg+"+"+he+"(?="+[dh,D,"$"].join("|")+")",St+"+"+ze+"(?="+[dh,D+pt,"$"].join("|")+")",D+"?"+pt+"+"+he,D+"+"+ze,B9,ws,wc,D9].join("|"),"g"),V9=RegExp("["+G+uh+Ks+Tn+"]"),j9=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,U9=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],H9=-1,Yi={};Yi[po]=Yi[Xs]=Yi[mo]=Yi[qs]=Yi[Xn]=Yi[Ur]=Yi[Qr]=Yi[bp]=Yi[yp]=!0,Yi[li]=Yi[ci]=Yi[wa]=Yi[Ct]=Yi[Jr]=Yi[Tt]=Yi[Et]=Yi[ie]=Yi[$t]=Yi[ve]=Yi[ne]=Yi[jr]=Yi[Fi]=Yi[Ki]=Yi[ho]=!1;var Wi={};Wi[li]=Wi[ci]=Wi[wa]=Wi[Jr]=Wi[Ct]=Wi[Tt]=Wi[po]=Wi[Xs]=Wi[mo]=Wi[qs]=Wi[Xn]=Wi[$t]=Wi[ve]=Wi[ne]=Wi[jr]=Wi[Fi]=Wi[Ki]=Wi[ya]=Wi[Ur]=Wi[Qr]=Wi[bp]=Wi[yp]=!0,Wi[Et]=Wi[ie]=Wi[ho]=!1;var G9={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},W9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Z9={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},$9={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},X9=parseFloat,q9=parseInt,lI=typeof global=="object"&&global&&global.Object===Object&&global,K9=typeof self=="object"&&self&&self.Object===Object&&self,Hr=lI||K9||Function("return this")(),j0=typeof t=="object"&&t&&!t.nodeType&&t,Cc=j0&&typeof e=="object"&&e&&!e.nodeType&&e,cI=Cc&&Cc.exports===j0,U0=cI&&lI.process,xs=function(){try{var rt=Cc&&Cc.require&&Cc.require("util").types;return rt||U0&&U0.binding&&U0.binding("util")}catch{}}(),uI=xs&&xs.isArrayBuffer,hI=xs&&xs.isDate,dI=xs&&xs.isMap,pI=xs&&xs.isRegExp,mI=xs&&xs.isSet,fI=xs&&xs.isTypedArray;function qn(rt,_t,dt){switch(dt.length){case 0:return rt.call(_t);case 1:return rt.call(_t,dt[0]);case 2:return rt.call(_t,dt[0],dt[1]);case 3:return rt.call(_t,dt[0],dt[1],dt[2])}return rt.apply(_t,dt)}function Y9(rt,_t,dt,Jt){for(var Ie=-1,wi=rt==null?0:rt.length;++Ie<wi;){var Sr=rt[Ie];_t(Jt,Sr,dt(Sr),rt)}return Jt}function Cs(rt,_t){for(var dt=-1,Jt=rt==null?0:rt.length;++dt<Jt&&_t(rt[dt],dt,rt)!==!1;);return rt}function J9(rt,_t){for(var dt=rt==null?0:rt.length;dt--&&_t(rt[dt],dt,rt)!==!1;);return rt}function gI(rt,_t){for(var dt=-1,Jt=rt==null?0:rt.length;++dt<Jt;)if(!_t(rt[dt],dt,rt))return!1;return!0}function _l(rt,_t){for(var dt=-1,Jt=rt==null?0:rt.length,Ie=0,wi=[];++dt<Jt;){var Sr=rt[dt];_t(Sr,dt,rt)&&(wi[Ie++]=Sr)}return wi}function Cg(rt,_t){var dt=rt==null?0:rt.length;return!!dt&&ph(rt,_t,0)>-1}function H0(rt,_t,dt){for(var Jt=-1,Ie=rt==null?0:rt.length;++Jt<Ie;)if(dt(_t,rt[Jt]))return!0;return!1}function ir(rt,_t){for(var dt=-1,Jt=rt==null?0:rt.length,Ie=Array(Jt);++dt<Jt;)Ie[dt]=_t(rt[dt],dt,rt);return Ie}function bl(rt,_t){for(var dt=-1,Jt=_t.length,Ie=rt.length;++dt<Jt;)rt[Ie+dt]=_t[dt];return rt}function G0(rt,_t,dt,Jt){var Ie=-1,wi=rt==null?0:rt.length;for(Jt&&wi&&(dt=rt[++Ie]);++Ie<wi;)dt=_t(dt,rt[Ie],Ie,rt);return dt}function Q9(rt,_t,dt,Jt){var Ie=rt==null?0:rt.length;for(Jt&&Ie&&(dt=rt[--Ie]);Ie--;)dt=_t(dt,rt[Ie],Ie,rt);return dt}function W0(rt,_t){for(var dt=-1,Jt=rt==null?0:rt.length;++dt<Jt;)if(_t(rt[dt],dt,rt))return!0;return!1}var t8=Z0("length");function e8(rt){return rt.split("")}function i8(rt){return rt.match(mg)||[]}function vI(rt,_t,dt){var Jt;return dt(rt,function(Ie,wi,Sr){if(_t(Ie,wi,Sr))return Jt=wi,!1}),Jt}function kg(rt,_t,dt,Jt){for(var Ie=rt.length,wi=dt+(Jt?1:-1);Jt?wi--:++wi<Ie;)if(_t(rt[wi],wi,rt))return wi;return-1}function ph(rt,_t,dt){return _t===_t?m8(rt,_t,dt):kg(rt,_I,dt)}function r8(rt,_t,dt,Jt){for(var Ie=dt-1,wi=rt.length;++Ie<wi;)if(Jt(rt[Ie],_t))return Ie;return-1}function _I(rt){return rt!==rt}function bI(rt,_t){var dt=rt==null?0:rt.length;return dt?X0(rt,_t)/dt:tt}function Z0(rt){return function(_t){return _t==null?r:_t[rt]}}function $0(rt){return function(_t){return rt==null?r:rt[_t]}}function yI(rt,_t,dt,Jt,Ie){return Ie(rt,function(wi,Sr,zi){dt=Jt?(Jt=!1,wi):_t(dt,wi,Sr,zi)}),dt}function n8(rt,_t){var dt=rt.length;for(rt.sort(_t);dt--;)rt[dt]=rt[dt].value;return rt}function X0(rt,_t){for(var dt,Jt=-1,Ie=rt.length;++Jt<Ie;){var wi=_t(rt[Jt]);wi!==r&&(dt=dt===r?wi:dt+wi)}return dt}function q0(rt,_t){for(var dt=-1,Jt=Array(rt);++dt<rt;)Jt[dt]=_t(dt);return Jt}function s8(rt,_t){return ir(_t,function(dt){return[dt,rt[dt]]})}function wI(rt){return rt&&rt.slice(0,AI(rt)+1).replace(kp,"")}function Kn(rt){return function(_t){return rt(_t)}}function K0(rt,_t){return ir(_t,function(dt){return rt[dt]})}function Pp(rt,_t){return rt.has(_t)}function xI(rt,_t){for(var dt=-1,Jt=rt.length;++dt<Jt&&ph(_t,rt[dt],0)>-1;);return dt}function CI(rt,_t){for(var dt=rt.length;dt--&&ph(_t,rt[dt],0)>-1;);return dt}function a8(rt,_t){for(var dt=rt.length,Jt=0;dt--;)rt[dt]===_t&&++Jt;return Jt}var o8=$0(G9),l8=$0(W9);function c8(rt){return"\\"+$9[rt]}function u8(rt,_t){return rt==null?r:rt[_t]}function mh(rt){return V9.test(rt)}function h8(rt){return j9.test(rt)}function d8(rt){for(var _t,dt=[];!(_t=rt.next()).done;)dt.push(_t.value);return dt}function Y0(rt){var _t=-1,dt=Array(rt.size);return rt.forEach(function(Jt,Ie){dt[++_t]=[Ie,Jt]}),dt}function kI(rt,_t){return function(dt){return rt(_t(dt))}}function yl(rt,_t){for(var dt=-1,Jt=rt.length,Ie=0,wi=[];++dt<Jt;){var Sr=rt[dt];(Sr===_t||Sr===h)&&(rt[dt]=h,wi[Ie++]=dt)}return wi}function Ag(rt){var _t=-1,dt=Array(rt.size);return rt.forEach(function(Jt){dt[++_t]=Jt}),dt}function p8(rt){var _t=-1,dt=Array(rt.size);return rt.forEach(function(Jt){dt[++_t]=[Jt,Jt]}),dt}function m8(rt,_t,dt){for(var Jt=dt-1,Ie=rt.length;++Jt<Ie;)if(rt[Jt]===_t)return Jt;return-1}function f8(rt,_t,dt){for(var Jt=dt+1;Jt--;)if(rt[Jt]===_t)return Jt;return Jt}function fh(rt){return mh(rt)?v8(rt):t8(rt)}function Js(rt){return mh(rt)?_8(rt):e8(rt)}function AI(rt){for(var _t=rt.length;_t--&&L0.test(rt.charAt(_t)););return _t}var g8=$0(Z9);function v8(rt){for(var _t=V0.lastIndex=0;V0.test(rt);)++_t;return _t}function _8(rt){return rt.match(V0)||[]}function b8(rt){return rt.match(z9)||[]}var y8=function rt(_t){_t=_t==null?Hr:gh.defaults(Hr.Object(),_t,gh.pick(Hr,U9));var dt=_t.Array,Jt=_t.Date,Ie=_t.Error,wi=_t.Function,Sr=_t.Math,zi=_t.Object,J0=_t.RegExp,w8=_t.String,ks=_t.TypeError,Sg=dt.prototype,x8=wi.prototype,vh=zi.prototype,Eg=_t["__core-js_shared__"],Tg=x8.toString,Si=vh.hasOwnProperty,C8=0,SI=function(){var u=/[^.]+$/.exec(Eg&&Eg.keys&&Eg.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),Ig=vh.toString,k8=Tg.call(zi),A8=Hr._,S8=J0("^"+Tg.call(Si).replace(Cp,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Og=cI?_t.Buffer:r,wl=_t.Symbol,Pg=_t.Uint8Array,EI=Og?Og.allocUnsafe:r,Mg=kI(zi.getPrototypeOf,zi),TI=zi.create,II=vh.propertyIsEnumerable,Rg=Sg.splice,OI=wl?wl.isConcatSpreadable:r,Mp=wl?wl.iterator:r,kc=wl?wl.toStringTag:r,Bg=function(){try{var u=Ic(zi,"defineProperty");return u({},"",{}),u}catch{}}(),E8=_t.clearTimeout!==Hr.clearTimeout&&_t.clearTimeout,T8=Jt&&Jt.now!==Hr.Date.now&&Jt.now,I8=_t.setTimeout!==Hr.setTimeout&&_t.setTimeout,Dg=Sr.ceil,Lg=Sr.floor,Q0=zi.getOwnPropertySymbols,O8=Og?Og.isBuffer:r,PI=_t.isFinite,P8=Sg.join,M8=kI(zi.keys,zi),Er=Sr.max,tn=Sr.min,R8=Jt.now,B8=_t.parseInt,MI=Sr.random,D8=Sg.reverse,tw=Ic(_t,"DataView"),Rp=Ic(_t,"Map"),ew=Ic(_t,"Promise"),_h=Ic(_t,"Set"),Bp=Ic(_t,"WeakMap"),Dp=Ic(zi,"create"),Ng=Bp&&new Bp,bh={},L8=Oc(tw),N8=Oc(Rp),F8=Oc(ew),z8=Oc(_h),V8=Oc(Bp),Fg=wl?wl.prototype:r,Lp=Fg?Fg.valueOf:r,RI=Fg?Fg.toString:r;function O(u){if(dr(u)&&!Pe(u)&&!(u instanceof ei)){if(u instanceof As)return u;if(Si.call(u,"__wrapped__"))return BO(u)}return new As(u)}var yh=function(){function u(){}return function(d){if(!sr(d))return{};if(TI)return TI(d);u.prototype=d;var v=new u;return u.prototype=r,v}}();function zg(){}function As(u,d){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=r}O.templateSettings={escape:M0,evaluate:R0,interpolate:hg,variable:"",imports:{_:O}},O.prototype=zg.prototype,O.prototype.constructor=O,As.prototype=yh(zg.prototype),As.prototype.constructor=As;function ei(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ct,this.__views__=[]}function j8(){var u=new ei(this.__wrapped__);return u.__actions__=On(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=On(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=On(this.__views__),u}function U8(){if(this.__filtered__){var u=new ei(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function H8(){var u=this.__wrapped__.value(),d=this.__dir__,v=Pe(u),y=d<0,A=v?u.length:0,B=eW(0,A,this.__views__),V=B.start,q=B.end,st=q-V,bt=y?q:V-1,wt=this.__iteratees__,At=wt.length,Gt=0,se=tn(st,this.__takeCount__);if(!v||!y&&A==st&&se==st)return rO(u,this.__actions__);var be=[];t:for(;st--&&Gt<se;){bt+=d;for(var Ne=-1,ye=u[bt];++Ne<At;){var Xe=wt[Ne],ni=Xe.iteratee,Qn=Xe.type,gn=ni(ye);if(Qn==nt)ye=gn;else if(!gn){if(Qn==Y)continue t;break t}}be[Gt++]=ye}return be}ei.prototype=yh(zg.prototype),ei.prototype.constructor=ei;function Ac(u){var d=-1,v=u==null?0:u.length;for(this.clear();++d<v;){var y=u[d];this.set(y[0],y[1])}}function G8(){this.__data__=Dp?Dp(null):{},this.size=0}function W8(u){var d=this.has(u)&&delete this.__data__[u];return this.size-=d?1:0,d}function Z8(u){var d=this.__data__;if(Dp){var v=d[u];return v===l?r:v}return Si.call(d,u)?d[u]:r}function $8(u){var d=this.__data__;return Dp?d[u]!==r:Si.call(d,u)}function X8(u,d){var v=this.__data__;return this.size+=this.has(u)?0:1,v[u]=Dp&&d===r?l:d,this}Ac.prototype.clear=G8,Ac.prototype.delete=W8,Ac.prototype.get=Z8,Ac.prototype.has=$8,Ac.prototype.set=X8;function go(u){var d=-1,v=u==null?0:u.length;for(this.clear();++d<v;){var y=u[d];this.set(y[0],y[1])}}function q8(){this.__data__=[],this.size=0}function K8(u){var d=this.__data__,v=Vg(d,u);if(v<0)return!1;var y=d.length-1;return v==y?d.pop():Rg.call(d,v,1),--this.size,!0}function Y8(u){var d=this.__data__,v=Vg(d,u);return v<0?r:d[v][1]}function J8(u){return Vg(this.__data__,u)>-1}function Q8(u,d){var v=this.__data__,y=Vg(v,u);return y<0?(++this.size,v.push([u,d])):v[y][1]=d,this}go.prototype.clear=q8,go.prototype.delete=K8,go.prototype.get=Y8,go.prototype.has=J8,go.prototype.set=Q8;function vo(u){var d=-1,v=u==null?0:u.length;for(this.clear();++d<v;){var y=u[d];this.set(y[0],y[1])}}function t6(){this.size=0,this.__data__={hash:new Ac,map:new(Rp||go),string:new Ac}}function e6(u){var d=Jg(this,u).delete(u);return this.size-=d?1:0,d}function i6(u){return Jg(this,u).get(u)}function r6(u){return Jg(this,u).has(u)}function n6(u,d){var v=Jg(this,u),y=v.size;return v.set(u,d),this.size+=v.size==y?0:1,this}vo.prototype.clear=t6,vo.prototype.delete=e6,vo.prototype.get=i6,vo.prototype.has=r6,vo.prototype.set=n6;function Sc(u){var d=-1,v=u==null?0:u.length;for(this.__data__=new vo;++d<v;)this.add(u[d])}function s6(u){return this.__data__.set(u,l),this}function a6(u){return this.__data__.has(u)}Sc.prototype.add=Sc.prototype.push=s6,Sc.prototype.has=a6;function Qs(u){var d=this.__data__=new go(u);this.size=d.size}function o6(){this.__data__=new go,this.size=0}function l6(u){var d=this.__data__,v=d.delete(u);return this.size=d.size,v}function c6(u){return this.__data__.get(u)}function u6(u){return this.__data__.has(u)}function h6(u,d){var v=this.__data__;if(v instanceof go){var y=v.__data__;if(!Rp||y.length<n-1)return y.push([u,d]),this.size=++v.size,this;v=this.__data__=new vo(y)}return v.set(u,d),this.size=v.size,this}Qs.prototype.clear=o6,Qs.prototype.delete=l6,Qs.prototype.get=c6,Qs.prototype.has=u6,Qs.prototype.set=h6;function BI(u,d){var v=Pe(u),y=!v&&Pc(u),A=!v&&!y&&Sl(u),B=!v&&!y&&!A&&kh(u),V=v||y||A||B,q=V?q0(u.length,w8):[],st=q.length;for(var bt in u)(d||Si.call(u,bt))&&!(V&&(bt=="length"||A&&(bt=="offset"||bt=="parent")||B&&(bt=="buffer"||bt=="byteLength"||bt=="byteOffset")||wo(bt,st)))&&q.push(bt);return q}function DI(u){var d=u.length;return d?u[dw(0,d-1)]:r}function d6(u,d){return Qg(On(u),Ec(d,0,u.length))}function p6(u){return Qg(On(u))}function iw(u,d,v){(v!==r&&!ta(u[d],v)||v===r&&!(d in u))&&_o(u,d,v)}function Np(u,d,v){var y=u[d];(!(Si.call(u,d)&&ta(y,v))||v===r&&!(d in u))&&_o(u,d,v)}function Vg(u,d){for(var v=u.length;v--;)if(ta(u[v][0],d))return v;return-1}function m6(u,d,v,y){return xl(u,function(A,B,V){d(y,A,v(A),V)}),y}function LI(u,d){return u&&ka(d,Nr(d),u)}function f6(u,d){return u&&ka(d,Mn(d),u)}function _o(u,d,v){d=="__proto__"&&Bg?Bg(u,d,{configurable:!0,enumerable:!0,value:v,writable:!0}):u[d]=v}function rw(u,d){for(var v=-1,y=d.length,A=dt(y),B=u==null;++v<y;)A[v]=B?r:Nw(u,d[v]);return A}function Ec(u,d,v){return u===u&&(v!==r&&(u=u<=v?u:v),d!==r&&(u=u>=d?u:d)),u}function Ss(u,d,v,y,A,B){var V,q=d&p,st=d&m,bt=d&f;if(v&&(V=A?v(u,y,A,B):v(u)),V!==r)return V;if(!sr(u))return u;var wt=Pe(u);if(wt){if(V=rW(u),!q)return On(u,V)}else{var At=en(u),Gt=At==ie||At==fe;if(Sl(u))return aO(u,q);if(At==ne||At==li||Gt&&!A){if(V=st||Gt?{}:AO(u),!q)return st?Z6(u,f6(V,u)):W6(u,LI(V,u))}else{if(!Wi[At])return A?u:{};V=nW(u,At,q)}}B||(B=new Qs);var se=B.get(u);if(se)return se;B.set(u,V),tP(u)?u.forEach(function(ye){V.add(Ss(ye,d,v,ye,u,B))}):JO(u)&&u.forEach(function(ye,Xe){V.set(Xe,Ss(ye,d,v,Xe,u,B))});var be=bt?st?Cw:xw:st?Mn:Nr,Ne=wt?r:be(u);return Cs(Ne||u,function(ye,Xe){Ne&&(Xe=ye,ye=u[Xe]),Np(V,Xe,Ss(ye,d,v,Xe,u,B))}),V}function g6(u){var d=Nr(u);return function(v){return NI(v,u,d)}}function NI(u,d,v){var y=v.length;if(u==null)return!y;for(u=zi(u);y--;){var A=v[y],B=d[A],V=u[A];if(V===r&&!(A in u)||!B(V))return!1}return!0}function FI(u,d,v){if(typeof u!="function")throw new ks(a);return Gp(function(){u.apply(r,v)},d)}function Fp(u,d,v,y){var A=-1,B=Cg,V=!0,q=u.length,st=[],bt=d.length;if(!q)return st;v&&(d=ir(d,Kn(v))),y?(B=H0,V=!1):d.length>=n&&(B=Pp,V=!1,d=new Sc(d));t:for(;++A<q;){var wt=u[A],At=v==null?wt:v(wt);if(wt=y||wt!==0?wt:0,V&&At===At){for(var Gt=bt;Gt--;)if(d[Gt]===At)continue t;st.push(wt)}else B(d,At,y)||st.push(wt)}return st}var xl=hO(Ca),zI=hO(sw,!0);function v6(u,d){var v=!0;return xl(u,function(y,A,B){return v=!!d(y,A,B),v}),v}function jg(u,d,v){for(var y=-1,A=u.length;++y<A;){var B=u[y],V=d(B);if(V!=null&&(q===r?V===V&&!Jn(V):v(V,q)))var q=V,st=B}return st}function _6(u,d,v,y){var A=u.length;for(v=De(v),v<0&&(v=-v>A?0:A+v),y=y===r||y>A?A:De(y),y<0&&(y+=A),y=v>y?0:iP(y);v<y;)u[v++]=d;return u}function VI(u,d){var v=[];return xl(u,function(y,A,B){d(y,A,B)&&v.push(y)}),v}function Gr(u,d,v,y,A){var B=-1,V=u.length;for(v||(v=aW),A||(A=[]);++B<V;){var q=u[B];d>0&&v(q)?d>1?Gr(q,d-1,v,y,A):bl(A,q):y||(A[A.length]=q)}return A}var nw=dO(),jI=dO(!0);function Ca(u,d){return u&&nw(u,d,Nr)}function sw(u,d){return u&&jI(u,d,Nr)}function Ug(u,d){return _l(d,function(v){return xo(u[v])})}function Tc(u,d){d=kl(d,u);for(var v=0,y=d.length;u!=null&&v<y;)u=u[Aa(d[v++])];return v&&v==y?u:r}function UI(u,d,v){var y=d(u);return Pe(u)?y:bl(y,v(u))}function mn(u){return u==null?u===r?ah:Se:kc&&kc in zi(u)?tW(u):pW(u)}function aw(u,d){return u>d}function b6(u,d){return u!=null&&Si.call(u,d)}function y6(u,d){return u!=null&&d in zi(u)}function w6(u,d,v){return u>=tn(d,v)&&u<Er(d,v)}function ow(u,d,v){for(var y=v?H0:Cg,A=u[0].length,B=u.length,V=B,q=dt(B),st=1/0,bt=[];V--;){var wt=u[V];V&&d&&(wt=ir(wt,Kn(d))),st=tn(wt.length,st),q[V]=!v&&(d||A>=120&&wt.length>=120)?new Sc(V&&wt):r}wt=u[0];var At=-1,Gt=q[0];t:for(;++At<A&&bt.length<st;){var se=wt[At],be=d?d(se):se;if(se=v||se!==0?se:0,!(Gt?Pp(Gt,be):y(bt,be,v))){for(V=B;--V;){var Ne=q[V];if(!(Ne?Pp(Ne,be):y(u[V],be,v)))continue t}Gt&&Gt.push(be),bt.push(se)}}return bt}function x6(u,d,v,y){return Ca(u,function(A,B,V){d(y,v(A),B,V)}),y}function zp(u,d,v){d=kl(d,u),u=IO(u,d);var y=u==null?u:u[Aa(Ts(d))];return y==null?r:qn(y,u,v)}function HI(u){return dr(u)&&mn(u)==li}function C6(u){return dr(u)&&mn(u)==wa}function k6(u){return dr(u)&&mn(u)==Tt}function Vp(u,d,v,y,A){return u===d?!0:u==null||d==null||!dr(u)&&!dr(d)?u!==u&&d!==d:A6(u,d,v,y,Vp,A)}function A6(u,d,v,y,A,B){var V=Pe(u),q=Pe(d),st=V?ci:en(u),bt=q?ci:en(d);st=st==li?ne:st,bt=bt==li?ne:bt;var wt=st==ne,At=bt==ne,Gt=st==bt;if(Gt&&Sl(u)){if(!Sl(d))return!1;V=!0,wt=!1}if(Gt&&!wt)return B||(B=new Qs),V||kh(u)?xO(u,d,v,y,A,B):J6(u,d,st,v,y,A,B);if(!(v&g)){var se=wt&&Si.call(u,"__wrapped__"),be=At&&Si.call(d,"__wrapped__");if(se||be){var Ne=se?u.value():u,ye=be?d.value():d;return B||(B=new Qs),A(Ne,ye,v,y,B)}}return Gt?(B||(B=new Qs),Q6(u,d,v,y,A,B)):!1}function S6(u){return dr(u)&&en(u)==$t}function lw(u,d,v,y){var A=v.length,B=A,V=!y;if(u==null)return!B;for(u=zi(u);A--;){var q=v[A];if(V&&q[2]?q[1]!==u[q[0]]:!(q[0]in u))return!1}for(;++A<B;){q=v[A];var st=q[0],bt=u[st],wt=q[1];if(V&&q[2]){if(bt===r&&!(st in u))return!1}else{var At=new Qs;if(y)var Gt=y(bt,wt,st,u,d,At);if(!(Gt===r?Vp(wt,bt,g|_,y,At):Gt))return!1}}return!0}function GI(u){if(!sr(u)||lW(u))return!1;var d=xo(u)?S8:fo;return d.test(Oc(u))}function E6(u){return dr(u)&&mn(u)==jr}function T6(u){return dr(u)&&en(u)==Fi}function I6(u){return dr(u)&&sv(u.length)&&!!Yi[mn(u)]}function WI(u){return typeof u=="function"?u:u==null?Rn:typeof u=="object"?Pe(u)?XI(u[0],u[1]):$I(u):pP(u)}function cw(u){if(!Hp(u))return M8(u);var d=[];for(var v in zi(u))Si.call(u,v)&&v!="constructor"&&d.push(v);return d}function O6(u){if(!sr(u))return dW(u);var d=Hp(u),v=[];for(var y in u)y=="constructor"&&(d||!Si.call(u,y))||v.push(y);return v}function uw(u,d){return u<d}function ZI(u,d){var v=-1,y=Pn(u)?dt(u.length):[];return xl(u,function(A,B,V){y[++v]=d(A,B,V)}),y}function $I(u){var d=Aw(u);return d.length==1&&d[0][2]?EO(d[0][0],d[0][1]):function(v){return v===u||lw(v,u,d)}}function XI(u,d){return Ew(u)&&SO(d)?EO(Aa(u),d):function(v){var y=Nw(v,u);return y===r&&y===d?Fw(v,u):Vp(d,y,g|_)}}function Hg(u,d,v,y,A){u!==d&&nw(d,function(B,V){if(A||(A=new Qs),sr(B))P6(u,d,V,v,Hg,y,A);else{var q=y?y(Iw(u,V),B,V+"",u,d,A):r;q===r&&(q=B),iw(u,V,q)}},Mn)}function P6(u,d,v,y,A,B,V){var q=Iw(u,v),st=Iw(d,v),bt=V.get(st);if(bt){iw(u,v,bt);return}var wt=B?B(q,st,v+"",u,d,V):r,At=wt===r;if(At){var Gt=Pe(st),se=!Gt&&Sl(st),be=!Gt&&!se&&kh(st);wt=st,Gt||se||be?Pe(q)?wt=q:vr(q)?wt=On(q):se?(At=!1,wt=aO(st,!0)):be?(At=!1,wt=oO(st,!0)):wt=[]:Wp(st)||Pc(st)?(wt=q,Pc(q)?wt=rP(q):(!sr(q)||xo(q))&&(wt=AO(st))):At=!1}At&&(V.set(st,wt),A(wt,st,y,B,V),V.delete(st)),iw(u,v,wt)}function qI(u,d){var v=u.length;if(v)return d+=d<0?v:0,wo(d,v)?u[d]:r}function KI(u,d,v){d.length?d=ir(d,function(B){return Pe(B)?function(V){return Tc(V,B.length===1?B[0]:B)}:B}):d=[Rn];var y=-1;d=ir(d,Kn(_e()));var A=ZI(u,function(B,V,q){var st=ir(d,function(bt){return bt(B)});return{criteria:st,index:++y,value:B}});return n8(A,function(B,V){return G6(B,V,v)})}function M6(u,d){return YI(u,d,function(v,y){return Fw(u,y)})}function YI(u,d,v){for(var y=-1,A=d.length,B={};++y<A;){var V=d[y],q=Tc(u,V);v(q,V)&&jp(B,kl(V,u),q)}return B}function R6(u){return function(d){return Tc(d,u)}}function hw(u,d,v,y){var A=y?r8:ph,B=-1,V=d.length,q=u;for(u===d&&(d=On(d)),v&&(q=ir(u,Kn(v)));++B<V;)for(var st=0,bt=d[B],wt=v?v(bt):bt;(st=A(q,wt,st,y))>-1;)q!==u&&Rg.call(q,st,1),Rg.call(u,st,1);return u}function JI(u,d){for(var v=u?d.length:0,y=v-1;v--;){var A=d[v];if(v==y||A!==B){var B=A;wo(A)?Rg.call(u,A,1):fw(u,A)}}return u}function dw(u,d){return u+Lg(MI()*(d-u+1))}function B6(u,d,v,y){for(var A=-1,B=Er(Dg((d-u)/(v||1)),0),V=dt(B);B--;)V[y?B:++A]=u,u+=v;return V}function pw(u,d){var v="";if(!u||d<1||d>Z)return v;do d%2&&(v+=u),d=Lg(d/2),d&&(u+=u);while(d);return v}function Ve(u,d){return Ow(TO(u,d,Rn),u+"")}function D6(u){return DI(Ah(u))}function L6(u,d){var v=Ah(u);return Qg(v,Ec(d,0,v.length))}function jp(u,d,v,y){if(!sr(u))return u;d=kl(d,u);for(var A=-1,B=d.length,V=B-1,q=u;q!=null&&++A<B;){var st=Aa(d[A]),bt=v;if(st==="__proto__"||st==="constructor"||st==="prototype")return u;if(A!=V){var wt=q[st];bt=y?y(wt,st,q):r,bt===r&&(bt=sr(wt)?wt:wo(d[A+1])?[]:{})}Np(q,st,bt),q=q[st]}return u}var QI=Ng?function(u,d){return Ng.set(u,d),u}:Rn,N6=Bg?function(u,d){return Bg(u,"toString",{configurable:!0,enumerable:!1,value:Vw(d),writable:!0})}:Rn;function F6(u){return Qg(Ah(u))}function Es(u,d,v){var y=-1,A=u.length;d<0&&(d=-d>A?0:A+d),v=v>A?A:v,v<0&&(v+=A),A=d>v?0:v-d>>>0,d>>>=0;for(var B=dt(A);++y<A;)B[y]=u[y+d];return B}function z6(u,d){var v;return xl(u,function(y,A,B){return v=d(y,A,B),!v}),!!v}function Gg(u,d,v){var y=0,A=u==null?y:u.length;if(typeof d=="number"&&d===d&&A<=me){for(;y<A;){var B=y+A>>>1,V=u[B];V!==null&&!Jn(V)&&(v?V<=d:V<d)?y=B+1:A=B}return A}return mw(u,d,Rn,v)}function mw(u,d,v,y){var A=0,B=u==null?0:u.length;if(B===0)return 0;d=v(d);for(var V=d!==d,q=d===null,st=Jn(d),bt=d===r;A<B;){var wt=Lg((A+B)/2),At=v(u[wt]),Gt=At!==r,se=At===null,be=At===At,Ne=Jn(At);if(V)var ye=y||be;else bt?ye=be&&(y||Gt):q?ye=be&&Gt&&(y||!se):st?ye=be&&Gt&&!se&&(y||!Ne):se||Ne?ye=!1:ye=y?At<=d:At<d;ye?A=wt+1:B=wt}return tn(B,re)}function tO(u,d){for(var v=-1,y=u.length,A=0,B=[];++v<y;){var V=u[v],q=d?d(V):V;if(!v||!ta(q,st)){var st=q;B[A++]=V===0?0:V}}return B}function eO(u){return typeof u=="number"?u:Jn(u)?tt:+u}function Yn(u){if(typeof u=="string")return u;if(Pe(u))return ir(u,Yn)+"";if(Jn(u))return RI?RI.call(u):"";var d=u+"";return d=="0"&&1/u==-xt?"-0":d}function Cl(u,d,v){var y=-1,A=Cg,B=u.length,V=!0,q=[],st=q;if(v)V=!1,A=H0;else if(B>=n){var bt=d?null:K6(u);if(bt)return Ag(bt);V=!1,A=Pp,st=new Sc}else st=d?[]:q;t:for(;++y<B;){var wt=u[y],At=d?d(wt):wt;if(wt=v||wt!==0?wt:0,V&&At===At){for(var Gt=st.length;Gt--;)if(st[Gt]===At)continue t;d&&st.push(At),q.push(wt)}else A(st,At,v)||(st!==q&&st.push(At),q.push(wt))}return q}function fw(u,d){return d=kl(d,u),u=IO(u,d),u==null||delete u[Aa(Ts(d))]}function iO(u,d,v,y){return jp(u,d,v(Tc(u,d)),y)}function Wg(u,d,v,y){for(var A=u.length,B=y?A:-1;(y?B--:++B<A)&&d(u[B],B,u););return v?Es(u,y?0:B,y?B+1:A):Es(u,y?B+1:0,y?A:B)}function rO(u,d){var v=u;return v instanceof ei&&(v=v.value()),G0(d,function(y,A){return A.func.apply(A.thisArg,bl([y],A.args))},v)}function gw(u,d,v){var y=u.length;if(y<2)return y?Cl(u[0]):[];for(var A=-1,B=dt(y);++A<y;)for(var V=u[A],q=-1;++q<y;)q!=A&&(B[A]=Fp(B[A]||V,u[q],d,v));return Cl(Gr(B,1),d,v)}function nO(u,d,v){for(var y=-1,A=u.length,B=d.length,V={};++y<A;){var q=y<B?d[y]:r;v(V,u[y],q)}return V}function vw(u){return vr(u)?u:[]}function _w(u){return typeof u=="function"?u:Rn}function kl(u,d){return Pe(u)?u:Ew(u,d)?[u]:RO(Ci(u))}var V6=Ve;function Al(u,d,v){var y=u.length;return v=v===r?y:v,!d&&v>=y?u:Es(u,d,v)}var sO=E8||function(u){return Hr.clearTimeout(u)};function aO(u,d){if(d)return u.slice();var v=u.length,y=EI?EI(v):new u.constructor(v);return u.copy(y),y}function bw(u){var d=new u.constructor(u.byteLength);return new Pg(d).set(new Pg(u)),d}function j6(u,d){var v=d?bw(u.buffer):u.buffer;return new u.constructor(v,u.byteOffset,u.byteLength)}function U6(u){var d=new u.constructor(u.source,Sp.exec(u));return d.lastIndex=u.lastIndex,d}function H6(u){return Lp?zi(Lp.call(u)):{}}function oO(u,d){var v=d?bw(u.buffer):u.buffer;return new u.constructor(v,u.byteOffset,u.length)}function lO(u,d){if(u!==d){var v=u!==r,y=u===null,A=u===u,B=Jn(u),V=d!==r,q=d===null,st=d===d,bt=Jn(d);if(!q&&!bt&&!B&&u>d||B&&V&&st&&!q&&!bt||y&&V&&st||!v&&st||!A)return 1;if(!y&&!B&&!bt&&u<d||bt&&v&&A&&!y&&!B||q&&v&&A||!V&&A||!st)return-1}return 0}function G6(u,d,v){for(var y=-1,A=u.criteria,B=d.criteria,V=A.length,q=v.length;++y<V;){var st=lO(A[y],B[y]);if(st){if(y>=q)return st;var bt=v[y];return st*(bt=="desc"?-1:1)}}return u.index-d.index}function cO(u,d,v,y){for(var A=-1,B=u.length,V=v.length,q=-1,st=d.length,bt=Er(B-V,0),wt=dt(st+bt),At=!y;++q<st;)wt[q]=d[q];for(;++A<V;)(At||A<B)&&(wt[v[A]]=u[A]);for(;bt--;)wt[q++]=u[A++];return wt}function uO(u,d,v,y){for(var A=-1,B=u.length,V=-1,q=v.length,st=-1,bt=d.length,wt=Er(B-q,0),At=dt(wt+bt),Gt=!y;++A<wt;)At[A]=u[A];for(var se=A;++st<bt;)At[se+st]=d[st];for(;++V<q;)(Gt||A<B)&&(At[se+v[V]]=u[A++]);return At}function On(u,d){var v=-1,y=u.length;for(d||(d=dt(y));++v<y;)d[v]=u[v];return d}function ka(u,d,v,y){var A=!v;v||(v={});for(var B=-1,V=d.length;++B<V;){var q=d[B],st=y?y(v[q],u[q],q,v,u):r;st===r&&(st=u[q]),A?_o(v,q,st):Np(v,q,st)}return v}function W6(u,d){return ka(u,Sw(u),d)}function Z6(u,d){return ka(u,CO(u),d)}function Zg(u,d){return function(v,y){var A=Pe(v)?Y9:m6,B=d?d():{};return A(v,u,_e(y,2),B)}}function wh(u){return Ve(function(d,v){var y=-1,A=v.length,B=A>1?v[A-1]:r,V=A>2?v[2]:r;for(B=u.length>3&&typeof B=="function"?(A--,B):r,V&&fn(v[0],v[1],V)&&(B=A<3?r:B,A=1),d=zi(d);++y<A;){var q=v[y];q&&u(d,q,y,B)}return d})}function hO(u,d){return function(v,y){if(v==null)return v;if(!Pn(v))return u(v,y);for(var A=v.length,B=d?A:-1,V=zi(v);(d?B--:++B<A)&&y(V[B],B,V)!==!1;);return v}}function dO(u){return function(d,v,y){for(var A=-1,B=zi(d),V=y(d),q=V.length;q--;){var st=V[u?q:++A];if(v(B[st],st,B)===!1)break}return d}}function $6(u,d,v){var y=d&w,A=Up(u);function B(){var V=this&&this!==Hr&&this instanceof B?A:u;return V.apply(y?v:this,arguments)}return B}function pO(u){return function(d){d=Ci(d);var v=mh(d)?Js(d):r,y=v?v[0]:d.charAt(0),A=v?Al(v,1).join(""):d.slice(1);return y[u]()+A}}function xh(u){return function(d){return G0(hP(uP(d).replace(N9,"")),u,"")}}function Up(u){return function(){var d=arguments;switch(d.length){case 0:return new u;case 1:return new u(d[0]);case 2:return new u(d[0],d[1]);case 3:return new u(d[0],d[1],d[2]);case 4:return new u(d[0],d[1],d[2],d[3]);case 5:return new u(d[0],d[1],d[2],d[3],d[4]);case 6:return new u(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new u(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var v=yh(u.prototype),y=u.apply(v,d);return sr(y)?y:v}}function X6(u,d,v){var y=Up(u);function A(){for(var B=arguments.length,V=dt(B),q=B,st=Ch(A);q--;)V[q]=arguments[q];var bt=B<3&&V[0]!==st&&V[B-1]!==st?[]:yl(V,st);if(B-=bt.length,B<v)return _O(u,d,$g,A.placeholder,r,V,bt,r,r,v-B);var wt=this&&this!==Hr&&this instanceof A?y:u;return qn(wt,this,V)}return A}function mO(u){return function(d,v,y){var A=zi(d);if(!Pn(d)){var B=_e(v,3);d=Nr(d),v=function(q){return B(A[q],q,A)}}var V=u(d,v,y);return V>-1?A[B?d[V]:V]:r}}function fO(u){return yo(function(d){var v=d.length,y=v,A=As.prototype.thru;for(u&&d.reverse();y--;){var B=d[y];if(typeof B!="function")throw new ks(a);if(A&&!V&&Yg(B)=="wrapper")var V=new As([],!0)}for(y=V?y:v;++y<v;){B=d[y];var q=Yg(B),st=q=="wrapper"?kw(B):r;st&&Tw(st[0])&&st[1]==(M|b|L|E)&&!st[4].length&&st[9]==1?V=V[Yg(st[0])].apply(V,st[3]):V=B.length==1&&Tw(B)?V[q]():V.thru(B)}return function(){var bt=arguments,wt=bt[0];if(V&&bt.length==1&&Pe(wt))return V.plant(wt).value();for(var At=0,Gt=v?d[At].apply(this,bt):wt;++At<v;)Gt=d[At].call(this,Gt);return Gt}})}function $g(u,d,v,y,A,B,V,q,st,bt){var wt=d&M,At=d&w,Gt=d&S,se=d&(b|P),be=d&it,Ne=Gt?r:Up(u);function ye(){for(var Xe=arguments.length,ni=dt(Xe),Qn=Xe;Qn--;)ni[Qn]=arguments[Qn];if(se)var gn=Ch(ye),ts=a8(ni,gn);if(y&&(ni=cO(ni,y,A,se)),B&&(ni=uO(ni,B,V,se)),Xe-=ts,se&&Xe<bt){var _r=yl(ni,gn);return _O(u,d,$g,ye.placeholder,v,ni,_r,q,st,bt-Xe)}var ea=At?v:this,ko=Gt?ea[u]:u;return Xe=ni.length,q?ni=mW(ni,q):be&&Xe>1&&ni.reverse(),wt&&st<Xe&&(ni.length=st),this&&this!==Hr&&this instanceof ye&&(ko=Ne||Up(ko)),ko.apply(ea,ni)}return ye}function gO(u,d){return function(v,y){return x6(v,u,d(y),{})}}function Xg(u,d){return function(v,y){var A;if(v===r&&y===r)return d;if(v!==r&&(A=v),y!==r){if(A===r)return y;typeof v=="string"||typeof y=="string"?(v=Yn(v),y=Yn(y)):(v=eO(v),y=eO(y)),A=u(v,y)}return A}}function yw(u){return yo(function(d){return d=ir(d,Kn(_e())),Ve(function(v){var y=this;return u(d,function(A){return qn(A,y,v)})})})}function qg(u,d){d=d===r?" ":Yn(d);var v=d.length;if(v<2)return v?pw(d,u):d;var y=pw(d,Dg(u/fh(d)));return mh(d)?Al(Js(y),0,u).join(""):y.slice(0,u)}function q6(u,d,v,y){var A=d&w,B=Up(u);function V(){for(var q=-1,st=arguments.length,bt=-1,wt=y.length,At=dt(wt+st),Gt=this&&this!==Hr&&this instanceof V?B:u;++bt<wt;)At[bt]=y[bt];for(;st--;)At[bt++]=arguments[++q];return qn(Gt,A?v:this,At)}return V}function vO(u){return function(d,v,y){return y&&typeof y!="number"&&fn(d,v,y)&&(v=y=r),d=Co(d),v===r?(v=d,d=0):v=Co(v),y=y===r?d<v?1:-1:Co(y),B6(d,v,y,u)}}function Kg(u){return function(d,v){return typeof d=="string"&&typeof v=="string"||(d=Is(d),v=Is(v)),u(d,v)}}function _O(u,d,v,y,A,B,V,q,st,bt){var wt=d&b,At=wt?V:r,Gt=wt?r:V,se=wt?B:r,be=wt?r:B;d|=wt?L:H,d&=~(wt?H:L),d&C||(d&=~(w|S));var Ne=[u,d,A,se,At,be,Gt,q,st,bt],ye=v.apply(r,Ne);return Tw(u)&&OO(ye,Ne),ye.placeholder=y,PO(ye,u,d)}function ww(u){var d=Sr[u];return function(v,y){if(v=Is(v),y=y==null?0:tn(De(y),292),y&&PI(v)){var A=(Ci(v)+"e").split("e"),B=d(A[0]+"e"+(+A[1]+y));return A=(Ci(B)+"e").split("e"),+(A[0]+"e"+(+A[1]-y))}return d(v)}}var K6=_h&&1/Ag(new _h([,-0]))[1]==xt?function(u){return new _h(u)}:Hw;function bO(u){return function(d){var v=en(d);return v==$t?Y0(d):v==Fi?p8(d):s8(d,u(d))}}function bo(u,d,v,y,A,B,V,q){var st=d&S;if(!st&&typeof u!="function")throw new ks(a);var bt=y?y.length:0;if(bt||(d&=~(L|H),y=A=r),V=V===r?V:Er(De(V),0),q=q===r?q:De(q),bt-=A?A.length:0,d&H){var wt=y,At=A;y=A=r}var Gt=st?r:kw(u),se=[u,d,v,y,A,wt,At,B,V,q];if(Gt&&hW(se,Gt),u=se[0],d=se[1],v=se[2],y=se[3],A=se[4],q=se[9]=se[9]===r?st?0:u.length:Er(se[9]-bt,0),!q&&d&(b|P)&&(d&=~(b|P)),!d||d==w)var be=$6(u,d,v);else d==b||d==P?be=X6(u,d,q):(d==L||d==(w|L))&&!A.length?be=q6(u,d,v,y):be=$g.apply(r,se);var Ne=Gt?QI:OO;return PO(Ne(be,se),u,d)}function yO(u,d,v,y){return u===r||ta(u,vh[v])&&!Si.call(y,v)?d:u}function wO(u,d,v,y,A,B){return sr(u)&&sr(d)&&(B.set(d,u),Hg(u,d,r,wO,B),B.delete(d)),u}function Y6(u){return Wp(u)?r:u}function xO(u,d,v,y,A,B){var V=v&g,q=u.length,st=d.length;if(q!=st&&!(V&&st>q))return!1;var bt=B.get(u),wt=B.get(d);if(bt&&wt)return bt==d&&wt==u;var At=-1,Gt=!0,se=v&_?new Sc:r;for(B.set(u,d),B.set(d,u);++At<q;){var be=u[At],Ne=d[At];if(y)var ye=V?y(Ne,be,At,d,u,B):y(be,Ne,At,u,d,B);if(ye!==r){if(ye)continue;Gt=!1;break}if(se){if(!W0(d,function(Xe,ni){if(!Pp(se,ni)&&(be===Xe||A(be,Xe,v,y,B)))return se.push(ni)})){Gt=!1;break}}else if(!(be===Ne||A(be,Ne,v,y,B))){Gt=!1;break}}return B.delete(u),B.delete(d),Gt}function J6(u,d,v,y,A,B,V){switch(v){case Jr:if(u.byteLength!=d.byteLength||u.byteOffset!=d.byteOffset)return!1;u=u.buffer,d=d.buffer;case wa:return!(u.byteLength!=d.byteLength||!B(new Pg(u),new Pg(d)));case Ct:case Tt:case ve:return ta(+u,+d);case Et:return u.name==d.name&&u.message==d.message;case jr:case Ki:return u==d+"";case $t:var q=Y0;case Fi:var st=y&g;if(q||(q=Ag),u.size!=d.size&&!st)return!1;var bt=V.get(u);if(bt)return bt==d;y|=_,V.set(u,d);var wt=xO(q(u),q(d),y,A,B,V);return V.delete(u),wt;case ya:if(Lp)return Lp.call(u)==Lp.call(d)}return!1}function Q6(u,d,v,y,A,B){var V=v&g,q=xw(u),st=q.length,bt=xw(d),wt=bt.length;if(st!=wt&&!V)return!1;for(var At=st;At--;){var Gt=q[At];if(!(V?Gt in d:Si.call(d,Gt)))return!1}var se=B.get(u),be=B.get(d);if(se&&be)return se==d&&be==u;var Ne=!0;B.set(u,d),B.set(d,u);for(var ye=V;++At<st;){Gt=q[At];var Xe=u[Gt],ni=d[Gt];if(y)var Qn=V?y(ni,Xe,Gt,d,u,B):y(Xe,ni,Gt,u,d,B);if(!(Qn===r?Xe===ni||A(Xe,ni,v,y,B):Qn)){Ne=!1;break}ye||(ye=Gt=="constructor")}if(Ne&&!ye){var gn=u.constructor,ts=d.constructor;gn!=ts&&"constructor"in u&&"constructor"in d&&!(typeof gn=="function"&&gn instanceof gn&&typeof ts=="function"&&ts instanceof ts)&&(Ne=!1)}return B.delete(u),B.delete(d),Ne}function yo(u){return Ow(TO(u,r,NO),u+"")}function xw(u){return UI(u,Nr,Sw)}function Cw(u){return UI(u,Mn,CO)}var kw=Ng?function(u){return Ng.get(u)}:Hw;function Yg(u){for(var d=u.name+"",v=bh[d],y=Si.call(bh,d)?v.length:0;y--;){var A=v[y],B=A.func;if(B==null||B==u)return A.name}return d}function Ch(u){var d=Si.call(O,"placeholder")?O:u;return d.placeholder}function _e(){var u=O.iteratee||jw;return u=u===jw?WI:u,arguments.length?u(arguments[0],arguments[1]):u}function Jg(u,d){var v=u.__data__;return oW(d)?v[typeof d=="string"?"string":"hash"]:v.map}function Aw(u){for(var d=Nr(u),v=d.length;v--;){var y=d[v],A=u[y];d[v]=[y,A,SO(A)]}return d}function Ic(u,d){var v=u8(u,d);return GI(v)?v:r}function tW(u){var d=Si.call(u,kc),v=u[kc];try{u[kc]=r;var y=!0}catch{}var A=Ig.call(u);return y&&(d?u[kc]=v:delete u[kc]),A}var Sw=Q0?function(u){return u==null?[]:(u=zi(u),_l(Q0(u),function(d){return II.call(u,d)}))}:Gw,CO=Q0?function(u){for(var d=[];u;)bl(d,Sw(u)),u=Mg(u);return d}:Gw,en=mn;(tw&&en(new tw(new ArrayBuffer(1)))!=Jr||Rp&&en(new Rp)!=$t||ew&&en(ew.resolve())!=$e||_h&&en(new _h)!=Fi||Bp&&en(new Bp)!=ho)&&(en=function(u){var d=mn(u),v=d==ne?u.constructor:r,y=v?Oc(v):"";if(y)switch(y){case L8:return Jr;case N8:return $t;case F8:return $e;case z8:return Fi;case V8:return ho}return d});function eW(u,d,v){for(var y=-1,A=v.length;++y<A;){var B=v[y],V=B.size;switch(B.type){case"drop":u+=V;break;case"dropRight":d-=V;break;case"take":d=tn(d,u+V);break;case"takeRight":u=Er(u,d-V);break}}return{start:u,end:d}}function iW(u){var d=u.match(Ap);return d?d[1].split(N0):[]}function kO(u,d,v){d=kl(d,u);for(var y=-1,A=d.length,B=!1;++y<A;){var V=Aa(d[y]);if(!(B=u!=null&&v(u,V)))break;u=u[V]}return B||++y!=A?B:(A=u==null?0:u.length,!!A&&sv(A)&&wo(V,A)&&(Pe(u)||Pc(u)))}function rW(u){var d=u.length,v=new u.constructor(d);return d&&typeof u[0]=="string"&&Si.call(u,"index")&&(v.index=u.index,v.input=u.input),v}function AO(u){return typeof u.constructor=="function"&&!Hp(u)?yh(Mg(u)):{}}function nW(u,d,v){var y=u.constructor;switch(d){case wa:return bw(u);case Ct:case Tt:return new y(+u);case Jr:return j6(u,v);case po:case Xs:case mo:case qs:case Xn:case Ur:case Qr:case bp:case yp:return oO(u,v);case $t:return new y;case ve:case Ki:return new y(u);case jr:return U6(u);case Fi:return new y;case ya:return H6(u)}}function sW(u,d){var v=d.length;if(!v)return u;var y=v-1;return d[y]=(v>1?"& ":"")+d[y],d=d.join(v>2?", ":" "),u.replace(pg,`{
/* [wrapped with `+d+`] */
`)}function aW(u){return Pe(u)||Pc(u)||!!(OI&&u&&u[OI])}function wo(u,d){var v=typeof u;return d=d??Z,!!d&&(v=="number"||v!="symbol"&&vc.test(u))&&u>-1&&u%1==0&&u<d}function fn(u,d,v){if(!sr(v))return!1;var y=typeof d;return(y=="number"?Pn(v)&&wo(d,v.length):y=="string"&&d in v)?ta(v[d],u):!1}function Ew(u,d){if(Pe(u))return!1;var v=typeof u;return v=="number"||v=="symbol"||v=="boolean"||u==null||Jn(u)?!0:B0.test(u)||!dg.test(u)||d!=null&&u in zi(d)}function oW(u){var d=typeof u;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?u!=="__proto__":u===null}function Tw(u){var d=Yg(u),v=O[d];if(typeof v!="function"||!(d in ei.prototype))return!1;if(u===v)return!0;var y=kw(v);return!!y&&u===y[0]}function lW(u){return!!SI&&SI in u}var cW=Eg?xo:Ww;function Hp(u){var d=u&&u.constructor,v=typeof d=="function"&&d.prototype||vh;return u===v}function SO(u){return u===u&&!sr(u)}function EO(u,d){return function(v){return v==null?!1:v[u]===d&&(d!==r||u in zi(v))}}function uW(u){var d=rv(u,function(y){return v.size===c&&v.clear(),y}),v=d.cache;return d}function hW(u,d){var v=u[1],y=d[1],A=v|y,B=A<(w|S|M),V=y==M&&v==b||y==M&&v==E&&u[7].length<=d[8]||y==(M|E)&&d[7].length<=d[8]&&v==b;if(!(B||V))return u;y&w&&(u[2]=d[2],A|=v&w?0:C);var q=d[3];if(q){var st=u[3];u[3]=st?cO(st,q,d[4]):q,u[4]=st?yl(u[3],h):d[4]}return q=d[5],q&&(st=u[5],u[5]=st?uO(st,q,d[6]):q,u[6]=st?yl(u[5],h):d[6]),q=d[7],q&&(u[7]=q),y&M&&(u[8]=u[8]==null?d[8]:tn(u[8],d[8])),u[9]==null&&(u[9]=d[9]),u[0]=d[0],u[1]=A,u}function dW(u){var d=[];if(u!=null)for(var v in zi(u))d.push(v);return d}function pW(u){return Ig.call(u)}function TO(u,d,v){return d=Er(d===r?u.length-1:d,0),function(){for(var y=arguments,A=-1,B=Er(y.length-d,0),V=dt(B);++A<B;)V[A]=y[d+A];A=-1;for(var q=dt(d+1);++A<d;)q[A]=y[A];return q[d]=v(V),qn(u,this,q)}}function IO(u,d){return d.length<2?u:Tc(u,Es(d,0,-1))}function mW(u,d){for(var v=u.length,y=tn(d.length,v),A=On(u);y--;){var B=d[y];u[y]=wo(B,v)?A[B]:r}return u}function Iw(u,d){if(!(d==="constructor"&&typeof u[d]=="function")&&d!="__proto__")return u[d]}var OO=MO(QI),Gp=I8||function(u,d){return Hr.setTimeout(u,d)},Ow=MO(N6);function PO(u,d,v){var y=d+"";return Ow(u,sW(y,fW(iW(y),v)))}function MO(u){var d=0,v=0;return function(){var y=R8(),A=lt-(y-v);if(v=y,A>0){if(++d>=J)return arguments[0]}else d=0;return u.apply(r,arguments)}}function Qg(u,d){var v=-1,y=u.length,A=y-1;for(d=d===r?y:d;++v<d;){var B=dw(v,A),V=u[B];u[B]=u[v],u[v]=V}return u.length=d,u}var RO=uW(function(u){var d=[];return u.charCodeAt(0)===46&&d.push(""),u.replace(D0,function(v,y,A,B){d.push(A?B.replace(fg,"$1"):y||v)}),d});function Aa(u){if(typeof u=="string"||Jn(u))return u;var d=u+"";return d=="0"&&1/u==-xt?"-0":d}function Oc(u){if(u!=null){try{return Tg.call(u)}catch{}try{return u+""}catch{}}return""}function fW(u,d){return Cs(Ze,function(v){var y="_."+v[0];d&v[1]&&!Cg(u,y)&&u.push(y)}),u.sort()}function BO(u){if(u instanceof ei)return u.clone();var d=new As(u.__wrapped__,u.__chain__);return d.__actions__=On(u.__actions__),d.__index__=u.__index__,d.__values__=u.__values__,d}function gW(u,d,v){(v?fn(u,d,v):d===r)?d=1:d=Er(De(d),0);var y=u==null?0:u.length;if(!y||d<1)return[];for(var A=0,B=0,V=dt(Dg(y/d));A<y;)V[B++]=Es(u,A,A+=d);return V}function vW(u){for(var d=-1,v=u==null?0:u.length,y=0,A=[];++d<v;){var B=u[d];B&&(A[y++]=B)}return A}function _W(){var u=arguments.length;if(!u)return[];for(var d=dt(u-1),v=arguments[0],y=u;y--;)d[y-1]=arguments[y];return bl(Pe(v)?On(v):[v],Gr(d,1))}var bW=Ve(function(u,d){return vr(u)?Fp(u,Gr(d,1,vr,!0)):[]}),yW=Ve(function(u,d){var v=Ts(d);return vr(v)&&(v=r),vr(u)?Fp(u,Gr(d,1,vr,!0),_e(v,2)):[]}),wW=Ve(function(u,d){var v=Ts(d);return vr(v)&&(v=r),vr(u)?Fp(u,Gr(d,1,vr,!0),r,v):[]});function xW(u,d,v){var y=u==null?0:u.length;return y?(d=v||d===r?1:De(d),Es(u,d<0?0:d,y)):[]}function CW(u,d,v){var y=u==null?0:u.length;return y?(d=v||d===r?1:De(d),d=y-d,Es(u,0,d<0?0:d)):[]}function kW(u,d){return u&&u.length?Wg(u,_e(d,3),!0,!0):[]}function AW(u,d){return u&&u.length?Wg(u,_e(d,3),!0):[]}function SW(u,d,v,y){var A=u==null?0:u.length;return A?(v&&typeof v!="number"&&fn(u,d,v)&&(v=0,y=A),_6(u,d,v,y)):[]}function DO(u,d,v){var y=u==null?0:u.length;if(!y)return-1;var A=v==null?0:De(v);return A<0&&(A=Er(y+A,0)),kg(u,_e(d,3),A)}function LO(u,d,v){var y=u==null?0:u.length;if(!y)return-1;var A=y-1;return v!==r&&(A=De(v),A=v<0?Er(y+A,0):tn(A,y-1)),kg(u,_e(d,3),A,!0)}function NO(u){var d=u==null?0:u.length;return d?Gr(u,1):[]}function EW(u){var d=u==null?0:u.length;return d?Gr(u,xt):[]}function TW(u,d){var v=u==null?0:u.length;return v?(d=d===r?1:De(d),Gr(u,d)):[]}function IW(u){for(var d=-1,v=u==null?0:u.length,y={};++d<v;){var A=u[d];y[A[0]]=A[1]}return y}function FO(u){return u&&u.length?u[0]:r}function OW(u,d,v){var y=u==null?0:u.length;if(!y)return-1;var A=v==null?0:De(v);return A<0&&(A=Er(y+A,0)),ph(u,d,A)}function PW(u){var d=u==null?0:u.length;return d?Es(u,0,-1):[]}var MW=Ve(function(u){var d=ir(u,vw);return d.length&&d[0]===u[0]?ow(d):[]}),RW=Ve(function(u){var d=Ts(u),v=ir(u,vw);return d===Ts(v)?d=r:v.pop(),v.length&&v[0]===u[0]?ow(v,_e(d,2)):[]}),BW=Ve(function(u){var d=Ts(u),v=ir(u,vw);return d=typeof d=="function"?d:r,d&&v.pop(),v.length&&v[0]===u[0]?ow(v,r,d):[]});function DW(u,d){return u==null?"":P8.call(u,d)}function Ts(u){var d=u==null?0:u.length;return d?u[d-1]:r}function LW(u,d,v){var y=u==null?0:u.length;if(!y)return-1;var A=y;return v!==r&&(A=De(v),A=A<0?Er(y+A,0):tn(A,y-1)),d===d?f8(u,d,A):kg(u,_I,A,!0)}function NW(u,d){return u&&u.length?qI(u,De(d)):r}var FW=Ve(zO);function zO(u,d){return u&&u.length&&d&&d.length?hw(u,d):u}function zW(u,d,v){return u&&u.length&&d&&d.length?hw(u,d,_e(v,2)):u}function VW(u,d,v){return u&&u.length&&d&&d.length?hw(u,d,r,v):u}var jW=yo(function(u,d){var v=u==null?0:u.length,y=rw(u,d);return JI(u,ir(d,function(A){return wo(A,v)?+A:A}).sort(lO)),y});function UW(u,d){var v=[];if(!(u&&u.length))return v;var y=-1,A=[],B=u.length;for(d=_e(d,3);++y<B;){var V=u[y];d(V,y,u)&&(v.push(V),A.push(y))}return JI(u,A),v}function Pw(u){return u==null?u:D8.call(u)}function HW(u,d,v){var y=u==null?0:u.length;return y?(v&&typeof v!="number"&&fn(u,d,v)?(d=0,v=y):(d=d==null?0:De(d),v=v===r?y:De(v)),Es(u,d,v)):[]}function GW(u,d){return Gg(u,d)}function WW(u,d,v){return mw(u,d,_e(v,2))}function ZW(u,d){var v=u==null?0:u.length;if(v){var y=Gg(u,d);if(y<v&&ta(u[y],d))return y}return-1}function $W(u,d){return Gg(u,d,!0)}function XW(u,d,v){return mw(u,d,_e(v,2),!0)}function qW(u,d){var v=u==null?0:u.length;if(v){var y=Gg(u,d,!0)-1;if(ta(u[y],d))return y}return-1}function KW(u){return u&&u.length?tO(u):[]}function YW(u,d){return u&&u.length?tO(u,_e(d,2)):[]}function JW(u){var d=u==null?0:u.length;return d?Es(u,1,d):[]}function QW(u,d,v){return u&&u.length?(d=v||d===r?1:De(d),Es(u,0,d<0?0:d)):[]}function tZ(u,d,v){var y=u==null?0:u.length;return y?(d=v||d===r?1:De(d),d=y-d,Es(u,d<0?0:d,y)):[]}function eZ(u,d){return u&&u.length?Wg(u,_e(d,3),!1,!0):[]}function iZ(u,d){return u&&u.length?Wg(u,_e(d,3)):[]}var rZ=Ve(function(u){return Cl(Gr(u,1,vr,!0))}),nZ=Ve(function(u){var d=Ts(u);return vr(d)&&(d=r),Cl(Gr(u,1,vr,!0),_e(d,2))}),sZ=Ve(function(u){var d=Ts(u);return d=typeof d=="function"?d:r,Cl(Gr(u,1,vr,!0),r,d)});function aZ(u){return u&&u.length?Cl(u):[]}function oZ(u,d){return u&&u.length?Cl(u,_e(d,2)):[]}function lZ(u,d){return d=typeof d=="function"?d:r,u&&u.length?Cl(u,r,d):[]}function Mw(u){if(!(u&&u.length))return[];var d=0;return u=_l(u,function(v){if(vr(v))return d=Er(v.length,d),!0}),q0(d,function(v){return ir(u,Z0(v))})}function VO(u,d){if(!(u&&u.length))return[];var v=Mw(u);return d==null?v:ir(v,function(y){return qn(d,r,y)})}var cZ=Ve(function(u,d){return vr(u)?Fp(u,d):[]}),uZ=Ve(function(u){return gw(_l(u,vr))}),hZ=Ve(function(u){var d=Ts(u);return vr(d)&&(d=r),gw(_l(u,vr),_e(d,2))}),dZ=Ve(function(u){var d=Ts(u);return d=typeof d=="function"?d:r,gw(_l(u,vr),r,d)}),pZ=Ve(Mw);function mZ(u,d){return nO(u||[],d||[],Np)}function fZ(u,d){return nO(u||[],d||[],jp)}var gZ=Ve(function(u){var d=u.length,v=d>1?u[d-1]:r;return v=typeof v=="function"?(u.pop(),v):r,VO(u,v)});function jO(u){var d=O(u);return d.__chain__=!0,d}function vZ(u,d){return d(u),u}function tv(u,d){return d(u)}var _Z=yo(function(u){var d=u.length,v=d?u[0]:0,y=this.__wrapped__,A=function(B){return rw(B,u)};return d>1||this.__actions__.length||!(y instanceof ei)||!wo(v)?this.thru(A):(y=y.slice(v,+v+(d?1:0)),y.__actions__.push({func:tv,args:[A],thisArg:r}),new As(y,this.__chain__).thru(function(B){return d&&!B.length&&B.push(r),B}))});function bZ(){return jO(this)}function yZ(){return new As(this.value(),this.__chain__)}function wZ(){this.__values__===r&&(this.__values__=eP(this.value()));var u=this.__index__>=this.__values__.length,d=u?r:this.__values__[this.__index__++];return{done:u,value:d}}function xZ(){return this}function CZ(u){for(var d,v=this;v instanceof zg;){var y=BO(v);y.__index__=0,y.__values__=r,d?A.__wrapped__=y:d=y;var A=y;v=v.__wrapped__}return A.__wrapped__=u,d}function kZ(){var u=this.__wrapped__;if(u instanceof ei){var d=u;return this.__actions__.length&&(d=new ei(this)),d=d.reverse(),d.__actions__.push({func:tv,args:[Pw],thisArg:r}),new As(d,this.__chain__)}return this.thru(Pw)}function AZ(){return rO(this.__wrapped__,this.__actions__)}var SZ=Zg(function(u,d,v){Si.call(u,v)?++u[v]:_o(u,v,1)});function EZ(u,d,v){var y=Pe(u)?gI:v6;return v&&fn(u,d,v)&&(d=r),y(u,_e(d,3))}function TZ(u,d){var v=Pe(u)?_l:VI;return v(u,_e(d,3))}var IZ=mO(DO),OZ=mO(LO);function PZ(u,d){return Gr(ev(u,d),1)}function MZ(u,d){return Gr(ev(u,d),xt)}function RZ(u,d,v){return v=v===r?1:De(v),Gr(ev(u,d),v)}function UO(u,d){var v=Pe(u)?Cs:xl;return v(u,_e(d,3))}function HO(u,d){var v=Pe(u)?J9:zI;return v(u,_e(d,3))}var BZ=Zg(function(u,d,v){Si.call(u,v)?u[v].push(d):_o(u,v,[d])});function DZ(u,d,v,y){u=Pn(u)?u:Ah(u),v=v&&!y?De(v):0;var A=u.length;return v<0&&(v=Er(A+v,0)),av(u)?v<=A&&u.indexOf(d,v)>-1:!!A&&ph(u,d,v)>-1}var LZ=Ve(function(u,d,v){var y=-1,A=typeof d=="function",B=Pn(u)?dt(u.length):[];return xl(u,function(V){B[++y]=A?qn(d,V,v):zp(V,d,v)}),B}),NZ=Zg(function(u,d,v){_o(u,v,d)});function ev(u,d){var v=Pe(u)?ir:ZI;return v(u,_e(d,3))}function FZ(u,d,v,y){return u==null?[]:(Pe(d)||(d=d==null?[]:[d]),v=y?r:v,Pe(v)||(v=v==null?[]:[v]),KI(u,d,v))}var zZ=Zg(function(u,d,v){u[v?0:1].push(d)},function(){return[[],[]]});function VZ(u,d,v){var y=Pe(u)?G0:yI,A=arguments.length<3;return y(u,_e(d,4),v,A,xl)}function jZ(u,d,v){var y=Pe(u)?Q9:yI,A=arguments.length<3;return y(u,_e(d,4),v,A,zI)}function UZ(u,d){var v=Pe(u)?_l:VI;return v(u,nv(_e(d,3)))}function HZ(u){var d=Pe(u)?DI:D6;return d(u)}function GZ(u,d,v){(v?fn(u,d,v):d===r)?d=1:d=De(d);var y=Pe(u)?d6:L6;return y(u,d)}function WZ(u){var d=Pe(u)?p6:F6;return d(u)}function ZZ(u){if(u==null)return 0;if(Pn(u))return av(u)?fh(u):u.length;var d=en(u);return d==$t||d==Fi?u.size:cw(u).length}function $Z(u,d,v){var y=Pe(u)?W0:z6;return v&&fn(u,d,v)&&(d=r),y(u,_e(d,3))}var XZ=Ve(function(u,d){if(u==null)return[];var v=d.length;return v>1&&fn(u,d[0],d[1])?d=[]:v>2&&fn(d[0],d[1],d[2])&&(d=[d[0]]),KI(u,Gr(d,1),[])}),iv=T8||function(){return Hr.Date.now()};function qZ(u,d){if(typeof d!="function")throw new ks(a);return u=De(u),function(){if(--u<1)return d.apply(this,arguments)}}function GO(u,d,v){return d=v?r:d,d=u&&d==null?u.length:d,bo(u,M,r,r,r,r,d)}function WO(u,d){var v;if(typeof d!="function")throw new ks(a);return u=De(u),function(){return--u>0&&(v=d.apply(this,arguments)),u<=1&&(d=r),v}}var Rw=Ve(function(u,d,v){var y=w;if(v.length){var A=yl(v,Ch(Rw));y|=L}return bo(u,y,d,v,A)}),ZO=Ve(function(u,d,v){var y=w|S;if(v.length){var A=yl(v,Ch(ZO));y|=L}return bo(d,y,u,v,A)});function $O(u,d,v){d=v?r:d;var y=bo(u,b,r,r,r,r,r,d);return y.placeholder=$O.placeholder,y}function XO(u,d,v){d=v?r:d;var y=bo(u,P,r,r,r,r,r,d);return y.placeholder=XO.placeholder,y}function qO(u,d,v){var y,A,B,V,q,st,bt=0,wt=!1,At=!1,Gt=!0;if(typeof u!="function")throw new ks(a);d=Is(d)||0,sr(v)&&(wt=!!v.leading,At="maxWait"in v,B=At?Er(Is(v.maxWait)||0,d):B,Gt="trailing"in v?!!v.trailing:Gt);function se(_r){var ea=y,ko=A;return y=A=r,bt=_r,V=u.apply(ko,ea),V}function be(_r){return bt=_r,q=Gp(Xe,d),wt?se(_r):V}function Ne(_r){var ea=_r-st,ko=_r-bt,mP=d-ea;return At?tn(mP,B-ko):mP}function ye(_r){var ea=_r-st,ko=_r-bt;return st===r||ea>=d||ea<0||At&&ko>=B}function Xe(){var _r=iv();if(ye(_r))return ni(_r);q=Gp(Xe,Ne(_r))}function ni(_r){return q=r,Gt&&y?se(_r):(y=A=r,V)}function Qn(){q!==r&&sO(q),bt=0,y=st=A=q=r}function gn(){return q===r?V:ni(iv())}function ts(){var _r=iv(),ea=ye(_r);if(y=arguments,A=this,st=_r,ea){if(q===r)return be(st);if(At)return sO(q),q=Gp(Xe,d),se(st)}return q===r&&(q=Gp(Xe,d)),V}return ts.cancel=Qn,ts.flush=gn,ts}var KZ=Ve(function(u,d){return FI(u,1,d)}),YZ=Ve(function(u,d,v){return FI(u,Is(d)||0,v)});function JZ(u){return bo(u,it)}function rv(u,d){if(typeof u!="function"||d!=null&&typeof d!="function")throw new ks(a);var v=function(){var y=arguments,A=d?d.apply(this,y):y[0],B=v.cache;if(B.has(A))return B.get(A);var V=u.apply(this,y);return v.cache=B.set(A,V)||B,V};return v.cache=new(rv.Cache||vo),v}rv.Cache=vo;function nv(u){if(typeof u!="function")throw new ks(a);return function(){var d=arguments;switch(d.length){case 0:return!u.call(this);case 1:return!u.call(this,d[0]);case 2:return!u.call(this,d[0],d[1]);case 3:return!u.call(this,d[0],d[1],d[2])}return!u.apply(this,d)}}function QZ(u){return WO(2,u)}var t$=V6(function(u,d){d=d.length==1&&Pe(d[0])?ir(d[0],Kn(_e())):ir(Gr(d,1),Kn(_e()));var v=d.length;return Ve(function(y){for(var A=-1,B=tn(y.length,v);++A<B;)y[A]=d[A].call(this,y[A]);return qn(u,this,y)})}),Bw=Ve(function(u,d){var v=yl(d,Ch(Bw));return bo(u,L,r,d,v)}),KO=Ve(function(u,d){var v=yl(d,Ch(KO));return bo(u,H,r,d,v)}),e$=yo(function(u,d){return bo(u,E,r,r,r,d)});function i$(u,d){if(typeof u!="function")throw new ks(a);return d=d===r?d:De(d),Ve(u,d)}function r$(u,d){if(typeof u!="function")throw new ks(a);return d=d==null?0:Er(De(d),0),Ve(function(v){var y=v[d],A=Al(v,0,d);return y&&bl(A,y),qn(u,this,A)})}function n$(u,d,v){var y=!0,A=!0;if(typeof u!="function")throw new ks(a);return sr(v)&&(y="leading"in v?!!v.leading:y,A="trailing"in v?!!v.trailing:A),qO(u,d,{leading:y,maxWait:d,trailing:A})}function s$(u){return GO(u,1)}function a$(u,d){return Bw(_w(d),u)}function o$(){if(!arguments.length)return[];var u=arguments[0];return Pe(u)?u:[u]}function l$(u){return Ss(u,f)}function c$(u,d){return d=typeof d=="function"?d:r,Ss(u,f,d)}function u$(u){return Ss(u,p|f)}function h$(u,d){return d=typeof d=="function"?d:r,Ss(u,p|f,d)}function d$(u,d){return d==null||NI(u,d,Nr(d))}function ta(u,d){return u===d||u!==u&&d!==d}var p$=Kg(aw),m$=Kg(function(u,d){return u>=d}),Pc=HI(function(){return arguments}())?HI:function(u){return dr(u)&&Si.call(u,"callee")&&!II.call(u,"callee")},Pe=dt.isArray,f$=uI?Kn(uI):C6;function Pn(u){return u!=null&&sv(u.length)&&!xo(u)}function vr(u){return dr(u)&&Pn(u)}function g$(u){return u===!0||u===!1||dr(u)&&mn(u)==Ct}var Sl=O8||Ww,v$=hI?Kn(hI):k6;function _$(u){return dr(u)&&u.nodeType===1&&!Wp(u)}function b$(u){if(u==null)return!0;if(Pn(u)&&(Pe(u)||typeof u=="string"||typeof u.splice=="function"||Sl(u)||kh(u)||Pc(u)))return!u.length;var d=en(u);if(d==$t||d==Fi)return!u.size;if(Hp(u))return!cw(u).length;for(var v in u)if(Si.call(u,v))return!1;return!0}function y$(u,d){return Vp(u,d)}function w$(u,d,v){v=typeof v=="function"?v:r;var y=v?v(u,d):r;return y===r?Vp(u,d,r,v):!!y}function Dw(u){if(!dr(u))return!1;var d=mn(u);return d==Et||d==at||typeof u.message=="string"&&typeof u.name=="string"&&!Wp(u)}function x$(u){return typeof u=="number"&&PI(u)}function xo(u){if(!sr(u))return!1;var d=mn(u);return d==ie||d==fe||d==wr||d==yi}function YO(u){return typeof u=="number"&&u==De(u)}function sv(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=Z}function sr(u){var d=typeof u;return u!=null&&(d=="object"||d=="function")}function dr(u){return u!=null&&typeof u=="object"}var JO=dI?Kn(dI):S6;function C$(u,d){return u===d||lw(u,d,Aw(d))}function k$(u,d,v){return v=typeof v=="function"?v:r,lw(u,d,Aw(d),v)}function A$(u){return QO(u)&&u!=+u}function S$(u){if(cW(u))throw new Ie(s);return GI(u)}function E$(u){return u===null}function T$(u){return u==null}function QO(u){return typeof u=="number"||dr(u)&&mn(u)==ve}function Wp(u){if(!dr(u)||mn(u)!=ne)return!1;var d=Mg(u);if(d===null)return!0;var v=Si.call(d,"constructor")&&d.constructor;return typeof v=="function"&&v instanceof v&&Tg.call(v)==k8}var Lw=pI?Kn(pI):E6;function I$(u){return YO(u)&&u>=-Z&&u<=Z}var tP=mI?Kn(mI):T6;function av(u){return typeof u=="string"||!Pe(u)&&dr(u)&&mn(u)==Ki}function Jn(u){return typeof u=="symbol"||dr(u)&&mn(u)==ya}var kh=fI?Kn(fI):I6;function O$(u){return u===r}function P$(u){return dr(u)&&en(u)==ho}function M$(u){return dr(u)&&mn(u)==fc}var R$=Kg(uw),B$=Kg(function(u,d){return u<=d});function eP(u){if(!u)return[];if(Pn(u))return av(u)?Js(u):On(u);if(Mp&&u[Mp])return d8(u[Mp]());var d=en(u),v=d==$t?Y0:d==Fi?Ag:Ah;return v(u)}function Co(u){if(!u)return u===0?u:0;if(u=Is(u),u===xt||u===-xt){var d=u<0?-1:1;return d*et}return u===u?u:0}function De(u){var d=Co(u),v=d%1;return d===d?v?d-v:d:0}function iP(u){return u?Ec(De(u),0,ct):0}function Is(u){if(typeof u=="number")return u;if(Jn(u))return tt;if(sr(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=sr(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=wI(u);var v=Ep.test(u);return v||gc.test(u)?q9(u.slice(2),v?2:8):vg.test(u)?tt:+u}function rP(u){return ka(u,Mn(u))}function D$(u){return u?Ec(De(u),-Z,Z):u===0?u:0}function Ci(u){return u==null?"":Yn(u)}var L$=wh(function(u,d){if(Hp(d)||Pn(d)){ka(d,Nr(d),u);return}for(var v in d)Si.call(d,v)&&Np(u,v,d[v])}),nP=wh(function(u,d){ka(d,Mn(d),u)}),ov=wh(function(u,d,v,y){ka(d,Mn(d),u,y)}),N$=wh(function(u,d,v,y){ka(d,Nr(d),u,y)}),F$=yo(rw);function z$(u,d){var v=yh(u);return d==null?v:LI(v,d)}var V$=Ve(function(u,d){u=zi(u);var v=-1,y=d.length,A=y>2?d[2]:r;for(A&&fn(d[0],d[1],A)&&(y=1);++v<y;)for(var B=d[v],V=Mn(B),q=-1,st=V.length;++q<st;){var bt=V[q],wt=u[bt];(wt===r||ta(wt,vh[bt])&&!Si.call(u,bt))&&(u[bt]=B[bt])}return u}),j$=Ve(function(u){return u.push(r,wO),qn(sP,r,u)});function U$(u,d){return vI(u,_e(d,3),Ca)}function H$(u,d){return vI(u,_e(d,3),sw)}function G$(u,d){return u==null?u:nw(u,_e(d,3),Mn)}function W$(u,d){return u==null?u:jI(u,_e(d,3),Mn)}function Z$(u,d){return u&&Ca(u,_e(d,3))}function X$(u,d){return u&&sw(u,_e(d,3))}function q$(u){return u==null?[]:Ug(u,Nr(u))}function K$(u){return u==null?[]:Ug(u,Mn(u))}function Nw(u,d,v){var y=u==null?r:Tc(u,d);return y===r?v:y}function Y$(u,d){return u!=null&&kO(u,d,b6)}function Fw(u,d){return u!=null&&kO(u,d,y6)}var J$=gO(function(u,d,v){d!=null&&typeof d.toString!="function"&&(d=Ig.call(d)),u[d]=v},Vw(Rn)),Q$=gO(function(u,d,v){d!=null&&typeof d.toString!="function"&&(d=Ig.call(d)),Si.call(u,d)?u[d].push(v):u[d]=[v]},_e),tX=Ve(zp);function Nr(u){return Pn(u)?BI(u):cw(u)}function Mn(u){return Pn(u)?BI(u,!0):O6(u)}function eX(u,d){var v={};return d=_e(d,3),Ca(u,function(y,A,B){_o(v,d(y,A,B),y)}),v}function iX(u,d){var v={};return d=_e(d,3),Ca(u,function(y,A,B){_o(v,A,d(y,A,B))}),v}var rX=wh(function(u,d,v){Hg(u,d,v)}),sP=wh(function(u,d,v,y){Hg(u,d,v,y)}),nX=yo(function(u,d){var v={};if(u==null)return v;var y=!1;d=ir(d,function(B){return B=kl(B,u),y||(y=B.length>1),B}),ka(u,Cw(u),v),y&&(v=Ss(v,p|m|f,Y6));for(var A=d.length;A--;)fw(v,d[A]);return v});function sX(u,d){return aP(u,nv(_e(d)))}var aX=yo(function(u,d){return u==null?{}:M6(u,d)});function aP(u,d){if(u==null)return{};var v=ir(Cw(u),function(y){return[y]});return d=_e(d),YI(u,v,function(y,A){return d(y,A[0])})}function oX(u,d,v){d=kl(d,u);var y=-1,A=d.length;for(A||(A=1,u=r);++y<A;){var B=u==null?r:u[Aa(d[y])];B===r&&(y=A,B=v),u=xo(B)?B.call(u):B}return u}function lX(u,d,v){return u==null?u:jp(u,d,v)}function cX(u,d,v,y){return y=typeof y=="function"?y:r,u==null?u:jp(u,d,v,y)}var oP=bO(Nr),lP=bO(Mn);function uX(u,d,v){var y=Pe(u),A=y||Sl(u)||kh(u);if(d=_e(d,4),v==null){var B=u&&u.constructor;A?v=y?new B:[]:sr(u)?v=xo(B)?yh(Mg(u)):{}:v={}}return(A?Cs:Ca)(u,function(V,q,st){return d(v,V,q,st)}),v}function hX(u,d){return u==null?!0:fw(u,d)}function dX(u,d,v){return u==null?u:iO(u,d,_w(v))}function pX(u,d,v,y){return y=typeof y=="function"?y:r,u==null?u:iO(u,d,_w(v),y)}function Ah(u){return u==null?[]:K0(u,Nr(u))}function mX(u){return u==null?[]:K0(u,Mn(u))}function fX(u,d,v){return v===r&&(v=d,d=r),v!==r&&(v=Is(v),v=v===v?v:0),d!==r&&(d=Is(d),d=d===d?d:0),Ec(Is(u),d,v)}function gX(u,d,v){return d=Co(d),v===r?(v=d,d=0):v=Co(v),u=Is(u),w6(u,d,v)}function vX(u,d,v){if(v&&typeof v!="boolean"&&fn(u,d,v)&&(d=v=r),v===r&&(typeof d=="boolean"?(v=d,d=r):typeof u=="boolean"&&(v=u,u=r)),u===r&&d===r?(u=0,d=1):(u=Co(u),d===r?(d=u,u=0):d=Co(d)),u>d){var y=u;u=d,d=y}if(v||u%1||d%1){var A=MI();return tn(u+A*(d-u+X9("1e-"+((A+"").length-1))),d)}return dw(u,d)}var _X=xh(function(u,d,v){return d=d.toLowerCase(),u+(v?cP(d):d)});function cP(u){return zw(Ci(u).toLowerCase())}function uP(u){return u=Ci(u),u&&u.replace(ch,o8).replace(F9,"")}function bX(u,d,v){u=Ci(u),d=Yn(d);var y=u.length;v=v===r?y:Ec(De(v),0,y);var A=v;return v-=d.length,v>=0&&u.slice(v,A)==d}function yX(u){return u=Ci(u),u&&xp.test(u)?u.replace(wp,l8):u}function wX(u){return u=Ci(u),u&&lh.test(u)?u.replace(Cp,"\\$&"):u}var xX=xh(function(u,d,v){return u+(v?"-":"")+d.toLowerCase()}),CX=xh(function(u,d,v){return u+(v?" ":"")+d.toLowerCase()}),kX=pO("toLowerCase");function AX(u,d,v){u=Ci(u),d=De(d);var y=d?fh(u):0;if(!d||y>=d)return u;var A=(d-y)/2;return qg(Lg(A),v)+u+qg(Dg(A),v)}function SX(u,d,v){u=Ci(u),d=De(d);var y=d?fh(u):0;return d&&y<d?u+qg(d-y,v):u}function EX(u,d,v){u=Ci(u),d=De(d);var y=d?fh(u):0;return d&&y<d?qg(d-y,v)+u:u}function TX(u,d,v){return v||d==null?d=0:d&&(d=+d),B8(Ci(u).replace(kp,""),d||0)}function IX(u,d,v){return(v?fn(u,d,v):d===r)?d=1:d=De(d),pw(Ci(u),d)}function OX(){var u=arguments,d=Ci(u[0]);return u.length<3?d:d.replace(u[1],u[2])}var PX=xh(function(u,d,v){return u+(v?"_":"")+d.toLowerCase()});function MX(u,d,v){return v&&typeof v!="number"&&fn(u,d,v)&&(d=v=r),v=v===r?ct:v>>>0,v?(u=Ci(u),u&&(typeof d=="string"||d!=null&&!Lw(d))&&(d=Yn(d),!d&&mh(u))?Al(Js(u),0,v):u.split(d,v)):[]}var RX=xh(function(u,d,v){return u+(v?" ":"")+zw(d)});function BX(u,d,v){return u=Ci(u),v=v==null?0:Ec(De(v),0,u.length),d=Yn(d),u.slice(v,v+d.length)==d}function DX(u,d,v){var y=O.templateSettings;v&&fn(u,d,v)&&(d=r),u=Ci(u),d=ov({},d,y,yO);var A=ov({},d.imports,y.imports,yO),B=Nr(A),V=K0(A,B),q,st,bt=0,wt=d.interpolate||ml,At="__p += '",Gt=J0((d.escape||ml).source+"|"+wt.source+"|"+(wt===hg?gg:ml).source+"|"+(d.evaluate||ml).source+"|$","g"),se="//# sourceURL="+(Si.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++H9+"]")+`
`;u.replace(Gt,function(ye,Xe,ni,Qn,gn,ts){return ni||(ni=Qn),At+=u.slice(bt,ts).replace(z0,c8),Xe&&(q=!0,At+=`' +
__e(`+Xe+`) +
'`),gn&&(st=!0,At+=`';
`+gn+`;
__p += '`),ni&&(At+=`' +
((__t = (`+ni+`)) == null ? '' : __t) +
'`),bt=ts+ye.length,ye}),At+=`';
`;var be=Si.call(d,"variable")&&d.variable;if(!be)At=`with (obj) {
`+At+`
}
`;else if(F0.test(be))throw new Ie(o);At=(st?At.replace(O0,""):At).replace(oh,"$1").replace(P0,"$1;"),At="function("+(be||"obj")+`) {
`+(be?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(st?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+At+`return __p
}`;var Ne=dP(function(){return wi(B,se+"return "+At).apply(r,V)});if(Ne.source=At,Dw(Ne))throw Ne;return Ne}function LX(u){return Ci(u).toLowerCase()}function NX(u){return Ci(u).toUpperCase()}function FX(u,d,v){if(u=Ci(u),u&&(v||d===r))return wI(u);if(!u||!(d=Yn(d)))return u;var y=Js(u),A=Js(d),B=xI(y,A),V=CI(y,A)+1;return Al(y,B,V).join("")}function zX(u,d,v){if(u=Ci(u),u&&(v||d===r))return u.slice(0,AI(u)+1);if(!u||!(d=Yn(d)))return u;var y=Js(u),A=CI(y,Js(d))+1;return Al(y,0,A).join("")}function VX(u,d,v){if(u=Ci(u),u&&(v||d===r))return u.replace(kp,"");if(!u||!(d=Yn(d)))return u;var y=Js(u),A=xI(y,Js(d));return Al(y,A).join("")}function jX(u,d){var v=X,y=W;if(sr(d)){var A="separator"in d?d.separator:A;v="length"in d?De(d.length):v,y="omission"in d?Yn(d.omission):y}u=Ci(u);var B=u.length;if(mh(u)){var V=Js(u);B=V.length}if(v>=B)return u;var q=v-fh(y);if(q<1)return y;var st=V?Al(V,0,q).join(""):u.slice(0,q);if(A===r)return st+y;if(V&&(q+=st.length-q),Lw(A)){if(u.slice(q).search(A)){var bt,wt=st;for(A.global||(A=J0(A.source,Ci(Sp.exec(A))+"g")),A.lastIndex=0;bt=A.exec(wt);)var At=bt.index;st=st.slice(0,At===r?q:At)}}else if(u.indexOf(Yn(A),q)!=q){var Gt=st.lastIndexOf(A);Gt>-1&&(st=st.slice(0,Gt))}return st+y}function UX(u){return u=Ci(u),u&&ug.test(u)?u.replace(cg,g8):u}var HX=xh(function(u,d,v){return u+(v?" ":"")+d.toUpperCase()}),zw=pO("toUpperCase");function hP(u,d,v){return u=Ci(u),d=v?r:d,d===r?h8(u)?b8(u):i8(u):u.match(d)||[]}var dP=Ve(function(u,d){try{return qn(u,r,d)}catch(v){return Dw(v)?v:new Ie(v)}}),GX=yo(function(u,d){return Cs(d,function(v){v=Aa(v),_o(u,v,Rw(u[v],u))}),u});function WX(u){var d=u==null?0:u.length,v=_e();return u=d?ir(u,function(y){if(typeof y[1]!="function")throw new ks(a);return[v(y[0]),y[1]]}):[],Ve(function(y){for(var A=-1;++A<d;){var B=u[A];if(qn(B[0],this,y))return qn(B[1],this,y)}})}function ZX(u){return g6(Ss(u,p))}function Vw(u){return function(){return u}}function $X(u,d){return u==null||u!==u?d:u}var XX=fO(),qX=fO(!0);function Rn(u){return u}function jw(u){return WI(typeof u=="function"?u:Ss(u,p))}function KX(u){return $I(Ss(u,p))}function YX(u,d){return XI(u,Ss(d,p))}var JX=Ve(function(u,d){return function(v){return zp(v,u,d)}}),QX=Ve(function(u,d){return function(v){return zp(u,v,d)}});function Uw(u,d,v){var y=Nr(d),A=Ug(d,y);v==null&&!(sr(d)&&(A.length||!y.length))&&(v=d,d=u,u=this,A=Ug(d,Nr(d)));var B=!(sr(v)&&"chain"in v)||!!v.chain,V=xo(u);return Cs(A,function(q){var st=d[q];u[q]=st,V&&(u.prototype[q]=function(){var bt=this.__chain__;if(B||bt){var wt=u(this.__wrapped__),At=wt.__actions__=On(this.__actions__);return At.push({func:st,args:arguments,thisArg:u}),wt.__chain__=bt,wt}return st.apply(u,bl([this.value()],arguments))})}),u}function tq(){return Hr._===this&&(Hr._=A8),this}function Hw(){}function eq(u){return u=De(u),Ve(function(d){return qI(d,u)})}var iq=yw(ir),rq=yw(gI),nq=yw(W0);function pP(u){return Ew(u)?Z0(Aa(u)):R6(u)}function sq(u){return function(d){return u==null?r:Tc(u,d)}}var aq=vO(),oq=vO(!0);function Gw(){return[]}function Ww(){return!1}function lq(){return{}}function cq(){return""}function uq(){return!0}function hq(u,d){if(u=De(u),u<1||u>Z)return[];var v=ct,y=tn(u,ct);d=_e(d),u-=ct;for(var A=q0(y,d);++v<u;)d(v);return A}function dq(u){return Pe(u)?ir(u,Aa):Jn(u)?[u]:On(RO(Ci(u)))}function pq(u){var d=++C8;return Ci(u)+d}var mq=Xg(function(u,d){return u+d},0),fq=ww("ceil"),gq=Xg(function(u,d){return u/d},1),vq=ww("floor");function _q(u){return u&&u.length?jg(u,Rn,aw):r}function bq(u,d){return u&&u.length?jg(u,_e(d,2),aw):r}function yq(u){return bI(u,Rn)}function wq(u,d){return bI(u,_e(d,2))}function xq(u){return u&&u.length?jg(u,Rn,uw):r}function Cq(u,d){return u&&u.length?jg(u,_e(d,2),uw):r}var kq=Xg(function(u,d){return u*d},1),Aq=ww("round"),Sq=Xg(function(u,d){return u-d},0);function Eq(u){return u&&u.length?X0(u,Rn):0}function Tq(u,d){return u&&u.length?X0(u,_e(d,2)):0}return O.after=qZ,O.ary=GO,O.assign=L$,O.assignIn=nP,O.assignInWith=ov,O.assignWith=N$,O.at=F$,O.before=WO,O.bind=Rw,O.bindAll=GX,O.bindKey=ZO,O.castArray=o$,O.chain=jO,O.chunk=gW,O.compact=vW,O.concat=_W,O.cond=WX,O.conforms=ZX,O.constant=Vw,O.countBy=SZ,O.create=z$,O.curry=$O,O.curryRight=XO,O.debounce=qO,O.defaults=V$,O.defaultsDeep=j$,O.defer=KZ,O.delay=YZ,O.difference=bW,O.differenceBy=yW,O.differenceWith=wW,O.drop=xW,O.dropRight=CW,O.dropRightWhile=kW,O.dropWhile=AW,O.fill=SW,O.filter=TZ,O.flatMap=PZ,O.flatMapDeep=MZ,O.flatMapDepth=RZ,O.flatten=NO,O.flattenDeep=EW,O.flattenDepth=TW,O.flip=JZ,O.flow=XX,O.flowRight=qX,O.fromPairs=IW,O.functions=q$,O.functionsIn=K$,O.groupBy=BZ,O.initial=PW,O.intersection=MW,O.intersectionBy=RW,O.intersectionWith=BW,O.invert=J$,O.invertBy=Q$,O.invokeMap=LZ,O.iteratee=jw,O.keyBy=NZ,O.keys=Nr,O.keysIn=Mn,O.map=ev,O.mapKeys=eX,O.mapValues=iX,O.matches=KX,O.matchesProperty=YX,O.memoize=rv,O.merge=rX,O.mergeWith=sP,O.method=JX,O.methodOf=QX,O.mixin=Uw,O.negate=nv,O.nthArg=eq,O.omit=nX,O.omitBy=sX,O.once=QZ,O.orderBy=FZ,O.over=iq,O.overArgs=t$,O.overEvery=rq,O.overSome=nq,O.partial=Bw,O.partialRight=KO,O.partition=zZ,O.pick=aX,O.pickBy=aP,O.property=pP,O.propertyOf=sq,O.pull=FW,O.pullAll=zO,O.pullAllBy=zW,O.pullAllWith=VW,O.pullAt=jW,O.range=aq,O.rangeRight=oq,O.rearg=e$,O.reject=UZ,O.remove=UW,O.rest=i$,O.reverse=Pw,O.sampleSize=GZ,O.set=lX,O.setWith=cX,O.shuffle=WZ,O.slice=HW,O.sortBy=XZ,O.sortedUniq=KW,O.sortedUniqBy=YW,O.split=MX,O.spread=r$,O.tail=JW,O.take=QW,O.takeRight=tZ,O.takeRightWhile=eZ,O.takeWhile=iZ,O.tap=vZ,O.throttle=n$,O.thru=tv,O.toArray=eP,O.toPairs=oP,O.toPairsIn=lP,O.toPath=dq,O.toPlainObject=rP,O.transform=uX,O.unary=s$,O.union=rZ,O.unionBy=nZ,O.unionWith=sZ,O.uniq=aZ,O.uniqBy=oZ,O.uniqWith=lZ,O.unset=hX,O.unzip=Mw,O.unzipWith=VO,O.update=dX,O.updateWith=pX,O.values=Ah,O.valuesIn=mX,O.without=cZ,O.words=hP,O.wrap=a$,O.xor=uZ,O.xorBy=hZ,O.xorWith=dZ,O.zip=pZ,O.zipObject=mZ,O.zipObjectDeep=fZ,O.zipWith=gZ,O.entries=oP,O.entriesIn=lP,O.extend=nP,O.extendWith=ov,Uw(O,O),O.add=mq,O.attempt=dP,O.camelCase=_X,O.capitalize=cP,O.ceil=fq,O.clamp=fX,O.clone=l$,O.cloneDeep=u$,O.cloneDeepWith=h$,O.cloneWith=c$,O.conformsTo=d$,O.deburr=uP,O.defaultTo=$X,O.divide=gq,O.endsWith=bX,O.eq=ta,O.escape=yX,O.escapeRegExp=wX,O.every=EZ,O.find=IZ,O.findIndex=DO,O.findKey=U$,O.findLast=OZ,O.findLastIndex=LO,O.findLastKey=H$,O.floor=vq,O.forEach=UO,O.forEachRight=HO,O.forIn=G$,O.forInRight=W$,O.forOwn=Z$,O.forOwnRight=X$,O.get=Nw,O.gt=p$,O.gte=m$,O.has=Y$,O.hasIn=Fw,O.head=FO,O.identity=Rn,O.includes=DZ,O.indexOf=OW,O.inRange=gX,O.invoke=tX,O.isArguments=Pc,O.isArray=Pe,O.isArrayBuffer=f$,O.isArrayLike=Pn,O.isArrayLikeObject=vr,O.isBoolean=g$,O.isBuffer=Sl,O.isDate=v$,O.isElement=_$,O.isEmpty=b$,O.isEqual=y$,O.isEqualWith=w$,O.isError=Dw,O.isFinite=x$,O.isFunction=xo,O.isInteger=YO,O.isLength=sv,O.isMap=JO,O.isMatch=C$,O.isMatchWith=k$,O.isNaN=A$,O.isNative=S$,O.isNil=T$,O.isNull=E$,O.isNumber=QO,O.isObject=sr,O.isObjectLike=dr,O.isPlainObject=Wp,O.isRegExp=Lw,O.isSafeInteger=I$,O.isSet=tP,O.isString=av,O.isSymbol=Jn,O.isTypedArray=kh,O.isUndefined=O$,O.isWeakMap=P$,O.isWeakSet=M$,O.join=DW,O.kebabCase=xX,O.last=Ts,O.lastIndexOf=LW,O.lowerCase=CX,O.lowerFirst=kX,O.lt=R$,O.lte=B$,O.max=_q,O.maxBy=bq,O.mean=yq,O.meanBy=wq,O.min=xq,O.minBy=Cq,O.stubArray=Gw,O.stubFalse=Ww,O.stubObject=lq,O.stubString=cq,O.stubTrue=uq,O.multiply=kq,O.nth=NW,O.noConflict=tq,O.noop=Hw,O.now=iv,O.pad=AX,O.padEnd=SX,O.padStart=EX,O.parseInt=TX,O.random=vX,O.reduce=VZ,O.reduceRight=jZ,O.repeat=IX,O.replace=OX,O.result=oX,O.round=Aq,O.runInContext=rt,O.sample=HZ,O.size=ZZ,O.snakeCase=PX,O.some=$Z,O.sortedIndex=GW,O.sortedIndexBy=WW,O.sortedIndexOf=ZW,O.sortedLastIndex=$W,O.sortedLastIndexBy=XW,O.sortedLastIndexOf=qW,O.startCase=RX,O.startsWith=BX,O.subtract=Sq,O.sum=Eq,O.sumBy=Tq,O.template=DX,O.times=hq,O.toFinite=Co,O.toInteger=De,O.toLength=iP,O.toLower=LX,O.toNumber=Is,O.toSafeInteger=D$,O.toString=Ci,O.toUpper=NX,O.trim=FX,O.trimEnd=zX,O.trimStart=VX,O.truncate=jX,O.unescape=UX,O.uniqueId=pq,O.upperCase=HX,O.upperFirst=zw,O.each=UO,O.eachRight=HO,O.first=FO,Uw(O,function(){var u={};return Ca(O,function(d,v){Si.call(O.prototype,v)||(u[v]=d)}),u}(),{chain:!1}),O.VERSION=i,Cs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){O[u].placeholder=O}),Cs(["drop","take"],function(u,d){ei.prototype[u]=function(v){v=v===r?1:Er(De(v),0);var y=this.__filtered__&&!d?new ei(this):this.clone();return y.__filtered__?y.__takeCount__=tn(v,y.__takeCount__):y.__views__.push({size:tn(v,ct),type:u+(y.__dir__<0?"Right":"")}),y},ei.prototype[u+"Right"]=function(v){return this.reverse()[u](v).reverse()}}),Cs(["filter","map","takeWhile"],function(u,d){var v=d+1,y=v==Y||v==ot;ei.prototype[u]=function(A){var B=this.clone();return B.__iteratees__.push({iteratee:_e(A,3),type:v}),B.__filtered__=B.__filtered__||y,B}}),Cs(["head","last"],function(u,d){var v="take"+(d?"Right":"");ei.prototype[u]=function(){return this[v](1).value()[0]}}),Cs(["initial","tail"],function(u,d){var v="drop"+(d?"":"Right");ei.prototype[u]=function(){return this.__filtered__?new ei(this):this[v](1)}}),ei.prototype.compact=function(){return this.filter(Rn)},ei.prototype.find=function(u){return this.filter(u).head()},ei.prototype.findLast=function(u){return this.reverse().find(u)},ei.prototype.invokeMap=Ve(function(u,d){return typeof u=="function"?new ei(this):this.map(function(v){return zp(v,u,d)})}),ei.prototype.reject=function(u){return this.filter(nv(_e(u)))},ei.prototype.slice=function(u,d){u=De(u);var v=this;return v.__filtered__&&(u>0||d<0)?new ei(v):(u<0?v=v.takeRight(-u):u&&(v=v.drop(u)),d!==r&&(d=De(d),v=d<0?v.dropRight(-d):v.take(d-u)),v)},ei.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},ei.prototype.toArray=function(){return this.take(ct)},Ca(ei.prototype,function(u,d){var v=/^(?:filter|find|map|reject)|While$/.test(d),y=/^(?:head|last)$/.test(d),A=O[y?"take"+(d=="last"?"Right":""):d],B=y||/^find/.test(d);A&&(O.prototype[d]=function(){var V=this.__wrapped__,q=y?[1]:arguments,st=V instanceof ei,bt=q[0],wt=st||Pe(V),At=function(Xe){var ni=A.apply(O,bl([Xe],q));return y&&Gt?ni[0]:ni};wt&&v&&typeof bt=="function"&&bt.length!=1&&(st=wt=!1);var Gt=this.__chain__,se=!!this.__actions__.length,be=B&&!Gt,Ne=st&&!se;if(!B&&wt){V=Ne?V:new ei(this);var ye=u.apply(V,q);return ye.__actions__.push({func:tv,args:[At],thisArg:r}),new As(ye,Gt)}return be&&Ne?u.apply(this,q):(ye=this.thru(At),be?y?ye.value()[0]:ye.value():ye)})}),Cs(["pop","push","shift","sort","splice","unshift"],function(u){var d=Sg[u],v=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",y=/^(?:pop|shift)$/.test(u);O.prototype[u]=function(){var A=arguments;if(y&&!this.__chain__){var B=this.value();return d.apply(Pe(B)?B:[],A)}return this[v](function(V){return d.apply(Pe(V)?V:[],A)})}}),Ca(ei.prototype,function(u,d){var v=O[d];if(v){var y=v.name+"";Si.call(bh,y)||(bh[y]=[]),bh[y].push({name:d,func:v})}}),bh[$g(r,S).name]=[{name:"wrapper",func:r}],ei.prototype.clone=j8,ei.prototype.reverse=U8,ei.prototype.value=H8,O.prototype.at=_Z,O.prototype.chain=bZ,O.prototype.commit=yZ,O.prototype.next=wZ,O.prototype.plant=CZ,O.prototype.reverse=kZ,O.prototype.toJSON=O.prototype.valueOf=O.prototype.value=AZ,O.prototype.first=O.prototype.head,Mp&&(O.prototype[Mp]=xZ),O},gh=y8();Cc?((Cc.exports=gh)._=gh,j0._=gh):Hr._=gh}).call(t)}),pK=oc((t,e)=>{"use strict";(function(r,i){typeof t<"u"?i():(i(),r.FileSaver={})})(t,function(){"use strict";function r(c,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function i(c,h,p){var m=new XMLHttpRequest;m.open("GET",c),m.responseType="blob",m.onload=function(){l(m.response,h,p)},m.onerror=function(){console.error("could not download file")},m.send()}function n(c){var h=new XMLHttpRequest;h.open("HEAD",c,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(h)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(c,h,p){var m=a.URL||a.webkitURL,f=document.createElement("a");h=h||c.name||"download",f.download=h,f.rel="noopener",typeof c=="string"?(f.href=c,f.origin===location.origin?s(f):n(f.href)?i(c,h,p):s(f,f.target="_blank")):(f.href=m.createObjectURL(c),setTimeout(function(){m.revokeObjectURL(f.href)},4e4),setTimeout(function(){s(f)},0))}:"msSaveOrOpenBlob"in navigator?function(c,h,p){if(h=h||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(r(c,p),h);else if(n(c))i(c,h,p);else{var m=document.createElement("a");m.href=c,m.target="_blank",setTimeout(function(){s(m)})}}:function(c,h,p,m){if(m=m||open("","_blank"),m&&(m.document.title=m.document.body.innerText="downloading..."),typeof c=="string")return i(c,h,p);var f=c.type==="application/octet-stream",g=/constructor/i.test(a.HTMLElement)||a.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||f&&g||o)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var b=w.result;b=_?b:b.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=b:location=b,m=null},w.readAsDataURL(c)}else{var S=a.URL||a.webkitURL,C=S.createObjectURL(c);m?m.location=C:location.href=C,m=null,setTimeout(function(){S.revokeObjectURL(C)},4e4)}});a.saveAs=l.saveAs=l,typeof e<"u"&&(e.exports=l)})});function hN(t,e){return Object.is(t,e)}var Or=null,Sm=!1,u_=1,Fs=Symbol("SIGNAL");function He(t){let e=Or;return Or=t,e}function mK(){return Or}function fK(){return Sm}var Sf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function nA(t){if(Sm)throw new Error("");if(Or===null)return;Or.consumerOnSignalRead(t);let e=Or.nextProducerIndex++;if(_y(Or),e<Or.producerNode.length&&Or.producerNode[e]!==t&&jm(Or)){let r=Or.producerNode[e];vy(r,Or.producerIndexOfThis[e])}Or.producerNode[e]!==t&&(Or.producerNode[e]=t,Or.producerIndexOfThis[e]=jm(Or)?gN(t,Or,e):0),Or.producerLastReadVersion[e]=t.version}function gK(){u_++}function dN(t){if(!(jm(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===u_)){if(!t.producerMustRecompute(t)&&!aA(t)){t.dirty=!1,t.lastCleanEpoch=u_;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=u_}}function pN(t){if(t.liveConsumerNode===void 0)return;let e=Sm;Sm=!0;try{for(let r of t.liveConsumerNode)r.dirty||fN(r)}finally{Sm=e}}function mN(){return Or?.consumerAllowSignalWrites!==!1}function fN(t){t.dirty=!0,pN(t),t.consumerMarkedDirty?.(t)}function H_(t){return t&&(t.nextProducerIndex=0),He(t)}function sA(t,e){if(He(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(jm(t))for(let r=t.nextProducerIndex;r<t.producerNode.length;r++)vy(t.producerNode[r],t.producerIndexOfThis[r]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function aA(t){_y(t);for(let e=0;e<t.producerNode.length;e++){let r=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==r.version||(dN(r),i!==r.version))return!0}return!1}function oA(t){if(_y(t),jm(t))for(let e=0;e<t.producerNode.length;e++)vy(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function gN(t,e,r){if(vN(t),t.liveConsumerNode.length===0&&_N(t))for(let i=0;i<t.producerNode.length;i++)t.producerIndexOfThis[i]=gN(t.producerNode[i],t,i);return t.liveConsumerIndexOfThis.push(r),t.liveConsumerNode.push(e)-1}function vy(t,e){if(vN(t),t.liveConsumerNode.length===1&&_N(t))for(let i=0;i<t.producerNode.length;i++)vy(t.producerNode[i],t.producerIndexOfThis[i]);let r=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[r],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[r],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],n=t.liveConsumerNode[e];_y(n),n.producerIndexOfThis[i]=e}}function jm(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function _y(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function vN(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function _N(t){return t.producerNode!==void 0}function bN(t){let e=Object.create(vK);e.computation=t;let r=()=>{if(dN(e),nA(e),e.value===h_)throw e.error;return e.value};return r[Fs]=e,r}var ax=Symbol("UNSET"),ox=Symbol("COMPUTING"),h_=Symbol("ERRORED"),vK=Q(x({},Sf),{value:ax,dirty:!0,error:null,equal:hN,producerMustRecompute(t){return t.value===ax||t.value===ox},producerRecomputeValue(t){if(t.value===ox)throw new Error("Detected cycle in computations.");let e=t.value;t.value=ox;let r=H_(t),i;try{i=t.computation()}catch(n){i=h_,t.error=n}finally{sA(t,r)}if(e!==ax&&e!==h_&&i!==h_&&t.equal(e,i)){t.value=e;return}t.value=i,t.version++}});function _K(){throw new Error}var yN=_K;function wN(){yN()}function bK(t){yN=t}var yK=null;function wK(t){let e=Object.create(xN);e.value=t;let r=()=>(nA(e),e.value);return r[Fs]=e,r}function lA(t,e){mN()||wN(),t.equal(t.value,e)||(t.value=e,CK(t))}function xK(t,e){mN()||wN(),lA(t,e(t.value))}var xN=Q(x({},Sf),{equal:hN,value:void 0});function CK(t){t.version++,gK(),pN(t),yK?.()}function kK(t,e,r){let i=Object.create(AK);r&&(i.consumerAllowSignalWrites=!0),i.fn=t,i.schedule=e;let n=l=>{i.cleanupFn=l};function s(l){return l.fn===null&&l.schedule===null}function a(l){s(l)||(oA(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=K1)}let o=()=>{if(i.fn===null)return;if(fK())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!aA(i))return;i.hasRun=!0;let l=H_(i);try{i.cleanupFn(),i.cleanupFn=K1,i.fn(n)}finally{sA(i,l)}};return i.ref={notify:()=>fN(i),run:o,cleanup:()=>i.cleanupFn(),destroy:()=>a(i),[Fs]:i},i.ref}var K1=()=>{},AK=Q(x({},Sf),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:K1});function Je(t){return typeof t=="function"}function cA(t){let e=t(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var lx=cA(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function G_(t,e){if(t){let r=t.indexOf(e);0<=r&&t.splice(r,1)}}var vi=class Y1{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(let s of r)s.remove(this);else r.remove(this);let{initialTeardown:i}=this;if(Je(i))try{i()}catch(s){e=s instanceof lx?s.errors:[s]}let{_finalizers:n}=this;if(n){this._finalizers=null;for(let s of n)try{RP(s)}catch(a){e=e??[],a instanceof lx?e=[...e,...a.errors]:e.push(a)}}if(e)throw new lx(e)}}add(e){var r;if(e&&e!==this)if(this.closed)RP(e);else{if(e instanceof Y1){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}}_hasParent(e){let{_parentage:r}=this;return r===e||Array.isArray(r)&&r.includes(e)}_addParent(e){let{_parentage:r}=this;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e}_removeParent(e){let{_parentage:r}=this;r===e?this._parentage=null:Array.isArray(r)&&G_(r,e)}remove(e){let{_finalizers:r}=this;r&&G_(r,e),e instanceof Y1&&e._removeParent(this)}};vi.EMPTY=(()=>{let t=new vi;return t.closed=!0,t})();var uA=vi.EMPTY;function CN(t){return t instanceof vi||t&&"closed"in t&&Je(t.remove)&&Je(t.add)&&Je(t.unsubscribe)}function RP(t){Je(t)?t():t.unsubscribe()}var el={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},W_={setTimeout(t,e,...r){let{delegate:i}=W_;return i?.setTimeout?i.setTimeout(t,e,...r):setTimeout(t,e,...r)},clearTimeout(t){let{delegate:e}=W_;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function kN(t){W_.setTimeout(()=>{let{onUnhandledError:e}=el;if(e)e(t);else throw t})}function hd(){}var SK=hA("C",void 0,void 0);function EK(t){return hA("E",void 0,t)}function TK(t){return hA("N",t,void 0)}function hA(t,e,r){return{kind:t,value:e,error:r}}var cu=null;function d_(t){if(el.useDeprecatedSynchronousErrorHandling){let e=!cu;if(e&&(cu={errorThrown:!1,error:null}),t(),e){let{errorThrown:r,error:i}=cu;if(cu=null,r)throw i}}else t()}function IK(t){el.useDeprecatedSynchronousErrorHandling&&cu&&(cu.errorThrown=!0,cu.error=t)}var dA=class extends vi{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,CN(t)&&t.add(this)):this.destination=RK}static create(t,e,r){return new dd(t,e,r)}next(t){this.isStopped?ux(TK(t),this):this._next(t)}error(t){this.isStopped?ux(EK(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ux(SK,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},OK=Function.prototype.bind;function cx(t,e){return OK.call(t,e)}var PK=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){pv(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){pv(r)}else pv(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){pv(e)}}},dd=class extends dA{constructor(t,e,r){super();let i;if(Je(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let n;this&&el.useDeprecatedNextContext?(n=Object.create(t),n.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&cx(t.next,n),error:t.error&&cx(t.error,n),complete:t.complete&&cx(t.complete,n)}):i=t}this.destination=new PK(i)}};function pv(t){el.useDeprecatedSynchronousErrorHandling?IK(t):kN(t)}function MK(t){throw t}function ux(t,e){let{onStoppedNotification:r}=el;r&&W_.setTimeout(()=>r(t,e))}var RK={closed:!0,next:hd,error:MK,complete:hd},pA=typeof Symbol=="function"&&Symbol.observable||"@@observable";function eo(t){return t}function BK(t){return t.length===0?eo:t.length===1?t[0]:function(e){return t.reduce((r,i)=>i(r),e)}}var Ht=(()=>{class t{constructor(r){r&&(this._subscribe=r)}lift(r){let i=new t;return i.source=this,i.operator=r,i}subscribe(r,i,n){let s=LK(r)?r:new dd(r,i,n);return d_(()=>{let{operator:a,source:o}=this;s.add(a?a.call(s,o):o?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(r){try{return this._subscribe(r)}catch(i){r.error(i)}}forEach(r,i){return i=BP(i),new i((n,s)=>{let a=new dd({next:o=>{try{r(o)}catch(l){s(l),a.unsubscribe()}},error:s,complete:n});this.subscribe(a)})}_subscribe(r){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(r)}[pA](){return this}pipe(...r){return BK(r)(this)}toPromise(r){return r=BP(r),new r((i,n)=>{let s;this.subscribe(a=>s=a,a=>n(a),()=>i(s))})}}return t.create=e=>new t(e),t})();function BP(t){var e;return(e=t??el.Promise)!==null&&e!==void 0?e:Promise}function DK(t){return t&&Je(t.next)&&Je(t.error)&&Je(t.complete)}function LK(t){return t&&t instanceof dA||DK(t)&&CN(t)}function AN(t){return Je(t?.lift)}function Pi(t){return e=>{if(AN(e))return e.lift(function(r){try{return t(r,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function si(t,e,r,i,n){return new NK(t,e,r,i,n)}var NK=class extends dA{constructor(t,e,r,i,n,s){super(t),this.onFinalize=n,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(o){t.error(o)}}:super._next,this._error=i?function(a){try{i(a)}catch(o){t.error(o)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function SN(){return Pi((t,e)=>{let r=null;t._refCount++;let i=si(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){r=null;return}let n=t._connection,s=r;r=null,n&&(!s||n===s)&&n.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(r=t.connect())})}var FK=class extends Ht{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,AN(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new vi;let e=this.getSubject();t.add(this.source.subscribe(si(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=vi.EMPTY)}return t}refCount(){return SN()(this)}},Em={schedule(t){let e=requestAnimationFrame,r=cancelAnimationFrame,{delegate:i}=Em;i&&(e=i.requestAnimationFrame,r=i.cancelAnimationFrame);let n=e(s=>{r=void 0,t(s)});return new vi(()=>r?.(n))},requestAnimationFrame(...t){let{delegate:e}=Em;return(e?.requestAnimationFrame||requestAnimationFrame)(...t)},cancelAnimationFrame(...t){let{delegate:e}=Em;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...t)},delegate:void 0},zK=cA(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}),Bt=(()=>{class t extends Ht{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){let i=new DP(this,this);return i.operator=r,i}_throwIfClosed(){if(this.closed)throw new zK}next(r){d_(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(r)}})}error(r){d_(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;let{observers:i}=this;for(;i.length;)i.shift().error(r)}})}complete(){d_(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){let{hasError:i,isStopped:n,observers:s}=this;return i||n?uA:(this.currentObservers=null,s.push(r),new vi(()=>{this.currentObservers=null,G_(s,r)}))}_checkFinalizedStatuses(r){let{hasError:i,thrownError:n,isStopped:s}=this;i?r.error(n):s&&r.complete()}asObservable(){let r=new Ht;return r.source=this,r}}return t.create=(e,r)=>new DP(e,r),t})(),DP=class extends Bt{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:uA}},cc=class extends Bt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}},mA={now(){return(mA.delegate||Date).now()},delegate:void 0},Vo=class extends Bt{constructor(t=1/0,e=1/0,r=mA){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){let{isStopped:e,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:n,_windowTime:s}=this;e||(r.push(t),!i&&r.push(n.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(t),{_infiniteTimeWindow:r,_buffer:i}=this,n=i.slice();for(let s=0;s<n.length&&!t.closed;s+=r?1:2)t.next(n[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){let{_bufferSize:t,_timestampProvider:e,_buffer:r,_infiniteTimeWindow:i}=this,n=(i?1:2)*t;if(t<1/0&&n<r.length&&r.splice(0,r.length-n),!i){let s=e.now(),a=0;for(let o=1;o<r.length&&r[o]<=s;o+=2)a=o;a&&r.splice(0,a+1)}}},VK=class extends vi{constructor(t,e){super()}schedule(t,e=0){return this}},Z_={setInterval(t,e,...r){let{delegate:i}=Z_;return i?.setInterval?i.setInterval(t,e,...r):setInterval(t,e,...r)},clearInterval(t){let{delegate:e}=Z_;return(e?.clearInterval||clearInterval)(t)},delegate:void 0},fA=class extends VK{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var r;if(this.closed)return this;this.state=t;let i=this.id,n=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(n,i,e)),this.pending=!0,this.delay=e,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(n,this.id,e),this}requestAsyncId(t,e,r=0){return Z_.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return e;e!=null&&Z_.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(t,e);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r=!1,i;try{this.work(t)}catch(n){r=!0,i=n||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:r}=e;this.work=this.state=this.scheduler=null,this.pending=!1,G_(r,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}},jK=1,hx,J1={};function LP(t){return t in J1?(delete J1[t],!0):!1}var UK={setImmediate(t){let e=jK++;return J1[e]=!0,hx||(hx=Promise.resolve()),hx.then(()=>LP(e)&&t()),e},clearImmediate(t){LP(t)}},{setImmediate:HK,clearImmediate:GK}=UK,$_={setImmediate(...t){let{delegate:e}=$_;return(e?.setImmediate||HK)(...t)},clearImmediate(t){let{delegate:e}=$_;return(e?.clearImmediate||GK)(t)},delegate:void 0},WK=class extends fA{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return r!==null&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=$_.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(t,e,r);let{actions:n}=t;e!=null&&((i=n[n.length-1])===null||i===void 0?void 0:i.id)!==e&&($_.clearImmediate(e),t._scheduled=void 0)}},Q1=class EN{constructor(e,r=EN.now){this.schedulerActionCtor=e,this.now=r}schedule(e,r=0,i){return new this.schedulerActionCtor(this,e).schedule(i,r)}};Q1.now=mA.now;var gA=class extends Q1{constructor(t,e=Q1.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let r;this._active=!0;do if(r=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},ZK=class extends gA{flush(t){this._active=!0;let e=this._scheduled;this._scheduled=void 0;let{actions:r}=this,i;t=t||r.shift();do if(i=t.execute(t.state,t.delay))break;while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw i}}},NP=new ZK(WK),jd=new gA(fA),$K=jd,XK=class extends fA{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return r!==null&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t._scheduled||(t._scheduled=Em.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(t,e,r);let{actions:n}=t;e!=null&&((i=n[n.length-1])===null||i===void 0?void 0:i.id)!==e&&(Em.cancelAnimationFrame(e),t._scheduled=void 0)}},qK=class extends gA{flush(t){this._active=!0;let e=this._scheduled;this._scheduled=void 0;let{actions:r}=this,i;t=t||r.shift();do if(i=t.execute(t.state,t.delay))break;while((t=r[0])&&t.id===e&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===e&&r.shift();)t.unsubscribe();throw i}}},KK=new qK(XK),io=new Ht(t=>t.complete());function YK(t){return t?JK(t):io}function JK(t){return new Ht(e=>t.schedule(()=>e.complete()))}function TN(t){return t&&Je(t.schedule)}function vA(t){return t[t.length-1]}function _A(t){return Je(vA(t))?t.pop():void 0}function Ef(t){return TN(vA(t))?t.pop():void 0}function QK(t,e){return typeof vA(t)=="number"?t.pop():e}function ft(t,e,r,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,i);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(n<3?a(s):n>3?a(e,r,s):a(e,r))||s);return n>3&&s&&Object.defineProperty(e,r,s),s}function Pr(t,e){return function(r,i){e(r,i,t)}}function j(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function tY(t,e,r,i){function n(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(h){try{c(i.next(h))}catch(p){a(p)}}function l(h){try{c(i.throw(h))}catch(p){a(p)}}function c(h){h.done?s(h.value):n(h.value).then(o,l)}c((i=i.apply(t,e||[])).next())})}function FP(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nd(t){return this instanceof nd?(this.v=t,this):new nd(t)}function eY(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(t,e||[]),n,s=[];return n={},o("next"),o("throw"),o("return",a),n[Symbol.asyncIterator]=function(){return this},n;function a(f){return function(g){return Promise.resolve(g).then(f,p)}}function o(f,g){i[f]&&(n[f]=function(_){return new Promise(function(w,S){s.push([f,_,w,S])>1||l(f,_)})},g&&(n[f]=g(n[f])))}function l(f,g){try{c(i[f](g))}catch(_){m(s[0][3],_)}}function c(f){f.value instanceof nd?Promise.resolve(f.value.v).then(h,p):m(s[0][2],f)}function h(f){l("next",f)}function p(f){l("throw",f)}function m(f,g){f(g),s.shift(),s.length&&l(s[0][0],s[0][1])}}function iY(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof FP=="function"?FP(t):t[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(s){r[s]=t[s]&&function(a){return new Promise(function(o,l){a=t[s](a),n(o,l,a.done,a.value)})}}function n(s,a,o,l){Promise.resolve(l).then(function(c){s({value:c,done:o})},a)}}var bA=t=>t&&typeof t.length=="number"&&typeof t!="function";function IN(t){return Je(t?.then)}function ON(t){return Je(t[pA])}function PN(t){return Symbol.asyncIterator&&Je(t?.[Symbol.asyncIterator])}function MN(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function rY(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var RN=rY();function BN(t){return Je(t?.[RN])}function DN(t){return eY(this,arguments,function*(){let e=t.getReader();try{for(;;){let{value:r,done:i}=yield nd(e.read());if(i)return yield nd(void 0);yield yield nd(r)}}finally{e.releaseLock()}})}function LN(t){return Je(t?.getReader)}function cr(t){if(t instanceof Ht)return t;if(t!=null){if(ON(t))return nY(t);if(bA(t))return sY(t);if(IN(t))return Tf(t);if(PN(t))return NN(t);if(BN(t))return aY(t);if(LN(t))return oY(t)}throw MN(t)}function nY(t){return new Ht(e=>{let r=t[pA]();if(Je(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function sY(t){return new Ht(e=>{for(let r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()})}function Tf(t){return new Ht(e=>{t.then(r=>{e.closed||(e.next(r),e.complete())},r=>e.error(r)).then(null,kN)})}function aY(t){return new Ht(e=>{for(let r of t)if(e.next(r),e.closed)return;e.complete()})}function NN(t){return new Ht(e=>{lY(t,e).catch(r=>e.error(r))})}function oY(t){return NN(DN(t))}function lY(t,e){var r,i,n,s;return tY(this,void 0,void 0,function*(){try{for(r=iY(t);i=yield r.next(),!i.done;){let a=i.value;if(e.next(a),e.closed)return}}catch(a){n={error:a}}finally{try{i&&!i.done&&(s=r.return)&&(yield s.call(r))}finally{if(n)throw n.error}}e.complete()})}function Lo(t,e,r,i=0,n=!1){let s=e.schedule(function(){r(),n?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!n)return s}function FN(t,e=0){return Pi((r,i)=>{r.subscribe(si(i,n=>Lo(i,t,()=>i.next(n),e),()=>Lo(i,t,()=>i.complete(),e),n=>Lo(i,t,()=>i.error(n),e)))})}function zN(t,e=0){return Pi((r,i)=>{i.add(t.schedule(()=>r.subscribe(i),e))})}function cY(t,e){return cr(t).pipe(zN(e),FN(e))}function uY(t,e){return cr(t).pipe(zN(e),FN(e))}function hY(t,e){return new Ht(r=>{let i=0;return e.schedule(function(){i===t.length?r.complete():(r.next(t[i++]),r.closed||this.schedule())})})}function dY(t,e){return new Ht(r=>{let i;return Lo(r,e,()=>{i=t[RN](),Lo(r,e,()=>{let n,s;try{({value:n,done:s}=i.next())}catch(a){r.error(a);return}s?r.complete():r.next(n)},0,!0)}),()=>Je(i?.return)&&i.return()})}function VN(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ht(r=>{Lo(r,e,()=>{let i=t[Symbol.asyncIterator]();Lo(r,e,()=>{i.next().then(n=>{n.done?r.complete():r.next(n.value)})},0,!0)})})}function pY(t,e){return VN(DN(t),e)}function mY(t,e){if(t!=null){if(ON(t))return cY(t,e);if(bA(t))return hY(t,e);if(IN(t))return uY(t,e);if(PN(t))return VN(t,e);if(BN(t))return dY(t,e);if(LN(t))return pY(t,e)}throw MN(t)}function zs(t,e){return e?mY(t,e):cr(t)}function Ge(...t){let e=Ef(t);return zs(t,e)}function If(t,e){let r=Je(t)?t:()=>t,i=n=>n.error(r());return new Ht(e?n=>e.schedule(i,0,n):i)}function jo(t){return!!t&&(t instanceof Ht||Je(t.lift)&&Je(t.subscribe))}var yA=cA(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function fY(t,e){let r=typeof e=="object";return new Promise((i,n)=>{let s=new dd({next:a=>{i(a),s.unsubscribe()},error:n,complete:()=>{r?i(e.defaultValue):n(new yA)}});t.subscribe(s)})}function gY(t){return t instanceof Date&&!isNaN(t)}function kt(t,e){return Pi((r,i)=>{let n=0;r.subscribe(si(i,s=>{i.next(t.call(e,s,n++))}))})}var{isArray:vY}=Array;function _Y(t,e){return vY(e)?t(...e):t(e)}function by(t){return kt(e=>_Y(t,e))}var{isArray:bY}=Array,{getPrototypeOf:yY,prototype:wY,keys:xY}=Object;function jN(t){if(t.length===1){let e=t[0];if(bY(e))return{args:e,keys:null};if(CY(e)){let r=xY(e);return{args:r.map(i=>e[i]),keys:r}}}return{args:t,keys:null}}function CY(t){return t&&typeof t=="object"&&yY(t)===wY}function UN(t,e){return t.reduce((r,i,n)=>(r[i]=e[n],r),{})}function Rr(...t){let e=Ef(t),r=_A(t),{args:i,keys:n}=jN(t);if(i.length===0)return zs([],e);let s=new Ht(kY(i,e,n?a=>UN(n,a):eo));return r?s.pipe(by(r)):s}function kY(t,e,r=eo){return i=>{zP(e,()=>{let{length:n}=t,s=new Array(n),a=n,o=n;for(let l=0;l<n;l++)zP(e,()=>{let c=zs(t[l],e),h=!1;c.subscribe(si(i,p=>{s[l]=p,h||(h=!0,o--),o||i.next(r(s.slice()))},()=>{--a||i.complete()}))},i)},i)}}function zP(t,e,r){t?Lo(r,t,e):e()}function AY(t,e,r,i,n,s,a,o){let l=[],c=0,h=0,p=!1,m=()=>{p&&!l.length&&!c&&e.complete()},f=_=>c<i?g(_):l.push(_),g=_=>{s&&e.next(_),c++;let w=!1;cr(r(_,h++)).subscribe(si(e,S=>{n?.(S),s?f(S):e.next(S)},()=>{w=!0},void 0,()=>{if(w)try{for(c--;l.length&&c<i;){let S=l.shift();a?Lo(e,a,()=>g(S)):g(S)}m()}catch(S){e.error(S)}}))};return t.subscribe(si(e,f,()=>{p=!0,m()})),()=>{o?.()}}function Uo(t,e,r=1/0){return Je(e)?Uo((i,n)=>kt((s,a)=>e(i,s,n,a))(cr(t(i,n))),r):(typeof e=="number"&&(r=e),Pi((i,n)=>AY(i,n,t,r)))}function wA(t=1/0){return Uo(eo,t)}function HN(){return wA(1)}function Um(...t){return HN()(zs(t,Ef(t)))}function Ud(t){return new Ht(e=>{cr(t()).subscribe(e)})}function Of(...t){let e=_A(t),{args:r,keys:i}=jN(t),n=new Ht(s=>{let{length:a}=r;if(!a){s.complete();return}let o=new Array(a),l=a,c=a;for(let h=0;h<a;h++){let p=!1;cr(r[h]).subscribe(si(s,m=>{p||(p=!0,c--),o[h]=m},()=>l--,void 0,()=>{(!l||!p)&&(c||s.next(i?UN(i,o):o),s.complete())}))}});return e?n.pipe(by(e)):n}var SY=["addListener","removeListener"],EY=["addEventListener","removeEventListener"],TY=["on","off"];function mr(t,e,r,i){if(Je(r)&&(i=r,r=void 0),i)return mr(t,e,r).pipe(by(i));let[n,s]=PY(t)?EY.map(a=>o=>t[a](e,o,r)):IY(t)?SY.map(VP(t,e)):OY(t)?TY.map(VP(t,e)):[];if(!n&&bA(t))return Uo(a=>mr(a,e,r))(cr(t));if(!n)throw new TypeError("Invalid event target");return new Ht(a=>{let o=(...l)=>a.next(1<l.length?l:l[0]);return n(o),()=>s(o)})}function VP(t,e){return r=>i=>t[r](e,i)}function IY(t){return Je(t.addListener)&&Je(t.removeListener)}function OY(t){return Je(t.on)&&Je(t.off)}function PY(t){return Je(t.addEventListener)&&Je(t.removeEventListener)}function GN(t,e,r){return r?GN(t,e).pipe(by(r)):new Ht(i=>{let n=(...a)=>i.next(a.length===1?a[0]:a),s=t(n);return Je(e)?()=>e(n,s):void 0})}function Hd(t=0,e,r=$K){let i=-1;return e!=null&&(TN(e)?r=e:i=e),new Ht(n=>{let s=gY(t)?+t-r.now():t;s<0&&(s=0);let a=0;return r.schedule(function(){n.closed||(n.next(a++),0<=i?this.schedule(void 0,i):n.complete())},s)})}function WN(t=0,e=jd){return t<0&&(t=0),Hd(t,t,e)}function lr(...t){let e=Ef(t),r=QK(t,1/0),i=t;return i.length?i.length===1?cr(i[0]):wA(r)(zs(i,e)):io}function Ye(t,e){return Pi((r,i)=>{let n=0;r.subscribe(si(i,s=>t.call(e,s,n++)&&i.next(s)))})}function MY(t){return Pi((e,r)=>{let i=!1,n=null,s=null,a=!1,o=()=>{if(s?.unsubscribe(),s=null,i){i=!1;let c=n;n=null,r.next(c)}a&&r.complete()},l=()=>{s=null,a&&r.complete()};e.subscribe(si(r,c=>{i=!0,n=c,s||cr(t(c)).subscribe(s=si(r,o,l))},()=>{a=!0,(!i||!s||s.closed)&&r.complete()}))})}function ZN(t,e=jd){return MY(()=>Hd(t,e))}function il(t){return Pi((e,r)=>{let i=null,n=!1,s;i=e.subscribe(si(r,void 0,void 0,a=>{s=cr(t(a,il(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(r)):n=!0})),n&&(i.unsubscribe(),i=null,s.subscribe(r))})}function RY(t,e,r,i,n){return(s,a)=>{let o=r,l=e,c=0;s.subscribe(si(a,h=>{let p=c++;l=o?t(l,h,p):(o=!0,h),i&&a.next(l)},n&&(()=>{o&&a.next(l),a.complete()})))}}function BY(t,e){return Pi(RY(t,e,arguments.length>=2,!1,!0))}function xA(t,e){return Je(e)?Uo(t,e,1):Uo(t,1)}function DY(t){return new Ht(e=>t.subscribe(e))}var LY={connector:()=>new Bt};function NY(t,e=LY){let{connector:r}=e;return Pi((i,n)=>{let s=r();cr(t(DY(s))).subscribe(n),n.add(i.subscribe(s))})}function X_(t,e=jd){return Pi((r,i)=>{let n=null,s=null,a=null,o=()=>{if(n){n.unsubscribe(),n=null;let c=s;s=null,i.next(c)}};function l(){let c=a+t,h=e.now();if(h<c){n=this.schedule(void 0,c-h),i.add(n);return}o()}r.subscribe(si(i,c=>{s=c,a=e.now(),n||(n=e.schedule(l,t),i.add(n))},()=>{o(),i.complete()},void 0,()=>{s=n=null}))})}function tC(t){return Pi((e,r)=>{let i=!1;e.subscribe(si(r,n=>{i=!0,r.next(n)},()=>{i||r.next(t),r.complete()}))})}function br(t){return t<=0?()=>io:Pi((e,r)=>{let i=0;e.subscribe(si(r,n=>{++i<=t&&(r.next(n),t<=i&&r.complete())}))})}function $N(){return Pi((t,e)=>{t.subscribe(si(e,hd))})}function XN(t){return kt(()=>t)}function qN(t,e){return e?r=>Um(e.pipe(br(1),$N()),r.pipe(qN(t))):Uo((r,i)=>cr(t(r,i)).pipe(br(1),XN(r)))}function Jl(t,e=jd){let r=Hd(t,e);return qN(()=>r)}function ii(t,e=eo){return t=t??FY,Pi((r,i)=>{let n,s=!0;r.subscribe(si(i,a=>{let o=e(a);(s||!t(n,o))&&(s=!1,n=o,i.next(a))}))})}function FY(t,e){return t===e}function jP(t,e){return ii((r,i)=>e?e(r[t],i[t]):r[t]===i[t])}function zY(t=VY){return Pi((e,r)=>{let i=!1;e.subscribe(si(r,n=>{i=!0,r.next(n)},()=>i?r.complete():r.error(t())))})}function VY(){return new yA}function jY(...t){return e=>Um(e,Ge(...t))}function CA(t,e){return e?r=>r.pipe(CA((i,n)=>cr(t(i,n)).pipe(kt((s,a)=>e(i,s,n,a))))):Pi((r,i)=>{let n=0,s=null,a=!1;r.subscribe(si(i,o=>{s||(s=si(i,void 0,()=>{s=null,a&&i.complete()}),cr(t(o,n++)).subscribe(s))},()=>{a=!0,!s&&i.complete()}))})}function UY(){return CA(eo)}function Pf(t){return Pi((e,r)=>{try{e.subscribe(r)}finally{r.add(t)}})}function HY(t,e){let r=arguments.length>=2;return i=>i.pipe(t?Ye((n,s)=>t(n,s,i)):eo,br(1),r?tC(e):zY(()=>new yA))}function GY(t,e){let r=Je(t)?t:()=>t;return Je(e)?NY(e,{connector:r}):i=>new FK(i,r)}function WY(){return Pi((t,e)=>{let r,i=!1;t.subscribe(si(e,n=>{let s=r;r=n,i&&e.next([s,n]),i=!0}))})}function eC(...t){let e=t.length;if(e===0)throw new Error("list of properties cannot be empty.");return kt(r=>{let i=r;for(let n=0;n<e;n++){let s=i?.[t[n]];if(typeof s<"u")i=s;else return}return i})}function ZY(t,e,r,i){r&&!Je(r)&&(i=r);let n=Je(r)?r:void 0;return s=>GY(new Vo(t,e,i),n)(s)}function $Y(t){let e=1/0,r;return t!=null&&(typeof t=="object"?{count:e=1/0,delay:r}=t:e=t),e<=0?()=>io:Pi((i,n)=>{let s=0,a,o=()=>{if(a?.unsubscribe(),a=null,r!=null){let c=typeof r=="number"?Hd(r):cr(r(s)),h=si(n,()=>{h.unsubscribe(),l()});c.subscribe(h)}else l()},l=()=>{let c=!1;a=i.subscribe(si(n,void 0,()=>{++s<e?a?o():c=!0:n.complete()})),c&&o()};l()})}function oa(t={}){let{connector:e=()=>new Bt,resetOnError:r=!0,resetOnComplete:i=!0,resetOnRefCountZero:n=!0}=t;return s=>{let a,o,l,c=0,h=!1,p=!1,m=()=>{o?.unsubscribe(),o=void 0},f=()=>{m(),a=l=void 0,h=p=!1},g=()=>{let _=a;f(),_?.unsubscribe()};return Pi((_,w)=>{c++,!p&&!h&&m();let S=l=l??e();w.add(()=>{c--,c===0&&!p&&!h&&(o=dx(g,n))}),S.subscribe(w),!a&&c>0&&(a=new dd({next:C=>S.next(C),error:C=>{p=!0,m(),o=dx(f,r,C),S.error(C)},complete:()=>{h=!0,m(),o=dx(f,i),S.complete()}}),cr(_).subscribe(a))})(s)}}function dx(t,e,...r){if(e===!0){t();return}if(e===!1)return;let i=new dd({next:()=>{i.unsubscribe(),t()}});return cr(e(...r)).subscribe(i)}function hs(t,e,r){let i,n=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:n=!1,scheduler:r}=t:i=t??1/0,oa({connector:()=>new Vo(i,e,r),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:n})}function KN(t){return Ye((e,r)=>t<=r)}function XY(t){return Pi((e,r)=>{let i=!1,n=si(r,()=>{n?.unsubscribe(),i=!0},hd);cr(t).subscribe(n),e.subscribe(si(r,s=>i&&r.next(s)))})}function fr(...t){let e=Ef(t);return Pi((r,i)=>{(e?Um(t,r,e):Um(t,r)).subscribe(i)})}function _i(t,e){return Pi((r,i)=>{let n=null,s=0,a=!1,o=()=>a&&!n&&i.complete();r.subscribe(si(i,l=>{n?.unsubscribe();let c=0,h=s++;cr(t(l,h)).subscribe(n=si(i,p=>i.next(e?e(l,p,h,c++):p),()=>{n=null,o()}))},()=>{a=!0,o()}))})}function YN(){return _i(eo)}function Me(t){return Pi((e,r)=>{cr(t).subscribe(si(r,()=>r.complete(),hd)),!r.closed&&e.subscribe(r)})}function yy(t,e=!1){return Pi((r,i)=>{let n=0;r.subscribe(si(i,s=>{let a=t(s,n++);(a||e)&&i.next(s),!a&&i.complete()}))})}function Li(t,e,r){let i=Je(t)||e||r?{next:t,error:e,complete:r}:t;return i?Pi((n,s)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let o=!0;n.subscribe(si(s,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),s.next(l)},()=>{var l;o=!1,(l=i.complete)===null||l===void 0||l.call(i),s.complete()},l=>{var c;o=!1,(c=i.error)===null||c===void 0||c.call(i,l),s.error(l)},()=>{var l,c;o&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):eo}var JN={leading:!0,trailing:!1};function QN(t,e=JN){return Pi((r,i)=>{let{leading:n,trailing:s}=e,a=!1,o=null,l=null,c=!1,h=()=>{l?.unsubscribe(),l=null,s&&(f(),c&&i.complete())},p=()=>{l=null,c&&i.complete()},m=g=>l=cr(t(g)).subscribe(si(i,h,p)),f=()=>{if(a){a=!1;let g=o;o=null,i.next(g),!c&&m(g)}};r.subscribe(si(i,g=>{a=!0,o=g,!(l&&!l.closed)&&(n?f():m(g))},()=>{c=!0,!(s&&a&&l&&!l.closed)&&i.complete()}))})}function Gd(t,e=jd,r=JN){let i=Hd(t,e);return QN(()=>i,r)}function qY(...t){let e=_A(t);return Pi((r,i)=>{let n=t.length,s=new Array(n),a=t.map(()=>!1),o=!1;for(let l=0;l<n;l++)cr(t[l]).subscribe(si(i,c=>{s[l]=c,!o&&!a[l]&&(a[l]=!0,(o=a.every(eo))&&(a=null))},hd));r.subscribe(si(i,l=>{if(o){let c=[l,...s];i.next(e?e(...c):c)}}))})}var tF="https://g.co/ng/security#xss",Vt=class extends Error{constructor(t,e){super(KY(t,e)),this.code=t}};function KY(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var eF=Symbol("InputSignalNode#UNSET"),YY=Q(x({},xN),{transformFn:void 0,applyValueToInputSignal(t,e){lA(t,e)}});function iF(t,e){let r=Object.create(YY);r.value=t,r.transformFn=e?.transform;function i(){if(nA(r),r.value===eF)throw new Vt(-950,!1);return r.value}return i[Fs]=r,i}function Mf(t){return{toString:t}.toString()}var mv="__parameters__";function JY(t){return function(...e){if(t){let r=t(...e);for(let i in r)this[i]=r[i]}}}function rF(t,e,r){return Mf(()=>{let i=JY(e);function n(...s){if(this instanceof n)return i.apply(this,s),this;let a=new n(...s);return o.annotation=a,o;function o(l,c,h){let p=l.hasOwnProperty(mv)?l[mv]:Object.defineProperty(l,mv,{value:[]})[mv];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(a),l}}return r&&(n.prototype=Object.create(r.prototype)),n.prototype.ngMetadataName=t,n.annotationCls=n,n})}var Po=globalThis;function er(t){for(let e in t)if(t[e]===er)return e;throw Error("Could not find renamed property on target object.")}function QY(t,e){for(let r in e)e.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Ds(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ds).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r===-1?e:e.substring(0,r)}function iC(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var tJ=er({__forward_ref__:er});function fs(t){return t.__forward_ref__=fs,t.toString=function(){return Ds(this())},t}function qr(t){return nF(t)?t():t}function nF(t){return typeof t=="function"&&t.hasOwnProperty(tJ)&&t.__forward_ref__===fs}function vt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ft(t){return{providers:t.providers||[],imports:t.imports||[]}}function kA(t){return UP(t,sF)||UP(t,aF)}function UP(t,e){return t.hasOwnProperty(e)?t[e]:null}function eJ(t){return t&&(t[sF]||t[aF])||null}function HP(t){return t&&(t.hasOwnProperty(GP)||t.hasOwnProperty(iJ))?t[GP]:null}var sF=er({\u0275prov:er}),GP=er({\u0275inj:er}),aF=er({ngInjectableDef:er}),iJ=er({ngInjectorDef:er}),ht=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=vt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function oF(t){return t&&!!t.\u0275providers}var rJ=er({\u0275cmp:er}),nJ=er({\u0275dir:er}),sJ=er({\u0275pipe:er}),q_=er({\u0275fac:er}),Tm=er({__NG_ELEMENT_ID__:er}),WP=er({__NG_ENV_ID__:er});function wy(t){return typeof t=="string"?t:t==null?"":String(t)}function aJ(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():wy(t)}function oJ(t,e){let r=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Vt(-200,t)}function AA(t,e){throw new Vt(-201,!1)}var qe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(qe||{}),rC;function lF(){return rC}function Ln(t){let e=rC;return rC=t,e}function cF(t,e,r){let i=kA(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(r&qe.Optional)return null;if(e!==void 0)return e;AA(t,"Injector")}var lJ={},Hm=lJ,nC="__NG_DI_FLAG__",K_="ngTempTokenPath",cJ="ngTokenPath",uJ=/\n/gm,hJ="\u0275",ZP="__source",sd;function dJ(){return sd}function Fl(t){let e=sd;return sd=t,e}function pJ(t,e=qe.Default){if(sd===void 0)throw new Vt(-203,!1);return sd===null?cF(t,void 0,e):sd.get(t,e&qe.Optional?null:void 0,e)}function U(t,e=qe.Default){return(lF()||pJ)(qr(t),e)}function K(t,e=qe.Default){return U(t,xy(e))}function xy(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function sC(t){let e=[];for(let r=0;r<t.length;r++){let i=qr(t[r]);if(Array.isArray(i)){if(i.length===0)throw new Vt(900,!1);let n,s=qe.Default;for(let a=0;a<i.length;a++){let o=i[a],l=mJ(o);typeof l=="number"?l===-1?n=o.token:s|=l:n=o}e.push(U(n,s))}else e.push(U(i))}return e}function uF(t,e){return t[nC]=e,t.prototype[nC]=e,t}function mJ(t){return t[nC]}function fJ(t,e,r,i){let n=t[K_];throw e[ZP]&&n.unshift(e[ZP]),t.message=gJ(`
`+t.message,n,r,i),t[cJ]=n,t[K_]=null,t}function gJ(t,e,r,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==hJ?t.slice(2):t;let n=Ds(e);if(Array.isArray(e))n=e.map(Ds).join(" -> ");else if(typeof e=="object"){let s=[];for(let a in e)if(e.hasOwnProperty(a)){let o=e[a];s.push(a+":"+(typeof o=="string"?JSON.stringify(o):Ds(o)))}n=`{${s.join(", ")}}`}return`${r}${i?"("+i+")":""}[${n}]: ${t.replace(uJ,`
  `)}`}var vJ=uF(rF("Optional"),8),_J=uF(rF("SkipSelf"),4);function xu(t,e){return t.hasOwnProperty(q_)?t[q_]:null}function bJ(t,e,r){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let n=t[i],s=e[i];if(r&&(n=r(n),s=r(s)),s!==n)return!1}return!0}function yJ(t){return t.flat(Number.POSITIVE_INFINITY)}function SA(t,e){t.forEach(r=>Array.isArray(r)?SA(r,e):e(r))}function hF(t,e,r){e>=t.length?t.push(r):t.splice(e,0,r)}function Y_(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function wJ(t,e){let r=[];for(let i=0;i<t;i++)r.push(e);return r}function xJ(t,e,r,i){let n=t.length;if(n==e)t.push(r,i);else if(n===1)t.push(i,t[0]),t[0]=r;else{for(n--,t.push(t[n-1],t[n]);n>e;){let s=n-2;t[n]=t[s],n--}t[e]=r,t[e+1]=i}}function Cy(t,e,r){let i=Rf(t,e);return i>=0?t[i|1]=r:(i=~i,xJ(t,i,e,r)),i}function px(t,e){let r=Rf(t,e);if(r>=0)return t[r|1]}function Rf(t,e){return CJ(t,e,1)}function CJ(t,e,r){let i=0,n=t.length>>r;for(;n!==i;){let s=i+(n-i>>1),a=t[s<<r];if(e===a)return s<<r;a>e?n=s:i=s+1}return~(n<<r)}var Ho={},bn=[],J_=new ht(""),ky=new ht("",-1),dF=new ht(""),pF=class{get(t,e=Hm){if(e===Hm){let r=new Error(`NullInjectorError: No provider for ${Ds(t)}!`);throw r.name="NullInjectorError",r}return e}},mF=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(mF||{}),Ro=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ro||{}),Ql=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ql||{});function kJ(t,e,r){let i=t.length;for(;;){let n=t.indexOf(e,r);if(n===-1)return n;if(n===0||t.charCodeAt(n-1)<=32){let s=e.length;if(n+s===i||t.charCodeAt(n+s)<=32)return n}r=n+1}}function aC(t,e,r){let i=0;for(;i<r.length;){let n=r[i];if(typeof n=="number"){if(n!==0)break;i++;let s=r[i++],a=r[i++],o=r[i++];t.setAttribute(e,a,o,s)}else{let s=n,a=r[++i];AJ(s)?t.setProperty(e,s,a):t.setAttribute(e,s,a),i++}}return i}function fF(t){return t===3||t===4||t===6}function AJ(t){return t.charCodeAt(0)===64}function Gm(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let r=-1;for(let i=0;i<e.length;i++){let n=e[i];typeof n=="number"?r=n:r===0||(r===-1||r===2?$P(t,r,n,null,e[++i]):$P(t,r,n,null,null))}}return t}function $P(t,e,r,i,n){let s=0,a=t.length;if(e===-1)a=-1;else for(;s<t.length;){let o=t[s++];if(typeof o=="number"){if(o===e){a=-1;break}else if(o>e){a=s-1;break}}}for(;s<t.length;){let o=t[s];if(typeof o=="number")break;if(o===r){if(i===null){n!==null&&(t[s+1]=n);return}else if(i===t[s+1]){t[s+2]=n;return}}s++,i!==null&&s++,n!==null&&s++}a!==-1&&(t.splice(a,0,e),s=a+1),t.splice(s++,0,r),i!==null&&t.splice(s++,0,i),n!==null&&t.splice(s++,0,n)}var gF="ng-template";function SJ(t,e,r,i){let n=0;if(i){for(;n<e.length&&typeof e[n]=="string";n+=2)if(e[n]==="class"&&kJ(e[n+1].toLowerCase(),r,0)!==-1)return!0}else if(EA(t))return!1;if(n=e.indexOf(1,n),n>-1){let s;for(;++n<e.length&&typeof(s=e[n])=="string";)if(s.toLowerCase()===r)return!0}return!1}function EA(t){return t.type===4&&t.value!==gF}function EJ(t,e,r){let i=t.type===4&&!r?gF:t.value;return e===i}function TJ(t,e,r){let i=4,n=t.attrs,s=n!==null?PJ(n):0,a=!1;for(let o=0;o<e.length;o++){let l=e[o];if(typeof l=="number"){if(!a&&!sa(i)&&!sa(l))return!1;if(a&&sa(l))continue;a=!1,i=l|i&1;continue}if(!a)if(i&4){if(i=2|i&1,l!==""&&!EJ(t,l,r)||l===""&&e.length===1){if(sa(i))return!1;a=!0}}else if(i&8){if(n===null||!SJ(t,n,l,r)){if(sa(i))return!1;a=!0}}else{let c=e[++o],h=IJ(l,n,EA(t),r);if(h===-1){if(sa(i))return!1;a=!0;continue}if(c!==""){let p;if(h>s?p="":p=n[h+1].toLowerCase(),i&2&&c!==p){if(sa(i))return!1;a=!0}}}}return sa(i)||a}function sa(t){return(t&1)===0}function IJ(t,e,r,i){if(e===null)return-1;let n=0;if(i||!r){let s=!1;for(;n<e.length;){let a=e[n];if(a===t)return n;if(a===3||a===6)s=!0;else if(a===1||a===2){let o=e[++n];for(;typeof o=="string";)o=e[++n];continue}else{if(a===4)break;if(a===0){n+=4;continue}}n+=s?1:2}return-1}else return MJ(e,t)}function vF(t,e,r=!1){for(let i=0;i<e.length;i++)if(TJ(t,e[i],r))return!0;return!1}function OJ(t){let e=t.attrs;if(e!=null){let r=e.indexOf(5);if(!(r&1))return e[r+1]}return null}function PJ(t){for(let e=0;e<t.length;e++){let r=t[e];if(fF(r))return e}return t.length}function MJ(t,e){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){let i=t[r];if(typeof i=="number")return-1;if(i===e)return r;r++}return-1}function RJ(t,e){t:for(let r=0;r<e.length;r++){let i=e[r];if(t.length===i.length){for(let n=0;n<t.length;n++)if(t[n]!==i[n])continue t;return!0}}return!1}function XP(t,e){return t?":not("+e.trim()+")":e}function BJ(t){let e=t[0],r=1,i=2,n="",s=!1;for(;r<t.length;){let a=t[r];if(typeof a=="string")if(i&2){let o=t[++r];n+="["+a+(o.length>0?'="'+o+'"':"")+"]"}else i&8?n+="."+a:i&4&&(n+=" "+a);else n!==""&&!sa(a)&&(e+=XP(s,n),n=""),i=a,s=s||!sa(i);r++}return n!==""&&(e+=XP(s,n)),e}function DJ(t){return t.map(BJ).join(",")}function LJ(t){let e=[],r=[],i=1,n=2;for(;i<t.length;){let s=t[i];if(typeof s=="string")n===2?s!==""&&e.push(s,t[++i]):n===8&&r.push(s);else{if(!sa(n))break;n=s}i++}return{attrs:e,classes:r}}function Pt(t){return Mf(()=>{let e=yF(t),r=Q(x({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===mF.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ro.Emulated,styles:t.styles||bn,_:null,schemas:t.schemas||null,tView:null,id:""});wF(r);let i=t.dependencies;return r.directiveDefs=Q_(i,!1),r.pipeDefs=Q_(i,!0),r.id=VJ(r),r})}function NJ(t){return tc(t)||TA(t)}function FJ(t){return t!==null}function zt(t){return Mf(()=>({type:t.type,bootstrap:t.bootstrap||bn,declarations:t.declarations||bn,imports:t.imports||bn,exports:t.exports||bn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function qP(t,e){if(t==null)return Ho;let r={};for(let i in t)if(t.hasOwnProperty(i)){let n=t[i],s,a,o=Ql.None;Array.isArray(n)?(o=n[0],s=n[1],a=n[2]??s):(s=n,a=n),e?(r[s]=o!==Ql.None?[i,o]:i,e[s]=a):r[s]=i}return r}function qt(t){return Mf(()=>{let e=yF(t);return wF(e),e})}function _F(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function tc(t){return t[rJ]||null}function TA(t){return t[nJ]||null}function bF(t){return t[sJ]||null}function zJ(t){let e=tc(t)||TA(t)||bF(t);return e!==null?e.standalone:!1}function yF(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ho,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||bn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qP(t.inputs,e),outputs:qP(t.outputs),debugInfo:null}}function wF(t){t.features?.forEach(e=>e(t))}function Q_(t,e){if(!t)return null;let r=e?bF:NJ;return()=>(typeof t=="function"?t():t).map(i=>r(i)).filter(FJ)}function VJ(t){let e=0,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of r)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function An(t){return{\u0275providers:t}}function IA(...t){return{\u0275providers:xF(!0,t),\u0275fromNgModule:!0}}function xF(t,...e){let r=[],i=new Set,n,s=a=>{r.push(a)};return SA(e,a=>{let o=a;oC(o,s,[],i)&&(n||=[],n.push(o))}),n!==void 0&&CF(n,s),r}function CF(t,e){for(let r=0;r<t.length;r++){let{ngModule:i,providers:n}=t[r];OA(n,s=>{e(s,i)})}}function oC(t,e,r,i){if(t=qr(t),!t)return!1;let n=null,s=HP(t),a=!s&&tc(t);if(!s&&!a){let l=t.ngModule;if(s=HP(l),s)n=l;else return!1}else{if(a&&!a.standalone)return!1;n=t}let o=i.has(n);if(a){if(o)return!1;if(i.add(n),a.dependencies){let l=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let c of l)oC(c,e,r,i)}}else if(s){if(s.imports!=null&&!o){i.add(n);let c;try{SA(s.imports,h=>{oC(h,e,r,i)&&(c||=[],c.push(h))})}finally{}c!==void 0&&CF(c,e)}if(!o){let c=xu(n)||(()=>new n);e({provide:n,useFactory:c,deps:bn},n),e({provide:dF,useValue:n,multi:!0},n),e({provide:J_,useValue:()=>U(n),multi:!0},n)}let l=s.providers;if(l!=null&&!o){let c=t;OA(l,h=>{e(h,c)})}}else return!1;return n!==t&&t.providers!==void 0}function OA(t,e){for(let r of t)oF(r)&&(r=r.\u0275providers),Array.isArray(r)?OA(r,e):e(r)}var jJ=er({provide:String,useValue:er});function kF(t){return t!==null&&typeof t=="object"&&jJ in t}function UJ(t){return!!(t&&t.useExisting)}function HJ(t){return!!(t&&t.useFactory)}function pd(t){return typeof t=="function"}function GJ(t){return!!t.useClass}var PA=new ht(""),p_={},WJ={},mx;function Ay(){return mx===void 0&&(mx=new pF),mx}var Xa=class{},MA=class extends Xa{get destroyed(){return this._destroyed}constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cC(t,s=>this.processProvider(s)),this.records.set(ky,Jh(void 0,this)),i.has("environment")&&this.records.set(Xa,Jh(void 0,this));let n=this.records.get(PA);n!=null&&typeof n.value=="string"&&this.scopes.add(n.value),this.injectorDefTypes=new Set(this.get(dF,bn,qe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=He(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),He(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=Fl(this),r=Ln(void 0),i;try{return t()}finally{Fl(e),Ln(r)}}get(t,e=Hm,r=qe.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(WP))return t[WP](this);r=xy(r);let i,n=Fl(this),s=Ln(void 0);try{if(!(r&qe.SkipSelf)){let o=this.records.get(t);if(o===void 0){let l=KJ(t)&&kA(t);l&&this.injectableDefInScope(l)?o=Jh(lC(t),p_):o=null,this.records.set(t,o)}if(o!=null)return this.hydrate(t,o)}let a=r&qe.Self?Ay():this.parent;return e=r&qe.Optional&&e===Hm?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[K_]=a[K_]||[]).unshift(Ds(t)),n)throw a;return fJ(a,t,"R3InjectorError",this.source)}else throw a}finally{Ln(s),Fl(n)}}resolveInjectorInitializers(){let t=He(null),e=Fl(this),r=Ln(void 0),i;try{let n=this.get(J_,bn,qe.Self);for(let s of n)s()}finally{Fl(e),Ln(r),He(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(Ds(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Vt(205,!1)}processProvider(t){t=qr(t);let e=pd(t)?t:qr(t&&t.provide),r=$J(t);if(!pd(t)&&t.multi===!0){let i=this.records.get(e);i||(i=Jh(void 0,p_,!0),i.factory=()=>sC(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e){let r=He(null);try{return e.value===p_&&(e.value=WJ,e.value=e.factory()),typeof e.value=="object"&&e.value&&qJ(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{He(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=qr(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function lC(t){let e=kA(t),r=e!==null?e.factory:xu(t);if(r!==null)return r;if(t instanceof ht)throw new Vt(204,!1);if(t instanceof Function)return ZJ(t);throw new Vt(204,!1)}function ZJ(t){if(t.length>0)throw new Vt(204,!1);let e=eJ(t);return e!==null?()=>e.factory(t):()=>new t}function $J(t){if(kF(t))return Jh(void 0,t.useValue);{let e=AF(t);return Jh(e,p_)}}function AF(t,e,r){let i;if(pd(t)){let n=qr(t);return xu(n)||lC(n)}else if(kF(t))i=()=>qr(t.useValue);else if(HJ(t))i=()=>t.useFactory(...sC(t.deps||[]));else if(UJ(t))i=()=>U(qr(t.useExisting));else{let n=qr(t&&(t.useClass||t.provide));if(XJ(t))i=()=>new n(...sC(t.deps));else return xu(n)||lC(n)}return i}function Jh(t,e,r=!1){return{factory:t,value:e,multi:r?[]:void 0}}function XJ(t){return!!t.deps}function qJ(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function KJ(t){return typeof t=="function"||typeof t=="object"&&t instanceof ht}function cC(t,e){for(let r of t)Array.isArray(r)?cC(r,e):r&&oF(r)?cC(r.\u0275providers,e):e(r)}function Wd(t,e){t instanceof MA&&t.assertNotDestroyed();let r,i=Fl(t),n=Ln(void 0);try{return e()}finally{Fl(i),Ln(n)}}function SF(){return lF()!==void 0||dJ()!=null}function Zd(t){if(!SF())throw new Vt(-203,!1)}function YJ(t){return typeof t=="function"}var ro=0,Te=1,xe=2,hn=3,ua=4,Wn=5,md=6,tb=7,ln=8,fd=9,qa=10,nr=11,Wm=12,KP=13,$d=14,ms=15,Cu=16,Qh=17,Go=18,Sy=19,EF=20,Gl=21,m_=22,Ls=23,zr=25,RA=1,ku=7,eb=8,gd=9,cn=10,ib=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ib||{});function Wl(t){return Array.isArray(t)&&typeof t[RA]=="object"}function rl(t){return Array.isArray(t)&&t[RA]===!0}function TF(t){return(t.flags&4)!==0}function Ey(t){return t.componentOffset>-1}function BA(t){return(t.flags&1)===1}function Wo(t){return!!t.template}function uC(t){return(t[xe]&512)!==0}var IF=class{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function OF(t,e,r,i){e!==null?e.applyValueToInputSignal(e,i):t[r]=i}function yr(){return PF}function PF(t){return t.type.prototype.ngOnChanges&&(t.setInput=QJ),JJ}yr.ngInherit=!0;function JJ(){let t=RF(this),e=t?.current;if(e){let r=t.previous;if(r===Ho)t.previous=e;else for(let i in e)r[i]=e[i];t.current=null,this.ngOnChanges(e)}}function QJ(t,e,r,i,n){let s=this.declaredInputs[i],a=RF(t)||tQ(t,{previous:Ho,current:null}),o=a.current||(a.current={}),l=a.previous,c=l[s];o[s]=new IF(c&&c.currentValue,r,l===Ho),OF(t,e,n,r)}var MF="__ngSimpleChanges__";function RF(t){return t[MF]||null}function tQ(t,e){return t[MF]=e}var eQ=null,ja=function(t,e,r){eQ?.(t,e,r)},BF="svg",iQ="math";function Ka(t){for(;Array.isArray(t);)t=t[ro];return t}function rQ(t){for(;Array.isArray(t);){if(typeof t[RA]=="object")return t;t=t[ro]}return null}function DF(t,e){return Ka(e[t])}function Hs(t,e){return Ka(e[t.index])}function DA(t,e){return t.data[e]}function LA(t,e){return t[e]}function uc(t,e){let r=e[t];return Wl(r)?r:r[ro]}function nQ(t){return(t[xe]&4)===4}function NA(t){return(t[xe]&128)===128}function sQ(t){return rl(t[hn])}function vd(t,e){return e==null?null:t[e]}function LF(t){t[Qh]=0}function NF(t){t[xe]&1024||(t[xe]|=1024,NA(t)&&Ty(t))}function aQ(t,e){for(;t>0;)e=e[$d],t--;return e}function Zm(t){return!!(t[xe]&9216||t[Ls]?.dirty)}function hC(t){t[qa].changeDetectionScheduler?.notify(7),t[xe]&64&&(t[xe]|=1024),Zm(t)&&Ty(t)}function Ty(t){t[qa].changeDetectionScheduler?.notify(0);let e=Au(t);for(;e!==null&&!(e[xe]&8192||(e[xe]|=8192,!NA(e)));)e=Au(e)}function FF(t,e){if((t[xe]&256)===256)throw new Vt(911,!1);t[Gl]===null&&(t[Gl]=[]),t[Gl].push(e)}function oQ(t,e){if(t[Gl]===null)return;let r=t[Gl].indexOf(e);r!==-1&&t[Gl].splice(r,1)}function Au(t){let e=t[hn];return rl(e)?e[hn]:e}var Le={lFrame:YF(null),bindingsEnabled:!0,skipHydrationRootTNode:null},zF=!1;function lQ(){return Le.lFrame.elementDepthCount}function cQ(){Le.lFrame.elementDepthCount++}function uQ(){Le.lFrame.elementDepthCount--}function VF(){return Le.bindingsEnabled}function jF(){return Le.skipHydrationRootTNode!==null}function hQ(t){return Le.skipHydrationRootTNode===t}function dQ(){Le.skipHydrationRootTNode=null}function Ae(){return Le.lFrame.lView}function qi(){return Le.lFrame.tView}function Lt(t){return Le.lFrame.contextLView=t,t[ln]}function Nt(t){return Le.lFrame.contextLView=null,t}function Yr(){let t=UF();for(;t!==null&&t.type===64;)t=t.parent;return t}function UF(){return Le.lFrame.currentTNode}function pQ(){let t=Le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Xd(t,e){let r=Le.lFrame;r.currentTNode=t,r.isParent=e}function HF(){return Le.lFrame.isParent}function GF(){Le.lFrame.isParent=!1}function WF(){return Le.lFrame.contextLView}function ZF(){return zF}function YP(t){zF=t}function $F(){let t=Le.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function mQ(t){return Le.lFrame.bindingIndex=t}function hc(){return Le.lFrame.bindingIndex++}function XF(t){let e=Le.lFrame,r=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,r}function fQ(){return Le.lFrame.inI18n}function gQ(t,e){let r=Le.lFrame;r.bindingIndex=r.bindingRootIndex=t,dC(e)}function vQ(){return Le.lFrame.currentDirectiveIndex}function dC(t){Le.lFrame.currentDirectiveIndex=t}function FA(t){let e=Le.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function zA(){return Le.lFrame.currentQueryIndex}function Iy(t){Le.lFrame.currentQueryIndex=t}function _Q(t){let e=t[Te];return e.type===2?e.declTNode:e.type===1?t[Wn]:null}function qF(t,e,r){if(r&qe.SkipSelf){let n=e,s=t;for(;(n=n.parent,n===null&&!(r&qe.Host))&&(n=_Q(s),!(n===null||(s=s[$d],n.type&10))););if(n===null)return!1;e=n,t=s}let i=Le.lFrame=KF();return i.currentTNode=e,i.lView=t,!0}function VA(t){let e=KF(),r=t[Te];Le.lFrame=e,e.currentTNode=r.firstChild,e.lView=t,e.tView=r,e.contextLView=t,e.bindingIndex=r.bindingStartIndex,e.inI18n=!1}function KF(){let t=Le.lFrame,e=t===null?null:t.child;return e===null?YF(t):e}function YF(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function JF(){let t=Le.lFrame;return Le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var QF=JF;function jA(){let t=JF();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function bQ(t){return(Le.lFrame.contextLView=aQ(t,Le.lFrame.contextLView))[ln]}function nl(){return Le.lFrame.selectedIndex}function Su(t){Le.lFrame.selectedIndex=t}function qd(){let t=Le.lFrame;return DA(t.tView,t.selectedIndex)}function ju(){Le.lFrame.currentNamespace=BF}function yQ(){wQ()}function wQ(){Le.lFrame.currentNamespace=null}function xQ(){return Le.lFrame.currentNamespace}var t3=!0;function UA(){return t3}function HA(t){t3=t}function CQ(t,e,r){let{ngOnChanges:i,ngOnInit:n,ngDoCheck:s}=e.type.prototype;if(i){let a=PF(e);(r.preOrderHooks??=[]).push(t,a),(r.preOrderCheckHooks??=[]).push(t,a)}n&&(r.preOrderHooks??=[]).push(0-t,n),s&&((r.preOrderHooks??=[]).push(t,s),(r.preOrderCheckHooks??=[]).push(t,s))}function GA(t,e){for(let r=e.directiveStart,i=e.directiveEnd;r<i;r++){let n=t.data[r].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:o,ngAfterViewChecked:l,ngOnDestroy:c}=n;s&&(t.contentHooks??=[]).push(-r,s),a&&((t.contentHooks??=[]).push(r,a),(t.contentCheckHooks??=[]).push(r,a)),o&&(t.viewHooks??=[]).push(-r,o),l&&((t.viewHooks??=[]).push(r,l),(t.viewCheckHooks??=[]).push(r,l)),c!=null&&(t.destroyHooks??=[]).push(r,c)}}function f_(t,e,r){e3(t,e,3,r)}function g_(t,e,r,i){(t[xe]&3)===r&&e3(t,e,r,i)}function fx(t,e){let r=t[xe];(r&3)===e&&(r&=16383,r+=1,t[xe]=r)}function e3(t,e,r,i){let n=i!==void 0?t[Qh]&65535:0,s=i??-1,a=e.length-1,o=0;for(let l=n;l<a;l++)if(typeof e[l+1]=="number"){if(o=e[l],i!=null&&o>=i)break}else e[l]<0&&(t[Qh]+=65536),(o<s||s==-1)&&(kQ(t,r,e,l),t[Qh]=(t[Qh]&4294901760)+l+2),l++}function JP(t,e){ja(4,t,e);let r=He(null);try{e.call(t)}finally{He(r),ja(5,t,e)}}function kQ(t,e,r,i){let n=r[i]<0,s=r[i+1],a=n?-r[i]:r[i],o=t[a];n?t[xe]>>14<t[Qh]>>16&&(t[xe]&3)===e&&(t[xe]+=16384,JP(o,s)):JP(o,s)}var ad=-1,Bf=class{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}};function AQ(t){return t instanceof Bf}function SQ(t){return(t.flags&8)!==0}function EQ(t){return(t.flags&16)!==0}var gx={},TQ=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){r=xy(r);let i=this.injector.get(t,gx,r);return i!==gx||e===gx?i:this.parentInjector.get(t,e,r)}};function i3(t){return t!==ad}function rb(t){return t&32767}function IQ(t){return t>>16}function nb(t,e){let r=IQ(t),i=e;for(;r>0;)i=i[$d],r--;return i}var pC=!0;function sb(t){let e=pC;return pC=t,e}var OQ=256,r3=OQ-1,n3=5,PQ=0,Ua={};function MQ(t,e,r){let i;typeof r=="string"?i=r.charCodeAt(0)||0:r.hasOwnProperty(Tm)&&(i=r[Tm]),i==null&&(i=r[Tm]=PQ++);let n=i&r3,s=1<<n;e.data[t+(n>>n3)]|=s}function ab(t,e){let r=s3(t,e);if(r!==-1)return r;let i=e[Te];i.firstCreatePass&&(t.injectorIndex=e.length,vx(i.data,t),vx(e,null),vx(i.blueprint,null));let n=WA(t,e),s=t.injectorIndex;if(i3(n)){let a=rb(n),o=nb(n,e),l=o[Te].data;for(let c=0;c<8;c++)e[s+c]=o[a+c]|l[a+c]}return e[s+8]=n,s}function vx(t,e){t.push(0,0,0,0,0,0,0,0,e)}function s3(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function WA(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let r=0,i=null,n=e;for(;n!==null;){if(i=u3(n),i===null)return ad;if(r++,n=n[$d],i.injectorIndex!==-1)return i.injectorIndex|r<<16}return ad}function mC(t,e,r){MQ(t,e,r)}function RQ(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let r=t.attrs;if(r){let i=r.length,n=0;for(;n<i;){let s=r[n];if(fF(s))break;if(s===0)n=n+2;else if(typeof s=="number")for(n++;n<i&&typeof r[n]=="string";)n++;else{if(s===e)return r[n+1];n=n+2}}}return null}function a3(t,e,r){if(r&qe.Optional||t!==void 0)return t;AA(e,"NodeInjector")}function o3(t,e,r,i){if(r&qe.Optional&&i===void 0&&(i=null),!(r&(qe.Self|qe.Host))){let n=t[fd],s=Ln(void 0);try{return n?n.get(e,i,r&qe.Optional):cF(e,i,r&qe.Optional)}finally{Ln(s)}}return a3(i,e,r)}function l3(t,e,r,i=qe.Default,n){if(t!==null){if(e[xe]&2048&&!(i&qe.Self)){let a=NQ(t,e,r,i,Ua);if(a!==Ua)return a}let s=c3(t,e,r,i,Ua);if(s!==Ua)return s}return o3(e,r,i,n)}function c3(t,e,r,i,n){let s=DQ(r);if(typeof s=="function"){if(!qF(e,t,i))return i&qe.Host?a3(n,r,i):o3(e,r,i,n);try{let a;if(a=s(i),a==null&&!(i&qe.Optional))AA(r);else return a}finally{QF()}}else if(typeof s=="number"){let a=null,o=s3(t,e),l=ad,c=i&qe.Host?e[ms][Wn]:null;for((o===-1||i&qe.SkipSelf)&&(l=o===-1?WA(t,e):e[o+8],l===ad||!t2(i,!1)?o=-1:(a=e[Te],o=rb(l),e=nb(l,e)));o!==-1;){let h=e[Te];if(QP(s,o,h.data)){let p=BQ(o,e,r,a,i,c);if(p!==Ua)return p}l=e[o+8],l!==ad&&t2(i,e[Te].data[o+8]===c)&&QP(s,o,e)?(a=h,o=rb(l),e=nb(l,e)):o=-1}}return n}function BQ(t,e,r,i,n,s){let a=e[Te],o=a.data[t+8],l=i==null?Ey(o)&&pC:i!=a&&(o.type&3)!==0,c=n&qe.Host&&s===o,h=v_(o,a,r,l,c);return h!==null?Eu(e,a,h,o):Ua}function v_(t,e,r,i,n){let s=t.providerIndexes,a=e.data,o=s&1048575,l=t.directiveStart,c=t.directiveEnd,h=s>>20,p=i?o:o+h,m=n?o+h:c;for(let f=p;f<m;f++){let g=a[f];if(f<l&&r===g||f>=l&&g.type===r)return f}if(n){let f=a[l];if(f&&Wo(f)&&f.type===r)return l}return null}function Eu(t,e,r,i){let n=t[r],s=e.data;if(AQ(n)){let a=n;a.resolving&&oJ(aJ(s[r]));let o=sb(a.canSeeViewProviders);a.resolving=!0;let l,c=a.injectImpl?Ln(a.injectImpl):null,h=qF(t,i,qe.Default);try{n=t[r]=a.factory(void 0,s,t,i),e.firstCreatePass&&r>=i.directiveStart&&CQ(r,s[r],e)}finally{c!==null&&Ln(c),sb(o),a.resolving=!1,QF()}}return n}function DQ(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Tm)?t[Tm]:void 0;return typeof e=="number"?e>=0?e&r3:LQ:e}function QP(t,e,r){let i=1<<t;return!!(r[e+(t>>n3)]&i)}function t2(t,e){return!(t&qe.Self)&&!(t&qe.Host&&e)}var Im=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return l3(this._tNode,this._lView,t,xy(r),e)}};function LQ(){return new Im(Yr(),Ae())}function Cr(t){return Mf(()=>{let e=t.prototype.constructor,r=e[q_]||fC(e),i=Object.prototype,n=Object.getPrototypeOf(t.prototype).constructor;for(;n&&n!==i;){let s=n[q_]||fC(n);if(s&&s!==r)return s;n=Object.getPrototypeOf(n)}return s=>new s})}function fC(t){return nF(t)?()=>{let e=fC(qr(t));return e&&e()}:xu(t)}function NQ(t,e,r,i,n){let s=t,a=e;for(;s!==null&&a!==null&&a[xe]&2048&&!(a[xe]&512);){let o=c3(s,a,r,i|qe.Self,Ua);if(o!==Ua)return o;let l=s.parent;if(!l){let c=a[EF];if(c){let h=c.get(r,Ua,i);if(h!==Ua)return h}l=u3(a),a=a[$d]}s=l}return n}function u3(t){let e=t[Te],r=e.type;return r===2?e.declTNode:r===1?t[Wn]:null}function Kd(t){return RQ(Yr(),t)}function e2(t,e=null,r=null,i){let n=FQ(t,e,r,i);return n.resolveInjectorInitializers(),n}function FQ(t,e=null,r=null,i,n=new Set){let s=[r||bn,IA(t)];return i=i||(typeof t=="object"?void 0:Ds(t)),new MA(s,e||Ay(),i||null,n)}var Uh=class{static create(e,r){if(Array.isArray(e))return e2({name:""},r,e,"");{let i=e.name??"";return e2({name:i},e.parent,e.providers,i)}}};Uh.THROW_IF_NOT_FOUND=Hm,Uh.NULL=new pF,Uh.\u0275prov=vt({token:Uh,providedIn:"any",factory:()=>U(ky)}),Uh.__NG_ELEMENT_ID__=-1;var Re=Uh,zQ=new ht("");zQ.__NG_ELEMENT_ID__=t=>{let e=Yr();if(e===null)throw new Vt(204,!1);if(e.type&2)return e.value;if(t&qe.Optional)return null;throw new Vt(204,!1)};var VQ="ngOriginalError";function _x(t){return t[VQ]}var h3=!0,ec=(()=>{let t=class{};return t.__NG_ELEMENT_ID__=UQ,t.__NG_ENV_ID__=r=>r,t})(),jQ=class extends ec{constructor(t){super(),this._lView=t}onDestroy(t){return FF(this._lView,t),()=>oQ(this._lView,t)}};function UQ(){return new jQ(Ae())}var Uu=(()=>{let t=class{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new cc(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};return t.\u0275prov=vt({token:t,providedIn:"root",factory:()=>new t}),t})(),HQ=class extends Bt{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,SF()&&(this.destroyRef=K(ec,{optional:!0})??void 0,this.pendingTasks=K(Uu,{optional:!0})??void 0)}emit(t){let e=He(null);try{super.next(t)}finally{He(e)}}subscribe(t,e,r){let i=t,n=e||(()=>null),s=r;if(t&&typeof t=="object"){let o=t;i=o.next?.bind(o),n=o.error?.bind(o),s=o.complete?.bind(o)}this.__isAsync&&(n=this.wrapInTimeout(n),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:n,complete:s});return t instanceof vi&&t.add(a),a}wrapInTimeout(t){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{t(e),r!==void 0&&this.pendingTasks?.remove(r)})}}},It=HQ;function ob(...t){}function d3(t){let e,r;function i(){t=ob;try{r!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(r),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),i()}),typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(()=>{t(),i()})),()=>i()}function i2(t){return queueMicrotask(()=>t()),()=>{t=ob}}var ZA="isAngularZone",lb=ZA+"_ID",GQ=0,Zt=class gC{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new It(!1),this.onMicrotaskEmpty=new It(!1),this.onStable=new It(!1),this.onError=new It(!1);let{enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:n=!1,scheduleInRootZone:s=h3}=e;if(typeof Zone>"u")throw new Vt(908,!1);Zone.assertZonePatched();let a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!n&&i,a.shouldCoalesceRunChangeDetection=n,a.callbackScheduled=!1,a.scheduleInRootZone=s,$Q(a)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ZA)===!0}static assertInAngularZone(){if(!gC.isInAngularZone())throw new Vt(909,!1)}static assertNotInAngularZone(){if(gC.isInAngularZone())throw new Vt(909,!1)}run(e,r,i){return this._inner.run(e,r,i)}runTask(e,r,i,n){let s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+n,e,WQ,ob,ob);try{return s.runTask(a,r,i)}finally{s.cancelTask(a)}}runGuarded(e,r,i){return this._inner.runGuarded(e,r,i)}runOutsideAngular(e){return this._outer.run(e)}},WQ={};function $A(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ZQ(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){d3(()=>{t.callbackScheduled=!1,vC(t),t.isCheckStableRunning=!0,$A(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),vC(t)}function $Q(t){let e=()=>{ZQ(t)},r=GQ++;t._inner=t._inner.fork({name:"angular",properties:{[ZA]:!0,[lb]:r,[lb+r]:!0},onInvokeTask:(i,n,s,a,o,l)=>{if(qQ(l))return i.invokeTask(s,a,o,l);try{return r2(t),i.invokeTask(s,a,o,l)}finally{(t.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),n2(t)}},onInvoke:(i,n,s,a,o,l,c)=>{try{return r2(t),i.invoke(s,a,o,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!KQ(l)&&e(),n2(t)}},onHasTask:(i,n,s,a)=>{i.hasTask(s,a),n===s&&(a.change=="microTask"?(t._hasPendingMicrotasks=a.microTask,vC(t),$A(t)):a.change=="macroTask"&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(i,n,s,a)=>(i.handleError(s,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}function vC(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function r2(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function n2(t){t._nesting--,$A(t)}var XQ=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new It,this.onMicrotaskEmpty=new It,this.onStable=new It,this.onError=new It}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}};function qQ(t){return p3(t,"__ignore_ng_zone__")}function KQ(t){return p3(t,"__scheduler_tick__")}function p3(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var ga=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&_x(t);for(;e&&_x(e);)e=_x(e);return e||null}},YQ=new ht("",{providedIn:"root",factory:()=>{let t=K(Zt),e=K(ga);return r=>t.runOutsideAngular(()=>e.handleError(r))}}),JQ=class{constructor(){this.destroyed=!1,this.listeners=null,this.errorHandler=K(ga,{optional:!0}),this.destroyRef=K(ec),this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(t){if(this.destroyed)throw new Vt(953,!1);return(this.listeners??=[]).push(t),{unsubscribe:()=>{let e=this.listeners?.indexOf(t);e!==void 0&&e!==-1&&this.listeners?.splice(e,1)}}}emit(t){if(this.destroyed)throw new Vt(953,!1);if(this.listeners===null)return;let e=He(null);try{for(let r of this.listeners)try{r(t)}catch(i){this.errorHandler?.handleError(i)}}finally{He(e)}}};function QQ(t){return t.destroyRef}function su(t){return new JQ}function s2(t,e){return iF(t,e)}function ttt(t){return iF(eF,t)}var je=(s2.required=ttt,s2);function ett(){return Yd(Yr(),Ae())}function Yd(t,e){return new te(Hs(t,e))}var te=(()=>{let t=class{constructor(i){this.nativeElement=i}};return t.__NG_ELEMENT_ID__=ett,t})();function m3(t){return t instanceof te?t.nativeElement:t}function itt(){return this._results[Symbol.iterator]()}var $m=class f3{get changes(){return this._changes??=new It}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let r=f3.prototype;r[Symbol.iterator]||(r[Symbol.iterator]=itt)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,r){return this._results.reduce(e,r)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,r){this.dirty=!1;let i=yJ(e);(this._changesDetected=!bJ(this._results,i,r))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function g3(t){return(t.flags&128)===128}var v3=new Map,rtt=0;function ntt(){return rtt++}function stt(t){v3.set(t[Sy],t)}function att(t){v3.delete(t[Sy])}var a2="__ngContext__";function Tu(t,e){Wl(e)?(t[a2]=e[Sy],stt(e)):t[a2]=e}function _3(t){return y3(t[Wm])}function b3(t){return y3(t[ua])}function y3(t){for(;t!==null&&!rl(t);)t=t[ua];return t}var _C;function ott(t){_C=t}function ltt(){if(_C!==void 0)return _C;if(typeof document<"u")return document;throw new Vt(210,!1)}var Oy=new ht("",{providedIn:"root",factory:()=>ctt}),ctt="ng",w3=new ht(""),dn=new ht("",{providedIn:"platform",factory:()=>"unknown"}),kr=new ht(""),Py=new ht("",{providedIn:"root",factory:()=>ltt().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),utt="h",htt="b",dtt=()=>null;function XA(t,e,r=!1){return dtt(t,e,r)}var x3=!1,ptt=new ht("",{providedIn:"root",factory:()=>x3}),fv;function mtt(){if(fv===void 0&&(fv=null,Po.trustedTypes))try{fv=Po.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return fv}function My(t){return mtt()?.createHTML(t)||t}var Hu=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${tF})`}},ftt=class extends Hu{getTypeName(){return"HTML"}},gtt=class extends Hu{getTypeName(){return"Style"}},vtt=class extends Hu{getTypeName(){return"Script"}},_tt=class extends Hu{getTypeName(){return"URL"}},btt=class extends Hu{getTypeName(){return"ResourceURL"}};function zl(t){return t instanceof Hu?t.changingThisBreaksApplicationSecurity:t}function Hh(t,e){let r=ytt(t);if(r!=null&&r!==e){if(r==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${r} (see ${tF})`)}return r===e}function ytt(t){return t instanceof Hu&&t.getTypeName()||null}function wtt(t){return new ftt(t)}function xtt(t){return new gtt(t)}function Ctt(t){return new vtt(t)}function ktt(t){return new _tt(t)}function Att(t){return new btt(t)}function Stt(t){let e=new Ttt(t);return Itt()?new Ett(e):e}var Ett=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(My(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},Ttt=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=My(t),e}};function Itt(){try{return!!new window.DOMParser().parseFromString(My(""),"text/html")}catch{return!1}}var Ott=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qA(t){return t=String(t),t.match(Ott)?t:"unsafe:"+t}function sl(t){let e={};for(let r of t.split(","))e[r]=!0;return e}function Df(...t){let e={};for(let r of t)for(let i in r)r.hasOwnProperty(i)&&(e[i]=!0);return e}var C3=sl("area,br,col,hr,img,wbr"),k3=sl("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),A3=sl("rp,rt"),Ptt=Df(A3,k3),Mtt=Df(k3,sl("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Rtt=Df(A3,sl("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),o2=Df(C3,Mtt,Rtt,Ptt),S3=sl("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Btt=sl("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Dtt=sl("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Ltt=Df(S3,Btt,Dtt),Ntt=sl("script,style,template"),Ftt=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,r=!0,i=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild){i.push(e),e=jtt(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let n=Vtt(e);if(n){e=n;break}e=i.pop()}}return this.buf.join("")}startElement(t){let e=l2(t).toLowerCase();if(!o2.hasOwnProperty(e))return this.sanitizedSomething=!0,!Ntt.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let r=t.attributes;for(let i=0;i<r.length;i++){let n=r.item(i),s=n.name,a=s.toLowerCase();if(!Ltt.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let o=n.value;S3[a]&&(o=qA(o)),this.buf.push(" ",s,'="',c2(o),'"')}return this.buf.push(">"),!0}endElement(t){let e=l2(t).toLowerCase();o2.hasOwnProperty(e)&&!C3.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(c2(t))}};function ztt(t,e){return(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Vtt(t){let e=t.nextSibling;if(e&&t!==e.previousSibling)throw E3(e);return e}function jtt(t){let e=t.firstChild;if(e&&ztt(t,e))throw E3(e);return e}function l2(t){let e=t.nodeName;return typeof e=="string"?e:"FORM"}function E3(t){return new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`)}var Utt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Htt=/([^\#-~ |!])/g;function c2(t){return t.replace(/&/g,"&amp;").replace(Utt,function(e){let r=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((r-55296)*1024+(i-56320)+65536)+";"}).replace(Htt,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var gv;function Gtt(t,e){let r=null;try{gv=gv||Stt(t);let i=e?String(e):"";r=gv.getInertBodyElement(i);let n=5,s=i;do{if(n===0)throw new Error("Failed to sanitize html because the input is unstable");n--,i=s,s=r.innerHTML,r=gv.getInertBodyElement(i)}while(i!==s);let a=new Ftt().sanitizeChildren(u2(r)||r);return My(a)}finally{if(r){let i=u2(r)||r;for(;i.firstChild;)i.firstChild.remove()}}}function u2(t){return"content"in t&&Wtt(t)?t.content:null}function Wtt(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Nn=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Nn||{});function KA(t){let e=Ztt();return e?e.sanitize(Nn.URL,t)||"":Hh(t,"URL")?zl(t):qA(wy(t))}function Ztt(){let t=Ae();return t&&t[qa].sanitizer}function cb(t){return t.ownerDocument.defaultView}function Xm(t){return t.ownerDocument}function T3(t){return(t??K(Re)).get(dn)==="browser"}var uu=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(uu||{}),$tt;function YA(t,e){return $tt(t,e)}function td(t,e,r,i,n){if(i!=null){let s,a=!1;rl(i)?s=i:Wl(i)&&(a=!0,i=i[ro]);let o=Ka(i);t===0&&r!==null?n==null?R3(e,r,o):ub(e,r,o,n||null,!0):t===1&&r!==null?ub(e,r,o,n||null,!0):t===2?aet(e,o,a):t===3&&e.destroyNode(o),s!=null&&cet(e,t,s,r,n)}}function Xtt(t,e){return t.createText(e)}function qtt(t,e,r){t.setValue(e,r)}function I3(t,e,r){return t.createElement(e,r)}function Ktt(t,e){O3(t,e),e[ro]=null,e[Wn]=null}function Ytt(t,e,r,i,n,s){i[ro]=n,i[Wn]=e,By(t,i,r,1,n,s)}function O3(t,e){e[qa].changeDetectionScheduler?.notify(8),By(t,e,e[nr],2,null,null)}function Jtt(t){let e=t[Wm];if(!e)return bx(t[Te],t);for(;e;){let r=null;if(Wl(e))r=e[Wm];else{let i=e[cn];i&&(r=i)}if(!r){for(;e&&!e[ua]&&e!==t;)Wl(e)&&bx(e[Te],e),e=e[hn];e===null&&(e=t),Wl(e)&&bx(e[Te],e),r=e&&e[ua]}e=r}}function Qtt(t,e,r,i){let n=cn+i,s=r.length;i>0&&(r[n-1][ua]=e),i<s-cn?(e[ua]=r[n],hF(r,cn+i,e)):(r.push(e),e[ua]=null),e[hn]=r;let a=e[Cu];a!==null&&r!==a&&P3(a,e);let o=e[Go];o!==null&&o.insertView(t),hC(e),e[xe]|=128}function P3(t,e){let r=t[gd],i=e[hn];if(Wl(i))t[xe]|=ib.HasTransplantedViews;else{let n=i[hn][ms];e[ms]!==n&&(t[xe]|=ib.HasTransplantedViews)}r===null?t[gd]=[e]:r.push(e)}function JA(t,e){let r=t[gd],i=r.indexOf(e);r.splice(i,1)}function qm(t,e){if(t.length<=cn)return;let r=cn+e,i=t[r];if(i){let n=i[Cu];n!==null&&n!==t&&JA(n,i),e>0&&(t[r-1][ua]=i[ua]);let s=Y_(t,cn+e);Ktt(i[Te],i);let a=s[Go];a!==null&&a.detachView(s[Te]),i[hn]=null,i[ua]=null,i[xe]&=-129}return i}function Ry(t,e){if(!(e[xe]&256)){let r=e[nr];r.destroyNode&&By(t,e,r,3,null,null),Jtt(e)}}function bx(t,e){if(e[xe]&256)return;let r=He(null);try{e[xe]&=-129,e[xe]|=256,e[Ls]&&oA(e[Ls]),eet(t,e),tet(t,e),e[Te].type===1&&e[nr].destroy();let i=e[Cu];if(i!==null&&rl(e[hn])){i!==e[hn]&&JA(i,e);let n=e[Go];n!==null&&n.detachView(t)}att(e)}finally{He(r)}}function tet(t,e){let r=t.cleanup,i=e[tb];if(r!==null)for(let s=0;s<r.length-1;s+=2)if(typeof r[s]=="string"){let a=r[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[r[s+1]];r[s].call(a)}i!==null&&(e[tb]=null);let n=e[Gl];if(n!==null){e[Gl]=null;for(let s=0;s<n.length;s++){let a=n[s];a()}}}function eet(t,e){let r;if(t!=null&&(r=t.destroyHooks)!=null)for(let i=0;i<r.length;i+=2){let n=e[r[i]];if(!(n instanceof Bf)){let s=r[i+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){let o=n[s[a]],l=s[a+1];ja(4,o,l);try{l.call(o)}finally{ja(5,o,l)}}else{ja(4,n,s);try{s.call(n)}finally{ja(5,n,s)}}}}}function M3(t,e,r){return iet(t,e.parent,r)}function iet(t,e,r){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return r[ro];{let{componentOffset:n}=i;if(n>-1){let{encapsulation:s}=t.data[i.directiveStart+n];if(s===Ro.None||s===Ro.Emulated)return null}return Hs(i,r)}}function ub(t,e,r,i,n){t.insertBefore(e,r,i,n)}function R3(t,e,r){t.appendChild(e,r)}function h2(t,e,r,i,n){i!==null?ub(t,e,r,i,n):R3(t,e,r)}function B3(t,e){return t.parentNode(e)}function ret(t,e){return t.nextSibling(e)}function D3(t,e,r){return set(t,e,r)}function net(t,e,r){return t.type&40?Hs(t,r):null}var set=net,d2;function QA(t,e,r,i){let n=M3(t,i,e),s=e[nr],a=i.parent||e[Wn],o=D3(a,i,e);if(n!=null)if(Array.isArray(r))for(let l=0;l<r.length;l++)h2(s,n,r[l],o,!1);else h2(s,n,r,o,!1);d2!==void 0&&d2(s,i,e,r,n)}function pm(t,e){if(e!==null){let r=e.type;if(r&3)return Hs(e,t);if(r&4)return bC(-1,t[e.index]);if(r&8){let i=e.child;if(i!==null)return pm(t,i);{let n=t[e.index];return rl(n)?bC(-1,n):Ka(n)}}else{if(r&128)return pm(t,e.next);if(r&32)return YA(e,t)()||Ka(t[e.index]);{let i=L3(t,e);if(i!==null){if(Array.isArray(i))return i[0];let n=Au(t[ms]);return pm(n,i)}else return pm(t,e.next)}}}return null}function L3(t,e){if(e!==null){let r=t[ms][Wn],i=e.projection;return r.projection[i]}return null}function bC(t,e){let r=cn+t+1;if(r<e.length){let i=e[r],n=i[Te].firstChild;if(n!==null)return pm(i,n)}return e[ku]}function aet(t,e,r){t.removeChild(null,e,r)}function tS(t,e,r,i,n,s,a){for(;r!=null;){if(r.type===128){r=r.next;continue}let o=i[r.index],l=r.type;if(a&&e===0&&(o&&Tu(Ka(o),i),r.flags|=2),(r.flags&32)!==32)if(l&8)tS(t,e,r.child,i,n,s,!1),td(e,t,n,o,s);else if(l&32){let c=YA(r,i),h;for(;h=c();)td(e,t,n,h,s);td(e,t,n,o,s)}else l&16?N3(t,e,i,r,n,s):td(e,t,n,o,s);r=a?r.projectionNext:r.next}}function By(t,e,r,i,n,s){tS(r,i,t.firstChild,e,n,s,!1)}function oet(t,e,r){let i=e[nr],n=M3(t,r,e),s=r.parent||e[Wn],a=D3(s,r,e);N3(i,0,e,r,n,a)}function N3(t,e,r,i,n,s){let a=r[ms],o=a[Wn].projection[i.projection];if(Array.isArray(o))for(let l=0;l<o.length;l++){let c=o[l];td(e,t,n,c,s)}else{let l=o,c=a[hn];g3(i)&&(l.flags|=128),tS(t,e,l,c,n,s,!0)}}function cet(t,e,r,i,n){let s=r[ku],a=Ka(r);s!==a&&td(e,t,i,s,n);for(let o=cn;o<r.length;o++){let l=r[o];By(l[Te],l,t,e,i,s)}}function uet(t,e,r,i,n){if(e)n?t.addClass(r,i):t.removeClass(r,i);else{let s=i.indexOf("-")===-1?void 0:uu.DashCase;n==null?t.removeStyle(r,i,s):(typeof n=="string"&&n.endsWith("!important")&&(n=n.slice(0,-10),s|=uu.Important),t.setStyle(r,i,n,s))}}function het(t,e,r){t.setAttribute(e,"style",r)}function F3(t,e,r){r===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",r)}function z3(t,e,r){let{mergedAttrs:i,classes:n,styles:s}=r;i!==null&&aC(t,e,i),n!==null&&F3(t,e,n),s!==null&&het(t,e,s)}var Gs={};function $(t=1){V3(qi(),Ae(),nl()+t,!1)}function V3(t,e,r,i){if(!i)if((e[xe]&3)===3){let n=t.preOrderCheckHooks;n!==null&&f_(e,n,r)}else{let n=t.preOrderHooks;n!==null&&g_(e,n,0,r)}Su(r)}function R(t,e=qe.Default){let r=Ae();if(r===null)return U(t,e);let i=Yr();return l3(i,r,qr(t),e)}function eS(){let t="invalid";throw new Error(t)}function j3(t,e,r,i,n,s){let a=He(null);try{let o=null;n&Ql.SignalBased&&(o=e[i][Fs]),o!==null&&o.transformFn!==void 0&&(s=o.transformFn(s)),n&Ql.HasDecoratorInputTransform&&(s=t.inputTransforms[i].call(e,s)),t.setInput!==null?t.setInput(e,o,s,r,i):OF(e,o,i,s)}finally{He(a)}}function det(t,e){let r=t.hostBindingOpCodes;if(r!==null)try{for(let i=0;i<r.length;i++){let n=r[i];if(n<0)Su(~n);else{let s=n,a=r[++i],o=r[++i];gQ(a,s);let l=e[s];o(2,l)}}}finally{Su(-1)}}function Dy(t,e,r,i,n,s,a,o,l,c,h){let p=e.blueprint.slice();return p[ro]=n,p[xe]=i|4|128|8|64,(c!==null||t&&t[xe]&2048)&&(p[xe]|=2048),LF(p),p[hn]=p[$d]=t,p[ln]=r,p[qa]=a||t&&t[qa],p[nr]=o||t&&t[nr],p[fd]=l||t&&t[fd]||null,p[Wn]=s,p[Sy]=ntt(),p[md]=h,p[EF]=c,p[ms]=e.type==2?t[ms]:p,p}function Jd(t,e,r,i,n){let s=t.data[e];if(s===null)s=pet(t,e,r,i,n),fQ()&&(s.flags|=32);else if(s.type&64){s.type=r,s.value=i,s.attrs=n;let a=pQ();s.injectorIndex=a===null?-1:a.injectorIndex}return Xd(s,!0),s}function pet(t,e,r,i,n){let s=UF(),a=HF(),o=a?s:s&&s.parent,l=t.data[e]=bet(t,o,r,e,i,n);return t.firstChild===null&&(t.firstChild=l),s!==null&&(a?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function U3(t,e,r,i){if(r===0)return-1;let n=e.length;for(let s=0;s<r;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return n}function H3(t,e,r,i,n){let s=nl(),a=i&2;try{Su(-1),a&&e.length>zr&&V3(t,e,zr,!1),ja(a?2:0,n),r(i,n)}finally{Su(s),ja(a?3:1,n)}}function G3(t,e,r){if(TF(e)){let i=He(null);try{let n=e.directiveStart,s=e.directiveEnd;for(let a=n;a<s;a++){let o=t.data[a];if(o.contentQueries){let l=r[a];o.contentQueries(1,l,a)}}}finally{He(i)}}}function W3(t,e,r){VF()&&(Aet(t,e,r,Hs(r,e)),(r.flags&64)===64&&K3(t,e,r))}function Z3(t,e,r=Hs){let i=e.localNames;if(i!==null){let n=e.index+1;for(let s=0;s<i.length;s+=2){let a=i[s+1],o=a===-1?r(e,t):t[a];t[n++]=o}}}function $3(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=iS(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function iS(t,e,r,i,n,s,a,o,l,c,h){let p=zr+i,m=p+n,f=met(p,m),g=typeof c=="function"?c():c;return f[Te]={type:t,blueprint:f,template:r,queries:null,viewQuery:o,declTNode:e,data:f.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1,ssrId:h}}function met(t,e){let r=[];for(let i=0;i<e;i++)r.push(i<t?null:Gs);return r}function fet(t,e,r,i){let n=i.get(ptt,x3)||r===Ro.ShadowDom,s=t.selectRootElement(e,n);return get(s),s}function get(t){vet(t)}var vet=()=>null;function _et(t,e,r,i){let n=Q3(e);n.push(r),t.firstCreatePass&&t5(t).push(i,n.length-1)}function bet(t,e,r,i,n,s){let a=e?e.injectorIndex:-1,o=0;return jF()&&(o|=128),{type:r,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:o,providerIndexes:0,value:n,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function p2(t,e,r,i,n){for(let s in e){if(!e.hasOwnProperty(s))continue;let a=e[s];if(a===void 0)continue;i??={};let o,l=Ql.None;Array.isArray(a)?(o=a[0],l=a[1]):o=a;let c=s;if(n!==null){if(!n.hasOwnProperty(s))continue;c=n[s]}t===0?m2(i,r,c,o,l):m2(i,r,c,o)}return i}function m2(t,e,r,i,n){let s;t.hasOwnProperty(r)?(s=t[r]).push(e,i):s=t[r]=[e,i],n!==void 0&&s.push(n)}function yet(t,e,r){let i=e.directiveStart,n=e.directiveEnd,s=t.data,a=e.attrs,o=[],l=null,c=null;for(let h=i;h<n;h++){let p=s[h],m=r?r.get(p):null,f=m?m.inputs:null,g=m?m.outputs:null;l=p2(0,p.inputs,h,l,f),c=p2(1,p.outputs,h,c,g);let _=l!==null&&a!==null&&!EA(e)?Net(l,h,a):null;o.push(_)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=o,e.inputs=l,e.outputs=c}function wet(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Lf(t,e,r,i,n,s,a,o){let l=Hs(e,r),c=e.inputs,h;!o&&c!=null&&(h=c[i])?(rS(t,r,h,i,n),Ey(e)&&xet(r,e.index)):e.type&3?(i=wet(i),n=a!=null?a(n,e.value||"",i):n,s.setProperty(l,i,n)):e.type&12}function xet(t,e){let r=uc(e,t);r[xe]&16||(r[xe]|=64)}function X3(t,e,r,i){if(VF()){let n=i===null?null:{"":-1},s=Tet(t,r),a,o;s===null?a=o=null:[a,o]=s,a!==null&&q3(t,e,r,a,n,o),n&&Iet(r,i,n)}r.mergedAttrs=Gm(r.mergedAttrs,r.attrs)}function q3(t,e,r,i,n,s){for(let c=0;c<i.length;c++)mC(ab(r,e),t,i[c].type);Pet(r,t.data.length,i.length);for(let c=0;c<i.length;c++){let h=i[c];h.providersResolver&&h.providersResolver(h)}let a=!1,o=!1,l=U3(t,e,i.length,null);for(let c=0;c<i.length;c++){let h=i[c];r.mergedAttrs=Gm(r.mergedAttrs,h.hostAttrs),Met(t,r,e,l,h),Oet(l,h,n),h.contentQueries!==null&&(r.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(r.flags|=64);let p=h.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(r.index),a=!0),!o&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(r.index),o=!0),l++}yet(t,r,s)}function Cet(t,e,r,i,n){let s=n.hostBindings;if(s){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let o=~e.index;ket(a)!=o&&a.push(o),a.push(r,i,s)}}function ket(t){let e=t.length;for(;e>0;){let r=t[--e];if(typeof r=="number"&&r<0)return r}return 0}function Aet(t,e,r,i){let n=r.directiveStart,s=r.directiveEnd;Ey(r)&&Ret(e,r,t.data[n+r.componentOffset]),t.firstCreatePass||ab(r,e),Tu(i,e);let a=r.initialInputs;for(let o=n;o<s;o++){let l=t.data[o],c=Eu(e,t,o,r);if(Tu(c,e),a!==null&&Let(e,o-n,c,l,r,a),Wo(l)){let h=uc(r.index,e);h[ln]=Eu(e,t,o,r)}}}function K3(t,e,r){let i=r.directiveStart,n=r.directiveEnd,s=r.index,a=vQ();try{Su(s);for(let o=i;o<n;o++){let l=t.data[o],c=e[o];dC(o),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Eet(l,c)}}finally{Su(-1),dC(a)}}function Eet(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Tet(t,e){let r=t.directiveRegistry,i=null,n=null;if(r)for(let s=0;s<r.length;s++){let a=r[s];if(vF(e,a.selectors,!1))if(i||(i=[]),Wo(a))if(a.findHostDirectiveDefs!==null){let o=[];n=n||new Map,a.findHostDirectiveDefs(a,o,n),i.unshift(...o,a);let l=o.length;yC(t,e,l)}else i.unshift(a),yC(t,e,0);else n=n||new Map,a.findHostDirectiveDefs?.(a,i,n),i.push(a)}return i===null?null:[i,n]}function yC(t,e,r){e.componentOffset=r,(t.components??=[]).push(e.index)}function Iet(t,e,r){if(e){let i=t.localNames=[];for(let n=0;n<e.length;n+=2){let s=r[e[n+1]];if(s==null)throw new Vt(-301,!1);i.push(e[n],s)}}}function Oet(t,e,r){if(r){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)r[e.exportAs[i]]=t;Wo(e)&&(r[""]=t)}}function Pet(t,e,r){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+r,t.providerIndexes=e}function Met(t,e,r,i,n){t.data[i]=n;let s=n.factory||(n.factory=xu(n.type,!0)),a=new Bf(s,Wo(n),R);t.blueprint[i]=a,r[i]=a,Cet(t,e,i,U3(t,r,n.hostVars,Gs),n)}function Ret(t,e,r){let i=Hs(e,t),n=$3(r),s=t[qa].rendererFactory,a=16;r.signals?a=4096:r.onPush&&(a=64);let o=Ly(t,Dy(t,n,null,a,i,e,null,s.createRenderer(i,r),null,null,null));t[e.index]=o}function Bet(t,e,r,i,n,s){let a=Hs(t,e);Det(e[nr],a,s,t.value,r,i,n)}function Det(t,e,r,i,n,s,a){if(s==null)t.removeAttribute(e,n,r);else{let o=a==null?wy(s):a(s,i||"",n);t.setAttribute(e,n,o,r)}}function Let(t,e,r,i,n,s){let a=s[e];if(a!==null)for(let o=0;o<a.length;){let l=a[o++],c=a[o++],h=a[o++],p=a[o++];j3(i,r,l,c,h,p)}}function Net(t,e,r){let i=null,n=0;for(;n<r.length;){let s=r[n];if(s===0){n+=4;continue}else if(s===5){n+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){i===null&&(i=[]);let a=t[s];for(let o=0;o<a.length;o+=3)if(a[o]===e){i.push(s,a[o+1],a[o+2],r[n+1]);break}}n+=2}return i}function Y3(t,e,r,i){return[t,!0,0,e,null,i,null,r,null,null]}function J3(t,e){let r=t.contentQueries;if(r!==null){let i=He(null);try{for(let n=0;n<r.length;n+=2){let s=r[n],a=r[n+1];if(a!==-1){let o=t.data[a];Iy(s),o.contentQueries(2,e[a],a)}}}finally{He(i)}}}function Ly(t,e){return t[Wm]?t[KP][ua]=e:t[Wm]=e,t[KP]=e,e}function wC(t,e,r){Iy(0);let i=He(null);try{e(t,r)}finally{He(i)}}function Q3(t){return t[tb]??=[]}function t5(t){return t.cleanup??=[]}function e5(t,e,r){return(t===null||Wo(t))&&(r=rQ(r[e.index])),r[nr]}function i5(t,e){let r=t[fd],i=r?r.get(ga,null):null;i&&i.handleError(e)}function rS(t,e,r,i,n){for(let s=0;s<r.length;){let a=r[s++],o=r[s++],l=r[s++],c=e[a],h=t.data[a];j3(h,c,i,o,l,n)}}function Fet(t,e,r){let i=DF(e,t);qtt(t[nr],i,r)}function zet(t,e){let r=uc(e,t),i=r[Te];Vet(i,r);let n=r[ro];n!==null&&r[md]===null&&(r[md]=XA(n,r[fd])),nS(i,r,r[ln])}function Vet(t,e){for(let r=e.length;r<t.blueprint.length;r++)e.push(t.blueprint[r])}function nS(t,e,r){VA(e);try{let i=t.viewQuery;i!==null&&wC(1,i,r);let n=t.template;n!==null&&H3(t,e,n,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),e[Go]?.finishViewCreation(t),t.staticContentQueries&&J3(t,e),t.staticViewQueries&&wC(2,t.viewQuery,r);let s=t.components;s!==null&&jet(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[xe]&=-5,jA()}}function jet(t,e){for(let r=0;r<e.length;r++)zet(t,e[r])}function Nf(t,e,r,i){let n=He(null);try{let s=e.tView,a=t[xe]&4096?4096:16,o=Dy(t,s,r,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=t[e.index];o[Cu]=l;let c=t[Go];return c!==null&&(o[Go]=c.createEmbeddedView(s)),nS(s,o,r),o}finally{He(n)}}function r5(t,e){let r=cn+e;if(r<t.length)return t[r]}function _d(t,e){return!e||e.firstChild===null||g3(t)}function Ff(t,e,r,i=!0){let n=e[Te];if(Qtt(n,e,t,r),i){let a=bC(r,t),o=e[nr],l=B3(o,t[ku]);l!==null&&Ytt(n,t[Wn],o,e,l,a)}let s=e[md];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function n5(t,e){let r=qm(t,e);return r!==void 0&&Ry(r[Te],r),r}function hb(t,e,r,i,n=!1){for(;r!==null;){if(r.type===128){r=n?r.projectionNext:r.next;continue}let s=e[r.index];s!==null&&i.push(Ka(s)),rl(s)&&Uet(s,i);let a=r.type;if(a&8)hb(t,e,r.child,i);else if(a&32){let o=YA(r,e),l;for(;l=o();)i.push(l)}else if(a&16){let o=L3(e,r);if(Array.isArray(o))i.push(...o);else{let l=Au(e[ms]);hb(l[Te],l,o,i,!0)}}r=n?r.projectionNext:r.next}return i}function Uet(t,e){for(let r=cn;r<t.length;r++){let i=t[r],n=i[Te].firstChild;n!==null&&hb(i[Te],i,n,e)}t[ku]!==t[ro]&&e.push(t[ku])}var s5=[];function Het(t){return t[Ls]??Get(t)}function Get(t){let e=s5.pop()??Object.create(Zet);return e.lView=t,e}function Wet(t){t.lView[Ls]!==t&&(t.lView=null,s5.push(t))}var Zet=Q(x({},Sf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ty(t.lView)},consumerOnSignalRead(){this.lView[Ls]=this}});function $et(t){let e=t[Ls]??Object.create(Xet);return e.lView=t,e}var Xet=Q(x({},Sf),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Au(t.lView);for(;e&&!a5(e[Te]);)e=Au(e);e&&NF(e)},consumerOnSignalRead(){this.lView[Ls]=this}});function a5(t){return t.type!==2}var qet=100;function o5(t,e=!0,r=0){let i=t[qa],n=i.rendererFactory,s=!1;s||n.begin?.();try{Ket(t,r)}catch(a){throw e&&i5(t,a),a}finally{s||(n.end?.(),i.inlineEffectRunner?.flush())}}function Ket(t,e){let r=ZF();try{YP(!0),xC(t,e);let i=0;for(;Zm(t);){if(i===qet)throw new Vt(103,!1);i++,xC(t,1)}}finally{YP(r)}}function Yet(t,e,r,i){let n=e[xe];if((n&256)===256)return;let s=!1,a=!1;!s&&e[qa].inlineEffectRunner?.flush(),VA(e);let o=!0,l=null,c=null;s||(a5(t)?(c=Het(e),l=H_(c)):mK()===null?(o=!1,c=$et(e),l=H_(c)):e[Ls]&&(oA(e[Ls]),e[Ls]=null));try{LF(e),mQ(t.bindingStartIndex),r!==null&&H3(t,e,r,2,i);let h=(n&3)===3;if(!s)if(h){let f=t.preOrderCheckHooks;f!==null&&f_(e,f,null)}else{let f=t.preOrderHooks;f!==null&&g_(e,f,0,null),fx(e,0)}if(a||Jet(e),l5(e,0),t.contentQueries!==null&&J3(t,e),!s)if(h){let f=t.contentCheckHooks;f!==null&&f_(e,f)}else{let f=t.contentHooks;f!==null&&g_(e,f,1),fx(e,1)}det(t,e);let p=t.components;p!==null&&u5(e,p,0);let m=t.viewQuery;if(m!==null&&wC(2,m,i),!s)if(h){let f=t.viewCheckHooks;f!==null&&f_(e,f)}else{let f=t.viewHooks;f!==null&&g_(e,f,2),fx(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[m_]){for(let f of e[m_])f();e[m_]=null}s||(e[xe]&=-73)}catch(h){throw s||Ty(e),h}finally{c!==null&&(sA(c,l),o&&Wet(c)),jA()}}function l5(t,e){for(let r=_3(t);r!==null;r=b3(r))for(let i=cn;i<r.length;i++){let n=r[i];c5(n,e)}}function Jet(t){for(let e=_3(t);e!==null;e=b3(e)){if(!(e[xe]&ib.HasTransplantedViews))continue;let r=e[gd];for(let i=0;i<r.length;i++){let n=r[i];NF(n)}}}function Qet(t,e,r){let i=uc(e,t);c5(i,r)}function c5(t,e){NA(t)&&xC(t,e)}function xC(t,e){let r=t[Te],i=t[xe],n=t[Ls],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(n?.dirty&&aA(n)),s||=!1,n&&(n.dirty=!1),t[xe]&=-9217,s)Yet(r,t,r.template,t[ln]);else if(i&8192){l5(t,1);let a=r.components;a!==null&&u5(t,a,1)}}function u5(t,e,r){for(let i=0;i<e.length;i++)Qet(t,e[i],r)}function sS(t,e){let r=ZF()?64:1088;for(t[qa].changeDetectionScheduler?.notify(e);t;){t[xe]|=r;let i=Au(t);if(uC(t)&&!i)return t;t=i}return null}var Km=class{get rootNodes(){let t=this._lView,e=t[Te];return hb(e,t,e.firstChild,[])}constructor(t,e,r=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ln]}set context(t){this._lView[ln]=t}get destroyed(){return(this._lView[xe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[hn];if(rl(t)){let e=t[eb],r=e?e.indexOf(this):-1;r>-1&&(qm(t,r),Y_(e,r))}this._attachedToViewContainer=!1}Ry(this._lView[Te],this._lView)}onDestroy(t){FF(this._lView,t)}markForCheck(){sS(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[xe]&=-129}reattach(){hC(this._lView),this._lView[xe]|=128}detectChanges(){this._lView[xe]|=1024,o5(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Vt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=uC(this._lView),e=this._lView[Cu];e!==null&&!t&&JA(e,this._lView),O3(this._lView[Te],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Vt(902,!1);this._appRef=t;let e=uC(this._lView),r=this._lView[Cu];r!==null&&!e&&P3(r,this._lView),hC(this._lView)}},Vs=(()=>{let t=class{};return t.__NG_ELEMENT_ID__=iit,t})(),tit=Vs,eit=class extends tit{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,r){let i=Nf(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:r});return new Km(i)}};function iit(){return Ny(Yr(),Ae())}function Ny(t,e){return t.type&4?new eit(e,t,Yd(t,e)):null}var R3t=new RegExp(`^(\\d+)*(${htt}|${utt})*(.*)`),rit=()=>null;function bd(t,e){return rit(t,e)}var Fy=class{},h5=new ht("",{providedIn:"root",factory:()=>!1}),d5=new ht(""),p5=new ht(""),nit=class{},m5=class{};function sit(t){let e=Error(`No component factory found for ${Ds(t)}.`);return e[ait]=t,e}var ait="ngComponent",oit=class{resolveComponentFactory(t){throw sit(t)}},f5=class{};f5.NULL=new oit;var dc=f5,Qd=class{},Gu=(()=>{let t=class{constructor(){this.destroyNode=null}};return t.__NG_ELEMENT_ID__=()=>lit(),t})();function lit(){let t=Ae(),e=Yr(),r=uc(e.index,t);return(Wl(r)?r:t)[nr]}var cit=(()=>{let t=class{};return t.\u0275prov=vt({token:t,providedIn:"root",factory:()=>null}),t})(),f2=new Set;function no(t){f2.has(t)||(f2.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var yn=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(yn||{}),g5={destroy(){}};function aS(t,e){!e&&Zd(aS);let r=e?.injector??K(Re);return T3(r)?(no("NgAfterRender"),v5(t,r,!1,e?.phase??yn.MixedReadWrite)):g5}function pc(t,e){!e&&Zd(pc);let r=e?.injector??K(Re);return T3(r)?(no("NgAfterNextRender"),v5(t,r,!0,e?.phase??yn.MixedReadWrite)):g5}function uit(t,e){if(t instanceof Function)switch(e){case yn.EarlyRead:return{earlyRead:t};case yn.Write:return{write:t};case yn.MixedReadWrite:return{mixedReadWrite:t};case yn.Read:return{read:t}}return t}function v5(t,e,r,i){let n=uit(t,i),s=e.get(oS),a=s.handler??=new dit,o=[],l=[],c=()=>{for(let f of l)a.unregister(f);h()},h=e.get(ec).onDestroy(c),p=0,m=(f,g)=>{if(!g)return;let _=r?(...S)=>(p--,p<1&&c(),g(...S)):g,w=Wd(e,()=>new hit(f,o,_));a.register(w),l.push(w),p++};return m(yn.EarlyRead,n.earlyRead),m(yn.Write,n.write),m(yn.MixedReadWrite,n.mixedReadWrite),m(yn.Read,n.read),{destroy:c}}var hit=class{constructor(t,e,r){this.phase=t,this.pipelinedArgs=e,this.callbackFn=r,this.zone=K(Zt),this.errorHandler=K(ga,{optional:!0}),K(Fy,{optional:!0})?.notify(6)}invoke(){try{let t=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,t)}catch(t){this.errorHandler?.handleError(t)}}},dit=class{constructor(){this.executingCallbacks=!1,this.buckets={[yn.EarlyRead]:new Set,[yn.Write]:new Set,[yn.MixedReadWrite]:new Set,[yn.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(let t of Object.values(this.buckets))for(let e of t)e.invoke();this.executingCallbacks=!1;for(let t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(let t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}},oS=(()=>{let t=class{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let n of i)n()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};return t.\u0275prov=vt({token:t,providedIn:"root",factory:()=>new t}),t})();function CC(t,e,r){let i=r?t.styles:null,n=r?t.classes:null,s=0;if(e!==null)for(let a=0;a<e.length;a++){let o=e[a];if(typeof o=="number")s=o;else if(s==1)n=iC(n,o);else if(s==2){let l=o,c=e[++a];i=iC(i,l+": "+c+";")}}r?t.styles=i:t.stylesWithoutHost=i,r?t.classes=n:t.classesWithoutHost=n}var pit=class extends dc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=tc(t);return new zy(e,this.ngModule)}};function g2(t,e){let r=[];for(let i in t){if(!t.hasOwnProperty(i))continue;let n=t[i];if(n===void 0)continue;let s=Array.isArray(n),a=s?n[0]:n,o=s?n[1]:Ql.None;e?r.push({propName:a,templateName:i,isSignal:(o&Ql.SignalBased)!==0}):r.push({propName:a,templateName:i})}return r}function mit(t){let e=t.toLowerCase();return e==="svg"?BF:e==="math"?iQ:null}var zy=class extends m5{get inputs(){let t=this.componentDef,e=t.inputTransforms,r=g2(t.inputs,!0);if(e!==null)for(let i of r)e.hasOwnProperty(i.propName)&&(i.transform=e[i.propName]);return r}get outputs(){return g2(this.componentDef.outputs,!1)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=DJ(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,r,i){let n=He(null);try{i=i||this.ngModule;let s=i instanceof Xa?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new TQ(t,s):t,o=a.get(Qd,null);if(o===null)throw new Vt(407,!1);let l=a.get(cit,null),c=a.get(oS,null),h=a.get(Fy,null),p={rendererFactory:o,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:h},m=o.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",g=r?fet(m,r,this.componentDef.encapsulation,a):I3(m,f,mit(f)),_=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let w=null;g!==null&&(w=XA(g,a,!0));let S=iS(0,null,null,1,0,null,null,null,null,null,null),C=Dy(null,S,null,_,null,null,p,m,a,null,w);VA(C);let b,P;try{let L=this.componentDef,H,M=null;L.findHostDirectiveDefs?(H=[],M=new Map,L.findHostDirectiveDefs(L,H,M),H.push(L)):H=[L];let E=git(C,g),it=vit(E,g,L,H,C,p,m);P=DA(S,zr),g&&yit(m,L,g,r),e!==void 0&&wit(P,this.ngContentSelectors,e),b=bit(it,L,H,M,C,[xit]),nS(S,C,null)}finally{jA()}return new fit(this.componentType,b,Yd(P,C),C,P)}finally{He(n)}}},fit=class extends nit{constructor(t,e,r,i,n){super(),this.location=r,this._rootLView=i,this._tNode=n,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new Km(i,void 0,!1),this.componentType=t}setInput(t,e){let r=this._tNode.inputs,i;if(r!==null&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let n=this._rootLView;rS(n[Te],n,i,t,e),this.previousInputValues.set(t,e);let s=uc(this._tNode.index,n);sS(s,1)}}get injector(){return new Im(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function git(t,e){let r=t[Te],i=zr;return t[i]=e,Jd(r,i,2,"#host",null)}function vit(t,e,r,i,n,s,a){let o=n[Te];_it(i,t,e,a);let l=null;e!==null&&(l=XA(e,n[fd]));let c=s.rendererFactory.createRenderer(e,r),h=16;r.signals?h=4096:r.onPush&&(h=64);let p=Dy(n,$3(r),null,h,n[t.index],t,s,c,null,null,l);return o.firstCreatePass&&yC(o,t,i.length-1),Ly(n,p),n[t.index]=p}function _it(t,e,r,i){for(let n of t)e.mergedAttrs=Gm(e.mergedAttrs,n.hostAttrs);e.mergedAttrs!==null&&(CC(e,e.mergedAttrs,!0),r!==null&&z3(i,r,e))}function bit(t,e,r,i,n,s){let a=Yr(),o=n[Te],l=Hs(a,n);q3(o,n,a,r,null,i);for(let h=0;h<r.length;h++){let p=a.directiveStart+h,m=Eu(n,o,p,a);Tu(m,n)}K3(o,n,a),l&&Tu(l,n);let c=Eu(n,o,a.directiveStart+a.componentOffset,a);if(t[ln]=n[ln]=c,s!==null)for(let h of s)h(c,e);return G3(o,a,n),c}function yit(t,e,r,i){if(i)aC(t,r,["ng-version","18.2.1"]);else{let{attrs:n,classes:s}=LJ(e.selectors[0]);n&&aC(t,r,n),s&&s.length>0&&F3(t,r,s.join(" "))}}function wit(t,e,r){let i=t.projection=[];for(let n=0;n<e.length;n++){let s=r[n];i.push(s!=null?Array.from(s):null)}}function xit(){let t=Yr();GA(Ae()[Te],t)}var Zn=(()=>{let t=class{};return t.__NG_ELEMENT_ID__=Cit,t})();function Cit(){let t=Yr();return b5(t,Ae())}var kit=Zn,_5=class extends kit{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return Yd(this._hostTNode,this._hostLView)}get injector(){return new Im(this._hostTNode,this._hostLView)}get parentInjector(){let t=WA(this._hostTNode,this._hostLView);if(i3(t)){let e=nb(t,this._hostLView),r=rb(t),i=e[Te].data[r+8];return new Im(i,e)}else return new Im(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=v2(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-cn}createEmbeddedView(t,e,r){let i,n;typeof r=="number"?i=r:r!=null&&(i=r.index,n=r.injector);let s=bd(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},n,s);return this.insertImpl(a,i,_d(this._hostTNode,s)),a}createComponent(t,e,r,i,n){let s=t&&!YJ(t),a;if(s)a=e;else{let f=e||{};a=f.index,r=f.injector,i=f.projectableNodes,n=f.environmentInjector||f.ngModuleRef}let o=s?t:new zy(tc(t)),l=r||this.parentInjector;if(!n&&o.ngModule==null){let f=(s?l:this.parentInjector).get(Xa,null);f&&(n=f)}let c=tc(o.componentType??{}),h=bd(this._lContainer,c?.id??null),p=h?.firstChild??null,m=o.create(l,i,p,n);return this.insertImpl(m.hostView,a,_d(this._hostTNode,h)),m}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let i=t._lView;if(sQ(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let o=i[hn],l=new _5(o,o[Wn],o[hn]);l.detach(l.indexOf(t))}}let n=this._adjustIndex(e),s=this._lContainer;return Ff(s,i,n,r),t.attachToViewContainerRef(),hF(yx(s),n,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=v2(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=qm(this._lContainer,e);r&&(Y_(yx(this._lContainer),e),Ry(r[Te],r))}detach(t){let e=this._adjustIndex(t,-1),r=qm(this._lContainer,e);return r&&Y_(yx(this._lContainer),e)!=null?new Km(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function v2(t){return t[eb]}function yx(t){return t[eb]||(t[eb]=[])}function b5(t,e){let r,i=e[t.index];return rl(i)?r=i:(r=Y3(i,e,null,t),e[t.index]=r,Ly(e,r)),Sit(r,e,t,i),new _5(r,t,e)}function Ait(t,e){let r=t[nr],i=r.createComment(""),n=Hs(e,t),s=B3(r,n);return ub(r,s,i,ret(r,n),!1),i}var Sit=Iit,Eit=()=>!1;function Tit(t,e,r){return Eit(t,e,r)}function Iit(t,e,r,i){if(t[ku])return;let n;r.type&8?n=Ka(i):n=Ait(e,r),t[ku]=n}var Oit=class y5{constructor(e){this.queryList=e,this.matches=null}clone(){return new y5(this.queryList)}setDirty(){this.queryList.setDirty()}},Pit=class w5{constructor(e=[]){this.queries=e}createEmbeddedView(e){let r=e.queries;if(r!==null){let i=e.contentQueries!==null?e.contentQueries[0]:r.length,n=[];for(let s=0;s<i;s++){let a=r.getByIndex(s),o=this.queries[a.indexInDeclarationView];n.push(o.clone())}return new w5(n)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let r=0;r<this.queries.length;r++)cS(e,r).matches!==null&&this.queries[r].setDirty()}},x5=class{constructor(t,e,r=null){this.flags=e,this.read=r,typeof t=="string"?this.predicate=Fit(t):this.predicate=t}},Mit=class C5{constructor(e=[]){this.queries=e}elementStart(e,r){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,r)}elementEnd(e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(e)}embeddedTView(e){let r=null;for(let i=0;i<this.length;i++){let n=r!==null?r.length:0,s=this.getByIndex(i).embeddedTView(e,n);s&&(s.indexInDeclarationView=i,r!==null?r.push(s):r=[s])}return r!==null?new C5(r):null}template(e,r){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,r)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Rit=class k5{constructor(e,r=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(e,r){this.isApplyingToNode(r)&&this.matchTNode(e,r)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,r){this.elementStart(e,r)}embeddedTView(e,r){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,r),new k5(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let r=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==r;)i=i.parent;return r===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,r){let i=this.metadata.predicate;if(Array.isArray(i))for(let n=0;n<i.length;n++){let s=i[n];this.matchTNodeWithReadOption(e,r,Bit(r,s)),this.matchTNodeWithReadOption(e,r,v_(r,e,s,!1,!1))}else i===Vs?r.type&4&&this.matchTNodeWithReadOption(e,r,-1):this.matchTNodeWithReadOption(e,r,v_(r,e,i,!1,!1))}matchTNodeWithReadOption(e,r,i){if(i!==null){let n=this.metadata.read;if(n!==null)if(n===te||n===Zn||n===Vs&&r.type&4)this.addMatch(r.index,-2);else{let s=v_(r,e,n,!1,!1);s!==null&&this.addMatch(r.index,s)}else this.addMatch(r.index,i)}}addMatch(e,r){this.matches===null?this.matches=[e,r]:this.matches.push(e,r)}};function Bit(t,e){let r=t.localNames;if(r!==null){for(let i=0;i<r.length;i+=2)if(r[i]===e)return r[i+1]}return null}function Dit(t,e){return t.type&11?Yd(t,e):t.type&4?Ny(t,e):null}function Lit(t,e,r,i){return r===-1?Dit(e,t):r===-2?Nit(t,e,i):Eu(t,t[Te],r,e)}function Nit(t,e,r){if(r===te)return Yd(e,t);if(r===Vs)return Ny(e,t);if(r===Zn)return b5(e,t)}function A5(t,e,r,i){let n=e[Go].queries[i];if(n.matches===null){let s=t.data,a=r.matches,o=[];for(let l=0;a!==null&&l<a.length;l+=2){let c=a[l];if(c<0)o.push(null);else{let h=s[c];o.push(Lit(e,h,a[l+1],r.metadata.read))}}n.matches=o}return n.matches}function kC(t,e,r,i){let n=t.queries.getByIndex(r),s=n.matches;if(s!==null){let a=A5(t,e,n,r);for(let o=0;o<s.length;o+=2){let l=s[o];if(l>0)i.push(a[o/2]);else{let c=s[o+1],h=e[-l];for(let p=cn;p<h.length;p++){let m=h[p];m[Cu]===m[hn]&&kC(m[Te],m,c,i)}if(h[gd]!==null){let p=h[gd];for(let m=0;m<p.length;m++){let f=p[m];kC(f[Te],f,c,i)}}}}}return i}function lS(t,e){return t[Go].queries[e].queryList}function S5(t,e,r){let i=new $m((r&4)===4);return _et(t,e,i,i.destroy),(e[Go]??=new Pit).queries.push(new Oit(i))-1}function E5(t,e,r){let i=qi();return i.firstCreatePass&&(I5(i,new x5(t,e,r),-1),(e&2)===2&&(i.staticViewQueries=!0)),S5(i,Ae(),e)}function T5(t,e,r,i){let n=qi();if(n.firstCreatePass){let s=Yr();I5(n,new x5(e,r,i),s.index),zit(n,t),(r&2)===2&&(n.staticContentQueries=!0)}return S5(n,Ae(),r)}function Fit(t){return t.split(",").map(e=>e.trim())}function I5(t,e,r){t.queries===null&&(t.queries=new Mit),t.queries.track(new Rit(e,r))}function zit(t,e){let r=t.contentQueries||(t.contentQueries=[]),i=r.length?r[r.length-1]:-1;e!==i&&r.push(t.queries.length-1,e)}function cS(t,e){return t.queries.getByIndex(e)}function O5(t,e){let r=t[Te],i=cS(r,e);return i.crossesNgTemplate?kC(r,t,e,[]):A5(r,t,i,e)}function Ym(t){return typeof t=="function"&&t[Fs]!==void 0}function un(t,e){no("NgSignals");let r=wK(t),i=r[Fs];return e?.equal&&(i.equal=e.equal),r.set=n=>lA(i,n),r.update=n=>xK(i,n),r.asReadonly=Vit.bind(r),r}function Vit(){let t=this[Fs];if(t.readonlyFn===void 0){let e=()=>this();e[Fs]=t,t.readonlyFn=e}return t.readonlyFn}function P5(t){return Ym(t)&&typeof t.set=="function"}function M5(t,e){let r,i=bN(()=>{r._dirtyCounter();let n=jit(r,t);if(e&&n===void 0)throw new Vt(-951,!1);return n});return r=i[Fs],r._dirtyCounter=un(0),r._flatValue=void 0,i}function R5(){return M5(!0,!1)}function B5(){return M5(!0,!0)}function D5(t,e){let r=t[Fs];r._lView=Ae(),r._queryIndex=e,r._queryList=lS(r._lView,e),r._queryList.onDirty(()=>r._dirtyCounter.update(i=>i+1))}function jit(t,e){let r=t._lView,i=t._queryIndex;if(r===void 0||i===void 0||r[xe]&4)return e?void 0:bn;let n=lS(r,i),s=O5(r,i);return n.reset(s,m3),e?n.first:n._changesDetected||t._flatValue===void 0?t._flatValue=n.toArray():t._flatValue}function _2(t,e){return R5()}function Uit(t,e){return B5()}var Hit=(_2.required=Uit,_2);function b2(t,e){return R5()}function Git(t,e){return B5()}var Wit=(b2.required=Git,b2);function Zit(t){return Object.getPrototypeOf(t.prototype).constructor}function oi(t){let e=Zit(t.type),r=!0,i=[t];for(;e;){let n;if(Wo(t))n=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Vt(903,!1);n=e.\u0275dir}if(n){if(r){i.push(n);let a=t;a.inputs=vv(t.inputs),a.inputTransforms=vv(t.inputTransforms),a.declaredInputs=vv(t.declaredInputs),a.outputs=vv(t.outputs);let o=n.hostBindings;o&&Yit(t,o);let l=n.viewQuery,c=n.contentQueries;if(l&&qit(t,l),c&&Kit(t,c),$it(t,n),QY(t.outputs,n.outputs),Wo(n)&&n.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(n.data.animation)}}let s=n.features;if(s)for(let a=0;a<s.length;a++){let o=s[a];o&&o.ngInherit&&o(t),o===oi&&(r=!1)}}e=Object.getPrototypeOf(e)}Xit(i)}function $it(t,e){for(let r in e.inputs){if(!e.inputs.hasOwnProperty(r)||t.inputs.hasOwnProperty(r))continue;let i=e.inputs[r];if(i!==void 0&&(t.inputs[r]=i,t.declaredInputs[r]=e.declaredInputs[r],e.inputTransforms!==null)){let n=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(n))continue;t.inputTransforms??={},t.inputTransforms[n]=e.inputTransforms[n]}}}function Xit(t){let e=0,r=null;for(let i=t.length-1;i>=0;i--){let n=t[i];n.hostVars=e+=n.hostVars,n.hostAttrs=Gm(n.hostAttrs,r=Gm(r,n.hostAttrs))}}function vv(t){return t===Ho?{}:t===bn?[]:t}function qit(t,e){let r=t.viewQuery;r?t.viewQuery=(i,n)=>{e(i,n),r(i,n)}:t.viewQuery=e}function Kit(t,e){let r=t.contentQueries;r?t.contentQueries=(i,n,s)=>{e(i,n,s),r(i,n,s)}:t.contentQueries=e}function Yit(t,e){let r=t.hostBindings;r?t.hostBindings=(i,n)=>{e(i,n),r(i,n)}:t.hostBindings=e}function uS(t){let e=r=>{let i=(Array.isArray(t)?t:t()).map(n=>typeof n=="function"?{directive:qr(n),inputs:Ho,outputs:Ho}:{directive:qr(n.directive),inputs:y2(n.inputs),outputs:y2(n.outputs)});r.hostDirectives===null?(r.findHostDirectiveDefs=L5,r.hostDirectives=i):r.hostDirectives.unshift(...i)};return e.ngInherit=!0,e}function L5(t,e,r){if(t.hostDirectives!==null)for(let i of t.hostDirectives){let n=TA(i.directive);Jit(n.declaredInputs,i.inputs),L5(n,e,r),r.set(n,i),e.push(n)}}function y2(t){if(t===void 0||t.length===0)return Ho;let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}function Jit(t,e){for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],n=t[r];t[i]=n}}function ji(t){let e=t.inputConfig,r={};for(let i in e)if(e.hasOwnProperty(i)){let n=e[i];Array.isArray(n)&&n[3]&&(r[i]=n[3])}t.inputTransforms=r}var AC=class{},N5=class extends AC{constructor(t){super(),this.componentFactoryResolver=new pit(this),this.instance=null;let e=new MA([...t.providers,{provide:AC,useValue:this},{provide:dc,useValue:this.componentFactoryResolver}],t.parent||Ay(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Qit(t,e,r=null){return new N5({providers:t,parent:e,debugName:r,runEnvironmentInitializers:!0}).injector}function F5(t){return ert(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function trt(t,e){if(Array.isArray(t))for(let r=0;r<t.length;r++)e(t[r]);else{let r=t[Symbol.iterator](),i;for(;!(i=r.next()).done;)e(i.value)}}function ert(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function z5(t,e,r){return t[e]=r}function irt(t,e){return t[e]}function va(t,e,r){let i=t[e];return Object.is(i,r)?!1:(t[e]=r,!0)}function rrt(t){return(t.flags&32)===32}function nrt(t,e,r,i,n,s,a,o,l){let c=e.consts,h=Jd(e,t,4,a||null,o||null);X3(e,r,h,vd(c,l)),GA(e,h);let p=h.tView=iS(2,h,i,n,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function db(t,e,r,i,n,s,a,o,l,c){let h=r+zr,p=e.firstCreatePass?nrt(h,e,t,i,n,s,a,o,l):e.data[h];Xd(p,!1);let m=srt(e,t,p,r);UA()&&QA(e,t,m,p),Tu(m,t);let f=Y3(m,t,m,p);return t[h]=f,Ly(t,f),Tit(f,p,t),BA(p)&&W3(e,t,p),l!=null&&Z3(t,p,c),p}function Wt(t,e,r,i,n,s,a,o){let l=Ae(),c=qi(),h=vd(c.consts,s);return db(l,c,t,e,r,i,n,h,a,o),Wt}var srt=art;function art(t,e,r,i){return HA(!0),e[nr].createComment("")}function ke(t,e,r,i){let n=Ae(),s=hc();if(va(n,s,e)){let a=qi(),o=qd();Bet(o,n,t,e,r,i)}return ke}function hS(t,e,r,i){return va(t,hc(),r)?e+wy(r)+i:Gs}function _v(t,e){return t<<17|e<<2}function Iu(t){return t>>17&32767}function ort(t){return(t&2)==2}function lrt(t,e){return t&131071|e<<17}function SC(t){return t|2}function yd(t){return(t&131068)>>2}function wx(t,e){return t&-131069|e<<2}function crt(t){return(t&1)===1}function EC(t){return t|1}function urt(t,e,r,i,n,s){let a=s?e.classBindings:e.styleBindings,o=Iu(a),l=yd(a);t[i]=r;let c=!1,h;if(Array.isArray(r)){let p=r;h=p[1],(h===null||Rf(p,h)>0)&&(c=!0)}else h=r;if(n)if(l!==0){let p=Iu(t[o+1]);t[i+1]=_v(p,o),p!==0&&(t[p+1]=wx(t[p+1],i)),t[o+1]=lrt(t[o+1],i)}else t[i+1]=_v(o,0),o!==0&&(t[o+1]=wx(t[o+1],i)),o=i;else t[i+1]=_v(l,0),o===0?o=i:t[l+1]=wx(t[l+1],i),l=i;c&&(t[i+1]=SC(t[i+1])),w2(t,h,i,!0),w2(t,h,i,!1),hrt(e,h,t,i,s),a=_v(o,l),s?e.classBindings=a:e.styleBindings=a}function hrt(t,e,r,i,n){let s=n?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Rf(s,e)>=0&&(r[i+1]=EC(r[i+1]))}function w2(t,e,r,i){let n=t[r+1],s=e===null,a=i?Iu(n):yd(n),o=!1;for(;a!==0&&(o===!1||s);){let l=t[a],c=t[a+1];drt(l,e)&&(o=!0,t[a+1]=i?EC(c):SC(c)),a=i?Iu(c):yd(c)}o&&(t[r+1]=i?SC(n):EC(n))}function drt(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Rf(t,e)>=0:!1}var la={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function prt(t){return t.substring(la.key,la.keyEnd)}function mrt(t){return frt(t),V5(t,j5(t,0,la.textEnd))}function V5(t,e){let r=la.textEnd;return r===e?-1:(e=la.keyEnd=grt(t,la.key=e,r),j5(t,e,r))}function frt(t){la.key=0,la.keyEnd=0,la.value=0,la.valueEnd=0,la.textEnd=t.length}function j5(t,e,r){for(;e<r&&t.charCodeAt(e)<=32;)e++;return e}function grt(t,e,r){for(;e<r&&t.charCodeAt(e)>32;)e++;return e}function mt(t,e,r){let i=Ae(),n=hc();if(va(i,n,e)){let s=qi(),a=qd();Lf(s,a,i,t,e,i[nr],r,!1)}return mt}function TC(t,e,r,i,n){let s=e.inputs,a=n?"class":"style";rS(t,r,s[a],a,i)}function Ya(t,e,r){return H5(t,e,r,!1),Ya}function ee(t,e){return H5(t,e,null,!0),ee}function Ai(t){G5(xrt,U5,t,!0)}function U5(t,e){for(let r=mrt(e);r>=0;r=V5(e,r))Cy(t,prt(e),!0)}function H5(t,e,r,i){let n=Ae(),s=qi(),a=XF(2);if(s.firstUpdatePass&&Z5(s,t,a,i),e!==Gs&&va(n,a,e)){let o=s.data[nl()];$5(s,o,n,n[nr],t,n[a+1]=krt(e,r),i,a)}}function G5(t,e,r,i){let n=qi(),s=XF(2);n.firstUpdatePass&&Z5(n,null,s,i);let a=Ae();if(r!==Gs&&va(a,s,r)){let o=n.data[nl()];if(X5(o,i)&&!W5(n,s)){let l=i?o.classesWithoutHost:o.stylesWithoutHost;l!==null&&(r=iC(l,r||"")),TC(n,o,a,r,i)}else Crt(n,o,a,a[nr],a[s+1],a[s+1]=wrt(t,e,r),i,s)}}function W5(t,e){return e>=t.expandoStartIndex}function Z5(t,e,r,i){let n=t.data;if(n[r+1]===null){let s=n[nl()],a=W5(t,r);X5(s,i)&&e===null&&!a&&(e=!1),e=vrt(n,s,e,i),urt(n,s,e,r,a,i)}}function vrt(t,e,r,i){let n=FA(t),s=i?e.residualClasses:e.residualStyles;if(n===null)(i?e.classBindings:e.styleBindings)===0&&(r=xx(null,t,e,r,i),r=Jm(r,e.attrs,i),s=null);else{let a=e.directiveStylingLast;if(a===-1||t[a]!==n)if(r=xx(n,t,e,r,i),s===null){let o=_rt(t,e,i);o!==void 0&&Array.isArray(o)&&(o=xx(null,t,e,o[1],i),o=Jm(o,e.attrs,i),brt(t,e,i,o))}else s=yrt(t,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),r}function _rt(t,e,r){let i=r?e.classBindings:e.styleBindings;if(yd(i)!==0)return t[Iu(i)]}function brt(t,e,r,i){let n=r?e.classBindings:e.styleBindings;t[Iu(n)]=i}function yrt(t,e,r){let i,n=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<n;s++){let a=t[s].hostAttrs;i=Jm(i,a,r)}return Jm(i,e.attrs,r)}function xx(t,e,r,i,n){let s=null,a=r.directiveEnd,o=r.directiveStylingLast;for(o===-1?o=r.directiveStart:o++;o<a&&(s=e[o],i=Jm(i,s.hostAttrs,n),s!==t);)o++;return t!==null&&(r.directiveStylingLast=o),i}function Jm(t,e,r){let i=r?1:2,n=-1;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];typeof a=="number"?n=a:n===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Cy(t,a,r?!0:e[++s]))}return t===void 0?null:t}function wrt(t,e,r){if(r==null||r==="")return bn;let i=[],n=zl(r);if(Array.isArray(n))for(let s=0;s<n.length;s++)t(i,n[s],!0);else if(typeof n=="object")for(let s in n)n.hasOwnProperty(s)&&t(i,s,n[s]);else typeof n=="string"&&e(i,n);return i}function xrt(t,e,r){let i=String(e);i!==""&&!i.includes(" ")&&Cy(t,i,r)}function Crt(t,e,r,i,n,s,a,o){n===Gs&&(n=bn);let l=0,c=0,h=0<n.length?n[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let m=l<n.length?n[l+1]:void 0,f=c<s.length?s[c+1]:void 0,g=null,_;h===p?(l+=2,c+=2,m!==f&&(g=p,_=f)):p===null||h!==null&&h<p?(l+=2,g=h):(c+=2,g=p,_=f),g!==null&&$5(t,e,r,i,g,_,a,o),h=l<n.length?n[l]:null,p=c<s.length?s[c]:null}}function $5(t,e,r,i,n,s,a,o){if(!(e.type&3))return;let l=t.data,c=l[o+1],h=crt(c)?x2(l,e,r,n,yd(c),a):void 0;if(!pb(h)){pb(s)||ort(c)&&(s=x2(l,null,r,n,o,a));let p=DF(nl(),r);uet(i,a,p,n,s)}}function x2(t,e,r,i,n,s){let a=e===null,o;for(;n>0;){let l=t[n],c=Array.isArray(l),h=c?l[1]:l,p=h===null,m=r[n+1];m===Gs&&(m=p?bn:void 0);let f=p?px(m,i):h===i?m:void 0;if(c&&!pb(f)&&(f=px(l,i)),pb(f)&&(o=f,a))return o;let g=t[n+1];n=a?Iu(g):yd(g)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(o=px(l,i))}return o}function pb(t){return t!==void 0}function krt(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ds(zl(t)))),t}function X5(t,e){return(t.flags&(e?8:16))!==0}function Zo(t,e,r){let i=Ae(),n=hS(i,t,e,r);G5(Cy,U5,n,!0)}var Art=class{destroy(t){}updateValue(t,e){}swap(t,e){let r=Math.min(t,e),i=Math.max(t,e),n=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,n),this.attach(i,s)}else this.attach(r,n)}move(t,e){this.attach(e,this.detach(t))}};function Cx(t,e,r,i,n){return t===r&&Object.is(e,i)?1:Object.is(n(t,e),n(r,i))?-1:0}function Srt(t,e,r){let i,n,s=0,a=t.length-1,o;if(Array.isArray(e)){let l=e.length-1;for(;s<=a&&s<=l;){let c=t.at(s),h=e[s],p=Cx(s,c,s,h,r);if(p!==0){p<0&&t.updateValue(s,h),s++;continue}let m=t.at(a),f=e[l],g=Cx(a,m,l,f,r);if(g!==0){g<0&&t.updateValue(a,f),a--,l--;continue}let _=r(s,c),w=r(a,m),S=r(s,h);if(Object.is(S,w)){let C=r(l,f);Object.is(C,_)?(t.swap(s,a),t.updateValue(a,f),l--,a--):t.move(a,s),t.updateValue(s,h),s++;continue}if(i??=new A2,n??=k2(t,s,a,r),IC(t,i,s,S))t.updateValue(s,h),s++,a++;else if(n.has(S))i.set(_,t.detach(s)),a--;else{let C=t.create(s,e[s]);t.attach(s,C),s++,a++}}for(;s<=l;)C2(t,i,r,s,e[s]),s++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&s<=a;){let h=t.at(s),p=c.value,m=Cx(s,h,s,p,r);if(m!==0)m<0&&t.updateValue(s,p),s++,c=l.next();else{i??=new A2,n??=k2(t,s,a,r);let f=r(s,p);if(IC(t,i,s,f))t.updateValue(s,p),s++,a++,c=l.next();else if(!n.has(f))t.attach(s,t.create(s,p)),s++,a++,c=l.next();else{let g=r(s,h);i.set(g,t.detach(s)),a--}}}for(;!c.done;)C2(t,i,r,t.length,c.value),c=l.next()}for(;s<=a;)t.destroy(t.detach(a--));i?.forEach(l=>{t.destroy(l)})}function IC(t,e,r,i){return e!==void 0&&e.has(i)?(t.attach(r,e.get(i)),e.delete(i),!0):!1}function C2(t,e,r,i,n){if(IC(t,e,i,r(i,n)))t.updateValue(i,n);else{let s=t.create(i,n);t.attach(i,s)}}function k2(t,e,r,i){let n=new Set;for(let s=e;s<=r;s++)n.add(i(s,t.at(s)));return n}var A2=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,r]of this.kvMap)if(t(r,e),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,e)}}};function ae(t,e){no("NgControlFlow");let r=Ae(),i=hc(),n=r[i]!==Gs?r[i]:-1,s=n!==-1?mb(r,zr+n):void 0,a=0;if(va(r,i,t)){let o=He(null);try{if(s!==void 0&&n5(s,a),t!==-1){let l=zr+t,c=mb(r,l),h=OC(r[Te],l),p=bd(c,h.tView.ssrId),m=Nf(r,h,e,{dehydratedView:p});Ff(c,m,a,_d(h,p))}}finally{He(o)}}else if(s!==void 0){let o=r5(s,a);o!==void 0&&(o[ln]=e)}}var Ert=class{constructor(t,e,r){this.lContainer=t,this.$implicit=e,this.$index=r}get $count(){return this.lContainer.length-cn}};function Trt(t){return t}function wd(t,e){return e}var Irt=class{constructor(t,e,r){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=r}};function ic(t,e,r,i,n,s,a,o,l,c,h,p,m){no("NgControlFlow");let f=Ae(),g=qi(),_=l!==void 0,w=Ae(),S=o?a.bind(w[ms][ln]):a,C=new Irt(_,S);w[zr+t]=C,db(f,g,t+1,e,r,i,n,vd(g.consts,s)),_&&db(f,g,t+2,l,c,h,p,vd(g.consts,m))}var Ort=class extends Art{constructor(t,e,r){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-cn}at(t){return this.getLView(t)[ln].$implicit}attach(t,e){let r=e[md];this.needsIndexUpdate||=t!==this.length,Ff(this.lContainer,e,t,_d(this.templateTNode,r))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,Prt(this.lContainer,t)}create(t,e){let r=bd(this.lContainer,this.templateTNode.tView.ssrId),i=Nf(this.hostLView,this.templateTNode,new Ert(this.lContainer,e,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(t){Ry(t[Te],t),this.operationsCounter?.recordDestroy()}updateValue(t,e){this.getLView(t)[ln].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[ln].$index=t}getLView(t){return Mrt(this.lContainer,t)}};function rc(t){let e=He(null),r=nl();try{let i=Ae(),n=i[Te],s=i[r],a=r+1,o=mb(i,a);if(s.liveCollection===void 0){let c=OC(n,a);s.liveCollection=new Ort(o,i,c)}else s.liveCollection.reset();let l=s.liveCollection;if(Srt(l,t,s.trackByFn),l.updateIndexes(),s.hasEmptyBlock){let c=hc(),h=l.length===0;if(va(i,c,h)){let p=r+2,m=mb(i,p);if(h){let f=OC(n,p),g=bd(m,f.tView.ssrId),_=Nf(i,f,void 0,{dehydratedView:g});Ff(m,_,0,_d(f,g))}else n5(m,0)}}}finally{He(e)}}function mb(t,e){return t[e]}function Prt(t,e){return qm(t,e)}function Mrt(t,e){return r5(t,e)}function OC(t,e){return DA(t,e)}function Rrt(t,e,r,i,n,s){let a=e.consts,o=vd(a,n),l=Jd(e,t,2,i,o);return X3(e,r,l,vd(a,s)),l.attrs!==null&&CC(l,l.attrs,!1),l.mergedAttrs!==null&&CC(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function N(t,e,r,i){let n=Ae(),s=qi(),a=zr+t,o=n[nr],l=s.firstCreatePass?Rrt(a,s,n,e,r,i):s.data[a],c=Brt(s,n,l,o,e,t);n[a]=c;let h=BA(l);return Xd(l,!0),z3(o,c,l),!rrt(l)&&UA()&&QA(s,n,c,l),lQ()===0&&Tu(c,n),cQ(),h&&(W3(s,n,l),G3(s,l,n)),i!==null&&Z3(n,l),N}function F(){let t=Yr();HF()?GF():(t=t.parent,Xd(t,!1));let e=t;hQ(e)&&dQ(),uQ();let r=qi();return r.firstCreatePass&&(GA(r,t),TF(t)&&r.queries.elementEnd(t)),e.classesWithoutHost!=null&&SQ(e)&&TC(r,e,Ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&EQ(e)&&TC(r,e,Ae(),e.stylesWithoutHost,!1),F}function Ot(t,e,r,i){return N(t,e,r,i),F(),Ot}var Brt=(t,e,r,i,n,s)=>(HA(!0),I3(i,n,xQ()));function Qe(){return Ae()}function _a(t,e,r){let i=Ae(),n=hc();if(va(i,n,e)){let s=qi(),a=qd();Lf(s,a,i,t,e,i[nr],r,!0)}return _a}function q5(t,e,r){let i=Ae(),n=hc();if(va(i,n,e)){let s=qi(),a=qd(),o=FA(s.data),l=e5(o,a,i);Lf(s,a,i,t,e,l,r,!0)}return q5}var fb="en-US",Drt=fb;function Lrt(t){typeof t=="string"&&(Drt=t.toLowerCase().replace(/_/g,"-"))}var Nrt=(t,e,r)=>{};function yt(t,e,r,i){let n=Ae(),s=qi(),a=Yr();return dS(s,n,n[nr],a,t,e,i),yt}function K5(t,e){let r=Yr(),i=Ae(),n=qi(),s=FA(n.data),a=e5(s,r,i);return dS(n,i,a,r,t,e),K5}function Frt(t,e,r,i){let n=t.cleanup;if(n!=null)for(let s=0;s<n.length-1;s+=2){let a=n[s];if(a===r&&n[s+1]===i){let o=e[tb],l=n[s+2];return o.length>l?o[l]:null}typeof a=="string"&&(s+=2)}return null}function dS(t,e,r,i,n,s,a){let o=BA(i),l=t.firstCreatePass&&t5(t),c=e[ln],h=Q3(e),p=!0;if(i.type&3||a){let g=Hs(i,e),_=a?a(g):g,w=h.length,S=a?b=>a(Ka(b[i.index])):i.index,C=null;if(!a&&o&&(C=Frt(t,e,n,i.index)),C!==null){let b=C.__ngLastListenerFn__||C;b.__ngNextListenerFn__=s,C.__ngLastListenerFn__=s,p=!1}else{s=E2(i,e,c,s),Nrt(g,n,s);let b=r.listen(_,n,s);h.push(s,b),l&&l.push(n,S,w,w+1)}}else s=E2(i,e,c,s);let m=i.outputs,f;if(p&&m!==null&&(f=m[n])){let g=f.length;if(g)for(let _=0;_<g;_+=2){let w=f[_],S=f[_+1],C=e[w][S].subscribe(s),b=h.length;h.push(s,C),l&&l.push(n,i.index,b,-(b+1))}}}function S2(t,e,r,i){let n=He(null);try{return ja(6,e,r),r(i)!==!1}catch(s){return i5(t,s),!1}finally{ja(7,e,r),He(n)}}function E2(t,e,r,i){return function n(s){if(s===Function)return i;let a=t.componentOffset>-1?uc(t.index,e):e;sS(a,5);let o=S2(e,r,i,s),l=n.__ngNextListenerFn__;for(;l;)o=S2(e,r,l,s)&&o,l=l.__ngNextListenerFn__;return o}}function Rt(t=1){return bQ(t)}function zrt(t,e){let r=null,i=OJ(t);for(let n=0;n<e.length;n++){let s=e[n];if(s==="*"){r=n;continue}if(i===null?vF(t,s,!0):RJ(i,s))return n}return r}function Mi(t){let e=Ae()[ms][Wn];if(!e.projection){let r=t?t.length:1,i=e.projection=wJ(r,null),n=i.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let a=t?zrt(s,t):0;a!==null&&(n[a]?n[a].projectionNext=s:i[a]=s,n[a]=s)}s=s.next}}}function pe(t,e=0,r,i,n,s){let a=Ae(),o=qi(),l=i?t+1:null;l!==null&&db(a,o,l,i,n,s,null,r);let c=Jd(o,zr+t,16,null,r||null);c.projection===null&&(c.projection=e),GF();let h=!a[md]||jF();a[ms][Wn].projection[c.projection]===null&&l!==null?Vrt(a,o,l):h&&(c.flags&32)!==32&&oet(o,a,c)}function Vrt(t,e,r){let i=zr+r,n=e.data[i],s=t[i],a=bd(s,n.tView.ssrId),o=Nf(t,n,void 0,{dehydratedView:a});Ff(s,o,0,_d(n,a))}function Y5(t,e,r){return J5(t,"",e,"",r),Y5}function J5(t,e,r,i,n){let s=Ae(),a=hS(s,e,r,i);if(a!==Gs){let o=qi(),l=qd();Lf(o,l,s,t,a,s[nr],n,!1)}return J5}function Xi(t,e,r,i){T5(t,e,r,i)}function gi(t,e,r){E5(t,e,r)}function oe(t){let e=Ae(),r=qi(),i=zA();Iy(i+1);let n=cS(r,i);if(t.dirty&&nQ(e)===((n.metadata.flags&2)===2)){if(n.matches===null)t.reset([]);else{let s=O5(e,i);t.reset(s,m3),t.notifyOnChanges()}return!0}return!1}function le(){return lS(Ae(),zA())}function jrt(t,e,r,i,n){D5(e,T5(t,r,i,n))}function Urt(t,e,r,i){D5(t,E5(e,r,i))}function Q5(t=1){Iy(zA()+t)}function pS(t,e,r,i){r>=t.data.length&&(t.data[r]=null,t.blueprint[r]=null),e[r]=i}function fi(t){let e=WF();return LA(e,zr+t)}function ut(t,e=""){let r=Ae(),i=qi(),n=t+zr,s=i.firstCreatePass?Jd(i,n,1,e,null):i.data[n],a=Hrt(i,r,s,e,t);r[n]=a,UA()&&QA(i,r,a,s),Xd(s,!1)}var Hrt=(t,e,r,i,n)=>(HA(!0),Xtt(e[nr],i));function Oi(t){return Sn("",t,""),Oi}function Sn(t,e,r){let i=Ae(),n=hS(i,t,e,r);return n!==Gs&&Fet(i,nl(),n),Sn}function tz(t,e,r){P5(e)&&(e=e());let i=Ae(),n=hc();if(va(i,n,e)){let s=qi(),a=qd();Lf(s,a,i,t,e,i[nr],r,!1)}return tz}function Grt(t,e){let r=P5(t);return r&&t.set(e),r}function ez(t,e){let r=Ae(),i=qi(),n=Yr();return dS(i,r,r[nr],n,t,e),ez}var iz={};function PC(t){let e=qi(),r=Ae(),i=t+zr,n=Jd(e,i,128,null,null);return Xd(n,!1),pS(e,r,i,iz),PC}function T2(t){no("NgLet");let e=qi(),r=Ae(),i=nl();return pS(e,r,i,t),t}function rz(t){let e=WF(),r=LA(e,zr+t);if(r===iz)throw new Vt(314,!1);return r}function Wrt(t,e,r){let i=qi();if(i.firstCreatePass){let n=Wo(t);MC(r,i.data,i.blueprint,n,!0),MC(e,i.data,i.blueprint,n,!1)}}function MC(t,e,r,i,n){if(t=qr(t),Array.isArray(t))for(let s=0;s<t.length;s++)MC(t[s],e,r,i,n);else{let s=qi(),a=Ae(),o=Yr(),l=pd(t)?t:qr(t.provide),c=AF(t),h=o.providerIndexes&1048575,p=o.directiveStart,m=o.providerIndexes>>20;if(pd(t)||!t.multi){let f=new Bf(c,n,R),g=Ax(l,e,n?h:h+m,p);g===-1?(mC(ab(o,a),s,l),kx(s,t,e.length),e.push(l),o.directiveStart++,o.directiveEnd++,n&&(o.providerIndexes+=1048576),r.push(f),a.push(f)):(r[g]=f,a[g]=f)}else{let f=Ax(l,e,h+m,p),g=Ax(l,e,h,h+m),_=f>=0&&r[f],w=g>=0&&r[g];if(n&&!w||!n&&!_){mC(ab(o,a),s,l);let S=Xrt(n?$rt:Zrt,r.length,n,i,c);!n&&w&&(r[g].providerFactory=S),kx(s,t,e.length,0),e.push(l),o.directiveStart++,o.directiveEnd++,n&&(o.providerIndexes+=1048576),r.push(S),a.push(S)}else{let S=nz(r[n?g:f],c,!n&&i);kx(s,t,f>-1?f:g,S)}!n&&i&&w&&r[g].componentProviders++}}}function kx(t,e,r,i){let n=pd(e),s=GJ(e);if(n||s){let a=(s?qr(e.useClass):e).prototype.ngOnDestroy;if(a){let o=t.destroyHooks||(t.destroyHooks=[]);if(!n&&e.multi){let l=o.indexOf(r);l===-1?o.push(r,[i,a]):o[l+1].push(i,a)}else o.push(r,a)}}}function nz(t,e,r){return r&&t.componentProviders++,t.multi.push(e)-1}function Ax(t,e,r,i){for(let n=r;n<i;n++)if(e[n]===t)return n;return-1}function Zrt(t,e,r,i){return RC(this.multi,[])}function $rt(t,e,r,i){let n=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,o=Eu(r,r[Te],this.providerFactory.index,i);s=o.slice(0,a),RC(n,s);for(let l=a;l<o.length;l++)s.push(o[l])}else s=[],RC(n,s);return s}function RC(t,e){for(let r=0;r<t.length;r++){let i=t[r];e.push(i())}return e}function Xrt(t,e,r,i,n){let s=new Bf(t,r,R);return s.multi=[],s.index=e,s.componentProviders=0,nz(s,n,i&&!r),s}function We(t,e=[]){return r=>{r.providersResolver=(i,n)=>Wrt(i,n?n(t):t,e)}}var qrt=(()=>{let t=class{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let n=xF(!1,i.type),s=n.length>0?Qit([n],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};return t.\u0275prov=vt({token:t,providedIn:"environment",factory:()=>new t(U(Xa))}),t})();function Kt(t){no("NgStandalone"),t.getStandaloneInjector=e=>e.get(qrt).getOrCreateStandaloneInjector(t)}function Krt(t,e,r){let i=t.\u0275cmp;i.directiveDefs=Q_(e,!1),i.pipeDefs=Q_(r,!0)}function so(t,e,r){let i=$F()+t,n=Ae();return n[i]===Gs?z5(n,i,r?e.call(r):e()):irt(n,i)}function Yrt(t,e){let r=t[e];return r===Gs?void 0:r}function Jrt(t,e,r,i,n,s){let a=e+r;return va(t,a,n)?z5(t,a+1,s?i.call(s,n):i(n)):Yrt(t,a+1)}function pi(t,e){let r=qi(),i,n=t+zr;r.firstCreatePass?(i=Qrt(e,r.pipeRegistry),r.data[n]=i,i.onDestroy&&(r.destroyHooks??=[]).push(n,i.onDestroy)):i=r.data[n];let s=i.factory||(i.factory=xu(i.type,!0)),a,o=Ln(R);try{let l=sb(!1),c=s();return sb(l),pS(r,Ae(),n,c),c}finally{Ln(o)}}function Qrt(t,e){if(e)for(let r=e.length-1;r>=0;r--){let i=e[r];if(t===i.name)return i}}function mi(t,e,r){let i=t+zr,n=Ae(),s=LA(n,i);return tnt(n,i)?Jrt(n,$F(),e,s.transform,r,s):s.transform(r)}function tnt(t,e){return t[Te].data[e].pure}function sz(t,e){return Ny(t,e)}var az=new ht(""),__=new ht(""),Sx=(()=>{let t=class{constructor(i,n,s){this._ngZone=i,this.registry=n,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,mS||(ent(s),s.addToWindow(n)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Zt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb()}});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>n.updateCb&&n.updateCb(i)?(clearTimeout(n.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,n,s){let a=-1;n&&n>0&&(a=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==a),i()},n)),this._callbacks.push({doneCb:i,timeoutId:a,updateCb:s})}whenStable(i,n,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,n,s),this._runCallbacksIfReady()}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,n,s){return[]}};return t.\u0275fac=function(r){return new(r||t)(U(Zt),U(BC),U(__))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),BC=(()=>{let t=class{constructor(){this._applications=new Map}registerApplication(i,n){this._applications.set(i,n)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,n=!0){return mS?.findTestabilityInTree(this,i,n)??null}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function ent(t){mS=t}var mS;function Ou(t){return!!t&&typeof t.then=="function"}function oz(t){return!!t&&typeof t.subscribe=="function"}var tp=new ht(""),lz=(()=>{let t=class{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,n)=>{this.resolve=i,this.reject=n}),this.appInits=K(tp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let a=s();if(Ou(a))i.push(a);else if(oz(a)){let o=new Promise((l,c)=>{a.subscribe({complete:l,error:c})});i.push(o)}}let n=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{n()}).catch(s=>{this.reject(s)}),i.length===0&&n(),this.initialized=!0}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),fS=new ht("");function int(){bK(()=>{throw new Vt(600,!1)})}function rnt(t){return t.isBoundToModule}var nnt=10;function snt(t,e,r){try{let i=r();return Ou(i)?i.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var ao=(()=>{let t=class{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=K(YQ),this.afterRenderEffectManager=K(oS),this.zonelessEnabled=K(h5),this.externalTestViews=new Set,this.beforeRender=new Bt,this.afterTick=new Bt,this.componentTypes=[],this.components=[],this.isStable=K(Uu).hasPendingTasks.pipe(kt(i=>!i)),this._injector=K(Xa)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let i;return new Promise(n=>{i=this.isStable.subscribe({next:s=>{s&&n()}})}).finally(()=>{i.unsubscribe()})}get injector(){return this._injector}bootstrap(i,n){let s=i instanceof m5;if(!this._injector.get(lz).done){let m=!s&&zJ(i),f=!1;throw new Vt(405,f)}let a;s?a=i:a=this._injector.get(dc).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let o=rnt(a)?void 0:this._injector.get(AC),l=n||a.selector,c=a.create(Re.NULL,[],l,o),h=c.location.nativeElement,p=c.injector.get(az,null);return p?.registerApplication(h),c.onDestroy(()=>{this.detachView(c.hostView),b_(this.components,c),p?.unregisterApplication(h)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new Vt(101,!1);let n=He(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(s){this.internalErrorHandler(s)}finally{this._runningTick=!1,He(n),this.afterTick.next()}}detectChangesInAttachedViews(i){let n=null;this._injector.destroyed||(n=this._injector.get(Qd,null,{optional:!0}));let s=0,a=this.afterRenderEffectManager;for(;s<nnt;){let o=s===0;if(i||!o){this.beforeRender.next(o);for(let{_lView:l,notifyErrorHandler:c}of this._views)ant(l,c,o,this.zonelessEnabled)}else n?.begin?.(),n?.end?.();if(s++,a.executeInternalCallbacks(),!this.allViews.some(({_lView:l})=>Zm(l))&&(a.execute(),!this.allViews.some(({_lView:l})=>Zm(l))))break}}attachView(i){let n=i;this._views.push(n),n.attachToAppRef(this)}detachView(i){let n=i;b_(this._views,n),n.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let n=this._injector.get(fS,[]);[...this._bootstrapListeners,...n].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>b_(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Vt(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function b_(t,e){let r=t.indexOf(e);r>-1&&t.splice(r,1)}function ant(t,e,r,i){!r&&!Zm(t)||o5(t,e,r&&!i?0:1)}var ont=(()=>{let t=class{constructor(){this.zone=K(Zt),this.changeDetectionScheduler=K(Fy),this.applicationRef=K(ao)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function lnt({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:r}){return t??=()=>new Zt(Q(x({},cnt()),{scheduleInRootZone:r})),[{provide:Zt,useFactory:t},{provide:J_,multi:!0,useFactory:()=>{let i=K(ont,{optional:!0});return()=>i.initialize()}},{provide:J_,multi:!0,useFactory:()=>{let i=K(unt);return()=>{i.initialize()}}},e===!0?{provide:d5,useValue:!0}:[],{provide:p5,useValue:r??h3}]}function cnt(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var unt=(()=>{let t=class{constructor(){this.subscription=new vi,this.initialized=!1,this.zone=K(Zt),this.pendingTasks=K(Uu)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Zt.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Zt.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),hnt=(()=>{let t=class{constructor(){this.appRef=K(ao),this.taskService=K(Uu),this.ngZone=K(Zt),this.zonelessEnabled=K(h5),this.disableScheduling=K(d5,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new vi,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(lb):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(K(p5,{optional:!0})??!1),this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof XQ||!this.zoneIsDefined)}notify(i){if(!this.zonelessEnabled&&i===5)return;switch(i){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let n=this.useMicrotaskScheduler?i2:d3;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>n(()=>this.tick(this.shouldRefreshViews))):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>n(()=>this.tick(this.shouldRefreshViews)))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(lb+this.angularZoneId))}tick(i){if(this.runningTick||this.appRef.destroyed)return;let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(i)},void 0,this.schedulerTickApplyArgs)}catch(s){throw this.taskService.remove(n),s}finally{this.cleanup()}this.useMicrotaskScheduler=!0,i2(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let i=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(i)}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function dnt(){return typeof $localize<"u"&&$localize.locale||fb}var cz=new ht("",{providedIn:"root",factory:()=>K(cz,qe.Optional|qe.SkipSelf)||dnt()}),uz=new ht("");function bv(t){return!!t.platformInjector}function pnt(t){let e=bv(t)?t.r3Injector:t.moduleRef.injector,r=e.get(Zt);return r.run(()=>{bv(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let i=e.get(ga,null),n;if(r.runOutsideAngular(()=>{n=r.onError.subscribe({next:s=>{i.handleError(s)}})}),bv(t)){let s=()=>e.destroy(),a=t.platformInjector.get(uz);a.add(s),e.onDestroy(()=>{n.unsubscribe(),a.delete(s)})}else t.moduleRef.onDestroy(()=>{b_(t.allPlatformModules,t.moduleRef),n.unsubscribe()});return snt(i,r,()=>{let s=e.get(lz);return s.runInitializers(),s.donePromise.then(()=>{let a=e.get(cz,fb);if(Lrt(a||fb),bv(t)){let o=e.get(ao);return t.rootComponent!==void 0&&o.bootstrap(t.rootComponent),o}else return mnt(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function mnt(t,e){let r=t.injector.get(ao);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(r);else throw new Vt(-403,!1);e.push(t)}var y_=null;function fnt(t=[],e){return Re.create({name:e,providers:[{provide:PA,useValue:"platform"},{provide:uz,useValue:new Set([()=>y_=null])},...t]})}function gnt(t=[]){if(y_)return y_;let e=fnt(t);return y_=e,int(),vnt(e),e}function vnt(t){t.get(w3,null)?.forEach(e=>e())}function No(){return!1}var di=(()=>{let t=class{};return t.__NG_ELEMENT_ID__=_nt,t})();function _nt(t){return bnt(Yr(),Ae(),(t&16)===16)}function bnt(t,e,r){if(Ey(t)&&!r){let i=uc(t.index,e);return new Km(i,i)}else if(t.type&175){let i=e[ms];return new Km(i,e)}return null}var ynt=class{constructor(){}supports(t){return F5(t)}create(t){return new xnt(t)}},wnt=(t,e)=>e,xnt=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||wnt}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,n=null;for(;e||r;){let s=!r||e&&e.currentIndex<O2(r,i,n)?e:r,a=O2(s,i,n),o=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(e=e._next,s.previousIndex==null)i++;else{n||(n=[]);let l=a-i,c=o-i;if(l!=c){for(let p=0;p<l;p++){let m=p<n.length?n[p]:n[p]=0,f=m+p;c<=f&&f<l&&(n[p]=m+1)}let h=s.previousIndex;n[h]=c-l}}a!==o&&t(s,a,o)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!F5(t))throw new Vt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,r=!1,i,n,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)n=t[a],s=this._trackByFn(a,n),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,n,s,a),r=!0):(r&&(e=this._verifyReinsertion(e,n,s,a)),Object.is(e.item,n)||this._addIdentityChange(e,n)),e=e._next}else i=0,trt(t,a=>{s=this._trackByFn(i,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,i),r=!0):(r&&(e=this._verifyReinsertion(e,a,s,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let n;return t===null?n=this._itTail:(n=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,n,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,n,i)):t=this._addAfter(new Cnt(e,r),n,i)),t}_verifyReinsertion(t,e,r,i){let n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return n!==null?t=this._reinsertAfter(n,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,n=t._nextRemoved;return i===null?this._removalsHead=n:i._nextRemoved=n,n===null?this._removalsTail=i:n._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){let i=e===null?this._itHead:e._next;return t._next=i,t._prev=e,i===null?this._itTail=t:i._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new I2),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,r=t._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new I2),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},Cnt=class{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},knt=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let e=t._prevDup,r=t._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},I2=class{constructor(){this.map=new Map}put(t){let e=t.trackById,r=this.map.get(e);r||(r=new knt,this.map.set(e,r)),r.add(t)}get(t,e){let r=t,i=this.map.get(r);return i?i.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function O2(t,e,r){let i=t.previousIndex;if(i===null)return i;let n=0;return r&&i<r.length&&(n=r[i]),i+e+n}function P2(){return new hz([new ynt])}var hz=(()=>{let t=class mm{constructor(i){this.factories=i}static create(i,n){if(n!=null){let s=n.factories.slice();i=i.concat(s)}return new mm(i)}static extend(i){return{provide:mm,useFactory:n=>mm.create(i,n||P2()),deps:[[mm,new _J,new vJ]]}}find(i){let n=this.factories.find(s=>s.supports(i));if(n!=null)return n;throw new Vt(901,!1)}};return t.\u0275prov=vt({token:t,providedIn:"root",factory:P2}),t})(),Ant=(()=>{let t=class{constructor(i){}};return t.\u0275fac=function(r){return new(r||t)(U(ao))},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})();function Snt(t){try{let{rootComponent:e,appProviders:r,platformProviders:i}=t,n=gnt(i),s=[lnt({}),{provide:Fy,useExisting:hnt},...r||[]],a=new N5({providers:s,parent:n,debugName:"",runEnvironmentInitializers:!1});return pnt({r3Injector:a.injector,platformInjector:n,rootComponent:e})}catch(e){return Promise.reject(e)}}var Ent=new ht("");function Ut(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function or(t,e=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):e}function rr(t,e){no("NgSignals");let r=bN(t);return e?.equal&&(r[Fs].equal=e.equal),r}function vn(t){let e=He(null);try{return t()}finally{He(e)}}var Tnt=new ht("",{providedIn:"root",factory:()=>K(Int)}),Int=(()=>{let t=class{};return t.\u0275prov=vt({token:t,providedIn:"root",factory:()=>new Ont}),t})(),Ont=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=K(Uu),this.taskId=null}scheduleEffect(t){if(this.enqueue(t),this.taskId===null){let e=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(e),this.taskId=null})}}enqueue(t){let e=t.creationZone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(t)||(this.queuedEffectCount++,r.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}},Pnt=class{constructor(t,e,r,i,n,s){this.scheduler=t,this.effectFn=e,this.creationZone=r,this.injector=n,this.watcher=kK(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(t){try{this.effectFn(t)}catch(e){this.injector.get(ga,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Ws(t,e){no("NgSignals"),!e?.injector&&Zd(Ws);let r=e?.injector??K(Re),i=e?.manualCleanup!==!0?r.get(ec):null,n=new Pnt(r.get(Tnt),t,typeof Zone>"u"?null:Zone.current,i,r,e?.allowSignalWrites??!1),s=r.get(di,null,{optional:!0});return!s||!(s._lView[xe]&8)?n.watcher.notify():(s._lView[m_]??=[]).push(n.watcher.notify),n}function dz(t,e){let r=tc(t),i=e.elementInjector||Ay();return new zy(r).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}function Mnt(t){let e=tc(t);if(!e)return null;let r=new zy(e);return{get selector(){return r.selector},get type(){return r.componentType},get inputs(){return r.inputs},get outputs(){return r.outputs},get ngContentSelectors(){return r.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var gb={schedule(t,e){let r=setTimeout(t,e);return()=>clearTimeout(r)},scheduleBeforeRender(t){if(typeof window>"u")return gb.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return gb.schedule(t,16);let e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};function Rnt(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function Bnt(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}function Dnt(t){return typeof t=="function"}var Ex;function Lnt(t,e){if(!Ex){let r=Element.prototype;Ex=r.matches||r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE?Ex.call(t,e):!1}function Nnt(t,e){return t===e||t!==t&&e!==e}function Fnt(t){let e={};return t.forEach(({propName:r,templateName:i,transform:n})=>{e[Rnt(i)]=[r,n]}),e}function znt(t,e){return e.get(dc).resolveComponentFactory(t).inputs}function Vnt(t,e){let r=t.childNodes,i=e.map(()=>[]),n=-1;e.some((s,a)=>s==="*"?(n=a,!0):!1);for(let s=0,a=r.length;s<a;++s){let o=r[s],l=jnt(o,e,n);l!==-1&&i[l].push(o)}return i}function jnt(t,e,r){let i=r;return Bnt(t)&&e.some((n,s)=>n!=="*"&&Lnt(t,n)?(i=s,!0):!1),i}var Unt=10,Hnt=class{constructor(t,e){this.componentFactory=e.get(dc).resolveComponentFactory(t)}create(t){return new Gnt(this.componentFactory,t)}},Gnt=class{constructor(t,e){this.componentFactory=t,this.injector=e,this.eventEmitters=new Vo(1),this.events=this.eventEmitters.pipe(_i(r=>lr(...r))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:r})=>r)),this.ngZone=this.injector.get(Zt),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(t){this.runInZone(()=>{if(this.scheduledDestroyFn!==null){this.scheduledDestroyFn(),this.scheduledDestroyFn=null;return}this.componentRef===null&&this.initializeComponent(t)})}disconnect(){this.runInZone(()=>{this.componentRef===null||this.scheduledDestroyFn!==null||(this.scheduledDestroyFn=gb.schedule(()=>{this.componentRef!==null&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},Unt))})}getInputValue(t){return this.runInZone(()=>this.componentRef===null?this.initialInputValues.get(t):this.componentRef.instance[t])}setInputValue(t,e,r){this.runInZone(()=>{if(r&&(e=r.call(this.componentRef?.instance,e)),this.componentRef===null){this.initialInputValues.set(t,e);return}Nnt(e,this.getInputValue(t))&&!(e===void 0&&this.unchangedInputs.has(t))||(this.recordInputChange(t,e),this.unchangedInputs.delete(t),this.hasInputChanges=!0,this.componentRef.instance[t]=e,this.scheduleDetectChanges())})}initializeComponent(t){let e=Re.create({providers:[],parent:this.injector}),r=Vnt(t,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(e,r,t),this.viewChangeDetectorRef=this.componentRef.injector.get(di),this.implementsOnChanges=Dnt(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(ao).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:t,transform:e})=>{this.initialInputValues.has(t)&&this.setInputValue(t,this.initialInputValues.get(t),e)}),this.initialInputValues.clear()}initializeOutputs(t){let e=this.componentFactory.outputs.map(({propName:r,templateName:i})=>t.instance[r].pipe(kt(n=>({name:i,value:n}))));this.eventEmitters.next(e)}callNgOnChanges(t){if(!this.implementsOnChanges||this.inputChanges===null)return;let e=this.inputChanges;this.inputChanges=null,t.instance.ngOnChanges(e)}markViewForCheck(t){this.hasInputChanges&&(this.hasInputChanges=!1,t.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=gb.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(t,e){if(!this.implementsOnChanges)return;this.inputChanges===null&&(this.inputChanges={});let r=this.inputChanges[t];if(r){r.currentValue=e;return}let i=this.unchangedInputs.has(t),n=i?void 0:this.getInputValue(t);this.inputChanges[t]=new IF(n,e,i)}detectChanges(){this.componentRef!==null&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(t){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(t):t()}},Wnt=class extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}};function Znt(t,e){let r=znt(t,e.injector),i=e.strategyFactory||new Hnt(t,e.injector),n=Fnt(r),s=class extends Wnt{get ngElementStrategy(){if(!this._ngElementStrategy){let l=this._ngElementStrategy=i.create(this.injector||e.injector);r.forEach(({propName:c,transform:h})=>{if(!this.hasOwnProperty(c))return;let p=this[c];delete this[c],l.setInputValue(c,p,h)})}return this._ngElementStrategy}constructor(l){super(),this.injector=l}attributeChangedCallback(l,c,h,p){let[m,f]=n[l];this.ngElementStrategy.setInputValue(m,h,f)}connectedCallback(){let l=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),l=!0),this.ngElementStrategy.connect(this),l||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(l=>{let c=new CustomEvent(l.name,{detail:l.value});this.dispatchEvent(c)})}};s.observedAttributes=Object.keys(n);let a=s;return r.forEach(({propName:o,transform:l})=>{Object.defineProperty(a.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(c){this.ngElementStrategy.setInputValue(o,c,l)},configurable:!0,enumerable:!0})}),a}var pz=null;function Zl(){return pz}function $nt(t){pz??=t}var Xnt=class{},ge=new ht(""),gS=(()=>{let t=class{historyGo(i){throw new Error("")}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:()=>K(qnt),providedIn:"platform"}),t})(),qnt=(()=>{let t=class extends gS{constructor(){super(),this._doc=K(ge),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zl().getBaseHref(this._doc)}onPopState(i){let n=Zl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",i,!1),()=>n.removeEventListener("popstate",i)}onHashChange(i){let n=Zl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",i,!1),()=>n.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,n,s){this._history.pushState(i,n,s)}replaceState(i,n,s){this._history.replaceState(i,n,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:()=>new t,providedIn:"platform"}),t})();function mz(t,e){if(t.length==0)return e;if(e.length==0)return t;let r=0;return t.endsWith("/")&&r++,e.startsWith("/")&&r++,r==2?t+e.substring(1):r==1?t+e:t+"/"+e}function M2(t){let e=t.match(/#|\?|$/),r=e&&e.index||t.length,i=r-(t[r-1]==="/"?1:0);return t.slice(0,i)+t.slice(r)}function hu(t){return t&&t[0]!=="?"?"?"+t:t}var vS=(()=>{let t=class{historyGo(i){throw new Error("")}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:()=>K(Knt),providedIn:"root"}),t})(),fz=new ht(""),Knt=(()=>{let t=class extends vS{constructor(i,n){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??K(ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return mz(this._baseHref,i)}path(i=!1){let n=this._platformLocation.pathname+hu(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${n}${s}`:n}pushState(i,n,s,a){let o=this.prepareExternalUrl(s+hu(a));this._platformLocation.pushState(i,n,o)}replaceState(i,n,s,a){let o=this.prepareExternalUrl(s+hu(a));this._platformLocation.replaceState(i,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};return t.\u0275fac=function(r){return new(r||t)(U(gS),U(fz,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_S=(()=>{let t=class gz{constructor(i){this._subject=new It,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let n=this._locationStrategy.getBaseHref();this._basePath=Qnt(M2(R2(n))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,n=""){return this.path()==this.normalize(i+hu(n))}normalize(i){return gz.stripTrailingSlash(Jnt(this._basePath,R2(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,n="",s=null){this._locationStrategy.pushState(s,"",i,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+hu(n)),s)}replaceState(i,n="",s=null){this._locationStrategy.replaceState(s,"",i,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+hu(n)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}),()=>{let n=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(n,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",n){this._urlChangeListeners.forEach(s=>s(i,n))}subscribe(i,n,s){return this._subject.subscribe({next:i,error:n,complete:s})}};return t.normalizeQueryParams=hu,t.joinWithSlash=mz,t.stripTrailingSlash=M2,t.\u0275fac=function(r){return new(r||t)(U(vS))},t.\u0275prov=vt({token:t,factory:()=>Ynt(),providedIn:"root"}),t})();function Ynt(){return new _S(U(vS))}function Jnt(t,e){if(!t||!e.startsWith(t))return e;let r=e.substring(t.length);return r===""||["/",";","?","#"].includes(r[0])?r:e}function R2(t){return t.replace(/\/index.html$/,"")}function Qnt(t){if(new RegExp("^(https?:)?//").test(t)){let[,e]=t.split(/\/\/[^\/]+/);return e}return t}function vz(t,e){e=encodeURIComponent(e);for(let r of t.split(";")){let i=r.indexOf("="),[n,s]=i==-1?[r,""]:[r.slice(0,i),r.slice(i+1)];if(n.trim()===e)return decodeURIComponent(s)}return null}var Tx=/\s+/,B2=[],_z=(()=>{let t=class{constructor(i,n){this._ngEl=i,this._renderer=n,this.initialClasses=B2,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(Tx):B2}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(Tx):i}ngDoCheck(){for(let n of this.initialClasses)this._updateState(n,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let n of i)this._updateState(n,!0);else if(i!=null)for(let n of Object.keys(i))this._updateState(n,!!i[n]);this._applyStateDiff()}_updateState(i,n){let s=this.stateMap.get(i);s!==void 0?(s.enabled!==n&&(s.changed=!0,s.enabled=n),s.touched=!0):this.stateMap.set(i,{enabled:n,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let n=i[0],s=i[1];s.changed?(this._toggleClass(n,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(n,!1),this.stateMap.delete(n)),s.touched=!1}}_toggleClass(i,n){i=i.trim(),i.length>0&&i.split(Tx).forEach(s=>{n?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(Gu))},t.\u0275dir=qt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0}),t})(),tst=class{constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},bS=(()=>{let t=class{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,n,s){this._viewContainer=i,this._template=n,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let n=this._viewContainer;i.forEachOperation((s,a,o)=>{if(s.previousIndex==null)n.createEmbeddedView(this._template,new tst(s.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)n.remove(a===null?void 0:a);else if(a!==null){let l=n.get(a);n.move(l,o),D2(l,s)}});for(let s=0,a=n.length;s<a;s++){let o=n.get(s).context;o.index=s,o.count=a,o.ngForOf=this._ngForOf}i.forEachIdentityChange(s=>{let a=n.get(s.currentIndex);D2(a,s)})}static ngTemplateContextGuard(i,n){return!0}};return t.\u0275fac=function(r){return new(r||t)(R(Zn),R(Vs),R(hz))},t.\u0275dir=qt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function D2(t,e){t.context.$implicit=e.item}var ep=(()=>{let t=class{constructor(i,n){this._viewContainer=i,this._context=new est,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){L2("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){L2("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,n){return!0}};return t.\u0275fac=function(r){return new(r||t)(R(Zn),R(Vs))},t.\u0275dir=qt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})(),est=class{constructor(){this.$implicit=null,this.ngIf=null}};function L2(t,e){if(!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ds(e)}'.`)}var ist=(()=>{let t=class{constructor(i){this._viewContainerRef=i,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(i){if(this._shouldRecreateView(i)){let n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=n.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(i){return!!i.ngTemplateOutlet||!!i.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(i,n,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,n,s):!1,get:(i,n,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,n,s)}})}};return t.\u0275fac=function(r){return new(r||t)(R(Zn))},t.\u0275dir=qt({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[yr]}),t})();function rst(t,e){return new Vt(2100,!1)}var nst=class{createSubscription(t,e){return vn(()=>t.subscribe({next:e,error:r=>{throw r}}))}dispose(t){vn(()=>t.unsubscribe())}},sst=class{createSubscription(t,e){return t.then(e,r=>{throw r})}dispose(t){}},ast=new sst,ost=new nst,ip=(()=>{let t=class bz{constructor(i){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){if(!this._obj){if(i)try{this.markForCheckOnValueUpdate=!1,this._subscribe(i)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,n=>this._updateLatestValue(i,n))}_selectStrategy(i){if(Ou(i))return ast;if(oz(i))return ost;throw rst(bz,i)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,n){i===this._obj&&(this._latestValue=n,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};return t.\u0275fac=function(r){return new(r||t)(R(di,16))},t.\u0275pipe=_F({name:"async",type:t,pure:!1,standalone:!0}),t})(),ti=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})(),yz="browser",lst="server";function Fn(t){return t===yz}function Bo(t){return t===lst}var wz=class{},yS=class{},wS=class{},nc=class w_{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(r=>{let i=r.indexOf(":");if(i>0){let n=r.slice(0,i),s=n.toLowerCase(),a=r.slice(i+1).trim();this.maybeSetNormalizedName(n,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((r,i)=>{this.setHeaderEntries(i,r)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([r,i])=>{this.setHeaderEntries(r,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let r=this.headers.get(e.toLowerCase());return r&&r.length>0?r[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,r){return this.clone({name:e,value:r,op:"a"})}set(e,r){return this.clone({name:e,value:r,op:"s"})}delete(e,r){return this.clone({name:e,value:r,op:"d"})}maybeSetNormalizedName(e,r){this.normalizedNames.has(r)||this.normalizedNames.set(r,e)}init(){this.lazyInit&&(this.lazyInit instanceof w_?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(r=>{this.headers.set(r,e.headers.get(r)),this.normalizedNames.set(r,e.normalizedNames.get(r))})}clone(e){let r=new w_;return r.lazyInit=this.lazyInit&&this.lazyInit instanceof w_?this.lazyInit:this,r.lazyUpdate=(this.lazyUpdate||[]).concat([e]),r}applyUpdate(e){let r=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,r);let n=(e.op==="a"?this.headers.get(r):void 0)||[];n.push(...i),this.headers.set(r,n);break;case"d":let s=e.value;if(!s)this.headers.delete(r),this.normalizedNames.delete(r);else{let a=this.headers.get(r);if(!a)return;a=a.filter(o=>s.indexOf(o)===-1),a.length===0?(this.headers.delete(r),this.normalizedNames.delete(r)):this.headers.set(r,a)}break}}setHeaderEntries(e,r){let i=(Array.isArray(r)?r:[r]).map(s=>s.toString()),n=e.toLowerCase();this.headers.set(n,i),this.maybeSetNormalizedName(e,n)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(r=>e(this.normalizedNames.get(r),this.headers.get(r)))}},cst=class{encodeKey(t){return N2(t)}encodeValue(t){return N2(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function ust(t,e){let r=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let n=i.indexOf("="),[s,a]=n==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,n)),e.decodeValue(i.slice(n+1))],o=r.get(s)||[];o.push(a),r.set(s,o)}),r}var hst=/%(\d[a-f0-9])/gi,dst={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function N2(t){return encodeURIComponent(t).replace(hst,(e,r)=>dst[r]??e)}function yv(t){return`${t}`}var Ri=class xz{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new cst,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=ust(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(r=>{let i=e.fromObject[r],n=Array.isArray(i)?i.map(yv):[yv(i)];this.map.set(r,n)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let r=this.map.get(e);return r?r[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,r){return this.clone({param:e,value:r,op:"a"})}appendAll(e){let r=[];return Object.keys(e).forEach(i=>{let n=e[i];Array.isArray(n)?n.forEach(s=>{r.push({param:i,value:s,op:"a"})}):r.push({param:i,value:n,op:"a"})}),this.clone(r)}set(e,r){return this.clone({param:e,value:r,op:"s"})}delete(e,r){return this.clone({param:e,value:r,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let r=this.encoder.encodeKey(e);return this.map.get(e).map(i=>r+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let r=new xz({encoder:this.encoder});return r.cloneFrom=this.cloneFrom||this,r.updates=(this.updates||[]).concat(e),r}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let r=(e.op==="a"?this.map.get(e.param):void 0)||[];r.push(yv(e.value)),this.map.set(e.param,r);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],n=i.indexOf(yv(e.value));n!==-1&&i.splice(n,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}},Ei=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function pst(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function F2(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function z2(t){return typeof Blob<"u"&&t instanceof Blob}function V2(t){return typeof FormData<"u"&&t instanceof FormData}function mst(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Ix=class Cz{constructor(e,r,i,n){this.url=r,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(pst(this.method)||n?(this.body=i!==void 0?i:null,s=n):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new nc,this.context??=new Ei,!this.params)this.params=new Ri,this.urlWithParams=r;else{let a=this.params.toString();if(a.length===0)this.urlWithParams=r;else{let o=r.indexOf("?"),l=o===-1?"?":o<r.length-1?"&":"";this.urlWithParams=r+l+a}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||F2(this.body)||z2(this.body)||V2(this.body)||mst(this.body)?this.body:this.body instanceof Ri?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||V2(this.body)?null:z2(this.body)?this.body.type||null:F2(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ri?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let r=e.method||this.method,i=e.url||this.url,n=e.responseType||this.responseType,s=e.transferCache??this.transferCache,a=e.body!==void 0?e.body:this.body,o=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((m,f)=>m.set(f,e.setHeaders[f]),c)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,f)=>m.set(f,e.setParams[f]),h)),new Cz(r,i,a,{params:h,headers:c,context:p,reportProgress:l,responseType:n,withCredentials:o,transferCache:s})}},ha=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(ha||{}),xS=class{constructor(t,e=200,r="OK"){this.headers=t.headers||new nc,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},kz=class Az extends xS{constructor(e={}){super(e),this.type=ha.ResponseHeader}clone(e={}){return new Az({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},CS=class Sz extends xS{constructor(e={}){super(e),this.type=ha.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new Sz({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ed=class extends xS{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},Ez=200,fst=204;function Ox(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var js=(()=>{let t=class{constructor(i){this.handler=i}request(i,n,s={}){let a;if(i instanceof Ix)a=i;else{let c;s.headers instanceof nc?c=s.headers:c=new nc(s.headers);let h;s.params&&(s.params instanceof Ri?h=s.params:h=new Ri({fromObject:s.params})),a=new Ix(i,n,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:h,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let o=Ge(a).pipe(xA(c=>this.handler.handle(c)));if(i instanceof Ix||s.observe==="events")return o;let l=o.pipe(Ye(c=>c instanceof CS));switch(s.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return l.pipe(kt(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(kt(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(kt(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return l.pipe(kt(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,n={}){return this.request("DELETE",i,n)}get(i,n={}){return this.request("GET",i,n)}head(i,n={}){return this.request("HEAD",i,n)}jsonp(i,n){return this.request("JSONP",i,{params:new Ri().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,n={}){return this.request("OPTIONS",i,n)}patch(i,n,s={}){return this.request("PATCH",i,Ox(s,n))}post(i,n,s={}){return this.request("POST",i,Ox(s,n))}put(i,n,s={}){return this.request("PUT",i,Ox(s,n))}};return t.\u0275fac=function(r){return new(r||t)(U(yS))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),gst=/^\)\]\}',?\n/,vst="X-Request-URL";function j2(t){if(t.url)return t.url;let e=vst.toLocaleLowerCase();return t.headers.get(e)}var _st=(()=>{let t=class{constructor(){this.fetchImpl=K(bst,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=K(Zt)}handle(i){return new Ht(n=>{let s=new AbortController;return this.doRequest(i,s.signal,n).then(DC,a=>n.error(new ed({error:a}))),()=>s.abort()})}doRequest(i,n,s){return Dt(this,null,function*(){let a=this.createRequestInit(i),o;try{let f=this.ngZone.runOutsideAngular(()=>this.fetchImpl(i.urlWithParams,x({signal:n},a)));yst(f),s.next({type:ha.Sent}),o=yield f}catch(f){s.error(new ed({error:f,status:f.status??0,statusText:f.statusText,url:i.urlWithParams,headers:f.headers}));return}let l=new nc(o.headers),c=o.statusText,h=j2(o)??i.urlWithParams,p=o.status,m=null;if(i.reportProgress&&s.next(new kz({headers:l,status:p,statusText:c,url:h})),o.body){let f=o.headers.get("content-length"),g=[],_=o.body.getReader(),w=0,S,C,b=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>Dt(this,null,function*(){for(;;){let{done:L,value:H}=yield _.read();if(L)break;if(g.push(H),w+=H.length,i.reportProgress){C=i.responseType==="text"?(C??"")+(S??=new TextDecoder).decode(H,{stream:!0}):void 0;let M=()=>s.next({type:ha.DownloadProgress,total:f?+f:void 0,loaded:w,partialText:C});b?b.run(M):M()}}}));let P=this.concatChunks(g,w);try{let L=o.headers.get("Content-Type")??"";m=this.parseBody(i,P,L)}catch(L){s.error(new ed({error:L,headers:new nc(o.headers),status:o.status,statusText:o.statusText,url:j2(o)??i.urlWithParams}));return}}p===0&&(p=m?Ez:0),p>=200&&p<300?(s.next(new CS({body:m,headers:l,status:p,statusText:c,url:h})),s.complete()):s.error(new ed({error:m,headers:l,status:p,statusText:c,url:h}))})}parseBody(i,n,s){switch(i.responseType){case"json":let a=new TextDecoder().decode(n).replace(gst,"");return a===""?null:JSON.parse(a);case"text":return new TextDecoder().decode(n);case"blob":return new Blob([n],{type:s});case"arraybuffer":return n.buffer}}createRequestInit(i){let n={},s=i.withCredentials?"include":void 0;if(i.headers.forEach((a,o)=>n[a]=o.join(",")),i.headers.has("Accept")||(n.Accept="application/json, text/plain, */*"),!i.headers.has("Content-Type")){let a=i.detectContentTypeHeader();a!==null&&(n["Content-Type"]=a)}return{body:i.serializeBody(),method:i.method,headers:n,credentials:s}}concatChunks(i,n){let s=new Uint8Array(n),a=0;for(let o of i)s.set(o,a),a+=o.length;return s}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),bst=class{};function DC(){}function yst(t){t.then(DC,DC)}function Tz(t,e){return e(t)}function wst(t,e){return(r,i)=>e.intercept(r,{handle:n=>t(n,i)})}function xst(t,e,r){return(i,n)=>Wd(r,()=>e(i,s=>t(s,n)))}var Cst=new ht(""),kS=new ht(""),kst=new ht(""),Iz=new ht("",{providedIn:"root",factory:()=>!0});function Ast(){let t=null;return(e,r)=>{t===null&&(t=(K(Cst,{optional:!0})??[]).reduceRight(wst,Tz));let i=K(Uu);if(K(Iz)){let n=i.add();return t(e,r).pipe(Pf(()=>i.remove(n)))}else return t(e,r)}}var U2=(()=>{let t=class extends yS{constructor(i,n){super(),this.backend=i,this.injector=n,this.chain=null,this.pendingTasks=K(Uu),this.contributeToStability=K(Iz)}handle(i){if(this.chain===null){let n=Array.from(new Set([...this.injector.get(kS),...this.injector.get(kst,[])]));this.chain=n.reduceRight((s,a)=>xst(s,a,this.injector),Tz)}if(this.contributeToStability){let n=this.pendingTasks.add();return this.chain(i,s=>this.backend.handle(s)).pipe(Pf(()=>this.pendingTasks.remove(n)))}else return this.chain(i,n=>this.backend.handle(n))}};return t.\u0275fac=function(r){return new(r||t)(U(wS),U(Xa))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),Sst=/^\)\]\}',?\n/;function Est(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var H2=(()=>{let t=class{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new Vt(-2800,!1);let n=this.xhrFactory;return(n.\u0275loadImpl?zs(n.\u0275loadImpl()):Ge(null)).pipe(_i(()=>new Ht(s=>{let a=n.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((_,w)=>a.setRequestHeader(_,w.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let _=i.detectContentTypeHeader();_!==null&&a.setRequestHeader("Content-Type",_)}if(i.responseType){let _=i.responseType.toLowerCase();a.responseType=_!=="json"?_:"text"}let o=i.serializeBody(),l=null,c=()=>{if(l!==null)return l;let _=a.statusText||"OK",w=new nc(a.getAllResponseHeaders()),S=Est(a)||i.url;return l=new kz({headers:w,status:a.status,statusText:_,url:S}),l},h=()=>{let{headers:_,status:w,statusText:S,url:C}=c(),b=null;w!==fst&&(b=typeof a.response>"u"?a.responseText:a.response),w===0&&(w=b?Ez:0);let P=w>=200&&w<300;if(i.responseType==="json"&&typeof b=="string"){let L=b;b=b.replace(Sst,"");try{b=b!==""?JSON.parse(b):null}catch(H){b=L,P&&(P=!1,b={error:H,text:b})}}P?(s.next(new CS({body:b,headers:_,status:w,statusText:S,url:C||void 0})),s.complete()):s.error(new ed({error:b,headers:_,status:w,statusText:S,url:C||void 0}))},p=_=>{let{url:w}=c(),S=new ed({error:_,status:a.status||0,statusText:a.statusText||"Unknown Error",url:w||void 0});s.error(S)},m=!1,f=_=>{m||(s.next(c()),m=!0);let w={type:ha.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(w.total=_.total),i.responseType==="text"&&a.responseText&&(w.partialText=a.responseText),s.next(w)},g=_=>{let w={type:ha.UploadProgress,loaded:_.loaded};_.lengthComputable&&(w.total=_.total),s.next(w)};return a.addEventListener("load",h),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),i.reportProgress&&(a.addEventListener("progress",f),o!==null&&a.upload&&a.upload.addEventListener("progress",g)),a.send(o),s.next({type:ha.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",h),a.removeEventListener("timeout",p),i.reportProgress&&(a.removeEventListener("progress",f),o!==null&&a.upload&&a.upload.removeEventListener("progress",g)),a.readyState!==a.DONE&&a.abort()}})))}};return t.\u0275fac=function(r){return new(r||t)(U(wz))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),Oz=new ht(""),Tst="XSRF-TOKEN",Ist=new ht("",{providedIn:"root",factory:()=>Tst}),Ost="X-XSRF-TOKEN",Pst=new ht("",{providedIn:"root",factory:()=>Ost}),Pz=class{},Mst=(()=>{let t=class{constructor(i,n,s){this.doc=i,this.platform=n,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=vz(i,this.cookieName),this.lastCookieString=i),this.lastToken}};return t.\u0275fac=function(r){return new(r||t)(U(ge),U(dn),U(Ist))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})();function Rst(t,e){let r=t.url.toLowerCase();if(!K(Oz)||t.method==="GET"||t.method==="HEAD"||r.startsWith("http://")||r.startsWith("https://"))return e(t);let i=K(Pz).getToken(),n=K(Pst);return i!=null&&!t.headers.has(n)&&(t=t.clone({headers:t.headers.set(n,i)})),e(t)}var Mz=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Mz||{});function Bst(t,e){return{\u0275kind:t,\u0275providers:e}}function AS(...t){let e=[js,H2,U2,{provide:yS,useExisting:U2},{provide:wS,useFactory:()=>K(_st,{optional:!0})??K(H2)},{provide:kS,useValue:Rst,multi:!0},{provide:Oz,useValue:!0},{provide:Pz,useClass:Mst}];for(let r of t)e.push(...r.\u0275providers);return An(e)}var G2=new ht("");function Rz(){return Bst(Mz.LegacyInterceptors,[{provide:G2,useFactory:Ast},{provide:kS,useExisting:G2,multi:!0}])}var Dst=class extends Xnt{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Lst=class Bz extends Dst{static makeCurrent(){$nt(new Bz)}onAndCancel(e,r,i){return e.addEventListener(r,i),()=>{e.removeEventListener(r,i)}}dispatchEvent(e,r){e.dispatchEvent(r)}remove(e){e.remove()}createElement(e,r){return r=r||this.getDefaultDocument(),r.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,r){return r==="window"?window:r==="document"?e:r==="body"?e.body:null}getBaseHref(e){let r=Nst();return r==null?null:Fst(r)}resetBaseElement(){fm=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return vz(document.cookie,e)}},fm=null;function Nst(){return fm=fm||document.querySelector("base"),fm?fm.getAttribute("href"):null}function Fst(t){return new URL(t,document.baseURI).pathname}var zst=class{addToWindow(t){Po.getAngularTestability=(r,i=!0)=>{let n=t.findTestabilityInTree(r,i);if(n==null)throw new Vt(5103,!1);return n},Po.getAllAngularTestabilities=()=>t.getAllTestabilities(),Po.getAllAngularRootElements=()=>t.getAllRootElements();let e=r=>{let i=Po.getAllAngularTestabilities(),n=i.length,s=function(){n--,n==0&&r()};i.forEach(a=>{a.whenStable(s)})};Po.frameworkStabilizers||(Po.frameworkStabilizers=[]),Po.frameworkStabilizers.push(e)}findTestabilityInTree(t,e,r){return e==null?null:t.getTestability(e)??(r?Zl().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},Vst=(()=>{let t=class{build(){return new XMLHttpRequest}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),x_=new ht(""),Dz=(()=>{let t=class{constructor(i,n){this._zone=n,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,n,s){return this._findPluginFor(n).addEventListener(i,n,s)}getZone(){return this._zone}_findPluginFor(i){let n=this._eventNameToPlugin.get(i);if(n)return n;if(n=this._plugins.find(s=>s.supports(i)),!n)throw new Vt(5101,!1);return this._eventNameToPlugin.set(i,n),n}};return t.\u0275fac=function(r){return new(r||t)(U(x_),U(Zt))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),SS=class{constructor(t){this._doc=t}},Px="ng-app-id",Lz=(()=>{let t=class{constructor(i,n,s,a={}){this.doc=i,this.appId=n,this.nonce=s,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Bo(a),this.resetHostNodes()}addStyles(i){for(let n of i)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(i){for(let n of i)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(n=>n.remove()),i.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let n of this.getAllStyles())this.addStyleToHost(i,n)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let n of this.hostNodes)this.addStyleToHost(n,i)}onStyleRemoved(i){let n=this.styleRef;n.get(i)?.elements?.forEach(s=>s.remove()),n.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Px}="${this.appId}"]`);if(i?.length){let n=new Map;return i.forEach(s=>{s.textContent!=null&&n.set(s.textContent,s)}),n}return null}changeUsageCount(i,n){let s=this.styleRef;if(s.has(i)){let a=s.get(i);return a.usage+=n,a.usage}return s.set(i,{usage:n,elements:[]}),n}getStyleElement(i,n){let s=this.styleNodesInDOM,a=s?.get(n);if(a?.parentNode===i)return s.delete(n),a.removeAttribute(Px),a;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=n,this.platformIsServer&&o.setAttribute(Px,this.appId),i.appendChild(o),o}}addStyleToHost(i,n){let s=this.getStyleElement(i,n),a=this.styleRef,o=a.get(n)?.elements;o?o.push(s):a.set(n,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};return t.\u0275fac=function(r){return new(r||t)(U(ge),U(Oy),U(Py,8),U(dn))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),Mx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ES=/%COMP%/g,Nz="%COMP%",jst=`_nghost-${Nz}`,Ust=`_ngcontent-${Nz}`,Hst=!0,Gst=new ht("",{providedIn:"root",factory:()=>Hst});function Wst(t){return Ust.replace(ES,t)}function Zst(t){return jst.replace(ES,t)}function Fz(t,e){return e.map(r=>r.replace(ES,t))}var LC=(()=>{let t=class{constructor(i,n,s,a,o,l,c,h=null){this.eventManager=i,this.sharedStylesHost=n,this.appId=s,this.removeStylesOnCompDestroy=a,this.doc=o,this.platformId=l,this.ngZone=c,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Bo(l),this.defaultRenderer=new TS(i,o,c,this.platformIsServer)}createRenderer(i,n){if(!i||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===Ro.ShadowDom&&(n=Q(x({},n),{encapsulation:Ro.Emulated}));let s=this.getOrCreateRenderer(i,n);return s instanceof Z2?s.applyToHost(i):s instanceof NC&&s.applyStyles(),s}getOrCreateRenderer(i,n){let s=this.rendererByCompId,a=s.get(n.id);if(!a){let o=this.doc,l=this.ngZone,c=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(n.encapsulation){case Ro.Emulated:a=new Z2(c,h,n,this.appId,p,o,l,m);break;case Ro.ShadowDom:return new $st(c,h,i,n,o,l,this.nonce,m);default:a=new NC(c,h,n,p,o,l,m);break}s.set(n.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};return t.\u0275fac=function(r){return new(r||t)(U(Dz),U(Lz),U(Oy),U(Gst),U(ge),U(dn),U(Zt),U(Py))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),TS=class{constructor(t,e,r,i){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Mx[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(W2(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(W2(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new Vt(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let n=Mx[i];n?t.setAttributeNS(n,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=Mx[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(uu.DashCase|uu.Important)?t.style.setProperty(e,r,i&uu.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&uu.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r){if(typeof t=="string"&&(t=Zl().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(r))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function W2(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var $st=class extends TS{constructor(t,e,r,i,n,s,a,o){super(t,n,s,o),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Fz(i.id,i.styles);for(let c of l){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=c,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},NC=class extends TS{constructor(t,e,r,i,n,s,a,o){super(t,n,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i,this.styles=o?Fz(o,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Z2=class extends NC{constructor(t,e,r,i,n,s,a,o){let l=i+"-"+r.id;super(t,e,r,n,s,a,o,l),this.contentAttr=Wst(l),this.hostAttr=Zst(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}},Xst=(()=>{let t=class extends SS{constructor(i){super(i)}supports(i){return!0}addEventListener(i,n,s){return i.addEventListener(n,s,!1),()=>this.removeEventListener(i,n,s)}removeEventListener(i,n,s){return i.removeEventListener(n,s)}};return t.\u0275fac=function(r){return new(r||t)(U(ge))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),qst=(()=>{let t=class extends SS{constructor(i){super(i),this.delegate=K(Ent,{optional:!0})}supports(i){return this.delegate?this.delegate.supports(i):!1}addEventListener(i,n,s){return this.delegate.addEventListener(i,n,s)}removeEventListener(i,n,s){return this.delegate.removeEventListener(i,n,s)}};return t.\u0275fac=function(r){return new(r||t)(U(ge))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),$2=["alt","control","meta","shift"],Kst={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yst={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Jst=(()=>{let t=class Gh extends SS{constructor(i){super(i)}supports(i){return Gh.parseEventName(i)!=null}addEventListener(i,n,s){let a=Gh.parseEventName(n),o=Gh.eventCallback(a.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zl().onAndCancel(i,a.domEventName,o))}static parseEventName(i){let n=i.toLowerCase().split("."),s=n.shift();if(n.length===0||!(s==="keydown"||s==="keyup"))return null;let a=Gh._normalizeKey(n.pop()),o="",l=n.indexOf("code");if(l>-1&&(n.splice(l,1),o="code."),$2.forEach(h=>{let p=n.indexOf(h);p>-1&&(n.splice(p,1),o+=h+".")}),o+=a,n.length!=0||a.length===0)return null;let c={};return c.domEventName=s,c.fullKey=o,c}static matchEventFullKeyCode(i,n){let s=Kst[i.key]||i.key,a="";return n.indexOf("code.")>-1&&(s=i.code,a="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),$2.forEach(o=>{if(o!==s){let l=Yst[o];l(i)&&(a+=o+".")}}),a+=s,a===n)}static eventCallback(i,n,s){return a=>{Gh.matchEventFullKeyCode(a,i)&&s.runGuarded(()=>n(a))}}static _normalizeKey(i){return i==="esc"?"escape":i}};return t.\u0275fac=function(r){return new(r||t)(U(ge))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})();function Qst(t){return Snt(tat(t))}function tat(t){return{appProviders:[...zz,...t?.providers??[]],platformProviders:nat}}function eat(){Lst.makeCurrent()}function iat(){return new ga}function rat(){return ott(document),document}var nat=[{provide:dn,useValue:yz},{provide:w3,useValue:eat,multi:!0},{provide:ge,useFactory:rat,deps:[]}],sat=new ht(""),aat=[{provide:__,useClass:zst,deps:[]},{provide:az,useClass:Sx,deps:[Zt,BC,__]},{provide:Sx,useClass:Sx,deps:[Zt,BC,__]}],zz=[{provide:PA,useValue:"root"},{provide:ga,useFactory:iat,deps:[]},{provide:x_,useClass:Xst,multi:!0,deps:[ge,Zt,dn]},{provide:x_,useClass:Jst,multi:!0,deps:[ge]},{provide:x_,useClass:qst,multi:!0},LC,Lz,Dz,{provide:Qd,useExisting:LC},{provide:wz,useClass:Vst,deps:[]},[]],Vz=(()=>{let t=class jz{constructor(i){}static withServerTransition(i){return{ngModule:jz,providers:[{provide:Oy,useValue:i.appId}]}}};return t.\u0275fac=function(r){return new(r||t)(U(sat,12))},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[...zz,...aat],imports:[ti,Ant]}),t})(),rp=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=U(oat),i},providedIn:"root"}),t})(),oat=(()=>{let t=class extends rp{constructor(i){super(),this._doc=i}sanitize(i,n){if(n==null)return null;switch(i){case Nn.NONE:return n;case Nn.HTML:return Hh(n,"HTML")?zl(n):Gtt(this._doc,String(n)).toString();case Nn.STYLE:return Hh(n,"Style")?zl(n):n;case Nn.SCRIPT:if(Hh(n,"Script"))return zl(n);throw new Vt(5200,!1);case Nn.URL:return Hh(n,"URL")?zl(n):qA(String(n));case Nn.RESOURCE_URL:if(Hh(n,"ResourceURL"))return zl(n);throw new Vt(5201,!1);default:throw new Vt(5202,!1)}}bypassSecurityTrustHtml(i){return wtt(i)}bypassSecurityTrustStyle(i){return xtt(i)}bypassSecurityTrustScript(i){return Ctt(i)}bypassSecurityTrustUrl(i){return ktt(i)}bypassSecurityTrustResourceUrl(i){return Att(i)}};return t.\u0275fac=function(r){return new(r||t)(U(ge))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function lat(t){let e=QQ(t);return new Ht(r=>{e?.onDestroy(()=>r.complete());let i=t.subscribe(n=>r.next(n));return()=>i.unsubscribe()})}function Vy(t,e){let r=!e?.manualCleanup;r&&!e?.injector&&Zd(Vy);let i=r?e?.injector?.get(ec)??K(ec):null,n=cat(e?.equal),s;e?.requireSync?s=un({kind:0},{equal:n}):s=un({kind:1,value:e?.initialValue},{equal:n});let a=t.subscribe({next:o=>s.set({kind:1,value:o}),error:o=>{if(e?.rejectErrors)throw o;s.set({kind:2,error:o})}});if(e?.requireSync&&s().kind===0)throw new Vt(601,!1);return i?.onDestroy(a.unsubscribe.bind(a)),rr(()=>{let o=s();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new Vt(601,!1)}},{equal:e?.equal})}function cat(t=Object.is){return(e,r)=>e.kind===1&&r.kind===1&&t(e.value,r.value)}var vb={schedule(t,e){let r=setTimeout(t,e);return()=>clearTimeout(r)},scheduleBeforeRender(t){if(typeof window>"u")return vb.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return vb.schedule(t,16);let e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};function uat(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}var Rx;function hat(t,e){if(!Rx){let r=Element.prototype;Rx=r.matches||r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE?Rx.call(t,e):!1}function dat(t,e){return t===e||t!==t&&e!==e}function pat(t,e){let r=t.childNodes,i=e.map(()=>[]),n=-1;e.some((s,a)=>s==="*"?(n=a,!0):!1);for(let s=0,a=r.length;s<a;++s){let o=r[s],l=mat(o,e,n);l!==-1&&i[l].push(o)}return i}function mat(t,e,r){let i=r;return uat(t)&&e.some((n,s)=>n!=="*"&&hat(t,n)?(i=s,!0):!1),i}var fat=10,gat=class{constructor(t){this.component=t}create(t){return new vat(this.component,t)}},vat=class{constructor(t,e){this.component=t,this.injector=e,this.eventEmitters=new Vo(1),this.events=this.eventEmitters.pipe(_i(r=>lr(...r))),this.componentRef=null,this.viewChangeDetectorRef=null,this.hasInputChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.componentMirror=Mnt(this.component),this.unchangedInputs=new Set(this.componentMirror.inputs.map(({propName:r})=>r)),this.ngZone=this.injector.get(Zt),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(t){this.runInZone(()=>{if(this.scheduledDestroyFn!==null){this.scheduledDestroyFn(),this.scheduledDestroyFn=null;return}this.componentRef===null&&this.initializeComponent(t)})}disconnect(){this.runInZone(()=>{this.componentRef===null||this.scheduledDestroyFn!==null||(this.scheduledDestroyFn=vb.schedule(()=>{this.componentRef!==null&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},fat))})}getInputValue(t){return this.runInZone(()=>{if(this.componentRef===null)return this.initialInputValues.get(t);let e=this.componentRef.instance[t];return Ym(e)?e():e})}setInputValue(t,e,r){this.runInZone(()=>{if(r&&(e=r.call(this.componentRef?.instance,e)),this.componentRef===null){this.initialInputValues.set(t,e);return}dat(e,this.getInputValue(t))&&!(e===void 0&&this.unchangedInputs.has(t))||(this.unchangedInputs.delete(t),this.hasInputChanges=!0,this.componentRef.setInput(t,e),this.scheduleDetectChanges())})}initializeComponent(t){let e=this.injector.get(Xa),r=Re.create({providers:[],parent:this.injector}),i=pat(t,[...this.componentMirror.ngContentSelectors]);this.componentRef=dz(this.component,{environmentInjector:e,elementInjector:r,projectableNodes:i,hostElement:t}),this.viewChangeDetectorRef=this.componentRef.injector.get(di),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(ao).attachView(this.componentRef.hostView)}initializeInputs(){this.componentMirror.inputs.forEach(({propName:t,transform:e})=>{this.initialInputValues.has(t)&&this.setInputValue(t,this.initialInputValues.get(t),e)}),this.initialInputValues.clear()}initializeOutputs(t){let e=this.componentMirror.outputs.map(({propName:r,templateName:i})=>{let n=t.instance[r];return(jo(n)?n:lat(n)).pipe(kt(s=>({name:i,value:s})))});this.eventEmitters.next(e)}markViewForCheck(t){this.hasInputChanges&&(this.hasInputChanges=!1,t.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=vb.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}detectChanges(){this.componentRef!==null&&(this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(t){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(t):t()}};function _at(t,e){class r extends t{get instance(){return this.ngElementStrategy.componentRef?.instance}whenStable(){return Dt(this,null,function*(){let n=e.get(ao);yield fY(n.isStable.pipe(Ye(s=>s)))})}}return r}function bat(t,e,r){return Dt(this,null,function*(){let{injector:i}=yield Qst(r),n=new gat(e),s=Znt(e,{injector:i,strategyFactory:n}),a=_at(s,i);return customElements.define(t,a),a})}function X2(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var Ga={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},b5t=Ga.self||Ga.window||Ga.global||{},y5t=Ga.window||Ga.self||Ga.global||{},w5t=Ga.global||Ga.self||Ga.window||{},x5t=Ga.document||{},Uz=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),q2=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),C5t=q2&&parseFloat(q2[1])||0,yat="3.2.13";function Ja(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}var Wa={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},k5t=Wa.self||Wa.window||Wa.global||{},A5t=Wa.window||Wa.self||Wa.global||{},wat=Wa.global||Wa.self||Wa.window||{},S5t=Wa.document||{},vu=typeof process!="object"||String(process)!=="[object process]"||process.browser,IS=typeof importScripts=="function",xat=typeof window<"u"&&typeof window.orientation<"u",K2=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),E5t=K2&&parseFloat(K2[1])||0;function Qm(t){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qm(t)}function Cat(t,e){if(Qm(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e||"default");if(Qm(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kat(t){var e=Cat(t,"string");return Qm(e)=="symbol"?e:e+""}function k(t,e,r){return(e=kat(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Aat=class{constructor(t,e){k(this,"name",void 0),k(this,"workerThread",void 0),k(this,"isRunning",!0),k(this,"result",void 0),k(this,"_resolve",()=>{}),k(this,"_reject",()=>{}),this.name=t,this.workerThread=e,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(t,e){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:e})}done(t){Ja(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){Ja(this.isRunning),this.isRunning=!1,this._reject(t)}},Bx=class{},Dx=new Map;function Sat(t){Ja(t.source&&!t.url||!t.source&&t.url);let e=Dx.get(t.source||t.url);return e||(t.url&&(e=Eat(t.url),Dx.set(t.url,e)),t.source&&(e=Hz(t.source),Dx.set(t.source,e))),Ja(e),e}function Eat(t){if(!t.startsWith("http"))return t;let e=Tat(t);return Hz(e)}function Hz(t){let e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function Tat(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function Gz(t,e=!0,r){let i=r||new Set;if(t){if(Y2(t))i.add(t);else if(Y2(t.buffer))i.add(t.buffer);else if(!ArrayBuffer.isView(t)&&e&&typeof t=="object")for(let n in t)Gz(t[n],e,i)}return r===void 0?Array.from(i):[]}function Y2(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}var Lx=()=>{},FC=class{static isSupported(){return typeof Zp<"u"&&vu||typeof Bx<"u"&&!vu}constructor(t){k(this,"name",void 0),k(this,"source",void 0),k(this,"url",void 0),k(this,"terminated",!1),k(this,"worker",void 0),k(this,"onMessage",void 0),k(this,"onError",void 0),k(this,"_loadableURL","");let{name:e,source:r,url:i}=t;Ja(r||i),this.name=e,this.source=r,this.url=i,this.onMessage=Lx,this.onError=n=>console.log(n),this.worker=vu?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Lx,this.onError=Lx,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(t,e){e=e||Gz(t),this.worker.postMessage(t,e)}_getErrorFromErrorEvent(t){let e="Failed to load ";return e+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(e+="".concat(t.message," in ")),t.lineno&&(e+=":".concat(t.lineno,":").concat(t.colno)),new Error(e)}_createBrowserWorker(){this._loadableURL=Sat({source:this.source,url:this.url});let t=new Zp(this._loadableURL,{name:this.name});return t.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},t.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},t.onmessageerror=e=>console.error(e),t}_createNodeWorker(){let t;if(this.url){let e=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new Bx(e,{eval:!1})}else if(this.source)t=new Bx(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",e=>{this.onMessage(e)}),t.on("error",e=>{this.onError(e)}),t.on("exit",e=>{}),t}},Iat=class{static isSupported(){return FC.isSupported()}constructor(t){k(this,"name","unnamed"),k(this,"source",void 0),k(this,"url",void 0),k(this,"maxConcurrency",1),k(this,"maxMobileConcurrency",1),k(this,"onDebug",()=>{}),k(this,"reuseWorkers",!0),k(this,"props",{}),k(this,"jobQueue",[]),k(this,"idleQueue",[]),k(this,"count",0),k(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props=x(x({},this.props),t),t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}startJob(t,e=(i,n,s)=>i.done(s),r=(i,n)=>i.error(n)){return Dt(this,null,function*(){let i=new Promise(n=>(this.jobQueue.push({name:t,onMessage:e,onError:r,onStart:n}),this));return this._startQueuedJob(),yield i})}_startQueuedJob(){return Dt(this,null,function*(){if(!this.jobQueue.length)return;let t=this._getAvailableWorker();if(!t)return;let e=this.jobQueue.shift();if(e){this.onDebug({message:"Starting job",name:e.name,workerThread:t,backlog:this.jobQueue.length});let r=new Aat(e.name,t);t.onMessage=i=>e.onMessage(r,i.type,i.payload),t.onError=i=>e.onError(r,i),e.onStart(r);try{yield r.result}finally{this.returnWorkerToQueue(t)}}})}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;let t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new FC({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return xat?this.maxMobileConcurrency:this.maxConcurrency}},Oat={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},OS=class Wh{static isSupported(){return FC.isSupported()}static getWorkerFarm(e={}){return Wh._workerFarm=Wh._workerFarm||new Wh({}),Wh._workerFarm.setProps(e),Wh._workerFarm}constructor(e){k(this,"props",void 0),k(this,"workerPools",new Map),this.props=x({},Oat),this.setProps(e),this.workerPools=new Map}destroy(){for(let e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props=x(x({},this.props),e);for(let r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(e){let{name:r,source:i,url:n}=e,s=this.workerPools.get(r);return s||(s=new Iat({name:r,source:i,url:n}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};k(OS,"_workerFarm",void 0);var Pat="latest";function Mat(t,e={}){let r=e[t.id]||{},i="".concat(t.id,"-worker.js"),n=r.workerUrl;if(!n&&t.id==="compression"&&(n=e.workerUrl),e._workerType==="test"&&(n="modules/".concat(t.module,"/dist/").concat(i)),!n){let s=t.version;s==="latest"&&(s=Pat);let a=s?"@".concat(s):"";n="https://unpkg.com/@loaders.gl/".concat(t.module).concat(a,"/dist/").concat(i)}return Ja(n),n}function Rat(t,e=yat){Ja(t,"no worker provided");let r=t.version;return!(!e||!r)}var Bat=tl(cK()),Dat="3.2.13",Nx={};function _u(t){return Dt(this,arguments,function*(e,r=null,i={}){return r&&(e=Lat(e,r,i)),Nx[e]=Nx[e]||Nat(e),yield Nx[e]})}function Lat(t,e,r){if(t.startsWith("http"))return t;let i=r.modules||{};return i[t]?i[t]:vu?r.CDN?(Ja(r.CDN.startsWith("http")),"".concat(r.CDN,"/").concat(e,"@").concat(Dat,"/dist/libs/").concat(t)):IS?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}function Nat(t){return Dt(this,null,function*(){if(t.endsWith("wasm"))return yield(yield fetch(t)).arrayBuffer();if(!vu)try{return Bat&&void 0}catch{return null}if(IS)return importScripts(t);let e=yield(yield fetch(t)).text();return Fat(e,t)})}function Fat(t,e){if(!vu)return;if(IS)return eval.call(wat,t),null;let r=document.createElement("script");r.id=e;try{r.appendChild(document.createTextNode(t))}catch{r.text=t}return document.body.appendChild(r),null}function zat(t,e){return!OS.isSupported()||!vu&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&e?.worker}function Vat(t,e,r,i,n){return Dt(this,null,function*(){let s=t.id,a=Mat(t,r),o=OS.getWorkerFarm(r).getWorkerPool({name:s,url:a});r=JSON.parse(JSON.stringify(r)),i=JSON.parse(JSON.stringify(i||{}));let l=yield o.startJob("process-on-worker",jat.bind(null,n));return l.postMessage("process",{input:e,options:r,context:i}),yield(yield l.result).result})}function jat(t,e,r,i){return Dt(this,null,function*(){switch(r){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":let{id:n,input:s,options:a}=i;try{let o=yield t(s,a);e.postMessage("done",{id:n,result:o})}catch(o){let l=o instanceof Error?o.message:"unknown error";e.postMessage("error",{id:n,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}})}function Wz(t){return t&&typeof t=="object"&&t.isBuffer}function Uat(t){return Wz(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}function Zz(t){if(Wz(t))return Uat(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){let e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function Hat(t,e,r){if(r=r||t.byteLength,t.byteLength<r||e.byteLength<r)return!1;let i=new Uint8Array(t),n=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==n[s])return!1;return!0}function Gat(...t){let e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),r=e.reduce((s,a)=>s+a.byteLength,0),i=new Uint8Array(r),n=0;for(let s of e)i.set(s,n),n+=s.byteLength;return i.buffer}function Wat(t){return Dt(this,null,function*(){let e=[];try{for(var r=iA(t),i,n,s;i=!(n=yield r.next()).done;i=!1){let a=n.value;e.push(a)}}catch{s=[n]}finally{try{i&&(n=r.return)&&(yield n.call(r))}finally{if(s)throw s[0]}}return Gat(...e)})}function J2(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){let e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}var Q2=class{constructor(t,e){k(this,"name",void 0),k(this,"type",void 0),k(this,"sampleSize",1),k(this,"time",void 0),k(this,"count",void 0),k(this,"samples",void 0),k(this,"lastTiming",void 0),k(this,"lastSampleTime",void 0),k(this,"lastSampleCount",void 0),k(this,"_count",0),k(this,"_time",0),k(this,"_samples",0),k(this,"_startTime",0),k(this,"_timerPending",!1),this.name=t,this.type=e,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=J2(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(J2()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}},PS=class{constructor(t){k(this,"id",void 0),k(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(let t in this.stats)this.stats[t].reset();return this}forEach(t){for(let e in this.stats)t(this.stats[e])}getTable(){let t={};return this.forEach(e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(t=>this._getOrCreate(t))}_getOrCreate(t){if(!t||!t.name)return null;let{name:e,type:r}=t;return this.stats[e]||(t instanceof Q2?this.stats[e]=t:this.stats[e]=new Q2(e,r)),this.stats[e]}},Zat="",tM={};function $at(t){for(let e in tM)if(t.startsWith(e)){let r=tM[e];t=t.replace(e,r)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(Zat).concat(t)),t}var $z={};lc($z,{dirname:()=>qat,filename:()=>Xat,join:()=>Kat});function Xat(t){let e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}function qat(t){let e=t&&t.lastIndexOf("/");return e>=0?t.substr(0,e):""}function Kat(...t){let e="/";return t=t.map((r,i)=>(i&&(r=r.replace(new RegExp("^".concat(e)),"")),i!==t.length-1&&(r=r.replace(new RegExp("".concat(e,"$")),"")),r)),t.join(e)}var Yat=t=>typeof t=="boolean",Om=t=>typeof t=="function",zf=t=>t!==null&&typeof t=="object",eM=t=>zf(t)&&t.constructor==={}.constructor,Jat=t=>t&&typeof t[Symbol.iterator]=="function",Qat=t=>t&&typeof t[Symbol.asyncIterator]=="function",np=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,sp=t=>typeof Blob<"u"&&t instanceof Blob,tot=t=>t&&typeof t=="object"&&t.isBuffer,eot=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||zf(t)&&Om(t.tee)&&Om(t.cancel)&&Om(t.getReader),iot=t=>zf(t)&&Om(t.read)&&Om(t.pipe)&&Yat(t.readable),Xz=t=>eot(t)||iot(t),rot=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,not=/^([-\w.]+\/[-\w.+]+)/;function sot(t){let e=not.exec(t);return e?e[1]:t}function iM(t){let e=rot.exec(t);return e?e[1]:""}var aot=/\?.*/;function jy(t){if(np(t)){let e=Fx(t.url||""),r=t.headers.get("content-type")||"";return{url:e,type:sot(r)||iM(e)}}return sp(t)?{url:Fx(t.name||""),type:t.type||""}:typeof t=="string"?{url:Fx(t),type:iM(t)}:{url:"",type:""}}function oot(t){return np(t)?t.headers["content-length"]||-1:sp(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function Fx(t){return t.replace(aot,"")}function qz(t){return Dt(this,null,function*(){if(np(t))return t;let e={},r=oot(t);r>=0&&(e["content-length"]=String(r));let{url:i,type:n}=jy(t);n&&(e["content-type"]=n);let s=yield uot(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));let a=new Response(t,{headers:e});return Object.defineProperty(a,"url",{value:i}),a})}function lot(t){return Dt(this,null,function*(){if(!t.ok){let e=yield cot(t);throw new Error(e)}})}function cot(t){return Dt(this,null,function*(){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{let r=t.headers.get("Content-Type"),i=t.statusText;r.includes("application/json")&&(i+=" ".concat(yield t.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e})}function uot(t){return Dt(this,null,function*(){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){let e=t.slice(0,5);return yield new Promise(r=>{let i=new FileReader;i.onload=n=>{var s;return r(n==null||(s=n.target)===null||s===void 0?void 0:s.result)},i.readAsDataURL(e)})}if(t instanceof ArrayBuffer){let e=t.slice(0,5),r=hot(e);return"data:base64,".concat(r)}return null})}function hot(t){let e="",r=new Uint8Array(t);for(let i=0;i<r.byteLength;i++)e+=String.fromCharCode(r[i]);return btoa(e)}function rM(t,e){return Dt(this,null,function*(){if(typeof t=="string"){t=$at(t);let r=e;return e!=null&&e.fetch&&typeof e?.fetch!="function"&&(r=e.fetch),yield fetch(t,r)}return yield qz(t)})}function Kz(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;let e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,r=t||e;return!!(r&&r.indexOf("Electron")>=0)}function al(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||Kz()}var $l={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},T5t=$l.self||$l.window||$l.global,wv=$l.window||$l.self||$l.global,I5t=$l.document||{},Kp=$l.process||{},Yz=typeof __VERSION__<"u"?__VERSION__:"untranspiled source",O5t=al(),zx=globalThis;function Jz(t){if(!t&&!al())return"Node";if(Kz(t))return"Electron";let e=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(e.indexOf("Edge")>-1)return"Edge";let r=e.indexOf("MSIE ")!==-1,i=e.indexOf("Trident/")!==-1;return r||i?"IE":zx.chrome?"Chrome":zx.safari?"Safari":zx.mozInnerScreenX?"Firefox":"Unknown"}function dot(t){try{let e=window[t],r="__storage_test__";return e.setItem(r,r),e.removeItem(r),e}catch{return null}}var pot=class{constructor(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";k(this,"storage",void 0),k(this,"id",void 0),k(this,"config",void 0),this.storage=dot(r),this.id=t,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){let e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}}_loadConfiguration(){let t={};if(this.storage){let e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}};function mot(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function fot(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,r=Math.max(e-t.length,0);return"".concat(" ".repeat(r)).concat(t)}function Vx(t,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,n=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>i&&(r=Math.min(r,i/t.width));let s=t.width*r,a=t.height*r,o=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(n,");"),"background-size:".concat(s,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),o]}var _b;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(_b||(_b={}));function nM(t){return typeof t=="string"?_b[t.toUpperCase()]||_b.WHITE:t}function got(t,e,r){return!al&&typeof t=="string"&&(e&&(e=nM(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),r&&(e=nM(r),t="\x1B[".concat(r+10,"m").concat(t,"\x1B[49m"))),t}function vot(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],r=Object.getPrototypeOf(t),i=Object.getOwnPropertyNames(r);for(let n of i)typeof t[n]=="function"&&(e.find(s=>n===s)||(t[n]=t[n].bind(t)))}function bb(t,e){if(!t)throw new Error(e||"Assertion failed")}function Ih(){let t;if(al&&"performance"in wv){var e,r;t=wv==null||(e=wv.performance)===null||e===void 0||(r=e.now)===null||r===void 0?void 0:r.call(e)}else if("hrtime"in Kp){var i;let n=Kp==null||(i=Kp.hrtime)===null||i===void 0?void 0:i.call(Kp);t=n[0]*1e3+n[1]/1e6}else t=Date.now();return t}var Oh={debug:al&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},_ot={enabled:!0,level:0};function Rs(){}var sM={},aM={once:!0},ap=class{constructor(){let{id:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};k(this,"id",void 0),k(this,"VERSION",Yz),k(this,"_startTs",Ih()),k(this,"_deltaTs",Ih()),k(this,"_storage",void 0),k(this,"userData",{}),k(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this.userData={},this._storage=new pot("__probe-".concat(this.id,"__"),_ot),this.timeStamp("".concat(this.id," started")),vot(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Ih()-this._startTs).toPrecision(10))}getDelta(){return Number((Ih()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.setConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){bb(t,e)}warn(t){return this._getLogFunction(0,t,Oh.warn,arguments,aM)}error(t){return this._getLogFunction(0,t,Oh.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,Oh.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,Oh.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return this._getLogFunction(t,e,Oh.debug||Oh.info,arguments,aM)}table(t,e,r){return e?this._getLogFunction(t,e,console.table||Rs,r&&[r],{tag:xot(e)}):Rs}image(t){let{logLevel:e,priority:r,image:i,message:n="",scale:s=1}=t;return this._shouldLog(e||r)?al?wot({image:i,message:n,scale:s}):yot({image:i,message:n,scale:s}):Rs}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||Rs)}group(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1},i=oM({logLevel:t,message:e,opts:r}),{collapsed:n}=r;return i.method=(n?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(t,e,Object.assign({},r,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Rs)}withGroup(t,e,r){this.group(t,e)();try{r()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=Qz(t)}_getLogFunction(t,e,r,i,n){if(this._shouldLog(t)){n=oM({logLevel:t,message:e,args:i,opts:n}),r=r||n.method,bb(r),n.total=this.getTotal(),n.delta=this.getDelta(),this._deltaTs=Ih();let s=n.tag||n.message;if(n.once)if(!sM[s])sM[s]=Ih();else return Rs;return e=bot(this.id,n.message,n),r.bind(console,e,...n.args)}return Rs}};k(ap,"VERSION",Yz);function Qz(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return bb(Number.isFinite(e)&&e>=0),e}function oM(t){let{logLevel:e,message:r}=t;t.logLevel=Qz(e);let i=t.args?Array.from(t.args):[];for(;i.length&&i.shift()!==r;);switch(typeof e){case"string":case"function":r!==void 0&&i.unshift(r),t.message=e;break;case"object":Object.assign(t,e);break;default:}typeof t.message=="function"&&(t.message=t.message());let n=typeof t.message;return bb(n==="string"||n==="object"),Object.assign(t,{args:i},t.opts)}function bot(t,e,r){if(typeof e=="string"){let i=r.time?fot(mot(r.total)):"";e=r.time?"".concat(t,": ").concat(i,"  ").concat(e):"".concat(t,": ").concat(e),e=got(e,r.color,r.background)}return e}function yot(t){let{image:e,message:r="",scale:i=1}=t;return console.warn("removed"),Rs}function wot(t){let{image:e,message:r="",scale:i=1}=t;if(typeof e=="string"){let s=new Image;return s.onload=()=>{let a=Vx(s,r,i);console.log(...a)},s.src=e,Rs}let n=e.nodeName||"";if(n.toLowerCase()==="img")return console.log(...Vx(e,r,i)),Rs;if(n.toLowerCase()==="canvas"){let s=new Image;return s.onload=()=>console.log(...Vx(s,r,i)),s.src=e.toDataURL(),Rs}return Rs}function xot(t){for(let e in t)for(let r in t[e])return r||"untitled";return"empty"}var P5t=new ap({id:"@probe.gl/log"}),lM=new ap({id:"loaders.gl"}),Cot=class{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}},kot=class{constructor(){k(this,"console",void 0),this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}},tV={fetch:null,mimeType:void 0,nothrow:!1,log:new kot,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Uz,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Aot={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function eV(){globalThis.loaders=globalThis.loaders||{};let{loaders:t}=globalThis;return t._state=t._state||{},t._state}var iV=()=>{let t=eV();return t.globalOptions=t.globalOptions||x({},tV),t.globalOptions};function Sot(t,e,r,i){return r=r||[],r=Array.isArray(r)?r:[r],Eot(t,r),Iot(e,t,i)}function rV(t,e){let r=iV(),i=t||r;return typeof i.fetch=="function"?i.fetch:zf(i.fetch)?n=>rM(n,i):e!=null&&e.fetch?e?.fetch:rM}function Eot(t,e){cM(t,null,tV,Aot,e);for(let r of e){let i=t&&t[r.id]||{},n=r.options&&r.options[r.id]||{},s=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};cM(i,r.id,n,s,e)}}function cM(t,e,r,i,n){let s=e||"Top level",a=e?"".concat(e,"."):"";for(let o in t){let l=!e&&zf(t[o]),c=o==="baseUri"&&!e,h=o==="workerUrl"&&e;if(!(o in r)&&!c&&!h){if(o in i)lM.warn("".concat(s," loader option '").concat(a).concat(o,"' no longer supported, use '").concat(i[o],"'"))();else if(!l){let p=Tot(o,n);lM.warn("".concat(s," loader option '").concat(a).concat(o,"' not recognized. ").concat(p))()}}}}function Tot(t,e){let r=t.toLowerCase(),i="";for(let n of e)for(let s in n.options){if(t===s)return"Did you mean '".concat(n.id,".").concat(s,"'?");let a=s.toLowerCase();(r.startsWith(a)||a.startsWith(r))&&(i=i||"Did you mean '".concat(n.id,".").concat(s,"'?"))}return i}function Iot(t,e,r){let i=t.options||{},n=x({},i);return Oot(n,r),n.log===null&&(n.log=new Cot),uM(n,iV()),uM(n,e),n}function uM(t,e){for(let r in e)if(r in e){let i=e[r];eM(i)&&eM(t[r])?t[r]=x(x({},t[r]),e[r]):t[r]=e[r]}}function Oot(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function MS(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function RS(t){var e,r;X2(t,"null loader"),X2(MS(t),"invalid loader");let i;return Array.isArray(t)&&(i=t[1],t=t[0],t=Q(x({},t),{options:x(x({},t.options),i)})),((e=t)!==null&&e!==void 0&&e.parseTextSync||(r=t)!==null&&r!==void 0&&r.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}var nV=()=>{let t=eV();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function sV(t){let e=nV();t=Array.isArray(t)?t:[t];for(let r of t){let i=RS(r);e.find(n=>i===n)||e.unshift(i)}}function Pot(){return nV()}var Mot=new ap({id:"loaders.gl"}),Rot=/\.([^.]+)$/;function Bot(t){return Dt(this,arguments,function*(e,r=[],i,n){if(!aV(e))return null;let s=hM(e,r,Q(x({},i),{nothrow:!0}),n);if(s)return s;if(sp(e)&&(e=yield e.slice(0,10).arrayBuffer(),s=hM(e,r,i,n)),!s&&!(i!=null&&i.nothrow))throw new Error(oV(e));return s})}function hM(t,e=[],r,i){if(!aV(t))return null;if(e&&!Array.isArray(e))return RS(e);let n=[];e&&(n=n.concat(e)),r!=null&&r.ignoreRegisteredLoaders||n.push(...Pot()),Lot(n);let s=Dot(t,n,r,i);if(!s&&!(r!=null&&r.nothrow))throw new Error(oV(t));return s}function Dot(t,e,r,i){let{url:n,type:s}=jy(t),a=n||i?.url,o=null,l="";if(r!=null&&r.mimeType&&(o=jx(e,r?.mimeType),l="match forced by supplied MIME type ".concat(r?.mimeType)),o=o||Not(e,a),l=l||(o?"matched url ".concat(a):""),o=o||jx(e,s),l=l||(o?"matched MIME type ".concat(s):""),o=o||zot(e,t),l=l||(o?"matched initial data ".concat(lV(t)):""),o=o||jx(e,r?.fallbackMimeType),l=l||(o?"matched fallback MIME type ".concat(s):""),l){var c;Mot.log(1,"selectLoader selected ".concat((c=o)===null||c===void 0?void 0:c.name,": ").concat(l,"."))}return o}function aV(t){return!(t instanceof Response&&t.status===204)}function oV(t){let{url:e,type:r}=jy(t),i="No valid loader found (";i+=e?"".concat($z.filename(e),", "):"no url provided, ",i+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");let n=t?lV(t):"";return i+=n?' first bytes: "'.concat(n,'"'):"first bytes: not available",i+=")",i}function Lot(t){for(let e of t)RS(e)}function Not(t,e){let r=e&&Rot.exec(e),i=r&&r[1];return i?Fot(t,i):null}function Fot(t,e){e=e.toLowerCase();for(let r of t)for(let i of r.extensions)if(i.toLowerCase()===e)return r;return null}function jx(t,e){for(let r of t)if(r.mimeTypes&&r.mimeTypes.includes(e)||e==="application/x.".concat(r.id))return r;return null}function zot(t,e){if(!e)return null;for(let r of t)if(typeof e=="string"){if(Vot(e,r))return r}else if(ArrayBuffer.isView(e)){if(dM(e.buffer,e.byteOffset,r))return r}else if(e instanceof ArrayBuffer&&dM(e,0,r))return r;return null}function Vot(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function dM(t,e,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>jot(t,e,r,i))}function jot(t,e,r,i){if(i instanceof ArrayBuffer)return Hat(i,t,i.byteLength);switch(typeof i){case"function":return i(t,r);case"string":let n=zC(t,e,i.length);return i===n;default:return!1}}function lV(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?zC(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?zC(t,0,e):""}function zC(t,e,r){if(t.byteLength<e+r)return"";let i=new DataView(t),n="";for(let s=0;s<r;s++)n+=String.fromCharCode(i.getUint8(e+s));return n}function*Uot(t,e){let r=e?.chunkSize||262144,i=0,n=new TextEncoder;for(;i<t.length;){let s=Math.min(t.length-i,r),a=t.slice(i,i+s);i+=s,yield n.encode(a)}}function*Hot(t,e={}){let{chunkSize:r=262144}=e,i=0;for(;i<t.byteLength;){let n=Math.min(t.byteLength-i,r),s=new ArrayBuffer(n),a=new Uint8Array(t,i,n);new Uint8Array(s).set(a),i+=n,yield s}}function Got(t,e){return eA(this,null,function*(){let r=e?.chunkSize||1048576,i=0;for(;i<t.size;){let n=i+r,s=yield new Vm(t.slice(i,n).arrayBuffer());i=n,yield s}})}function pM(t,e){return Uz?Wot(t,e):Zot(t,e)}function Wot(t,e){return eA(this,null,function*(){let r=t.getReader(),i;try{for(;;){let n=i||r.read();e!=null&&e._streamReadAhead&&(i=r.read());let{done:s,value:a}=yield new Vm(n);if(s)return;yield Zz(a)}}catch{r.releaseLock()}})}function Zot(t,e){return eA(this,null,function*(){try{for(var r=iA(t),i,n,s;i=!(n=yield new Vm(r.next())).done;i=!1){let a=n.value;yield Zz(a)}}catch{s=[n]}finally{try{i&&(n=r.return)&&(yield new Vm(n.call(r)))}finally{if(s)throw s[0]}}})}function $ot(t,e){if(typeof t=="string")return Uot(t,e);if(t instanceof ArrayBuffer)return Hot(t,e);if(sp(t))return Got(t,e);if(Xz(t))return pM(t,e);if(np(t))return pM(t.body,e);throw new Error("makeIterator")}var cV="Cannot convert supplied data type";function Xot(t,e,r){if(e.text&&typeof t=="string")return t;if(tot(t)&&(t=t.buffer),t instanceof ArrayBuffer){let i=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let i=t.buffer,n=t.byteLength||t.length;return(t.byteOffset!==0||n!==i.byteLength)&&(i=i.slice(t.byteOffset,t.byteOffset+n)),i}throw new Error(cV)}function qot(t,e,r){return Dt(this,null,function*(){let i=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||i)return Xot(t,e,r);if(sp(t)&&(t=yield qz(t)),np(t)){let n=t;return yield lot(n),e.binary?yield n.arrayBuffer():yield n.text()}if(Xz(t)&&(t=$ot(t,r)),Jat(t)||Qat(t))return Wat(t);throw new Error(cV)})}function Kot(t,e,r=null){if(r)return r;let i=x({fetch:rV(e,t)},t);return Array.isArray(i.loaders)||(i.loaders=null),i}function Yot(t,e){if(!e&&t&&!Array.isArray(t))return t;let r;if(t&&(r=Array.isArray(t)?t:[t]),e&&e.loaders){let i=Array.isArray(e.loaders)?e.loaders:[e.loaders];r=r?[...r,...i]:i}return r&&r.length?r:null}function Uy(t,e,r,i){return Dt(this,null,function*(){Ja(!i||typeof i=="object"),e&&!Array.isArray(e)&&!MS(e)&&(i=void 0,r=e,e=void 0),t=yield t,r=r||{};let{url:n}=jy(t),s=Yot(e,i),a=yield Bot(t,s,r);return a?(r=Sot(r,a,s,n),i=Kot({url:n,parse:Uy,loaders:s},r,i),yield Jot(a,t,r,i)):null})}function Jot(t,e,r,i){return Dt(this,null,function*(){if(Rat(t),np(e)){let n=e,{ok:s,redirected:a,status:o,statusText:l,type:c,url:h}=n,p=Object.fromEntries(n.headers.entries());i.response={headers:p,ok:s,redirected:a,status:o,statusText:l,type:c,url:h}}if(e=yield qot(e,t,r),t.parseTextSync&&typeof e=="string")return r.dataType="text",t.parseTextSync(e,r,i,t);if(zat(t,r))return yield Vat(t,e,r,i,Uy);if(t.parseText&&typeof e=="string")return yield t.parseText(e,r,i,t);if(t.parse)return yield t.parse(e,r,i,t);throw Ja(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))})}function tf(t,e,r,i){return Dt(this,null,function*(){!Array.isArray(e)&&!MS(e)&&(i=void 0,r=e,e=void 0);let n=rV(r),s=t;return typeof t=="string"&&(s=yield n(t)),sp(t)&&(s=yield n(t)),yield Uy(s,e,r)})}var Qot="3.4.15";function uV(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var Za={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},M5t=Za.self||Za.window||Za.global||{},R5t=Za.window||Za.self||Za.global||{},B5t=Za.global||Za.self||Za.window||{},D5t=Za.document||{},tlt=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),mM=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),L5t=mM&&parseFloat(mM[1])||0,{_parseImageNode:elt}=globalThis,VC=typeof Image<"u",jC=typeof ImageBitmap<"u",ilt=!!elt,UC=tlt?!0:ilt;function rlt(t){switch(t){case"auto":return jC||VC||UC;case"imagebitmap":return jC;case"image":return VC;case"data":return UC;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function nlt(){if(jC)return"imagebitmap";if(VC)return"image";if(UC)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function slt(t){let e=olt(t);if(!e)throw new Error("Not an image");return e}function alt(t){switch(slt(t)){case"data":return t;case"image":case"imagebitmap":let e=document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("getImageData");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0),r.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function olt(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}var llt=/^data:image\/svg\+xml/,clt=/\.svg((\?|#).*)?$/;function BS(t){return t&&(llt.test(t)||clt.test(t))}function ult(t,e){if(BS(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(i){throw new Error(i.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return hV(t,e)}function hV(t,e){if(BS(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function dV(t,e,r){return Dt(this,null,function*(){let i=ult(t,r),n=self.URL||self.webkitURL,s=typeof i!="string"&&n.createObjectURL(i);try{return yield hlt(s||i,e)}finally{s&&n.revokeObjectURL(s)}})}function hlt(t,e){return Dt(this,null,function*(){let r=new Image;return r.src=t,e.image&&e.image.decode&&r.decode?(yield r.decode(),r):yield new Promise((i,n)=>{try{r.onload=()=>i(r),r.onerror=s=>n(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){n(s)}})})}var dlt={},fM=!0;function plt(t,e,r){return Dt(this,null,function*(){let i;BS(r)?i=yield dV(t,e,r):i=hV(t,r);let n=e&&e.imagebitmap;return yield mlt(i,n)})}function mlt(t){return Dt(this,arguments,function*(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((flt(r)||!fM)&&(r=null),r)try{return yield createImageBitmap(e,r)}catch(i){console.warn(i),fM=!1}return yield createImageBitmap(e)})}function flt(t){for(let e in t||dlt)return!1;return!0}function glt(t){return!ylt(t,"ftyp",4)||!(t[8]&96)?null:vlt(t)}function vlt(t){switch(_lt(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function _lt(t,e,r){return String.fromCharCode(...t.slice(e,r))}function blt(t){return[...t].map(e=>e.charCodeAt(0))}function ylt(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=blt(e);for(let n=0;n<i.length;++n)if(i[n]!==t[n+r])return!1;return!0}var Fa=!1,Pm=!0;function pV(t){let e=Vf(t);return xlt(e)||Alt(e)||Clt(e)||klt(e)||wlt(e)}function wlt(t){let e=new Uint8Array(t instanceof DataView?t.buffer:t),r=glt(e);return r?{mimeType:r.mimeType,width:0,height:0}:null}function xlt(t){let e=Vf(t);return e.byteLength>=24&&e.getUint32(0,Fa)===2303741511?{mimeType:"image/png",width:e.getUint32(16,Fa),height:e.getUint32(20,Fa)}:null}function Clt(t){let e=Vf(t);return e.byteLength>=10&&e.getUint32(0,Fa)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Pm),height:e.getUint16(8,Pm)}:null}function klt(t){let e=Vf(t);return e.byteLength>=14&&e.getUint16(0,Fa)===16973&&e.getUint32(2,Pm)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Pm),height:e.getUint32(22,Pm)}:null}function Alt(t){let e=Vf(t);if(!(e.byteLength>=3&&e.getUint16(0,Fa)===65496&&e.getUint8(2)===255))return null;let{tableMarkers:r,sofMarkers:i}=Slt(),n=2;for(;n+9<e.byteLength;){let s=e.getUint16(n,Fa);if(i.has(s))return{mimeType:"image/jpeg",height:e.getUint16(n+5,Fa),width:e.getUint16(n+7,Fa)};if(!r.has(s))return null;n+=2,n+=e.getUint16(n,Fa)}return null}function Slt(){let t=new Set([65499,65476,65484,65501,65534]);for(let e=65504;e<65520;++e)t.add(e);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Vf(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function Elt(t,e){return Dt(this,null,function*(){let{mimeType:r}=pV(t)||{},i=globalThis._parseImageNode;return uV(i),yield i(t,r)})}function Tlt(t,e,r){return Dt(this,null,function*(){e=e||{};let i=(e.image||{}).type||"auto",{url:n}=r||{},s=Ilt(i),a;switch(s){case"imagebitmap":a=yield plt(t,e,n);break;case"image":a=yield dV(t,e,n);break;case"data":a=yield Elt(t,e);break;default:uV(!1)}return i==="data"&&(a=alt(a)),a})}function Ilt(t){switch(t){case"auto":case"data":return nlt();default:return rlt(t),t}}var Olt=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],Plt=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],Mlt={image:{type:"auto",decode:!0}},mV={id:"image",module:"images",name:"Images",version:Qot,mimeTypes:Plt,extensions:Olt,parse:Tlt,tests:[t=>!!pV(new DataView(t))],options:Mlt},Ke=new ap({id:"deck"}),HC={};function Rlt(t){HC=t}function sn(t,e,r,i){Ke.level>0&&HC[t]&&HC[t].call(null,e,r,i)}function Blt(t){let e=t[0],r=t[t.length-1];return e==="{"&&r==="}"||e==="["&&r==="]"}var Dlt={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:Blt,parseTextSync:JSON.parse},Mm="8.8.27",C_=globalThis.deck&&globalThis.deck.VERSION;if(C_&&C_!==Mm)throw new Error("deck.gl - multiple versions detected: ".concat(C_," vs ").concat(Mm));C_||(Ke.log(1,"deck.gl ".concat(Mm))(),globalThis.deck=Q(x({},globalThis.deck),{VERSION:Mm,version:Mm,log:Ke,_registerLoggers:Rlt}),sV([Dlt,[mV,{imagebitmap:{premultiplyAlpha:"none"}}]]));var Llt=globalThis.deck,Qt=new ap({id:"luma.gl"});function _n(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}var Nlt="Invalid WebGLRenderingContext",Flt="Requires WebGL2";function Hy(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function Ue(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function zlt(t){return Ue(t)?t:null}function Gy(t){return _n(Hy(t),Nlt),t}function an(t){return _n(Ue(t),Flt),t}var gm={};function Vlt(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function jlt(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function Ult(t,e){gm[t]=!0,e!==void 0&&Vlt(e)}function Hlt(t){let e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(gm[r]=!0);while(r!==0);for(r in gm)if(gm[r])return delete gm[r],parseInt(r,10);return 0}}var jf=function t(e){let r=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){let n=new t.VertexAttrib(r);this.attribs[i]=n}this.maxAttrib=0};jf.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};jf.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var Wu=function(t){let e=this;this.gl=t,Hlt(t);let r=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(i){return i===e.VERTEX_ARRAY_BINDING_OES?e.currentVertexArrayObject===e.defaultVertexArrayObject?null:e.currentVertexArrayObject:r.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(i){let n=e.currentVertexArrayObject;n.maxAttrib=Math.max(n.maxAttrib,i);let s=n.attribs[i];return s.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(i){let n=e.currentVertexArrayObject;n.maxAttrib=Math.max(n.maxAttrib,i);let s=n.attribs[i];return s.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(i,n){switch(i){case 34962:e.currentArrayBuffer=n;break;case 34963:e.currentVertexArrayObject.elementArrayBuffer=n;break;default:}return r.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(i,n){let s=e.currentVertexArrayObject.attribs[i];switch(n){case 34975:return s.buffer;case 34338:return s.enabled;case 34339:return s.size;case 34340:return s.stride;case 34341:return s.type;case 34922:return s.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(i,n,s,a,o,l){let c=e.currentVertexArrayObject;c.maxAttrib=Math.max(c.maxAttrib,i);let h=c.attribs[i];return h.buffer=e.currentArrayBuffer,h.size=n,h.type=s,h.normalized=a,h.stride=o,h.offset=l,h.recache(),r.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{jlt("OESVertexArrayObject emulation library context restored"),e.reset_()},!0),this.reset_()};Wu.prototype.VERTEX_ARRAY_BINDING_OES=34229;Wu.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let e=0;e<this.vertexArrayObjects.length;++e)this.vertexArrayObjects.isAlive=!1;let t=this.gl;this.maxVertexAttribs=t.getParameter(34921),this.defaultVertexArrayObject=new jf(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Wu.prototype.createVertexArrayOES=function(){let t=new jf(this);return this.vertexArrayObjects.push(t),t};Wu.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)};Wu.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof jf&&t.hasBeenBound&&t.ext===this)};Wu.prototype.bindVertexArrayOES=function(t){let e=this.gl;if(t&&!t.isAlive){Ult(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}let r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;let n=this.currentVertexArrayObject;if(i===n)return;(!i||n.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(e,34963,n.elementArrayBuffer);let s=this.currentArrayBuffer,a=Math.max(i?i.maxAttrib:0,n.maxAttrib);for(let o=0;o<=a;o++){let l=n.attribs[o],c=i?i.attribs[o]:null;if((!i||l.enabled!==c.enabled)&&(l.enabled?r.enableVertexAttribArray.call(e,o):r.disableVertexAttribArray.call(e,o)),l.enabled){let h=!1;(!i||l.buffer!==c.buffer)&&(s!==l.buffer&&(r.bindBuffer.call(e,34962,l.buffer),s=l.buffer),h=!0),(h||l.cached!==c.cached)&&r.vertexAttribPointer.call(e,o,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==s&&r.bindBuffer.call(e,34962,this.currentArrayBuffer)};function Glt(t){if(typeof t.createVertexArray=="function")return;let e=t.getSupportedExtensions;t.getSupportedExtensions=function(){let i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};let r=t.getExtension;t.getExtension=function(i){return r.call(this,i)||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Wu(this)),this.__OESVertexArrayObject))}}var gM="OES_element_index",vM="WEBGL_draw_buffers",Wlt="EXT_disjoint_timer_query",Zlt="EXT_disjoint_timer_query_webgl2",$lt="EXT_texture_filter_anisotropic",_M="WEBGL_debug_renderer_info",Xlt=35723,qlt=4352,Klt=36795,Ylt=34047,Jlt=37445,Qlt=37446,Zi=t=>Ue(t)?void 0:0,tct={3074:t=>Ue(t)?void 0:36064,[Xlt]:t=>Ue(t)?void 0:qlt,35977:Zi,32937:Zi,[Klt]:(t,e)=>{let r=Ue(t)?t.getExtension(Zlt):t.getExtension(Wlt);return r&&r.GPU_DISJOINT_EXT?e(r.GPU_DISJOINT_EXT):0},[Jlt]:(t,e)=>{let r=t.getExtension(_M);return e(r&&r.UNMASKED_VENDOR_WEBGL||7936)},[Qlt]:(t,e)=>{let r=t.getExtension(_M);return e(r&&r.UNMASKED_RENDERER_WEBGL||7937)},[Ylt]:(t,e)=>{let r=t.luma.extensions[$lt];return r?e(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Zi,35071:Zi,37447:Zi,36063:(t,e)=>{if(!Ue(t)){let r=t.getExtension(vM);return r?e(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Zi,35374:Zi,35377:Zi,34852:t=>{if(!Ue(t)){let e=t.getExtension(vM);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(gM)?2147483647:65535,33001:t=>t.getExtension(gM)?16777216:65535,33e3:t=>16777216,37157:Zi,35373:Zi,35657:Zi,36183:Zi,37137:Zi,34045:Zi,35978:Zi,35979:Zi,35968:Zi,35376:Zi,35375:Zi,35659:Zi,37154:Zi,35371:Zi,35658:Zi,35076:Zi,35077:Zi,35380:Zi};function ect(t,e,r){let i=tct[r],n=typeof i=="function"?i(t,e,r):i;return n!==void 0?n:e(r)}var ict="OES_vertex_array_object",fV="ANGLE_instanced_arrays",rct="WEBGL_draw_buffers",nct="EXT_disjoint_timer_query",sct="EXT_texture_filter_anisotropic",act="VertexArray requires WebGL2 or OES_vertex_array_object extension";function oct(t,e){return{webgl2:Ue(t),ext:t.getExtension(e)}}var gV={[ict]:{meta:{suffix:"OES"},createVertexArray:()=>{_n(!1,act)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[fV]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){_n(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[rct]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{_n(!1)}},[nct]:{meta:{suffix:"EXT"},createQuery:()=>{_n(!1)},deleteQuery:()=>{_n(!1)},beginQuery:()=>{_n(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},Ux={readBuffer:(t,e,r)=>{Ue(t)&&e(r)},getVertexAttrib:(t,e,r,i)=>{let{webgl2:n,ext:s}=oct(t,fV),a;switch(i){case 35069:a=n?void 0:!1;break;case 35070:a=!n&&!s?0:void 0;break;default:}return a!==void 0?a:e(r,i)},getProgramParameter:(t,e,r,i)=>{if(!Ue(t))switch(i){case 35967:return 35981;case 35971:return 0;case 35382:return 0;default:}return e(r,i)},getInternalformatParameter:(t,e,r,i,n)=>{if(!Ue(t))switch(n){case 32937:return new Int32Array([0]);default:}return t.getInternalformatParameter(r,i,n)},getTexParameter(t,e,r,i){switch(i){case 34046:let{extensions:n}=t.luma,s=n[sct];i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break;default:}return e(r,i)},getParameter:ect,hint(t,e,r,i){return e(r,i)}};function lct(t){t.luma=t.luma||{};let{luma:e}=t;return e.polyfilled||(Glt(t),cct(t),hct(t,gV),uct(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=lct;function cct(t){t.luma.extensions={};let e=t.getSupportedExtensions()||[];for(let r of e)t.luma[r]=t.getExtension(r)}function uct(t,e){let{target:r,target2:i}=e;Object.keys(Ux).forEach(n=>{if(typeof Ux[n]=="function"){let s=t[n]?t[n].bind(t):()=>{},a=Ux[n].bind(null,t,s);r[n]=a,i[n]=a}})}function hct(t,e){for(let r of Object.getOwnPropertyNames(e))r!=="overrides"&&dct(t,{extension:r,target:t.luma,target2:t})}function dct(t,e){let{extension:r,target:i,target2:n}=e,s=gV[r];_n(s);let{meta:a={}}=s,{suffix:o=""}=a,l=t.getExtension(r);for(let c of Object.keys(s)){let h="".concat(c).concat(o),p=null;c==="meta"||typeof t[c]=="function"||(l&&typeof l[h]=="function"?p=function(){return l[h](...arguments)}:typeof s[c]=="function"&&(p=s[c].bind(i))),p&&(i[c]=p,n[c]=p)}}var DS={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},El=(t,e,r)=>e?t.enable(r):t.disable(r),bM=(t,e,r)=>t.hint(r,e),es=(t,e,r)=>t.pixelStorei(r,e),pct=(t,e)=>{let r=Ue(t)?36009:36160;return t.bindFramebuffer(r,e)},mct=(t,e)=>t.bindFramebuffer(36008,e);function Yp(t){return Array.isArray(t)||ArrayBuffer.isView(t)}var fct={3042:El,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:El,2885:(t,e)=>t.cullFace(e),2929:El,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:El,35723:bM,36006:pct,2886:(t,e)=>t.frontFace(e),33170:bM,2849:(t,e)=>t.lineWidth(e),32823:El,32824:"polygonOffset",10752:"polygonOffset",35977:El,32938:"sampleCoverage",32939:"sampleCoverage",3089:El,3088:(t,e)=>t.scissor(...e),2960:El,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:es,3317:es,37440:es,37441:es,37443:es,3330:es,3332:es,3331:es,36010:mct,3314:es,32878:es,3316:es,3315:es,32877:es,framebuffer:(t,e)=>{let r=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,r)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=Yp(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=Yp(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=Yp(e)?e:[e,e];let[r,i]=e;t.stencilMaskSeparate(1028,r),t.stencilMaskSeparate(1029,i)},stencilFunc:(t,e)=>{e=Yp(e)&&e.length===3?[...e,...e]:e;let[r,i,n,s,a,o]=e;t.stencilFuncSeparate(1028,r,i,n),t.stencilFuncSeparate(1029,s,a,o)},stencilOp:(t,e)=>{e=Yp(e)&&e.length===3?[...e,...e]:e;let[r,i,n,s,a,o]=e;t.stencilOpSeparate(1028,r,i,n),t.stencilOpSeparate(1029,s,a,o)},viewport:(t,e)=>t.viewport(...e)};function pr(t,e,r){return e[t]!==void 0?e[t]:r[t]}var gct={blendEquation:(t,e,r)=>t.blendEquationSeparate(pr(32777,e,r),pr(34877,e,r)),blendFunc:(t,e,r)=>t.blendFuncSeparate(pr(32969,e,r),pr(32968,e,r),pr(32971,e,r),pr(32970,e,r)),polygonOffset:(t,e,r)=>t.polygonOffset(pr(32824,e,r),pr(10752,e,r)),sampleCoverage:(t,e,r)=>t.sampleCoverage(pr(32938,e,r),pr(32939,e,r)),stencilFuncFront:(t,e,r)=>t.stencilFuncSeparate(1028,pr(2962,e,r),pr(2967,e,r),pr(2963,e,r)),stencilFuncBack:(t,e,r)=>t.stencilFuncSeparate(1029,pr(34816,e,r),pr(36003,e,r),pr(36004,e,r)),stencilOpFront:(t,e,r)=>t.stencilOpSeparate(1028,pr(2964,e,r),pr(2965,e,r),pr(2966,e,r)),stencilOpBack:(t,e,r)=>t.stencilOpSeparate(1029,pr(34817,e,r),pr(34818,e,r),pr(34819,e,r))},yM={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,r)=>t({[e]:r}),hint:(t,e,r)=>t({[e]:r}),bindFramebuffer:(t,e,r)=>{switch(e){case 36160:return t({36006:r,36010:r});case 36009:return t({36006:r});case 36008:return t({36010:r});default:return null}},blendColor:(t,e,r,i,n)=>t({32773:new Float32Array([e,r,i,n])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,r)=>t({32777:e,34877:r}),blendFunc:(t,e,r)=>t({32969:e,32968:r,32971:e,32970:r}),blendFuncSeparate:(t,e,r,i,n)=>t({32969:e,32968:r,32971:i,32970:n}),clearColor:(t,e,r,i,n)=>t({3106:new Float32Array([e,r,i,n])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,r,i,n)=>t({3107:[e,r,i,n]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,r)=>t({2928:new Float32Array([e,r])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,r)=>t({32824:e,10752:r}),sampleCoverage:(t,e,r)=>t({32938:e,32939:r}),scissor:(t,e,r,i,n)=>t({3088:new Int32Array([e,r,i,n])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,r)=>t({[e===1028?2968:36005]:r}),stencilFunc:(t,e,r,i)=>t({2962:e,2967:r,2963:i,34816:e,36003:r,36004:i}),stencilFuncSeparate:(t,e,r,i,n)=>t({[e===1028?2962:34816]:r,[e===1028?2967:36003]:i,[e===1028?2963:36004]:n}),stencilOp:(t,e,r,i)=>t({2964:e,2965:r,2966:i,34817:e,34818:r,34819:i}),stencilOpSeparate:(t,e,r,i,n)=>t({[e===1028?2964:34817]:r,[e===1028?2965:34818]:i,[e===1028?2966:34819]:n}),viewport:(t,e,r,i,n)=>t({2978:[e,r,i,n]})},Ea=(t,e)=>t.isEnabled(e),wM={3042:Ea,2884:Ea,2929:Ea,3024:Ea,32823:Ea,32926:Ea,32928:Ea,3089:Ea,2960:Ea,35977:Ea};function vV(t){for(let e in t)return!1;return!0}function vct(t,e){if(t===e)return!0;let r=Array.isArray(t)||ArrayBuffer.isView(t),i=Array.isArray(e)||ArrayBuffer.isView(e);if(r&&i&&t.length===e.length){for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}return!1}function xM(t,e){let r=t[e].bind(t);t[e]=function(){let i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:r(...arguments):r(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function _ct(t,e,r){let i=t[e].bind(t);t[e]=function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];let{valueChanged:o,oldValue:l}=r(t.state._updateCache,...s);return o&&i(...s),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function bct(t){let e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}var yct=class{constructor(t){let{copyState:e=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=e?xct(t):Object.assign({},DS),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.stateStack.push({})}pop(){_n(this.stateStack.length>0);let t=this.stateStack[this.stateStack.length-1];$o(this.gl,t),this.stateStack.pop()}_updateCache(t){let e=!1,r,i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(let n in t){_n(n!==void 0);let s=t[n],a=this.cache[n];vct(s,a)||(e=!0,r=a,i&&!(n in i)&&(i[n]=a),this.cache[n]=s)}return{valueChanged:e,oldValue:r}}};function _V(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{enable:r=!0,copyState:i}=e;if(_n(i!==void 0),!t.state){let{polyfillContext:n}=globalThis;n&&n(t),t.state=new yct(t,{copyState:i}),bct(t);for(let s in yM){let a=yM[s];_ct(t,s,a)}xM(t,"getParameter"),xM(t,"isEnabled")}return t.state.enable=r,t}function wct(t){t.state||_V(t,{copyState:!1}),t.state.push()}function CM(t){_n(t.state),t.state.pop()}function $o(t,e){if(_n(Hy(t),"setParameters requires a WebGL context"),vV(e))return;let r={};for(let n in e){let s=Number(n),a=fct[n];a&&(typeof a=="string"?r[a]=!0:a(t,e[n],s))}let i=t.state&&t.state.cache;if(i)for(let n in r){let s=gct[n];s(t,e,i)}}function xct(t,e){if(e=e||DS,typeof e=="number"){let n=e,s=wM[n];return s?s(t,n):t.getParameter(n)}let r=Array.isArray(e)?e:Object.keys(e),i={};for(let n of r){let s=wM[n];i[n]=s?s(t,Number(n)):t.getParameter(Number(n))}return i}function Cct(t){$o(t,DS)}function Ns(t,e,r){if(vV(e))return r(t);let{nocatch:i=!0}=e;wct(t),$o(t,e);let n;if(i)n=r(t),CM(t);else try{n=r(t)}finally{CM(t)}return n}function xd(t){let{luma:e}=t;if(t.canvas&&e){let r=e.canvasSizeInfo,i="clientWidth"in r?r.clientWidth:t.canvas.clientWidth;return i?t.drawingBufferWidth/i:1}return 1}function Hx(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=xd(t),n=t.drawingBufferWidth,s=t.drawingBufferHeight;return Act(e,i,n,s,r)}function kct(t){let e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function Act(t,e,r,i,n){let s=kM(t[0],e,r),a=AM(t[1],e,i,n),o=kM(t[0]+1,e,r),l=o===r-1?o:o-1;o=AM(t[1]+1,e,i,n);let c;return n?(o=o===0?o:o+1,c=a,a=o):c=o===i-1?o:o-1,{x:s,y:a,width:Math.max(l-s+1,1),height:Math.max(c-a+1,1)}}function kM(t,e,r){return Math.min(Math.round(t*e),r-1)}function AM(t,e,r,i){return i?Math.max(0,r-1-Math.round(t*e)):Math.min(Math.round(t*e),r-1)}var LS=al(),Sct=LS&&typeof document<"u",bV={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function yV(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_n(LS,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},bV,t);let{width:e,height:r}=t;function i(o){if(t.throwOnError)throw new Error(o);return console.error(o),null}t.onError=i;let n,{canvas:s}=t,a=Oct({canvas:s,width:e,height:r,onError:i});return n=Ict(a,t),n?(n=NS(n,t),Pct(n),n):null}function NS(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||Mct(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},bV,e);let{manageState:r,debug:i}=e;return r&&_V(t,{copyState:!1,log:function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return Qt.log(1,...s)()}}),LS&&i&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Qt.level=Math.max(Qt.level,1)):Qt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function Ect(t){let e=t.getParameter(7936),r=t.getParameter(7937),i=t.getExtension("WEBGL_debug_renderer_info"),n=i&&t.getParameter(i.UNMASKED_VENDOR_WEBGL||7936),s=i&&t.getParameter(i.UNMASKED_RENDERER_WEBGL||7937);return{vendor:n||e,renderer:s||r,vendorMasked:e,rendererMasked:r,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function Tct(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){let i=kct(e.useDevicePixels);Rct(t,i,e);return}let r=t.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in e&&"height"in e&&r.resize(e.width,e.height)}function Ict(t,e){let{onError:r}=e,i=null,n=l=>i=l.statusMessage||i;t.addEventListener("webglcontextcreationerror",n,!1);let{webgl1:s=!0,webgl2:a=!0}=e,o=null;return a&&(o=o||t.getContext("webgl2",e),o=o||t.getContext("experimental-webgl2",e)),s&&(o=o||t.getContext("webgl",e),o=o||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",n,!1),o?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),o):r("Failed to create ".concat(a&&!s?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}function Oct(t){let{canvas:e,width:r=800,height:i=600,onError:n}=t,s;return typeof e=="string"?(Sct&&document.readyState==="complete"||n("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",s.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}function Pct(t){let e=Ue(t)?"WebGL2":"WebGL1",r=Ect(t),i=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",n=t.debug?" debug":"";Qt.info(1,"".concat(e).concat(n," context ").concat(i))()}function Mct(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function Rct(t,e,r){let i="width"in r?r.width:t.canvas.clientWidth,n="height"in r?r.height:t.canvas.clientHeight;(!i||!n)&&(Qt.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=t.canvas.width||1,n=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};let s=t.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==n||s.devicePixelRatio!==e){let a=e,o=Math.floor(i*a),l=Math.floor(n*a);t.canvas.width=o,t.canvas.height=l,(t.drawingBufferWidth!==o||t.drawingBufferHeight!==l)&&(Qt.warn("Device pixel ratio clamped")(),a=Math.min(t.drawingBufferWidth/i,t.drawingBufferHeight/n),t.canvas.width=Math.floor(i*a),t.canvas.height=Math.floor(n*a)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:i,clientHeight:n,devicePixelRatio:e})}}var Rm="8.5.21",Bct="set luma.log.level=1 (or higher) to trace rendering",Dct=class{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new PS({id:t})),this.stats.get(t)}},du=new Dct;if(globalThis.luma&&globalThis.luma.VERSION!==Rm)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Rm));globalThis.luma||(al()&&Qt.log(1,"luma.gl ".concat(Rm," - ").concat(Bct))(),globalThis.luma=globalThis.luma||{VERSION:Rm,version:Rm,log:Qt,stats:du,globals:{modules:{},nodeIO:{}}});var N5t=globalThis.luma;function Lct(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function Nct(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function jt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function Gx(t,e){if(typeof e!="string")return e;let r=Number(e);if(!isNaN(r))return r;e=e.replace(/^.*\./,"");let i=t[e];return jt(i!==void 0,"Accessing undefined constant GL.".concat(e)),i}function Xl(t,e){e=Number(e);for(let r in t)if(t[r]===e)return"GL.".concat(r);return String(e)}var Wx={};function Un(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";Wx[t]=Wx[t]||1;let e=Wx[t]++;return"".concat(t,"-").concat(e)}function SM(t){return jt(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function Cd(t){let e=!0;for(let r in t){e=!1;break}return e}function wV(t,e,r,i){let n="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);i.forEach(a=>{s.methodName||(s[a]=()=>{throw Qt.removed("Calling removed method ".concat(e,".").concat(a,": "),n)(),new Error(a)})})}var Ph="Resource subclass must define virtual methods",ol=class{get[Symbol.toStringTag](){return"Resource"}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gy(t);let{id:r,userData:i={}}=e;this.gl=t,this.gl2=t,this.id=r||Un(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=e.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach(r=>r.delete()),this}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof t!="function")return this._bindHandle(t),this;let e;return this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e}unbind(){this.bind(null)}getParameter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=Gx(this.gl,t),jt(t);let r=(this.constructor.PARAMETERS||{})[t];if(r){let i=Ue(this.gl);if(!((!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension)))){let n=r.webgl1,s="webgl2"in r?r.webgl2:r.webgl1;return i?s:n}}return this._getParameter(t,e)}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{parameters:e,keys:r}=t,i=this.constructor.PARAMETERS||{},n=Ue(this.gl),s={},a=e||Object.keys(i);for(let o of a){let l=i[o];if(l&&(!("webgl2"in l)||n)&&(!("extension"in l)||this.gl.getExtension(l.extension))){let c=r?Xl(this.gl,o):o;s[c]=this.getParameter(o,t),r&&l.type==="GLenum"&&(s[c]=Xl(this.gl,s[c]))}}return s}setParameter(t,e){t=Gx(this.gl,t),jt(t);let r=(this.constructor.PARAMETERS||{})[t];if(r){let i=Ue(this.gl);if(!((!("webgl2"in r)||i)&&(!("extension"in r)||this.gl.getExtension(r.extension))))throw new Error("Parameter not available on this platform");r.type==="GLenum"&&(e=Gx(e))}return this._setParameter(t,e),this}setParameters(t){for(let e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,r){return wV(this,t,e,r)}initialize(t){}_createHandle(){throw new Error(Ph)}_deleteHandle(){throw new Error(Ph)}_bindHandle(t){throw new Error(Ph)}_getOptsFromHandle(){throw new Error(Ph)}_getParameter(t,e){throw new Error(Ph)}_setParameter(t,e){throw new Error(Ph)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){let t=this[Symbol.toStringTag],e=du.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}_removeStats(){let t=this[Symbol.toStringTag];du.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(t,e),this._trackAllocatedMemoryForContext(t,e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=t}_trackAllocatedMemoryForContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",i=du.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(t),i.get("".concat(e," Memory")).addCount(t)}_trackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(t),this._trackDeallocatedMemoryForContext(t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=du.get("Memory Usage".concat(e));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(t," Memory")).subtractCount(this.byteLength)}},Fct="Failed to deduce GL constant from typed array";function GC(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Fct)}}function ef(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function zct(t){let{data:e,width:r,height:i,bytesPerPixel:n=4,temp:s}=t,a=r*n;s=s||new Uint8Array(a);for(let o=0;o<i/2;++o){let l=o*a,c=(i-o-1)*a;s.set(e.subarray(l,l+a)),e.copyWithin(l,c,c+a),e.set(s,c)}}function Vct(t){let{data:e,width:r,height:i}=t,n=Math.round(r/2),s=Math.round(i/2),a=new Uint8Array(n*s*4);for(let o=0;o<s;o++)for(let l=0;l<n;l++)for(let c=0;c<4;c++)a[(o*n+l)*4+c]=e[(o*2*r+l*2)*4+c];return{data:a,width:n,height:s}}function WC(t,e,r){let{removedProps:i={},deprecatedProps:n={},replacedProps:s={}}=r;for(let o in i)if(o in e){let l=i[o]?"".concat(t,".").concat(i[o]):"N/A";Qt.removed("".concat(t,".").concat(o),l)()}for(let o in n)if(o in e){let l=n[o];Qt.deprecated("".concat(t,".").concat(o),"".concat(t,".").concat(l))()}let a=null;for(let o in s)if(o in e){let l=s[o];Qt.deprecated("".concat(t,".").concat(o),"".concat(t,".").concat(l))(),a=a||Object.assign({},e),a[l]=e[o],delete a[o]}return a||e}var jct={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Uct={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},Na=class k_{static getBytesPerElement(e){return ef(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return jt(e.size),ef(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return new k_(jct,...r)}constructor(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];r.forEach(n=>this._assign(n)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return k_.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return k_.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=WC("Accessor",e,Uct),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}},EM=10,xV={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Hct={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:xV},Gct={removedProps:xV},Di=class extends ol{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Na.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Na.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=WC("Buffer",t,Hct),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return t=WC("Buffer",t,Gct),"accessor"in t&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new Na(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});let{data:e,offset:r=0,srcOffset:i=0}=t,n=t.byteLength||t.length;jt(e);let s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),i!==0||n!==void 0?(an(this.gl),this.gl.bufferSubData(this.target,r,e,i,n)):this.gl.bufferSubData(s,r,e),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(e),this}copyData(t){let{sourceBuffer:e,readOffset:r=0,writeOffset:i=0,size:n}=t,{gl:s}=this;return an(s),s.bindBuffer(36662,e.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,i,n),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:e=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};an(this.gl);let n=ef(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(e),a=r,o,l;t?(l=t.length,o=l-a):(o=Math.min(s,i||s),l=a+o);let c=Math.min(s,o);return i=i||c,jt(i<=c),t=t||new n(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,t,r,i),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?i!==void 0?this.gl.bindBufferRange(t,e,this.handle,r,i):(jt(r===0),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:e=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(EM,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.byteLength+e;jt(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();let i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,e,t),this.gl.bindBuffer(i,null),this.debugData=t.slice(0,EM),this.bytesUsed=r,this._trackAllocatedMemory(r);let n=GC(t);return jt(n),this.setAccessor(new Na(this.accessor,{type:n})),this}_setByteLength(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;jt(t>=0),this._trackDeallocatedMemory();let r=t;t===0&&(r=new Float32Array(0));let i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,e),this.gl.bindBuffer(i,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){let e=ef(this.accessor.type||5126,{clamped:!1}),r=t/e.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(t){this.accessor.type||this.setAccessor(new Na(this.accessor,{type:GC(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);let e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return Qt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Qt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Qt.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Qt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Na(this.accessor,t),this}},FS={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},CV={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},kV={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function Wct(t,e){let r=FS[e];if(!r)return!1;if(r.gl1===void 0&&r.gl2===void 0)return!0;let i=Ue(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}function Zct(t,e){let r=FS[e];switch(r&&r.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}var $ct=[9729,9728],TM=globalThis.WebGLBuffer||function(){},Pu=class extends ol{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{format:r,linearFiltering:i}=e,n=!0;return r&&(n=n&&Wct(t,r),n=n&&(!i||Zct(t,r))),n}constructor(t,e){let{id:r=Un("texture"),handle:i,target:n}=e;super(t,{id:r,handle:i}),this.target=n,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.data;if(e instanceof Promise)return e.then(S=>this.initialize(Object.assign({},t,{pixels:S,data:S}))),this;let r=typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement;if(r&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",()=>this.initialize(t)),this;let{pixels:i=null,format:n=6408,border:s=0,recreate:a=!1,parameters:o={},pixelStore:l={},textureUnit:c=void 0}=t;e||(e=i);let{width:h,height:p,dataFormat:m,type:f,compressed:g=!1,mipmaps:_=!0}=t,{depth:w=0}=t;return{width:h,height:p,compressed:g,dataFormat:m,type:f}=this._deduceParameters({format:n,type:f,dataFormat:m,compressed:g,data:e,width:h,height:p}),this.width=h,this.height=p,this.depth=w,this.format=n,this.type=f,this.dataFormat=m,this.border=s,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),_&&this._isNPOT()&&(Qt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),_=!1,this._updateForNPOT(o)),this.mipmaps=_,this.setImageData({data:e,width:h,height:p,depth:w,format:n,type:f,dataFormat:m,border:s,mipmaps:_,parameters:l,compressed:g}),_&&this.generateMipmap(),this.setParameters(o),a&&(this.data=e),r&&(this._video={video:e,parameters:o,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){let{video:t,parameters:e,lastTime:r}=this._video;if(r===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:e,width:r,mipmaps:i=!1}=t;return r!==this.width||e!==this.height?this.initialize({width:r,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Qt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Ns(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");let{target:e=this.target,pixels:r=null,level:i=0,format:n=this.format,border:s=this.border,offset:a=0,parameters:o={}}=t,{data:l=null,type:c=this.type,width:h=this.width,height:p=this.height,dataFormat:m=this.dataFormat,compressed:f=!1}=t;l||(l=r),{type:c,dataFormat:m,compressed:f,width:h,height:p}=this._deduceParameters({format:n,type:c,dataFormat:m,compressed:f,data:l,width:h,height:p});let{gl:g}=this;g.bindTexture(this.target,this.handle);let _=null;({data:l,dataType:_}=this._getDataType({data:l,compressed:f}));let w,S=0;if(Ns(this.gl,o,()=>{switch(_){case"null":g.texImage2D(e,i,n,h,p,s,m,c,l);break;case"typed-array":g.texImage2D(e,i,n,h,p,s,m,c,l,a);break;case"buffer":w=an(g),w.bindBuffer(35052,l.handle||l),w.texImage2D(e,i,n,h,p,s,m,c,a),w.bindBuffer(35052,null);break;case"browser-object":Ue(g)?g.texImage2D(e,i,n,h,p,s,m,c,l):g.texImage2D(e,i,n,m,c,l);break;case"compressed":for(let[C,b]of l.entries())g.compressedTexImage2D(e,C,b.format,b.width,b.height,s,b.data),S+=b.levelSize;break;default:jt(!1,"Unknown image data type")}}),_==="compressed")this._trackAllocatedMemory(S,"Texture");else if(l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{let C=CV[this.dataFormat]||4,b=kV[this.type]||1;this._trackAllocatedMemory(this.width*this.height*C*b,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:e=this.target,pixels:r=null,data:i=null,x:n=0,y:s=0,width:a=this.width,height:o=this.height,level:l=0,format:c=this.format,type:h=this.type,dataFormat:p=this.dataFormat,compressed:m=!1,offset:f=0,border:g=this.border,parameters:_={}}=t;if({type:h,dataFormat:p,compressed:m,width:a,height:o}=this._deduceParameters({format:c,type:h,dataFormat:p,compressed:m,data:i,width:a,height:o}),jt(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){let w=i;i=w.data,a=w.shape[0],o=w.shape[1]}i instanceof Di&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Ns(this.gl,_,()=>{if(m)this.gl.compressedTexSubImage2D(e,l,n,s,a,o,c,i);else if(i===null)this.gl.texSubImage2D(e,l,n,s,a,o,p,h,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(e,l,n,s,a,o,p,h,i,f);else if(i instanceof TM){let w=an(this.gl);w.bindBuffer(35052,i),w.texSubImage2D(e,l,n,s,a,o,p,h,f),w.bindBuffer(35052,null)}else Ue(this.gl)?an(this.gl).texSubImage2D(e,l,n,s,a,o,p,h,i):this.gl.texSubImage2D(e,l,n,s,p,h,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,{gl:e}=this;return t!==void 0&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,{gl:e}=this;return t!==void 0&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType(t){let{data:e,compressed:r=!1}=t;return r?{data:e,dataType:"compressed"}:e===null?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof Di?{data:e.handle,dataType:"buffer"}:e instanceof TM?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}}_deduceParameters(t){let{format:e,data:r}=t,{width:i,height:n,dataFormat:s,type:a,compressed:o}=t,l=FS[e];return s=s||l&&l.dataFormat,a=a||l&&l.types[0],o=o||l&&l.compressed,{width:i,height:n}=this._deduceImageSize(r,i,n),{dataFormat:s,type:a,compressed:o,width:i,height:n,format:e,data:r}}_deduceImageSize(t,e,r){let i;return typeof ImageData<"u"&&t instanceof ImageData?i={width:t.width,height:t.height}:typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement?i={width:t.naturalWidth,height:t.naturalHeight}:typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement?i={width:t.width,height:t.height}:typeof ImageBitmap<"u"&&t instanceof ImageBitmap?i={width:t.width,height:t.height}:typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?i={width:t.videoWidth,height:t.videoHeight}:t?i={width:e,height:r}:i={width:e>=0?e:1,height:r>=0?r:1},jt(i,"Could not deduced texture size"),jt(e===void 0||i.width===e,"Deduced texture width does not match supplied width"),jt(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);let e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:jt(!1);break;default:this.gl.texParameteri(this.target,t,e);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Ue(this.gl)||!this.width||!this.height?!1:!SM(this.width)||!SM(this.height)}_updateForNPOT(t){t[this.gl.TEXTURE_MIN_FILTER]===void 0&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),t[this.gl.TEXTURE_WRAP_S]===void 0&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),t[this.gl.TEXTURE_WRAP_T]===void 0&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:$ct.indexOf(e)===-1&&(e=9729);break;case 10242:case 10243:e!==33071&&(e=33071);break;default:break}return e}},Xct="";function qct(t,e){return jt(typeof t=="string"),t=Xct+t,new Promise((r,i)=>{try{let n=new Image;n.onload=()=>r(n),n.onerror=()=>i(new Error("Could not load image ".concat(t,"."))),n.crossOrigin=e&&e.crossOrigin||"anonymous",n.src=t}catch(n){i(n)}})}var Kr=class extends Pu{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,e){return Pu.isSupported(t,e)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gy(t),(e instanceof Promise||typeof e=="string")&&(e={data:e}),typeof e.data=="string"&&(e=Object.assign({},e,{data:qct(e.data)})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}},Zx=[34069,34070,34071,34072,34073,34074],Kct=(()=>{class t extends Pu{get[Symbol.toStringTag](){return"TextureCube"}constructor(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Gy(r),super(r,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{mipmaps:i=!0,parameters:n={}}=r;return this.opts=r,this.setCubeMapImageData(r).then(()=>{this.loaded=!0,i&&this.generateMipmap(r),this.setParameters(n)}),this}subImage(r){let{face:i,data:n,x:s=0,y:a=0,mipmapLevel:o=0}=r;return this._subImage({target:i,data:n,x:s,y:a,mipmapLevel:o})}setCubeMapImageData(r){return Dt(this,null,function*(){let{width:i,height:n,pixels:s,data:a,border:o=0,format:l=6408,type:c=5121}=r,{gl:h}=this,p=s||a,m=yield Promise.all(Zx.map(f=>{let g=p[f];return Promise.all(Array.isArray(g)?g:[g])}));this.bind(),Zx.forEach((f,g)=>{m[g].length>1&&this.opts.mipmaps!==!1&&Qt.warn("".concat(this.id," has mipmap and multiple LODs."))(),m[g].forEach((_,w)=>{i&&n?h.texImage2D(f,w,l,i,n,o,l,c,_):h.texImage2D(f,w,l,l,c,_)})}),this.unbind()})}setImageDataForFace(r){let{face:i,width:n,height:s,pixels:a,data:o,border:l=0,format:c=6408,type:h=5121}=r,{gl:p}=this,m=a||o;return this.bind(),m instanceof Promise?m.then(f=>this.setImageDataForFace(Object.assign({},r,{face:i,data:f,pixels:f}))):this.width||this.height?p.texImage2D(i,0,c,n,s,l,c,h,m):p.texImage2D(i,0,c,c,h,m),this}}return t.FACES=Zx,t})(),Yct=class extends Pu{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return Ue(t)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};an(t),e=Object.assign({depth:1},e,{target:32879,unpackFlipY:!1}),super(t,e),this.initialize(e),Object.seal(this)}setImageData(t){let{level:e=0,dataFormat:r=6408,width:i,height:n,depth:s=1,border:a=0,format:o,type:l=5121,offset:c=0,data:h,parameters:p={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Ns(this.gl,p,()=>{ArrayBuffer.isView(h)&&this.gl.texImage3D(this.target,e,r,i,n,s,a,o,l,h),h instanceof Di&&(this.gl.bindBuffer(35052,h.handle),this.gl.texImage3D(this.target,e,r,i,n,s,a,o,l,c))}),h&&h.byteLength)this._trackAllocatedMemory(h.byteLength,"Texture");else{let m=CV[this.dataFormat]||4,f=kV[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*m*f,"Texture")}return this.loaded=!0,this}},Mc="EXT_color_buffer_float",IM={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Mc,bpp:2},33327:{gl2:Mc,bpp:4},34842:{gl2:Mc,bpp:8},33326:{gl2:Mc,bpp:4},33328:{gl2:Mc,bpp:8},34836:{gl2:Mc,bpp:16},35898:{gl2:Mc,bpp:4}};function Jct(t,e,r){let i=r[e];if(!i)return!1;let n=Ue(t)&&i.gl2||i.gl1;return typeof n=="string"?t.getExtension(n):n}var id=class extends ol{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!e||Jct(t,e,IM)}static getSamplesForFormat(t,e){let{format:r}=e;return t.getInternalformatParameter(36161,r,32937)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,e),this.initialize(e),Object.seal(this)}initialize(t){let{format:e,width:r=1,height:i=1,samples:n=0}=t;return jt(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),n!==0&&Ue(this.gl)?this.gl.renderbufferStorageMultisample(36161,n,e,r,i):this.gl.renderbufferStorage(36161,e,r,i),this.format=e,this.width=r,this.height=i,this.samples=n,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*IM[this.format].bpp),this}resize(t){let{width:e,height:r}=t;return e!==this.width||r!==this.height?this.initialize({width:e,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}},Qct=256,tut=1024,eut=16384,OM=6144,PM=6145,MM=6146,RM=34041,AV="clear: bad arguments";function zS(t){let{framebuffer:e=null,color:r=null,depth:i=null,stencil:n=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s={};e&&(s.framebuffer=e);let a=0;r&&(a|=eut,r!==!0&&(s.clearColor=r)),i&&(a|=Qct,i!==!0&&(s.clearDepth=i)),n&&(a|=tut,i!==!0&&(s.clearStencil=i)),jt(a!==0,AV),Ns(t,s,()=>{t.clear(a)})}function iut(t){let{framebuffer:e=null,buffer:r=OM,drawBuffer:i=0,value:n=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};an(t),Ns(t,{framebuffer:e},()=>{switch(r){case OM:switch(n.constructor){case Int32Array:t.clearBufferiv(r,i,n);break;case Uint32Array:t.clearBufferuiv(r,i,n);break;case Float32Array:default:t.clearBufferfv(r,i,n)}break;case PM:t.clearBufferfv(PM,0,[n]);break;case MM:t.clearBufferiv(MM,0,[n]);break;case RM:let[s,a]=n;t.clearBufferfi(RM,0,s,a);break;default:jt(!1,AV)}})}function rut(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return jt(!1),0}}function Wy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{sourceX:r=0,sourceY:i=0,sourceFormat:n=6408}=e,{sourceAttachment:s=36064,target:a=null,sourceWidth:o,sourceHeight:l,sourceType:c}=e,{framebuffer:h,deleteFramebuffer:p}=SV(t);jt(h);let{gl:m,handle:f,attachments:g}=h;o=o||h.width,l=l||h.height,s===36064&&f===null&&(s=1028),jt(g[s]),c=c||g[s].type,a=sut(a,c,n,o,l),c=c||GC(a);let _=m.bindFramebuffer(36160,f);return m.readPixels(r,i,o,l,n,c,a),m.bindFramebuffer(36160,_||null),p&&h.delete(),a}function BM(t){let{sourceAttachment:e=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=Wy(t,{sourceAttachment:e}),{width:n,height:s}=t;for(;s>r;)({data:i,width:n,height:s}=Vct({data:i,width:n,height:s}));zct({data:i,width:n,height:s});let a=document.createElement("canvas");a.width=n,a.height=s;let o=a.getContext("2d"),l=o.createImageData(n,s);return l.data.set(i),o.putImageData(l,0,0),a.toDataURL()}function nut(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{sourceX:i=0,sourceY:n=0,targetMipmaplevel:s=0,targetInternalFormat:a=6408}=r,{targetX:o,targetY:l,targetZ:c,width:h,height:p}=r,{framebuffer:m,deleteFramebuffer:f}=SV(t);jt(m);let{gl:g,handle:_}=m,w=typeof o<"u"||typeof l<"u"||typeof c<"u";o=o||0,l=l||0,c=c||0;let S=g.bindFramebuffer(36160,_);jt(e);let C=null;if(e instanceof Pu&&(C=e,h=Number.isFinite(h)?h:C.width,p=Number.isFinite(p)?p:C.height,C.bind(0),e=C.target),!w)g.copyTexImage2D(e,s,a,i,n,h,p,0);else switch(e){case 3553:case 34067:g.copyTexSubImage2D(e,s,o,l,i,n,h,p);break;case 35866:case 32879:an(g).copyTexSubImage3D(e,s,o,l,c,i,n,h,p);break;default:}return C&&C.unbind(),g.bindFramebuffer(36160,S||null),f&&m.delete(),C}function SV(t){return t instanceof Fr?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:mut(t),deleteFramebuffer:!0}}function sut(t,e,r,i,n){if(t)return t;e=e||5121;let s=ef(e,{clamped:!1}),a=rut(r);return new s(i*n*a)}var $i={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function aut(t){let e=new Kr(t,{format:6408,type:5126,dataFormat:6408}),r=new Fr(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=r.getStatus();return e.delete(),r.delete(),i===36053}var EV={[$i.WEBGL2]:[!1,!0],[$i.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[$i.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[$i.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[$i.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[$i.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[$i.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[$i.FLOAT_BLEND]:["EXT_float_blend"],[$i.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[$i.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[$i.TEXTURE_FLOAT]:["OES_texture_float",!0],[$i.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[$i.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[$i.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[$i.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[$i.COLOR_ATTACHMENT_RGBA32F]:[aut,"EXT_color_buffer_float"],[$i.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[$i.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[$i.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[$i.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[$i.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[$i.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},out=2;function VS(t,e){return TV(t,e)}function TV(t,e){return e=Array.isArray(e)?e:[e],e.every(r=>IV(t,r))}function lut(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(let e in EV)t.luma.caps[e]===void 0&&(t.luma.caps[e]=IV(t,e));return t.luma.caps}function IV(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=cut(t,e)),t.luma.caps[e]||Qt.log(out,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function cut(t,e){let r=EV[e];jt(r,e);let i,n=Ue(t)&&r[1]||r[0];if(typeof n=="function")i=n(t);else if(Array.isArray(n)){i=!0;for(let s of n)i=i&&!!t.getExtension(s)}else typeof n=="string"?i=!!t.getExtension(n):typeof n=="boolean"?i=n:jt(!1);return i}var DM="Multiple render targets not supported",Fr=class OV extends ol{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{colorBufferFloat:i,colorBufferHalfFloat:n}=r,s=!0;return i&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),n&&(s=s&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new OV(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){let e=an(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){let e=an(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,r),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(r),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:r=1,height:i=1,attachments:n=null,color:s=!0,depth:a=!0,stencil:o=!1,check:l=!0,readBuffer:c=void 0,drawBuffers:h=void 0}=e;if(jt(r>=0&&i>=0,"Width and height need to be integers"),this.width=r,this.height=i,n)for(let p in n){let m=n[p];(Array.isArray(m)?m[0]:m).resize({width:r,height:i})}else n=this._createDefaultAttachments(s,a,o,r,i);this.update({clearAttachments:!0,attachments:n,readBuffer:c,drawBuffers:h}),n&&l&&this.checkStatus()}delete(){for(let e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:r={},readBuffer:i,drawBuffers:n,clearAttachments:s=!1,resizeAttachments:a=!0}=e;this.attach(r,{clearAttachments:s,resizeAttachments:a});let{gl:o}=this,l=o.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),n&&this._setDrawBuffers(n),o.bindFramebuffer(36160,l||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:r,height:i}=e;if(this.handle===null)return jt(r===void 0&&i===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),i===void 0&&(i=this.gl.drawingBufferHeight),r!==this.width&&i!==this.height&&Qt.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(r,"x").concat(i))();for(let n in this.attachments)this.attachments[n].resize({width:r,height:i});return this.width=r,this.height=i,this}attach(e){let{clearAttachments:r=!1,resizeAttachments:i=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n={};r&&Object.keys(this.attachments).forEach(a=>{n[a]=null}),Object.assign(n,e);let s=this.gl.bindFramebuffer(36160,this.handle);for(let a in n){jt(a!==void 0,"Misspelled framebuffer binding point?");let o=Number(a),l=n[o],c=l;if(!c)this._unattach(o);else if(c instanceof id)this._attachRenderbuffer({attachment:o,renderbuffer:c});else if(Array.isArray(l)){let[h,p=0,m=0]=l;c=h,this._attachTexture({attachment:o,texture:h,layer:p,level:m})}else this._attachTexture({attachment:o,texture:c,layer:0,level:0});i&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(a=>!this.attachments[a]).forEach(a=>{delete this.attachments[a]})}checkStatus(){let{gl:e}=this,r=this.getStatus();if(r!==36053)throw new Error(hut(r));return this}getStatus(){let{gl:e}=this,r=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,r||null),i}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{color:r,depth:i,stencil:n,drawBuffers:s=[]}=e,a=this.gl.bindFramebuffer(36160,this.handle);return(r||i||n)&&zS(this.gl,{color:r,depth:i,stencil:n}),s.forEach((o,l)=>{iut(this.gl,{drawBuffer:l,value:o})}),this.gl.bindFramebuffer(36160,a||null),this}readPixels(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:r=[],x:i=0,y:n=0,width:s,height:a}=e,o=an(this.gl),l=o.bindFramebuffer(36008,this.handle);return i===0&&n===0&&s===void 0&&a===void 0?o.invalidateFramebuffer(36008,r):o.invalidateFramebuffer(36008,r,i,n,s,a),o.bindFramebuffer(36008,l),this}getAttachmentParameter(e,r,i){let n=this._getAttachmentParameterFallback(r);return n===null&&(this.gl.bindFramebuffer(36160,this.handle),n=this.gl.getFramebufferAttachmentParameter(36160,e,r),this.gl.bindFramebuffer(36160,null)),i&&n>1e3&&(n=Xl(this.gl,n)),n}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],n={};for(let s of i){let a=r?Xl(this.gl,s):s;n[a]=this.getAttachmentParameter(e,s,r)}return n}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=Object.keys(this.attachments),i={};for(let n of r){let s=Number(n),a=e?Xl(this.gl,s):s;i[a]=this.getAttachmentParameters(s,e)}return i}show(){return typeof window<"u"&&window.open(BM(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>Qt.level||typeof window>"u")return this;r=r||"Framebuffer ".concat(this.id);let i=BM(this,{targetMaxHeight:100});return Qt.image({logLevel:e,message:r,image:i},r)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,r,i,n,s){let a=null;return e&&(a=a||{},a[36064]=new Kr(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:n,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(a[36064])),r&&i?(a=a||{},a[33306]=new id(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:n,height:111}),this.ownResources.push(a[33306])):r?(a=a||{},a[36096]=new id(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:n,height:s}),this.ownResources.push(a[36096])):i&&jt(!1),a}_unattach(e){let r=this.attachments[e];r&&(r instanceof id?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:r=36064,renderbuffer:i}=e,{gl:n}=this;n.framebufferRenderbuffer(36160,r,36161,i.handle),this.attachments[r]=i}_attachTexture(e){let{attachment:r=36064,texture:i,layer:n,level:s}=e,{gl:a}=this;switch(a.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:an(a).framebufferTextureLayer(36160,r,i.target,s,n);break;case 34067:let o=uut(n);a.framebufferTexture2D(36160,r,o,i.handle,s);break;case 3553:a.framebufferTexture2D(36160,r,3553,i.handle,s);break;default:jt(!1,"Illegal texture type")}a.bindTexture(i.target,null),this.attachments[r]=i}_setReadBuffer(e){let r=zlt(this.gl);r?r.readBuffer(e):jt(e===36064||e===1029,DM),this.readBuffer=e}_setDrawBuffers(e){let{gl:r}=this,i=an(r);if(i)i.drawBuffers(e);else{let n=r.getExtension("WEBGL_draw_buffers");n?n.drawBuffersWEBGL(e):jt(e.length===1&&(e[0]===36064||e[0]===1029),DM)}this.drawBuffers=e}_getAttachmentParameterFallback(e){let r=lut(this.gl);switch(e){case 36052:return r.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return r.WEBGL2?null:8;case 33297:return r.WEBGL2?null:5125;case 33296:return!r.WEBGL2&&!r.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}};function uut(t){return t<34069?t+34069:t}function hut(t){return(Fr.STATUS||{})[t]||"Framebuffer error ".concat(t)}var dut=[36049,36048,33296,33298,33299,33300,33301,33302,33303];Fr.ATTACHMENT_PARAMETERS=dut;function put(t,e){jt(t instanceof Kr||t instanceof Kct||t instanceof Yct);let r=t.constructor,{gl:i,width:n,height:s,format:a,type:o,dataFormat:l,border:c,mipmaps:h}=t,p=Object.assign({width:n,height:s,format:a,type:o,dataFormat:l,border:c,mipmaps:h},e);return new r(i,p)}function mut(t,e){let{gl:r,width:i,height:n,id:s}=t;return new Fr(r,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:i,height:n,attachments:{36064:t}}))}function A_(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed",r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,i=t.match(r);return i?i[1]:e}function fut(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}function gut(t,e,r,i){let n=t.split(/\r?\n/),s={},a={},o=i||A_(e)||"(unnamed)",l="".concat(fut(r)," shader ").concat(o);for(let h=0;h<n.length;h++){let p=n[h];if(p.length<=1)continue;let m=p.split(":"),f=m[0],g=parseInt(m[2],10);if(isNaN(g))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));f!=="WARNING"?s[g]=p:a[g]=p}let c=vut(e);return{shaderName:l,errors:LM(s,c),warnings:LM(a,c)}}function LM(t,e){let r="";for(let i=0;i<e.length;i++){let n=e[i];if(!(!t[i+3]&&!t[i+2]&&!t[i+1])&&(r+="".concat(n,`
`),t[i+1])){let s=t[i+1],a=s.split(":",3),o=a[0],l=parseInt(a[1],10)||0,c=s.substring(a.join(":").length+1).trim();r+=PV("^^^ ".concat(o,": ").concat(c,`

`),l)}}return r}function vut(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ",i=t.split(/\r?\n/),n=String(i.length+e-1).length;return i.map((s,a)=>{let o=String(a+e),l=o.length;return PV(o,n-l)+r+s})}function PV(t,e){let r="";for(let i=0;i<e;++i)r+=" ";return"".concat(r).concat(t)}function MV(t){let e=100,r=t.match(/[^\s]+/g);if(r.length>=2&&r[0]==="#version"){let i=parseInt(r[1],10);Number.isFinite(i)&&(e=i)}return e}var _ut="Shader: GLSL source code must be a JavaScript string",RV=class ZC extends ol{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return jt(!1),"unknown"}}constructor(e,r){Gy(e),jt(typeof r.source=="string",_ut);let i=A_(r.source,null)||r.id||Un("unnamed ".concat(ZC.getTypeName(r.shaderType)));super(e,{id:i}),this.shaderType=r.shaderType,this.source=r.source,this.initialize(r)}initialize(e){let{source:r}=e,i=A_(r,null);i&&(this.id=Un(i)),this._compile(r)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(ZC.getTypeName(this.shaderType),":").concat(this.id)}getName(){return A_(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){let e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){let r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:n,warnings:s}=gut(r,this.source,this.shaderType,this.id);throw Qt.error("GLSL compilation errors in ".concat(i,`
`).concat(n))(),Qt.warn("GLSL compilation warnings in ".concat(i,`
`).concat(s))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}},$x=class extends RV{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,e){typeof e=="string"&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}},Xx=class extends RV{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,e){typeof e=="string"&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}},but={5126:Ji.bind(null,"uniform1fv",is,1,rn),35664:Ji.bind(null,"uniform2fv",is,2,rn),35665:Ji.bind(null,"uniform3fv",is,3,rn),35666:Ji.bind(null,"uniform4fv",is,4,rn),5124:Ji.bind(null,"uniform1iv",Tl,1,rn),35667:Ji.bind(null,"uniform2iv",Tl,2,rn),35668:Ji.bind(null,"uniform3iv",Tl,3,rn),35669:Ji.bind(null,"uniform4iv",Tl,4,rn),35670:Ji.bind(null,"uniform1iv",Tl,1,rn),35671:Ji.bind(null,"uniform2iv",Tl,2,rn),35672:Ji.bind(null,"uniform3iv",Tl,3,rn),35673:Ji.bind(null,"uniform4iv",Tl,4,rn),35674:Ji.bind(null,"uniformMatrix2fv",is,4,Io),35675:Ji.bind(null,"uniformMatrix3fv",is,9,Io),35676:Ji.bind(null,"uniformMatrix4fv",is,16,Io),35678:Wr,35680:Wr,5125:Ji.bind(null,"uniform1uiv",xv,1,rn),36294:Ji.bind(null,"uniform2uiv",xv,2,rn),36295:Ji.bind(null,"uniform3uiv",xv,3,rn),36296:Ji.bind(null,"uniform4uiv",xv,4,rn),35685:Ji.bind(null,"uniformMatrix2x3fv",is,6,Io),35686:Ji.bind(null,"uniformMatrix2x4fv",is,8,Io),35687:Ji.bind(null,"uniformMatrix3x2fv",is,6,Io),35688:Ji.bind(null,"uniformMatrix3x4fv",is,12,Io),35689:Ji.bind(null,"uniformMatrix4x2fv",is,8,Io),35690:Ji.bind(null,"uniformMatrix4x3fv",is,12,Io),35678:Wr,35680:Wr,35679:Wr,35682:Wr,36289:Wr,36292:Wr,36293:Wr,36298:Wr,36299:Wr,36300:Wr,36303:Wr,36306:Wr,36307:Wr,36308:Wr,36311:Wr},yut={},wut={},xut={},NM=[0];function jS(t,e,r,i){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(NM[0]=t,t=NM);let n=t.length;if(n%e&&Qt.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof r)return t;let s=i[n];s||(s=new r(n),i[n]=s);for(let a=0;a<n;a++)s[a]=t[a];return s}function is(t,e){return jS(t,e,Float32Array,yut)}function Tl(t,e){return jS(t,e,Int32Array,wut)}function xv(t,e){return jS(t,e,Uint32Array,xut)}function FM(t,e,r){let i=but[r.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(r.type));return i().bind(null,t,e)}function Cut(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};let e=/([^[]*)(\[[0-9]+\])?/,r=t.match(e);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:r[1],length:r[2]||1,isArray:!!r[2]}}function kut(t,e,r){for(let i in t){let n=t[i];if((!r||r[i])&&!Aut(n))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),n),new Error("".concat(e," Bad uniform ").concat(i))}return!0}function Aut(t){return Array.isArray(t)||ArrayBuffer.isView(t)?Eut(t):isFinite(t)||t===!0||t===!1||t instanceof Pu||t instanceof id?!0:t instanceof Fr?!!t.texture:!1}function Sut(t,e,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(t[e]){let i=t[e];for(let n=0,s=r.length;n<s;++n)i[n]=r[n]}else t[e]=r.slice();else t[e]=r}function Eut(t){if(t.length===0)return!1;let e=Math.min(t.length,16);for(let r=0;r<e;++r)if(!Number.isFinite(t[r]))return!1;return!0}function Wr(){let t=null;return(e,r,i)=>{let n=t!==i;return n&&(e.uniform1i(r,i),t=i),n}}function Ji(t,e,r,i){let n=null,s=null;return(a,o,l)=>{let c=e(l,r),h=c.length,p=!1;if(n===null)n=new Float32Array(h),s=h,p=!0;else{jt(s===h,"Uniform length cannot change.");for(let m=0;m<h;++m)if(c[m]!==n[m]){p=!0;break}}return p&&(i(a,t,o,c),n.set(c)),p}}function rn(t,e,r,i){t[e](r,i)}function Io(t,e,r,i){t[e](r,!1,i)}var Tut=5120,Iut=5121,Out=5122,Put=5123,zM=0,Cv=1,Mut=2,Rut=3,kv=4,But=5,Dut=6,Ir=5126,Lut=35664,Nut=35665,Fut=35666,Jp=5124,zut=35667,Vut=35668,jut=35669,Qp=5125,Uut=36294,Hut=36295,Gut=36296,Wut=35670,Zut=35671,$ut=35672,Xut=35673,qut=35674,Kut=35675,Yut=35676,Jut=35685,Qut=35686,tht=35687,eht=35688,iht=35689,rht=35690,$C={[Ir]:[Ir,1,"float"],[Lut]:[Ir,2,"vec2"],[Nut]:[Ir,3,"vec3"],[Fut]:[Ir,4,"vec4"],[Jp]:[Jp,1,"int"],[zut]:[Jp,2,"ivec2"],[Vut]:[Jp,3,"ivec3"],[jut]:[Jp,4,"ivec4"],[Qp]:[Qp,1,"uint"],[Uut]:[Qp,2,"uvec2"],[Hut]:[Qp,3,"uvec3"],[Gut]:[Qp,4,"uvec4"],[Wut]:[Ir,1,"bool"],[Zut]:[Ir,2,"bvec2"],[$ut]:[Ir,3,"bvec3"],[Xut]:[Ir,4,"bvec4"],[qut]:[Ir,8,"mat2"],[Jut]:[Ir,8,"mat2x3"],[Qut]:[Ir,8,"mat2x4"],[Kut]:[Ir,12,"mat3"],[tht]:[Ir,12,"mat3x2"],[eht]:[Ir,12,"mat3x4"],[Yut]:[Ir,16,"mat4"],[iht]:[Ir,16,"mat4x2"],[rht]:[Ir,16,"mat4x3"]};function nht(t){switch(t){case zM:return zM;case Cv:return Cv;case Rut:return Cv;case Mut:return Cv;case kv:return kv;case But:return kv;case Dut:return kv;default:return jt(!1),0}}function VM(t){let e=$C[t];if(!e)return null;let[r,i]=e;return{type:r,components:i}}function BV(t,e){switch(t){case Tut:case Iut:case Out:case Put:t=Ir;break;default:}for(let r in $C){let[i,n,s]=$C[r];if(i===t&&n===e)return{glType:r,name:s}}return null}var sht=class{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){let e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){let e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){let e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){let e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){let e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){let e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){let{gl:e}=t,r=e.getProgramParameter(t.handle,35721);for(let i=0;i<r;i++){let{name:n,type:s,size:a}=e.getActiveAttrib(t.handle,i),o=e.getAttribLocation(t.handle,n);o>=0&&this._addAttribute(o,n,s,a)}this.attributeInfos.sort((i,n)=>i.location-n.location)}_readVaryingsFromProgram(t){let{gl:e}=t;if(!Ue(e))return;let r=e.getProgramParameter(t.handle,35971);for(let i=0;i<r;i++){let{name:n,type:s,size:a}=e.getTransformFeedbackVarying(t.handle,i);this._addVarying(i,n,s,a)}this.varyingInfos.sort((i,n)=>i.location-n.location)}_addAttribute(t,e,r,i){let{type:n,components:s}=VM(r),a={type:n,size:i*s};this._inferProperties(t,e,a);let o={location:t,name:e,accessor:new Na(a)};this.attributeInfos.push(o),this.attributeInfosByLocation[t]=o,this.attributeInfosByName[o.name]=o}_inferProperties(t,e,r){/instance/i.test(e)&&(r.divisor=1)}_addVarying(t,e,r,i){let{type:n,components:s}=VM(r),a=new Na({type:n,size:i*s}),o={location:t,name:e,accessor:a};this.varyingInfos.push(o),this.varyingInfosByName[o.name]=o}},jM=4,aht=35981,oht=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],DV=class extends ol{get[Symbol.toStringTag](){return"Program"}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,e),this.stubRemovedMethods("Program","v6.0",oht),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{hash:e,vs:r,fs:i,varyings:n,bufferMode:s=aht}=t;return this.hash=e||"",this.vs=typeof r=="string"?new $x(this.gl,{id:"".concat(t.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new Xx(this.gl,{id:"".concat(t.id,"-fs"),source:i}):i,jt(this.vs instanceof $x),jt(this.fs instanceof Xx),this.uniforms={},this._textureUniforms={},n&&n.length>0&&(an(this.gl),this.varyings=n,this.gl2.transformFeedbackVaryings(this.handle,n,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new sht(this),this.setProps(t)}delete(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:e,drawMode:r=4,vertexCount:i,offset:n=0,start:s,end:a,isIndexed:o=!1,indexType:l=5123,instanceCount:c=0,isInstanced:h=c>0,vertexArray:p=null,transformFeedback:m,framebuffer:f,parameters:g={},uniforms:_,samplers:w}=t;if((_||w)&&(Qt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(_||{})),Qt.priority>=e){let S=f?f.id:"default",C="mode=".concat(Xl(this.gl,r)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(Xl(this.gl,l)," ")+"isInstanced=".concat(h," isIndexed=").concat(o," ")+"Framebuffer=".concat(S);Qt.log(e,C)()}return jt(p),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||h&&c===0?!1:(p.bindForDraw(i,c,()=>{if(f!==void 0&&(g=Object.assign({},g,{framebuffer:f})),m){let S=nht(r);m.begin(S)}this._bindTextures(),Ns(this.gl,g,()=>{o&&h?this.gl2.drawElementsInstanced(r,i,l,n,c):o&&Ue(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(r,s,a,i,l,n):o?this.gl.drawElements(r,i,l,n):h?this.gl2.drawArraysInstanced(r,n,i,c):this.gl.drawArrays(r,n,i)}),m&&m.end()}),!0)}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Qt.priority>=2&&kut(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(let e in t){let r=t[e],i=this._uniformSetters[e];if(i){let n=r,s=!1;if(n instanceof Fr&&(n=n.texture),n instanceof Pu)if(s=this.uniforms[e]!==r,s){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);let a=n,{textureIndex:o}=i;a.bind(o),n=o,this._textureUniforms[e]=a}else n=i.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(i(n)||s)&&Sut(this.uniforms,e,r)}}return this}_areTexturesRenderable(){let t=!0;for(let e in this._textureUniforms){let r=this._textureUniforms[e];r.update(),t=t&&r.loaded}return t}_bindTextures(){for(let t in this._textureUniforms){let e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){let e=this.gl.getAttachedShaders(t),r={};for(let i of e)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new $x({handle:i});break;case 35632:r.fs=new Xx({handle:i});break;default:}return r}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){let e=this._getName();this.id=Un(e)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){let{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Qt.time(jM,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Qt.timeEnd(jM,"linkProgram for ".concat(this._getName()))(),t.debug||Qt.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){let{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){let r=this.gl.getActiveUniform(this.handle,e),{name:i}=Cut(r.name),n=t.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=FM(t,n,r),r.size>1)for(let s=0;s<r.size;s++)n=t.getUniformLocation(this.handle,"".concat(i,"[").concat(s,"]")),this._uniformSetters["".concat(i,"[").concat(s,"]")]=FM(t,n,r)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}},lht=34918,cht=34919,uht=35007,hht=36795,dht=35976,pht=35887,mht=36202,UM=class LV extends ol{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=Ue(e),n=TV(e,$i.TIMER_QUERY),s=i||n;for(let a of r)switch(a){case"queries":s=s&&i;break;case"timers":s=s&&n;break;default:jt(!1)}return s}constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,r),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(uht)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?mht:pht)}beginTransformFeedbackQuery(){return this.begin(dht)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;let e=this.gl2.getQueryParameter(this.handle,cht);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(hht)}getResult(){return this.gl2.getQueryParameter(this.handle,lht)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((i,n)=>{let s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):r++>e?(n("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return LV.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}},NV=class extends ol{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return Ue(t)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};an(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Cd(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(let e in t)this.setBuffer(e,t[e])}),this}setBuffer(t,e){let r=this._getVaryingIndex(t),{buffer:i,byteSize:n,byteOffset:s}=this._getBufferParams(e);return r<0?(this.unused[t]=i,Qt.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[r]=e,this.bindOnUse||this._bindBuffer(r,i,s,n),this)}begin(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,r,i;return t instanceof Di?i=t:(i=t.buffer,r=t.byteSize,e=t.byteOffset),(e!==void 0||r!==void 0)&&(e=e||0,r=r||i.byteLength-e),{buffer:i,byteOffset:e,byteSize:r}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;let e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(let t in this.buffers){let{buffer:e,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(let t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,n=e&&e.handle;return!n||i===void 0?this.gl.bindBufferBase(35982,t,n):this.gl.bindBufferRange(35982,t,n,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}},Av=null;function fht(t){return(!Av||Av.byteLength<t)&&(Av=new ArrayBuffer(t)),Av}function ght(t,e){let r=fht(t.BYTES_PER_ELEMENT*e);return new t(r,0,e)}function vht(t){let{target:e,source:r,start:i=0,count:n=1}=t,s=r.length,a=n*s,o=0;for(let l=i;o<s;o++)e[l++]=r[o];for(;o<a;)o<a-o?(e.copyWithin(i+o,i,i+o),o*=2):(e.copyWithin(i+o,i,i+a-o),o=a);return e}var _ht="elements must be GL.ELEMENT_ARRAY_BUFFER",qx=class Ra extends ol{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Ue(e)||Jz()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Ra(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Ra.MAX_ATTRIBUTES=Ra.MAX_ATTRIBUTES||e.getParameter(34921),Ra.MAX_ATTRIBUTES}static setConstant(e,r,i){switch(i.constructor){case Float32Array:Ra._setConstantFloatArray(e,r,i);break;case Int32Array:Ra._setConstantIntArray(e,r,i);break;case Uint32Array:Ra._setConstantUintArray(e,r,i);break;default:jt(!1)}}constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.id||r.program&&r.program.id;super(e,Object.assign({},r,{id:i})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=r.isDefaultArray||!1,this.gl2=e,this.initialize(r),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Ra.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return jt(!e||e.target===34963,_ht),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,r,i){if(r.target===34963)return this.setElementBuffer(r,i);let{size:n,type:s,stride:a,offset:o,normalized:l,integer:c,divisor:h}=i,{gl:p,gl2:m}=this;return e=Number(e),this.bind(()=>{p.bindBuffer(34962,r.handle),c?(jt(Ue(p)),m.vertexAttribIPointer(e,n,s,a,o)):p.vertexAttribPointer(e,n,s,l,a,o),p.enableVertexAttribArray(e),m.vertexAttribDivisor(e,h||0)}),this}enable(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!r&&e===0&&!Ra.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>r?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,r){let i=this._normalizeConstantArrayValue(r),n=i.byteLength*e,s=i.length*e,a=!this.buffer;if(this.buffer=this.buffer||new Di(this.gl,n),a=a||this.buffer.reallocate(n),a=a||!this._compareConstantArrayValues(i,this.bufferValue),a){let o=ght(r.constructor,s);vht({target:o,source:i,start:0,count:s}),this.buffer.subData(o),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,r){if(!e||!r||e.length!==r.length||e.constructor!==r.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==r[i])return!1;return!0}static _setConstantFloatArray(e,r,i){switch(i.length){case 1:e.vertexAttrib1fv(r,i);break;case 2:e.vertexAttrib2fv(r,i);break;case 3:e.vertexAttrib3fv(r,i);break;case 4:e.vertexAttrib4fv(r,i);break;default:jt(!1)}}static _setConstantIntArray(e,r,i){switch(jt(Ue(e)),i.length){case 1:e.vertexAttribI1iv(r,i);break;case 2:e.vertexAttribI2iv(r,i);break;case 3:e.vertexAttribI3iv(r,i);break;case 4:e.vertexAttribI4iv(r,i);break;default:jt(!1)}}static _setConstantUintArray(e,r,i){switch(jt(Ue(e)),i.length){case 1:e.vertexAttribI1uiv(r,i);break;case 2:e.vertexAttribI2uiv(r,i);break;case 3:e.vertexAttribI3uiv(r,i);break;case 4:e.vertexAttribI4uiv(r,i);break;default:jt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,r){let{location:i}=r;return jt(Number.isFinite(i)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(i,e);default:return this.gl.getVertexAttrib(i,e)}})}},bht="VertexArray: attributes must be Buffers or constants (i.e. typed array)",yht=/^(.+)__LOCATION_([0-9]+)$/,wht=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],xht=class{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.id||e.program&&e.program.id;this.id=r,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new qx(t),wV(this,"VertexArray","v6.0",wht),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;let{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(let e in t){let r=t[e];this._setAttribute(e,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e.target===34963)return this.setElementBuffer(e,r);let{location:i,accessor:n}=this._resolveLocationAndAccessor(t,e,e.accessor,r);return i>=0&&(this.values[i]=e,this.accessors[i]=n,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,e,n)),this}setConstant(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{location:i,accessor:n}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},r));return i>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[i]=e,this.accessors[i]=n,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Di(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Di&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){let e=this.values[t];e instanceof Di&&this.setBuffer(t,e)}}),this}bindForDraw(t,e,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,e),i=r()}),i}_resolveLocationAndAccessor(t,e,r,i){let n={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(t);if(!Number.isFinite(s)||s<0)return this.unused[t]=e,Qt.once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),n;let o=this._getAttributeInfo(a||s);if(!o)return n;let l=this.accessors[s]||{},c=Na.resolve(o.accessor,l,r,i),{size:h,type:p}=c;return jt(Number.isFinite(h)&&Number.isFinite(p)),{location:s,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){let e=Number(t);if(Number.isFinite(e))return{location:e};let r=yht.exec(t),i=r?r[1]:t,n=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+n,name:i}:{location:-1}}_setAttribute(t,e){if(e instanceof Di)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof Di){let r=e[0],i=e[1];this.setBuffer(t,r,i)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){let r=e;this.setConstant(t,r)}else if(e.buffer instanceof Di){let r=e;this.setBuffer(t,r.buffer,r)}else throw new Error(bht)}_setConstantAttributes(t,e){let r=Math.max(t|0,e|0),i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let n=1;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)i=this.values[n],ArrayBuffer.isView(i)&&this._setConstantAttribute(n,i)}_setConstantAttributeZero(t,e){if(qx.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,t);return}let r=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(t,e){qx.setConstant(this.gl,t,e)}_updateDrawParams(){let t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){let r=this.values[e],i=this.accessors[e];if(!r)return;let{divisor:n}=i,s=n>0;if(t.isInstanced=t.isInstanced||s,r instanceof Di){let a=r;if(s){let o=a.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,o)}else{let o=a.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,o)}}}setElements(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Qt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}};function Cht(t,e){let{maxElts:r=16,size:i=1}=e,n="[";for(let a=0;a<t.length&&a<r;++a)a>0&&(n+=",".concat(a%i===0?" ":"")),n+=rf(t[a],e);let s=t.length>r?"...":"]";return"".concat(n).concat(s)}function rf(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=1e-16,{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return Cht(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<r)return i?"0":"0.";if(i||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);let n=t.toPrecision(2);return n.indexOf(".0")===n.length-2?n.slice(0,-1):n}function HM(t){let{header:e="Uniforms",program:r,uniforms:i,undefinedOnly:n=!1}=t;jt(r);let s=".*_.*",a=".*Matrix",o=r._uniformSetters,l={},c=Object.keys(o).sort(),h=0;for(let f of c)!f.match(s)&&!f.match(a)&&Kx({table:l,header:e,uniforms:i,uniformName:f,undefinedOnly:n})&&h++;for(let f of c)f.match(a)&&Kx({table:l,header:e,uniforms:i,uniformName:f,undefinedOnly:n})&&h++;for(let f of c)l[f]||Kx({table:l,header:e,uniforms:i,uniformName:f,undefinedOnly:n})&&h++;let p=0,m={};if(!n)for(let f in i){let g=i[f];l[f]||(p++,m[f]={Type:"NOT USED: ".concat(g),[e]:rf(g)})}return{table:l,count:h,unusedTable:m,unusedCount:p}}function Kx(t){let{table:e,header:r,uniforms:i,uniformName:n,undefinedOnly:s}=t,a=i[n],o=kht(a);return!s||!o?(e[n]={[r]:o?rf(a):"N/A","Uniform Type":o?a:"NOT PROVIDED"},!0):!1}function kht(t){return t!=null}function Aht(t){let{vertexArray:e,header:r="Attributes"}=t;if(!e.configuration)return{};let i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=GM(e,e.elements,null,r));let n=e.values;for(let s in n){let a=e._getAttributeInfo(s);if(a){let o="".concat(s,": ").concat(a.name),l=e.accessors[a.location];l&&(o="".concat(s,": ").concat(Sht(a.name,l))),i[o]=GM(e,n[s],l,r)}}return i}function GM(t,e,r,i){let{gl:n}=t;if(!e)return{[i]:"null","Format ":"N/A"};let s="NOT PROVIDED",a=1,o=0,l=0,c,h,p;if(r&&(s=r.type,a=r.size,s=String(s).replace("Array",""),c=s.indexOf("nt")!==-1),e instanceof Di){let m=e,{data:f,changed:g}=m.getDebugData();h=g?"*":"",p=f,l=m.byteLength,o=l/f.BYTES_PER_ELEMENT/a;let _;if(r){let w=r.divisor>0;_="".concat(w?"I ":"P "," ").concat(o," (x").concat(a,"=").concat(l," bytes ").concat(Xl(n,s),")")}else c=!0,_="".concat(l," bytes");return{[i]:"".concat(h).concat(rf(p,{size:a,isInteger:c})),"Format ":_}}return p=e,a=e.length,s=String(e.constructor.name).replace("Array",""),c=s.indexOf("nt")!==-1,{[i]:"".concat(rf(p,{size:a,isInteger:c})," (constant)"),"Format ":"".concat(a,"x").concat(s," (constant)")}}function Sht(t,e){let{type:r,size:i}=e,n=BV(r,i);return n?"".concat(t," (").concat(n.name,")"):t}function Eht(t){let e={},r="Accessors for ".concat(t.id);for(let i of t.attributeInfos)if(i){let n=WM(i);e["in ".concat(n)]={[r]:JSON.stringify(i.accessor)}}for(let i of t.varyingInfos)if(i){let n=WM(i);e["out ".concat(n)]={[r]:JSON.stringify(i.accessor)}}return e}function WM(t){let{type:e,size:r}=t.accessor,i=BV(e,r);return i?"".concat(i.name," ").concat(t.name):t.name}var ZM=al()&&typeof document<"u",Tht=0,Iht=class{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{onCreateContext:e=_=>yV(_),onAddHTML:r=null,onInitialize:i=()=>{},onRender:n=()=>{},onFinalize:s=()=>{},onError:a,gl:o=null,glOptions:l={},debug:c=!1,createFramebuffer:h=!1,autoResizeViewport:p=!0,autoResizeDrawingBuffer:m=!0,stats:f=du.get("animation-loop-".concat(Tht++))}=t,{useDevicePixels:g=!0}=t;"useDevicePixelRatio"in t&&(Qt.deprecated("useDevicePixelRatio","useDevicePixels")(),g=t.useDevicePixelRatio),this.props={onCreateContext:e,onAddHTML:r,onInitialize:i,onRender:n,onFinalize:s,onError:a,gl:o,glOptions:l,debug:c,createFramebuffer:h},this.gl=o,this.needsRedraw=null,this.timeline=null,this.stats=f,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:p,autoResizeDrawingBuffer:m,useDevicePixels:g}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return jt(typeof t=="string"),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;let e=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=UM.isSupported(this.gl,["timers"])?new UM(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&e.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}toDataURL(){return Dt(this,null,function*(){return this.setNeedsRedraw("toDataURL"),yield this.waitForRender(),this.gl.canvas.toDataURL()})}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=document.getElementById(t);return r?Number(r.value):e}setViewParameters(){return Qt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){let t=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=ZM?new Promise((t,e)=>{if(ZM&&document.readyState==="complete"){t(document);return}window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):Nct(t)}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):Lct(t)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){let{width:t,height:e,aspect:r}=this._getSizeAndAspect();(t!==this.animationProps.width||e!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){typeof t=="object"&&t!==null&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&typeof OffscreenCanvas<"u"&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?NS(this.props.gl,t):this.onCreateContext(t),!Hy(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Cct(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){let t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";let e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);let r=this.props.onAddHTML(e);r&&(e.innerHTML=r)}}_getSizeAndAspect(){let t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight,r=1,{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:t>0&&e>0&&(r=t/e),{width:t,height:e,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Tct(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Fr(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){let{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}},Uf="vs",US="fs";function ds(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}var Yx={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function Oht(t){let e={};for(let r in t){let i=t[r],n=Pht(i);e[r]=n}return e}function Pht(t){let e=$M(t);return e==="object"?t?"type"in t?Object.assign({},t,Yx[t.type]):"value"in t?(e=$M(t.value),Object.assign({type:e},t,Yx[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},Yx[e])}function $M(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}var Mht="vs",Rht="fs",XM=class{constructor(t){let{name:e,vs:r,fs:i,dependencies:n=[],uniforms:s,getUniforms:a,deprecations:o=[],defines:l={},inject:c={},vertexShader:h,fragmentShader:p}=t;ds(typeof e=="string"),this.name=e,this.vs=r||h,this.fs=i||p,this.getModuleUniforms=a,this.dependencies=n,this.deprecations=this._parseDeprecationDefinitions(o),this.defines=l,this.injections=Bht(c),s&&(this.uniforms=Oht(s))}getModuleSource(t){let e;switch(t){case Mht:e=this.vs||"";break;case Rht:e=this.fs||"";break;default:ds(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(e,"// END MODULE_").concat(this.name,`

`)}getUniforms(t,e){return this.getModuleUniforms?this.getModuleUniforms(t,e):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,e){this.deprecations.forEach(r=>{r.regex.test(t)&&(r.deprecated?e.deprecated(r.old,r.new)():e.removed(r.old,r.new)())})}_parseDeprecationDefinitions(t){return t.forEach(e=>{switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}}),t}_defaultGetUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={},r=this.uniforms;for(let i in r){let n=r[i];i in t&&!n.private?(n.validate&&ds(n.validate(t[i],n),"".concat(this.name,": invalid ").concat(i)),e[i]=t[i]):e[i]=n.value}return e}};function Bht(t){let e={vs:{},fs:{}};for(let r in t){let i=t[r],n=r.slice(0,2);typeof i=="string"&&(i={order:0,injection:i}),e[n][r]=i}return e}function Dht(t){return Lht(zV(t))}function Lht(t){let e={},r={};return FV({modules:t,level:0,moduleMap:e,moduleDepth:r}),Object.keys(r).sort((i,n)=>r[n]-r[i]).map(i=>e[i])}function FV(t){let{modules:e,level:r,moduleMap:i,moduleDepth:n}=t;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(let s of e)i[s.name]=s,(n[s.name]===void 0||n[s.name]<r)&&(n[s.name]=r);for(let s of e)s.dependencies&&FV({modules:s.dependencies,level:r+1,moduleMap:i,moduleDepth:n})}function zV(t,e){return t.map(r=>(r instanceof XM||(ds(typeof r!="string","Shader module use by name is deprecated. Import shader module '".concat(r,"' and use it directly.")),ds(r.name,"shader module has no name"),r=new XM(r),r.dependencies=zV(r.dependencies)),r))}function Nht(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=typeof window<"u"?window.navigator||{}:{},r=t.userAgent||e.userAgent||"",i=r.indexOf("MSIE ")!==-1,n=r.indexOf("Trident/")!==-1;return i||n}var Fht=7936,zht=7937,Vht=7938,jht=35724,HS={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Jc={};Object.keys(HS).forEach(t=>{Jc[t]=t});function Uht(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function Hht(t){let e=t.getExtension("WEBGL_debug_renderer_info"),r=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Fht),i=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||zht);return{gpuVendor:Ght(r,i),vendor:r,renderer:i,version:t.getParameter(Vht),shadingLanguageVersion:t.getParameter(jht)}}function Ght(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}var Jx={};function qM(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=HS[e];if(ds(i,e),!Nht(r))return!0;if(e in Jx)return Jx[e];let n=i[0],s=r.behavior||"enable",a="#extension GL_".concat(n," : ").concat(s,`
void main(void) {}`),o=t.createShader(35633);t.shaderSource(o,a),t.compileShader(o);let l=t.getShaderParameter(o,35713);return t.deleteShader(o),Jx[e]=l,l}function Wht(t,e){let r=HS[e];ds(r,e);let i=Uht(t)&&r[1]||r[0],n=typeof i=="string"?!!t.getExtension(i):i;return ds(n===!1||n===!0),n}function Sv(t,e){return e=Array.isArray(e)?e:[e],e.every(r=>Wht(t,r))}function Zht(t){switch(Hht(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function $ht(t,e,r){let i=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return Sv(t,Jc.GLSL_FRAG_DEPTH)&&(i+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),Sv(t,Jc.GLSL_DERIVATIVES)&&qM(t,Jc.GLSL_DERIVATIVES)&&(i+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),Sv(t,Jc.GLSL_FRAG_DATA)&&qM(t,Jc.GLSL_FRAG_DATA,{behavior:"require"})&&(i+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),Sv(t,Jc.GLSL_TEXTURE_LOD)&&(i+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),i}var Xht=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,qht=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,Kht={[Uf]:Xht,[US]:qht},S_="__LUMA_INJECT_DECLARATIONS__",KM=/void\s+main\s*\([^)]*\)\s*\{\n?/,YM=/}\n?[^{}]*$/,Qx=[];function JM(t,e,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,n=e===Uf;for(let s in r){let a=r[s];a.sort((l,c)=>l.order-c.order),Qx.length=a.length;for(let l=0,c=a.length;l<c;++l)Qx[l]=a[l].injection;let o="".concat(Qx.join(`
`),`
`);switch(s){case"vs:#decl":n&&(t=t.replace(S_,o));break;case"vs:#main-start":n&&(t=t.replace(KM,l=>l+o));break;case"vs:#main-end":n&&(t=t.replace(YM,l=>o+l));break;case"fs:#decl":n||(t=t.replace(S_,o));break;case"fs:#main-start":n||(t=t.replace(KM,l=>l+o));break;case"fs:#main-end":n||(t=t.replace(YM,l=>o+l));break;default:t=t.replace(s,l=>l+o)}}return t=t.replace(S_,""),i&&(t=t.replace(/\}\s*$/,s=>s+Kht[e])),t}function XC(t){let e={};return ds(Array.isArray(t)&&t.length>1),t.forEach(r=>{for(let i in r)e[i]=e[i]?"".concat(e[i],`
`).concat(r[i]):r[i]}),e}function kd(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}var VV=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Yht=[...VV,[kd("attribute"),"in $1"],[kd("varying"),"out $1"]],Jht=[...VV,[kd("varying"),"in $1"]],jV=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],Qht=[...jV,[kd("in"),"attribute $1"],[kd("out"),"varying $1"]],tdt=[...jV,[kd("in"),"varying $1"]],qC="gl_FragColor",KC=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,edt=/void\s+main\s*\([^)]*\)\s*\{\n?/;function idt(t,e,r){switch(e){case 300:return r?yb(t,Yht):rdt(t);case 100:return r?yb(t,Qht):ndt(t);default:throw new Error("unknown GLSL version ".concat(e))}}function yb(t,e){for(let[r,i]of e)t=t.replace(r,i);return t}function rdt(t){t=yb(t,Jht);let e=t.match(KC);if(e){let r=e[1];t=t.replace(new RegExp("\\b".concat(qC,"\\b"),"g"),r)}else{let r="fragmentColor";t=t.replace(edt,i=>"out vec4 ".concat(r,`;
`).concat(i)).replace(new RegExp("\\b".concat(qC,"\\b"),"g"),r)}return t}function ndt(t){t=yb(t,tdt);let e=t.match(KC);if(e){let r=e[1];t=t.replace(KC,"").replace(new RegExp("\\b".concat(r,"\\b"),"g"),qC)}return t}var sdt=`

`.concat(S_,`

`),UV={[Uf]:"vertex",[US]:"fragment"},adt=`precision highp float;

`;function odt(t,e){let{vs:r,fs:i}=e,n=Dht(e.modules||[]);return{gl:t,vs:QM(t,Object.assign({},e,{source:r,type:Uf,modules:n})),fs:QM(t,Object.assign({},e,{source:i,type:US,modules:n})),getUniforms:ldt(n)}}function QM(t,e){let{id:r,source:i,type:n,modules:s,defines:a={},hookFunctions:o=[],inject:l={},transpileToGLSL100:c=!1,prologue:h=!0,log:p}=e;ds(typeof i=="string","shader source must be a string");let m=n===Uf,f=i.split(`
`),g=100,_="",w=i;f[0].indexOf("#version ")===0?(g=300,_=f[0],w=f.slice(1).join(`
`)):_="#version ".concat(g);let S={};s.forEach(M=>{Object.assign(S,M.getDefines())}),Object.assign(S,a);let C=h?"".concat(_,`
`).concat(udt({id:r,source:i,type:n}),`
`).concat(cdt({type:n}),`
`).concat(Zht(t),`
`).concat($ht(t,g,!m),`
`).concat(hdt(S),`
`).concat(m?"":adt,`
`):"".concat(_,`
`),b=pdt(o),P={},L={},H={};for(let M in l){let E=typeof l[M]=="string"?{injection:l[M],order:0}:l[M],it=M.match(/^(v|f)s:(#)?([\w-]+)$/);if(it){let X=it[2],W=it[3];X?W==="decl"?L[M]=[E]:H[M]=[E]:P[M]=[E]}else H[M]=[E]}for(let M of s){p&&M.checkDeprecations(w,p);let E=M.getModuleSource(n,g);C+=E;let it=M.injections[n];for(let X in it){let W=X.match(/^(v|f)s:#([\w-]+)$/);if(W){let J=W[2]==="decl"?L:H;J[X]=J[X]||[],J[X].push(it[X])}else P[X]=P[X]||[],P[X].push(it[X])}}return C+=sdt,C=JM(C,n,L),C+=ddt(b[n],P),C+=w,C=JM(C,n,H),C=idt(C,c?100:g,m),C}function ldt(t){return function(e){let r={};for(let i of t){let n=i.getUniforms(e,r);Object.assign(r,n)}return r}}function cdt(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(UV[e].toUpperCase(),`
`)}function udt(t){let{id:e,source:r,type:i}=t;return e&&typeof e=="string"&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(UV[i],`

`):""}function hdt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,r="";for(let i in t){e===0&&(r+=`
// APPLICATION DEFINES
`),e++;let n=t[i];(n||Number.isFinite(n))&&(r+="#define ".concat(i.toUpperCase()," ").concat(t[i],`
`))}return e===0&&(r+=`
`),r}function ddt(t,e){let r="";for(let i in t){let n=t[i];if(r+="void ".concat(n.signature,` {
`),n.header&&(r+="  ".concat(n.header)),e[i]){let s=e[i];s.sort((a,o)=>a.order-o.order);for(let a of s)r+="  ".concat(a.injection,`
`)}n.footer&&(r+="  ".concat(n.footer)),r+=`}
`}return r}function pdt(t){let e={vs:{},fs:{}};return t.forEach(r=>{let i;typeof r!="string"?(i=r,r=i.hook):i={},r=r.trim();let[n,s]=r.split(":"),a=r.replace(/\(.+/,"");e[n][a]=Object.assign(i,{signature:s})}),e}var mdt="void main() {gl_FragColor = vec4(0);}",HV=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,fdt=`#version 300 es
`.concat(HV);function GV(t,e){e=Array.isArray(e)?e:[e];let r=t.replace(/^\s+/,"").split(/\s+/),[i,n,s]=r;if(!e.includes(i)||!n||!s)return null;let a=s.split(";")[0];return{qualifier:i,type:n,name:a}}function WV(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{version:e=100,input:r,inputType:i,output:n}=t;if(!r)return e===300?fdt:e>300?"#version ".concat(e,`
`).concat(HV):mdt;let s=_dt(r,i);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(i," ").concat(r,`;
out vec4 `).concat(n,`;
void main() {
  `).concat(n," = ").concat(s,`;
}`):"varying ".concat(i," ").concat(r,`;
void main() {
  gl_FragColor = `).concat(s,`;
}`)}function gdt(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return ds(!1),null}}function vdt(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return ds(!1),null}}function _dt(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return ds(!1),null}}var bdt=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,ydt={name:"fp32",vs:bdt,fs:null};function tR(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}var F5t=1/Math.PI*180,wdt=1/180*Math.PI,wn={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function xdt(t,{precision:e=wn.precision}={}){return t=kdt(t),"".concat(parseFloat(t.toPrecision(e)))}function Mu(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ar(t){return Cdt(t)}function Cdt(t,e){return ZV(t,r=>r*wdt,e)}function Xr(t,e,r){return ZV(t,i=>Math.max(e,Math.min(r,i)))}function wb(t,e,r){return Mu(t)?t.map((i,n)=>wb(i,e[n],r)):r*e+(1-r)*t}function Ad(t,e,r){let i=wn.EPSILON;r&&(wn.EPSILON=r);try{if(t===e)return!0;if(Mu(t)&&Mu(e)){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ad(t[n],e[n]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=wn.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{wn.EPSILON=i}}function kdt(t){return Math.round(t/wn.EPSILON)*wn.EPSILON}function Adt(t){return t.clone?t.clone():new Array(t.length)}function ZV(t,e,r){if(Mu(t)){let i=t;r=r||Adt(i);for(let n=0;n<r.length&&n<i.length;++n)r[n]=e(t[n],n,r);return r}return e(t)}function Sdt(t){function e(){var r=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}var GS=class extends Sdt(Array){clone(){return new this.constructor().copy(this)}fromArray(t,e=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=t[r+e];return this.check()}toArray(t=[],e=0){for(let r=0;r<this.ELEMENTS;++r)t[e+r]=this[r];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:Mu(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(wn)}formatString(t){let e="";for(let r=0;r<this.ELEMENTS;++r)e+=(r>0?", ":"")+xdt(this[r],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(e,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!Ad(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,r){if(r===void 0)return this.lerp(this,t,e);for(let i=0;i<this.ELEMENTS;++i){let n=t[i];this[i]=n+r*(e[i]-n)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t[r]),e[r]);return this.check()}add(...t){for(let e of t)for(let r=0;r<this.ELEMENTS;++r)this[r]+=e[r];return this.check()}subtract(...t){for(let e of t)for(let r=0;r<this.ELEMENTS;++r)this[r]-=e[r];return this.check()}scale(t){if(typeof t=="number")for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;else for(let e=0;e<this.ELEMENTS&&e<t.length;++e)this[e]*=t[e];return this.check()}multiplyByScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}check(){if(wn.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t),e);return this.check()}get elements(){return this}};function Edt(t,e){if(t.length!==e)return!1;for(let r=0;r<t.length;++r)if(!Number.isFinite(t[r]))return!1;return!0}function Vi(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function E_(t,e,r=""){if(wn.debug&&!Edt(t,e))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return t}var $V=class extends GS{get x(){return this[0]}set x(t){this[0]=Vi(t)}get y(){return this[1]}set y(t){this[1]=Vi(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let e=0;e<this.ELEMENTS;++e)t+=this[e]*this[e];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let e=0;for(let r=0;r<this.ELEMENTS;++r){let i=this[r]-t[r];e+=i*i}return Vi(e)}dot(t){let e=0;for(let r=0;r<this.ELEMENTS;++r)e+=this[r]*t[r];return Vi(e)}normalize(){let t=this.magnitude();if(t!==0)for(let e=0;e<this.ELEMENTS;++e)this[e]/=t;return this.check()}multiply(...t){for(let e of t)for(let r=0;r<this.ELEMENTS;++r)this[r]*=e[r];return this.check()}divide(...t){for(let e of t)for(let r=0;r<this.ELEMENTS;++r)this[r]/=e[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return tR(t>=0&&t<this.ELEMENTS,"index is out of range"),Vi(this[t])}setComponent(t,e){return tR(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=e,this.check()}addVectors(t,e){return this.copy(t).add(e)}subVectors(t,e){return this.copy(t).subtract(e)}multiplyVectors(t,e){return this.copy(t).multiply(e)}addScaledVector(t,e){return this.add(new this.constructor(t).multiplyScalar(e))}},Bm=1e-6,fa=typeof Float32Array<"u"?Float32Array:Array,z5t=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function Tdt(){var t=new fa(2);return fa!=Float32Array&&(t[0]=0,t[1]=0),t}function xb(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function XV(t,e){return t[0]=-e[0],t[1]=-e[1],t}function qV(t,e,r,i){var n=e[0],s=e[1];return t[0]=n+i*(r[0]-n),t[1]=s+i*(r[1]-s),t}function Idt(t,e,r){var i=e[0],n=e[1];return t[0]=r[0]*i+r[4]*n+r[12],t[1]=r[1]*i+r[5]*n+r[13],t}var V5t=function(){var t=Tdt();return function(e,r,i,n,s,a){var o,l;for(r||(r=2),i||(i=0),n?l=Math.min(n*r+i,e.length):l=e.length,o=i;o<l;o+=r)t[0]=e[o],t[1]=e[o+1],s(t,t,a),e[o]=t[0],e[o+1]=t[1];return e}}();function Odt(t,e,r){let i=e[0],n=e[1],s=r[3]*i+r[7]*n||1;return t[0]=(r[0]*i+r[4]*n)/s,t[1]=(r[1]*i+r[5]*n)/s,t}function KV(t,e,r){let i=e[0],n=e[1],s=e[2],a=r[3]*i+r[7]*n+r[11]*s||1;return t[0]=(r[0]*i+r[4]*n+r[8]*s)/a,t[1]=(r[1]*i+r[5]*n+r[9]*s)/a,t[2]=(r[2]*i+r[6]*n+r[10]*s)/a,t}function Pdt(t,e,r){let i=e[0],n=e[1];return t[0]=r[0]*i+r[2]*n,t[1]=r[1]*i+r[3]*n,t[2]=e[2],t}function Mdt(t,e,r){let i=e[0],n=e[1];return t[0]=r[0]*i+r[2]*n,t[1]=r[1]*i+r[3]*n,t[2]=e[2],t[3]=e[3],t}function Rdt(t,e,r){let i=e[0],n=e[1],s=e[2];return t[0]=r[0]*i+r[3]*n+r[6]*s,t[1]=r[1]*i+r[4]*n+r[7]*s,t[2]=r[2]*i+r[5]*n+r[8]*s,t[3]=e[3],t}function YV(){var t=new fa(3);return fa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Bdt(t){var e=t[0],r=t[1],i=t[2];return Math.hypot(e,r,i)}function eR(t,e,r){var i=new fa(3);return i[0]=t,i[1]=e,i[2]=r,i}function Ddt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Ldt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Ndt(t,e){var r=e[0],i=e[1],n=e[2],s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function JV(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function T_(t,e,r){var i=e[0],n=e[1],s=e[2],a=r[0],o=r[1],l=r[2];return t[0]=n*l-s*o,t[1]=s*a-i*l,t[2]=i*o-n*a,t}function WS(t,e,r){var i=e[0],n=e[1],s=e[2],a=r[3]*i+r[7]*n+r[11]*s+r[15];return a=a||1,t[0]=(r[0]*i+r[4]*n+r[8]*s+r[12])/a,t[1]=(r[1]*i+r[5]*n+r[9]*s+r[13])/a,t[2]=(r[2]*i+r[6]*n+r[10]*s+r[14])/a,t}function Fdt(t,e,r){var i=e[0],n=e[1],s=e[2];return t[0]=i*r[0]+n*r[3]+s*r[6],t[1]=i*r[1]+n*r[4]+s*r[7],t[2]=i*r[2]+n*r[5]+s*r[8],t}function QV(t,e,r){var i=r[0],n=r[1],s=r[2],a=r[3],o=e[0],l=e[1],c=e[2],h=n*c-s*l,p=s*o-i*c,m=i*l-n*o,f=n*m-s*p,g=s*h-i*m,_=i*p-n*h,w=a*2;return h*=w,p*=w,m*=w,f*=2,g*=2,_*=2,t[0]=o+h+f,t[1]=l+p+g,t[2]=c+m+_,t}function zdt(t,e,r,i){var n=[],s=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],s[0]=n[0],s[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),s[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function Vdt(t,e,r,i){var n=[],s=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],s[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),s[1]=n[1],s[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function jdt(t,e,r,i){var n=[],s=[];return n[0]=e[0]-r[0],n[1]=e[1]-r[1],n[2]=e[2]-r[2],s[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),s[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),s[2]=n[2],t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function Udt(t,e){var r=t[0],i=t[1],n=t[2],s=e[0],a=e[1],o=e[2],l=Math.sqrt(r*r+i*i+n*n),c=Math.sqrt(s*s+a*a+o*o),h=l*c,p=h&&JV(t,e)/h;return Math.acos(Math.min(Math.max(p,-1),1))}var Hdt=Ddt,Gdt=Bdt,j5t=function(){var t=YV();return function(e,r,i,n,s,a){var o,l;for(r||(r=3),i||(i=0),n?l=Math.min(n*r+i,e.length):l=e.length,o=i;o<l;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],s(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}}(),t1=[0,0,0],Ev,zn=class tj extends $V{static get ZERO(){return Ev||(Ev=new tj(0,0,0),Object.freeze(Ev)),Ev}constructor(e=0,r=0,i=0){super(-0,-0,-0),arguments.length===1&&Mu(e)?this.copy(e):(wn.debug&&(Vi(e),Vi(r),Vi(i)),this[0]=e,this[1]=r,this[2]=i)}set(e,r,i){return this[0]=e,this[1]=r,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return wn.debug&&(Vi(e.x),Vi(e.y),Vi(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Vi(e)}angle(e){return Udt(this,e)}cross(e){return T_(this,this,e),this.check()}rotateX({radians:e,origin:r=t1}){return zdt(this,this,r,e),this.check()}rotateY({radians:e,origin:r=t1}){return Vdt(this,this,r,e),this.check()}rotateZ({radians:e,origin:r=t1}){return jdt(this,this,r,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return WS(this,this,e),this.check()}transformAsVector(e){return KV(this,this,e),this.check()}transformByMatrix3(e){return Fdt(this,this,e),this.check()}transformByMatrix2(e){return Pdt(this,this,e),this.check()}transformByQuaternion(e){return QV(this,this,e),this.check()}},Tv,Wdt=class ej extends $V{static get ZERO(){return Tv||(Tv=new ej(0,0,0,0),Object.freeze(Tv)),Tv}constructor(e=0,r=0,i=0,n=0){super(-0,-0,-0,-0),Mu(e)&&arguments.length===1?this.copy(e):(wn.debug&&(Vi(e),Vi(r),Vi(i),Vi(n)),this[0]=e,this[1]=r,this[2]=i,this[3]=n)}set(e,r,i,n){return this[0]=e,this[1]=r,this[2]=i,this[3]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return wn.debug&&(Vi(e.x),Vi(e.y),Vi(e.z),Vi(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=Vi(e)}get w(){return this[3]}set w(e){this[3]=Vi(e)}transform(e){return WS(this,this,e),this.check()}transformByMatrix3(e){return Rdt(this,this,e),this.check()}transformByMatrix2(e){return Mdt(this,this,e),this.check()}transformByQuaternion(e){return QV(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}},Zdt=class extends GS{toString(){let t="[";if(wn.printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let r=0;r<this.RANK;++r)t+=" ".concat(this[r*this.RANK+e])}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" ".concat(this[e])}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,r){return this[e*this.RANK+t]=Vi(r),this}getColumn(t,e=new Array(this.RANK).fill(-0)){let r=t*this.RANK;for(let i=0;i<this.RANK;++i)e[i]=this[r+i];return e}setColumn(t,e){let r=t*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=e[i];return this}};function $dt(){var t=new fa(9);return fa!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function Xdt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function qdt(t,e){if(t===e){var r=e[1],i=e[2],n=e[3],s=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=s,t[11]=e[14],t[12]=n,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function YC(t,e){var r=e[0],i=e[1],n=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],p=e[9],m=e[10],f=e[11],g=e[12],_=e[13],w=e[14],S=e[15],C=r*o-i*a,b=r*l-n*a,P=r*c-s*a,L=i*l-n*o,H=i*c-s*o,M=n*c-s*l,E=h*_-p*g,it=h*w-m*g,X=h*S-f*g,W=p*w-m*_,J=p*S-f*_,lt=m*S-f*w,Y=C*lt-b*J+P*W+L*X-H*it+M*E;return Y?(Y=1/Y,t[0]=(o*lt-l*J+c*W)*Y,t[1]=(n*J-i*lt-s*W)*Y,t[2]=(_*M-w*H+S*L)*Y,t[3]=(m*H-p*M-f*L)*Y,t[4]=(l*X-a*lt-c*it)*Y,t[5]=(r*lt-n*X+s*it)*Y,t[6]=(w*P-g*M-S*b)*Y,t[7]=(h*M-m*P+f*b)*Y,t[8]=(a*J-o*X+c*E)*Y,t[9]=(i*X-r*J-s*E)*Y,t[10]=(g*H-_*P+S*C)*Y,t[11]=(p*P-h*H-f*C)*Y,t[12]=(o*it-a*W-l*E)*Y,t[13]=(r*W-i*it+n*E)*Y,t[14]=(_*b-g*L-w*C)*Y,t[15]=(h*L-p*b+m*C)*Y,t):null}function Kdt(t){var e=t[0],r=t[1],i=t[2],n=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],h=t[9],p=t[10],m=t[11],f=t[12],g=t[13],_=t[14],w=t[15],S=e*a-r*s,C=e*o-i*s,b=e*l-n*s,P=r*o-i*a,L=r*l-n*a,H=i*l-n*o,M=c*g-h*f,E=c*_-p*f,it=c*w-m*f,X=h*_-p*g,W=h*w-m*g,J=p*w-m*_;return S*J-C*W+b*X+P*it-L*E+H*M}function bu(t,e,r){var i=e[0],n=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],p=e[8],m=e[9],f=e[10],g=e[11],_=e[12],w=e[13],S=e[14],C=e[15],b=r[0],P=r[1],L=r[2],H=r[3];return t[0]=b*i+P*o+L*p+H*_,t[1]=b*n+P*l+L*m+H*w,t[2]=b*s+P*c+L*f+H*S,t[3]=b*a+P*h+L*g+H*C,b=r[4],P=r[5],L=r[6],H=r[7],t[4]=b*i+P*o+L*p+H*_,t[5]=b*n+P*l+L*m+H*w,t[6]=b*s+P*c+L*f+H*S,t[7]=b*a+P*h+L*g+H*C,b=r[8],P=r[9],L=r[10],H=r[11],t[8]=b*i+P*o+L*p+H*_,t[9]=b*n+P*l+L*m+H*w,t[10]=b*s+P*c+L*f+H*S,t[11]=b*a+P*h+L*g+H*C,b=r[12],P=r[13],L=r[14],H=r[15],t[12]=b*i+P*o+L*p+H*_,t[13]=b*n+P*l+L*m+H*w,t[14]=b*s+P*c+L*f+H*S,t[15]=b*a+P*h+L*g+H*C,t}function Cb(t,e,r){var i=r[0],n=r[1],s=r[2],a,o,l,c,h,p,m,f,g,_,w,S;return e===t?(t[12]=e[0]*i+e[4]*n+e[8]*s+e[12],t[13]=e[1]*i+e[5]*n+e[9]*s+e[13],t[14]=e[2]*i+e[6]*n+e[10]*s+e[14],t[15]=e[3]*i+e[7]*n+e[11]*s+e[15]):(a=e[0],o=e[1],l=e[2],c=e[3],h=e[4],p=e[5],m=e[6],f=e[7],g=e[8],_=e[9],w=e[10],S=e[11],t[0]=a,t[1]=o,t[2]=l,t[3]=c,t[4]=h,t[5]=p,t[6]=m,t[7]=f,t[8]=g,t[9]=_,t[10]=w,t[11]=S,t[12]=a*i+h*n+g*s+e[12],t[13]=o*i+p*n+_*s+e[13],t[14]=l*i+m*n+w*s+e[14],t[15]=c*i+f*n+S*s+e[15]),t}function ZS(t,e,r){var i=r[0],n=r[1],s=r[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ydt(t,e,r,i){var n=i[0],s=i[1],a=i[2],o=Math.hypot(n,s,a),l,c,h,p,m,f,g,_,w,S,C,b,P,L,H,M,E,it,X,W,J,lt,Y,nt;return o<Bm?null:(o=1/o,n*=o,s*=o,a*=o,l=Math.sin(r),c=Math.cos(r),h=1-c,p=e[0],m=e[1],f=e[2],g=e[3],_=e[4],w=e[5],S=e[6],C=e[7],b=e[8],P=e[9],L=e[10],H=e[11],M=n*n*h+c,E=s*n*h+a*l,it=a*n*h-s*l,X=n*s*h-a*l,W=s*s*h+c,J=a*s*h+n*l,lt=n*a*h+s*l,Y=s*a*h-n*l,nt=a*a*h+c,t[0]=p*M+_*E+b*it,t[1]=m*M+w*E+P*it,t[2]=f*M+S*E+L*it,t[3]=g*M+C*E+H*it,t[4]=p*X+_*W+b*J,t[5]=m*X+w*W+P*J,t[6]=f*X+S*W+L*J,t[7]=g*X+C*W+H*J,t[8]=p*lt+_*Y+b*nt,t[9]=m*lt+w*Y+P*nt,t[10]=f*lt+S*Y+L*nt,t[11]=g*lt+C*Y+H*nt,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ij(t,e,r){var i=Math.sin(r),n=Math.cos(r),s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],h=e[9],p=e[10],m=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*n+c*i,t[5]=a*n+h*i,t[6]=o*n+p*i,t[7]=l*n+m*i,t[8]=c*n-s*i,t[9]=h*n-a*i,t[10]=p*n-o*i,t[11]=m*n-l*i,t}function Jdt(t,e,r){var i=Math.sin(r),n=Math.cos(r),s=e[0],a=e[1],o=e[2],l=e[3],c=e[8],h=e[9],p=e[10],m=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n-c*i,t[1]=a*n-h*i,t[2]=o*n-p*i,t[3]=l*n-m*i,t[8]=s*i+c*n,t[9]=a*i+h*n,t[10]=o*i+p*n,t[11]=l*i+m*n,t}function rj(t,e,r){var i=Math.sin(r),n=Math.cos(r),s=e[0],a=e[1],o=e[2],l=e[3],c=e[4],h=e[5],p=e[6],m=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*n+c*i,t[1]=a*n+h*i,t[2]=o*n+p*i,t[3]=l*n+m*i,t[4]=c*n-s*i,t[5]=h*n-a*i,t[6]=p*n-o*i,t[7]=m*n-l*i,t}function Qdt(t,e){var r=e[0],i=e[1],n=e[2],s=e[3],a=r+r,o=i+i,l=n+n,c=r*a,h=i*a,p=i*o,m=n*a,f=n*o,g=n*l,_=s*a,w=s*o,S=s*l;return t[0]=1-p-g,t[1]=h+S,t[2]=m-w,t[3]=0,t[4]=h-S,t[5]=1-c-g,t[6]=f+_,t[7]=0,t[8]=m+w,t[9]=f-_,t[10]=1-c-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tpt(t,e,r,i,n,s,a){var o=1/(r-e),l=1/(n-i),c=1/(s-a);return t[0]=s*2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(r+e)*o,t[9]=(n+i)*l,t[10]=(a+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*s*2*c,t[15]=0,t}function ept(t,e,r,i,n){var s=1/Math.tan(e/2),a;return t[0]=s/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,n!=null&&n!==1/0?(a=1/(i-n),t[10]=(n+i)*a,t[14]=2*n*i*a):(t[10]=-1,t[14]=-2*i),t}var ipt=ept;function rpt(t,e,r,i,n,s,a){var o=1/(e-r),l=1/(i-n),c=1/(s-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*o,t[13]=(n+i)*l,t[14]=(a+s)*c,t[15]=1,t}var npt=rpt;function spt(t,e,r,i){var n,s,a,o,l,c,h,p,m,f,g=e[0],_=e[1],w=e[2],S=i[0],C=i[1],b=i[2],P=r[0],L=r[1],H=r[2];return Math.abs(g-P)<Bm&&Math.abs(_-L)<Bm&&Math.abs(w-H)<Bm?Xdt(t):(h=g-P,p=_-L,m=w-H,f=1/Math.hypot(h,p,m),h*=f,p*=f,m*=f,n=C*m-b*p,s=b*h-S*m,a=S*p-C*h,f=Math.hypot(n,s,a),f?(f=1/f,n*=f,s*=f,a*=f):(n=0,s=0,a=0),o=p*a-m*s,l=m*n-h*a,c=h*s-p*n,f=Math.hypot(o,l,c),f?(f=1/f,o*=f,l*=f,c*=f):(o=0,l=0,c=0),t[0]=n,t[1]=o,t[2]=h,t[3]=0,t[4]=s,t[5]=l,t[6]=p,t[7]=0,t[8]=a,t[9]=c,t[10]=m,t[11]=0,t[12]=-(n*g+s*_+a*w),t[13]=-(o*g+l*_+c*w),t[14]=-(h*g+p*_+m*w),t[15]=1,t)}function apt(){var t=new fa(4);return fa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function opt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function nj(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function lpt(t){var e=t[0],r=t[1],i=t[2],n=t[3];return Math.hypot(e,r,i,n)}function cpt(t){var e=t[0],r=t[1],i=t[2],n=t[3];return e*e+r*r+i*i+n*n}function upt(t,e){var r=e[0],i=e[1],n=e[2],s=e[3],a=r*r+i*i+n*n+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=i*a,t[2]=n*a,t[3]=s*a,t}function hpt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function dpt(t,e,r,i){var n=e[0],s=e[1],a=e[2],o=e[3];return t[0]=n+i*(r[0]-n),t[1]=s+i*(r[1]-s),t[2]=a+i*(r[2]-a),t[3]=o+i*(r[3]-o),t}function Hf(t,e,r){var i=e[0],n=e[1],s=e[2],a=e[3];return t[0]=r[0]*i+r[4]*n+r[8]*s+r[12]*a,t[1]=r[1]*i+r[5]*n+r[9]*s+r[13]*a,t[2]=r[2]*i+r[6]*n+r[10]*s+r[14]*a,t[3]=r[3]*i+r[7]*n+r[11]*s+r[15]*a,t}function ppt(t,e,r){var i=e[0],n=e[1],s=e[2],a=r[0],o=r[1],l=r[2],c=r[3],h=c*i+o*s-l*n,p=c*n+l*i-a*s,m=c*s+a*n-o*i,f=-a*i-o*n-l*s;return t[0]=h*c+f*-a+p*-l-m*-o,t[1]=p*c+f*-o+m*-a-h*-l,t[2]=m*c+f*-l+h*-o-p*-a,t[3]=e[3],t}var U5t=function(){var t=apt();return function(e,r,i,n,s,a){var o,l;for(r||(r=4),i||(i=0),n?l=Math.min(n*r+i,e.length):l=e.length,o=i;o<l;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],s(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}(),sj=function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3",t}(sj||{}),mpt=45*Math.PI/180,fpt=1,e1=.1,i1=500,gpt=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),gt=class extends Zdt{static get IDENTITY(){return _pt()}static get ZERO(){return vpt()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return sj}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,r,i,n,s,a,o,l,c,h,p,m,f,g,_){return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this[4]=n,this[5]=s,this[6]=a,this[7]=o,this[8]=l,this[9]=c,this[10]=h,this[11]=p,this[12]=m,this[13]=f,this[14]=g,this[15]=_,this.check()}setRowMajor(t,e,r,i,n,s,a,o,l,c,h,p,m,f,g,_){return this[0]=t,this[1]=n,this[2]=l,this[3]=m,this[4]=e,this[5]=s,this[6]=c,this[7]=f,this[8]=r,this[9]=a,this[10]=h,this[11]=g,this[12]=i,this[13]=o,this[14]=p,this[15]=_,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(gpt)}fromObject(t){return this.check()}fromQuaternion(t){return Qdt(this,t),this.check()}frustum(t){let{left:e,right:r,bottom:i,top:n,near:s=e1,far:a=i1}=t;return a===1/0?bpt(this,e,r,i,n,s):tpt(this,e,r,i,n,s,a),this.check()}lookAt(t){let{eye:e,center:r=[0,0,0],up:i=[0,1,0]}=t;return spt(this,e,r,i),this.check()}ortho(t){let{left:e,right:r,bottom:i,top:n,near:s=e1,far:a=i1}=t;return npt(this,e,r,i,n,s,a),this.check()}orthographic(t){let{fovy:e=mpt,aspect:r=fpt,focalDistance:i=1,near:n=e1,far:s=i1}=t;iR(e);let a=e/2,o=i*Math.tan(a),l=o*r;return this.ortho({left:-l,right:l,bottom:-o,top:o,near:n,far:s})}perspective(t){let{fovy:e=45*Math.PI/180,aspect:r=1,near:i=.1,far:n=500}=t;return iR(e),ipt(this,e,r,i,n),this.check()}determinant(){return Kdt(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];let r=this.getScale(e),i=1/r[0],n=1/r[1],s=1/r[2];return t[0]=this[0]*i,t[1]=this[1]*n,t[2]=this[2]*s,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*n,t[6]=this[6]*s,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*n,t[10]=this[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,e){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=e||[-0,-0,-0];let r=this.getScale(e),i=1/r[0],n=1/r[1],s=1/r[2];return t[0]=this[0]*i,t[1]=this[1]*n,t[2]=this[2]*s,t[3]=this[4]*i,t[4]=this[5]*n,t[5]=this[6]*s,t[6]=this[8]*i,t[7]=this[9]*n,t[8]=this[10]*s,t}transpose(){return qdt(this,this),this.check()}invert(){return YC(this,this),this.check()}multiplyLeft(t){return bu(this,t,this),this.check()}multiplyRight(t){return bu(this,this,t),this.check()}rotateX(t){return ij(this,this,t),this.check()}rotateY(t){return Jdt(this,this,t),this.check()}rotateZ(t){return rj(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,e){return Ydt(this,this,t,e),this.check()}scale(t){return ZS(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return Cb(this,this,t),this.check()}transform(t,e){return t.length===4?(e=Hf(e||[-0,-0,-0,-0],t,this),E_(e,4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){let{length:r}=t,i;switch(r){case 2:i=Idt(e||[-0,-0],t,this);break;case 3:i=WS(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return E_(i,t.length),i}transformAsVector(t,e){let r;switch(t.length){case 2:r=Odt(e||[-0,-0],t,this);break;case 3:r=KV(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return E_(r,t.length),r}transformPoint(t,e){return this.transformAsPoint(t,e)}transformVector(t,e){return this.transformAsPoint(t,e)}transformDirection(t,e){return this.transformAsVector(t,e)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,r){return this.identity().translate([t,e,r])}},Iv,Ov;function vpt(){return Iv||(Iv=new gt([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Iv)),Iv}function _pt(){return Ov||(Ov=new gt,Object.freeze(Ov)),Ov}function iR(t){if(t>Math.PI*2)throw Error("expected radians")}function bpt(t,e,r,i,n,s){let a=2*s/(r-e),o=2*s/(n-i),l=(r+e)/(r-e),c=(n+i)/(n-i),h=-1,p=-1,m=-2*s;return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=h,t[11]=p,t[12]=0,t[13]=0,t[14]=m,t[15]=0,t}function rR(){var t=new fa(4);return fa!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function ypt(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function aj(t,e,r){r=r*.5;var i=Math.sin(r);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(r),t}function nR(t,e,r){var i=e[0],n=e[1],s=e[2],a=e[3],o=r[0],l=r[1],c=r[2],h=r[3];return t[0]=i*h+a*o+n*c-s*l,t[1]=n*h+a*l+s*o-i*c,t[2]=s*h+a*c+i*l-n*o,t[3]=a*h-i*o-n*l-s*c,t}function wpt(t,e,r){r*=.5;var i=e[0],n=e[1],s=e[2],a=e[3],o=Math.sin(r),l=Math.cos(r);return t[0]=i*l+a*o,t[1]=n*l+s*o,t[2]=s*l-n*o,t[3]=a*l-i*o,t}function xpt(t,e,r){r*=.5;var i=e[0],n=e[1],s=e[2],a=e[3],o=Math.sin(r),l=Math.cos(r);return t[0]=i*l-s*o,t[1]=n*l+a*o,t[2]=s*l+i*o,t[3]=a*l-n*o,t}function Cpt(t,e,r){r*=.5;var i=e[0],n=e[1],s=e[2],a=e[3],o=Math.sin(r),l=Math.cos(r);return t[0]=i*l+n*o,t[1]=n*l-i*o,t[2]=s*l+a*o,t[3]=a*l-s*o,t}function kpt(t,e){var r=e[0],i=e[1],n=e[2];return t[0]=r,t[1]=i,t[2]=n,t[3]=Math.sqrt(Math.abs(1-r*r-i*i-n*n)),t}function I_(t,e,r,i){var n=e[0],s=e[1],a=e[2],o=e[3],l=r[0],c=r[1],h=r[2],p=r[3],m,f,g,_,w;return f=n*l+s*c+a*h+o*p,f<0&&(f=-f,l=-l,c=-c,h=-h,p=-p),1-f>Bm?(m=Math.acos(f),g=Math.sin(m),_=Math.sin((1-i)*m)/g,w=Math.sin(i*m)/g):(_=1-i,w=i),t[0]=_*n+w*l,t[1]=_*s+w*c,t[2]=_*a+w*h,t[3]=_*o+w*p,t}function Apt(t,e){var r=e[0],i=e[1],n=e[2],s=e[3],a=r*r+i*i+n*n+s*s,o=a?1/a:0;return t[0]=-r*o,t[1]=-i*o,t[2]=-n*o,t[3]=s*o,t}function Spt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function oj(t,e){var r=e[0]+e[4]+e[8],i;if(r>0)i=Math.sqrt(r+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var n=0;e[4]>e[0]&&(n=1),e[8]>e[n*3+n]&&(n=2);var s=(n+1)%3,a=(n+2)%3;i=Math.sqrt(e[n*3+n]-e[s*3+s]-e[a*3+a]+1),t[n]=.5*i,i=.5/i,t[3]=(e[s*3+a]-e[a*3+s])*i,t[s]=(e[s*3+n]+e[n*3+s])*i,t[a]=(e[a*3+n]+e[n*3+a])*i}return t}var Ept=opt,Tpt=nj,Ipt=hpt,Opt=dpt,Ppt=lpt,Mpt=cpt,lj=upt,Rpt=function(){var t=YV(),e=eR(1,0,0),r=eR(0,1,0);return function(i,n,s){var a=JV(n,s);return a<-.999999?(T_(t,e,n),Gdt(t)<1e-6&&T_(t,r,n),Ndt(t,t),aj(i,t,Math.PI),i):a>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(T_(t,n,s),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+a,lj(i,i))}}(),H5t=function(){var t=rR(),e=rR();return function(r,i,n,s,a,o){return I_(t,i,a,o),I_(e,n,s,o),I_(r,t,e,2*o*(1-o)),r}}(),G5t=function(){var t=$dt();return function(e,r,i,n){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],lj(e,oj(e,t))}}(),Bpt=[0,0,0,1],Dpt=class extends GS{constructor(t=0,e=0,r=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&arguments.length===1?this.copy(t):this.set(t,e,r,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,e,r,i){return this[0]=t,this[1]=e,this[2]=r,this[3]=i,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return oj(this,t),this.check()}fromAxisRotation(t,e){return aj(this,t,e),this.check()}identity(){return ypt(this),this.check()}setAxisAngle(t,e){return this.fromAxisRotation(t,e)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=Vi(t)}get y(){return this[1]}set y(t){this[1]=Vi(t)}get z(){return this[2]}set z(t){this[2]=Vi(t)}get w(){return this[3]}set w(t){this[3]=Vi(t)}len(){return Ppt(this)}lengthSquared(){return Mpt(this)}dot(t){return Ipt(this,t)}rotationTo(t,e){return Rpt(this,t,e),this.check()}add(t){return Ept(this,this,t),this.check()}calculateW(){return kpt(this,this),this.check()}conjugate(){return Spt(this,this),this.check()}invert(){return Apt(this,this),this.check()}lerp(t,e,r){return r===void 0?this.lerp(this,t,e):(Opt(this,t,e,r),this.check())}multiplyRight(t){return nR(this,this,t),this.check()}multiplyLeft(t){return nR(this,t,this),this.check()}normalize(){let t=this.len(),e=t>0?1/t:0;return this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,t===0&&(this[3]=1),this.check()}rotateX(t){return wpt(this,this,t),this.check()}rotateY(t){return xpt(this,this,t),this.check()}rotateZ(t){return Cpt(this,this,t),this.check()}scale(t){return Tpt(this,this,t),this.check()}slerp(t,e,r){let i,n,s;switch(arguments.length){case 1:({start:i=Bpt,target:n,ratio:s}=t);break;case 2:i=this,n=t,s=e;break;default:i=t,n=e,s=r}return I_(this,i,n,s),this.check()}transformVector4(t,e=new Wdt){return ppt(e,t,this),E_(e,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,e){return this.setAxisAngle(t,e)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}},sR=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,Lpt={lightSources:{}};function r1(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(r=>r*e/255)}function Npt(t){let{ambientLight:e,pointLights:r=[],directionalLights:i=[]}=t,n={};return e?n["lighting_uAmbientLight.color"]=r1(e):n["lighting_uAmbientLight.color"]=[0,0,0],r.forEach((s,a)=>{n["lighting_uPointLight[".concat(a,"].color")]=r1(s),n["lighting_uPointLight[".concat(a,"].position")]=s.position,n["lighting_uPointLight[".concat(a,"].attenuation")]=s.attenuation||[1,0,0]}),n.lighting_uPointLightCount=r.length,i.forEach((s,a)=>{n["lighting_uDirectionalLight[".concat(a,"].color")]=r1(s),n["lighting_uDirectionalLight[".concat(a,"].direction")]=s.direction}),n.lighting_uDirectionalLightCount=i.length,n}function cj(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lpt;if("lightSources"in t){let{ambientLight:e,pointLights:r,directionalLights:i}=t.lightSources||{};return e||r&&r.length>0||i&&i.length>0?Object.assign({},Npt({ambientLight:e,pointLights:r,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){let e={pointLights:[],directionalLights:[]};for(let r of t.lights||[])switch(r.type){case"ambient":e.ambientLight=r;break;case"directional":e.directionalLights.push(r);break;case"point":e.pointLights.push(r);break;default:}return cj({lightSources:e})}return{}}var uj={name:"lights",vs:sR,fs:sR,getUniforms:cj,defines:{MAX_LIGHTS:3}},Fpt=new Uint8Array([0,255,255,255]),zpt={pickingSelectedColor:null,pickingHighlightColor:Fpt,pickingActive:!1,pickingAttribute:!1};function Vpt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zpt,e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{let r=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=r}if(t.pickingHighlightColor){let r=Array.from(t.pickingHighlightColor,i=>i/255);Number.isFinite(r[3])||(r[3]=1),e.picking_uHighlightColor=r}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}var jpt=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,Upt=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,Hpt={name:"picking",vs:jpt,fs:Upt,getUniforms:Vpt},Gpt=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,Wpt={};function Zpt(t){let{ambient:e=.35,diffuse:r=.6,shininess:i=32,specularColor:n=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:r,lighting_uShininess:i,lighting_uSpecularColor:n.map(s=>s/255)}}function $pt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wpt;if(!("material"in t))return{};let{material:e}=t;return e?Zpt(e):{lighting_uEnabled:!1}}var Xpt={name:"phong-lighting",dependencies:[uj],fs:Gpt,defines:{LIGHTING_FRAGMENT:1},getUniforms:$pt},qpt=`uniform mat4 u_MVPMatrix;
uniform mat4 u_ModelMatrix;
uniform mat4 u_NormalMatrix;

varying vec3 pbr_vPosition;
varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
# ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
# else
varying vec3 pbr_vNormal;
# endif
#endif

void pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)
{
  vec4 pos = u_ModelMatrix * position;
  pbr_vPosition = vec3(pos.xyz) / pos.w;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));
  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));
  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;
  pbr_vTBN = mat3(tangentW, bitangentW, normalW);
#else
  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));
#endif
#endif

#ifdef HAS_UV
  pbr_vUV = uv;
#else
  pbr_vUV = vec2(0.,0.);
#endif
}
`,Kpt=`#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)
# error PBR fragment shader: Texture LOD is not available
#endif

#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)
# error PBR fragment shader: Derivatives are not available
#endif


#if (__VERSION__ < 300)
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)
#else
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)
#endif

precision highp float;

uniform bool pbr_uUnlit;

#ifdef USE_IBL
uniform samplerCube u_DiffuseEnvSampler;
uniform samplerCube u_SpecularEnvSampler;
uniform sampler2D u_brdfLUT;
uniform vec2 u_ScaleIBLAmbient;
#endif

#ifdef HAS_BASECOLORMAP
uniform sampler2D u_BaseColorSampler;
#endif
#ifdef HAS_NORMALMAP
uniform sampler2D u_NormalSampler;
uniform float u_NormalScale;
#endif
#ifdef HAS_EMISSIVEMAP
uniform sampler2D u_EmissiveSampler;
uniform vec3 u_EmissiveFactor;
#endif
#ifdef HAS_METALROUGHNESSMAP
uniform sampler2D u_MetallicRoughnessSampler;
#endif
#ifdef HAS_OCCLUSIONMAP
uniform sampler2D u_OcclusionSampler;
uniform float u_OcclusionStrength;
#endif

#ifdef ALPHA_CUTOFF
uniform float u_AlphaCutoff;
#endif

uniform vec2 u_MetallicRoughnessValues;
uniform vec4 u_BaseColorFactor;

uniform vec3 u_Camera;
#ifdef PBR_DEBUG
uniform vec4 u_ScaleDiffBaseMR;
uniform vec4 u_ScaleFGDSpec;
#endif

varying vec3 pbr_vPosition;

varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
#else
varying vec3 pbr_vNormal;
#endif
#endif


struct PBRInfo
{
  float NdotL;
  float NdotV;
  float NdotH;
  float LdotH;
  float VdotH;
  float perceptualRoughness;
  float metalness;
  vec3 reflectance0;
  vec3 reflectance90;
  float alphaRoughness;
  vec3 diffuseColor;
  vec3 specularColor;
  vec3 n;
  vec3 v;
};

const float M_PI = 3.141592653589793;
const float c_MinRoughness = 0.04;

vec4 SRGBtoLINEAR(vec4 srgbIn)
{
#ifdef MANUAL_SRGB
#ifdef SRGB_FAST_APPROXIMATION
  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));
#else
  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);
  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );
#endif
  return vec4(linOut,srgbIn.w);;
#else
  return srgbIn;
#endif
}

vec3 getNormal()
{
#ifndef HAS_TANGENTS
  vec3 pos_dx = dFdx(pbr_vPosition);
  vec3 pos_dy = dFdy(pbr_vPosition);
  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));
  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));
  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);

#ifdef HAS_NORMALS
  vec3 ng = normalize(pbr_vNormal);
#else
  vec3 ng = cross(pos_dx, pos_dy);
#endif

  t = normalize(t - ng * dot(ng, t));
  vec3 b = normalize(cross(ng, t));
  mat3 tbn = mat3(t, b, ng);
#else
  mat3 tbn = pbr_vTBN;
#endif

#ifdef HAS_NORMALMAP
  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;
  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));
#else
  vec3 n = normalize(tbn[2].xyz);
#endif

  return n;
}


#ifdef USE_IBL
vec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)
{
  float mipCount = 9.0;
  float lod = (pbrInputs.perceptualRoughness * mipCount);
  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,
    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;
  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;

#ifdef USE_TEX_LOD
  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;
#else
  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;
#endif

  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;
  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);
  diffuse *= u_ScaleIBLAmbient.x;
  specular *= u_ScaleIBLAmbient.y;

  return diffuse + specular;
}
#endif


vec3 diffuse(PBRInfo pbrInputs)
{
  return pbrInputs.diffuseColor / M_PI;
}

vec3 specularReflection(PBRInfo pbrInputs)
{
  return pbrInputs.reflectance0 +
    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *
    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);
}



float geometricOcclusion(PBRInfo pbrInputs)
{
  float NdotL = pbrInputs.NdotL;
  float NdotV = pbrInputs.NdotV;
  float r = pbrInputs.alphaRoughness;

  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));
  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));
  return attenuationL * attenuationV;
}





float microfacetDistribution(PBRInfo pbrInputs)
{
  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;
  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;
  return roughnessSq / (M_PI * f * f);
}

void PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {
  pbrInputs.NdotL = 1.0;
  pbrInputs.NdotH = 0.0;
  pbrInputs.LdotH = 0.0;
  pbrInputs.VdotH = 1.0;
}

void PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {
  vec3 n = pbrInputs.n;
  vec3 v = pbrInputs.v;
  vec3 l = normalize(lightDirection);
  vec3 h = normalize(l+v);

  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);
  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);
  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);
  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);
}

void PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {
  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);
  PBRInfo_setDirectionalLight(pbrInputs, light_direction);
}

vec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {
  vec3 F = specularReflection(pbrInputs);
  float G = geometricOcclusion(pbrInputs);
  float D = microfacetDistribution(pbrInputs);
  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);
  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);
  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);
}

vec4 pbr_filterColor(vec4 colorUnused)
{
#ifdef HAS_BASECOLORMAP
  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;
#else
  vec4 baseColor = u_BaseColorFactor;
#endif

#ifdef ALPHA_CUTOFF
  if (baseColor.a < u_AlphaCutoff) {
    discard;
  }
#endif

  vec3 color = vec3(0, 0, 0);

  if(pbr_uUnlit){
    color.rgb = baseColor.rgb;
  }
  else{


    float perceptualRoughness = u_MetallicRoughnessValues.y;
    float metallic = u_MetallicRoughnessValues.x;
#ifdef HAS_METALROUGHNESSMAP

    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);
    perceptualRoughness = mrSample.g * perceptualRoughness;
    metallic = mrSample.b * metallic;
#endif
    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);
    metallic = clamp(metallic, 0.0, 1.0);

    float alphaRoughness = perceptualRoughness * perceptualRoughness;

    vec3 f0 = vec3(0.04);
    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);
    diffuseColor *= 1.0 - metallic;
    vec3 specularColor = mix(f0, baseColor.rgb, metallic);
    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);



    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);
    vec3 specularEnvironmentR0 = specularColor.rgb;
    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;

    vec3 n = getNormal();
    vec3 v = normalize(u_Camera - pbr_vPosition);

    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);
    vec3 reflection = -normalize(reflect(v, n));

    PBRInfo pbrInputs = PBRInfo(
      0.0,
      NdotV,
      0.0,
      0.0,
      0.0,
      perceptualRoughness,
      metallic,
      specularEnvironmentR0,
      specularEnvironmentR90,
      alphaRoughness,
      diffuseColor,
      specularColor,
      n,
      v
    );

#ifdef USE_LIGHTS
    PBRInfo_setAmbientLight(pbrInputs);
    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {
      if (i < lighting_uDirectionalLightCount) {
        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);
        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);
      }
    }
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {
      if (i < lighting_uPointLightCount) {
        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);
        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));
        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);
      }
    }
#endif
#ifdef USE_IBL
    color += getIBLContribution(pbrInputs, n, reflection);
#endif
#ifdef HAS_OCCLUSIONMAP
    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;
    color = mix(color, color * ao, u_OcclusionStrength);
#endif

#ifdef HAS_EMISSIVEMAP
    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;
    color += emissive;
#endif

#ifdef PBR_DEBUG





    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);
    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);
    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);
#endif

  }

  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);
}
`,hj={name:"pbr",vs:qpt,fs:Kpt,defines:{LIGHTING_FRAGMENT:1},dependencies:[uj]},Ypt=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,Jpt={name:"transform",vs:Ypt,fs:null},$S=class dj{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new dj(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(r=>r.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){let r=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==r),this.stateHash++}addShaderHook(e,r){r&&(e=Object.assign(r,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{vs:r="",fs:i="",defines:n={},inject:s={},varyings:a=[],bufferMode:o=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),h=this._getHash(r),p=this._getHash(i),m=c.map(b=>this._getHash(b.name)).sort(),f=a.map(b=>this._getHash(b)),g=Object.keys(n).sort(),_=Object.keys(s).sort(),w=[],S=[];for(let b of g)w.push(this._getHash(b)),w.push(this._getHash(n[b]));for(let b of _)S.push(this._getHash(b)),S.push(this._getHash(s[b]));let C="".concat(h,"/").concat(p,"D").concat(w.join("/"),"M").concat(m.join("/"),"I").concat(S.join("/"),"V").concat(f.join("/"),"H").concat(this.stateHash,"B").concat(o).concat(l?"T":"");if(!this._programCache[C]){let b=odt(this.gl,{vs:r,fs:i,modules:c,inject:s,defines:n,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[C]=new DV(this.gl,{hash:C,vs:b.vs,fs:b.fs,varyings:a,bufferMode:o}),this._getUniforms[C]=b.getUniforms||(P=>{}),this._useCounts[C]=0}return this._useCounts[C]++,this._programCache[C]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){let r=e.hash;this._useCounts[r]--,this._useCounts[r]===0&&(this._programCache[r].delete(),delete this._programCache[r],delete this._getUniforms[r],delete this._useCounts[r])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=new Array(this._defaultModules.length+e.length),i={},n=0;for(let s=0,a=this._defaultModules.length;s<a;++s){let o=this._defaultModules[s],l=o.name;r[n++]=o,i[l]=!0}for(let s=0,a=e.length;s<a;++s){let o=e[s],l=o.name;i[l]||(r[n++]=o,i[l]=!0)}return r.length=n,r}},Qpt={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function tmt(t,e,r){let i={},n=e.indices;for(let s in e.attributes){let a=e.attributes[s],o=emt(s,r);if(s==="indices")n=a;else if(a.constant)i[o]=a.value;else{let l=a.value,c=x({},a);delete c.value,i[o]=[new Di(t,l),c],imt(s,c)}}if(n){let s=n.value||n;jt(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');let a={size:1,isIndexed:n.isIndexed===void 0?!0:n.isIndexed};i.indices=[new Di(t,{data:s,target:34963}),a]}return i}function emt(t,e){let{attributeMap:r=Qpt}=e||{};return r&&r[t]||t}function imt(t,e){let r;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break;default:}switch(r){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break;default:}jt(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}var Mh=2,rmt=1e4,nmt="Model needs drawMode and vertexCount",aR=()=>{},smt={},Sd=class{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{id:r=Un("model")}=e;jt(Hy(t)),this.id=r,this.gl=t,this.id=e.id||Un("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(e)}initialize(t){this.props={},this.programManager=t.programManager||$S.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;let{program:e=null,vs:r,fs:i,modules:n,defines:s,inject:a,varyings:o,bufferMode:l,transpileToGLSL100:c}=t;this.programProps={program:e,vs:r,fs:i,modules:n,defines:s,inject:a,varyings:o,bufferMode:l,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=t.drawMode!==void 0?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},jt(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),nmt)}setProps(t){this._setModelProps(t)}delete(){for(let t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){let{program:e,vs:r,fs:i,modules:n,defines:s,inject:a,varyings:o,bufferMode:l,transpileToGLSL100:c}=t;this.programProps={program:e,vs:r,fs:i,modules:n,defines:s,inject:a,varyings:o,bufferMode:l,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return jt(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return jt(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=tmt(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Cd(t))return this;let e={};for(let r in t){let i=t[r];e[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(e),this}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();let e=this.programManager.getUniforms(this.program);return e?e(t):{}}updateModuleSettings(t){let e=this.getModuleUniforms(t||{});return this.setUniforms(e)}clear(t){return zS(this.program.gl,t),this}draw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();let{moduleSettings:e=null,framebuffer:r,uniforms:i={},attributes:n={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:o=this.vertexArray}=t;this.setAttributes(n),this.updateModuleSettings(e),this.setUniforms(i);let l;Qt.priority>=Mh&&(l=this._logDrawCallStart(Mh));let c=this.vertexArray.getDrawParams(),{isIndexed:h=c.isIndexed,indexType:p=c.indexType,indexOffset:m=c.indexOffset,vertexArrayInstanced:f=c.isInstanced}=this.props;f&&!this.isInstanced&&Qt.warn("Found instanced attributes on non-instanced model",this.id)();let{isInstanced:g,instanceCount:_}=this,{onBeforeRender:w=aR,onAfterRender:S=aR}=this.props;w(),this.program.setUniforms(this.uniforms);let C=this.program.draw(Object.assign(smt,t,{logPriority:l,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:o,transformFeedback:s,isIndexed:h,indexType:p,isInstanced:g,instanceCount:_,offset:h?m:0}));return S(),Qt.priority>=Mh&&this._logDrawCallEnd(l,o,r),C}transform(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{discard:e=!0,feedbackBuffers:r,unbindModels:i=[]}=t,{parameters:n}=t;r&&this._setFeedbackBuffers(r),e&&(n=Object.assign({},n,{35977:e})),i.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:n}))}finally{i.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Qt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{let{vs:e,fs:r,modules:i,inject:n,defines:s,varyings:a,bufferMode:o,transpileToGLSL100:l}=this.programProps;t=this.programManager.get({vs:e,fs:r,modules:i,inject:n,defines:s,varyings:a,bufferMode:o,transpileToGLSL100:l}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}jt(t instanceof DV,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new xht(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(let t in this.geometryBuffers){let e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof Di&&e.delete()}}_setAnimationProps(t){this.animated&&jt(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Cd(t))return this;let{gl:e}=this.program;return this.transformFeedback=this.transformFeedback||new NV(e,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){let e=t>3?0:rmt;if(!(Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),Qt.group(Mh,">>> DRAWING MODEL ".concat(this.id),{collapsed:Qt.level<=2})(),t}_logDrawCallEnd(t,e,r,i){if(t===void 0)return;let n=Aht({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:o}=HM({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:l,count:c}=HM({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});c>0&&Qt.log("MISSING UNIFORMS",Object.keys(l))(),o>0&&Qt.log("UNUSED UNIFORMS",Object.keys(a))();let h=Eht(this.vertexArray.configuration);Qt.table(t,n)(),Qt.table(t,s)(),Qt.table(t+1,h)(),i&&i.log({logLevel:Mh,message:"Rendered to ".concat(i.id)}),Qt.groupEnd(Mh)()}},amt=class{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}setupResources(t){for(let e of this.bindings)this._setupTransformFeedback(e,t)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{varyings:e}=this;return e.length>0&&(t=Object.assign({},t,{varyings:e})),t}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=e;return{attributes:Object.assign({},r,t.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){let{feedbackBuffers:e}=this.bindings[this.currentIndex],r=t?e[t]:null;return r?r instanceof Di?r:r.buffer:null}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{varyingName:e}=t,r=this.getBuffer(e);return r?r.getData():null}delete(){for(let t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&jt(Ue(this.gl))}_getFeedbackBuffers(t){let{sourceBuffers:e={}}=t,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(let i in this.feedbackMap){let n=this.feedbackMap[i];i in e&&(r[n]=i)}Object.assign(r,t.feedbackBuffers);for(let i in r){let n=r[i];if(typeof n=="string"){let s=e[n],{byteLength:a,usage:o,accessor:l}=s;r[i]=this._createNewBuffer(i,{byteLength:a,usage:o,accessor:l})}}return r}_setupBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{sourceBuffers:e=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);let r=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:e,feedbackBuffers:r})}_setupTransformFeedback(t,e){let{model:r}=e,{program:i}=r;t.transformFeedback=new NV(this.gl,{program:i,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){let{sourceBuffers:e,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:e,feedbackBuffers:r})}}_updateBinding(t,e){return t?(Object.assign(t.sourceBuffers,e.sourceBuffers),Object.assign(t.feedbackBuffers,e.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},e.sourceBuffers),feedbackBuffers:Object.assign({},e.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;let e=Object.assign({},t.sourceBuffers),r=Object.assign({},t.feedbackBuffers);for(let i in this.feedbackMap){let n=this.feedbackMap[i];e[i]=t.feedbackBuffers[n],r[n]=t.sourceBuffers[i],jt(r[n]instanceof Di)}return{sourceBuffers:e,feedbackBuffers:r}}_createNewBuffer(t,e){let r=new Di(this.gl,e);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}},omt="transform_uSampler_",kb="transform_uSize_",oR="transform_position";function lmt(t){let{vs:e,sourceTextureMap:r,targetTextureVarying:i,targetTexture:n}=t,s=Object.keys(r).length,a=null,o={},l=e,c={};if(s>0||i){let h=l.split(`
`),p=h.slice();if(h.forEach((m,f,g)=>{if(s>0){let _=pmt(m,r);if(_){let{updatedLine:w,inject:S}=_;p[f]=w,c=XC([c,S]),Object.assign(o,_.samplerTextureMap),s--}}i&&!a&&(a=dmt(m,i))}),i){jt(n);let m="".concat(kb).concat(i),f="uniform vec2 ".concat(m,`;
`),g="     vec2 ".concat(oR," = transform_getPos(").concat(m,`);
     gl_Position = vec4(`).concat(oR,`, 0, 1.);
`);c=XC([c,{"vs:#decl":f,"vs:#main-start":g}])}l=p.join(`
`)}return{vs:l,targetTextureType:a,inject:c,samplerTextureMap:o}}function cmt(t){let{sourceTextureMap:e,targetTextureVarying:r,targetTexture:i}=t,n={},s,a;r&&({width:s,height:a}=i,n["".concat(kb).concat(r)]=[s,a]);for(let o in e)({width:s,height:a}=e[o]),n["".concat(kb).concat(o)]=[s,a];return n}function umt(t){return GV(t,["attribute","in"])}function hmt(t){let e="".concat(omt).concat(t),r="".concat(kb).concat(t),i="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(r,";");return{samplerName:e,sizeName:r,uniformDeclerations:i}}function dmt(t,e){let r=GV(t,["varying","out"]);return r&&r.name===e?r.type:null}function pmt(t,e){let r={},i=umt(t);if(!i)return null;let{type:n,name:s}=i;if(s&&e[s]){let a="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:o,sizeName:l,uniformDeclerations:c}=hmt(s),h=gdt(n),p="  ".concat(n," ").concat(s," = transform_getInput(").concat(o,", ").concat(l,").").concat(h,`;
`);return r[o]=s,{updatedLine:a,inject:{"vs:#decl":c,"vs:#main-start":p},samplerTextureMap:r}}return null}var mmt={10241:9728,10240:9728,10242:33071,10243:33071},fmt="transform_output",gmt=class{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(e),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=this._processVertexShader(t);return Object.assign({},t,e)}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{sourceBuffers:e,sourceTextures:r,framebuffer:i,targetTexture:n}=this.bindings[this.currentIndex],s=Object.assign({},e,t.attributes),a=Object.assign({},t.uniforms),o=Object.assign({},t.parameters),l=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(let h in this.samplerTextureMap){let p=this.samplerTextureMap[h];a[h]=r[p]}this._setSourceTextureParameters();let c=cmt({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n});Object.assign(a,c)}return this.hasTargetTexture&&(l=!1,o.viewport=[0,0,i.width,i.height]),{attributes:s,framebuffer:i,uniforms:a,discard:l,parameters:o}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){let{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{framebuffer:e}=this.bindings[this.currentIndex],r=Wy(e);if(!t)return r;let i=r.constructor,n=vdt(this.targetTextureType),s=new i(r.length*n/4),a=0;for(let o=0;o<r.length;o+=4)for(let l=0;l<n;l++)s[a++]=r[o+l];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{_targetTextureVarying:e,_swapTexture:r}=t;this._swapTexture=r,this.targetTextureVarying=e,this.hasTargetTexture=e,this._setupTextures(t)}_createTargetTexture(t){let{sourceTextures:e,textureOrReference:r}=t;if(r instanceof Kr)return r;let i=e[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{sourceBuffers:e,_sourceTextures:r={},_targetTexture:i}=t,n=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:e,sourceTextures:r,targetTexture:n}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if(typeof t!="number"||this.elementCount>=t)return;let e=new Float32Array(t);e.forEach((r,i,n)=>{n[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:e}):this.elementIDBuffer=new Di(this.gl,{data:e,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){let{sourceTextures:e,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:e,targetTexture:r})}}_updateBinding(t,e){let{sourceBuffers:r,sourceTextures:i,targetTexture:n}=e;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,i),Object.assign(t.sourceBuffers,r),n){t.targetTexture=n;let{width:s,height:a}=n,{framebuffer:o}=t;o?(o.update({attachments:{36064:n},resizeAttachments:!1}),o.resize({width:s,height:a})):t.framebuffer=new Fr(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{36064:n}})}return t}_setSourceTextureParameters(){let t=this.currentIndex,{sourceTextures:e}=this.bindings[t];for(let r in e)e[r].setParameters(mmt)}_swapTextures(t){if(!this._swapTexture)return null;let e=Object.assign({},t.sourceTextures);e[this._swapTexture]=t.targetTexture;let r=t.sourceTextures[this._swapTexture];return{sourceTextures:e,targetTexture:r}}_createNewTexture(t){let e=put(t,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=e,e}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{sourceTextures:e,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:n,targetTextureType:s,inject:a,samplerTextureMap:o}=lmt({vs:t.vs,sourceTextureMap:e,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),l=XC([t.inject||{},a]);this.targetTextureType=s,this.samplerTextureMap=o;let c=t._fs||WV({version:MV(i),input:this.targetTextureVarying,inputType:s,output:fmt}),h=this.hasSourceTextures||this.targetTextureVarying?[Jpt].concat(t.modules||[]):t.modules;return{vs:i,fs:c,modules:h,uniforms:n,inject:l}}},XS=class{static isSupported(t){return Ue(t)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(e),Object.seal(this)}delete(){let{model:t,bufferTransform:e,textureTransform:r}=this;t&&t.delete(),e&&e.delete(),r&&r.delete()}run(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{clearRenderTarget:e=!0}=t,r=this._updateDrawOptions(t);e&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let t=!1,e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let r of e)t=t||r.swap();jt(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let r of e){let i=r.getData(t);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);let e=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let r of e)r.update(t)}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{gl:e}=this;this._buildResourceTransforms(e,t),t=this._updateModelProps(t),this.model=new Sd(e,Object.assign({},t,{fs:t.fs||WV({version:MV(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let e=Object.assign({},t),r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let i of r)e=i.updateModelProps(e);return e}_buildResourceTransforms(t,e){vmt(e)&&(this.bufferTransform=new amt(t,e)),_mt(e)&&(this.textureTransform=new gmt(t,e)),jt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let e=Object.assign({},t),r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let i of r)e=Object.assign(e,i.getDrawOptions(e));return e}};function vmt(t){return!!(!Cd(t.feedbackBuffers)||!Cd(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function _mt(t){return!!(!Cd(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}var lR={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},ql=class{static get DRAW_MODE(){return lR}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:e=Un("geometry"),drawMode:r=lR.TRIANGLES,attributes:i={},indices:n=null,vertexCount:s=null}=t;this.id=e,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,n),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?x({indices:this.indices},this.attributes):this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,e){e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e);for(let r in t){let i=t[r];i=ArrayBuffer.isView(i)?{value:i}:i,jt(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(jt(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,e){if(e)return e.value.length;let r=1/0;for(let i in t){let n=t[i],{value:s,size:a,constant:o}=n;!o&&s&&a>=1&&(r=Math.min(r,s.length/a))}return jt(Number.isFinite(r)),r}},bmt={x:[2,0,1],y:[0,1,2],z:[1,2,0]},pj=class extends ql{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:e=Un("truncated-code-geometry")}=t,{indices:r,attributes:i}=ymt(t);super(Q(x({},t),{id:e,indices:r,attributes:x(x({},i),t.attributes)}))}};function ymt(t){let{bottomRadius:e=0,topRadius:r=0,height:i=1,nradial:n=10,nvertical:s=10,verticalAxis:a="y",topCap:o=!1,bottomCap:l=!1}=t,c=(o?2:0)+(l?2:0),h=(n+1)*(s+1+c),p=Math.atan2(e-r,i),m=Math.sin,f=Math.cos,g=Math.PI,_=f(p),w=m(p),S=o?-2:0,C=s+(l?2:0),b=n+1,P=new Uint16Array(n*(s+c)*6),L=bmt[a],H=new Float32Array(h*3),M=new Float32Array(h*3),E=new Float32Array(h*2),it=0,X=0;for(let W=S;W<=C;W++){let J=W/s,lt=i*J,Y;W<0?(lt=0,J=1,Y=e):W>s?(lt=i,J=1,Y=r):Y=e+(r-e)*(W/s),(W===-2||W===s+2)&&(Y=0,J=0),lt-=i/2;for(let nt=0;nt<b;nt++){let ot=m(nt*g*2/n),xt=f(nt*g*2/n);H[it+L[0]]=ot*Y,H[it+L[1]]=lt,H[it+L[2]]=xt*Y,M[it+L[0]]=W<0||W>s?0:ot*_,M[it+L[1]]=W<0?-1:W>s?1:w,M[it+L[2]]=W<0||W>s?0:xt*_,E[X+0]=nt/n,E[X+1]=J,X+=2,it+=3}}for(let W=0;W<s+c;W++)for(let J=0;J<n;J++){let lt=(W*n+J)*6;P[lt+0]=b*(W+0)+0+J,P[lt+1]=b*(W+0)+1+J,P[lt+2]=b*(W+1)+1+J,P[lt+3]=b*(W+0)+0+J,P[lt+4]=b*(W+1)+1+J,P[lt+5]=b*(W+1)+0+J}return{indices:P,attributes:{POSITION:{size:3,value:H},NORMAL:{size:3,value:M},TEXCOORD_0:{size:2,value:E}}}}var wmt=class extends pj{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:e=Un("cone-geometry"),radius:r=1,cap:i=!0}=t;super(Q(x({},t),{id:e,topRadius:0,topCap:!!i,bottomCap:!!i,bottomRadius:r}))}},xmt=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),Cmt=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),kmt=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),Amt=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),Smt={POSITION:{size:3,value:new Float32Array(Cmt)},NORMAL:{size:3,value:new Float32Array(kmt)},TEXCOORD_0:{size:2,value:new Float32Array(Amt)}},Emt=class extends ql{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:e=Un("cube-geometry")}=t;super(Q(x({},t),{id:e,indices:{size:1,value:new Uint16Array(xmt)},attributes:x(x({},Smt),t.attributes)}))}},Tmt=class extends pj{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:e=Un("cylinder-geometry"),radius:r=1}=t;super(Q(x({},t),{id:e,bottomRadius:r,topRadius:r}))}},Imt=class extends ql{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:e=Un("sphere-geometry")}=t,{indices:r,attributes:i}=Omt(t);super(Q(x({},t),{id:e,indices:r,attributes:x(x({},i),t.attributes)}))}};function Omt(t){let{nlat:e=10,nlong:r=10}=t,{radius:i=1}=t,n=Math.PI-0,s=2*Math.PI-0,a=(e+1)*(r+1);if(typeof i=="number"){let f=i;i=(g,_,w,S,C)=>f}let o=new Float32Array(a*3),l=new Float32Array(a*3),c=new Float32Array(a*2),h=a>65535?Uint32Array:Uint16Array,p=new h(e*r*6);for(let f=0;f<=e;f++)for(let g=0;g<=r;g++){let _=g/r,w=f/e,S=g+f*(r+1),C=S*2,b=S*3,P=s*_,L=n*w,H=Math.sin(P),M=Math.cos(P),E=Math.sin(L),it=Math.cos(L),X=M*E,W=it,J=H*E,lt=i(X,W,J,_,w);o[b+0]=lt*X,o[b+1]=lt*W,o[b+2]=lt*J,l[b+0]=X,l[b+1]=W,l[b+2]=J,c[C+0]=_,c[C+1]=1-w}let m=r+1;for(let f=0;f<r;f++)for(let g=0;g<e;g++){let _=(f*e+g)*6;p[_+0]=g*m+f,p[_+1]=g*m+f+1,p[_+2]=(g+1)*m+f,p[_+3]=(g+1)*m+f,p[_+4]=g*m+f+1,p[_+5]=(g+1)*m+f+1}return{indices:{size:1,value:p},attributes:{POSITION:{size:3,value:o},NORMAL:{size:3,value:l},TEXCOORD_0:{size:2,value:c}}}}var Pmt=1,Mmt=1,mj=class{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){let{delay:e=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:n=1}=t,s=Pmt++,a={time:0,delay:e,duration:r,rate:i,repeat:n};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(t){this.channels.delete(t);for(let[e,r]of this.animations)r.channel===t&&this.detachAnimation(e)}isFinished(t){let e=this.channels.get(t);return e===void 0?!1:this.time>=e.delay+e.duration*e.repeat}getTime(t){if(t===void 0)return this.time;let e=this.channels.get(t);return e===void 0?-1:e.time}setTime(t){this.time=Math.max(0,t);let e=this.channels.values();for(let i of e)this._setChannelTime(i,this.time);let r=this.animations.values();for(let i of r){let{animation:n,channel:s}=i;n.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){let r=Mmt++;return this.animations.set(r,{animation:t,channel:e}),t.setTime(this.getTime(e)),r}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){let r=e-t.delay,i=t.duration*t.repeat;r>=i?t.time=t.duration*t.rate:(t.time=Math.max(0,r)%t.duration,t.time*=t.rate)}},fj="#define SMOOTH_EDGE_RADIUS 0.5",Rmt=`
`.concat(fj,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),Bmt=`
`.concat(fj,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),Dmt={name:"geometry",vs:Rmt,fs:Bmt},ui={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ui,"IDENTITY",{get:()=>(Ke.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});var Ha={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ab={common:0,meters:1,pixels:2},cR={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Gf={DRAW:"draw",MASK:"mask"},Lmt=Object.keys(ui).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(ui[t],";")).join(""),Nmt=Object.keys(Ha).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Ha[t],";")).join(""),Fmt=Object.keys(Ab).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(Ab[t],";")).join(""),zmt="".concat(Lmt,`
`).concat(Nmt,`
`).concat(Fmt,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}

//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function Vmt(t,e){if(t===e)return!0;if(Array.isArray(t)){let r=t.length;if(!e||e.length!==r)return!1;for(let i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}return!1}function Zy(t){let e={},r;return i=>{for(let n in i)if(!Vmt(i[n],e[n])){r=t(i),e=i;break}return r}}var uR=[0,0,0,0],jmt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],gj=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Umt=[0,0,0],vj=[0,0,0],Hmt=Zy(Zmt);function _j(t,e,r=vj){r.length<3&&(r=[r[0],r[1],0]);let i=r,n,s=!0;switch(e===ui.LNGLAT_OFFSETS||e===ui.METER_OFFSETS?n=r:n=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Ha.WEB_MERCATOR:(e===ui.LNGLAT||e===ui.CARTESIAN)&&(n=[0,0,0],s=!1);break;case Ha.WEB_MERCATOR_AUTO_OFFSET:e===ui.LNGLAT?i=n:e===ui.CARTESIAN&&(i=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],n=t.unprojectPosition(i),i[0]-=r[0],i[1]-=r[1],i[2]-=r[2]);break;case Ha.IDENTITY:i=t.position.map(Math.fround),i[2]=i[2]||0;break;case Ha.GLOBE:s=!1,n=null;break;default:s=!1}return{geospatialOrigin:n,shaderCoordinateOrigin:i,offsetMode:s}}function Gmt(t,e,r){let{viewMatrixUncentered:i,projectionMatrix:n}=t,{viewMatrix:s,viewProjectionMatrix:a}=t,o=uR,l=uR,c=t.cameraPosition,{geospatialOrigin:h,shaderCoordinateOrigin:p,offsetMode:m}=_j(t,e,r);return m&&(l=t.projectPosition(h||p),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,o=Hf([],l,a),s=i||s,a=bu([],n,s),a=bu([],a,jmt)),{viewMatrix:s,viewProjectionMatrix:a,projectionCenter:o,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:p,geospatialOrigin:h}}function Wmt({viewport:t,devicePixelRatio:e=1,modelMatrix:r=null,coordinateSystem:i=ui.DEFAULT,coordinateOrigin:n=vj,autoWrapLongitude:s=!1}){i===ui.DEFAULT&&(i=t.isGeospatial?ui.LNGLAT:ui.CARTESIAN);let a=Hmt({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:n});return a.project_uWrapLongitude=s,a.project_uModelMatrix=r||gj,a}function Zmt({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i}){let{projectionCenter:n,viewProjectionMatrix:s,originCommon:a,cameraPosCommon:o,shaderCoordinateOrigin:l,geospatialOrigin:c}=Gmt(t,r,i),h=t.getDistanceScales(),p=[t.width*e,t.height*e],m=Hf([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,f={project_uCoordinateSystem:r,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:a.slice(0,3),project_uCenter:n,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:p,project_uDevicePixelRatio:e,project_uFocalDistance:m,project_uCommonUnitsPerMeter:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit:h.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:Umt,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:gj,project_uCameraPosition:o};if(c){let g=t.getDistanceScales(c);switch(r){case ui.METER_OFFSETS:f.project_uCommonUnitsPerWorldUnit=g.unitsPerMeter,f.project_uCommonUnitsPerWorldUnit2=g.unitsPerMeter2;break;case ui.LNGLAT:case ui.LNGLAT_OFFSETS:t._pseudoMeters||(f.project_uCommonUnitsPerMeter=g.unitsPerMeter),f.project_uCommonUnitsPerWorldUnit=g.unitsPerDegree,f.project_uCommonUnitsPerWorldUnit2=g.unitsPerDegree2;break;case ui.CARTESIAN:f.project_uCommonUnitsPerWorldUnit=[1,1,g.unitsPerMeter[2]],f.project_uCommonUnitsPerWorldUnit2=[0,0,g.unitsPerMeter2[2]];break;default:break}}return f}var $mt={};function Xmt(t=$mt){return"viewport"in t?Wmt(t):{}}var qS={name:"project",dependencies:[ydt,Dmt],vs:zmt,getUniforms:Xmt},qmt=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,$y={name:"project32",dependencies:[qS],vs:qmt};function Kmt(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function od(t,e){let r=Hf([],e,t);return nj(r,r,1/r[3]),r}function hR(t,e){let r=t%e;return r<0?e+r:r}function JC(t,e,r){return t<e?e:t>r?r:t}function Ymt(t){return Math.log(t)*Math.LOG2E}var KS=Math.log2||Ymt;function Xo(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}var ca=Math.PI,bj=ca/4,da=ca/180,QC=180/ca,nf=512,tk=4003e4,Pv=85.051129,Jmt=1.5;function Qmt(t){return KS(t)}function Sb(t){let[e,r]=t;Xo(Number.isFinite(e)),Xo(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");let i=e*da,n=r*da,s=nf*(i+ca)/(2*ca),a=nf*(ca+Math.log(Math.tan(bj+n*.5)))/(2*ca);return[s,a]}function Ed(t){let[e,r]=t,i=e/nf*(2*ca)-ca,n=2*(Math.atan(Math.exp(r/nf*(2*ca)-ca))-bj);return[i*QC,n*QC]}function tft(t){let{latitude:e}=t;Xo(Number.isFinite(e));let r=Math.cos(e*da);return Qmt(tk*r)-9}function ek(t){let{latitude:e,longitude:r,highPrecision:i=!1}=t;Xo(Number.isFinite(e)&&Number.isFinite(r));let n=nf,s=Math.cos(e*da),a=n/360,o=a/s,l=n/tk/s,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[a,o,l],degreesPerUnit:[1/a,1/o,1/l]};if(i){let h=da*Math.tan(e*da)/s,p=a*h/2,m=n/tk*h,f=m/o*l;c.unitsPerDegree2=[0,p,m],c.unitsPerMeter2=[f,0,f]}return c}function yj(t,e){let[r,i,n]=t,[s,a,o]=e,{unitsPerMeter:l,unitsPerMeter2:c}=ek({longitude:r,latitude:i,highPrecision:!0}),h=Sb(t);h[0]+=s*(l[0]+c[0]*a),h[1]+=a*(l[1]+c[1]*a);let p=Ed(h),m=(n||0)+(o||0);return Number.isFinite(n)||Number.isFinite(o)?[p[0],p[1],m]:p}function eft(t){let{height:e,pitch:r,bearing:i,altitude:n,scale:s,center:a}=t,o=Kmt();Cb(o,o,[0,0,-n]),ij(o,o,-r*da),rj(o,o,i*da);let l=s/e;return ZS(o,o,[l,l,l]),a&&Cb(o,o,Ldt([],a)),o}function ift(t){let{width:e,height:r,altitude:i,pitch:n=0,offset:s,center:a,scale:o,nearZMultiplier:l=1,farZMultiplier:c=1}=t,{fovy:h=Eb(Jmt)}=t;i!==void 0&&(h=Eb(i));let p=h*da,m=n*da,f=YS(h),g=f;a&&(g+=a[2]*o/Math.cos(m)/r);let _=p*(.5+(s?s[1]:0)/r),w=Math.sin(_)*g/Math.sin(JC(Math.PI/2-m-_,.01,Math.PI-.01)),S=Math.sin(m)*w+g,C=g*10,b=Math.min(S*c,C);return{fov:p,aspect:e/r,focalDistance:f,near:l,far:b}}function Eb(t){return 2*Math.atan(.5/t)*QC}function YS(t){return .5/Math.tan(.5*t*da)}function wj(t,e){let[r,i,n=0]=t;return Xo(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(n)),od(e,[r,i,n,1])}function Wf(t,e,r=0){let[i,n,s]=t;if(Xo(Number.isFinite(i)&&Number.isFinite(n),"invalid pixel coordinate"),Number.isFinite(s))return od(e,[i,n,s,1]);let a=od(e,[i,n,0,1]),o=od(e,[i,n,1,1]),l=a[2],c=o[2],h=l===c?0:((r||0)-l)/(c-l);return qV([],a,o,h)}function xj(t){let{width:e,height:r,bounds:i,minExtent:n=0,maxZoom:s=24,offset:a=[0,0]}=t,[[o,l],[c,h]]=i,p=rft(t.padding),m=Sb([o,JC(h,-Pv,Pv)]),f=Sb([c,JC(l,-Pv,Pv)]),g=[Math.max(Math.abs(f[0]-m[0]),n),Math.max(Math.abs(f[1]-m[1]),n)],_=[e-p.left-p.right-Math.abs(a[0])*2,r-p.top-p.bottom-Math.abs(a[1])*2];Xo(_[0]>0&&_[1]>0);let w=_[0]/g[0],S=_[1]/g[1],C=(p.right-p.left)/2/w,b=(p.top-p.bottom)/2/S,P=[(f[0]+m[0])/2+C,(f[1]+m[1])/2+b],L=Ed(P),H=Math.min(s,KS(Math.abs(Math.min(w,S))));return Xo(Number.isFinite(H)),{longitude:L[0],latitude:L[1],zoom:H}}function rft(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Xo(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}var dR=Math.PI/180;function nft(t,e=0){let{width:r,height:i,unproject:n}=t,s={targetZ:e},a=n([0,i],s),o=n([r,i],s),l,c,h=t.fovy?.5*t.fovy*dR:Math.atan(.5/t.altitude),p=(90-t.pitch)*dR;return h>p-.01?(l=pR(t,0,e),c=pR(t,r,e)):(l=n([0,0],s),c=n([r,0],s)),[a,o,c,l]}function pR(t,e,r){let{pixelUnprojectionMatrix:i}=t,n=od(i,[e,0,1,1]),s=od(i,[e,t.height,1,1]),a=(r*t.distanceScales.unitsPerMeter[2]-n[2])/(s[2]-n[2]),o=qV([],n,s,a),l=Ed(o);return l.push(r),l}var mR=512;function sft(t){let{width:e,height:r,pitch:i=0}=t,{longitude:n,latitude:s,zoom:a,bearing:o=0}=t;(n<-180||n>180)&&(n=hR(n+180,360)-180),(o<-180||o>180)&&(o=hR(o+180,360)-180);let l=KS(r/mR);if(a<=l)a=l,s=0;else{let c=r/2/Math.pow(2,a),h=Ed([0,c])[1];if(s<h)s=h;else{let p=Ed([0,mR-c])[1];s>p&&(s=p)}}return{width:e,height:r,longitude:n,latitude:s,zoom:a,pitch:i,bearing:o}}var aft=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,oft=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,lft=Zy(pft),cft=Zy(mft),uft=[0,0,0,1],hft=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function dft(t,e){let[r,i,n]=t,s=Wf([r,i,n],e);return Number.isFinite(n)?s:[s[0],s[1],0]}function pft({viewport:t,center:e}){return new gt(t.viewProjectionMatrix).invert().transform(e)}function mft({viewport:t,shadowMatrices:e}){let r=[],i=t.pixelUnprojectionMatrix,n=t.isGeospatial?void 0:1,s=[[0,0,n],[t.width,0,n],[0,t.height,n],[t.width,t.height,n],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(a=>dft(a,i));for(let a of e){let o=a.clone().translate(new zn(t.center).negate()),l=s.map(h=>o.transform(h)),c=new gt().ortho({left:Math.min(...l.map(h=>h[0])),right:Math.max(...l.map(h=>h[0])),bottom:Math.min(...l.map(h=>h[1])),top:Math.max(...l.map(h=>h[1])),near:Math.min(...l.map(h=>-h[2])),far:Math.max(...l.map(h=>-h[2]))});r.push(c.multiplyRight(a))}return r}function fft(t,e){let{shadowEnabled:r=!0}=t;if(!r||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};let i={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||uft,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},n=lft({viewport:t.viewport,center:e.project_uCenter}),s=[],a=cft({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let o=0;o<t.shadowMatrices.length;o++){let l=a[o],c=l.clone().translate(new zn(t.viewport.center).negate());e.project_uCoordinateSystem===ui.LNGLAT&&e.project_uProjectionMode===Ha.WEB_MERCATOR?(a[o]=c,s[o]=n):(a[o]=l.clone().multiplyRight(hft),s[o]=c.transform(n))}for(let o=0;o<a.length;o++)i["shadow_uViewProjectionMatrices[".concat(o,"]")]=a[o],i["shadow_uProjectCenters[".concat(o,"]")]=s[o],t.shadowMaps&&t.shadowMaps.length>0?i["shadow_uShadowMap".concat(o)]=t.shadowMaps[o]:i["shadow_uShadowMap".concat(o)]=t.dummyShadowMap;return i}var n1={name:"shadow",dependencies:[qS],vs:aft,fs:oft,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?fft(t,e):{}},Xy=x({inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},Hpt),gft=[qS],vft=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function _ft(t){let e=$S.getDefaultProgramManager(t);for(let r of gft)e.addDefaultModule(r);for(let r of vft)e.addShaderHook(r);return e}var bft=[255,255,255],yft=1,wft=0,Cj=class{constructor(t={}){k(this,"id",void 0),k(this,"color",void 0),k(this,"intensity",void 0),k(this,"type","ambient");let{color:e=bft}=t,{intensity:r=yft}=t;this.id=t.id||"ambient-".concat(wft++),this.color=e,this.intensity=r}},xft=[255,255,255],Cft=1,kft=[0,0,-1],Aft=0,fR=class{constructor(t={}){k(this,"id",void 0),k(this,"color",void 0),k(this,"intensity",void 0),k(this,"type","directional"),k(this,"direction",void 0),k(this,"shadow",void 0);let{color:e=xft}=t,{intensity:r=Cft}=t,{direction:i=kft}=t,{_shadow:n=!1}=t;this.id=t.id||"directional-".concat(Aft++),this.color=e,this.intensity=r,this.type="directional",this.direction=new zn(i).normalize().toArray(),this.shadow=n}getProjectedLight(t){return this}},Sft=class{constructor(t,e={id:"pass"}){k(this,"id",void 0),k(this,"gl",void 0),k(this,"props",void 0);let{id:r}=e;this.id=r,this.gl=t,this.props=x({},e)}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}},qy=class extends Sft{constructor(...t){super(...t),k(this,"_lastRenderIndex",-1)}render(t){let e=this.gl;return $o(e,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){let{target:e,moduleParameters:r,viewports:i,views:n,onViewportActive:s,clearStack:a=!0,clearCanvas:o=!0}=t;t.pass=t.pass||"unknown";let l=this.gl;o&&Tft(l),a&&(this._lastRenderIndex=-1);let c=[];for(let h of i){let p=n&&n[h.id];s(h);let m=this._getDrawLayerParams(h,t),f=h.subViewports||[h];for(let g of f){let _=this._drawLayersInViewport(l,{target:e,moduleParameters:r,viewport:g,view:p,pass:t.pass,layers:t.layers},m);c.push(_)}}return c}_getDrawLayerParams(t,{layers:e,pass:r,layerFilter:i,cullRect:n,effects:s,moduleParameters:a}){let o=[],l=kj(this._lastRenderIndex+1),c={layer:e[0],viewport:t,isPicking:r.startsWith("picking"),renderPass:r,cullRect:n},h={};for(let p=0;p<e.length;p++){let m=e[p],f=this._shouldDrawLayer(m,c,i,h),g={shouldDrawLayer:f};f&&(g.layerRenderIndex=l(m,f),g.moduleParameters=this._getModuleParameters(m,s,r,a),g.layerParameters=this.getLayerParameters(m,p,t)),o[p]=g}return o}_drawLayersInViewport(t,{layers:e,moduleParameters:r,pass:i,target:n,viewport:s,view:a},o){let l=Eft(t,{moduleParameters:r,target:n,viewport:s});if(a&&a.props.clear){let h=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;Ns(t,{scissorTest:!0,scissor:l},()=>zS(t,h))}let c={totalCount:e.length,visibleCount:0,compositeCount:0,pickableCount:0};$o(t,{viewport:l});for(let h=0;h<e.length;h++){let p=e[h],{shouldDrawLayer:m,layerRenderIndex:f,moduleParameters:g,layerParameters:_}=o[h];if(m&&p.props.pickable&&c.pickableCount++,p.isComposite)c.compositeCount++;else if(m){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,f),g.viewport=s;try{p._drawLayer({moduleParameters:g,uniforms:{layerIndex:f},parameters:_})}catch(w){p.raiseError(w,"drawing ".concat(p," to ").concat(i))}}}return c}shouldDrawLayer(t){return!0}getModuleParameters(t,e){return null}getLayerParameters(t,e,r){return t.props.parameters}_shouldDrawLayer(t,e,r,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;e.layer=t;let n=t.parent;for(;n;){if(!n.props.visible||!n.filterSubLayer(e))return!1;e.layer=n,n=n.parent}if(r){let s=e.layer.id;if(s in i||(i[s]=r(e)),!i[s])return!1}return t.activateViewport(e.viewport),!0}_getModuleParameters(t,e,r,i){var n;let s=Object.assign(Object.create(((n=t.internalState)===null||n===void 0?void 0:n.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:xd(this.gl)});if(e)for(let o of e){var a;Object.assign(s,(a=o.getModuleParameters)===null||a===void 0?void 0:a.call(o,t))}return Object.assign(s,this.getModuleParameters(t,e),i)}};function kj(t=0,e={}){let r={},i=(n,s)=>{let a=n.props._offset,o=n.id,l=n.parent&&n.parent.id,c;if(l&&!(l in e)&&i(n.parent,!1),l in r){let h=r[l]=r[l]||kj(e[l],e);c=h(n,s),r[o]=h}else Number.isFinite(a)?(c=a+(e[l]||0),r[o]=null):c=t;return s&&c>=t&&(t=c+1),e[o]=c,c};return i}function Eft(t,{moduleParameters:e,target:r,viewport:i}){let n=r&&r.id!=="default-framebuffer",s=e&&e.devicePixelRatio||xd(t),a=n?r.height:t.drawingBufferHeight,o=i;return[o.x*s,a-(o.y+o.height)*s,o.width*s,o.height*s]}function Tft(t){let e=t.drawingBufferWidth,r=t.drawingBufferHeight;$o(t,{viewport:[0,0,e,r]}),t.clear(16640)}var Ift=class extends qy{constructor(t,e){super(t,e),k(this,"shadowMap",void 0),k(this,"depthBuffer",void 0),k(this,"fbo",void 0),this.shadowMap=new Kr(t,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new id(t,{format:33189,width:1,height:1}),this.fbo=new Fr(t,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(t){let e=this.fbo;Ns(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{let r=t.viewports[0],i=xd(this.gl),n=r.width*i,s=r.height*i;(n!==e.width||s!==e.height)&&e.resize({width:n,height:s}),super.render(Q(x({},t),{target:e,pass:"shadow"}))})}shouldDrawLayer(t){return t.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}},Oft={color:[255,255,255],intensity:1},gR=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Pft=[0,0,0,200/255],JS=class{constructor(t={}){k(this,"id","lighting-effect"),k(this,"props",null),k(this,"shadowColor",Pft),k(this,"shadow",void 0),k(this,"ambientLight",null),k(this,"directionalLights",[]),k(this,"pointLights",[]),k(this,"shadowPasses",[]),k(this,"shadowMaps",[]),k(this,"dummyShadowMap",null),k(this,"programManager",void 0),k(this,"shadowMatrices",void 0);for(let e in t){let r=t[e];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break;default:}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(e=>e.shadow)}preRender(t,{layers:e,layerFilter:r,viewports:i,onViewportActive:n,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(t),this.programManager||(this.programManager=$S.getDefaultProgramManager(t),n1&&this.programManager.addDefaultModule(n1)),this.dummyShadowMap||(this.dummyShadowMap=new Kr(t,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:e,layerFilter:r,viewports:i,onViewportActive:n,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){let e=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return e.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:t})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:t}))},e}cleanup(){for(let t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(n1),this.programManager=null)}_calculateMatrices(){let t=[];for(let e of this.directionalLights){let r=new gt().lookAt({eye:new zn(e.direction).negate()});t.push(r)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){let r=new Ift(t);this.shadowPasses[e]=r,this.shadowMaps[e]=r.shadowMap}}_applyDefaultLights(){let{ambientLight:t,pointLights:e,directionalLights:r}=this;!t&&e.length===0&&r.length===0&&(this.ambientLight=new Cj(Oft),this.directionalLights.push(new fR(gR[0]),new fR(gR[1])))}},Mft=class{constructor(t={}){k(this,"_pool",[]),k(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,e,{size:r=1,type:i,padding:n=0,copy:s=!1,initialize:a=!1,maxCount:o}){let l=i||t&&t.constructor||Float32Array,c=e*r+n;if(ArrayBuffer.isView(t)){if(c<=t.length)return t;if(c*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new l(t.buffer,0,c)}let h=1/0;o&&(h=o*r+n);let p=this._allocate(l,c,a,h);return t&&s?p.set(t):a||p.fill(0,0,4),this._release(t),p}release(t){this._release(t)}_allocate(t,e,r,i){let n=Math.max(Math.ceil(e*this.opts.overAlloc),1);n>i&&(n=i);let s=this._pool,a=t.BYTES_PER_ELEMENT*n,o=s.findIndex(l=>l.byteLength>=a);if(o>=0){let l=new t(s.splice(o,1)[0],0,n);return r&&l.fill(0),l}return new t(n)}_release(t){if(!ArrayBuffer.isView(t))return;let e=this._pool,{buffer:r}=t,{byteLength:i}=r,n=e.findIndex(s=>s.byteLength>=i);n<0?e.push(r):(n>0||e.length<this.opts.poolSize)&&e.splice(n,0,r),e.length>this.opts.poolSize&&e.shift()}},sf=new Mft;function vm(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Rft(t,e){let r=t%e;return r<0?e+r:r}function Bft(t){return[t[12],t[13],t[14]]}function Dft(t){return{left:Rh(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Rh(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Rh(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Rh(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Rh(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Rh(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}var vR=new zn;function Rh(t,e,r,i){vR.set(t,e,r);let n=vR.len();return{distance:i/n,normal:new zn(-t/n,-e/n,-r/n)}}function Lft(t){return t-Math.fround(t)}var tm;function s1(t,e){let{size:r=1,startIndex:i=0}=e,n=e.endIndex!==void 0?e.endIndex:t.length,s=(n-i)/r;tm=sf.allocate(tm,s,{type:Float32Array,size:r*2});let a=i,o=0;for(;a<n;){for(let l=0;l<r;l++){let c=t[a++];tm[o+l]=c,tm[o+l+r]=Lft(c)}o+=r*2}return tm.subarray(0,s*r*2)}var Nft=Math.PI/180,Fft=vm(),_R=[0,0,0],zft={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function Vft({width:t,height:e,orthographic:r,fovyRadians:i,focalDistance:n,padding:s,near:a,far:o}){let l=t/e,c=r?new gt().orthographic({fovy:i,aspect:l,focalDistance:n,near:a,far:o}):new gt().perspective({fovy:i,aspect:l,near:a,far:o});if(s){let{left:h=0,right:p=0,top:m=0,bottom:f=0}=s,g=Xr((h+t-p)/2,0,t)-t/2,_=Xr((m+e-f)/2,0,e)-e/2;c[8]-=g*2/t,c[9]+=_*2/e}return c}var op=class Aj{constructor(e={}){k(this,"id",void 0),k(this,"x",void 0),k(this,"y",void 0),k(this,"width",void 0),k(this,"height",void 0),k(this,"padding",void 0),k(this,"isGeospatial",void 0),k(this,"zoom",void 0),k(this,"focalDistance",void 0),k(this,"position",void 0),k(this,"modelMatrix",void 0),k(this,"distanceScales",void 0),k(this,"scale",void 0),k(this,"center",void 0),k(this,"cameraPosition",void 0),k(this,"projectionMatrix",void 0),k(this,"viewMatrix",void 0),k(this,"viewMatrixUncentered",void 0),k(this,"viewMatrixInverse",void 0),k(this,"viewProjectionMatrix",void 0),k(this,"pixelProjectionMatrix",void 0),k(this,"pixelUnprojectionMatrix",void 0),k(this,"resolution",void 0),k(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||zft,this.focalDistance=e.focalDistance||1,this.position=e.position||_R,this.modelMatrix=e.modelMatrix||null;let{longitude:r,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(r),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Ha.WEB_MERCATOR:Ha.WEB_MERCATOR_AUTO_OFFSET:Ha.IDENTITY}equals(e){return e instanceof Aj?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&Ad(e.projectionMatrix,this.projectionMatrix)&&Ad(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:r=!0}={}){let i=this.projectPosition(e),n=wj(i,this.pixelProjectionMatrix),[s,a]=n,o=r?a:this.height-a;return e.length===2?[s,o]:[s,o,n[2]]}unproject(e,{topLeft:r=!0,targetZ:i}={}){let[n,s,a]=e,o=r?s:this.height-s,l=i&&i*this.distanceScales.unitsPerMeter[2],c=Wf([n,o,a],this.pixelUnprojectionMatrix,l),[h,p,m]=this.unprojectPosition(c);return Number.isFinite(a)?[h,p,m]:Number.isFinite(i)?[h,p,i]:[h,p]}projectPosition(e){let[r,i]=this.projectFlat(e),n=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,i,n]}unprojectPosition(e){let[r,i]=this.unprojectFlat(e),n=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[r,i,n]}projectFlat(e){if(this.isGeospatial){let r=Sb(e);return r[1]=Xr(r[1],-318,830),r}return e}unprojectFlat(e){return this.isGeospatial?Ed(e):e}getBounds(e={}){let r={targetZ:e.z||0},i=this.unproject([0,0],r),n=this.unproject([this.width,0],r),s=this.unproject([0,this.height],r),a=this.unproject([this.width,this.height],r);return[Math.min(i[0],n[0],s[0],a[0]),Math.min(i[1],n[1],s[1],a[1]),Math.max(i[0],n[0],s[0],a[0]),Math.max(i[1],n[1],s[1],a[1])]}getDistanceScales(e){return e?ek({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:r,width:i=1,height:n=1}){return e<this.x+this.width&&this.x<e+i&&r<this.y+this.height&&this.y<r+n}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,Dft(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,r){return null}_initProps(e){let r=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=tft({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||ek({latitude:i,longitude:r}));let n=Math.pow(2,this.zoom);this.scale=n;let{position:s,modelMatrix:a}=e,o=_R;if(s&&(o=a?new gt(a).transformAsVector(s,[]):s),this.isGeospatial){let l=this.projectPosition([r,i,0]);this.center=new zn(o).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(o)}_initMatrices(e){let{viewMatrix:r=Fft,projectionMatrix:i=null,orthographic:n=!1,fovyRadians:s,fovy:a=75,near:o=.1,far:l=1e3,padding:c=null,focalDistance:h=1}=e;this.viewMatrixUncentered=r,this.viewMatrix=new gt().multiplyRight(r).translate(new zn(this.center).negate()),this.projectionMatrix=i||Vft({width:this.width,height:this.height,orthographic:n,fovyRadians:s||a*Nft,focalDistance:h,padding:c,near:o,far:l});let p=vm();bu(p,p,this.projectionMatrix),bu(p,p,this.viewMatrix),this.viewProjectionMatrix=p,this.viewMatrixInverse=YC([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=Bft(this.viewMatrixInverse);let m=vm(),f=vm();ZS(m,m,[this.width/2,-this.height/2,1]),Cb(m,m,[1,-1,0]),bu(f,m,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=YC(vm(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Ke.warn("Pixel project matrix not invertible")()}};k(op,"displayName","Viewport");var jft=512,Uft=4003e4,Hft=Math.PI/180;function bR(t){let e=Math.cos(t*Hft);return jft/Uft/e}var af=class ik extends op{constructor(e={}){let{latitude:r=0,longitude:i=0,zoom:n=0,pitch:s=0,bearing:a=0,nearZMultiplier:o=.1,farZMultiplier:l=1.01,orthographic:c=!1,projectionMatrix:h,repeat:p=!1,worldOffset:m=0,legacyMeterSizes:f=!1}=e,{width:g,height:_,altitude:w=1.5}=e,S=Math.pow(2,n);g=g||1,_=_||1;let C,b=null;h?(w=h[5]/2,C=Eb(w)):(e.fovy?(C=e.fovy,w=YS(C)):C=Eb(w),b=ift({width:g,height:_,pitch:s,fovy:C,nearZMultiplier:o,farZMultiplier:l}));let P=eft({height:_,pitch:s,bearing:a,scale:S,altitude:w});m&&(P=new gt().translate([512*m,0,0]).multiplyLeft(P)),super(Q(x(Q(x({},e),{width:g,height:_,viewMatrix:P,longitude:i,latitude:r,zoom:n}),b),{fovy:C,focalDistance:w})),k(this,"longitude",void 0),k(this,"latitude",void 0),k(this,"pitch",void 0),k(this,"bearing",void 0),k(this,"altitude",void 0),k(this,"fovy",void 0),k(this,"orthographic",void 0),k(this,"_subViewports",void 0),k(this,"_pseudoMeters",void 0),this.latitude=r,this.longitude=i,this.zoom=n,this.pitch=s,this.bearing=a,this.altitude=w,this.fovy=C,this.orthographic=c,this._subViewports=p?[]:null,this._pseudoMeters=f,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){let e=this.getBounds(),r=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let n=r;n<=i;n++){let s=n?new ik(Q(x({},this),{worldOffset:n})):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);let[r,i]=this.projectFlat(e),n=(e[2]||0)*bR(e[1]);return[r,i,n]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);let[r,i]=this.unprojectFlat(e),n=(e[2]||0)/bR(i);return[r,i,n]}addMetersToLngLat(e,r){return yj(e,r)}panByPosition(e,r){let i=Wf(r,this.pixelUnprojectionMatrix),n=this.projectFlat(e),s=xb([],n,XV([],i)),a=xb([],this.center,s),[o,l]=this.unprojectFlat(a);return{longitude:o,latitude:l}}getBounds(e={}){let r=nft(this,e.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(e,r={}){let{width:i,height:n}=this,{longitude:s,latitude:a,zoom:o}=xj(x({width:i,height:n,bounds:e},r));return new ik({width:i,height:n,longitude:s,latitude:a,zoom:o})}};k(af,"displayName","WebMercatorViewport");function a1(t,e,r=!1){let i=e.projectPosition(t);if(r&&e instanceof af){let[n,s,a=0]=t,o=e.getDistanceScales([n,s]);i[2]=a*o.unitsPerMeter[2]}return i}function Gft(t){let{viewport:e,modelMatrix:r,coordinateOrigin:i}=t,{coordinateSystem:n,fromCoordinateSystem:s,fromCoordinateOrigin:a}=t;return n===ui.DEFAULT&&(n=e.isGeospatial?ui.LNGLAT:ui.CARTESIAN),s===void 0&&(s=n),a===void 0&&(a=i),{viewport:e,coordinateSystem:n,coordinateOrigin:i,modelMatrix:r,fromCoordinateSystem:s,fromCoordinateOrigin:a}}function Sj(t,{viewport:e,modelMatrix:r,coordinateSystem:i,coordinateOrigin:n,offsetMode:s}){let[a,o,l=0]=t;switch(r&&([a,o,l]=Hf([],[a,o,l,1],r)),i){case ui.LNGLAT:return a1([a,o,l],e,s);case ui.LNGLAT_OFFSETS:return a1([a+n[0],o+n[1],l+(n[2]||0)],e,s);case ui.METER_OFFSETS:return a1(yj(n,[a,o,l]),e,s);case ui.CARTESIAN:default:return e.isGeospatial?[a+n[0],o+n[1],l+n[2]]:e.projectPosition([a,o,l])}}function Wft(t,e){let{viewport:r,coordinateSystem:i,coordinateOrigin:n,modelMatrix:s,fromCoordinateSystem:a,fromCoordinateOrigin:o}=Gft(e),{geospatialOrigin:l,shaderCoordinateOrigin:c,offsetMode:h}=_j(r,i,n),p=Sj(t,{viewport:r,modelMatrix:s,coordinateSystem:a,coordinateOrigin:o,offsetMode:h});if(h){let m=r.projectPosition(l||c);Hdt(p,p,m)}return p}var Zh={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Tb=Symbol.for("component"),ld=Symbol.for("asyncPropDefaults"),Ru=Symbol.for("asyncPropOriginal"),Ul=Symbol.for("asyncPropResolved");function QS(t,e=()=>!0){return Array.isArray(t)?Ej(t,e,[]):e(t)?[t]:[]}function Ej(t,e,r){let i=-1;for(;++i<t.length;){let n=t[i];Array.isArray(n)?Ej(n,e,r):e(n)&&r.push(n)}return r}function Zft({target:t,source:e,start:r=0,count:i=1}){let n=e.length,s=i*n,a=0;for(let o=r;a<n;a++)t[o++]=e[a];for(;a<s;)a<s-a?(t.copyWithin(r+a,r,r+a),a*=2):(t.copyWithin(r+a,r,r+s-a),a=s);return t}var $ft=class{constructor(t,e,r){k(this,"id",void 0),k(this,"context",void 0),k(this,"isLoaded",void 0),k(this,"persistent",void 0),k(this,"_loadCount",0),k(this,"_subscribers",new Set),k(this,"_data",void 0),k(this,"_loader",void 0),k(this,"_error",void 0),k(this,"_content",void 0),this.id=t,this.context=r,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,e){if(t===this._data&&!e)return;this._data=t;let r=++this._loadCount,i=t;typeof t=="string"&&(i=tf(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(n=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=n)}).catch(n=>{this._loadCount===r&&(this.isLoaded=!0,this._error=n||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t);for(let n of this._subscribers)n.onChange(this.getData())}},Xft=class{constructor({gl:t,protocol:e}){k(this,"protocol",void 0),k(this,"_context",void 0),k(this,"_resources",void 0),k(this,"_consumers",void 0),k(this,"_pruneRequest",void 0),this.protocol=e||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return t.startsWith(this.protocol)?!0:t in this._resources}add({resourceId:t,data:e,forceUpdate:r=!1,persistent:i=!0}){let n=this._resources[t];n?n.setData(e,r):(n=new $ft(t,e,this._context),this._resources[t]=n),n.persistent=i}remove(t){let e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){let e=this._consumers[t];if(e){for(let r in e){let i=e[r],n=this._resources[i.resourceId];n&&n.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:e,consumerId:r,requestId:i="default"}){let{_resources:n,protocol:s}=this;t.startsWith(s)&&(t=t.replace(s,""),n[t]||this.add({resourceId:t,data:null,persistent:!1}));let a=n[t];if(this._track(r,i,a,e),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(let t in this._resources)this._resources[t].delete()}_track(t,e,r,i){let n=this._consumers,s=n[t]=n[t]||{},a=s[e]||{},o=a.resourceId&&this._resources[a.resourceId];o&&(o.unsubscribe(a),this.prune()),r&&(s[e]=a,a.onChange=i,a.resourceId=r.id,r.subscribe(a))}_prune(){this._pruneRequest=null;for(let t of Object.keys(this._resources)){let e=this._resources[t];!e.persistent&&!e.inUse()&&(e.delete(),delete this._resources[t])}}},qft="layerManager.setLayers",Kft="layerManager.activateViewport",Yft=class{constructor(t,{deck:e,stats:r,viewport:i,timeline:n}={}){k(this,"layers",void 0),k(this,"context",void 0),k(this,"resourceManager",void 0),k(this,"_lastRenderedLayers",[]),k(this,"_needsRedraw",!1),k(this,"_needsUpdate",!1),k(this,"_nextLayers",null),k(this,"_debug",!1),k(this,"activateViewport",s=>{sn(Kft,this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new Xft({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:e,programManager:t&&_ft(t),stats:r||new PS({id:"deck.gl"}),viewport:i||new op({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:n||new mj,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(let t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(let r of this.layers){let i=r.getNeedsRedraw(t);e=e||i}return e}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(e=>t.find(r=>e.id.indexOf(r)===0)):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,e){sn(qft,this,e,t),this._lastRenderedLayers=t;let r=QS(t,Boolean);for(let i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){let t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,e,r){r.raiseError(e,"".concat(t," of ").concat(r))}_updateLayers(t,e){let r={};for(let s of t)r[s.id]?Ke.warn("Multiple old layers with same id ".concat(s.id))():r[s.id]=s;let i=[];this._updateSublayersRecursively(e,r,i),this._finalizeOldLayers(r);let n=!1;for(let s of i)if(s.hasUniformTransition()){n="Uniform transition in ".concat(s);break}this._needsUpdate=n,this.layers=i}_updateSublayersRecursively(t,e,r){for(let i of t){i.context=this.context;let n=e[i.id];n===null&&Ke.warn("Multiple new layers with same id ".concat(i.id))(),e[i.id]=null;let s=null;try{this._debug&&n!==i&&i.validateProps(),n?(this._transferLayerState(n,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),s=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}s&&this._updateSublayersRecursively(s,e,r)}}_finalizeOldLayers(t){for(let e in t){let r=t[e];r&&this._finalizeLayer(r)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=Zh.INITIALIZED}catch(e){this._handleError("initialization",e,t)}}_transferLayerState(t,e){e._transferState(t),e.lifecycle=Zh.MATCHED,e!==t&&(t.lifecycle=Zh.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(e){this._handleError("update",e,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=Zh.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=Zh.FINALIZED}catch(e){this._handleError("finalization",e,t)}}};function lp(t,e){if(t===e)return!0;if(!t||!e)return!1;for(let r in t){let i=t[r],n=e[r];if(!(i===n||Array.isArray(i)&&Array.isArray(n)&&lp(i,n)))return!1}return!0}var Jft=class{constructor(t){k(this,"width",void 0),k(this,"height",void 0),k(this,"views",void 0),k(this,"viewState",void 0),k(this,"controllers",void 0),k(this,"timeline",void 0),k(this,"_viewports",void 0),k(this,"_viewportMap",void 0),k(this,"_isUpdating",void 0),k(this,"_needsRedraw",void 0),k(this,"_needsUpdate",void 0),k(this,"_eventManager",void 0),k(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(let t in this.controllers){let e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(let t in this.controllers){let e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter(e=>e.containsPixel(t)):this._viewports}getViews(){let t={};return this.views.forEach(e=>{t[e.id]=e}),t}getView(t){return this.views.find(e=>e.id===t)}getViewState(t){let e=typeof t=="string"?this.getView(t):t,r=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(r):r}getViewport(t){return this._viewportMap[t]}unproject(t,e){let r=this.getViewports(),i={x:t[0],y:t[1]};for(let n=r.length-1;n>=0;--n){let s=r[n];if(s.containsPixel(i)){let a=t.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){(t!==this.width||e!==this.height)&&(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=QS(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!lp(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):Ke.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,e){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(Q(x({},e),{viewId:t}))}_createController(t,e){let r=e.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,e.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:i=>{var n;return(n=this.getView(t.id))===null||n===void 0?void 0:n.makeViewport({viewState:i,width:this.width,height:this.height})}})}_updateController(t,e,r,i){let n=t.controller;if(n){let s=Q(x(x({},e),n),{id:t.id,x:r.x,y:r.y,width:r.width,height:r.height});return i||(i=this._createController(t,s)),i&&i.setProps(s),i}return null}_rebuildViewports(){let{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=t.length;i--;){let n=t[i],s=this.getViewState(n),a=n.makeViewport({viewState:s,width:this.width,height:this.height}),o=e[n.id],l=!!n.controller;l&&!o&&(r=!0),(r||!l)&&o&&(o.finalize(),o=null),this.controllers[n.id]=this._updateController(n,s,a,o),this._viewports.unshift(a)}for(let i in e){let n=e[i];n&&!this.controllers[i]&&n.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,e){return t.length!==e.length?!0:t.some((r,i)=>!t[i].equals(e[i]))}},Qft=/([0-9]+\.?[0-9]*)(%|px)/;function Il(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":let e=Qft.exec(t);if(e&&e.length>=3){let r=e[2]==="%",i=parseFloat(e[1]);return{position:r?i/100:i,relative:r}}default:throw new Error("Could not parse position string ".concat(t))}}function Ol(t,e){return t.relative?Math.round(t.position*e):t.position}function $r(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}var tE=class{constructor(t){k(this,"id",void 0),k(this,"viewportInstance",void 0),k(this,"_x",void 0),k(this,"_y",void 0),k(this,"_width",void 0),k(this,"_height",void 0),k(this,"_padding",void 0),k(this,"props",void 0);let{id:e,x:r=0,y:i=0,width:n="100%",height:s="100%",padding:a=null,viewportInstance:o}=t||{};$r(!o||o instanceof op),this.viewportInstance=o,this.id=e||this.constructor.displayName||"view",this.props=Q(x({},t),{id:this.id}),this._x=Il(r),this._y=Il(i),this._width=Il(n),this._height=Il(s),this._padding=a&&{left:Il(a.left||0),right:Il(a.right||0),top:Il(a.top||0),bottom:Il(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t?!0:this.viewportInstance?t.viewportInstance?this.viewportInstance.equals(t.viewportInstance):!1:this.ViewportType===t.ViewportType&&lp(this.props,t.props)}makeViewport({width:t,height:e,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);let i=this.getDimensions({width:t,height:e});return new this.ViewportType(x(x(x({},r),this.props),i))}getViewStateId(){let{viewState:t}=this.props;return typeof t=="string"?t:t?.id||this.id}filterViewState(t){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;let e=x({},t);for(let r in this.props.viewState)r!=="id"&&(e[r]=this.props.viewState[r]);return e}return t}getDimensions({width:t,height:e}){let r={x:Ol(this._x,t),y:Ol(this._y,e),width:Ol(this._width,t),height:Ol(this._height,e)};return this._padding&&(r.padding={left:Ol(this._padding.left,t),top:Ol(this._padding.top,e),right:Ol(this._padding.right,t),bottom:Ol(this._padding.bottom,e)}),r}get controller(){let t=this.props.controller;return t?t===!0?{type:this.ControllerType}:typeof t=="function"?{type:t}:x({type:this.ControllerType},t):null}},Zf=class{constructor(t){k(this,"_inProgress",void 0),k(this,"_handle",void 0),k(this,"_timeline",void 0),k(this,"time",void 0),k(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var e,r;this.cancel(),this.settings=t,this._inProgress=!0,(e=(r=this.settings).onStart)===null||e===void 0||e.call(r,this)}end(){if(this._inProgress){var t,e;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(t=(e=this.settings).onEnd)===null||t===void 0||t.call(e,this)}}cancel(){if(this._inProgress){var t,e;(t=(e=this.settings).onInterrupt)===null||t===void 0||t.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var t,e;if(!this._inProgress)return!1;if(this._handle===null){let{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(t=(e=this.settings).onUpdate)===null||t===void 0||t.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}},yR=()=>{},rk={BREAK:1,SNAP_TO_END:2,IGNORE:3},tgt=t=>t,egt=rk.BREAK,igt=class{constructor(t){k(this,"getControllerState",void 0),k(this,"props",void 0),k(this,"propsInTransition",void 0),k(this,"transition",void 0),k(this,"onViewStateChange",void 0),k(this,"onStateChange",void 0),k(this,"_onTransitionUpdate",e=>{let{time:r,settings:{interpolator:i,startProps:n,endProps:s,duration:a,easing:o}}=e,l=o(r/a),c=i.interpolateProps(n,s,l);this.propsInTransition=this.getControllerState(x(x({},this.props),c)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new Zf(t.timeline),this.onViewStateChange=t.onViewStateChange||yR,this.onStateChange=t.onStateChange||yR}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let e=!1,r=this.props;if(this.props=t,!r||this._shouldIgnoreViewportChange(r,t))return!1;if(this._isTransitionEnabled(t)){let i=r;if(this.transition.inProgress){let{interruption:n,endProps:s}=this.transition.settings;i=x(x({},r),n===rk.SNAP_TO_END?s:this.propsInTransition||r)}this._triggerTransition(i,t),e=!0}else this.transition.cancel();return e}updateTransition(){this.transition.update()}_isTransitionEnabled(t){let{transitionDuration:e,transitionInterpolator:r}=t;return(e>0||e==="auto")&&!!r}_isUpdateDueToCurrentTransition(t){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition):!1}_shouldIgnoreViewportChange(t,e){return this.transition.inProgress?this.transition.settings.interruption===rk.IGNORE||this._isUpdateDueToCurrentTransition(e):this._isTransitionEnabled(e)?e.transitionInterpolator.arePropsEqual(t,e):!0}_triggerTransition(t,e){let r=this.getControllerState(t),i=this.getControllerState(e).shortestPathFrom(r),n=e.transitionInterpolator,s=n.getDuration?n.getDuration(t,e):e.transitionDuration;if(s===0)return;let a=n.initializeProps(t,i);this.propsInTransition={};let o={duration:s,easing:e.transitionEasing||tgt,interpolator:n,interruption:e.transitionInterruption||egt,startProps:a.start,endProps:a.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)};this.transition.start(o),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return e=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t?.(e)}}},rgt=class{constructor(t){k(this,"_propsToCompare",void 0),k(this,"_propsToExtract",void 0),k(this,"_requiredProps",void 0);let{compare:e,extract:r,required:i}=t;this._propsToCompare=e,this._propsToExtract=r||e,this._requiredProps=i}arePropsEqual(t,e){for(let r of this._propsToCompare)if(!(r in t)||!(r in e)||!Ad(t[r],e[r]))return!1;return!0}initializeProps(t,e){let r={},i={};for(let n of this._propsToExtract)(n in t||n in e)&&(r[n]=t[n],i[n]=e[n]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach(e=>{let r=t[e];$r(Number.isFinite(r)||Array.isArray(r),"".concat(e," is required for transition"))})}},ngt=["longitude","latitude","zoom","bearing","pitch"],sgt=["longitude","latitude","zoom"],Ky=class extends rgt{constructor(t={}){let e=Array.isArray(t)?t:t.transitionProps,r=Array.isArray(t)?{}:t;r.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:ngt,required:sgt},super(r.transitionProps),k(this,"opts",void 0),this.opts=r}initializeProps(t,e){let r=super.initializeProps(t,e),{makeViewport:i,around:n}=this.opts;if(i&&n){let s=i(t),a=i(e),o=s.unproject(n);r.start.around=n,Object.assign(r.end,{around:a.project(o),aroundPosition:o,width:e.width,height:e.height})}return r}interpolateProps(t,e,r){let i={};for(let n of this._propsToExtract)i[n]=wb(t[n]||0,e[n]||0,r);if(e.aroundPosition&&this.opts.makeViewport){let n=this.opts.makeViewport(x(x({},e),i));Object.assign(i,n.panByPosition(e.aroundPosition,wb(t.around,e.around,r)))}return i}},Pl={transitionDuration:0},agt=300,Mv=t=>1-(1-t)*(1-t),Bh={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Rc={},eE=class{constructor(t){k(this,"props",void 0),k(this,"state",{}),k(this,"transitionManager",void 0),k(this,"eventManager",void 0),k(this,"onViewStateChange",void 0),k(this,"onStateChange",void 0),k(this,"makeViewport",void 0),k(this,"_controllerState",void 0),k(this,"_events",{}),k(this,"_interactionState",{isDragging:!1}),k(this,"_customEvents",[]),k(this,"_eventStartBlocked",null),k(this,"_panMove",!1),k(this,"invertPan",!1),k(this,"dragMode","rotate"),k(this,"inertia",0),k(this,"scrollZoom",!0),k(this,"dragPan",!0),k(this,"dragRotate",!0),k(this,"doubleClickZoom",!0),k(this,"touchZoom",!0),k(this,"touchRotate",!1),k(this,"keyboard",!0),this.transitionManager=new igt(Q(x({},t),{getControllerState:e=>new this.ControllerState(e),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)})),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(let e in this._events)if(this._events[e]){var t;(t=this.eventManager)===null||t===void 0||t.off(e,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;let e=this._eventStartBlocked;switch(t.type){case"panstart":return e?!1:this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return e?!1:this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return e?!1:this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState(x(x({makeViewport:this.makeViewport},this.props),this.state)),this._controllerState}getCenter(t){let{x:e,y:r}=this.props,{offsetCenter:i}=t;return[i.x-e,i.y-r]}isPointInBounds(t,e){let{width:r,height:i}=this.props;if(e&&e.handled)return!1;let n=t[0]>=0&&t[0]<=r&&t[1]>=0&&t[1]<=i;return n&&e&&e.stopPropagation(),n}isFunctionKeyPressed(t){let{srcEvent:e}=t;return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){let e=setTimeout(()=>{this._eventStartBlocked===e&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=e}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);let{inertia:e}=t;this.inertia=Number.isFinite(e)?e:e===!0?agt:0;let{scrollZoom:r=!0,dragPan:i=!0,dragRotate:n=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:o=!1,keyboard:l=!0}=t,c=!!this.onViewStateChange;this.toggleEvents(Bh.WHEEL,c&&r),this.toggleEvents(Bh.PAN,c&&(i||n)),this.toggleEvents(Bh.PINCH,c&&(a||o)),this.toggleEvents(Bh.TRIPLE_PAN,c&&o),this.toggleEvents(Bh.DOUBLE_TAP,c&&s),this.toggleEvents(Bh.KEYBOARD,c&&l),this.scrollZoom=r,this.dragPan=i,this.dragRotate=n,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=o,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,e){this.eventManager&&t.forEach(r=>{this._events[r]!==e&&(this._events[r]=e,e?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(t,e=null,r={}){let i=x(x({},t.getViewportProps()),e),n=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(r),n){let s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:s})}}_onTransition(t){this.onViewStateChange(Q(x({},t),{interactionState:this._interactionState}))}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let r=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);let i=this.controllerState[r?"panStart":"rotateStart"]({pos:e});return this._panMove=r,this.updateViewport(i,Pl,{isDragging:!0}),!0}_onPan(t){return this.isDragging()?this._panMove?this._onPanMove(t):this._onPanRotate(t):!1}_onPanEnd(t){return this.isDragging()?this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t):!1}_onPanMove(t){if(!this.dragPan)return!1;let e=this.getCenter(t),r=this.controllerState.pan({pos:e});return this.updateViewport(r,Pl,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){let{inertia:e}=this;if(this.dragPan&&e&&t.velocity){let r=this.getCenter(t),i=[r[0]+t.velocityX*e/2,r[1]+t.velocityY*e/2],n=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(n,Q(x({},this._getTransitionProps()),{transitionDuration:e,transitionEasing:Mv}),{isDragging:!1,isPanning:!0})}else{let r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;let e=this.getCenter(t),r=this.controllerState.rotate({pos:e});return this.updateViewport(r,Pl,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){let{inertia:e}=this;if(this.dragRotate&&e&&t.velocity){let r=this.getCenter(t),i=[r[0]+t.velocityX*e/2,r[1]+t.velocityY*e/2],n=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(n,Q(x({},this._getTransitionProps()),{transitionDuration:e,transitionEasing:Mv}),{isDragging:!1,isRotating:!0})}else{let r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:n}=t,s=2/(1+Math.exp(-Math.abs(n*r)));n<0&&s!==0&&(s=1/s);let a=this.controllerState.zoom({pos:e,scale:s});return this.updateViewport(a,Q(x({},this._getTransitionProps({around:e})),{transitionDuration:i?250:1}),{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let r=this.controllerState.rotateStart({pos:e});return this.updateViewport(r,Pl,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate||!this.isDragging())return!1;let e=this.getCenter(t);e[0]-=t.deltaX;let r=this.controllerState.rotate({pos:e});return this.updateViewport(r,Pl,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;let{inertia:e}=this;if(this.touchRotate&&e&&t.velocityY){let r=this.getCenter(t),i=[r[0],r[1]+=t.velocityY*e/2],n=this.controllerState.rotate({pos:i});this.updateViewport(n,Q(x({},this._getTransitionProps()),{transitionDuration:e,transitionEasing:Mv}),{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{let r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let r=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return Rc._startPinchRotation=t.rotation,Rc._lastPinchEvent=t,this.updateViewport(r,Pl,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let e=this.controllerState;if(this.touchZoom){let{scale:r}=t,i=this.getCenter(t);e=e.zoom({pos:i,scale:r})}if(this.touchRotate){let{rotation:r}=t;e=e.rotate({deltaAngleX:Rc._startPinchRotation-r})}return this.updateViewport(e,Pl,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Rc._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;let{inertia:e}=this,{_lastPinchEvent:r}=Rc;if(this.touchZoom&&e&&r&&t.scale!==r.scale){let i=this.getCenter(t),n=this.controllerState.rotateEnd(),s=Math.log2(t.scale),a=(s-Math.log2(r.scale))/(t.deltaTime-r.deltaTime),o=Math.pow(2,s+a*e/2);n=n.zoom({pos:i,scale:o}).zoomEnd(),this.updateViewport(n,Q(x({},this._getTransitionProps({around:i})),{transitionDuration:e,transitionEasing:Mv}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{let i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Rc._startPinchRotation=null,Rc._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let r=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:e,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;let e=this.isFunctionKeyPressed(t),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:n,rotateSpeedY:s}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this,o,l={};switch(t.srcEvent.code){case"Minus":o=e?a.zoomOut(r).zoomOut(r):a.zoomOut(r),l.isZooming=!0;break;case"Equal":o=e?a.zoomIn(r).zoomIn(r):a.zoomIn(r),l.isZooming=!0;break;case"ArrowLeft":e?(o=a.rotateLeft(n),l.isRotating=!0):(o=a.moveLeft(i),l.isPanning=!0);break;case"ArrowRight":e?(o=a.rotateRight(n),l.isRotating=!0):(o=a.moveRight(i),l.isPanning=!0);break;case"ArrowUp":e?(o=a.rotateUp(s),l.isRotating=!0):(o=a.moveUp(i),l.isPanning=!0);break;case"ArrowDown":e?(o=a.rotateDown(s),l.isRotating=!0):(o=a.moveDown(i),l.isPanning=!0);break;default:return!1}return this.updateViewport(o,this._getTransitionProps(),l),!0}_getTransitionProps(t){let{transition:e}=this;return!e||!e.transitionInterpolator?Pl:t?Q(x({},e),{transitionInterpolator:new Ky(Q(x(x({},t),e.transitionInterpolator.opts),{makeViewport:this.controllerState.makeViewport}))}):e}},Tj=class{constructor(t,e){k(this,"_viewportProps",void 0),k(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=e}getViewportProps(){return this._viewportProps}getState(){return this._state}},wR=5,ogt=1.2,lgt=class extends Tj{constructor(t){let{width:e,height:r,latitude:i,longitude:n,zoom:s,bearing:a=0,pitch:o=0,altitude:l=1.5,position:c=[0,0,0],maxZoom:h=20,minZoom:p=0,maxPitch:m=60,minPitch:f=0,startPanLngLat:g,startZoomLngLat:_,startRotatePos:w,startBearing:S,startPitch:C,startZoom:b,normalize:P=!0}=t;$r(Number.isFinite(n)),$r(Number.isFinite(i)),$r(Number.isFinite(s)),super({width:e,height:r,latitude:i,longitude:n,zoom:s,bearing:a,pitch:o,altitude:l,maxZoom:h,minZoom:p,maxPitch:m,minPitch:f,normalize:P,position:c},{startPanLngLat:g,startZoomLngLat:_,startRotatePos:w,startBearing:S,startPitch:C,startZoom:b}),k(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:e}){let r=this.getState().startPanLngLat||this._unproject(e);if(!r)return this;let i=this.makeViewport(this.getViewportProps()).panByPosition(r,t);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:r=0}){let{startRotatePos:i,startBearing:n,startPitch:s}=this.getState();if(!i||n===void 0||s===void 0)return this;let a;return t?a=this._getNewRotation(t,i,s,n):a={bearing:n+e,pitch:s+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:e,scale:r}){let{startZoom:i,startZoomLngLat:n}=this.getState();if(n||(i=this.getViewportProps().zoom,n=this._unproject(e)||this._unproject(t)),!n)return this;let{maxZoom:s,minZoom:a}=this.getViewportProps(),o=i+Math.log2(r);o=Xr(o,a,s);let l=this.makeViewport(Q(x({},this.getViewportProps()),{zoom:o}));return this._getUpdatedState(x({zoom:o},l.panByPosition(n,t)))}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){let e=t.getViewportProps(),r=x({},this.getViewportProps()),{bearing:i,longitude:n}=r;return Math.abs(i-e.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(n-e.longitude)>180&&(r.longitude=n<0?n+360:n-360),r}applyConstraints(t){let{maxZoom:e,minZoom:r,zoom:i}=t;t.zoom=Xr(i,r,e);let{maxPitch:n,minPitch:s,pitch:a}=t;t.pitch=Xr(a,s,n);let{normalize:o=!0}=t;return o&&Object.assign(t,sft(t)),t}_zoomFromCenter(t){let{width:e,height:r}=this.getViewportProps();return this.zoom({pos:[e/2,r/2],scale:t})}_panFromCenter(t){let{width:e,height:r}=this.getViewportProps();return this.pan({startPos:[e/2,r/2],pos:[e/2+t[0],r/2+t[1]]})}_getUpdatedState(t){return new this.constructor(x(x(x({makeViewport:this.makeViewport},this.getViewportProps()),this.getState()),t))}_unproject(t){let e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_getNewRotation(t,e,r,i){let n=t[0]-e[0],s=t[1]-e[1],a=t[1],o=e[1],{width:l,height:c}=this.getViewportProps(),h=n/l,p=0;s>0?Math.abs(c-o)>wR&&(p=s/(o-c)*ogt):s<0&&o>wR&&(p=1-a/o),p=Xr(p,-1,1);let{minPitch:m,maxPitch:f}=this.getViewportProps(),g=i+180*h,_=r;return p>0?_=r+p*(f-r):p<0&&(_=r-p*(m-r)),{pitch:_,bearing:g}}},cgt=class extends eE{constructor(...t){super(...t),k(this,"ControllerState",lgt),k(this,"transition",{transitionDuration:300,transitionInterpolator:new Ky({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),k(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];let e=this.props;super.setProps(t),(!e||e.height!==t.height)&&this.updateViewport(new this.ControllerState(x(x({makeViewport:this.makeViewport},t),this.state)))}},Ij=class extends tE{get ViewportType(){return af}get ControllerType(){return cgt}};k(Ij,"displayName","MapView");var ugt=class extends qy{constructor(t,e){super(t,e),k(this,"maskMap",void 0),k(this,"fbo",void 0);let{mapSize:r=2048}=e;this.maskMap=new Kr(t,{width:r,height:r,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new Fr(t,{id:"maskmap",width:r,height:r,attachments:{36064:this.maskMap}})}render(t){let e=this.gl,r=[!1,!1,!1,!1];return r[t.channel]=!0,Ns(e,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:r,depthTest:!1},()=>super.render(Q(x({},t),{target:this.fbo,pass:"mask"})))}shouldDrawLayer(t){return t.props.operation===Gf.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}},hgt=new gt().lookAt({eye:[0,0,1]});function dgt({width:t,height:e,near:r,far:i,padding:n}){let s=-t/2,a=t/2,o=-e/2,l=e/2;if(n){let{left:c=0,right:h=0,top:p=0,bottom:m=0}=n,f=Xr((c+t-h)/2,0,t)-t/2,g=Xr((p+e-m)/2,0,e)-e/2;s-=f,a-=f,o+=g,l+=g}return new gt().ortho({left:s,right:a,bottom:o,top:l,near:r,far:i})}var pgt=class extends op{constructor(t){let{width:e,height:r,near:i=.1,far:n=1e3,zoom:s=0,target:a=[0,0,0],padding:o=null,flipY:l=!0}=t,c=Array.isArray(s)?s[0]:s,h=Array.isArray(s)?s[1]:s,p=Math.min(c,h),m=Math.pow(2,p),f;if(c!==h){let g=Math.pow(2,c),_=Math.pow(2,h);f={unitsPerMeter:[g/m,_/m,1],metersPerUnit:[m/g,m/_,1]}}super(Q(x({},t),{longitude:void 0,position:a,viewMatrix:hgt.clone().scale([m,m*(l?-1:1),m]),projectionMatrix:dgt({width:e||1,height:r||1,padding:o,near:i,far:n}),zoom:p,distanceScales:f}))}projectFlat([t,e]){let{unitsPerMeter:r}=this.distanceScales;return[t*r[0],e*r[1]]}unprojectFlat([t,e]){let{metersPerUnit:r}=this.distanceScales;return[t*r[0],e*r[1]]}panByPosition(t,e){let r=Wf(e,this.pixelUnprojectionMatrix),i=this.projectFlat(t),n=xb([],i,XV([],r)),s=xb([],this.center,n);return{target:this.unprojectFlat(s)}}},Oj=class extends Tj{constructor(t){let{width:e,height:r,rotationX:i=0,rotationOrbit:n=0,target:s=[0,0,0],zoom:a=0,minRotationX:o=-90,maxRotationX:l=90,minZoom:c=-1/0,maxZoom:h=1/0,startPanPosition:p,startRotatePos:m,startRotationX:f,startRotationOrbit:g,startZoomPosition:_,startZoom:w}=t;super({width:e,height:r,rotationX:i,rotationOrbit:n,target:s,zoom:a,minRotationX:o,maxRotationX:l,minZoom:c,maxZoom:h},{startPanPosition:p,startRotatePos:m,startRotationX:f,startRotationOrbit:g,startZoomPosition:_,startZoom:w}),k(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:e}){let r=this.getState().startPanPosition||e;if(!r)return this;let i=this.makeViewport(this.getViewportProps()).panByPosition(r,t);return this._getUpdatedState(i)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:r=0}){let{startRotatePos:i,startRotationX:n,startRotationOrbit:s}=this.getState(),{width:a,height:o}=this.getViewportProps();if(!i||n===void 0||s===void 0)return this;let l;if(t){let c=(t[0]-i[0])/a,h=(t[1]-i[1])/o;(n<-90||n>90)&&(c*=-1),l={rotationX:n+h*180,rotationOrbit:s+c*180}}else l={rotationX:n+r,rotationOrbit:s+e};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){let e=t.getViewportProps(),r=x({},this.getViewportProps()),{rotationOrbit:i}=r;return Math.abs(i-e.rotationOrbit)>180&&(r.rotationOrbit=i<0?i+360:i-360),r}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:e,scale:r}){let{startZoom:i,startZoomPosition:n}=this.getState();if(n||(i=this.getViewportProps().zoom,n=this._unproject(e)||this._unproject(t)),!n)return this;let s=this._calculateNewZoom({scale:r,startZoom:i}),a=this.makeViewport(Q(x({},this.getViewportProps()),{zoom:s}));return this._getUpdatedState(x({zoom:s},a.panByPosition(n,t)))}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){let e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_calculateNewZoom({scale:t,startZoom:e}){let{maxZoom:r,minZoom:i}=this.getViewportProps();e===void 0&&(e=this.getViewportProps().zoom);let n=e+Math.log2(t);return Xr(n,i,r)}_panFromCenter(t){let{width:e,height:r,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[e/2+t[0],r/2+t[1]]})}_getUpdatedState(t){return new this.constructor(x(x(x({makeViewport:this.makeViewport},this.getViewportProps()),this.getState()),t))}applyConstraints(t){let{maxZoom:e,minZoom:r,zoom:i,maxRotationX:n,minRotationX:s,rotationOrbit:a}=t;return t.zoom=Array.isArray(i)?[Xr(i[0],r,e),Xr(i[1],r,e)]:Xr(i,r,e),t.rotationX=Xr(t.rotationX,s,n),(a<-180||a>180)&&(t.rotationOrbit=Rft(a+180,360)-180),t}},mgt=class extends eE{constructor(...t){super(...t),k(this,"ControllerState",Oj),k(this,"transition",{transitionDuration:300,transitionInterpolator:new Ky({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}},fgt=class extends Oj{constructor(t){super(t),k(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:e}){let{maxZoom:r,minZoom:i}=this.getViewportProps();e===void 0&&(e=this.getViewportProps().zoom);let n=Math.log2(t);if(Array.isArray(e)){let[s,a]=e;switch(this.zoomAxis){case"X":s=Xr(s+n,i,r);break;case"Y":a=Xr(a+n,i,r);break;default:let o=Math.min(s+n,a+n);o<i&&(n+=i-o),o=Math.max(s+n,a+n),o>r&&(n+=r-o),s+=n,a+=n}return[s,a]}return Xr(e+n,i,r)}},ggt=class extends eE{constructor(...t){super(...t),k(this,"ControllerState",fgt),k(this,"transition",{transitionDuration:300,transitionInterpolator:new Ky(["target","zoom"])}),k(this,"dragMode","pan")}_onPanRotate(){return!1}},iE=class extends tE{get ViewportType(){return pgt}get ControllerType(){return ggt}};k(iE,"displayName","OrthographicView");function vgt({layers:t,viewport:e}){let r=null;for(let s of t){let a=s.getBounds();a&&(r?(r[0]=Math.min(r[0],a[0][0]),r[1]=Math.min(r[1],a[0][1]),r[2]=Math.max(r[2],a[1][0]),r[3]=Math.max(r[3],a[1][1])):r=[a[0][0],a[0][1],a[1][0],a[1][1]])}let i=e.getBounds();if(!r)return i;let n=bgt(i);return r[2]-r[0]<n[2]-n[0]||r[3]-r[1]<n[3]-n[1]||(r[0]=Math.max(r[0],n[0]),r[1]=Math.max(r[1],n[1]),r[2]=Math.min(r[2],n[2]),r[3]=Math.min(r[3],n[3])),r}function _gt({bounds:t,viewport:e,width:r,height:i}){if(t[2]<=t[0]||t[3]<=t[1])return null;let n=1;if(r-=n*2,i-=n*2,e instanceof af){let{longitude:o,latitude:l,zoom:c}=xj({width:r,height:i,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new af({longitude:o,latitude:l,zoom:c,x:n,y:n,width:r,height:i})}let s=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],a=Math.min(20,r/(t[2]-t[0]),i/(t[3]-t[1]));return new iE({x:n,y:n}).makeViewport({width:r,height:i,viewState:{target:s,zoom:Math.log2(a)}})}function bgt(t){let e={x:t[2]-t[0],y:t[3]-t[1]},r={x:t[0]+.5*e.x,y:t[1]+.5*e.y};return[r.x-e.x,r.y-e.y,r.x+e.x,r.y+e.y]}var ygt=class{constructor(){k(this,"id","mask-effect"),k(this,"props",null),k(this,"useInPicking",!0),k(this,"dummyMaskMap",void 0),k(this,"channels",[]),k(this,"masks",null),k(this,"maskPass",void 0),k(this,"maskMap",void 0),k(this,"lastViewport",void 0)}preRender(t,{layers:e,layerFilter:r,viewports:i,onViewportActive:n,views:s}){this.dummyMaskMap||(this.dummyMaskMap=new Kr(t,{width:1,height:1}));let a=e.filter(h=>h.props.visible&&h.props.operation===Gf.MASK);if(a.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new ugt(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);let o=this._sortMaskChannels(a),l=i[0],c=!this.lastViewport||!this.lastViewport.equals(l);for(let h in o)this._renderChannel(o[h],{layerFilter:r,onViewportActive:n,views:s,viewport:l,viewportChanged:c})}_renderChannel(t,{layerFilter:e,onViewportActive:r,views:i,viewport:n,viewportChanged:s}){let a=this.channels[t.index];if(!a)return;let o=t===a||a.layers.length!==t.layers.length||t.layerBounds.some((l,c)=>l!==a.layerBounds[c]);if(t.bounds=a.bounds,t.maskBounds=a.maskBounds,this.channels[t.index]=t,(o||s)&&(this.lastViewport=n,t.bounds=vgt({layers:t.layers,viewport:n}),o||!Ad(t.bounds,a.bounds))){let{maskPass:l,maskMap:c}=this,h=_gt({bounds:t.bounds,viewport:n,width:c.width,height:c.height});t.maskBounds=h?h.getBounds():[0,0,1,1],l.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:e,viewports:h?[h]:[],onViewportActive:r,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}_sortMaskChannels(t){let e={},r=0;for(let i of t){let{id:n}=i.root,s=e[n];if(!s){if(++r>4){Ke.warn("Too many mask layers. The max supported is 4")();continue}s={id:n,index:this.channels.findIndex(a=>a?.id===n),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},e[n]=s}s.layers.push(i),s.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){let n=this.channels[i];(!n||!(n.id in e))&&(this.channels[i]=null)}for(let i in e){let n=e[i];n.index<0&&(n.index=this.channels.findIndex(s=>!s),this.channels[n.index]=n)}return e}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}},wgt=new JS,xgt=class{constructor(){k(this,"effects",void 0),k(this,"_internalEffects",void 0),k(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length!==this.effects.length||!lp(t.effects,this.effects))&&(this.setEffects(t.effects),this._needsRedraw="effects changed")}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(t=[]){this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new ygt),t.some(e=>e instanceof JS)||this._internalEffects.push(wgt)}cleanup(){for(let t of this.effects)t.cleanup();for(let t of this._internalEffects)t.cleanup();this.effects.length=0,this._internalEffects.length=0}},Cgt=class extends qy{shouldDrawLayer(t){return t.props.operation===Gf.DRAW}},xR={blendFunc:[1,0,32771,0],blendEquation:32774},Pj=class extends qy{constructor(...t){super(...t),k(this,"pickZ",void 0),k(this,"_colors",null)}render(t){return t.pickingFBO?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:e,views:r,viewports:i,onViewportActive:n,pickingFBO:s,deviceRect:{x:a,y:o,width:l,height:c},cullRect:h,effects:p,pass:m="picking",pickZ:f}){let g=this.gl;this.pickZ=f;let _=f?null:{byLayer:new Map,byAlpha:[]};this._colors=_;let w=Ns(g,Q(x({scissorTest:!0,scissor:[a,o,l,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},xR),{blend:!f}),()=>super.render({target:s,layers:t,layerFilter:e,views:r,viewports:i,onViewportActive:n,cullRect:h,effects:p?.filter(S=>S.useInPicking),pass:m}));return this._colors=null,{decodePickingColor:_&&Agt.bind(null,_),stats:w}}shouldDrawLayer(t){return t.props.pickable&&t.props.operation===Gf.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,e,r){let i=x({},t.props.parameters);return this._colors?(Object.assign(i,xR),i.blend=!0,i.blendColor=kgt(this._colors,t,r)):i.blend=!1,i}};function kgt(t,e,r){let{byLayer:i,byAlpha:n}=t,s,a=i.get(e);return a?(a.viewports.push(r),s=a.a):(s=i.size+1,s<=255?(a={a:s,layer:e,viewports:[r]},i.set(e,a),n[s]=a):(Ke.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function Agt(t,e){let r=t.byAlpha[e[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(e)}}var Sgt="deckRenderer.renderLayers",Egt=class{constructor(t){this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Cgt(t),this.pickLayersPass=new Pj(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){let e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||Fr.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);let r=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,i=e.render(Q(x({},t),{target:r}));this._postRender(t.effects,t),this.renderCount++,sn(Sgt,this,i,t)}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}finalize(){let{renderBuffers:t}=this;for(let e of t)e.delete();t.length=0}_preRender(t,e){let r=null;for(let i of t)i.preRender(this.gl,e),i.postRender&&(r=i);r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}_resizeRenderBuffers(){let{renderBuffers:t}=this;t.length===0&&t.push(new Fr(this.gl),new Fr(this.gl));for(let e of t)e.resize()}_postRender(t,e){let{renderBuffers:r}=this,i={inputBuffer:r[0],swapBuffer:r[1],target:null};for(let n of t)if(n.postRender){if(n===this.lastPostProcessEffect){i.target=e.target,n.postRender(this.gl,i);break}let s=n.postRender(this.gl,i);i.inputBuffer=s,i.swapBuffer=s===r[0]?r[1]:r[0]}}},Tgt={pickedColor:null,pickedObjectIndex:-1};function Igt({pickedColors:t,decodePickingColor:e,deviceX:r,deviceY:i,deviceRadius:n,deviceRect:s}){let{x:a,y:o,width:l,height:c}=s,h=n*n,p=-1,m=0;for(let f=0;f<c;f++){let g=f+o-i,_=g*g;if(_>h)m+=4*l;else for(let w=0;w<l;w++){if(t[m+3]-1>=0){let S=w+a-r,C=S*S+_;C<=h&&(h=C,p=m)}m+=4}}if(p>=0){let f=t.slice(p,p+4),g=e(f);if(g){let _=Math.floor(p/4/l),w=p/4-_*l;return Q(x({},g),{pickedColor:f,pickedX:a+w,pickedY:o+_})}Ke.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Tgt}function Ogt({pickedColors:t,decodePickingColor:e}){let r=new Map;if(t){for(let i=0;i<t.length;i+=4)if(t[i+3]-1>=0){let n=t.slice(i,i+4),s=n.join(",");if(!r.has(s)){let a=e(n);a?r.set(s,Q(x({},a),{color:n})):Ke.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function Mj({pickInfo:t,viewports:e,pixelRatio:r,x:i,y:n,z:s}){let a=e[0];e.length>1&&(a=Mgt(t?.pickedViewports||e,{x:i,y:n}));let o;if(a){let l=[i-a.x,n-a.y];s!==void 0&&(l[2]=s),o=a.unproject(l)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:i,y:n,pixel:[i,n],coordinate:o,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:r}}function Pgt(t){let{pickInfo:e,lastPickedInfo:r,mode:i,layers:n}=t,{pickedColor:s,pickedLayer:a,pickedObjectIndex:o}=e,l=a?[a]:[];if(i==="hover"){let p=r.index,m=r.layerId,f=a?a.props.id:null;if(f!==m||o!==p){if(f!==m){let g=n.find(_=>_.props.id===m);g&&l.unshift(g)}r.layerId=f,r.index=o,r.info=null}}let c=Mj(t),h=new Map;return h.set(null,c),l.forEach(p=>{let m=x({},c);p===a&&(m.color=s,m.index=o,m.picked=!0),m=Rj({layer:p,info:m,mode:i});let f=m.layer;p===a&&i==="hover"&&(r.info=m),h.set(f.id,m),i==="hover"&&f.updateAutoHighlight(m)}),h}function Rj({layer:t,info:e,mode:r}){for(;t&&e;){let i=e.layer||null;e.sourceLayer=i,e.layer=t,e=t.getPickingInfo({info:e,mode:r,sourceLayer:i}),t=t.parent}return e}function Mgt(t,e){for(let r=t.length-1;r>=0;r--){let i=t[r];if(i.containsPixel(e))return i}return t[0]}var Rgt=class{constructor(t){k(this,"gl",void 0),k(this,"pickingFBO",void 0),k(this,"depthFBO",void 0),k(this,"pickLayersPass",void 0),k(this,"layerFilter",void 0),k(this,"lastPickedInfo",void 0),k(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new Pj(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:e,layers:r,viewports:i},n=this.lastPickedInfo.info){let s=n&&n.layer&&n.layer.id,a=n&&n.viewport&&n.viewport.id,o=s?r.find(p=>p.id===s):null,l=a&&i.find(p=>p.id===a)||i[0],c=l&&l.unproject([t-l.x,e-l.y]),h={x:t,y:e,viewport:l,coordinate:c,layer:o};return x(x({},n),h)}_resizeBuffer(){var t,e;let{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new Fr(r),Fr.isSupported(r,{colorBufferFloat:!0}))){let i=new Fr(r);i.attach({36064:new Kr(r,{format:Ue(r)?34836:6408,type:5126})}),this.depthFBO=i}(t=this.pickingFBO)===null||t===void 0||t.resize({width:r.canvas.width,height:r.canvas.height}),(e=this.depthFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(t){if(this._pickable===!1)return null;let e=t.filter(r=>r.isPickable()&&!r.isComposite);return e.length?e:null}_pickClosestObject({layers:t,views:e,viewports:r,x:i,y:n,radius:s=0,depth:a=1,mode:o="query",unproject3D:l,onViewportActive:c,effects:h}){let p=this._getPickable(t),m=xd(this.gl);if(!p)return{result:[],emptyInfo:Mj({viewports:r,x:i,y:n,pixelRatio:m})};this._resizeBuffer();let f=Hx(this.gl,[i,n],!0),g=[f.x+Math.floor(f.width/2),f.y+Math.floor(f.height/2)],_=Math.round(s*m),{width:w,height:S}=this.pickingFBO,C=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:_,deviceWidth:w,deviceHeight:S}),b={x:i-s,y:n-s,width:s*2+1,height:s*2+1},P,L=[],H=new Set;for(let M=0;M<a;M++){let E;if(C){let X=this._drawAndSample({layers:p,views:e,viewports:r,onViewportActive:c,deviceRect:C,cullRect:b,effects:h,pass:"picking:".concat(o)});E=Igt(Q(x({},X),{deviceX:g[0],deviceY:g[1],deviceRadius:_,deviceRect:C}))}else E={pickedColor:null,pickedObjectIndex:-1};let it;E.pickedLayer&&l&&this.depthFBO&&(it=this._drawAndSample({layers:[E.pickedLayer],views:e,viewports:r,onViewportActive:c,deviceRect:{x:E.pickedX,y:E.pickedY,width:1,height:1},cullRect:b,effects:h,pass:"picking:".concat(o,":z")},!0).pickedColors[0]),E.pickedLayer&&M+1<a&&(H.add(E.pickedLayer),E.pickedLayer.disablePickingIndex(E.pickedObjectIndex)),P=Pgt({pickInfo:E,lastPickedInfo:this.lastPickedInfo,mode:o,layers:p,viewports:r,x:i,y:n,z:it,pixelRatio:m});for(let X of P.values())X.layer&&L.push(X);if(!E.pickedColor)break}for(let M of H)M.restorePickingColors();return{result:L,emptyInfo:P.get(null)}}_pickVisibleObjects({layers:t,views:e,viewports:r,x:i,y:n,width:s=1,height:a=1,mode:o="query",maxObjects:l=null,onViewportActive:c,effects:h}){let p=this._getPickable(t);if(!p)return[];this._resizeBuffer();let m=xd(this.gl),f=Hx(this.gl,[i,n],!0),g=f.x,_=f.y+f.height,w=Hx(this.gl,[i+s,n+a],!0),S=w.x+w.width,C=w.y,b={x:g,y:C,width:S-g,height:_-C},P=this._drawAndSample({layers:p,views:e,viewports:r,onViewportActive:c,deviceRect:b,cullRect:{x:i,y:n,width:s,height:a},effects:h,pass:"picking:".concat(o)}),L=Ogt(P),H=new Map,M=Number.isFinite(l);for(let E=0;E<L.length&&!(M&&l&&H.size>=l);E++){let it=L[E],X={color:it.pickedColor,layer:null,index:it.pickedObjectIndex,picked:!0,x:i,y:n,pixelRatio:m};X=Rj({layer:it.pickedLayer,info:X,mode:o}),H.has(X.object)||H.set(X.object,X)}return Array.from(H.values())}_drawAndSample({layers:t,views:e,viewports:r,onViewportActive:i,deviceRect:n,cullRect:s,effects:a,pass:o},l=!1){let c=l?this.depthFBO:this.pickingFBO,{decodePickingColor:h}=this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,views:e,viewports:r,onViewportActive:i,pickingFBO:c,deviceRect:n,cullRect:s,effects:a,pass:o,pickZ:l}),{x:p,y:m,width:f,height:g}=n,_=new(l?Float32Array:Uint8Array)(f*g*4);return Wy(c,{sourceX:p,sourceY:m,sourceWidth:f,sourceHeight:g,target:_}),{pickedColors:_,decodePickingColor:h}}_getPickingRect({deviceX:t,deviceY:e,deviceRadius:r,deviceWidth:i,deviceHeight:n}){let s=Math.max(0,t-r),a=Math.max(0,e-r),o=Math.min(i,t+r+1)-s,l=Math.min(n,e+r+1)-a;return o<=0||l<=0?null:{x:s,y:a,width:o,height:l}}},Bgt={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"},Dgt=class{constructor(t){k(this,"el",null),k(this,"isVisible",!1);let e=t.parentElement;e&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,Bgt),e.appendChild(this.el))}setTooltip(t,e,r){let i=this.el;if(i){if(typeof t=="string")i.innerText=t;else if(t)t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className),Object.assign(i.style,t.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(e,"px, ").concat(r,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}},Yy=tl(uK()),Lgt={mousedown:1,mousemove:2,mouseup:4};function Ngt(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return!0;return!1}function Fgt(t){let e=t.prototype.handler;t.prototype.handler=function(r){let i=this.store;r.button>0&&r.type==="pointerdown"&&(Ngt(i,n=>n.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function zgt(t){t.prototype.handler=function(e){let r=Lgt[e.type];r&1&&e.button>=0&&(this.pressed=!0),r&2&&e.buttons===0&&(r=4),this.pressed&&(r&4&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}}Fgt(Yy.PointerEventInput);zgt(Yy.MouseInput);var Vgt=Yy.Manager,Ta=Yy,Jy=class{constructor(t,e,r){this.element=t,this.callback=e,this.options=x({enable:!0},r)}},jgt=Ta?[[Ta.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Ta.Rotate,{enable:!1}],[Ta.Pinch,{enable:!1}],[Ta.Swipe,{enable:!1}],[Ta.Pan,{threshold:0,enable:!1}],[Ta.Press,{enable:!1}],[Ta.Tap,{event:"doubletap",taps:2,enable:!1}],[Ta.Tap,{event:"anytap",enable:!1}],[Ta.Tap,{enable:!1}]]:null,CR={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Ugt={doubletap:["tap"]},Hgt={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},rE={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},Ggt={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},kR={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Wgt=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",rd=typeof window<"u"?window:global,nk=!1;try{let t={get passive(){return nk=!0,!0}};rd.addEventListener("test",null,t),rd.removeEventListener("test",null)}catch{nk=!1}var Zgt=Wgt.indexOf("firefox")!==-1,{WHEEL_EVENTS:$gt}=rE,AR="wheel",SR=4.000244140625,Xgt=40,qgt=.25,Kgt=class extends Jy{constructor(t,e,r){super(t,e,r),this.handleEvent=i=>{if(!this.options.enable)return;let n=i.deltaY;rd.WheelEvent&&(Zgt&&i.deltaMode===rd.WheelEvent.DOM_DELTA_PIXEL&&(n/=rd.devicePixelRatio),i.deltaMode===rd.WheelEvent.DOM_DELTA_LINE&&(n*=Xgt)),n!==0&&n%SR===0&&(n=Math.floor(n/SR)),i.shiftKey&&n&&(n=n*qgt),this.callback({type:AR,center:{x:i.clientX,y:i.clientY},delta:-n,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat($gt),this.events.forEach(i=>t.addEventListener(i,this.handleEvent,nk?{passive:!1}:!1))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,e){t===AR&&(this.options.enable=e)}},{MOUSE_EVENTS:Ygt}=rE,ER="pointermove",TR="pointerover",IR="pointerout",OR="pointerenter",PR="pointerleave",Jgt=class extends Jy{constructor(t,e,r){super(t,e,r),this.handleEvent=n=>{this.handleOverEvent(n),this.handleOutEvent(n),this.handleEnterEvent(n),this.handleLeaveEvent(n),this.handleMoveEvent(n)},this.pressed=!1;let{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(Ygt),this.events.forEach(n=>t.addEventListener(n,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,e){t===ER&&(this.enableMoveEvent=e),t===TR&&(this.enableOverEvent=e),t===IR&&(this.enableOutEvent=e),t===OR&&(this.enableEnterEvent=e),t===PR&&(this.enableLeaveEvent=e)}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit(TR,t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit(IR,t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit(OR,t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit(PR,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.buttons===0&&(this.pressed=!1),this.pressed||this._emit(ER,t);break;case"mouseup":this.pressed=!1;break;default:}}_emit(t,e){this.callback({type:t,center:{x:e.clientX,y:e.clientY},srcEvent:e,pointerType:"mouse",target:e.target})}},{KEY_EVENTS:Qgt}=rE,MR="keydown",RR="keyup",tvt=class extends Jy{constructor(t,e,r){super(t,e,r),this.handleEvent=i=>{let n=i.target||i.srcElement;n.tagName==="INPUT"&&n.type==="text"||n.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:MR,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:RR,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Qgt),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(i=>t.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,e){t===MR&&(this.enableDownEvent=e),t===RR&&(this.enableUpEvent=e)}},BR="contextmenu",evt=class extends Jy{constructor(t,e,r){super(t,e,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:BR,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,e){t===BR&&(this.options.enable=e)}},ivt={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},rvt=0,nvt=1,svt=2,avt=1,ovt=2,lvt=4;function cvt(t){let e=ivt[t.srcEvent.type];if(!e)return null;let{buttons:r,button:i}=t.srcEvent,n=!1,s=!1,a=!1;return e===2?(n=!!(r&avt),s=!!(r&lvt),a=!!(r&ovt)):(n=i===rvt,s=i===nvt,a=i===svt),{leftButton:n,middleButton:s,rightButton:a}}function uvt(t,e){let r=t.center;if(!r)return null;let i=e.getBoundingClientRect(),n=i.width/e.offsetWidth||1,s=i.height/e.offsetHeight||1,a={x:(r.x-i.left-e.clientLeft)/n,y:(r.y-i.top-e.clientTop)/s};return{center:r,offsetCenter:a}}var o1={srcElement:"root",priority:0},hvt=class{constructor(t){this.handleEvent=e=>{if(this.isEmpty())return;let r=this._normalizeEvent(e),i=e.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,e,r,i=!1,n=!1){let{handlers:s,handlersByElement:a}=this,o=o1;typeof r=="string"||r&&r.addEventListener?o=Q(x({},o1),{srcElement:r}):r&&(o=x(x({},o1),r));let l=a.get(o.srcElement);l||(l=[],a.set(o.srcElement,l));let c={type:t,handler:e,srcElement:o.srcElement,priority:o.priority};i&&(c.once=!0),n&&(c.passive=!0),s.push(c),this._active=this._active||!c.passive;let h=l.length-1;for(;h>=0&&!(l[h].priority>=c.priority);)h--;l.splice(h+1,0,c)}remove(t,e){let{handlers:r,handlersByElement:i}=this;for(let n=r.length-1;n>=0;n--){let s=r[n];if(s.type===t&&s.handler===e){r.splice(n,1);let a=i.get(s.srcElement);a.splice(a.indexOf(s),1),a.length===0&&i.delete(s.srcElement)}}this._active=r.some(n=>!n.passive)}_emit(t,e){let r=this.handlersByElement.get(e);if(r){let i=!1,n=()=>{t.handled=!0},s=()=>{t.handled=!0,i=!0},a=[];for(let o=0;o<r.length;o++){let{type:l,handler:c,once:h}=r[o];if(c(Q(x({},t),{type:l,stopPropagation:n,stopImmediatePropagation:s})),h&&a.push(r[o]),i)break}for(let o=0;o<a.length;o++){let{type:l,handler:c}=a[o];this.remove(l,c)}}}_normalizeEvent(t){let e=this.eventManager.getElement();return Q(x(x(x({},t),cvt(t)),uvt(t,e)),{preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:e})}},dvt={events:null,recognizers:null,recognizerOptions:{},Manager:Vgt,touchAction:"none",tabIndex:0},pvt=class{constructor(t=null,e){this._onBasicInput=i=>{let{srcEvent:n}=i,s=Hgt[n.type];s&&this.manager.emit(s,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options=x(x({},dvt),e),this.events=new Map,this.setElement(t);let{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;let{options:e}=this,r=e.Manager;this.manager=new r(t,{touchAction:e.touchAction,recognizers:e.recognizers||jgt}).on("hammer.input",this._onBasicInput),e.recognizers||Object.keys(CR).forEach(i=>{let n=this.manager.get(i);n&&CR[i].forEach(s=>{n.recognizeWith(s)})});for(let i in e.recognizerOptions){let n=this.manager.get(i);if(n){let s=e.recognizerOptions[i];delete s.enable,n.set(s)}}this.wheelInput=new Kgt(t,this._onOtherEvent,{enable:!1}),this.moveInput=new Jgt(t,this._onOtherEvent,{enable:!1}),this.keyInput=new tvt(t,this._onOtherEvent,{enable:!1,tabIndex:e.tabIndex}),this.contextmenuInput=new evt(t,this._onOtherEvent,{enable:!1});for(let[i,n]of this.events)n.isEmpty()||(this._toggleRecognizer(n.recognizerName,!0),this.manager.on(i,n.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,e,r){this._addEventHandler(t,e,r,!1)}once(t,e,r){this._addEventHandler(t,e,r,!0)}watch(t,e,r){this._addEventHandler(t,e,r,!1,!0)}off(t,e){this._removeEventHandler(t,e)}_toggleRecognizer(t,e){let{manager:r}=this;if(!r)return;let i=r.get(t);if(i&&i.options.enable!==e){i.set({enable:e});let n=Ugt[t];n&&!this.options.recognizers&&n.forEach(s=>{let a=r.get(s);e?(a.requireFailure(t),i.dropRequireFailure(s)):a.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,e),this.moveInput.enableEventType(t,e),this.keyInput.enableEventType(t,e),this.contextmenuInput.enableEventType(t,e)}_addEventHandler(t,e,r,i,n){if(typeof t!="string"){r=e;for(let c in t)this._addEventHandler(c,t[c],r,i,n);return}let{manager:s,events:a}=this,o=kR[t]||t,l=a.get(o);l||(l=new hvt(this),a.set(o,l),l.recognizerName=Ggt[o]||o,s&&s.on(o,l.handleEvent)),l.add(t,e,r,i,n),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(t,e){if(typeof t!="string"){for(let s in t)this._removeEventHandler(s,t[s]);return}let{events:r}=this,i=kR[t]||t,n=r.get(i);if(n&&(n.remove(t,e),n.isEmpty())){let{recognizerName:s}=n,a=!1;for(let o of r.values())if(o.recognizerName===s&&!o.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}};function Bc(){}var mvt=({isDragging:t})=>t?"grabbing":"grab",Bj={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Bc,onResize:Bc,onViewStateChange:Bc,onInteractionStateChange:Bc,onBeforeRender:Bc,onAfterRender:Bc,onLoad:Bc,onError:t=>Ke.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:mvt,getTooltip:null,debug:!1,drawPickingColors:!1},nE=class{constructor(t){k(this,"props",void 0),k(this,"width",0),k(this,"height",0),k(this,"userData",{}),k(this,"canvas",null),k(this,"viewManager",null),k(this,"layerManager",null),k(this,"effectManager",null),k(this,"deckRenderer",null),k(this,"deckPicker",null),k(this,"eventManager",null),k(this,"tooltip",null),k(this,"metrics",void 0),k(this,"animationLoop",void 0),k(this,"stats",void 0),k(this,"viewState",void 0),k(this,"cursorState",void 0),k(this,"_needsRedraw",void 0),k(this,"_pickRequest",void 0),k(this,"_lastPointerDownInfo",null),k(this,"_metricsCounter",void 0),k(this,"_onPointerMove",e=>{let{_pickRequest:r}=this;if(e.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(e.leftButton||e.rightButton)return;{let i=e.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=e}),k(this,"_onEvent",e=>{let r=cR[e.type],i=e.offsetCenter;if(!r||!i||!this.layerManager)return;let n=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:n,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=s,o=a&&(a[r.handler]||a.props[r.handler]),l=this.props[r.handler],c=!1;o&&(c=o.call(a,s,e)),!c&&l&&l(s,e)}),k(this,"_onPointerDown",e=>{let r=e.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props=x(x({},Bj),t),t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&Ke.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),Jz()==="IE"&&Ke.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||typeof document<"u"&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new PS({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&sf.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,e,r,i,n,s,a;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(t=this.layerManager)===null||t===void 0||t.finalize(),this.layerManager=null,(e=this.viewManager)===null||e===void 0||e.finalize(),this.viewManager=null,(r=this.effectManager)===null||r===void 0||r.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(n=this.deckPicker)===null||n===void 0||n.finalize(),this.deckPicker=null,(s=this.eventManager)===null||s===void 0||s.destroy(),this.eventManager=null,(a=this.tooltip)===null||a===void 0||a.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var o;(o=this.canvas.parentElement)===null||o===void 0||o.removeChild(this.canvas),this.canvas=null}}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&Ke.removed("onLayerHover","onHover")(),"onLayerClick"in t&&Ke.removed("onLayerClick","onClick")(),t.initialViewState&&!lp(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);let e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);let r=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),n=this.effectManager.needsRedraw(t),s=this.deckRenderer.needsRedraw(t);return e=e||r||i||n||s,e}redraw(t){if(!this.layerManager)return;let e=this.needsRedraw({clearRedrawFlags:!0});e=t||e,e&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}get isInitialized(){return this.viewManager!==null}getViews(){return $r(this.viewManager),this.viewManager.views}getViewports(t){return $r(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){let e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,e=!1){for(let r in t)this.layerManager.resourceManager.add({resourceId:r,data:t[r],forceUpdate:e})}_removeResources(t){for(let e of t)this.layerManager.resourceManager.remove(e)}_pick(t,e,r){$r(this.deckPicker);let{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(e).timeStart();let n=this.deckPicker[t](x({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects()},r));return i.get(e).timeEnd(),n}_createCanvas(t){let e=t.canvas;return typeof e=="string"&&(e=document.getElementById(e),$r(e)),e||(e=document.createElement("canvas"),e.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(e)),Object.assign(e.style,t.style),e}_setCanvasSize(t){if(!this.canvas)return;let{width:e,height:r}=t;if(e||e===0){let n=Number.isFinite(e)?"".concat(e,"px"):e;this.canvas.style.width=n}if(r||r===0){var i;let n=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=t.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=n}}_updateCanvasSize(){let{canvas:t}=this;if(!t)return;let e=t.clientWidth||t.width,r=t.clientHeight||t.height;if(e!==this.width||r!==this.height){var i;this.width=e,this.height=r,(i=this.viewManager)===null||i===void 0||i.setProps({width:e,height:r}),this.props.onResize({width:e,height:r})}}_createAnimationLoop(t){let{width:e,height:r,gl:i,glOptions:n,debug:s,onError:a,onBeforeRender:o,onAfterRender:l,useDevicePixels:c}=t;return new Iht({width:e,height:r,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:h=>yV(Q(x(x({},n),h),{canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()})),onInitialize:h=>this._setGLContext(h.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:o,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new Ij({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){let{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){let{_pickRequest:t}=this;if(t.event){let{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=r.length>0;let n=i,s=!1;for(let a of r){var e;n=a,s=((e=a.layer)===null||e===void 0?void 0:e.onHover(a,t.event))||s}if(!s&&this.props.onHover&&this.props.onHover(n,t.event),this.props.getTooltip&&this.tooltip){let a=this.props.getTooltip(n);this.tooltip.setTooltip(a,n.x,n.y)}t.event=null}}_updateCursor(){let t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,NS(t,{enable:!0,copyState:!0})),this.tooltip=new Dgt(this.canvas),$o(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);let e=new mj;e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new pvt(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(let i in cR)this.eventManager.on(i,this._onEvent);this.viewManager=new Jft({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});let r=this.viewManager.getViewports()[0];this.layerManager=new Yft(t,{deck:this,stats:this.stats,viewport:r,timeline:e}),this.effectManager=new xgt,this.deckRenderer=new Egt(t),this.deckPicker=new Rgt(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,e){let{gl:r}=this.layerManager.context;$o(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers(x({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects()},e)),this.props.onAfterRender({gl:r})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Ke.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){let e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState=Q(x({},this.viewState),{[t.viewId]:e}),this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){let{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();let e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}_getMetrics(){let{metrics:t,stats:e}=this;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();let r=du.get("Memory Usage");t.bufferMemory=r.get("Buffer Memory").count,t.textureMemory=r.get("Texture Memory").count,t.renderbufferMemory=r.get("Renderbuffer Memory").count,t.gpuMemory=r.get("GPU Memory").count}};k(nE,"defaultProps",Bj);k(nE,"VERSION",Llt.VERSION);var l1=class{constructor(t,e){k(this,"opts",void 0),k(this,"source",void 0),this.opts=e,this.source=t}get value(){return this.source.value}getValue(){let t=this.source.getBuffer(),e=this.getAccessor();if(t)return[t,e];let{value:r}=this.source,{size:i}=e,n=r;if(r&&r.length!==i){n=new Float32Array(i);let s=e.elementOffset||0;for(let a=0;a<i;++a)n[a]=r[s+a]}return n}getAccessor(){return x(x({},this.source.getAccessor()),this.opts)}};function fvt(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function O_(t){return t.stride||t.size*t.bytesPerElement}function Dj(t,e){e.offset&&Ke.removed("shaderAttribute.offset","vertexOffset, elementOffset")();let r=O_(t),i=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,n=e.elementOffset||0,s=i*r+n*t.bytesPerElement+(t.offset||0);return Q(x({},e),{offset:s,stride:r})}function gvt(t,e){let r=Dj(t,e);return{high:r,low:Q(x({},r),{offset:r.offset+t.size*4})}}var vvt=class{constructor(t,e,r){k(this,"gl",void 0),k(this,"id",void 0),k(this,"size",void 0),k(this,"settings",void 0),k(this,"value",void 0),k(this,"doublePrecision",void 0),k(this,"_buffer",void 0),k(this,"state",void 0),this.gl=t,this.id=e.id||"",this.size=e.size||1;let i=e.logicalType||e.type,n=i===5130,{defaultValue:s}=e;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0);let a;n?a=5126:!i&&e.isIndexed?a=t&&VS(t,$i.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let o=fvt(i||a||5126);this.doublePrecision=n,n&&e.fp64===!1&&(o=Float32Array),this.value=null,this.settings=Q(x({},e),{defaultType:o,defaultValue:s,logicalType:i,type:a,size:this.size,bytesPerElement:o.BYTES_PER_ELEMENT}),this.state=Q(x({},r),{externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}),this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){let{isIndexed:t,type:e}=this.settings;this._buffer=new Di(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:e}})}return this._buffer}get byteOffset(){let t=this.getAccessor();return t.vertexOffset?t.vertexOffset*O_(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),sf.release(this.state.allocatedValue)}getShaderAttributes(t,e){if(this.doublePrecision){let r={},i=this.value instanceof Float64Array,n=gvt(this.getAccessor(),e||{});return r[t]=new l1(this,n.high),r["".concat(t,"64Low")]=i?new l1(this,n.low):new Float32Array(this.size),r}if(e){let r=Dj(this.getAccessor(),e);return{[t]:new l1(this,r)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){let e=Array.from(this.value);t=[e,e]}else{let{value:e,numInstances:r,size:i}=this,n=r*i;if(e&&n&&e.length>=n){let s=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let o=0;o<n;)for(let l=0;l<i;l++){let c=e[o++];c<s[l]&&(s[l]=c),c>a[l]&&(a[l]=c)}t=[s,a]}}return this.state.bounds=t,t}setData(t){let{state:e}=this,r;ArrayBuffer.isView(t)?r={value:t}:t instanceof Di?r={buffer:t}:r=t;let i=x(x({},this.settings),r);if(e.bufferAccessor=i,e.bounds=null,r.constant){let n=r.value;if(n=this._normalizeValue(n,[],0),this.settings.normalized&&(n=this.normalizeConstant(n)),!(!e.constant||!this._areValuesEqual(n,this.value)))return!1;e.externalBuffer=null,e.constant=!0,this.value=n}else if(r.buffer){let n=r.buffer;e.externalBuffer=n,e.constant=!1,this.value=r.value||null;let s=r.value instanceof Float64Array;i.type=r.type||n.accessor.type,i.bytesPerElement=n.accessor.BYTES_PER_ELEMENT*(s?2:1),i.stride=O_(i)}else if(r.value){this._checkExternalBuffer(r);let n=r.value;e.externalBuffer=null,e.constant=!1,this.value=n,i.bytesPerElement=n.BYTES_PER_ELEMENT,i.stride=O_(i);let{buffer:s,byteOffset:a}=this;this.doublePrecision&&n instanceof Float64Array&&(n=s1(n,i));let o=n.byteLength+a+i.stride*2;s.byteLength<o&&s.reallocate(o),s.setAccessor(null),s.subData({data:n,offset:a}),i.type=r.type||s.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;let e=this.value,{startOffset:r=0,endOffset:i}=t;this.buffer.subData({data:this.doublePrecision&&e instanceof Float64Array?s1(e,{size:this.size,startIndex:r,endIndex:i}):e.subarray(r,i),offset:r*e.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,e=!1){let{state:r}=this,i=r.allocatedValue,n=sf.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:e});this.value=n;let{buffer:s,byteOffset:a}=this;return s.byteLength<n.byteLength+a&&(s.reallocate(n.byteLength+a),e&&i&&s.subData({data:i instanceof Float64Array?s1(i,this):i,offset:a})),r.allocatedValue=n,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){let{value:e}=t;if(!ArrayBuffer.isView(e))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));let r=this.settings.defaultType,i=!1;if(this.doublePrecision&&(i=e.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(e.constructor.name));!(e instanceof r)&&this.settings.normalized&&!("normalized"in t)&&Ke.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map(e=>(e+128)/255*2-1);case 5122:return new Float32Array(t).map(e=>(e+32768)/65535*2-1);case 5121:return new Float32Array(t).map(e=>e/255);case 5123:return new Float32Array(t).map(e=>e/65535);default:return t}}_normalizeValue(t,e,r){let{defaultValue:i,size:n}=this.settings;if(Number.isFinite(t))return e[r]=t,e;if(!t)return e[r]=i[0],e;switch(n){case 4:e[r+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:e[r+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:e[r+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:e[r+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let s=n;for(;--s>=0;)e[r+s]=Number.isFinite(t[s])?t[s]:i[s]}return e}_areValuesEqual(t,e){if(!t||!e)return!1;let{size:r}=this;for(let i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}},DR=[],LR=[];function Qy(t,e=0,r=1/0){let i=DR,n={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?i=t:t.length>0&&(LR.length=t.length,i=LR):i=DR,(e>0||Number.isFinite(r))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,r),n.index=e-1),{iterable:i,objectInfo:n}}function Lj(t){return t&&t[Symbol.asyncIterator]}function _vt(t,e){let{size:r,stride:i,offset:n,startIndices:s,nested:a}=e,o=t.BYTES_PER_ELEMENT,l=i?i/o:r,c=n?n/o:0,h=Math.floor((t.length-c)/l);return(p,{index:m,target:f})=>{if(!s){let S=m*l+c;for(let C=0;C<r;C++)f[C]=t[S+C];return f}let g=s[m],_=s[m+1]||h,w;if(a){w=new Array(_-g);for(let S=g;S<_;S++){let C=S*l+c;f=new Array(r);for(let b=0;b<r;b++)f[b]=t[C+b];w[S-g]=f}}else if(l===r)w=t.subarray(g*r+c,_*r+c);else{w=new t.constructor((_-g)*r);let S=0;for(let C=g;C<_;C++){let b=C*l+c;for(let P=0;P<r;P++)w[S++]=t[b+P]}}return w}}var bvt=[],P_=[[0,1/0]];function yvt(t,e){if(t===P_||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;let r=[],i=t.length,n=0;for(let s=0;s<i;s++){let a=t[s];a[1]<e[0]?(r.push(a),n=s+1):a[0]>e[1]?r.push(a):e=[Math.min(a[0],e[0]),Math.max(a[1],e[1])]}return r.splice(n,0,e),r}function c1(t){let{source:e,target:r,start:i=0,size:n,getData:s}=t,a=t.end||r.length,o=e.length,l=a-i;if(o>l){r.set(e.subarray(0,l),i);return}if(r.set(e,i),!s)return;let c=o;for(;c<l;){let h=s(c,e);for(let p=0;p<n;p++)r[i+c]=h[p]||0,c++}}function wvt({source:t,target:e,size:r,getData:i,sourceStartIndices:n,targetStartIndices:s}){if(!Array.isArray(s))return c1({source:t,target:e,size:r,getData:i}),e;let a=0,o=0,l=i&&((h,p)=>i(h+o,p)),c=Math.min(n.length,s.length);for(let h=1;h<c;h++){let p=n[h]*r,m=s[h]*r;c1({source:t.subarray(a,p),target:e,start:o,end:m,size:r,getData:l}),a=p,o=m}return o<e.length&&c1({source:[],target:e,start:o,size:r,getData:l}),e}var xvt={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function Nj(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});let r=t.type||"interpolation";return Q(x(x(x({},xvt[r]),e),t),{type:r})}function Fj(t,e){let r=e.getBuffer();return r?[r,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function zj(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function Vj(t){t.push(t.shift())}function sE(t,e){let{doublePrecision:r,settings:i,value:n,size:s}=t,a=r&&n instanceof Float64Array?2:1;return(i.noAlloc?n.length:e*s)*a}function jj({buffer:t,numInstances:e,attribute:r,fromLength:i,fromStartIndices:n,getData:s=a=>a}){let a=r.doublePrecision&&r.value instanceof Float64Array?2:1,o=r.size*a,l=r.byteOffset,c=r.startIndices,h=n&&c,p=sE(r,e),m=r.isConstant;if(!h&&i>=p)return;let f=m?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!m){let S=s;s=(C,b)=>r.normalizeConstant(S(C,b))}let g=m?(S,C)=>s(f,C):(S,C)=>s(f.subarray(S,S+o),C),_=t.getData({length:i}),w=new Float32Array(p);wvt({source:_,target:w,sourceStartIndices:n,targetStartIndices:c,size:o,getData:g}),t.byteLength<w.byteLength+l&&t.reallocate(w.byteLength+l),t.subData({data:w,offset:l})}var aE=class extends vvt{constructor(t,e){super(t,e,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:P_}),k(this,"constant",!1),this.settings.update=e.update||(e.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){let e=this.state.needsRedraw;return this.state.needsRedraw=e&&!t,e}getUpdateTriggers(){let{accessor:t}=this.settings;return[this.id].concat(typeof t!="function"&&t||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;let{accessor:e}=this.settings,r=this.settings.transition,i=Array.isArray(e)?t[e.find(n=>t[n])]:t[e];return Nj(i,r)}setNeedsUpdate(t=this.id,e){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),e){let{startRow:r=0,endRow:i=1/0}=e;this.state.updateRanges=yvt(this.state.updateRanges,[r,i])}else this.state.updateRanges=P_}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=bvt}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){let{state:e,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(t,e.updateRanges!==P_),!0):!1}updateBuffer({numInstances:t,data:e,props:r,context:i}){if(!this.needsUpdate())return!1;let{state:{updateRanges:n},settings:{update:s,noAlloc:a}}=this,o=!0;if(s){for(let[l,c]of n)s.call(i,this,{data:e,startRow:l,endRow:c,props:r,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(let[l,c]of n){let h=Number.isFinite(l)?this.getVertexOffset(l):0,p=Number.isFinite(c)?this.getVertexOffset(c):a||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:h,endOffset:p})}this._checkAttributeArray()}else o=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),o}setConstantValue(t){return t===void 0||typeof t=="function"?!1:(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){let{state:e}=this;return t?(this.clearNeedsUpdate(),e.lastExternalBuffer===t||(e.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(e.lastExternalBuffer=null,!1)}setBinaryValue(t,e=null){let{state:r,settings:i}=this;if(!t)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===t)return this.clearNeedsUpdate(),!0;if(r.binaryValue=t,this.setNeedsRedraw(),i.transform||e!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});let n=t;$r(ArrayBuffer.isView(n.value),"invalid ".concat(i.accessor));let s=!!n.size&&n.size!==this.size;return r.binaryAccessor=_vt(n.value,{size:n.size||this.size,stride:n.stride,offset:n.offset,startIndices:e,nested:s}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){let{startIndices:e}=this;return(e?t<e.length?e[t]:this.numInstances:t)*this.size}getShaderAttributes(){let t=this.settings.shaderAttributes||{[this.id]:null},e={};for(let r in t)Object.assign(e,super.getShaderAttributes(r,t[r]));return e}_autoUpdater(t,{data:e,startRow:r,endRow:i,props:n,numInstances:s}){if(t.constant)return;let{settings:a,state:o,value:l,size:c,startIndices:h}=t,{accessor:p,transform:m}=a,f=o.binaryAccessor||(typeof p=="function"?p:n[p]);$r(typeof f=="function",'accessor "'.concat(p,'" is not a function'));let g=t.getVertexOffset(r),{iterable:_,objectInfo:w}=Qy(e,r,i);for(let S of _){w.index++;let C=f(S,w);if(m&&(C=m.call(this,C)),h){let b=(w.index<h.length-1?h[w.index+1]:s)-h[w.index];if(C&&Array.isArray(C[0])){let P=g;for(let L of C)t._normalizeValue(L,l,P),P+=c}else C&&C.length>c?l.set(C,g):(t._normalizeValue(C,w.target,0),Zft({target:l,source:w.target,start:g,count:b}));g+=b*c}else t._normalizeValue(C,l,g),g+=c}}_validateAttributeUpdaters(){let{settings:t}=this;if(!(t.noAlloc||typeof t.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){let{value:t}=this,e=Math.min(4,this.size);if(t&&t.length>=e){let r=!0;switch(e){case 4:r=r&&Number.isFinite(t[3]);case 3:r=r&&Number.isFinite(t[2]);case 2:r=r&&Number.isFinite(t[1]);case 1:r=r&&Number.isFinite(t[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}},Cvt=class{constructor({gl:t,attribute:e,timeline:r}){k(this,"gl",void 0),k(this,"type","interpolation"),k(this,"attributeInTransition",void 0),k(this,"settings",void 0),k(this,"attribute",void 0),k(this,"transition",void 0),k(this,"currentStartIndices",void 0),k(this,"currentLength",void 0),k(this,"transform",void 0),k(this,"buffers",void 0),this.gl=t,this.transition=new Zf(r),this.attribute=e,this.attributeInTransition=new aE(t,e.settings),this.currentStartIndices=e.startIndices,this.currentLength=0,this.transform=Avt(t,e);let i={byteLength:0,usage:35050};this.buffers=[new Di(t,i),new Di(t,i)]}get inProgress(){return this.transition.inProgress}start(t,e){if(t.duration<=0){this.transition.cancel();return}this.settings=t;let{gl:r,buffers:i,attribute:n}=this;Vj(i);let s={numInstances:e,attribute:n,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(let a of i)jj(x({buffer:a},s));this.currentStartIndices=n.startIndices,this.currentLength=sE(n,e),this.attributeInTransition.setData({buffer:i[1],value:n.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/n.size),sourceBuffers:{aFrom:i[0],aTo:Fj(r,n)},feedbackBuffers:{vCurrent:i[1]}})}update(){let t=this.transition.update();if(t){let{duration:e,easing:r}=this.settings,{time:i}=this.transition,n=i/e;r&&(n=r(n)),this.transform.run({uniforms:{time:n}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(let t of this.buffers)t.delete();this.buffers.length=0}},kvt=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function Avt(t,e){let r=zj(e.size);return new XS(t,{vs:kvt,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}var Svt=class{constructor({gl:t,attribute:e,timeline:r}){k(this,"gl",void 0),k(this,"type","spring"),k(this,"attributeInTransition",void 0),k(this,"settings",void 0),k(this,"attribute",void 0),k(this,"transition",void 0),k(this,"currentStartIndices",void 0),k(this,"currentLength",void 0),k(this,"texture",void 0),k(this,"framebuffer",void 0),k(this,"transform",void 0),k(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new Zf(r),this.attribute=e,this.attributeInTransition=new aE(t,Q(x({},e.settings),{normalized:!1})),this.currentStartIndices=e.startIndices,this.currentLength=0,this.texture=Tvt(t),this.framebuffer=Ivt(t,this.texture),this.transform=Evt(t,e,this.framebuffer);let i={byteLength:0,usage:35050};this.buffers=[new Di(t,i),new Di(t,i),new Di(t,i)]}get inProgress(){return this.transition.inProgress}start(t,e){let{gl:r,buffers:i,attribute:n}=this,s={numInstances:e,attribute:n,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(let a of i)jj(x({buffer:a},s));this.settings=t,this.currentStartIndices=n.startIndices,this.currentLength=sE(n,e),this.attributeInTransition.setData({buffer:i[1],value:n.value}),this.transition.start(Q(x({},t),{duration:1/0})),this.transform.update({elementCount:Math.floor(this.currentLength/n.size),sourceBuffers:{aTo:Fj(r,n)}})}update(){let{buffers:t,transform:e,framebuffer:r,transition:i}=this;if(!i.update())return!1;let n=this.settings;return e.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),e.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:n.stiffness,damping:n.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),Vj(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),Wy(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(let t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}};function Evt(t,e,r){let i=zj(e.size);return new XS(t,{framebuffer:r,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}function Tvt(t){return new Kr(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function Ivt(t,e){return new Fr(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}var Ovt={interpolation:Cvt,spring:Svt},Pvt=class{constructor(t,{id:e,timeline:r}){k(this,"id",void 0),k(this,"isSupported",void 0),k(this,"gl",void 0),k(this,"timeline",void 0),k(this,"transitions",void 0),k(this,"needsRedraw",void 0),k(this,"numInstances",void 0),this.id=e,this.gl=t,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=XS.isSupported(t)}finalize(){for(let t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:e,numInstances:r}){this.numInstances=r||1;for(let i in t){let n=t[i],s=n.getTransitionSetting(e);s&&this._updateAttribute(i,n,s)}for(let i in this.transitions){let n=t[i];(!n||!n.getTransitionSetting(e))&&this._removeTransition(i)}}hasAttribute(t){let e=this.transitions[t];return e&&e.inProgress}getAttributes(){let t={};for(let e in this.transitions){let r=this.transitions[e];r.inProgress&&(t[e]=r.attributeInTransition)}return t}run(){if(!this.isSupported||this.numInstances===0)return!1;for(let e in this.transitions)this.transitions[e].update()&&(this.needsRedraw=!0);let t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,e,r){let i=this.transitions[t],n=!i||i.type!==r.type;if(n){if(!this.isSupported){Ke.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();return}i&&this._removeTransition(t);let s=Ovt[r.type];s?this.transitions[t]=new s({attribute:e,timeline:this.timeline,gl:this.gl}):(Ke.error("unsupported transition type '".concat(r.type,"'"))(),n=!1)}(n||e.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(r,this.numInstances))}},NR="attributeManager.invalidate",Mvt="attributeManager.updateStart",Rvt="attributeManager.updateEnd",Bvt="attribute.updateStart",Dvt="attribute.allocate",Lvt="attribute.updateEnd",Nvt=class{constructor(t,{id:e="attribute-manager",stats:r,timeline:i}={}){k(this,"id",void 0),k(this,"gl",void 0),k(this,"attributes",void 0),k(this,"updateTriggers",void 0),k(this,"needsRedraw",void 0),k(this,"userData",void 0),k(this,"stats",void 0),k(this,"attributeTransitionManager",void 0),this.id=e,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new Pvt(t,{id:"".concat(e,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(let t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){let e=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,e&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(let e of t)this.attributes[e]!==void 0&&(this.attributes[e].delete(),delete this.attributes[e])}invalidate(t,e){let r=this._invalidateTrigger(t,e);sn(NR,this,t,r)}invalidateAll(t){for(let e in this.attributes)this.attributes[e].setNeedsUpdate(e,t);sn(NR,this,"all")}update({data:t,numInstances:e,startIndices:r=null,transitions:i,props:n={},buffers:s={},context:a={}}){let o=!1;sn(Mvt,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(let l in this.attributes){let c=this.attributes[l],h=c.settings.accessor;c.startIndices=r,c.numInstances=e,n[l]&&Ke.removed("props.".concat(l),"data.attributes.".concat(l))(),c.setExternalBuffer(s[l])||c.setBinaryValue(typeof h=="string"?s[h]:void 0,t.startIndices)||typeof h=="string"&&!s[h]&&c.setConstantValue(n[h])||c.needsUpdate()&&(o=!0,this._updateAttribute({attribute:c,numInstances:e,data:t,props:n,context:a})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}o&&sn(Rvt,this,e),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:e,transitions:i})}updateTransition(){let{attributeTransitionManager:t}=this,e=t.run();return this.needsRedraw=this.needsRedraw||e,e}getAttributes(){return this.attributes}getChangedAttributes(t={clearChangedFlags:!1}){let{attributes:e,attributeTransitionManager:r}=this,i=x({},r.getAttributes());for(let n in e){let s=e[n];s.needsRedraw(t)&&!r.hasAttribute(n)&&(i[n]=s)}return i}getShaderAttributes(t,e={}){t||(t=this.getAttributes());let r={};for(let i in t)e[i]||Object.assign(r,t[i].getShaderAttributes());return r}_add(t,e={}){for(let r in t){let i=t[r];this.attributes[r]=this._createAttribute(r,i,e)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,e,r){let i=Q(x({},e),{id:t,size:e.isIndexed&&1||e.size||1,divisor:r.instanced?1:e.divisor||0});return new aE(this.gl,i)}_mapUpdateTriggersToAttributes(){let t={};for(let e in this.attributes)this.attributes[e].getUpdateTriggers().forEach(r=>{t[r]||(t[r]=[]),t[r].push(e)});this.updateTriggers=t}_invalidateTrigger(t,e){let{attributes:r,updateTriggers:i}=this,n=i[t];return n&&n.forEach(s=>{let a=r[s];a&&a.setNeedsUpdate(a.id,e)}),n}_updateAttribute(t){let{attribute:e,numInstances:r}=t;if(sn(Bvt,e),e.constant){e.setConstantValue(e.value);return}e.allocate(r)&&sn(Dvt,e,r),e.updateBuffer(t)&&(this.needsRedraw=!0,sn(Lvt,e,r))}},Fvt=class extends Zf{get value(){return this._value}_onUpdate(){let{time:t,settings:{fromValue:e,toValue:r,duration:i,easing:n}}=this,s=n(t/i);this._value=wb(e,r,s)}},FR=1e-5;function zR(t,e,r,i,n){let s=e-t,a=(r-e)*n,o=-s*i;return a+o+s+e}function zvt(t,e,r,i,n){if(Array.isArray(r)){let s=[];for(let a=0;a<r.length;a++)s[a]=zR(t[a],e[a],r[a],i,n);return s}return zR(t,e,r,i,n)}function VR(t,e){if(Array.isArray(t)){let r=0;for(let i=0;i<t.length;i++){let n=t[i]-e[i];r+=n*n}return Math.sqrt(r)}return Math.abs(t-e)}var Vvt=class extends Zf{get value(){return this._currValue}_onUpdate(){let{fromValue:t,toValue:e,damping:r,stiffness:i}=this.settings,{_prevValue:n=t,_currValue:s=t}=this,a=zvt(n,s,e,r,i),o=VR(a,e),l=VR(a,s);o<FR&&l<FR&&(a=e,this.end()),this._prevValue=s,this._currValue=a}},jvt={interpolation:Fvt,spring:Vvt},Uvt=class{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,e,r,i){let{transitions:n}=this;if(n.has(t)){let o=n.get(t),{value:l=o.settings.fromValue}=o;e=l,this.remove(t)}if(i=Nj(i),!i)return;let s=jvt[i.type];if(!s){Ke.error("unsupported transition type '".concat(i.type,"'"))();return}let a=new s(this.timeline);a.start(Q(x({},i),{fromValue:e,toValue:r})),n.set(t,a)}remove(t){let{transitions:e}=this;e.has(t)&&(e.get(t).cancel(),e.delete(t))}update(){let t={};for(let[e,r]of this.transitions)r.update(),t[e]=r.value,r.inProgress||this.remove(e);return t}clear(){for(let t of this.transitions.keys())this.remove(t)}};function Hvt(t){let e=oE(t);for(let r in e){let i=e[r],{validate:n}=i;if(n&&!n(t[r],i))throw new Error("Invalid prop ".concat(r,": ").concat(t[r]))}}function Gvt(t,e){let r=Uj({newProps:t,oldProps:e,propTypes:oE(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=Zvt(t,e),n=!1;return i||(n=$vt(t,e)),{dataChanged:i,propsChanged:r,updateTriggersChanged:n,extensionsChanged:Xvt(t,e),transitionsChanged:Wvt(t,e)}}function Wvt(t,e){if(!t.transitions)return!1;let r={},i=oE(t),n=!1;for(let s in t.transitions){let a=i[s],o=a&&a.type;(o==="number"||o==="color"||o==="array")&&sk(t[s],e[s],a)&&(r[s]=!0,n=!0)}return n?r:!1}function Uj({newProps:t,oldProps:e,ignoreProps:r={},propTypes:i={},triggerName:n="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(n," changed shallowly");for(let s of Object.keys(t))if(!(s in r)){if(!(s in e))return"".concat(n,".").concat(s," added");let a=sk(t[s],e[s],i[s]);if(a)return"".concat(n,".").concat(s," ").concat(a)}for(let s of Object.keys(e))if(!(s in r)){if(!(s in t))return"".concat(n,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){let a=sk(t[s],e[s],i[s]);if(a)return"".concat(n,".").concat(s," ").concat(a)}}return!1}function sk(t,e,r){let i=r&&r.equal;return i&&!i(t,e,r)||!i&&(i=t&&e&&t.equals,i&&!i.call(t,e))?"changed deeply":!i&&e!==t?"changed shallowly":null}function Zvt(t,e){if(e===null)return"oldProps is null, initial diff";let r=!1,{dataComparator:i,_dataDiff:n}=t;return i?i(t.data,e.data)||(r="Data comparator detected a change"):t.data!==e.data&&(r="A new data container was supplied"),r&&n&&(r=n(t.data,e.data)||r),r}function $vt(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&jR(t,e,"all"))return{all:!0};let r={},i=!1;for(let n in t.updateTriggers)n!=="all"&&jR(t,e,n)&&(r[n]=!0,i=!0);return i?r:!1}function Xvt(t,e){if(e===null)return!0;let r=e.extensions,{extensions:i}=t;if(i===r)return!1;if(!r||!i||i.length!==r.length)return!0;for(let n=0;n<i.length;n++)if(!i[n].equals(r[n]))return!0;return!1}function jR(t,e,r){let i=t.updateTriggers[r];i=i??{};let n=e.updateTriggers[r];return n=n??{},Uj({oldProps:n,newProps:i,triggerName:r})}function oE(t){let e=t[Tb],r=e&&e.constructor;return r?r._propTypes:{}}var qvt="count(): argument not an object",Kvt="count(): argument not a container";function Yvt(t){if(!Qvt(t))throw new Error(qvt);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(Jvt(t))return Object.keys(t).length;throw new Error(Kvt)}function Jvt(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function Qvt(t){return t!==null&&typeof t=="object"}function t_t(t,e){if(!e)return t;let r=x(x({},t),e);if("defines"in e&&(r.defines=x(x({},t.defines),e.defines)),"modules"in e&&(r.modules=(t.modules||[]).concat(e.modules),e.modules.some(i=>i.name==="project64"))){let i=r.modules.findIndex(n=>n.name==="project32");i>=0&&r.modules.splice(i,1)}if("inject"in e)if(!t.inject)r.inject=e.inject;else{let i=x({},t.inject);for(let n in e.inject)i[n]=(i[n]||"")+e.inject[n];r.inject=i}return r}var e_t={10241:9987,10240:9729,10242:33071,10243:33071},ak={};function i_t(t,e){let r=t.context&&t.context.gl;if(!r||!e)return null;if(e instanceof Kr)return e;e.constructor&&e.constructor.name!=="Object"&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});let n=new Kr(r,Q(x({},e),{parameters:x(x(x({},e_t),i),t.props.textureParameters)}));return ak[n.id]=!0,n}function r_t(t){!t||!(t instanceof Kr)||ak[t.id]&&(t.delete(),delete ak[t.id])}var n_t={boolean:{validate(t,e){return!0},equal(t,e,r){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||of(t)&&(t.length===3||t.length===4)},equal(t,e,r){return u1(t,e)}},accessor:{validate(t,e){let r=Ib(t);return r==="function"||r===Ib(e.value)},equal(t,e,r){return typeof e=="function"?!0:u1(t,e)}},array:{validate(t,e){return e.optional&&!t||of(t)},equal(t,e,r){return r.compare?u1(t,e):t===e}},object:{equal(t,e,r){return r.compare?lp(t,e):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,r){return!r.compare||t===e}},data:{transform:(t,e,r)=>{let{dataTransform:i}=r.props;return i&&t?i(t):t}},image:{transform:(t,e,r)=>i_t(r,t),release:t=>{r_t(t)}}};function u1(t,e){if(t===e)return!0;if(!of(t)||!of(e))return!1;let r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}function s_t(t){let e={},r={},i={};for(let[n,s]of Object.entries(t)){let a=s?.deprecatedFor;if(a)i[n]=Array.isArray(a)?a:[a];else{let o=a_t(n,s);e[n]=o,r[n]=o.value}}return{propTypes:e,defaultProps:r,deprecatedProps:i}}function a_t(t,e){switch(Ib(e)){case"object":return em(t,e);case"array":return em(t,{type:"array",value:e,compare:!1});case"boolean":return em(t,{type:"boolean",value:e});case"number":return em(t,{type:"number",value:e});case"function":return em(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function em(t,e){return"type"in e?x(x({name:t},n_t[e.type]),e):"value"in e?x({name:t,type:Ib(e.value)},e):{name:t,type:"object",value:e}}function of(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Ib(t){return of(t)?"array":t===null?"null":typeof t}function o_t(t,e){let r=Hj(t.constructor),i=Object.create(r);i[Tb]=t,i[Ru]={},i[Ul]={};for(let n=0;n<e.length;++n){let s=e[n];for(let a in s)i[a]=s[a]}return Object.freeze(i),i}function Hj(t){return Ob(t,"_mergedDefaultProps")||(l_t(t),t._mergedDefaultProps)}function l_t(t){if(!t.prototype)return;let e=Object.getPrototypeOf(t),r=Hj(e),i=Ob(t,"defaultProps")||{},n=s_t(i),s=c_t(n.defaultProps,r,t),a=x(x({},e._propTypes),n.propTypes);h_t(s,a);let o=x(x({},e._deprecatedProps),n.deprecatedProps);u_t(s,o),t._mergedDefaultProps=s,t._propTypes=a,t._deprecatedProps=o}function c_t(t,e,r){let i=Object.create(null);Object.assign(i,e,t);let n=p_t(r);return delete t.id,Object.defineProperties(i,{id:{writable:!0,value:n}}),i}function u_t(t,e){for(let r in e)Object.defineProperty(t,r,{enumerable:!1,set(i){let n="".concat(this.id,": ").concat(r);for(let s of e[r])Gj(this,s)||(this[s]=i);Ke.deprecated(n,e[r].join("/"))()}})}function h_t(t,e){let r={},i={};for(let n in e){let s=e[n],{name:a,value:o}=s;s.async&&(r[a]=o,i[a]=d_t(a))}t[ld]=r,t[Ru]={},Object.defineProperties(t,i)}function d_t(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||Lj(e)?this[Ru][t]=e:this[Ul][t]=e},get(){if(this[Ul]){if(t in this[Ul])return this[Ul][t]||this[ld][t];if(t in this[Ru]){let e=this[Tb]&&this[Tb].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[ld][t]}}return this[ld][t]}}}function Gj(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ob(t,e){return Gj(t,e)&&t[e]}function p_t(t){let e=Ob(t,"layerName")||Ob(t,"componentName");return e||Ke.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}var m_t=0,lE=class{constructor(...t){k(this,"id",void 0),k(this,"props",void 0),k(this,"count",void 0),this.props=o_t(this,t),this.id=this.props.id,this.count=m_t++}clone(t){let{props:e}=this,r={};for(let i in e[ld])i in e[Ul]?r[i]=e[Ul][i]:i in e[Ru]&&(r[i]=e[Ru][i]);return new this.constructor(x(x(x({},e),r),t))}};k(lE,"componentName","Component");k(lE,"defaultProps",{});var f_t=Object.freeze({}),g_t=class{constructor(t){k(this,"component",void 0),k(this,"onAsyncPropUpdated",void 0),k(this,"asyncProps",void 0),k(this,"oldProps",void 0),k(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(let t in this.asyncProps){let e=this.asyncProps[t];e&&e.type&&e.type.release&&e.type.release(e.resolvedValue,e.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||f_t}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){let e=this.asyncProps[t];return e&&e.resolvedValue}isAsyncPropLoading(t){if(t){let e=this.asyncProps[t];return!!(e&&e.pendingLoadCount>0&&e.pendingLoadCount!==e.resolvedLoadCount)}for(let e in this.asyncProps)if(this.isAsyncPropLoading(e))return!0;return!1}reloadAsyncProp(t,e){this._watchPromise(t,Promise.resolve(e))}setAsyncProps(t){let e=t[Ul]||{},r=t[Ru]||t,i=t[ld]||{};for(let n in e){let s=e[n];this._createAsyncPropData(n,i[n]),this._updateAsyncProp(n,s),e[n]=this.getAsyncProp(n)}for(let n in r){let s=r[n];this._createAsyncPropData(n,i[n]),this._updateAsyncProp(n,s)}}_fetch(t,e){return null}_onResolve(t,e){}_onError(t,e){}_updateAsyncProp(t,e){if(this._didAsyncInputValueChange(t,e)){if(typeof e=="string"&&(e=this._fetch(t,e)),e instanceof Promise){this._watchPromise(t,e);return}if(Lj(e)){this._resolveAsyncIterable(t,e);return}this._setPropValue(t,e)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(let t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,e){let r=this.asyncProps[t];return e===r.resolvedValue||e===r.lastValue?!1:(r.lastValue=e,!0)}_setPropValue(t,e){this._freezeAsyncOldProps();let r=this.asyncProps[t];r&&(e=this._postProcessValue(r,e),r.resolvedValue=e,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(t,e,r){let i=this.asyncProps[t];i&&r>=i.resolvedLoadCount&&e!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=e,i.resolvedLoadCount=r,this.onAsyncPropUpdated(t,e))}_watchPromise(t,e){let r=this.asyncProps[t];if(r){r.pendingLoadCount++;let i=r.pendingLoadCount;e.then(n=>{n=this._postProcessValue(r,n),this._setAsyncPropValue(t,n,i),this._onResolve(t,n)}).catch(n=>{this._onError(t,n)})}}_resolveAsyncIterable(t,e){return Dt(this,null,function*(){if(t!=="data"){this._setPropValue(t,e);return}let r=this.asyncProps[t];if(!r)return;r.pendingLoadCount++;let i=r.pendingLoadCount,n=[],s=0;try{for(var a=iA(e),o,l,c;o=!(l=yield a.next()).done;o=!1){let h=l.value,{dataTransform:p}=this.component.props;p?n=p(h,n):n=n.concat(h),Object.defineProperty(n,"__diff",{enumerable:!1,value:[{startRow:s,endRow:n.length}]}),s=n.length,this._setAsyncPropValue(t,n,i)}}catch{c=[l]}finally{try{o&&(l=a.return)&&(yield l.call(a))}finally{if(c)throw c[0]}}this._onResolve(t,n)})}_postProcessValue(t,e){let r=t.type;return r&&(r.release&&r.release(t.resolvedValue,r,this.component),r.transform)?r.transform(e,r,this.component):e}_createAsyncPropData(t,e){if(!this.asyncProps[t]){let r=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:r&&r[t],lastValue:null,resolvedValue:e,pendingLoadCount:0,resolvedLoadCount:0}}}},v_t=class extends g_t{constructor({attributeManager:t,layer:e}){super(e),k(this,"attributeManager",void 0),k(this,"needsRedraw",void 0),k(this,"needsUpdate",void 0),k(this,"subLayers",void 0),k(this,"usesPickingColorCache",void 0),k(this,"changeFlags",void 0),k(this,"viewport",void 0),k(this,"uniformTransitions",void 0),k(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(t){this.component=t}_fetch(t,e){let r=this.component.props.fetch;return r?r(e,{propName:t,layer:this.layer}):super._fetch(t,e)}_onResolve(t,e){let r=this.component.props.onDataLoad;t==="data"&&r&&r(e,{propName:t,layer:this.layer})}_onError(t,e){this.layer.raiseError(e,"loading ".concat(t," of ").concat(this.layer))}},__t="layer.changeFlag",b_t="layer.initialize",y_t="layer.update",w_t="layer.finalize",x_t="layer.matched",UR=2**24-1,C_t=Object.freeze([]),k_t=Zy(({oldViewport:t,viewport:e})=>t.equals(e)),Ia=new Uint8ClampedArray(0),A_t={data:{type:"data",value:C_t,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:r,loaders:i,loadOptions:n,signal:s})=>{let{resourceManager:a}=r.context;if(n=n||r.getLoadOptions(),i=i||r.props.loaders,s){var o;n=Q(x({},n),{fetch:Q(x({},(o=n)===null||o===void 0?void 0:o.fetch),{signal:s})})}let l=a.contains(t);return!l&&!n&&(a.add({resourceId:t,data:tf(t,i),persistent:!1}),l=!0),l?a.subscribe({resourceId:t,onChange:c=>{var h;return(h=r.internalState)===null||h===void 0?void 0:h.reloadAsyncProp(e,c)},consumerId:r.id,requestId:e}):tf(t,i,n)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:Gf.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:ui.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},Zu=class extends lE{constructor(...t){super(...t),k(this,"internalState",null),k(this,"lifecycle",Zh.NO_STATE),k(this,"context",void 0),k(this,"state",void 0),k(this,"parent",null)}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){let t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){$r(this.internalState);let e=this.internalState.viewport||this.context.viewport,r=Sj(t,{viewport:e,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,n,s]=wj(r,e.pixelProjectionMatrix);return t.length===2?[i,n]:[i,n,s]}unproject(t){return $r(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,e){$r(this.internalState);let r=this.internalState.viewport||this.context.viewport;return Wft(t,x({viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem},e))}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(let e of this.getModels())e.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){let{coordinateSystem:t}=this.props;return t===ui.DEFAULT||t===ui.LNGLAT||t===ui.CARTESIAN}onHover(t,e){return this.props.onHover&&this.props.onHover(t,e)||!1}onClick(t,e){return this.props.onClick&&this.props.onClick(t,e)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,e=[]){return e[0]=t+1&255,e[1]=t+1>>8&255,e[2]=t+1>>8>>8&255,e}decodePickingColor(t){$r(t instanceof Uint8Array);let[e,r,i]=t;return e+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:Yvt(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;let e=this.getAttributeManager();if(!e)return null;let{positions:r,instancePositions:i}=e.attributes;return(t=r||i)===null||t===void 0?void 0:t.getBounds()}getShaders(t){for(let e of this.props.extensions)t=t_t(t,e.getShaders.call(this,e));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){let e=this.getAttributeManager(),{dataChanged:r}=t.changeFlags;if(r&&e)if(Array.isArray(r))for(let o of r)e.invalidateAll(o);else e.invalidateAll();let{props:i,oldProps:n}=t,s=Number.isInteger(n.highlightedObjectIndex)||n.pickable,a=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(s!==a&&e){let{pickingColors:o,instancePickingColors:l}=e.attributes,c=o||l;c&&(a&&c.constant&&(c.constant=!1,e.invalidate(c.id)),!c.value&&!a&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(t){for(let r of this.getModels())r.delete();let e=this.getAttributeManager();e&&e.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(let e of this.getModels())e.draw(t)}getPickingInfo({info:t,mode:e,sourceLayer:r}){let{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(t,e){var r,i;if(e&&(t.message="".concat(e,": ").concat(t.message)),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,t))){var n,s;(n=this.context)===null||n===void 0||(s=n.onError)===null||s===void 0||s.call(n,t,this)}}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var t;return((t=this.internalState)===null||t===void 0?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;let e=this.internalState.viewport;this.internalState.viewport=t,(!e||!k_t({oldViewport:e,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){let e=this.getAttributeManager();e&&(t==="all"?e.invalidateAll():e.invalidate(t))}updateAttributes(t){for(let e of this.getModels())this._setModelAttributes(e,t)}_updateAttributes(){let t=this.getAttributeManager();if(!t)return;let e=this.props,r=this.getNumInstances(),i=this.getStartIndices();t.update({data:e.data,numInstances:r,startIndices:i,props:e,transitions:e.transitions,buffers:e.data.attributes,context:this});let n=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(n)}_updateAttributeTransition(){let t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){let{uniformTransitions:t}=this.internalState;if(t.active){let e=t.update(),r=Object.create(this.props);for(let i in e)Object.defineProperty(r,i,{value:e[i]});return r}return this.props}calculateInstancePickingColors(t,{numInstances:e}){if(t.constant)return;let r=Math.floor(Ia.length/3);if(this.internalState.usesPickingColorCache=!0,r<e){e>UR&&Ke.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Ia=sf.allocate(Ia,e,{size:3,copy:!0,maxCount:Math.max(e,UR)});let i=Math.floor(Ia.length/3),n=[];for(let s=r;s<i;s++)this.encodePickingColor(s,n),Ia[s*3+0]=n[0],Ia[s*3+1]=n[1],Ia[s*3+2]=n[2]}t.value=Ia.subarray(0,e*3)}_setModelAttributes(t,e){let r=this.getAttributeManager(),i=t.userData.excludeAttributes||{},n=r.getShaderAttributes(e,i);t.setAttributes(n)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){let{pickingColors:e,instancePickingColors:r}=this.getAttributeManager().attributes,i=e||r;if(!i)return;let n=i.getVertexOffset(t),s=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(s-n),offset:n})}restorePickingColors(){let{pickingColors:t,instancePickingColors:e}=this.getAttributeManager().attributes,r=t||e;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==Ia.buffer&&(r.value=Ia.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){$r(!this.internalState),$r(Number.isFinite(this.props.coordinateSystem)),sn(b_t,this);let t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new v_t({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Ke.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new Uvt(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(let e of this.props.extensions)e.initializeState.call(this,this.context,e);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){sn(x_t,this,this===t);let{state:e,internalState:r}=t;this!==t&&(this.internalState=r,this.internalState.layer=this,this.state=e,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){let t=this.needsUpdate();if(sn(y_t,this,t),!t)return;let e=this.props,r=this.context,i=this.internalState,n=r.viewport,s=this._updateUniformTransition();i.propsInTransition=s,r.viewport=i.viewport||n,this.props=s;try{let a=this._getUpdateParams(),o=this.getModels();if(r.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(let c of this.props.extensions)c.updateState.call(this,a,c);let l=this.getModels()[0]!==o[0];this._postUpdate(a,l)}finally{r.viewport=n,this.props=e,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){sn(w_t,this),this.finalizeState(this.context);for(let t of this.props.extensions)t.finalizeState.call(this,t)}_drawLayer({moduleParameters:t=null,uniforms:e={},parameters:r={}}){this._updateAttributeTransition();let i=this.props,n=this.context;this.props=this.internalState.propsInTransition||i;let s=this.props.opacity;e.opacity=Math.pow(s,1/2.2);try{t&&this.setModuleParameters(t);let{getPolygonOffset:a}=this.props,o=a&&a(e)||[0,0];$o(n.gl,{polygonOffset:o}),Ns(n.gl,r,()=>{let l={moduleParameters:t,uniforms:e,parameters:r,context:n};for(let c of this.props.extensions)c.draw.call(this,l,c);this.draw(l)})}finally{this.props=i}}getChangeFlags(){var t;return(t=this.internalState)===null||t===void 0?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;let{changeFlags:e}=this.internalState;for(let i in t)if(t[i]){let n=!1;switch(i){case"dataChanged":let s=t[i],a=e[i];s&&Array.isArray(a)&&(e.dataChanged=Array.isArray(s)?a.concat(s):s,n=!0);default:e[i]||(e[i]=t[i],n=!0)}n&&sn(__t,this,i,t)}let r=!!(e.dataChanged||e.updateTriggersChanged||e.propsChanged||e.extensionsChanged);e.propsOrDataChanged=r,e.somethingChanged=r||e.viewportChanged||e.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,e){let r=Gvt(t,e);if(r.updateTriggersChanged)for(let n in r.updateTriggersChanged)r.updateTriggersChanged[n]&&this.invalidateAttribute(n);if(r.transitionsChanged)for(let n in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(n,e[n],t[n],(i=t.transitions)===null||i===void 0?void 0:i[n])}return this.setChangeFlags(r)}validateProps(){Hvt(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){let e={pickingSelectedColor:t.picked?t.color:null},{highlightColor:r}=this.props;t.picked&&typeof r=="function"&&(e.pickingHighlightColor=r(t)),this.setModuleParameters(e),this.setNeedsRedraw()}_getAttributeManager(){let t=this.context;return new Nvt(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,e){let{props:r,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();let{model:n}=this.state;n?.setInstanceCount(this.getNumInstances());let{autoHighlight:s,highlightedObjectIndex:a,highlightColor:o}=r;if(e||i.autoHighlight!==s||i.highlightedObjectIndex!==a||i.highlightColor!==o){let l={};s||(l.pickingSelectedColor=null),Array.isArray(o)&&(l.pickingHighlightColor=o),(e||a!==i.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let e=!1;e=e||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;let r=this.getAttributeManager(),i=r?r.getNeedsRedraw(t):!1;return e=e||i,e}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}};k(Zu,"defaultProps",A_t);k(Zu,"layerName","Layer");var S_t="compositeLayer.renderLayers",cE=class extends Zu{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){let{object:e}=t;return e&&e.__source&&e.__source.parent&&e.__source.parent.id===this.id&&(t.object=e.__source.object,t.index=e.__source.index),t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,e){return e&&e.length}getSubLayerClass(t,e){let{_subLayerProps:r}=this.props;return r&&r[t]&&r[t].type||e}getSubLayerRow(t,e,r){return t.__source={parent:this,object:e,index:r},t}getSubLayerAccessor(t){if(typeof t=="function"){let e={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(e.index=r.__source.index,t(r.__source.object,e)):t(r,i)}return t}getSubLayerProps(t={}){var e;let{opacity:r,pickable:i,visible:n,parameters:s,getPolygonOffset:a,highlightedObjectIndex:o,autoHighlight:l,highlightColor:c,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:m,positionFormat:f,modelMatrix:g,extensions:_,fetch:w,operation:S,_subLayerProps:C}=this.props,b={id:"",updateTriggers:{},opacity:r,pickable:i,visible:n,parameters:s,getPolygonOffset:a,highlightedObjectIndex:o,autoHighlight:l,highlightColor:c,coordinateSystem:h,coordinateOrigin:p,wrapLongitude:m,positionFormat:f,modelMatrix:g,extensions:_,fetch:w,operation:S},P=C&&t.id&&C[t.id],L=P&&P.updateTriggers,H=t.id||"sublayer";if(P){let M=this.constructor._propTypes,E=t.type?t.type._propTypes:{};for(let it in P){let X=E[it]||M[it];X&&X.type==="accessor"&&(P[it]=this.getSubLayerAccessor(P[it]))}}Object.assign(b,t,P),b.id="".concat(this.props.id,"-").concat(H),b.updateTriggers=x(x({all:(e=this.props.updateTriggers)===null||e===void 0?void 0:e.all},t.updateTriggers),L);for(let M of _){let E=M.getSubLayerProps.call(this,M);E&&Object.assign(b,E,{updateTriggers:Object.assign(b.updateTriggers,E.updateTriggers)})}return b}_updateAutoHighlight(t){for(let e of this.getSubLayers())e.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,e){let r=this.internalState.subLayers,i=!r||this.needsUpdate();if(i){let n=this.renderLayers();r=QS(n,Boolean),this.internalState.subLayers=r}sn(S_t,this,i,r);for(let n of r)n.parent=this}};k(cE,"layerName","CompositeLayer");var h1=Math.PI/180;function E_t({height:t,focalDistance:e,orbitAxis:r,rotationX:i,rotationOrbit:n,zoom:s}){let a=r==="Z"?[0,0,1]:[0,1,0],o=r==="Z"?[0,-e,0]:[0,0,e],l=new gt().lookAt({eye:o,up:a});l.rotateX(i*h1),r==="Z"?l.rotateZ(n*h1):l.rotateY(n*h1);let c=Math.pow(2,s)/t;return l.scale(c),l}var T_t=class extends op{constructor(t){let{height:e,projectionMatrix:r,fovy:i=50,orbitAxis:n="Z",target:s=[0,0,0],rotationX:a=0,rotationOrbit:o=0,zoom:l=0}=t,c=r?r[5]/2:YS(i);super(Q(x({},t),{longitude:void 0,viewMatrix:E_t({height:e||1,focalDistance:c,orbitAxis:n,rotationX:a,rotationOrbit:o,zoom:l}),fovy:i,focalDistance:c,position:s,zoom:l})),k(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(t,{topLeft:e=!0}={}){let[r,i,n=this.projectedCenter[2]]=t,s=e?i:this.height-i,[a,o,l]=Wf([r,s,n],this.pixelUnprojectionMatrix);return[a,o,l]}panByPosition(t,e){let r=this.project(t),i=[this.width/2+r[0]-e[0],this.height/2+r[1]-e[1],this.projectedCenter[2]];return{target:this.unproject(i)}}},Wj=class extends tE{constructor(t={}){super(t),this.props.orbitAxis=t.orbitAxis||"Z"}get ViewportType(){return T_t}get ControllerType(){return mgt}};k(Wj,"displayName","OrbitView");var I_t=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,O_t=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,P_t=1024,M_t=4,HR=()=>{},GR={10241:9987,10240:9729,10242:33071,10243:33071};function R_t(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function B_t(t,e,r,i){return r===e.width&&i===e.height?e:(t.canvas.height=i,t.canvas.width=r,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,r,i),t.canvas)}function lf(t){return t&&(t.id||t.url)}function D_t(t,e,r,i){let n=t.width,s=t.height,a=new Kr(t.gl,{width:e,height:r,parameters:i});return nut(t,a,{targetY:0,width:n,height:s}),t.delete(),a}function WR(t,e,r){for(let i=0;i<e.length;i++){let{icon:n,xOffset:s}=e[i],a=lf(n);t[a]=Q(x({},n),{x:s,y:r})}}function L_t({icons:t,buffer:e,mapping:r={},xOffset:i=0,yOffset:n=0,rowHeight:s=0,canvasWidth:a}){let o=[];for(let l=0;l<t.length;l++){let c=t[l],h=lf(c);if(!r[h]){let{height:p,width:m}=c;i+m+e>a&&(WR(r,o,n),i=0,n=s+n+e,s=0,o=[]),o.push({icon:c,xOffset:i}),i=i+m+e,s=Math.max(s,p)}}return o.length>0&&WR(r,o,n),{mapping:r,rowHeight:s,xOffset:i,yOffset:n,canvasWidth:a,canvasHeight:R_t(s+n+e)}}function N_t(t,e,r){if(!t||!e)return null;r=r||{};let i={},{iterable:n,objectInfo:s}=Qy(t);for(let a of n){s.index++;let o=e(a,s),l=lf(o);if(!o)throw new Error("Icon is missing.");if(!o.url)throw new Error("Icon url is missing.");!i[l]&&(!r[l]||o.url!==r[l].url)&&(i[l]=Q(x({},o),{source:a,sourceIndex:s.index}))}return i}var F_t=class{constructor(t,{onUpdate:e=HR,onError:r=HR}){k(this,"gl",void 0),k(this,"onUpdate",void 0),k(this,"onError",void 0),k(this,"_loadOptions",null),k(this,"_texture",null),k(this,"_externalTexture",null),k(this,"_mapping",{}),k(this,"_textureParameters",null),k(this,"_pendingCount",0),k(this,"_autoPacking",!1),k(this,"_xOffset",0),k(this,"_yOffset",0),k(this,"_rowHeight",0),k(this,"_buffer",M_t),k(this,"_canvasWidth",P_t),k(this,"_canvasHeight",0),k(this,"_canvas",null),this.gl=t,this.onUpdate=e,this.onError=r}finalize(){var t;(t=this._texture)===null||t===void 0||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){let e=this._autoPacking?lf(t):t;return this._mapping[e]||{}}setProps({loadOptions:t,autoPacking:e,iconAtlas:r,iconMapping:i,textureParameters:n}){if(t&&(this._loadOptions=t),e!==void 0&&(this._autoPacking=e),i&&(this._mapping=i),r){var s;(s=this._texture)===null||s===void 0||s.delete(),this._texture=null,this._externalTexture=r}n&&(this._textureParameters=n)}get isLoaded(){return this._pendingCount===0}packIcons(t,e){if(!this._autoPacking||typeof document>"u")return;let r=Object.values(N_t(t,e,this._mapping)||{});if(r.length>0){let{mapping:i,xOffset:n,yOffset:s,rowHeight:a,canvasHeight:o}=L_t({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=i,this._xOffset=n,this._yOffset=s,this._canvasHeight=o,this._texture||(this._texture=new Kr(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||GR})),this._texture.height!==this._canvasHeight&&(this._texture=D_t(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||GR)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(t){let e=this._canvas.getContext("2d");for(let r of t)this._pendingCount++,tf(r.url,mV,this._loadOptions).then(i=>{let n=lf(r),{x:s,y:a,width:o,height:l}=this._mapping[n],c=B_t(e,i,o,l);this._texture.setSubImageData({data:c,x:s,y:a,width:o,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}},Zj=[0,0,0,255],z_t={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:Zj},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}},uE=class extends Zu{constructor(...t){super(...t),k(this,"state",void 0)}getShaders(){return super.getShaders({vs:I_t,fs:O_t,modules:[$y,Xy]})}initializeState(){this.state={iconManager:new F_t(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:Zj},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);let{props:e,oldProps:r,changeFlags:i}=t,n=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:o,getIcon:l,textureParameters:c}=e,{iconManager:h}=this.state,p=s||this.internalState.isAsyncPropLoading("iconAtlas");if(h.setProps({loadOptions:e.loadOptions,autoPacking:!p,iconAtlas:s,iconMapping:p?a:null,textureParameters:c}),p?r.iconMapping!==e.iconMapping&&n.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&h.packIcons(o,l),i.extensionsChanged){var m;let{gl:f}=this.context;(m=this.state.model)===null||m===void 0||m.delete(),this.state.model=this._getModel(f),n.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){let{sizeScale:e,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:n,billboard:s,alphaCutoff:a}=this.props,{iconManager:o}=this.state,l=o.getTexture();l&&this.state.model.setUniforms(t).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:Ab[n],sizeScale:e,sizeMinPixels:r,sizeMaxPixels:i,billboard:s,alphaCutoff:a}).draw()}_getModel(t){let e=[-1,-1,-1,1,1,1,1,-1];return new Sd(t,Q(x({},this.getShaders()),{id:this.props.id,geometry:new ql({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(e)}}}),isInstanced:!0}))}_onUpdate(){this.setNeedsRedraw()}_onError(t){var e;let r=(e=this.getCurrentLayer())===null||e===void 0?void 0:e.props.onIconError;r?r(t):Ke.error(t.error.message)()}getInstanceOffset(t){let{width:e,height:r,anchorX:i=e/2,anchorY:n=r/2}=this.state.iconManager.getIconMapping(t);return[e/2-i,r/2-n]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){let{x:e,y:r,width:i,height:n}=this.state.iconManager.getIconMapping(t);return[e,r,i,n]}};k(uE,"defaultProps",z_t);k(uE,"layerName","IconLayer");var V_t=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,ZR=192/256,$R=[],j_t={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}},hE=class extends uE{constructor(...t){super(...t),k(this,"state",void 0)}getShaders(){return Q(x({},super.getShaders()),{fs:V_t})}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,{index:e,target:r})=>this.encodePickingColor(e,r)}})}updateState(t){super.updateState(t);let{props:e,oldProps:r}=t,{outlineColor:i}=e;i!==r.outlineColor&&(i=i.map(n=>n/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!e.sdf&&e.outlineWidth&&Ke.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){let{sdf:e,smoothing:r,outlineWidth:i}=this.props,{outlineColor:n}=this.state;t.uniforms=Q(x({},t.uniforms),{buffer:ZR,outlineBuffer:i?Math.max(r,ZR*(1-i)):-1,gamma:r,sdf:!!e,outlineColor:n}),super.draw(t)}getInstanceOffset(t){return t?Array.from(t).flatMap(e=>super.getInstanceOffset(e)):$R}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(e=>super.getInstanceIconFrame(e)):$R}};k(hE,"defaultProps",j_t);k(hE,"layerName","MultiIconLayer");var U_t=tl(hK()),H_t=32,G_t=[];function W_t(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Z_t({characterSet:t,getFontWidth:e,fontHeight:r,buffer:i,maxCanvasWidth:n,mapping:s={},xOffset:a=0,yOffset:o=0}){let l=0,c=a;for(let p of t)if(!s[p]){let m=e(p);c+m+i*2>n&&(c=0,l++),s[p]={x:c+i,y:o+l*(r+i*2)+i,width:m,height:r},c+=m+i*2}let h=r+i*2;return{mapping:s,xOffset:c,yOffset:o+l*h,canvasHeight:W_t(o+(l+1)*h)}}function $j(t,e,r,i){let n=0;for(let a=e;a<r;a++){var s;let o=t[a];n+=((s=i[o])===null||s===void 0?void 0:s.width)||0}return n}function Xj(t,e,r,i,n,s){let a=e,o=0;for(let l=e;l<r;l++){let c=$j(t,l,l+1,n);o+c>i&&(a<l&&s.push(l),a=l,o=0),o+=c}return o}function $_t(t,e,r,i,n,s){let a=e,o=e,l=e,c=0;for(let h=e;h<r;h++)if((t[h]===" "||t[h+1]===" "||h+1===r)&&(l=h+1),l>o){let p=$j(t,o,l,n);c+p>i&&(a<o&&(s.push(o),a=o,c=0),p>i&&(p=Xj(t,o,l,i,n,s),a=s[s.length-1])),o=l,c+=p}return c}function X_t(t,e,r,i,n=0,s){s===void 0&&(s=t.length);let a=[];return e==="break-all"?Xj(t,n,s,r,i,a):$_t(t,n,s,r,i,a),a}function q_t(t,e,r,i,n,s){let a=0,o=0;for(let l=e;l<r;l++){let c=t[l],h=i[c];h?(o||(o=h.height),n[l]=a+h.width/2,a+=h.width):(Ke.warn("Missing character: ".concat(c," (").concat(c.codePointAt(0),")"))(),n[l]=a,a+=H_t)}s[0]=a,s[1]=o}function XR(t,e,r,i,n){let s=Array.from(t),a=s.length,o=new Array(a),l=new Array(a),c=new Array(a),h=(r==="break-word"||r==="break-all")&&isFinite(i)&&i>0,p=[0,0],m=[0,0],f=0,g=0,_=0;for(let w=0;w<=a;w++){let S=s[w];if((S===`
`||w===a)&&(_=w),_>g){let C=h?X_t(s,r,i,n,g,_):G_t;for(let b=0;b<=C.length;b++){let P=b===0?g:C[b-1],L=b<C.length?C[b]:_;q_t(s,P,L,n,o,m);for(let H=P;H<L;H++)l[H]=f+m[1]/2,c[H]=m[0];f=f+m[1]*e,p[0]=Math.max(p[0],m[0])}g=_}S===`
`&&(o[g]=0,l[g]=0,c[g]=0,g++)}return p[1]=f,{x:o,y:l,rowWidth:c,size:p}}function K_t({value:t,length:e,stride:r,offset:i,startIndices:n,characterSet:s}){let a=t.BYTES_PER_ELEMENT,o=r?r/a:1,l=i?i/a:0,c=n[e]||Math.ceil((t.length-l)/o),h=s&&new Set,p=new Array(e),m=t;if(o>1||l>0){let f=t.constructor;m=new f(c);for(let g=0;g<c;g++)m[g]=t[g*o+l]}for(let f=0;f<e;f++){let g=n[f],_=n[f+1]||c,w=m.subarray(g,_);p[f]=String.fromCodePoint.apply(null,w),h&&w.forEach(h.add,h)}if(h)for(let f of h)s.add(String.fromCodePoint(f));return{texts:p,characterCount:c}}var qj=class{constructor(t=5){k(this,"limit",void 0),k(this,"_cache",{}),k(this,"_order",[]),this.limit=t}get(t){let e=this._cache[t];return e&&(this._deleteOrder(t),this._appendOrder(t)),e}set(t,e){this._cache[t]?(this.delete(t),this._cache[t]=e,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=e,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){let e=this._order.indexOf(t);e>=0&&this._order.splice(e,1)}_appendOrder(t){this._order.push(t)}};function Y_t(){let t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}var Dm={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:Y_t(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},qR=1024,J_t=.9,KR=1.2,Kj=3,Pb=new qj(Kj);function Q_t(t,e){let r;typeof e=="string"?r=new Set(Array.from(e)):r=new Set(e);let i=Pb.get(t);if(!i)return r;for(let n in i.mapping)r.has(n)&&r.delete(n);return r}function tbt(t,e){for(let r=0;r<t.length;r++)e.data[4*r+3]=t[r]}function YR(t,e,r,i){t.font="".concat(i," ").concat(r,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function ebt(t){Ke.assert(Number.isFinite(t)&&t>=Kj,"Invalid cache limit"),Pb=new qj(t)}var ibt=class{constructor(){k(this,"props",x({},Dm)),k(this,"_key",void 0),k(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return KR}setProps(t={}){Object.assign(this.props,t);let e=this._key;this._key=this._getKey();let r=Q_t(this._key,this.props.characterSet),i=Pb.get(this._key);if(i&&r.size===0){this._key!==e&&(this._atlas=i);return}let n=this._generateFontAtlas(this._key,r,i);this._atlas=n,Pb.set(this._key,n)}_generateFontAtlas(t,e,r){let{fontFamily:i,fontWeight:n,fontSize:s,buffer:a,sdf:o,radius:l,cutoff:c}=this.props,h=r&&r.data;h||(h=document.createElement("canvas"),h.width=qR);let p=h.getContext("2d");YR(p,i,s,n);let{mapping:m,canvasHeight:f,xOffset:g,yOffset:_}=Z_t(x({getFontWidth:w=>p.measureText(w).width,fontHeight:s*KR,buffer:a,characterSet:e,maxCanvasWidth:qR},r&&{mapping:r.mapping,xOffset:r.xOffset,yOffset:r.yOffset}));if(h.height!==f){let w=p.getImageData(0,0,h.width,h.height);h.height=f,p.putImageData(w,0,0)}if(YR(p,i,s,n),o){let w=new U_t.default(s,a,l,c,i,n),S=p.getImageData(0,0,w.size,w.size);for(let C of e)tbt(w.draw(C),S),p.putImageData(S,m[C].x-a,m[C].y+a)}else for(let w of e)p.fillText(w,m[w].x,m[w].y+s*J_t);return{xOffset:g,yOffset:_,mapping:m,data:h,width:h.width,height:h.height}}_getKey(){let{fontFamily:t,fontWeight:e,fontSize:r,buffer:i,sdf:n,radius:s,cutoff:a}=this.props;return n?"".concat(t," ").concat(e," ").concat(r," ").concat(i," ").concat(s," ").concat(a):"".concat(t," ").concat(e," ").concat(r," ").concat(i)}},rbt=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,nbt=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,sbt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}},dE=class extends Zu{constructor(...t){super(...t),k(this,"state",void 0)}getShaders(){return super.getShaders({vs:rbt,fs:nbt,modules:[$y,Xy]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);let{changeFlags:e}=t;if(e.extensionsChanged){var r;let{gl:i}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){let{billboard:e,sizeScale:r,sizeUnits:i,sizeMinPixels:n,sizeMaxPixels:s,getLineWidth:a}=this.props,{padding:o}=this.props;o.length<4&&(o=[o[0],o[1],o[0],o[1]]),this.state.model.setUniforms(t).setUniforms({billboard:e,stroked:!!a,padding:o,sizeUnits:Ab[i],sizeScale:r,sizeMinPixels:n,sizeMaxPixels:s}).draw()}_getModel(t){let e=[0,0,1,0,1,1,0,1];return new Sd(t,Q(x({},this.getShaders()),{id:this.props.id,geometry:new ql({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(e)}}}),isInstanced:!0}))}};k(dE,"defaultProps",sbt);k(dE,"layerName","TextBackgroundLayer");var JR={start:1,middle:0,end:-1},QR={top:1,center:0,bottom:-1},d1=[0,0,0,255],abt=1,obt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:d1},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Dm.characterSet},fontFamily:Dm.fontFamily,fontWeight:Dm.fontWeight,lineHeight:abt,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:d1},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:d1},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}},pE=class extends cE{constructor(...t){super(...t),k(this,"state",void 0),k(this,"getBoundingRect",(e,r)=>{let i=this.state.fontAtlasManager.mapping,n=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:o,getTextAnchor:l,getAlignmentBaseline:c}=this.props,h=n(e,r)||"",{size:[p,m]}=XR(h,o,s,a,i),f=JR[typeof l=="function"?l(e,r):l],g=QR[typeof c=="function"?c(e,r):c];return[(f-1)*p/2,(g-1)*m/2,p,m]}),k(this,"getIconOffsets",(e,r)=>{let i=this.state.fontAtlasManager.mapping,n=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:o,getTextAnchor:l,getAlignmentBaseline:c}=this.props,h=n(e,r)||"",{x:p,y:m,rowWidth:f,size:[g,_]}=XR(h,o,s,a,i),w=JR[typeof l=="function"?l(e,r):l],S=QR[typeof c=="function"?c(e,r):c],C=p.length,b=new Array(C*2),P=0;for(let L=0;L<C;L++){let H=(1-w)*(g-f[L])/2;b[P++]=(w-1)*g/2+H+p[L],b[P++]=(S-1)*_/2+m[L]}return b})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new ibt}}updateState(t){let{props:e,oldProps:r,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||e.lineHeight!==r.lineHeight||e.wordBreak!==r.wordBreak||e.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){let{fontSettings:t,fontFamily:e,fontWeight:r}=this.props,{fontAtlasManager:i,characterSet:n}=this.state,s=Q(x({},t),{characterSet:n,fontFamily:e,fontWeight:r});if(!i.mapping)return i.setProps(s),!0;for(let a in s)if(s[a]!==i.props[a])return i.setProps(s),!0;return!1}_updateText(){var t;let{data:e,characterSet:r}=this.props,i=(t=e.attributes)===null||t===void 0?void 0:t.getText,{getText:n}=this.props,s=e.startIndices,a,o=r==="auto"&&new Set;if(i&&s){let{texts:l,characterCount:c}=K_t(Q(x({},ArrayBuffer.isView(i)?{value:i}:i),{length:e.length,startIndices:s,characterSet:o}));a=c,n=(h,{index:p})=>l[p]}else{let{iterable:l,objectInfo:c}=Qy(e);s=[0],a=0;for(let h of l){c.index++;let p=Array.from(n(h,c)||"");o&&p.forEach(o.add,o),a+=p.length,s.push(a)}}this.setState({getText:n,startIndices:s,numInstances:a,characterSet:o||r})}renderLayers(){let{startIndices:t,numInstances:e,getText:r,fontAtlasManager:{scale:i,texture:n,mapping:s},styleVersion:a}=this.state,{data:o,_dataDiff:l,getPosition:c,getColor:h,getSize:p,getAngle:m,getPixelOffset:f,getBackgroundColor:g,getBorderColor:_,getBorderWidth:w,backgroundPadding:S,background:C,billboard:b,fontSettings:P,outlineWidth:L,outlineColor:H,sizeScale:M,sizeUnits:E,sizeMinPixels:it,sizeMaxPixels:X,transitions:W,updateTriggers:J}=this.props,lt=this.getSubLayerClass("characters",hE),Y=this.getSubLayerClass("background",dE);return[C&&new Y({getFillColor:g,getLineColor:_,getLineWidth:w,padding:S,getPosition:c,getSize:p,getAngle:m,getPixelOffset:f,billboard:b,sizeScale:M/this.state.fontAtlasManager.props.fontSize,sizeUnits:E,sizeMinPixels:it,sizeMaxPixels:X,transitions:W&&{getPosition:W.getPosition,getAngle:W.getAngle,getSize:W.getSize,getFillColor:W.getBackgroundColor,getLineColor:W.getBorderColor,getLineWidth:W.getBorderWidth,getPixelOffset:W.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:J.getPosition,getAngle:J.getAngle,getSize:J.getSize,getFillColor:J.getBackgroundColor,getLineColor:J.getBorderColor,getLineWidth:J.getBorderWidth,getPixelOffset:J.getPixelOffset,getBoundingRect:{getText:J.getText,getTextAnchor:J.getTextAnchor,getAlignmentBaseline:J.getAlignmentBaseline,styleVersion:a}}}),{data:o.attributes&&o.attributes.background?{length:o.length,attributes:o.attributes.background}:o,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new lt({sdf:P.sdf,smoothing:Number.isFinite(P.smoothing)?P.smoothing:Dm.smoothing,outlineWidth:L,outlineColor:H,iconAtlas:n,iconMapping:s,getPosition:c,getColor:h,getSize:p,getAngle:m,getPixelOffset:f,billboard:b,sizeScale:M*i,sizeUnits:E,sizeMinPixels:it*i,sizeMaxPixels:X*i,transitions:W&&{getPosition:W.getPosition,getAngle:W.getAngle,getColor:W.getColor,getSize:W.getSize,getPixelOffset:W.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:J.getText,getPosition:J.getPosition,getAngle:J.getAngle,getColor:J.getColor,getSize:J.getSize,getPixelOffset:J.getPixelOffset,getIconOffsets:{getText:J.getText,getTextAnchor:J.getTextAnchor,getAlignmentBaseline:J.getAlignmentBaseline,styleVersion:a}}}),{data:o,_dataDiff:l,startIndices:t,numInstances:e,getIconOffsets:this.getIconOffsets,getIcon:r})]}static set fontAtlasCacheLimit(t){ebt(t)}};k(pE,"defaultProps",obt);k(pE,"layerName","TextLayer");var p1=Math.PI/180,Rv=new Float32Array(16),tB=new Float32Array(12);function eB(t,e,r){let i=e[0]*p1,n=e[1]*p1,s=e[2]*p1,a=Math.sin(s),o=Math.sin(i),l=Math.sin(n),c=Math.cos(s),h=Math.cos(i),p=Math.cos(n),m=r[0],f=r[1],g=r[2];t[0]=m*p*h,t[1]=m*l*h,t[2]=m*-o,t[3]=f*(-l*c+p*o*a),t[4]=f*(p*c+l*o*a),t[5]=f*h*a,t[6]=g*(l*a+p*o*c),t[7]=g*(-p*a+l*o*c),t[8]=g*h*c}function iB(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}var Yj={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:r}){let{data:i,getOrientation:n,getScale:s,getTranslation:a,getTransformMatrix:o}=this.props,l=Array.isArray(o),c=l&&o.length===16,h=Array.isArray(s),p=Array.isArray(n),m=Array.isArray(a),f=c||!l&&!!o(i[0]);f?t.constant=c:t.constant=p&&h&&m;let g=t.value;if(t.constant){let _;f?(Rv.set(o),_=iB(Rv)):(_=tB,eB(_,n,s),_.set(a,9)),t.value=new Float32Array(_)}else{let _=e*t.size,{iterable:w,objectInfo:S}=Qy(i,e,r);for(let C of w){S.index++;let b;if(f)Rv.set(c?o:o(C,S)),b=iB(Rv);else{b=tB;let P=p?n:n(C,S),L=h?s:s(C,S);eB(b,P,L),b.set(m?a:a(C,S),9)}g[_++]=b[0],g[_++]=b[1],g[_++]=b[2],g[_++]=b[3],g[_++]=b[4],g[_++]=b[5],g[_++]=b[6],g[_++]=b[7],g[_++]=b[8],g[_++]=b[9],g[_++]=b[10],g[_++]=b[11]}}}};function Jj(t,e){return e===ui.CARTESIAN||e===ui.METER_OFFSETS||e===ui.DEFAULT&&!t.isGeospatial}var lbt=`#version 300 es
#define SHADER_NAME simple-mesh-layer-vs

// Scale the model
uniform float sizeScale;
uniform bool composeModelMatrix;

// Primitive attributes
in vec3 positions;
in vec3 normals;
in vec3 colors;
in vec2 texCoords;

// Instance attributes
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;

// Outputs to fragment shader
out vec2 vTexCoord;
out vec3 cameraPosition;
out vec3 normals_commonspace;
out vec4 position_commonspace;
out vec4 vColor;

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = texCoords;
  geometry.pickingColor = instancePickingColors;

  vTexCoord = texCoords;
  cameraPosition = project_uCameraPosition;
  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);

  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;

  if (composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    // using instancePositions as world coordinates
    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth
    // call project_normal before setting position to avoid rotation
    normals_commonspace = project_normal(instanceModelMatrix * normals);
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);
    geometry.position = position_commonspace;
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);
    geometry.position = position_commonspace;
    normals_commonspace = project_normal(instanceModelMatrix * normals);
  }

  geometry.normal = normals_commonspace;
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,cbt=`#version 300 es
#define SHADER_NAME simple-mesh-layer-fs

precision highp float;

uniform bool hasTexture;
uniform sampler2D sampler;
uniform bool flatShading;
uniform float opacity;

in vec2 vTexCoord;
in vec3 cameraPosition;
in vec3 normals_commonspace;
in vec4 position_commonspace;
in vec4 vColor;

out vec4 fragColor;

void main(void) {
  geometry.uv = vTexCoord;

  vec3 normal;
  if (flatShading) {

// NOTE(Tarek): This is necessary because
// headless.gl reports the extension as
// available but does not support it in
// the shader.
#ifdef DERIVATIVES_AVAILABLE
    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
#else
    normal = vec3(0.0, 0.0, 1.0);
#endif
  } else {
    normal = normals_commonspace;
  }

  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;
  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);
  fragColor = vec4(lightColor, color.a * opacity);

  DECKGL_FILTER_COLOR(fragColor, geometry);
}
`;function rB(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),Ke.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function ubt(t,e){if(t.attributes)return rB(t.attributes,e),t instanceof ql?t:new ql(t);if(t.positions||t.POSITION)return rB(t,e),new ql({attributes:t});throw Error("Invalid mesh")}var hbt=[0,0,0,255],dbt={mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:hbt},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},mE=class extends Zu{constructor(...t){super(...t),k(this,"state",void 0)}getShaders(){let t=!Ue(this.context.gl),e={};return VS(this.context.gl,$i.GLSL_DERIVATIVES)&&(e.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:lbt,fs:cbt,modules:[$y,Xpt,Xy],transpileToGLSL100:t,defines:e})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:Yj}),this.setState({emptyTexture:new Kr(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(t){super.updateState(t);let{props:e,oldProps:r,changeFlags:i}=t;if(e.mesh!==r.mesh||i.extensionsChanged){var n;if((n=this.state.model)===null||n===void 0||n.delete(),e.mesh){this.state.model=this.getModel(e.mesh);let s=e.mesh.attributes||e.mesh;this.setState({hasNormals:!!(s.NORMAL||s.normals)})}this.getAttributeManager().invalidateAll()}e.texture!==r.texture&&this.setTexture(e.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(t){super.finalizeState(t),this.state.emptyTexture.delete()}draw({uniforms:t}){if(!this.state.model)return;let{viewport:e}=this.context,{sizeScale:r,coordinateSystem:i,_instanced:n}=this.props;this.state.model.setUniforms(t).setUniforms({sizeScale:r,composeModelMatrix:!n||Jj(e,i),flatShading:!this.state.hasNormals}).draw()}getModel(t){let e=new Sd(this.context.gl,Q(x({},this.getShaders()),{id:this.props.id,geometry:ubt(t,this.props._useMeshColors),isInstanced:!0})),{texture:r}=this.props,{emptyTexture:i}=this.state;return e.setUniforms({sampler:r||i,hasTexture:!!r}),e}setTexture(t){let{emptyTexture:e,model:r}=this.state;r&&r.setUniforms({sampler:t||e,hasTexture:!!t})}};k(mE,"defaultProps",dbt);k(mE,"layerName","SimpleMeshLayer");var cd=class{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:e}=t;this.id=e||Un(this.constructor.name),this.display=!0,this.position=new zn,this.rotation=new zn,this.scale=new zn(1,1,1),this.matrix=new gt,this.userData={},this.props={},this._setScenegraphNodeProps(t)}delete(){}setProps(t){return this._setScenegraphNodeProps(t),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(t){return jt(t.length===3,"setPosition requires vector argument"),this.position=t,this}setRotation(t){return jt(t.length===3,"setRotation requires vector argument"),this.rotation=t,this}setScale(t){return jt(t.length===3,"setScale requires vector argument"),this.scale=t,this}setMatrix(t){!(arguments.length>1&&arguments[1]!==void 0)||arguments[1]?this.matrix.copy(t):this.matrix=t}setMatrixComponents(t){let{position:e,rotation:r,scale:i,update:n=!0}=t;return e&&this.setPosition(e),r&&this.setRotation(r),i&&this.setScale(i),n&&this.updateMatrix(),this}updateMatrix(){let t=this.position,e=this.rotation,r=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(r),this}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{position:e,rotation:r,scale:i}=t;return e&&this.setPosition(e),r&&this.setRotation(r),i&&this.setScale(i),this.updateMatrix(),this}getCoordinateUniforms(t,e){jt(t),e=e||this.matrix;let r=new gt(t).multiplyRight(e),i=r.invert(),n=i.transpose();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:r,worldInverseMatrix:i,worldInverseTransposeMatrix:n}}_setScenegraphNodeProps(t){"display"in t&&(this.display=t.display),"position"in t&&this.setPosition(t.position),"rotation"in t&&this.setRotation(t.rotation),"scale"in t&&this.setScale(t.scale),"matrix"in t&&this.setMatrix(t.matrix),Object.assign(this.props,t)}},m1=class Qj extends cd{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;let{children:r=[]}=e;Qt.assert(r.every(i=>i instanceof cd),"every child must an instance of ScenegraphNode"),super(e),this.children=r}add(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];for(let n of r)Array.isArray(n)?this.add(...n):this.children.push(n);return this}remove(e){let r=this.children,i=r.indexOf(e);return i>-1&&r.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){let e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((r,i)=>{let{worldMatrix:n}=i,s=r.getBounds();if(!s)return;let[a,o]=s,l=new zn(a).add(o).divide([2,2,2]);n.transformAsPoint(l,l);let c=new zn(o).subtract(a).divide([2,2,2]);n.transformAsVector(c,c);for(let h=0;h<8;h++){let p=new zn(h&1?-1:1,h&2?-1:1,h&4?-1:1).multiply(c).add(l);for(let m=0;m<3;m++)e[0][m]=Math.min(e[0][m],p[m]),e[1][m]=Math.max(e[1][m],p[m])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:r=new gt}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=new gt(r).multiplyRight(this.matrix);for(let n of this.children)n instanceof Qj?n.traverse(e,{worldMatrix:i}):e(n,{worldMatrix:i})}},pbt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},mbt={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function nB(t){if(!t._animation){let e=mbt[t.componentType],r=pbt[t.type],i=r*t.count,{buffer:n,byteOffset:s}=t.bufferView.data,a=new e(n,s+(t.byteOffset||0),i);if(r===1)t._animation=Array.from(a);else{let o=[];for(let l=0;l<a.length;l+=r)o.push(Array.from(a.slice(l,l+r)));t._animation=o}}return t._animation}var fbt=new gt;function gbt(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){let r=fbt.fromQuaternion(t.rotation);e.matrix.multiplyRight(r)}t.scale&&e.matrix.scale(t.scale)}var f1=new Dpt;function vbt(t,e,r,i,n){if(e==="rotation"){f1.slerp({start:r,target:i,ratio:n});for(let s=0;s<f1.length;s++)t[e][s]=f1[s]}else for(let s=0;s<r.length;s++)t[e][s]=n*i[s]+(1-n)*r[s]}function _bt(t,e,r){let{p0:i,outTangent0:n,inTangent1:s,p1:a,tDiff:o,ratio:l}=r;for(let c=0;c<t[e].length;c++){let h=n[c]*o,p=s[c]*o;t[e][c]=(2*Math.pow(l,3)-3*Math.pow(l,2)+1)*i[c]+(Math.pow(l,3)-2*Math.pow(l,2)+l)*h+(-2*Math.pow(l,3)+3*Math.pow(l,2))*a[c]+(Math.pow(l,3)-Math.pow(l,2))*p}}function bbt(t,e,r){for(let i=0;i<r.length;i++)t[e][i]=r[i]}function ybt(t,e,r,i){let{input:n,interpolation:s,output:a}=e,o=n[n.length-1],l=t%o,c=n.findIndex(f=>f>=l),h=Math.max(0,c-1);if(!Array.isArray(r[i]))switch(i){case"translation":r[i]=[0,0,0];break;case"rotation":r[i]=[0,0,0,1];break;case"scale":r[i]=[1,1,1];break;default:Qt.warn("Bad animation path ".concat(i))()}jt(r[i].length===a[h].length);let p=n[h],m=n[c];switch(s){case"STEP":bbt(r,i,a[h]);break;case"LINEAR":if(m>p){let f=(l-p)/(m-p);vbt(r,i,a[h],a[c],f)}break;case"CUBICSPLINE":if(m>p){let f=(l-p)/(m-p),g=m-p,_=a[3*h+1],w=a[3*h+2],S=a[3*c+0],C=a[3*c+1];_bt(r,i,{p0:_,outTangent0:w,inTangent1:S,p1:C,tDiff:g,ratio:f})}break;default:Qt.warn("Interpolation ".concat(s," not supported"))();break}}var wbt=class{constructor(t){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,t)}animate(t){if(!this.playing)return;let e=(t/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:i,target:n,path:s}=r;ybt(e,i,n,s),gbt(n,n._node)})}},xbt=class{constructor(t){this.animations=t.animations.map((e,r)=>{let i=e.name||"Animation-".concat(r),n=e.samplers.map(a=>{let{input:o,interpolation:l="LINEAR",output:c}=a;return{input:nB(t.accessors[o]),interpolation:l,output:nB(t.accessors[c])}}),s=e.channels.map(a=>{let{sampler:o,target:l}=a;return{sampler:n[o],target:t.nodes[l.node],path:l.path}});return new wbt({name:i,channels:s})})}animate(t){this.setTime(t)}setTime(t){this.animations.forEach(e=>e.animate(t))}getAnimations(){return this.animations}},Cbt=class extends cd{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e),this.onBeforeRender=null,this.AfterRender=null,t instanceof Sd?(this.model=t,this._setModelNodeProps(e)):this.model=new Sd(t,e),this.bounds=null,this.managedResources=e.managedResources||[]}setProps(t){return super.setProps(t),this._setModelNodeProps(t),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(t=>t.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(t){this.model.setProps(t)}},kbt=class{constructor(t,e){let{attributes:r,material:i,pbrDebug:n,imageBasedLightingEnvironment:s,lights:a,useTangents:o}=e;this.gl=t,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},VS(t,$i.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),n&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(r.NORMAL,"HAS_NORMALS"),this.defineIfPresent(r.TANGENT&&o,"HAS_TANGENTS"),this.defineIfPresent(r.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(n,"PBR_DEBUG"),i&&this.parseMaterial(i)}defineIfPresent(t,e){t&&(this.defines[e]=1)}parseTexture(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=t.texture&&t.texture.sampler&&t.texture.sampler.parameters||{},n=t.texture.source.image,s,a={};n.compressed?(s=n,a={[this.gl.TEXTURE_MIN_FILTER]:n.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):s={data:n};let o=new Kr(this.gl,x({id:t.name||t.id,parameters:x(x({},i),a),pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1}},s));this.uniforms[e]=o,this.defineIfPresent(r,r),this.generatedTextures.push(o)}parsePbrMetallicRoughness(t){t.baseColorTexture&&this.parseTexture(t.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=t.baseColorFactor||[1,1,1,1],t.metallicRoughnessTexture&&this.parseTexture(t.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");let{metallicFactor:e=1,roughnessFactor:r=1}=t;this.uniforms.u_MetallicRoughnessValues=[e,r]}parseMaterial(t){if(this.uniforms.pbr_uUnlit=!!t.unlit,t.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(t.pbrMetallicRoughness),t.normalTexture){this.parseTexture(t.normalTexture,"u_NormalSampler","HAS_NORMALMAP");let{scale:e=1}=t.normalTexture;this.uniforms.u_NormalScale=e}if(t.occlusionTexture){this.parseTexture(t.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");let{strength:e=1}=t.occlusionTexture;this.uniforms.u_OcclusionStrength=e}if(t.emissiveTexture&&(this.parseTexture(t.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=t.emissiveFactor||[0,0,0]),t.alphaMode==="MASK"){let{alphaCutoff:e=.5}=t;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=e}else t.alphaMode==="BLEND"&&(Qt.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(t=>t.delete())}},Abt=`
#if (__VERSION__ < 300)
  #define _attr attribute
#else
  #define _attr in
#endif

  _attr vec4 POSITION;

  #ifdef HAS_NORMALS
    _attr vec4 NORMAL;
  #endif

  #ifdef HAS_TANGENTS
    _attr vec4 TANGENT;
  #endif

  #ifdef HAS_UV
    _attr vec2 TEXCOORD_0;
  #endif

  void main(void) {
    vec4 _NORMAL = vec4(0.);
    vec4 _TANGENT = vec4(0.);
    vec2 _TEXCOORD_0 = vec2(0.);

    #ifdef HAS_NORMALS
      _NORMAL = NORMAL;
    #endif

    #ifdef HAS_TANGENTS
      _TANGENT = TANGENT;
    #endif

    #ifdef HAS_UV
      _TEXCOORD_0 = TEXCOORD_0;
    #endif

    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);
    gl_Position = u_MVPMatrix * POSITION;
  }
`,Sbt=`
#if (__VERSION__ < 300)
  #define fragmentColor gl_FragColor
#else
  out vec4 fragmentColor;
#endif

  void main(void) {
    fragmentColor = pbr_filterColor(vec4(0));
  }
`;function sB(t,e){return Ue(t)?`#version 300 es
`.concat(e):e}function Ebt(t,e){let{id:r,drawMode:i,vertexCount:n,attributes:s,modelOptions:a}=e,o=new kbt(t,e);Qt.info(4,"createGLTFModel defines: ",o.defines)();let l=[];l.push(...o.generatedTextures),l.push(...Object.values(s).map(h=>h.buffer));let c=new Cbt(t,Q(x({id:r,drawMode:i,vertexCount:n,modules:[hj],parameters:o.parameters,vs:sB(t,Abt),fs:sB(t,Sbt),managedResources:l},a),{defines:x(x({},o.defines),a.defines)}));return c.setProps({attributes:s}),c.setUniforms(o.uniforms),c}var Tbt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ibt={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1},Obt=class{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.options=Object.assign({},Ibt,e)}instantiate(t){return this.gltf=t,(t.scenes||[]).map(e=>this.createScene(e))}createAnimator(){return Array.isArray(this.gltf.animations)?new xbt(this.gltf):null}createScene(t){let e=(t.nodes||[]).map(r=>this.createNode(r));return new m1({id:t.name||t.id,children:e})}createNode(t){if(!t._node){let e=(t.children||[]).map(i=>this.createNode(i));t.mesh&&e.push(this.createMesh(t.mesh));let r=new m1({id:t.name||t.id,children:e});if(t.matrix)r.setMatrix(t.matrix);else{if(r.matrix.identity(),t.translation&&r.matrix.translate(t.translation),t.rotation){let i=new gt().fromQuaternion(t.rotation);r.matrix.multiplyRight(i)}t.scale&&r.matrix.scale(t.scale)}t._node=r}return t._node}createMesh(t){if(!t._mesh){let e=(t.primitives||[]).map((i,n)=>this.createPrimitive(i,n,t)),r=new m1({id:t.name||t.id,children:e});t._mesh=r}return t._mesh}getVertexCount(t){Qt.warn("getVertexCount() not found")()}createPrimitive(t,e,r){let i=Ebt(this.gl,Object.assign({id:t.name||"".concat(r.name||r.id,"-primitive-").concat(e),drawMode:t.mode||4,vertexCount:t.indices?t.indices.count:this.getVertexCount(t.attributes),attributes:this.createAttributes(t.attributes,t.indices),material:t.material},this.options));return i.bounds=[t.attributes.POSITION.min,t.attributes.POSITION.max],i}createAttributes(t,e){let r={};return Object.keys(t).forEach(i=>{r[i]=this.createAccessor(t[i],this.createBuffer(t[i],this.gl.ARRAY_BUFFER))}),e&&(r.indices=this.createAccessor(e,this.createBuffer(e,this.gl.ELEMENT_ARRAY_BUFFER))),Qt.info(4,"glTF Attributes",{attributes:t,indices:e,generated:r})(),r}createBuffer(t,e){t.bufferView||(t.bufferView={});let{bufferView:r}=t;return r.lumaBuffers||(r.lumaBuffers={}),r.lumaBuffers[e]||(r.lumaBuffers[e]=new Di(this.gl,{id:"from-".concat(r.id),data:r.data||t.value,target:e})),r.lumaBuffers[e]}createAccessor(t,e){return new Na({buffer:e,offset:t.byteOffset||0,stride:t.bufferView.byteStride||0,type:t.componentType,size:Tbt[t.type]})}createSampler(t){return t}needsPOT(){return!1}};function Pbt(t,e,r){let i=new Obt(t,r),n=i.instantiate(e),s=i.createAnimator();return{scenes:n,animator:s}}var Mbt="3.2.13",Rbt="3.2.13",tU="3.2.13",Bbt="https://unpkg.com/@loaders.gl/textures@".concat(tU,"/dist/libs/basis_encoder.wasm"),Dbt="https://unpkg.com/@loaders.gl/textures@".concat(tU,"/dist/libs/basis_encoder.js"),g1;function aB(t){return Dt(this,null,function*(){let e=t.modules||{};return e.basis?e.basis:(g1=g1||Lbt(t),yield g1)})}function Lbt(t){return Dt(this,null,function*(){let e=null,r=null;return[e,r]=yield Promise.all([yield _u("basis_transcoder.js","textures",t),yield _u("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,yield Nbt(e,r)})}function Nbt(t,e){let r={};return e&&(r.wasmBinary=e),new Promise(i=>{t(r).then(n=>{let{BasisFile:s,initializeBasis:a}=n;a(),i({BasisFile:s})})})}var v1;function oB(t){return Dt(this,null,function*(){let e=t.modules||{};return e.basisEncoder?e.basisEncoder:(v1=v1||Fbt(t),yield v1)})}function Fbt(t){return Dt(this,null,function*(){let e=null,r=null;return[e,r]=yield Promise.all([yield _u(Dbt,"textures",t),yield _u(Bbt,"textures",t)]),e=e||globalThis.BASIS,yield zbt(e,r)})}function zbt(t,e){let r={};return e&&(r.wasmBinary=e),new Promise(i=>{t(r).then(n=>{let{BasisFile:s,KTX2File:a,initializeBasis:o,BasisEncoder:l}=n;o(),i({BasisFile:s,KTX2File:a,BasisEncoder:l})})})}var Dh={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919},Vbt=["","WEBKIT_","MOZ_"],lB={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"},Bv=null;function jbt(t){if(!Bv){t=t||Ubt()||void 0,Bv=new Set;for(let e of Vbt)for(let r in lB)if(t&&t.getExtension("".concat(e).concat(r))){let i=lB[r];Bv.add(i)}}return Bv}function Ubt(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}var W5t=new Uint8Array([0]),cB,uB,hB,dB,pB,mB,fB,gB;(function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"})(cB||(cB={})),function(t){t[t.BASICFORMAT=0]="BASICFORMAT"}(uB||(uB={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"}(hB||(hB={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"}(dB||(dB={})),function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"}(pB||(pB={})),function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(mB||(mB={})),function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"}(fB||(fB={})),function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"}(gB||(gB={}));var rs=[171,75,84,88,32,50,48,187,13,10,26,10];function Hbt(t){let e=new Uint8Array(t);return!(e.byteLength<rs.length||e[0]!==rs[0]||e[1]!==rs[1]||e[2]!==rs[2]||e[3]!==rs[3]||e[4]!==rs[4]||e[5]!==rs[5]||e[6]!==rs[6]||e[7]!==rs[7]||e[8]!==rs[8]||e[9]!==rs[9]||e[10]!==rs[10]||e[11]!==rs[11])}var Gbt={etc1:{basisFormat:0,compressed:!0,format:Dh.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:Dh.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:Dh.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:Dh.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:Dh.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:Dh.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function Wbt(t,e){return Dt(this,null,function*(){if(e.basis.containerFormat==="auto"){if(Hbt(t)){let i=yield oB(e);return vB(i.KTX2File,t,e)}let{BasisFile:r}=yield aB(e);return _1(r,t,e)}switch(e.basis.module){case"encoder":let r=yield oB(e);switch(e.basis.containerFormat){case"ktx2":return vB(r.KTX2File,t,e);case"basis":default:return _1(r.BasisFile,t,e)}case"transcoder":default:let{BasisFile:i}=yield aB(e);return _1(i,t,e)}})}function _1(t,e,r){let i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");let n=i.getNumImages(),s=[];for(let a=0;a<n;a++){let o=i.getNumLevels(a),l=[];for(let c=0;c<o;c++)l.push(Zbt(i,a,c,r));s.push(l)}return s}finally{i.close(),i.delete()}}function Zbt(t,e,r,i){let n=t.getImageWidth(e,r),s=t.getImageHeight(e,r),a=t.getHasAlpha(),{compressed:o,format:l,basisFormat:c}=eU(i,a),h=t.getImageTranscodedSizeInBytes(e,r,c),p=new Uint8Array(h);if(!t.transcodeImage(p,e,r,c,0,0))throw new Error("failed to start Basis transcoding");return{width:n,height:s,data:p,compressed:o,format:l,hasAlpha:a}}function vB(t,e,r){let i=new t(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");let n=i.getLevels(),s=[];for(let a=0;a<n;a++){s.push($bt(i,a,r));break}return[s]}finally{i.close(),i.delete()}}function $bt(t,e,r){let{alphaFlag:i,height:n,width:s}=t.getImageLevelInfo(e,0,0),{compressed:a,format:o,basisFormat:l}=eU(r,i),c=t.getImageTranscodedSizeInBytes(e,0,0,l),h=new Uint8Array(c);if(!t.transcodeImage(h,e,0,0,l,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:n,data:h,compressed:a,hasAlpha:i,format:o}}function eU(t,e){let r=t&&t.basis&&t.basis.format;return r==="auto"&&(r=iU()),typeof r=="object"&&(r=e?r.alpha:r.noAlpha),r=r.toLowerCase(),Gbt[r]}function iU(){let t=jbt();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}var Xbt={name:"Basis",id:"basis",module:"textures",version:Rbt,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},qbt=Q(x({},Xbt),{parse:Wbt}),Kbt="3.2.13";function Bu(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var $a={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},Z5t=$a.self||$a.window||$a.global||{},$5t=$a.window||$a.self||$a.global||{},X5t=$a.global||$a.self||$a.window||{},q5t=$a.document||{},Mb=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),_B=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),K5t=_B&&parseFloat(_B[1])||0;function Ybt(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?bB(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?bB(t,0,e):""}function bB(t,e,r){if(t.byteLength<=e+r)return"";let i=new DataView(t),n="";for(let s=0;s<r;s++)n+=String.fromCharCode(i.getUint8(e+s));return n}function Jbt(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(Ybt(t),'"'))}}function rU(t,e,r){let i=r!==void 0?new Uint8Array(t).subarray(e,e+r):new Uint8Array(t).subarray(e);return new Uint8Array(i).buffer}function $f(t,e){return Bu(t>=0),Bu(e>0),t+(e-1)&~(e-1)}function Qbt(t,e,r){let i;if(t instanceof ArrayBuffer)i=new Uint8Array(t);else{let n=t.byteOffset,s=t.byteLength;i=new Uint8Array(t.buffer||t.arrayBuffer,n,s)}return e.set(i,r),r+$f(i.byteLength,4)}var{_parseImageNode:tyt}=globalThis,ok=typeof Image<"u",lk=typeof ImageBitmap<"u",eyt=!!tyt,ck=Mb?!0:eyt;function iyt(t){switch(t){case"auto":return lk||ok||ck;case"imagebitmap":return lk;case"image":return ok;case"data":return ck;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function ryt(){if(lk)return"imagebitmap";if(ok)return"image";if(ck)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function nyt(t){let e=ayt(t);if(!e)throw new Error("Not an image");return e}function syt(t){switch(nyt(t)){case"data":return t;case"image":case"imagebitmap":let e=document.createElement("canvas"),r=e.getContext("2d");if(!r)throw new Error("getImageData");return e.width=t.width,e.height=t.height,r.drawImage(t,0,0),r.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function ayt(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}var oyt=/^data:image\/svg\+xml/,lyt=/\.svg((\?|#).*)?$/;function fE(t){return t&&(oyt.test(t)||lyt.test(t))}function cyt(t,e){if(fE(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(i){throw new Error(i.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return nU(t,e)}function nU(t,e){if(fE(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function sU(t,e,r){return Dt(this,null,function*(){let i=cyt(t,r),n=self.URL||self.webkitURL,s=typeof i!="string"&&n.createObjectURL(i);try{return yield uyt(s||i,e)}finally{s&&n.revokeObjectURL(s)}})}function uyt(t,e){return Dt(this,null,function*(){let r=new Image;return r.src=t,e.image&&e.image.decode&&r.decode?(yield r.decode(),r):yield new Promise((i,n)=>{try{r.onload=()=>i(r),r.onerror=s=>n(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){n(s)}})})}var hyt={},yB=!0;function dyt(t,e,r){return Dt(this,null,function*(){let i;fE(r)?i=yield sU(t,e,r):i=nU(t,r);let n=e&&e.imagebitmap;return yield pyt(i,n)})}function pyt(t,e=null){return Dt(this,null,function*(){if((myt(e)||!yB)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(r){console.warn(r),yB=!1}return yield createImageBitmap(t)})}function myt(t){for(let e in t||hyt)return!1;return!0}function gE(t){let e=Xf(t);return fyt(e)||_yt(e)||gyt(e)||vyt(e)}function fyt(t){let e=Xf(t);return e.byteLength>=24&&e.getUint32(0,!1)===2303741511?{mimeType:"image/png",width:e.getUint32(16,!1),height:e.getUint32(20,!1)}:null}function gyt(t){let e=Xf(t);return e.byteLength>=10&&e.getUint32(0,!1)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,!0),height:e.getUint16(8,!0)}:null}function vyt(t){let e=Xf(t);return e.byteLength>=14&&e.getUint16(0,!1)===16973&&e.getUint32(2,!0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,!0),height:e.getUint32(22,!0)}:null}function _yt(t){let e=Xf(t);if(!(e.byteLength>=3&&e.getUint16(0,!1)===65496&&e.getUint8(2)===255))return null;let{tableMarkers:r,sofMarkers:i}=byt(),n=2;for(;n+9<e.byteLength;){let s=e.getUint16(n,!1);if(i.has(s))return{mimeType:"image/jpeg",height:e.getUint16(n+5,!1),width:e.getUint16(n+7,!1)};if(!r.has(s))return null;n+=2,n+=e.getUint16(n,!1)}return null}function byt(){let t=new Set([65499,65476,65484,65501,65534]);for(let e=65504;e<65520;++e)t.add(e);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Xf(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function yyt(t,e){return Dt(this,null,function*(){let{mimeType:r}=gE(t)||{},i=globalThis._parseImageNode;return Bu(i),yield i(t,r)})}function wyt(t,e,r){return Dt(this,null,function*(){e=e||{};let i=(e.image||{}).type||"auto",{url:n}=r||{},s=xyt(i),a;switch(s){case"imagebitmap":a=yield dyt(t,e,n);break;case"image":a=yield sU(t,e,n);break;case"data":a=yield yyt(t,e);break;default:Bu(!1)}return i==="data"&&(a=syt(a)),a})}function xyt(t){switch(t){case"auto":case"data":return ryt();default:return iyt(t),t}}var Cyt=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],kyt=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],Ayt={image:{type:"auto",decode:!0}},Syt={id:"image",module:"images",name:"Images",version:Kbt,mimeTypes:kyt,extensions:Cyt,parse:wyt,tests:[t=>!!gE(new DataView(t))],options:Ayt},Eyt=["image/png","image/jpeg","image/gif"],b1={};function Tyt(t){return b1[t]===void 0&&(b1[t]=Iyt(t)),b1[t]}function Iyt(t){switch(t){case"image/webp":return Oyt();case"image/svg":return Mb;default:if(!Mb){let{_parseImageNode:e}=globalThis;return!!e&&Eyt.includes(t)}return!0}}function Oyt(){if(!Mb)return!1;try{return document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")===0}catch{return!1}}function cs(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function aU(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;let r=e.baseUri||e.uri;if(!r)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return r.substr(0,r.lastIndexOf("/")+1)+t}function Pyt(t,e,r){let i=t.bufferViews[r];cs(i);let n=i.buffer,s=e[n];cs(s);let a=(i.byteOffset||0)+s.byteOffset;return new Uint8Array(s.arrayBuffer,a,i.byteLength)}var oU={};lc(oU,{decode:()=>Kyt,name:()=>qyt});var wB=["SCALAR","VEC2","VEC3","VEC4"],Myt=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],Ryt=new Map(Myt),Byt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Dyt={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Lyt={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function lU(t){return wB[t-1]||wB[0]}function cU(t){let e=Ryt.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function uU(t,e){let r=Lyt[t.componentType],i=Byt[t.type],n=Dyt[t.componentType],s=t.count*i,a=t.count*i*n;return cs(a>=0&&a<=e.byteLength),{ArrayType:r,length:s,byteLength:a}}var Nyt={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},Zs=class{constructor(t){k(this,"gltf",void 0),k(this,"sourceBuffers",void 0),k(this,"byteLength",void 0),this.gltf=t||{json:x({},Nyt),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(t){return this.json[t]}getExtraData(t){return(this.json.extras||{})[t]}getExtension(t){let e=this.getUsedExtensions().find(i=>i===t),r=this.json.extensions||{};return e?r[t]||!0:null}getRequiredExtension(t){return this.getRequiredExtensions().find(e=>e===t)?this.getExtension(t):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(t,e){return(t.extensions||{})[e]}getScene(t){return this.getObject("scenes",t)}getNode(t){return this.getObject("nodes",t)}getSkin(t){return this.getObject("skins",t)}getMesh(t){return this.getObject("meshes",t)}getMaterial(t){return this.getObject("materials",t)}getAccessor(t){return this.getObject("accessors",t)}getTexture(t){return this.getObject("textures",t)}getSampler(t){return this.getObject("samplers",t)}getImage(t){return this.getObject("images",t)}getBufferView(t){return this.getObject("bufferViews",t)}getBuffer(t){return this.getObject("buffers",t)}getObject(t,e){if(typeof e=="object")return e;let r=this.json[t]&&this.json[t][e];if(!r)throw new Error("glTF file error: Could not find ".concat(t,"[").concat(e,"]"));return r}getTypedArrayForBufferView(t){t=this.getBufferView(t);let e=t.buffer,r=this.gltf.buffers[e];cs(r);let i=(t.byteOffset||0)+r.byteOffset;return new Uint8Array(r.arrayBuffer,i,t.byteLength)}getTypedArrayForAccessor(t){t=this.getAccessor(t);let e=this.getBufferView(t.bufferView),r=this.getBuffer(e.buffer).data,{ArrayType:i,length:n}=uU(t,e),s=e.byteOffset+t.byteOffset;return new i(r,s,n)}getTypedArrayForImageData(t){t=this.getAccessor(t);let e=this.getBufferView(t.bufferView),r=this.getBuffer(e.buffer).data,i=e.byteOffset||0;return new Uint8Array(r,i,e.byteLength)}addApplicationData(t,e){return this.json[t]=e,this}addExtraData(t,e){return this.json.extras=this.json.extras||{},this.json.extras[t]=e,this}addObjectExtension(t,e,r){return t.extensions=t.extensions||{},t.extensions[e]=r,this.registerUsedExtension(e),this}setObjectExtension(t,e,r){let i=t.extensions||{};i[e]=r}removeObjectExtension(t,e){let r=t.extensions||{},i=r[e];return delete r[e],i}addExtension(t,e={}){return cs(e),this.json.extensions=this.json.extensions||{},this.json.extensions[t]=e,this.registerUsedExtension(t),e}addRequiredExtension(t,e={}){return cs(e),this.addExtension(t,e),this.registerRequiredExtension(t),e}registerUsedExtension(t){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(e=>e===t)||this.json.extensionsUsed.push(t)}registerRequiredExtension(t){this.registerUsedExtension(t),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(e=>e===t)||this.json.extensionsRequired.push(t)}removeExtension(t){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,t),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,t),this.json.extensions&&delete this.json.extensions[t]}setDefaultScene(t){this.json.scene=t}addScene(t){let{nodeIndices:e}=t;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:e}),this.json.scenes.length-1}addNode(t){let{meshIndex:e,matrix:r}=t;this.json.nodes=this.json.nodes||[];let i={mesh:e};return r&&(i.matrix=r),this.json.nodes.push(i),this.json.nodes.length-1}addMesh(t){let{attributes:e,indices:r,material:i,mode:n=4}=t,s={primitives:[{attributes:this._addAttributes(e),mode:n}]};if(r){let a=this._addIndices(r);s.primitives[0].indices=a}return Number.isFinite(i)&&(s.primitives[0].material=i),this.json.meshes=this.json.meshes||[],this.json.meshes.push(s),this.json.meshes.length-1}addPointCloud(t){let e={primitives:[{attributes:this._addAttributes(t),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(e),this.json.meshes.length-1}addImage(t,e){let r=gE(t),i=e||r?.mimeType,n={bufferView:this.addBufferView(t),mimeType:i};return this.json.images=this.json.images||[],this.json.images.push(n),this.json.images.length-1}addBufferView(t){let e=t.byteLength;cs(Number.isFinite(e)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(t);let r={buffer:0,byteOffset:this.byteLength,byteLength:e};return this.byteLength+=$f(e,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(r),this.json.bufferViews.length-1}addAccessor(t,e){let r={bufferView:t,type:lU(e.size),componentType:e.componentType,count:e.count,max:e.max,min:e.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(r),this.json.accessors.length-1}addBinaryBuffer(t,e={size:3}){let r=this.addBufferView(t),i={min:e.min,max:e.max};(!i.min||!i.max)&&(i=this._getAccessorMinMax(t,e.size));let n={size:e.size,componentType:cU(t),count:Math.round(t.length/e.size),min:i.min,max:i.max};return this.addAccessor(r,Object.assign(n,e))}addTexture(t){let{imageIndex:e}=t,r={source:e};return this.json.textures=this.json.textures||[],this.json.textures.push(r),this.json.textures.length-1}addMaterial(t){return this.json.materials=this.json.materials||[],this.json.materials.push(t),this.json.materials.length-1}createBinaryChunk(){var t,e;this.gltf.buffers=[];let r=this.byteLength,i=new ArrayBuffer(r),n=new Uint8Array(i),s=0;for(let a of this.sourceBuffers||[])s=Qbt(a,n,s);(t=this.json)!==null&&t!==void 0&&(e=t.buffers)!==null&&e!==void 0&&e[0]?this.json.buffers[0].byteLength=r:this.json.buffers=[{byteLength:r}],this.gltf.binary=i,this.sourceBuffers=[i]}_removeStringFromArray(t,e){let r=!0;for(;r;){let i=t.indexOf(e);i>-1?t.splice(i,1):r=!1}}_addAttributes(t={}){let e={};for(let r in t){let i=t[r],n=this._getGltfAttributeName(r),s=this.addBinaryBuffer(i.value,i);e[n]=s}return e}_addIndices(t){return this.addBinaryBuffer(t,{size:1})}_getGltfAttributeName(t){switch(t.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return t}}_getAccessorMinMax(t,e){let r={min:null,max:null};if(t.length<e)return r;r.min=[],r.max=[];let i=t.subarray(0,e);for(let n of i)r.min.push(n),r.max.push(n);for(let n=e;n<t.length;n+=e)for(let s=0;s<e;s++)r.min[0+s]=Math.min(r.min[0+s],t[n+s]),r.max[0+s]=Math.max(r.max[0+s],t[n+s]);return r}},Fyt="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",zyt="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",Vyt=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),jyt=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),Uyt={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Hyt={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function Gyt(t,e,r,i,n,s="NONE"){return Dt(this,null,function*(){let a=yield Wyt();Xyt(a,a.exports[Hyt[n]],t,e,r,i,a.exports[Uyt[s||"NONE"]])})}var y1;function Wyt(){return Dt(this,null,function*(){return y1||(y1=Zyt()),y1})}function Zyt(){return Dt(this,null,function*(){let t=Fyt;WebAssembly.validate(Vyt)&&(t=zyt,console.log("Warning: meshopt_decoder is using experimental SIMD support"));let e=yield WebAssembly.instantiate($yt(t),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance})}function $yt(t){let e=new Uint8Array(t.length);for(let i=0;i<t.length;++i){let n=t.charCodeAt(i);e[i]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}let r=0;for(let i=0;i<t.length;++i)e[r++]=e[i]<60?jyt[e[i]]:(e[i]-60)*64+e[++i];return e.buffer.slice(0,r)}function Xyt(t,e,r,i,n,s,a){let o=t.exports.sbrk,l=i+3&-4,c=o(l*n),h=o(s.length),p=new Uint8Array(t.exports.memory.buffer);p.set(s,h);let m=e(c,i,n,h,s.length);if(m===0&&a&&a(c,l,n),r.set(p.subarray(c,c+i*n)),o(c-o(0)),m!==0)throw new Error("Malformed buffer data: ".concat(m))}var vE="EXT_meshopt_compression",qyt=vE;function Kyt(t,e){return Dt(this,null,function*(){var r;let i=new Zs(t);if(!(e!=null&&(r=e.gltf)!==null&&r!==void 0&&r.decompressMeshes))return;let n=[];for(let s of t.json.bufferViews||[])n.push(Yyt(i,s));yield Promise.all(n),i.removeExtension(vE)})}function Yyt(t,e){return Dt(this,null,function*(){let r=t.getObjectExtension(e,vE);if(r){let{byteOffset:i=0,byteLength:n=0,byteStride:s,count:a,mode:o,filter:l="NONE",buffer:c}=r,h=t.gltf.buffers[c],p=new Uint8Array(h.arrayBuffer,h.byteOffset+i,n),m=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield Gyt(m,a,s,p,o,l),m}return null})}var hU={};lc(hU,{name:()=>Jyt,preprocess:()=>Qyt});var $h="EXT_texture_webp",Jyt=$h;function Qyt(t,e){let r=new Zs(t);if(!Tyt("image/webp")){if(r.getRequiredExtensions().includes($h))throw new Error("gltf: Required extension ".concat($h," not supported by browser"));return}let{json:i}=r;for(let n of i.textures||[]){let s=r.getObjectExtension(n,$h);s&&(n.source=s.source),r.removeObjectExtension(n,$h)}r.removeExtension($h)}var dU={};lc(dU,{name:()=>t0t,preprocess:()=>e0t});var M_="KHR_texture_basisu",t0t=M_;function e0t(t,e){let r=new Zs(t),{json:i}=r;for(let n of i.textures||[]){let s=r.getObjectExtension(n,M_);s&&(n.source=s.source),r.removeObjectExtension(n,M_)}r.removeExtension(M_)}var pU={};lc(pU,{decode:()=>U0t,encode:()=>H0t,name:()=>V0t,preprocess:()=>j0t});var i0t="3.2.13",r0t={draco:{decoderType:typeof WebAssembly=="object"?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},mU={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:i0t,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:r0t};function n0t(t){let e=1/0,r=1/0,i=1/0,n=-1/0,s=-1/0,a=-1/0,o=t.POSITION?t.POSITION.value:[],l=o&&o.length;for(let c=0;c<l;c+=3){let h=o[c],p=o[c+1],m=o[c+2];e=h<e?h:e,r=p<r?p:r,i=m<i?m:i,n=h>n?h:n,s=p>s?p:s,a=m>a?m:a}return[[e,r,i],[n,s,a]]}function s0t(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var a0t=class _m{constructor(e,r){k(this,"fields",void 0),k(this,"metadata",void 0),s0t(Array.isArray(e)),o0t(e),this.fields=e,this.metadata=r||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let r=0;r<this.fields.length;++r)if(!this.fields[r].compareTo(e.fields[r]))return!1;return!0}select(...e){let r=Object.create(null);for(let n of e)r[n]=!0;let i=this.fields.filter(n=>r[n.name]);return new _m(i,this.metadata)}selectAt(...e){let r=e.map(i=>this.fields[i]).filter(Boolean);return new _m(r,this.metadata)}assign(e){let r,i=this.metadata;if(e instanceof _m){let a=e;r=a.fields,i=xB(xB(new Map,this.metadata),a.metadata)}else r=e;let n=Object.create(null);for(let a of this.fields)n[a.name]=a;for(let a of r)n[a.name]=a;let s=Object.values(n);return new _m(s,i)}};function o0t(t){let e={};for(let r of t)e[r.name]&&console.warn("Schema: duplicated field name",r.name,r),e[r.name]=!0}function xB(t,e){return new Map([...t||new Map,...e||new Map])}var CB=class fU{constructor(e,r,i=!1,n=new Map){k(this,"name",void 0),k(this,"type",void 0),k(this,"nullable",void 0),k(this,"metadata",void 0),this.name=e,this.type=r,this.nullable=i,this.metadata=n}get typeId(){return this.type&&this.type.typeId}clone(){return new fU(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}},Ii;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(Ii||(Ii={}));var gU,vU,_U,bU,yU,wU,xU,CU,mc=class{static isNull(t){return t&&t.typeId===Ii.Null}static isInt(t){return t&&t.typeId===Ii.Int}static isFloat(t){return t&&t.typeId===Ii.Float}static isBinary(t){return t&&t.typeId===Ii.Binary}static isUtf8(t){return t&&t.typeId===Ii.Utf8}static isBool(t){return t&&t.typeId===Ii.Bool}static isDecimal(t){return t&&t.typeId===Ii.Decimal}static isDate(t){return t&&t.typeId===Ii.Date}static isTime(t){return t&&t.typeId===Ii.Time}static isTimestamp(t){return t&&t.typeId===Ii.Timestamp}static isInterval(t){return t&&t.typeId===Ii.Interval}static isList(t){return t&&t.typeId===Ii.List}static isStruct(t){return t&&t.typeId===Ii.Struct}static isUnion(t){return t&&t.typeId===Ii.Union}static isFixedSizeBinary(t){return t&&t.typeId===Ii.FixedSizeBinary}static isFixedSizeList(t){return t&&t.typeId===Ii.FixedSizeList}static isMap(t){return t&&t.typeId===Ii.Map}static isDictionary(t){return t&&t.typeId===Ii.Dictionary}get typeId(){return Ii.NONE}compareTo(t){return this===t}};gU=Symbol.toStringTag;var cp=class extends mc{constructor(t,e){super(),k(this,"isSigned",void 0),k(this,"bitWidth",void 0),this.isSigned=t,this.bitWidth=e}get typeId(){return Ii.Int}get[gU](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}},l0t=class extends cp{constructor(){super(!0,8)}},c0t=class extends cp{constructor(){super(!0,16)}},u0t=class extends cp{constructor(){super(!0,32)}},h0t=class extends cp{constructor(){super(!1,8)}},d0t=class extends cp{constructor(){super(!1,16)}},p0t=class extends cp{constructor(){super(!1,32)}},kU={HALF:16,SINGLE:32,DOUBLE:64};vU=Symbol.toStringTag;var AU=class extends mc{constructor(t){super(),k(this,"precision",void 0),this.precision=t}get typeId(){return Ii.Float}get[vU](){return"Float"}toString(){return"Float".concat(this.precision)}},m0t=class extends AU{constructor(){super(kU.SINGLE)}},f0t=class extends AU{constructor(){super(kU.DOUBLE)}},g0t={DAY:0,MILLISECOND:1};_U=Symbol.toStringTag;var Y5t=class extends mc{constructor(t){super(),k(this,"unit",void 0),this.unit=t}get typeId(){return Ii.Date}get[_U](){return"Date"}toString(){return"Date".concat((this.unit+1)*32,"<").concat(g0t[this.unit],">")}},SU={SECOND:1,MILLISECOND:1e3,MICROSECOND:1e6,NANOSECOND:1e9};bU=Symbol.toStringTag;var J5t=class extends mc{constructor(t,e){super(),k(this,"unit",void 0),k(this,"bitWidth",void 0),this.unit=t,this.bitWidth=e}get typeId(){return Ii.Time}toString(){return"Time".concat(this.bitWidth,"<").concat(SU[this.unit],">")}get[bU](){return"Time"}};yU=Symbol.toStringTag;var Q5t=class extends mc{constructor(t,e=null){super(),k(this,"unit",void 0),k(this,"timezone",void 0),this.unit=t,this.timezone=e}get typeId(){return Ii.Timestamp}get[yU](){return"Timestamp"}toString(){return"Timestamp<".concat(SU[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}},v0t={DAY_TIME:0,YEAR_MONTH:1};wU=Symbol.toStringTag;var tzt=class extends mc{constructor(t){super(),k(this,"unit",void 0),this.unit=t}get typeId(){return Ii.Interval}get[wU](){return"Interval"}toString(){return"Interval<".concat(v0t[this.unit],">")}};xU=Symbol.toStringTag;var _0t=class extends mc{constructor(t,e){super(),k(this,"listSize",void 0),k(this,"children",void 0),this.listSize=t,this.children=[e]}get typeId(){return Ii.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[xU](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}};CU=Symbol.toStringTag;var ezt=class extends mc{constructor(t){super(),k(this,"children",void 0),this.children=t}get typeId(){return Ii.Struct}toString(){return"Struct<{".concat(this.children.map(t=>"".concat(t.name,":").concat(t.type)).join(", "),"}>")}get[CU](){return"Struct"}};function b0t(t){switch(t.constructor){case Int8Array:return new l0t;case Uint8Array:return new h0t;case Int16Array:return new c0t;case Uint16Array:return new d0t;case Int32Array:return new u0t;case Uint32Array:return new p0t;case Float32Array:return new m0t;case Float64Array:return new f0t;default:throw new Error("array type not supported")}}function y0t(t,e,r){let i=b0t(e.value),n=r||w0t(e);return new CB(t,new _0t(e.size,new CB("value",i)),!1,n)}function w0t(t){let e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}function x0t(t,e,r){let i=EU(e.metadata),n=[],s=C0t(e.attributes);for(let a in t){let o=t[a],l=kB(a,o,s[a]);n.push(l)}if(r){let a=kB("indices",r);n.push(a)}return new a0t(n,i)}function C0t(t){let e={};for(let r in t){let i=t[r];e[i.name||"undefined"]=i}return e}function kB(t,e,r){let i=r?EU(r.metadata):void 0;return y0t(t,e,i)}function EU(t){let e=new Map;for(let r in t)e.set("".concat(r,".string"),JSON.stringify(t[r]));return e}var AB={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},k0t={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},A0t=4,S0t=class{constructor(t){k(this,"draco",void 0),k(this,"decoder",void 0),k(this,"metadataQuerier",void 0),this.draco=t,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(t,e={}){let r=new this.draco.DecoderBuffer;r.Init(new Int8Array(t),t.byteLength),this._disableAttributeTransforms(e);let i=this.decoder.GetEncodedGeometryType(r),n=i===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let s;switch(i){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(r,n);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(r,n);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!n.ptr){let h="DRACO decompression failed: ".concat(s.error_msg());throw new Error(h)}let a=this._getDracoLoaderData(n,i,e),o=this._getMeshData(n,a,e),l=n0t(o.attributes),c=x0t(o.attributes,a,o.indices);return Q(x({loader:"draco",loaderData:a,header:{vertexCount:n.num_points(),boundingBox:l}},o),{schema:c})}finally{this.draco.destroy(r),n&&this.draco.destroy(n)}}_getDracoLoaderData(t,e,r){let i=this._getTopLevelMetadata(t),n=this._getDracoAttributes(t,r);return{geometry_type:e,num_attributes:t.num_attributes(),num_points:t.num_points(),num_faces:t instanceof this.draco.Mesh?t.num_faces():0,metadata:i,attributes:n}}_getDracoAttributes(t,e){let r={};for(let i=0;i<t.num_attributes();i++){let n=this.decoder.GetAttribute(t,i),s=this._getAttributeMetadata(t,i);r[n.unique_id()]={unique_id:n.unique_id(),attribute_type:n.attribute_type(),data_type:n.data_type(),num_components:n.num_components(),byte_offset:n.byte_offset(),byte_stride:n.byte_stride(),normalized:n.normalized(),attribute_index:i,metadata:s};let a=this._getQuantizationTransform(n,e);a&&(r[n.unique_id()].quantization_transform=a);let o=this._getOctahedronTransform(n,e);o&&(r[n.unique_id()].octahedron_transform=o)}return r}_getMeshData(t,e,r){let i=this._getMeshAttributes(e,t,r);if(!i.POSITION)throw new Error("DRACO: No position attribute found.");if(t instanceof this.draco.Mesh)switch(r.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:i,indices:{value:this._getTriangleStripIndices(t),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:i,indices:{value:this._getTriangleListIndices(t),size:1}}}return{topology:"point-list",mode:0,attributes:i}}_getMeshAttributes(t,e,r){let i={};for(let n of Object.values(t.attributes)){let s=this._deduceAttributeName(n,r);n.name=s;let{value:a,size:o}=this._getAttributeValues(e,n);i[s]={value:a,size:o,byteOffset:n.byte_offset,byteStride:n.byte_stride,normalized:n.normalized}}return i}_getTriangleListIndices(t){let e=t.num_faces()*3,r=e*A0t,i=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(t,r,i),new Uint32Array(this.draco.HEAPF32.buffer,i,e).slice()}finally{this.draco._free(i)}}_getTriangleStripIndices(t){let e=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(t,e),I0t(e)}finally{this.draco.destroy(e)}}_getAttributeValues(t,e){let r=k0t[e.data_type],i=e.num_components,n=t.num_points()*i,s=n*r.BYTES_PER_ELEMENT,a=E0t(this.draco,r),o,l=this.draco._malloc(s);try{let c=this.decoder.GetAttribute(t,e.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(t,c,a,s,l),o=new r(this.draco.HEAPF32.buffer,l,n).slice()}finally{this.draco._free(l)}return{value:o,size:i}}_deduceAttributeName(t,e){let r=t.unique_id;for(let[s,a]of Object.entries(e.extraAttributes||{}))if(a===r)return s;let i=t.attribute_type;for(let s in AB)if(this.draco[s]===i)return AB[s];let n=e.attributeNameEntry||"name";return t.metadata[n]?t.metadata[n].string:"CUSTOM_ATTRIBUTE_".concat(r)}_getTopLevelMetadata(t){let e=this.decoder.GetMetadata(t);return this._getDracoMetadata(e)}_getAttributeMetadata(t,e){let r=this.decoder.GetAttributeMetadata(t,e);return this._getDracoMetadata(r)}_getDracoMetadata(t){if(!t||!t.ptr)return{};let e={},r=this.metadataQuerier.NumEntries(t);for(let i=0;i<r;i++){let n=this.metadataQuerier.GetEntryName(t,i);e[n]=this._getDracoMetadataField(t,n)}return e}_getDracoMetadataField(t,e){let r=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(t,e,r);let i=T0t(r);return{int:this.metadataQuerier.GetIntEntry(t,e),string:this.metadataQuerier.GetStringEntry(t,e),double:this.metadataQuerier.GetDoubleEntry(t,e),intArray:i}}finally{this.draco.destroy(r)}}_disableAttributeTransforms(t){let{quantizedAttributes:e=[],octahedronAttributes:r=[]}=t,i=[...e,...r];for(let n of i)this.decoder.SkipAttributeTransform(this.draco[n])}_getQuantizationTransform(t,e){let{quantizedAttributes:r=[]}=e,i=t.attribute_type();if(r.map(n=>this.decoder[n]).includes(i)){let n=new this.draco.AttributeQuantizationTransform;try{if(n.InitFromAttribute(t))return{quantization_bits:n.quantization_bits(),range:n.range(),min_values:new Float32Array([1,2,3]).map(s=>n.min_value(s))}}finally{this.draco.destroy(n)}}return null}_getOctahedronTransform(t,e){let{octahedronAttributes:r=[]}=e,i=t.attribute_type();if(r.map(n=>this.decoder[n]).includes(i)){let n=new this.draco.AttributeQuantizationTransform;try{if(n.InitFromAttribute(t))return{quantization_bits:n.quantization_bits()}}finally{this.draco.destroy(n)}}return null}};function E0t(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}function T0t(t){let e=t.size(),r=new Int32Array(e);for(let i=0;i<e;i++)r[i]=t.GetValue(i);return r}function I0t(t){let e=t.size(),r=new Int32Array(e);for(let i=0;i<e;i++)r[i]=t.GetValue(i);return r}var t0="1.4.1",O0t="https://www.gstatic.com/draco/versioned/decoders/".concat(t0,"/draco_decoder.js"),P0t="https://www.gstatic.com/draco/versioned/decoders/".concat(t0,"/draco_wasm_wrapper.js"),M0t="https://www.gstatic.com/draco/versioned/decoders/".concat(t0,"/draco_decoder.wasm"),izt="https://raw.githubusercontent.com/google/draco/".concat(t0,"/javascript/draco_encoder.js"),im;function R0t(t){return Dt(this,null,function*(){let e=t.modules||{};return e.draco3d?im=im||e.draco3d.createDecoderModule({}).then(r=>({draco:r})):im=im||B0t(t),yield im})}function B0t(t){return Dt(this,null,function*(){let e,r;switch(t.draco&&t.draco.decoderType){case"js":e=yield _u(O0t,"draco",t);break;case"wasm":default:[e,r]=yield Promise.all([yield _u(P0t,"draco",t),yield _u(M0t,"draco",t)])}return e=e||globalThis.DracoDecoderModule,yield D0t(e,r)})}function D0t(t,e){let r={};return e&&(r.wasmBinary=e),new Promise(i=>{t(Q(x({},r),{onModuleLoaded:n=>i({draco:n})}))})}var _E=Q(x({},mU),{parse:L0t});function L0t(t,e){return Dt(this,null,function*(){let{draco:r}=yield R0t(e),i=new S0t(r);try{return i.parseSync(t,e?.draco)}finally{i.destroy()}})}function N0t(t){let e={};for(let r in t){let i=t[r];if(r!=="indices"){let n=TU(i);e[r]=n}}return e}function TU(t){let{buffer:e,size:r,count:i}=F0t(t);return{value:e,size:r,byteOffset:0,count:i,type:lU(r),componentType:cU(e)}}function F0t(t){let e=t,r=1,i=0;return t&&t.value&&(e=t.value,r=t.size||1),e&&(ArrayBuffer.isView(e)||(e=z0t(e,Float32Array)),i=e.length/r),{buffer:e,size:r,count:i}}function z0t(t,e,r=!1){return t?Array.isArray(t)?new e(t):r&&!(t instanceof e)?new e(t):t:null}var Du="KHR_draco_mesh_compression",V0t=Du;function j0t(t,e,r){let i=new Zs(t);for(let n of IU(i))i.getObjectExtension(n,Du)}function U0t(t,e,r){return Dt(this,null,function*(){var i;if(!(e!=null&&(i=e.gltf)!==null&&i!==void 0&&i.decompressMeshes))return;let n=new Zs(t),s=[];for(let a of IU(n))n.getObjectExtension(a,Du)&&s.push(G0t(n,a,e,r));yield Promise.all(s),n.removeExtension(Du)})}function H0t(t,e={}){let r=new Zs(t);for(let i of r.json.meshes||[])W0t(i,e),r.addRequiredExtension(Du)}function G0t(t,e,r,i){return Dt(this,null,function*(){let n=t.getObjectExtension(e,Du);if(!n)return;let s=t.getTypedArrayForBufferView(n.bufferView),a=rU(s.buffer,s.byteOffset),{parse:o}=i,l=x({},r);delete l["3d-tiles"];let c=yield o(a,_E,l,i),h=N0t(c.attributes);for(let[p,m]of Object.entries(h))if(p in e.attributes){let f=e.attributes[p],g=t.getAccessor(f);g!=null&&g.min&&g!==null&&g!==void 0&&g.max&&(m.min=g.min,m.max=g.max)}e.attributes=h,c.indices&&(e.indices=TU(c.indices)),Z0t(e)})}function W0t(t,e,r=4,i,n){var s;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");let a=i.DracoWriter.encodeSync({attributes:t}),o=n==null||(s=n.parseSync)===null||s===void 0?void 0:s.call(n,{attributes:t}),l=i._addFauxAttributes(o.attributes),c=i.addBufferView(a);return{primitives:[{attributes:l,mode:r,extensions:{[Du]:{bufferView:c,attributes:l}}}]}}function Z0t(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*IU(t){for(let e of t.json.meshes||[])for(let r of e.primitives)yield r}var OU={};lc(OU,{decode:()=>X0t,encode:()=>q0t,name:()=>$0t});var pu="KHR_lights_punctual",$0t=pu;function X0t(t){return Dt(this,null,function*(){let e=new Zs(t),{json:r}=e,i=e.getExtension(pu);i&&(e.json.lights=i.lights,e.removeExtension(pu));for(let n of r.nodes||[]){let s=e.getObjectExtension(n,pu);s&&(n.light=s.light),e.removeObjectExtension(n,pu)}})}function q0t(t){return Dt(this,null,function*(){let e=new Zs(t),{json:r}=e;if(r.lights){let i=e.addExtension(pu);cs(!i.lights),i.lights=r.lights,delete r.lights}if(e.json.lights){for(let i of e.json.lights){let n=i.node;e.addObjectExtension(n,pu,i)}delete e.json.lights}})}var PU={};lc(PU,{decode:()=>Y0t,encode:()=>J0t,name:()=>K0t});var cf="KHR_materials_unlit",K0t=cf;function Y0t(t){return Dt(this,null,function*(){let e=new Zs(t),{json:r}=e;e.removeExtension(cf);for(let i of r.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,cf)})}function J0t(t){let e=new Zs(t),{json:r}=e;if(e.materials)for(let i of r.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,cf,{}),e.addExtension(cf))}var MU={};lc(MU,{decode:()=>twt,encode:()=>ewt,name:()=>Q0t});var bm="KHR_techniques_webgl",Q0t=bm;function twt(t){return Dt(this,null,function*(){let e=new Zs(t),{json:r}=e,i=e.getExtension(bm);if(i){let n=iwt(i,e);for(let s of r.materials||[]){let a=e.getObjectExtension(s,bm);a&&(s.technique=Object.assign({},a,n[a.technique]),s.technique.values=rwt(s.technique,e)),e.removeObjectExtension(s,bm)}e.removeExtension(bm)}})}function ewt(t,e){return Dt(this,null,function*(){})}function iwt(t,e){let{programs:r=[],shaders:i=[],techniques:n=[]}=t,s=new TextDecoder;return i.forEach(a=>{if(Number.isFinite(a.bufferView))a.code=s.decode(e.getTypedArrayForBufferView(a.bufferView));else throw new Error("KHR_techniques_webgl: no shader code")}),r.forEach(a=>{a.fragmentShader=i[a.fragmentShader],a.vertexShader=i[a.vertexShader]}),n.forEach(a=>{a.program=r[a.program]}),n}function rwt(t,e){let r=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(i=>{t.uniforms[i].value&&!(i in r)&&(r[i]=t.uniforms[i].value)}),Object.keys(r).forEach(i=>{typeof r[i]=="object"&&r[i].index!==void 0&&(r[i].texture=e.getTexture(r[i].index))}),r}var RU=[oU,hU,dU,pU,OU,PU,MU];function nwt(t,e={},r){let i=RU.filter(s=>BU(s.name,e));for(let s of i){var n;(n=s.preprocess)===null||n===void 0||n.call(s,t,e,r)}}function swt(t){return Dt(this,arguments,function*(e,r={},i){let n=RU.filter(a=>BU(a.name,r));for(let a of n){var s;yield(s=a.decode)===null||s===void 0?void 0:s.call(a,e,r,i)}})}function BU(t,e){var r;let i=(e==null||(r=e.gltf)===null||r===void 0?void 0:r.excludeExtensions)||{};return!(t in i&&!i[t])}var w1="KHR_binary_glTF";function awt(t){let e=new Zs(t),{json:r}=e;for(let i of r.images||[]){let n=e.getObjectExtension(i,w1);n&&Object.assign(i,n),e.removeObjectExtension(i,w1)}r.buffers&&r.buffers[0]&&delete r.buffers[0].uri,e.removeExtension(w1)}var SB={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},owt={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},lwt=class{constructor(){k(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),k(this,"json",void 0)}normalize(t,e){this.json=t.json;let r=t.json;switch(r.asset&&r.asset.version){case"2.0":return;case void 0:case"1.0":break;default:console.warn("glTF: Unknown version ".concat(r.asset.version));return}if(!e.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(r),this._convertTopLevelObjectsToArrays(r),awt(t),this._convertObjectIdsToArrayIndices(r),this._updateObjects(r),this._updateMaterial(r)}_addAsset(t){t.asset=t.asset||{},t.asset.version="2.0",t.asset.generator=t.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(t){for(let e in SB)this._convertTopLevelObjectToArray(t,e)}_convertTopLevelObjectToArray(t,e){let r=t[e];if(!(!r||Array.isArray(r))){t[e]=[];for(let i in r){let n=r[i];n.id=n.id||i;let s=t[e].length;t[e].push(n),this.idToIndexMap[e][i]=s}}}_convertObjectIdsToArrayIndices(t){for(let e in SB)this._convertIdsToIndices(t,e);"scene"in t&&(t.scene=this._convertIdToIndex(t.scene,"scene"));for(let e of t.textures)this._convertTextureIds(e);for(let e of t.meshes)this._convertMeshIds(e);for(let e of t.nodes)this._convertNodeIds(e);for(let e of t.scenes)this._convertSceneIds(e)}_convertTextureIds(t){t.source&&(t.source=this._convertIdToIndex(t.source,"image"))}_convertMeshIds(t){for(let e of t.primitives){let{attributes:r,indices:i,material:n}=e;for(let s in r)r[s]=this._convertIdToIndex(r[s],"accessor");i&&(e.indices=this._convertIdToIndex(i,"accessor")),n&&(e.material=this._convertIdToIndex(n,"material"))}}_convertNodeIds(t){t.children&&(t.children=t.children.map(e=>this._convertIdToIndex(e,"node"))),t.meshes&&(t.meshes=t.meshes.map(e=>this._convertIdToIndex(e,"mesh")))}_convertSceneIds(t){t.nodes&&(t.nodes=t.nodes.map(e=>this._convertIdToIndex(e,"node")))}_convertIdsToIndices(t,e){t[e]||(console.warn("gltf v1: json doesn't contain attribute ".concat(e)),t[e]=[]);for(let r of t[e])for(let i in r){let n=r[i],s=this._convertIdToIndex(n,i);r[i]=s}}_convertIdToIndex(t,e){let r=owt[e];if(r in this.idToIndexMap){let i=this.idToIndexMap[r][t];if(!Number.isFinite(i))throw new Error("gltf v1: failed to resolve ".concat(e," with id ").concat(t));return i}return t}_updateObjects(t){for(let e of this.json.buffers)delete e.type}_updateMaterial(t){for(let n of t.materials){var e,r,i;n.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};let s=((e=n.values)===null||e===void 0?void 0:e.tex)||((r=n.values)===null||r===void 0?void 0:r.texture2d_0)||((i=n.values)===null||i===void 0?void 0:i.diffuseTex),a=t.textures.findIndex(o=>o.id===s);a!==-1&&(n.pbrMetallicRoughness.baseColorTexture={index:a})}}};function cwt(t,e={}){return new lwt().normalize(t,e)}var uwt={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},hwt={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},Ms={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},dwt={magFilter:Ms.TEXTURE_MAG_FILTER,minFilter:Ms.TEXTURE_MIN_FILTER,wrapS:Ms.TEXTURE_WRAP_S,wrapT:Ms.TEXTURE_WRAP_T},pwt={[Ms.TEXTURE_MAG_FILTER]:Ms.LINEAR,[Ms.TEXTURE_MIN_FILTER]:Ms.NEAREST_MIPMAP_LINEAR,[Ms.TEXTURE_WRAP_S]:Ms.REPEAT,[Ms.TEXTURE_WRAP_T]:Ms.REPEAT};function mwt(t){return hwt[t]}function fwt(t){return uwt[t]}var gwt=class{constructor(){k(this,"baseUri",""),k(this,"json",{}),k(this,"buffers",[]),k(this,"images",[])}postProcess(t,e={}){let{json:r,buffers:i=[],images:n=[],baseUri:s=""}=t;return cs(r),this.baseUri=s,this.json=r,this.buffers=i,this.images=n,this._resolveTree(this.json,e),this.json}_resolveTree(t,e={}){t.bufferViews&&(t.bufferViews=t.bufferViews.map((r,i)=>this._resolveBufferView(r,i))),t.images&&(t.images=t.images.map((r,i)=>this._resolveImage(r,i))),t.samplers&&(t.samplers=t.samplers.map((r,i)=>this._resolveSampler(r,i))),t.textures&&(t.textures=t.textures.map((r,i)=>this._resolveTexture(r,i))),t.accessors&&(t.accessors=t.accessors.map((r,i)=>this._resolveAccessor(r,i))),t.materials&&(t.materials=t.materials.map((r,i)=>this._resolveMaterial(r,i))),t.meshes&&(t.meshes=t.meshes.map((r,i)=>this._resolveMesh(r,i))),t.nodes&&(t.nodes=t.nodes.map((r,i)=>this._resolveNode(r,i))),t.skins&&(t.skins=t.skins.map((r,i)=>this._resolveSkin(r,i))),t.scenes&&(t.scenes=t.scenes.map((r,i)=>this._resolveScene(r,i))),t.scene!==void 0&&(t.scene=t.scenes[this.json.scene])}getScene(t){return this._get("scenes",t)}getNode(t){return this._get("nodes",t)}getSkin(t){return this._get("skins",t)}getMesh(t){return this._get("meshes",t)}getMaterial(t){return this._get("materials",t)}getAccessor(t){return this._get("accessors",t)}getCamera(t){return null}getTexture(t){return this._get("textures",t)}getSampler(t){return this._get("samplers",t)}getImage(t){return this._get("images",t)}getBufferView(t){return this._get("bufferViews",t)}getBuffer(t){return this._get("buffers",t)}_get(t,e){if(typeof e=="object")return e;let r=this.json[t]&&this.json[t][e];return r||console.warn("glTF file error: Could not find ".concat(t,"[").concat(e,"]")),r}_resolveScene(t,e){return t.id=t.id||"scene-".concat(e),t.nodes=(t.nodes||[]).map(r=>this.getNode(r)),t}_resolveNode(t,e){return t.id=t.id||"node-".concat(e),t.children&&(t.children=t.children.map(r=>this.getNode(r))),t.mesh!==void 0?t.mesh=this.getMesh(t.mesh):t.meshes!==void 0&&t.meshes.length&&(t.mesh=t.meshes.reduce((r,i)=>{let n=this.getMesh(i);return r.id=n.id,r.primitives=r.primitives.concat(n.primitives),r},{primitives:[]})),t.camera!==void 0&&(t.camera=this.getCamera(t.camera)),t.skin!==void 0&&(t.skin=this.getSkin(t.skin)),t}_resolveSkin(t,e){return t.id=t.id||"skin-".concat(e),t.inverseBindMatrices=this.getAccessor(t.inverseBindMatrices),t}_resolveMesh(t,e){return t.id=t.id||"mesh-".concat(e),t.primitives&&(t.primitives=t.primitives.map(r=>{r=x({},r);let i=r.attributes;r.attributes={};for(let n in i)r.attributes[n]=this.getAccessor(i[n]);return r.indices!==void 0&&(r.indices=this.getAccessor(r.indices)),r.material!==void 0&&(r.material=this.getMaterial(r.material)),r})),t}_resolveMaterial(t,e){if(t.id=t.id||"material-".concat(e),t.normalTexture&&(t.normalTexture=x({},t.normalTexture),t.normalTexture.texture=this.getTexture(t.normalTexture.index)),t.occlusionTexture&&(t.occlustionTexture=x({},t.occlustionTexture),t.occlusionTexture.texture=this.getTexture(t.occlusionTexture.index)),t.emissiveTexture&&(t.emmisiveTexture=x({},t.emmisiveTexture),t.emissiveTexture.texture=this.getTexture(t.emissiveTexture.index)),t.emissiveFactor||(t.emissiveFactor=t.emmisiveTexture?[1,1,1]:[0,0,0]),t.pbrMetallicRoughness){t.pbrMetallicRoughness=x({},t.pbrMetallicRoughness);let r=t.pbrMetallicRoughness;r.baseColorTexture&&(r.baseColorTexture=x({},r.baseColorTexture),r.baseColorTexture.texture=this.getTexture(r.baseColorTexture.index)),r.metallicRoughnessTexture&&(r.metallicRoughnessTexture=x({},r.metallicRoughnessTexture),r.metallicRoughnessTexture.texture=this.getTexture(r.metallicRoughnessTexture.index))}return t}_resolveAccessor(t,e){if(t.id=t.id||"accessor-".concat(e),t.bufferView!==void 0&&(t.bufferView=this.getBufferView(t.bufferView)),t.bytesPerComponent=mwt(t.componentType),t.components=fwt(t.type),t.bytesPerElement=t.bytesPerComponent*t.components,t.bufferView){let r=t.bufferView.buffer,{ArrayType:i,byteLength:n}=uU(t,t.bufferView),s=(t.bufferView.byteOffset||0)+(t.byteOffset||0)+r.byteOffset,a=r.arrayBuffer.slice(s,s+n);t.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(r,s,t.bufferView.byteStride,t.bytesPerElement,t.count)),t.value=new i(a)}return t}_getValueFromInterleavedBuffer(t,e,r,i,n){let s=new Uint8Array(n*i);for(let a=0;a<n;a++){let o=e+a*r;s.set(new Uint8Array(t.arrayBuffer.slice(o,o+i)),a*i)}return s.buffer}_resolveTexture(t,e){return t.id=t.id||"texture-".concat(e),t.sampler="sampler"in t?this.getSampler(t.sampler):pwt,t.source=this.getImage(t.source),t}_resolveSampler(t,e){t.id=t.id||"sampler-".concat(e),t.parameters={};for(let r in t){let i=this._enumSamplerParameter(r);i!==void 0&&(t.parameters[i]=t[r])}return t}_enumSamplerParameter(t){return dwt[t]}_resolveImage(t,e){t.id=t.id||"image-".concat(e),t.bufferView!==void 0&&(t.bufferView=this.getBufferView(t.bufferView));let r=this.images[e];return r&&(t.image=r),t}_resolveBufferView(t,e){let r=t.buffer,i=Q(x({id:"bufferView-".concat(e)},t),{buffer:this.buffers[r]}),n=this.buffers[r].arrayBuffer,s=this.buffers[r].byteOffset||0;return"byteOffset"in t&&(s+=t.byteOffset),i.data=new Uint8Array(n,s,t.byteLength),i}_resolveCamera(t,e){return t.id=t.id||"camera-".concat(e),t.perspective,t.orthographic,t}};function vwt(t,e){return new gwt().postProcess(t,e)}var EB=1735152710,bE=12,Rb=8,_wt=1313821514,bwt=5130562,ywt=0,wwt=1,xwt=0,Td=!0;function Cwt(t,e=0){return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}function kwt(t,e=0,r={}){let i=new DataView(t),{magic:n=EB}=r,s=i.getUint32(e,!1);return s===n||s===EB}function Awt(t,e,r=0,i={}){let n=new DataView(e),s=Cwt(n,r+0),a=n.getUint32(r+4,Td),o=n.getUint32(r+8,Td);switch(Object.assign(t,{header:{byteOffset:r,byteLength:o,hasBinChunk:!1},type:s,version:a,json:{},binChunks:[]}),r+=bE,t.version){case 1:return Swt(t,n,r);case 2:return Ewt(t,n,r,i={});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}function Swt(t,e,r){Bu(t.header.byteLength>bE+Rb);let i=e.getUint32(r+0,Td),n=e.getUint32(r+4,Td);return r+=Rb,Bu(n===xwt),uk(t,e,r,i),r+=i,r+=hk(t,e,r,t.header.byteLength),r}function Ewt(t,e,r,i){return Bu(t.header.byteLength>bE+Rb),Twt(t,e,r,i),r+t.header.byteLength}function Twt(t,e,r,i){for(;r+8<=t.header.byteLength;){let n=e.getUint32(r+0,Td),s=e.getUint32(r+4,Td);switch(r+=Rb,s){case _wt:uk(t,e,r,n);break;case bwt:hk(t,e,r,n);break;case ywt:i.strict||uk(t,e,r,n);break;case wwt:i.strict||hk(t,e,r,n);break;default:break}r+=$f(n,4)}return r}function uk(t,e,r,i){let n=new Uint8Array(e.buffer,r,i),s=new TextDecoder("utf8").decode(n);return t.json=JSON.parse(s),$f(i,4)}function hk(t,e,r,i){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:r,byteLength:i,arrayBuffer:e.buffer}),$f(i,4)}function Iwt(t,e,r=0,i,n){return Dt(this,null,function*(){var s,a,o,l;Owt(t,e,r,i),cwt(t,{normalize:i==null||(s=i.gltf)===null||s===void 0?void 0:s.normalize}),nwt(t,i,n);let c=[];if(i!=null&&(a=i.gltf)!==null&&a!==void 0&&a.loadBuffers&&t.json.buffers&&(yield Pwt(t,i,n)),i!=null&&(o=i.gltf)!==null&&o!==void 0&&o.loadImages){let p=Mwt(t,i,n);c.push(p)}let h=swt(t,i,n);return c.push(h),yield Promise.all(c),i!=null&&(l=i.gltf)!==null&&l!==void 0&&l.postProcess?vwt(t,i):t})}function Owt(t,e,r,i){if(i.uri&&(t.baseUri=i.uri),e instanceof ArrayBuffer&&!kwt(e,r,i)&&(e=new TextDecoder().decode(e)),typeof e=="string")t.json=Jbt(e);else if(e instanceof ArrayBuffer){let a={};r=Awt(a,e,r,i.glb),cs(a.type==="glTF","Invalid GLB magic string ".concat(a.type)),t._glb=a,t.json=a.json}else cs(!1,"GLTF: must be ArrayBuffer or string");let n=t.json.buffers||[];if(t.buffers=new Array(n.length).fill(null),t._glb&&t._glb.header.hasBinChunk){let{binChunks:a}=t._glb;t.buffers[0]={arrayBuffer:a[0].arrayBuffer,byteOffset:a[0].byteOffset,byteLength:a[0].byteLength}}let s=t.json.images||[];t.images=new Array(s.length).fill({})}function Pwt(t,e,r){return Dt(this,null,function*(){let i=t.json.buffers||[];for(let a=0;a<i.length;++a){let o=i[a];if(o.uri){var n,s;let{fetch:l}=r;cs(l);let c=aU(o.uri,e),h=yield r==null||(n=r.fetch)===null||n===void 0?void 0:n.call(r,c),p=yield h==null||(s=h.arrayBuffer)===null||s===void 0?void 0:s.call(h);t.buffers[a]={arrayBuffer:p,byteOffset:0,byteLength:p.byteLength},delete o.uri}else t.buffers[a]===null&&(t.buffers[a]={arrayBuffer:new ArrayBuffer(o.byteLength),byteOffset:0,byteLength:o.byteLength})}})}function Mwt(t,e,r){return Dt(this,null,function*(){let i=Rwt(t),n=t.json.images||[],s=[];for(let a of i)s.push(Bwt(t,n[a],a,e,r));return yield Promise.all(s)})}function Rwt(t){let e=new Set,r=t.json.textures||[];for(let i of r)i.source!==void 0&&e.add(i.source);return Array.from(e).sort()}function Bwt(t,e,r,i,n){return Dt(this,null,function*(){let{fetch:s,parse:a}=n,o;if(e.uri&&!e.hasOwnProperty("bufferView")){let c=aU(e.uri,i);o=yield(yield s(c)).arrayBuffer()}if(Number.isFinite(e.bufferView)){let c=Pyt(t.json,t.buffers,e.bufferView);o=rU(c.buffer,c.byteOffset,c.byteLength)}cs(o,"glTF image has no data");let l=yield a(o,[Syt,qbt],{mimeType:e.mimeType,basis:i.basis||{format:iU()}},n);l&&l[0]&&(l={compressed:!0,mipmaps:!1,width:l[0].width,height:l[0].height,data:l[0]}),t.images=t.images||[],t.images[r]=l})}var Id={name:"glTF",id:"gltf",module:"gltf",version:Mbt,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:Dwt,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function Dwt(t){return Dt(this,arguments,function*(e,r={},i){r=x(x({},Id.options),r),r.gltf=x(x({},Id.options.gltf),r.gltf);let{byteOffset:n=0}=r;return yield Iwt({},e,n,r,i)})}function Lwt(t){return Dt(this,null,function*(){let e=[];return t.scenes.forEach(r=>{r.traverse(i=>{Object.values(i.model.getUniforms()).forEach(n=>{n.loaded===!1&&e.push(n)})})}),yield Nwt(()=>e.some(r=>!r.loaded))})}function Nwt(t){return Dt(this,null,function*(){for(;t();)yield new Promise(e=>requestAnimationFrame(e))})}var Fwt=`#version 300 es

// Instance attributes
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;

// Uniforms
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform mat4 sceneModelMatrix;
uniform bool composeModelMatrix;

// Attributes
in vec4 POSITION;

#ifdef HAS_UV
  in vec2 TEXCOORD_0;
#endif

#ifdef MODULE_PBR
  #ifdef HAS_NORMALS
    in vec4 NORMAL;
  #endif
#endif

// Varying
out vec4 vColor;

// MODULE_PBR contains all the varying definitions needed
#ifndef MODULE_PBR
  #ifdef HAS_UV
    out vec2 vTEXCOORD_0;
  #endif
#endif

// Main
void main(void) {
  #if defined(HAS_UV) && !defined(MODULE_PBR)
    vTEXCOORD_0 = TEXCOORD_0;
    geometry.uv = vTEXCOORD_0;
  #endif

  geometry.worldPosition = instancePositions;
  geometry.pickingColor = instancePickingColors;

  vec3 normal = vec3(0.0, 0.0, 1.0);
  #ifdef MODULE_PBR
    #ifdef HAS_NORMALS
      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;
    #endif
  #endif

  float originalSize = project_size_to_pixel(sizeScale);
  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);

  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;
  if(composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    // using instancePositions as world coordinates
    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth
    // call project_normal before setting position to avoid rotation
    geometry.normal = project_normal(normal);
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);
    geometry.normal = project_normal(normal);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  #ifdef MODULE_PBR
    // set PBR data
    pbr_vPosition = geometry.position.xyz;
    #ifdef HAS_NORMALS
      pbr_vNormal = geometry.normal;
    #endif

    #ifdef HAS_UV
      pbr_vUV = TEXCOORD_0;
    #else
      pbr_vUV = vec2(0., 0.);
    #endif
    geometry.uv = pbr_vUV;
  #endif

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,zwt=`#version 300 es

// Uniforms
uniform float opacity;

// Varying
in vec4 vColor;

out vec4 fragmentColor;

// MODULE_PBR contains all the varying definitions needed
#ifndef MODULE_PBR
  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
    in vec2 vTEXCOORD_0;
    uniform sampler2D u_BaseColorSampler;
  #endif
#endif

void main(void) {
  #ifdef MODULE_PBR
    fragmentColor = vColor * pbr_filterColor(vec4(0));
    geometry.uv = pbr_vUV;
  #else
    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);
      geometry.uv = vTEXCOORD_0;
    #else
      fragmentColor = vColor;
    #endif
  #endif

  fragmentColor.a *= opacity;
  DECKGL_FILTER_COLOR(fragmentColor, geometry);
}
`,DU=[255,255,255,255],Vwt={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?typeof t.scene=="object"?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:DU},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Id]},yE=class extends Zu{constructor(...t){super(...t),k(this,"state",void 0)}getShaders(){let t=[$y,Xy];return this.props._lighting==="pbr"&&t.push(hj),{vs:Fwt,fs:zwt,modules:t}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:DU,transition:!0},instanceModelMatrix:Yj})}updateState(t){super.updateState(t);let{props:e,oldProps:r}=t;e.scenegraph!==r.scenegraph?this._updateScenegraph():e._animations!==r._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,e._animations)}finalizeState(t){super.finalizeState(t),this._deleteScenegraph()}_updateScenegraph(){let t=this.props,{gl:e}=this.context,r=null;if(t.scenegraph instanceof cd)r={scenes:[t.scenegraph]};else if(t.scenegraph&&!t.scenegraph.gltf){let a=t.scenegraph,o=Pbt(e,a,this._getModelOptions());r=x({gltf:a},o),Lwt(o).then(()=>this.setNeedsRedraw())}else t.scenegraph&&(Ke.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),r=t.scenegraph);let i={layer:this,gl:e},n=t.getScene(r,i),s=t.getAnimator(r,i);n instanceof cd?(this._deleteScenegraph(),this._applyAllAttributes(n),this._applyAnimationsProp(n,s,t._animations),this.setState({scenegraph:n,animator:s})):n!==null&&Ke.warn("invalid scenegraph:",n)()}_applyAllAttributes(t){if(this.state.attributesAvailable){let e=this.getAttributeManager().getAttributes();t.traverse(r=>{this._setModelAttributes(r.model,e)})}}_applyAnimationsProp(t,e,r){if(!t||!e||!r)return;let i=e.getAnimations();Object.keys(r).sort().forEach(n=>{let s=r[n];if(n==="*")i.forEach(a=>{Object.assign(a,s)});else if(Number.isFinite(Number(n))){let a=Number(n);a>=0&&a<i.length?Object.assign(i[a],s):Ke.warn("animation ".concat(n," not found"))()}else{let a=i.find(({name:o})=>o===n);a?Object.assign(a,s):Ke.warn("animation ".concat(n," not found"))()}})}_deleteScenegraph(){let{scenegraph:t}=this.state;t instanceof cd&&t.delete()}_getModelOptions(){let{_imageBasedLightingEnvironment:t}=this.props,e=null;return t&&(typeof t=="function"?e=t({gl:this.context.gl,layer:this}):e=t),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:e,modelOptions:x({isInstanced:!0,transpileToGLSL100:!Ue(this.context.gl)},this.getShaders()),useTangents:!1}}updateAttributes(t){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(e=>{this._setModelAttributes(e.model,t)})}draw({moduleParameters:t=null,parameters:e={},context:r}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(r.timeline.getTime()),this.setNeedsRedraw());let{viewport:i}=this.context,{sizeScale:n,sizeMinPixels:s,sizeMaxPixels:a,opacity:o,coordinateSystem:l}=this.props,c=this.getNumInstances();this.state.scenegraph.traverse((h,{worldMatrix:p})=>{h.model.setInstanceCount(c),h.updateModuleSettings(t),h.draw({parameters:e,uniforms:{sizeScale:n,opacity:o,sizeMinPixels:s,sizeMaxPixels:a,composeModelMatrix:Jj(i,l),sceneModelMatrix:p,u_Camera:h.model.getUniforms().project_uCameraPosition}})})}};k(yE,"defaultProps",Vwt);k(yE,"layerName","ScenegraphLayer");function e0(t,e,r){e||(e=new gt(gt.IDENTITY));let i=new gt(gt.IDENTITY);if(t)if(t.matrix)i.copy(t.matrix);else{if(i.identity(),t.translation&&i.translate(t.translation),t.rotation){let s=new gt(gt.IDENTITY).fromQuaternion(t.rotation);i.multiplyRight(s)}t.scale&&i.scale(t.scale)}else return!0;let n=new gt(e).multiplyRight(i);if(r(t,n,e)===!1)return!1;for(let s of t.nodes||t.children||[])if(e0(s,n,r)===!1)return!1;return!0}function LU(){sV([mU,Id])}function NU(t,e){let r=e.nodes?.find(i=>i.name===t);if(r){let i=!1;for(let n of e.scenes)i||e0(n,new gt(gt.IDENTITY),(s,a)=>s===r?(s.matrix=a,s.translation=void 0,s.rotation=void 0,s.scale=void 0,i=!0,!1):!0);return e.scene={id:t,name:t,nodes:[r]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}else return e}function FU(t,e){return Dt(this,null,function*(){let r=t.scenegraph,i;e?i=e[r]||(e[r]=fetch(r).then(s=>s.blob())):i=fetch(r);let n=yield Uy(i,Id,{DracoLoader:_E,gltf:{decompressMeshes:!0,postProcess:!0}});return n.nodes||console.log("WARNING: Empty Scene",r,n),NU(t.scenegraphNode,n)})}function jwt(t,e){return Dt(this,null,function*(){return NU(t,yield e)})}var Od=class ym{constructor(e){e===void 0&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){let e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){let e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){let r=this.elements;r[0]=e.x,r[4]=e.y,r[8]=e.z}getTrace(e){e===void 0&&(e=new I);let r=this.elements;return e.x=r[0],e.y=r[4],e.z=r[8],e}vmult(e,r){r===void 0&&(r=new I);let i=this.elements,n=e.x,s=e.y,a=e.z;return r.x=i[0]*n+i[1]*s+i[2]*a,r.y=i[3]*n+i[4]*s+i[5]*a,r.z=i[6]*n+i[7]*s+i[8]*a,r}smult(e){for(let r=0;r<this.elements.length;r++)this.elements[r]*=e}mmult(e,r){r===void 0&&(r=new ym);let i=this.elements,n=e.elements,s=r.elements,a=i[0],o=i[1],l=i[2],c=i[3],h=i[4],p=i[5],m=i[6],f=i[7],g=i[8],_=n[0],w=n[1],S=n[2],C=n[3],b=n[4],P=n[5],L=n[6],H=n[7],M=n[8];return s[0]=a*_+o*C+l*L,s[1]=a*w+o*b+l*H,s[2]=a*S+o*P+l*M,s[3]=c*_+h*C+p*L,s[4]=c*w+h*b+p*H,s[5]=c*S+h*P+p*M,s[6]=m*_+f*C+g*L,s[7]=m*w+f*b+g*H,s[8]=m*S+f*P+g*M,r}scale(e,r){r===void 0&&(r=new ym);let i=this.elements,n=r.elements;for(let s=0;s!==3;s++)n[3*s+0]=e.x*i[3*s+0],n[3*s+1]=e.y*i[3*s+1],n[3*s+2]=e.z*i[3*s+2];return r}solve(e,r){r===void 0&&(r=new I);let i=3,n=4,s=[],a,o;for(a=0;a<i*n;a++)s.push(0);for(a=0;a<3;a++)for(o=0;o<3;o++)s[a+n*o]=this.elements[a+3*o];s[3+4*0]=e.x,s[3+4*1]=e.y,s[3+4*2]=e.z;let l=3,c=l,h,p=4,m;do{if(a=c-l,s[a+n*a]===0){for(o=a+1;o<c;o++)if(s[a+n*o]!==0){h=p;do m=p-h,s[m+n*a]+=s[m+n*o];while(--h);break}}if(s[a+n*a]!==0)for(o=a+1;o<c;o++){let f=s[a+n*o]/s[a+n*a];h=p;do m=p-h,s[m+n*o]=m<=a?0:s[m+n*o]-s[m+n*a]*f;while(--h)}}while(--l);if(r.z=s[2*n+3]/s[2*n+2],r.y=(s[1*n+3]-s[1*n+2]*r.z)/s[1*n+1],r.x=(s[0*n+3]-s[0*n+2]*r.z-s[0*n+1]*r.y)/s[0*n+0],isNaN(r.x)||isNaN(r.y)||isNaN(r.z)||r.x===1/0||r.y===1/0||r.z===1/0)throw`Could not solve equation! Got x=[${r.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return r}e(e,r,i){if(i===void 0)return this.elements[r+3*e];this.elements[r+3*e]=i}copy(e){for(let r=0;r<e.elements.length;r++)this.elements[r]=e.elements[r];return this}toString(){let e="",r=",";for(let i=0;i<9;i++)e+=this.elements[i]+r;return e}reverse(e){e===void 0&&(e=new ym);let r=3,i=6,n=Uwt,s,a;for(s=0;s<3;s++)for(a=0;a<3;a++)n[s+i*a]=this.elements[s+3*a];n[3+6*0]=1,n[3+6*1]=0,n[3+6*2]=0,n[4+6*0]=0,n[4+6*1]=1,n[4+6*2]=0,n[5+6*0]=0,n[5+6*1]=0,n[5+6*2]=1;let o=3,l=o,c,h=i,p;do{if(s=l-o,n[s+i*s]===0){for(a=s+1;a<l;a++)if(n[s+i*a]!==0){c=h;do p=h-c,n[p+i*s]+=n[p+i*a];while(--c);break}}if(n[s+i*s]!==0)for(a=s+1;a<l;a++){let m=n[s+i*a]/n[s+i*s];c=h;do p=h-c,n[p+i*a]=p<=s?0:n[p+i*a]-n[p+i*s]*m;while(--c)}}while(--o);s=2;do{a=s-1;do{let m=n[s+i*a]/n[s+i*s];c=i;do p=i-c,n[p+i*a]=n[p+i*a]-n[p+i*s]*m;while(--c)}while(a--)}while(--s);s=2;do{let m=1/n[s+i*s];c=i;do p=i-c,n[p+i*s]=n[p+i*s]*m;while(--c)}while(s--);s=2;do{a=2;do{if(p=n[r+a+i*s],isNaN(p)||p===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(s,a,p)}while(a--)}while(s--);return e}setRotationFromQuaternion(e){let r=e.x,i=e.y,n=e.z,s=e.w,a=r+r,o=i+i,l=n+n,c=r*a,h=r*o,p=r*l,m=i*o,f=i*l,g=n*l,_=s*a,w=s*o,S=s*l,C=this.elements;return C[3*0+0]=1-(m+g),C[3*0+1]=h-S,C[3*0+2]=p+w,C[3*1+0]=h+S,C[3*1+1]=1-(c+g),C[3*1+2]=f-_,C[3*2+0]=p-w,C[3*2+1]=f+_,C[3*2+2]=1-(c+m),this}transpose(e){e===void 0&&(e=new ym);let r=this.elements,i=e.elements,n;return i[0]=r[0],i[4]=r[4],i[8]=r[8],n=r[1],i[1]=r[3],i[3]=n,n=r[2],i[2]=r[6],i[6]=n,n=r[5],i[5]=r[7],i[7]=n,e}},Uwt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=class Ba{constructor(e,r,i){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=e,this.y=r,this.z=i}cross(e,r){r===void 0&&(r=new Ba);let i=e.x,n=e.y,s=e.z,a=this.x,o=this.y,l=this.z;return r.x=o*s-l*n,r.y=l*i-a*s,r.z=a*n-o*i,r}set(e,r,i){return this.x=e,this.y=r,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,r){if(r)r.x=e.x+this.x,r.y=e.y+this.y,r.z=e.z+this.z;else return new Ba(this.x+e.x,this.y+e.y,this.z+e.z)}vsub(e,r){if(r)r.x=this.x-e.x,r.y=this.y-e.y,r.z=this.z-e.z;else return new Ba(this.x-e.x,this.y-e.y,this.z-e.z)}crossmat(){return new Od([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){let e=this.x,r=this.y,i=this.z,n=Math.sqrt(e*e+r*r+i*i);if(n>0){let s=1/n;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return n}unit(e){e===void 0&&(e=new Ba);let r=this.x,i=this.y,n=this.z,s=Math.sqrt(r*r+i*i+n*n);return s>0?(s=1/s,e.x=r*s,e.y=i*s,e.z=n*s):(e.x=1,e.y=0,e.z=0),e}length(){let e=this.x,r=this.y,i=this.z;return Math.sqrt(e*e+r*r+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){let r=this.x,i=this.y,n=this.z,s=e.x,a=e.y,o=e.z;return Math.sqrt((s-r)*(s-r)+(a-i)*(a-i)+(o-n)*(o-n))}distanceSquared(e){let r=this.x,i=this.y,n=this.z,s=e.x,a=e.y,o=e.z;return(s-r)*(s-r)+(a-i)*(a-i)+(o-n)*(o-n)}scale(e,r){r===void 0&&(r=new Ba);let i=this.x,n=this.y,s=this.z;return r.x=e*i,r.y=e*n,r.z=e*s,r}vmul(e,r){return r===void 0&&(r=new Ba),r.x=e.x*this.x,r.y=e.y*this.y,r.z=e.z*this.z,r}addScaledVector(e,r,i){return i===void 0&&(i=new Ba),i.x=this.x+e*r.x,i.y=this.y+e*r.y,i.z=this.z+e*r.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(e){return e===void 0&&(e=new Ba),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,r){let i=this.length();if(i>0){let n=Hwt,s=1/i;n.set(this.x*s,this.y*s,this.z*s);let a=Gwt;Math.abs(n.x)<.9?(a.set(1,0,0),n.cross(a,e)):(a.set(0,1,0),n.cross(a,e)),n.cross(e,r)}else e.set(1,0,0),r.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,r,i){let n=this.x,s=this.y,a=this.z;i.x=n+(e.x-n)*r,i.y=s+(e.y-s)*r,i.z=a+(e.z-a)*r}almostEquals(e,r){return r===void 0&&(r=1e-6),!(Math.abs(this.x-e.x)>r||Math.abs(this.y-e.y)>r||Math.abs(this.z-e.z)>r)}almostZero(e){return e===void 0&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,r){return this.negate(TB),TB.almostEquals(e,r)}clone(){return new Ba(this.x,this.y,this.z)}};I.ZERO=new I(0,0,0);I.UNIT_X=new I(1,0,0);I.UNIT_Y=new I(0,1,0);I.UNIT_Z=new I(0,0,1);var Hwt=new I,Gwt=new I,TB=new I,Cn=class zU{constructor(e){e===void 0&&(e={}),this.lowerBound=new I,this.upperBound=new I,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,r,i,n){let s=this.lowerBound,a=this.upperBound,o=i;s.copy(e[0]),o&&o.vmult(s,s),a.copy(s);for(let l=1;l<e.length;l++){let c=e[l];o&&(o.vmult(c,IB),c=IB),c.x>a.x&&(a.x=c.x),c.x<s.x&&(s.x=c.x),c.y>a.y&&(a.y=c.y),c.y<s.y&&(s.y=c.y),c.z>a.z&&(a.z=c.z),c.z<s.z&&(s.z=c.z)}return r&&(r.vadd(s,s),r.vadd(a,a)),n&&(s.x-=n,s.y-=n,s.z-=n,a.x+=n,a.y+=n,a.z+=n),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return new zU().copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){let r=this.lowerBound,i=this.upperBound,n=e.lowerBound,s=e.upperBound,a=n.x<=i.x&&i.x<=s.x||r.x<=s.x&&s.x<=i.x,o=n.y<=i.y&&i.y<=s.y||r.y<=s.y&&s.y<=i.y,l=n.z<=i.z&&i.z<=s.z||r.z<=s.z&&s.z<=i.z;return a&&o&&l}volume(){let e=this.lowerBound,r=this.upperBound;return(r.x-e.x)*(r.y-e.y)*(r.z-e.z)}contains(e){let r=this.lowerBound,i=this.upperBound,n=e.lowerBound,s=e.upperBound;return r.x<=n.x&&i.x>=s.x&&r.y<=n.y&&i.y>=s.y&&r.z<=n.z&&i.z>=s.z}getCorners(e,r,i,n,s,a,o,l){let c=this.lowerBound,h=this.upperBound;e.copy(c),r.set(h.x,c.y,c.z),i.set(h.x,h.y,c.z),n.set(c.x,h.y,h.z),s.set(h.x,c.y,h.z),a.set(c.x,h.y,c.z),o.set(c.x,c.y,h.z),l.copy(h)}toLocalFrame(e,r){let i=OB,n=i[0],s=i[1],a=i[2],o=i[3],l=i[4],c=i[5],h=i[6],p=i[7];this.getCorners(n,s,a,o,l,c,h,p);for(let m=0;m!==8;m++){let f=i[m];e.pointToLocal(f,f)}return r.setFromPoints(i)}toWorldFrame(e,r){let i=OB,n=i[0],s=i[1],a=i[2],o=i[3],l=i[4],c=i[5],h=i[6],p=i[7];this.getCorners(n,s,a,o,l,c,h,p);for(let m=0;m!==8;m++){let f=i[m];e.pointToWorld(f,f)}return r.setFromPoints(i)}overlapsRay(e){let{direction:r,from:i}=e,n=1/r.x,s=1/r.y,a=1/r.z,o=(this.lowerBound.x-i.x)*n,l=(this.upperBound.x-i.x)*n,c=(this.lowerBound.y-i.y)*s,h=(this.upperBound.y-i.y)*s,p=(this.lowerBound.z-i.z)*a,m=(this.upperBound.z-i.z)*a,f=Math.max(Math.max(Math.min(o,l),Math.min(c,h)),Math.min(p,m)),g=Math.min(Math.min(Math.max(o,l),Math.max(c,h)),Math.max(p,m));return!(g<0||f>g)}},IB=new I,OB=[new I,new I,new I,new I,new I,new I,new I,new I],Wwt=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let r=this._listeners;return r[t]===void 0&&(r[t]=[]),r[t].includes(e)||r[t].push(e),this}hasEventListener(t,e){if(this._listeners===void 0)return!1;let r=this._listeners;return!!(r[t]!==void 0&&r[t].includes(e))}hasAnyEventListener(t){return this._listeners===void 0?!1:this._listeners[t]!==void 0}removeEventListener(t,e){if(this._listeners===void 0)return this;let r=this._listeners;if(r[t]===void 0)return this;let i=r[t].indexOf(e);return i!==-1&&r[t].splice(i,1),this}dispatchEvent(t){if(this._listeners===void 0)return this;let e=this._listeners[t.type];if(e!==void 0){t.target=this;for(let r=0,i=e.length;r<i;r++)e[r].call(this,t)}return this}},as=class Qc{constructor(e,r,i,n){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),n===void 0&&(n=1),this.x=e,this.y=r,this.z=i,this.w=n}set(e,r,i,n){return this.x=e,this.y=r,this.z=i,this.w=n,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,r){let i=Math.sin(r*.5);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(r*.5),this}toAxisAngle(e){e===void 0&&(e=new I),this.normalize();let r=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,r]}setFromVectors(e,r){if(e.isAntiparallelTo(r)){let i=Zwt,n=$wt;e.tangents(i,n),this.setFromAxisAngle(i,Math.PI)}else{let i=e.cross(r);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*r.length()**2)+e.dot(r),this.normalize()}return this}mult(e,r){r===void 0&&(r=new Qc);let i=this.x,n=this.y,s=this.z,a=this.w,o=e.x,l=e.y,c=e.z,h=e.w;return r.x=i*h+a*o+n*c-s*l,r.y=n*h+a*l+s*o-i*c,r.z=s*h+a*c+i*l-n*o,r.w=a*h-i*o-n*l-s*c,r}inverse(e){e===void 0&&(e=new Qc);let r=this.x,i=this.y,n=this.z,s=this.w;this.conjugate(e);let a=1/(r*r+i*i+n*n+s*s);return e.x*=a,e.y*=a,e.z*=a,e.w*=a,e}conjugate(e){return e===void 0&&(e=new Qc),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){let e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,r){r===void 0&&(r=new I);let i=e.x,n=e.y,s=e.z,a=this.x,o=this.y,l=this.z,c=this.w,h=c*i+o*s-l*n,p=c*n+l*i-a*s,m=c*s+a*n-o*i,f=-a*i-o*n-l*s;return r.x=h*c+f*-a+p*-l-m*-o,r.y=p*c+f*-o+m*-a-h*-l,r.z=m*c+f*-l+h*-o-p*-a,r}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,r){r===void 0&&(r="YZX");let i,n,s,a=this.x,o=this.y,l=this.z,c=this.w;switch(r){case"YZX":let h=a*o+l*c;if(h>.499&&(i=2*Math.atan2(a,c),n=Math.PI/2,s=0),h<-.499&&(i=-2*Math.atan2(a,c),n=-Math.PI/2,s=0),i===void 0){let p=a*a,m=o*o,f=l*l;i=Math.atan2(2*o*c-2*a*l,1-2*m-2*f),n=Math.asin(2*h),s=Math.atan2(2*a*c-2*o*l,1-2*p-2*f)}break;default:throw new Error(`Euler order ${r} not supported yet.`)}e.y=i,e.z=n,e.x=s}setFromEuler(e,r,i,n){n===void 0&&(n="XYZ");let s=Math.cos(e/2),a=Math.cos(r/2),o=Math.cos(i/2),l=Math.sin(e/2),c=Math.sin(r/2),h=Math.sin(i/2);return n==="XYZ"?(this.x=l*a*o+s*c*h,this.y=s*c*o-l*a*h,this.z=s*a*h+l*c*o,this.w=s*a*o-l*c*h):n==="YXZ"?(this.x=l*a*o+s*c*h,this.y=s*c*o-l*a*h,this.z=s*a*h-l*c*o,this.w=s*a*o+l*c*h):n==="ZXY"?(this.x=l*a*o-s*c*h,this.y=s*c*o+l*a*h,this.z=s*a*h+l*c*o,this.w=s*a*o-l*c*h):n==="ZYX"?(this.x=l*a*o-s*c*h,this.y=s*c*o+l*a*h,this.z=s*a*h-l*c*o,this.w=s*a*o+l*c*h):n==="YZX"?(this.x=l*a*o+s*c*h,this.y=s*c*o+l*a*h,this.z=s*a*h-l*c*o,this.w=s*a*o-l*c*h):n==="XZY"&&(this.x=l*a*o-s*c*h,this.y=s*c*o-l*a*h,this.z=s*a*h+l*c*o,this.w=s*a*o+l*c*h),this}clone(){return new Qc(this.x,this.y,this.z,this.w)}slerp(e,r,i){i===void 0&&(i=new Qc);let n=this.x,s=this.y,a=this.z,o=this.w,l=e.x,c=e.y,h=e.z,p=e.w,m,f,g,_,w;return f=n*l+s*c+a*h+o*p,f<0&&(f=-f,l=-l,c=-c,h=-h,p=-p),1-f>1e-6?(m=Math.acos(f),g=Math.sin(m),_=Math.sin((1-r)*m)/g,w=Math.sin(r*m)/g):(_=1-r,w=r),i.x=_*n+w*l,i.y=_*s+w*c,i.z=_*a+w*h,i.w=_*o+w*p,i}integrate(e,r,i,n){n===void 0&&(n=new Qc);let s=e.x*i.x,a=e.y*i.y,o=e.z*i.z,l=this.x,c=this.y,h=this.z,p=this.w,m=r*.5;return n.x+=m*(s*p+a*h-o*c),n.y+=m*(a*p+o*l-s*h),n.z+=m*(o*p+s*c-a*l),n.w+=m*(-s*l-a*c-o*h),n}},Zwt=new I,$wt=new I,Xwt={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256},ce=(()=>{class t{constructor(r){r===void 0&&(r={}),this.id=t.idCounter++,this.type=r.type||0,this.boundingSphereRadius=0,this.collisionResponse=r.collisionResponse?r.collisionResponse:!0,this.collisionFilterGroup=r.collisionFilterGroup!==void 0?r.collisionFilterGroup:1,this.collisionFilterMask=r.collisionFilterMask!==void 0?r.collisionFilterMask:-1,this.material=r.material?r.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(r,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(r,i,n,s){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return t.idCounter=0,t.types=Xwt,t})(),Bi=class dk{constructor(e){e===void 0&&(e={}),this.position=new I,this.quaternion=new as,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,r){return dk.pointToLocalFrame(this.position,this.quaternion,e,r)}pointToWorld(e,r){return dk.pointToWorldFrame(this.position,this.quaternion,e,r)}vectorToWorldFrame(e,r){return r===void 0&&(r=new I),this.quaternion.vmult(e,r),r}static pointToLocalFrame(e,r,i,n){return n===void 0&&(n=new I),i.vsub(e,n),r.conjugate(PB),PB.vmult(n,n),n}static pointToWorldFrame(e,r,i,n){return n===void 0&&(n=new I),r.vmult(i,n),n.vadd(e,n),n}static vectorToWorldFrame(e,r,i){return i===void 0&&(i=new I),e.vmult(r,i),i}static vectorToLocalFrame(e,r,i,n){return n===void 0&&(n=new I),r.w*=-1,r.vmult(i,n),r.w*=-1,n}},PB=new as,qwt=class R_ extends ce{constructor(e){e===void 0&&(e={});let{vertices:r=[],faces:i=[],normals:n=[],axes:s,boundingSphereRadius:a}=e;super({type:ce.types.CONVEXPOLYHEDRON}),this.vertices=r,this.faces=i,this.faceNormals=n,this.faceNormals.length===0&&this.computeNormals(),a?this.boundingSphereRadius=a:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){let e=this.faces,r=this.vertices,i=this.uniqueEdges;i.length=0;let n=new I;for(let s=0;s!==e.length;s++){let a=e[s],o=a.length;for(let l=0;l!==o;l++){let c=(l+1)%o;r[a[l]].vsub(r[a[c]],n),n.normalize();let h=!1;for(let p=0;p!==i.length;p++)if(i[p].almostEquals(n)||i[p].almostEquals(n)){h=!0;break}h||i.push(n.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let n=0;n<this.faces[e].length;n++)if(!this.vertices[this.faces[e][n]])throw new Error(`Vertex ${this.faces[e][n]} not found!`);let r=this.faceNormals[e]||new I;this.getFaceNormal(e,r),r.negate(r),this.faceNormals[e]=r;let i=this.vertices[this.faces[e][0]];if(r.dot(i)<0){console.error(`.faceNormals[${e}] = Vec3(${r.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let n=0;n<this.faces[e].length;n++)console.warn(`.vertices[${this.faces[e][n]}] = Vec3(${this.vertices[this.faces[e][n]].toString()})`)}}}getFaceNormal(e,r){let i=this.faces[e],n=this.vertices[i[0]],s=this.vertices[i[1]],a=this.vertices[i[2]];R_.computeNormal(n,s,a,r)}static computeNormal(e,r,i,n){let s=new I,a=new I;r.vsub(e,a),i.vsub(r,s),s.cross(a,n),n.isZero()||n.normalize()}clipAgainstHull(e,r,i,n,s,a,o,l,c){let h=new I,p=-1,m=-Number.MAX_VALUE;for(let g=0;g<i.faces.length;g++){h.copy(i.faceNormals[g]),s.vmult(h,h);let _=h.dot(a);_>m&&(m=_,p=g)}let f=[];for(let g=0;g<i.faces[p].length;g++){let _=i.vertices[i.faces[p][g]],w=new I;w.copy(_),s.vmult(w,w),n.vadd(w,w),f.push(w)}p>=0&&this.clipFaceAgainstHull(a,e,r,f,o,l,c)}findSeparatingAxis(e,r,i,n,s,a,o,l){let c=new I,h=new I,p=new I,m=new I,f=new I,g=new I,_=Number.MAX_VALUE,w=this;if(w.uniqueAxes)for(let S=0;S!==w.uniqueAxes.length;S++){i.vmult(w.uniqueAxes[S],c);let C=w.testSepAxis(c,e,r,i,n,s);if(C===!1)return!1;C<_&&(_=C,a.copy(c))}else{let S=o?o.length:w.faces.length;for(let C=0;C<S;C++){let b=o?o[C]:C;c.copy(w.faceNormals[b]),i.vmult(c,c);let P=w.testSepAxis(c,e,r,i,n,s);if(P===!1)return!1;P<_&&(_=P,a.copy(c))}}if(e.uniqueAxes)for(let S=0;S!==e.uniqueAxes.length;S++){s.vmult(e.uniqueAxes[S],h);let C=w.testSepAxis(h,e,r,i,n,s);if(C===!1)return!1;C<_&&(_=C,a.copy(h))}else{let S=l?l.length:e.faces.length;for(let C=0;C<S;C++){let b=l?l[C]:C;h.copy(e.faceNormals[b]),s.vmult(h,h);let P=w.testSepAxis(h,e,r,i,n,s);if(P===!1)return!1;P<_&&(_=P,a.copy(h))}}for(let S=0;S!==w.uniqueEdges.length;S++){i.vmult(w.uniqueEdges[S],m);for(let C=0;C!==e.uniqueEdges.length;C++)if(s.vmult(e.uniqueEdges[C],f),m.cross(f,g),!g.almostZero()){g.normalize();let b=w.testSepAxis(g,e,r,i,n,s);if(b===!1)return!1;b<_&&(_=b,a.copy(g))}}return n.vsub(r,p),p.dot(a)>0&&a.negate(a),!0}testSepAxis(e,r,i,n,s,a){let o=this;R_.project(o,e,i,n,x1),R_.project(r,e,s,a,C1);let l=x1[0],c=x1[1],h=C1[0],p=C1[1];if(l<p||h<c)return!1;let m=l-p,f=h-c;return m<f?m:f}calculateLocalInertia(e,r){let i=new I,n=new I;this.computeLocalAABB(n,i);let s=i.x-n.x,a=i.y-n.y,o=i.z-n.z;r.x=1/12*e*(2*a*2*a+2*o*2*o),r.y=1/12*e*(2*s*2*s+2*o*2*o),r.z=1/12*e*(2*a*2*a+2*s*2*s)}getPlaneConstantOfFace(e){let r=this.faces[e],i=this.faceNormals[e],n=this.vertices[r[0]];return-i.dot(n)}clipFaceAgainstHull(e,r,i,n,s,a,o){let l=new I,c=new I,h=new I,p=new I,m=new I,f=new I,g=new I,_=new I,w=this,S=[],C=n,b=S,P=-1,L=Number.MAX_VALUE;for(let X=0;X<w.faces.length;X++){l.copy(w.faceNormals[X]),i.vmult(l,l);let W=l.dot(e);W<L&&(L=W,P=X)}if(P<0)return;let H=w.faces[P];H.connectedFaces=[];for(let X=0;X<w.faces.length;X++)for(let W=0;W<w.faces[X].length;W++)H.indexOf(w.faces[X][W])!==-1&&X!==P&&H.connectedFaces.indexOf(X)===-1&&H.connectedFaces.push(X);let M=H.length;for(let X=0;X<M;X++){let W=w.vertices[H[X]],J=w.vertices[H[(X+1)%M]];W.vsub(J,c),h.copy(c),i.vmult(h,h),r.vadd(h,h),p.copy(this.faceNormals[P]),i.vmult(p,p),r.vadd(p,p),h.cross(p,m),m.negate(m),f.copy(W),i.vmult(f,f),r.vadd(f,f);let lt=H.connectedFaces[X];g.copy(this.faceNormals[lt]);let Y=this.getPlaneConstantOfFace(lt);_.copy(g),i.vmult(_,_);let nt=Y-_.dot(r);for(this.clipFaceAgainstPlane(C,b,_,nt);C.length;)C.shift();for(;b.length;)C.push(b.shift())}g.copy(this.faceNormals[P]);let E=this.getPlaneConstantOfFace(P);_.copy(g),i.vmult(_,_);let it=E-_.dot(r);for(let X=0;X<C.length;X++){let W=_.dot(C[X])+it;if(W<=s&&(console.log(`clamped: depth=${W} to minDist=${s}`),W=s),W<=a){let J=C[X];if(W<=1e-6){let lt={point:J,normal:_,depth:W};o.push(lt)}}}}clipFaceAgainstPlane(e,r,i,n){let s,a,o=e.length;if(o<2)return r;let l=e[e.length-1],c=e[0];s=i.dot(l)+n;for(let h=0;h<o;h++){if(c=e[h],a=i.dot(c)+n,s<0)if(a<0){let p=new I;p.copy(c),r.push(p)}else{let p=new I;l.lerp(c,s/(s-a),p),r.push(p)}else if(a<0){let p=new I;l.lerp(c,s/(s-a),p),r.push(p),r.push(c)}l=c,s=a}return r}computeWorldVertices(e,r){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new I);let i=this.vertices,n=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)r.vmult(i[s],n[s]),e.vadd(n[s],n[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,r){let i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),r.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let n=0;n<this.vertices.length;n++){let s=i[n];s.x<e.x?e.x=s.x:s.x>r.x&&(r.x=s.x),s.y<e.y?e.y=s.y:s.y>r.y&&(r.y=s.y),s.z<e.z?e.z=s.z:s.z>r.z&&(r.z=s.z)}}computeWorldFaceNormals(e){let r=this.faceNormals.length;for(;this.worldFaceNormals.length<r;)this.worldFaceNormals.push(new I);let i=this.faceNormals,n=this.worldFaceNormals;for(let s=0;s!==r;s++)e.vmult(i[s],n[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0,r=this.vertices;for(let i=0;i!==r.length;i++){let n=r[i].lengthSquared();n>e&&(e=n)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,r,i,n){let s=this.vertices,a,o,l,c,h,p,m=new I;for(let f=0;f<s.length;f++){m.copy(s[f]),r.vmult(m,m),e.vadd(m,m);let g=m;(a===void 0||g.x<a)&&(a=g.x),(c===void 0||g.x>c)&&(c=g.x),(o===void 0||g.y<o)&&(o=g.y),(h===void 0||g.y>h)&&(h=g.y),(l===void 0||g.z<l)&&(l=g.z),(p===void 0||g.z>p)&&(p=g.z)}i.set(a,o,l),n.set(c,h,p)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){e===void 0&&(e=new I);let r=this.vertices;for(let i=0;i<r.length;i++)e.vadd(r[i],e);return e.scale(1/r.length,e),e}transformAllPoints(e,r){let i=this.vertices.length,n=this.vertices;if(r){for(let s=0;s<i;s++){let a=n[s];r.vmult(a,a)}for(let s=0;s<this.faceNormals.length;s++){let a=this.faceNormals[s];r.vmult(a,a)}}if(e)for(let s=0;s<i;s++){let a=n[s];a.vadd(e,a)}}pointIsInside(e){let r=this.vertices,i=this.faces,n=this.faceNormals,s=null,a=new I;this.getAveragePointLocal(a);for(let o=0;o<this.faces.length;o++){let l=n[o],c=r[i[o][0]],h=new I;e.vsub(c,h);let p=l.dot(h),m=new I;a.vsub(c,m);let f=l.dot(m);if(p<0&&f>0||p>0&&f<0)return!1}return s?1:-1}static project(e,r,i,n,s){let a=e.vertices.length,o=Kwt,l=0,c=0,h=Ywt,p=e.vertices;h.setZero(),Bi.vectorToLocalFrame(i,n,r,o),Bi.pointToLocalFrame(i,n,h,h);let m=h.dot(o);c=l=p[0].dot(o);for(let f=1;f<a;f++){let g=p[f].dot(o);g>l&&(l=g),g<c&&(c=g)}if(c-=m,l-=m,c>l){let f=c;c=l,l=f}s[0]=l,s[1]=c}},x1=[],C1=[],rzt=new I,Kwt=new I,Ywt=new I,Jwt=class VU extends ce{constructor(e){super({type:ce.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){let e=this.halfExtents.x,r=this.halfExtents.y,i=this.halfExtents.z,n=I,s=[new n(-e,-r,-i),new n(e,-r,-i),new n(e,r,-i),new n(-e,r,-i),new n(-e,-r,i),new n(e,-r,i),new n(e,r,i),new n(-e,r,i)],a=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],o=[new n(0,0,1),new n(0,1,0),new n(1,0,0)],l=new qwt({vertices:s,faces:a,axes:o});this.convexPolyhedronRepresentation=l,l.material=this.material}calculateLocalInertia(e,r){return r===void 0&&(r=new I),VU.calculateInertia(this.halfExtents,e,r),r}static calculateInertia(e,r,i){let n=e;i.x=1/12*r*(2*n.y*2*n.y+2*n.z*2*n.z),i.y=1/12*r*(2*n.x*2*n.x+2*n.z*2*n.z),i.z=1/12*r*(2*n.y*2*n.y+2*n.x*2*n.x)}getSideNormals(e,r){let i=e,n=this.halfExtents;if(i[0].set(n.x,0,0),i[1].set(0,n.y,0),i[2].set(0,0,n.z),i[3].set(-n.x,0,0),i[4].set(0,-n.y,0),i[5].set(0,0,-n.z),r!==void 0)for(let s=0;s!==i.length;s++)r.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,r,i){let n=this.halfExtents,s=[[n.x,n.y,n.z],[-n.x,n.y,n.z],[-n.x,-n.y,n.z],[-n.x,-n.y,-n.z],[n.x,-n.y,-n.z],[n.x,n.y,-n.z],[-n.x,n.y,-n.z],[n.x,-n.y,n.z]];for(let a=0;a<s.length;a++)Ml.set(s[a][0],s[a][1],s[a][2]),r.vmult(Ml,Ml),e.vadd(Ml,Ml),i(Ml.x,Ml.y,Ml.z)}calculateWorldAABB(e,r,i,n){let s=this.halfExtents;Oa[0].set(s.x,s.y,s.z),Oa[1].set(-s.x,s.y,s.z),Oa[2].set(-s.x,-s.y,s.z),Oa[3].set(-s.x,-s.y,-s.z),Oa[4].set(s.x,-s.y,-s.z),Oa[5].set(s.x,s.y,-s.z),Oa[6].set(-s.x,s.y,-s.z),Oa[7].set(s.x,-s.y,s.z);let a=Oa[0];r.vmult(a,a),e.vadd(a,a),n.copy(a),i.copy(a);for(let o=1;o<8;o++){let l=Oa[o];r.vmult(l,l),e.vadd(l,l);let c=l.x,h=l.y,p=l.z;c>n.x&&(n.x=c),h>n.y&&(n.y=h),p>n.z&&(n.z=p),c<i.x&&(i.x=c),h<i.y&&(i.y=h),p<i.z&&(i.z=p)}}},Ml=new I,Oa=[new I,new I,new I,new I,new I,new I,new I,new I],wE={DYNAMIC:1,STATIC:2,KINEMATIC:4},xE={AWAKE:0,SLEEPY:1,SLEEPING:2},Br=class Ti extends Wwt{constructor(e){e===void 0&&(e={}),super(),this.id=Ti.idCounter++,this.index=-1,this.world=null,this.vlambda=new I,this.collisionFilterGroup=typeof e.collisionFilterGroup=="number"?e.collisionFilterGroup:1,this.collisionFilterMask=typeof e.collisionFilterMask=="number"?e.collisionFilterMask:-1,this.collisionResponse=typeof e.collisionResponse=="boolean"?e.collisionResponse:!0,this.position=new I,this.previousPosition=new I,this.interpolatedPosition=new I,this.initPosition=new I,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new I,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new I,this.force=new I;let r=typeof e.mass=="number"?e.mass:0;this.mass=r,this.invMass=r>0?1/r:0,this.material=e.material||null,this.linearDamping=typeof e.linearDamping=="number"?e.linearDamping:.01,this.type=r<=0?Ti.STATIC:Ti.DYNAMIC,typeof e.type==typeof Ti.STATIC&&(this.type=e.type),this.allowSleep=typeof e.allowSleep<"u"?e.allowSleep:!0,this.sleepState=Ti.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new I,this.quaternion=new as,this.initQuaternion=new as,this.previousQuaternion=new as,this.interpolatedQuaternion=new as,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new I,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new I,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new I,this.invInertia=new I,this.invInertiaWorld=new Od,this.invMassSolve=0,this.invInertiaSolve=new I,this.invInertiaWorldSolve=new Od,this.fixedRotation=typeof e.fixedRotation<"u"?e.fixedRotation:!1,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new I(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new I(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new Cn,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new I,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){let e=this.sleepState;this.sleepState=Ti.AWAKE,this.wakeUpAfterNarrowphase=!1,e===Ti.SLEEPING&&this.dispatchEvent(Ti.wakeupEvent)}sleep(){this.sleepState=Ti.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){let r=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),n=this.sleepSpeedLimit**2;r===Ti.AWAKE&&i<n?(this.sleepState=Ti.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(Ti.sleepyEvent)):r===Ti.SLEEPY&&i>n?this.wakeUp():r===Ti.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(Ti.sleepEvent))}}updateSolveMassProperties(){this.sleepState===Ti.SLEEPING||this.type===Ti.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,r){return r===void 0&&(r=new I),e.vsub(this.position,r),this.quaternion.conjugate().vmult(r,r),r}vectorToLocalFrame(e,r){return r===void 0&&(r=new I),this.quaternion.conjugate().vmult(e,r),r}pointToWorldFrame(e,r){return r===void 0&&(r=new I),this.quaternion.vmult(e,r),r.vadd(this.position,r),r}vectorToWorldFrame(e,r){return r===void 0&&(r=new I),this.quaternion.vmult(e,r),r}addShape(e,r,i){let n=new I,s=new as;return r&&n.copy(r),i&&s.copy(i),this.shapes.push(e),this.shapeOffsets.push(n),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){let r=this.shapes.indexOf(e);return r===-1?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(r,1),this.shapeOffsets.splice(r,1),this.shapeOrientations.splice(r,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){let e=this.shapes,r=this.shapeOffsets,i=e.length,n=0;for(let s=0;s!==i;s++){let a=e[s];a.updateBoundingSphereRadius();let o=r[s].length(),l=a.boundingSphereRadius;o+l>n&&(n=o+l)}this.boundingRadius=n}updateAABB(){let e=this.shapes,r=this.shapeOffsets,i=this.shapeOrientations,n=e.length,s=Qwt,a=txt,o=this.quaternion,l=this.aabb,c=ext;for(let h=0;h!==n;h++){let p=e[h];o.vmult(r[h],s),s.vadd(this.position,s),o.mult(i[h],a),p.calculateWorldAABB(s,a,c.lowerBound,c.upperBound),h===0?l.copy(c):l.extend(c)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){let r=this.invInertia;if(!(r.x===r.y&&r.y===r.z&&!e)){let i=ixt,n=rxt;i.setRotationFromQuaternion(this.quaternion),i.transpose(n),i.scale(r,i),i.mmult(n,this.invInertiaWorld)}}applyForce(e,r){if(r===void 0&&(r=new I),this.type!==Ti.DYNAMIC)return;this.sleepState===Ti.SLEEPING&&this.wakeUp();let i=nxt;r.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,r){if(r===void 0&&(r=new I),this.type!==Ti.DYNAMIC)return;let i=sxt,n=axt;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(r,n),this.applyForce(i,n)}applyTorque(e){this.type===Ti.DYNAMIC&&(this.sleepState===Ti.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,r){if(r===void 0&&(r=new I),this.type!==Ti.DYNAMIC)return;this.sleepState===Ti.SLEEPING&&this.wakeUp();let i=r,n=oxt;n.copy(e),n.scale(this.invMass,n),this.velocity.vadd(n,this.velocity);let s=lxt;i.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,r){if(r===void 0&&(r=new I),this.type!==Ti.DYNAMIC)return;let i=cxt,n=uxt;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(r,n),this.applyImpulse(i,n)}updateMassProperties(){let e=hxt;this.invMass=this.mass>0?1/this.mass:0;let r=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),Jwt.calculateInertia(e,this.mass,r),this.invInertia.set(r.x>0&&!i?1/r.x:0,r.y>0&&!i?1/r.y:0,r.z>0&&!i?1/r.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,r){let i=new I;return e.vsub(this.position,i),this.angularVelocity.cross(i,r),this.velocity.vadd(r,r),r}integrate(e,r,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),!(this.type===Ti.DYNAMIC||this.type===Ti.KINEMATIC)||this.sleepState===Ti.SLEEPING)return;let n=this.velocity,s=this.angularVelocity,a=this.position,o=this.force,l=this.torque,c=this.quaternion,h=this.invMass,p=this.invInertiaWorld,m=this.linearFactor,f=h*e;n.x+=o.x*f*m.x,n.y+=o.y*f*m.y,n.z+=o.z*f*m.z;let g=p.elements,_=this.angularFactor,w=l.x*_.x,S=l.y*_.y,C=l.z*_.z;s.x+=e*(g[0]*w+g[1]*S+g[2]*C),s.y+=e*(g[3]*w+g[4]*S+g[5]*C),s.z+=e*(g[6]*w+g[7]*S+g[8]*C),a.x+=n.x*e,a.y+=n.y*e,a.z+=n.z*e,c.integrate(this.angularVelocity,e,this.angularFactor,c),r&&(i?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}};Br.idCounter=0;Br.COLLIDE_EVENT_NAME="collide";Br.DYNAMIC=wE.DYNAMIC;Br.STATIC=wE.STATIC;Br.KINEMATIC=wE.KINEMATIC;Br.AWAKE=xE.AWAKE;Br.SLEEPY=xE.SLEEPY;Br.SLEEPING=xE.SLEEPING;Br.wakeupEvent={type:"wakeup"};Br.sleepyEvent={type:"sleepy"};Br.sleepEvent={type:"sleep"};var Qwt=new I,txt=new as,ext=new Cn,ixt=new Od,rxt=new Od,nzt=new Od,nxt=new I,sxt=new I,axt=new I,oxt=new I,lxt=new I,cxt=new I,uxt=new I,hxt=new I,szt=new I;new I;new as;new I;new I;var azt=new I;new I;var pk=class{constructor(){this.rayFromWorld=new I,this.rayToWorld=new I,this.hitNormalWorld=new I,this.hitPointWorld=new I,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(t,e,r,i,n,s,a){this.rayFromWorld.copy(t),this.rayToWorld.copy(e),this.hitNormalWorld.copy(r),this.hitPointWorld.copy(i),this.shape=n,this.body=s,this.distance=a}},jU,UU,HU,GU,WU,ZU,$U,CE={CLOSEST:1,ANY:2,ALL:4};jU=ce.types.SPHERE;UU=ce.types.PLANE;HU=ce.types.BOX;GU=ce.types.CYLINDER;WU=ce.types.CONVEXPOLYHEDRON;ZU=ce.types.HEIGHTFIELD;$U=ce.types.TRIMESH;var $u=class Da{get[jU](){return this._intersectSphere}get[UU](){return this._intersectPlane}get[HU](){return this._intersectBox}get[GU](){return this._intersectConvex}get[WU](){return this._intersectConvex}get[ZU](){return this._intersectHeightfield}get[$U](){return this._intersectTrimesh}constructor(e,r){e===void 0&&(e=new I),r===void 0&&(r=new I),this.from=e.clone(),this.to=r.clone(),this.direction=new I,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Da.ANY,this.result=new pk,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,r){return this.mode=r.mode||Da.ANY,this.result=r.result||new pk,this.skipBackfaces=!!r.skipBackfaces,this.collisionFilterMask=typeof r.collisionFilterMask<"u"?r.collisionFilterMask:-1,this.collisionFilterGroup=typeof r.collisionFilterGroup<"u"?r.collisionFilterGroup:-1,this.checkCollisionResponse=typeof r.checkCollisionResponse<"u"?r.checkCollisionResponse:!0,r.from&&this.from.copy(r.from),r.to&&this.to.copy(r.to),this.callback=r.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(MB),k1.length=0,e.broadphase.aabbQuery(e,MB,k1),this.intersectBodies(k1),this.hasHit}intersectBody(e,r){r&&(this.result=r,this.updateDirection());let i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;let n=dxt,s=pxt;for(let a=0,o=e.shapes.length;a<o;a++){let l=e.shapes[a];if(!(i&&!l.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[a],s),e.quaternion.vmult(e.shapeOffsets[a],n),n.vadd(e.position,n),this.intersectShape(l,s,n,e),this.result.shouldStop))break}}intersectBodies(e,r){r&&(this.result=r,this.updateDirection());for(let i=0,n=e.length;!this.result.shouldStop&&i<n;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,r,i,n){let s=this.from;if(Ext(s,this.direction,i)>e.boundingSphereRadius)return;let a=this[e.type];a&&a.call(this,e,r,i,n,e)}_intersectBox(e,r,i,n,s){return this._intersectConvex(e.convexPolyhedronRepresentation,r,i,n,s)}_intersectPlane(e,r,i,n,s){let a=this.from,o=this.to,l=this.direction,c=new I(0,0,1);r.vmult(c,c);let h=new I;a.vsub(i,h);let p=h.dot(c);o.vsub(i,h);let m=h.dot(c);if(p*m>0||a.distanceTo(o)<p)return;let f=c.dot(l);if(Math.abs(f)<this.precision)return;let g=new I,_=new I,w=new I;a.vsub(i,g);let S=-c.dot(g)/f;l.scale(S,_),a.vadd(_,w),this.reportIntersection(c,w,s,n,-1)}getAABB(e){let{lowerBound:r,upperBound:i}=e,n=this.to,s=this.from;r.x=Math.min(n.x,s.x),r.y=Math.min(n.y,s.y),r.z=Math.min(n.z,s.z),i.x=Math.max(n.x,s.x),i.y=Math.max(n.y,s.y),i.z=Math.max(n.z,s.z)}_intersectHeightfield(e,r,i,n,s){e.data,e.elementSize;let a=mxt;a.from.copy(this.from),a.to.copy(this.to),Bi.pointToLocalFrame(i,r,a.from,a.from),Bi.pointToLocalFrame(i,r,a.to,a.to),a.updateDirection();let o=fxt,l,c,h,p;l=c=0,h=p=e.data.length-1;let m=new Cn;a.getAABB(m),e.getIndexOfPosition(m.lowerBound.x,m.lowerBound.y,o,!0),l=Math.max(l,o[0]),c=Math.max(c,o[1]),e.getIndexOfPosition(m.upperBound.x,m.upperBound.y,o,!0),h=Math.min(h,o[0]+1),p=Math.min(p,o[1]+1);for(let f=l;f<h;f++)for(let g=c;g<p;g++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(f,g,m),!!m.overlapsRay(a)){if(e.getConvexTrianglePillar(f,g,!1),Bi.pointToWorldFrame(i,r,e.pillarOffset,Dv),this._intersectConvex(e.pillarConvex,r,Dv,n,s,RB),this.result.shouldStop)return;e.getConvexTrianglePillar(f,g,!0),Bi.pointToWorldFrame(i,r,e.pillarOffset,Dv),this._intersectConvex(e.pillarConvex,r,Dv,n,s,RB)}}}_intersectSphere(e,r,i,n,s){let a=this.from,o=this.to,l=e.radius,c=(o.x-a.x)**2+(o.y-a.y)**2+(o.z-a.z)**2,h=2*((o.x-a.x)*(a.x-i.x)+(o.y-a.y)*(a.y-i.y)+(o.z-a.z)*(a.z-i.z)),p=(a.x-i.x)**2+(a.y-i.y)**2+(a.z-i.z)**2-l**2,m=h**2-4*c*p,f=gxt,g=vxt;if(!(m<0))if(m===0)a.lerp(o,m,f),f.vsub(i,g),g.normalize(),this.reportIntersection(g,f,s,n,-1);else{let _=(-h-Math.sqrt(m))/(2*c),w=(-h+Math.sqrt(m))/(2*c);if(_>=0&&_<=1&&(a.lerp(o,_,f),f.vsub(i,g),g.normalize(),this.reportIntersection(g,f,s,n,-1)),this.result.shouldStop)return;w>=0&&w<=1&&(a.lerp(o,w,f),f.vsub(i,g),g.normalize(),this.reportIntersection(g,f,s,n,-1))}}_intersectConvex(e,r,i,n,s,a){let o=_xt,l=BB,c=a&&a.faceList||null,h=e.faces,p=e.vertices,m=e.faceNormals,f=this.direction,g=this.from,_=this.to,w=g.distanceTo(_),S=c?c.length:h.length,C=this.result;for(let b=0;!C.shouldStop&&b<S;b++){let P=c?c[b]:b,L=h[P],H=m[P],M=r,E=i;l.copy(p[L[0]]),M.vmult(l,l),l.vadd(E,l),l.vsub(g,l),M.vmult(H,o);let it=f.dot(o);if(Math.abs(it)<this.precision)continue;let X=o.dot(l)/it;if(!(X<0)){f.scale(X,Bn),Bn.vadd(g,Bn),ra.copy(p[L[0]]),M.vmult(ra,ra),E.vadd(ra,ra);for(let W=1;!C.shouldStop&&W<L.length-1;W++){Pa.copy(p[L[W]]),Ma.copy(p[L[W+1]]),M.vmult(Pa,Pa),M.vmult(Ma,Ma),E.vadd(Pa,Pa),E.vadd(Ma,Ma);let J=Bn.distanceTo(g);!(Da.pointInTriangle(Bn,ra,Pa,Ma)||Da.pointInTriangle(Bn,Pa,ra,Ma))||J>w||this.reportIntersection(o,Bn,s,n,P)}}}}_intersectTrimesh(e,r,i,n,s,a){let o=bxt,l=Axt,c=Sxt,h=BB,p=yxt,m=wxt,f=xxt,g=kxt,_=Cxt,w=e.indices;e.vertices;let S=this.from,C=this.to,b=this.direction;c.position.copy(i),c.quaternion.copy(r),Bi.vectorToLocalFrame(i,r,b,p),Bi.pointToLocalFrame(i,r,S,m),Bi.pointToLocalFrame(i,r,C,f),f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,m.x*=e.scale.x,m.y*=e.scale.y,m.z*=e.scale.z,f.vsub(m,p),p.normalize();let P=m.distanceSquared(f);e.tree.rayQuery(this,c,l);for(let L=0,H=l.length;!this.result.shouldStop&&L!==H;L++){let M=l[L];e.getNormal(M,o),e.getVertex(w[M*3],ra),ra.vsub(m,h);let E=p.dot(o),it=o.dot(h)/E;if(it<0)continue;p.scale(it,Bn),Bn.vadd(m,Bn),e.getVertex(w[M*3+1],Pa),e.getVertex(w[M*3+2],Ma);let X=Bn.distanceSquared(m);!(Da.pointInTriangle(Bn,Pa,ra,Ma)||Da.pointInTriangle(Bn,ra,Pa,Ma))||X>P||(Bi.vectorToWorldFrame(r,o,_),Bi.pointToWorldFrame(i,r,Bn,g),this.reportIntersection(_,g,s,n,M))}l.length=0}reportIntersection(e,r,i,n,s){let a=this.from,o=this.to,l=a.distanceTo(r),c=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(c.hitFaceIndex=typeof s<"u"?s:-1,this.mode){case Da.ALL:this.hasHit=!0,c.set(a,o,e,r,i,n,l),c.hasHit=!0,this.callback(c);break;case Da.CLOSEST:(l<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(a,o,e,r,i,n,l));break;case Da.ANY:this.hasHit=!0,c.hasHit=!0,c.set(a,o,e,r,i,n,l),c.shouldStop=!0;break}}static pointInTriangle(e,r,i,n){n.vsub(r,au),i.vsub(r,rm),e.vsub(r,A1);let s=au.dot(au),a=au.dot(rm),o=au.dot(A1),l=rm.dot(rm),c=rm.dot(A1),h,p;return(h=l*o-a*c)>=0&&(p=s*c-a*o)>=0&&h+p<s*l-a*a}};$u.CLOSEST=CE.CLOSEST;$u.ANY=CE.ANY;$u.ALL=CE.ALL;var MB=new Cn,k1=[],rm=new I,A1=new I,dxt=new I,pxt=new as,Bn=new I,ra=new I,Pa=new I,Ma=new I;new I;new pk;var RB={faceList:[0]},Dv=new I,mxt=new $u,fxt=[],gxt=new I,vxt=new I,_xt=new I,ozt=new I,lzt=new I,BB=new I,bxt=new I,yxt=new I,wxt=new I,xxt=new I,Cxt=new I,kxt=new I;new Cn;var Axt=[],Sxt=new Bi,au=new I,Lv=new I;function Ext(t,e,r){r.vsub(t,au);let i=au.dot(e);return e.scale(i,Lv),Lv.vadd(t,Lv),r.distanceTo(Lv)}var DB=class{constructor(){this.spatial=new I,this.rotational=new I}multiplyElement(t){return t.spatial.dot(this.spatial)+t.rotational.dot(this.rotational)}multiplyVectors(t,e){return t.dot(this.spatial)+e.dot(this.rotational)}},XU=(()=>{class t{constructor(r,i,n,s){n===void 0&&(n=-1e6),s===void 0&&(s=1e6),this.id=t.idCounter++,this.minForce=n,this.maxForce=s,this.bi=r,this.bj=i,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new DB,this.jacobianElementB=new DB,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(r,i,n){let s=i,a=r,o=n;this.a=4/(o*(1+4*s)),this.b=4*s/(1+4*s),this.eps=4/(o*o*a*(1+4*s))}computeB(r,i,n){let s=this.computeGW(),a=this.computeGq(),o=this.computeGiMf();return-a*r-s*i-o*n}computeGq(){let r=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,s=this.bj,a=n.position,o=s.position;return r.spatial.dot(a)+i.spatial.dot(o)}computeGW(){let r=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,s=this.bj,a=n.velocity,o=s.velocity,l=n.angularVelocity,c=s.angularVelocity;return r.multiplyVectors(a,l)+i.multiplyVectors(o,c)}computeGWlambda(){let r=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,s=this.bj,a=n.vlambda,o=s.vlambda,l=n.wlambda,c=s.wlambda;return r.multiplyVectors(a,l)+i.multiplyVectors(o,c)}computeGiMf(){let r=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,s=this.bj,a=n.force,o=n.torque,l=s.force,c=s.torque,h=n.invMassSolve,p=s.invMassSolve;return a.scale(h,LB),l.scale(p,NB),n.invInertiaWorldSolve.vmult(o,FB),s.invInertiaWorldSolve.vmult(c,zB),r.multiplyVectors(LB,FB)+i.multiplyVectors(NB,zB)}computeGiMGt(){let r=this.jacobianElementA,i=this.jacobianElementB,n=this.bi,s=this.bj,a=n.invMassSolve,o=s.invMassSolve,l=n.invInertiaWorldSolve,c=s.invInertiaWorldSolve,h=a+o;return l.vmult(r.rotational,Nv),h+=Nv.dot(r.rotational),c.vmult(i.rotational,Nv),h+=Nv.dot(i.rotational),h}addToWlambda(r){let i=this.jacobianElementA,n=this.jacobianElementB,s=this.bi,a=this.bj,o=Txt;s.vlambda.addScaledVector(s.invMassSolve*r,i.spatial,s.vlambda),a.vlambda.addScaledVector(a.invMassSolve*r,n.spatial,a.vlambda),s.invInertiaWorldSolve.vmult(i.rotational,o),s.wlambda.addScaledVector(r,o,s.wlambda),a.invInertiaWorldSolve.vmult(n.rotational,o),a.wlambda.addScaledVector(r,o,a.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}return t.idCounter=0,t})(),LB=new I,NB=new I,FB=new I,zB=new I,Nv=new I,Txt=new I,Ixt=class extends XU{constructor(t,e,r){r===void 0&&(r=1e6),super(t,e,0,r),this.restitution=0,this.ri=new I,this.rj=new I,this.ni=new I}computeB(t){let e=this.a,r=this.b,i=this.bi,n=this.bj,s=this.ri,a=this.rj,o=Oxt,l=Pxt,c=i.velocity,h=i.angularVelocity;i.force,i.torque;let p=n.velocity,m=n.angularVelocity;n.force,n.torque;let f=Mxt,g=this.jacobianElementA,_=this.jacobianElementB,w=this.ni;s.cross(w,o),a.cross(w,l),w.negate(g.spatial),o.negate(g.rotational),_.spatial.copy(w),_.rotational.copy(l),f.copy(n.position),f.vadd(a,f),f.vsub(i.position,f),f.vsub(s,f);let S=w.dot(f),C=this.restitution+1,b=C*p.dot(w)-C*c.dot(w)+m.dot(l)-h.dot(o),P=this.computeGiMf();return-S*e-b*r-t*P}getImpactVelocityAlongNormal(){let t=Rxt,e=Bxt,r=Dxt,i=Lxt,n=Nxt;return this.bi.position.vadd(this.ri,r),this.bj.position.vadd(this.rj,i),this.bi.getVelocityAtWorldPoint(r,t),this.bj.getVelocityAtWorldPoint(i,e),t.vsub(e,n),this.ni.dot(n)}},Oxt=new I,Pxt=new I,Mxt=new I,Rxt=new I,Bxt=new I,Dxt=new I,Lxt=new I,Nxt=new I,czt=new I,uzt=new I,hzt=new I,dzt=new I;new I;new I;var pzt=new I,mzt=new I,fzt=new I,gzt=new I,VB=class extends XU{constructor(t,e,r){super(t,e,-r,r),this.ri=new I,this.rj=new I,this.t=new I}computeB(t){this.a;let e=this.b;this.bi,this.bj;let r=this.ri,i=this.rj,n=Fxt,s=zxt,a=this.t;r.cross(a,n),i.cross(a,s);let o=this.jacobianElementA,l=this.jacobianElementB;a.negate(o.spatial),n.negate(o.rotational),l.spatial.copy(a),l.rotational.copy(s);let c=this.computeGW(),h=this.computeGiMf();return-c*e-t*h}},Fxt=new I,zxt=new I,vzt=new I,_zt=new I,bzt=new I,yzt=new I,wzt=new I,xzt=new I,Czt=new I,kzt=new I,Azt=new I,Szt=new I,Ezt=new I,Tzt=new I,Izt=new I;new I;new I;new I;var Ozt=new I,Pzt=new I,Mzt=new I;new $u;new I;var Rzt=new I,Bzt=new I,Dzt=[new I(1,0,0),new I(0,1,0),new I(0,0,1)],Lzt=new I,Nzt=new I,Fzt=new I,zzt=new I,Vzt=new I,jzt=new I,Uzt=new I,Hzt=new I,Gzt=new I,Wzt=new I,Zzt=new I,$zt=new I,Xzt=new I,qzt=new I,Kzt=new I,Yzt=new I,Jzt=new I,Qzt=new I,tVt=new I,eVt=new I,iVt=new I,rVt=new I,nVt=new I,sVt=new I,aVt=new I,oVt=new I,lVt=new I,cVt=new I,uVt=new I,hVt=new I,dVt=new I,pVt=new Cn,mVt=new I,fVt=new Cn,gVt=new I,vVt=new I,_Vt=new I,bVt=new I,yVt=new I,wVt=new I,xVt=new I,CVt=new Cn,kVt=new I,AVt=new Bi,SVt=new Cn,EVt=Br.STATIC,Vxt=class{constructor(){this.objects=[],this.type=Object}release(){let t=arguments.length;for(let e=0;e!==t;e++)this.objects.push(e<0||arguments.length<=e?void 0:arguments[e]);return this}get(){return this.objects.length===0?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(t){let e=this.objects;for(;e.length>t;)e.pop();for(;e.length<t;)e.push(this.constructObject());return this}},jxt=class extends Vxt{constructor(){super(...arguments),this.type=I}constructObject(){return new I}},Qi={sphereSphere:ce.types.SPHERE,spherePlane:ce.types.SPHERE|ce.types.PLANE,boxBox:ce.types.BOX|ce.types.BOX,sphereBox:ce.types.SPHERE|ce.types.BOX,planeBox:ce.types.PLANE|ce.types.BOX,convexConvex:ce.types.CONVEXPOLYHEDRON,sphereConvex:ce.types.SPHERE|ce.types.CONVEXPOLYHEDRON,planeConvex:ce.types.PLANE|ce.types.CONVEXPOLYHEDRON,boxConvex:ce.types.BOX|ce.types.CONVEXPOLYHEDRON,sphereHeightfield:ce.types.SPHERE|ce.types.HEIGHTFIELD,boxHeightfield:ce.types.BOX|ce.types.HEIGHTFIELD,convexHeightfield:ce.types.CONVEXPOLYHEDRON|ce.types.HEIGHTFIELD,sphereParticle:ce.types.PARTICLE|ce.types.SPHERE,planeParticle:ce.types.PLANE|ce.types.PARTICLE,boxParticle:ce.types.BOX|ce.types.PARTICLE,convexParticle:ce.types.PARTICLE|ce.types.CONVEXPOLYHEDRON,cylinderCylinder:ce.types.CYLINDER,sphereCylinder:ce.types.SPHERE|ce.types.CYLINDER,planeCylinder:ce.types.PLANE|ce.types.CYLINDER,boxCylinder:ce.types.BOX|ce.types.CYLINDER,convexCylinder:ce.types.CONVEXPOLYHEDRON|ce.types.CYLINDER,heightfieldCylinder:ce.types.HEIGHTFIELD|ce.types.CYLINDER,particleCylinder:ce.types.PARTICLE|ce.types.CYLINDER,sphereTrimesh:ce.types.SPHERE|ce.types.TRIMESH,planeTrimesh:ce.types.PLANE|ce.types.TRIMESH},TVt=class{get[Qi.sphereSphere](){return this.sphereSphere}get[Qi.spherePlane](){return this.spherePlane}get[Qi.boxBox](){return this.boxBox}get[Qi.sphereBox](){return this.sphereBox}get[Qi.planeBox](){return this.planeBox}get[Qi.convexConvex](){return this.convexConvex}get[Qi.sphereConvex](){return this.sphereConvex}get[Qi.planeConvex](){return this.planeConvex}get[Qi.boxConvex](){return this.boxConvex}get[Qi.sphereHeightfield](){return this.sphereHeightfield}get[Qi.boxHeightfield](){return this.boxHeightfield}get[Qi.convexHeightfield](){return this.convexHeightfield}get[Qi.sphereParticle](){return this.sphereParticle}get[Qi.planeParticle](){return this.planeParticle}get[Qi.boxParticle](){return this.boxParticle}get[Qi.convexParticle](){return this.convexParticle}get[Qi.cylinderCylinder](){return this.convexConvex}get[Qi.sphereCylinder](){return this.sphereConvex}get[Qi.planeCylinder](){return this.planeConvex}get[Qi.boxCylinder](){return this.boxConvex}get[Qi.convexCylinder](){return this.convexConvex}get[Qi.heightfieldCylinder](){return this.heightfieldCylinder}get[Qi.particleCylinder](){return this.particleCylinder}get[Qi.sphereTrimesh](){return this.sphereTrimesh}get[Qi.planeTrimesh](){return this.planeTrimesh}constructor(t){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new jxt,this.world=t,this.currentContactMaterial=t.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(t,e,r,i,n,s){let a;this.contactPointPool.length?(a=this.contactPointPool.pop(),a.bi=t,a.bj=e):a=new Ixt(t,e),a.enabled=t.collisionResponse&&e.collisionResponse&&r.collisionResponse&&i.collisionResponse;let o=this.currentContactMaterial;a.restitution=o.restitution,a.setSpookParams(o.contactEquationStiffness,o.contactEquationRelaxation,this.world.dt);let l=r.material||t.material,c=i.material||e.material;return l&&c&&l.restitution>=0&&c.restitution>=0&&(a.restitution=l.restitution*c.restitution),a.si=n||r,a.sj=s||i,a}createFrictionEquationsFromContact(t,e){let r=t.bi,i=t.bj,n=t.si,s=t.sj,a=this.world,o=this.currentContactMaterial,l=o.friction,c=n.material||r.material,h=s.material||i.material;if(c&&h&&c.friction>=0&&h.friction>=0&&(l=c.friction*h.friction),l>0){let p=l*(a.frictionGravity||a.gravity).length(),m=r.invMass+i.invMass;m>0&&(m=1/m);let f=this.frictionEquationPool,g=f.length?f.pop():new VB(r,i,p*m),_=f.length?f.pop():new VB(r,i,p*m);return g.bi=_.bi=r,g.bj=_.bj=i,g.minForce=_.minForce=-p*m,g.maxForce=_.maxForce=p*m,g.ri.copy(t.ri),g.rj.copy(t.rj),_.ri.copy(t.ri),_.rj.copy(t.rj),t.ni.tangents(g.t,_.t),g.setSpookParams(o.frictionEquationStiffness,o.frictionEquationRelaxation,a.dt),_.setSpookParams(o.frictionEquationStiffness,o.frictionEquationRelaxation,a.dt),g.enabled=_.enabled=t.enabled,e.push(g,_),!0}return!1}createFrictionFromAverage(t){let e=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(e,this.frictionResult)||t===1)return;let r=this.frictionResult[this.frictionResult.length-2],i=this.frictionResult[this.frictionResult.length-1];Dc.setZero(),Lh.setZero(),Nh.setZero();let n=e.bi;e.bj;for(let a=0;a!==t;a++)e=this.result[this.result.length-1-a],e.bi!==n?(Dc.vadd(e.ni,Dc),Lh.vadd(e.ri,Lh),Nh.vadd(e.rj,Nh)):(Dc.vsub(e.ni,Dc),Lh.vadd(e.rj,Lh),Nh.vadd(e.ri,Nh));let s=1/t;Lh.scale(s,r.ri),Nh.scale(s,r.rj),i.ri.copy(r.ri),i.rj.copy(r.rj),Dc.normalize(),Dc.tangents(r.t,i.t)}getContacts(t,e,r,i,n,s,a){this.contactPointPool=n,this.frictionEquationPool=a,this.result=i,this.frictionResult=s;let o=Gxt,l=Wxt,c=Uxt,h=Hxt;for(let p=0,m=t.length;p!==m;p++){let f=t[p],g=e[p],_=null;f.material&&g.material&&(_=r.getContactMaterial(f.material,g.material)||null);let w=f.type&Br.KINEMATIC&&g.type&Br.STATIC||f.type&Br.STATIC&&g.type&Br.KINEMATIC||f.type&Br.KINEMATIC&&g.type&Br.KINEMATIC;for(let S=0;S<f.shapes.length;S++){f.quaternion.mult(f.shapeOrientations[S],o),f.quaternion.vmult(f.shapeOffsets[S],c),c.vadd(f.position,c);let C=f.shapes[S];for(let b=0;b<g.shapes.length;b++){g.quaternion.mult(g.shapeOrientations[b],l),g.quaternion.vmult(g.shapeOffsets[b],h),h.vadd(g.position,h);let P=g.shapes[b];if(!(C.collisionFilterMask&P.collisionFilterGroup&&P.collisionFilterMask&C.collisionFilterGroup)||c.distanceTo(h)>C.boundingSphereRadius+P.boundingSphereRadius)continue;let L=null;C.material&&P.material&&(L=r.getContactMaterial(C.material,P.material)||null),this.currentContactMaterial=L||_||r.defaultContactMaterial;let H=C.type|P.type,M=this[H];if(M){let E=!1;C.type<P.type?E=M.call(this,C,P,c,h,o,l,f,g,C,P,w):E=M.call(this,P,C,h,c,l,o,g,f,C,P,w),E&&w&&(r.shapeOverlapKeeper.set(C.id,P.id),r.bodyOverlapKeeper.set(f.id,g.id))}}}}}sphereSphere(t,e,r,i,n,s,a,o,l,c,h){if(h)return r.distanceSquared(i)<(t.radius+e.radius)**2;let p=this.createContactEquation(a,o,t,e,l,c);i.vsub(r,p.ni),p.ni.normalize(),p.ri.copy(p.ni),p.rj.copy(p.ni),p.ri.scale(t.radius,p.ri),p.rj.scale(-e.radius,p.rj),p.ri.vadd(r,p.ri),p.ri.vsub(a.position,p.ri),p.rj.vadd(i,p.rj),p.rj.vsub(o.position,p.rj),this.result.push(p),this.createFrictionEquationsFromContact(p,this.frictionResult)}spherePlane(t,e,r,i,n,s,a,o,l,c,h){let p=this.createContactEquation(a,o,t,e,l,c);if(p.ni.set(0,0,1),s.vmult(p.ni,p.ni),p.ni.negate(p.ni),p.ni.normalize(),p.ni.scale(t.radius,p.ri),r.vsub(i,Fv),p.ni.scale(p.ni.dot(Fv),jB),Fv.vsub(jB,p.rj),-Fv.dot(p.ni)<=t.radius){if(h)return!0;let m=p.ri,f=p.rj;m.vadd(r,m),m.vsub(a.position,m),f.vadd(i,f),f.vsub(o.position,f),this.result.push(p),this.createFrictionEquationsFromContact(p,this.frictionResult)}}boxBox(t,e,r,i,n,s,a,o,l,c,h){return t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e.convexPolyhedronRepresentation,r,i,n,s,a,o,t,e,h)}sphereBox(t,e,r,i,n,s,a,o,l,c,h){let p=this.v3pool,m=v1t;r.vsub(i,zv),e.getSideNormals(m,s);let f=t.radius,g=!1,_=b1t,w=y1t,S=w1t,C=null,b=0,P=0,L=0,H=null;for(let nt=0,ot=m.length;nt!==ot&&g===!1;nt++){let xt=m1t;xt.copy(m[nt]);let Z=xt.length();xt.normalize();let et=zv.dot(xt);if(et<Z+f&&et>0){let tt=f1t,ct=g1t;tt.copy(m[(nt+1)%3]),ct.copy(m[(nt+2)%3]);let re=tt.length(),me=ct.length();tt.normalize(),ct.normalize();let Ze=zv.dot(tt),li=zv.dot(ct);if(Ze<re&&Ze>-re&&li<me&&li>-me){let ci=Math.abs(et-Z-f);if((H===null||ci<H)&&(H=ci,P=Ze,L=li,C=Z,_.copy(xt),w.copy(tt),S.copy(ct),b++,h))return!0}}}if(b){g=!0;let nt=this.createContactEquation(a,o,t,e,l,c);_.scale(-f,nt.ri),nt.ni.copy(_),nt.ni.negate(nt.ni),_.scale(C,_),w.scale(P,w),_.vadd(w,_),S.scale(L,S),_.vadd(S,nt.rj),nt.ri.vadd(r,nt.ri),nt.ri.vsub(a.position,nt.ri),nt.rj.vadd(i,nt.rj),nt.rj.vsub(o.position,nt.rj),this.result.push(nt),this.createFrictionEquationsFromContact(nt,this.frictionResult)}let M=p.get(),E=_1t;for(let nt=0;nt!==2&&!g;nt++)for(let ot=0;ot!==2&&!g;ot++)for(let xt=0;xt!==2&&!g;xt++)if(M.set(0,0,0),nt?M.vadd(m[0],M):M.vsub(m[0],M),ot?M.vadd(m[1],M):M.vsub(m[1],M),xt?M.vadd(m[2],M):M.vsub(m[2],M),i.vadd(M,E),E.vsub(r,E),E.lengthSquared()<f*f){if(h)return!0;g=!0;let Z=this.createContactEquation(a,o,t,e,l,c);Z.ri.copy(E),Z.ri.normalize(),Z.ni.copy(Z.ri),Z.ri.scale(f,Z.ri),Z.rj.copy(M),Z.ri.vadd(r,Z.ri),Z.ri.vsub(a.position,Z.ri),Z.rj.vadd(i,Z.rj),Z.rj.vsub(o.position,Z.rj),this.result.push(Z),this.createFrictionEquationsFromContact(Z,this.frictionResult)}p.release(M),M=null;let it=p.get(),X=p.get(),W=p.get(),J=p.get(),lt=p.get(),Y=m.length;for(let nt=0;nt!==Y&&!g;nt++)for(let ot=0;ot!==Y&&!g;ot++)if(nt%3!==ot%3){m[ot].cross(m[nt],it),it.normalize(),m[nt].vadd(m[ot],X),W.copy(r),W.vsub(X,W),W.vsub(i,W);let xt=W.dot(it);it.scale(xt,J);let Z=0;for(;Z===nt%3||Z===ot%3;)Z++;lt.copy(r),lt.vsub(J,lt),lt.vsub(X,lt),lt.vsub(i,lt);let et=Math.abs(xt),tt=lt.length();if(et<m[Z].length()&&tt<f){if(h)return!0;g=!0;let ct=this.createContactEquation(a,o,t,e,l,c);X.vadd(J,ct.rj),ct.rj.copy(ct.rj),lt.negate(ct.ni),ct.ni.normalize(),ct.ri.copy(ct.rj),ct.ri.vadd(i,ct.ri),ct.ri.vsub(r,ct.ri),ct.ri.normalize(),ct.ri.scale(f,ct.ri),ct.ri.vadd(r,ct.ri),ct.ri.vsub(a.position,ct.ri),ct.rj.vadd(i,ct.rj),ct.rj.vsub(o.position,ct.rj),this.result.push(ct),this.createFrictionEquationsFromContact(ct,this.frictionResult)}}p.release(it,X,W,J,lt)}planeBox(t,e,r,i,n,s,a,o,l,c,h){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,e.convexPolyhedronRepresentation.id=e.id,this.planeConvex(t,e.convexPolyhedronRepresentation,r,i,n,s,a,o,t,e,h)}convexConvex(t,e,r,i,n,s,a,o,l,c,h,p,m){let f=L1t;if(!(r.distanceTo(i)>t.boundingSphereRadius+e.boundingSphereRadius)&&t.findSeparatingAxis(e,r,n,i,s,f,p,m)){let g=[],_=N1t;t.clipAgainstHull(r,n,e,i,s,f,-100,100,g);let w=0;for(let S=0;S!==g.length;S++){if(h)return!0;let C=this.createContactEquation(a,o,t,e,l,c),b=C.ri,P=C.rj;f.negate(C.ni),g[S].normal.negate(_),_.scale(g[S].depth,_),g[S].point.vadd(_,b),P.copy(g[S].point),b.vsub(r,b),P.vsub(i,P),b.vadd(r,b),b.vsub(a.position,b),P.vadd(i,P),P.vsub(o.position,P),this.result.push(C),w++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(C,this.frictionResult)}this.enableFrictionReduction&&w&&this.createFrictionFromAverage(w)}}sphereConvex(t,e,r,i,n,s,a,o,l,c,h){let p=this.v3pool;r.vsub(i,x1t);let m=e.faceNormals,f=e.faces,g=e.vertices,_=t.radius,w=!1;for(let S=0;S!==g.length;S++){let C=g[S],b=S1t;s.vmult(C,b),i.vadd(b,b);let P=A1t;if(b.vsub(r,P),P.lengthSquared()<_*_){if(h)return!0;w=!0;let L=this.createContactEquation(a,o,t,e,l,c);L.ri.copy(P),L.ri.normalize(),L.ni.copy(L.ri),L.ri.scale(_,L.ri),b.vsub(i,L.rj),L.ri.vadd(r,L.ri),L.ri.vsub(a.position,L.ri),L.rj.vadd(i,L.rj),L.rj.vsub(o.position,L.rj),this.result.push(L),this.createFrictionEquationsFromContact(L,this.frictionResult);return}}for(let S=0,C=f.length;S!==C&&w===!1;S++){let b=m[S],P=f[S],L=E1t;s.vmult(b,L);let H=T1t;s.vmult(g[P[0]],H),H.vadd(i,H);let M=I1t;L.scale(-_,M),r.vadd(M,M);let E=O1t;M.vsub(H,E);let it=E.dot(L),X=P1t;if(r.vsub(H,X),it<0&&X.dot(L)>0){let W=[];for(let J=0,lt=P.length;J!==lt;J++){let Y=p.get();s.vmult(g[P[J]],Y),i.vadd(Y,Y),W.push(Y)}if(p1t(W,L,r)){if(h)return!0;w=!0;let J=this.createContactEquation(a,o,t,e,l,c);L.scale(-_,J.ri),L.negate(J.ni);let lt=p.get();L.scale(-it,lt);let Y=p.get();L.scale(-_,Y),r.vsub(i,J.rj),J.rj.vadd(Y,J.rj),J.rj.vadd(lt,J.rj),J.rj.vadd(i,J.rj),J.rj.vsub(o.position,J.rj),J.ri.vadd(r,J.ri),J.ri.vsub(a.position,J.ri),p.release(lt),p.release(Y),this.result.push(J),this.createFrictionEquationsFromContact(J,this.frictionResult);for(let nt=0,ot=W.length;nt!==ot;nt++)p.release(W[nt]);return}else for(let J=0;J!==P.length;J++){let lt=p.get(),Y=p.get();s.vmult(g[P[(J+1)%P.length]],lt),s.vmult(g[P[(J+2)%P.length]],Y),i.vadd(lt,lt),i.vadd(Y,Y);let nt=C1t;Y.vsub(lt,nt);let ot=k1t;nt.unit(ot);let xt=p.get(),Z=p.get();r.vsub(lt,Z);let et=Z.dot(ot);ot.scale(et,xt),xt.vadd(lt,xt);let tt=p.get();if(xt.vsub(r,tt),et>0&&et*et<nt.lengthSquared()&&tt.lengthSquared()<_*_){if(h)return!0;let ct=this.createContactEquation(a,o,t,e,l,c);xt.vsub(i,ct.rj),xt.vsub(r,ct.ni),ct.ni.normalize(),ct.ni.scale(_,ct.ri),ct.rj.vadd(i,ct.rj),ct.rj.vsub(o.position,ct.rj),ct.ri.vadd(r,ct.ri),ct.ri.vsub(a.position,ct.ri),this.result.push(ct),this.createFrictionEquationsFromContact(ct,this.frictionResult);for(let re=0,me=W.length;re!==me;re++)p.release(W[re]);p.release(lt),p.release(Y),p.release(xt),p.release(tt),p.release(Z);return}p.release(lt),p.release(Y),p.release(xt),p.release(tt),p.release(Z)}for(let J=0,lt=W.length;J!==lt;J++)p.release(W[J])}}}planeConvex(t,e,r,i,n,s,a,o,l,c,h){let p=M1t,m=R1t;m.set(0,0,1),n.vmult(m,m);let f=0,g=B1t;for(let _=0;_!==e.vertices.length;_++)if(p.copy(e.vertices[_]),s.vmult(p,p),i.vadd(p,p),p.vsub(r,g),m.dot(g)<=0){if(h)return!0;let w=this.createContactEquation(a,o,t,e,l,c),S=D1t;m.scale(m.dot(g),S),p.vsub(S,S),S.vsub(r,w.ri),w.ni.copy(m),p.vsub(i,w.rj),w.ri.vadd(r,w.ri),w.ri.vsub(a.position,w.ri),w.rj.vadd(i,w.rj),w.rj.vsub(o.position,w.rj),this.result.push(w),f++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(w,this.frictionResult)}this.enableFrictionReduction&&f&&this.createFrictionFromAverage(f)}boxConvex(t,e,r,i,n,s,a,o,l,c,h){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(t.convexPolyhedronRepresentation,e,r,i,n,s,a,o,t,e,h)}sphereHeightfield(t,e,r,i,n,s,a,o,l,c,h){let p=e.data,m=t.radius,f=e.elementSize,g=q1t,_=X1t;Bi.pointToLocalFrame(i,s,r,_);let w=Math.floor((_.x-m)/f)-1,S=Math.ceil((_.x+m)/f)+1,C=Math.floor((_.y-m)/f)-1,b=Math.ceil((_.y+m)/f)+1;if(S<0||b<0||w>p.length||C>p[0].length)return;w<0&&(w=0),S<0&&(S=0),C<0&&(C=0),b<0&&(b=0),w>=p.length&&(w=p.length-1),S>=p.length&&(S=p.length-1),b>=p[0].length&&(b=p[0].length-1),C>=p[0].length&&(C=p[0].length-1);let P=[];e.getRectMinMax(w,C,S,b,P);let L=P[0],H=P[1];if(_.z-m>H||_.z+m<L)return;let M=this.result;for(let E=w;E<S;E++)for(let it=C;it<b;it++){let X=M.length,W=!1;if(e.getConvexTrianglePillar(E,it,!1),Bi.pointToWorldFrame(i,s,e.pillarOffset,g),r.distanceTo(g)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(W=this.sphereConvex(t,e.pillarConvex,r,g,n,s,a,o,t,e,h)),h&&W||(e.getConvexTrianglePillar(E,it,!0),Bi.pointToWorldFrame(i,s,e.pillarOffset,g),r.distanceTo(g)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(W=this.sphereConvex(t,e.pillarConvex,r,g,n,s,a,o,t,e,h)),h&&W))return!0;if(M.length-X>2)return}}boxHeightfield(t,e,r,i,n,s,a,o,l,c,h){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexHeightfield(t.convexPolyhedronRepresentation,e,r,i,n,s,a,o,t,e,h)}convexHeightfield(t,e,r,i,n,s,a,o,l,c,h){let p=e.data,m=e.elementSize,f=t.boundingSphereRadius,g=Z1t,_=$1t,w=W1t;Bi.pointToLocalFrame(i,s,r,w);let S=Math.floor((w.x-f)/m)-1,C=Math.ceil((w.x+f)/m)+1,b=Math.floor((w.y-f)/m)-1,P=Math.ceil((w.y+f)/m)+1;if(C<0||P<0||S>p.length||b>p[0].length)return;S<0&&(S=0),C<0&&(C=0),b<0&&(b=0),P<0&&(P=0),S>=p.length&&(S=p.length-1),C>=p.length&&(C=p.length-1),P>=p[0].length&&(P=p[0].length-1),b>=p[0].length&&(b=p[0].length-1);let L=[];e.getRectMinMax(S,b,C,P,L);let H=L[0],M=L[1];if(!(w.z-f>M||w.z+f<H))for(let E=S;E<C;E++)for(let it=b;it<P;it++){let X=!1;if(e.getConvexTrianglePillar(E,it,!1),Bi.pointToWorldFrame(i,s,e.pillarOffset,g),r.distanceTo(g)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(X=this.convexConvex(t,e.pillarConvex,r,g,n,s,a,o,null,null,h,_,null)),h&&X||(e.getConvexTrianglePillar(E,it,!0),Bi.pointToWorldFrame(i,s,e.pillarOffset,g),r.distanceTo(g)<e.pillarConvex.boundingSphereRadius+t.boundingSphereRadius&&(X=this.convexConvex(t,e.pillarConvex,r,g,n,s,a,o,null,null,h,_,null)),h&&X))return!0}}sphereParticle(t,e,r,i,n,s,a,o,l,c,h){let p=j1t;if(p.set(0,0,1),i.vsub(r,p),p.lengthSquared()<=t.radius*t.radius){if(h)return!0;let m=this.createContactEquation(o,a,e,t,l,c);p.normalize(),m.rj.copy(p),m.rj.scale(t.radius,m.rj),m.ni.copy(p),m.ni.negate(m.ni),m.ri.set(0,0,0),this.result.push(m),this.createFrictionEquationsFromContact(m,this.frictionResult)}}planeParticle(t,e,r,i,n,s,a,o,l,c,h){let p=F1t;p.set(0,0,1),a.quaternion.vmult(p,p);let m=z1t;if(i.vsub(a.position,m),p.dot(m)<=0){if(h)return!0;let f=this.createContactEquation(o,a,e,t,l,c);f.ni.copy(p),f.ni.negate(f.ni),f.ri.set(0,0,0);let g=V1t;p.scale(p.dot(i),g),i.vsub(g,g),f.rj.copy(g),this.result.push(f),this.createFrictionEquationsFromContact(f,this.frictionResult)}}boxParticle(t,e,r,i,n,s,a,o,l,c,h){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexParticle(t.convexPolyhedronRepresentation,e,r,i,n,s,a,o,t,e,h)}convexParticle(t,e,r,i,n,s,a,o,l,c,h){let p=-1,m=H1t,f=G1t,g=null,_=U1t;if(_.copy(i),_.vsub(r,_),n.conjugate(UB),UB.vmult(_,_),t.pointIsInside(_)){t.worldVerticesNeedsUpdate&&t.computeWorldVertices(r,n),t.worldFaceNormalsNeedsUpdate&&t.computeWorldFaceNormals(n);for(let w=0,S=t.faces.length;w!==S;w++){let C=[t.worldVertices[t.faces[w][0]]],b=t.worldFaceNormals[w];i.vsub(C[0],HB);let P=-b.dot(HB);if(g===null||Math.abs(P)<Math.abs(g)){if(h)return!0;g=P,p=w,m.copy(b)}}if(p!==-1){let w=this.createContactEquation(o,a,e,t,l,c);m.scale(g,f),f.vadd(i,f),f.vsub(r,f),w.rj.copy(f),m.negate(w.ni),w.ri.set(0,0,0);let S=w.ri,C=w.rj;S.vadd(i,S),S.vsub(o.position,S),C.vadd(r,C),C.vsub(a.position,C),this.result.push(w),this.createFrictionEquationsFromContact(w,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}}heightfieldCylinder(t,e,r,i,n,s,a,o,l,c,h){return this.convexHeightfield(e,t,i,r,s,n,o,a,l,c,h)}particleCylinder(t,e,r,i,n,s,a,o,l,c,h){return this.convexParticle(e,t,i,r,s,n,o,a,l,c,h)}sphereTrimesh(t,e,r,i,n,s,a,o,l,c,h){let p=Qxt,m=t1t,f=e1t,g=i1t,_=r1t,w=n1t,S=l1t,C=Jxt,b=Kxt,P=c1t;Bi.pointToLocalFrame(i,s,r,_);let L=t.radius;S.lowerBound.set(_.x-L,_.y-L,_.z-L),S.upperBound.set(_.x+L,_.y+L,_.z+L),e.getTrianglesInAABB(S,P);let H=Yxt,M=t.radius*t.radius;for(let J=0;J<P.length;J++)for(let lt=0;lt<3;lt++)if(e.getVertex(e.indices[P[J]*3+lt],H),H.vsub(_,b),b.lengthSquared()<=M){if(C.copy(H),Bi.pointToWorldFrame(i,s,C,H),H.vsub(r,b),h)return!0;let Y=this.createContactEquation(a,o,t,e,l,c);Y.ni.copy(b),Y.ni.normalize(),Y.ri.copy(Y.ni),Y.ri.scale(t.radius,Y.ri),Y.ri.vadd(r,Y.ri),Y.ri.vsub(a.position,Y.ri),Y.rj.copy(H),Y.rj.vsub(o.position,Y.rj),this.result.push(Y),this.createFrictionEquationsFromContact(Y,this.frictionResult)}for(let J=0;J<P.length;J++)for(let lt=0;lt<3;lt++){e.getVertex(e.indices[P[J]*3+lt],p),e.getVertex(e.indices[P[J]*3+(lt+1)%3],m),m.vsub(p,f),_.vsub(m,w);let Y=w.dot(f);_.vsub(p,w);let nt=w.dot(f);if(nt>0&&Y<0&&(_.vsub(p,w),g.copy(f),g.normalize(),nt=w.dot(g),g.scale(nt,w),w.vadd(p,w),w.distanceTo(_)<t.radius)){if(h)return!0;let ot=this.createContactEquation(a,o,t,e,l,c);w.vsub(_,ot.ni),ot.ni.normalize(),ot.ni.scale(t.radius,ot.ri),ot.ri.vadd(r,ot.ri),ot.ri.vsub(a.position,ot.ri),Bi.pointToWorldFrame(i,s,w,w),w.vsub(o.position,ot.rj),Bi.vectorToWorldFrame(s,ot.ni,ot.ni),Bi.vectorToWorldFrame(s,ot.ri,ot.ri),this.result.push(ot),this.createFrictionEquationsFromContact(ot,this.frictionResult)}}let E=s1t,it=a1t,X=o1t,W=qxt;for(let J=0,lt=P.length;J!==lt;J++){e.getTriangleVertices(P[J],E,it,X),e.getNormal(P[J],W),_.vsub(E,w);let Y=w.dot(W);if(W.scale(Y,w),_.vsub(w,w),Y=w.distanceTo(_),$u.pointInTriangle(w,E,it,X)&&Y<t.radius){if(h)return!0;let nt=this.createContactEquation(a,o,t,e,l,c);w.vsub(_,nt.ni),nt.ni.normalize(),nt.ni.scale(t.radius,nt.ri),nt.ri.vadd(r,nt.ri),nt.ri.vsub(a.position,nt.ri),Bi.pointToWorldFrame(i,s,w,w),w.vsub(o.position,nt.rj),Bi.vectorToWorldFrame(s,nt.ni,nt.ni),Bi.vectorToWorldFrame(s,nt.ri,nt.ri),this.result.push(nt),this.createFrictionEquationsFromContact(nt,this.frictionResult)}}P.length=0}planeTrimesh(t,e,r,i,n,s,a,o,l,c,h){let p=new I,m=Zxt;m.set(0,0,1),n.vmult(m,m);for(let f=0;f<e.vertices.length/3;f++){e.getVertex(f,p);let g=new I;g.copy(p),Bi.pointToWorldFrame(i,s,g,p);let _=$xt;if(p.vsub(r,_),m.dot(_)<=0){if(h)return!0;let w=this.createContactEquation(a,o,t,e,l,c);w.ni.copy(m);let S=Xxt;m.scale(_.dot(m),S),p.vsub(S,S),w.ri.copy(S),w.ri.vsub(a.position,w.ri),w.rj.copy(p),w.rj.vsub(o.position,w.rj),this.result.push(w),this.createFrictionEquationsFromContact(w,this.frictionResult)}}}},Dc=new I,Lh=new I,Nh=new I,Uxt=new I,Hxt=new I,Gxt=new as,Wxt=new as,Zxt=new I,$xt=new I,Xxt=new I,qxt=new I,Kxt=new I;new I;var Yxt=new I,Jxt=new I,Qxt=new I,t1t=new I,e1t=new I,i1t=new I,r1t=new I,n1t=new I,s1t=new I,a1t=new I,o1t=new I,l1t=new Cn,c1t=[],Fv=new I,jB=new I,u1t=new I,h1t=new I,d1t=new I;function p1t(t,e,r){let i=null,n=t.length;for(let s=0;s!==n;s++){let a=t[s],o=u1t;t[(s+1)%n].vsub(a,o);let l=h1t;o.cross(e,l);let c=d1t;r.vsub(a,c);let h=l.dot(c);if(i===null||h>0&&i===!0||h<=0&&i===!1){i===null&&(i=h>0);continue}else return!1}return!0}var zv=new I,m1t=new I,f1t=new I,g1t=new I,v1t=[new I,new I,new I,new I,new I,new I],_1t=new I,b1t=new I,y1t=new I,w1t=new I,x1t=new I,C1t=new I,k1t=new I,A1t=new I,S1t=new I,E1t=new I,T1t=new I,I1t=new I,O1t=new I,P1t=new I;new I;new I;var M1t=new I,R1t=new I,B1t=new I,D1t=new I,L1t=new I,N1t=new I,F1t=new I,z1t=new I,V1t=new I,j1t=new I,UB=new as,U1t=new I;new I;var H1t=new I,HB=new I,G1t=new I,W1t=new I,Z1t=new I,$1t=[0],X1t=new I,q1t=new I;new Cn;var IVt=new $u,nm=globalThis.performance||{};if(!nm.now){let t=Date.now();nm.timing&&nm.timing.navigationStart&&(t=nm.timing.navigationStart),nm.now=()=>Date.now()-t}new I;var OVt={type:Br.COLLIDE_EVENT_NAME,body:null,contact:null};function K1t(t){return Dt(this,null,function*(){console.log("Starting Collisioning");let e=t.filter(a=>!a.scenegraph&&a.geometry!=="wireframe").map(a=>{let o=new gt(a.transformMatrix),l=o.transformAsPoint([-1,-1,-1],[]),c=o.transformAsPoint([1,1,1],[]);return{"@id":a["@id"],name:a.tooltip,entityId:a.entityId,bbox:new Cn({lowerBound:new I(...l.map((h,p)=>Math.min(h,c[p]))),upperBound:new I(...c.map((h,p)=>Math.max(h,l[p])))})}}),r=[];for(let a of t.filter(o=>!!o.scenegraph)){let o=yield tf(a.scenegraph,Id,{DracoLoader:_E,decompress:!0,postProcess:!0});for(let l of o.scenes??[])e0(l,new gt(a.transformMatrix),(c,h)=>{if(c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0){for(let p of c.mesh.primitives)if(p.attributes.POSITION&&p.attributes.POSITION.min){let m=h.transformAsPoint(p.attributes.POSITION.min,[]),f=h.transformAsPoint(p.attributes.POSITION.max,[]);r.push({"@id":a["@id"],name:c.name,entityId:a.entityId,bbox:new Cn({lowerBound:new I(...m.map((g,_)=>Math.min(g,f[_]))),upperBound:new I(...f.map((g,_)=>Math.max(g,m[_])))}),gltf:o})}}return!0})}let i=[],n=[];for(let a of e){let o=[];for(let l of r)a.bbox.overlaps(l.bbox)&&o.push({"@id":l["@id"],name:l.name});o.length>0?i.push({"@id":a.entityId,name:a.name,hits:o}):n.push(a)}console.log({sourceBoxes:e,targetBoxes:r,report:i,sad:n,maxHits:Math.max(...i.map(a=>a.hits.length))});let s=[];for(let a of i){s.push({"Tissue ID":a["@id"],"Tissue Name":a.name,"Hit ID":"","Hit Name":""});for(let o of a.hits)s.push({"Tissue ID":a["@id"],"Tissue Name":a.name,"Hit ID":o["@id"],"Hit Name":o.name})}return console.log(s),i})}function S1(t,e,r){if(!(!e||e.length===0)){let i;switch(r.geometry){case"sphere":i=new Imt;break;case"cone":i=new wmt;break;case"cylinder":i=new Tmt;break;case"cube":default:i=new Emt;break}return new mE(x({id:t,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:ui.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:n=>n.color||[255,255,255,.9*255],getTransformMatrix:n=>n.transformMatrix},r))}}function GB(t,e,r){if(!(!e||e.length===0))return new pE(x({id:t,pickable:!0,data:e.map(i=>Q(x({},i),{position:new gt(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color},r))}var Y1t=(()=>{let t=class qU extends cE{initializeState(){let{data:i}=this.props;this.setState({data:i??[],zoomOpacity:.8,doCollisions:!1}),LU()}renderLayers(){let i=this.state,n={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(let o of i.data){let l=o.geometry??"cube";o.scenegraph?n.scenegraph.push(o):n[l]!==void 0&&n[l].push(o)}let s={};for(let o of n.scenegraph)o.scenegraph&&o.scenegraphNode&&!Object.prototype.hasOwnProperty.call(s,o.scenegraph)&&(s[o.scenegraph]=FU({scenegraph:o.scenegraph},qU.gltfCache));let a=[];for(let[o,l]of Object.entries(n))if(o==="scenegraph")for(let c of l)a.push(new yE({id:"models-"+c["@id"],opacity:c.zoomBasedOpacity?i.zoomOpacity:c.opacity??1,pickable:!c.unpickable,coordinateSystem:ui.CARTESIAN,data:[c],scenegraph:c.scenegraphNode?jwt(c.scenegraphNode,s[c.scenegraph]):c.scenegraph,_lighting:c._lighting,getTransformMatrix:c.transformMatrix,getColor:c.color??[0,255,0,127.5],parameters:{depthMask:!c.zoomBasedOpacity&&(c.opacity===void 0||c.opacity===1)}}));else o==="text"?(a.push(GB("text",l.filter(c=>c.unpickable),{pickable:!1})),a.push(GB("textPickable",l.filter(c=>!c.unpickable),{pickable:!0}))):o==="wireframe"?a.push(S1(o,l,{wireframe:!0,pickable:!1,geometry:o})):(a.push(S1(o,l.filter(c=>c.unpickable),{wireframe:!1,pickable:!1,geometry:o})),a.push(S1(`${o}Pickable`,l.filter(c=>!c.unpickable),{wireframe:!1,pickable:!0,geometry:o})));return i.doCollisions&&K1t(i.data),a.filter(o=>!!o)}getPickingInfo(i){return i.info}};return t.layerName="BodyUILayer",t.gltfCache={},t})();function KU(t,e=[]){for(let r of t.nodes||t.children||[])e.push(r.name),KU(r,e);return e}function J1t(t,e,r,i){return Dt(this,null,function*(){LU();let n=yield FU({scenegraph:t,scenegraphNode:r},i),s={},a=[];e=new gt(e??gt.IDENTITY);for(let o of n.scenes)e0(o,e,(l,c)=>{let h={"@id":l.name||l.id,"@type":"ProcessedNode",transformMatrix:new gt(c),geometry:"wireframe",node:l};if(a.push({"@id":`GLTF:${h["@id"]}`,"@type":"GLTFNode",scenegraph:t,scenegraphNode:h["@id"],transformMatrix:new gt(e||gt.IDENTITY),tooltip:l.name||l.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:l}),l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0){for(let p of l.mesh.primitives)if(p.attributes.POSITION&&p.attributes.POSITION.min){let m=c.transformAsPoint(p.attributes.POSITION.min,[]),f=c.transformAsPoint(p.attributes.POSITION.max,[]);h.bbox=new Cn({lowerBound:new I(...m.map((g,_)=>Math.min(g,f[_]))),upperBound:new I(...f.map((g,_)=>Math.max(g,m[_])))})}}return s[h["@id"]]=h,!0});for(let o of Object.values(s).filter(l=>!l.bbox)){for(let l of KU(o.node).map(c=>s[c]).filter(c=>c.bbox))o.bbox?o.bbox.extend(l.bbox):o.bbox=l.bbox.clone();o.bbox||delete s[o["@id"]]}for(let o of Object.values(s)){let l=o.bbox.lowerBound,c=o.bbox.upperBound,h=(o.size=c.clone().vsub(l)).clone().vmul(new I(.5,.5,.5)),p=o.center=l.clone().vadd(h);o.transformMatrix=new gt(gt.IDENTITY).translate(p.toArray()).scale(h.toArray())}for(let o of a)s[o["@id"]]=o;return s})}var Q1t=class{constructor(t){this.deckProps=t,this.bodyUILayer=new Y1t({}),this.nodeClickSubject=new Bt,this.nodeHoverStartSubject=new Bt,this.nodeHoverStopSubject=new Bt,this.sceneRotationSubject=new cc([0,0]),this.nodeDragStartSubject=new Bt,this.nodeDragSubject=new Bt,this.nodeDragEndSubject=new Bt,this.nodeClick$=this.nodeClickSubject.pipe(oa()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(oa()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(oa()),this.sceneRotation$=this.sceneRotationSubject.pipe(oa()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(oa()),this.nodeDrag$=this.nodeDragSubject.pipe(oa()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(oa()),this._onHover=r=>{let{lastHovered:i}=this;this.cursor=r.picked?"pointer":void 0,r.picked&&r.object?.["@id"]?i!==r.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=r.object,this.nodeHoverStartSubject.next(r.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)},this._onClick=(r,i)=>{r.picked&&r.object?.["@id"]&&this.nodeClickSubject.next({node:r.object,ctrlClick:i?.srcEvent?.ctrlKey??void 0})},this._onViewStateChange=r=>{if(r.interactionState?.isZooming){let i=this.bodyUILayer.state,n=Math.min(Math.max(1-(r.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==n&&this.bodyUILayer.setState({data:i.data,zoomOpacity:n})}this.deck.setProps({viewState:x({},r.viewState)}),this.sceneRotationSubject.next([r.viewState.rotationOrbit,r.viewState.rotationX])},this._onDragStart=(r,i)=>{this._dragEvent(r,i,this.nodeDragStartSubject)},this._onDrag=(r,i)=>{this._dragEvent(r,i,this.nodeDragSubject)},this._onDragEnd=(r,i)=>{this._dragEvent(r,i,this.nodeDragEndSubject)};let e=Q(x({},t),{views:[t.camera==="orthographic"?new iE({flipY:!1,near:-1e3}):new Wj({orbitAxis:"Y"})],controller:t.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:r=>this.cursor??(r.isDragging?"grabbing":"grab")});t.legacyLighting&&(e.effects=[new JS({ambientLight:new Cj({color:[255,255,255],intensity:10})})]),this.deck=new nE(e),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:t.minRotationX??-15,maxRotationX:t.maxRotationX??15,target:t.target??[.5,.5,0],rotationX:0,rotationOrbit:t.rotation??0,zoom:t.zoom??9.5,camera:t.camera}}),t.rotation&&this.sceneRotationSubject.next([t.rotation,0])}initialize(){return Dt(this,null,function*(){for(;!this.bodyUILayer.state;)yield new Promise(t=>{setTimeout(t,200)})})}finalize(){this.deck.finalize()}setScene(t){if(t?.length>0){let e=this.bodyUILayer.state.zoomOpacity,r=!1;for(let i of t)i.zoomToOnLoad&&(this.zoomTo(i),r=!0);e=r?.05:e,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(t,e):this.bodyUILayer.setState({data:t,zoomOpacity:e})}}debugSceneNodeProcessing(t,e){let r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",i=new gt([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);J1t(r,i,"VHF_Kidney_L_Low1").then(n=>{console.log("results",n),console.log("data",t),t=t.concat(Object.values(n)),t.push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:i,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:t,zoomOpacity:e})})}zoomTo(t){let e=new gt(t.transformMatrix);this.deck.setProps({viewState:Q(x({},this.deck.props.viewState),{target:e.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5})})}setRotation(t){this.deck.setProps({viewState:Q(x({},this.deck.props.viewState),{rotationOrbit:t})})}setRotationX(t){this.deck.setProps({viewState:Q(x({},this.deck.props.viewState),{rotationX:t})})}setZoom(t){this.deck.setProps({viewState:Q(x({},this.deck.props.viewState),{zoom:t})})}setTarget(t){this.deck.setProps({viewState:Q(x({},this.deck.props.viewState),{target:t})})}setInteractive(t){this.deck.setProps({controller:t})}_dragEvent(t,e,r){t?.object?.["@id"]&&r.next({node:t.object,info:t,e})}};function tCt(t,e,r){!e&&Zd(t);let i=e??K(Re);return r?Wd(i,r):i}function YU(t,e={}){return tCt(YU,e?.injector,()=>{let r=K(ec),i=new Bt,n=rCt(i,e?.behavior??"switch").subscribe({next:o=>s.set({kind:1,value:o}),error:o=>s.set({kind:2,error:o})});r.onDestroy(()=>n.unsubscribe());let s;if(e?.requireSync&&e?.initialValue===void 0){let o=t(void 0);if(WB(o))throw new Error(eCt);s=un({kind:0}),jo(o)?i.next(o):s.set({kind:1,value:o})}else s=un({kind:1,value:e?.initialValue});if(e?.requireSync&&s().kind===0)throw new Error(iCt);let a=e?.requireSync===!0;return Ws(()=>{let o=vn(()=>{let c=s();return c.kind===1?c.value:void 0}),l=t(o);if(a){a=!1;return}vn(()=>{i.next(jo(l)||WB(l)?l:Ge(l))})}),rr(()=>{let o=s();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:return;default:throw new Error("Unknown state")}},{equal:e?.equal})})}var eCt="Promises cannot be used with requireSync. Pass an initialValue or set requireSync to false.",iCt="The observable passed to derivedAsync() did not emit synchronously. Pass an initialValue or set requireSync to false.";function rCt(t,e){let r={merge:wA,concat:HN,exhaust:UY,switch:YN};return t.pipe(r[e]())}function WB(t){return t&&typeof t.then=="function"}var hi;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function r(n){throw new Error}t.assertNever=r,t.arrayToEnum=n=>{let s={};for(let a of n)s[a]=a;return s},t.getValidEnumValues=n=>{let s=t.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),a={};for(let o of s)a[o]=n[o];return t.objectValues(a)},t.objectValues=n=>t.objectKeys(n).map(function(s){return n[s]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let s=[];for(let a in n)Object.prototype.hasOwnProperty.call(n,a)&&s.push(a);return s},t.find=(n,s)=>{for(let a of n)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function i(n,s=" | "){return n.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(n,s)=>typeof s=="bigint"?s.toString():s})(hi||(hi={}));var JU=function(t){return t.mergeShapes=(e,r)=>x(x({},e),r),t}(JU||{}),Yt=hi.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Vl=t=>{switch(typeof t){case"undefined":return Yt.undefined;case"string":return Yt.string;case"number":return isNaN(t)?Yt.nan:Yt.number;case"boolean":return Yt.boolean;case"function":return Yt.function;case"bigint":return Yt.bigint;case"symbol":return Yt.symbol;case"object":return Array.isArray(t)?Yt.array:t===null?Yt.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Yt.promise:typeof Map<"u"&&t instanceof Map?Yt.map:typeof Set<"u"&&t instanceof Set?Yt.set:typeof Date<"u"&&t instanceof Date?Yt.date:Yt.object;default:return Yt.unknown}},Mt=hi.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),nCt=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Fo=(()=>{class t extends Error{constructor(r){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let i=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,i):this.__proto__=i,this.name="ZodError",this.issues=r}get errors(){return this.issues}format(r){let i=r||function(a){return a.message},n={_errors:[]},s=a=>{for(let o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(i(o));else{let l=n,c=0;for(;c<o.path.length;){let h=o.path[c];c===o.path.length-1?(l[h]=l[h]||{_errors:[]},l[h]._errors.push(i(o))):l[h]=l[h]||{_errors:[]},l=l[h],c++}}};return s(this),n}static assert(r){if(!(r instanceof t))throw new Error(`Not a ZodError: ${r}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,hi.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(r=i=>i.message){let i={},n=[];for(let s of this.issues)s.path.length>0?(i[s.path[0]]=i[s.path[0]]||[],i[s.path[0]].push(r(s))):n.push(r(s));return{formErrors:n,fieldErrors:i}}get formErrors(){return this.flatten()}}return t.create=e=>new t(e),t})(),Pd=(t,e)=>{let r;switch(t.code){case Mt.invalid_type:t.received===Yt.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Mt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,hi.jsonStringifyReplacer)}`;break;case Mt.unrecognized_keys:r=`Unrecognized key(s) in object: ${hi.joinValues(t.keys,", ")}`;break;case Mt.invalid_union:r="Invalid input";break;case Mt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${hi.joinValues(t.options)}`;break;case Mt.invalid_enum_value:r=`Invalid enum value. Expected ${hi.joinValues(t.options)}, received '${t.received}'`;break;case Mt.invalid_arguments:r="Invalid function arguments";break;case Mt.invalid_return_type:r="Invalid function return type";break;case Mt.invalid_date:r="Invalid date";break;case Mt.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:hi.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Mt.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Mt.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Mt.custom:r="Invalid input";break;case Mt.invalid_intersection_types:r="Intersection results could not be merged";break;case Mt.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Mt.not_finite:r="Number must be finite";break;default:r=e.defaultError,hi.assertNever(t)}return{message:r}},QU=Pd;function sCt(t){QU=t}function Bb(){return QU}var Db=t=>{let{data:e,path:r,errorMaps:i,issueData:n}=t,s=[...r,...n.path||[]],a=Q(x({},n),{path:s});if(n.message!==void 0)return Q(x({},n),{path:s,message:n.message});let o="",l=i.filter(c=>!!c).slice().reverse();for(let c of l)o=c(a,{data:e,defaultError:o}).message;return Q(x({},n),{path:s,message:o})},aCt=[];function Xt(t,e){let r=Bb(),i=Db({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Pd?void 0:Pd].filter(n=>!!n)});t.common.issues.push(i)}var Hn=class tH{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let i=[];for(let n of r){if(n.status==="aborted")return Ce;n.status==="dirty"&&e.dirty(),i.push(n.value)}return{status:e.value,value:i}}static mergeObjectAsync(e,r){return Dt(this,null,function*(){let i=[];for(let n of r){let s=yield n.key,a=yield n.value;i.push({key:s,value:a})}return tH.mergeObjectSync(e,i)})}static mergeObjectSync(e,r){let i={};for(let n of r){let{key:s,value:a}=n;if(s.status==="aborted"||a.status==="aborted")return Ce;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value<"u"||n.alwaysSet)&&(i[s.value]=a.value)}return{status:e.value,value:i}}},Ce=Object.freeze({status:"aborted"}),Lb=t=>({status:"dirty",value:t}),kn=t=>({status:"valid",value:t}),mk=t=>t.status==="aborted",fk=t=>t.status==="dirty",uf=t=>t.status==="valid",hf=t=>typeof Promise<"u"&&t instanceof Promise;function Nb(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)}function eH(t,e,r,i,n){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?n.call(t,r):n?n.value=r:e.set(t,r),r}var de=function(t){return t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message,t}(de||{}),wm,xm,Qa=class{constructor(t,e,r,i){this._cachedPath=[],this.parent=t,this.data=e,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ZB=(t,e)=>{if(uf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Fo(t.common.issues);return this._error=r,this._error}}};function Be(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:i,description:n}=t;if(e&&(r||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(s,a)=>{var o,l;let{message:c}=t;return s.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:(o=c??i)!==null&&o!==void 0?o:a.defaultError}:s.code!=="invalid_type"?{message:a.defaultError}:{message:(l=c??r)!==null&&l!==void 0?l:a.defaultError}},description:n}}var Fe=class{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return Vl(t.data)}_getOrReturnCtx(t,e){return e||{common:t.parent.common,data:t.data,parsedType:Vl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Hn,ctx:{common:t.parent.common,data:t.data,parsedType:Vl(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){let e=this._parse(t);if(hf(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(t){let e=this._parse(t);return Promise.resolve(e)}parse(t,e){let r=this.safeParse(t,e);if(r.success)return r.data;throw r.error}safeParse(t,e){var r;let i={common:{issues:[],async:(r=e?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:e?.errorMap},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Vl(t)},n=this._parseSync({data:t,path:i.path,parent:i});return ZB(i,n)}parseAsync(t,e){return Dt(this,null,function*(){let r=yield this.safeParseAsync(t,e);if(r.success)return r.data;throw r.error})}safeParseAsync(t,e){return Dt(this,null,function*(){let r={common:{issues:[],contextualErrorMap:e?.errorMap,async:!0},path:e?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Vl(t)},i=this._parse({data:t,path:r.path,parent:r}),n=yield hf(i)?i:Promise.resolve(i);return ZB(r,n)})}refine(t,e){let r=i=>typeof e=="string"||typeof e>"u"?{message:e}:typeof e=="function"?e(i):e;return this._refinement((i,n)=>{let s=t(i),a=()=>n.addIssue(x({code:Mt.custom},r(i)));return typeof Promise<"u"&&s instanceof Promise?s.then(o=>o?!0:(a(),!1)):s?!0:(a(),!1)})}refinement(t,e){return this._refinement((r,i)=>t(r)?!0:(i.addIssue(typeof e=="function"?e(r,i):e),!1))}_refinement(t){return new Lu({schema:this,typeName:we.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return Kl.create(this,this._def)}nullable(){return Bd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return df.create(this,this._def)}promise(){return r0.create(this,this._def)}or(t){return OE.create([this,t],this._def)}and(t){return PE.create(this,t,this._def)}transform(t){return new Lu(Q(x({},Be(this._def)),{schema:this,typeName:we.ZodEffects,effect:{type:"transform",transform:t}}))}default(t){let e=typeof t=="function"?t:()=>t;return new BE(Q(x({},Be(this._def)),{innerType:this,defaultValue:e,typeName:we.ZodDefault}))}brand(){return new LE(x({typeName:we.ZodBranded,type:this},Be(this._def)))}catch(t){let e=typeof t=="function"?t:()=>t;return new DE(Q(x({},Be(this._def)),{innerType:this,catchValue:e,typeName:we.ZodCatch}))}describe(t){let e=this.constructor;return new e(Q(x({},this._def),{description:t}))}pipe(t){return NE.create(this,t)}readonly(){return FE.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},oCt=/^c[^\s-]{8,}$/i,lCt=/^[0-9a-z]+$/,cCt=/^[0-9A-HJKMNP-TV-Z]{26}$/,uCt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,hCt=/^[a-z0-9_-]{21}$/i,dCt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,pCt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,mCt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",E1,fCt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,gCt=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,vCt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,iH="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",_Ct=new RegExp(`^${iH}$`);function rH(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function bCt(t){return new RegExp(`^${rH(t)}$`)}function nH(t){let e=`${iH}T${rH(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function yCt(t,e){return!!((e==="v4"||!e)&&fCt.test(t)||(e==="v6"||!e)&&gCt.test(t))}var i0=(()=>{class t extends Fe{_parse(r){if(this._def.coerce&&(r.data=String(r.data)),this._getType(r)!==Yt.string){let s=this._getOrReturnCtx(r);return Xt(s,{code:Mt.invalid_type,expected:Yt.string,received:s.parsedType}),Ce}let i=new Hn,n;for(let s of this._def.checks)if(s.kind==="min")r.data.length<s.value&&(n=this._getOrReturnCtx(r,n),Xt(n,{code:Mt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")r.data.length>s.value&&(n=this._getOrReturnCtx(r,n),Xt(n,{code:Mt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){let a=r.data.length>s.value,o=r.data.length<s.value;(a||o)&&(n=this._getOrReturnCtx(r,n),a?Xt(n,{code:Mt.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&Xt(n,{code:Mt.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")pCt.test(r.data)||(n=this._getOrReturnCtx(r,n),Xt(n,{validation:"email",code:Mt.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")E1||(E1=new RegExp(mCt,"u")),E1.test(r.data)||(n=this._getOrReturnCtx(r,n),Xt(n,{validation:"emoji",code:Mt.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")uCt.test(r.data)||(n=this._getOrReturnCtx(r,n),Xt(n,{validation:"uuid",code:Mt.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")hCt.test(r.data)||(n=this._getOrReturnCtx(r,n),Xt(n,{validation:"nanoid",code:Mt.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")oCt.test(r.data)||(n=this._getOrReturnCtx(r,n),Xt(n,{validation:"cuid",code:Mt.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")lCt.test(r.data)||(n=this._getOrReturnCtx(r,n),Xt(n,{validation:"cuid2",code:Mt.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")cCt.test(r.data)||(n=this._getOrReturnCtx(r,n),Xt(n,{validation:"ulid",code:Mt.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(r.data)}catch{n=this._getOrReturnCtx(r,n),Xt(n,{validation:"url",code:Mt.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(r.data)||(n=this._getOrReturnCtx(r,n),Xt(n,{validation:"regex",code:Mt.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?r.data=r.data.trim():s.kind==="includes"?r.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(r,n),Xt(n,{code:Mt.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?r.data=r.data.toLowerCase():s.kind==="toUpperCase"?r.data=r.data.toUpperCase():s.kind==="startsWith"?r.data.startsWith(s.value)||(n=this._getOrReturnCtx(r,n),Xt(n,{code:Mt.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?r.data.endsWith(s.value)||(n=this._getOrReturnCtx(r,n),Xt(n,{code:Mt.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?nH(s).test(r.data)||(n=this._getOrReturnCtx(r,n),Xt(n,{code:Mt.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?_Ct.test(r.data)||(n=this._getOrReturnCtx(r,n),Xt(n,{code:Mt.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?bCt(s).test(r.data)||(n=this._getOrReturnCtx(r,n),Xt(n,{code:Mt.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?dCt.test(r.data)||(n=this._getOrReturnCtx(r,n),Xt(n,{validation:"duration",code:Mt.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?yCt(r.data,s.version)||(n=this._getOrReturnCtx(r,n),Xt(n,{validation:"ip",code:Mt.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?vCt.test(r.data)||(n=this._getOrReturnCtx(r,n),Xt(n,{validation:"base64",code:Mt.invalid_string,message:s.message}),i.dirty()):hi.assertNever(s);return{status:i.value,value:r.data}}_regex(r,i,n){return this.refinement(s=>r.test(s),x({validation:i,code:Mt.invalid_string},de.errToObj(n)))}_addCheck(r){return new t(Q(x({},this._def),{checks:[...this._def.checks,r]}))}email(r){return this._addCheck(x({kind:"email"},de.errToObj(r)))}url(r){return this._addCheck(x({kind:"url"},de.errToObj(r)))}emoji(r){return this._addCheck(x({kind:"emoji"},de.errToObj(r)))}uuid(r){return this._addCheck(x({kind:"uuid"},de.errToObj(r)))}nanoid(r){return this._addCheck(x({kind:"nanoid"},de.errToObj(r)))}cuid(r){return this._addCheck(x({kind:"cuid"},de.errToObj(r)))}cuid2(r){return this._addCheck(x({kind:"cuid2"},de.errToObj(r)))}ulid(r){return this._addCheck(x({kind:"ulid"},de.errToObj(r)))}base64(r){return this._addCheck(x({kind:"base64"},de.errToObj(r)))}ip(r){return this._addCheck(x({kind:"ip"},de.errToObj(r)))}datetime(r){var i,n;return typeof r=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:r}):this._addCheck(x({kind:"datetime",precision:typeof r?.precision>"u"?null:r?.precision,offset:(i=r?.offset)!==null&&i!==void 0?i:!1,local:(n=r?.local)!==null&&n!==void 0?n:!1},de.errToObj(r?.message)))}date(r){return this._addCheck({kind:"date",message:r})}time(r){return typeof r=="string"?this._addCheck({kind:"time",precision:null,message:r}):this._addCheck(x({kind:"time",precision:typeof r?.precision>"u"?null:r?.precision},de.errToObj(r?.message)))}duration(r){return this._addCheck(x({kind:"duration"},de.errToObj(r)))}regex(r,i){return this._addCheck(x({kind:"regex",regex:r},de.errToObj(i)))}includes(r,i){return this._addCheck(x({kind:"includes",value:r,position:i?.position},de.errToObj(i?.message)))}startsWith(r,i){return this._addCheck(x({kind:"startsWith",value:r},de.errToObj(i)))}endsWith(r,i){return this._addCheck(x({kind:"endsWith",value:r},de.errToObj(i)))}min(r,i){return this._addCheck(x({kind:"min",value:r},de.errToObj(i)))}max(r,i){return this._addCheck(x({kind:"max",value:r},de.errToObj(i)))}length(r,i){return this._addCheck(x({kind:"length",value:r},de.errToObj(i)))}nonempty(r){return this.min(1,de.errToObj(r))}trim(){return new t(Q(x({},this._def),{checks:[...this._def.checks,{kind:"trim"}]}))}toLowerCase(){return new t(Q(x({},this._def),{checks:[...this._def.checks,{kind:"toLowerCase"}]}))}toUpperCase(){return new t(Q(x({},this._def),{checks:[...this._def.checks,{kind:"toUpperCase"}]}))}get isDatetime(){return!!this._def.checks.find(r=>r.kind==="datetime")}get isDate(){return!!this._def.checks.find(r=>r.kind==="date")}get isTime(){return!!this._def.checks.find(r=>r.kind==="time")}get isDuration(){return!!this._def.checks.find(r=>r.kind==="duration")}get isEmail(){return!!this._def.checks.find(r=>r.kind==="email")}get isURL(){return!!this._def.checks.find(r=>r.kind==="url")}get isEmoji(){return!!this._def.checks.find(r=>r.kind==="emoji")}get isUUID(){return!!this._def.checks.find(r=>r.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(r=>r.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(r=>r.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(r=>r.kind==="cuid2")}get isULID(){return!!this._def.checks.find(r=>r.kind==="ulid")}get isIP(){return!!this._def.checks.find(r=>r.kind==="ip")}get isBase64(){return!!this._def.checks.find(r=>r.kind==="base64")}get minLength(){let r=null;for(let i of this._def.checks)i.kind==="min"&&(r===null||i.value>r)&&(r=i.value);return r}get maxLength(){let r=null;for(let i of this._def.checks)i.kind==="max"&&(r===null||i.value<r)&&(r=i.value);return r}}return t.create=e=>{var r;return new t(x({checks:[],typeName:we.ZodString,coerce:(r=e?.coerce)!==null&&r!==void 0?r:!1},Be(e)))},t})();function wCt(t,e){let r=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,n=r>i?r:i,s=parseInt(t.toFixed(n).replace(".","")),a=parseInt(e.toFixed(n).replace(".",""));return s%a/Math.pow(10,n)}var kE=(()=>{class t extends Fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(r){if(this._def.coerce&&(r.data=Number(r.data)),this._getType(r)!==Yt.number){let s=this._getOrReturnCtx(r);return Xt(s,{code:Mt.invalid_type,expected:Yt.number,received:s.parsedType}),Ce}let i,n=new Hn;for(let s of this._def.checks)s.kind==="int"?hi.isInteger(r.data)||(i=this._getOrReturnCtx(r,i),Xt(i,{code:Mt.invalid_type,expected:"integer",received:"float",message:s.message}),n.dirty()):s.kind==="min"?(s.inclusive?r.data<s.value:r.data<=s.value)&&(i=this._getOrReturnCtx(r,i),Xt(i,{code:Mt.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?r.data>s.value:r.data>=s.value)&&(i=this._getOrReturnCtx(r,i),Xt(i,{code:Mt.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="multipleOf"?wCt(r.data,s.value)!==0&&(i=this._getOrReturnCtx(r,i),Xt(i,{code:Mt.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):s.kind==="finite"?Number.isFinite(r.data)||(i=this._getOrReturnCtx(r,i),Xt(i,{code:Mt.not_finite,message:s.message}),n.dirty()):hi.assertNever(s);return{status:n.value,value:r.data}}gte(r,i){return this.setLimit("min",r,!0,de.toString(i))}gt(r,i){return this.setLimit("min",r,!1,de.toString(i))}lte(r,i){return this.setLimit("max",r,!0,de.toString(i))}lt(r,i){return this.setLimit("max",r,!1,de.toString(i))}setLimit(r,i,n,s){return new t(Q(x({},this._def),{checks:[...this._def.checks,{kind:r,value:i,inclusive:n,message:de.toString(s)}]}))}_addCheck(r){return new t(Q(x({},this._def),{checks:[...this._def.checks,r]}))}int(r){return this._addCheck({kind:"int",message:de.toString(r)})}positive(r){return this._addCheck({kind:"min",value:0,inclusive:!1,message:de.toString(r)})}negative(r){return this._addCheck({kind:"max",value:0,inclusive:!1,message:de.toString(r)})}nonpositive(r){return this._addCheck({kind:"max",value:0,inclusive:!0,message:de.toString(r)})}nonnegative(r){return this._addCheck({kind:"min",value:0,inclusive:!0,message:de.toString(r)})}multipleOf(r,i){return this._addCheck({kind:"multipleOf",value:r,message:de.toString(i)})}finite(r){return this._addCheck({kind:"finite",message:de.toString(r)})}safe(r){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:de.toString(r)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:de.toString(r)})}get minValue(){let r=null;for(let i of this._def.checks)i.kind==="min"&&(r===null||i.value>r)&&(r=i.value);return r}get maxValue(){let r=null;for(let i of this._def.checks)i.kind==="max"&&(r===null||i.value<r)&&(r=i.value);return r}get isInt(){return!!this._def.checks.find(r=>r.kind==="int"||r.kind==="multipleOf"&&hi.isInteger(r.value))}get isFinite(){let r=null,i=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(i===null||n.value>i)&&(i=n.value):n.kind==="max"&&(r===null||n.value<r)&&(r=n.value)}return Number.isFinite(i)&&Number.isFinite(r)}}return t.create=e=>new t(x({checks:[],typeName:we.ZodNumber,coerce:e?.coerce||!1},Be(e))),t})(),AE=(()=>{class t extends Fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(r){if(this._def.coerce&&(r.data=BigInt(r.data)),this._getType(r)!==Yt.bigint){let s=this._getOrReturnCtx(r);return Xt(s,{code:Mt.invalid_type,expected:Yt.bigint,received:s.parsedType}),Ce}let i,n=new Hn;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?r.data<s.value:r.data<=s.value)&&(i=this._getOrReturnCtx(r,i),Xt(i,{code:Mt.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?r.data>s.value:r.data>=s.value)&&(i=this._getOrReturnCtx(r,i),Xt(i,{code:Mt.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="multipleOf"?r.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(r,i),Xt(i,{code:Mt.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):hi.assertNever(s);return{status:n.value,value:r.data}}gte(r,i){return this.setLimit("min",r,!0,de.toString(i))}gt(r,i){return this.setLimit("min",r,!1,de.toString(i))}lte(r,i){return this.setLimit("max",r,!0,de.toString(i))}lt(r,i){return this.setLimit("max",r,!1,de.toString(i))}setLimit(r,i,n,s){return new t(Q(x({},this._def),{checks:[...this._def.checks,{kind:r,value:i,inclusive:n,message:de.toString(s)}]}))}_addCheck(r){return new t(Q(x({},this._def),{checks:[...this._def.checks,r]}))}positive(r){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:de.toString(r)})}negative(r){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:de.toString(r)})}nonpositive(r){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:de.toString(r)})}nonnegative(r){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:de.toString(r)})}multipleOf(r,i){return this._addCheck({kind:"multipleOf",value:r,message:de.toString(i)})}get minValue(){let r=null;for(let i of this._def.checks)i.kind==="min"&&(r===null||i.value>r)&&(r=i.value);return r}get maxValue(){let r=null;for(let i of this._def.checks)i.kind==="max"&&(r===null||i.value<r)&&(r=i.value);return r}}return t.create=e=>{var r;return new t(x({checks:[],typeName:we.ZodBigInt,coerce:(r=e?.coerce)!==null&&r!==void 0?r:!1},Be(e)))},t})(),SE=(()=>{class t extends Fe{_parse(r){if(this._def.coerce&&(r.data=!!r.data),this._getType(r)!==Yt.boolean){let i=this._getOrReturnCtx(r);return Xt(i,{code:Mt.invalid_type,expected:Yt.boolean,received:i.parsedType}),Ce}return kn(r.data)}}return t.create=e=>new t(x({typeName:we.ZodBoolean,coerce:e?.coerce||!1},Be(e))),t})(),EE=(()=>{class t extends Fe{_parse(r){if(this._def.coerce&&(r.data=new Date(r.data)),this._getType(r)!==Yt.date){let s=this._getOrReturnCtx(r);return Xt(s,{code:Mt.invalid_type,expected:Yt.date,received:s.parsedType}),Ce}if(isNaN(r.data.getTime())){let s=this._getOrReturnCtx(r);return Xt(s,{code:Mt.invalid_date}),Ce}let i=new Hn,n;for(let s of this._def.checks)s.kind==="min"?r.data.getTime()<s.value&&(n=this._getOrReturnCtx(r,n),Xt(n,{code:Mt.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?r.data.getTime()>s.value&&(n=this._getOrReturnCtx(r,n),Xt(n,{code:Mt.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):hi.assertNever(s);return{status:i.value,value:new Date(r.data.getTime())}}_addCheck(r){return new t(Q(x({},this._def),{checks:[...this._def.checks,r]}))}min(r,i){return this._addCheck({kind:"min",value:r.getTime(),message:de.toString(i)})}max(r,i){return this._addCheck({kind:"max",value:r.getTime(),message:de.toString(i)})}get minDate(){let r=null;for(let i of this._def.checks)i.kind==="min"&&(r===null||i.value>r)&&(r=i.value);return r!=null?new Date(r):null}get maxDate(){let r=null;for(let i of this._def.checks)i.kind==="max"&&(r===null||i.value<r)&&(r=i.value);return r!=null?new Date(r):null}}return t.create=e=>new t(x({checks:[],coerce:e?.coerce||!1,typeName:we.ZodDate},Be(e))),t})(),sH=(()=>{class t extends Fe{_parse(r){if(this._getType(r)!==Yt.symbol){let i=this._getOrReturnCtx(r);return Xt(i,{code:Mt.invalid_type,expected:Yt.symbol,received:i.parsedType}),Ce}return kn(r.data)}}return t.create=e=>new t(x({typeName:we.ZodSymbol},Be(e))),t})(),TE=(()=>{class t extends Fe{_parse(r){if(this._getType(r)!==Yt.undefined){let i=this._getOrReturnCtx(r);return Xt(i,{code:Mt.invalid_type,expected:Yt.undefined,received:i.parsedType}),Ce}return kn(r.data)}}return t.create=e=>new t(x({typeName:we.ZodUndefined},Be(e))),t})(),IE=(()=>{class t extends Fe{_parse(r){if(this._getType(r)!==Yt.null){let i=this._getOrReturnCtx(r);return Xt(i,{code:Mt.invalid_type,expected:Yt.null,received:i.parsedType}),Ce}return kn(r.data)}}return t.create=e=>new t(x({typeName:we.ZodNull},Be(e))),t})(),Fb=(()=>{class t extends Fe{constructor(){super(...arguments),this._any=!0}_parse(r){return kn(r.data)}}return t.create=e=>new t(x({typeName:we.ZodAny},Be(e))),t})(),Lm=(()=>{class t extends Fe{constructor(){super(...arguments),this._unknown=!0}_parse(r){return kn(r.data)}}return t.create=e=>new t(x({typeName:we.ZodUnknown},Be(e))),t})(),ou=(()=>{class t extends Fe{_parse(r){let i=this._getOrReturnCtx(r);return Xt(i,{code:Mt.invalid_type,expected:Yt.never,received:i.parsedType}),Ce}}return t.create=e=>new t(x({typeName:we.ZodNever},Be(e))),t})(),aH=(()=>{class t extends Fe{_parse(r){if(this._getType(r)!==Yt.undefined){let i=this._getOrReturnCtx(r);return Xt(i,{code:Mt.invalid_type,expected:Yt.void,received:i.parsedType}),Ce}return kn(r.data)}}return t.create=e=>new t(x({typeName:we.ZodVoid},Be(e))),t})(),df=(()=>{class t extends Fe{_parse(r){let{ctx:i,status:n}=this._processInputParams(r),s=this._def;if(i.parsedType!==Yt.array)return Xt(i,{code:Mt.invalid_type,expected:Yt.array,received:i.parsedType}),Ce;if(s.exactLength!==null){let o=i.data.length>s.exactLength.value,l=i.data.length<s.exactLength.value;(o||l)&&(Xt(i,{code:o?Mt.too_big:Mt.too_small,minimum:l?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&i.data.length<s.minLength.value&&(Xt(i,{code:Mt.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&i.data.length>s.maxLength.value&&(Xt(i,{code:Mt.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),i.common.async)return Promise.all([...i.data].map((o,l)=>s.type._parseAsync(new Qa(i,o,i.path,l)))).then(o=>Hn.mergeArray(n,o));let a=[...i.data].map((o,l)=>s.type._parseSync(new Qa(i,o,i.path,l)));return Hn.mergeArray(n,a)}get element(){return this._def.type}min(r,i){return new t(Q(x({},this._def),{minLength:{value:r,message:de.toString(i)}}))}max(r,i){return new t(Q(x({},this._def),{maxLength:{value:r,message:de.toString(i)}}))}length(r,i){return new t(Q(x({},this._def),{exactLength:{value:r,message:de.toString(i)}}))}nonempty(r){return this.min(1,r)}}return t.create=(e,r)=>new t(x({type:e,minLength:null,maxLength:null,exactLength:null,typeName:we.ZodArray},Be(r))),t})();function Xh(t){if(t instanceof Md){let e={};for(let r in t.shape){let i=t.shape[r];e[r]=Kl.create(Xh(i))}return new Md(Q(x({},t._def),{shape:()=>e}))}else return t instanceof df?new df(Q(x({},t._def),{type:Xh(t.element)})):t instanceof Kl?Kl.create(Xh(t.unwrap())):t instanceof Bd?Bd.create(Xh(t.unwrap())):t instanceof Rd?Rd.create(t.items.map(e=>Xh(e))):t}var Md=(()=>{class t extends Fe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let r=this._def.shape(),i=hi.objectKeys(r);return this._cached={shape:r,keys:i}}_parse(r){if(this._getType(r)!==Yt.object){let c=this._getOrReturnCtx(r);return Xt(c,{code:Mt.invalid_type,expected:Yt.object,received:c.parsedType}),Ce}let{status:i,ctx:n}=this._processInputParams(r),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof ou&&this._def.unknownKeys==="strip"))for(let c in n.data)a.includes(c)||o.push(c);let l=[];for(let c of a){let h=s[c],p=n.data[c];l.push({key:{status:"valid",value:c},value:h._parse(new Qa(n,p,n.path,c)),alwaysSet:c in n.data})}if(this._def.catchall instanceof ou){let c=this._def.unknownKeys;if(c==="passthrough")for(let h of o)l.push({key:{status:"valid",value:h},value:{status:"valid",value:n.data[h]}});else if(c==="strict")o.length>0&&(Xt(n,{code:Mt.unrecognized_keys,keys:o}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let c=this._def.catchall;for(let h of o){let p=n.data[h];l.push({key:{status:"valid",value:h},value:c._parse(new Qa(n,p,n.path,h)),alwaysSet:h in n.data})}}return n.common.async?Promise.resolve().then(()=>Dt(this,null,function*(){let c=[];for(let h of l){let p=yield h.key,m=yield h.value;c.push({key:p,value:m,alwaysSet:h.alwaysSet})}return c})).then(c=>Hn.mergeObjectSync(i,c)):Hn.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(r){return de.errToObj,new t(x(Q(x({},this._def),{unknownKeys:"strict"}),r!==void 0?{errorMap:(i,n)=>{var s,a,o,l;let c=(o=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,i,n).message)!==null&&o!==void 0?o:n.defaultError;return i.code==="unrecognized_keys"?{message:(l=de.errToObj(r).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}))}strip(){return new t(Q(x({},this._def),{unknownKeys:"strip"}))}passthrough(){return new t(Q(x({},this._def),{unknownKeys:"passthrough"}))}extend(r){return new t(Q(x({},this._def),{shape:()=>x(x({},this._def.shape()),r)}))}merge(r){return new t({unknownKeys:r._def.unknownKeys,catchall:r._def.catchall,shape:()=>x(x({},this._def.shape()),r._def.shape()),typeName:we.ZodObject})}setKey(r,i){return this.augment({[r]:i})}catchall(r){return new t(Q(x({},this._def),{catchall:r}))}pick(r){let i={};return hi.objectKeys(r).forEach(n=>{r[n]&&this.shape[n]&&(i[n]=this.shape[n])}),new t(Q(x({},this._def),{shape:()=>i}))}omit(r){let i={};return hi.objectKeys(this.shape).forEach(n=>{r[n]||(i[n]=this.shape[n])}),new t(Q(x({},this._def),{shape:()=>i}))}deepPartial(){return Xh(this)}partial(r){let i={};return hi.objectKeys(this.shape).forEach(n=>{let s=this.shape[n];r&&!r[n]?i[n]=s:i[n]=s.optional()}),new t(Q(x({},this._def),{shape:()=>i}))}required(r){let i={};return hi.objectKeys(this.shape).forEach(n=>{if(r&&!r[n])i[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof Kl;)s=s._def.innerType;i[n]=s}}),new t(Q(x({},this._def),{shape:()=>i}))}keyof(){return pH(hi.objectKeys(this.shape))}}return t.create=(e,r)=>new t(x({shape:()=>e,unknownKeys:"strip",catchall:ou.create(),typeName:we.ZodObject},Be(r))),t.strictCreate=(e,r)=>new t(x({shape:()=>e,unknownKeys:"strict",catchall:ou.create(),typeName:we.ZodObject},Be(r))),t.lazycreate=(e,r)=>new t(x({shape:e,unknownKeys:"strip",catchall:ou.create(),typeName:we.ZodObject},Be(r))),t})(),OE=(()=>{class t extends Fe{_parse(r){let{ctx:i}=this._processInputParams(r),n=this._def.options;function s(a){for(let l of a)if(l.result.status==="valid")return l.result;for(let l of a)if(l.result.status==="dirty")return i.common.issues.push(...l.ctx.common.issues),l.result;let o=a.map(l=>new Fo(l.ctx.common.issues));return Xt(i,{code:Mt.invalid_union,unionErrors:o}),Ce}if(i.common.async)return Promise.all(n.map(a=>Dt(this,null,function*(){let o=Q(x({},i),{common:Q(x({},i.common),{issues:[]}),parent:null});return{result:yield a._parseAsync({data:i.data,path:i.path,parent:o}),ctx:o}}))).then(s);{let a,o=[];for(let c of n){let h=Q(x({},i),{common:Q(x({},i.common),{issues:[]}),parent:null}),p=c._parseSync({data:i.data,path:i.path,parent:h});if(p.status==="valid")return p;p.status==="dirty"&&!a&&(a={result:p,ctx:h}),h.common.issues.length&&o.push(h.common.issues)}if(a)return i.common.issues.push(...a.ctx.common.issues),a.result;let l=o.map(c=>new Fo(c));return Xt(i,{code:Mt.invalid_union,unionErrors:l}),Ce}}get options(){return this._def.options}}return t.create=(e,r)=>new t(x({options:e,typeName:we.ZodUnion},Be(r))),t})(),Ll=t=>t instanceof ME?Ll(t.schema):t instanceof Lu?Ll(t.innerType()):t instanceof RE?[t.value]:t instanceof qf?t.options:t instanceof pf?hi.objectValues(t.enum):t instanceof BE?Ll(t._def.innerType):t instanceof TE?[void 0]:t instanceof IE?[null]:t instanceof Kl?[void 0,...Ll(t.unwrap())]:t instanceof Bd?[null,...Ll(t.unwrap())]:t instanceof LE||t instanceof FE?Ll(t.unwrap()):t instanceof DE?Ll(t._def.innerType):[],oH=class lH extends Fe{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Yt.object)return Xt(r,{code:Mt.invalid_type,expected:Yt.object,received:r.parsedType}),Ce;let i=this.discriminator,n=r.data[i],s=this.optionsMap.get(n);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(Xt(r,{code:Mt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Ce)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,i){let n=new Map;for(let s of r){let a=Ll(s.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of a){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,s)}}return new lH(x({typeName:we.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:n},Be(i)))}};function gk(t,e){let r=Vl(t),i=Vl(e);if(t===e)return{valid:!0,data:t};if(r===Yt.object&&i===Yt.object){let n=hi.objectKeys(e),s=hi.objectKeys(t).filter(o=>n.indexOf(o)!==-1),a=x(x({},t),e);for(let o of s){let l=gk(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(r===Yt.array&&i===Yt.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let s=0;s<t.length;s++){let a=t[s],o=e[s],l=gk(a,o);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return r===Yt.date&&i===Yt.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var PE=(()=>{class t extends Fe{_parse(r){let{status:i,ctx:n}=this._processInputParams(r),s=(a,o)=>{if(mk(a)||mk(o))return Ce;let l=gk(a.value,o.value);return l.valid?((fk(a)||fk(o))&&i.dirty(),{status:i.value,value:l.data}):(Xt(n,{code:Mt.invalid_intersection_types}),Ce)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>s(a,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}return t.create=(e,r,i)=>new t(x({left:e,right:r,typeName:we.ZodIntersection},Be(i))),t})(),Rd=(()=>{class t extends Fe{_parse(r){let{status:i,ctx:n}=this._processInputParams(r);if(n.parsedType!==Yt.array)return Xt(n,{code:Mt.invalid_type,expected:Yt.array,received:n.parsedType}),Ce;if(n.data.length<this._def.items.length)return Xt(n,{code:Mt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ce;!this._def.rest&&n.data.length>this._def.items.length&&(Xt(n,{code:Mt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),i.dirty());let s=[...n.data].map((a,o)=>{let l=this._def.items[o]||this._def.rest;return l?l._parse(new Qa(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(s).then(a=>Hn.mergeArray(i,a)):Hn.mergeArray(i,s)}get items(){return this._def.items}rest(r){return new t(Q(x({},this._def),{rest:r}))}}return t.create=(e,r)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new t(x({items:e,typeName:we.ZodTuple,rest:null},Be(r)))},t})(),cH=class vk extends Fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:i}=this._processInputParams(e);if(i.parsedType!==Yt.object)return Xt(i,{code:Mt.invalid_type,expected:Yt.object,received:i.parsedType}),Ce;let n=[],s=this._def.keyType,a=this._def.valueType;for(let o in i.data)n.push({key:s._parse(new Qa(i,o,i.path,o)),value:a._parse(new Qa(i,i.data[o],i.path,o)),alwaysSet:o in i.data});return i.common.async?Hn.mergeObjectAsync(r,n):Hn.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(e,r,i){return r instanceof Fe?new vk(x({keyType:e,valueType:r,typeName:we.ZodRecord},Be(i))):new vk(x({keyType:i0.create(),valueType:e,typeName:we.ZodRecord},Be(r)))}},uH=(()=>{class t extends Fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(r){let{status:i,ctx:n}=this._processInputParams(r);if(n.parsedType!==Yt.map)return Xt(n,{code:Mt.invalid_type,expected:Yt.map,received:n.parsedType}),Ce;let s=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([l,c],h)=>({key:s._parse(new Qa(n,l,n.path,[h,"key"])),value:a._parse(new Qa(n,c,n.path,[h,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(()=>Dt(this,null,function*(){for(let c of o){let h=yield c.key,p=yield c.value;if(h.status==="aborted"||p.status==="aborted")return Ce;(h.status==="dirty"||p.status==="dirty")&&i.dirty(),l.set(h.value,p.value)}return{status:i.value,value:l}}))}else{let l=new Map;for(let c of o){let h=c.key,p=c.value;if(h.status==="aborted"||p.status==="aborted")return Ce;(h.status==="dirty"||p.status==="dirty")&&i.dirty(),l.set(h.value,p.value)}return{status:i.value,value:l}}}}return t.create=(e,r,i)=>new t(x({valueType:r,keyType:e,typeName:we.ZodMap},Be(i))),t})(),hH=(()=>{class t extends Fe{_parse(r){let{status:i,ctx:n}=this._processInputParams(r);if(n.parsedType!==Yt.set)return Xt(n,{code:Mt.invalid_type,expected:Yt.set,received:n.parsedType}),Ce;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(Xt(n,{code:Mt.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),i.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(Xt(n,{code:Mt.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),i.dirty());let a=this._def.valueType;function o(c){let h=new Set;for(let p of c){if(p.status==="aborted")return Ce;p.status==="dirty"&&i.dirty(),h.add(p.value)}return{status:i.value,value:h}}let l=[...n.data.values()].map((c,h)=>a._parse(new Qa(n,c,n.path,h)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(r,i){return new t(Q(x({},this._def),{minSize:{value:r,message:de.toString(i)}}))}max(r,i){return new t(Q(x({},this._def),{maxSize:{value:r,message:de.toString(i)}}))}size(r,i){return this.min(r,i).max(r,i)}nonempty(r){return this.min(1,r)}}return t.create=(e,r)=>new t(x({valueType:e,minSize:null,maxSize:null,typeName:we.ZodSet},Be(r))),t})(),dH=class B_ extends Fe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Yt.function)return Xt(r,{code:Mt.invalid_type,expected:Yt.function,received:r.parsedType}),Ce;function i(o,l){return Db({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Bb(),Pd].filter(c=>!!c),issueData:{code:Mt.invalid_arguments,argumentsError:l}})}function n(o,l){return Db({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Bb(),Pd].filter(c=>!!c),issueData:{code:Mt.invalid_return_type,returnTypeError:l}})}let s={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof r0){let o=this;return kn(function(...l){return Dt(this,null,function*(){let c=new Fo([]),h=yield o._def.args.parseAsync(l,s).catch(m=>{throw c.addIssue(i(l,m)),c}),p=yield Reflect.apply(a,this,h);return yield o._def.returns._def.type.parseAsync(p,s).catch(m=>{throw c.addIssue(n(p,m)),c})})})}else{let o=this;return kn(function(...l){let c=o._def.args.safeParse(l,s);if(!c.success)throw new Fo([i(l,c.error)]);let h=Reflect.apply(a,this,c.data),p=o._def.returns.safeParse(h,s);if(!p.success)throw new Fo([n(h,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new B_(Q(x({},this._def),{args:Rd.create(e).rest(Lm.create())}))}returns(e){return new B_(Q(x({},this._def),{returns:e}))}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,i){return new B_(x({args:e||Rd.create([]).rest(Lm.create()),returns:r||Lm.create(),typeName:we.ZodFunction},Be(i)))}},ME=(()=>{class t extends Fe{get schema(){return this._def.getter()}_parse(r){let{ctx:i}=this._processInputParams(r);return this._def.getter()._parse({data:i.data,path:i.path,parent:i})}}return t.create=(e,r)=>new t(x({getter:e,typeName:we.ZodLazy},Be(r))),t})(),RE=(()=>{class t extends Fe{_parse(r){if(r.data!==this._def.value){let i=this._getOrReturnCtx(r);return Xt(i,{received:i.data,code:Mt.invalid_literal,expected:this._def.value}),Ce}return{status:"valid",value:r.data}}get value(){return this._def.value}}return t.create=(e,r)=>new t(x({value:e,typeName:we.ZodLiteral},Be(r))),t})();function pH(t,e){return new qf(x({values:t,typeName:we.ZodEnum},Be(e)))}var qf=class _k extends Fe{constructor(){super(...arguments),wm.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),i=this._def.values;return Xt(r,{expected:hi.joinValues(i),received:r.parsedType,code:Mt.invalid_type}),Ce}if(Nb(this,wm,"f")||eH(this,wm,new Set(this._def.values),"f"),!Nb(this,wm,"f").has(e.data)){let r=this._getOrReturnCtx(e),i=this._def.values;return Xt(r,{received:r.data,code:Mt.invalid_enum_value,options:i}),Ce}return kn(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return _k.create(e,x(x({},this._def),r))}exclude(e,r=this._def){return _k.create(this.options.filter(i=>!e.includes(i)),x(x({},this._def),r))}};wm=new WeakMap;qf.create=pH;var pf=class extends Fe{constructor(){super(...arguments),xm.set(this,void 0)}_parse(t){let e=hi.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==Yt.string&&r.parsedType!==Yt.number){let i=hi.objectValues(e);return Xt(r,{expected:hi.joinValues(i),received:r.parsedType,code:Mt.invalid_type}),Ce}if(Nb(this,xm,"f")||eH(this,xm,new Set(hi.getValidEnumValues(this._def.values)),"f"),!Nb(this,xm,"f").has(t.data)){let i=hi.objectValues(e);return Xt(r,{received:r.data,code:Mt.invalid_enum_value,options:i}),Ce}return kn(t.data)}get enum(){return this._def.values}};xm=new WeakMap;pf.create=(t,e)=>new pf(x({values:t,typeName:we.ZodNativeEnum},Be(e)));var r0=(()=>{class t extends Fe{unwrap(){return this._def.type}_parse(r){let{ctx:i}=this._processInputParams(r);if(i.parsedType!==Yt.promise&&i.common.async===!1)return Xt(i,{code:Mt.invalid_type,expected:Yt.promise,received:i.parsedType}),Ce;let n=i.parsedType===Yt.promise?i.data:Promise.resolve(i.data);return kn(n.then(s=>this._def.type.parseAsync(s,{path:i.path,errorMap:i.common.contextualErrorMap})))}}return t.create=(e,r)=>new t(x({type:e,typeName:we.ZodPromise},Be(r))),t})(),Lu=(()=>{class t extends Fe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===we.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(r){let{status:i,ctx:n}=this._processInputParams(r),s=this._def.effect||null,a={addIssue:o=>{Xt(n,o),o.fatal?i.abort():i.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){let o=s.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(l=>Dt(this,null,function*(){if(i.value==="aborted")return Ce;let c=yield this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?Ce:c.status==="dirty"||i.value==="dirty"?Lb(c.value):c}));{if(i.value==="aborted")return Ce;let l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?Ce:l.status==="dirty"||i.value==="dirty"?Lb(l.value):l}}if(s.type==="refinement"){let o=l=>{let c=s.refinement(l,a);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Ce:(l.status==="dirty"&&i.dirty(),o(l.value),{status:i.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Ce:(l.status==="dirty"&&i.dirty(),o(l.value).then(()=>({status:i.value,value:l.value}))))}if(s.type==="transform")if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!uf(o))return o;let l=s.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:i.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>uf(o)?Promise.resolve(s.transform(o.value,a)).then(l=>({status:i.value,value:l})):o);hi.assertNever(s)}}return t.create=(e,r,i)=>new t(x({schema:e,typeName:we.ZodEffects,effect:r},Be(i))),t.createWithPreprocess=(e,r,i)=>new t(x({schema:r,effect:{type:"preprocess",transform:e},typeName:we.ZodEffects},Be(i))),t})(),Kl=(()=>{class t extends Fe{_parse(r){return this._getType(r)===Yt.undefined?kn(void 0):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}}return t.create=(e,r)=>new t(x({innerType:e,typeName:we.ZodOptional},Be(r))),t})(),Bd=(()=>{class t extends Fe{_parse(r){return this._getType(r)===Yt.null?kn(null):this._def.innerType._parse(r)}unwrap(){return this._def.innerType}}return t.create=(e,r)=>new t(x({innerType:e,typeName:we.ZodNullable},Be(r))),t})(),BE=(()=>{class t extends Fe{_parse(r){let{ctx:i}=this._processInputParams(r),n=i.data;return i.parsedType===Yt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:i.path,parent:i})}removeDefault(){return this._def.innerType}}return t.create=(e,r)=>new t(x({innerType:e,typeName:we.ZodDefault,defaultValue:typeof r.default=="function"?r.default:()=>r.default},Be(r))),t})(),DE=(()=>{class t extends Fe{_parse(r){let{ctx:i}=this._processInputParams(r),n=Q(x({},i),{common:Q(x({},i.common),{issues:[]})}),s=this._def.innerType._parse({data:n.data,path:n.path,parent:x({},n)});return hf(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Fo(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Fo(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}return t.create=(e,r)=>new t(x({innerType:e,typeName:we.ZodCatch,catchValue:typeof r.catch=="function"?r.catch:()=>r.catch},Be(r))),t})(),mH=(()=>{class t extends Fe{_parse(r){if(this._getType(r)!==Yt.nan){let i=this._getOrReturnCtx(r);return Xt(i,{code:Mt.invalid_type,expected:Yt.nan,received:i.parsedType}),Ce}return{status:"valid",value:r.data}}}return t.create=e=>new t(x({typeName:we.ZodNaN},Be(e))),t})(),xCt=Symbol("zod_brand"),LE=class extends Fe{_parse(t){let{ctx:e}=this._processInputParams(t),r=e.data;return this._def.type._parse({data:r,path:e.path,parent:e})}unwrap(){return this._def.type}},NE=class fH extends Fe{_parse(e){let{status:r,ctx:i}=this._processInputParams(e);if(i.common.async)return Dt(this,null,function*(){let n=yield this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return n.status==="aborted"?Ce:n.status==="dirty"?(r.dirty(),Lb(n.value)):this._def.out._parseAsync({data:n.value,path:i.path,parent:i})});{let n=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return n.status==="aborted"?Ce:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:i.path,parent:i})}}static create(e,r){return new fH({in:e,out:r,typeName:we.ZodPipeline})}},FE=(()=>{class t extends Fe{_parse(r){let i=this._def.innerType._parse(r),n=s=>(uf(s)&&(s.value=Object.freeze(s.value)),s);return hf(i)?i.then(s=>n(s)):n(i)}unwrap(){return this._def.innerType}}return t.create=(e,r)=>new t(x({innerType:e,typeName:we.ZodReadonly},Be(r))),t})();function gH(t,e={},r){return t?Fb.create().superRefine((i,n)=>{var s,a;if(!t(i)){let o=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,l=(a=(s=o.fatal)!==null&&s!==void 0?s:r)!==null&&a!==void 0?a:!0,c=typeof o=="string"?{message:o}:o;n.addIssue(Q(x({code:"custom"},c),{fatal:l}))}}):Fb.create()}var CCt={object:Md.lazycreate},we=function(t){return t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly",t}(we||{}),kCt=(t,e={message:`Input not instance of ${t.name}`})=>gH(r=>r instanceof t,e),vH=i0.create,_H=kE.create,ACt=mH.create,SCt=AE.create,bH=SE.create,ECt=EE.create,TCt=sH.create,ICt=TE.create,OCt=IE.create,PCt=Fb.create,MCt=Lm.create,RCt=ou.create,BCt=aH.create,DCt=df.create,LCt=Md.create,NCt=Md.strictCreate,FCt=OE.create,zCt=oH.create,VCt=PE.create,jCt=Rd.create,UCt=cH.create,HCt=uH.create,GCt=hH.create,WCt=dH.create,ZCt=ME.create,$Ct=RE.create,XCt=qf.create,qCt=pf.create,KCt=r0.create,$B=Lu.create,YCt=Kl.create,JCt=Bd.create,QCt=Lu.createWithPreprocess,tkt=NE.create,ekt=()=>vH().optional(),ikt=()=>_H().optional(),rkt=()=>bH().optional(),nkt={string:t=>i0.create(Q(x({},t),{coerce:!0})),number:t=>kE.create(Q(x({},t),{coerce:!0})),boolean:t=>SE.create(Q(x({},t),{coerce:!0})),bigint:t=>AE.create(Q(x({},t),{coerce:!0})),date:t=>EE.create(Q(x({},t),{coerce:!0}))},skt=Ce,on=Object.freeze({__proto__:null,defaultErrorMap:Pd,setErrorMap:sCt,getErrorMap:Bb,makeIssue:Db,EMPTY_PATH:aCt,addIssueToContext:Xt,ParseStatus:Hn,INVALID:Ce,DIRTY:Lb,OK:kn,isAborted:mk,isDirty:fk,isValid:uf,isAsync:hf,get util(){return hi},get objectUtil(){return JU},ZodParsedType:Yt,getParsedType:Vl,ZodType:Fe,datetimeRegex:nH,ZodString:i0,ZodNumber:kE,ZodBigInt:AE,ZodBoolean:SE,ZodDate:EE,ZodSymbol:sH,ZodUndefined:TE,ZodNull:IE,ZodAny:Fb,ZodUnknown:Lm,ZodNever:ou,ZodVoid:aH,ZodArray:df,ZodObject:Md,ZodUnion:OE,ZodDiscriminatedUnion:oH,ZodIntersection:PE,ZodTuple:Rd,ZodRecord:cH,ZodMap:uH,ZodSet:hH,ZodFunction:dH,ZodLazy:ME,ZodLiteral:RE,ZodEnum:qf,ZodNativeEnum:pf,ZodPromise:r0,ZodEffects:Lu,ZodTransformer:Lu,ZodOptional:Kl,ZodNullable:Bd,ZodDefault:BE,ZodCatch:DE,ZodNaN:mH,BRAND:xCt,ZodBranded:LE,ZodPipeline:NE,ZodReadonly:FE,custom:gH,Schema:Fe,ZodSchema:Fe,late:CCt,get ZodFirstPartyTypeKind(){return we},coerce:nkt,any:PCt,array:DCt,bigint:SCt,boolean:bH,date:ECt,discriminatedUnion:zCt,effect:$B,enum:XCt,function:WCt,instanceof:kCt,intersection:VCt,lazy:ZCt,literal:$Ct,map:HCt,nan:ACt,nativeEnum:qCt,never:RCt,null:OCt,nullable:JCt,number:_H,object:LCt,oboolean:rkt,onumber:ikt,optional:YCt,ostring:ekt,pipeline:tkt,preprocess:QCt,promise:KCt,record:UCt,set:GCt,strictObject:NCt,string:vH,symbol:TCt,transformer:$B,tuple:jCt,undefined:ICt,union:FCt,unknown:MCt,void:BCt,NEVER:skt,ZodIssueCode:Mt,quotelessJson:nCt,ZodError:Fo});function zE(t){try{if(typeof t=="string")return JSON.parse(t)}catch{}return t}var akt=on.object({}).passthrough().refine(t=>!0),okt=on.array(akt),XB=on.preprocess(zE,on.union([on.literal(""),on.string().url(),okt])),PVt=XB.parse.bind(XB),qB=on.preprocess(zE,on.tuple([on.number(),on.number(),on.number()])),MVt=qB.parse.bind(qB),KB=on.preprocess(zE,on.object({x:on.number(),y:on.number(),z:on.number()})),RVt=KB.parse.bind(KB),lkt=["bodyCanvas"],ckt=(()=>{let t=class{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new It,this.nodeDrag=new It,this.nodeClick=new It,this.nodeHoverStart=new It,this.nodeHoverStop=new It,this.initialized=new It,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(i){this._scene=i,this.bodyUI?.setScene(i)}get rotation(){return this._rotation}set rotation(i){this._rotation=i,this.bodyUI?.setRotation(i)}get rotationX(){return this._rotationX}set rotationX(i){this._rotationX=i,this.bodyUI?.setRotationX(i)}get zoom(){return this._zoom}set zoom(i){this._zoom=i,this.bodyUI?.setZoom(i)}get target(){return this._target}set target(i){this._target=i,this.bodyUI?.setTarget(i)}get bounds(){return this._bounds}set bounds(i){this._bounds=i,this.zoomToBounds(i)}get camera(){return this._camera}set camera(i){this._camera=i}get interactive(){return this._interactive}set interactive(i){this._interactive=i,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(i,n={x:48,y:48}){if(this.bodyCanvas){let{width:s,height:a}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,l=Math.min(Math.log2((s-n.x)/o/i.x),Math.log2((a-n.y)/o/i.y));this.zoom=l}}setupBodyUI(){return Dt(this,null,function*(){let i=this.bodyCanvas.nativeElement,n=new Q1t({id:"body-ui",canvas:i,zoom:this.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:this.interactive,camera:this.camera});i.addEventListener("contextmenu",s=>s.preventDefault()),yield n.initialize(),this.bodyUI=n,window.bodyUI=n,this.scene?.length>0&&this.bodyUI.setScene(this.scene),this.bounds&&this.zoomToBounds(this.bounds),this.target&&this.bodyUI.setTarget(this.target),this.subscriptions=[this.bodyUI.sceneRotation$.subscribe(s=>this.rotationChange.next(s)),this.bodyUI.nodeDrag$.subscribe(s=>this.nodeDrag.emit(s)),this.bodyUI.nodeClick$.subscribe(s=>this.nodeClick.emit(s)),this.bodyUI.nodeHoverStart$.subscribe(s=>this.nodeHoverStart.emit(s)),this.bodyUI.nodeHoverStop$.subscribe(s=>this.nodeHoverStop.emit(s))],this.initialized.emit()})}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(i=>i.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["ccf-body-ui"]],viewQuery:function(r,i){if(r&1&&gi(lkt,5,te),r&2){let n;oe(n=le())&&(i.bodyCanvas=n.first)}},hostVars:2,hostBindings:function(r,i){r&2&&Ai(i.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[["bodyCanvas",""],[1,"body-ui"]],template:function(r,i){r&1&&Ot(0,"canvas",1,0)},styles:["[_nghost-%COMP%]{height:100%;width:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0}),t})(),ukt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti]}),t})(),qo="NGXS_META",zb="NGXS_OPTIONS_META",bk="NGXS_SELECTOR_META";function yH(t){if(!t.hasOwnProperty(qo)){let e={name:null,actions:{},defaults:{},path:null,makeRootSelector(r){return r.getStateGetter(e.name)},children:[]};Object.defineProperty(t,qo,{value:e})}return Kf(t)}function Kf(t){return t[qo]}function wH(t){return t.hasOwnProperty(bk)||Object.defineProperty(t,bk,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),xH(t)}function xH(t){return t[bk]}function hkt(t,e){return t===e}function dkt(t,e,r){if(e===null||r===null||e.length!==r.length)return!1;let i=e.length;for(let n=0;n<i;n++)if(!t(e[n],r[n]))return!1;return!0}function yk(t,e=hkt){let r=null,i=null;function n(){return dkt(e,r,arguments)||(i=t.apply(null,arguments)),r=arguments,i}return n.reset=function(){r=null,i=null},n}var pkt=class{constructor(t){this._name=t;let e=wH(this);e.makeRootSelector=r=>r.getStateGetter(this._name)}getName(){return this._name}toString(){return`StateToken[${this._name}]`}},mkt=!1,fkt=(()=>{let t=class{static set(i){this._value=i}static pop(){let i=this._value;return this._value={},i}};return t._value={},t})(),CH=new ht(mkt?"INITIAL_STATE_TOKEN":"",{providedIn:"root",factory:()=>fkt.pop()}),kH=(()=>{let t=class extends Vo{constructor(){super(1)}bootstrap(){this.next(!0),this.complete()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),AH=!1,SH=new ht(AH?"\u0275NGXS_STATE_FACTORY":""),EH=new ht(AH?"\u0275NGXS_STATE_CONTEXT_FACTORY":"");function TH(t){let e=[],r=!1;return function(...i){if(r){e.unshift(i);return}for(r=!0,t(...i);e.length>0;){let n=e.pop();n&&t(...n)}r=!1}}var gkt=class extends Bt{constructor(){super(...arguments),this._orderedNext=TH(t=>super.next(t))}next(t){this._orderedNext(t)}},vkt=class extends cc{constructor(t){super(t),this._orderedNext=TH(e=>super.next(e)),this._currentValue=t}getValue(){return this._currentValue}next(t){this._currentValue=t,this._orderedNext(t)}};function IH(t){return e=>new Ht(r=>e.subscribe({next(i){t(()=>r.next(i))},error(i){t(()=>r.error(i))},complete(){t(()=>r.complete())}}))}var VE=(()=>{let t=class extends vkt{constructor(){super({}),this.state=Vy(this.pipe(IH(vn)),{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.complete()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),n0=(()=>{let t=class{};return t.type="@@INIT",t})(),s0=(()=>{let t=class{constructor(i){this.addedStates=i}};return t.type="@@UPDATE_STATE",t})(),_kt=!1,jE=new ht(_kt?"NGXS_PLUGINS":"");function Nu(t){return t.constructor?.type||t.type}function bkt(t){let e=Nu(t);return function(r){return e===Nu(r)}}var UE=(t,e,r)=>{t=x({},t);let i=e.split("."),n=i.length-1;return i.reduce((s,a,o)=>(o===n?s[a]=r:s[a]=Array.isArray(s[a])?s[a].slice():x({},s[a]),s&&s[a]),t),t},mf=(t,e)=>e.split(".").reduce((r,i)=>r&&r[i],t);function HE(t){return typeof t=="function"}function OH(t){return typeof t>"u"}function ykt(t){return typeof t=="function"}function wkt(t){return t===null||OH(t)}function xkt(t,e){return HE(t)?t(e):OH(t)?e:t}function Ckt(t,e,r){return function(i){let n=!!t;return ykt(t)&&(n=t(i)),xkt(n?e:r,i)}}function kkt(t,e){return function(r){if(wkt(t)&&r)return r;if(!Array.isArray(r))return[t];let i=r.slice(),n=0;return e>0&&(n=e),i.splice(n,0,t),i}}function Oo(t){return function(e){let r=null;for(let i in t){let n=t[i],s=e?.[i],a=HE(n)?n(s):n;a!==s&&(r||(r=x({},e)),r[i]=a)}return r||e}}var Akt=(()=>{let t=class{enter(i){return i()}leave(i){return i()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Skt(t,e,r){throw new Error(`State name '${t}' from ${e} already exists in ${r}.`)}function Ekt(t){throw new Error(`States must be decorated with @State() decorator, but "${t}" isn't.`)}function Tkt(t){return`'${t}' class should be decorated with @Injectable() right after the @State() decorator`}function Ikt(t){let e="You have an invalid state initialization order. This typically occurs when `NgxsModule.forFeature`\nor `provideStates` is called before `NgxsModule.forRoot` or `provideStore`.\nOne example is when `NgxsRouterPluginModule.forRoot` is called before `NgxsModule.forRoot`.";if(t){let r=Object.keys(t).map(i=>`"${i}"`);e+=`
Feature states added before the store initialization is complete: ${r.join(", ")}.`}return e}function Okt(){throw new Error("You have forgotten to import the NGXS module!")}var PH=(()=>{let t=class{constructor(i,n){this._ngZone=i,this._platformId=n}enter(i){return Bo(this._platformId)?this.runInsideAngular(i):this.runOutsideAngular(i)}leave(i){return this.runInsideAngular(i)}runInsideAngular(i){return Zt.isInAngularZone()?i():this._ngZone.run(i)}runOutsideAngular(i){return Zt.isInAngularZone()?this._ngZone.runOutsideAngular(i):i()}};return t.\u0275fac=function(r){return new(r||t)(U(Zt),U(dn))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),MH=!1,RH=new ht(MH?"CUSTOM_NGXS_EXECUTION_STRATEGY":""),Pkt=new ht(MH?"NGXS_EXECUTION_STRATEGY":"",{providedIn:"root",factory:()=>{let t=K(Zt),e=K(ky),r=e.get(RH),i=t instanceof Zt;return r?e.get(r):e.get(i?PH:Akt)}}),BH=(()=>{let t=class{constructor(i){this._executionStrategy=i}enter(i){return this._executionStrategy.enter(i)}leave(i){return this._executionStrategy.leave(i)}};return t.\u0275fac=function(r){return new(r||t)(U(Pkt))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),DH=t=>(...e)=>t.shift()(...e,(...r)=>DH(t)(...r));function D_(t){return IH(e=>t.leave(e))}var LH=(()=>{let t=class extends gkt{ngOnDestroy(){this.complete()}};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),GE=(()=>{let t=class{constructor(i,n){this._parentManager=i,this._pluginHandlers=n,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){let i=this.getPluginHandlers();this.rootPlugins.push(...i)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}};return t.\u0275fac=function(r){return new(r||t)(U(t,12),U(jE,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),WE=new WeakMap,YB=el.onUnhandledError;el.onUnhandledError=function(t){let e=WE.get(t);if(e)e();else if(YB)YB.call(this,t);else throw t};function Mkt(t){let e=WE.get(t);return e?(e(),!0):!1}function Rkt(t,e){if(t!==null&&typeof t=="object"){let r=!1;WE.set(t,()=>{r||(r=!0,e())})}return t}function Bkt(t){return e=>{let r=e.subscribe({error:i=>{t.runOutsideAngular(()=>{queueMicrotask(()=>{r&&Mkt(i)})})}});return new Ht(i=>(r?.unsubscribe(),r=null,e.subscribe(i)))}}var NH=(()=>{let t=class extends Bt{};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Dkt=(()=>{let t=class{constructor(i,n,s,a,o,l){this._ngZone=i,this._actions=n,this._actionResults=s,this._pluginManager=a,this._stateStream=o,this._ngxsExecutionStrategy=l}dispatch(i){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(i)).pipe(Bkt(this._ngZone),D_(this._ngxsExecutionStrategy))}dispatchByEvents(i){return Array.isArray(i)?i.length===0?Ge(void 0):Of(i.map(n=>this.dispatchSingle(n))).pipe(kt(()=>{})):this.dispatchSingle(i)}dispatchSingle(i){let n=this._stateStream.getValue(),s=this._pluginManager.plugins;return DH([...s,(a,o)=>{a!==n&&this._stateStream.next(a);let l=this.getActionResultStream(o);return l.subscribe(c=>this._actions.next(c)),this._actions.next({action:o,status:"DISPATCHED"}),this.createDispatchObservable(l)}])(n,i).pipe(hs())}getActionResultStream(i){return this._actionResults.pipe(Ye(n=>n.action===i&&n.status!=="DISPATCHED"),br(1),hs())}createDispatchObservable(i){return i.pipe(CA(n=>{switch(n.status){case"SUCCESSFUL":return Ge(this._stateStream.getValue());case"ERRORED":return If(()=>n.error);default:return io}})).pipe(hs())}};return t.\u0275fac=function(r){return new(r||t)(U(Zt),U(LH),U(NH),U(GE),U(VE),U(BH))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ZE=!1,FH=new ht(ZE?"ROOT_STATE_TOKEN":""),zH=new ht(ZE?"FEATURE_STATE_TOKEN":""),VH=new ht(ZE?"NGXS_OPTIONS":""),Yf=(()=>{let t=class{constructor(){this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=PH,this.selectorOptions={injectContainerState:!1,suppressErrors:!1}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:()=>(()=>{let r=new t,i=K(VH);return Q(x(x({},r),i),{selectorOptions:x(x({},r.selectorOptions),i.selectorOptions)})})(),providedIn:"root"}),t})(),Lkt=class{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}},Jf=(()=>{let t=class{constructor(i,n,s){this._stateStream=i,this._dispatcher=n,this._config=s}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(i){let n=this.getRootStateOperations(),s=n.getState();n.setState(x(x({},s),i.defaults))}};return t.\u0275fac=function(r){return new(r||t)(U(VE),U(Dkt),U(Yf))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Nkt=!1;function Fkt(t,e,r){return i=>{let{argumentSelectorFunctions:n,selectorOptions:s}=Vkt(i,t,e),{suppressErrors:a}=s;return function(o){let l=n.map(c=>c(o));try{return r(...l)}catch(c){if(a&&c instanceof TypeError)return;throw Nkt&&console.error("The selector below has thrown an error upon invocation. Please check for any unsafe property access that may result in null or undefined values.",t.originalFn),c}}}}function zkt(t,e){let r=e&&e.containerClass,i=yk(function(...n){let s=t.apply(r,n);return s instanceof Function?yk.apply(null,[s]):s});return Object.setPrototypeOf(i,t),i}function Vkt(t,e,r=[]){let i=e.getSelectorOptions(),n=t.getSelectorOptions(i),s=jkt(r,n,e.containerClass).map(a=>jH(a)(t));return{selectorOptions:n,argumentSelectorFunctions:s}}function jkt(t=[],e,r){let i=[],n=e.injectContainerState||t.length===0;return r&&n&&Kf(r)&&i.push(r),i.push(...t),i}function jH(t){let e=xH(t)||Kf(t);return e&&e.makeRootSelector||(()=>t)}var $E=!1;function UH(t){return e=>{for(let r=0;r<t.length;r++){if(!e)return;e=e[t[r]]}return e}}function HH(t){let e=t,r="store."+e[0],i=0,n=e.length,s=r;for(;++i<n;)s=s+" && "+(r=r+"."+e[i]);return new Function("store","return "+s+";")}function Ukt(t,e){return e?.compatibility?.strictContentSecurityPolicy?UH(t):HH(t)}var Hkt=new ht($E?"PROP_GETTER":"",{providedIn:"root",factory:()=>K(Yf).compatibility?.strictContentSecurityPolicy?UH:HH});function Gkt(t){let e=r=>{let i=t.find(n=>n===r);if($E&&!i)throw new Error(`Child state not found: ${r}. \r
You may have forgotten to add states to module`);return i[qo].name};return t.reduce((r,i)=>{let{name:n,children:s}=i[qo];return r[n]=(s||[]).map(e),r},{})}function Wkt(t){return t.reduce((e,r)=>{let i=r[qo];return e[i.name]=r,e},{})}function Zkt(t,e={}){let r=(i,n)=>{for(let s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(n)>=0){let a=r(i,s);return a!==null?`${a}.${s}`:s}return null};for(let i in t)if(t.hasOwnProperty(i)){let n=r(t,i);e[i]=n?`${n}.${i}`:i}return e}function $kt(t){let e=[],r={},i=(n,s=[])=>{Array.isArray(s)||(s=[]),s.push(n),r[n]=!0,t[n].forEach(a=>{if($E&&s.indexOf(a)>=0)throw new Error(`Circular dependency '${a}' is required by '${n}': ${s.join(" -> ")}`);r[a]||i(a,s.slice(0))}),e.indexOf(n)<0&&e.push(n)};return Object.keys(t).forEach(n=>i(n)),e.reverse()}function Xkt(...t){return qkt(t,["DISPATCHED"])}function qkt(t,e,r=Ykt){let i=Jkt(t),n=e&&Qkt(e);return function(s){return s.pipe(Kkt(i,n),r())}}function Kkt(t,e){return Ye(r=>{let i=Nu(r.action),n=t[i],s=e?e[r.status]:!0;return n&&s})}function Ykt(){return kt(t=>t.action)}function Jkt(t){return t.reduce((e,r)=>(e[Nu(r)]=!0,e),{})}function Qkt(t){return t.reduce((e,r)=>(e[r]=!0,e),{})}function tAt(t){return e=>{let r=x({},e);for(let i in t)r[i]=t[i];return r}}var XE=(()=>{let t=class{constructor(i){this._internalStateOperations=i}createStateContext(i){let n=this._internalStateOperations.getRootStateOperations();return{getState(){let s=n.getState();return WH(s,i.path)},patchState(s){let a=n.getState(),o=tAt(s);JB(n,a,o,i.path)},setState(s){let a=n.getState();HE(s)?JB(n,a,s,i.path):GH(n,a,s,i.path)},dispatch(s){return n.dispatch(s)}}}};return t.\u0275fac=function(r){return new(r||t)(U(Jf))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function GH(t,e,r,i){let n=UE(e,i,r);return t.setState(n),n}function JB(t,e,r,i){let n=WH(e,i),s=r(n);return GH(t,e,s,i)}function WH(t,e){return mf(t,e)}var YVt=new RegExp("^[a-zA-Z0-9_]+$");function eAt(t,e,r){let i=r[t];i&&i!==e&&Skt(t,e.name,i.name)}function iAt(t){t.forEach(e=>{Kf(e)||Ekt(e.name)})}function rAt(t){sAt(t)||nAt(t)||console.warn(Tkt(t.name))}function nAt(t){return!!t.\u0275prov}function sAt(t){return(t.__annotations__||[]).some(e=>e?.ngMetadataName==="Injectable")}var aAt=!1,oAt=new ht(aAt?"NGXS_DEVELOPMENT_OPTIONS":"",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})}),lAt=(()=>{let t=class{constructor(i){this._ignoredActions=new Set([n0.type,s0.type]),typeof i.warnOnUnhandledActions=="object"&&this.ignoreActions(...i.warnOnUnhandledActions.ignore)}ignoreActions(...i){for(let n of i)this._ignoredActions.add(n.type)}warn(i){Array.from(this._ignoredActions).some(n=>n===Nu(i))||(i=i.constructor&&i.constructor.name!=="Object"?i.constructor.name:i.type,console.warn(`The ${i} action has been dispatched but hasn't been handled. This may happen if the state with an action handler for this action is not registered.`))}};return t.\u0275fac=function(r){return new(r||t)(U(oAt))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),cAt=(()=>{let t=class{constructor(){this._ngZone=K(Zt),this._errorHandler=K(ga)}handleError(i,n){this._ngZone.runOutsideAngular(()=>this._errorHandler.handleError(i))}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Vv=!1;function uAt(t){let e=t===void 0?{}:t;return t&&(Array.isArray(t)?e=t.slice():typeof t=="object"&&(e=x({},t))),e}var Dd=(()=>{let t=class{constructor(i,n,s,a,o,l,c){this._injector=i,this._config=n,this._parentFactory=s,this._actions=a,this._actionResults=o,this._stateContextFactory=l,this._initialState=c,this._actionsSubscription=null,this._propGetter=K(Hkt),this._ngxsUnhandledErrorHandler=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=yk(()=>{let h=this,p=h._propGetter;function m(f){let g=h.statePaths[f];return g?p(g.split(".")):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let g=m(f);return g||((..._)=>(g||(g=m(f)),g?g(..._):void 0))},getSelectorOptions(f){let g=h._config.selectorOptions;return x(x({},g),f||{})}}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}ngOnDestroy(){this._actionsSubscription?.unsubscribe()}add(i){Vv&&iAt(i);let{newStates:n}=this.addToStatesMap(i);if(!n.length)return[];let s=Gkt(n),a=$kt(s),o=Zkt(s),l=Wkt(n),c=[];for(let h of a){let p=l[h],m=o[h],f=p[qo];this.addRuntimeInfoToMeta(f,m),Vv&&rAt(p);let g={name:h,path:m,isInitialised:!1,actions:f.actions,instance:this._injector.get(p),defaults:uAt(f.defaults)};this.hasBeenMountedAndBootstrapped(h,m)||c.push(g),this.states.push(g)}return c}addAndReturnDefaults(i){let n=i||[],s=this.add(n);return{defaults:s.reduce((a,o)=>UE(a,o.path,o.defaults),{}),states:s}}connectActionHandlers(){if(this._parentFactory||this._actionsSubscription!==null)return;let i=new Bt;this._actionsSubscription=this._actions.pipe(Ye(n=>n.status==="DISPATCHED"),Uo(n=>{i.next(n);let s=n.action;return this.invokeActions(i,s).pipe(kt(()=>({action:s,status:"SUCCESSFUL"})),tC({action:s,status:"CANCELED"}),il(a=>{let o=this._ngxsUnhandledErrorHandler||=this._injector.get(cAt),l=Rkt(a,()=>o.handleError(a,{action:s}));return Ge({action:s,status:"ERRORED",error:l})}))})).subscribe(n=>this._actionResults.next(n))}invokeActions(i,n){let s=Nu(n),a=[],o=!1;for(let l of this.states){let c=l.actions[s];if(c)for(let h of c){let p=this._stateContextFactory.createStateContext(l);try{let m=l.instance[h.fn](p,n);Ou(m)&&(m=zs(m)),jo(m)?(m=m.pipe(Uo(f=>Ou(f)?zs(f):jo(f)?f:Ge(f)),tC({})),h.options.cancelUncompleted&&(m=m.pipe(Me(i.pipe(Xkt(n)))))):m=Ge({}).pipe(hs()),a.push(m)}catch(m){a.push(If(m))}o=!0}}if(Vv&&!o){let l=this._injector.get(lAt,null);l&&l.warn(n)}return a.length||a.push(Ge({})),Of(a)}addToStatesMap(i){let n=[],s=this.statesByName;for(let a of i){let o=Kf(a).name;Vv&&eAt(o,a,s),!s[o]&&(n.push(a),s[o]=a)}return{newStates:n}}addRuntimeInfoToMeta(i,n){this.statePaths[i.name]=n,i.path=n}hasBeenMountedAndBootstrapped(i,n){let s=mf(this._initialState,n)!==void 0;return this.statesByName[i]&&s}};return t.\u0275fac=function(r){return new(r||t)(U(Re),U(Yf),U(t,12),U(LH),U(NH),U(XE),U(CH,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),ll=(()=>{let t=class{constructor(i,n,s,a,o,l){this._stateStream=i,this._internalStateOperations=n,this._config=s,this._internalExecutionStrategy=a,this._stateFactory=o,this._selectableStateStream=this._stateStream.pipe(D_(this._internalExecutionStrategy),hs({bufferSize:1,refCount:!0})),this.initStateStream(l)}dispatch(i){return this._internalStateOperations.getRootStateOperations().dispatch(i)}select(i){let n=this.getStoreBoundSelectorFn(i);return this._selectableStateStream.pipe(kt(n),il(s=>this._config.selectorOptions.suppressErrors&&s instanceof TypeError?Ge(void 0):If(s)),ii(),D_(this._internalExecutionStrategy))}selectOnce(i){return this.select(i).pipe(br(1))}selectSnapshot(i){return this.getStoreBoundSelectorFn(i)(this._stateStream.getValue())}selectSignal(i){let n=this.getStoreBoundSelectorFn(i);return rr(()=>n(this._stateStream.state()))}subscribe(i){return this._selectableStateStream.pipe(D_(this._internalExecutionStrategy)).subscribe(i)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(i){this._internalStateOperations.getRootStateOperations().setState(i)}getStoreBoundSelectorFn(i){let n=jH(i),s=this._stateFactory.getRuntimeSelectorContext();return n(s)}initStateStream(i){let n=this._stateStream.value;(!n||Object.keys(n).length===0)&&this._stateStream.next(i)}};return t.\u0275fac=function(r){return new(r||t)(U(VE),U(Jf),U(Yf),U(BH),U(Dd),U(CH,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),hAt=!1,dAt=new ht(hAt?"NGXS_PREBOOT_FNS":""),Vb=(()=>{let t=class Cm{constructor(i,n){Cm.store=i,Cm.config=n}ngOnDestroy(){Cm.store=null,Cm.config=null}};return t.store=null,t.config=null,t.\u0275fac=function(r){return new(r||t)(U(ll),U(Yf))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pAt=!1,ZH=(()=>{let t=class{constructor(i,n,s,a){this._store=i,this._internalStateOperations=n,this._stateContextFactory=s,this._appBootstrappedState=a,this._destroy$=new Vo(1)}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(i,n){pAt&&(i instanceof n0?this._initStateHasBeenDispatched=!0:i instanceof s0&&!this._initStateHasBeenDispatched&&console.error(Ikt(i.addedStates))),this._internalStateOperations.getRootStateOperations().dispatch(i).pipe(Ye(()=>!!n),Li(()=>this._invokeInitOnStates(n.states)),Uo(()=>this._appBootstrappedState),Ye(s=>!!s),Me(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(n.states))}_invokeInitOnStates(i){for(let n of i){let s=n.instance;s.ngxsOnChanges&&this._store.select(a=>mf(a,n.path)).pipe(fr(void 0),WY(),Me(this._destroy$)).subscribe(([a,o])=>{let l=new Lkt(a,o,!n.isInitialised);s.ngxsOnChanges(l)}),s.ngxsOnInit&&s.ngxsOnInit(this._getStateContext(n)),n.isInitialised=!0}}_invokeBootstrapOnStates(i){for(let n of i){let s=n.instance;s.ngxsAfterBootstrap&&s.ngxsAfterBootstrap(this._getStateContext(n))}}_getStateContext(i){return this._stateContextFactory.createStateContext(i)}};return t.\u0275fac=function(r){return new(r||t)(U(ll),U(Jf),U(XE),U(kH))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$H=!1;function mAt(){(K(dAt,{optional:!0})||[]).forEach(s=>s());let t=K(Dd),e=K(Jf);K(ll),K(Vb);let r=K(FH,{optional:!0})||[],i=K(ZH),n=t.addAndReturnDefaults(r);e.setStateToTheCurrentWithNew(n),t.connectActionHandlers(),i.ngxsBootstrap(new n0,n)}function fAt(){K(ll);let t=K(Jf),e=K(Dd),r=K(zH,{optional:!0})||[],i=K(ZH),n=r.reduce((a,o)=>a.concat(o),[]),s=e.addAndReturnDefaults(n);s.states.length&&(t.setStateToTheCurrentWithNew(s),i.ngxsBootstrap(new s0(s.defaults),s))}var rjt=new ht($H?"NGXS_ROOT_STORE_INITIALIZER":""),njt=new ht($H?"NGXS_FEATURE_STORE_INITIALIZER":""),gAt=(()=>{let t=class{constructor(){mAt()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})(),vAt=(()=>{let t=class{constructor(){fAt()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})();function _At(t,e){return[Dd,GE,...t,{provide:FH,useValue:t},{provide:fS,useFactory:()=>{let r=K(kH);return()=>r.bootstrap()},multi:!0},{provide:VH,useValue:e},{provide:RH,useValue:e.executionStrategy},{provide:EH,useExisting:XE},{provide:SH,useExisting:Dd}]}function bAt(t){return[Dd,GE,...t,{provide:zH,multi:!0,useValue:t}]}var yAt=(()=>{let t=class{static forRoot(i=[],n={}){return{ngModule:gAt,providers:_At(i,n)}}static forFeature(i=[]){return{ngModule:vAt,providers:bAt(i)}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})();function qE(t,e){return(r,i,n)=>{let s=yH(r.constructor),a=Array.isArray(t)?t:[t];for(let o of a){let l=o.type;s.actions[l]||(s.actions[l]=[]),s.actions[l].push({fn:i,options:e||{},type:l})}}}function oo(t){return e=>{let r=e,i=yH(r),n=Object.getPrototypeOf(r),s=wAt(n,t);xAt({meta:i,inheritedStateClass:n,optionsWithInheritance:s}),r[zb]=s}}function wAt(t,e){let r=t[zb]||{};return x(x({},r),e)}function xAt(t){let{meta:e,inheritedStateClass:r,optionsWithInheritance:i}=t,{children:n,defaults:s,name:a}=i,o=typeof a=="string"?a:a&&a.getName()||null;if(r.hasOwnProperty(qo)){let l=r[qo]||{};e.actions=x(x({},e.actions),l.actions)}e.children=n,e.defaults=s,e.name=o}var CAt=36;function kAt(t){return Vb.store||Okt(),Vb.store.select(t)}function AAt(t,e,r=[]){if(e=e||SAt(t),typeof e=="string"){let i=r.length?[e,...r]:e.split(".");return Ukt(i,Vb.config)}return e}function SAt(t){let e=t.length-1;return t.charCodeAt(e)===CAt?t.slice(0,e):t}function a0(t,...e){return function(r,i){let n=i.toString(),s=`__${n}__selector`,a=AAt(n,t,e);Object.defineProperties(r,{[s]:{writable:!0,enumerable:!1,configurable:!0},[n]:{enumerable:!0,configurable:!0,get(){return this[s]||(this[s]=kAt(a))}}})}}var QB="NGXS_SELECTOR_OPTIONS_META",tD={getOptions:t=>t&&t[QB]||{},defineOptions:(t,e)=>{t&&(t[QB]=e)}};function EAt(t,e){let r=wH(t);r.originalFn=t;let i=()=>({});e&&(r.containerClass=e.containerClass,r.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);let n=x({},r);return r.getSelectorOptions=()=>TAt(n,i()),r}function TAt(t,e){return x(x(x(x({},tD.getOptions(t.containerClass)||{}),tD.getOptions(t.originalFn)||{}),t.getSelectorOptions()||{}),e)}function IAt(t,e,r){let i=zkt(e,r),n=EAt(e,r);return n.makeRootSelector=Fkt(n,t,i),i}function up(t){return(e,r,i)=>{i||=Object.getOwnPropertyDescriptor(e,r);let n=i?.value,s=IAt(t,n,{containerClass:e,selectorName:r.toString(),getSelectorOptions(){return{}}});return{configurable:!0,get(){return s},originalFn:n}}}var OAt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti]}),t})(),XH=(()=>{let t=class{constructor(i,n){this._renderer=i,this._elementRef=n,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,n){this._renderer.setProperty(this._elementRef.nativeElement,i,n)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};return t.\u0275fac=function(r){return new(r||t)(R(Gu),R(te))},t.\u0275dir=qt({type:t}),t})(),PAt=(()=>{let t=class extends XH{};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275dir=qt({type:t,features:[oi]}),t})(),lo=new ht(""),MAt={provide:lo,useExisting:fs(()=>Qf),multi:!0};function RAt(){let t=Zl()?Zl().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var BAt=new ht(""),Qf=(()=>{let t=class extends XH{constructor(i,n,s){super(i,n),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!RAt())}writeValue(i){let n=i??"";this.setProperty("value",n)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};return t.\u0275fac=function(r){return new(r||t)(R(Gu),R(te),R(BAt,8))},t.\u0275dir=qt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&yt("input",function(n){return i._handleInput(n.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(n){return i._compositionEnd(n.target.value)})},features:[We([MAt]),oi]}),t})();function sc(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function qH(t){return t!=null&&typeof t.length=="number"}var Xu=new ht(""),tg=new ht(""),DAt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,lu=class{static min(t){return LAt(t)}static max(t){return NAt(t)}static required(t){return FAt(t)}static requiredTrue(t){return zAt(t)}static email(t){return VAt(t)}static minLength(t){return jAt(t)}static maxLength(t){return UAt(t)}static pattern(t){return HAt(t)}static nullValidator(t){return KH(t)}static compose(t){return i4(t)}static composeAsync(t){return r4(t)}};function LAt(t){return e=>{if(sc(e.value)||sc(t))return null;let r=parseFloat(e.value);return!isNaN(r)&&r<t?{min:{min:t,actual:e.value}}:null}}function NAt(t){return e=>{if(sc(e.value)||sc(t))return null;let r=parseFloat(e.value);return!isNaN(r)&&r>t?{max:{max:t,actual:e.value}}:null}}function FAt(t){return sc(t.value)?{required:!0}:null}function zAt(t){return t.value===!0?null:{required:!0}}function VAt(t){return sc(t.value)||DAt.test(t.value)?null:{email:!0}}function jAt(t){return e=>sc(e.value)||!qH(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function UAt(t){return e=>qH(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function HAt(t){if(!t)return KH;let e,r;return typeof t=="string"?(r="",t.charAt(0)!=="^"&&(r+="^"),r+=t,t.charAt(t.length-1)!=="$"&&(r+="$"),e=new RegExp(r)):(r=t.toString(),e=t),i=>{if(sc(i.value))return null;let n=i.value;return e.test(n)?null:{pattern:{requiredPattern:r,actualValue:n}}}}function KH(t){return null}function YH(t){return t!=null}function JH(t){return Ou(t)?zs(t):t}function QH(t){let e={};return t.forEach(r=>{e=r!=null?x(x({},e),r):e}),Object.keys(e).length===0?null:e}function t4(t,e){return e.map(r=>r(t))}function GAt(t){return!t.validate}function e4(t){return t.map(e=>GAt(e)?e:r=>e.validate(r))}function i4(t){if(!t)return null;let e=t.filter(YH);return e.length==0?null:function(r){return QH(t4(r,e))}}function KE(t){return t!=null?i4(e4(t)):null}function r4(t){if(!t)return null;let e=t.filter(YH);return e.length==0?null:function(r){let i=t4(r,e).map(JH);return Of(i).pipe(kt(QH))}}function YE(t){return t!=null?r4(e4(t)):null}function eD(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function n4(t){return t._rawValidators}function s4(t){return t._rawAsyncValidators}function wk(t){return t?Array.isArray(t)?t:[t]:[]}function jb(t,e){return Array.isArray(t)?t.includes(e):t===e}function iD(t,e){let r=wk(e);return wk(t).forEach(i=>{jb(r,i)||r.push(i)}),r}function rD(t,e){return wk(e).filter(r=>!jb(t,r))}var a4=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=KE(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=YE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},qu=class extends a4{get formDirective(){return null}get path(){return null}},cl=class extends a4{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},o4=class{constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},WAt={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},djt=Q(x({},WAt),{"[class.ng-submitted]":"isSubmitted"}),JE=(()=>{let t=class extends o4{constructor(i){super(i)}};return t.\u0275fac=function(r){return new(r||t)(R(cl,2))},t.\u0275dir=qt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ee("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[oi]}),t})(),QE=(()=>{let t=class extends o4{constructor(i){super(i)}};return t.\u0275fac=function(r){return new(r||t)(R(qu,10))},t.\u0275dir=qt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ee("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[oi]}),t})(),sm="VALID",jv="INVALID",Fh="PENDING",am="DISABLED",hp=class{},nD=class extends hp{constructor(t,e){super(),this.value=t,this.source=e}},T1=class extends hp{constructor(t,e){super(),this.pristine=t,this.source=e}},I1=class extends hp{constructor(t,e){super(),this.touched=t,this.source=e}},Uv=class extends hp{constructor(t,e){super(),this.status=t,this.source=e}},ZAt=class extends hp{constructor(t){super(),this.source=t}},$At=class extends hp{constructor(t){super(),this.source=t}};function tT(t){return(o0(t)?t.validators:t)||null}function XAt(t){return Array.isArray(t)?KE(t):t||null}function eT(t,e){return(o0(e)?e.asyncValidators:t)||null}function qAt(t){return Array.isArray(t)?YE(t):t||null}function o0(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function l4(t,e,r){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new Vt(1e3,"");if(!i[r])throw new Vt(1001,"")}function c4(t,e,r){t._forEachChild((i,n)=>{if(r[n]===void 0)throw new Vt(1002,"")})}var l0=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=rr(()=>this.statusReactive()),this.statusReactive=un(void 0),this._pristine=rr(()=>this.pristineReactive()),this.pristineReactive=un(!0),this._touched=rr(()=>this.touchedReactive()),this.touchedReactive=un(!1),this._events=new Bt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return vn(this.statusReactive)}set status(t){vn(()=>this.statusReactive.set(t))}get valid(){return this.status===sm}get invalid(){return this.status===jv}get pending(){return this.status==Fh}get disabled(){return this.status===am}get enabled(){return this.status!==am}get pristine(){return vn(this.pristineReactive)}set pristine(t){vn(()=>this.pristineReactive.set(t))}get dirty(){return!this.pristine}get touched(){return vn(this.touchedReactive)}set touched(t){vn(()=>this.touchedReactive.set(t))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(iD(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(iD(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(rD(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(rD(t,this._rawAsyncValidators))}hasValidator(t){return jb(this._rawValidators,t)}hasAsyncValidator(t){return jb(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(Q(x({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new I1(!0,r))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new I1(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(Q(x({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new T1(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new T1(!0,r))}markAsPending(t={}){this.status=Fh;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Uv(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(Q(x({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=am,this.errors=null,this._forEachChild(i=>{i.disable(Q(x({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new nD(this.value,r)),this._events.next(new Uv(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Q(x({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=sm,this._forEachChild(r=>{r.enable(Q(x({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Q(x({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===sm||this.status===Fh)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new nD(this.value,e)),this._events.next(new Uv(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(Q(x({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?am:sm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=Fh,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1};let r=JH(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new Uv(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new It,this.statusChanges=new It}_calculateStatus(){return this._allControlsDisabled()?am:this.errors?jv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fh)?Fh:this._anyControlsHaveStatus(jv)?jv:sm}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new T1(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new I1(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){o0(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=XAt(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=qAt(this._rawAsyncValidators)}},Ub=class extends l0{constructor(t,e,r){super(tT(e),eT(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){c4(this,!0,t),Object.keys(t).forEach(r=>{l4(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>r._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,r]of Object.entries(this.controls))if(this.contains(e)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,r,i)=>((r.enabled||this.disabled)&&(e[i]=r.value),e))}_reduceChildren(t,e){let r=t;return this._forEachChild((i,n)=>{r=e(r,i,n)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}},KAt=class extends Ub{},dp=new ht("CallSetDisabledState",{providedIn:"root",factory:()=>c0}),c0="always";function u4(t,e){return[...e.path,t]}function ff(t,e,r=c0){iT(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||r==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),JAt(t,e),tSt(t,e),QAt(t,e),YAt(t,e)}function Hb(t,e,r=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Wb(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Gb(t,e){t.forEach(r=>{r.registerOnValidatorChange&&r.registerOnValidatorChange(e)})}function YAt(t,e){if(e.valueAccessor.setDisabledState){let r=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(r),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(r)})}}function iT(t,e){let r=n4(t);e.validator!==null?t.setValidators(eD(r,e.validator)):typeof r=="function"&&t.setValidators([r]);let i=s4(t);e.asyncValidator!==null?t.setAsyncValidators(eD(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let n=()=>t.updateValueAndValidity();Gb(e._rawValidators,n),Gb(e._rawAsyncValidators,n)}function Wb(t,e){let r=!1;if(t!==null){if(e.validator!==null){let n=n4(t);if(Array.isArray(n)&&n.length>0){let s=n.filter(a=>a!==e.validator);s.length!==n.length&&(r=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let n=s4(t);if(Array.isArray(n)&&n.length>0){let s=n.filter(a=>a!==e.asyncValidator);s.length!==n.length&&(r=!0,t.setAsyncValidators(s))}}}let i=()=>{};return Gb(e._rawValidators,i),Gb(e._rawAsyncValidators,i),r}function JAt(t,e){e.valueAccessor.registerOnChange(r=>{t._pendingValue=r,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&h4(t,e)})}function QAt(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&h4(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function h4(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function tSt(t,e){let r=(i,n)=>{e.valueAccessor.writeValue(i),n&&e.viewToModelUpdate(i)};t.registerOnChange(r),e._registerOnDestroy(()=>{t._unregisterOnChange(r)})}function d4(t,e){t==null,iT(t,e)}function eSt(t,e){return Wb(t,e)}function rT(t,e){if(!t.hasOwnProperty("model"))return!1;let r=t.model;return r.isFirstChange()?!0:!Object.is(e,r.currentValue)}function iSt(t){return Object.getPrototypeOf(t.constructor)===PAt}function p4(t,e){t._syncPendingControls(),e.forEach(r=>{let i=r.control;i.updateOn==="submit"&&i._pendingChange&&(r.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function nT(t,e){if(!e)return null;Array.isArray(e);let r,i,n;return e.forEach(s=>{s.constructor===Qf?r=s:iSt(s)?i=s:n=s}),n||i||r||null}function rSt(t,e){let r=t.indexOf(e);r>-1&&t.splice(r,1)}var nSt={provide:qu,useExisting:fs(()=>sT)},om=Promise.resolve(),sT=(()=>{let t=class extends qu{get submitted(){return vn(this.submittedReactive)}constructor(i,n,s){super(),this.callSetDisabledState=s,this._submitted=rr(()=>this.submittedReactive()),this.submittedReactive=un(!1),this._directives=new Set,this.ngSubmit=new It,this.form=new Ub({},KE(i),YE(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){om.then(()=>{let n=this._findContainer(i.path);i.control=n.registerControl(i.name,i.control),ff(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){om.then(()=>{let n=this._findContainer(i.path);n&&n.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){om.then(()=>{let n=this._findContainer(i.path),s=new Ub({});d4(s,i),n.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){om.then(()=>{let n=this._findContainer(i.path);n&&n.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,n){om.then(()=>{this.form.get(i.path).setValue(n)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submittedReactive.set(!0),p4(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};return t.\u0275fac=function(r){return new(r||t)(R(Xu,10),R(tg,10),R(dp,8))},t.\u0275dir=qt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&yt("submit",function(n){return i.onSubmit(n)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[We([nSt]),oi]}),t})();function sD(t,e){let r=t.indexOf(e);r>-1&&t.splice(r,1)}function aD(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var yu=class extends l0{constructor(t=null,e,r){super(tT(e),eT(r,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),o0(e)&&(e.nonNullable||e.initialValueIsDefault)&&(aD(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){sD(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){sD(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){aD(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},sSt=yu,aSt=t=>t instanceof yu,oSt={provide:cl,useExisting:fs(()=>m4)},oD=Promise.resolve(),m4=(()=>{let t=class extends cl{constructor(i,n,s,a,o,l){super(),this._changeDetectorRef=o,this.callSetDisabledState=l,this.control=new yu,this._registered=!1,this.name="",this.update=new It,this._parent=i,this._setValidators(n),this._setAsyncValidators(s),this.valueAccessor=nT(this,a)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let n=i.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),rT(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ff(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){oD.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let n=i.isDisabled.currentValue,s=n!==0&&Ut(n);oD.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?u4(i,this._parent):[i]}};return t.\u0275fac=function(r){return new(r||t)(R(qu,9),R(Xu,10),R(tg,10),R(lo,10),R(di,8),R(dp,8))},t.\u0275dir=qt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[We([oSt]),oi,yr]}),t})(),lSt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),aT=new ht(""),cSt={provide:cl,useExisting:fs(()=>f4)},f4=(()=>{let t=class extends cl{set isDisabled(i){}constructor(i,n,s,a,o){super(),this._ngModelWarningConfig=a,this.callSetDisabledState=o,this.update=new It,this._ngModelWarningSent=!1,this._setValidators(i),this._setAsyncValidators(n),this.valueAccessor=nT(this,s)}ngOnChanges(i){if(this._isControlChanged(i)){let n=i.form.previousValue;n&&Hb(n,this,!1),ff(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}rT(i,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Hb(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_isControlChanged(i){return i.hasOwnProperty("form")}};return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(r){return new(r||t)(R(Xu,10),R(tg,10),R(lo,10),R(aT,8),R(dp,8))},t.\u0275dir=qt({type:t,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[We([cSt]),oi,yr]}),t})(),uSt={provide:qu,useExisting:fs(()=>pp)},pp=(()=>{let t=class extends qu{get submitted(){return vn(this._submittedReactive)}set submitted(i){this._submittedReactive.set(i)}constructor(i,n,s){super(),this.callSetDisabledState=s,this._submitted=rr(()=>this._submittedReactive()),this._submittedReactive=un(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new It,this._setValidators(i),this._setAsyncValidators(n)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Wb(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let n=this.form.get(i.path);return ff(n,i,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),n}getControl(i){return this.form.get(i.path)}removeControl(i){Hb(i.control||null,i,!1),rSt(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,n){this.form.get(i.path).setValue(n)}onSubmit(i){return this._submittedReactive.set(!0),p4(this.form,this.directives),this.ngSubmit.emit(i),this.form._events.next(new ZAt(this.control)),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this._submittedReactive.set(!1),this.form._events.next(new $At(this.form))}_updateDomValue(){this.directives.forEach(i=>{let n=i.control,s=this.form.get(i.path);n!==s&&(Hb(n||null,i),aSt(s)&&(ff(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let n=this.form.get(i.path);d4(n,i),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let n=this.form.get(i.path);n&&eSt(n,i)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){iT(this.form,this),this._oldForm&&Wb(this._oldForm,this)}_checkFormPresent(){this.form}};return t.\u0275fac=function(r){return new(r||t)(R(Xu,10),R(tg,10),R(dp,8))},t.\u0275dir=qt({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&yt("submit",function(n){return i.onSubmit(n)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[We([uSt]),oi,yr]}),t})(),hSt={provide:cl,useExisting:fs(()=>oT)},oT=(()=>{let t=class extends cl{set isDisabled(i){}constructor(i,n,s,a,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new It,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(n),this._setAsyncValidators(s),this.valueAccessor=nT(this,a)}ngOnChanges(i){this._added||this._setUpControl(),rT(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return u4(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(r){return new(r||t)(R(qu,13),R(Xu,10),R(tg,10),R(lo,10),R(aT,8))},t.\u0275dir=qt({type:t,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[We([hSt]),oi,yr]}),t})(),g4=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})(),dSt=class extends l0{constructor(t,e,r){super(tT(e),eT(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){c4(this,!1,t),t.forEach((r,i)=>{l4(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e,this),this._updateTouched(e,this),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,r)=>r._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function lD(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var pSt=(()=>{let t=class v4{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new v4;return i.useNonNullable=!0,i}group(i,n=null){let s=this._reduceControls(i),a={};return lD(n)?a=n:n!==null&&(a.validators=n.validator,a.asyncValidators=n.asyncValidator),new Ub(s,a)}record(i,n=null){let s=this._reduceControls(i);return new KAt(s,n)}control(i,n,s){let a={};return this.useNonNullable?(lD(n)?a=n:(a.validators=n,a.asyncValidators=s),new yu(i,Q(x({},a),{nonNullable:!0}))):new yu(i,n,s)}array(i,n,s){let a=i.map(o=>this._createControl(o));return new dSt(a,n,s)}_reduceControls(i){let n={};return Object.keys(i).forEach(s=>{n[s]=this._createControl(i[s])}),n}_createControl(i){if(i instanceof yu||i instanceof l0)return i;if(Array.isArray(i)){let n=i[0],s=i.length>1?i[1]:null,a=i.length>2?i[2]:null;return this.control(n,s,a)}else return this.control(i)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),mSt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:()=>K(pSt).nonNullable,providedIn:"root"}),t})(),fSt=(()=>{let t=class _4{static withConfig(i){return{ngModule:_4,providers:[{provide:dp,useValue:i.callSetDisabledState??c0}]}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[g4]}),t})(),u0=(()=>{let t=class b4{static withConfig(i){return{ngModule:b4,providers:[{provide:aT,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:dp,useValue:i.callSetDisabledState??c0}]}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[g4]}),t})(),xk;try{xk=typeof Intl<"u"&&Intl.v8BreakIterator}catch{xk=!1}var Ui=(()=>{let t=class{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Fn(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||xk)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};return t.\u0275fac=function(r){return new(r||t)(U(dn))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),zh,cD=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function uD(){if(zh)return zh;if(typeof document!="object"||!document)return zh=new Set(cD),zh;let t=document.createElement("input");return zh=new Set(cD.filter(e=>(t.setAttribute("type",e),t.type===e))),zh}var lm;function gSt(){if(lm==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>lm=!0}))}finally{lm=lm||!1}return lm}function Ku(t){return gSt()?t:!!t.capture}var za=function(t){return t[t.NORMAL=0]="NORMAL",t[t.NEGATED=1]="NEGATED",t[t.INVERTED=2]="INVERTED",t}(za||{}),Hv,Lc;function y4(){if(Lc==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Lc=!1,Lc;if("scrollBehavior"in document.documentElement.style)Lc=!0;else{let t=Element.prototype.scrollTo;t?Lc=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Lc=!1}}return Lc}function cm(){if(typeof document!="object"||!document)return za.NORMAL;if(Hv==null){let t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";let r=document.createElement("div"),i=r.style;i.width="2px",i.height="1px",t.appendChild(r),document.body.appendChild(t),Hv=za.NORMAL,t.scrollLeft===0&&(t.scrollLeft=1,Hv=t.scrollLeft===0?za.NEGATED:za.INVERTED),t.remove()}return Hv}var O1;function vSt(){if(O1==null){let t=typeof document<"u"?document.head:null;O1=!!(t&&(t.createShadowRoot||t.attachShadow))}return O1}function _St(t){if(vSt()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function P1(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function pa(t){return t.composedPath?t.composedPath()[0]:t.target}function Ck(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ps(t,...e){return e.length?e.some(r=>t[r]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function Yl(t){return t!=null&&`${t}`!="false"}function Zb(t,e=0){return bSt(t)?Number(t):arguments.length===2?e:0}function bSt(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function $b(t){return Array.isArray(t)?t:[t]}function xr(t){return t==null?"":typeof t=="string"?t:`${t}px`}function zo(t){return t instanceof te?t.nativeElement:t}var ySt=(()=>{let t=class{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),w4=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[ySt]}),t})(),hD=new Set,Nc,wSt=(()=>{let t=class{constructor(i,n){this._platform=i,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):CSt}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&xSt(i,this._nonce),this._matchMedia(i)}};return t.\u0275fac=function(r){return new(r||t)(U(Ui),U(Py,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function xSt(t,e){if(!hD.has(t))try{Nc||(Nc=document.createElement("style"),e&&Nc.setAttribute("nonce",e),Nc.setAttribute("type","text/css"),document.head.appendChild(Nc)),Nc.sheet&&(Nc.sheet.insertRule(`@media ${t} {body{ }}`,0),hD.add(t))}catch(r){console.error(r)}}function CSt(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var lT=(()=>{let t=class{constructor(i,n){this._mediaMatcher=i,this._zone=n,this._queries=new Map,this._destroySubject=new Bt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return dD($b(i)).some(n=>this._registerQuery(n).mql.matches)}observe(i){let n=dD($b(i)).map(a=>this._registerQuery(a).observable),s=Rr(n);return s=Um(s.pipe(br(1)),s.pipe(KN(1),X_(0))),s.pipe(kt(a=>{let o={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:c})=>{o.matches=o.matches||l,o.breakpoints[c]=l}),o}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let n=this._mediaMatcher.matchMedia(i),s={observable:new Ht(a=>{let o=l=>this._zone.run(()=>a.next(l));return n.addListener(o),()=>{n.removeListener(o)}}).pipe(fr(n),kt(({matches:a})=>({query:i,matches:a})),Me(this._destroySubject)),mql:n};return this._queries.set(i,s),s}};return t.\u0275fac=function(r){return new(r||t)(U(wSt),U(Zt))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function dD(t){return t.map(e=>e.split(",")).reduce((e,r)=>e.concat(r)).map(e=>e.trim())}var x4={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"},C4=" ";function Xb(t,e,r){let i=qb(t,e);r=r.trim(),!i.some(n=>n.trim()===r)&&(i.push(r),t.setAttribute(e,i.join(C4)))}function ud(t,e,r){let i=qb(t,e);r=r.trim();let n=i.filter(s=>s!==r);n.length?t.setAttribute(e,n.join(C4)):t.removeAttribute(e)}function qb(t,e){return t.getAttribute(e)?.match(/\S+/g)??[]}var k4="cdk-describedby-message",Gv="cdk-describedby-host",kk=0,kSt=(()=>{let t=class{constructor(i,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=`${kk++}`,this._document=i,this._id=K(Oy)+"-"+kk++}describe(i,n,s){if(!this._canBeDescribed(i,n))return;let a=M1(n,s);typeof n!="string"?(pD(n,this._id),this._messageRegistry.set(a,{messageElement:n,referenceCount:0})):this._messageRegistry.has(a)||this._createMessageElement(n,s),this._isElementDescribedByMessage(i,a)||this._addMessageReference(i,a)}removeDescription(i,n,s){if(!n||!this._isElementNode(i))return;let a=M1(n,s);if(this._isElementDescribedByMessage(i,a)&&this._removeMessageReference(i,a),typeof n=="string"){let o=this._messageRegistry.get(a);o&&o.referenceCount===0&&this._deleteMessageElement(a)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let i=this._document.querySelectorAll(`[${Gv}="${this._id}"]`);for(let n=0;n<i.length;n++)this._removeCdkDescribedByReferenceIds(i[n]),i[n].removeAttribute(Gv);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(i,n){let s=this._document.createElement("div");pD(s,this._id),s.textContent=i,n&&s.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(s),this._messageRegistry.set(M1(i,n),{messageElement:s,referenceCount:0})}_deleteMessageElement(i){this._messageRegistry.get(i)?.messageElement?.remove(),this._messageRegistry.delete(i)}_createMessagesContainer(){if(this._messagesContainer)return;let i="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${i}[platform="server"]`);for(let a=0;a<n.length;a++)n[a].remove();let s=this._document.createElement("div");s.style.visibility="hidden",s.classList.add(i),s.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&s.setAttribute("platform","server"),this._document.body.appendChild(s),this._messagesContainer=s}_removeCdkDescribedByReferenceIds(i){let n=qb(i,"aria-describedby").filter(s=>s.indexOf(k4)!=0);i.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(i,n){let s=this._messageRegistry.get(n);Xb(i,"aria-describedby",s.messageElement.id),i.setAttribute(Gv,this._id),s.referenceCount++}_removeMessageReference(i,n){let s=this._messageRegistry.get(n);s.referenceCount--,ud(i,"aria-describedby",s.messageElement.id),i.removeAttribute(Gv)}_isElementDescribedByMessage(i,n){let s=qb(i,"aria-describedby"),a=this._messageRegistry.get(n),o=a&&a.messageElement.id;return!!o&&s.indexOf(o)!=-1}_canBeDescribed(i,n){if(!this._isElementNode(i))return!1;if(n&&typeof n=="object")return!0;let s=n==null?"":`${n}`.trim(),a=i.getAttribute("aria-label");return s?!a||a.trim()!==s:!1}_isElementNode(i){return i.nodeType===this._document.ELEMENT_NODE}};return t.\u0275fac=function(r){return new(r||t)(U(ge),U(Ui))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function M1(t,e){return typeof t=="string"?`${e||""}/${t}`:t}function pD(t,e){t.id||(t.id=`${k4}-${e}-${kk++}`)}var ASt=200,SSt=class{constructor(t,e){this._letterKeyStream=new Bt,this._items=[],this._selectedItemIndex=-1,this._pressedLetters=[],this._selectedItem=new Bt,this.selectedItem=this._selectedItem;let r=typeof e?.debounceInterval=="number"?e.debounceInterval:ASt;e?.skipPredicate&&(this._skipPredicateFn=e.skipPredicate),this.setItems(t),this._setupKeyHandler(r)}destroy(){this._pressedLetters=[],this._letterKeyStream.complete(),this._selectedItem.complete()}setCurrentSelectedItemIndex(t){this._selectedItemIndex=t}setItems(t){this._items=t}handleKey(t){let e=t.keyCode;t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))}isTyping(){return this._pressedLetters.length>0}reset(){this._pressedLetters=[]}_setupKeyHandler(t){this._letterKeyStream.pipe(Li(e=>this._pressedLetters.push(e)),X_(t),Ye(()=>this._pressedLetters.length>0),kt(()=>this._pressedLetters.join("").toLocaleUpperCase())).subscribe(e=>{for(let r=1;r<this._items.length+1;r++){let i=(this._selectedItemIndex+r)%this._items.length,n=this._items[i];if(!this._skipPredicateFn?.(n)&&n.getLabel?.().toLocaleUpperCase().trim().indexOf(e)===0){this._selectedItem.next(n);break}}this._pressedLetters=[]})}},A4=class{constructor(t,e){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._typeaheadSubscription=vi.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=r=>r.disabled,this.tabOut=new Bt,this.change=new Bt,t instanceof $m?this._itemChangesSubscription=t.changes.subscribe(r=>this._itemsChanged(r.toArray())):Ym(t)&&(this._effectRef=Ws(()=>this._itemsChanged(t()),{injector:e}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){this._typeaheadSubscription.unsubscribe();let e=this._getItemsArray();return this._typeahead=new SSt(e,{debounceInterval:typeof t=="number"?t:void 0,skipPredicate:r=>this._skipPredicateFn(r)}),this._typeaheadSubscription=this._typeahead.selectedItem.subscribe(r=>{this.setActiveItem(r)}),this}cancelTypeahead(){return this._typeahead?.reset(),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(i=>!t[i]||this._allowedModifierKeys.indexOf(i)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let i=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(i>0?i:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let i=this._activeItemIndex+this._pageUpAndDown.delta,n=this._getItemsArray().length;this._setActiveItemByIndex(i<n?i:n-1,-1);break}else return;default:(r||ps(t,"shiftKey"))&&this._typeahead?.handleKey(t);return}this._typeahead?.reset(),t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return!!this._typeahead&&this._typeahead.isTyping()}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),r=typeof t=="number"?t:e.indexOf(t),i=e[r];this._activeItem=i??null,this._activeItemIndex=r,this._typeahead?.setCurrentSelectedItemIndex(r)}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._typeahead?.destroy(),this.tabOut.complete(),this.change.complete()}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let r=1;r<=e.length;r++){let i=(this._activeItemIndex+t*r+e.length)%e.length,n=e[i];if(!this._skipPredicateFn(n)){this.setActiveItem(i);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let r=this._getItemsArray();if(r[t]){for(;this._skipPredicateFn(r[t]);)if(t+=e,!r[t])return;this.setActiveItem(t)}}_getItemsArray(){return Ym(this._items)?this._items():this._items instanceof $m?this._items.toArray():this._items}_itemsChanged(t){if(this._typeahead?.setItems(t),this._activeItem){let e=t.indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e,this._typeahead?.setCurrentSelectedItemIndex(e))}}},S4=class extends A4{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}},E4=class extends A4{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}},cT=(()=>{let t=class{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return TSt(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let n=ESt(LSt(i));if(n&&(mD(n)===-1||!this.isVisible(n)))return!1;let s=i.nodeName.toLowerCase(),a=mD(i);return i.hasAttribute("contenteditable")?a!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!BSt(i)?!1:s==="audio"?i.hasAttribute("controls")?a!==-1:!1:s==="video"?a===-1?!1:a!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,n){return DSt(i)&&!this.isDisabled(i)&&(n?.ignoreVisibility||this.isVisible(i))}};return t.\u0275fac=function(r){return new(r||t)(U(Ui))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ESt(t){try{return t.frameElement}catch{return null}}function TSt(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function ISt(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function OSt(t){return MSt(t)&&t.type=="hidden"}function PSt(t){return RSt(t)&&t.hasAttribute("href")}function MSt(t){return t.nodeName.toLowerCase()=="input"}function RSt(t){return t.nodeName.toLowerCase()=="a"}function T4(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function mD(t){if(!T4(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function BSt(t){let e=t.nodeName.toLowerCase(),r=e==="input"&&t.type;return r==="text"||r==="password"||e==="select"||e==="textarea"}function DSt(t){return OSt(t)?!1:ISt(t)||PSt(t)||t.hasAttribute("contenteditable")||T4(t)}function LSt(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var NSt=class{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,r,i,n=!1,s){this._element=t,this._checker=e,this._ngZone=r,this._document=i,this._injector=s,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,n||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let r=this._getFirstTabbableElement(e);return r?.focus(t),!!r}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let r=0;r<e.length;r++){let i=e[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[r]):null;if(i)return i}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let r=e.length-1;r>=0;r--){let i=e[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[r]):null;if(i)return i}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._injector?pc(t,{injector:this._injector}):setTimeout(t)}},I4=(()=>{let t=class{constructor(i,n,s){this._checker=i,this._ngZone=n,this._injector=K(Re),this._document=s}create(i,n=!1){return new NSt(i,this._checker,this._ngZone,this._document,n,this._injector)}};return t.\u0275fac=function(r){return new(r||t)(U(cT),U(Zt),U(ge))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function uT(t){return t.buttons===0||t.detail===0}function hT(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var FSt=new ht("cdk-input-modality-detector-options"),zSt={ignoreKeys:[18,17,224,91,16]},O4=650,Vh=Ku({passive:!0,capture:!0}),VSt=(()=>{let t=class{get mostRecentModality(){return this._modality.value}constructor(i,n,s,a){this._platform=i,this._mostRecentTarget=null,this._modality=new cc(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(l=>l===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=pa(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<O4||(this._modality.next(uT(o)?"keyboard":"mouse"),this._mostRecentTarget=pa(o))},this._onTouchstart=o=>{if(hT(o)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=pa(o)},this._options=x(x({},zSt),a),this.modalityDetected=this._modality.pipe(KN(1)),this.modalityChanged=this.modalityDetected.pipe(ii()),i.isBrowser&&n.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Vh),s.addEventListener("mousedown",this._onMousedown,Vh),s.addEventListener("touchstart",this._onTouchstart,Vh)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Vh),document.removeEventListener("mousedown",this._onMousedown,Vh),document.removeEventListener("touchstart",this._onTouchstart,Vh))}};return t.\u0275fac=function(r){return new(r||t)(U(Ui),U(Zt),U(ge),U(FSt,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),jSt=new ht("liveAnnouncerElement",{providedIn:"root",factory:USt});function USt(){return null}var HSt=new ht("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),GSt=0,P4=(()=>{let t=class{constructor(i,n,s,a){this._ngZone=n,this._defaultOptions=a,this._document=s,this._liveElement=i||this._createLiveElement()}announce(i,...n){let s=this._defaultOptions,a,o;return n.length===1&&typeof n[0]=="number"?o=n[0]:[a,o]=n,this.clear(),clearTimeout(this._previousTimeout),a||(a=s&&s.politeness?s.politeness:"polite"),o==null&&s&&(o=s.duration),this._liveElement.setAttribute("aria-live",a),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(l=>this._currentResolve=l)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,typeof o=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let i="cdk-live-announcer-element",n=this._document.getElementsByClassName(i),s=this._document.createElement("div");for(let a=0;a<n.length;a++)n[a].remove();return s.classList.add(i),s.classList.add("cdk-visually-hidden"),s.setAttribute("aria-atomic","true"),s.setAttribute("aria-live","polite"),s.id=`cdk-live-announcer-${GSt++}`,this._document.body.appendChild(s),s}_exposeAnnouncerToModals(i){let n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let s=0;s<n.length;s++){let a=n[s],o=a.getAttribute("aria-owns");o?o.indexOf(i)===-1&&a.setAttribute("aria-owns",o+" "+i):a.setAttribute("aria-owns",i)}}};return t.\u0275fac=function(r){return new(r||t)(U(jSt,8),U(Zt),U(ge),U(HSt,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),L_=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(L_||{}),WSt=new ht("cdk-focus-monitor-default-options"),Wv=Ku({passive:!0,capture:!0}),ul=(()=>{let t=class{constructor(i,n,s,a,o){this._ngZone=i,this._platform=n,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Bt,this._rootNodeFocusAndBlurListener=l=>{let c=pa(l);for(let h=c;h;h=h.parentElement)l.type==="focus"?this._onFocus(l,h):this._onBlur(l,h)},this._document=a,this._detectionMode=o?.detectionMode||L_.IMMEDIATE}monitor(i,n=!1){let s=zo(i);if(!this._platform.isBrowser||s.nodeType!==1)return Ge();let a=_St(s)||this._getDocument(),o=this._elementInfo.get(s);if(o)return n&&(o.checkChildren=!0),o.subject;let l={checkChildren:n,subject:new Bt,rootNode:a};return this._elementInfo.set(s,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(i){let n=zo(i),s=this._elementInfo.get(n);s&&(s.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(s))}focusVia(i,n,s){let a=zo(i),o=this._getDocument().activeElement;a===o?this._getClosestElementsInfo(a).forEach(([l,c])=>this._originChanged(l,n,c)):(this._setOrigin(n),typeof a.focus=="function"&&a.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===L_.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,n){i.classList.toggle("cdk-focused",!!n),i.classList.toggle("cdk-touch-focused",n==="touch"),i.classList.toggle("cdk-keyboard-focused",n==="keyboard"),i.classList.toggle("cdk-mouse-focused",n==="mouse"),i.classList.toggle("cdk-program-focused",n==="program")}_setOrigin(i,n=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&n,this._detectionMode===L_.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?O4:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,n){let s=this._elementInfo.get(n),a=pa(i);!s||!s.checkChildren&&n!==a||this._originChanged(n,this._getFocusOrigin(a),s)}_onBlur(i,n){let s=this._elementInfo.get(n);!s||s.checkChildren&&i.relatedTarget instanceof Node&&n.contains(i.relatedTarget)||(this._setClasses(n),this._emitOrigin(s,null))}_emitOrigin(i,n){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(n))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let n=i.rootNode,s=this._rootNodeFocusListenerCount.get(n)||0;s||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,Wv),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,Wv)}),this._rootNodeFocusListenerCount.set(n,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Me(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(i){let n=i.rootNode;if(this._rootNodeFocusListenerCount.has(n)){let s=this._rootNodeFocusListenerCount.get(n);s>1?this._rootNodeFocusListenerCount.set(n,s-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Wv),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Wv),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,n,s){this._setClasses(i,n),this._emitOrigin(s,n),this._lastFocusOrigin=n}_getClosestElementsInfo(i){let n=[];return this._elementInfo.forEach((s,a)=>{(a===i||s.checkChildren&&a.contains(i))&&n.push([a,s])}),n}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:n,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!n||n===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let a=i.labels;if(a){for(let o=0;o<a.length;o++)if(a[o].contains(n))return!0}return!1}};return t.\u0275fac=function(r){return new(r||t)(U(Zt),U(Ui),U(VSt),U(ge,8),U(WSt,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),tu=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(tu||{}),fD="cdk-high-contrast-black-on-white",gD="cdk-high-contrast-white-on-black",R1="cdk-high-contrast-active",M4=(()=>{let t=class{constructor(i,n){this._platform=i,this._document=n,this._breakpointSubscription=K(lT).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return tu.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let n=this._document.defaultView||window,s=n&&n.getComputedStyle?n.getComputedStyle(i):null,a=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return tu.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return tu.BLACK_ON_WHITE}return tu.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(R1,fD,gD),this._hasCheckedHighContrastMode=!0;let n=this.getHighContrastMode();n===tu.BLACK_ON_WHITE?i.add(R1,fD):n===tu.WHITE_ON_BLACK&&i.add(R1,gD)}}};return t.\u0275fac=function(r){return new(r||t)(U(Ui),U(ge))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),R4=(()=>{let t=class{constructor(i){i._applyBodyHighContrastModeCssClasses()}};return t.\u0275fac=function(r){return new(r||t)(U(M4))},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[w4]}),t})(),ZSt=new ht("cdk-dir-doc",{providedIn:"root",factory:$St});function $St(){return K(ge)}var XSt=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function qSt(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?XSt.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var Gn=(()=>{let t=class{constructor(i){if(this.value="ltr",this.change=new It,i){let n=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=qSt(n||s||"ltr")}}ngOnDestroy(){this.change.complete()}};return t.\u0275fac=function(r){return new(r||t)(U(ZSt,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),gf=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})(),KSt=["text"],YSt=[[["mat-icon"]],"*"],JSt=["mat-icon","*"];function QSt(t,e){if(t&1&&Ot(0,"mat-pseudo-checkbox",1),t&2){let r=Rt();mt("disabled",r.disabled)("state",r.selected?"checked":"unchecked")}}function tEt(t,e){if(t&1&&Ot(0,"mat-pseudo-checkbox",3),t&2){let r=Rt();mt("disabled",r.disabled)}}function eEt(t,e){if(t&1&&(N(0,"span",4),ut(1),F()),t&2){let r=Rt();$(),Sn("(",r.group.label,")")}}var iEt=["mat-internal-form-field",""],rEt=["*"];function nEt(){return!0}var sEt=new ht("mat-sanity-checks",{providedIn:"root",factory:nEt}),ai=(()=>{let t=class{constructor(i,n,s){this._sanityChecks=n,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return Ck()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};return t.\u0275fac=function(r){return new(r||t)(U(M4),U(sEt,8),U(ge))},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[gf,gf]}),t})(),B4=class{constructor(t,e,r,i,n){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=r,this._parentForm=i,this._stateChanges=n,this.errorState=!1}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,r=this.matcher||this._defaultMatcher,i=this.ngControl?this.ngControl.control:null,n=r?.isErrorState(i,e)??!1;n!==t&&(this.errorState=n,this._stateChanges.next())}},dT=(()=>{let t=class{isErrorState(i,n){return!!(i&&i.invalid&&(i.touched||n&&n.submitted))}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Dn=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Dn||{}),aEt=class{constructor(t,e,r,i=!1){this._renderer=t,this.element=e,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=Dn.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},vD=Ku({passive:!0,capture:!0}),oEt=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=pa(t);e&&this._events.get(t.type)?.forEach((r,i)=>{(i===e||i.contains(e))&&r.forEach(n=>n.handleEvent(t))})}}addHandler(t,e,r,i){let n=this._events.get(e);if(n){let s=n.get(r);s?s.add(i):n.set(r,new Set([i]))}else this._events.set(e,new Map([[r,new Set([i])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,vD)})}removeHandler(t,e,r){let i=this._events.get(t);if(!i)return;let n=i.get(e);n&&(n.delete(r),n.size===0&&i.delete(e),i.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,vD)))}},_D={enterDuration:225,exitDuration:150},lEt=800,bD=Ku({passive:!0,capture:!0}),yD=["mousedown","touchstart"],wD=["mouseup","mouseleave","touchend","touchcancel"],D4=class Ak{constructor(e,r,i,n){this._target=e,this._ngZone=r,this._platform=n,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,n.isBrowser&&(this._containerElement=zo(i))}fadeInRipple(e,r,i={}){let n=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=x(x({},_D),i.animation);i.centered&&(e=n.left+n.width/2,r=n.top+n.height/2);let a=i.radius||uEt(e,r,n),o=e-n.left,l=r-n.top,c=s.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=`${o-a}px`,h.style.top=`${l-a}px`,h.style.height=`${a*2}px`,h.style.width=`${a*2}px`,i.color!=null&&(h.style.backgroundColor=i.color),h.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(h);let p=window.getComputedStyle(h),m=p.transitionProperty,f=p.transitionDuration,g=m==="none"||f==="0s"||f==="0s, 0s"||n.width===0&&n.height===0,_=new aEt(this,h,i,g);h.style.transform="scale3d(1, 1, 1)",_.state=Dn.FADING_IN,i.persistent||(this._mostRecentTransientRipple=_);let w=null;return!g&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let S=()=>{w&&(w.fallbackTimer=null),clearTimeout(b),this._finishRippleTransition(_)},C=()=>this._destroyRipple(_),b=setTimeout(C,c+100);h.addEventListener("transitionend",S),h.addEventListener("transitioncancel",C),w={onTransitionEnd:S,onTransitionCancel:C,fallbackTimer:b}}),this._activeRipples.set(_,w),(g||!c)&&this._finishRippleTransition(_),_}fadeOutRipple(e){if(e.state===Dn.FADING_OUT||e.state===Dn.HIDDEN)return;let r=e.element,i=x(x({},_D),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=Dn.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let r=zo(e);!this._platform.isBrowser||!r||r===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=r,yD.forEach(i=>{Ak._eventManager.addHandler(this._ngZone,i,r,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{wD.forEach(r=>{this._triggerElement.addEventListener(r,this,bD)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Dn.FADING_IN?this._startFadeOutTransition(e):e.state===Dn.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let r=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Dn.VISIBLE,!i&&(!r||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let r=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Dn.HIDDEN,r!==null&&(e.element.removeEventListener("transitionend",r.onTransitionEnd),e.element.removeEventListener("transitioncancel",r.onTransitionCancel),r.fallbackTimer!==null&&clearTimeout(r.fallbackTimer)),e.element.remove()}_onMousedown(e){let r=uT(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+lEt;!this._target.rippleDisabled&&!r&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!hT(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let r=e.changedTouches;if(r)for(let i=0;i<r.length;i++)this.fadeInRipple(r[i].clientX,r[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let r=e.state===Dn.VISIBLE||e.config.terminateOnPointerUp&&e.state===Dn.FADING_IN;!e.config.persistent&&r&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(yD.forEach(r=>Ak._eventManager.removeHandler(r,e,this)),this._pointerUpEventsRegistered&&(wD.forEach(r=>e.removeEventListener(r,this,bD)),this._pointerUpEventsRegistered=!1))}};D4._eventManager=new oEt;var cEt=D4;function uEt(t,e,r){let i=Math.max(Math.abs(t-r.left),Math.abs(t-r.right)),n=Math.max(Math.abs(e-r.top),Math.abs(e-r.bottom));return Math.sqrt(i*i+n*n)}var h0=new ht("mat-ripple-global-options"),ac=(()=>{let t=class{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,n,s,a,o){this._elementRef=i,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new cEt(this,n,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:x(x(x({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,n=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,n,x(x({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,x(x({},this.rippleConfig),i))}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(Zt),R(Ui),R(h0,8),R(kr,8))},t.\u0275dir=qt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){r&2&&ee("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0}),t})(),$s=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ai,ai]}),t})(),L4=(()=>{let t=class{constructor(i){this._animationMode=i,this.state="unchecked",this.disabled=!1,this.appearance="full"}};return t.\u0275fac=function(r){return new(r||t)(R(kr,8))},t.\u0275cmp=Pt({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(r,i){r&2&&ee("mat-pseudo-checkbox-indeterminate",i.state==="indeterminate")("mat-pseudo-checkbox-checked",i.state==="checked")("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal",i.appearance==="minimal")("mat-pseudo-checkbox-full",i.appearance==="full")("_mat-animation-noopable",i._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[Kt],decls:0,vars:0,template:function(r,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color, var(--mat-app-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color, var(--mat-app-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color, var(--mat-app-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0}),t})(),hEt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ai]}),t})(),pT=new ht("MAT_OPTION_PARENT_COMPONENT"),mT=new ht("MatOptgroup"),dEt=0,N4=class{constructor(t,e=!1){this.source=t,this.isUserInput=e}},fT=(()=>{let t=class{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(i){this._disabled=i}get disableRipple(){return!!(this._parent&&this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}constructor(i,n,s,a){this._element=i,this._changeDetectorRef=n,this._parent=s,this.group=a,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id=`mat-option-${dEt++}`,this.onSelectionChange=new It,this._stateChanges=new Bt}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(i=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),i&&this._emitSelectionChangeEvent())}deselect(i=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),i&&this._emitSelectionChangeEvent())}focus(i,n){let s=this._getHostElement();typeof s.focus=="function"&&s.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(i){(i.keyCode===13||i.keyCode===32)&&!ps(i)&&(this._selectViaInteraction(),i.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let i=this.viewValue;i!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=i)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(i=!1){this.onSelectionChange.emit(new N4(this,i))}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(di),R(pT,8),R(mT,8))},t.\u0275cmp=Pt({type:t,selectors:[["mat-option"]],viewQuery:function(r,i){if(r&1&&gi(KSt,7),r&2){let n;oe(n=le())&&(i._text=n.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(r,i){r&1&&yt("click",function(){return i._selectViaInteraction()})("keydown",function(n){return i._handleKeydown(n)}),r&2&&(_a("id",i.id),ke("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),ee("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",Ut]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[ji,Kt],ngContentSelectors:JSt,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(r,i){r&1&&(Mi(YSt),Wt(0,QSt,1,2,"mat-pseudo-checkbox",1),pe(1),N(2,"span",2,0),pe(4,1),F(),Wt(5,tEt,1,1,"mat-pseudo-checkbox",3)(6,eEt,2,1,"span",4),Ot(7,"div",5)),r&2&&(ae(i.multiple?0:-1),$(5),ae(!i.multiple&&i.selected&&!i.hideSingleSelectionIndicator?5:-1),$(),ae(i.group&&i.group._inert?6:-1),$(),mt("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[L4,ac],styles:['.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-app-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-app-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-app-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color);outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color, var(--mat-app-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),t})();function F4(t,e,r){if(r.length){let i=e.toArray(),n=r.toArray(),s=0;for(let a=0;a<t+1;a++)i[a].group&&i[a].group===n[s]&&s++;return s}return 0}function z4(t,e,r,i){return t<r?t:t+e>r+i?Math.max(0,t-i+e):r}var vf=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[$s,ai,hEt]}),t})(),xD={capture:!0},CD=["focus","mousedown","mouseenter","touchstart"],B1="mat-ripple-loader-uninitialized",D1="mat-ripple-loader-class-name",kD="mat-ripple-loader-centered",Zv="mat-ripple-loader-disabled",V4=(()=>{let t=class{constructor(){this._document=K(ge,{optional:!0}),this._animationMode=K(kr,{optional:!0}),this._globalRippleOptions=K(h0,{optional:!0}),this._platform=K(Ui),this._ngZone=K(Zt),this._hosts=new Map,this._onInteraction=i=>{let n=pa(i);if(n instanceof HTMLElement){let s=n.closest(`[${B1}="${this._globalRippleOptions?.namespace??""}"]`);s&&this._createRipple(s)}},this._ngZone.runOutsideAngular(()=>{for(let i of CD)this._document?.addEventListener(i,this._onInteraction,xD)})}ngOnDestroy(){let i=this._hosts.keys();for(let n of i)this.destroyRipple(n);for(let n of CD)this._document?.removeEventListener(n,this._onInteraction,xD)}configureRipple(i,n){i.setAttribute(B1,this._globalRippleOptions?.namespace??""),(n.className||!i.hasAttribute(D1))&&i.setAttribute(D1,n.className||""),n.centered&&i.setAttribute(kD,""),n.disabled&&i.setAttribute(Zv,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,n){let s=this._hosts.get(i);if(s){s.disabled=n;return}n?i.setAttribute(Zv,""):i.removeAttribute(Zv)}_createRipple(i){if(!this._document)return;let n=this._hosts.get(i);if(n)return n;i.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",i.getAttribute(D1)),i.append(s);let a=new ac(new te(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return a._isInitialized=!0,a.trigger=i,a.centered=i.hasAttribute(kD),a.disabled=i.hasAttribute(Zv),this.attachRipple(i,a),a}attachRipple(i,n){i.removeAttribute(B1),this._hosts.set(i,n)}destroyRipple(i){let n=this._hosts.get(i);n&&(n.ngOnDestroy(),this._hosts.delete(i))}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),pEt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(r,i){r&2&&ee("mdc-form-field--align-end",i.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[Kt],attrs:iEt,ngContentSelectors:rEt,decls:1,vars:0,template:function(r,i){r&1&&(Mi(),pe(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0}),t})(),j4=class{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(t=!1,e,r=!0,i){this._multiple=t,this._emitChanges=r,this.compareWith=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Bt,e&&e.length&&(t?e.forEach(n=>this._markSelected(n)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(r=>this._markSelected(r));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(r=>this._unmarkSelected(r));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);let e=this.selected,r=new Set(t);t.forEach(n=>this._markSelected(n)),e.filter(n=>!r.has(this._getConcreteValue(n,r))).forEach(n=>this._unmarkSelected(n));let i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,e){if(this.compareWith){e=e??this._selection;for(let r of e)if(this.compareWith(t,r))return r;return t}else return t}},U4=(()=>{let t=class{constructor(){this._listeners=[]}notify(i,n){for(let s of this._listeners)s(i,n)}listen(i){return this._listeners.push(i),()=>{this._listeners=this._listeners.filter(n=>i!==n)}}ngOnDestroy(){this._listeners=[]}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),mEt=20,gT=(()=>{let t=class{constructor(i,n,s){this._ngZone=i,this._platform=n,this._scrolled=new Bt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let n=this.scrollContainers.get(i);n&&(n.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=mEt){return this._platform.isBrowser?new Ht(n=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(ZN(i)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Ge()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(i,n){let s=this.getAncestorScrollContainers(i);return this.scrolled(n).pipe(Ye(a=>!a||s.indexOf(a)>-1))}getAncestorScrollContainers(i){let n=[];return this.scrollContainers.forEach((s,a)=>{this._scrollableContainsElement(a,i)&&n.push(a)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,n){let s=zo(n),a=i.getElementRef().nativeElement;do if(s==a)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return mr(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};return t.\u0275fac=function(r){return new(r||t)(U(Zt),U(Ui),U(ge,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),fEt=(()=>{let t=class{constructor(i,n,s,a){this.elementRef=i,this.scrollDispatcher=n,this.ngZone=s,this.dir=a,this._destroyed=new Bt,this._elementScrolled=new Ht(o=>this.ngZone.runOutsideAngular(()=>mr(this.elementRef.nativeElement,"scroll").pipe(Me(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(i){let n=this.elementRef.nativeElement,s=this.dir&&this.dir.value=="rtl";i.left==null&&(i.left=s?i.end:i.start),i.right==null&&(i.right=s?i.start:i.end),i.bottom!=null&&(i.top=n.scrollHeight-n.clientHeight-i.bottom),s&&cm()!=za.NORMAL?(i.left!=null&&(i.right=n.scrollWidth-n.clientWidth-i.left),cm()==za.INVERTED?i.left=i.right:cm()==za.NEGATED&&(i.left=i.right?-i.right:i.right)):i.right!=null&&(i.left=n.scrollWidth-n.clientWidth-i.right),this._applyScrollToOptions(i)}_applyScrollToOptions(i){let n=this.elementRef.nativeElement;y4()?n.scrollTo(i):(i.top!=null&&(n.scrollTop=i.top),i.left!=null&&(n.scrollLeft=i.left))}measureScrollOffset(i){let n="left",s="right",a=this.elementRef.nativeElement;if(i=="top")return a.scrollTop;if(i=="bottom")return a.scrollHeight-a.clientHeight-a.scrollTop;let o=this.dir&&this.dir.value=="rtl";return i=="start"?i=o?s:n:i=="end"&&(i=o?n:s),o&&cm()==za.INVERTED?i==n?a.scrollWidth-a.clientWidth-a.scrollLeft:a.scrollLeft:o&&cm()==za.NEGATED?i==n?a.scrollLeft+a.scrollWidth-a.clientWidth:-a.scrollLeft:i==n?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(gT),R(Zt),R(Gn,8))},t.\u0275dir=qt({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),t})(),gEt=20,d0=(()=>{let t=class{constructor(i,n,s){this._platform=i,this._change=new Bt,this._changeListener=a=>{this._change.next(a)},this._document=s,n.runOutsideAngular(()=>{if(i.isBrowser){let a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:n,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+n,height:s,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,n=this._getWindow(),s=i.documentElement,a=s.getBoundingClientRect(),o=-a.top||i.body.scrollTop||n.scrollY||s.scrollTop||0,l=-a.left||i.body.scrollLeft||n.scrollX||s.scrollLeft||0;return{top:o,left:l}}change(i=gEt){return i>0?this._change.pipe(ZN(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};return t.\u0275fac=function(r){return new(r||t)(U(Ui),U(Zt),U(ge,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ld=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})(),AD=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[gf,Ld,gf,Ld]}),t})(),vT=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Nd=class extends vT{constructor(t,e,r,i,n){super(),this.component=t,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=i,this.projectableNodes=n}},Yu=class extends vT{constructor(t,e,r,i){super(),this.templateRef=t,this.viewContainerRef=e,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},vEt=class extends vT{constructor(t){super(),this.element=t instanceof te?t.nativeElement:t}},p0=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Nd)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Yu)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof vEt)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}},_Et=class extends p0{constructor(t,e,r,i,n){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let o=this._document.createComment("dom-portal");a.parentNode.insertBefore(o,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{o.parentNode&&o.parentNode.replaceChild(a,o)})},this._document=n}attachComponentPortal(t){let e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=e.create(t.injector||this._defaultInjector||Re.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,r=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=e.indexOf(r);i!==-1&&e.remove(i)}),this._attachedPortal=t,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}},Fd=(()=>{let t=class extends p0{constructor(i,n,s){super(),this._componentFactoryResolver=i,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new It,this.attachDomPortal=a=>{this._document;let o=a.element;o.parentNode;let l=this._document.createComment("dom-portal");a.setAttachedHost(this),o.parentNode.insertBefore(l,o),this._getRootNode().appendChild(o),this._attachedPortal=a,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(o,l)})},this._document=s}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let n=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,s=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=n.createComponent(s,n.length,i.injector||n.injector,i.projectableNodes||void 0);return n!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let n=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};return t.\u0275fac=function(r){return new(r||t)(R(dc),R(Zn),R(ge))},t.\u0275dir=qt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[oi]}),t})(),zd=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})(),SD=y4(),bEt=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=xr(-this._previousScrollPosition.left),t.style.top=xr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,r=t.style,i=e.style,n=r.scrollBehavior||"",s=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),SD&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),SD&&(r.scrollBehavior=n,i.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}},yEt=class{constructor(t,e,r,i){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(Ye(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},H4=class{enable(){}disable(){}attach(){}};function Sk(t,e){return e.some(r=>{let i=t.bottom<r.top,n=t.top>r.bottom,s=t.right<r.left,a=t.left>r.right;return i||n||s||a})}function ED(t,e){return e.some(r=>{let i=t.top<r.top,n=t.bottom>r.bottom,s=t.left<r.left,a=t.right>r.right;return i||n||s||a})}var wEt=class{constructor(t,e,r,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Sk(e,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},xEt=(()=>{let t=class{constructor(i,n,s,a){this._scrollDispatcher=i,this._viewportRuler=n,this._ngZone=s,this.noop=()=>new H4,this.close=o=>new yEt(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new bEt(this._viewportRuler,this._document),this.reposition=o=>new wEt(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=a}};return t.\u0275fac=function(r){return new(r||t)(U(gT),U(d0),U(Zt),U(ge))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),mp=class{constructor(t){if(this.scrollStrategy=new H4,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let r of e)t[r]!==void 0&&(this[r]=t[r])}}},CEt=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}},G4=(()=>{let t=class{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let n=this._attachedOverlays.indexOf(i);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}};return t.\u0275fac=function(r){return new(r||t)(U(ge))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),kEt=(()=>{let t=class extends G4{constructor(i,n){super(i),this._ngZone=n,this._keydownListener=s=>{let a=this._attachedOverlays;for(let o=a.length-1;o>-1;o--)if(a[o]._keydownEvents.observers.length>0){let l=a[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(s)):l.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};return t.\u0275fac=function(r){return new(r||t)(U(ge),U(Zt,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),AEt=(()=>{let t=class extends G4{constructor(i,n,s){super(i),this._platform=n,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=pa(a)},this._clickListener=a=>{let o=pa(a),l=a.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let c=this._attachedOverlays.slice();for(let h=c.length-1;h>-1;h--){let p=c[h];if(p._outsidePointerEvents.observers.length<1||!p.hasAttached())continue;if(TD(p.overlayElement,o)||TD(p.overlayElement,l))break;let m=p._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>m.next(a)):m.next(a)}}}add(i){if(super.add(i),!this._isAttached){let n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};return t.\u0275fac=function(r){return new(r||t)(U(ge),U(Ui),U(Zt,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function TD(t,e){let r=typeof ShadowRoot<"u"&&ShadowRoot,i=e;for(;i;){if(i===t)return!0;i=r&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}var eg=(()=>{let t=class{constructor(i,n){this._platform=n,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||Ck()){let s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let a=0;a<s.length;a++)s[a].remove()}let n=this._document.createElement("div");n.classList.add(i),Ck()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}};return t.\u0275fac=function(r){return new(r||t)(U(ge),U(Ui))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),m0=class{constructor(t,e,r,i,n,s,a,o,l,c=!1,h){this._portalOutlet=t,this._host=e,this._pane=r,this._config=i,this._ngZone=n,this._keyboardDispatcher=s,this._document=a,this._location=o,this._outsideClickDispatcher=l,this._animationsDisabled=c,this._injector=h,this._backdropElement=null,this._backdropClick=new Bt,this._attachments=new Bt,this._detachments=new Bt,this._locationChanges=vi.EMPTY,this._backdropClickHandler=p=>this._backdropClick.next(p),this._backdropTransitionendHandler=p=>{this._disposeBackdrop(p.target)},this._keydownEvents=new Bt,this._outsidePointerEvents=new Bt,this._renders=new Bt,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy,this._afterRenderRef=vn(()=>aS(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),pc(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=x(x({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Q(x({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=xr(this._config.width),t.height=xr(this._config.height),t.minWidth=xr(this._config.minWidth),t.minHeight=xr(this._config.minHeight),t.maxWidth=xr(this._config.maxWidth),t.maxHeight=xr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,r){let i=$b(e||[]).filter(n=>!!n);i.length&&(r?t.classList.add(...i):t.classList.remove(...i))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let t=this._renders.pipe(Me(lr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},ID="cdk-overlay-connected-position-bounding-box",SEt=/([A-Za-z%]+)$/,EEt=class{get positions(){return this._preferredPositions}constructor(t,e,r,i,n){this._viewportRuler=e,this._document=r,this._platform=i,this._overlayContainer=n,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Bt,this._resizeSubscription=vi.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(ID),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,r=this._viewportRect,i=this._containerRect,n=[],s;for(let a of this._preferredPositions){let o=this._getOriginPoint(t,i,a),l=this._getOverlayPoint(o,e,a),c=this._getOverlayFit(l,e,r,a);if(c.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,o);return}if(this._canFitWithFlexibleDimensions(c,l,r)){n.push({position:a,origin:o,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(o,a)});continue}(!s||s.overlayFit.visibleArea<c.visibleArea)&&(s={overlayFit:c,overlayPoint:l,originPoint:o,position:a,overlayRect:e})}if(n.length){let a=null,o=-1;for(let l of n){let c=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);c>o&&(o=c,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Fc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(ID),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,r){let i;if(r.originX=="center")i=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;i=r.originX=="start"?s:a}e.left<0&&(i-=e.left);let n;return r.originY=="center"?n=t.top+t.height/2:n=r.originY=="top"?t.top:t.bottom,e.top<0&&(n-=e.top),{x:i,y:n}}_getOverlayPoint(t,e,r){let i;r.overlayX=="center"?i=-e.width/2:r.overlayX==="start"?i=this._isRtl()?-e.width:0:i=this._isRtl()?0:-e.width;let n;return r.overlayY=="center"?n=-e.height/2:n=r.overlayY=="top"?0:-e.height,{x:t.x+i,y:t.y+n}}_getOverlayFit(t,e,r,i){let n=PD(e),{x:s,y:a}=t,o=this._getOffset(i,"x"),l=this._getOffset(i,"y");o&&(s+=o),l&&(a+=l);let c=0-s,h=s+n.width-r.width,p=0-a,m=a+n.height-r.height,f=this._subtractOverflows(n.width,c,h),g=this._subtractOverflows(n.height,p,m),_=f*g;return{visibleArea:_,isCompletelyWithinViewport:n.width*n.height===_,fitsInViewportVertically:g===n.height,fitsInViewportHorizontally:f==n.width}}_canFitWithFlexibleDimensions(t,e,r){if(this._hasFlexibleDimensions){let i=r.bottom-e.y,n=r.right-e.x,s=OD(this._overlayRef.getConfig().minHeight),a=OD(this._overlayRef.getConfig().minWidth),o=t.fitsInViewportVertically||s!=null&&s<=i,l=t.fitsInViewportHorizontally||a!=null&&a<=n;return o&&l}return!1}_pushOverlayOnScreen(t,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let i=PD(e),n=this._viewportRect,s=Math.max(t.x+i.width-n.width,0),a=Math.max(t.y+i.height-n.height,0),o=Math.max(n.top-r.top-t.y,0),l=Math.max(n.left-r.left-t.x,0),c=0,h=0;return i.width<=n.width?c=l||-s:c=t.x<this._viewportMargin?n.left-r.left-t.x:0,i.height<=n.height?h=o||-a:h=t.y<this._viewportMargin?n.top-r.top-t.y:0,this._previousPushAmount={x:c,y:h},{x:t.x+c,y:t.y+h}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let r=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!TEt(this._lastScrollVisibility,r)){let i=new CEt(t,r);this._positionChanges.next(i)}this._lastScrollVisibility=r}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),r,i=t.overlayY;t.overlayX==="center"?r="center":this._isRtl()?r=t.overlayX==="start"?"right":"left":r=t.overlayX==="start"?"left":"right";for(let n=0;n<e.length;n++)e[n].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(t,e){let r=this._viewportRect,i=this._isRtl(),n,s,a;if(e.overlayY==="top")s=t.y,n=r.height-s+this._viewportMargin;else if(e.overlayY==="bottom")a=r.height-t.y+this._viewportMargin*2,n=r.height-a+this._viewportMargin;else{let m=Math.min(r.bottom-t.y+r.top,t.y),f=this._lastBoundingBoxSize.height;n=m*2,s=t.y-m,n>f&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-f/2)}let o=e.overlayX==="start"&&!i||e.overlayX==="end"&&i,l=e.overlayX==="end"&&!i||e.overlayX==="start"&&i,c,h,p;if(l)p=r.width-t.x+this._viewportMargin*2,c=t.x-this._viewportMargin;else if(o)h=t.x,c=r.right-t.x;else{let m=Math.min(r.right-t.x+r.left,t.x),f=this._lastBoundingBoxSize.width;c=m*2,h=t.x-m,c>f&&!this._isInitialRender&&!this._growAfterOpen&&(h=t.x-f/2)}return{top:s,left:h,bottom:a,right:p,width:c,height:n}}_setBoundingBoxStyles(t,e){let r=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));let i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{let n=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;i.height=xr(r.height),i.top=xr(r.top),i.bottom=xr(r.bottom),i.width=xr(r.width),i.left=xr(r.left),i.right=xr(r.right),e.overlayX==="center"?i.alignItems="center":i.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?i.justifyContent="center":i.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",n&&(i.maxHeight=xr(n)),s&&(i.maxWidth=xr(s))}this._lastBoundingBoxSize=r,Fc(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Fc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Fc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let r={},i=this._hasExactPosition(),n=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){let c=this._viewportRuler.getViewportScrollPosition();Fc(r,this._getExactOverlayY(e,t,c)),Fc(r,this._getExactOverlayX(e,t,c))}else r.position="static";let a="",o=this._getOffset(e,"x"),l=this._getOffset(e,"y");o&&(a+=`translateX(${o}px) `),l&&(a+=`translateY(${l}px)`),r.transform=a.trim(),s.maxHeight&&(i?r.maxHeight=xr(s.maxHeight):n&&(r.maxHeight="")),s.maxWidth&&(i?r.maxWidth=xr(s.maxWidth):n&&(r.maxWidth="")),Fc(this._pane.style,r)}_getExactOverlayY(t,e,r){let i={top:"",bottom:""},n=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(n=this._pushOverlayOnScreen(n,this._overlayRect,r)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;i.bottom=`${s-(n.y+this._overlayRect.height)}px`}else i.top=xr(n.y);return i}_getExactOverlayX(t,e,r){let i={left:"",right:""},n=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(n=this._pushOverlayOnScreen(n,this._overlayRect,r));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;i.right=`${a-(n.x+this._overlayRect.width)}px`}else i.left=xr(n.x);return i}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:ED(t,r),isOriginOutsideView:Sk(t,r),isOverlayClipped:ED(e,r),isOverlayOutsideView:Sk(e,r)}}_subtractOverflows(t,...e){return e.reduce((r,i)=>r-Math.max(i,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&$b(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof te)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+e,height:r,width:e}}};function Fc(t,e){for(let r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function OD(t){if(typeof t!="number"&&t!=null){let[e,r]=t.split(SEt);return!r||r==="px"?parseFloat(e):null}return t||null}function PD(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function TEt(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var MD="cdk-global-overlay-wrapper",IEt=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(MD),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:n,maxWidth:s,maxHeight:a}=r,o=(i==="100%"||i==="100vw")&&(!s||s==="100%"||s==="100vw"),l=(n==="100%"||n==="100vh")&&(!a||a==="100%"||a==="100vh"),c=this._xPosition,h=this._xOffset,p=this._overlayRef.getConfig().direction==="rtl",m="",f="",g="";o?g="flex-start":c==="center"?(g="center",p?f=h:m=h):p?c==="left"||c==="end"?(g="flex-end",m=h):(c==="right"||c==="start")&&(g="flex-start",f=h):c==="left"||c==="start"?(g="flex-start",m=h):(c==="right"||c==="end")&&(g="flex-end",f=h),t.position=this._cssPosition,t.marginLeft=o?"0":m,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=o?"0":f,e.justifyContent=g,e.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(MD),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},OEt=(()=>{let t=class{constructor(i,n,s,a){this._viewportRuler=i,this._document=n,this._platform=s,this._overlayContainer=a}global(){return new IEt}flexibleConnectedTo(i){return new EEt(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};return t.\u0275fac=function(r){return new(r||t)(U(d0),U(ge),U(Ui),U(eg))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),PEt=0,Ar=(()=>{let t=class{constructor(i,n,s,a,o,l,c,h,p,m,f,g){this.scrollStrategies=i,this._overlayContainer=n,this._componentFactoryResolver=s,this._positionBuilder=a,this._keyboardDispatcher=o,this._injector=l,this._ngZone=c,this._document=h,this._directionality=p,this._location=m,this._outsideClickDispatcher=f,this._animationsModuleType=g}create(i){let n=this._createHostElement(),s=this._createPaneElement(n),a=this._createPortalOutlet(s),o=new mp(i);return o.direction=o.direction||this._directionality.value,new m0(a,n,s,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Xa))}position(){return this._positionBuilder}_createPaneElement(i){let n=this._document.createElement("div");return n.id=`cdk-overlay-${PEt++}`,n.classList.add("cdk-overlay-pane"),i.appendChild(n),n}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(ao)),new _Et(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};return t.\u0275fac=function(r){return new(r||t)(U(xEt),U(eg),U(dc),U(OEt),U(kEt),U(Re),U(Zt),U(ge),U(Gn),U(_S),U(AEt),U(kr,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),MEt=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],W4=new ht("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=K(Ar);return()=>t.scrollStrategies.reposition()}}),Kb=(()=>{let t=class{constructor(i){this.elementRef=i}};return t.\u0275fac=function(r){return new(r||t)(R(te))},t.\u0275dir=qt({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),t})(),RD=(()=>{let t=class{get offsetX(){return this._offsetX}set offsetX(i){this._offsetX=i,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(i){this._offsetY=i,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(i){this._disposeOnNavigation=i}constructor(i,n,s,a,o){this._overlay=i,this._dir=o,this._backdropSubscription=vi.EMPTY,this._attachSubscription=vi.EMPTY,this._detachSubscription=vi.EMPTY,this._positionSubscription=vi.EMPTY,this._disposeOnNavigation=!1,this._ngZone=K(Zt),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new It,this.positionChange=new It,this.attach=new It,this.detach=new It,this.overlayKeydown=new It,this.overlayOutsideClick=new It,this._templatePortal=new Yu(n,s),this._scrollStrategyFactory=a,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(i){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),i.origin&&this.open&&this._position.apply()),i.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=MEt);let i=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=i.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=i.detachments().subscribe(()=>this.detach.emit()),i.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),n.keyCode===27&&!this.disableClose&&!ps(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{let s=this._getOriginElement(),a=pa(n);(!s||s!==a&&!s.contains(a))&&this.overlayOutsideClick.next(n)})}_buildConfig(){let i=this._position=this.positionStrategy||this._createPositionStrategy(),n=new mp({direction:this._dir,positionStrategy:i,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(n.width=this.width),(this.height||this.height===0)&&(n.height=this.height),(this.minWidth||this.minWidth===0)&&(n.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(i){let n=this.positions.map(s=>({originX:s.originX,originY:s.originY,overlayX:s.overlayX,overlayY:s.overlayY,offsetX:s.offsetX||this.offsetX,offsetY:s.offsetY||this.offsetY,panelClass:s.panelClass||void 0}));return i.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let i=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(i),i}_getOrigin(){return this.origin instanceof Kb?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof Kb?this.origin.elementRef.nativeElement:this.origin instanceof te?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(i=>{this.backdropClick.emit(i)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(yy(()=>this.positionChange.observers.length>0)).subscribe(i=>{this._ngZone.run(()=>this.positionChange.emit(i)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}};return t.\u0275fac=function(r){return new(r||t)(R(Ar),R(Vs),R(Zn),R(W4),R(Gn,8))},t.\u0275dir=qt({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[0,"cdkConnectedOverlayOrigin","origin"],positions:[0,"cdkConnectedOverlayPositions","positions"],positionStrategy:[0,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[0,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[0,"cdkConnectedOverlayOffsetY","offsetY"],width:[0,"cdkConnectedOverlayWidth","width"],height:[0,"cdkConnectedOverlayHeight","height"],minWidth:[0,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[0,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[0,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[0,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[0,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[0,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[0,"cdkConnectedOverlayOpen","open"],disableClose:[0,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[0,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[2,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Ut],lockPosition:[2,"cdkConnectedOverlayLockPosition","lockPosition",Ut],flexibleDimensions:[2,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Ut],growAfterOpen:[2,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Ut],push:[2,"cdkConnectedOverlayPush","push",Ut],disposeOnNavigation:[2,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Ut]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[ji,yr]}),t})();function REt(t){return()=>t.scrollStrategies.reposition()}var BEt={provide:W4,deps:[Ar],useFactory:REt},Ju=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[Ar,BEt],imports:[gf,zd,AD,AD]}),t})(),Oe=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Oe||{}),Do="*";function to(t,e){return{type:Oe.Trigger,name:t,definitions:e,options:{}}}function Vn(t,e=null){return{type:Oe.Animate,styles:e,timings:t}}function DEt(t,e=null){return{type:Oe.Group,steps:t,options:e}}function LEt(t,e=null){return{type:Oe.Sequence,steps:t,options:e}}function tr(t){return{type:Oe.Style,styles:t,offset:null}}function us(t,e,r){return{type:Oe.State,name:t,styles:e,options:r}}function jn(t,e,r=null){return{type:Oe.Transition,expr:t,animation:e,options:r}}function NEt(t=null){return{type:Oe.AnimateChild,options:t}}function FEt(t,e,r=null){return{type:Oe.Query,selector:t,animation:e,options:r}}var _f=class{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},Z4=class{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,i=0,n=this.players.length;n==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==n&&this._onFinish()}),s.onDestroy(()=>{++r==n&&this._onDestroy()}),s.onStart(()=>{++i==n&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(i)})}getPosition(){let t=this.players.reduce((e,r)=>e===null||r.totalTime>e.totalTime?r:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},_T="!",zEt=class{constructor(t){this._box=t,this._destroyed=new Bt,this._resizeSubject=new Bt,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new Ht(e=>{let r=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),r.unsubscribe(),this._elementObservables.delete(t)}}).pipe(Ye(e=>e.some(r=>r.target===t)),hs({bufferSize:1,refCount:!0}),Me(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},VEt=(()=>{let t=class{constructor(){this._observers=new Map,this._ngZone=K(Zt),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,i]of this._observers)i.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(i,n){let s=n?.box||"content-box";return this._observers.has(s)||this._observers.set(s,new zEt(s)),this._observers.get(s).observe(i)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),jEt=["notch"],UEt=["matFormFieldNotchedOutline",""],HEt=["*"],GEt=["textField"],WEt=["iconPrefixContainer"],ZEt=["textPrefixContainer"],$Et=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],XEt=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function qEt(t,e){t&1&&Ot(0,"span",19)}function KEt(t,e){if(t&1&&(N(0,"label",18),pe(1,1),Wt(2,qEt,1,0,"span",19),F()),t&2){let r=Rt(2);mt("floating",r._shouldLabelFloat())("monitorResize",r._hasOutline())("id",r._labelId),ke("for",r._control.disableAutomaticLabeling?null:r._control.id),$(2),ae(!r.hideRequiredMarker&&r._control.required?2:-1)}}function YEt(t,e){if(t&1&&Wt(0,KEt,3,5,"label",18),t&2){let r=Rt();ae(r._hasFloatingLabel()?0:-1)}}function JEt(t,e){t&1&&Ot(0,"div",5)}function QEt(t,e){}function tTt(t,e){if(t&1&&Wt(0,QEt,0,0,"ng-template",11),t&2){Rt(2);let r=fi(1);mt("ngTemplateOutlet",r)}}function eTt(t,e){if(t&1&&(N(0,"div",7),Wt(1,tTt,1,1,null,11),F()),t&2){let r=Rt();mt("matFormFieldNotchedOutlineOpen",r._shouldLabelFloat()),$(),ae(r._forceDisplayInfixLabel()?-1:1)}}function iTt(t,e){t&1&&(N(0,"div",8,2),pe(2,2),F())}function rTt(t,e){t&1&&(N(0,"div",9,3),pe(2,3),F())}function nTt(t,e){}function sTt(t,e){if(t&1&&Wt(0,nTt,0,0,"ng-template",11),t&2){Rt();let r=fi(1);mt("ngTemplateOutlet",r)}}function aTt(t,e){t&1&&(N(0,"div",12),pe(1,4),F())}function oTt(t,e){t&1&&(N(0,"div",13),pe(1,5),F())}function lTt(t,e){t&1&&Ot(0,"div",14)}function cTt(t,e){if(t&1&&(N(0,"div",16),pe(1,6),F()),t&2){let r=Rt();mt("@transitionMessages",r._subscriptAnimationState)}}function uTt(t,e){if(t&1&&(N(0,"mat-hint",20),ut(1),F()),t&2){let r=Rt(2);mt("id",r._hintLabelId),$(),Oi(r.hintLabel)}}function hTt(t,e){if(t&1&&(N(0,"div",17),Wt(1,uTt,2,2,"mat-hint",20),pe(2,7),Ot(3,"div",21),pe(4,8),F()),t&2){let r=Rt();mt("@transitionMessages",r._subscriptAnimationState),$(),ae(r.hintLabel?1:-1)}}var Ko=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["mat-label"]],standalone:!0}),t})(),dTt=0,$4=new ht("MatError"),X4=(()=>{let t=class{constructor(i,n){this.id=`mat-mdc-error-${dTt++}`,i||n.nativeElement.setAttribute("aria-live","polite")}};return t.\u0275fac=function(r){return new(r||t)(Kd("aria-live"),R(te))},t.\u0275dir=qt({type:t,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(r,i){r&2&&_a("id",i.id)},inputs:{id:"id"},standalone:!0,features:[We([{provide:$4,useExisting:t}])]}),t})(),pTt=0,BD=(()=>{let t=class{constructor(){this.align="start",this.id=`mat-mdc-hint-${pTt++}`}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,i){r&2&&(_a("id",i.id),ke("align",null),ee("mat-mdc-form-field-hint-end",i.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0}),t})(),q4=new ht("MatPrefix"),K4=(()=>{let t=class{constructor(){this._isText=!1}set _isTextSelector(i){this._isText=!0}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:[0,"matTextPrefix","_isTextSelector"]},standalone:!0,features:[We([{provide:q4,useExisting:t}])]}),t})(),Y4=new ht("MatSuffix"),mTt=(()=>{let t=class{constructor(){this._isText=!1}set _isTextSelector(i){this._isText=!0}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[0,"matTextSuffix","_isTextSelector"]},standalone:!0,features:[We([{provide:Y4,useExisting:t}])]}),t})(),J4=new ht("FloatingLabelParent"),DD=(()=>{let t=class{get floating(){return this._floating}set floating(i){this._floating=i,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(i){this._monitorResize=i,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(i){this._elementRef=i,this._floating=!1,this._monitorResize=!1,this._resizeObserver=K(VEt),this._ngZone=K(Zt),this._parent=K(J4),this._resizeSubscription=new vi}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return fTt(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}};return t.\u0275fac=function(r){return new(r||t)(R(te))},t.\u0275dir=qt({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,i){r&2&&ee("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0}),t})();function fTt(t){let e=t;if(e.offsetParent!==null)return e.scrollWidth;let r=e.cloneNode(!0);r.style.setProperty("position","absolute"),r.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(r);let i=r.scrollWidth;return r.remove(),i}var LD="mdc-line-ripple--active",$v="mdc-line-ripple--deactivating",ND=(()=>{let t=class{constructor(i,n){this._elementRef=i,this._handleTransitionEnd=s=>{let a=this._elementRef.nativeElement.classList,o=a.contains($v);s.propertyName==="opacity"&&o&&a.remove(LD,$v)},n.runOutsideAngular(()=>{i.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let i=this._elementRef.nativeElement.classList;i.remove($v),i.add(LD)}deactivate(){this._elementRef.nativeElement.classList.add($v)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(Zt))},t.\u0275dir=qt({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0}),t})(),FD=(()=>{let t=class{constructor(i,n){this._elementRef=i,this._ngZone=n,this.open=!1}ngAfterViewInit(){let i=this._elementRef.nativeElement.querySelector(".mdc-floating-label");i?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(i.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>i.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(i){!this.open||!i?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${i}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(Zt))},t.\u0275cmp=Pt({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(r,i){if(r&1&&gi(jEt,5),r&2){let n;oe(n=le())&&(i._notch=n.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,i){r&2&&ee("mdc-notched-outline--notched",i.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[Kt],attrs:UEt,ngContentSelectors:HEt,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(r,i){r&1&&(Mi(),Ot(0,"div",1),N(1,"div",2,0),pe(3),F(),Ot(4,"div",3))},encapsulation:2,changeDetection:0}),t})(),gTt={transitionMessages:to("transitionMessages",[us("enter",tr({opacity:1,transform:"translateY(0%)"})),jn("void => enter",[tr({opacity:0,transform:"translateY(-5px)"}),Vn("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},bT=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t}),t})(),f0=new ht("MatFormField"),yT=new ht("MAT_FORM_FIELD_DEFAULT_OPTIONS"),zD=0,VD="fill",vTt="auto",jD="fixed",_Tt="translateY(-50%)",Qu=(()=>{let t=class{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(i){this._hideRequiredMarker=Yl(i)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||vTt}set floatLabel(i){i!==this._floatLabel&&(this._floatLabel=i,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(i){let n=this._appearance,s=i||this._defaults?.appearance||VD;this._appearance=s,this._appearance==="outline"&&this._appearance!==n&&(this._needsOutlineLabelOffsetUpdate=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||jD}set subscriptSizing(i){this._subscriptSizing=i||this._defaults?.subscriptSizing||jD}get hintLabel(){return this._hintLabel}set hintLabel(i){this._hintLabel=i,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(i){this._explicitFormFieldControl=i}constructor(i,n,s,a,o,l,c,h){this._elementRef=i,this._changeDetectorRef=n,this._dir=a,this._platform=o,this._defaults=l,this._animationMode=c,this._labelChild=Wit(Ko),this._hideRequiredMarker=!1,this.color="primary",this._appearance=VD,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${zD++}`,this._hintLabelId=`mat-mdc-hint-${zD++}`,this._subscriptAnimationState="",this._destroyed=new Bt,this._isFocused=null,this._needsOutlineLabelOffsetUpdate=!1,this._previousControl=null,this._injector=K(Re),this.getLabelId=rr(()=>this._hasFloatingLabel()?this._labelId:null),this._hasFloatingLabel=rr(()=>!!this._labelChild()),l&&(l.appearance&&(this.appearance=l.appearance),this._hideRequiredMarker=!!l?.hideRequiredMarker,l.color&&(this.color=l.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl(),this._control!==this._previousControl&&(this._initializeControl(this._previousControl),this._previousControl=this._control)}ngOnDestroy(){this._stateChanges?.unsubscribe(),this._valueChanges?.unsubscribe(),this._destroyed.next(),this._destroyed.complete()}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(i){let n=this._control,s="mat-mdc-form-field-type-";i&&this._elementRef.nativeElement.classList.remove(s+i.controlType),n.controlType&&this._elementRef.nativeElement.classList.add(s+n.controlType),this._stateChanges?.unsubscribe(),this._stateChanges=n.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._valueChanges?.unsubscribe(),n.ngControl&&n.ngControl.valueChanges&&(this._valueChanges=n.ngControl.valueChanges.pipe(Me(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()))}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(i=>!i._isText),this._hasTextPrefix=!!this._prefixChildren.find(i=>i._isText),this._hasIconSuffix=!!this._suffixChildren.find(i=>!i._isText),this._hasTextSuffix=!!this._suffixChildren.find(i=>i._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),lr(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),aS(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(Me(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_shouldLabelFloat(){return this._hasFloatingLabel()?this._control.shouldLabelFloat||this._shouldAlwaysFloat():!1}_shouldForward(i){let n=this._control?this._control.ngControl:null;return n&&n[i]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let i=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&i.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let n=this._hintChildren?this._hintChildren.find(a=>a.align==="start"):null,s=this._hintChildren?this._hintChildren.find(a=>a.align==="end"):null;n?i.push(n.id):this._hintLabel&&i.push(this._hintLabelId),s&&i.push(s.id)}else this._errorChildren&&i.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(i)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;let i=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){i.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdate=!0;return}let n=this._iconPrefixContainer?.nativeElement,s=this._textPrefixContainer?.nativeElement,a=n?.getBoundingClientRect().width??0,o=s?.getBoundingClientRect().width??0,l=this._dir.value==="rtl"?"-1":"1",c=`${a+o}px`,h=`calc(${l} * (${c} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;i.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${_Tt} translateX(${h})
    )`}_isAttachedToDom(){let i=this._elementRef.nativeElement;if(i.getRootNode){let n=i.getRootNode();return n&&n!==i}return document.documentElement.contains(i)}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(di),R(Zt),R(Gn),R(Ui),R(yT,8),R(kr,8),R(ge))},t.\u0275cmp=Pt({type:t,selectors:[["mat-form-field"]],contentQueries:function(r,i,n){if(r&1&&(jrt(n,i._labelChild,Ko,5),Xi(n,bT,5),Xi(n,q4,5),Xi(n,Y4,5),Xi(n,$4,5),Xi(n,BD,5)),r&2){Q5();let s;oe(s=le())&&(i._formFieldControl=s.first),oe(s=le())&&(i._prefixChildren=s),oe(s=le())&&(i._suffixChildren=s),oe(s=le())&&(i._errorChildren=s),oe(s=le())&&(i._hintChildren=s)}},viewQuery:function(r,i){if(r&1&&(gi(GEt,5),gi(WEt,5),gi(ZEt,5),gi(DD,5),gi(FD,5),gi(ND,5)),r&2){let n;oe(n=le())&&(i._textField=n.first),oe(n=le())&&(i._iconPrefixContainer=n.first),oe(n=le())&&(i._textPrefixContainer=n.first),oe(n=le())&&(i._floatingLabel=n.first),oe(n=le())&&(i._notchedOutline=n.first),oe(n=le())&&(i._lineRipple=n.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(r,i){r&2&&ee("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations",i._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",i.appearance=="fill")("mat-form-field-appearance-outline",i.appearance=="outline")("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary",i.color!=="accent"&&i.color!=="warn")("mat-accent",i.color==="accent")("mat-warn",i.color==="warn")("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[We([{provide:f0,useExisting:t},{provide:J4,useExisting:t}]),Kt],ngContentSelectors:XEt,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(r,i){if(r&1){let n=Qe();Mi($Et),Wt(0,YEt,1,1,"ng-template",null,0,sz),N(2,"div",4,1),yt("click",function(s){return Lt(n),Nt(i._control.onContainerClick(s))}),Wt(4,JEt,1,0,"div",5),N(5,"div",6),Wt(6,eTt,2,2,"div",7)(7,iTt,3,0,"div",8)(8,rTt,3,0,"div",9),N(9,"div",10),Wt(10,sTt,1,1,null,11),pe(11),F(),Wt(12,aTt,2,0,"div",12)(13,oTt,2,0,"div",13),F(),Wt(14,lTt,1,0,"div",14),F(),N(15,"div",15),Wt(16,cTt,2,1,"div",16)(17,hTt,5,2,"div",17),F()}if(r&2){let n;$(2),ee("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),$(2),ae(!i._hasOutline()&&!i._control.disabled?4:-1),$(2),ae(i._hasOutline()?6:-1),$(),ae(i._hasIconPrefix?7:-1),$(),ae(i._hasTextPrefix?8:-1),$(2),ae(!i._hasOutline()||i._forceDisplayInfixLabel()?10:-1),$(2),ae(i._hasTextSuffix?12:-1),$(),ae(i._hasIconSuffix?13:-1),$(),ae(i._hasOutline()?-1:14),$(),ee("mat-mdc-form-field-subscript-dynamic-size",i.subscriptSizing==="dynamic"),$(),ae((n=i._getDisplayedMessages())==="error"?16:n==="hint"?17:-1)}},dependencies:[DD,FD,ist,ND,BD],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-filled-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color, var(--mat-app-on-surface));caret-color:var(--mdc-outlined-text-field-caret-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--disabled .cdk-high-contrast-active .mdc-text-field__input{background-color:Window}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top));border-top-right-radius:var(--mdc-filled-text-field-container-shape, var(--mat-app-corner-extra-small-top))}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color, var(--mat-app-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--outlined{height:56px;overflow:visible;padding-left:16px;padding-right:16px}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.cdk-high-contrast-active .mdc-text-field--disabled .mdc-floating-label{z-index:1}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-filled-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-filled-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-filled-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color, var(--mat-app-on-surface-variant))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color, var(--mat-app-primary))}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color, var(--mat-app-on-surface))}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font, var(--mat-app-body-large-font));font-size:var(--mdc-outlined-text-field-label-text-size, var(--mat-app-body-large-size));font-weight:var(--mdc-outlined-text-field-label-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mdc-outlined-text-field-label-text-tracking, var(--mat-app-body-large-tracking))}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color, var(--mat-app-outline));border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color, var(--mat-app-on-surface))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color, var(--mat-app-primary))}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color, var(--mat-app-on-error-container))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color, var(--mat-app-error))}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;width:12px;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))}}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small));border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small))}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 24px)}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape, var(--mat-app-corner-extra-small)))*2)}}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color, var(--mat-app-on-surface-variant))}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color, var(--mat-app-on-surface))}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color, var(--mat-app-error))}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color, var(--mat-app-on-error-container))}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color, var(--mat-app-primary))}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color, var(--mat-app-error))}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color, var(--mat-app-error))}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font, var(--mat-app-body-small-font));line-height:var(--mat-form-field-subscript-text-line-height, var(--mat-app-body-small-line-height));font-size:var(--mat-form-field-subscript-text-size, var(--mat-app-body-small-size));letter-spacing:var(--mat-form-field-subscript-text-tracking, var(--mat-app-body-small-tracking));font-weight:var(--mat-form-field-subscript-text-weight, var(--mat-app-body-small-weight))}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color, var(--mat-app-on-surface))}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color, var(--mat-app-on-surface-variant))}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font, var(--mat-app-body-large-font));line-height:var(--mat-form-field-container-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-form-field-container-text-size, var(--mat-app-body-large-size));letter-spacing:var(--mat-form-field-container-text-tracking, var(--mat-app-body-large-tracking));font-weight:var(--mat-form-field-container-text-weight, var(--mat-app-body-large-weight))}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color, var(--mat-app-error))}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color, var(--mat-app-on-error-container))}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color, var(--mat-app-error))}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[gTt.transitionMessages]},changeDetection:0}),t})(),Yo=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ai,ti,w4,ai]}),t})(),bTt=["panel"],yTt=["*"];function wTt(t,e){if(t&1){let r=Qe();N(0,"div",1,0),yt("@panelAnimation.done",function(i){Lt(r);let n=Rt();return Nt(n._animationDone.next(i))}),pe(2),F()}if(t&2){let r=e.id,i=Rt();Ai(i._classList),ee("mat-mdc-autocomplete-visible",i.showPanel)("mat-mdc-autocomplete-hidden",!i.showPanel)("mat-primary",i._color==="primary")("mat-accent",i._color==="accent")("mat-warn",i._color==="warn"),mt("id",i.id)("@panelAnimation",i.isOpen?"visible":"hidden"),ke("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(r))}}var xTt=to("panelAnimation",[us("void, hidden",tr({opacity:0,transform:"scaleY(0.8)"})),jn(":enter, hidden => visible",[DEt([Vn("0.03s linear",tr({opacity:1})),Vn("0.12s cubic-bezier(0, 0, 0.2, 1)",tr({transform:"scaleY(1)"}))])]),jn(":leave, visible => hidden",[Vn("0.075s linear",tr({opacity:0}))])]),CTt=0,kTt=class{constructor(t,e){this.source=t,this.option=e}},Q4=new ht("mat-autocomplete-default-options",{providedIn:"root",factory:ATt});function ATt(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}var STt=(()=>{let t=class{get isOpen(){return this._isOpen&&this.showPanel}_setColor(i){this._color=i,this._changeDetectorRef.markForCheck()}set classList(i){this._classList=i,this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(i){this._hideSingleSelectionIndicator=i,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(let i of this.options)i._changeDetectorRef.markForCheck()}constructor(i,n,s,a){this._changeDetectorRef=i,this._elementRef=n,this._defaults=s,this._activeOptionChanges=vi.EMPTY,this._animationDone=new It,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new It,this.opened=new It,this.closed=new It,this.optionActivated=new It,this.id=`mat-autocomplete-${CTt++}`,this.inertGroups=a?.SAFARI||!1,this.autoActiveFirstOption=!!s.autoActiveFirstOption,this.autoSelectActiveOption=!!s.autoSelectActiveOption,this.requireSelection=!!s.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new S4(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(i=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[i]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(i){this.panel&&(this.panel.nativeElement.scrollTop=i)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(i){let n=new kTt(this,i);this.optionSelected.emit(n)}_getPanelAriaLabelledby(i){if(this.ariaLabel)return null;let n=i?i+" ":"";return this.ariaLabelledby?n+this.ariaLabelledby:i}_skipPredicate(){return!1}};return t.\u0275fac=function(r){return new(r||t)(R(di),R(te),R(Q4),R(Ui))},t.\u0275cmp=Pt({type:t,selectors:[["mat-autocomplete"]],contentQueries:function(r,i,n){if(r&1&&(Xi(n,fT,5),Xi(n,mT,5)),r&2){let s;oe(s=le())&&(i.options=s),oe(s=le())&&(i.optionGroups=s)}},viewQuery:function(r,i){if(r&1&&(gi(Vs,7),gi(bTt,5)),r&2){let n;oe(n=le())&&(i.template=n.first),oe(n=le())&&(i.panel=n.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",Ut],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",Ut],requireSelection:[2,"requireSelection","requireSelection",Ut],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",Ut],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Ut]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[We([{provide:pT,useExisting:t}]),ji,Kt],ngContentSelectors:yTt,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(r,i){r&1&&(Mi(),Wt(0,wTt,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape, var(--mat-app-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow);background-color:var(--mat-autocomplete-background-color, var(--mat-app-surface-container))}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[xTt]},changeDetection:0}),t})(),ETt={provide:lo,useExisting:fs(()=>e7),multi:!0},t7=new ht("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let t=K(Ar);return()=>t.scrollStrategies.reposition()}});function TTt(t){return()=>t.scrollStrategies.reposition()}var ITt={provide:t7,deps:[Ar],useFactory:TTt},e7=(()=>{let t=class{constructor(i,n,s,a,o,l,c,h,p,m,f){this._element=i,this._overlay=n,this._viewContainerRef=s,this._zone=a,this._changeDetectorRef=o,this._dir=c,this._formField=h,this._document=p,this._viewportRuler=m,this._defaults=f,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=vi.EMPTY,this._breakpointObserver=K(lT),this._handsetLandscapeSubscription=vi.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new Bt,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._initialized=new Bt,this._injector=K(Re),this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=Ud(()=>{let g=this.autocomplete?this.autocomplete.options:null;return g?g.changes.pipe(fr(g),_i(()=>lr(...g.map(_=>_.onSelectionChange)))):this._initialized.pipe(_i(()=>this.optionSelections))}),this._handlePanelKeydown=g=>{(g.keyCode===27&&!ps(g)||g.keyCode===38&&ps(g,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),g.stopPropagation(),g.preventDefault())},this._trackedModal=null,this._scrollStrategy=l}ngAfterViewInit(){this._initialized.next(),this._initialized.complete();let i=this._getWindow();typeof i<"u"&&this._zone.runOutsideAngular(()=>i.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(i){i.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){let i=this._getWindow();typeof i<"u"&&i.removeEventListener("blur",this._windowBlurHandler),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&ud(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return lr(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(Ye(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(Ye(()=>this._overlayAttached)):Ge()).pipe(kt(i=>i instanceof N4?i:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return lr(mr(this._document,"click"),mr(this._document,"auxclick"),mr(this._document,"touchend")).pipe(Ye(i=>{let n=pa(i),s=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,a=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&n!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!s||!s.contains(n))&&(!a||!a.contains(n))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(n)}))}writeValue(i){Promise.resolve(null).then(()=>this._assignOptionValue(i))}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this._element.nativeElement.disabled=i}_handleKeydown(i){let n=i.keyCode,s=ps(i);if(n===27&&!s&&i.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&n===13&&this.panelOpen&&!s)this.activeOption._selectViaInteraction(),this._resetActiveItem(),i.preventDefault();else if(this.autocomplete){let a=this.autocomplete._keyManager.activeItem,o=n===38||n===40;n===9||o&&!s&&this.panelOpen?this.autocomplete._keyManager.onKeydown(i):o&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(o||this.autocomplete._keyManager.activeItem!==a)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(i){let n=i.target,s=n.value;if(n.type==="number"&&(s=s==""?null:parseFloat(s)),this._previousValue!==s){if(this._previousValue=s,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(s),!s)this._clearPreviousSelectedOption(null,!1);else if(this.panelOpen&&!this.autocomplete.requireSelection){let a=this.autocomplete.options?.find(o=>o.selected);if(a){let o=this._getDisplayValue(a.value);s!==o&&a.deselect(!1)}}if(this._canOpen()&&this._document.activeElement===i.target){let a=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(a)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(i=!1){this._formField&&this._formField.floatLabel==="auto"&&(i?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){let i=new Ht(s=>{pc(()=>{s.next()},{injector:this._injector})}),n=this.autocomplete.options.changes.pipe(Li(()=>this._positionStrategy.reapplyLastPosition()),Jl(0));return lr(i,n).pipe(_i(()=>this._zone.run(()=>{let s=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),s!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),br(1)).subscribe(s=>this._setValueAndClose(s))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(i){let n=this.autocomplete;return n&&n.displayWith?n.displayWith(i):i}_assignOptionValue(i){let n=this._getDisplayValue(i);i==null&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(n??"")}_updateNativeInputValue(i){this._formField?this._formField._control.value=i:this._element.nativeElement.value=i,this._previousValue=i}_setValueAndClose(i){let n=this.autocomplete,s=i?i.source:this._pendingAutoselectedOption;s?(this._clearPreviousSelectedOption(s),this._assignOptionValue(s.value),this._onChange(s.value),n._emitSelectEvent(s),this._element.nativeElement.focus()):n.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),n._animationDone?n._animationDone.pipe(br(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(i,n){this.autocomplete?.options?.forEach(s=>{s!==i&&s.selected&&s.deselect(n)})}_openPanelInternal(i=this._element.nativeElement.value){if(this._attachOverlay(i),this._floatLabel(),this._trackedModal){let n=this.autocomplete.id;Xb(this._trackedModal,"aria-owns",n)}}_attachOverlay(i){this.autocomplete;let n=this._overlayRef;n?(this._positionStrategy.setOrigin(this._getConnectedElement()),n.updateSize({width:this._getPanelWidth()})):(this._portal=new Yu(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),n=this._overlay.create(this._getOverlayConfig()),this._overlayRef=n,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&n&&n.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe(x4.HandsetLandscape).subscribe(a=>{a.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),n&&!n.hasAttached()&&(n.attach(this._portal),this._valueOnAttach=i,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());let s=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&s!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){let i=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=i.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=i.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new mp({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){let i=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(i),this._positionStrategy=i,i}_setStrategyPositions(i){let n=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],s=this._aboveClass,a=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:s},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:s}],o;this.position==="above"?o=a:this.position==="below"?o=n:o=[...n,...a],i.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){let i=this.autocomplete;if(i.autoActiveFirstOption){let n=-1;for(let s=0;s<i.options.length;s++)if(!i.options.get(s).disabled){n=s;break}i._keyManager.setActiveItem(n)}else i._keyManager.setActiveItem(-1)}_canOpen(){let i=this._element.nativeElement;return!i.readOnly&&!i.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(i){let n=this.autocomplete,s=F4(i,n.options,n.optionGroups);if(i===0&&s===1)n._setScrollTop(0);else if(n.panel){let a=n.options.toArray()[i];if(a){let o=a._getHostElement(),l=z4(o.offsetTop,o.offsetHeight,n._getScrollTop(),n.panel.nativeElement.offsetHeight);n._setScrollTop(l)}}}_applyModalPanelOwnership(){let i=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!i)return;let n=this.autocomplete.id;this._trackedModal&&ud(this._trackedModal,"aria-owns",n),Xb(i,"aria-owns",n),this._trackedModal=i}_clearFromModal(){if(this._trackedModal){let i=this.autocomplete.id;ud(this._trackedModal,"aria-owns",i),this._trackedModal=null}}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(Ar),R(Zn),R(Zt),R(di),R(t7),R(Gn,8),R(f0,9),R(ge,8),R(d0),R(Q4,8))},t.\u0275dir=qt({type:t,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(r,i){r&1&&yt("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(n){return i._handleInput(n)})("keydown",function(n){return i._handleKeydown(n)})("click",function(){return i._handleClick()}),r&2&&ke("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-controls",i.autocompleteDisabled||!i.panelOpen||i.autocomplete==null?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",Ut]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[We([ETt]),ji,yr]}),t})(),OTt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[ITt],imports:[Ju,vf,ai,ti,Ld,vf,ai]}),t})(),UD=Ku({passive:!0}),PTt=(()=>{let t=class{constructor(i,n){this._platform=i,this._ngZone=n,this._monitoredElements=new Map}monitor(i){if(!this._platform.isBrowser)return io;let n=zo(i),s=this._monitoredElements.get(n);if(s)return s.subject;let a=new Bt,o="cdk-text-field-autofilled",l=c=>{c.animationName==="cdk-text-field-autofill-start"&&!n.classList.contains(o)?(n.classList.add(o),this._ngZone.run(()=>a.next({target:c.target,isAutofilled:!0}))):c.animationName==="cdk-text-field-autofill-end"&&n.classList.contains(o)&&(n.classList.remove(o),this._ngZone.run(()=>a.next({target:c.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",l,UD),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:a,unlisten:()=>{n.removeEventListener("animationstart",l,UD)}}),a}stopMonitoring(i){let n=zo(i),s=this._monitoredElements.get(n);s&&(s.unlisten(),s.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((i,n)=>this.stopMonitoring(n))}};return t.\u0275fac=function(r){return new(r||t)(U(Ui),U(Zt))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),MTt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})(),RTt=new ht("MAT_INPUT_VALUE_ACCESSOR"),BTt=["button","checkbox","file","hidden","image","radio","range","reset","submit"],DTt=0,th=(()=>{let t=class{get disabled(){return this._disabled}set disabled(i){this._disabled=Yl(i),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(i){this._id=i||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(lu.required)??!1}set required(i){this._required=Yl(i)}get type(){return this._type}set type(i){this._type=i||"text",this._validateType(),!this._isTextarea&&uD().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(i){this._errorStateTracker.matcher=i}get value(){return this._inputValueAccessor.value}set value(i){i!==this.value&&(this._inputValueAccessor.value=i,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(i){this._readonly=Yl(i)}get errorState(){return this._errorStateTracker.errorState}set errorState(i){this._errorStateTracker.errorState=i}constructor(i,n,s,a,o,l,c,h,p,m){this._elementRef=i,this._platform=n,this.ngControl=s,this._autofillMonitor=h,this._ngZone=p,this._formField=m,this._uid=`mat-input-${DTt++}`,this._webkitBlinkWheelListenerAttached=!1,this.focused=!1,this.stateChanges=new Bt,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(_=>uD().has(_)),this._iOSKeyupListener=_=>{let w=_.target;!w.value&&w.selectionStart===0&&w.selectionEnd===0&&(w.setSelectionRange(1,1),w.setSelectionRange(0,0))},this._webkitBlinkWheelListener=()=>{};let f=this._elementRef.nativeElement,g=f.nodeName.toLowerCase();this._inputValueAccessor=c||f,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&p.runOutsideAngular(()=>{i.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new B4(l,s,o,a,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=g==="select",this._isTextarea=g==="textarea",this._isInFormField=!!m,this._isNativeSelect&&(this.controlType=f.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(i=>{this.autofilled=i.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(i){this._elementRef.nativeElement.focus(i)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(i){i!==this.focused&&(this.focused=i,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let i=this._elementRef.nativeElement.value;this._previousNativeValue!==i&&(this._previousNativeValue=i,this.stateChanges.next())}_dirtyCheckPlaceholder(){let i=this._getPlaceholder();if(i!==this._previousPlaceholder){let n=this._elementRef.nativeElement;this._previousPlaceholder=i,i?n.setAttribute("placeholder",i):n.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){BTt.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let i=this._elementRef.nativeElement.validity;return i&&i.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let i=this._elementRef.nativeElement,n=i.options[0];return this.focused||i.multiple||!this.empty||!!(i.selectedIndex>-1&&n&&n.label)}else return this.focused||!this.empty}setDescribedByIds(i){i.length?this._elementRef.nativeElement.setAttribute("aria-describedby",i.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let i=this._elementRef.nativeElement;return this._isNativeSelect&&(i.multiple||i.size>1)}_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&this._type==="number"&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&this._type!=="number"&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(Ui),R(cl,10),R(sT,8),R(pp,8),R(dT),R(RTt,10),R(PTt),R(Zt),R(f0,8))},t.\u0275dir=qt({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(r,i){r&1&&yt("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),r&2&&(_a("id",i.id)("disabled",i.disabled)("required",i.required),ke("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),ee("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[We([{provide:bT,useExisting:t}]),yr]}),t})(),eh=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ai,Yo,Yo,MTt,ai]}),t})(),PUt=new ht("Maximum number of autocomplete options displayed",{providedIn:"root",factory(){return 10}}),LTt=["*"],Xv;function NTt(){if(Xv===void 0&&(Xv=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(Xv=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Xv}function um(t){return NTt()?.createHTML(t)||t}function HD(t){return Error(`Unable to find icon with the name "${t}"`)}function FTt(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}function GD(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function WD(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var zc=class{constructor(t,e,r){this.url=t,this.svgText=e,this.options=r}},g0=(()=>{let t=class{constructor(i,n,s,a){this._httpClient=i,this._sanitizer=n,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(i,n,s){return this.addSvgIconInNamespace("",i,n,s)}addSvgIconLiteral(i,n,s){return this.addSvgIconLiteralInNamespace("",i,n,s)}addSvgIconInNamespace(i,n,s,a){return this._addSvgIconConfig(i,n,new zc(s,null,a))}addSvgIconResolver(i){return this._resolvers.push(i),this}addSvgIconLiteralInNamespace(i,n,s,a){let o=this._sanitizer.sanitize(Nn.HTML,s);if(!o)throw WD(s);let l=um(o);return this._addSvgIconConfig(i,n,new zc("",l,a))}addSvgIconSet(i,n){return this.addSvgIconSetInNamespace("",i,n)}addSvgIconSetLiteral(i,n){return this.addSvgIconSetLiteralInNamespace("",i,n)}addSvgIconSetInNamespace(i,n,s){return this._addSvgIconSetConfig(i,new zc(n,null,s))}addSvgIconSetLiteralInNamespace(i,n,s){let a=this._sanitizer.sanitize(Nn.HTML,n);if(!a)throw WD(n);let o=um(a);return this._addSvgIconSetConfig(i,new zc("",o,s))}registerFontClassAlias(i,n=i){return this._fontCssClassesByAlias.set(i,n),this}classNameForFontAlias(i){return this._fontCssClassesByAlias.get(i)||i}setDefaultFontSetClass(...i){return this._defaultFontSetClass=i,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(i){let n=this._sanitizer.sanitize(Nn.RESOURCE_URL,i);if(!n)throw GD(i);let s=this._cachedIconsByUrl.get(n);return s?Ge(qv(s)):this._loadSvgIconFromConfig(new zc(i,null)).pipe(Li(a=>this._cachedIconsByUrl.set(n,a)),kt(a=>qv(a)))}getNamedSvgIcon(i,n=""){let s=ZD(n,i),a=this._svgIconConfigs.get(s);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(n,i),a)return this._svgIconConfigs.set(s,a),this._getSvgFromConfig(a);let o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(i,o):If(HD(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(i){return i.svgText?Ge(qv(this._svgElementFromConfig(i))):this._loadSvgIconFromConfig(i).pipe(kt(n=>qv(n)))}_getSvgFromIconSetConfigs(i,n){let s=this._extractIconWithNameFromAnySet(i,n);if(s)return Ge(s);let a=n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(il(l=>{let c=`Loading icon set URL: ${this._sanitizer.sanitize(Nn.RESOURCE_URL,o.url)} failed: ${l.message}`;return this._errorHandler.handleError(new Error(c)),Ge(null)})));return Of(a).pipe(kt(()=>{let o=this._extractIconWithNameFromAnySet(i,n);if(!o)throw HD(i);return o}))}_extractIconWithNameFromAnySet(i,n){for(let s=n.length-1;s>=0;s--){let a=n[s];if(a.svgText&&a.svgText.toString().indexOf(i)>-1){let o=this._svgElementFromConfig(a),l=this._extractSvgIconFromSet(o,i,a.options);if(l)return l}}return null}_loadSvgIconFromConfig(i){return this._fetchIcon(i).pipe(Li(n=>i.svgText=n),kt(()=>this._svgElementFromConfig(i)))}_loadSvgIconSetFromConfig(i){return i.svgText?Ge(null):this._fetchIcon(i).pipe(Li(n=>i.svgText=n))}_extractSvgIconFromSet(i,n,s){let a=i.querySelector(`[id="${n}"]`);if(!a)return null;let o=a.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,s);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),s);let l=this._svgElementFromString(um("<svg></svg>"));return l.appendChild(o),this._setSvgAttributes(l,s)}_svgElementFromString(i){let n=this._document.createElement("DIV");n.innerHTML=i;let s=n.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(i){let n=this._svgElementFromString(um("<svg></svg>")),s=i.attributes;for(let a=0;a<s.length;a++){let{name:o,value:l}=s[a];o!=="id"&&n.setAttribute(o,l)}for(let a=0;a<i.childNodes.length;a++)i.childNodes[a].nodeType===this._document.ELEMENT_NODE&&n.appendChild(i.childNodes[a].cloneNode(!0));return n}_setSvgAttributes(i,n){return i.setAttribute("fit",""),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),n&&n.viewBox&&i.setAttribute("viewBox",n.viewBox),i}_fetchIcon(i){let{url:n,options:s}=i,a=s?.withCredentials??!1;if(!this._httpClient)throw FTt();if(n==null)throw Error(`Cannot fetch icon from URL "${n}".`);let o=this._sanitizer.sanitize(Nn.RESOURCE_URL,n);if(!o)throw GD(n);let l=this._inProgressUrlFetches.get(o);if(l)return l;let c=this._httpClient.get(o,{responseType:"text",withCredentials:a}).pipe(kt(h=>um(h)),Pf(()=>this._inProgressUrlFetches.delete(o)),oa());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(i,n,s){return this._svgIconConfigs.set(ZD(i,n),s),this}_addSvgIconSetConfig(i,n){let s=this._iconSetConfigs.get(i);return s?s.push(n):this._iconSetConfigs.set(i,[n]),this}_svgElementFromConfig(i){if(!i.svgElement){let n=this._svgElementFromString(i.svgText);this._setSvgAttributes(n,i.options),i.svgElement=n}return i.svgElement}_getIconConfigFromResolvers(i,n){for(let s=0;s<this._resolvers.length;s++){let a=this._resolvers[s](n,i);if(a)return zTt(a)?new zc(a.url,null,a.options):new zc(a,null)}}};return t.\u0275fac=function(r){return new(r||t)(U(js,8),U(rp),U(ge,8),U(ga))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function qv(t){return t.cloneNode(!0)}function ZD(t,e){return t+":"+e}function zTt(t){return!!(t.url&&t.options)}var VTt=new ht("MAT_ICON_DEFAULT_OPTIONS"),jTt=new ht("mat-icon-location",{providedIn:"root",factory:UTt});function UTt(){let t=K(ge),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var i7=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],HTt=i7.map(t=>`[${t}]`).join(", "),GTt=/^url\(['"]?#(.*?)['"]?\)$/,gr=(()=>{let t=class{get color(){return this._color||this._defaultColor}set color(i){this._color=i}get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}get fontSet(){return this._fontSet}set fontSet(i){let n=this._cleanupFontValue(i);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(i){let n=this._cleanupFontValue(i);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}constructor(i,n,s,a,o,l){this._elementRef=i,this._iconRegistry=n,this._location=a,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=vi.EMPTY,l&&(l.color&&(this.color=this._defaultColor=l.color),l.fontSet&&(this.fontSet=l.fontSet)),s||i.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];let n=i.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let i=this._elementsWithExternalReferences;if(i&&i.size){let n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();let n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){let i=this._elementRef.nativeElement,n=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){let s=i.childNodes[n];(s.nodeType!==1||s.nodeName.toLowerCase()==="svg")&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let i=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>i.classList.remove(s)),n.forEach(s=>i.classList.add(s)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return typeof i=="string"?i.trim().split(" ")[0]:i}_prependPathToReferences(i){let n=this._elementsWithExternalReferences;n&&n.forEach((s,a)=>{s.forEach(o=>{a.setAttribute(o.name,`url('${i}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(i){let n=i.querySelectorAll(HTt),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<n.length;a++)i7.forEach(o=>{let l=n[a],c=l.getAttribute(o),h=c?c.match(GTt):null;if(h){let p=s.get(l);p||(p=[],s.set(l,p)),p.push({name:o,value:h[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){let[n,s]=this._splitIconName(i);n&&(this._svgNamespace=n),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,n).pipe(br(1)).subscribe(a=>this._setSvgElement(a),a=>{let o=`Error retrieving icon ${n}:${s}! ${a.message}`;this._errorHandler.handleError(new Error(o))})}}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(g0),Kd("aria-hidden"),R(jTt),R(ga),R(VTt,8))},t.\u0275cmp=Pt({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,i){r&2&&(ke("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Ai(i.color?"mat-"+i.color:""),ee("mat-icon-inline",i.inline)("mat-icon-no-color",i.color!=="primary"&&i.color!=="accent"&&i.color!=="warn"))},inputs:{color:"color",inline:[2,"inline","inline",Ut],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[ji,Kt],ngContentSelectors:LTt,decls:1,vars:0,template:function(r,i){r&1&&(Mi(),pe(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),t})(),Hi=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ai,ai]}),t})(),WTt=["tooltip"],r7=20,n7=new ht("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let t=K(Ar);return()=>t.scrollStrategies.reposition({scrollThrottle:r7})}});function ZTt(t){return()=>t.scrollStrategies.reposition({scrollThrottle:r7})}var $Tt={provide:n7,deps:[Ar],useFactory:ZTt};function XTt(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var qTt=new ht("mat-tooltip-default-options",{providedIn:"root",factory:XTt}),$D="tooltip-panel",XD=Ku({passive:!0}),KTt=8,YTt=8,JTt=24,QTt=200,Ek=(()=>{let t=class{get position(){return this._position}set position(i){i!==this._position&&(this._position=i,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(i){this._positionAtOrigin=Yl(i),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(i){let n=Yl(i);this._disabled!==n&&(this._disabled=n,n?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(i){this._showDelay=Zb(i)}get hideDelay(){return this._hideDelay}set hideDelay(i){this._hideDelay=Zb(i),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(i){let n=this._message;this._message=i!=null?String(i).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(n)}get tooltipClass(){return this._tooltipClass}set tooltipClass(i){this._tooltipClass=i,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(i,n,s,a,o,l,c,h,p,m,f,g){this._overlay=i,this._elementRef=n,this._scrollDispatcher=s,this._viewContainerRef=a,this._ngZone=o,this._platform=l,this._ariaDescriber=c,this._focusMonitor=h,this._dir=m,this._defaultOptions=f,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=tIt,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Bt,this._injector=K(Re),this._scrollStrategy=p,this._document=g,f&&(this._showDelay=f.showDelay,this._hideDelay=f.hideDelay,f.position&&(this.position=f.position),f.positionAtOrigin&&(this.positionAtOrigin=f.positionAtOrigin),f.touchGestures&&(this.touchGestures=f.touchGestures),f.tooltipClass&&(this.tooltipClass=f.tooltipClass)),m.change.pipe(Me(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=KTt}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Me(this._destroyed)).subscribe(i=>{i?i==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let i=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,s])=>{i.removeEventListener(n,s,XD)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(i,this.message,"tooltip"),this._focusMonitor.stopMonitoring(i)}show(i=this.showDelay,n){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let s=this._createOverlay(n);this._detach(),this._portal=this._portal||new Nd(this._tooltipComponent,this._viewContainerRef);let a=this._tooltipInstance=s.attach(this._portal).instance;a._triggerElement=this._elementRef.nativeElement,a._mouseLeaveHideDelay=this._hideDelay,a.afterHidden().pipe(Me(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),a.show(i)}hide(i=this.hideDelay){let n=this._tooltipInstance;n&&(n.isVisible()?n.hide(i):(n._cancelPendingAnimations(),this._detach()))}toggle(i){this._isTooltipVisible()?this.hide():this.show(void 0,i)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(i){if(this._overlayRef){let a=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!i)&&a._origin instanceof te)return this._overlayRef;this._detach()}let n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),s=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin?i||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return s.positionChanges.pipe(Me(this._destroyed)).subscribe(a=>{this._updateCurrentPositionClass(a.connectionPair),this._tooltipInstance&&a.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:s,panelClass:`${this._cssClassPrefix}-${$D}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Me(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Me(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Me(this._destroyed)).subscribe(a=>{this._isTooltipVisible()&&a.keyCode===27&&!ps(a)&&(a.preventDefault(),a.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(i){let n=i.getConfig().positionStrategy,s=this._getOrigin(),a=this._getOverlayPosition();n.withPositions([this._addOffset(x(x({},s.main),a.main)),this._addOffset(x(x({},s.fallback),a.fallback))])}_addOffset(i){let n=YTt,s=!this._dir||this._dir.value=="ltr";return i.originY==="top"?i.offsetY=-n:i.originY==="bottom"?i.offsetY=n:i.originX==="start"?i.offsetX=s?-n:n:i.originX==="end"&&(i.offsetX=s?n:-n),i}_getOrigin(){let i=!this._dir||this._dir.value=="ltr",n=this.position,s;n=="above"||n=="below"?s={originX:"center",originY:n=="above"?"top":"bottom"}:n=="before"||n=="left"&&i||n=="right"&&!i?s={originX:"start",originY:"center"}:(n=="after"||n=="right"&&i||n=="left"&&!i)&&(s={originX:"end",originY:"center"});let{x:a,y:o}=this._invertPosition(s.originX,s.originY);return{main:s,fallback:{originX:a,originY:o}}}_getOverlayPosition(){let i=!this._dir||this._dir.value=="ltr",n=this.position,s;n=="above"?s={overlayX:"center",overlayY:"bottom"}:n=="below"?s={overlayX:"center",overlayY:"top"}:n=="before"||n=="left"&&i||n=="right"&&!i?s={overlayX:"end",overlayY:"center"}:(n=="after"||n=="right"&&i||n=="left"&&!i)&&(s={overlayX:"start",overlayY:"center"});let{x:a,y:o}=this._invertPosition(s.overlayX,s.overlayY);return{main:s,fallback:{overlayX:a,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),pc(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(i){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=i,this._tooltipInstance._markForCheck())}_invertPosition(i,n){return this.position==="above"||this.position==="below"?n==="top"?n="bottom":n==="bottom"&&(n="top"):i==="end"?i="start":i==="start"&&(i="end"),{x:i,y:n}}_updateCurrentPositionClass(i){let{overlayY:n,originX:s,originY:a}=i,o;if(n==="center"?this._dir&&this._dir.value==="rtl"?o=s==="end"?"left":"right":o=s==="start"?"left":"right":o=n==="bottom"&&a==="top"?"above":"below",o!==this._currentPosition){let l=this._overlayRef;if(l){let c=`${this._cssClassPrefix}-${$D}-`;l.removePanelClass(c+this._currentPosition),l.addPanelClass(c+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",i=>{this._setupPointerExitEventsIfNeeded();let n;i.x!==void 0&&i.y!==void 0&&(n=i),this.show(void 0,n)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",i=>{let n=i.targetTouches?.[0],s=n?{x:n.clientX,y:n.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout);let a=500;this._touchstartTimeout=setTimeout(()=>this.show(void 0,s),this._defaultOptions.touchLongPressShowDelay??a)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let i=[];if(this._platformSupportsMouseEvents())i.push(["mouseleave",n=>{let s=n.relatedTarget;(!s||!this._overlayRef?.overlayElement.contains(s))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};i.push(["touchend",n],["touchcancel",n])}this._addListeners(i),this._passiveListeners.push(...i)}_addListeners(i){i.forEach(([n,s])=>{this._elementRef.nativeElement.addEventListener(n,s,XD)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(i){if(this._isTooltipVisible()){let n=this._document.elementFromPoint(i.clientX,i.clientY),s=this._elementRef.nativeElement;n!==s&&!s.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){let i=this.touchGestures;if(i!=="off"){let n=this._elementRef.nativeElement,s=n.style;(i==="on"||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA")&&(s.userSelect=s.msUserSelect=s.webkitUserSelect=s.MozUserSelect="none"),(i==="on"||!n.draggable)&&(s.webkitUserDrag="none"),s.touchAction="none",s.webkitTapHighlightColor="transparent"}}_syncAriaDescription(i){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,i,"tooltip"),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}};return t.\u0275fac=function(r){return new(r||t)(R(Ar),R(te),R(gT),R(Zn),R(Zt),R(Ui),R(kSt),R(ul),R(n7),R(Gn),R(qTt,8),R(ge))},t.\u0275dir=qt({type:t,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(r,i){r&2&&ee("mat-mdc-tooltip-disabled",i.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0}),t})(),tIt=(()=>{let t=class{constructor(i,n,s){this._changeDetectorRef=i,this._elementRef=n,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Bt,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled=s==="NoopAnimations"}show(i){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},i)}hide(i){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},i)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:i}){(!i||!this._triggerElement.contains(i))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let i=this._elementRef.nativeElement.getBoundingClientRect();return i.height>JTt&&i.width>=QTt}_handleAnimationEnd({animationName:i}){(i===this._showAnimation||i===this._hideAnimation)&&this._finalizeAnimation(i===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(i){i?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(i){let n=this._tooltip.nativeElement,s=this._showAnimation,a=this._hideAnimation;if(n.classList.remove(i?a:s),n.classList.add(i?s:a),this._isVisible!==i&&(this._isVisible=i,this._changeDetectorRef.markForCheck()),i&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let o=getComputedStyle(n);(o.getPropertyValue("animation-duration")==="0s"||o.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}i&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(i))}};return t.\u0275fac=function(r){return new(r||t)(R(di),R(te),R(kr,8))},t.\u0275cmp=Pt({type:t,selectors:[["mat-tooltip-component"]],viewQuery:function(r,i){if(r&1&&gi(WTt,7),r&2){let n;oe(n=le())&&(i._tooltip=n.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(r,i){r&1&&yt("mouseleave",function(n){return i._handleMouseLeave(n)}),r&2&&Ya("zoom",i.isVisible()?1:null)},standalone:!0,features:[Kt],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(r,i){if(r&1){let n=Qe();N(0,"div",1,0),yt("animationend",function(s){return Lt(n),Nt(i._handleAnimationEnd(s))}),N(2,"div",2),ut(3),F()()}r&2&&(ee("mdc-tooltip--multiline",i._isMultiline),mt("ngClass",i.tooltipClass),$(3),Oi(i.message))},dependencies:[_z],styles:['.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-app-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-app-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-app-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-app-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-app-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-app-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-app-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),t})(),eIt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[$Tt],imports:[R4,ti,Ju,ai,ai,Ld]}),t})(),FUt=tl(uN()),iIt=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{src:"app:manubrium",organ:"Manubrium",name:"Manubrium",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_2001553"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0002119"},{disabled:!0,src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0002118"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:renal-pelvis-left",organ:"Renal Pelvis",name:"Renal Pelvis, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0018115"},{src:"app:renal-pelvis-right",organ:"Renal Pelvis",name:"Renal Pelvis, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0018116"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:sternum",organ:"Sternum",name:"Sternum",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000975"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((t,e)=>t.name.localeCompare(e.name)),bf=iIt.filter(t=>t.disabled!==!0),rIt=["knob"],nIt=["valueIndicatorContainer"];function sIt(t,e){if(t&1&&(N(0,"div",2,1)(2,"div",5)(3,"span",6),ut(4),F()()()),t&2){let r=Rt();$(4),Oi(r.valueIndicatorText)}}var aIt=["trackActive"],oIt=["*"];function lIt(t,e){if(t&1&&Ot(0,"div"),t&2){let r=e.$implicit,i=e.$index,n=Rt(3);Ai(r===0?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Ya("transform",n._calcTickMarkTransform(i))}}function cIt(t,e){if(t&1&&ic(0,lIt,1,4,"div",8,Trt),t&2){let r=Rt(2);rc(r._tickMarks)}}function uIt(t,e){if(t&1&&(N(0,"div",6,1),Wt(2,cIt,2,0),F()),t&2){let r=Rt();$(2),ae(r._cachedWidth?2:-1)}}function hIt(t,e){if(t&1&&Ot(0,"mat-slider-visual-thumb",7),t&2){let r=Rt();mt("discrete",r.discrete)("thumbPosition",1)("valueIndicatorText",r.startValueIndicatorText)}}var Ee=function(t){return t[t.START=1]="START",t[t.END=2]="END",t}(Ee||{}),qh=function(t){return t[t.ACTIVE=0]="ACTIVE",t[t.INACTIVE=1]="INACTIVE",t}(qh||{}),wT=new ht("_MatSlider"),s7=new ht("_MatSliderThumb"),dIt=new ht("_MatSliderRangeThumb"),a7=new ht("_MatSliderVisualThumb"),pIt=(()=>{let t=class{constructor(i,n,s,a){this._cdr=i,this._ngZone=n,this._slider=a,this._isHovered=!1,this._isActive=!1,this._isValueIndicatorVisible=!1,this._platform=K(Ui),this._onPointerMove=o=>{if(this._sliderInput._isFocused)return;let l=this._hostElement.getBoundingClientRect(),c=this._slider._isCursorOnSliderThumb(o,l);this._isHovered=c,c?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)},this._onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)},this._onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")},this._onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")},this._onDragStart=o=>{o.button===0&&(this._isActive=!0,this._showActiveRipple())},this._onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef),this._platform.SAFARI&&this._showHoverRipple()},this._hostElement=s.nativeElement}ngAfterViewInit(){this._ripple.radius=24,this._sliderInput=this._slider._getInput(this.thumbPosition),this._sliderInputEl=this._sliderInput._hostElement;let i=this._sliderInputEl;this._ngZone.runOutsideAngular(()=>{i.addEventListener("pointermove",this._onPointerMove),i.addEventListener("pointerdown",this._onDragStart),i.addEventListener("pointerup",this._onDragEnd),i.addEventListener("pointerleave",this._onMouseLeave),i.addEventListener("focus",this._onFocus),i.addEventListener("blur",this._onBlur)})}ngOnDestroy(){let i=this._sliderInputEl;i&&(i.removeEventListener("pointermove",this._onPointerMove),i.removeEventListener("pointerdown",this._onDragStart),i.removeEventListener("pointerup",this._onDragEnd),i.removeEventListener("pointerleave",this._onMouseLeave),i.removeEventListener("focus",this._onFocus),i.removeEventListener("blur",this._onBlur))}_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(i){return i?.state===Dn.FADING_IN||i?.state===Dn.VISIBLE}_showRipple(i,n){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(this.thumbPosition===Ee.START?Ee.END:Ee.START)._showValueIndicator(),!(this._slider._globalRippleOptions?.disabled&&!n)))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:i,centered:!0,persistent:!0})}_hideRipple(i){if(i?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();let n=this._getSibling();n._isShowingAnyRipple()||(this._hideValueIndicator(),n._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(this.thumbPosition===Ee.START?Ee.END:Ee.START)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}};return t.\u0275fac=function(r){return new(r||t)(R(di),R(Zt),R(te),R(wT))},t.\u0275cmp=Pt({type:t,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(r,i){if(r&1&&(gi(ac,5),gi(rIt,5),gi(nIt,5)),r&2){let n;oe(n=le())&&(i._ripple=n.first),oe(n=le())&&(i._knob=n.first),oe(n=le())&&(i._valueIndicatorContainer=n.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},standalone:!0,features:[We([{provide:a7,useExisting:t}]),Kt],decls:4,vars:2,consts:[["knob",""],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator-container"],[1,"mdc-slider__thumb-knob"],["matRipple","",1,"mat-mdc-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(r,i){r&1&&(Wt(0,sIt,5,1,"div",2),Ot(1,"div",3,0)(3,"div",4)),r&2&&(ae(i.discrete?0:-1),$(3),mt("matRippleDisabled",!0))},dependencies:[ac],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0}),t})(),o7=(()=>{let t=class{get disabled(){return this._disabled}set disabled(i){this._disabled=i;let n=this._getInput(Ee.END),s=this._getInput(Ee.START);n&&(n.disabled=this._disabled),s&&(s.disabled=this._disabled)}get discrete(){return this._discrete}set discrete(i){this._discrete=i,this._updateValueIndicatorUIs()}get min(){return this._min}set min(i){let n=isNaN(i)?this._min:i;this._min!==n&&this._updateMin(n)}_updateMin(i){let n=this._min;this._min=i,this._isRange?this._updateMinRange({old:n,new:i}):this._updateMinNonRange(i),this._onMinMaxOrStepChange()}_updateMinRange(i){let n=this._getInput(Ee.END),s=this._getInput(Ee.START),a=n.value,o=s.value;s.min=i.new,n.min=Math.max(i.new,s.value),s.max=Math.min(n.max,n.value),s._updateWidthInactive(),n._updateWidthInactive(),i.new<i.old?this._onTranslateXChangeBySideEffect(n,s):this._onTranslateXChangeBySideEffect(s,n),a!==n.value&&this._onValueChange(n),o!==s.value&&this._onValueChange(s)}_updateMinNonRange(i){let n=this._getInput(Ee.END);if(n){let s=n.value;n.min=i,n._updateThumbUIByValue(),this._updateTrackUI(n),s!==n.value&&this._onValueChange(n)}}get max(){return this._max}set max(i){let n=isNaN(i)?this._max:i;this._max!==n&&this._updateMax(n)}_updateMax(i){let n=this._max;this._max=i,this._isRange?this._updateMaxRange({old:n,new:i}):this._updateMaxNonRange(i),this._onMinMaxOrStepChange()}_updateMaxRange(i){let n=this._getInput(Ee.END),s=this._getInput(Ee.START),a=n.value,o=s.value;n.max=i.new,s.max=Math.min(i.new,n.value),n.min=s.value,n._updateWidthInactive(),s._updateWidthInactive(),i.new>i.old?this._onTranslateXChangeBySideEffect(s,n):this._onTranslateXChangeBySideEffect(n,s),a!==n.value&&this._onValueChange(n),o!==s.value&&this._onValueChange(s)}_updateMaxNonRange(i){let n=this._getInput(Ee.END);if(n){let s=n.value;n.max=i,n._updateThumbUIByValue(),this._updateTrackUI(n),s!==n.value&&this._onValueChange(n)}}get step(){return this._step}set step(i){let n=isNaN(i)?this._step:i;this._step!==n&&this._updateStep(n)}_updateStep(i){this._step=i,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){let i=this._getInput(Ee.END),n=this._getInput(Ee.START),s=i.value,a=n.value,o=n.value;i.min=this._min,n.max=this._max,i.step=this._step,n.step=this._step,this._platform.SAFARI&&(i.value=i.value,n.value=n.value),i.min=Math.max(this._min,n.value),n.max=Math.min(this._max,i.value),n._updateWidthInactive(),i._updateWidthInactive(),i.value<o?this._onTranslateXChangeBySideEffect(n,i):this._onTranslateXChangeBySideEffect(i,n),s!==i.value&&this._onValueChange(i),a!==n.value&&this._onValueChange(n)}_updateStepNonRange(){let i=this._getInput(Ee.END);if(i){let n=i.value;i.step=this._step,this._platform.SAFARI&&(i.value=i.value),i._updateThumbUIByValue(),n!==i.value&&this._onValueChange(i)}}constructor(i,n,s,a,o,l){this._ngZone=i,this._cdr=n,this._elementRef=s,this._dir=a,this._globalRippleOptions=o,this._disabled=!1,this._discrete=!1,this.showTickMarks=!1,this._min=0,this.disableRipple=!1,this._max=100,this._step=1,this.displayWith=c=>`${c}`,this._rippleRadius=24,this.startValueIndicatorText="",this.endValueIndicatorText="",this._isRange=!1,this._isRtl=!1,this._hasViewInitialized=!1,this._tickMarkTrackWidth=0,this._hasAnimation=!1,this._resizeTimer=null,this._platform=K(Ui),this._knobRadius=8,this._thumbsOverlap=!1,this._noopAnimations=l==="NoopAnimations",this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl=this._dir.value==="rtl"}ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();let i=this._getInput(Ee.END),n=this._getInput(Ee.START);this._isRange=!!i&&!!n,this._cdr.detectChanges();let s=this._getThumb(Ee.END);this._rippleRadius=s._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._isRange?this._initUIRange(i,n):this._initUINonRange(i),this._updateTrackUI(i),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(i){i.initProps(),i.initUI(),this._updateValueIndicatorUI(i),this._hasViewInitialized=!0,i._updateThumbUIByValue()}_initUIRange(i,n){i.initProps(),i.initUI(),n.initProps(),n.initUI(),i._updateMinMax(),n._updateMinMax(),i._updateStaticStyles(),n._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,i._updateThumbUIByValue(),n._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl=this._dir.value==="rtl",this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){let i=this._getInput(Ee.END),n=this._getInput(Ee.START);i._setIsLeftThumb(),n._setIsLeftThumb(),i.translateX=i._calcTranslateXByValue(),n.translateX=n._calcTranslateXByValue(),i._updateStaticStyles(),n._updateStaticStyles(),i._updateWidthInactive(),n._updateWidthInactive(),i._updateThumbUIByValue(),n._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(Ee.END)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(Ee.START)._isActive||this._getThumb(Ee.END)._isActive}_getValue(i=Ee.END){let n=this._getInput(i);return n?n.value:this.min}_skipUpdate(){return!!(this._getInput(Ee.START)?._skipUIUpdate||this._getInput(Ee.END)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(i){let n=this._trackActive.nativeElement.style;n.left=i.left,n.right=i.right,n.transformOrigin=i.transformOrigin,n.transform=i.transform}_calcTickMarkTransform(i){return`translateX(${i*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(i){this._hasViewInitialized&&(this._updateThumbUI(i),this._updateTrackUI(i),this._updateOverlappingThumbUI(i))}_onTranslateXChangeBySideEffect(i,n){this._hasViewInitialized&&(i._updateThumbUIByValue(),n._updateThumbUIByValue())}_onValueChange(i){this._hasViewInitialized&&(this._updateValueIndicatorUI(i),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){let i=this._getInput(Ee.END),n=this._getInput(Ee.START);i._updateThumbUIByValue(),n._updateThumbUIByValue(),i._updateStaticStyles(),n._updateStaticStyles(),i._updateMinMax(),n._updateMinMax(),i._updateWidthInactive(),n._updateWidthInactive()}else{let i=this._getInput(Ee.END);i&&i._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_areThumbsOverlapping(){let i=this._getInput(Ee.START),n=this._getInput(Ee.END);return!i||!n?!1:n.translateX-i.translateX<20}_updateOverlappingThumbClassNames(i){let n=i.getSibling(),s=this._getThumb(i.thumbPosition);this._getThumb(n.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),s._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(i){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(i))}_updateThumbUI(i){if(this._skipUpdate())return;let n=this._getThumb(i.thumbPosition===Ee.END?Ee.END:Ee.START);n._hostElement.style.transform=`translateX(${i.translateX}px)`}_updateValueIndicatorUI(i){if(this._skipUpdate())return;let n=this.displayWith(i.value);if(this._hasViewInitialized?i._valuetext.set(n):i._hostElement.setAttribute("aria-valuetext",n),this.discrete){i.thumbPosition===Ee.START?this.startValueIndicatorText=n:this.endValueIndicatorText=n;let s=this._getThumb(i.thumbPosition);n.length<3?s._hostElement.classList.add("mdc-slider__thumb--short-value"):s._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){let i=this._getInput(Ee.END),n=this._getInput(Ee.START);i&&this._updateValueIndicatorUI(i),n&&this._updateValueIndicatorUI(n)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;let i=this._step&&this._step>0?this._step:1,n=(Math.floor(this.max/i)*i-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*n-6}_updateTrackUI(i){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(i):this._updateTrackUINonRange(i))}_updateTrackUIRange(i){let n=i.getSibling();if(!n||!this._cachedWidth)return;let s=Math.abs(n.translateX-i.translateX)/this._cachedWidth;i._isLeftThumb&&this._cachedWidth?this._setTrackActiveStyles({left:"auto",right:`${this._cachedWidth-n.translateX}px`,transformOrigin:"right",transform:`scaleX(${s})`}):this._setTrackActiveStyles({left:`${n.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${s})`})}_updateTrackUINonRange(i){this._isRtl?this._setTrackActiveStyles({left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-i.fillPercentage})`}):this._setTrackActiveStyles({left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${i.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||this.step===void 0||this.min===void 0||this.max===void 0)return;let i=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(i):this._updateTickMarkUINonRange(i),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(i){let n=this._getValue(),s=Math.max(Math.round((n-this.min)/i),0),a=Math.max(Math.round((this.max-n)/i),0);this._isRtl?s++:a++,this._tickMarks=Array(s).fill(qh.ACTIVE).concat(Array(a).fill(qh.INACTIVE))}_updateTickMarkUIRange(i){let n=this._getValue(),s=this._getValue(Ee.START),a=Math.max(Math.round((s-this.min)/i),0),o=Math.max(Math.round((n-s)/i)+1,0),l=Math.max(Math.round((this.max-n)/i),0);this._tickMarks=Array(a).fill(qh.INACTIVE).concat(Array(o).fill(qh.ACTIVE),Array(l).fill(qh.INACTIVE))}_getInput(i){if(i===Ee.END&&this._input)return this._input;if(this._inputs?.length)return i===Ee.START?this._inputs.first:this._inputs.last}_getThumb(i){return i===Ee.END?this._thumbs?.last:this._thumbs?.first}_setTransition(i){this._hasAnimation=!this._platform.IOS&&i&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}_isCursorOnSliderThumb(i,n){let s=n.width/2,a=n.x+s,o=n.y+s,l=i.clientX-a,c=i.clientY-o;return Math.pow(l,2)+Math.pow(c,2)<Math.pow(s,2)}};return t.\u0275fac=function(r){return new(r||t)(R(Zt),R(di),R(te),R(Gn,8),R(h0,8),R(kr,8))},t.\u0275cmp=Pt({type:t,selectors:[["mat-slider"]],contentQueries:function(r,i,n){if(r&1&&(Xi(n,s7,5),Xi(n,dIt,4)),r&2){let s;oe(s=le())&&(i._input=s.first),oe(s=le())&&(i._inputs=s)}},viewQuery:function(r,i){if(r&1&&(gi(aIt,5),gi(a7,5)),r&2){let n;oe(n=le())&&(i._trackActive=n.first),oe(n=le())&&(i._thumbs=n)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:12,hostBindings:function(r,i){r&2&&(Ai("mat-"+(i.color||"primary")),ee("mdc-slider--range",i._isRange)("mdc-slider--disabled",i.disabled)("mdc-slider--discrete",i.discrete)("mdc-slider--tick-marks",i.showTickMarks)("_mat-animation-noopable",i._noopAnimations))},inputs:{disabled:[2,"disabled","disabled",Ut],discrete:[2,"discrete","discrete",Ut],showTickMarks:[2,"showTickMarks","showTickMarks",Ut],min:[2,"min","min",or],color:"color",disableRipple:[2,"disableRipple","disableRipple",Ut],max:[2,"max","max",or],step:[2,"step","step",or],displayWith:"displayWith"},exportAs:["matSlider"],standalone:!0,features:[We([{provide:wT,useExisting:t}]),ji,Kt],ngContentSelectors:oIt,decls:9,vars:5,consts:[["trackActive",""],["tickMarkContainer",""],[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],[1,"mdc-slider__tick-marks"],[3,"discrete","thumbPosition","valueIndicatorText"],[3,"class","transform"]],template:function(r,i){r&1&&(Mi(),pe(0),N(1,"div",2),Ot(2,"div",3),N(3,"div",4),Ot(4,"div",5,0),F(),Wt(6,uIt,3,1,"div",6),F(),Wt(7,hIt,1,3,"mat-slider-visual-thumb",7),Ot(8,"mat-slider-visual-thumb",7)),r&2&&($(6),ae(i.showTickMarks?6:-1),$(),ae(i._isRange?7:-1),$(),mt("discrete",i.discrete)("thumbPosition",2)("valueIndicatorText",i.endValueIndicatorText))},dependencies:[pIt],styles:['.mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%;pointer-events:none;height:var(--mdc-slider-inactive-track-height)}.mdc-slider__track--active,.mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider__track--active{overflow:hidden;border-radius:var(--mdc-slider-active-track-shape, var(--mat-app-corner-full));height:var(--mdc-slider-active-track-height);top:calc((var(--mdc-slider-inactive-track-height) - var(--mdc-slider-active-track-height))/2)}.mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;transform-origin:left;transition:transform 80ms ease;border-color:var(--mdc-slider-active-track-color, var(--mat-app-primary));border-top-width:var(--mdc-slider-active-track-height)}.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mat-app-on-surface))}[dir=rtl] .mdc-slider__track--active_fill{-webkit-transform-origin:right;transform-origin:right}.mdc-slider__track--inactive{left:0;top:0;opacity:.24;background-color:var(--mdc-slider-inactive-track-color, var(--mat-app-surface-variant));height:var(--mdc-slider-inactive-track-height);border-radius:var(--mdc-slider-inactive-track-shape, var(--mat-app-corner-full))}.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mat-app-on-surface));opacity:.24}.mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-slider__track--inactive::before{border-color:CanvasText}.mdc-slider__value-indicator-container{bottom:44px;left:50%;pointer-events:none;position:absolute;transform:translateX(-50%);transform:var(--mat-slider-value-indicator-container-transform)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider__value-indicator{display:flex;align-items:center;border-radius:4px;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom;opacity:1;transition:transform 100ms cubic-bezier(0.4, 0, 1, 1);word-break:normal;background-color:var(--mdc-slider-label-container-color, var(--mat-app-primary));color:var(--mdc-slider-label-label-text-color, var(--mat-app-on-primary));width:var(--mat-slider-value-indicator-width);height:var(--mat-slider-value-indicator-height);padding:var(--mat-slider-value-indicator-padding);opacity:var(--mat-slider-value-indicator-opacity);border-radius:var(--mat-slider-value-indicator-border-radius)}.mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}.mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;display:var(--mat-slider-value-indicator-caret-display);border-top-color:var(--mdc-slider-label-container-color, var(--mat-app-primary))}.mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.cdk-high-contrast-active .mdc-slider__value-indicator::after{border-color:CanvasText}.mdc-slider__value-indicator-text{text-align:center;width:var(--mat-slider-value-indicator-width);transform:var(--mat-slider-value-indicator-text-transform);font-family:var(--mdc-slider-label-label-text-font, var(--mat-app-label-medium-font));font-size:var(--mdc-slider-label-label-text-size, var(--mat-app-label-medium-size));font-weight:var(--mdc-slider-label-label-text-weight, var(--mat-app-label-medium-weight));line-height:var(--mdc-slider-label-label-text-line-height, var(--mat-app-label-medium-line-height));letter-spacing:var(--mdc-slider-label-label-text-tracking, var(--mat-app-label-medium-tracking))}.mdc-slider__thumb{-webkit-user-select:none;user-select:none;display:flex;left:-24px;outline:none;position:absolute;height:48px;width:48px;pointer-events:none}.mdc-slider--discrete .mdc-slider__thumb{transition:transform 80ms ease}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__thumb--top{z-index:1}.mdc-slider__thumb-knob{position:absolute;box-sizing:border-box;left:50%;top:50%;transform:translate(-50%, -50%);border-style:solid;width:var(--mdc-slider-handle-width);height:var(--mdc-slider-handle-height);border-width:calc(var(--mdc-slider-handle-height)/2) calc(var(--mdc-slider-handle-width)/2);box-shadow:var(--mdc-slider-handle-elevation, var(--mat-app-level1));background-color:var(--mdc-slider-handle-color, var(--mat-app-primary));border-color:var(--mdc-slider-handle-color, var(--mat-app-primary));border-radius:var(--mdc-slider-handle-shape, var(--mat-app-corner-full))}.mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mat-app-primary));border-color:var(--mdc-slider-hover-handle-color, var(--mat-app-primary))}.mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mat-app-primary));border-color:var(--mdc-slider-focus-handle-color, var(--mat-app-primary))}.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mat-app-on-surface));border-color:var(--mdc-slider-disabled-handle-color, var(--mat-app-on-surface))}.mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border:solid 1px #fff;box-sizing:content-box;border-color:var(--mdc-slider-with-overlap-handle-outline-color, var(--mat-app-on-primary));border-width:var(--mdc-slider-with-overlap-handle-outline-width)}.mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider__tick-mark--active,.mdc-slider__tick-mark--inactive{width:var(--mdc-slider-with-tick-marks-container-size);height:var(--mdc-slider-with-tick-marks-container-size);border-radius:var(--mdc-slider-with-tick-marks-container-shape, var(--mat-app-corner-full))}.mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity);background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mat-app-on-surface-variant))}.mdc-slider--disabled .mdc-slider__tick-mark--inactive{opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity);background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mat-app-on-surface))}.mdc-slider__tick-mark--active{opacity:var(--mdc-slider-with-tick-marks-active-container-opacity);background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mat-app-on-primary))}.mdc-slider__input{cursor:pointer;left:2px;margin:0;height:44px;opacity:0;position:absolute;top:2px;width:44px;box-sizing:content-box}.mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;cursor:pointer;height:48px;margin:0 8px;position:relative;touch-action:pan-y;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider.mdc-slider--disabled{cursor:auto;opacity:.38}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-slider-ripple-color, var(--mat-app-primary))}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-slider-hover-state-layer-color)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-slider-focus-state-layer-color)}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-mdc-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),t})(),mIt={provide:lo,useExisting:fs(()=>xT),multi:!0},xT=(()=>{let t=class{get value(){return or(this._hostElement.value,0)}set value(i){i=isNaN(i)?0:i;let n=i+"";if(!this._hasSetInitialValue){this._initialValue=n;return}this._isActive||this._setValue(n)}_setValue(i){this._hostElement.value=i,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges(),this._slider._cdr.markForCheck()}get translateX(){return this._slider.min>=this._slider.max?(this._translateX=this._tickMarkOffset,this._translateX):(this._translateX===void 0&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(i){this._translateX=i}get min(){return or(this._hostElement.min,0)}set min(i){this._hostElement.min=i+"",this._cdr.detectChanges()}get max(){return or(this._hostElement.max,0)}set max(i){this._hostElement.max=i+"",this._cdr.detectChanges()}get step(){return or(this._hostElement.step,0)}set step(i){this._hostElement.step=i+"",this._cdr.detectChanges()}get disabled(){return Ut(this._hostElement.disabled)}set disabled(i){this._hostElement.disabled=i,this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?this._translateX===0?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_setIsFocused(i){this._isFocused=i}constructor(i,n,s,a){this._ngZone=i,this._elementRef=n,this._cdr=s,this._slider=a,this.valueChange=new It,this.dragStart=new It,this.dragEnd=new It,this.thumbPosition=Ee.END,this._valuetext=un(""),this._knobRadius=8,this._tickMarkOffset=3,this._isActive=!1,this._isFocused=!1,this._hasSetInitialValue=!1,this._destroyed=new Bt,this._skipUIUpdate=!1,this._onTouchedFn=()=>{},this._isControlInitialized=!1,this._platform=K(Ui),this._hostElement=n.nativeElement,this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,this._initialValue===void 0?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._slider._setTransition(!1),this._slider._updateTrackUI(this),this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn?.(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(i){if(!(this.disabled||i.button!==0)){if(this._platform.IOS){let n=this._slider._isCursorOnSliderThumb(i,this._slider._getThumb(this.thumbPosition)._hostElement.getBoundingClientRect());this._isActive=n,this._updateWidthActive(),this._slider._updateDimensions();return}this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(i,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(i),this.dragStart.emit({source:this,parent:this._slider,value:this.value}))}}_handleValueCorrection(i){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(i)},0)}_fixValue(i){let n=i.clientX-this._slider._cachedLeft,s=this._slider._cachedWidth,a=this._slider.step===0?1:this._slider.step,o=Math.floor((this._slider.max-this._slider.min)/a),l=this._slider._isRtl?1-n/s:n/s,c=Math.round(l*o)/o*(this._slider.max-this._slider.min)+this._slider.min,h=Math.round(c/a)*a,p=this.value;if(h===p){this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(i,{withAnimation:this._slider._hasAnimation});return}this.value=h,this.valueChange.emit(this.value),this._onChangeFn?.(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(i,{withAnimation:this._slider._hasAnimation})}_onPointerMove(i){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(i)}_onPointerUp(){this._isActive&&(this._isActive=!1,this._platform.SAFARI&&this._setIsFocused(!1),this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive(),this._platform.IOS?10:0))}_clamp(i){let n=this._tickMarkOffset,s=this._slider._cachedWidth-this._tickMarkOffset;return Math.max(Math.min(i,s),n)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset:this.percentage*(this._slider._cachedWidth-this._tickMarkOffset*2)+this._tickMarkOffset}_calcTranslateXByPointerEvent(i){return i.clientX-this._slider._cachedLeft}_updateWidthActive(){}_updateWidthInactive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding-this._tickMarkOffset*2}px)`,this._hostElement.style.left=`-${this._slider._rippleRadius-this._tickMarkOffset}px`}_updateThumbUIByValue(i){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(i)}_updateThumbUIByPointerEvent(i,n){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(i)),this._updateThumbUI(n)}_updateThumbUI(i){this._slider._setTransition(!!i?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(i){(this._isControlInitialized||i!==null)&&(this.value=i)}registerOnChange(i){this._onChangeFn=i,this._isControlInitialized=!0}registerOnTouched(i){this._onTouchedFn=i}setDisabledState(i){this.disabled=i}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}};return t.\u0275fac=function(r){return new(r||t)(R(Zt),R(te),R(di),R(wT))},t.\u0275dir=qt({type:t,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(r,i){r&1&&yt("change",function(){return i._onChange()})("input",function(){return i._onInput()})("blur",function(){return i._onBlur()})("focus",function(){return i._onFocus()}),r&2&&ke("aria-valuetext",i._valuetext())},inputs:{value:[2,"value","value",or]},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],standalone:!0,features:[We([mIt,{provide:s7,useExisting:t}]),ji]}),t})(),l7=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ai,$s]}),t})();function c7(t,e){e?.injector||Zd(c7);let r=e?.injector??K(Re);return K(u7).registerStyleComponents(t,{injector:r})}var u7=(()=>{let t=class{constructor(){this.registry=new Map}registerStyleComponents(i,n){return Wd(n.injector,()=>{let s=this.getInstanceMap(K(ao)),a=K(Xa);return i.map(o=>this.getInstance(o,s,a))})}getInstanceMap(i){let n=this.registry.get(i);return n||(n=new Map,this.registry.set(i,n),i.onDestroy(()=>{this.registry.delete(i),n?.forEach(s=>s.destroy())})),n}getInstance(i,n,s){let a=n.get(i);return a||(a=dz(i,{environmentInjector:s}),n.set(i,a)),a}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function hl(...t){return An([{provide:tp,multi:!0,useFactory:()=>{let e=K(Re),r=K(u7);return()=>r.registerStyleComponents(t,{injector:e})}}])}var fIt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-button-styles"]],standalone:!0,features:[Kt],decls:0,vars:0,template:function(r,i){},styles:[`a,button{--mat-filled-button-pressed-state-layer-opacity: .16;--mdc-filled-button-container-color: var(--sys-tertiary);--mdc-filled-button-disabled-label-text-color: color-mix(in srgb, var(--sys-on-surface) 40%, transparent)}:is(a,button)[mat-flat-button]:not(.secondary-button).cta-button{--mdc-filled-button-container-color: var(--sys-tertiary);--mdc-filled-button-container-shape: 0;clip-path:polygon(0 100%,0 0,100% 0%,100% calc(100% - .8125rem),calc(100% - .9375rem) 100%)}:is(a,button)[mat-flat-button]:not(.secondary-button).cta-button:hover{background-color:transparent;clip-path:unset;box-shadow:unset;filter:drop-shadow(0px 0px 16px color-mix(in srgb,var(--sys-tertiary) 56%,transparent))}:is(a,button)[mat-flat-button]:not(.secondary-button).cta-button:hover:before{content:"";position:absolute;z-index:-1;inset:0;background:var(--mdc-filled-button-container-color);clip-path:polygon(0 100%,0 0,100% 0%,100% calc(100% - .8125rem),calc(100% - .9375rem) 100%)}:is(a,button)[mat-flat-button]:not(.secondary-button).cta-button:focus-visible{--mdc-filled-button-label-text-color: var(--sys-secondary);outline:unset}:is(a,button)[mat-flat-button]:not(.secondary-button).cta-button:focus-visible:after{content:"";position:absolute;background-color:var(--sys-on-primary);inset:0;z-index:-1;clip-path:polygon(.15rem calc(100% - .15rem),.15rem .15rem,calc(100% - .15rem) .15rem,calc(100% - .15rem) calc(100% - .8125rem - .06849rem),calc(100% - .9375rem - .05595rem) calc(100% - .15rem))}:is(a,button)[mat-flat-button]:not(.secondary-button).cta-button mat-icon{margin-left:.375rem}:is(a,button)[mat-flat-button].cta-button.secondary-button{--mdc-filled-button-container-color: var(--sys-on-primary);--mdc-filled-button-label-text-color: var(--sys-on-tertiary-fixed);--mat-filled-button-hover-state-layer-opacity: .08;--mat-filled-button-pressed-state-layer-opacity: .16;--mat-filled-button-state-layer-color: var(--sys-on-tertiary-fixed);--mdc-filled-button-container-shape: 0;--mdc-filled-button-disabled-container-color: var(--sys-on-primary)}:is(a,button)[mat-flat-button].cta-button.secondary-button:hover{box-shadow:none}:is(a,button)[mat-flat-button].cta-button.secondary-button:focus-visible{--mat-filled-button-state-layer-color: var(--sys-on-primary);--mdc-filled-button-label-text-color: var(--sys-secondary);outline:solid 2px var(--sys-tertiary)}:is(a,button)[mat-flat-button].cta-button.secondary-button mat-icon{margin-left:.375rem}.mat-mdc-unelevated-button.cta-button:not(.secondary-button) .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button.cta-button:not(.secondary-button) .mat-mdc-button-ripple,.mat-mdc-unelevated-button.cta-button:not(.secondary-button):hover .mat-mdc-button-persistent-ripple:before{clip-path:polygon(0 100%,0 0,100% 0%,100% calc(100% - .8125rem),calc(100% - .9375rem) 100%)}:is(a,button)[mat-flat-button]{font:var(--sys-label-medium);letter-spacing:var(--sys-label-medium-tracking);--mdc-filled-button-container-shape: .25rem;--mat-filled-button-horizontal-padding: 1rem;--mdc-filled-button-container-height: 2.5rem}:is(a,button)[mat-flat-button]:hover{box-shadow:1px 2px 16px rgb(from var(--sys-tertiary) r g b/.56)}:is(a,button)[mat-flat-button]:focus-visible{--mdc-filled-button-container-color: var(--sys-on-primary);--mdc-filled-button-label-text-color: var(--sys-secondary);outline:solid 2px var(--sys-tertiary)}:is(a,button)[mat-flat-button].button-size-large{--mat-filled-button-horizontal-padding: 1rem;--mdc-filled-button-container-height: 2.5rem;font:var(--sys-label-medium);letter-spacing:var(--sys-label-medium-tracking);padding:.5rem var(--mat-filled-button-horizontal-padding)}:is(a,button)[mat-button]{min-width:unset;font:var(--sys-label-medium);letter-spacing:var(--sys-label-medium-tracking);--mdc-text-button-label-text-color: var(--sys-on-tertiary-fixed);--mat-text-button-state-layer-color: var(--sys-on-tertiary-fixed);--mdc-text-button-disabled-label-text-color: color-mix(in srgb, var(--sys-on-surface) 40%, transparent);--mat-text-button-pressed-state-layer-opacity: .16;--mat-text-button-focus-state-layer-opacity: 0;--mdc-text-button-container-shape: .25rem;--mat-text-button-horizontal-padding: 1rem}:is(a,button)[mat-button]:focus-visible{outline:solid 2px var(--sys-tertiary);--mdc-text-button-label-text-color: var(--sys-secondary)}:is(a,button)[mat-button].secondary-button{--mat-text-button-state-layer-color: var(--sys-secondary);--mdc-text-button-label-text-color: var(--sys-secondary)}:is(a,button)[mat-button]:has(mat-icon).mat-mdc-button{padding:0 1rem 0 .75rem}:is(a,button)[mat-button]:has(mat-icon).mat-mdc-button mat-icon{margin-right:.5rem}:is(a,button)[mat-button] .mat-mdc-button-touch-target{height:auto}:is(a,button)[mat-button].button-size-medium{--mat-text-button-horizontal-padding: 1rem;--mdc-text-button-container-height: 2.5rem;font:var(--sys-label-medium);letter-spacing:var(--sys-label-medium-tracking);padding:.5rem var(--mat-text-button-horizontal-padding)}:is(a,button)[mat-button].button-size-small{--mat-text-button-horizontal-padding: .5rem;--mdc-text-button-container-height: 1.75rem;font:var(--sys-label-small);letter-spacing:var(--sys-label-small-tracking);padding:.3125rem var(--mat-text-button-horizontal-padding)}mat-button-toggle.mat-button-toggle-appearance-standard{--mat-standard-button-toggle-shape: 0;--mat-standard-button-toggle-hover-state-layer-opacity: .08;--mat-standard-button-toggle-selected-state-text-color: var(--sys-secondary);--mat-standard-button-toggle-disabled-state-text-color: color-mix(in srgb, var(--sys-on-surface) 40%, transparent);--mat-standard-button-toggle-disabled-state-background-color: color-mix( in srgb, var(--sys-on-surface) 12%, transparent );border:none;font:var(--sys-label-large);letter-spacing:var(--sys-label-large-tracking)}mat-button-toggle.mat-button-toggle-appearance-standard.button-size-large{--mat-standard-button-toggle-height: 1.5rem}mat-button-toggle.mat-button-toggle-appearance-standard.button-size-large .mat-button-toggle-label-content{padding:.5rem 1rem}mat-button-toggle.mat-button-toggle-appearance-standard.button-size-medium{--mat-standard-button-toggle-height: 1.3125rem;font:var(--sys-label-medium);letter-spacing:var(--sys-label-medium-tracking)}mat-button-toggle.mat-button-toggle-appearance-standard.button-size-medium .mat-button-toggle-label-content{padding:.3438rem .5rem}mat-button-toggle.mat-button-toggle-appearance-standard:active .mat-button-toggle-focus-overlay{opacity:.16}mat-button-toggle.mat-button-toggle-appearance-standard:focus-visible,mat-button-toggle.mat-button-toggle-appearance-standard.cdk-keyboard-focused{--mat-standard-button-toggle-focus-state-layer-opacity: 0;outline:solid 2px var(--sys-tertiary)}mat-button-toggle.mat-button-toggle-appearance-standard.mat-button-toggle-checked:not(.nav-cat-button){background-color:color-mix(in srgb,var(--sys-tertiary) 20%,transparent)}mat-button-toggle.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{background-color:color-mix(in srgb,var(--sys-on-surface) 12%,transparent)}mat-button-toggle.nav-cat-button .mat-button-toggle-label-content:after{font-family:Material Symbols Rounded;font-weight:300;font-style:normal;font-size:1.5rem;display:inline-block;line-height:1;text-transform:none;letter-spacing:normal;word-wrap:normal;white-space:nowrap;direction:ltr;content:"keyboard_arrow_down";vertical-align:middle}mat-button-toggle.mat-button-toggle-checked.nav-cat-button .mat-button-toggle-label-content:after{transform:rotate(180deg)}mat-button-toggle.mat-button-toggle-checked.nav-cat-button .label{border-bottom:solid 1px var(--sys-tertiary);margin-right:.25rem}mat-button-toggle.nav-cat-button{font:var(--sys-label-large);letter-spacing:var(--sys-label-large-tracking);--mat-standard-button-toggle-hover-state-layer-opacity: 0;--mat-standard-button-toggle-selected-state-background-color: var(--sys-on-primary)}mat-button-toggle.nav-cat-button :is(:hover,:active) .label{border-bottom:solid 1px var(--sys-tertiary)}mat-button-toggle.nav-cat-button .mat-button-toggle-label-content{padding:0 .5rem}mat-button-toggle.nav-cat-button:active .mat-button-toggle-focus-overlay{opacity:0}
`],encapsulation:2,changeDetection:0}),t})();function gIt(){return An([hl(fIt)])}var h7=["mat-button",""],d7=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],p7=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],vIt='.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-app-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-app-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-app-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-app-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-app-level1));height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-app-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-app-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-app-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-app-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-app-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-app-corner-full));border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-app-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-app-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',m7=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}",_It=["mat-icon-button",""],bIt=["*"],yIt=new ht("MAT_BUTTON_CONFIG"),wIt=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],CT=(()=>{let t=class{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,n,s,a){this._elementRef=i,this._platform=n,this._ngZone=s,this._animationMode=a,this._focusMonitor=K(ul),this._rippleLoader=K(V4),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let o=K(yIt,{optional:!0}),l=i.nativeElement,c=l.classList;this.disabledInteractive=o?.disabledInteractive??!1,this.color=o?.color??null,this._rippleLoader?.configureRipple(l,{className:"mat-mdc-button-ripple"});for(let{attribute:h,mdcClasses:p}of wIt)l.hasAttribute(h)&&c.add(...p)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",n){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};return t.\u0275fac=function(r){eS()},t.\u0275dir=qt({type:t,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Ut],disabled:[2,"disabled","disabled",Ut],ariaDisabled:[2,"aria-disabled","ariaDisabled",Ut],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ut]},features:[ji]}),t})(),xIt=(()=>{let t=class extends CT{constructor(i,n,s,a){super(i,n,s,a),this._haltDisabledEvents=o=>{this.disabled&&(o.preventDefault(),o.stopImmediatePropagation())}}ngOnInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)})}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}_getAriaDisabled(){return this.ariaDisabled==null?this.disabled:this.ariaDisabled}};return t.\u0275fac=function(r){eS()},t.\u0275dir=qt({type:t,inputs:{tabIndex:[2,"tabIndex","tabIndex",r=>r==null?void 0:or(r)]},features:[ji,oi]}),t})(),ba=(()=>{let t=class extends CT{constructor(i,n,s,a){super(i,n,s,a)}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(Ui),R(Zt),R(kr,8))},t.\u0275cmp=Pt({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,i){r&2&&(ke("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),Ai(i.color?"mat-"+i.color:""),ee("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[oi,Kt],attrs:h7,ngContentSelectors:p7,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){r&1&&(Mi(d7),Ot(0,"span",0),pe(1),N(2,"span",1),pe(3,1),F(),pe(4,2),Ot(5,"span",2)(6,"span",3)),r&2&&ee("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-text-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-text-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, var(--mat-app-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-filled-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-filled-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color, var(--mat-app-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, var(--mat-app-on-primary));background-color:var(--mdc-filled-button-container-color, var(--mat-app-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow, var(--mat-app-level1));height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-protected-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-protected-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, var(--mat-app-primary));background-color:var(--mdc-protected-button-container-color, var(--mat-app-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mat-app-corner-full))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow, var(--mat-app-level2))}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow, var(--mat-app-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow, var(--mat-app-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font, var(--mat-app-label-large-font));font-size:var(--mdc-outlined-button-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mdc-outlined-button-label-text-tracking, var(--mat-app-label-large-tracking));text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight, var(--mat-app-label-large-weight));border-radius:var(--mdc-outlined-button-container-shape, var(--mat-app-corner-full));border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color, var(--mat-app-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, var(--mat-app-primary));border-color:var(--mdc-outlined-button-outline-color, var(--mat-app-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),t})(),CIt=(()=>{let t=class extends xIt{constructor(i,n,s,a){super(i,n,s,a)}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(Ui),R(Zt),R(kr,8))},t.\u0275cmp=Pt({type:t,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostVars:15,hostBindings:function(r,i){r&2&&(ke("disabled",i._getDisabledAttribute())("tabindex",i.disabled&&!i.disabledInteractive?-1:i.tabIndex)("aria-disabled",i._getDisabledAttribute()),Ai(i.color?"mat-"+i.color:""),ee("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton","matAnchor"],standalone:!0,features:[oi,Kt],attrs:h7,ngContentSelectors:p7,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){r&1&&(Mi(d7),Ot(0,"span",0),pe(1),N(2,"span",1),pe(3,1),F(),pe(4,2),Ot(5,"span",2)(6,"span",3)),r&2&&ee("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:[vIt,m7],encapsulation:2,changeDetection:0}),t})(),$n=(()=>{let t=class extends CT{constructor(i,n,s,a){super(i,n,s,a),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(Ui),R(Zt),R(kr,8))},t.\u0275cmp=Pt({type:t,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,i){r&2&&(ke("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),Ai(i.color?"mat-"+i.color:""),ee("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[oi,Kt],attrs:_It,ngContentSelectors:bIt,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){r&1&&(Mi(),Ot(0,"span",0),pe(1),Ot(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);color:var(--mdc-icon-button-icon-color, var(--mat-app-on-surface-variant));-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity))}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',m7],encapsulation:2,changeDetection:0}),t})(),v0=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ai,$s,ai]}),t})(),kIt=["button"],AIt=["*"];function SIt(t,e){if(t&1&&Ot(0,"mat-pseudo-checkbox",3),t&2){let r=Rt();mt("disabled",r.disabled)}}function EIt(t,e){if(t&1&&Ot(0,"mat-pseudo-checkbox",3),t&2){let r=Rt();mt("disabled",r.disabled)}}var f7=new ht("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:TIt});function TIt(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1}}var g7=new ht("MatButtonToggleGroup"),IIt={provide:lo,useExisting:fs(()=>b7),multi:!0},v7=0,_7=class{constructor(t,e){this.source=t,this.value=e}},b7=(()=>{let t=class{get name(){return this._name}set name(i){this._name=i,this._markButtonsForCheck()}get value(){let i=this._selectionModel?this._selectionModel.selected:[];return this.multiple?i.map(n=>n.value):i[0]?i[0].value:void 0}set value(i){this._setSelectionByValue(i),this.valueChange.emit(this.value)}get selected(){let i=this._selectionModel?this._selectionModel.selected:[];return this.multiple?i:i[0]||null}get multiple(){return this._multiple}set multiple(i){this._multiple=i,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._markButtonsForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(i){this._disabledInteractive=i,this._markButtonsForCheck()}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(i){this._hideSingleSelectionIndicator=i,this._markButtonsForCheck()}get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(i){this._hideMultipleSelectionIndicator=i,this._markButtonsForCheck()}constructor(i,n,s){this._changeDetector=i,this._dir=s,this._multiple=!1,this._disabled=!1,this._disabledInteractive=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name=`mat-button-toggle-group-${v7++}`,this.valueChange=new It,this.change=new It,this.appearance=n&&n.appearance?n.appearance:"standard",this.hideSingleSelectionIndicator=n?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=n?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new j4(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(i=>i.checked)),this.multiple||this._initializeTabIndex()}writeValue(i){this.value=i,this._changeDetector.markForCheck()}registerOnChange(i){this._controlValueAccessorChangeFn=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this.disabled=i}_keydown(i){if(this.multiple||this.disabled)return;let n=i.target.id,s=this._buttonToggles.toArray().findIndex(o=>o.buttonId===n),a=null;switch(i.keyCode){case 32:case 13:a=this._buttonToggles.get(s)||null;break;case 38:a=this._getNextButton(s,-1);break;case 37:a=this._getNextButton(s,this.dir==="ltr"?-1:1);break;case 40:a=this._getNextButton(s,1);break;case 39:a=this._getNextButton(s,this.dir==="ltr"?1:-1);break;default:return}a&&(i.preventDefault(),a._onButtonClick(),a.focus())}_emitChangeEvent(i){let n=new _7(i,this.value);this._rawValue=n.value,this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}_syncButtonToggle(i,n,s=!1,a=!1){!this.multiple&&this.selected&&!i.checked&&(this.selected.checked=!1),this._selectionModel?n?this._selectionModel.select(i):this._selectionModel.deselect(i):a=!0,a?Promise.resolve().then(()=>this._updateModelValue(i,s)):this._updateModelValue(i,s)}_isSelected(i){return this._selectionModel&&this._selectionModel.isSelected(i)}_isPrechecked(i){return typeof this._rawValue>"u"?!1:this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(n=>i.value!=null&&n===i.value):i.value===this._rawValue}_initializeTabIndex(){if(this._buttonToggles.forEach(i=>{i.tabIndex=-1}),this.selected)this.selected.tabIndex=0;else for(let i=0;i<this._buttonToggles.length;i++){let n=this._buttonToggles.get(i);if(!n.disabled){n.tabIndex=0;break}}this._markButtonsForCheck()}_getNextButton(i,n){let s=this._buttonToggles;for(let a=1;a<=s.length;a++){let o=(i+n*a+s.length)%s.length,l=s.get(o);if(l&&!l.disabled)return l}return null}_setSelectionByValue(i){this._rawValue=i,this._buttonToggles&&(this.multiple&&i?(Array.isArray(i),this._clearSelection(),i.forEach(n=>this._selectValue(n))):(this._clearSelection(),this._selectValue(i)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(i=>{i.checked=!1,this.multiple||(i.tabIndex=-1)})}_selectValue(i){let n=this._buttonToggles.find(s=>s.value!=null&&s.value===i);n&&(n.checked=!0,this._selectionModel.select(n),this.multiple||(n.tabIndex=0))}_updateModelValue(i,n){n&&this._emitChangeEvent(i),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(i=>i._markForCheck())}};return t.\u0275fac=function(r){return new(r||t)(R(di),R(f7,8),R(Gn,8))},t.\u0275dir=qt({type:t,selectors:[["mat-button-toggle-group"]],contentQueries:function(r,i,n){if(r&1&&Xi(n,_0,5),r&2){let s;oe(s=le())&&(i._buttonToggles=s)}},hostAttrs:[1,"mat-button-toggle-group"],hostVars:6,hostBindings:function(r,i){r&1&&yt("keydown",function(n){return i._keydown(n)}),r&2&&(ke("role",i.multiple?"group":"radiogroup")("aria-disabled",i.disabled),ee("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard",i.appearance==="standard"))},inputs:{appearance:"appearance",name:"name",vertical:[2,"vertical","vertical",Ut],value:"value",multiple:[2,"multiple","multiple",Ut],disabled:[2,"disabled","disabled",Ut],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ut],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Ut],hideMultipleSelectionIndicator:[2,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",Ut]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],standalone:!0,features:[We([IIt,{provide:g7,useExisting:t}]),ji]}),t})(),_0=(()=>{let t=class{get buttonId(){return`${this.id}-button`}get tabIndex(){return this._tabIndex}set tabIndex(i){this._tabIndex=i,this._markForCheck()}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(i){this._appearance=i}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(i){i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(i){this._disabled=i}get disabledInteractive(){return this._disabledInteractive||this.buttonToggleGroup!==null&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(i){this._disabledInteractive=i}constructor(i,n,s,a,o,l){this._changeDetectorRef=n,this._elementRef=s,this._focusMonitor=a,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new It;let c=Number(o);this.tabIndex=c||c===0?c:null,this.buttonToggleGroup=i,this.appearance=l&&l.appearance?l.appearance:"standard",this.disabledInteractive=l?.disabledInteractive??!1}ngOnInit(){let i=this.buttonToggleGroup;this.id=this.id||`mat-button-toggle-${v7++}`,i&&(i._isPrechecked(this)?this.checked=!0:i._isSelected(this)!==this._checked&&i._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let i=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),i&&i._isSelected(this)&&i._syncButtonToggle(this,!1,!1,!0)}focus(i){this._buttonElement.nativeElement.focus(i)}_onButtonClick(){if(this.disabled)return;let i=this.isSingleSelector()?!0:!this._checked;if(i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){let n=this.buttonToggleGroup._buttonToggles.find(s=>s.tabIndex===0);n&&(n.tabIndex=-1),this.tabIndex=0}this.change.emit(new _7(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}};return t.\u0275fac=function(r){return new(r||t)(R(g7,8),R(di),R(te),R(ul),Kd("tabindex"),R(f7,8))},t.\u0275cmp=Pt({type:t,selectors:[["mat-button-toggle"]],viewQuery:function(r,i){if(r&1&&gi(kIt,5),r&2){let n;oe(n=le())&&(i._buttonElement=n.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(r,i){r&1&&yt("focus",function(){return i.focus()}),r&2&&(ke("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),ee("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-disabled-interactive",i.disabledInteractive)("mat-button-toggle-appearance-standard",i.appearance==="standard"))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",Ut],appearance:"appearance",checked:[2,"checked","checked",Ut],disabled:[2,"disabled","disabled",Ut],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ut]},outputs:{change:"change"},exportAs:["matButtonToggle"],standalone:!0,features:[ji,Kt],ngContentSelectors:AIt,decls:8,vars:14,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-label-content"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(r,i){if(r&1){let n=Qe();Mi(),N(0,"button",1,0),yt("click",function(){return Lt(n),Nt(i._onButtonClick())}),N(2,"span",2),Wt(3,SIt,1,1,"mat-pseudo-checkbox",3)(4,EIt,1,1,"mat-pseudo-checkbox",3),pe(5),F()(),Ot(6,"span",4)(7,"span",5)}if(r&2){let n=fi(1);mt("id",i.buttonId)("disabled",i.disabled&&!i.disabledInteractive||null),ke("role",i.isSingleSelector()?"radio":"button")("tabindex",i.disabled&&!i.disabledInteractive?-1:i.tabIndex)("aria-pressed",i.isSingleSelector()?null:i.checked)("aria-checked",i.isSingleSelector()?i.checked:null)("name",i._getButtonName())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-disabled",i.disabled&&i.disabledInteractive?"true":null),$(3),ae(i.buttonToggleGroup&&i.checked&&!i.buttonToggleGroup.multiple&&!i.buttonToggleGroup.hideSingleSelectionIndicator?3:-1),$(),ae(i.buttonToggleGroup&&i.checked&&i.buttonToggleGroup.multiple&&!i.buttonToggleGroup.hideMultipleSelectionIndicator?4:-1),$(3),mt("matRippleTrigger",n)("matRippleDisabled",i.disableRipple||i.disabled)}},dependencies:[ac,L4],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-app-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--mat-legacy-button-toggle-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle .mat-pseudo-checkbox{margin-right:12px}[dir=rtl] .mat-button-toggle .mat-pseudo-checkbox{margin-right:0;margin-left:12px}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-legacy-button-toggle-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color, var(--mat-app-on-surface));background-color:var(--mat-standard-button-toggle-background-color);font-family:var(--mat-standard-button-toggle-label-text-font, var(--mat-app-label-large-font));font-size:var(--mat-standard-button-toggle-label-text-size, var(--mat-app-label-large-size));line-height:var(--mat-standard-button-toggle-label-text-line-height, var(--mat-app-label-large-line-height));font-weight:var(--mat-standard-button-toggle-label-text-weight, var(--mat-app-label-large-weight));letter-spacing:var(--mat-standard-button-toggle-label-text-tracking, var(--mat-app-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color, var(--mat-app-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color, var(--mat-app-on-secondary-container));background-color:var(--mat-standard-button-toggle-selected-state-background-color, var(--mat-app-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var(--mat-standard-button-toggle-disabled-selected-state-text-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color, var(--mat-app-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border-bottom-right-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}.mat-button-toggle-group-appearance-standard .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full));border-bottom-left-radius:var(--mat-standard-button-toggle-shape, var(--mat-app-corner-full))}"],encapsulation:2,changeDetection:0}),t})(),y7=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ai,$s,_0,ai]}),t})(),b0=(()=>{let t=class{constructor(){this.size=je.required({alias:"hraButtonSize"})}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","hraButtonSize",""]],hostVars:2,hostBindings:function(r,i){r&2&&Ai("button-size-"+i.size())},inputs:{size:[1,"hraButtonSize","size"]},standalone:!0}),t})(),OIt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","hraCallToActionButton",""]],hostAttrs:[1,"cta-button"],standalone:!0}),t})(),PIt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","hraNavCatButton",""]],hostAttrs:[1,"nav-cat-button"],standalone:!0}),t})(),w7=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","hraPrimaryButton",""]],hostAttrs:[1,"primary-button"],standalone:!0}),t})(),x7=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","hraSecondaryButton",""]],hostAttrs:[1,"secondary-button"],standalone:!0}),t})(),Vr=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[v0,y7]}),t})(),MIt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-micro-tooltip-styles"]],standalone:!0,features:[Kt],decls:0,vars:0,template:function(r,i){},styles:[`.hra-micro-tooltip{--mdc-plain-tooltip-supporting-text-color: var(--sys-on-primary);--mdc-plain-tooltip-container-color: color-mix(in srgb, var(--sys-secondary) 96%, transparent)}.hra-micro-tooltip .mat-mdc-tooltip-surface{padding:.25rem .5rem;letter-spacing:unset}.hra-micro-tooltip-medium .mat-mdc-tooltip-surface{font:var(--sys-label-medium)}.hra-micro-tooltip-small .mat-mdc-tooltip-surface{font:var(--sys-label-small)}
`],encapsulation:2,changeDetection:0}),t})(),co=(()=>{let t=class{constructor(){this.size=je("medium",{alias:"hraMicroTooltipSize"}),this.tooltip=K(Ek),c7([MIt]),Ws(()=>{this.tooltip.tooltipClass=["hra-micro-tooltip",`hra-micro-tooltip-${this.size()}`]})}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","hraMicroTooltip",""]],inputs:{size:[1,"hraMicroTooltipSize","size"]},standalone:!0,features:[uS([{directive:Ek,inputs:["matTooltip","hraMicroTooltip","matTooltipPosition","hraMicroTooltipPosition"]}])]}),t})();function RIt(t,e){if(t&1){let r=Qe();N(0,"button",9),yt("click",function(){Lt(r);let i=Rt();return Nt(i.toggleVisibility())}),N(1,"mat-icon"),ut(2,"visibility_off"),F()()}}function BIt(t,e){if(t&1){let r=Qe();N(0,"button",10),yt("click",function(){Lt(r);let i=Rt();return Nt(i.toggleVisibility())}),N(1,"mat-icon"),ut(2,"visibility_on"),F()()}}var DIt=(()=>{let t=class{constructor(){this.clsName="ccf-opacity-slider",this.opacity=20,this.visible=!0,this.opacityChange=new It,this.visibilityToggle=new It,this.opacityReset=new It,this.sliderChanged=new It}ngOnInit(){this.visible?this.prevOpacity=0:this.prevOpacity=20}reset(){this.prevOpacity=20}toggleVisibility(){let i=this.opacity;this.opacity=this.prevOpacity,this.prevOpacity=i,this.visibilityToggle.emit(),this.opacityChange.emit(this.opacity)}resetOpacity(){this.prevOpacity=0,this.opacityReset.emit()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["ccf-opacity-slider"]],hostVars:2,hostBindings:function(r,i){r&2&&Ai(i.clsName)},inputs:{opacity:"opacity",visible:"visible"},outputs:{opacityChange:"opacityChange",visibilityToggle:"visibilityToggle",opacityReset:"opacityReset",sliderChanged:"sliderChanged"},decls:13,vars:8,consts:[["slider",""],[1,"icons"],["mat-icon-button","","hraMicroTooltip","Hide",1,"visibility","icon","visible"],["mat-icon-button","",1,"visibility","icon","invisible"],["mat-icon-button","","hraMicroTooltip","Reset",1,"icon","reset",3,"click"],[1,"slider",3,"step","min","max"],["matSliderThumb","",1,"opacity-slider",3,"input","value"],["subscriptSizing","dynamic"],["matInput","","type","number",3,"value"],["mat-icon-button","","hraMicroTooltip","Hide",1,"visibility","icon","visible",3,"click"],["mat-icon-button","",1,"visibility","icon","invisible",3,"click"]],template:function(r,i){if(r&1){let n=Qe();N(0,"div",1),Wt(1,RIt,3,0,"button",2)(2,BIt,3,0,"button",3),N(3,"button",4),yt("click",function(){return Lt(n),Nt(i.resetOpacity())}),N(4,"mat-icon"),ut(5,"reset_settings"),F()()(),N(6,"mat-slider",5)(7,"input",6,0),yt("input",function(){Lt(n);let s=fi(8);return Nt(i.opacityChange.emit(+s.value))}),F()(),N(9,"mat-form-field",7)(10,"mat-label"),ut(11,"Opacity"),F(),Ot(12,"input",8),F()}r&2&&($(),ae(i.opacity>0?1:2),$(5),ee("disabled",!i.visible),mt("step",1)("min",0)("max",100),$(),mt("value",i.opacity),$(5),mt("value",i.opacity))},dependencies:[gr,o7,xT,th,Qu,Ko,$n,co],styles:["[_nghost-%COMP%]{display:flex;width:100%;align-items:center;padding:1rem;border-radius:.5rem;background-color:var(--sys-on-primary);box-shadow:0 5px 4px #201e3d29}[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:5rem}[_nghost-%COMP%]   mat-slider[_ngcontent-%COMP%]{--mdc-slider-active-track-color: var(--sys-on-tertiary-fixed);--mdc-slider-inactive-track-color: #acb5c3;--mdc-slider-handle-color: var(--sys-on-tertiary-fixed);--mdc-slider-active-track-height: 2px;--mdc-slider-inactive-track-height: 2px;width:10rem;margin:0 1.5rem}[_nghost-%COMP%]   mat-slider.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}[_nghost-%COMP%]   mat-slider[_ngcontent-%COMP%]     mat-slider-visual-thumb{transition:none}[_nghost-%COMP%]   mat-slider[_ngcontent-%COMP%]     .mdc-slider__track--inactive{opacity:1}"],changeDetection:0}),t})(),C7=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,Hi,l7,$s,eh,Vr]}),t})();function LIt(t,e){}var Yb=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}},k7=(()=>{let t=class extends p0{constructor(i,n,s,a,o,l,c,h){super(),this._elementRef=i,this._focusTrapFactory=n,this._config=a,this._interactivityChecker=o,this._ngZone=l,this._overlayRef=c,this._focusMonitor=h,this._platform=K(Ui),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=K(di),this._injector=K(Re),this._isDestroyed=!1,this.attachDomPortal=p=>{this._portalOutlet.hasAttached();let m=this._portalOutlet.attachDomPortal(p);return this._contentAttached(),m},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(i){this._ariaLabelledByQueue.push(i),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(i){let n=this._ariaLabelledByQueue.indexOf(i);n>-1&&(this._ariaLabelledByQueue.splice(n,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),n}attachTemplatePortal(i){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),n}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,n){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{i.removeEventListener("blur",s),i.removeEventListener("mousedown",s),i.removeAttribute("tabindex")};i.addEventListener("blur",s),i.addEventListener("mousedown",s)})),i.focus(n)}_focusByCssSelector(i,n){let s=this._elementRef.nativeElement.querySelector(i);s&&this._forceFocus(s,n)}_trapFocus(){this._isDestroyed||pc(()=>{let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}},{injector:this._injector})}_restoreFocus(){let i=this._config.restoreFocus,n=null;if(typeof i=="string"?n=this._document.querySelector(i):typeof i=="boolean"?n=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(n=i),this._config.restoreFocus&&n&&typeof n.focus=="function"){let s=P1(),a=this._elementRef.nativeElement;(!s||s===this._document.body||s===a||a.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let i=this._elementRef.nativeElement,n=P1();return i===n||i.contains(n)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=P1()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(I4),R(ge,8),R(Yb),R(cT),R(Zt),R(m0),R(ul))},t.\u0275cmp=Pt({type:t,selectors:[["cdk-dialog-container"]],viewQuery:function(r,i){if(r&1&&gi(Fd,7),r&2){let n;oe(n=le())&&(i._portalOutlet=n.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,i){r&2&&ke("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},standalone:!0,features:[oi,Kt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,i){r&1&&Wt(0,LIt,0,0,"ng-template",0)},dependencies:[Fd],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),t})(),L1=class{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new Bt,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(r=>{r.keyCode===27&&!this.disableClose&&!ps(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(t,e){if(this.containerInstance){let r=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),r.next(t),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}},NIt=new ht("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=K(Ar);return()=>t.scrollStrategies.block()}}),FIt=new ht("DialogData"),zIt=new ht("DefaultDialogConfig"),VIt=0,A7=(()=>{let t=class{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,n,s,a,o,l){this._overlay=i,this._injector=n,this._defaultOptions=s,this._parentDialog=a,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Bt,this._afterOpenedAtThisLevel=new Bt,this._ariaHiddenElements=new Map,this.afterAllClosed=Ud(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(fr(void 0))),this._scrollStrategy=l}open(i,n){let s=this._defaultOptions||new Yb;n=x(x({},s),n),n.id=n.id||`cdk-dialog-${VIt++}`,n.id&&this.getDialogById(n.id);let a=this._getOverlayConfig(n),o=this._overlay.create(a),l=new L1(o,n),c=this._attachContainer(o,l,n);return l.containerInstance=c,this._attachDialogContent(i,l,c,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){N1(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(n=>n.id===i)}ngOnDestroy(){N1(this._openDialogsAtThisLevel,i=>{i.config.closeOnDestroy===!1&&this._removeOpenDialog(i,!1)}),N1(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){let n=new mp({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(n.backdropClass=i.backdropClass),n}_attachContainer(i,n,s){let a=s.injector||s.viewContainerRef?.injector,o=[{provide:Yb,useValue:s},{provide:L1,useValue:n},{provide:m0,useValue:i}],l;s.container?typeof s.container=="function"?l=s.container:(l=s.container.type,o.push(...s.container.providers(s))):l=k7;let c=new Nd(l,s.viewContainerRef,Re.create({parent:a||this._injector,providers:o}),s.componentFactoryResolver);return i.attach(c).instance}_attachDialogContent(i,n,s,a){if(i instanceof Vs){let o=this._createInjector(a,n,s,void 0),l={$implicit:a.data,dialogRef:n};a.templateContext&&(l=x(x({},l),typeof a.templateContext=="function"?a.templateContext():a.templateContext)),s.attachTemplatePortal(new Yu(i,null,l,o))}else{let o=this._createInjector(a,n,s,this._injector),l=s.attachComponentPortal(new Nd(i,a.viewContainerRef,o,a.componentFactoryResolver));n.componentRef=l,n.componentInstance=l.instance}}_createInjector(i,n,s,a){let o=i.injector||i.viewContainerRef?.injector,l=[{provide:FIt,useValue:i.data},{provide:L1,useValue:n}];return i.providers&&(typeof i.providers=="function"?l.push(...i.providers(n,i,s)):l.push(...i.providers)),i.direction&&(!o||!o.get(Gn,null,{optional:!0}))&&l.push({provide:Gn,useValue:{value:i.direction,change:Ge()}}),Re.create({parent:o||a,providers:l})}_removeOpenDialog(i,n){let s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((a,o)=>{a?o.setAttribute("aria-hidden",a):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let i=this._overlayContainer.getContainerElement();if(i.parentElement){let n=i.parentElement.children;for(let s=n.length-1;s>-1;s--){let a=n[s];a!==i&&a.nodeName!=="SCRIPT"&&a.nodeName!=="STYLE"&&!a.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(a,a.getAttribute("aria-hidden")),a.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}};return t.\u0275fac=function(r){return new(r||t)(U(Ar),U(Re),U(zIt,8),U(t,12),U(eg),U(NIt))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function N1(t,e){let r=t.length;for(;r--;)e(t[r])}var jIt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[A7],imports:[Ju,zd,R4,zd]}),t})();function UIt(t,e){}var Tk=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},F1="mdc-dialog--open",qD="mdc-dialog--opening",KD="mdc-dialog--closing",HIt=150,GIt=75,WIt=(()=>{let t=class extends k7{constructor(i,n,s,a,o,l,c,h,p){super(i,n,s,a,o,l,c,p),this._animationMode=h,this._animationStateChanged=new It,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?JD(this._config.enterAnimationDuration)??HIt:0,this._exitAnimationDuration=this._animationsEnabled?JD(this._config.exitAnimationDuration)??GIt:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(YD,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(qD,F1)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(F1),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(F1),this._animationsEnabled?(this._hostElement.style.setProperty(YD,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(KD)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(i){this._actionSectionCount+=i,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(qD,KD)}_waitForAnimationToComplete(i,n){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(i):i()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(i){let n=super.attachComponentPortal(i);return n.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),n}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(I4),R(ge,8),R(Tk),R(cT),R(Zt),R(m0),R(kr,8),R(ul))},t.\u0275cmp=Pt({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(r,i){r&2&&(_a("id",i._config.id),ke("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledByQueue[0])("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),ee("_mat-animation-noopable",!i._animationsEnabled)("mat-mdc-dialog-container-with-actions",i._actionSectionCount>0))},standalone:!0,features:[oi,Kt],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,i){r&1&&(N(0,"div",0)(1,"div",1),Wt(2,UIt,0,0,"ng-template",2),F()())},dependencies:[Fd],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12));border-radius:var(--mdc-dialog-container-shape, var(--mat-app-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-app-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-app-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-app-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-app-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-app-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-app-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-app-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-app-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-app-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-app-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-app-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-app-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.cdk-high-contrast-active .mat-mdc-dialog-actions{border-top-color:CanvasText}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2}),t})(),YD="--mat-dialog-transition-duration";function JD(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?Zb(t.substring(0,t.length-2)):t.endsWith("s")?Zb(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var N_=function(t){return t[t.OPEN=0]="OPEN",t[t.CLOSING=1]="CLOSING",t[t.CLOSED=2]="CLOSED",t}(N_||{}),fp=class{constructor(t,e,r){this._ref=t,this._containerInstance=r,this._afterOpened=new Bt,this._beforeClosed=new Bt,this._state=N_.OPEN,this.disableClose=e.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),r._animationStateChanged.pipe(Ye(i=>i.state==="opened"),br(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Ye(i=>i.state==="closed"),br(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),lr(this.backdropClick(),this.keydownEvents().pipe(Ye(i=>i.keyCode===27&&!this.disableClose&&!ps(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),S7(this,i.type==="keydown"?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Ye(e=>e.state==="closing"),br(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=N_.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=N_.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function S7(t,e,r){return t._closeInteractionType=e,t.close(r)}var y0=new ht("MatMdcDialogData"),ZIt=new ht("mat-mdc-dialog-default-options"),$It=new ht("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=K(Ar);return()=>t.scrollStrategies.block()}}),XIt=0,dl=(()=>{let t=class{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,n,s,a,o,l,c,h){this._overlay=i,this._defaultOptions=a,this._scrollStrategy=o,this._parentDialog=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Bt,this._afterOpenedAtThisLevel=new Bt,this.dialogConfigClass=Tk,this.afterAllClosed=Ud(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(fr(void 0))),this._dialog=n.get(A7),this._dialogRefConstructor=fp,this._dialogContainerType=WIt,this._dialogDataToken=y0}open(i,n){let s;n=x(x({},this._defaultOptions||new Tk),n),n.id=n.id||`mat-mdc-dialog-${XIt++}`,n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();let a=this._dialog.open(i,Q(x({},n),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:Yb,useValue:n}]},templateContext:()=>({dialogRef:s}),providers:(o,l,c)=>(s=new this._dialogRefConstructor(o,n,c),s.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:s}])}));return s.componentRef=a.componentRef,s.componentInstance=a.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{let o=this.openDialogs.indexOf(s);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(n=>n.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let n=i.length;for(;n--;)i[n].close()}};return t.\u0275fac=function(r){return new(r||t)(U(Ar),U(Re),U(_S,8),U(ZIt,8),U($It),U(t,12),U(eg),U(kr,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),qIt=0,kT=(()=>{let t=class{constructor(i,n,s){this.dialogRef=i,this._elementRef=n,this._dialog=s,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=I7(this._elementRef,this._dialog.openDialogs))}ngOnChanges(i){let n=i._matDialogClose||i._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(i){S7(this.dialogRef,i.screenX===0&&i.screenY===0?"keyboard":"mouse",this.dialogResult)}};return t.\u0275fac=function(r){return new(r||t)(R(fp,8),R(te),R(dl))},t.\u0275dir=qt({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(r,i){r&1&&yt("click",function(n){return i._onButtonClick(n)}),r&2&&ke("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],type:"type",dialogResult:[0,"mat-dialog-close","dialogResult"],_matDialogClose:[0,"matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],standalone:!0,features:[yr]}),t})(),E7=(()=>{let t=class{constructor(i,n,s){this._dialogRef=i,this._elementRef=n,this._dialog=s}ngOnInit(){this._dialogRef||(this._dialogRef=I7(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}};return t.\u0275fac=function(r){return new(r||t)(R(fp,8),R(te),R(dl))},t.\u0275dir=qt({type:t,standalone:!0}),t})(),ig=(()=>{let t=class extends E7{constructor(){super(...arguments),this.id=`mat-mdc-dialog-title-${qIt++}`}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275dir=qt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(r,i){r&2&&_a("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[oi]}),t})(),gp=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[uS([fEt])]}),t})(),T7=(()=>{let t=class extends E7{_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275dir=qt({type:t,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(r,i){r&2&&ee("mat-mdc-dialog-actions-align-start",i.align==="start")("mat-mdc-dialog-actions-align-center",i.align==="center")("mat-mdc-dialog-actions-align-end",i.align==="end")},inputs:{align:"align"},standalone:!0,features:[oi]}),t})();function I7(t,e){let r=t.nativeElement.parentElement;for(;r&&!r.classList.contains("mat-mdc-dialog-container");)r=r.parentElement;return r?e.find(i=>i.id===r.id):null}var rg=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[dl],imports:[jIt,Ju,zd,ai,ai]}),t})(),KIt=0,Ik=new ht("CdkAccordion"),YIt=(()=>{let t=class{constructor(){this._stateChanges=new Bt,this._openCloseAllActions=new Bt,this.id=`cdk-accordion-${KIt++}`,this.multi=!1}openAll(){this.multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(i){this._stateChanges.next(i)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:[2,"multi","multi",Ut]},exportAs:["cdkAccordion"],standalone:!0,features:[We([{provide:Ik,useExisting:t}]),ji,yr]}),t})(),JIt=0,O7=(()=>{let t=class{get expanded(){return this._expanded}set expanded(i){if(this._expanded!==i){if(this._expanded=i,this.expandedChange.emit(i),i){this.opened.emit();let n=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,n)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}constructor(i,n,s){this.accordion=i,this._changeDetectorRef=n,this._expansionDispatcher=s,this._openCloseAllSubscription=vi.EMPTY,this.closed=new It,this.opened=new It,this.destroyed=new It,this.expandedChange=new It,this.id=`cdk-accordion-child-${JIt++}`,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=s.listen((a,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==a&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(i=>{this.disabled||(this.expanded=i)})}};return t.\u0275fac=function(r){return new(r||t)(R(Ik,12),R(di),R(U4))},t.\u0275dir=qt({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[2,"expanded","expanded",Ut],disabled:[2,"disabled","disabled",Ut]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[We([{provide:Ik,useValue:void 0}]),ji]}),t})(),P7=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})(),QIt=["body"],tOt=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],eOt=["mat-expansion-panel-header","*","mat-action-row"];function iOt(t,e){}var rOt=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],nOt=["mat-panel-title","mat-panel-description","*"];function sOt(t,e){if(t&1&&(N(0,"span",1),ju(),N(1,"svg",2),Ot(2,"path",3),F()()),t&2){let r=Rt();mt("@indicatorRotate",r._getExpandedState())}}var QD=new ht("MAT_ACCORDION"),tL="225ms cubic-bezier(0.4,0.0,0.2,1)",M7={indicatorRotate:to("indicatorRotate",[us("collapsed, void",tr({transform:"rotate(0deg)"})),us("expanded",tr({transform:"rotate(180deg)"})),jn("expanded <=> collapsed, void => collapsed",Vn(tL))]),bodyExpansion:to("bodyExpansion",[us("collapsed, void",tr({height:"0px",visibility:"hidden"})),us("expanded",tr({height:"*",visibility:""})),jn("expanded <=> collapsed, void => collapsed",Vn(tL))])},R7=new ht("MAT_EXPANSION_PANEL"),aOt=(()=>{let t=class{constructor(i,n){this._template=i,this._expansionPanel=n}};return t.\u0275fac=function(r){return new(r||t)(R(Vs),R(R7,8))},t.\u0275dir=qt({type:t,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0}),t})(),oOt=0,B7=new ht("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),D7=(()=>{let t=class extends O7{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(i){this._hideToggle=i}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(i){this._togglePosition=i}constructor(i,n,s,a,o,l,c){super(i,n,s),this._viewContainerRef=a,this._animationMode=l,this._hideToggle=!1,this.afterExpand=new It,this.afterCollapse=new It,this._inputChanges=new Bt,this._headerId=`mat-expansion-panel-header-${oOt++}`,this.accordion=i,this._document=o,this._animationsDisabled=l==="NoopAnimations",c&&(this.hideToggle=c.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(fr(null),Ye(()=>this.expanded&&!this._portal),br(1)).subscribe(()=>{this._portal=new Yu(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(i){this._inputChanges.next(i)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){let i=this._document.activeElement,n=this._body.nativeElement;return i===n||n.contains(i)}return!1}_animationStarted(i){!eL(i)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(i){eL(i)||(i.toState==="expanded"?this.afterExpand.emit():i.toState==="collapsed"&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}};return t.\u0275fac=function(r){return new(r||t)(R(QD,12),R(di),R(U4),R(Zn),R(ge),R(kr,8),R(B7,8))},t.\u0275cmp=Pt({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(r,i,n){if(r&1&&Xi(n,aOt,5),r&2){let s;oe(s=le())&&(i._lazyContent=s.first)}},viewQuery:function(r,i){if(r&1&&gi(QIt,5),r&2){let n;oe(n=le())&&(i._body=n.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(r,i){r&2&&ee("mat-expanded",i.expanded)("_mat-animation-noopable",i._animationsDisabled)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{hideToggle:[2,"hideToggle","hideToggle",Ut],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[We([{provide:QD,useValue:void 0},{provide:R7,useExisting:t}]),ji,oi,yr,Kt],ngContentSelectors:eOt,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(r,i){if(r&1){let n=Qe();Mi(tOt),pe(0),N(1,"div",1,0),yt("@bodyExpansion.start",function(s){return Lt(n),Nt(i._animationStarted(s))})("@bodyExpansion.done",function(s){return Lt(n),Nt(i._animationDone(s))}),N(3,"div",2),pe(4,1),Wt(5,iOt,0,0,"ng-template",3),F(),pe(6,2),F()}r&2&&($(),mt("@bodyExpansion",i._getExpandedState())("id",i.id),ke("aria-labelledby",i._headerId),$(4),mt("cdkPortalOutlet",i._portal))},dependencies:[Fd],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color, var(--mat-app-surface));color:var(--mat-expansion-container-text-color, var(--mat-app-on-surface));border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font, var(--mat-app-body-large-font));font-size:var(--mat-expansion-container-text-size, var(--mat-app-body-large-size));font-weight:var(--mat-expansion-container-text-weight, var(--mat-app-body-large-weight));line-height:var(--mat-expansion-container-text-line-height, var(--mat-app-body-large-line-height));letter-spacing:var(--mat-expansion-container-text-tracking, var(--mat-app-body-large-tracking))}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color, var(--mat-app-outline))}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[M7.bodyExpansion]},changeDetection:0}),t})();function eL(t){return t.fromState==="void"}var lOt=(()=>{let t=class{constructor(i,n,s,a,o,l,c){this.panel=i,this._element=n,this._focusMonitor=s,this._changeDetectorRef=a,this._animationMode=l,this._parentChangeSubscription=vi.EMPTY,this.tabIndex=0;let h=i.accordion?i.accordion._stateChanges.pipe(Ye(p=>!!(p.hideToggle||p.togglePosition))):io;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=lr(i.opened,i.closed,h,i._inputChanges.pipe(Ye(p=>!!(p.hideToggle||p.disabled||p.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),i.closed.pipe(Ye(()=>i._containsFocus())).subscribe(()=>s.focusVia(n,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){let i=this._isExpanded();return i&&this.expandedHeight?this.expandedHeight:!i&&this.collapsedHeight?this.collapsedHeight:null}_keydown(i){switch(i.keyCode){case 32:case 13:ps(i)||(i.preventDefault(),this._toggle());break;default:this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(i);return}}focus(i,n){i?this._focusMonitor.focusVia(this._element,i,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(i=>{i&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}};return t.\u0275fac=function(r){return new(r||t)(R(D7,1),R(te),R(ul),R(di),R(B7,8),R(kr,8),Kd("tabindex"))},t.\u0275cmp=Pt({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(r,i){r&1&&yt("click",function(){return i._toggle()})("keydown",function(n){return i._keydown(n)}),r&2&&(ke("id",i.panel._headerId)("tabindex",i.disabled?-1:i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),Ya("height",i._getHeaderHeight()),ee("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after",i._getTogglePosition()==="after")("mat-expansion-toggle-indicator-before",i._getTogglePosition()==="before")("_mat-animation-noopable",i._animationMode==="NoopAnimations"))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[2,"tabIndex","tabIndex",r=>r==null?0:or(r)]},standalone:!0,features:[ji,Kt],ngContentSelectors:nOt,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(r,i){r&1&&(Mi(rOt),N(0,"span",0),pe(1),pe(2,1),pe(3,2),F(),Wt(4,sOt,3,1,"span",1)),r&2&&(ee("mat-content-hide-toggle",!i._showToggle()),$(4),ae(i._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font, var(--mat-app-title-medium-font));font-size:var(--mat-expansion-header-text-size, var(--mat-app-title-medium-size));font-weight:var(--mat-expansion-header-text-weight, var(--mat-app-title-medium-weight));line-height:var(--mat-expansion-header-text-line-height, var(--mat-app-title-medium-line-height));letter-spacing:var(--mat-expansion-header-text-tracking, var(--mat-app-title-medium-tracking))}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color, var(--mat-app-surface))}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color, var(--mat-app-on-surface))}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color, var(--mat-app-on-surface-variant))}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[M7.indicatorRotate]},changeDetection:0}),t})(),AT=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ai,P7,zd]}),t})(),cOt=["youtubeContainer"];function uOt(t,e){if(t&1){let r=Qe();N(0,"youtube-player-placeholder",2),yt("click",function(){Lt(r);let i=Rt();return Nt(i._load(!0))}),F()}if(t&2){let r=Rt();mt("videoId",r.videoId)("width",r.width)("height",r.height)("isLoading",r._isLoading)("buttonLabel",r.placeholderButtonLabel)("quality",r.placeholderImageQuality)}}var hOt=(()=>{let t=class{_getBackgroundImage(){let i;return this.quality==="low"?i=`https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg`:this.quality==="high"?i=`https://i.ytimg.com/vi/${this.videoId}/maxresdefault.jpg`:i=`https://i.ytimg.com/vi_webp/${this.videoId}/sddefault.webp`,`url(${i})`}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["youtube-player-placeholder"]],hostAttrs:[1,"youtube-player-placeholder"],hostVars:8,hostBindings:function(r,i){r&2&&(Ya("background-image",i._getBackgroundImage())("width",i.width,"px")("height",i.height,"px"),ee("youtube-player-placeholder-loading",i.isLoading))},inputs:{videoId:"videoId",width:"width",height:"height",isLoading:"isLoading",buttonLabel:"buttonLabel",quality:"quality"},standalone:!0,features:[Kt],decls:4,vars:1,consts:[["type","button",1,"youtube-player-placeholder-button"],["height","100%","version","1.1","viewBox","0 0 68 48","focusable","false","aria-hidden","true"],["d","M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z","fill","#f00"],["d","M 45,24 27,14 27,34","fill","#fff"]],template:function(r,i){r&1&&(N(0,"button",0),ju(),N(1,"svg",1),Ot(2,"path",2)(3,"path",3),F()()),r&2&&ke("aria-label",i.buttonLabel)},styles:[".youtube-player-placeholder{display:flex;align-items:center;justify-content:center;width:100%;overflow:hidden;cursor:pointer;background-color:#000;background-position:center center;background-size:cover;transition:box-shadow 300ms ease;box-shadow:inset 0 120px 90px -90px rgba(0,0,0,.8)}.youtube-player-placeholder-button{transition:opacity 300ms ease;-moz-appearance:none;-webkit-appearance:none;background:none;border:none;padding:0;display:flex}.youtube-player-placeholder-button svg{width:68px;height:48px}.youtube-player-placeholder-loading{box-shadow:none}.youtube-player-placeholder-loading .youtube-player-placeholder-button{opacity:0}"],encapsulation:2,changeDetection:0}),t})(),dOt=new ht("YOUTUBE_PLAYER_CONFIG"),iL=640,rL=390;function nL(t){return t==null?t:or(t,0)}var La=function(t){return t[t.UNSTARTED=-1]="UNSTARTED",t[t.ENDED=0]="ENDED",t[t.PLAYING=1]="PLAYING",t[t.PAUSED=2]="PAUSED",t[t.BUFFERING=3]="BUFFERING",t[t.CUED=5]="CUED",t}(La||{}),pOt=(()=>{let t=class{get height(){return this._height}set height(i){this._height=i==null||isNaN(i)?rL:i}get width(){return this._width}set width(i){this._width=i==null||isNaN(i)?iL:i}constructor(i,n){this._ngZone=i,this._destroyed=new Bt,this._playerChanges=new cc(void 0),this._nonce=K(Py,{optional:!0}),this._changeDetectorRef=K(di),this._isLoading=!1,this._hasPlaceholder=!0,this._height=rL,this._width=iL,this.disableCookies=!1,this.disablePlaceholder=!1,this.showBeforeIframeApiLoads=!1,this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange");let s=K(dOt,{optional:!0});this.loadApi=s?.loadApi??!0,this.disablePlaceholder=!!s?.disablePlaceholder,this.placeholderButtonLabel=s?.placeholderButtonLabel||"Play video",this.placeholderImageQuality=s?.placeholderImageQuality||"standard",this._isBrowser=Fn(n)}ngAfterViewInit(){this._conditionallyLoad()}ngOnChanges(i){this._shouldRecreatePlayer(i)?this._conditionallyLoad():this._player&&((i.width||i.height)&&this._setSize(),i.suggestedQuality&&this._setQuality(),(i.startSeconds||i.endSeconds||i.suggestedQuality)&&this._cuePlayer())}ngOnDestroy(){this._pendingPlayer?.destroy(),this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():(this._getPendingState().playbackState=La.PLAYING,this._load(!0))}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=La.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=La.CUED}seekTo(i,n){this._player?this._player.seekTo(i,n):this._getPendingState().seek={seconds:i,allowSeekAhead:n}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():this._pendingPlayerState?!!this._pendingPlayerState.muted:!1}setVolume(i){this._player?this._player.setVolume(i):this._getPendingState().volume=i}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&this._pendingPlayerState.volume!=null?this._pendingPlayerState.volume:0}setPlaybackRate(i){if(this._player)return this._player.setPlaybackRate(i);this._getPendingState().playbackRate=i}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&this._pendingPlayerState.playbackRate!=null?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(!(!this._isBrowser||!window.YT))return this._player?this._player.getPlayerState():this._pendingPlayerState&&this._pendingPlayerState.playbackState!=null?this._pendingPlayerState.playbackState:La.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_load(i){this._isBrowser&&(!window.YT||!window.YT.Player?(this.loadApi?(this._isLoading=!0,mOt(this._nonce)):this.showBeforeIframeApiLoads,this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback?.(),this._ngZone.run(()=>this._createPlayer(i))}):this._createPlayer(i))}_conditionallyLoad(){this._shouldShowPlaceholder()?this.playerVars?.autoplay===1&&this._load(!0):this._load(!1)}_shouldShowPlaceholder(){return this.disablePlaceholder?!1:this._isBrowser?this._hasPlaceholder&&!!this.videoId&&!this._player:!0}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_shouldRecreatePlayer(i){let n=i.videoId||i.playerVars||i.disableCookies||i.disablePlaceholder;return!!n&&!n.isFirstChange()}_createPlayer(i){if(this._player?.destroy(),this._pendingPlayer?.destroy(),typeof YT>"u"||!this.videoId&&!this.playerVars?.list)return;let n=this._ngZone.runOutsideAngular(()=>new YT.Player(this.youtubeContainer.nativeElement,{videoId:this.videoId,host:this.disableCookies?"https://www.youtube-nocookie.com":void 0,width:this.width,height:this.height,playerVars:i?Q(x({},this.playerVars||{}),{autoplay:1}):this.playerVars})),s=()=>{this._ngZone.run(()=>{this._isLoading=!1,this._hasPlaceholder=!1,this._player=n,this._pendingPlayer=void 0,n.removeEventListener("onReady",s),this._playerChanges.next(n),this._setSize(),this._setQuality(),this._pendingPlayerState&&(this._applyPendingPlayerState(n,this._pendingPlayerState),this._pendingPlayerState=void 0);let a=n.getPlayerState();(a===La.UNSTARTED||a===La.CUED||a==null)&&this._cuePlayer(),this._changeDetectorRef.markForCheck()})};this._pendingPlayer=n,n.addEventListener("onReady",s)}_applyPendingPlayerState(i,n){let{playbackState:s,playbackRate:a,volume:o,muted:l,seek:c}=n;switch(s){case La.PLAYING:i.playVideo();break;case La.PAUSED:i.pauseVideo();break;case La.CUED:i.stopVideo();break}a!=null&&i.setPlaybackRate(a),o!=null&&i.setVolume(o),l!=null&&(l?i.mute():i.unMute()),c!=null&&i.seekTo(c.seconds,c.allowSeekAhead)}_cuePlayer(){this._player&&this.videoId&&this._player.cueVideoById({videoId:this.videoId,startSeconds:this.startSeconds,endSeconds:this.endSeconds,suggestedQuality:this.suggestedQuality})}_setSize(){this._player?.setSize(this.width,this.height)}_setQuality(){this._player&&this.suggestedQuality&&this._player.setPlaybackQuality(this.suggestedQuality)}_getLazyEmitter(i){return this._playerChanges.pipe(_i(n=>n?GN(s=>{n.addEventListener(i,s)},s=>{try{n?.removeEventListener?.(i,s)}catch{}}):Ge()),n=>new Ht(s=>n.subscribe({next:a=>this._ngZone.run(()=>s.next(a)),error:a=>s.error(a),complete:()=>s.complete()})),Me(this._destroyed))}};return t.\u0275fac=function(r){return new(r||t)(R(Zt),R(dn))},t.\u0275cmp=Pt({type:t,selectors:[["youtube-player"]],viewQuery:function(r,i){if(r&1&&gi(cOt,7),r&2){let n;oe(n=le())&&(i.youtubeContainer=n.first)}},inputs:{videoId:"videoId",height:[2,"height","height",or],width:[2,"width","width",or],startSeconds:[2,"startSeconds","startSeconds",nL],endSeconds:[2,"endSeconds","endSeconds",nL],suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:[2,"disableCookies","disableCookies",Ut],loadApi:[2,"loadApi","loadApi",Ut],disablePlaceholder:[2,"disablePlaceholder","disablePlaceholder",Ut],showBeforeIframeApiLoads:[2,"showBeforeIframeApiLoads","showBeforeIframeApiLoads",Ut],placeholderButtonLabel:"placeholderButtonLabel",placeholderImageQuality:"placeholderImageQuality"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},standalone:!0,features:[ji,yr,Kt],decls:4,vars:3,consts:[["youtubeContainer",""],[3,"videoId","width","height","isLoading","buttonLabel","quality"],[3,"click","videoId","width","height","isLoading","buttonLabel","quality"]],template:function(r,i){r&1&&(Wt(0,uOt,1,6,"youtube-player-placeholder",1),N(1,"div"),Ot(2,"div",null,0),F()),r&2&&(ae(i._shouldShowPlaceholder()?0:-1),$(),Ya("display",i._shouldShowPlaceholder()?"none":""))},dependencies:[hOt],encapsulation:2,changeDetection:0}),t})(),z1=!1;function mOt(t){if(z1)return;let e="https://www.youtube.com/iframe_api",r=document.createElement("script"),i=n=>{r.removeEventListener("load",i),r.removeEventListener("error",i),n.type==="error"&&(z1=!1)};r.addEventListener("load",i),r.addEventListener("error",i),r.src=e,r.async=!0,t&&r.setAttribute("nonce",t),z1=!0,document.body.appendChild(r)}var fOt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})();function ST(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var ih=ST();function L7(t){ih=t}var N7=/[&<>"']/,gOt=new RegExp(N7.source,"g"),F7=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,vOt=new RegExp(F7.source,"g"),_Ot={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},sL=t=>_Ot[t];function ns(t,e){if(e){if(N7.test(t))return t.replace(gOt,sL)}else if(F7.test(t))return t.replace(vOt,sL);return t}var bOt=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function yOt(t){return t.replace(bOt,(e,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}var wOt=/(^|[^\[])\^/g;function Ni(t,e){let r=typeof t=="string"?t:t.source;e=e||"";let i={replace:(n,s)=>{let a=typeof s=="string"?s:s.source;return a=a.replace(wOt,"$1"),r=r.replace(n,a),i},getRegex:()=>new RegExp(r,e)};return i}function aL(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}var Nm={exec:()=>null};function oL(t,e){let r=t.replace(/\|/g,(s,a,o)=>{let l=!1,c=a;for(;--c>=0&&o[c]==="\\";)l=!l;return l?"|":" |"}),i=r.split(/ \|/),n=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function Kv(t,e,r){let i=t.length;if(i===0)return"";let n=0;for(;n<i;){let s=t.charAt(i-n-1);if(s===e&&!r)n++;else if(s!==e&&r)n++;else break}return t.slice(0,i-n)}function xOt(t,e){if(t.indexOf(e[1])===-1)return-1;let r=0;for(let i=0;i<t.length;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])r++;else if(t[i]===e[1]&&(r--,r<0))return i;return-1}function lL(t,e,r,i){let n=e.href,s=e.title?ns(e.title):null,a=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){i.state.inLink=!0;let o={type:"link",raw:r,href:n,title:s,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,o}return{type:"image",raw:r,href:n,title:s,text:ns(a)}}function COt(t,e){let r=t.match(/^(\s+)(?:```)/);if(r===null)return e;let i=r[1];return e.split(`
`).map(n=>{let s=n.match(/^\s+/);if(s===null)return n;let[a]=s;return a.length>=i.length?n.slice(i.length):n}).join(`
`)}var Jb=class{options;rules;lexer;constructor(t){this.options=t||ih}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let r=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Kv(r,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let r=e[0],i=COt(r,e[3]||"");return{type:"code",raw:r,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:i}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let r=e[2].trim();if(/#$/.test(r)){let i=Kv(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let r=e[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);r=Kv(r.replace(/^ *>[ \t]?/gm,""),`
`);let i=this.lexer.state.top;this.lexer.state.top=!0;let n=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:e[0],tokens:n,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let r=e[1].trim(),i=r.length>1,n={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let s=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),a="",o="",l=!1;for(;t;){let c=!1;if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;a=e[0],t=t.substring(a.length);let h=e[2].split(`
`,1)[0].replace(/^\t+/,w=>" ".repeat(3*w.length)),p=t.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,o=h.trimStart()):(m=e[2].search(/[^ ]/),m=m>4?1:m,o=h.slice(m),m+=e[1].length);let f=!1;if(!h&&/^ *$/.test(p)&&(a+=p+`
`,t=t.substring(p.length+1),c=!0),!c){let w=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),S=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),C=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),b=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;t;){let P=t.split(`
`,1)[0];if(p=P,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),C.test(p)||b.test(p)||w.test(p)||S.test(t))break;if(p.search(/[^ ]/)>=m||!p.trim())o+=`
`+p.slice(m);else{if(f||h.search(/[^ ]/)>=4||C.test(h)||b.test(h)||S.test(h))break;o+=`
`+p}!f&&!p.trim()&&(f=!0),a+=P+`
`,t=t.substring(P.length+1),h=p.slice(m)}}n.loose||(l?n.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let g=null,_;this.options.gfm&&(g=/^\[[ xX]\] /.exec(o),g&&(_=g[0]!=="[ ] ",o=o.replace(/^\[[ xX]\] +/,""))),n.items.push({type:"list_item",raw:a,task:!!g,checked:_,loose:!1,text:o,tokens:[]}),n.raw+=a}n.items[n.items.length-1].raw=a.trimEnd(),n.items[n.items.length-1].text=o.trimEnd(),n.raw=n.raw.trimEnd();for(let c=0;c<n.items.length;c++)if(this.lexer.state.top=!1,n.items[c].tokens=this.lexer.blockTokens(n.items[c].text,[]),!n.loose){let h=n.items[c].tokens.filter(m=>m.type==="space"),p=h.length>0&&h.some(m=>/\n.*\n/.test(m.raw));n.loose=p}if(n.loose)for(let c=0;c<n.items.length;c++)n.items[c].loose=!0;return n}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let r=e[1].toLowerCase().replace(/\s+/g," "),i=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:r,raw:e[0],href:i,title:n}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!/[:|]/.test(e[2]))return;let r=oL(e[1]),i=e[2].replace(/^\||\| *$/g,"").split("|"),n=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let a of i)/^ *-+: *$/.test(a)?s.align.push("right"):/^ *:-+: *$/.test(a)?s.align.push("center"):/^ *:-+ *$/.test(a)?s.align.push("left"):s.align.push(null);for(let a of r)s.header.push({text:a,tokens:this.lexer.inline(a)});for(let a of n)s.rows.push(oL(a,s.header.length).map(o=>({text:o,tokens:this.lexer.inline(o)})));return s}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let r=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:r,tokens:this.lexer.inline(r)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:ns(e[1])}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let r=e[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let s=Kv(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{let s=xOt(e[2],"()");if(s>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let i=e[2],n="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],n=s[3])}else n=e[3]?e[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),lL(e,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer)}}reflink(t,e){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let i=(r[2]||r[1]).replace(/\s+/g," "),n=e[i.toLowerCase()];if(!n){let s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return lL(r,n,r[0],this.lexer)}}emStrong(t,e,r=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))&&(!(i[1]||i[2])||!r||this.rules.inline.punctuation.exec(r))){let n=[...i[0]].length-1,s,a,o=n,l=0,c=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+n);(i=c.exec(e))!=null;){if(s=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!s)continue;if(a=[...s].length,i[3]||i[4]){o+=a;continue}else if((i[5]||i[6])&&n%3&&!((n+a)%3)){l+=a;continue}if(o-=a,o>0)continue;a=Math.min(a,a+o+l);let h=[...i[0]][0].length,p=t.slice(0,n+i.index+h+a);if(Math.min(n,a)%2){let f=p.slice(1,-1);return{type:"em",raw:p,text:f,tokens:this.lexer.inlineTokens(f)}}let m=p.slice(2,-2);return{type:"strong",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let r=e[2].replace(/\n/g," "),i=/[^ ]/.test(r),n=/^ /.test(r)&&/ $/.test(r);return i&&n&&(r=r.substring(1,r.length-1)),r=ns(r,!0),{type:"codespan",raw:e[0],text:r}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let r,i;return e[2]==="@"?(r=ns(e[1]),i="mailto:"+r):(r=ns(e[1]),i=r),{type:"link",raw:e[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let r,i;if(e[2]==="@")r=ns(e[0]),i="mailto:"+r;else{let n;do n=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??"";while(n!==e[0]);r=ns(e[0]),e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let r;return this.lexer.state.inRawBlock?r=e[0]:r=ns(e[0]),{type:"text",raw:e[0],text:r}}}},kOt=/^(?: *(?:\n|$))+/,AOt=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,SOt=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ng=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,EOt=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,z7=/(?:[*+-]|\d{1,9}[.)])/,V7=Ni(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,z7).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),ET=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,TOt=/^[^\n]+/,TT=/(?!\s*\])(?:\\.|[^\[\]\\])+/,IOt=Ni(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",TT).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),OOt=Ni(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,z7).getRegex(),w0="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",IT=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,POt=Ni("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",IT).replace("tag",w0).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),j7=Ni(ET).replace("hr",ng).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",w0).getRegex(),MOt=Ni(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",j7).getRegex(),OT={blockquote:MOt,code:AOt,def:IOt,fences:SOt,heading:EOt,hr:ng,html:POt,lheading:V7,list:OOt,newline:kOt,paragraph:j7,table:Nm,text:TOt},cL=Ni("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ng).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",w0).getRegex(),ROt=Q(x({},OT),{table:cL,paragraph:Ni(ET).replace("hr",ng).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",cL).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",w0).getRegex()}),BOt=Q(x({},OT),{html:Ni(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",IT).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Nm,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ni(ET).replace("hr",ng).replace("heading",` *#{1,6} *[^
]`).replace("lheading",V7).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),U7=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,DOt=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,H7=/^( {2,}|\\)\n(?!\s*$)/,LOt=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,sg="\\p{P}\\p{S}",NOt=Ni(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,sg).getRegex(),FOt=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,zOt=Ni(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,sg).getRegex(),VOt=Ni("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,sg).getRegex(),jOt=Ni("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,sg).getRegex(),UOt=Ni(/\\([punct])/,"gu").replace(/punct/g,sg).getRegex(),HOt=Ni(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),GOt=Ni(IT).replace("(?:-->|$)","-->").getRegex(),WOt=Ni("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",GOt).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Qb=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ZOt=Ni(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Qb).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),G7=Ni(/^!?\[(label)\]\[(ref)\]/).replace("label",Qb).replace("ref",TT).getRegex(),W7=Ni(/^!?\[(ref)\](?:\[\])?/).replace("ref",TT).getRegex(),$Ot=Ni("reflink|nolink(?!\\()","g").replace("reflink",G7).replace("nolink",W7).getRegex(),PT={_backpedal:Nm,anyPunctuation:UOt,autolink:HOt,blockSkip:FOt,br:H7,code:DOt,del:Nm,emStrongLDelim:zOt,emStrongRDelimAst:VOt,emStrongRDelimUnd:jOt,escape:U7,link:ZOt,nolink:W7,punctuation:NOt,reflink:G7,reflinkSearch:$Ot,tag:WOt,text:LOt,url:Nm},XOt=Q(x({},PT),{link:Ni(/^!?\[(label)\]\((.*?)\)/).replace("label",Qb).getRegex(),reflink:Ni(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Qb).getRegex()}),Ok=Q(x({},PT),{escape:Ni(U7).replace("])","~|])").getRegex(),url:Ni(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),qOt=Q(x({},Ok),{br:Ni(H7).replace("{2,}","*").getRegex(),text:Ni(Ok.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),Yv={normal:OT,gfm:ROt,pedantic:BOt},hm={normal:PT,gfm:Ok,breaks:qOt,pedantic:XOt},mu=class Pk{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ih,this.options.tokenizer=this.options.tokenizer||new Jb,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={block:Yv.normal,inline:hm.normal};this.options.pedantic?(r.block=Yv.pedantic,r.inline=hm.pedantic):this.options.gfm&&(r.block=Yv.gfm,this.options.breaks?r.inline=hm.breaks:r.inline=hm.gfm),this.tokenizer.rules=r}static get rules(){return{block:Yv,inline:hm}}static lex(e,r){return new Pk(r).lex(e)}static lexInline(e,r){return new Pk(r).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){let i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,r=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(o,l,c)=>l+"    ".repeat(c.length));let i,n,s,a;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(i=o.call({lexer:this},e,r))?(e=e.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+i.raw,n.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),r.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let o=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(h=>{c=h.call({lexer:this},l),typeof c=="number"&&c>=0&&(o=Math.min(o,c))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){n=r[r.length-1],a&&n.type==="paragraph"?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(i),a=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),n=r[r.length-1],n&&n.type==="text"?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(i);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let i,n,s,a=e,o,l,c;if(this.tokens.links){let h=Object.keys(this.tokens.links);if(h.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)h.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,o.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(h=>(i=h.call({lexer:this},e,r))?(e=e.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),n=r[r.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):r.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),n=r[r.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):r.push(i);continue}if(i=this.tokenizer.emStrong(e,a,c)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),r.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),r.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let h=1/0,p=e.slice(1),m;this.options.extensions.startInline.forEach(f=>{m=f.call({lexer:this},p),typeof m=="number"&&m>=0&&(h=Math.min(h,m))}),h<1/0&&h>=0&&(s=e.substring(0,h+1))}if(i=this.tokenizer.inlineText(s)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(c=i.raw.slice(-1)),l=!0,n=r[r.length-1],n&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):r.push(i);continue}if(e){let h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return r}},Vd=class{options;constructor(t){this.options=t||ih}code(t,e,r){let i=(e||"").match(/^\S*/)?.[0];return t=t.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+ns(i)+'">'+(r?t:ns(t,!0))+`</code></pre>
`:"<pre><code>"+(r?t:ns(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,e){return t}heading(t,e,r){return`<h${e}>${t}</h${e}>
`}hr(){return`<hr>
`}list(t,e,r){let i=e?"ol":"ul",n=e&&r!==1?' start="'+r+'"':"";return"<"+i+n+`>
`+t+"</"+i+`>
`}listitem(t,e,r){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+e+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,e){let r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,e,r){let i=aL(t);if(i===null)return r;t=i;let n='<a href="'+t+'"';return e&&(n+=' title="'+e+'"'),n+=">"+r+"</a>",n}image(t,e,r){let i=aL(t);if(i===null)return r;t=i;let n=`<img src="${t}" alt="${r}"`;return e&&(n+=` title="${e}"`),n+=">",n}text(t){return t}},MT=class{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,r){return""+r}image(t,e,r){return""+r}br(){return""}},fu=class Mk{options;renderer;textRenderer;constructor(e){this.options=e||ih,this.options.renderer=this.options.renderer||new Vd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new MT}static parse(e,r){return new Mk(r).parse(e)}static parseInline(e,r){return new Mk(r).parseInline(e)}parse(e,r=!0){let i="";for(let n=0;n<e.length;n++){let s=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let a=s,o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){i+=o||"";continue}}switch(s.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{let a=s;i+=this.renderer.heading(this.parseInline(a.tokens),a.depth,yOt(this.parseInline(a.tokens,this.textRenderer)));continue}case"code":{let a=s;i+=this.renderer.code(a.text,a.lang,!!a.escaped);continue}case"table":{let a=s,o="",l="";for(let h=0;h<a.header.length;h++)l+=this.renderer.tablecell(this.parseInline(a.header[h].tokens),{header:!0,align:a.align[h]});o+=this.renderer.tablerow(l);let c="";for(let h=0;h<a.rows.length;h++){let p=a.rows[h];l="";for(let m=0;m<p.length;m++)l+=this.renderer.tablecell(this.parseInline(p[m].tokens),{header:!1,align:a.align[m]});c+=this.renderer.tablerow(l)}i+=this.renderer.table(o,c);continue}case"blockquote":{let a=s,o=this.parse(a.tokens);i+=this.renderer.blockquote(o);continue}case"list":{let a=s,o=a.ordered,l=a.start,c=a.loose,h="";for(let p=0;p<a.items.length;p++){let m=a.items[p],f=m.checked,g=m.task,_="";if(m.task){let w=this.renderer.checkbox(!!f);c?m.tokens.length>0&&m.tokens[0].type==="paragraph"?(m.tokens[0].text=w+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&m.tokens[0].tokens[0].type==="text"&&(m.tokens[0].tokens[0].text=w+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:w+" "}):_+=w+" "}_+=this.parse(m.tokens,c),h+=this.renderer.listitem(_,g,!!f)}i+=this.renderer.list(h,o,l);continue}case"html":{let a=s;i+=this.renderer.html(a.text,a.block);continue}case"paragraph":{let a=s;i+=this.renderer.paragraph(this.parseInline(a.tokens));continue}case"text":{let a=s,o=a.tokens?this.parseInline(a.tokens):a.text;for(;n+1<e.length&&e[n+1].type==="text";)a=e[++n],o+=`
`+(a.tokens?this.parseInline(a.tokens):a.text);i+=r?this.renderer.paragraph(o):o;continue}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(e,r){r=r||this.renderer;let i="";for(let n=0;n<e.length;n++){let s=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=a||"";continue}}switch(s.type){case"escape":{let a=s;i+=r.text(a.text);break}case"html":{let a=s;i+=r.html(a.text);break}case"link":{let a=s;i+=r.link(a.href,a.title,this.parseInline(a.tokens,r));break}case"image":{let a=s;i+=r.image(a.href,a.title,a.text);break}case"strong":{let a=s;i+=r.strong(this.parseInline(a.tokens,r));break}case"em":{let a=s;i+=r.em(this.parseInline(a.tokens,r));break}case"codespan":{let a=s;i+=r.codespan(a.text);break}case"br":{i+=r.br();break}case"del":{let a=s;i+=r.del(this.parseInline(a.tokens,r));break}case"text":{let a=s;i+=r.text(a.text);break}default:{let a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}},F_=class{options;constructor(t){this.options=t||ih}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}},KOt=class{defaults=ST();options=this.setOptions;parse=this.#t(mu.lex,fu.parse);parseInline=this.#t(mu.lexInline,fu.parseInline);Parser=fu;Renderer=Vd;TextRenderer=MT;Lexer=mu;Tokenizer=Jb;Hooks=F_;constructor(...t){this.use(...t)}walkTokens(t,e){let r=[];for(let i of t)switch(r=r.concat(e.call(this,i)),i.type){case"table":{let n=i;for(let s of n.header)r=r.concat(this.walkTokens(s.tokens,e));for(let s of n.rows)for(let a of s)r=r.concat(this.walkTokens(a.tokens,e));break}case"list":{let n=i;r=r.concat(this.walkTokens(n.items,e));break}default:{let n=i;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(s=>{let a=n[s].flat(1/0);r=r.concat(this.walkTokens(a,e))}):n.tokens&&(r=r.concat(this.walkTokens(n.tokens,e)))}}return r}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{let i=x({},r);if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let s=e.renderers[n.name];s?e.renderers[n.name]=function(...a){let o=n.renderer.apply(this,a);return o===!1&&(o=s.apply(this,a)),o}:e.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let s=e[n.level];s?s.unshift(n.tokenizer):e[n.level]=[n.tokenizer],n.start&&(n.level==="block"?e.startBlock?e.startBlock.push(n.start):e.startBlock=[n.start]:n.level==="inline"&&(e.startInline?e.startInline.push(n.start):e.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(e.childTokens[n.name]=n.childTokens)}),i.extensions=e),r.renderer){let n=this.defaults.renderer||new Vd(this.defaults);for(let s in r.renderer){if(!(s in n))throw new Error(`renderer '${s}' does not exist`);if(s==="options")continue;let a=s,o=r.renderer[a],l=n[a];n[a]=(...c)=>{let h=o.apply(n,c);return h===!1&&(h=l.apply(n,c)),h||""}}i.renderer=n}if(r.tokenizer){let n=this.defaults.tokenizer||new Jb(this.defaults);for(let s in r.tokenizer){if(!(s in n))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;let a=s,o=r.tokenizer[a],l=n[a];n[a]=(...c)=>{let h=o.apply(n,c);return h===!1&&(h=l.apply(n,c)),h}}i.tokenizer=n}if(r.hooks){let n=this.defaults.hooks||new F_;for(let s in r.hooks){if(!(s in n))throw new Error(`hook '${s}' does not exist`);if(s==="options")continue;let a=s,o=r.hooks[a],l=n[a];F_.passThroughHooks.has(s)?n[a]=c=>{if(this.defaults.async)return Promise.resolve(o.call(n,c)).then(p=>l.call(n,p));let h=o.call(n,c);return l.call(n,h)}:n[a]=(...c)=>{let h=o.apply(n,c);return h===!1&&(h=l.apply(n,c)),h}}i.hooks=n}if(r.walkTokens){let n=this.defaults.walkTokens,s=r.walkTokens;i.walkTokens=function(a){let o=[];return o.push(s.call(this,a)),n&&(o=o.concat(n.call(this,a))),o}}this.defaults=x(x({},this.defaults),i)}),this}setOptions(t){return this.defaults=x(x({},this.defaults),t),this}lexer(t,e){return mu.lex(t,e??this.defaults)}parser(t,e){return fu.parse(t,e??this.defaults)}#t(t,e){return(r,i)=>{let n=x({},i),s=x(x({},this.defaults),n);this.defaults.async===!0&&n.async===!1&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);let a=this.#e(!!s.silent,!!s.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(o=>t(o,s)).then(o=>s.hooks?s.hooks.processAllTokens(o):o).then(o=>s.walkTokens?Promise.all(this.walkTokens(o,s.walkTokens)).then(()=>o):o).then(o=>e(o,s)).then(o=>s.hooks?s.hooks.postprocess(o):o).catch(a);try{s.hooks&&(r=s.hooks.preprocess(r));let o=t(r,s);s.hooks&&(o=s.hooks.processAllTokens(o)),s.walkTokens&&this.walkTokens(o,s.walkTokens);let l=e(o,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(o){return a(o)}}}#e(t,e){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let i="<p>An error occurred:</p><pre>"+ns(r.message+"",!0)+"</pre>";return e?Promise.resolve(i):i}if(e)return Promise.reject(r);throw r}}},Fu=new KOt;function bi(t,e){return Fu.parse(t,e)}bi.options=bi.setOptions=function(t){return Fu.setOptions(t),bi.defaults=Fu.defaults,L7(bi.defaults),bi};bi.getDefaults=ST;bi.defaults=ih;bi.use=function(...t){return Fu.use(...t),bi.defaults=Fu.defaults,L7(bi.defaults),bi};bi.walkTokens=function(t,e){return Fu.walkTokens(t,e)};bi.parseInline=Fu.parseInline;bi.Parser=fu;bi.parser=fu.parse;bi.Renderer=Vd;bi.TextRenderer=MT;bi.Lexer=mu;bi.lexer=mu.lex;bi.Tokenizer=Jb;bi.Hooks=F_;bi.parse=bi;var PHt=bi.options,MHt=bi.setOptions,RHt=bi.use,BHt=bi.walkTokens,DHt=bi.parseInline,LHt=fu.parse,NHt=mu.lex,YOt=["*"],JOt="Copy",QOt="Copied",tPt=(()=>{let t=class{constructor(){this._buttonClick$=new Bt,this.copied$=this._buttonClick$.pipe(_i(()=>lr(Ge(!0),Hd(3e3).pipe(XN(!1)))),ii(),hs(1)),this.copiedText$=this.copied$.pipe(fr(!1),kt(i=>i?QOt:JOt))}onCopyToClipboardClick(){this._buttonClick$.next()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["markdown-clipboard"]],standalone:!0,features:[Kt],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(r,i){r&1&&(N(0,"button",0),pi(1,"async"),yt("click",function(){return i.onCopyToClipboardClick()}),ut(2),pi(3,"async"),F()),r&2&&(ee("copied",mi(1,3,i.copied$)),$(2),Oi(mi(3,5,i.copiedText$)))},dependencies:[ip],encapsulation:2,changeDetection:0}),t})(),ePt=new ht("CLIPBOARD_OPTIONS"),Rk=function(t){return t.CommandLine="command-line",t.LineHighlight="line-highlight",t.LineNumbers="line-numbers",t}(Rk||{}),Z7=new ht("MARKED_EXTENSIONS"),iPt=new ht("MARKED_OPTIONS"),rPt="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",nPt="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",sPt="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",aPt="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",oPt="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",lPt="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",$7=new ht("SECURITY_CONTEXT"),X7=(()=>{let t=class{get options(){return this._options}set options(i){this._options=x(x({},this.DEFAULT_MARKED_OPTIONS),i)}get renderer(){return this.options.renderer}set renderer(i){this.options.renderer=i}constructor(i,n,s,a,o,l,c){this.clipboardOptions=i,this.extensions=n,this.platform=a,this.securityContext=o,this.http=l,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new Vd},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Bt,this.reload$=this._reload$.asObservable(),this.options=s}parse(i,n=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:s,inline:a,emoji:o,mermaid:l,disableSanitizer:c}=n,h=x(x({},this.options),n.markedOptions),p=h.renderer||this.renderer||new Vd;this.extensions&&(this.renderer=this.extendsRendererForExtensions(p)),l&&(this.renderer=this.extendsRendererForMermaid(p));let m=this.trimIndentation(i),f=s?this.decodeHtml(m):m,g=o?this.parseEmoji(f):f,_=this.parseMarked(g,h,a);return(c?_:this.sanitizer.sanitize(this.securityContext,_))||""}render(i,n=this.DEFAULT_RENDER_OPTIONS,s){let{clipboard:a,clipboardOptions:o,katex:l,katexOptions:c,mermaid:h,mermaidOptions:p}=n;l&&this.renderKatex(i,x(x({},this.DEFAULT_KATEX_OPTIONS),c)),h&&this.renderMermaid(i,x(x({},this.DEFAULT_MERMAID_OPTIONS),p)),a&&this.renderClipboard(i,s,x(x(x({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),o)),this.highlight(i)}reload(){this._reload$.next()}getSource(i){if(!this.http)throw new Error(lPt);return this.http.get(i,{responseType:"text"}).pipe(kt(n=>this.handleExtension(i,n)))}highlight(i){if(!Fn(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;i||(i=document);let n=i.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(n,s=>s.classList.add("language-none")),Prism.highlightAllUnder(i)}decodeHtml(i){if(!Fn(this.platform))return i;let n=document.createElement("textarea");return n.innerHTML=i,n.value}extendsRendererForExtensions(i){let n=i;return n.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&bi.use(...this.extensions),n.\u0275NgxMarkdownRendererExtendedForExtensions=!0),i}extendsRendererForMermaid(i){let n=i;if(n.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return i;let s=i.code;return i.code=function(a,o,l){return o==="mermaid"?`<div class="mermaid">${a}</div>`:s.call(this,a,o,l)},n.\u0275NgxMarkdownRendererExtendedForMermaid=!0,i}handleExtension(i,n){let s=i.lastIndexOf("://"),a=s>-1?i.substring(s+4):i,o=a.lastIndexOf("/"),l=o>-1?a.substring(o+1).split("?")[0]:"",c=l.lastIndexOf("."),h=c>-1?l.substring(c+1):"";return h&&h!=="md"?"```"+h+`
`+n+"\n```":n}parseMarked(i,n,s=!1){if(n.renderer){let a=x({},n.renderer);delete a.\u0275NgxMarkdownRendererExtendedForExtensions,delete a.\u0275NgxMarkdownRendererExtendedForMermaid,delete n.renderer,bi.use({renderer:a})}return s?bi.parseInline(i,n):bi.parse(i,n)}parseEmoji(i){if(!Fn(this.platform))return i;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(rPt);return joypixels.shortnameToUnicode(i)}renderKatex(i,n){if(Fn(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(nPt);renderMathInElement(i,n)}}renderClipboard(i,n,s){if(!Fn(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(aPt);if(!n)throw new Error(oPt);let{buttonComponent:a,buttonTemplate:o}=s,l=i.querySelectorAll("pre");for(let c=0;c<l.length;c++){let h=l.item(c),p=document.createElement("div");p.style.position="relative",h.parentNode.insertBefore(p,h),p.appendChild(h);let m=document.createElement("div");m.classList.add("markdown-clipboard-toolbar"),m.style.position="absolute",m.style.top=".5em",m.style.right=".5em",m.style.zIndex="1",p.insertAdjacentElement("beforeend",m),p.onmouseenter=()=>m.classList.add("hover"),p.onmouseleave=()=>m.classList.remove("hover");let f;if(a){let _=n.createComponent(a);f=_.hostView,_.changeDetectorRef.markForCheck()}else if(o)f=n.createEmbeddedView(o);else{let _=n.createComponent(tPt);f=_.hostView,_.changeDetectorRef.markForCheck()}let g;f.rootNodes.forEach(_=>{m.appendChild(_),g=new ClipboardJS(_,{text:()=>h.innerText})}),f.onDestroy(()=>g.destroy())}}renderMermaid(i,n=this.DEFAULT_MERMAID_OPTIONS){if(!Fn(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(sPt);let s=i.querySelectorAll(".mermaid");s.length!==0&&(mermaid.initialize(n),mermaid.run({nodes:s}))}trimIndentation(i){if(!i)return"";let n;return i.split(`
`).map(s=>{let a=n;return s.length>0&&(a=isNaN(a)?s.search(/\S|$/):Math.min(s.search(/\S|$/),a)),isNaN(n)&&(n=a),a?s.substring(a):s}).join(`
`)}};return t.\u0275fac=function(r){return new(r||t)(U(ePt,8),U(Z7,8),U(iPt,8),U(dn),U($7),U(js,8),U(rp))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),cPt=(()=>{let t=class{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(i){this._disableSanitizer=this.coerceBooleanProperty(i)}get inline(){return this._inline}set inline(i){this._inline=this.coerceBooleanProperty(i)}get clipboard(){return this._clipboard}set clipboard(i){this._clipboard=this.coerceBooleanProperty(i)}get emoji(){return this._emoji}set emoji(i){this._emoji=this.coerceBooleanProperty(i)}get katex(){return this._katex}set katex(i){this._katex=this.coerceBooleanProperty(i)}get mermaid(){return this._mermaid}set mermaid(i){this._mermaid=this.coerceBooleanProperty(i)}get lineHighlight(){return this._lineHighlight}set lineHighlight(i){this._lineHighlight=this.coerceBooleanProperty(i)}get lineNumbers(){return this._lineNumbers}set lineNumbers(i){this._lineNumbers=this.coerceBooleanProperty(i)}get commandLine(){return this._commandLine}set commandLine(i){this._commandLine=this.coerceBooleanProperty(i)}constructor(i,n,s){this.element=i,this.markdownService=n,this.viewContainerRef=s,this.error=new It,this.load=new It,this.ready=new It,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new Bt}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(Me(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(i,n=!1){return Dt(this,null,function*(){let s={decodeHtml:n,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},a={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},o=yield this.markdownService.parse(i,s);this.element.nativeElement.innerHTML=o,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,a,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(i){return i!=null&&`${String(i)}`!="false"}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:i=>{this.render(i).then(()=>{this.load.emit(i)})},error:i=>this.error.emit(i)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,Rk.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,Rk.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(i,n){let s=i.querySelectorAll("pre");for(let a=0;a<s.length;a++){let o=n instanceof Array?n:[n];s.item(a).classList.add(...o)}}setPluginOptions(i,n){let s=i.querySelectorAll("pre");for(let a=0;a<s.length;a++)Object.keys(n).forEach(o=>{let l=n[o];if(l){let c=this.toLispCase(o);s.item(a).setAttribute(c,l.toString())}})}toLispCase(i){let n=i.match(/([A-Z])/g);if(!n)return i;let s=i.toString();for(let a=0,o=n.length;a<o;a++)s=s.replace(new RegExp(n[a]),"-"+n[a].toLowerCase());return s.slice(0,1)==="-"&&(s=s.slice(1)),s}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(X7),R(Zn))},t.\u0275cmp=Pt({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[yr,Kt],ngContentSelectors:YOt,decls:1,vars:0,template:function(r,i){r&1&&(Mi(),pe(0))},encapsulation:2}),t})();function uPt(t){return[X7,t?.loader??[],t?.clipboardOptions??[],t?.markedOptions??[],{provide:Z7,useValue:t?.markedExtensions??[]},{provide:$7,useValue:t?.sanitize??Nn.HTML}]}var hPt=(()=>{let t=class Bk{static forRoot(i){return{ngModule:Bk,providers:[uPt(i)]}}static forChild(){return{ngModule:Bk}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti]}),t})(),uL;(function(t){let e;(function(n){n.Strict="strict",n.Loose="loose",n.Antiscript="antiscript",n.Sandbox="sandbox"})(e=t.SecurityLevel||(t.SecurityLevel={}));let r;(function(n){n.Base="base",n.Forest="forest",n.Dark="dark",n.Default="default",n.Neutral="neutral"})(r=t.Theme||(t.Theme={}));let i;(function(n){n[n.Debug=1]="Debug",n[n.Info=2]="Info",n[n.Warn=3]="Warn",n[n.Error=4]="Error",n[n.Fatal=5]="Fatal"})(i=t.LogLevel||(t.LogLevel={}))})(uL||(uL={}));function dPt(t,e){if(t&1&&(N(0,"div",16),Ot(1,"youtube-player",17),F()),t&2){let r=Rt(3);$(),Y5("videoId",r.videoID)}}function pPt(t,e){if(t&1&&(N(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),ut(3),F()(),N(4,"div",13),Ot(5,"markdown",14),Wt(6,dPt,2,1,"div",15),F()()),t&2){let r=Rt(),i=r.$implicit,n=r.index;mt("expanded",n===0),$(3),Oi(i.title),$(2),ee("first",n===0),mt("data",i.content),$(),mt("ngIf",n===0)}}function mPt(t,e){if(t&1&&(N(0,"div",9),Wt(1,pPt,7,6,"mat-expansion-panel",10),F()),t&2){let r=e.$implicit;$(),mt("ngIf",r)}}var fPt=(()=>{let t=class{constructor(i,n){this.dialogRef=i,this.data=n,this.documentationContents=n.content||[],this.infoTitle=n.title||"",this.videoID=n.videoID}ngOnInit(){let i=document.createElement("script");i.src="https://www.youtube.com/iframe_api",document.body.appendChild(i)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}};return t.\u0275fac=function(r){return new(r||t)(R(fp),R(y0))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(r,i){r&1&&(N(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),ut(5),F(),N(6,"div",5)(7,"mat-icon",6),yt("click",function(){return i.close()}),ut(8,"clear"),F()()(),N(9,"mat-dialog-content",7),Wt(10,mPt,2,1,"div",8),F()()()()),r&2&&($(5),Oi(i.infoTitle),$(5),mt("ngForOf",i.documentationContents))},dependencies:[bS,ep,ig,gp,gr,D7,lOt,pOt,cPt],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0}),t})(),gPt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,rg,Hi,AT,fOt,hPt.forRoot({})]}),t})(),q7=(()=>{let t=class{constructor(i){this.http=i,this.panelContent=new cc({content:[],infoTitle:"",videoID:""})}updateData(i,n,s){this.http.get(i,{responseType:"text"}).subscribe(a=>{let o={content:this.parseMarkdown(a),infoTitle:s,videoID:n};this.panelContent.next(o)})}parseMarkdown(i){let n=[],s=i.split("# ");for(let a of s)if(a.length){let o=a.includes(`

`)?`

`:`\r
\r
`,l=a.split(o);n.push({title:l[0],content:l.splice(1).join(o)})}return n}};return t.\u0275fac=function(r){return new(r||t)(U(js))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),vPt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[AS(Rz())],imports:[ti,gPt,Hi]}),t})(),_Pt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"],standalone:!0}),t})(),bPt=(()=>{let t=class{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new It,this.closeClicked=new It}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(r,i){r&2&&Ai(i.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"click","text"]],template:function(r,i){r&1&&(N(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),ut(5),F(),N(6,"mat-icon",5),yt("click",function(){return i.close()}),ut(7,"clear"),F()(),Ot(8,"img",6),N(9,"mat-dialog-content",7)(10,"div",8),ut(11),F(),N(12,"a",9),yt("click",function(){return i.onDialogButtonClick()}),F()()()()()),r&2&&($(5),Oi(i.infoTitle),$(3),mt("src",i.imageUrl,KA),$(3),Oi(i.message),$(),mt("text",i.callToAction))},dependencies:[gr,ig,gp,_Pt],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0}),t})(),yPt=(()=>{let t=class{constructor(i){this.el=i}onInputChange(i){let n=this.el.nativeElement.value;this.el.nativeElement.value=n.replace(/[^0-9]*/g,""),n!==this.el.nativeElement.value&&i.stopPropagation()}};return t.\u0275fac=function(r){return new(r||t)(R(te))},t.\u0275dir=qt({type:t,selectors:[["input","ccfNumbersOnly",""]],hostBindings:function(r,i){r&1&&yt("input",function(n){return i.onInputChange(n)})}}),t})(),wPt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})(),RT=(()=>{let t=class{get obj(){let i=this.findGlobalObject();return Object.defineProperties(this,{obj:{configurable:!1,writable:!1,value:i}}),i}has(i){let{obj:n}=this;return n!=null&&i in n}get(i,n){let{obj:s}=this;return(s&&s[i])??n}set(i,n){let{obj:s}=this;s&&(s[i]=n)}remove(i){let{obj:n}=this;n&&delete n[i]}findGlobalObject(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self;try{return new Function("return this;")()}catch{}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function xPt(t){let e=typeof t=="string"?t.trim():t;return[void 0,null,NaN,"",1/0].includes(e)}function ty(t){return t===!0}function xn(t){return t===null||typeof t>"u"}function os(t){return!xn(t)}function Dk(t){return!!t}function CPt(t){return!Dk(t)}function K7(t){return xn(t)?t:JSON.parse(JSON.stringify(t))}var x0=t=>{let e=typeof t=="object"&&t!==null,r=t instanceof Date;if(!e||r)return t;Object.freeze(t);let i=typeof t=="function",n=Object.prototype.hasOwnProperty;for(let s of Object.getOwnPropertyNames(t))n.call(t,s)&&(!i||s!=="caller"&&s!=="callee"&&s!=="arguments")&&t[s]!==null&&(typeof t[s]=="object"||typeof t[s]=="function")&&!Object.isFrozen(t[s])&&x0(t[s]);return t};function kPt(t){return Object.prototype.toString.call(t)==="[object Object]"}function Y7(t){return os(t)&&typeof t=="object"&&kPt(t)}function APt(t,e){let r=t,i=!1;if(Y7(r))for(;r!==null;)if(ty(r?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(r,e)?.get;break}else r=Object.getPrototypeOf(r);return i}function SPt(t,e,r){return e?.[t]>r?.[t]?1:e?.[t]<r?.[t]?-1:0}function EPt(t,e,r){return e?.[t]>r?.[t]?-1:e?.[t]<r?.[t]?1:0}var TPt="NGXS_COMPUTED_OPTION",J7="NGXS_DATA_META",Lk="NGXS_META",Q7="NGXS_ARGUMENT_REGISTRY_META";function IPt(t,e){if(t.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(e===void 0)throw new Error("@DataAction() can only decorate a method implementation")}function OPt(t,e){if(!APt(t,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.
Example: 
@Computed() get ${e.toString()}() { 
	 .. 
}`)}var tG=(()=>{let t=class{constructor(i){this.subscription=null,this.sequence$=new cc(0),i&&(this.subscription=i.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}};return t.\u0275fac=function(r){return new(r||t)(U(ll,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})();function PPt(t){return class{constructor(e){if(e)for(let r of Object.keys(e))this[r]=e[r]}static get type(){return t}}}function yf(t){return t[J7]}var ma=(()=>{let t=class eu{constructor(i,n,s){eu.store=i.get(ll),eu.ngZone=i.get(Zt),eu.factory=n,eu.context=s,eu.computed=i.get(tG),eu.injector=i}};return t.store=null,t.computed=null,t.context=null,t.factory=null,t.ngZone=null,t.injector=null,t.\u0275fac=function(r){return new(r||t)(U(Re),U(SH),U(EH))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),iu=class Nl{constructor(){Nl.statesCachedMeta.clear()}static createStateContext(e){return ma.context.createStateContext(e)}static ensureMappedState(e){if(xn(ma.factory)||xn(e))throw new Error(`Metadata not created 
 Maybe you forgot to import the NgxsDataPluginModule
 Also, you cannot use this.ctx.* until the application is fully rendered 
 (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!`);return(os(e.name)?Nl.statesCachedMeta.get(e.name):null)||null||Nl.ensureMeta(e)}static getRepositoryByInstance(e){let r=Nl.getStateClassByInstance(e),i=yf(r)??null;if(xn(i))throw new Error(`You forgot add decorator @StateRepository or initialize state!
Example: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])`);return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){let r=Nl.getRepositoryByInstance(e);r.stateMeta.actions={},r.operations={}}static createPayload(e,r){let i={},n=Array.from(e);for(let[s,a]of n.entries()){let o=r?.getPayloadTypeByIndex(s);os(o)&&(i[o]=a)}return Object.keys(i).length>0?i:null}static createAction(e,r,i){let n=Nl.createPayload(r,i),s=PPt(e.type);return new s(n)}static ensureMeta(e){let r=os(e.name)?ma.factory.states?.find(i=>i.name===e.name):null;return os(r)&&os(e.name)&&Nl.statesCachedMeta.set(e.name,r),r}};iu.statesCachedMeta=new Map,iu.\u0275fac=function(t){return new(t||iu)},iu.\u0275prov=vt({token:iu,factory:iu.\u0275fac});var wu=iu,MPt=class{constructor(){this.subject=new Vo(1)}init(){this.subject.next()}onInit(t){this.subject.pipe(HY()).subscribe(t)}reset(){this.subject.complete(),this.subject=new Vo(1)}},YHt=new MPt;function RPt(t){let{statePath:e,argumentsNames:r,methodName:i,argumentRegistry:n}=t,s="";for(let a=0;a<r.length;a++)os(n?.getArgumentNameByIndex(a))?s+=n?.getArgumentNameByIndex(a):os(n?.getPayloadTypeByIndex(a))?s+=n?.getPayloadTypeByIndex(a):s+=`$arg${a}`,a!==r.length-1&&(s+=", ");return`@${e.replaceAll(".","/")}.${i}(${s})`}var BPt=class extends Error{constructor(t){super(`Child states can only be added to an object. Cannot convert ${os(t?.constructor)?t.constructor.name:t} to PlainObject`)}};function eG(t){return t.NGXS_OPTIONS_META??{name:""}}function iG(t){let e=eG(t),r=e.children??[],i=e.defaults===void 0?{}:e.defaults,n=K7(i);if(r.length>0){if(Y7(n))return DPt(n,r);throw new BPt(n)}else return n}function DPt(t,e){return e.reduce((r,i)=>{let n=eG(i);if(xPt(n.name))throw new Error("State name not provided in class");let s=n.name.toString();return r[s]=iG(i),r},t??{})}function LPt(t,e){return Of([t,e]).pipe(kt(r=>r.pop()))}function rG(){return`__${TPt}__`}function hL(t){return t[rG()]??null}function NPt(t){let e=hL(t);return xn(e)&&Object.defineProperties(t,{[rG()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),hL(t)}function dL(){return ma?.computed?.sequenceValue??0}function FPt(t){let e=!1;return jo(t)&&(e=!0),e}function Nk(t){return t[Q7]}var zPt=class extends Error{constructor(t,e){super(`An argument with the name '${t}' already exists in the method '${e}'`)}},VPt=class{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(t){return this.payloadMap.get(t)??null}getArgumentNameByIndex(t){return this.argumentMap.get(t)??null}createPayloadType(t,e,r){this.checkDuplicateName(t,e),this.payloadMap.set(r,t),this.payloadMap.set(t,t)}createArgumentName(t,e,r){this.checkDuplicateName(t,e),this.argumentMap.set(r,t),this.argumentMap.set(t,t)}checkDuplicateName(t,e){if(Dk(this.argumentMap.has(t))||Dk(this.payloadMap.has(t)))throw new zPt(t,e)}};function jPt(t,e){let r=t[e],i=Nk(r);return xn(i)&&Object.defineProperties(r,{[Q7]:{enumerable:!0,configurable:!0,value:new VPt}}),Nk(r)}function UPt(t){Object.defineProperty(t,J7,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:t}})}function HPt(t){let e=yf(t)??null;return(xn(e)||e?.stateClass!==t)&&UPt(t),yf(t)}function GPt(t,e){let r=HPt(t);r.stateMeta=e}function BT(t){return No()?x0(t):t}function WPt(t){return{enumerable:!0,configurable:!0,get(){let e=yf(t),r=wu.ensureMappedState(e.stateMeta);return wu.createStateContext(r)}}}function ZPt(t){let e=yf(t)?.stateMeta?.name??null;if(os(e)){let r=`__${e}__selector`;Object.defineProperties(t.prototype,{[r]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(os(this[r]))return this[r];if(xn(ma.store))throw new Error(`Metadata not created 
 Maybe you forgot to import the NgxsDataPluginModule
 Also, you cannot use this.ctx.* until the application is fully rendered 
 (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!`);return this[r]=ma.store.select(t).pipe(kt(i=>No()?x0(i):i),hs({refCount:!0,bufferSize:1})),this[r]}}})}}function DT(t){if(!t)throw new Error(`You forgot add decorator @StateRepository or initialize state!
Example: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])`);return Q(x({},t),{getState(){return No()?x0(t.getState()):t.getState()},setState(e){t.setState(e)},patchState(e){t.patchState(e)}})}function $Pt(t){return t?.[Lk]}function XPt(t){if(CPt(t.hasOwnProperty(Lk))){let e={name:null,actions:{},defaults:{},path:null,makeRootSelector(r){return r.getStateGetter(e.name)},children:[]};Object.defineProperty(t,Lk,{value:e})}return $Pt(t)}function qPt(t){return String(t).replaceAll(/\/\/.*$/gm,"").replaceAll(/\s+/g,"").replaceAll(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replaceAll(/=[^,]+/g,"").split(",").filter(Boolean)??[]}var KPt={dataActionSubscribeRequired:!0},YPt=new ht("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>KPt}),JPt=(()=>{let t=class nG{constructor(i,n){this.accessor=i,this.injector=n}static forRoot(i=[]){return{ngModule:nG,providers:[wu,ma,tG,...i]}}};return t.\u0275fac=function(r){return new(r||t)(U(wu,2),U(ma,2))},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})();function ri(){return(t,e,r)=>{OPt(t,e);let i=r.get;return r.get=function(...n){let s=NPt(this),a=s?.get(i);if(ty(a?.isObservable))return a?.value;if(xn(a)||a.sequenceId!==dL()){s.delete(i);let o=i.apply(this,n);return s.set(i,{value:o,sequenceId:dL(),isObservable:FPt(o)}),o}return a?.value},r}}var QPt={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function ue(t={}){let e=t2t(t);return(r,i,n)=>{IPt(r,n);let s=n.value,a=i.toString();return n.value=function(...o){let l=this,c=null,h=wu.getRepositoryByInstance(l),p=h.operations,m=p[a],f=h.stateMeta,g=Nk(s);if(xn(m)){let C=qPt(s),b=RPt({statePath:f.path,methodName:a,argumentsNames:C,argumentRegistry:g});m=p[a]={type:b,options:{cancelUncompleted:e.cancelUncompleted??!1}},os(m)&&(f.actions[m.type]=[{type:m.type,options:m.options,fn:m.type}])}let _=wu.ensureMappedState(f).instance;_[m.type]=()=>(ty(e.insideZone)?ma.ngZone?.run(()=>{c=s.apply(l,o)}):c=s.apply(l,o),jo(c)&&ty(e.subscribeRequired)?Ge(null).pipe(kt(()=>c)):c);let w=wu.createAction(m,o,g),S=ma.store.dispatch(w);return jo(c)?LPt(S,c):c},n}}function t2t(t){let e=ma?.injector?.get(YPt,void 0,qe.Optional),r=x({},QPt);return os(e)&&e?.dataActionSubscribeRequired!==void 0&&(r.subscribeRequired=e.dataActionSubscribeRequired),x(x({},r),t)}function Mr(t){return(e,r,i)=>{let n=t.trim();if(!n)throw new Error("Payload name should be initialized");jPt(e,r).createPayloadType(n,r,i)}}function pl(){return t=>{let e=XPt(t);if(xn(e.name))throw new Error("@StateRepository should be add before decorator @State");GPt(t,e);let r=iG(t);e2t(t,e,r),ZPt(t)}}function e2t(t,e,r){Object.defineProperties(t.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get(){return K7(r)}},context:WPt(t)})}var sG=function(t){return t.ID="id",t}(sG||{}),Fk=function(t){return t.ASC="asc",t.DESC="desc",t}(Fk||{}),LT=(()=>{let t=class{constructor(){this._dirty=!0,this.browserStorageEvents$=new Bt,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(i){this._dirty=i}ngxsOnChanges(i){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),i2t=(()=>{let t=class extends LT{get snapshot(){return BT(this.getState())}get ctx(){return DT(this.context)}patchState(i){this.ctx.patchState(i)}setState(i){this.ctx.setState(i)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(i){return this.ctx.dispatch(i)}};t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275prov=vt({token:t,factory:t.\u0275fac});let e=t;return ft([ri()],e.prototype,"snapshot",null),ft([ue(),Pr(0,Mr("patchValue"))],e.prototype,"patchState",null),ft([ue(),Pr(0,Mr("stateValue"))],e.prototype,"setState",null),ft([ue()],e.prototype,"reset",null),e})(),r2t=(()=>{let t=class extends LT{constructor(){super(...arguments),this.primaryKey=sG.ID,this.comparator=null}get snapshot(){return BT(this.getState())}get ids(){return this.snapshot.ids}get entities(){return this.snapshot.entities}get entitiesArray(){let i=this.snapshot;return i.ids.map(n=>i.entities[n])}get ids$(){return this.state$.pipe(kt(i=>i.ids))}get entities$(){return this.state$.pipe(kt(i=>i.entities))}get entitiesArray$(){return this.state$.pipe(kt(i=>i.ids.map(n=>i.entities[n])))}get ctx(){return DT(this.context)}reset(){this.setEntitiesState(this.initialState),this.markAsDirtyAfterReset()}addOne(i){this.addEntityOne(i)}addMany(i){this.addEntitiesMany(i)}setOne(i){this.setEntityOne(i)}setMany(i){this.setEntitiesMany(i)}setAll(i){this.setEntitiesAll(i)}updateOne(i){this.updateEntitiesMany([i])}updateMany(i){this.updateEntitiesMany(i)}upsertOne(i){this.upsertEntitiesMany([i])}upsertMany(i){this.upsertEntitiesMany(i)}removeOne(i){this.removeEntitiesMany([i])}removeMany(i){this.removeEntitiesMany(i)}removeByEntity(i){let n=this.selectId(i);this.removeEntitiesMany([n])}removeByEntities(i){let n=[];for(let s of i){let a=this.selectId(s);n.push(a)}this.removeEntitiesMany(n)}removeAll(){this.setAll([])}sort(i){if(this.comparator=i??this.comparator,xn(this.comparator)){console.warn("You must set the compare function before sorting.");return}this.setEntitiesState(this.getState())}patchState(i){this.ctx.patchState(i)}setComparator(i){return this.comparator=i,this}dispatch(i){return this.ctx.dispatch(i)}getState(){return this.ctx.getState()}selectId(i){return i?.[this.primaryKey]}selectOne(i){return this.snapshot.entities[i]??null}selectAll(){let i=this.getState();return i.ids.map(n=>i.entities[n])}addEntityOne(i){let n=this.getState(),s=this.selectIdValue(i);s in n.entities||this.setEntitiesState(Q(x({},n),{ids:[...n.ids,s],entities:Q(x({},n.entities),{[s]:i})}))}addEntitiesMany(i){let n=this.getState(),s={},a=[];for(let o of i){let l=this.selectIdValue(o);l in n.entities||l in s||(a.push(l),s[l]=o)}a.length>0&&this.setEntitiesState(Q(x({},n),{ids:[...n.ids,...a],entities:x(x({},n.entities),s)}))}setEntitiesAll(i){let n=this.getState(),s={},a=[];for(let o of i){let l=this.selectIdValue(o);l in s||(a.push(l),s[l]=o)}this.setEntitiesState(Q(x({},n),{ids:a,entities:s}))}setEntityOne(i){let n=this.getState(),s=this.selectIdValue(i);s in n.entities?this.setEntitiesState(Q(x({},n),{entities:Q(x({},n.entities),{[s]:i})})):this.setEntitiesState(Q(x({},n),{ids:[...n.ids,s],entities:Q(x({},n.entities),{[s]:i})}))}setEntitiesMany(i){for(let n of i)this.setEntityOne(n)}updateEntitiesMany(i){let n=this.getState(),s=i.filter(l=>l.id in n.entities);if(s.length===0)return;let a=this.generateKeyMap(n),o=x({},n.entities);for(let l of s){let c=this.updateOrigin(o,l),h=this.selectIdValue(c);h!==l.id&&(delete a[l.id],delete o[l.id]),a[l.id]=h,o[h]=c}this.setEntitiesState(Q(x({},n),{ids:n.ids.map(l=>a[l]??l),entities:o}))}upsertEntitiesMany(i){let n=this.getState(),s=[],a=[];for(let o of i){let l=this.selectIdValue(o);l in n.entities?s.push({id:l,changes:o}):a.push(o)}this.updateMany(s),this.addMany(a)}removeEntitiesMany(i){let n=this.getState(),s=this.generateKeyMap(n),a=x({},n.entities);for(let o of i)o in a&&(delete s[o],delete a[o]);this.setEntitiesState(Q(x({},n),{ids:n.ids.filter(o=>o in s),entities:a}))}setEntitiesState(i){let n=this.sortKeysByComparator(i.ids,i.entities);this.ctx.patchState(Q(x({},i),{ids:n,entities:i.entities}))}sortKeysByComparator(i,n){if(xn(this.comparator))return i;let s=i.slice(),a=this.comparator;return typeof a=="function"?s.sort((o,l)=>a(n[o],n[l])):this.sortByComparatorOptions(s,a,n)}sortByComparatorOptions(i,n,s){switch(n?.sortByOrder){case Fk.ASC:return i.sort((a,o)=>SPt(n?.sortBy,s[a],s[o]));case Fk.DESC:return i.sort((a,o)=>EPt(n?.sortBy,s[a],s[o]));default:return No()&&console.warn(`Invalid --> { sortByOrder: "${n?.sortByOrder}" } not supported!`),i}}generateKeyMap(i){return i.ids.reduce((n,s)=>(n[s]=s,n),{})}updateOrigin(i,n){let s=i[n.id];return x(x({},s),n.changes)}selectIdValue(i){let n=this.selectId(i);return xn(n)&&No()&&console.warn(`The entity passed to the 'selectId' implementation returned ${n}.`,"You should probably provide your own 'selectId' implementation.","The entity that was passed:",i,"The current `selectId` implementation: (entity: V): K => entity.id"),n}};t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275prov=vt({token:t,factory:t.\u0275fac});let e=t;return ft([ri()],e.prototype,"snapshot",null),ft([ri()],e.prototype,"ids",null),ft([ri()],e.prototype,"entities",null),ft([ri()],e.prototype,"entitiesArray",null),ft([ri()],e.prototype,"ids$",null),ft([ri()],e.prototype,"entities$",null),ft([ri()],e.prototype,"entitiesArray$",null),ft([ue()],e.prototype,"reset",null),ft([ue(),Pr(0,Mr("entity"))],e.prototype,"addOne",null),ft([ue(),Pr(0,Mr("entities"))],e.prototype,"addMany",null),ft([ue(),Pr(0,Mr("entity"))],e.prototype,"setOne",null),ft([ue(),Pr(0,Mr("entities"))],e.prototype,"setMany",null),ft([ue(),Pr(0,Mr("entities"))],e.prototype,"setAll",null),ft([ue(),Pr(0,Mr("update"))],e.prototype,"updateOne",null),ft([ue(),Pr(0,Mr("updates"))],e.prototype,"updateMany",null),ft([ue(),Pr(0,Mr("entity"))],e.prototype,"upsertOne",null),ft([ue(),Pr(0,Mr("entities"))],e.prototype,"upsertMany",null),ft([ue(),Pr(0,Mr("id"))],e.prototype,"removeOne",null),ft([ue(),Pr(0,Mr("ids"))],e.prototype,"removeMany",null),ft([ue(),Pr(0,Mr("entity"))],e.prototype,"removeByEntity",null),ft([ue(),Pr(0,Mr("entities"))],e.prototype,"removeByEntities",null),ft([ue()],e.prototype,"removeAll",null),ft([ue(),Pr(0,Mr("comparator"))],e.prototype,"sort",null),ft([ue(),Pr(0,Mr("patchValue"))],e.prototype,"patchState",null),e})(),rh=(()=>{let t=class extends LT{get snapshot(){return BT(this.getState())}get ctx(){return DT(this.context)}patchState(i){this.ctx.patchState(i)}setState(i){this.ctx.setState(i)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(i){return this.ctx.dispatch(i)}};t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275prov=vt({token:t,factory:t.\u0275fac});let e=t;return ft([ri()],e.prototype,"snapshot",null),ft([ue(),Pr(0,Mr("patchValue"))],e.prototype,"patchState",null),ft([ue(),Pr(0,Mr("stateValue"))],e.prototype,"setState",null),ft([ue()],e.prototype,"reset",null),e})();function NT(){return Ye(t=>t!=null)}var n2t={};function V1(...t){let e=t[t.length-1],r=t,i=n2t;return typeof e=="object"&&(i=e,r=r.slice(0,-1)),n=>n.pipe(eC(...r),ii(i.compare),hs(1))}var Rl,Dr=(Rl=class extends rh{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(NT(),hs(1))}setConfig(t){this.setState(t)}patchConfig(t){this.patchState(t)}getProperty(t){return this.config$.pipe(eC(...t),ii(),hs(1))}getOption(...t){let e=this.getPathKey(t);if(this.optionCache.has(e))return this.optionCache.get(e)??Ge();let r=this.config$.pipe(eC(...t),ii(),hs(1));return this.optionCache.set(e,r),r}getPathKey(t){return`${t.length}:${t.join(".")}`}},Rl.\u0275fac=(()=>{let t;return function(e){return(t||(t=Cr(Rl)))(e||Rl)}})(),Rl.\u0275prov=vt({token:Rl,factory:Rl.\u0275fac}),Rl);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],Dr.prototype,"config$",null);Dr=ft([pl(),oo({name:"globalConfig",defaults:null})],Dr);var aG="ALLOW_TELEMETRY",s2t=oG();function oG(){let t=localStorage.getItem(aG);return t===null?void 0:t.toLowerCase()==="true"}var Bl,zk=(Bl=class extends rh{setAllowTelemetry(t){let e=oG();localStorage.setItem(aG,t.toString()),this.ctx.patchState({allowTelemetry:t}),(e!==void 0||t===!1)&&location.reload()}},Bl.\u0275fac=(()=>{let t;return function(e){return(t||(t=Cr(Bl)))(e||Bl)}})(),Bl.\u0275prov=vt({token:Bl,factory:Bl.\u0275fac}),Bl);ft([ue(),j("design:type",Function),j("design:paramtypes",[Boolean]),j("design:returntype",void 0)],zk.prototype,"setAllowTelemetry",null);zk=ft([pl(),oo({name:"tracking",defaults:{allowTelemetry:s2t}})],zk);var C0=new ht("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),FT=new ht("ngx-window",{providedIn:"root",factory:()=>{let{defaultView:t}=K(ge);if(!t)throw new Error("Window is not available");return t}});function a2t(t){return t?t.dataLayer=t.dataLayer||[]:null}var o2t=new ht("ngx-data-layer",{providedIn:"root",factory:()=>a2t(K(FT))});function l2t(t,e){return t?t.gtag=t.gtag||function(){e.push(arguments)}:null}var lG=new ht("ngx-gtag-fn",{providedIn:"root",factory:()=>l2t(K(FT),K(o2t))}),gs=(()=>{class t{constructor(r,i,n){this.settings=r,this._document=i,this._gtag=n}get document(){return this._document}throw(r){(this.settings.enableTracing||No())&&console&&console.error&&console.error(r)}toKeyValue(r){return r.size>0?Array.from(r).reduce((i,[n,s])=>Object.defineProperty(i,n,{value:s,enumerable:!0}),{}):void 0}gtag(...r){try{this._gtag(...r.filter(i=>i!==void 0))}catch(i){this.throw(i)}}event(r,i,n,s,a,o){try{let l=new Map;i&&l.set("event_category",i),n&&l.set("event_label",n),s&&l.set("value",s),a!==void 0&&l.set("interaction",a),o&&Object.entries(o).map(([h,p])=>l.set(h,p));let c=this.toKeyValue(l);c?this.gtag("event",r,c):this.gtag("event",r)}catch(l){this.throw(l)}}pageView(r,i,n,s){try{let a=new Map([["page_path",r]]);i&&a.set("page_title",i),(n||this.document)&&a.set("page_location",n||this.document.location.href),s&&Object.entries(s).map(([o,l])=>a.set(o,l)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(a))}catch(a){this.throw(a)}}appView(r,i,n,s,a){try{let o=new Map([["screen_name",r],["app_name",i]]);n&&o.set("app_id",n),s&&o.set("app_version",s),a&&o.set("app_installer_id",a),this.gtag("event","screen_view",this.toKeyValue(o))}catch(o){this.throw(o)}}set(...r){try{this._gtag("set",...r)}catch(i){this.throw(i)}}exception(r,i){try{let n=new Map;r&&n.set("description",r),i&&n.set("fatal",i),this.toKeyValue(n)?this.gtag("event","exception",this.toKeyValue(n)):this.gtag("event","exception")}catch(n){this.throw(n)}}}return t.\u0275fac=function(e){return new(e||t)(U(C0),U(ge),U(lG))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),c2t={provide:tp,multi:!0,useFactory:u2t,deps:[C0,lG,ge]};function u2t(t,e,r){return()=>Dt(this,null,function*(){if(!t.trackingCode){No()||console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule.");return}if(!e){No()||console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface.");return}r||No()||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),t.uri=t.uri||`https://www.googletagmanager.com/gtag/js?id=${t.trackingCode}`,t.initCommands=t?.initCommands??[],t.initCommands.find(n=>n.command==="config")||t.initCommands.unshift({command:"config",values:[t.trackingCode]}),t.initCommands.find(n=>n.command==="js")||t.initCommands.unshift({command:"js",values:[new Date]});for(let n of t.initCommands)e(n.command,...n.values);let i=r.createElement("script");i.async=!0,i.src=t.uri,t.nonce&&i.setAttribute("nonce",t.nonce),r.getElementsByTagName("head")[0].appendChild(i)})}var i4t=new ht("ngx-google-analytics-routing-settings",{factory:()=>({})}),pL=(()=>{class t{static forRoot(r,i=[],n,s,a){return{ngModule:t,providers:[{provide:C0,useValue:{trackingCode:r,initCommands:i,uri:n,enableTracing:s,nonce:a}},c2t]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})();function h2t(t,e){let r=i=>{let{clientWidth:n,clientHeight:s}=t,{clientX:a,clientY:o}=i;return[a,o,n,s].join("_")};return mr(t,"mousemove").pipe(Gd(1e3),kt(r)).subscribe(i=>e.event("webpage","mousemove",i))}var d2t=(()=>{let t=class{constructor(i,n){i&&h2t(i.body,n)}};return t.\u0275fac=function(r){return new(r||t)(U(ge),U(gs))},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})();function p2t(t,e){if(t&1){let r=Qe();N(0,"div",1)(1,"button",2),yt("click",function(){Lt(r);let i=Rt();return Nt(i.action())}),ut(2),F()()}if(t&2){let r=Rt();$(2),Sn(" ",r.data.action," ")}}var m2t=["label"];function f2t(t,e){}var g2t=Math.pow(2,31)-1,ey=class{constructor(t,e){this._overlayRef=e,this._afterDismissed=new Bt,this._afterOpened=new Bt,this._onAction=new Bt,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,g2t))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},k0=new ht("MatSnackBarData"),iy=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},v2t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0}),t})(),_2t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0}),t})(),b2t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0}),t})(),cG=(()=>{let t=class{constructor(i,n){this.snackBarRef=i,this.data=n}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};return t.\u0275fac=function(r){return new(r||t)(R(ey),R(k0))},t.\u0275cmp=Pt({type:t,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[Kt],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,i){r&1&&(N(0,"div",0),ut(1),F(),Wt(2,p2t,3,1,"div",1)),r&2&&($(),Sn(" ",i.data.message,`
`),$(),ae(i.hasAction?2:-1))},dependencies:[ba,v2t,_2t,b2t],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0}),t})(),y2t={snackBarState:to("state",[us("void, hidden",tr({transform:"scale(0.8)",opacity:0})),us("visible",tr({transform:"scale(1)",opacity:1})),jn("* => visible",Vn("150ms cubic-bezier(0, 0, 0.2, 1)")),jn("* => void, * => hidden",Vn("75ms cubic-bezier(0.4, 0.0, 1, 1)",tr({opacity:0})))])},w2t=0,x2t=(()=>{let t=class extends p0{constructor(i,n,s,a,o){super(),this._ngZone=i,this._elementRef=n,this._changeDetectorRef=s,this._platform=a,this.snackBarConfig=o,this._document=K(ge),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Bt,this._onExit=new Bt,this._onEnter=new Bt,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${w2t++}`,this.attachDomPortal=l=>{this._assertNotAttached();let c=this._portalOutlet.attachDomPortal(l);return this._afterPortalAttached(),c},o.politeness==="assertive"&&!o.announcementMessage?this._live="assertive":o.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(i){this._assertNotAttached();let n=this._portalOutlet.attachComponentPortal(i);return this._afterPortalAttached(),n}attachTemplatePortal(i){this._assertNotAttached();let n=this._portalOutlet.attachTemplatePortal(i);return this._afterPortalAttached(),n}onAnimationEnd(i){let{fromState:n,toState:s}=i;if((s==="void"&&n!=="void"||s==="hidden")&&this._completeExit(),s==="visible"){let a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let i=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(o=>i.classList.add(o)):i.classList.add(n)),this._exposeToModals();let s=this._label.nativeElement,a="mdc-snackbar__label";s.classList.toggle(a,!s.querySelector(`.${a}`))}_exposeToModals(){let i=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let s=0;s<n.length;s++){let a=n[s],o=a.getAttribute("aria-owns");this._trackedModals.add(a),o?o.indexOf(i)===-1&&a.setAttribute("aria-owns",o+" "+i):a.setAttribute("aria-owns",i)}}_clearFromModals(){this._trackedModals.forEach(i=>{let n=i.getAttribute("aria-owns");if(n){let s=n.replace(this._liveElementId,"").trim();s.length>0?i.setAttribute("aria-owns",s):i.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(i&&n){let s=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(s=document.activeElement),i.removeAttribute("aria-hidden"),n.appendChild(i),s?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};return t.\u0275fac=function(r){return new(r||t)(R(Zt),R(te),R(di),R(Ui),R(iy))},t.\u0275cmp=Pt({type:t,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,i){if(r&1&&(gi(Fd,7),gi(m2t,7)),r&2){let n;oe(n=le())&&(i._portalOutlet=n.first),oe(n=le())&&(i._label=n.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:1,hostBindings:function(r,i){r&1&&K5("@state.done",function(n){return i.onAnimationEnd(n)}),r&2&&q5("@state",i._animationState)},standalone:!0,features:[oi,Kt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,i){r&1&&(N(0,"div",1)(1,"div",2,0)(3,"div",3),Wt(4,f2t,0,0,"ng-template",4),F(),Ot(5,"div"),F()()),r&2&&($(5),ke("aria-live",i._live)("role",i._role)("id",i._liveElementId))},dependencies:[Fd],styles:[".mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}.cdk-high-contrast-active .mat-mdc-snackbar-surface{outline:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color, var(--mat-app-inverse-on-surface));border-radius:var(--mdc-snackbar-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mdc-snackbar-container-color, var(--mat-app-inverse-surface))}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font, var(--mat-app-body-medium-font));font-size:var(--mdc-snackbar-supporting-text-size, var(--mat-app-body-medium-size));font-weight:var(--mdc-snackbar-supporting-text-weight, var(--mat-app-body-medium-weight));line-height:var(--mdc-snackbar-supporting-text-line-height, var(--mat-app-body-medium-line-height))}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color, var(--mat-app-inverse-primary));--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2,data:{animation:[y2t.snackBarState]}}),t})();function C2t(){return new iy}var k2t=new ht("mat-snack-bar-default-options",{providedIn:"root",factory:C2t}),zT=(()=>{let t=class{get _openedSnackBarRef(){let i=this._parentSnackBar;return i?i._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(i){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=i:this._snackBarRefAtThisLevel=i}constructor(i,n,s,a,o,l){this._overlay=i,this._live=n,this._injector=s,this._breakpointObserver=a,this._parentSnackBar=o,this._defaultConfig=l,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=cG,this.snackBarContainerComponent=x2t,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(i,n){return this._attach(i,n)}openFromTemplate(i,n){return this._attach(i,n)}open(i,n="",s){let a=x(x({},this._defaultConfig),s);return a.data={message:i,action:n},a.announcementMessage===i&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(i,n){let s=n&&n.viewContainerRef&&n.viewContainerRef.injector,a=Re.create({parent:s||this._injector,providers:[{provide:iy,useValue:n}]}),o=new Nd(this.snackBarContainerComponent,n.viewContainerRef,a),l=i.attach(o);return l.instance.snackBarConfig=n,l.instance}_attach(i,n){let s=x(x(x({},new iy),this._defaultConfig),n),a=this._createOverlay(s),o=this._attachSnackBarContainer(a,s),l=new ey(o,a);if(i instanceof Vs){let c=new Yu(i,null,{$implicit:s.data,snackBarRef:l});l.instance=o.attachTemplatePortal(c)}else{let c=this._createInjector(s,l),h=new Nd(i,void 0,c),p=o.attachComponentPortal(h);l.instance=p.instance}return this._breakpointObserver.observe(x4.HandsetPortrait).pipe(Me(a.detachments())).subscribe(c=>{a.overlayElement.classList.toggle(this.handsetCssClass,c.matches)}),s.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(s.announcementMessage,s.politeness)}),this._animateSnackBar(l,s),this._openedSnackBarRef=l,this._openedSnackBarRef}_animateSnackBar(i,n){i.afterDismissed().subscribe(()=>{this._openedSnackBarRef==i&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{i.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):i.containerInstance.enter(),n.duration&&n.duration>0&&i.afterOpened().subscribe(()=>i._dismissAfter(n.duration))}_createOverlay(i){let n=new mp;n.direction=i.direction;let s=this._overlay.position().global(),a=i.direction==="rtl",o=i.horizontalPosition==="left"||i.horizontalPosition==="start"&&!a||i.horizontalPosition==="end"&&a,l=!o&&i.horizontalPosition!=="center";return o?s.left("0"):l?s.right("0"):s.centerHorizontally(),i.verticalPosition==="top"?s.top("0"):s.bottom("0"),n.positionStrategy=s,this._overlay.create(n)}_createInjector(i,n){let s=i&&i.viewContainerRef&&i.viewContainerRef.injector;return Re.create({parent:s||this._injector,providers:[{provide:ey,useValue:n},{provide:k0,useValue:i.data}]})}};return t.\u0275fac=function(r){return new(r||t)(U(Ar),U(P4),U(Re),U(lT),U(t,12),U(k2t))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),A2t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[zT],imports:[Ju,zd,v0,ai,cG,ai]}),t})(),ag=(()=>{let t=class{constructor(){this.consent="not-set",this.consentChange=new Vo(1),this.consentChange.next(this.consent)}ngOnDestroy(){this.consentChange.complete()}setConsent(i){this.consent!==i&&(this.consent=i,this.consentChange.next(i))}unsetConsent(){this.setConsent("not-set")}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),S2t=(()=>{let t=class{constructor(i,n,{trackingCode:s}){this.window=n,this.subscriptions=new vi,this.token=s,this.subscriptions.add(i.consentChange.subscribe(a=>this.toggleGoogleAnalytics(a==="rescinded")))}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleGoogleAnalytics(i){this.window&&(this.window[`ga-disable-${this.token}`]=i)}};return t.\u0275fac=function(r){return new(r||t)(U(ag),U(FT),U(C0))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),E2t=new ht("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"}),T2t=(()=>{let t=class{constructor(i,n){this.key=n,this.subscriptions=new vi;try{this.storage=localStorage}catch{}i.setConsent(this.loadConsent()),this.subscriptions.add(i.consentChange.subscribe(s=>this.saveConsent(s)))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadConsent(){let i=this.storage?.getItem?.(this.key);if(i==null)return"not-set";let n=i.trim().toLowerCase();switch(n){case"given":case"rescinded":return n;default:return"not-set"}}saveConsent(i){this.storage?.setItem?.(this.key,i)}};return t.\u0275fac=function(r){return new(r||t)(U(ag),U(E2t))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),mL=[ag,S2t,T2t];function I2t(t){return Object.entries(t).reduce((e,[r,i])=>(i!=null&&(e[r]=`${i}`),e),{})}function O2t(t){let{appName:e,projectName:r,developmentMode:i}=t;return[{command:"set",values:[I2t({appName:e,projectName:r,developmentMode:i})]}]}var P2t=(()=>{let t=class uG{static forRoot(i){let{providers:n=[]}=pL.forRoot(i.gaToken,O2t(i));return{ngModule:uG,providers:n}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[...mL,{provide:tp,multi:!0,useFactory:()=>()=>{},deps:mL}],imports:[pL]}),t})();function M2t(t,e){if(t&1){let r=Qe();N(0,"button",2),yt("click",function(){Lt(r);let i=Rt();return Nt(i.submit(!0))}),ut(1),F()}if(t&2){let r=Rt();$(),Sn(" ",r.allowTelemetry==="not-set"?"I understand":"Opt in",`
`)}}function R2t(t,e){if(t&1){let r=Qe();N(0,"button",3),yt("click",function(){Lt(r);let i=Rt();return Nt(i.submit(!1))}),ut(1,"Opt out"),F()}}var B2t=(()=>{let t=class{get allowTelemetry(){return this.consentService.consent}constructor(i,n,s){this.consentService=n,this.data=s,this.clsName="ccf-tracking-popup",this.container=i.nativeElement}dismiss(){this.data.preClose()}submit(i){this.consentService.setConsent(i?"given":"rescinded"),this.dismiss()}showButton(i){let{allowTelemetry:n}=this;return n==="not-set"?!0:i==="opt-in"?n==="rescinded":n==="given"}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(ag),R(k0))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-tracking-popup"]],hostVars:2,hostBindings:function(r,i){r&2&&Ai(i.clsName)},decls:4,vars:2,consts:[["mat-button","",3,"click",4,"ngIf"],["mat-button","","hraSecondaryButton","",3,"click",4,"ngIf"],["mat-button","",3,"click"],["mat-button","","hraSecondaryButton","",3,"click"]],template:function(r,i){r&1&&(N(0,"p"),ut(1,"We log usage to improve this service."),F(),Wt(2,M2t,2,1,"button",0)(3,R2t,2,0,"button",1)),r&2&&($(2),mt("ngIf",i.showButton("opt-in")),$(),mt("ngIf",i.showButton("opt-out")))},dependencies:[ep,ba,x7],styles:["[_nghost-%COMP%]{display:flex;align-items:center;font:var(--sys-label-medium);justify-content:space-between}[_nghost-%COMP%]   p[_ngcontent-%COMP%]{margin:0 1rem 0 0;min-width:10.125rem}"],changeDetection:0}),t})(),D2t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,Vr]}),t})(),L2t=class{encodeKey(t){return encodeURIComponent(t)}encodeValue(t){return encodeURIComponent(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}},N2t=new ht("basePath"),fL=class{apiKeys;username;password;accessToken;basePath;withCredentials;encoder;encodeParam;credentials;constructor(t={}){this.apiKeys=t.apiKeys,this.username=t.username,this.password=t.password,this.accessToken=t.accessToken,this.basePath=t.basePath,this.withCredentials=t.withCredentials,this.encoder=t.encoder,t.encodeParam?this.encodeParam=t.encodeParam:this.encodeParam=e=>this.defaultEncodeParam(e),t.credentials?this.credentials=t.credentials:this.credentials={}}selectHeaderContentType(t){if(t.length===0)return;let e=t.find(r=>this.isJsonMime(r));return e===void 0?t[0]:e}selectHeaderAccept(t){if(t.length===0)return;let e=t.find(r=>this.isJsonMime(r));return e===void 0?t[0]:e}isJsonMime(t){let e=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return t!==null&&(e.test(t)||t.toLowerCase()==="application/json-patch+json")}lookupCredential(t){let e=this.credentials[t];return typeof e=="function"?e():e}defaultEncodeParam(t){let e=t.dataFormat==="date-time"&&t.value instanceof Date?t.value.toISOString():t.value;return encodeURIComponent(String(e))}},F2t=(()=>{class t{httpClient;basePath="https://apps.humanatlas.io/api";defaultHeaders=new nc;configuration=new fL;encoder;constructor(r,i,n){this.httpClient=r,n&&(this.configuration=n),typeof this.configuration.basePath!="string"&&(typeof i!="string"&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new L2t}addToHttpParams(r,i,n){return r=this.addToHttpParamsRecursive(r,i,n),r}addToHttpParamsRecursive(r,i,n){if(i==null)return r;if(typeof i=="object")if(Array.isArray(i))i.forEach(s=>r=this.addToHttpParamsRecursive(r,s,n));else if(i instanceof Date)if(n!=null)r=r.append(n,i.toISOString().substr(0,10));else throw Error("key may not be null if value is Date");else Object.keys(i).forEach(s=>r=this.addToHttpParamsRecursive(r,i[s],n!=null?`${n}.${s}`:s));else if(n!=null)r=r.append(n,i);else throw Error("key may not be null if value is not object or array");return r}aggregateResults(r,i="body",n=!1,s){let a=r.age,o=r.ageRange,l=r.bmi,c=r.bmiRange,h=r.cache,p=r.ontologyTerms,m=r.cellTypeTerms,f=r.consortiums,g=r.providers,_=r.sex,w=r.spatial,S=r.technologies,C=r.token,b=new Ri({encoder:this.encoder});a!=null&&(b=this.addToHttpParams(b,a,"age")),o!=null&&(b=this.addToHttpParams(b,o,"age-range")),l!=null&&(b=this.addToHttpParams(b,l,"bmi")),c!=null&&(b=this.addToHttpParams(b,c,"bmi-range")),h!=null&&(b=this.addToHttpParams(b,h,"cache")),p&&p.forEach(E=>{b=this.addToHttpParams(b,E,"ontology-terms")}),m&&m.forEach(E=>{b=this.addToHttpParams(b,E,"cell-type-terms")}),f&&f.forEach(E=>{b=this.addToHttpParams(b,E,"consortiums")}),g&&g.forEach(E=>{b=this.addToHttpParams(b,E,"providers")}),_!=null&&(b=this.addToHttpParams(b,_,"sex")),w&&w.forEach(E=>{b=this.addToHttpParams(b,E,"spatial")}),S&&S.forEach(E=>{b=this.addToHttpParams(b,E,"technologies")}),C!=null&&(b=this.addToHttpParams(b,C,"token"));let P=this.defaultHeaders,L=s&&s.httpHeaderAccept;if(L===void 0){let E=["application/json"];L=this.configuration.selectHeaderAccept(E)}L!==void 0&&(P=P.set("Accept",L));let H=s&&s.context;H===void 0&&(H=new Ei);let M="json";return L&&(L.startsWith("text")?M="text":this.configuration.isJsonMime(L)?M="json":M="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/aggregate-results`,{context:H,params:b,responseType:M,withCredentials:this.configuration.withCredentials,headers:P,observe:i,reportProgress:n})}anatomicalSystemsTreeModel(r,i="body",n=!1,s){let a=r.cache,o=r.token,l=new Ri({encoder:this.encoder});a!=null&&(l=this.addToHttpParams(l,a,"cache")),o!=null&&(l=this.addToHttpParams(l,o,"token"));let c=this.defaultHeaders,h=s&&s.httpHeaderAccept;if(h===void 0){let f=["application/json"];h=this.configuration.selectHeaderAccept(f)}h!==void 0&&(c=c.set("Accept",h));let p=s&&s.context;p===void 0&&(p=new Ei);let m="json";return h&&(h.startsWith("text")?m="text":this.configuration.isJsonMime(h)?m="json":m="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/anatomical-systems-tree-model`,{context:p,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:n})}biomarkerTermOccurences(r,i="body",n=!1,s){let a=r.age,o=r.ageRange,l=r.bmi,c=r.bmiRange,h=r.cache,p=r.ontologyTerms,m=r.cellTypeTerms,f=r.consortiums,g=r.providers,_=r.sex,w=r.spatial,S=r.technologies,C=r.token,b=new Ri({encoder:this.encoder});a!=null&&(b=this.addToHttpParams(b,a,"age")),o!=null&&(b=this.addToHttpParams(b,o,"age-range")),l!=null&&(b=this.addToHttpParams(b,l,"bmi")),c!=null&&(b=this.addToHttpParams(b,c,"bmi-range")),h!=null&&(b=this.addToHttpParams(b,h,"cache")),p&&p.forEach(E=>{b=this.addToHttpParams(b,E,"ontology-terms")}),m&&m.forEach(E=>{b=this.addToHttpParams(b,E,"cell-type-terms")}),f&&f.forEach(E=>{b=this.addToHttpParams(b,E,"consortiums")}),g&&g.forEach(E=>{b=this.addToHttpParams(b,E,"providers")}),_!=null&&(b=this.addToHttpParams(b,_,"sex")),w&&w.forEach(E=>{b=this.addToHttpParams(b,E,"spatial")}),S&&S.forEach(E=>{b=this.addToHttpParams(b,E,"technologies")}),C!=null&&(b=this.addToHttpParams(b,C,"token"));let P=this.defaultHeaders,L=s&&s.httpHeaderAccept;if(L===void 0){let E=["application/json"];L=this.configuration.selectHeaderAccept(E)}L!==void 0&&(P=P.set("Accept",L));let H=s&&s.context;H===void 0&&(H=new Ei);let M="json";return L&&(L.startsWith("text")?M="text":this.configuration.isJsonMime(L)?M="json":M="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/biomarker-term-occurences`,{context:H,params:b,responseType:M,withCredentials:this.configuration.withCredentials,headers:P,observe:i,reportProgress:n})}biomarkerTreeModel(r,i="body",n=!1,s){let a=r.cache,o=r.token,l=new Ri({encoder:this.encoder});a!=null&&(l=this.addToHttpParams(l,a,"cache")),o!=null&&(l=this.addToHttpParams(l,o,"token"));let c=this.defaultHeaders,h=s&&s.httpHeaderAccept;if(h===void 0){let f=["application/json"];h=this.configuration.selectHeaderAccept(f)}h!==void 0&&(c=c.set("Accept",h));let p=s&&s.context;p===void 0&&(p=new Ei);let m="json";return h&&(h.startsWith("text")?m="text":this.configuration.isJsonMime(h)?m="json":m="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/biomarker-tree-model`,{context:p,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:n})}cellTypeTermOccurences(r,i="body",n=!1,s){let a=r.age,o=r.ageRange,l=r.bmi,c=r.bmiRange,h=r.cache,p=r.ontologyTerms,m=r.cellTypeTerms,f=r.consortiums,g=r.providers,_=r.sex,w=r.spatial,S=r.technologies,C=r.token,b=new Ri({encoder:this.encoder});a!=null&&(b=this.addToHttpParams(b,a,"age")),o!=null&&(b=this.addToHttpParams(b,o,"age-range")),l!=null&&(b=this.addToHttpParams(b,l,"bmi")),c!=null&&(b=this.addToHttpParams(b,c,"bmi-range")),h!=null&&(b=this.addToHttpParams(b,h,"cache")),p&&p.forEach(E=>{b=this.addToHttpParams(b,E,"ontology-terms")}),m&&m.forEach(E=>{b=this.addToHttpParams(b,E,"cell-type-terms")}),f&&f.forEach(E=>{b=this.addToHttpParams(b,E,"consortiums")}),g&&g.forEach(E=>{b=this.addToHttpParams(b,E,"providers")}),_!=null&&(b=this.addToHttpParams(b,_,"sex")),w&&w.forEach(E=>{b=this.addToHttpParams(b,E,"spatial")}),S&&S.forEach(E=>{b=this.addToHttpParams(b,E,"technologies")}),C!=null&&(b=this.addToHttpParams(b,C,"token"));let P=this.defaultHeaders,L=s&&s.httpHeaderAccept;if(L===void 0){let E=["application/json"];L=this.configuration.selectHeaderAccept(E)}L!==void 0&&(P=P.set("Accept",L));let H=s&&s.context;H===void 0&&(H=new Ei);let M="json";return L&&(L.startsWith("text")?M="text":this.configuration.isJsonMime(L)?M="json":M="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/cell-type-term-occurences`,{context:H,params:b,responseType:M,withCredentials:this.configuration.withCredentials,headers:P,observe:i,reportProgress:n})}cellTypeTreeModel(r,i="body",n=!1,s){let a=r.cache,o=r.token,l=new Ri({encoder:this.encoder});a!=null&&(l=this.addToHttpParams(l,a,"cache")),o!=null&&(l=this.addToHttpParams(l,o,"token"));let c=this.defaultHeaders,h=s&&s.httpHeaderAccept;if(h===void 0){let f=["application/json"];h=this.configuration.selectHeaderAccept(f)}h!==void 0&&(c=c.set("Accept",h));let p=s&&s.context;p===void 0&&(p=new Ei);let m="json";return h&&(h.startsWith("text")?m="text":this.configuration.isJsonMime(h)?m="json":m="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/cell-type-tree-model`,{context:p,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:n})}collisions(r,i="body",n=!1,s){let a=r.spatialEntity;if(a==null)throw new Error("Required parameter spatialEntity was null or undefined when calling collisions.");let o=this.defaultHeaders,l=s&&s.httpHeaderAccept;if(l===void 0){let f=["application/json"];l=this.configuration.selectHeaderAccept(f)}l!==void 0&&(o=o.set("Accept",l));let c=s&&s.context;c===void 0&&(c=new Ei);let h=["application/json"],p=this.configuration.selectHeaderContentType(h);p!==void 0&&(o=o.set("Content-Type",p));let m="json";return l&&(l.startsWith("text")?m="text":this.configuration.isJsonMime(l)?m="json":m="blob"),this.httpClient.post(`${this.configuration.basePath}/v1/collisions`,a,{context:c,responseType:m,withCredentials:this.configuration.withCredentials,headers:o,observe:i,reportProgress:n})}corridor(r,i="body",n=!1,s){let a=r.spatialEntity;if(a==null)throw new Error("Required parameter spatialEntity was null or undefined when calling corridor.");let o=this.defaultHeaders,l=s&&s.httpHeaderAccept;if(l===void 0){let m=["model/gltf-binary","application/json"];l=this.configuration.selectHeaderAccept(m)}l!==void 0&&(o=o.set("Accept",l));let c=s&&s.context;c===void 0&&(c=new Ei);let h=["application/json"],p=this.configuration.selectHeaderContentType(h);return p!==void 0&&(o=o.set("Content-Type",p)),this.httpClient.post(`${this.configuration.basePath}/v1/corridor`,a,{context:c,responseType:"blob",withCredentials:this.configuration.withCredentials,headers:o,observe:i,reportProgress:n})}dbStatus(r,i="body",n=!1,s){let a=r.token,o=new Ri({encoder:this.encoder});a!=null&&(o=this.addToHttpParams(o,a,"token"));let l=this.defaultHeaders,c=s&&s.httpHeaderAccept;if(c===void 0){let m=["application/json"];c=this.configuration.selectHeaderAccept(m)}c!==void 0&&(l=l.set("Accept",c));let h=s&&s.context;h===void 0&&(h=new Ei);let p="json";return c&&(c.startsWith("text")?p="text":this.configuration.isJsonMime(c)?p="json":p="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/db-status`,{context:h,params:o,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:n})}dsGraph(r,i="body",n=!1,s){let a=r.age,o=r.ageRange,l=r.bmi,c=r.bmiRange,h=r.cache,p=r.ontologyTerms,m=r.cellTypeTerms,f=r.consortiums,g=r.providers,_=r.sex,w=r.spatial,S=r.technologies,C=r.token,b=new Ri({encoder:this.encoder});a!=null&&(b=this.addToHttpParams(b,a,"age")),o!=null&&(b=this.addToHttpParams(b,o,"age-range")),l!=null&&(b=this.addToHttpParams(b,l,"bmi")),c!=null&&(b=this.addToHttpParams(b,c,"bmi-range")),h!=null&&(b=this.addToHttpParams(b,h,"cache")),p&&p.forEach(E=>{b=this.addToHttpParams(b,E,"ontology-terms")}),m&&m.forEach(E=>{b=this.addToHttpParams(b,E,"cell-type-terms")}),f&&f.forEach(E=>{b=this.addToHttpParams(b,E,"consortiums")}),g&&g.forEach(E=>{b=this.addToHttpParams(b,E,"providers")}),_!=null&&(b=this.addToHttpParams(b,_,"sex")),w&&w.forEach(E=>{b=this.addToHttpParams(b,E,"spatial")}),S&&S.forEach(E=>{b=this.addToHttpParams(b,E,"technologies")}),C!=null&&(b=this.addToHttpParams(b,C,"token"));let P=this.defaultHeaders,L=s&&s.httpHeaderAccept;if(L===void 0){let E=["application/json"];L=this.configuration.selectHeaderAccept(E)}L!==void 0&&(P=P.set("Accept",L));let H=s&&s.context;H===void 0&&(H=new Ei);let M="json";return L&&(L.startsWith("text")?M="text":this.configuration.isJsonMime(L)?M="json":M="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/ds-graph`,{context:H,params:b,responseType:M,withCredentials:this.configuration.withCredentials,headers:P,observe:i,reportProgress:n})}extractionSite(r,i="body",n=!1,s){let a=r.iri;if(a==null)throw new Error("Required parameter iri was null or undefined when calling extractionSite.");let o=new Ri({encoder:this.encoder});a!=null&&(o=this.addToHttpParams(o,a,"iri"));let l=this.defaultHeaders,c=s&&s.httpHeaderAccept;if(c===void 0){let m=["application/json"];c=this.configuration.selectHeaderAccept(m)}c!==void 0&&(l=l.set("Accept",c));let h=s&&s.context;h===void 0&&(h=new Ei);let p="json";return c&&(c.startsWith("text")?p="text":this.configuration.isJsonMime(c)?p="json":p="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/extraction-site`,{context:h,params:o,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:n})}getSpatialPlacement(r,i="body",n=!1,s){let a=r.getSpatialPlacementRequest;if(a==null)throw new Error("Required parameter getSpatialPlacementRequest was null or undefined when calling getSpatialPlacement.");let o=this.defaultHeaders,l=s&&s.httpHeaderAccept;if(l===void 0){let f=["application/json"];l=this.configuration.selectHeaderAccept(f)}l!==void 0&&(o=o.set("Accept",l));let c=s&&s.context;c===void 0&&(c=new Ei);let h=["application/json"],p=this.configuration.selectHeaderContentType(h);p!==void 0&&(o=o.set("Content-Type",p));let m="json";return l&&(l.startsWith("text")?m="text":this.configuration.isJsonMime(l)?m="json":m="blob"),this.httpClient.post(`${this.configuration.basePath}/v1/get-spatial-placement`,a,{context:c,responseType:m,withCredentials:this.configuration.withCredentials,headers:o,observe:i,reportProgress:n})}gtexRuiLocations(r,i="body",n=!1,s){let a=r.cache,o=new Ri({encoder:this.encoder});a!=null&&(o=this.addToHttpParams(o,a,"cache"));let l=this.defaultHeaders,c=s&&s.httpHeaderAccept;if(c===void 0){let m=["application/json"];c=this.configuration.selectHeaderAccept(m)}c!==void 0&&(l=l.set("Accept",c));let h=s&&s.context;h===void 0&&(h=new Ei);let p="json";return c&&(c.startsWith("text")?p="text":this.configuration.isJsonMime(c)?p="json":p="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/gtex/rui_locations.jsonld`,{context:h,params:o,responseType:p,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:n})}hubmapRuiLocations(r,i="body",n=!1,s){let a=r.cache,o=r.token,l=new Ri({encoder:this.encoder});a!=null&&(l=this.addToHttpParams(l,a,"cache")),o!=null&&(l=this.addToHttpParams(l,o,"token"));let c=this.defaultHeaders,h=s&&s.httpHeaderAccept;if(h===void 0){let f=["application/json"];h=this.configuration.selectHeaderAccept(f)}h!==void 0&&(c=c.set("Accept",h));let p=s&&s.context;p===void 0&&(p=new Ei);let m="json";return h&&(h.startsWith("text")?m="text":this.configuration.isJsonMime(h)?m="json":m="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/hubmap/rui_locations.jsonld`,{context:p,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:n})}mesh3dCellPopulation(r,i="body",n=!1,s){let a=r.mesh3dCellPopulationRequest;if(a==null)throw new Error("Required parameter mesh3dCellPopulationRequest was null or undefined when calling mesh3dCellPopulation.");let o=this.defaultHeaders,l=s&&s.httpHeaderAccept;if(l===void 0){let m=["text/csv","application/json"];l=this.configuration.selectHeaderAccept(m)}l!==void 0&&(o=o.set("Accept",l));let c=s&&s.context;c===void 0&&(c=new Ei);let h=["application/json"],p=this.configuration.selectHeaderContentType(h);return p!==void 0&&(o=o.set("Content-Type",p)),this.httpClient.post(`${this.configuration.basePath}/v1/mesh-3d-cell-population`,a,{context:c,responseType:"blob",withCredentials:this.configuration.withCredentials,headers:o,observe:i,reportProgress:n})}ontologyTermOccurences(r,i="body",n=!1,s){let a=r.age,o=r.ageRange,l=r.bmi,c=r.bmiRange,h=r.cache,p=r.ontologyTerms,m=r.cellTypeTerms,f=r.consortiums,g=r.providers,_=r.sex,w=r.spatial,S=r.technologies,C=r.token,b=new Ri({encoder:this.encoder});a!=null&&(b=this.addToHttpParams(b,a,"age")),o!=null&&(b=this.addToHttpParams(b,o,"age-range")),l!=null&&(b=this.addToHttpParams(b,l,"bmi")),c!=null&&(b=this.addToHttpParams(b,c,"bmi-range")),h!=null&&(b=this.addToHttpParams(b,h,"cache")),p&&p.forEach(E=>{b=this.addToHttpParams(b,E,"ontology-terms")}),m&&m.forEach(E=>{b=this.addToHttpParams(b,E,"cell-type-terms")}),f&&f.forEach(E=>{b=this.addToHttpParams(b,E,"consortiums")}),g&&g.forEach(E=>{b=this.addToHttpParams(b,E,"providers")}),_!=null&&(b=this.addToHttpParams(b,_,"sex")),w&&w.forEach(E=>{b=this.addToHttpParams(b,E,"spatial")}),S&&S.forEach(E=>{b=this.addToHttpParams(b,E,"technologies")}),C!=null&&(b=this.addToHttpParams(b,C,"token"));let P=this.defaultHeaders,L=s&&s.httpHeaderAccept;if(L===void 0){let E=["application/json"];L=this.configuration.selectHeaderAccept(E)}L!==void 0&&(P=P.set("Accept",L));let H=s&&s.context;H===void 0&&(H=new Ei);let M="json";return L&&(L.startsWith("text")?M="text":this.configuration.isJsonMime(L)?M="json":M="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/ontology-term-occurences`,{context:H,params:b,responseType:M,withCredentials:this.configuration.withCredentials,headers:P,observe:i,reportProgress:n})}ontologyTreeModel(r,i="body",n=!1,s){let a=r.cache,o=r.token,l=new Ri({encoder:this.encoder});a!=null&&(l=this.addToHttpParams(l,a,"cache")),o!=null&&(l=this.addToHttpParams(l,o,"token"));let c=this.defaultHeaders,h=s&&s.httpHeaderAccept;if(h===void 0){let f=["application/json"];h=this.configuration.selectHeaderAccept(f)}h!==void 0&&(c=c.set("Accept",h));let p=s&&s.context;p===void 0&&(p=new Ei);let m="json";return h&&(h.startsWith("text")?m="text":this.configuration.isJsonMime(h)?m="json":m="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/ontology-tree-model`,{context:p,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:n})}providerNames(r,i="body",n=!1,s){let a=r.cache,o=r.token,l=new Ri({encoder:this.encoder});a!=null&&(l=this.addToHttpParams(l,a,"cache")),o!=null&&(l=this.addToHttpParams(l,o,"token"));let c=this.defaultHeaders,h=s&&s.httpHeaderAccept;if(h===void 0){let f=["application/json"];h=this.configuration.selectHeaderAccept(f)}h!==void 0&&(c=c.set("Accept",h));let p=s&&s.context;p===void 0&&(p=new Ei);let m="json";return h&&(h.startsWith("text")?m="text":this.configuration.isJsonMime(h)?m="json":m="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/provider-names`,{context:p,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:n})}referenceOrganScene(r,i="body",n=!1,s){let a=r.organIri;if(a==null)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");let o=r.age,l=r.ageRange,c=r.bmi,h=r.bmiRange,p=r.cache,m=r.ontologyTerms,f=r.cellTypeTerms,g=r.consortiums,_=r.providers,w=r.sex,S=r.spatial,C=r.technologies,b=r.token,P=new Ri({encoder:this.encoder});o!=null&&(P=this.addToHttpParams(P,o,"age")),l!=null&&(P=this.addToHttpParams(P,l,"age-range")),c!=null&&(P=this.addToHttpParams(P,c,"bmi")),h!=null&&(P=this.addToHttpParams(P,h,"bmi-range")),p!=null&&(P=this.addToHttpParams(P,p,"cache")),m&&m.forEach(it=>{P=this.addToHttpParams(P,it,"ontology-terms")}),f&&f.forEach(it=>{P=this.addToHttpParams(P,it,"cell-type-terms")}),a!=null&&(P=this.addToHttpParams(P,a,"organ-iri")),g&&g.forEach(it=>{P=this.addToHttpParams(P,it,"consortiums")}),_&&_.forEach(it=>{P=this.addToHttpParams(P,it,"providers")}),w!=null&&(P=this.addToHttpParams(P,w,"sex")),S&&S.forEach(it=>{P=this.addToHttpParams(P,it,"spatial")}),C&&C.forEach(it=>{P=this.addToHttpParams(P,it,"technologies")}),b!=null&&(P=this.addToHttpParams(P,b,"token"));let L=this.defaultHeaders,H=s&&s.httpHeaderAccept;if(H===void 0){let it=["application/json"];H=this.configuration.selectHeaderAccept(it)}H!==void 0&&(L=L.set("Accept",H));let M=s&&s.context;M===void 0&&(M=new Ei);let E="json";return H&&(H.startsWith("text")?E="text":this.configuration.isJsonMime(H)?E="json":E="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/reference-organ-scene`,{context:M,params:P,responseType:E,withCredentials:this.configuration.withCredentials,headers:L,observe:i,reportProgress:n})}referenceOrgans(r,i="body",n=!1,s){let a=r.cache,o=r.token,l=new Ri({encoder:this.encoder});a!=null&&(l=this.addToHttpParams(l,a,"cache")),o!=null&&(l=this.addToHttpParams(l,o,"token"));let c=this.defaultHeaders,h=s&&s.httpHeaderAccept;if(h===void 0){let f=["application/json"];h=this.configuration.selectHeaderAccept(f)}h!==void 0&&(c=c.set("Accept",h));let p=s&&s.context;p===void 0&&(p=new Ei);let m="json";return h&&(h.startsWith("text")?m="text":this.configuration.isJsonMime(h)?m="json":m="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/reference-organs`,{context:p,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:n})}ruiReferenceData(r="body",i=!1,n){let s=this.defaultHeaders,a=n&&n.httpHeaderAccept;if(a===void 0){let c=["application/json"];a=this.configuration.selectHeaderAccept(c)}a!==void 0&&(s=s.set("Accept",a));let o=n&&n.context;o===void 0&&(o=new Ei);let l="json";return a&&(a.startsWith("text")?l="text":this.configuration.isJsonMime(a)?l="json":l="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/rui-reference-data`,{context:o,responseType:l,withCredentials:this.configuration.withCredentials,headers:s,observe:r,reportProgress:i})}scene(r,i="body",n=!1,s){let a=r.age,o=r.ageRange,l=r.bmi,c=r.bmiRange,h=r.cache,p=r.ontologyTerms,m=r.cellTypeTerms,f=r.consortiums,g=r.providers,_=r.sex,w=r.spatial,S=r.technologies,C=r.token,b=new Ri({encoder:this.encoder});a!=null&&(b=this.addToHttpParams(b,a,"age")),o!=null&&(b=this.addToHttpParams(b,o,"age-range")),l!=null&&(b=this.addToHttpParams(b,l,"bmi")),c!=null&&(b=this.addToHttpParams(b,c,"bmi-range")),h!=null&&(b=this.addToHttpParams(b,h,"cache")),p&&p.forEach(E=>{b=this.addToHttpParams(b,E,"ontology-terms")}),m&&m.forEach(E=>{b=this.addToHttpParams(b,E,"cell-type-terms")}),f&&f.forEach(E=>{b=this.addToHttpParams(b,E,"consortiums")}),g&&g.forEach(E=>{b=this.addToHttpParams(b,E,"providers")}),_!=null&&(b=this.addToHttpParams(b,_,"sex")),w&&w.forEach(E=>{b=this.addToHttpParams(b,E,"spatial")}),S&&S.forEach(E=>{b=this.addToHttpParams(b,E,"technologies")}),C!=null&&(b=this.addToHttpParams(b,C,"token"));let P=this.defaultHeaders,L=s&&s.httpHeaderAccept;if(L===void 0){let E=["application/json"];L=this.configuration.selectHeaderAccept(E)}L!==void 0&&(P=P.set("Accept",L));let H=s&&s.context;H===void 0&&(H=new Ei);let M="json";return L&&(L.startsWith("text")?M="text":this.configuration.isJsonMime(L)?M="json":M="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/scene`,{context:H,params:b,responseType:M,withCredentials:this.configuration.withCredentials,headers:P,observe:i,reportProgress:n})}sennetRuiLocations(r,i="body",n=!1,s){let a=r.cache,o=r.token,l=new Ri({encoder:this.encoder});a!=null&&(l=this.addToHttpParams(l,a,"cache")),o!=null&&(l=this.addToHttpParams(l,o,"token"));let c=this.defaultHeaders,h=s&&s.httpHeaderAccept;if(h===void 0){let f=["application/json"];h=this.configuration.selectHeaderAccept(f)}h!==void 0&&(c=c.set("Accept",h));let p=s&&s.context;p===void 0&&(p=new Ei);let m="json";return h&&(h.startsWith("text")?m="text":this.configuration.isJsonMime(h)?m="json":m="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/sennet/rui_locations.jsonld`,{context:p,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:n})}sessionToken(r,i="body",n=!1,s){let a=r.sessionTokenRequest;if(a==null)throw new Error("Required parameter sessionTokenRequest was null or undefined when calling sessionToken.");let o=this.defaultHeaders,l=s&&s.httpHeaderAccept;if(l===void 0){let f=["application/json"];l=this.configuration.selectHeaderAccept(f)}l!==void 0&&(o=o.set("Accept",l));let c=s&&s.context;c===void 0&&(c=new Ei);let h=["application/json"],p=this.configuration.selectHeaderContentType(h);p!==void 0&&(o=o.set("Content-Type",p));let m="json";return l&&(l.startsWith("text")?m="text":this.configuration.isJsonMime(l)?m="json":m="blob"),this.httpClient.post(`${this.configuration.basePath}/v1/session-token`,a,{context:c,responseType:m,withCredentials:this.configuration.withCredentials,headers:o,observe:i,reportProgress:n})}sparql(r,i="body",n=!1,s){let a=r.query;if(a==null)throw new Error("Required parameter query was null or undefined when calling sparql.");let o=r.token,l=r.format,c=new Ri({encoder:this.encoder});a!=null&&(c=this.addToHttpParams(c,a,"query")),o!=null&&(c=this.addToHttpParams(c,o,"token")),l!=null&&(c=this.addToHttpParams(c,l,"format"));let h=this.defaultHeaders,p=s&&s.httpHeaderAccept;if(p===void 0){let g=["application/json","text/csv"];p=this.configuration.selectHeaderAccept(g)}p!==void 0&&(h=h.set("Accept",p));let m=s&&s.context;m===void 0&&(m=new Ei);let f="json";return p&&(p.startsWith("text")?f="text":this.configuration.isJsonMime(p)?f="json":f="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/sparql`,{context:m,params:c,responseType:f,withCredentials:this.configuration.withCredentials,headers:h,observe:i,reportProgress:n})}sparqlPost(r,i="body",n=!1,s){let a=r.sparqlQueryRequest;if(a==null)throw new Error("Required parameter sparqlQueryRequest was null or undefined when calling sparqlPost.");let o=r.token,l=r.format,c=new Ri({encoder:this.encoder});o!=null&&(c=this.addToHttpParams(c,o,"token")),l!=null&&(c=this.addToHttpParams(c,l,"format"));let h=this.defaultHeaders,p=s&&s.httpHeaderAccept;if(p===void 0){let w=["application/json","text/csv"];p=this.configuration.selectHeaderAccept(w)}p!==void 0&&(h=h.set("Accept",p));let m=s&&s.context;m===void 0&&(m=new Ei);let f=["application/json","application/x-www-form-urlencoded"],g=this.configuration.selectHeaderContentType(f);g!==void 0&&(h=h.set("Content-Type",g));let _="json";return p&&(p.startsWith("text")?_="text":this.configuration.isJsonMime(p)?_="json":_="blob"),this.httpClient.post(`${this.configuration.basePath}/v1/sparql`,a,{context:m,params:c,responseType:_,withCredentials:this.configuration.withCredentials,headers:h,observe:i,reportProgress:n})}technologyNames(r,i="body",n=!1,s){let a=r.cache,o=r.token,l=new Ri({encoder:this.encoder});a!=null&&(l=this.addToHttpParams(l,a,"cache")),o!=null&&(l=this.addToHttpParams(l,o,"token"));let c=this.defaultHeaders,h=s&&s.httpHeaderAccept;if(h===void 0){let f=["application/json"];h=this.configuration.selectHeaderAccept(f)}h!==void 0&&(c=c.set("Accept",h));let p=s&&s.context;p===void 0&&(p=new Ei);let m="json";return h&&(h.startsWith("text")?m="text":this.configuration.isJsonMime(h)?m="json":m="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/technology-names`,{context:p,params:l,responseType:m,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:n})}tissueBlocks(r,i="body",n=!1,s){let a=r.age,o=r.ageRange,l=r.bmi,c=r.bmiRange,h=r.cache,p=r.ontologyTerms,m=r.cellTypeTerms,f=r.consortiums,g=r.providers,_=r.sex,w=r.spatial,S=r.technologies,C=r.token,b=new Ri({encoder:this.encoder});a!=null&&(b=this.addToHttpParams(b,a,"age")),o!=null&&(b=this.addToHttpParams(b,o,"age-range")),l!=null&&(b=this.addToHttpParams(b,l,"bmi")),c!=null&&(b=this.addToHttpParams(b,c,"bmi-range")),h!=null&&(b=this.addToHttpParams(b,h,"cache")),p&&p.forEach(E=>{b=this.addToHttpParams(b,E,"ontology-terms")}),m&&m.forEach(E=>{b=this.addToHttpParams(b,E,"cell-type-terms")}),f&&f.forEach(E=>{b=this.addToHttpParams(b,E,"consortiums")}),g&&g.forEach(E=>{b=this.addToHttpParams(b,E,"providers")}),_!=null&&(b=this.addToHttpParams(b,_,"sex")),w&&w.forEach(E=>{b=this.addToHttpParams(b,E,"spatial")}),S&&S.forEach(E=>{b=this.addToHttpParams(b,E,"technologies")}),C!=null&&(b=this.addToHttpParams(b,C,"token"));let P=this.defaultHeaders,L=s&&s.httpHeaderAccept;if(L===void 0){let E=["application/json"];L=this.configuration.selectHeaderAccept(E)}L!==void 0&&(P=P.set("Accept",L));let H=s&&s.context;H===void 0&&(H=new Ei);let M="json";return L&&(L.startsWith("text")?M="text":this.configuration.isJsonMime(L)?M="json":M="blob"),this.httpClient.get(`${this.configuration.basePath}/v1/tissue-blocks`,{context:H,params:b,responseType:M,withCredentials:this.configuration.withCredentials,headers:P,observe:i,reportProgress:n})}static \u0275fac=function(r){return new(r||t)(U(js),U(N2t,8),U(fL,8))};static \u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),z2t=class{},V2t=class extends z2t{constructor(){super(...arguments),this.cachePairs=[]}add(t,e,r){this.cachePairs.push(t)}addMany(t){this.cachePairs=t}updateAtIndex(t,e){let r=this.cachePairs[t];Object.assign(r,e)}update(t,e){let r=this.cachePairs[t];Object.assign(r,e)}getAll(){return this.cachePairs}removeAtIndex(t){this.cachePairs.splice(t,1)}remove(t){this.cachePairs.splice(t,1)}removeAll(){this.cachePairs.length=0}},j2t=(t,e)=>JSON.stringify(t)===JSON.stringify(e),U2t=t=>t.map(e=>e!==void 0?JSON.parse(JSON.stringify(e)):e),na={storageStrategy:V2t,globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},H2t=new Bt;function vs(t={}){return function(e,r,i){let n=t.cacheKey||e.constructor.name+"#"+r,s=i.value;if(i&&i.value){let a=t.storageStrategy?new t.storageStrategy:new na.storageStrategy,o=[];t.cacheModifier&&t.cacheModifier.subscribe(h=>a.addMany(h(a.getAll(n,this)),n,this)),lr(H2t.asObservable(),t.cacheBusterObserver?t.cacheBusterObserver:YK()).subscribe(h=>{a.removeAll(n,this),o.length=0});let l=t.cacheResolver||na.cacheResolver;t.cacheResolver=l||j2t;let c=t.cacheHasher||na.cacheHasher;t.cacheHasher=c||U2t,i.value=function(...h){let p=a.getAll(n,this),m=t.cacheHasher(h),f=p.find(_=>t.cacheResolver(_.parameters,m)),g=o.find(_=>t.cacheResolver(_.parameters,m));if((t.maxAge||na.maxAge)&&f&&f.created&&(new Date().getTime()-new Date(f.created).getTime()>(t.maxAge||na.maxAge)?(a.remove?a.remove(p.indexOf(f),f,n,this):a.removeAtIndex(p.indexOf(f),n,this),f=null):(t.slidingExpiration||na.slidingExpiration)&&(f.created=new Date,a.update?a.update(p.indexOf(f),f,n,this):a.updateAtIndex(p.indexOf(f),f,n,this))),f){let _=Ge(f.response);return t.async?_.pipe(Jl(0)):_}else{if(g)return g.response;{let _=s.call(this,...h).pipe(Pf(()=>{let w=o.find(S=>t.cacheResolver(S.parameters,m));o.splice(o.indexOf(w),1)}),Li(w=>{(!t.shouldCacheDecider||t.shouldCacheDecider(w))&&((!(t.maxCacheCount||na.maxCacheCount)||(t.maxCacheCount||na.maxCacheCount)===1||(t.maxCacheCount||na.maxCacheCount)&&(t.maxCacheCount||na.maxCacheCount)<p.length+1)&&(a.remove?a.remove(0,p[0],n,this):a.removeAtIndex(0,n,this)),a.add({parameters:m,response:w,created:t.maxAge||na.maxAge?new Date:null},n,this))}),ZY(1),SN());return o.push({parameters:m,response:_,created:new Date}),_}}}}return i}}var VT=new Bt,vp={cacheBusterObserver:VT},nh={cacheBusterObserver:VT,maxCacheCount:4};function jh(){return t=>t}function gL(t,e,r){return t?{min:t[0]>e?t[0]:void 0,max:t[1]<r?t[1]:void 0}:void 0}function G2t(t){return t.map(e=>Q(x({},e),{transformMatrix:new gt(e.transformMatrix??[])}))}function W2t(t){return{age:gL(t?.ageRange,1,110),bmi:gL(t?.bmiRange,13,83),sex:t?.sex?.toLowerCase(),ontologyTerms:t?.ontologyTerms,cellTypeTerms:t?.cellTypeTerms,biomarkerTerms:t?.biomarkerTerms,consortiums:t?.consortiums,providers:t?.tmc,technologies:t?.technologies,spatial:t?.spatialSearches}}function Z2t(t,e){return t.remoteApiEndpoint!==e.remoteApiEndpoint||t.token!==e.token?!1:t.token!==void 0?!0:t.filter===e.filter&&t.dataSources===e.dataSources}var Kh=class{constructor(){this.api=K(F2t),this.globalConfig=K(Dr),this.config$=this.globalConfig.config$.pipe(kt(jh()),ii(Z2t),X_(10),_i(e=>this.getSessionToken(e)),Li(()=>VT.next(null)),hs(1)),this.config$.subscribe()}getDatabaseStatus(){return this.doRequest(e=>this.api.dbStatus(e))}getProviderNames(){return this.doRequest(e=>this.api.providerNames(e))}getDatasetTechnologyNames(){return this.doRequest(e=>this.api.technologyNames(e))}getOntologyTreeModel(){return this.doRequest(e=>this.api.ontologyTreeModel(e),void 0,{},jh())}getCellTypeTreeModel(){return this.doRequest(e=>this.api.cellTypeTreeModel(e),void 0,{},jh())}getBiomarkerTreeModel(){return this.doRequest(e=>this.api.biomarkerTreeModel(e),void 0,{},jh())}getReferenceOrgans(){return this.doRequest(e=>this.api.referenceOrgans(e),void 0,{},jh())}getTissueBlockResults(e){return this.doRequest(r=>this.api.tissueBlocks(r),e,{},jh())}getAggregateResults(e){return this.doRequest(r=>this.api.aggregateResults(r),e)}getOntologyTermOccurences(e){return this.doRequest(r=>this.api.ontologyTermOccurences(r),e)}getCellTypeTermOccurences(e){return this.doRequest(r=>this.api.cellTypeTermOccurences(r),e)}getBiomarkerTermOccurences(e){return this.doRequest(r=>this.api.biomarkerTermOccurences(r),e)}getScene(e){return this.doRequest(r=>this.api.scene(r),e,{},G2t)}getReferenceOrganScene(e,r){return this.doRequest(i=>this.api.referenceOrganScene(i),r,{organIri:e})}doRequest(e,r,i,n){let{api:s,config$:a}=this,o=x(x({},W2t(r)),i);return a.pipe(X_(50),br(1),Li(({remoteApiEndpoint:l,token:c})=>{s.configuration.basePath=l,c&&(o.token=c)}),_i(()=>e(o)),kt(l=>n?n(l):l))}getSessionToken(e){if(e.token)return Ge(e);let{remoteApiEndpoint:r,dataSources:i=[],filter:n}=e;if(i.length===0&&n===void 0)return Ge(e);let{api:s}=this,a={dataSources:i,filter:n};return s.configuration.basePath=r,s.sessionToken({sessionTokenRequest:a}).pipe(_i(({token:o})=>this.ensureDatabaseReady(o)),kt(o=>Q(x({},e),{token:o})))}ensureDatabaseReady(e){let r=()=>this.api.dbStatus({token:e}).pipe(Ye(i=>i.status!=="Ready"),_i(i=>Ge(void 0).pipe(Jl(i.checkback??0))));return Ge(void 0).pipe($Y({delay:r}),$N(),jY(e))}};Kh.\u0275fac=function(t){return new(t||Kh)},Kh.\u0275prov=vt({token:Kh,factory:Kh.\u0275fac,providedIn:"root"});var _s=Kh;ft([vs(vp),j("design:type",Function),j("design:paramtypes",[]),j("design:returntype",Ht)],_s.prototype,"getProviderNames",null);ft([vs(vp),j("design:type",Function),j("design:paramtypes",[]),j("design:returntype",Ht)],_s.prototype,"getDatasetTechnologyNames",null);ft([vs(vp),j("design:type",Function),j("design:paramtypes",[]),j("design:returntype",Ht)],_s.prototype,"getOntologyTreeModel",null);ft([vs(vp),j("design:type",Function),j("design:paramtypes",[]),j("design:returntype",Ht)],_s.prototype,"getCellTypeTreeModel",null);ft([vs(vp),j("design:type",Function),j("design:paramtypes",[]),j("design:returntype",Ht)],_s.prototype,"getBiomarkerTreeModel",null);ft([vs(vp),j("design:type",Function),j("design:paramtypes",[]),j("design:returntype",Ht)],_s.prototype,"getReferenceOrgans",null);ft([vs(nh),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",Ht)],_s.prototype,"getTissueBlockResults",null);ft([vs(nh),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",Ht)],_s.prototype,"getAggregateResults",null);ft([vs(nh),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",Ht)],_s.prototype,"getOntologyTermOccurences",null);ft([vs(nh),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",Ht)],_s.prototype,"getCellTypeTermOccurences",null);ft([vs(nh),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",Ht)],_s.prototype,"getBiomarkerTermOccurences",null);ft([vs(nh),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",Ht)],_s.prototype,"getScene",null);ft([vs(nh),j("design:type",Function),j("design:paramtypes",[String,Object]),j("design:returntype",Ht)],_s.prototype,"getReferenceOrganScene",null);function $2t(t,e,r){return r!==null&&(e=e.pipe(Me(r.cancelUncompleted$))),e.subscribe({next:i=>t.dispatch(i)}),e}function X2t(t,e){return e.then(r=>(t.dispatch(r),r))}function q2t(t,e,r){return Ou(e)?X2t(t,e):jo(e)?$2t(t,e,r):(t.dispatch(e),e)}var hG=class extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}},ry=null;function K2t(){if(ry===null)throw new hG;return ry.get(ll)}function Y2t(){if(ry===null)throw new hG;return ry.get(Zt)}var J2t=class{constructor(){this.cancelUncompleted$=new Bt}cancelPreviousAction(){this.cancelUncompleted$.next()}};function Q2t(t){return t?new J2t:null}var Vk="\u0275fac",dG=Symbol("InjectorInstance"),vL=Symbol("FactoryHasBeenDecorated");function tMt(t){if(vL in t.constructor.prototype)return;let e=t.constructor;typeof e[Vk]=="function"&&eMt(e),t.constructor.prototype[vL]=!0}function _L(t,e){let r=t[dG];return r?r.get(e):null}function eMt(t){let e=t[Vk];if(typeof e!="function")return;let r=t.\u0275prov||t.\u0275pipe||t.\u0275cmp||t.\u0275dir,i=()=>{let n=e();return n[dG]=R(ky),n};r&&(r.factory=i),Object.defineProperty(t,Vk,{get:()=>i})}var iMt={cancelUncompleted:!1};function pG(t=iMt){return(e,r,i)=>{let n,s=Q2t(t.cancelUncompleted);function a(){s!==null&&s.cancelPreviousAction();let o=_L(this,ll)||K2t(),l=_L(this,Zt)||Y2t(),c=n.apply(this,arguments);return l.runOutsideAngular(()=>q2t(o,c,s))}typeof i?.value=="function"?(n=i.value,i.value=a):Object.defineProperty(e,r,{set:o=>n=o,get:()=>a}),tMt(e)}}var mG=(()=>{let t=class{};return t.type="[CallToAction] Learn More",t})(),fG=(()=>{let t=class{};return t.type="[CallToAction] Open Dialog",t})(),gG=(()=>{let t=class{};return t.type="[CallToAction] Close Dialog",t})(),ru=class nu{get length(){return nu.storage?.length??0}key(e){return nu.storage?.key(e)??null}getItem(e,r){return nu.storage?.getItem(e)??r??null}setItem(e,r){try{return nu.storage?.setItem(e,r),!0}catch{return!1}}removeItem(e){nu.storage?.removeItem(e)}clear(){nu.storage?.clear()}};ru.storage=(()=>{let t;try{t=window.localStorage;let e="__storage_test__";return t.setItem(e,e),t.removeItem(e),t}catch(e){return e instanceof DOMException&&(e.code===22||e.code===1014||e.name==="QuotaExceededError"||e.name==="NS_ERROR_DOM_QUOTA_REACHED")&&t&&t.length!==0?t:void 0}})(),ru.\u0275fac=function(t){return new(t||ru)},ru.\u0275prov=vt({token:ru,factory:ru.\u0275fac,providedIn:"root"});var vG=ru,z_,bL="callToActionPopupShown",rMt="assets/docs/SPATIAL_SEARCH_README.md",Dl,Us=(Dl=class{static ctaDatePassed(t,e=Date.now){let r=e(),i=new Date(t);return+r>+i}constructor(t,e,r,i,n){this.dialog=t,this.ga=e,this.storage=r,this.infoService=i,this.http=n}ngxsOnInit(t){let{expirationDate:e,popupShown:r}=t.getState(),i=this.storage.getItem(bL,`${r}`),n=z_.ctaDatePassed(e);i!=="true"&&!n&&t.dispatch(new fG)}getDialogData(){return this.http.get(rMt,{responseType:"text"}).pipe(kt(t=>this.infoService.parseMarkdown(t)))}launchLearnMore(t){this.dialog.open(fPt,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:t,videoID:"UfxMpzatowE"}})}learnMore(t){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(Li(e=>this.launchLearnMore(e)))}open(t){this.dialog.open(z_.callToActionComponent,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(bL,"true"),t.patchState({popupShown:!0})}close(t){this.dialog.closeAll(),this.ga.event("close","call_to_action")}},z_=Dl,Dl.\u0275fac=function(t){return new(t||Dl)(U(dl),U(gs),U(vG),U(q7),U(js))},Dl.\u0275prov=vt({token:Dl,factory:Dl.\u0275fac}),Dl);ft([qE(mG),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",Ht)],Us.prototype,"learnMore",null);ft([qE(fG),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",void 0)],Us.prototype,"open",null);ft([qE(gG),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",void 0)],Us.prototype,"close",null);Us=z_=ft([oo({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}}),j("design:paramtypes",[dl,gs,vG,q7,js])],Us);var uo=class{static title(t){return t.title}static message(t){return t.message}static callToAction(t){return t.callToAction}static imageUrl(t){return t.imageUrl}static expirationDate(t){return t.expirationDate}static popupShown(t){return t.popupShown}};ft([up([Us]),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",String)],uo,"title",null);ft([up([Us]),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",String)],uo,"message",null);ft([up([Us]),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",String)],uo,"callToAction",null);ft([up([Us]),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",String)],uo,"imageUrl",null);ft([up([Us]),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",String)],uo,"expirationDate",null);ft([up([Us]),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",Boolean)],uo,"popupShown",null);var km=class{constructor(){this.close=()=>new gG,this.learnMore=()=>new mG}};km.\u0275fac=function(t){return new(t||km)},km.\u0275cmp=Pt({type:km,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"callToActionClicked","closeClicked","infoTitle","message","callToAction","imageUrl"]],template:function(t,e){if(t&1&&(N(0,"ccf-call-to-action",0),pi(1,"async"),pi(2,"async"),pi(3,"async"),pi(4,"async"),yt("callToActionClicked",function(){return e.learnMore()})("closeClicked",function(){return e.close()}),F()),t&2){let r,i,n,s;mt("infoTitle",(r=mi(1,4,e.title$))!==null&&r!==void 0?r:"")("message",(i=mi(2,6,e.message$))!==null&&i!==void 0?i:"")("callToAction",(n=mi(3,8,e.callToAction$))!==null&&n!==void 0?n:"")("imageUrl",(s=mi(4,10,e.imageUrl$))!==null&&s!==void 0?s:"")}},dependencies:[bPt,ip],changeDetection:0});var sh=km;ft([a0(uo.title),j("design:type",Ht)],sh.prototype,"title$",void 0);ft([a0(uo.message),j("design:type",Ht)],sh.prototype,"message$",void 0);ft([a0(uo.callToAction),j("design:type",Ht)],sh.prototype,"callToAction$",void 0);ft([a0(uo.imageUrl),j("design:type",Ht)],sh.prototype,"imageUrl$",void 0);ft([pG(),j("design:type",Object)],sh.prototype,"close",void 0);ft([pG(),j("design:type",Object)],sh.prototype,"learnMore",void 0);Us.callToActionComponent=sh;var nMt=["input"],sMt=["label"],aMt=["*"],oMt=new ht("mat-checkbox-default-options",{providedIn:"root",factory:_G});function _G(){return{color:"accent",clickAction:"check-indeterminate",disabledInteractive:!1}}var nn=function(t){return t[t.Init=0]="Init",t[t.Checked=1]="Checked",t[t.Unchecked=2]="Unchecked",t[t.Indeterminate=3]="Indeterminate",t}(nn||{}),lMt={provide:lo,useExisting:fs(()=>jT),multi:!0},cMt=class{},uMt=0,yL=_G(),jT=(()=>{let t=class{focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(i){let n=new cMt;return n.source=this,n.checked=i,n}_getAnimationTargetElement(){return this._inputElement?.nativeElement}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(i,n,s,a,o,l){this._elementRef=i,this._changeDetectorRef=n,this._ngZone=s,this._animationMode=o,this._options=l,this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"},this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new It,this.indeterminateChange=new It,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=nn.Init,this._controlValueAccessorChangeFn=()=>{},this._validatorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||yL,this.color=this._options.color||yL.color,this.tabIndex=parseInt(a)||0,this.id=this._uniqueId=`mat-mdc-checkbox-${++uMt}`,this.disabledInteractive=l?.disabledInteractive??!1}ngOnChanges(i){i.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(i){i!=this.checked&&(this._checked=i,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(i){i!==this.disabled&&(this._disabled=i,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(i){let n=i!=this._indeterminate;this._indeterminate=i,n&&(this._indeterminate?this._transitionCheckState(nn.Indeterminate):this._transitionCheckState(this.checked?nn.Checked:nn.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(i){this.checked=!!i}registerOnChange(i){this._controlValueAccessorChangeFn=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this.disabled=i}validate(i){return this.required&&i.value!==!0?{required:!0}:null}registerOnValidatorChange(i){this._validatorChangeFn=i}_transitionCheckState(i){let n=this._currentCheckState,s=this._getAnimationTargetElement();if(!(n===i||!s)&&(this._currentAnimationClass&&s.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(n,i),this._currentCheckState=i,this._currentAnimationClass.length>0)){s.classList.add(this._currentAnimationClass);let a=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{s.classList.remove(a)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let i=this._options?.clickAction;!this.disabled&&i!=="noop"?(this.indeterminate&&i!=="check"&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?nn.Checked:nn.Unchecked),this._emitChangeEvent()):(this.disabled&&this.disabledInteractive||!this.disabled&&i==="noop")&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(i){i.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(i,n){if(this._animationMode==="NoopAnimations")return"";switch(i){case nn.Init:if(n===nn.Checked)return this._animationClasses.uncheckedToChecked;if(n==nn.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case nn.Unchecked:return n===nn.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case nn.Checked:return n===nn.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case nn.Indeterminate:return n===nn.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(i){let n=this._inputElement;n&&(n.nativeElement.indeterminate=i)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(i){i.target&&this._labelElement.nativeElement.contains(i.target)&&i.stopPropagation()}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(di),R(Zt),Kd("tabindex"),R(kr,8),R(oMt,8))},t.\u0275cmp=Pt({type:t,selectors:[["mat-checkbox"]],viewQuery:function(r,i){if(r&1&&(gi(nMt,5),gi(sMt,5),gi(ac,5)),r&2){let n;oe(n=le())&&(i._inputElement=n.first),oe(n=le())&&(i._labelElement=n.first),oe(n=le())&&(i.ripple=n.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:16,hostBindings:function(r,i){r&2&&(_a("id",i.id),ke("tabindex",null)("aria-label",null)("aria-labelledby",null),Ai(i.color?"mat-"+i.color:"mat-accent"),ee("_mat-animation-noopable",i._animationMode==="NoopAnimations")("mdc-checkbox--disabled",i.disabled)("mat-mdc-checkbox-disabled",i.disabled)("mat-mdc-checkbox-checked",i.checked)("mat-mdc-checkbox-disabled-interactive",i.disabledInteractive))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],id:"id",required:[2,"required","required",Ut],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[2,"disableRipple","disableRipple",Ut],tabIndex:[2,"tabIndex","tabIndex",r=>r==null?void 0:or(r)],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",Ut],checked:[2,"checked","checked",Ut],disabled:[2,"disabled","disabled",Ut],indeterminate:[2,"indeterminate","indeterminate",Ut]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],standalone:!0,features:[We([lMt,{provide:Xu,useExisting:t,multi:!0}]),ji,yr,Kt],ngContentSelectors:aMt,decls:15,vars:20,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(r,i){if(r&1){let n=Qe();Mi(),N(0,"div",3),yt("click",function(s){return Lt(n),Nt(i._preventBubblingFromLabel(s))}),N(1,"div",4,0)(3,"div",5),yt("click",function(){return Lt(n),Nt(i._onTouchTargetClick())}),F(),N(4,"input",6,1),yt("blur",function(){return Lt(n),Nt(i._onBlur())})("click",function(){return Lt(n),Nt(i._onInputClick())})("change",function(s){return Lt(n),Nt(i._onInteractionEvent(s))}),F(),Ot(6,"div",7),N(7,"div",8),ju(),N(8,"svg",9),Ot(9,"path",10),F(),yQ(),Ot(10,"div",11),F(),Ot(11,"div",12),F(),N(12,"label",13,2),pe(14),F()()}if(r&2){let n=fi(2);mt("labelPosition",i.labelPosition),$(4),ee("mdc-checkbox--selected",i.checked),mt("checked",i.checked)("indeterminate",i.indeterminate)("disabled",i.disabled&&!i.disabledInteractive)("id",i.inputId)("required",i.required)("tabIndex",i.disabled&&!i.disabledInteractive?-1:i.tabIndex),ke("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby)("aria-checked",i.indeterminate?"mixed":null)("aria-disabled",i.disabled&&i.disabledInteractive?!0:null)("name",i.name)("value",i.value),$(7),mt("matRippleTrigger",n)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0),$(),mt("for",i.inputId)}},dependencies:[ac,pEt],styles:['.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity));background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity));background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mdc-checkbox__ripple{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.cdk-high-contrast-active .mdc-checkbox--disabled{opacity:.5}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mdc-checkbox-unselected-icon-color, var(--mat-app-on-surface-variant));top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px)/2)}.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-icon-color, var(--mat-app-primary))}.mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color)}.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color);border-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mat-app-on-surface));background-color:rgba(0,0,0,0)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mat-app-primary))}.mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mat-app-on-surface))}.mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-app-primary));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mat-app-primary))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover .mdc-checkbox__native-control~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color)}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mdc-checkbox-disabled-selected-icon-color);border-color:rgba(0,0,0,0)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.cdk-high-contrast-active .mdc-checkbox__checkmark{color:CanvasText}.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.cdk-high-contrast-active .mdc-checkbox--disabled .mdc-checkbox__checkmark,.cdk-high-contrast-active .mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:CanvasText}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mdc-checkbox-selected-checkmark-color, var(--mat-app-on-primary))}.cdk-high-contrast-active .mdc-checkbox__mixedmark{margin:0 1px}.mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, var(--mat-app-surface))}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *,.mat-mdc-checkbox._mat-animation-noopable .mdc-checkbox *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox .mat-internal-form-field{color:var(--mat-checkbox-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-checkbox-label-text-font, var(--mat-app-body-medium-font));line-height:var(--mat-checkbox-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-checkbox-label-text-size, var(--mat-app-body-medium-size));letter-spacing:var(--mat-checkbox-label-text-tracking, var(--mat-app-body-medium-tracking));font-weight:var(--mat-checkbox-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive{pointer-events:auto}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive input{cursor:default}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color)}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),t})(),hMt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[jT,ai,ai]}),t})(),A0=(()=>{let t=class{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(i){this._vertical=Yl(i)}get inset(){return this._inset}set inset(i){this._inset=Yl(i)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,i){r&2&&(ke("aria-orientation",i.vertical?"vertical":"horizontal"),ee("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},standalone:!0,features:[Kt],decls:0,vars:0,template:function(r,i){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color, var(--mat-app-outline));border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color, var(--mat-app-outline));border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),t})(),wf=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ai,ai]}),t})();function dMt(t,e){t&1&&(N(0,"div",6),ut(1,"SHIFT"),F())}var pMt=(()=>{let t=class{constructor(){this.className="ccf-spatial-search-keyboard-ui",this.keyClicked=new It,this.keyHovered=new It}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["ccf-spatial-search-keyboard-ui"]],hostVars:2,hostBindings:function(r,i){r&2&&Ai(i.className)},inputs:{currentKey:"currentKey",shiftPressed:"shiftPressed"},outputs:{keyClicked:"keyClicked",keyHovered:"keyHovered"},decls:16,vars:13,consts:[[1,"keys"],[1,"keyrow"],[1,"key","blue",3,"mousedown","mouseover","mouseout"],[1,"key","green",3,"mousedown","mouseover","mouseout"],[1,"key","red",3,"mousedown","mouseover","mouseout"],["class","shift",4,"ngIf"],[1,"shift"]],template:function(r,i){r&1&&(N(0,"div",0)(1,"div",1)(2,"div",2),yt("mousedown",function(){return i.keyClicked.emit("q")})("mouseover",function(){return i.keyHovered.emit("q")})("mouseout",function(){return i.keyHovered.emit()}),ut(3," Q "),F(),N(4,"div",3),yt("mousedown",function(){return i.keyClicked.emit("w")})("mouseover",function(){return i.keyHovered.emit("w")})("mouseout",function(){return i.keyHovered.emit()}),ut(5," W "),F(),N(6,"div",2),yt("mousedown",function(){return i.keyClicked.emit("e")})("mouseover",function(){return i.keyHovered.emit("e")})("mouseout",function(){return i.keyHovered.emit()}),ut(7," E "),F()(),N(8,"div",1)(9,"div",4),yt("mousedown",function(){return i.keyClicked.emit("a")})("mouseover",function(){return i.keyHovered.emit("a")})("mouseout",function(){return i.keyHovered.emit()}),ut(10," A "),F(),N(11,"div",3),yt("mousedown",function(){return i.keyClicked.emit("s")})("mouseover",function(){return i.keyHovered.emit("s")})("mouseout",function(){return i.keyHovered.emit()}),ut(12," S "),F(),N(13,"div",4),yt("mousedown",function(){return i.keyClicked.emit("d")})("mouseover",function(){return i.keyHovered.emit("d")})("mouseout",function(){return i.keyHovered.emit()}),ut(14," D "),F()(),Wt(15,dMt,2,0,"div",5),F()),r&2&&($(2),ee("highlighted",i.currentKey==="q"),$(2),ee("highlighted",i.currentKey==="w"),$(2),ee("highlighted",i.currentKey==="e"),$(3),ee("highlighted",i.currentKey==="a"),$(2),ee("highlighted",i.currentKey==="s"),$(2),ee("highlighted",i.currentKey==="d"),$(2),mt("ngIf",i.shiftPressed))},dependencies:[ep],styles:["[_nghost-%COMP%]{font:var(--sys-label-large)}[_nghost-%COMP%]   .keys[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;padding:0;gap:.5rem;width:7rem;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .keys[_ngcontent-%COMP%]   .keyrow[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:0;gap:.5rem}[_nghost-%COMP%]   .keys[_ngcontent-%COMP%]   .keyrow[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:.25rem;width:2rem;height:2rem;border:2px solid;border-radius:.5rem;cursor:pointer}[_nghost-%COMP%]   .keys[_ngcontent-%COMP%]   .keyrow[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .keys[_ngcontent-%COMP%]   .keyrow[_ngcontent-%COMP%]   .key.highlighted[_ngcontent-%COMP%]{color:#fff}[_nghost-%COMP%]   .keys[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{color:#1dcc65}[_nghost-%COMP%]   .keys[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]{color:#2979ff}[_nghost-%COMP%]   .keys[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]{color:#d50000}[_nghost-%COMP%]   .shift[_ngcontent-%COMP%]{color:#fff;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:.25rem;width:7rem;height:2rem;border:2px solid;border-radius:.5rem}"],changeDetection:0}),t})(),mMt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,Hi]}),t})(),bG={q:[0,0,1],e:[0,0,-1],w:[0,1,0],s:[0,-1,0],a:[-1,0,0],d:[1,0,0]},fMt=new Set(Object.keys(bG)),gMt=(()=>{let t=class{constructor(){this.className="ccf-spatial-search-keyboard-ui-behavior",this.delta=1,this.shiftDelta=2,this.disablePositionChange=!1,this.changePosition=new It,this.shiftPressed=!1}updatePosition(i){this.currentDelta=this.shiftPressed?this.shiftDelta:this.delta,this.currentKey=i.toLowerCase();let n=bG[this.currentKey];if(n!==void 0){let{x:s,y:a,z:o}=this.position,l=this.currentDelta;this.position={x:s+n[0]*l,y:a+n[1]*l,z:o+n[2]*l},this.changePosition.emit(this.position)}}handleKey(i){this.disablePositionChange||!fMt.has(i.key.toLowerCase())||i.target instanceof HTMLInputElement||(i.shiftKey&&(this.shiftPressed=!0),i.preventDefault(),this.updatePosition(i.key))}keyUp(i){i.key==="Shift"?this.shiftPressed=!1:this.currentKey=void 0}keyClick(i){this.updatePosition(i)}keyHover(i){this.currentKey=i}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["ccf-spatial-search-keyboard-ui-behavior"]],hostVars:2,hostBindings:function(r,i){r&1&&yt("keydown",function(n){return i.handleKey(n)},!1,Xm)("keyup",function(n){return i.keyUp(n)},!1,Xm),r&2&&Ai(i.className)},inputs:{delta:"delta",shiftDelta:"shiftDelta",position:"position",disablePositionChange:"disablePositionChange"},outputs:{changePosition:"changePosition"},decls:1,vars:2,consts:[[3,"keyClicked","keyHovered","currentKey","shiftPressed"]],template:function(r,i){r&1&&(N(0,"ccf-spatial-search-keyboard-ui",0),yt("keyClicked",function(n){return i.keyClick(n)})("keyHovered",function(n){return i.keyHover(n)}),F()),r&2&&mt("currentKey",i.currentKey)("shiftPressed",i.shiftPressed)},dependencies:[pMt],encapsulation:2,changeDetection:0}),t})(),vMt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,mMt]}),t})(),_Mt={initialConfig:{},parse:{},rename:{}},bMt=class{constructor(t,e){this.configState=t,this.storedChanges={},this.options=x(x({},_Mt),e)}addChanges(t){this.storedChanges=x(x({},this.storedChanges),t)}applyChanges(t,e={}){t===void 0&&(t=this.storedChanges,this.storedChanges={});let{configState:r,options:{initialConfig:i}}=this,n=r.snapshot,s=x(x(x({},i),n),e);for(let[a,o]of Object.entries(t))this.processChange(a,o,s);r.setConfig(s)}processChange(t,e,r){let{options:{parse:i,rename:n}}=this,s=n[t]??t,a=e.currentValue,o=i[t]??i[s];if(a==null)delete r[s];else if(!o)r[s]=a;else try{r[s]=o(a)}catch(l){console.warn(`Failed to parse ${t} = ${a} (${typeof a})`,l.message)}}},yMt=(()=>{let t=class{constructor(i,n,s={}){this.configState=i,this.cdr=n,this.options=s,this.initialized=!1,this.configManager=new bMt(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(i){this.configManager.addChanges(i),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}};return t.\u0275fac=function(r){eS()},t.\u0275dir=qt({type:t,features:[yr]}),t})(),yG={boolean:t=>`${t}`!="false",json:t=>typeof t=="string"?JSON.parse(t):t,stringArray:t=>typeof t=="string"?Array.from(t).filter(e=>!"[], ".includes(e)):t,function:t=>{if(typeof t!="function")throw new Error("Expected a javascript function");return t}},Jo={production:!0,disableDbWorker:!0,dbOptions:{},customization:{theme:"hubmap",collisionsEndpoint:"https://apps.humanatlas.io/api/v1/collisions",referenceData:"https://apps.humanatlas.io/api/v1/rui-reference-data"},skipUnsavedChangesConfirmation:!1,googleAnalyticsToken:window.location.hostname==="portal.hubmapconsortium.org"?"G-1WRJHN9FM6":"G-J9HWV9QPJ4"},wMt=new ht("Default theme class"),jk=(()=>{let t=class wG{static initialize(i){let{injector:n,location:s}=i;n.get(wG).initialize(s,n)}constructor(i){this.defaultTheme=this.theme=i??""}getTheme(){return this.theme}setTheme(i){i!==this.theme&&(this.applyThemeClass(this.theme,"remove"),this.applyThemeClass(i),this.theme=i)}resetTheme(){this.setTheme(this.defaultTheme)}initialize(i,n){this.element=i,this.injector=n,this.applyThemeClass(this.getTheme())}applyThemeClass(i,n="add"){let{element:s,injector:a}=this;if(!i||!s||!a)return;let o=a.get(Gu,null);if(!o)return;let l=s.nativeElement,c=a.get(eg,null)?.getContainerElement(),h=n==="add"?"addClass":"removeClass";o[h](l,i),c&&o[h](c,i)}};return t.\u0275fac=function(r){return new(r||t)(U(wMt,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),xMt=tl(rA()),ny="https://orcid.org/";function CMt(t){return t.startsWith(ny)?t:ny+t}function xG(t){return t=t.trim().toLowerCase(),t.startsWith(ny)?t.slice(ny.length):t}function kMt(t){if(t=xG(t),t=t.replace(/-/g,""),t.length===16)return t=t.replace(/(\w{4})(?!$)/g,"$1-"),CMt(t)}var AMt=tl(pK()),Zr=[];for(Jv=0;Jv<256;++Jv)Zr.push((Jv+256).toString(16).slice(1));var Jv;function SMt(t,e=0){return(Zr[t[e+0]]+Zr[t[e+1]]+Zr[t[e+2]]+Zr[t[e+3]]+"-"+Zr[t[e+4]]+Zr[t[e+5]]+"-"+Zr[t[e+6]]+Zr[t[e+7]]+"-"+Zr[t[e+8]]+Zr[t[e+9]]+"-"+Zr[t[e+10]]+Zr[t[e+11]]+Zr[t[e+12]]+Zr[t[e+13]]+Zr[t[e+14]]+Zr[t[e+15]]).toLowerCase()}var Qv,EMt=new Uint8Array(16);function TMt(){if(!Qv&&(Qv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qv(EMt)}var IMt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wL={randomUUID:IMt};function OMt(t,e,r){if(wL.randomUUID&&!e&&!t)return wL.randomUUID();t=t||{};var i=t.random||(t.rng||TMt)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){r=r||0;for(var n=0;n<16;++n)e[r+n]=i[n];return e}return SMt(i)}var PMt=OMt,MMt=tl(rA());function RMt(t){return t??{ids:[],entities:{}}}var BMt=[204,204,204,255],t_=[213,0,0,255],e_=[29,204,101,255],i_=[41,121,255,255];function DMt(t,e=!1,r=!1){let i=t.x_dimension/1e3,n=t.y_dimension/1e3,s=t.z_dimension/1e3,a=Math.max(i,n,s)*.05,o=a*.1,l=r?[i,n,s].map(c=>c*-.5):[0,0,0];return[{"@id":"http://purl.org/ccf/latest/ccf.owl#OriginSphere","@type":"SpatialSceneNode",unpickable:!0,geometry:"sphere",transformMatrix:new gt(gt.IDENTITY).translate(l).scale(a),color:BMt},{"@id":"http://purl.org/ccf/latest/ccf.owl#OriginX","@type":"SpatialSceneNode",unpickable:!0,geometry:"cylinder",transformMatrix:new gt(gt.IDENTITY).translate(l).translate([i/2,0,0]).rotateZ(ar(-90)).scale([o,i,o]),color:t_},{"@id":"http://purl.org/ccf/latest/ccf.owl#OriginXCone","@type":"SpatialSceneNode",unpickable:!0,geometry:"cone",transformMatrix:new gt(gt.IDENTITY).translate(l).translate([i,0,0]).rotateZ(ar(-90)).scale([a,a*3,a]),color:t_},{"@id":"http://purl.org/ccf/latest/ccf.owl#OriginXALabel","@type":"SpatialSceneNode",unpickable:!0,geometry:"text",text:"A",transformMatrix:new gt(gt.IDENTITY).translate(l).translate([-a*2,0,0]).scale(a),color:t_},{"@id":"http://purl.org/ccf/latest/ccf.owl#OriginXDLabel","@type":"SpatialSceneNode",unpickable:!0,geometry:"text",text:"D",transformMatrix:new gt(gt.IDENTITY).translate(l).translate([i+a*2,0,0]).scale(a),color:t_},{"@id":"http://purl.org/ccf/latest/ccf.owl#OriginY","@type":"SpatialSceneNode",unpickable:!0,geometry:"cylinder",transformMatrix:new gt(gt.IDENTITY).translate(l).translate([0,n/2,0]).scale([o,n,o]),color:e_},{"@id":"http://purl.org/ccf/latest/ccf.owl#OriginYCone","@type":"SpatialSceneNode",unpickable:!0,geometry:"cone",transformMatrix:new gt(gt.IDENTITY).translate(l).translate([0,n,0]).scale([a,a*3,a]),color:e_},{"@id":"http://purl.org/ccf/latest/ccf.owl#OriginYSLabel","@type":"SpatialSceneNode",unpickable:!0,geometry:"text",text:"S",transformMatrix:new gt(gt.IDENTITY).translate(l).translate([a*1.5,a*1.5,0]).scale(a),color:e_},{"@id":"http://purl.org/ccf/latest/ccf.owl#OriginYWLabel","@type":"SpatialSceneNode",unpickable:!0,geometry:"text",text:"W",transformMatrix:new gt(gt.IDENTITY).translate(l).translate([0,n+a*2,0]).scale(a),color:e_},{"@id":"http://purl.org/ccf/latest/ccf.owl#OriginZ","@type":"SpatialSceneNode",unpickable:!0,geometry:"cylinder",transformMatrix:new gt(gt.IDENTITY).translate(l).translate([0,0,s/2]).rotateX(ar(90)).scale([o,s,o]),color:i_},{"@id":"http://purl.org/ccf/latest/ccf.owl#OriginZCone","@type":"SpatialSceneNode",unpickable:!0,geometry:"cone",transformMatrix:new gt(gt.IDENTITY).translate(l).translate([0,0,s]).rotateX(ar(90)).scale([a,a*3,a]),color:i_},{"@id":"http://purl.org/ccf/latest/ccf.owl#OriginZQLabel","@type":"SpatialSceneNode",unpickable:!0,geometry:"text",text:"Q",transformMatrix:new gt(gt.IDENTITY).translate(l).translate([a*1.5,-a*1.5,0]).scale(a),color:i_},{"@id":"http://purl.org/ccf/latest/ccf.owl#OriginZELabel","@type":"SpatialSceneNode",unpickable:!0,geometry:"text",text:"E",transformMatrix:new gt(gt.IDENTITY).translate(l).translate([0,0,s+a*2]).scale(a),color:i_}].filter(c=>e&&c.geometry==="text"&&c.text||!c.text)}var LMt=[204,204,204,255],Vc=[213,0,0,255],jc=[29,204,101,255],Uc=[41,121,255,255];function NMt(t,e){let r=t.x_dimension/1e3,i=t.y_dimension/1e3,n=t.z_dimension/1e3,s=Math.max(r,i,n)*.1,a=Math.max(r,i,n),o=a*.05,l=a*2,c=o*4,h={radius:a/1e3/2,x:e.x_translation/1e3,y:e.y_translation/1e3,z:e.z_translation/1e3,rx:ar(e.x_rotation),ry:ar(e.y_rotation),rz:ar(e.z_rotation),sx:t.x_dimension/1e3,sy:t.y_dimension/1e3,sz:t.z_dimension/1e3};return[{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeOriginSphere","@type":"SpatialSceneNode",unpickable:!0,geometry:"sphere",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y,h.z]).rotateXYZ([h.rx,h.ry,h.rz]).multiplyRight(new gt(gt.IDENTITY).translate([-h.sx/2,-h.sy/2,-h.sz/2]).scale(s)),color:LMt},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeOriginX","@type":"SpatialSceneNode",unpickable:!0,geometry:"cylinder",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y,h.z]).rotateXYZ([h.rx,h.ry,h.rz]).multiplyRight(new gt(gt.IDENTITY).translate([0,-h.sy/2,-h.sz/2]).rotateZ(ar(-90)).scale([o,h.sx,o])),color:Vc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeOriginY","@type":"SpatialSceneNode",unpickable:!0,geometry:"cylinder",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y,h.z]).rotateXYZ([h.rx,h.ry,h.rz]).multiplyRight(new gt(gt.IDENTITY).translate([-h.sx/2,0,-h.sz/2]).scale([o,h.sy,o])),color:jc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeOriginZ","@type":"SpatialSceneNode",unpickable:!0,geometry:"cylinder",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y,h.z]).rotateXYZ([h.rx,h.ry,h.rz]).multiplyRight(new gt(gt.IDENTITY).translate([-h.sx/2,-h.sy/2,0]).rotateX(ar(90)).scale([o,h.sz,o])),color:Uc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeXD","@type":"SpatialSceneNode",unpickable:!0,geometry:"cylinder",transformMatrix:new gt(gt.IDENTITY).translate([h.x+h.radius+l/2,h.y,h.z]).rotateZ(ar(-90)).scale([o,l,o]),color:Vc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeXDCone","@type":"SpatialSceneNode",unpickable:!0,geometry:"cone",transformMatrix:new gt(gt.IDENTITY).translate([h.x+h.radius+l,h.y,h.z]).rotateZ(ar(-90)).scale([c,c*3,c]),color:Vc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeXDLabel","@type":"SpatialSceneNode",unpickable:!0,geometry:"text",text:"D",transformMatrix:new gt(gt.IDENTITY).translate([h.x+h.radius+l+c*3,h.y,h.z]).scale(c),color:Vc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeXA","@type":"SpatialSceneNode",unpickable:!0,geometry:"cylinder",transformMatrix:new gt(gt.IDENTITY).translate([h.x-h.radius-l/2,h.y,h.z]).rotateZ(ar(-90)).scale([o,l,o]),color:Vc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeXACone","@type":"SpatialSceneNode",unpickable:!0,geometry:"cone",transformMatrix:new gt(gt.IDENTITY).translate([h.x-h.radius-l,h.y,h.z]).rotateZ(ar(90)).scale([c,c*3,c]),color:Vc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeXALabel","@type":"SpatialSceneNode",unpickable:!0,geometry:"text",text:"A",transformMatrix:new gt(gt.IDENTITY).translate([h.x-h.radius-l-c*3.5,h.y,h.z]).scale(c),color:Vc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeYW","@type":"SpatialSceneNode",unpickable:!0,geometry:"cylinder",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y+h.radius+l/2,h.z]).scale([o,l,o]),color:jc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeYWCone","@type":"SpatialSceneNode",unpickable:!0,geometry:"cone",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y+h.radius+l,h.z]).scale([c,c*3,c]),color:jc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeYWLabel","@type":"SpatialSceneNode",unpickable:!0,geometry:"text",text:"W",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y+h.radius+l+c*3,h.z]).scale(c),color:jc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeYS","@type":"SpatialSceneNode",unpickable:!0,geometry:"cylinder",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y-h.radius-l/2,h.z]).scale([o,l,o]),color:jc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeYSCone","@type":"SpatialSceneNode",unpickable:!0,geometry:"cone",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y-h.radius-l,h.z]).rotateZ(ar(180)).scale([c,c*3,c]),color:jc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeYSLabel","@type":"SpatialSceneNode",unpickable:!0,geometry:"text",text:"S",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y-h.radius-l-c*3.5,h.z]).scale(c),color:jc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeZQ","@type":"SpatialSceneNode",unpickable:!0,geometry:"cylinder",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y,h.z+h.radius+l/2]).rotateX(ar(90)).scale([o,l,o]),color:Uc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeZQCone","@type":"SpatialSceneNode",unpickable:!0,geometry:"cone",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y,h.z+h.radius+l]).rotateX(ar(90)).scale([c,c*3,c]),color:Uc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeZQLabel","@type":"SpatialSceneNode",unpickable:!0,geometry:"text",text:"Q",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y,h.z+h.radius+l+c*3]).scale(c),color:Uc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeZE","@type":"SpatialSceneNode",unpickable:!0,geometry:"cylinder",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y,h.z-h.radius-l/2]).rotateX(ar(-90)).scale([o,l,o]),color:Uc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeZECone","@type":"SpatialSceneNode",unpickable:!0,geometry:"cone",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y,h.z-h.radius-l]).rotateX(ar(-90)).scale([c,c*3,c]),color:Uc},{"@id":"http://purl.org/ccf/latest/ccf.owl#CubeZELabel","@type":"SpatialSceneNode",unpickable:!0,geometry:"text",text:"E",transformMatrix:new gt(gt.IDENTITY).translate([h.x,h.y,h.z-h.radius-l-c*3.5]).scale(c),color:Uc}]}var j1=tl(rA());function FMt(t,e){let r=e,i;switch(r.translation_units){case"centimeter":i=1/100;break;case"millimeter":i=1/1e3;break;case"meter":default:i=1;break}let n=[r.x_translation,r.y_translation,r.z_translation].map(o=>o*i),s=[r.x_rotation,r.y_rotation,r.z_rotation].map(ar),a=[r.x_scaling,r.y_scaling,r.z_scaling];return t.translate(n).rotateXYZ(s).scale(a)}var Hc,zu=(Hc=class extends rh{constructor(t,e){super(),this.globals=t,this.globalConfig=e}ngxsOnInit(){super.ngxsOnInit(),this.getSourceDB().subscribe(t=>{this.setState(t),Jo.production||this.globals.set("db",t)})}getSourceDB(){return this.globalConfig.getOption("referenceData").pipe(_i(t=>zs(fetch(t)).pipe(_i(e=>e.json()),il(()=>io))))}normalizePlacement(t){let e=this.snapshot.placementPatches[t?.target];if(e){let r=FMt(new gt(gt.IDENTITY),e),i={x:t.x_translation,y:t.y_translation,z:t.z_translation},[n,s,a]=r.transformAsPoint([i.x,i.y,i.z],[]),o=Q(x({},t),{target:e.target});return o.x_translation=n,o.y_translation=s,o.z_translation=a,o}else return t}getReferenceOrganIri(t,e,r,i){let n=this.snapshot;t.toUpperCase()!=="KIDNEY"&&(r=""),i?.sex&&(e=i.sex);let s=[t,e,r||i?.side].join("|").toUpperCase(),a=Object.keys(n.organIRILookup).find(o=>o.toUpperCase().endsWith(s));return this.getLatestIri(a?n.organIRILookup[a]:void 0)}getOrganData(t){let e=this.getLatestIri(t),r=this.snapshot.organSpatialEntities[e];if(!r)return;let i=r.label??"",n=bf.find(s=>(r.representation_of===s.id||i.endsWith(s.organ))&&(!r.side||r.side.toLowerCase()===s.side));if(n)return{organ:n,sex:r.sex?.toLowerCase(),side:r.side?.toLowerCase()}}getLatestIri(t){if(!t)return"";let e=this.snapshot.placementPatches[t];if(e)return this.getLatestIri(e.target);{let r=Object.values(this.snapshot.organIRILookup),i=this.getUnversionedOrganIri(t);return r.find(n=>this.getUnversionedOrganIri(n)===i)??t}}getUnversionedOrganIri(t){return t.endsWith("#primary")?t.slice(0,t.lastIndexOf("/")):t}},Hc.\u0275fac=function(t){return new(t||Hc)(U(RT),U(Dr))},Hc.\u0275prov=vt({token:Hc,factory:Hc.\u0275fac}),Hc);zu=ft([pl(),oo({name:"reference",defaults:{organIRILookup:{},organSpatialEntities:{},anatomicalStructures:{},extractionSets:{},sceneNodeLookup:{},simpleSceneNodeLookup:{},placementPatches:{}}}),j("design:paramtypes",[RT,Dr])],zu);var zMt=10;function xL(t){let e=new gt(t.transformMatrix),r=e.transformAsPoint([-1,-1,-1],[]),i=e.transformAsPoint([1,1,1],[]);return new Cn({lowerBound:new I(...r.map((n,s)=>Math.min(n,i[s]))),upperBound:new I(...i.map((n,s)=>Math.max(n,r[s])))})}var Gc,Lr=(Gc=class extends rh{get nodes$(){return Rr([this.placementCube$,this.referenceOrganNodes$,this.previousRegistrationNodes$,this.nodeCollisions$,this.spatialKeyBoardAxis$]).pipe(kt(([t,e,r,i,n])=>[...t,...r,...e,...n,...this.snapshot.showCollisions?i:[]]))}get rotatedNodes$(){return Rr([this.rotation$,this.nodes$]).pipe(kt(([t,e])=>t===0?e:e.map(r=>Q(x({},r),{transformMatrix:new gt(gt.IDENTITY).rotateY(ar(t)).multiplyRight(r.transformMatrix??[])}))))}get referenceOrganNodes$(){return Rr([this.model.anatomicalStructures$,this.model.extractionSites$,this.model.organIri$]).pipe(kt(([t,e,r])=>{let i=this.getOrganSpatialEntity(r),n=r?DMt(i,!1,!0):[],s=this.createSceneNodes(r,[...t,...e]);return[...n,...s]}))}get referenceOrganSimpleNodes$(){return Rr([this.model.anatomicalStructures$,this.model.organIri$,this.referenceData.state$]).pipe(kt(([t,e,r])=>t.map(i=>r.sceneNodeLookup[i.id]?[Q(x({},r.simpleSceneNodeLookup[i.id]),{opacity:(i.opacity??100)/100,color:[255,255,255,255]})]:(r.anatomicalStructures[e]||[]).filter(n=>n.representation_of===i.id).map(n=>Q(x({},r.simpleSceneNodeLookup[n["@id"]]),{opacity:(i.opacity??100)/100,color:[255,255,255,255]}))).reduce((i,n)=>i.concat(n),[])),ii(j1.isEqual))}get nodeCollisions$(){return Rr([this.referenceOrganSimpleNodes$,this.collisions$,this.placementCube$]).pipe(Gd(zMt,void 0,{leading:!0,trailing:!0}),kt(([t,e,r])=>e!==void 0?this.filterNodeCollisions(t,e):r.length>0?this.filterNodeBBox(t,r[0]):[]),oa())}get previousRegistrationNodes$(){return Rr([this.model.organIri$,this.model.showPrevious$,this.registration.previousRegistrations$]).pipe(kt(([t="",e,r])=>e?this.getPreviousRegistrationNodes(t,r):[]))}get spatialKeyBoardAxis$(){let t=this.model.organIri$.pipe(Ye(e=>e!==void 0&&e!==""));return Rr([t,this.model.position$]).pipe(kt(([e,r])=>{let i=this.getOrganSpatialEntity(e),n=this.model.snapshot.blockSize,s=this.model.snapshot.rotation;return i?NMt({x_dimension:n.x,y_dimension:n.y,z_dimension:n.z},{x_translation:r.x-i.x_dimension/2,y_translation:r.y-i.y_dimension/2,z_translation:r.z-i.z_dimension/2,x_rotation:s.x,y_rotation:s.y,z_rotation:s.z,x_scaling:1,y_scaling:1,z_scaling:1}):[]}))}get placementCube$(){return Rr([this.model.viewType$,this.model.blockSize$,this.model.rotation$,this.model.position$,this.model.organ$]).pipe(kt(([t,e,r,i,n])=>n.src===""?[]:[this.placementCube]),ii(j1.isEqual))}get placementCube(){let{viewType:t,blockSize:e,rotation:r,position:i,organDimensions:n}=this.model.snapshot,s=[n.x,n.y,n.z].map(a=>-a/1e3/2);return{"@id":"#DraftPlacement","@type":"SpatialSceneNode",transformMatrix:new gt(gt.IDENTITY).translate([i.x,i.y,i.z].map((a,o)=>a/1e3+s[o])).rotateXYZ([r.x,r.y,r.z].map(ar)).scale([e.x,e.y,e.z].map(a=>a/1e3/2)),color:[255,255,0,200],tooltip:"Draft Placement",unpickable:t==="3d"}}get rotation$(){return this.model.viewSide$.pipe(kt(t=>{let e=0;switch(t){case"left":e=-90;break;case"right":e=90;break;case"posterior":e=180;break;default:break}return e}))}get deferCollisions$(){return this.state$.pipe(kt(t=>t.deferCollisions),ii())}get collisions$(){let t=Ud(()=>this.registration.throttledJsonld$);return Rr([this.deferCollisions$,t]).pipe(ii(j1.isEqual),xA(([e,r])=>e?Ge([]):this.getCollisions(r)),fr([]))}constructor(t,e,r){super(),this.injector=t,this.http=e,this.globalConfig=r,this.gizmo$=Ge([{"@id":"http://purl.org/ccf/latest/ccf.owl#VHMaleOrgans_VHM_Spleen_Colic_Surface","@type":"SpatialSceneNode",scenegraph:"https://hubmapconsortium.github.io/ccf-3d-reference-object-library/Assets/body4Mesh_1338.glb",transformMatrix:new gt(gt.IDENTITY).scale([2,2,2]).rotateY(ar(0)),tooltip:"Gizmo",unpickable:!0,_lighting:"pbr",zoomBasedOpacity:!1,color:[255,255,255,255],opacity:1}])}ngxsOnInit(){super.ngxsOnInit(),this.model=this.injector.get(xi),this.registration=this.injector.get(ur),this.referenceData=this.injector.get(zu),this.placementCube$.subscribe(()=>this.setDeferCollisions(!1))}setDeferCollisions(t){this.ctx.patchState({deferCollisions:t})}createSceneNodes(t,e){let r=this.referenceData.snapshot;return e.filter(i=>i.visible&&i.opacity&&i.opacity>0).map(i=>r.sceneNodeLookup[i.id]?[Q(x({},r.sceneNodeLookup[i.id]),{opacity:(i.opacity??100)/100,color:[255,255,255,255]})]:(r.anatomicalStructures[t]||[]).filter(n=>n.representation_of===i.id).map(n=>Q(x({},r.sceneNodeLookup[n["@id"]]),{opacity:(i.opacity??100)/100,color:[255,255,255,255]}))).reduce((i,n)=>i.concat(n),[])}getOrganSpatialEntity(t){return this.referenceData.snapshot.organSpatialEntities[t]}getCollisions(t){return this.globalConfig.getOption("collisionsEndpoint").pipe(_i(e=>e?this.http.post(e,JSON.stringify(t),{headers:{"Content-Type":"application/json"}}):Ge(void 0)),il(()=>Ge(void 0)),br(1))}filterNodeCollisions(t,e){let r=new Set(e.map(i=>i.id));return t.filter(i=>r.has(i["@id"]))}filterNodeBBox(t,e){let r=xL(e);return t.filter(i=>r.overlaps(xL(i)))}getPreviousRegistrationNodes(t,e){let r=i=>{let n=Array.isArray(i.placement)?i.placement[0]:i.placement;if(n.target===t){let s=this.model.snapshot.organDimensions,a=[s.x,s.y,s.z].map(o=>-o/1e3/2);return{"@id":i["@id"],"@type":"SpatialSceneNode",transformMatrix:new gt(gt.IDENTITY).translate([n.x_translation,n.y_translation,n.z_translation].map((o,l)=>o/1e3+a[l])).rotateXYZ([n.x_rotation,n.y_rotation,n.z_rotation].map(ar)).scale([i.x_dimension,i.y_dimension,i.z_dimension].map(o=>o/1e3/2)),color:[25,118,210,200],tooltip:i.label,unpickable:!0}}else return};return e.map(r).filter(i=>i!==void 0)}},Gc.\u0275fac=function(t){return new(t||Gc)(U(Re),U(js),U(Dr))},Gc.\u0275prov=vt({token:Gc,factory:Gc.\u0275fac}),Gc);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],Lr.prototype,"nodes$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],Lr.prototype,"rotatedNodes$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],Lr.prototype,"referenceOrganNodes$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],Lr.prototype,"referenceOrganSimpleNodes$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],Lr.prototype,"nodeCollisions$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],Lr.prototype,"previousRegistrationNodes$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],Lr.prototype,"spatialKeyBoardAxis$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],Lr.prototype,"placementCube$",null);ft([ri(),j("design:type",Object),j("design:paramtypes",[])],Lr.prototype,"placementCube",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],Lr.prototype,"rotation$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],Lr.prototype,"deferCollisions$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],Lr.prototype,"collisions$",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Boolean]),j("design:returntype",void 0)],Lr.prototype,"setDeferCollisions",null);Lr=ft([pl(),oo({name:"scene",defaults:{showCollisions:!Jo.production,deferCollisions:!1}}),j("design:paramtypes",[Re,js,Dr])],Lr);var Wc,Qo=(Wc=class extends r2t{get tags$(){return Rr([this.entities$,this.scene.nodeCollisions$]).pipe(kt(([t,e])=>{let r=[],i=new Set,n=new Set;Object.entries(t).forEach(([s,a])=>{a.type==="removed"?n.add(s):(i.add(s),r.push(a))});for(let s of e){let a=s.representation_of;a&&!n.has(a)&&!i.has(a)&&(i.add(a),r.push({id:a,label:s.tooltip,type:"assigned"}))}return r}))}get latestTags(){return this._latestTags}constructor(t){super(),this.injector=t,this._latestTags=[],this.searchExternal=(e,r)=>{let i=this.model.snapshot.anatomicalStructures.filter(n=>n.name.toLowerCase().indexOf(e.toLowerCase())!==-1);return[{totalCount:i.length,results:i.map(n=>({id:n.id,label:n.name,type:"added"})).slice(0,r)}]}}ngxsOnInit(){super.ngxsOnInit(),this.model=this.injector.get(xi),this.scene=this.injector.get(Lr),this.page=this.injector.get(hr),this.tags$.subscribe(t=>{this._latestTags=t}),this.entities$.subscribe(()=>this.page.setHasChanges())}addTags(t){for(let e of t)this.addTagRaw(e)}addTag(t){this.addTagRaw(t)}removeTag(t){this.snapshot.entities[t.id]?this.updateEntitiesMany([{id:t.id,changes:{type:"removed"}}]):this.addEntityOne(Q(x({},t),{type:"removed"}))}addTagRaw(t){this.snapshot.entities[t.id]?this.updateEntitiesMany([{id:t.id,changes:{type:"added"}}]):this.addEntityOne(Q(x({},t),{type:"added"}))}},Wc.\u0275fac=function(t){return new(t||Wc)(U(Re))},Wc.\u0275prov=vt({token:Wc,factory:Wc.\u0275fac}),Wc);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],Qo.prototype,"tags$",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Array]),j("design:returntype",void 0)],Qo.prototype,"addTags",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",void 0)],Qo.prototype,"addTag",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",void 0)],Qo.prototype,"removeTag",null);Qo=ft([pl(),oo({name:"tags",defaults:x({},RMt())}),j("design:paramtypes",[Re])],Qo);var VMt=100;function CL(t){return Number.isNaN(t)?void 0:t}var Zc,ur=(Zc=class extends rh{get metadata$(){return Rr([this.page.state$,this.model.state$,this.tags.tags$]).pipe(kt(([t,e,r])=>this.buildMetadata(t,e,r)))}get jsonld$(){return Rr([this.page.state$,this.model.state$,this.tags.tags$]).pipe(kt(([t,e,r])=>this.buildJsonLd(t,e,r)))}get throttledJsonld$(){return Rr([this.page.state$,this.model.state$,this.tags.tags$]).pipe(Gd(VMt,void 0,{leading:!0,trailing:!0}),ii(MMt.isEqual),kt(([t,e,r])=>this.buildJsonLd(t,e,r)))}get valid$(){return Rr([this.page.state$,this.model.state$]).pipe(kt(()=>this.isValid))}get previousRegistrations$(){let{globalConfig:t,state$:e}=this,r=e.pipe(kt(n=>n?.registrations)),i=t.getOption("fetchPreviousRegistrations").pipe(_i(n=>n?.()??[[]]),fr([]));return Rr([r,i]).pipe(kt(([n,s])=>[...n,...s]))}get currentIdentifier(){return PMt()}get currentDate(){return new Date().toISOString().split("T")[0]}constructor(t,e){super(),this.injector=t,this.globalConfig=e,this.displayErrors$=this.state$.pipe(kt(r=>r?.displayErrors))}ngxsOnInit(){super.ngxsOnInit(),this.page=this.injector.get(hr),this.model=this.injector.get(xi),this.tags=this.injector.get(Qo),this.refData=this.injector.get(zu),this.refData.state$.subscribe(()=>{this.globalConfig.config$.pipe(br(1),Li(({useDownload:t,register:e,organOptions:r})=>{this.ctx.patchState({useRegistrationCallback:!!(!t&&e)}),this.page.setOrcidId(),this.model.setOrganDefaults(),this.setOrganSelection(r)})).subscribe(),this.globalConfig.getOption("editRegistration").pipe(NT(),Li(t=>{this.editRegistration(t)})).subscribe()})}resetPosition(){let t=this.ctx.getState().initialRegistration;if(t){let e=this.refData.normalizePlacement(Array.isArray(t.placement)?t.placement[0]:t.placement);this.model.setPosition({x:e.x_translation,y:e.y_translation,z:e.z_translation})}}editRegistration(t){return Dt(this,null,function*(){this.ctx.patchState({initialRegistration:t});let e=this.refData.normalizePlacement(Array.isArray(t.placement)?t.placement[0]:t.placement),r=this.refData.getOrganData(e.target);this.page.setUserName({firstName:t.creator_first_name,middleName:t.creator_middle_name,lastName:t.creator_last_name}),this.page.setEmail(t.creator_email);let i=this.page.uriToOrcid(t.creator_orcid);this.page.setOrcidId(i),r&&(this.model.setOrgan(r.organ),r.sex&&this.model.setSex(r.sex),r.side&&this.model.setSide(r.side)),this.model.setBlockSize({x:t.x_dimension,y:t.y_dimension,z:t.z_dimension}),this.model.setRotation({x:e.x_rotation,y:e.y_rotation,z:e.z_rotation}),this.model.setSlicesConfig({thickness:t.slice_thickness||NaN,numSlices:t.slice_count||NaN}),this.model.setPosition({x:e.x_translation,y:e.y_translation,z:e.z_translation}),this.model.setPlacementDate(e.placement_date);let n=new Set(t.ccf_annotations);this.tags.addTags(this.model.snapshot.anatomicalStructures.filter(s=>n.has(s.id)).map(s=>({id:s.id,label:s.name,type:"added"}))),this.page.registrationStarted()})}setUseRegistrationCallback(t){this.ctx.patchState({useRegistrationCallback:t})}setDisplayErrors(t){this.ctx.patchState({displayErrors:t})}addRegistration(t){this.ctx.setState(Oo({registrations:kkt(t)})),this.page.registrationStarted()}setOrganSelection(t=[]){this.page.patchState({organOptions:this.organListOptions(t)})}isDataValid(t,e){return[t.user.firstName,t.user.lastName,t.orcidValid,e.organ.src,e.organ.name,e.organ.organ].every(r=>!!r)}get isValid(){return this.isDataValid(this.page.snapshot,this.model.snapshot)}register(t){if(this.page.registrationStarted(),!this.isValid)return;let{globalConfig:{snapshot:{register:e}},page:r,model:i,snapshot:n}=this,s=this.buildJsonLd(r.snapshot,i.snapshot,this.tags.latestTags),a=JSON.stringify(s,void 0,2);if(t??(t===void 0&&n.useRegistrationCallback))e?.(a);else{let o=new Blob([a],{type:"application/json",endings:"native"});(0,AMt.saveAs)(o,"registration-data.json")}this.setDisplayErrors(!1),this.page.clearHasChanges(),this.addRegistration(s)}setToInitialRegistration(){let{page:t}=this,e=Q(x({},this.snapshot.initialRegistration),{creator_first_name:t.snapshot.user.firstName,creator_last_name:t.snapshot.user.lastName,creator_middle_name:t.snapshot.user.middleName,creator_orcid:t.snapshot.user.orcidId});this.editRegistration(e)}buildMetadata(t,e,r){let i=[];return t.registrationCallbackSet||i.push({label:"First Name",value:t.user.firstName},{label:"Middle name (optional)",value:t.user.middleName},{label:"Last Name",value:t.user.lastName},{label:"Email",value:t.user.email},{label:"ORCID (optional)",value:t.user.orcidId}),i.push({label:"Sex",value:e.sex?e.sex.charAt(0).toUpperCase()+e.sex.slice(1):void 0},{label:"Organ",value:e.organ.name},{label:"Publication DOI (optional)",value:e.doi},{label:"Consortium (optional)",value:e.consortium},{label:"Position (mm)",value:this.xyzTripletToString(e.position)},{label:"Size (mm)",value:this.xyzTripletToString(e.blockSize)},{label:"Rotation (degrees)",value:this.xyzTripletToString(e.rotation)},{label:"Tissue section thickness (\xB5m)",value:e.slicesConfig.thickness.toString()},{label:"Tissue #sections",value:e.slicesConfig.numSlices.toString()},{label:"Anatomical Structure Tags",value:r.map(n=>n.label).join(", ")},{label:"Placement date",value:this.getDate(e.placementDate)}),i}getDate(t){let e=t.match("d{4}-d{2}-d{2}");return e?e[0]:this.currentDate}buildJsonLd(t,e,r){return{"@context":"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${this.currentIdentifier}`,"@type":"SpatialEntity",label:e.label||void 0,creator:`${t.user.firstName} ${t.user.middleName?t.user.middleName+" ":""}${t.user.lastName}`,creator_first_name:t.user.firstName,creator_last_name:t.user.lastName,creator_middle_name:t.user.middleName,creator_email:t.user.email,creator_orcid:t.user.orcidId,creation_date:this.currentDate,ccf_annotations:r.map(i=>i.id),slice_thickness:CL(e.slicesConfig.thickness),slice_count:CL(e.slicesConfig.numSlices),x_dimension:+e.blockSize.x.toFixed(3),y_dimension:+e.blockSize.y.toFixed(3),z_dimension:+e.blockSize.z.toFixed(3),dimension_units:"millimeter",publication_doi:e.doi,consortium:e.consortium,placement:{"@context":"https://hubmapconsortium.github.io/ccf-ontology/ccf-context.jsonld","@id":`http://purl.org/ccf/1.5/${this.currentIdentifier}_placement`,"@type":"SpatialPlacement",target:e.organIri,placement_date:this.currentDate,x_scaling:1,y_scaling:1,z_scaling:1,scaling_units:"ratio",x_rotation:+e.rotation.x.toFixed(3),y_rotation:+e.rotation.y.toFixed(3),z_rotation:+e.rotation.z.toFixed(3),rotation_order:"XYZ",rotation_units:"degree",x_translation:+e.position.x.toFixed(3),y_translation:+e.position.y.toFixed(3),z_translation:+e.position.z.toFixed(3),translation_units:"millimeter"}}}xyzTripletToString(t){return`${Math.round(t.x)}, ${Math.round(t.y)}, ${Math.round(t.z)}`}organListOptions(t){return t&&t.length>0?kL.filter(e=>e.id?t.includes(e.id):!1):kL}},Zc.\u0275fac=function(t){return new(t||Zc)(U(Re),U(Dr))},Zc.\u0275prov=vt({token:Zc,factory:Zc.\u0275fac}),Zc);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],ur.prototype,"metadata$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],ur.prototype,"jsonld$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],ur.prototype,"throttledJsonld$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],ur.prototype,"valid$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],ur.prototype,"previousRegistrations$",null);ft([ri(),j("design:type",String),j("design:paramtypes",[])],ur.prototype,"currentIdentifier",null);ft([ri(),j("design:type",String),j("design:paramtypes",[])],ur.prototype,"currentDate",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Boolean]),j("design:returntype",void 0)],ur.prototype,"setUseRegistrationCallback",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Boolean]),j("design:returntype",void 0)],ur.prototype,"setDisplayErrors",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",void 0)],ur.prototype,"addRegistration",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Array]),j("design:returntype",void 0)],ur.prototype,"setOrganSelection",null);ft([ri(),j("design:type",Boolean),j("design:paramtypes",[])],ur.prototype,"isValid",null);ur=ft([pl(),oo({name:"registration",defaults:{useRegistrationCallback:!1,displayErrors:!1,registrations:[]}}),j("design:paramtypes",[Re,Dr])],ur);var $c,hr=($c=class extends rh{get skipConfirmation$(){return this.state$.pipe(V1("skipConfirmation"))}get globalSkipConfirmation$(){return this.globalConfig.getOption("skipUnsavedChangesConfirmation").pipe(kt(t=>t??Jo.skipUnsavedChangesConfirmation),ii())}get hasChanges$(){return this.state$.pipe(V1("hasChanges"))}constructor(t,e){super(),this.globalConfig=t,this.reg=e,this.user$=this.state$.pipe(kt(r=>r?.user)),this.registrationStarted$=this.state$.pipe(V1("registrationStarted")),this.useCancelRegistrationCallback$=this.state$.pipe(kt(r=>r?.useCancelRegistrationCallback)),this.registrationCallbackSet$=this.state$.pipe(kt(r=>r?.registrationCallbackSet)),this.organOptions$=this.state$.pipe(kt(r=>r?.organOptions)),this.orcidValid$=this.state$.pipe(kt(r=>r?.orcidValid))}ngxsOnInit(){super.ngxsOnInit(),Rr([this.reg.state$,this.globalConfig.config$]).pipe(Li(([t,e])=>{this.setState(Oo({registrationCallbackSet:t.useRegistrationCallback?!!e.register:!1,useCancelRegistrationCallback:!!e.cancelRegistration,user:Ckt(!!e.user,e.user??{firstName:"",lastName:"",email:""}),registrationStarted:e.user??t.initialRegistration?!0:void 0}))})).subscribe(),this.initSkipConfirmationListeners()}cancelRegistration(){let{globalConfig:{snapshot:{cancelRegistration:t}},snapshot:{useCancelRegistrationCallback:e,skipConfirmation:r}}=this;e&&(r||confirm("Changes you made may not be saved."))&&t?.()}setUseCancelRegistrationCallback(t){this.ctx.patchState({useCancelRegistrationCallback:t})}setUserName(t){this.ctx.setState(Oo({user:Oo({firstName:t.firstName,lastName:t.lastName,middleName:t.middleName!==""?t.middleName:void 0})}))}setOrcidId(t){let e=t&&kMt(t),r=t===void 0||e!==void 0;this.ctx.setState(Oo({user:Oo({orcidId:e}),orcidValid:r}))}setEmail(t){this.ctx.setState(Oo({user:Oo({email:t})}))}registrationStarted(){this.ctx.setState(Oo({registrationStarted:!0}))}setHasChanges(){let{snapshot:{registrationStarted:t,hasChanges:e}}=this;t&&!e&&this.ctx.patchState({hasChanges:!0})}clearHasChanges(){this.ctx.patchState({hasChanges:!1})}initSkipConfirmationListeners(){let t=r=>this.patchState({skipConfirmation:r});this.globalSkipConfirmation$.pipe(Ye(r=>r)).subscribe(t),this.hasChanges$.pipe(qY(this.globalSkipConfirmation$),kt(([r,i])=>i||!r),ii()).subscribe(t);let e=r=>(r.preventDefault(),r.returnValue="Changes you made may not be saved.",r.returnValue);this.skipConfirmation$.subscribe(r=>{r?removeEventListener("beforeunload",e):addEventListener("beforeunload",e)})}uriToOrcid(t){return t?t.split("/").slice(-1)[0]:""}},$c.\u0275fac=function(t){return new(t||$c)(U(Dr),U(ur))},$c.\u0275prov=vt({token:$c,factory:$c.\u0275fac}),$c);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],hr.prototype,"skipConfirmation$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],hr.prototype,"globalSkipConfirmation$",null);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],hr.prototype,"hasChanges$",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Boolean]),j("design:returntype",void 0)],hr.prototype,"setUseCancelRegistrationCallback",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",void 0)],hr.prototype,"setUserName",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[String]),j("design:returntype",void 0)],hr.prototype,"setOrcidId",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[String]),j("design:returntype",void 0)],hr.prototype,"setEmail",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[]),j("design:returntype",void 0)],hr.prototype,"registrationStarted",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[]),j("design:returntype",void 0)],hr.prototype,"setHasChanges",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[]),j("design:returntype",void 0)],hr.prototype,"clearHasChanges",null);hr=ft([pl(),oo({name:"page",defaults:{user:{firstName:"",lastName:""},registrationStarted:!1,useCancelRegistrationCallback:!1,registrationCallbackSet:!1,skipConfirmation:!0,hasChanges:!1,organOptions:[],orcidValid:!1}}),j("design:paramtypes",[Dr,ur])],hr);var kL=bf,jMt={id:"",label:"",organ:{src:"",name:""},organIri:"",organDimensions:{x:90,y:90,z:90},sex:"male",blockSize:{x:10,y:10,z:10},rotation:{x:0,y:0,z:0},position:{x:0,y:0,z:0},slicesConfig:{thickness:NaN,numSlices:NaN},viewType:"register",viewSide:"anterior",showPrevious:!1,extractionSites:[],anatomicalStructures:[],extractionSets:[],placementDate:""},Xc,xi=(Xc=class extends rh{get modelChanged$(){let t=["viewType","viewSide","showPrevious"],e=Object.keys(this.initialState).filter(r=>!t.includes(r));return this.state$.pipe(Gd(0,void 0,{leading:!1,trailing:!0}),ii((r,i)=>{for(let n of e)if(r[n]!==i[n])return!1;return!0}),kt(()=>{}))}constructor(t,e,r){super(),this.ga=t,this.injector=e,this.globalConfig=r,this.id$=this.state$.pipe(kt(i=>i?.id),ii()),this.blockSize$=this.state$.pipe(kt(i=>i?.blockSize),ii()),this.rotation$=this.state$.pipe(kt(i=>i?.rotation),ii()),this.position$=this.state$.pipe(kt(i=>i?.position),ii()),this.slicesConfig$=this.state$.pipe(kt(i=>i?.slicesConfig),ii()),this.viewType$=this.state$.pipe(kt(i=>i?.viewType),ii()),this.viewSide$=this.state$.pipe(kt(i=>i?.viewSide),ii()),this.organ$=this.state$.pipe(kt(i=>i?.organ),ii()),this.organIri$=this.state$.pipe(kt(i=>i?.organIri),ii()),this.organDimensions$=this.state$.pipe(kt(i=>i?.organDimensions),ii()),this.sex$=this.state$.pipe(kt(i=>i?.sex),ii()),this.side$=this.state$.pipe(kt(i=>i?.side),ii()),this.showPrevious$=this.state$.pipe(kt(i=>i?.showPrevious),ii()),this.extractionSites$=this.state$.pipe(kt(i=>i?.extractionSites),ii()),this.anatomicalStructures$=this.state$.pipe(kt(i=>i?.anatomicalStructures),ii()),this.extractionSets$=this.state$.pipe(kt(i=>i?.extractionSets),ii()),this.consortium$=this.state$.pipe(kt(i=>i?.consortium),ii()),this.doi$=this.state$.pipe(kt(i=>i?.doi),ii())}ngxsOnInit(){super.ngxsOnInit(),this.referenceData=this.injector.get(zu),this.page=this.injector.get(hr),this.referenceData.state$.subscribe(()=>this.onReferenceDataChange())}idMatches(t,e){return bf.find(r=>t&&r.id===t?r.side?r.side===e:!0:!1)}nameMatches(t,e){return bf.find(r=>r.side?r.organ.toLowerCase()===t&&r.side===e:r.organ.toLowerCase()===t)}setBlockSize(t){this.ctx.patchState({blockSize:t})}setRotation(t){this.ctx.patchState({rotation:t})}setPosition(t){this.ga.event("placement",`${this.snapshot.organ?.name}_placement`,`${t.x.toFixed(1)}_${t.y.toFixed(1)}_${t.z.toFixed(1)}`),this.ctx.patchState({position:t})}setSlicesConfig(t){this.ctx.patchState({slicesConfig:t})}setViewType(t){this.ctx.patchState({viewType:t})}setViewSide(t){this.ctx.patchState({viewSide:t})}get defaultPosition(){let t=this.snapshot.organDimensions,e=this.snapshot.blockSize;return{x:t.x+2*e.x,y:t.y/2,z:t.z/2}}setOrgan(t){t&&(this.ga.event("organ_select","organ",t.name),this.ctx.patchState({organ:t}),t.side?this.ctx.patchState({side:t.side}):this.ctx.patchState({side:void 0}),this.onOrganIriChange())}setOrganDefaults(){this.ctx.patchState({position:this.defaultPosition,rotation:{x:0,y:0,z:0}})}setDefaultPosition(){this.ctx.patchState({position:this.defaultPosition})}setSex(t){this.ctx.patchState({sex:t}),this.onOrganIriChange()}setSide(t){this.ctx.patchState({side:t}),this.onOrganIriChange()}setShowPrevious(t){this.ctx.patchState({showPrevious:t})}setExtractionSites(t){let e=t.map(r=>Q(x({},r),{visible:r.opacity?r.opacity>0:!1}));this.ctx.patchState({extractionSites:e})}setAnatomicalStructures(t){let e=t.map(r=>Q(x({},r),{visible:r.opacity?r.opacity>0:!1}));this.ctx.patchState({anatomicalStructures:e})}setExtractionSets(t){this.ctx.patchState({extractionSets:t})}setConsortium(t){this.ctx.patchState({consortium:t})}setDoi(t){this.ctx.patchState({doi:t})}setPlacementDate(t){this.ctx.patchState({placementDate:t})}toggleRegistrationBlocksVisibility(t,e){if(this.setShowPrevious(t),!t)this.setAnatomicalStructures(e);else{let r=e.map(i=>Q(x({},i),{opacity:Math.min(20,i.opacity??20)}));this.setAnatomicalStructures(r)}}onOrganIriChange(){let t=this.referenceData.getReferenceOrganIri(this.snapshot.organ?.organ||"",this.snapshot.sex,this.snapshot.side,this.snapshot.organ),e={x:100,y:100,z:100};if(this.snapshot.organ?.sex&&this.ctx.patchState({sex:this.snapshot.organ?.sex}),t){let r=this.referenceData.snapshot,i={};for(let a of r.anatomicalStructures[t]||[]){let o=a.representation_of??a["@id"];i[o]||(i[o]={id:a.representation_of??a["@id"],name:a.label??"",visible:!0,opacity:20,tooltip:a.comment})}this.ctx.patchState({anatomicalStructures:[{id:"all",name:"all anatomical structures",opacity:20,visible:!0},...Object.values(i)]});let n=(r.extractionSets[t]||[]).map(a=>({name:a.label,sites:[{id:"all",name:"all landmarks",visible:!1,opacity:0}].concat((0,xMt.sortBy)(a.extractionSites.map(o=>({id:o["@id"],name:o.label??"",visible:!1,opacity:0,tooltip:o.comment})),"name"))}));this.ctx.patchState({extractionSets:n}),this.ctx.patchState({extractionSites:n.length>0?n[0].sites:[]});let s=r.organSpatialEntities[t];e.x=s.x_dimension,e.y=s.y_dimension,e.z=s.z_dimension}this.ctx.patchState({organIri:t,organDimensions:e})}onReferenceDataChange(){this.globalConfig.getOption("organ").pipe(NT(),Jl(0),_i(t=>this.onOrganChange(t))).subscribe(),this.modelChanged$.pipe(XY(this.page.registrationStarted$.pipe(Ye(t=>t)))).subscribe(()=>this.page.setHasChanges())}onOrganChange(t){let e,r;if(typeof t=="string"){let i=this.referenceData.getOrganData(t);r=i?.sex?.toLowerCase(),e=i?.organ}else{let i=t.name.toLowerCase(),n=t.side,s=t.ontologyId;r=t.sex?.toLowerCase(),e=this.idMatches(s,n),e||(e=this.nameMatches(i,n))}return e?(this.ctx.patchState({organ:e,sex:r,side:e?.side?.toLowerCase()}),this.referenceData.state$.pipe(Li(()=>this.onOrganIriChange()))):io}},Xc.\u0275fac=function(t){return new(t||Xc)(U(gs),U(Re),U(Dr))},Xc.\u0275prov=vt({token:Xc,factory:Xc.\u0275fac}),Xc);ft([ri(),j("design:type",Ht),j("design:paramtypes",[])],xi.prototype,"modelChanged$",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",void 0)],xi.prototype,"setBlockSize",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",void 0)],xi.prototype,"setRotation",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",void 0)],xi.prototype,"setPosition",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",void 0)],xi.prototype,"setSlicesConfig",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[String]),j("design:returntype",void 0)],xi.prototype,"setViewType",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[String]),j("design:returntype",void 0)],xi.prototype,"setViewSide",null);ft([ri(),j("design:type",Object),j("design:paramtypes",[])],xi.prototype,"defaultPosition",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",void 0)],xi.prototype,"setOrgan",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[]),j("design:returntype",void 0)],xi.prototype,"setOrganDefaults",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[]),j("design:returntype",void 0)],xi.prototype,"setDefaultPosition",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[String]),j("design:returntype",void 0)],xi.prototype,"setSex",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[String]),j("design:returntype",void 0)],xi.prototype,"setSide",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Boolean]),j("design:returntype",void 0)],xi.prototype,"setShowPrevious",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Array]),j("design:returntype",void 0)],xi.prototype,"setExtractionSites",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Array]),j("design:returntype",void 0)],xi.prototype,"setAnatomicalStructures",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[Array]),j("design:returntype",void 0)],xi.prototype,"setExtractionSets",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[String]),j("design:returntype",void 0)],xi.prototype,"setConsortium",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[String]),j("design:returntype",void 0)],xi.prototype,"setDoi",null);ft([ue(),j("design:type",Function),j("design:paramtypes",[String]),j("design:returntype",void 0)],xi.prototype,"setPlacementDate",null);xi=ft([pl(),oo({name:"model",defaults:jMt}),j("design:paramtypes",[gs,Re,Dr])],xi);var sy="https://doi.org/",AL="doi:";function UMt(t){return t.startsWith(sy)?t:sy+t}function CG(t){return t=t.trim().toLowerCase(),t.startsWith(sy)?t.slice(sy.length):t.startsWith(AL)?t.slice(AL.length):t}function HMt(t){return UMt(CG(t))}var GMt=(()=>{let t=class{constructor(){this.http=K(js,{optional:!0})}load(i,n){return Ud(()=>this.loadImpl(i,n))}loadImpl(i,n){return typeof i=="object"?this.loadLocalFile(i):this.loadRemoteFile(i)}loadLocalFile(i){let n=i.size,s={type:"progress",loaded:0,total:n},a={type:"progress",loaded:n,total:n};return zs(i.text()).pipe(kt(o=>({type:"data",data:JSON.parse(o)})),xA(o=>Ge(a,o)),fr(s))}loadRemoteFile(i){let{http:n}=this;if(!n)throw new Error("HttpClient is required to load remote json files");return n.get(i,{responseType:"json",observe:"events"}).pipe(kt(s=>this.httpEventToFileLoaderEvent(s)),Ye(s=>s!==void 0))}httpEventToFileLoaderEvent(i){switch(i.type){case ha.Sent:return{type:"progress",loaded:0};case ha.DownloadProgress:return{type:"progress",loaded:i.loaded,total:i.total};case ha.Response:if(!i.body)throw new Error("Could not parse response as json");return{type:"data",data:i.body};default:return}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function WMt(t,e){if(t&1&&(N(0,"div",1),ut(1),F()),t&2){let r=e.$implicit;$(),Oi(r)}}var kG=(()=>{let t=class{constructor(){this.errors=je()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-error-indicator"]],inputs:{errors:[1,"errors"]},standalone:!0,features:[Kt],decls:5,vars:0,consts:[[1,"errors"],[1,"error"]],template:function(r,i){r&1&&(N(0,"mat-icon"),ut(1,"error"),F(),N(2,"div",0),ic(3,WMt,2,1,"div",1,wd),F()),r&2&&($(3),rc(i.errors()))},dependencies:[ti,Hi,gr],styles:["[_nghost-%COMP%]{display:flex;width:fit-content;padding:.5rem .75rem;border-radius:.25rem;color:var(--sys-on-error-container);background-color:color-mix(in srgb,var(--sys-error-container) 80%,transparent)}[_nghost-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem;color:var(--sys-error);min-width:1.5rem}[_nghost-%COMP%]   .error[_ngcontent-%COMP%]{font:var(--sys-label-large);letter-spacing:var(--sys-label-large-text-tracking)}"],changeDetection:0}),t})(),ZMt=4,$Mt=.001,XMt=1e-7,qMt=10,Am=11,r_=1/(Am-1),KMt=typeof Float32Array=="function";function AG(t,e){return 1-3*e+3*t}function SG(t,e){return 3*e-6*t}function EG(t){return 3*t}function ay(t,e,r){return((AG(e,r)*t+SG(e,r))*t+EG(e))*t}function TG(t,e,r){return 3*AG(e,r)*t*t+2*SG(e,r)*t+EG(e)}function YMt(t,e,r,i,n){let s,a,o=0;do a=e+(r-e)/2,s=ay(a,i,n)-t,s>0?r=a:e=a;while(Math.abs(s)>XMt&&++o<qMt);return a}function JMt(t,e,r,i){for(let n=0;n<ZMt;++n){let s=TG(e,r,i);if(s===0)return e;let a=ay(e,r,i)-t;e-=a/s}return e}function QMt(t){return t}function tRt(t,e,r,i){if(!(0<=t&&t<=1&&0<=r&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&r===i)return QMt;let n=KMt?new Float32Array(Am):new Array(Am);for(let a=0;a<Am;++a)n[a]=ay(a*r_,t,r);function s(a){let o=0,l=1,c=Am-1;for(;l!==c&&n[l]<=a;++l)o+=r_;--l;let h=(a-n[l])/(n[l+1]-n[l]),p=o+h*r_,m=TG(p,t,r);return m>=$Mt?JMt(a,p,t,r):m===0?p:YMt(a,o,o+r_,t,r)}return function(a){return a===0?0:a===1?1:ay(s(a),e,i)}}var eRt=new ht("SMOOTH_SCROLL_OPTIONS"),iRt=(()=>{let t=class{constructor(){this.document=K(ge),this.zone=K(Zt),this._defaultOptions=x({duration:468,easing:{x1:.42,y1:0,x2:.58,y2:1}},K(eRt,{optional:!0})),this.onGoingScrolls=new Map}get now(){return this.document.defaultView.performance?.now?.bind(this.document.defaultView.performance)||Date.now}scrollElement(i,n,s){i.scrollLeft=n,i.scrollTop=s}getElement(i,n){return typeof i=="string"?(n||this.document).querySelector(i):zo(i)}getScrollDestroyerRef(i){return this.onGoingScrolls.has(i)&&this.onGoingScrolls.get(i).next(),this.onGoingScrolls.set(i,new Bt).get(i)}step(i){return new Ht(n=>{let s=(this.now()-i.startTime)/i.duration;s=s>1?1:s;let a=i.easing(s);i.currentX=i.startX+(i.x-i.startX)*a,i.currentY=i.startY+(i.y-i.startY)*a,this.scrollElement(i.scrollable,i.currentX,i.currentY),requestAnimationFrame(()=>{n.next(),n.complete()})})}isReached(i,n){return i.currentX===i.x&&i.currentY===i.y?(n.next(),!0):!1}scrolling(i,n){return this.step(i).pipe(yy(()=>!this.isReached(i,n)),_i(()=>this.scrolling(i,n)))}onScrollReached(i,n,s){s.complete(),this.onGoingScrolls.delete(i),this.zone.run(()=>n())}interrupted(i,n){return lr(mr(i,"wheel",{passive:!0,capture:!0}),mr(i,"touchmove",{passive:!0,capture:!0}),n).pipe(br(1))}applyScrollToOptions(i,n){return n.duration?new Promise(s=>{this.zone.runOutsideAngular(()=>{let a=this.getScrollDestroyerRef(i),o={scrollable:i,startTime:this.now(),startX:i.scrollLeft,startY:i.scrollTop,x:n.left==null?i.scrollLeft:~~n.left,y:n.top==null?i.scrollTop:~~n.top,duration:n.duration,easing:tRt(n.easing.x1,n.easing.y1,n.easing.x2,n.easing.y2)};this.scrolling(o,a).pipe(Me(this.interrupted(i,a)),Pf(()=>this.onScrollReached(i,s,a))).subscribe()})}):(this.scrollElement(i,n.left,n.top),Promise.resolve())}scrollTo(i,n){let s=this.getElement(i),a=getComputedStyle(s).direction==="rtl",o=Q(x(x({},this._defaultOptions),n),{left:n.left==null?a?n.end:n.start:n.left,right:n.right==null?a?n.start:n.end:n.right});return o.bottom!=null&&(o.top=s.scrollHeight-s.clientHeight-o.bottom),a?(o.left!=null&&(o.right=s.scrollWidth-s.clientWidth-o.left),o.left=o.right?-o.right:o.right):o.right!=null&&(o.left=s.scrollWidth-s.clientWidth-o.right),this.applyScrollToOptions(s,o)}scrollToElement(i,n,s={}){let a=this.getElement(i),o=this.getElement(n,a);if(o&&a){let l=a.getBoundingClientRect(),c=o.getBoundingClientRect(),h=Q(x({},s),{left:c.left+a.scrollLeft-l.left+(s.left||0),top:c.top+a.scrollTop-l.top+(s.top||0)});return this.scrollTo(a,h)}return Promise.resolve()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),rRt=["scrollbarButton",""];function nRt(t,e){if(t&1&&Ot(0,"button",4)(1,"button",5),t&2){let r=Rt();Zo("ng-scrollbar-button ",r.cmp.buttonClass,""),$(),Zo("ng-scrollbar-button ",r.cmp.buttonClass,"")}}function sRt(t,e){if(t&1&&Ot(0,"button",4)(1,"button",5),t&2){let r=Rt();Zo("ng-scrollbar-button ",r.cmp.buttonClass,""),$(),Zo("ng-scrollbar-button ",r.cmp.buttonClass,"")}}var aRt="[_nghost-%COMP%]{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky[_ngcontent-%COMP%]{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition);pointer-events:var(--_scrollbar-pointer-events)}.ng-scrollbar-track-wrapper[_ngcontent-%COMP%]{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);transition:var(--INTERNAL-scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background-color:var(--INTERNAL-scrollbar-track-color);border-radius:var(--INTERNAL-scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;transition:var(--INTERNAL-scrollbar-thumb-transition);border-radius:var(--INTERNAL-scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:_ngcontent-%COMP%_scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes _ngcontent-%COMP%_scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}";function oRt(t,e){t&1&&Ot(0,"scrollbar-y")}function lRt(t,e){t&1&&Ot(0,"scrollbar-x")}var cRt=["contentWrapper"],uRt=["*"],hRt=(()=>{let t=class{constructor(){this.nativeElement=K(te).nativeElement}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","scrollViewport",""]],standalone:!0}),t})(),xf=function(t){return t.AfterInit="AfterInit",t.Resized="ResizeObserver",t}(xf||{}),IG=new ht("NG_SCROLLBAR_OPTIONS"),OG=new ht("NG_SCROLLBAR_POLYFILL");function PG({element:t,contentWrapper:e,throttleDuration:r}){let i=xf.AfterInit,n,s=new Ht(a=>(n=new ResizeObserver(()=>{a.next(i),i=xf.Resized}),n.observe(t),e&&n.observe(e),()=>{n?.disconnect()}));return r?s.pipe(Gd(r,null,{leading:!0,trailing:!0})):s}function UT(t){return Li(()=>t.onselectstart=()=>!1)}function HT(t){return Li(()=>t.onselectstart=null)}function Fm(){return Li(t=>{t.preventDefault(),t.stopPropagation()})}var Uk=function(t){return t.Viewport="ng-scroll-viewport",t.Content="ng-scroll-content",t}(Uk||{}),dRt=class{constructor(){this.initialized=un(!1)}get offsetHeight(){return this.nativeElement.offsetHeight}get offsetWidth(){return this.nativeElement.offsetWidth}get scrollTop(){return this.nativeElement.scrollTop}get scrollLeft(){return this.nativeElement.scrollLeft}get contentHeight(){return this.contentWrapperElement.offsetHeight}get contentWidth(){return this.contentWrapperElement.offsetWidth}get scrollMaxX(){return this.contentWidth-this.offsetWidth}get scrollMaxY(){return this.contentHeight-this.offsetHeight}init(t,e,r){t.classList.add(Uk.Viewport),this.nativeElement=t,e.classList.add(Uk.Content),r?(r.style.position="relative",this.contentWrapperElement=r):this.contentWrapperElement=e,this.initialized.set(!0)}scrollYTo(t){this.nativeElement.scrollTop=t}scrollXTo(t){this.nativeElement.scrollLeft=t}},og=new ht("NG_SCROLLBAR"),SL={trackClass:"",thumbClass:"",buttonClass:"",orientation:"auto",appearance:"native",visibility:"native",position:"native",trackScrollDuration:50,sensorThrottleTime:0,disableSensor:!1,disableInteraction:!1,buttons:!1,hoverOffset:!1},pRt=(()=>{let t=class{constructor(){this.injectedOptions=K(IG,{optional:!0}),this.options=this.injectedOptions?x(x({},SL),this.injectedOptions):SL,this.zone=K(Zt),this.platform=K(Ui),this.injector=K(Re),this.isMobile=this.platform.IOS||this.platform.ANDROID,this.dir=K(Gn),this.smoothScroll=K(iRt),this.nativeElement=K(te).nativeElement,this.dragging=un("none"),this.orientation=je(this.options.orientation),this.visibility=je(this.options.visibility),this.buttons=je(this.options.buttons,{transform:Ut}),this.disableInteraction=je(this.options.disableInteraction,{transform:Ut}),this.disableSensor=je(this.options.disableSensor,{transform:Ut}),this.sensorThrottleTime=je(this.options.sensorThrottleTime,{transform:or}),this.hoverOffset=je(this.options.hoverOffset,{transform:Ut}),this.viewportDimension=un({contentHeight:0,contentWidth:0,offsetHeight:0,offsetWidth:0}),this.state=rr(()=>{let i=!1,n=!1,s=!1,a=!1,o=this.orientation(),l=this.visibility(),c=this.viewportDimension();return(o==="auto"||o==="vertical")&&(s=c.contentHeight>c.offsetHeight,i=l==="visible"||s),(o==="auto"||o==="horizontal")&&(a=c.contentWidth>c.offsetWidth,n=l==="visible"||a),{verticalUsed:i,horizontalUsed:n,isVerticallyScrollable:s,isHorizontallyScrollable:a}}),this.isVerticallyScrollable=rr(()=>this.state().isVerticallyScrollable),this.isHorizontallyScrollable=rr(()=>this.state().isHorizontallyScrollable),this.verticalUsed=rr(()=>this.state().verticalUsed),this.horizontalUsed=rr(()=>this.state().horizontalUsed),this.trackScrollDuration=this.options.trackScrollDuration,this.appearance=this.options.appearance,this.position=this.options.position,this.trackClass=this.options.trackClass,this.thumbClass=this.options.thumbClass,this.buttonClass=this.options.thumbClass,this.afterInit=new It,this.afterUpdate=new It,this.viewport=new dRt}ngOnInit(){Wd(this.injector,()=>{this.direction=Vy(this.dir.change.pipe(kt(()=>this.dir.value)),{initialValue:this.dir.value}),Ws(i=>{this.disableSensor()?this.sizeChangeSub?.unsubscribe():this.platform.isBrowser&&this.viewport.initialized()&&(this.sizeChangeSub?.unsubscribe(),this.zone.runOutsideAngular(()=>{this.sizeChangeSub=PG({element:this.viewport.nativeElement,contentWrapper:this.viewport.contentWrapperElement,throttleDuration:this.sensorThrottleTime()}).pipe(Li(n=>this.update(n))).subscribe()})),i(()=>this.sizeChangeSub?.unsubscribe())})})}ngAfterViewInit(){this.platform.isBrowser&&this.disableSensor()&&requestAnimationFrame(()=>{this.update(xf.AfterInit)})}update(i){this.updateCSSVariables(),this.zone.run(()=>{this.viewportDimension.set({contentHeight:this.viewport.contentHeight,contentWidth:this.viewport.contentWidth,offsetHeight:this.viewport.offsetHeight,offsetWidth:this.viewport.offsetWidth}),i===xf.AfterInit?this.afterInit.emit():this.afterUpdate.emit()})}scrollTo(i){return this.smoothScroll.scrollTo(this.viewport.nativeElement,i)}scrollToElement(i,n){return this.smoothScroll.scrollToElement(this.viewport.nativeElement,i,n)}updateCSSVariables(){this.nativeElement.style.setProperty("--content-height",`${this.viewport.contentHeight}`),this.nativeElement.style.setProperty("--content-width",`${this.viewport.contentWidth}`),this.nativeElement.style.setProperty("--viewport-height",`${this.viewport.offsetHeight}`),this.nativeElement.style.setProperty("--viewport-width",`${this.viewport.offsetWidth}`)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,hostVars:14,hostBindings:function(r,i){r&2&&(ke("verticalUsed",i.verticalUsed())("horizontalUsed",i.horizontalUsed())("isVerticallyScrollable",i.isVerticallyScrollable())("isHorizontallyScrollable",i.isHorizontallyScrollable())("mobile",i.isMobile)("dir",i.direction())("position",i.position)("dragging",i.dragging())("appearance",i.appearance)("visibility",i.visibility())("orientation",i.orientation())("disableInteraction",i.disableInteraction()),ee("ng-scrollbar",!0))},inputs:{orientation:[1,"orientation"],visibility:[1,"visibility"],buttons:[1,"buttons"],disableInteraction:[1,"disableInteraction"],disableSensor:[1,"disableSensor"],sensorThrottleTime:[1,"sensorThrottleTime"],hoverOffset:[1,"hoverOffset"],trackScrollDuration:[2,"trackScrollDuration","trackScrollDuration",or],appearance:"appearance",position:"position",trackClass:"trackClass",thumbClass:"thumbClass",buttonClass:"buttonClass"},outputs:{afterInit:"afterInit",afterUpdate:"afterUpdate"},features:[We([{provide:og,useExisting:t}]),ji]}),t})(),mRt="https://cdn.statically.io/gist/MurhafSousli/c852b6a672069396953f06ddd4b64620/raw/ef55db72e2abb7bc002ed79f4ad4cf408bfdb72f/scroll-timeline-lite.js",MG=(()=>{let t=class{constructor(){this.isBrowser=Fn(K(dn)),this._polyfillUrl=K(OG,{optional:!0})||mRt,this.document=K(ge),this.window=this.document.defaultView,this.scrollTimelinePolyfill=un(null),this.isBrowser&&(!this.window.ScrollTimeline||!CSS.supports("animation-timeline","scroll()"))&&this.initPolyfill()}initPolyfill(){return Dt(this,null,function*(){try{let i=this.document.createElement("script");i.src=this._polyfillUrl,yield new Promise((n,s)=>{i.onload=n,i.onerror=s,this.document.head.appendChild(i)}),this.window.ScrollTimeline?this.scrollTimelinePolyfill.set(this.window.ScrollTimeline):console.error("[NgScrollbar]: ScrollTimeline is not attached to the window object.")}catch(i){console.error("[NgScrollbar]: Error loading ScrollTimeline script:",i)}})}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),GT=new ht("SCROLLBAR_CONTROL"),RG=(()=>{let t=class{constructor(){this.cmp=K(og)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t}),t})(),WT=(()=>{let t=class{constructor(){this.cmp=K(og),this.control=K(GT),this.document=K(ge),this.zone=K(Zt),this.nativeElement=K(te).nativeElement,Ws(i=>{this.cmp.disableInteraction()?this._pointerEventsSub?.unsubscribe():this.zone.runOutsideAngular(()=>{this._pointerEventsSub=this.pointerEvents.subscribe()}),i(()=>this._pointerEventsSub?.unsubscribe())})}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t}),t})(),Cf=(()=>{let t=class extends WT{get size(){return this.nativeElement[this.control.sizeProperty]}get trackMax(){return this.track.size-this.size}get pointerEvents(){return mr(this.nativeElement,"pointerdown").pipe(Fm(),UT(this.document),_i(i=>{let n,s,a=Ge(i).pipe(Li(()=>{n=this.trackMax,s=this.control.viewportScrollMax,this.setDragging(this.control.axis)})),o=mr(this.document,"pointermove").pipe(Fm()),l=mr(this.document,"pointerup",{capture:!0}).pipe(Fm(),HT(this.document),Li(()=>this.setDragging("none")));return a.pipe(kt(c=>c[this.control.offsetProperty]),_i(c=>o.pipe(kt(h=>h[this.control.clientProperty]),kt(h=>h-this.track.offset),kt(h=>s*(h-c)/n),Li(h=>this.control.instantScrollTo(h,s)),Me(l))))}))}constructor(){Ws(()=>{let i=this.manager.scrollTimelinePolyfill();i&&!this._animation&&(this._animation=fRt(i,this.nativeElement,this.cmp.viewport.nativeElement,this.control.axis))}),super(),this.manager=K(MG),this.track=K(kf)}setDragging(i){this.zone.run(()=>this.cmp.dragging.set(i))}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,features:[oi]}),t})();function fRt(t,e,r,i){return e.animate({translate:["var(--_scrollbar-thumb-transform-from)","var(--_scrollbar-thumb-transform-to)"]},{fill:"both",easing:"linear",timeline:new t({source:r,axis:i})})}var kf=(()=>{let t=class extends WT{get viewportSize(){return this.cmp.viewport[this.control.sizeProperty]}get clientRect(){return this.nativeElement.getBoundingClientRect()}get offset(){return this.clientRect[this.control.clientRectProperty]}get size(){return this.nativeElement[this.control.sizeProperty]}get pointerEvents(){let i=mr(this.nativeElement,"pointerdown").pipe(Fm(),UT(this.document)),n=mr(this.document,"pointerup",{passive:!0}).pipe(HT(this.document)),s=mr(this.nativeElement,"pointerover",{passive:!0}).pipe(Li(c=>this.currMousePosition=c[this.control.offsetProperty]),kt(()=>!0)),a=mr(this.nativeElement,"pointerout",{passive:!0}).pipe(kt(()=>!1)),o=lr(s,a).pipe(fr(!0)),l=mr(this.nativeElement,"pointermove",{passive:!0}).pipe(Li(c=>this.currMousePosition=c[this.control.offsetProperty]));return i.pipe(_i(c=>(l.pipe(Me(n)).subscribe(),this.onTrackFirstClick(c).pipe(Jl(200),_i(()=>o.pipe(_i(h=>{let p=this.getScrollDirection(this.currMousePosition),m=this.scrollDirection===p;return h&&m?this.onTrackOngoingMousedown():io}))),Me(n)))))}constructor(){Ws(i=>{this.cmp.disableSensor()?(this.update(),this.sizeChangeSub?.unsubscribe()):this.zone.runOutsideAngular(()=>{this.sizeChangeSub=PG({element:this.nativeElement,throttleDuration:this.cmp.sensorThrottleTime()}).pipe(Li(()=>this.update())).subscribe()}),i(()=>this.sizeChangeSub?.unsubscribe())}),super()}update(){this.cmp.nativeElement.style.setProperty(this.cssLengthProperty,`${this.size}`)}onTrackFirstClick(i){return this.currMousePosition=i[this.control.offsetProperty],this.scrollDirection=this.getScrollDirection(this.currMousePosition),this.scrollMax=this.control.viewportScrollMax,this.scrollTo(this.nextStep())}nextStep(){if(this.scrollDirection==="forward"){let n=this.getScrollForwardStep();return n>=this.scrollMax?this.scrollMax:n}let i=this.getScrollBackwardStep();return i<=0?0:i}onTrackOngoingMousedown(){let i=this.nextStep();return this.scrollTo(i).pipe(yy(()=>!this.isReached(i)),_i(()=>this.onTrackOngoingMousedown()))}isReached(i){return this.scrollDirection==="forward"?i>=this.scrollMax:i<=0}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,contentQueries:function(r,i,n){if(r&1&&Xi(n,Cf,5),r&2){let s;oe(s=le())&&(i.thumb=s.first)}},features:[oi]}),t})(),gRt=(()=>{let t=class extends kf{get viewportScrollSize(){return this.cmp.viewport.contentWidth}constructor(){Ws(()=>{this.cmp.direction()==="rtl"?(this.getCurrPosition=()=>(this.viewportScrollSize-this.viewportSize-this.control.viewportScrollOffset)*this.size/this.viewportScrollSize,this.getScrollDirection=i=>i<this.getCurrPosition()?"forward":"backward"):(this.getCurrPosition=()=>this.control.viewportScrollOffset*this.size/this.viewportScrollSize,this.getScrollDirection=i=>i>this.getCurrPosition()?"forward":"backward")}),super(),this.cssLengthProperty="--track-x-length"}scrollTo(i){return Tf(this.cmp.scrollTo({start:i,duration:this.cmp.trackScrollDuration}))}getScrollForwardStep(){return this.control.viewportScrollOffset+this.viewportSize}getScrollBackwardStep(){return this.control.viewportScrollOffset-this.viewportSize}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","scrollbarTrackX",""]],standalone:!0,features:[We([{provide:kf,useExisting:t}]),oi]}),t})(),vRt=(()=>{let t=class extends kf{constructor(){super(...arguments),this.cssLengthProperty="--track-y-length"}get viewportScrollSize(){return this.cmp.viewport.contentHeight}getCurrPosition(){return this.control.viewportScrollOffset*this.size/this.viewportScrollSize}getScrollDirection(i){return i>this.getCurrPosition()?"forward":"backward"}scrollTo(i){return Tf(this.cmp.scrollTo({top:i,duration:this.cmp.trackScrollDuration}))}getScrollForwardStep(){return this.control.viewportScrollOffset+this.viewportSize}getScrollBackwardStep(){return this.control.viewportScrollOffset-this.viewportSize}};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275dir=qt({type:t,selectors:[["","scrollbarTrackY",""]],standalone:!0,features:[We([{provide:kf,useExisting:t}]),oi]}),t})(),_Rt=(()=>{let t=class extends Cf{};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275dir=qt({type:t,selectors:[["","scrollbarThumbX",""]],standalone:!0,features:[We([{provide:Cf,useExisting:t}]),oi]}),t})(),bRt=(()=>{let t=class extends Cf{};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275dir=qt({type:t,selectors:[["","scrollbarThumbY",""]],standalone:!0,features:[We([{provide:Cf,useExisting:t}]),oi]}),t})(),BG=(()=>{let t=class extends WT{constructor(){super(...arguments),this.injector=K(Re),this.afterFirstClickDelay=120,this.firstClickDuration=100,this.scrollBy=50,this.onGoingScrollBy=12,this.canScrollFunc={forward:(i,n)=>i<n,backward:i=>i>0},this.scrollStepFunc={forward:(i,n)=>n+i,backward:(i,n)=>n-i},this.horizontalScrollStepFunc={rtl:{forward:(i,n,s)=>s-n-i,backward:(i,n,s)=>s-n+i},ltr:this.scrollStepFunc}}get pointerEvents(){let i=mr(this.nativeElement,"pointerdown").pipe(Fm(),UT(this.document)),n=mr(this.document,"pointerup",{passive:!0}).pipe(HT(this.document)),s=mr(this.nativeElement,"pointerleave",{passive:!0}),a=lr(n,s);return i.pipe(_i(()=>this.firstScrollStep().pipe(Jl(this.afterFirstClickDelay),_i(()=>this.onOngoingPointerdown()),Me(a))))}ngOnInit(){this.canScroll=this.canScrollFunc[this.scrollDirection],this.control.axis==="x"?Wd(this.injector,()=>{Ws(()=>{let i=this.cmp.direction();this.nextStep=this.horizontalScrollStepFunc[i][this.scrollDirection]})}):this.nextStep=this.scrollStepFunc[this.scrollDirection]}firstScrollStep(){let i=this.nextStep(this.scrollBy,this.control.viewportScrollOffset,this.control.viewportScrollMax);return this.control.scrollTo(i,this.firstClickDuration)}onGoingScrollStep(){let i=this.control.viewportScrollMax,n=this.nextStep(this.onGoingScrollBy,this.control.viewportScrollOffset,i);this.control.instantScrollTo(n,i)}onOngoingPointerdown(){return WN(0,KK).pipe(yy(()=>this.canScroll(this.control.viewportScrollOffset,this.control.viewportScrollMax)),Li(()=>this.onGoingScrollStep()))}};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275cmp=Pt({type:t,selectors:[["button","scrollbarButton",""]],inputs:{scrollbarButton:"scrollbarButton",scrollDirection:"scrollDirection"},standalone:!0,features:[oi,Kt],attrs:rRt,decls:3,vars:0,consts:[[1,"ng-scrollbar-button-icon"],["viewBox","0 0 512 512","xmlns","http://www.w3.org/2000/svg"],["d","M413.1,327.3l-1.8-2.1l-136-156.5c-4.6-5.3-11.5-8.6-19.2-8.6c-7.7,0-14.6,3.4-19.2,8.6L101,324.9l-2.3,2.6  C97,330,96,333,96,336.2c0,8.7,7.4,15.8,16.6,15.8v0h286.8v0c9.2,0,16.6-7.1,16.6-15.8C416,332.9,414.9,329.8,413.1,327.3z"]],template:function(r,i){r&1&&(N(0,"div",0),ju(),N(1,"svg",1),Ot(2,"path",2),F()())},styles:["[_nghost-%COMP%]{--scrollbar-button-size: 20px;position:relative;border:none;margin:0;padding:0;border-radius:0;appearance:none;background-color:var(--INTERNAL-scrollbar-button-color)}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--INTERNAL-scrollbar-button-fill)}[_nghost-%COMP%]:hover{background:var(--INTERNAL-scrollbar-button-hover-color)}[_nghost-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:var(--INTERNAL-scrollbar-button-hover-fill)}[_nghost-%COMP%]:active{background:var(--INTERNAL-scrollbar-button-active-color)}[_nghost-%COMP%]:active   svg[_ngcontent-%COMP%]{fill:var(--INTERNAL-scrollbar-button-active-fill)}[scrollbarButton=top][_nghost-%COMP%], [scrollbarButton=start][_nghost-%COMP%]{order:1}[scrollbarButton=bottom][_nghost-%COMP%], [scrollbarButton=end][_nghost-%COMP%]{order:3}[scrollbarButton=top][_nghost-%COMP%], [scrollbarButton=bottom][_nghost-%COMP%]{width:100%;height:var(--scrollbar-button-size)}[scrollbarButton=start][_nghost-%COMP%], [scrollbarButton=end][_nghost-%COMP%]{width:var(--scrollbar-button-size);height:100%}[scrollbarButton=bottom][_nghost-%COMP%]{--_button-rotate: 180deg}[scrollbarButton=start][_nghost-%COMP%]{--_button-rotate: -90deg}[scrollbarButton=start][_nghost-%COMP%]   .ng-scrollbar-button-icon[_ngcontent-%COMP%]{writing-mode:vertical-lr}[scrollbarButton=end][_nghost-%COMP%]{--_button-rotate: 90deg}[scrollbarButton=end][_nghost-%COMP%]   .ng-scrollbar-button-icon[_ngcontent-%COMP%]{writing-mode:vertical-rl}.ng-scrollbar-button-icon[_ngcontent-%COMP%]{rotate:var(--_button-rotate);display:flex;place-content:center;place-items:center;width:100%;height:100%}"],changeDetection:0}),t})(),yRt=(()=>{let t=class extends RG{constructor(){super(...arguments),this.clientRectProperty="top",this.sizeProperty="offsetHeight",this.clientProperty="clientY",this.offsetProperty="offsetY",this.axis="y"}get viewportScrollMax(){return this.cmp.viewport.scrollMaxY}get viewportScrollOffset(){return this.cmp.viewport.scrollTop}scrollTo(i,n){return Tf(this.cmp.scrollTo({top:i,duration:n}))}instantScrollTo(i){this.cmp.viewport.scrollYTo(i)}};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275cmp=Pt({type:t,selectors:[["scrollbar-y"]],standalone:!0,features:[We([{provide:GT,useExisting:t}]),oi,Kt],decls:5,vars:11,consts:[[1,"ng-scrollbar-sticky"],[1,"ng-scrollbar-track-wrapper"],["scrollbarTrackY",""],["scrollbarThumbY",""],["scrollbarButton","top","scrollDirection","backward"],["scrollbarButton","bottom","scrollDirection","forward"]],template:function(r,i){r&1&&(N(0,"div",0)(1,"div",1)(2,"div",2),Ot(3,"div",3),F(),Wt(4,nRt,2,6),F()()),r&2&&(ee("ng-scrollbar-hover",i.cmp.hoverOffset()),$(),ee("ng-scrollbar-hover",!i.cmp.hoverOffset()),$(),Zo("ng-scrollbar-track ",i.cmp.trackClass,""),$(),Zo("ng-scrollbar-thumb ",i.cmp.thumbClass,""),$(),ae(i.cmp.buttons()?4:-1))},dependencies:[vRt,bRt,BG],styles:["[_nghost-%COMP%]{position:absolute;inset:0;pointer-events:none;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}.ng-scrollbar-sticky[_ngcontent-%COMP%]{top:calc(var(--_scrollbar-wrapper-top) * 1px);left:calc(var(--_scrollbar-wrapper-left) * 1px);right:calc(var(--_scrollbar-wrapper-right) * 1px);height:calc(var(--_scrollbar-wrapper-height) * 1px);width:calc(var(--_scrollbar-wrapper-width) * 1px);position:sticky;z-index:100;opacity:var(--_scrollbar-hover-opacity);transition:var(--_scrollbar-opacity-transition);pointer-events:var(--_scrollbar-pointer-events)}.ng-scrollbar-track-wrapper[_ngcontent-%COMP%]{touch-action:none;-webkit-user-select:none;user-select:none;top:var(--_scrollbar-track-top);bottom:var(--_scrollbar-track-bottom);right:var(--_scrollbar-track-right);left:var(--_scrollbar-track-left);transition:var(--INTERNAL-scrollbar-track-wrapper-transition);position:absolute;overflow:hidden;display:flex;place-items:center}.ng-scrollbar-track[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;background-color:var(--INTERNAL-scrollbar-track-color);border-radius:var(--INTERNAL-scrollbar-border-radius);cursor:default;z-index:1;order:2}.ng-scrollbar-thumb[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;transition:var(--INTERNAL-scrollbar-thumb-transition);border-radius:var(--INTERNAL-scrollbar-border-radius);height:var(--_thumb-height);width:var(--_thumb-width);animation-name:_ngcontent-%COMP%_scrollbarThumbAnimation;animation-duration:1ms;animation-timing-function:linear}@keyframes _ngcontent-%COMP%_scrollbarThumbAnimation{0%{translate:var(--_scrollbar-thumb-transform-from)}to{translate:var(--_scrollbar-thumb-transform-to)}}","[_nghost-%COMP%]{--_scrollbar-wrapper-top: 0;--_scrollbar-wrapper-left: var(--_scrollbar-wrapper-y-left);--_scrollbar-wrapper-right: var(--_scrollbar-wrapper-y-right);--_scrollbar-wrapper-height: var(--viewport-height);--_scrollbar-wrapper-width: var(--_scrollbar-thickness);--_scrollbar-track-top: var(--_vertical-top);--_scrollbar-track-bottom: var(--_vertical-bottom);--_scrollbar-track-right: var(--_vertical-right);--_scrollbar-track-left: var(--_vertical-left);--_thumb-height: calc(var(--thumb-y-length) * 1px);--_thumb-width: 100%;--_scrollbar-thumb-transform-from: 0 0;--_scrollbar-thumb-transform-to: 0 calc(var(--_scrollbar-y-thumb-transform-to-value) * 1px)}.ng-scrollbar-track-wrapper[_ngcontent-%COMP%]{width:var(--_track-y-thickness);flex-direction:column}.ng-scrollbar-hover[_ngcontent-%COMP%]:hover{--_track-y-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-y-color: var(--INTERNAL-scrollbar-thumb-hover-color)}.ng-scrollbar-thumb[_ngcontent-%COMP%]{animation-timeline:var(--_animation-timeline-y);min-height:calc(var(--INTERNAL-scrollbar-thumb-min-size) * 1px);display:var(--_vertical-thumb-display);background-color:var(--_thumb-y-color)}"],changeDetection:0}),t})(),wRt=(()=>{let t=class extends RG{get viewportScrollMax(){return this.cmp.viewport.scrollMaxX}get viewportScrollOffset(){return Math.abs(this.cmp.viewport.scrollLeft)}constructor(){Ws(()=>{this.cmp.direction()==="rtl"?this.handlePosition=(i,n)=>-(n-i):this.handlePosition=i=>i}),super(),this.manager=K(MG),this.clientRectProperty="left",this.sizeProperty="offsetWidth",this.clientProperty="clientX",this.offsetProperty="offsetX",this.axis="x"}scrollTo(i,n){return Tf(this.cmp.scrollTo({left:i,duration:n}))}instantScrollTo(i,n){this.cmp.viewport.scrollXTo(this.handlePosition(i,n))}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["scrollbar-x"]],hostVars:1,hostBindings:function(r,i){r&2&&ke("dir",i.cmp.direction())},standalone:!0,features:[We([{provide:GT,useExisting:t}]),oi,Kt],decls:5,vars:11,consts:[[1,"ng-scrollbar-sticky"],[1,"ng-scrollbar-track-wrapper"],["scrollbarTrackX",""],["scrollbarThumbX",""],["scrollbarButton","start","scrollDirection","backward"],["scrollbarButton","end","scrollDirection","forward"]],template:function(r,i){r&1&&(N(0,"div",0)(1,"div",1)(2,"div",2),Ot(3,"div",3),F(),Wt(4,sRt,2,6),F()()),r&2&&(ee("ng-scrollbar-hover",i.cmp.hoverOffset()),$(),ee("ng-scrollbar-hover",!i.cmp.hoverOffset()),$(),Zo("ng-scrollbar-track ",i.cmp.trackClass,""),$(),Zo("ng-scrollbar-thumb ",i.cmp.thumbClass,""),$(),ae(i.cmp.buttons()?4:-1))},dependencies:[gRt,_Rt,BG],styles:[aRt,"[_nghost-%COMP%]{--_scrollbar-wrapper-top: var(--_scrollbar-wrapper-x-top);--_scrollbar-wrapper-left: 0;--_scrollbar-wrapper-right: 0;--_scrollbar-wrapper-height: var(--_scrollbar-thickness);--_scrollbar-wrapper-width: var(--viewport-width);--_scrollbar-track-top: var(--_horizontal-top);--_scrollbar-track-bottom: var(--_horizontal-bottom);--_scrollbar-track-right: var(--_horizontal-right);--_scrollbar-track-left: var(--_horizontal-left);--_thumb-height: 100%;--_thumb-width: calc(var(--thumb-x-length) * 1px);--_scrollbar-thumb-transform-from: 0;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * 1px)}[_nghost-%COMP%]   .ng-scrollbar-button[scrollbarButton=start][_ngcontent-%COMP%]{_--button-rotate:90}[_nghost-%COMP%]   .ng-scrollbar-button[scrollbarButton=end][_ngcontent-%COMP%]{_--button-rotate:-90}[dir=rtl][_nghost-%COMP%]   .ng-scrollbar-thumb[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_scrollbarThumbRTLAnimation;will-change:right;--_scrollbar-thumb-transform-to: calc(var(--_scrollbar-x-thumb-transform-to-value) * -1px)}[dir=rtl][_nghost-%COMP%]   .ng-scrollbar-button[scrollbarButton=start][_ngcontent-%COMP%]{--_button-rotate: 90deg}[dir=rtl][_nghost-%COMP%]   .ng-scrollbar-button[scrollbarButton=end][_ngcontent-%COMP%]{--_button-rotate: -90deg}.ng-scrollbar-track-wrapper[_ngcontent-%COMP%]{height:var(--_track-x-thickness);flex-direction:row}.ng-scrollbar-hover[_ngcontent-%COMP%]:hover{--_track-x-thickness: var(--_scrollbar-hover-thickness-px);--_thumb-x-color: var(--INTERNAL-scrollbar-thumb-hover-color)}.ng-scrollbar-thumb[_ngcontent-%COMP%]{animation-timeline:var(--_animation-timeline-x);min-width:calc(var(--INTERNAL-scrollbar-thumb-min-size) * 1px);display:var(--_horizontal-thumb-display);background-color:var(--_thumb-x-color)}@keyframes _ngcontent-%COMP%_scrollbarThumbRTLAnimation{0%{right:var(--_scrollbar-thumb-transform-from)}to{right:calc(var(--_scrollbar-thumb-transform-to) * -1)}}"],changeDetection:0}),t})(),EL=(()=>{let t=class{constructor(){this.cmp=K(og)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["scrollbars"]],standalone:!0,features:[Kt],decls:2,vars:2,template:function(r,i){r&1&&Wt(0,oRt,1,0,"scrollbar-y")(1,lRt,1,0,"scrollbar-x"),r&2&&(ae(i.cmp.verticalUsed()?0:-1),$(),ae(i.cmp.horizontalUsed()?1:-1))},dependencies:[wRt,yRt],styles:["[_nghost-%COMP%]{display:contents}"],changeDetection:0}),t})(),xRt=(()=>{let t=class extends pRt{ngOnInit(){this.viewport.init(this.nativeElement,this.contentWrapper.nativeElement),super.ngOnInit()}};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275cmp=Pt({type:t,selectors:[["ng-scrollbar",3,"externalViewport",""]],viewQuery:function(r,i){if(r&1&&(gi(cRt,7),gi(EL,7)),r&2){let n;oe(n=le())&&(i.contentWrapper=n.first),oe(n=le())&&(i._scrollbars=n.first)}},exportAs:["ngScrollbar"],standalone:!0,features:[We([{provide:og,useExisting:t}]),uS([hRt]),oi,Kt],ngContentSelectors:uRt,decls:4,vars:0,consts:[["contentWrapper",""]],template:function(r,i){r&1&&(Mi(),N(0,"div",null,0),pe(2),Ot(3,"scrollbars"),F())},dependencies:[EL],styles:["[_nghost-%COMP%]{display:block;position:relative;max-height:100%;max-width:100%;--INTERNAL-scrollbar-border-radius: var(--scrollbar-border-radius, 0px);--INTERNAL-scrollbar-thickness: var(--scrollbar-thickness, 5);--INTERNAL-scrollbar-offset: var(--scrollbar-offset, 0);--INTERNAL-scrollbar-track-wrapper-transition: var(--scrollbar-track-wrapper-transition, width 60ms linear, height 60ms linear);--INTERNAL-scrollbar-track-color: var(--scrollbar-track-color, transparent);--INTERNAL-scrollbar-thumb-color: var(--scrollbar-thumb-color, rgb(0 0 0 / 20%));--INTERNAL-scrollbar-thumb-hover-color: var(--scrollbar-thumb-hover-color, var(--INTERNAL-scrollbar-thumb-color));--INTERNAL-scrollbar-hover-thickness: var(--scrollbar-hover-thickness, var(--INTERNAL-scrollbar-thickness));--INTERNAL-scrollbar-thumb-transition: var(--scrollbar-thumb-transition, none);--INTERNAL-scrollbar-thumb-min-size: var(--scrollbar-thumb-min-size, 20);--INTERNAL-scrollbar-button-color: var(--scrollbar-button-color, var(--INTERNAL-scrollbar-thumb-color));--INTERNAL-scrollbar-button-hover-color: var(--scrollbar-button-hover-color, var(--INTERNAL-scrollbar-button-color));--INTERNAL-scrollbar-button-active-color: var(--scrollbar-button-active-color, var(--INTERNAL-scrollbar-button-hover-color));--INTERNAL-scrollbar-button-fill: var(--scrollbar-button-fill, white);--INTERNAL-scrollbar-button-hover-fill: var(--scrollbar-button-hover-fill, var(--INTERNAL-scrollbar-button-fill));--INTERNAL-scrollbar-button-active-fill: var(--scrollbar-button-active-fill, var(--INTERNAL-scrollbar-button-hover-fill));--INTERNAL-scrollbar-hover-opacity-transition-enter-duration: var(--scrollbar-hover-opacity-transition-enter-duration, 0);--INTERNAL-scrollbar-hover-opacity-transition-leave-duration: var(--scrollbar-hover-opacity-transition-leave-duration, .4s);--INTERNAL-scrollbar-hover-opacity-transition-leave-delay: var(--scrollbar-hover-opacity-transition-leave-delay, 1s);--INTERNAL-scrollbar-overscroll-behavior: var(--scrollbar-overscroll-behavior, initial);--INTERNAL-scrollbar-mobile-overscroll-behavior: var(--scrollbar-mobile-overscroll-behavior, none);--_scrollbar-thickness: calc(var(--INTERNAL-scrollbar-thickness) + var(--INTERNAL-scrollbar-offset) * 2);--_scrollbar-pointer-events: auto;--_scrollbar-offset-px: calc(var(--INTERNAL-scrollbar-offset) * 1px);--_scrollbar-thickness-px: calc(var(--INTERNAL-scrollbar-thickness) * 1px);--_scrollbar-hover-thickness-px: calc(var(--INTERNAL-scrollbar-hover-thickness) * 1px);--_viewport-padding-top: 0;--_viewport-padding-bottom: 0;--_viewport-padding-left: 0;--_viewport-padding-right: 0;--_horizontal-thumb-display: block;--_vertical-thumb-display: block;--_viewport-overflow: auto;--_thumb-x-color: var(--INTERNAL-scrollbar-thumb-color);--_thumb-y-color: var(--INTERNAL-scrollbar-thumb-color);--_track-y-thickness: var(--_scrollbar-thickness-px);--_track-x-thickness: var(--_scrollbar-thickness-px);--_viewport-overscroll-behavior: var(--INTERNAL-scrollbar-overscroll-behavior);--_scrollbar-content-width: fit-content}[_nghost-%COMP%]{--_vertical-top: var(--_scrollbar-offset-px);--_vertical-bottom: var(--_scrollbar-offset-px);--_horizontal-left: var(--_scrollbar-offset-px);--_horizontal-right: var(--_scrollbar-offset-px);--_horizontal-top: initial;--_horizontal-bottom: var(--_scrollbar-offset-px);--_scrollbar-wrapper-x-top: calc(var(--viewport-height) - var(--_scrollbar-thickness));--reached-offset: 1px;--reached-offset-top: var(--reached-offset);--reached-offset-bottom: var(--reached-offset);--reached-offset-start: var(--reached-offset);--reached-offset-end: var(--reached-offset);--dropped-offset: 1px;--dropped-offset-top: var(--dropped-offset);--dropped-offset-bottom: var(--dropped-offset);--dropped-offset-start: var(--dropped-offset);--dropped-offset-end: var(--dropped-offset);--_viewport_scroll-timeline: unset;--_animation-timeline-y: unset;--_scrollbar-y-thumb-transform-to-value: unset;--_scrollbar-x-thumb-transform-to-value: unset;--_scrollbar-thumb-transform-from: unset;--_scrollbar-thumb-transform-to: unset}.ng-scrollbar-external-viewport[_nghost-%COMP%]     .ng-scroll-viewport{min-height:100%;min-width:100%;height:100%;max-height:100%;max-width:100%}.ng-scroll-viewport[_nghost-%COMP%], .ng-scrollbar-external-viewport[_nghost-%COMP%]     .ng-scroll-viewport{position:relative;overflow:var(--_viewport-overflow);scroll-timeline:var(--_viewport_scroll-timeline);box-sizing:border-box!important;-webkit-overflow-scrolling:touch;will-change:scroll-position;-webkit-user-select:var(--_viewport-user-select);user-select:var(--_viewport-user-select);overscroll-behavior:var(--_viewport-overscroll-behavior)}.ng-scroll-viewport[_nghost-%COMP%] > .ng-scroll-content[_ngcontent-%COMP%], .ng-scrollbar-external-viewport[_nghost-%COMP%]     .ng-scroll-viewport>.ng-scroll-content{width:var(--_scrollbar-content-width);z-index:1;min-width:100%;min-height:100%;contain:content;padding:var(--_viewport-padding-top, 0) var(--_viewport-padding-right, 0) var(--_viewport-padding-bottom, 0) var(--_viewport-padding-left, 0)}.ng-scroll-viewport[_nghost-%COMP%], .ng-scrollbar-external-viewport[_nghost-%COMP%]     .ng-scroll-viewport{scrollbar-width:none!important}.ng-scroll-viewport[_nghost-%COMP%]::-webkit-scrollbar, .ng-scrollbar-external-viewport[_nghost-%COMP%]     .ng-scroll-viewport::-webkit-scrollbar{display:none!important}[position=invertX][_nghost-%COMP%], [position=invertAll][_nghost-%COMP%]{--_horizontal-top: var(--_scrollbar-offset-px);--_horizontal-bottom: initial;--_scrollbar-wrapper-x-top: 0}[dir=ltr][_nghost-%COMP%]{--_scrollbar-wrapper-y-right: initial;--_vertical-right: var(--_scrollbar-offset-px);--_vertical-left: initial;--_scrollbar-wrapper-y-left: calc(var(--viewport-width) - var(--_scrollbar-thickness))}[dir=ltr][position=invertY][_nghost-%COMP%], [dir=ltr][position=invertAll][_nghost-%COMP%]{--_vertical-left: var(--_scrollbar-offset-px);--_vertical-right: initial;--_scrollbar-wrapper-y-left: 0}[dir=rtl][_nghost-%COMP%]{--_scrollbar-wrapper-y-left: initial;--_vertical-left: var(--_scrollbar-offset-px);--_vertical-right: initial;--_scrollbar-wrapper-y-right: calc(var(--viewport-width) - var(--_scrollbar-thickness))}[dir=rtl][position=invertY][_nghost-%COMP%], [dir=rtl][position=invertAll][_nghost-%COMP%]{--_vertical-right: var(--_scrollbar-offset-px);--_vertical-left: initial;--_scrollbar-wrapper-y-right: 0}[verticalUsed=true][horizontalUsed=true][_nghost-%COMP%]{--_scrollbar-thickness-margin: calc(var(--INTERNAL-scrollbar-thickness) + var(--INTERNAL-scrollbar-offset) * 3);--_scrollbar-thickness-margin-px: calc(var(--_scrollbar-thickness-margin) * 1px)}[horizontalUsed=true][_nghost-%COMP%]{--_vertical-top: var(--_scrollbar-offset-px);--_vertical-bottom: var(--_scrollbar-thickness-margin-px)}[horizontalUsed=true][position=invertX][_nghost-%COMP%], [horizontalUsed=true][position=invertAll][_nghost-%COMP%]{--_vertical-top: var(--_scrollbar-thickness-margin-px);--_vertical-bottom: var(--_scrollbar-offset-px)}[verticalUsed=true][dir=ltr][_nghost-%COMP%]{--_horizontal-left: var(--_scrollbar-offset-px);--_horizontal-right: var(--_scrollbar-thickness-margin-px)}[verticalUsed=true][dir=rtl][_nghost-%COMP%]{--_horizontal-left: var(--_scrollbar-thickness-margin-px);--_horizontal-right: var(--_scrollbar-offset-px)}[verticalUsed=true][position=invertY][dir=ltr][_nghost-%COMP%], [verticalUsed=true][position=invertAll][dir=ltr][_nghost-%COMP%]{--_horizontal-left: var(--_scrollbar-thickness-margin-px);--_horizontal-right: var(--_scrollbar-offset-px)}[verticalUsed=true][position=invertY][dir=rtl][_nghost-%COMP%], [verticalUsed=true][position=invertAll][dir=rtl][_nghost-%COMP%]{--_horizontal-left: var(--_scrollbar-offset-px);--_horizontal-right: var(--_scrollbar-thickness-margin-px)}[appearance=native][verticalUsed=true][dir=ltr][_nghost-%COMP%]{--_viewport-padding-left: 0;--_viewport-padding-right: calc(var(--_scrollbar-thickness) * 1px)}[appearance=native][verticalUsed=true][dir=rtl][_nghost-%COMP%]{--_viewport-padding-left: calc(var(--_scrollbar-thickness) * 1px);--_viewport-padding-right: 0}[appearance=native][verticalUsed=true][position=invertY][dir=ltr][_nghost-%COMP%], [appearance=native][verticalUsed=true][position=invertAll][dir=ltr][_nghost-%COMP%]{--_viewport-padding-left: calc(var(--_scrollbar-thickness) * 1px);--_viewport-padding-right: 0}[appearance=native][verticalUsed=true][position=invertY][dir=rtl][_nghost-%COMP%], [appearance=native][verticalUsed=true][position=invertAll][dir=rtl][_nghost-%COMP%]{--_viewport-padding-left: 0;--_viewport-padding-right: calc(var(--_scrollbar-thickness) * 1px)}[appearance=native][horizontalUsed=true][_nghost-%COMP%]{--_viewport-padding-top: 0;--_viewport-padding-bottom: calc(var(--_scrollbar-thickness) * 1px)}[appearance=native][horizontalUsed=true][position=invertX][_nghost-%COMP%], [appearance=native][horizontalUsed=true][position=invertAll][_nghost-%COMP%]{--_viewport-padding-top: calc(var(--_scrollbar-thickness) * 1px);--_viewport-padding-bottom: 0}[visibility=hover][_nghost-%COMP%]{--_scrollbar-hover-opacity: 0;--_scrollbar-opacity-transition: opacity var(--INTERNAL-scrollbar-hover-opacity-transition-leave-duration) var(--INTERNAL-scrollbar-hover-opacity-transition-leave-delay)}[visibility=hover][_nghost-%COMP%]:hover, [visibility=hover][_nghost-%COMP%]:active, [visibility=hover][_nghost-%COMP%]:focus{--_scrollbar-hover-opacity: 1;--_scrollbar-opacity-transition: opacity var(--INTERNAL-scrollbar-hover-opacity-transition-enter-duration)}[dir=ltr][_nghost-%COMP%]     .scroll-reached-trigger-element[trigger=start], [dir=ltr][_nghost-%COMP%]     .scroll-dropped-trigger-element[trigger=start]{left:0;right:unset}[dir=ltr][_nghost-%COMP%]     .scroll-reached-trigger-element[trigger=end], [dir=ltr][_nghost-%COMP%]     .scroll-dropped-trigger-element[trigger=end]{right:0;left:unset}[dir=rtl][_nghost-%COMP%]     .scroll-reached-trigger-element[trigger=start], [dir=rtl][_nghost-%COMP%]     .scroll-dropped-trigger-element[trigger=start]{right:0;left:unset}[dir=rtl][_nghost-%COMP%]     .scroll-reached-trigger-element[trigger=end], [dir=rtl][_nghost-%COMP%]     .scroll-dropped-trigger-element[trigger=end]{left:0;right:unset}[_nghost-%COMP%]     .ng-scroll-reached-wrapper, [_nghost-%COMP%]     .ng-scroll-dropped-wrapper, [_nghost-%COMP%]     .scroll-reached-trigger-element, [_nghost-%COMP%]     .scroll-dropped-trigger-element{position:absolute;-webkit-user-select:none;user-select:none;pointer-events:none;z-index:-9999}[_nghost-%COMP%]     .ng-scroll-reached-wrapper, [_nghost-%COMP%]     .ng-scroll-dropped-wrapper{visibility:hidden;inset:0;min-width:calc(var(--viewport-width) * 1px);min-height:calc(var(--viewport-height) * 1px)}[_nghost-%COMP%]     [isHorizontallyScrollable=false] .scroll-reached-trigger-element[trigger=end], [_nghost-%COMP%]     [isHorizontallyScrollable=false] .scroll-dropped-trigger-element[trigger=end]{display:none}[_nghost-%COMP%]     [isVerticallyScrollable=false] .scroll-reached-trigger-element[trigger=bottom], [_nghost-%COMP%]     [isVerticallyScrollable=false] .scroll-dropped-trigger-element[trigger=bottom]{display:none}[_nghost-%COMP%]     .scroll-reached-trigger-element{background:red}[_nghost-%COMP%]     .scroll-reached-trigger-element[trigger=top], [_nghost-%COMP%]     .scroll-reached-trigger-element[trigger=bottom]{left:0;right:0}[_nghost-%COMP%]     .scroll-reached-trigger-element[trigger=start], [_nghost-%COMP%]     .scroll-reached-trigger-element[trigger=end]{top:0;bottom:0}[_nghost-%COMP%]     .scroll-reached-trigger-element[trigger=top]{top:0;height:var(--reached-offset-top)}[_nghost-%COMP%]     .scroll-reached-trigger-element[trigger=bottom]{bottom:0;height:var(--reached-offset-bottom)}[_nghost-%COMP%]     .scroll-reached-trigger-element[trigger=start]{width:var(--reached-offset-start)}[_nghost-%COMP%]     .scroll-reached-trigger-element[trigger=end]{width:var(--reached-offset-end)}[_nghost-%COMP%]   .scroll-dropped-trigger-element[_ngcontent-%COMP%]{background:#00f}[_nghost-%COMP%]   .scroll-dropped-trigger-element[trigger=top][_ngcontent-%COMP%], [_nghost-%COMP%]   .scroll-dropped-trigger-element[trigger=bottom][_ngcontent-%COMP%]{left:0;right:0}[_nghost-%COMP%]   .scroll-dropped-trigger-element[trigger=start][_ngcontent-%COMP%], [_nghost-%COMP%]   .scroll-dropped-trigger-element[trigger=end][_ngcontent-%COMP%]{top:0;bottom:0}[_nghost-%COMP%]   .scroll-dropped-trigger-element[trigger=top][_ngcontent-%COMP%]{top:0;height:var(--dropped-offset-top)}[_nghost-%COMP%]   .scroll-dropped-trigger-element[trigger=bottom][_ngcontent-%COMP%]{bottom:0;height:var(--dropped-offset-bottom)}[_nghost-%COMP%]   .scroll-dropped-trigger-element[trigger=start][_ngcontent-%COMP%]{width:var(--dropped-offset-start)}[_nghost-%COMP%]   .scroll-dropped-trigger-element[trigger=end][_ngcontent-%COMP%]{width:var(--dropped-offset-end)}[verticalUsed=true][_nghost-%COMP%]{--_timeline-scope: --scrollerY;--_animation-timeline-y: --scrollerY;--_viewport_scroll-timeline: --scrollerY y;--_scrollbar-y-thumb-transform-to-value: calc(var(--track-y-length) - var(--thumb-y-length))}[horizontalUsed=true][_nghost-%COMP%]{--_timeline-scope: --scrollerX;--_animation-timeline-x: --scrollerX;--_viewport_scroll-timeline: --scrollerX x;--_scrollbar-x-thumb-transform-to-value: calc(var(--track-x-length) - var(--thumb-x-length))}[verticalUsed=true][horizontalUsed=true][_nghost-%COMP%]{--_timeline-scope: --scrollerX, --scrollerY;--_viewport_scroll-timeline: --scrollerX x, --scrollerY y}[orientation=vertical][_nghost-%COMP%]{--_viewport-overflow: hidden auto;--_scrollbar-content-width: unset}[orientation=horizontal][_nghost-%COMP%]{--_viewport-overflow: auto hidden}[disableInteraction=true][_nghost-%COMP%]{--_scrollbar-pointer-events: none}[isVerticallyScrollable=false][_nghost-%COMP%]{--_vertical-thumb-display: none}[isHorizontallyScrollable=false][_nghost-%COMP%]{--_horizontal-thumb-display: none}[dragging=x][_nghost-%COMP%], [dragging=y][_nghost-%COMP%]{--_viewport-user-select: none}[horizontalUsed=true][_nghost-%COMP%]{--thumb-x-length: max(calc(var(--viewport-width) * var(--track-x-length) / var(--content-width)), var(--INTERNAL-scrollbar-thumb-min-size))}[verticalUsed=true][_nghost-%COMP%]{--thumb-y-length: max(calc(var(--viewport-height) * var(--track-y-length) / var(--content-height)), var(--INTERNAL-scrollbar-thumb-min-size))}[dragging=x][_nghost-%COMP%]{--_track-x-thickness: calc(var(--INTERNAL-scrollbar-hover-thickness) * 1px);--_thumb-x-color: var(var(--INTERNAL-scrollbar-thumb-min-size))}[dragging=y][_nghost-%COMP%]{--_track-y-thickness: calc(var(--INTERNAL-scrollbar-hover-thickness) * 1px);--_thumb-y-color: var(var(--INTERNAL-scrollbar-thumb-min-size))}[mobile=true][_nghost-%COMP%]{--_viewport-overscroll-behavior: var(--INTERNAL-scrollbar-mobile-overscroll-behavior)}"],changeDetection:0}),t})(),CRt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})();function kRt(t){return[{provide:IG,useValue:t}]}function ARt(t){return[{provide:OG,useValue:t}]}var U1=document.currentScript,TL;function SRt(){return TL??=ERt(),TL}function DG(){let t=SRt(),e=t.lastIndexOf("/");return t.slice(0,e+1)}function ERt(){return U1&&"src"in U1?U1.src:TRt()??""}function TRt(){try{throw new Error}catch(t){let{stack:e}=t;return e?.match(/(https?:\/\/.+):\d+:\d+/)?.[1]}}var IRt=new ht("InitialAppHref",{providedIn:"root",factory:()=>DG()}),LG=(()=>{let t=class{constructor(){this.initialAppHref=K(IRt),this.appHrefSignal=un(this.initialAppHref),this.appHref=this.appHrefSignal.asReadonly()}setAppHref(i){this.appHrefSignal.set(i)}resetAppHref(){this.setAppHref(this.initialAppHref)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ORt(t){let e=null,r=vn(()=>t());return rr(()=>{e=t();let i=r;return r=e,i})}var PRt=(()=>{let t=class{constructor(){this.appHref=K(LG).appHref,this.prevHref=ORt(this.appHref),this.cdr=K(di),this.markChangeRef=Ws(()=>{this.prevHref()!==null&&this.cdr.markForCheck()})}transform(i,n){let s=`${this.appHref()}${i}`;return n==="css"?`url("${s}")`:s}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275pipe=_F({name:"assetUrl",type:t,pure:!1,standalone:!0}),t})(),MRt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-scrollbar-styles"]],standalone:!0,features:[Kt],decls:0,vars:0,template:function(r,i){},styles:[`:root{--scrollbar-thumb-color: rgb(from var(--sys-primary) r g b / .72);--scrollbar-border-radius: 1rem;--scrollbar-thickness: 8}
`],encapsulation:2,changeDetection:0}),t})(),RRt="assets/polyfills/scroll-timeline-polyfill.js";function BRt(t){let e=DG()+(t?.polyfillUrl??RRt);return An([hl(MRt),ARt(e),kRt(x({visibility:"hover",appearance:"compact",trackClass:"hra-scrollbar-track",thumbClass:"hra-scrollbar-thumb"},t))])}var DRt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[CRt]}),t})();function LRt(t,e){t&1&&Ot(0,"div",2)}var NRt=new ht("MAT_PROGRESS_BAR_DEFAULT_OPTIONS"),FRt=(()=>{let t=class{constructor(i,n,s,a,o){this._elementRef=i,this._ngZone=n,this._changeDetectorRef=s,this._animationMode=a,this._isNoopAnimation=!1,this._defaultColor="primary",this._value=0,this._bufferValue=0,this.animationEnd=new It,this._mode="determinate",this._transitionendHandler=l=>{this.animationEnd.observers.length===0||!l.target||!l.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation=a==="NoopAnimations",o&&(o.color&&(this.color=this._defaultColor=o.color),this.mode=o.mode||this.mode)}get color(){return this._color||this._defaultColor}set color(i){this._color=i}get value(){return this._value}set value(i){this._value=IL(i||0),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(i){this._bufferValue=IL(i||0),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(i){this._mode=i,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(Zt),R(di),R(kr,8),R(NRt,8))},t.\u0275cmp=Pt({type:t,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(r,i){r&2&&(ke("aria-valuenow",i._isIndeterminate()?null:i.value)("mode",i.mode),Ai("mat-"+i.color),ee("_mat-animation-noopable",i._isNoopAnimation)("mdc-linear-progress--animation-ready",!i._isNoopAnimation)("mdc-linear-progress--indeterminate",i._isIndeterminate()))},inputs:{color:"color",value:[2,"value","value",or],bufferValue:[2,"bufferValue","bufferValue",or],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],standalone:!0,features:[ji,Kt],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(r,i){r&1&&(N(0,"div",0),Ot(1,"div",1),Wt(2,LRt,1,0,"div",2),F(),N(3,"div",3),Ot(4,"span",4),F(),N(5,"div",5),Ot(6,"span",4),F()),r&2&&($(),Ya("flex-basis",i._getBufferBarFlexBasis()),$(),ae(i.mode==="buffer"?2:-1),$(),Ya("transform",i._getPrimaryBarTransform()))},styles:[`.mat-mdc-progress-bar{display:block;text-align:start}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:max(var(--mdc-linear-progress-track-height),var(--mdc-linear-progress-active-indicator-height))}.cdk-high-contrast-active .mdc-linear-progress{outline-color:CanvasText}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}[dir=rtl] .mdc-linear-progress__bar{right:0;transform-origin:center right}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid;border-color:var(--mdc-linear-progress-active-indicator-color, var(--mat-app-primary));border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden;height:var(--mdc-linear-progress-track-height);border-radius:var(--mdc-linear-progress-track-shape, var(--mat-app-corner-none))}.mdc-linear-progress__buffer-dots{-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear;background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.cdk-high-contrast-active .mdc-linear-progress__buffer-dots{background-color:ButtonBorder}[dir=rtl] .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1);background-color:var(--mdc-linear-progress-track-color, var(--mat-app-surface-variant))}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(-83.67142%)}100%{transform:translateX(-200.611057%)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(-37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(-84.386165%)}100%{transform:translateX(-160.277782%)}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}`],encapsulation:2,changeDetection:0}),t})();function IL(t,e=0,r=100){return Math.max(e,Math.min(r,t))}var zRt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ai]}),t})(),VRt=(()=>{let t=class{constructor(){this.value=je.required()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-step-indicator"]],inputs:{value:[1,"value"]},standalone:!0,features:[Kt],decls:2,vars:1,consts:[[1,"step-number"]],template:function(r,i){r&1&&(N(0,"span",0),ut(1),F()),r&2&&($(),Oi(i.value()))},dependencies:[ti],styles:["[_nghost-%COMP%]   .step-number[_ngcontent-%COMP%]{font:var(--sys-label-large);letter-spacing:var(--sys-label-large-tracking);background-color:var(--sys-inverse-surface);color:var(--sys-on-primary);display:flex;width:2rem;height:2rem;line-height:2rem;border-radius:50%;justify-content:center;align-items:center}"],changeDetection:0}),t})(),jRt=["*"],URt=[[["hra-workflow-card-actions"]],[["hra-workflow-card-extra"]],"*"],HRt=["hra-workflow-card-actions","hra-workflow-card-extra","*"];function GRt(t,e){if(t&1&&Ot(0,"hra-step-indicator",1),t&2){Rt();let r=rz(1);mt("value",r)}}function WRt(t,e){if(t&1&&Ot(0,"mat-progress-bar",4),t&2){Rt();let r=rz(10);mt("value",100*r)}}var ZRt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-workflow-card-extra"]],standalone:!0,features:[Kt],ngContentSelectors:jRt,decls:1,vars:0,template:function(r,i){r&1&&(Mi(),pe(0))},styles:["[_nghost-%COMP%]{display:flex;gap:.75rem}"],changeDetection:0}),t})(),NG=(()=>{let t=class{constructor(){this.title=je.required(),this.step=je(void 0,{transform:or}),this.progress=je(void 0)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-workflow-card"]],inputs:{title:[1,"title"],step:[1,"step"],progress:[1,"progress"]},standalone:!0,features:[Kt],ngContentSelectors:HRt,decls:12,vars:5,consts:[[1,"header"],[3,"value"],[1,"filler"],[1,"content"],["mode","determinate",1,"progress",3,"value"]],template:function(r,i){if(r&1&&(Mi(URt),N(0,"h2",0),PC(1),Wt(2,GRt,1,1,"hra-step-indicator",1),N(3,"span"),ut(4),F(),pe(5),Ot(6,"div",2),pe(7,1),F(),N(8,"div",3),pe(9,2),F(),PC(10),Wt(11,WRt,1,1,"mat-progress-bar",4)),r&2){$();let n=T2(i.step());$(),ae(n!==void 0?2:-1),$(2),Oi(i.title()),$(6);let s=T2(i.progress());$(),ae(s!==void 0?11:-1)}},dependencies:[zRt,FRt,VRt],styles:["[_nghost-%COMP%]{display:block;position:relative;padding:2rem;border-radius:1rem;overflow:hidden;background-color:var(--sys-surface-container-low);box-shadow:0 .3125rem 1rem rgb(from var(--sys-shadow) r g b/.24)}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin:0 0 2rem;font:var(--sys-title-large);letter-spacing:var(--sys-title-large-tracking)}[_nghost-%COMP%]   .progress[_ngcontent-%COMP%]{position:absolute;inset:auto 0 0;--mdc-linear-progress-track-height: .25rem;--mdc-linear-progress-active-indicator-height: .25rem;--mdc-linear-progress-active-indicator-color: var(--sys-inverse-surface);--mdc-linear-progress-track-color: var(--sys-surface-container-high)}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),t})(),$Rt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[NG]}),t})(),XRt={small:1.5,large:2.5},qRt={small:1.25,large:1.5},lg=(()=>{let t=class{constructor(){this.size=je.required({alias:"hraIconButtonSize"}),this.buttonSize=rr(()=>XRt[this.size()]),this.iconSize=rr(()=>qRt[this.size()])}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","hraIconButtonSize",""]],hostVars:4,hostBindings:function(r,i){r&2&&Ya("--mdc-icon-button-state-layer-size",i.buttonSize(),"rem")("--mdc-icon-button-icon-size",i.iconSize(),"rem")},inputs:{size:[1,"hraIconButtonSize","size"]},standalone:!0}),t})(),KRt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-icon-button-styles"]],standalone:!0,features:[Kt],decls:0,vars:0,template:function(r,i){},styles:[`button[mat-icon-button]{--mat-icon-button-hover-state-layer-opacity: .08;--mat-icon-button-pressed-state-layer-opacity: .16;--mat-icon-button-state-layer-color: var(--sys-secondary);--mat-icon-button-focus-state-layer-opacity: 0}button[mat-icon-button]:focus-visible{outline:2px solid var(--sys-tertiary)}button[mat-icon-button] mat-icon{height:var(--mdc-icon-button-icon-size);width:var(--mdc-icon-button-icon-size);font-size:var(--mdc-icon-button-icon-size)}
`],encapsulation:2,changeDetection:0}),t})();function YRt(){return An([hl(KRt)])}var JRt=(()=>{let t=class{constructor(){this.fileName=je.required(),this.cancelLoad=su()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-delete-file-button"]],inputs:{fileName:[1,"fileName"]},outputs:{cancelLoad:"cancelLoad"},standalone:!0,features:[Kt],decls:5,vars:1,consts:[[1,"file-name"],["mat-icon-button","","hraIconButtonSize","large",3,"click"]],template:function(r,i){r&1&&(N(0,"span",0),ut(1),F(),N(2,"button",1),yt("click",function(){return i.cancelLoad.emit()}),N(3,"mat-icon"),ut(4,"delete"),F()()),r&2&&($(),Oi(i.fileName()))},dependencies:[ti,v0,$n,Hi,gr,lg],styles:["[_nghost-%COMP%]{width:fit-content;display:flex;align-items:center;padding-left:1rem;background:var(--sys-surface-container);gap:.5rem;border-radius:2rem;font:var(--sys-label-large)}[_nghost-%COMP%]   .file-name[_ngcontent-%COMP%]{color:var(--sys-primary)}"],changeDetection:0}),t})(),QRt=["*"];function tBt(t,e){if(t&1){let r=Qe();N(0,"hra-delete-file-button",2),yt("cancelLoad",function(){Lt(r);let i=Rt();return Nt(i.cancelLoad())}),F()}if(t&2){let r=Rt();mt("fileName",r.file.name)}}function eBt(t,e){if(t&1){let r=Qe();N(0,"button",3),yt("click",function(){Lt(r);let i=fi(3);return Nt(i.click())}),pe(1),F(),N(2,"input",4,0),yt("change",function(){Lt(r);let i=fi(3),n=Rt();return Nt(n.load(i))}),F()}if(t&2){let r=Rt();$(2),ke("accept",r.accept())}}var iBt=(()=>{let t=class{constructor(){this.accept=je.required(),this.loader=je.required(),this.options=je.required(),this.progress=su(),this.loadStarted=su(),this.loadCancelled=su(),this.loadErrored=su(),this.loadCompleted=su(),this.injector=K(Re)}reset(){this.subscription?.unsubscribe(),this.file=void 0,this.subscription=void 0}load(i){if(i.files===null)return;this.subscription&&this.cancelLoad();let{injector:n,loader:s,options:a}=this,o=this.file=i.files[0];if(!this.hasAcceptableFileType(o)){this.cancelLoad({type:"type-error",expected:this.accept(),received:this.getFileSuffix(o).slice(1)});return}let l=n.get(s()).load(o,a()).pipe(BY((c,h)=>this.handleLoadEvent(c,h),[]));this.subscription=l.subscribe({next:c=>this.loadCompleted.emit(c),error:c=>this.cancelLoad({type:"parse-error",cause:c})})}cancelLoad(i){this.reset(),i?this.loadErrored.emit(i):this.loadCancelled.emit()}handleLoadEvent(i,n){return n.type==="data"?i.push(n.data):n.type==="progress"&&n.total&&this.progress.emit(n.loaded/n.total),i}hasAcceptableFileType(i){let n=this.accept().split(",").map(s=>s.trim().toLowerCase());return n.includes(i.type.toLowerCase())||n.includes(this.getFileSuffix(i))}getFileSuffix(i){return i.name.match(/\.[^.]+$/i)?.[0].toLowerCase()??""}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["ccf-file-upload"]],inputs:{accept:[1,"accept"],loader:[1,"loader"],options:[1,"options"]},outputs:{progress:"progress",loadStarted:"loadStarted",loadCancelled:"loadCancelled",loadErrored:"loadErrored",loadCompleted:"loadCompleted"},standalone:!0,features:[Kt],ngContentSelectors:QRt,decls:2,vars:1,consts:[["fileInput",""],[3,"fileName"],[3,"cancelLoad","fileName"],["mat-flat-button","","type","button","hraPrimaryButton","","hraButtonSize","large",1,"upload",3,"click"],["type","file","name","fileInput",2,"display","none",3,"change"]],template:function(r,i){r&1&&(Mi(),Wt(0,tBt,1,1,"hra-delete-file-button",1)(1,eBt,4,1)),r&2&&ae(i.file?0:1)},dependencies:[Hi,Vr,ba,w7,b0,JRt],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),t})(),z=function(t){return t.SEPARATOR="separator",t.PERCENT="percent",t.IP="IP",t.CPF_CNPJ="CPF_CNPJ",t.MONTH="M",t.MONTHS="M0",t.MINUTE="m",t.HOUR="h",t.HOURS="H",t.MINUTES="m0",t.HOURS_HOUR="Hh",t.SECONDS="s0",t.HOURS_MINUTES_SECONDS="Hh:m0:s0",t.EMAIL_MASK="A*@A*.A*",t.HOURS_MINUTES="Hh:m0",t.MINUTES_SECONDS="m0:s0",t.DAYS_MONTHS_YEARS="d0/M0/0000",t.DAYS_MONTHS="d0/M0",t.DAYS="d0",t.DAY="d",t.SECOND="s",t.LETTER_S="S",t.DOT=".",t.COMMA=",",t.CURLY_BRACKETS_LEFT="{",t.CURLY_BRACKETS_RIGHT="}",t.MINUS="-",t.OR="||",t.HASH="#",t.EMPTY_STRING="",t.SYMBOL_STAR="*",t.SYMBOL_QUESTION="?",t.SLASH="/",t.WHITE_SPACE=" ",t.NUMBER_ZERO="0",t.NUMBER_NINE="9",t.BACKSPACE="Backspace",t.DELETE="Delete",t.ARROW_LEFT="ArrowLeft",t.ARROW_UP="ArrowUp",t.DOUBLE_ZERO="00",t}(z||{}),S0=new ht("ngx-mask config"),FG=new ht("new ngx-mask config"),zG=new ht("initial ngx-mask config"),rBt={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:null,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,apm:!1,leadZero:!1,keepCharacterPositions:!1,triggerOnMaskChange:!1,inputTransformFn:t=>t,outputTransformFn:t=>t,maskFilled:new It,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},nBt=[z.HOURS_MINUTES_SECONDS,z.HOURS_MINUTES,z.MINUTES_SECONDS],sBt=[z.PERCENT,z.HOURS_HOUR,z.SECONDS,z.MINUTES,z.SEPARATOR,z.DAYS_MONTHS_YEARS,z.DAYS_MONTHS,z.DAYS,z.MONTHS],aBt=(()=>{class t{_config=K(S0);dropSpecialCharacters=this._config.dropSpecialCharacters;hiddenInput=this._config.hiddenInput;showTemplate;clearIfNotMatch=this._config.clearIfNotMatch;specialCharacters=this._config.specialCharacters;patterns=this._config.patterns;prefix=this._config.prefix;suffix=this._config.suffix;thousandSeparator=this._config.thousandSeparator;decimalMarker=this._config.decimalMarker;customPattern;showMaskTyped=this._config.showMaskTyped;placeHolderCharacter=this._config.placeHolderCharacter;validation=this._config.validation;separatorLimit=this._config.separatorLimit;allowNegativeNumbers=this._config.allowNegativeNumbers;leadZeroDateTime=this._config.leadZeroDateTime;leadZero=this._config.leadZero;apm=this._config.apm;inputTransformFn=this._config.inputTransformFn;outputTransformFn=this._config.outputTransformFn;keepCharacterPositions=this._config.keepCharacterPositions;_shift=new Set;plusOnePosition=!1;maskExpression="";actualValue="";showKeepCharacterExp="";shownMaskExpression="";deletedSpecialCharacter=!1;ipError;cpfCnpjError;applyMaskWithPattern(r,i){let[n,s]=i;return this.customPattern=s,this.applyMask(r,n)}applyMask(r,i,n=0,s=!1,a=!1,o=()=>{}){if(!i||typeof r!="string")return z.EMPTY_STRING;let l=0,c="",h=!1,p=!1,m=1,f=!1,g=r,_=n;g.slice(0,this.prefix.length)===this.prefix&&(g=g.slice(this.prefix.length,g.length)),this.suffix&&g.length>0&&(g=this.checkAndRemoveSuffix(g)),g==="("&&this.prefix&&(g="");let w=g.toString().split(z.EMPTY_STRING);if(this.allowNegativeNumbers&&g.slice(l,l+1)===z.MINUS&&(c+=g.slice(l,l+1)),i===z.IP){let M=g.split(z.DOT);this.ipError=this._validIP(M),i="099.099.099.099"}let S=[];for(let M=0;M<g.length;M++)g[M]?.match("\\d")&&S.push(g[M]??z.EMPTY_STRING);if(i===z.CPF_CNPJ&&(this.cpfCnpjError=S.length!==11&&S.length!==14,S.length>11?i="00.000.000/0000-00":i="000.000.000-00"),i.startsWith(z.PERCENT)){if(g.match("[a-z]|[A-Z]")||g.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)&&!a){g=this._stripToDecimal(g);let it=this.getPrecision(i);g=this.checkInputPrecision(g,it,this.decimalMarker)}let M=typeof this.decimalMarker=="string"?this.decimalMarker:z.DOT;if(g.indexOf(M)>0&&!this.percentage(g.substring(0,g.indexOf(M)))){let it=g.substring(0,g.indexOf(M)-1);this.allowNegativeNumbers&&g.slice(l,l+1)===z.MINUS&&!a&&(it=g.substring(0,g.indexOf(M))),g=`${it}${g.substring(g.indexOf(M),g.length)}`}let E="";this.allowNegativeNumbers&&g.slice(l,l+1)===z.MINUS?E=`${z.MINUS}${g.slice(l+1,l+g.length)}`:E=g,this.percentage(E)?c=this._splitPercentZero(g):c=this._splitPercentZero(g.substring(0,g.length-1))}else if(i.startsWith(z.SEPARATOR)){(g.match("[w\u0430-\u044F\u0410-\u042F]")||g.match("[\u0401\u0451\u0410-\u044F]")||g.match("[a-z]|[A-Z]")||g.match(/[-@#!$%\\^&*()_£¬'+|~=`{}\]:";<>.?/]/)||g.match("[^A-Za-z0-9,]"))&&(g=this._stripToDecimal(g));let M=this.getPrecision(i),E=Array.isArray(this.decimalMarker)?this.thousandSeparator===z.DOT?z.COMMA:z.DOT:this.decimalMarker;if(M===0?g=this.allowNegativeNumbers?g.length>2&&g[0]===z.MINUS&&g[1]===z.NUMBER_ZERO&&g[2]!==this.thousandSeparator&&g[2]!==z.COMMA&&g[2]!==z.DOT?"-"+g.slice(2,g.length):g[0]===z.NUMBER_ZERO&&g.length>1&&g[1]!==this.thousandSeparator&&g[1]!==z.COMMA&&g[1]!==z.DOT?g.slice(1,g.length):g:g.length>1&&g[0]===z.NUMBER_ZERO&&g[1]!==this.thousandSeparator&&g[1]!==z.COMMA&&g[1]!==z.DOT?g.slice(1,g.length):g:(g[0]===E&&g.length>1&&(g=z.NUMBER_ZERO+g.slice(0,g.length+1),this.plusOnePosition=!0),g[0]===z.NUMBER_ZERO&&g[1]!==E&&g[1]!==this.thousandSeparator&&(g=g.length>1?g.slice(0,1)+E+g.slice(1,g.length+1):g,this.plusOnePosition=!0),this.allowNegativeNumbers&&g[0]===z.MINUS&&(g[1]===E||g[1]===z.NUMBER_ZERO)&&(g=g[1]===E&&g.length>2?g.slice(0,1)+z.NUMBER_ZERO+g.slice(1,g.length):g[1]===z.NUMBER_ZERO&&g.length>2&&g[2]!==E?g.slice(0,2)+E+g.slice(2,g.length):g,this.plusOnePosition=!0)),a){let ot=g.slice(this._findFirstNonZeroDigitIndex(g),g.length),xt=g[_]===z.NUMBER_ZERO||g[_]===E,Z=g[0]===z.NUMBER_ZERO,et=g[0]===z.MINUS,tt=g[0]===this.thousandSeparator,ct=g[1]===E,re=g[1]===z.NUMBER_ZERO,me=g[2]===E;Z&&ct&&xt&&_<2&&(g=ot),et&&re&&me&&xt&&_<3&&(g=z.MINUS+ot),ot!==z.MINUS&&(_===0&&(Z||tt)||this.allowNegativeNumbers&&_===1&&et&&!re)&&(g=et?z.MINUS+ot:ot)}let it=this._charToRegExpExpression(this.thousandSeparator),X='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(it,"");if(Array.isArray(this.decimalMarker))for(let ot of this.decimalMarker)X=X.replace(this._charToRegExpExpression(ot),z.EMPTY_STRING);else X=X.replace(this._charToRegExpExpression(this.decimalMarker),"");let W=new RegExp("["+X+"]");g.match(W)&&(g=g.substring(0,g.length-1)),g=this.checkInputPrecision(g,M,this.decimalMarker);let J=g.replace(new RegExp(it,"g"),"");c=this._formatWithSeparators(J,this.thousandSeparator,this.decimalMarker,M);let lt=c.indexOf(z.COMMA)-g.indexOf(z.COMMA),Y=c.length-g.length,nt=a&&c.length<r.length&&this.separatorLimit;if((c[_-1]===this.thousandSeparator||c[_-this.prefix.length])&&this.prefix&&a)_=_-1;else if(Y>0&&c[_]!==this.thousandSeparator||nt){p=!0;let ot=0;do this._shift.add(_+ot),ot++;while(ot<Y)}else c[_-1]===this.thousandSeparator||Y===-4||Y===-3||c[_]===this.thousandSeparator?(this._shift.clear(),this._shift.add(_-1)):lt!==0&&_>0&&!(c.indexOf(z.COMMA)>=_&&_>3)||!(c.indexOf(z.DOT)>=_&&_>3)&&Y<=0?(this._shift.clear(),p=!0,m=Y,_+=Y,this._shift.add(_)):this._shift.clear()}else for(let M=0,E=w[0];M<w.length&&l!==i.length;M++,E=w[M]??z.EMPTY_STRING){let it=z.SYMBOL_STAR in this.patterns;if(this._checkSymbolMask(E,i[l]??z.EMPTY_STRING)&&i[l+1]===z.SYMBOL_QUESTION)c+=E,l+=2;else if(i[l+1]===z.SYMBOL_STAR&&h&&this._checkSymbolMask(E,i[l+2]??z.EMPTY_STRING))c+=E,l+=3,h=!1;else if(this._checkSymbolMask(E,i[l]??z.EMPTY_STRING)&&i[l+1]===z.SYMBOL_STAR&&!it)c+=E,h=!0;else if(i[l+1]===z.SYMBOL_QUESTION&&this._checkSymbolMask(E,i[l+2]??z.EMPTY_STRING))c+=E,l+=3;else if(this._checkSymbolMask(E,i[l]??z.EMPTY_STRING)){if(i[l]===z.HOURS&&(this.apm?Number(E)>9:Number(E)>2)){_=this.leadZeroDateTime?_:_+1,l+=1,this._shiftStep(i,l,w.length),M--,this.leadZeroDateTime&&(c+="0");continue}if(i[l]===z.HOUR&&(this.apm?c.length===1&&Number(c)>1||c==="1"&&Number(E)>2||g.slice(l-1,l).length===1&&Number(g.slice(l-1,l))>2||g.slice(l-1,l)==="1"&&Number(E)>2:c==="2"&&Number(E)>3||(c.slice(l-2,l)==="2"||c.slice(l-3,l)==="2"||c.slice(l-4,l)==="2"||c.slice(l-1,l)==="2")&&Number(E)>3&&l>10)){_=_+1,l+=1,M--;continue}if((i[l]===z.MINUTE||i[l]===z.SECOND)&&Number(E)>5){_=this.leadZeroDateTime?_:_+1,l+=1,this._shiftStep(i,l,w.length),M--,this.leadZeroDateTime&&(c+="0");continue}let X=31,W=g[l],J=g[l+1],lt=g[l+2],Y=g[l-1],nt=g[l-2],ot=g.slice(l-3,l-1),xt=g.slice(l-1,l+1),Z=g.slice(l,l+2),et=g.slice(l-2,l);if(i[l]===z.DAY){let tt=i.slice(0,2)===z.MONTHS,ct=i.slice(0,2)===z.MONTHS&&this.specialCharacters.includes(nt);if(Number(E)>3&&this.leadZeroDateTime||!tt&&(Number(Z)>X||Number(xt)>X||this.specialCharacters.includes(J))||(ct?Number(xt)>X||!this.specialCharacters.includes(W)&&this.specialCharacters.includes(lt)||this.specialCharacters.includes(W):Number(Z)>X||this.specialCharacters.includes(J)&&!a)){_=this.leadZeroDateTime?_:_+1,l+=1,this._shiftStep(i,l,w.length),M--,this.leadZeroDateTime&&(c+="0");continue}}if(i[l]===z.MONTH){let tt=l===0&&(Number(E)>2||Number(Z)>12||this.specialCharacters.includes(J)&&!a),ct=i.slice(l+2,l+3),re=ot.includes(ct)&&i.includes("d0")&&(this.specialCharacters.includes(nt)&&Number(xt)>12&&!this.specialCharacters.includes(W)||this.specialCharacters.includes(W)),me=Number(ot)<=X&&!this.specialCharacters.includes(ot)&&this.specialCharacters.includes(Y)&&(Number(Z)>12||this.specialCharacters.includes(J)),Ze=Number(Z)>12&&l===5||this.specialCharacters.includes(J)&&l===5,li=Number(ot)>X&&!this.specialCharacters.includes(ot)&&!this.specialCharacters.includes(et)&&Number(et)>12&&i.includes("d0"),ci=Number(ot)<=X&&!this.specialCharacters.includes(ot)&&!this.specialCharacters.includes(Y)&&Number(xt)>12;if(Number(E)>1&&this.leadZeroDateTime||tt||re||ci||li||me||Ze&&!this.leadZeroDateTime){_=this.leadZeroDateTime?_:_+1,l+=1,this._shiftStep(i,l,w.length),M--,this.leadZeroDateTime&&(c+="0");continue}}c+=E,l++}else this.specialCharacters.includes(E)&&i[l]===E?(c+=E,l++):this.specialCharacters.indexOf(i[l]??z.EMPTY_STRING)!==-1?(c+=i[l],l++,this._shiftStep(i,l,w.length),M--):i[l]===z.NUMBER_NINE&&this.showMaskTyped?this._shiftStep(i,l,w.length):this.patterns[i[l]??z.EMPTY_STRING]&&this.patterns[i[l]??z.EMPTY_STRING]?.optional?(w[l]&&i!=="099.099.099.099"&&i!=="000.000.000-00"&&i!=="00.000.000/0000-00"&&!i.match(/^9+\.0+$/)&&!this.patterns[i[l]??z.EMPTY_STRING]?.optional&&(c+=w[l]),i.includes(z.NUMBER_NINE+z.SYMBOL_STAR)&&i.includes(z.NUMBER_ZERO+z.SYMBOL_STAR)&&l++,l++,M--):this.maskExpression[l+1]===z.SYMBOL_STAR&&this._findSpecialChar(this.maskExpression[l+2]??z.EMPTY_STRING)&&this._findSpecialChar(E)===this.maskExpression[l+2]&&h||this.maskExpression[l+1]===z.SYMBOL_QUESTION&&this._findSpecialChar(this.maskExpression[l+2]??z.EMPTY_STRING)&&this._findSpecialChar(E)===this.maskExpression[l+2]&&h?(l+=3,c+=E):this.showMaskTyped&&this.specialCharacters.indexOf(E)<0&&E!==this.placeHolderCharacter&&this.placeHolderCharacter.length===1&&(f=!0)}c.length+1===i.length&&this.specialCharacters.indexOf(i[i.length-1]??z.EMPTY_STRING)!==-1&&(c+=i[i.length-1]);let C=_+1;for(;this._shift.has(C);)m++,C++;let b=s&&!i.startsWith(z.SEPARATOR)?l:this._shift.has(_)?m:0;f&&b--,o(b,p),m<0&&this._shift.clear();let P=!1;a&&(P=w.every(M=>this.specialCharacters.includes(M)));let L=`${this.prefix}${P?z.EMPTY_STRING:c}${this.showMaskTyped?"":this.suffix}`;c.length===0&&(L=this.dropSpecialCharacters?`${c}`:`${this.prefix}${c}`);let H=g.length===1&&this.specialCharacters.includes(i[0])&&g!==i[0];if(!this._checkSymbolMask(g,i[1])&&H)return"";if(c.includes(z.MINUS)&&this.prefix&&this.allowNegativeNumbers){if(a&&c===z.MINUS)return"";L=`${z.MINUS}${this.prefix}${c.split(z.MINUS).join(z.EMPTY_STRING)}${this.suffix}`}return L}_findDropSpecialChar(r){return Array.isArray(this.dropSpecialCharacters)?this.dropSpecialCharacters.find(i=>i===r):this._findSpecialChar(r)}_findSpecialChar(r){return this.specialCharacters.find(i=>i===r)}_checkSymbolMask(r,i){return this.patterns=this.customPattern?this.customPattern:this.patterns,(this.patterns[i]?.pattern&&this.patterns[i]?.pattern.test(r))??!1}_formatWithSeparators=(r,i,n,s)=>{let a=[],o="";if(Array.isArray(n)){let m=new RegExp(n.map(f=>"[\\^$.|?*+()".indexOf(f)>=0?`\\${f}`:f).join("|"));a=r.split(m),o=r.match(m)?.[0]??z.EMPTY_STRING}else a=r.split(n),o=n;let l=a.length>1?`${o}${a[1]}`:z.EMPTY_STRING,c=a[0]??z.EMPTY_STRING,h=this.separatorLimit.replace(/\s/g,z.EMPTY_STRING);h&&+h&&(c[0]===z.MINUS?c=`-${c.slice(1,c.length).slice(0,h.length)}`:c=c.slice(0,h.length));let p=/(\d+)(\d{3})/;for(;i&&p.test(c);)c=c.replace(p,"$1"+i+"$2");return typeof s>"u"?c+l:s===0?c:c+l.substring(0,s+1)};percentage=r=>{let i=r.replace(",","."),n=Number(this.allowNegativeNumbers&&r.includes(z.MINUS)?i.slice(1,r.length):i);return!isNaN(n)&&n>=0&&n<=100};getPrecision=r=>{let i=r.split(z.DOT);return i.length>1?Number(i[i.length-1]):1/0};checkAndRemoveSuffix=r=>{for(let i=this.suffix?.length-1;i>=0;i--){let n=this.suffix.substring(i,this.suffix?.length);if(r.includes(n)&&i!==this.suffix?.length-1&&(i-1<0||!r.includes(this.suffix.substring(i-1,this.suffix?.length))))return r.replace(n,z.EMPTY_STRING)}return r};checkInputPrecision=(r,i,n)=>{let s=r,a=n;if(i<1/0){Array.isArray(a)&&(a=a.find(p=>p!==this.thousandSeparator)||a[0]);let o=new RegExp(this._charToRegExpExpression(a)+`\\d{${i}}.*$`),l=s.match(o),c=(l&&l[0]?.length)??0;if(c-1>i){let h=c-1-i;s=s.substring(0,s.length-h)}i===0&&this._compareOrIncludes(s[s.length-1],a,this.thousandSeparator)&&(s=s.substring(0,s.length-1))}return s};_stripToDecimal(r){return r.split(z.EMPTY_STRING).filter((i,n)=>{let s=typeof this.decimalMarker=="string"?i===this.decimalMarker:this.decimalMarker.includes(i);return i.match("^-?\\d")||i===this.thousandSeparator||s||i===z.MINUS&&n===0&&this.allowNegativeNumbers}).join(z.EMPTY_STRING)}_charToRegExpExpression(r){return r&&(r===" "?"\\s":"[\\^$.|?*+()".indexOf(r)>=0?`\\${r}`:r)}_shiftStep(r,i,n){let s=/[*?]/g.test(r.slice(0,i))?n:i;this._shift.add(s+this.prefix.length||0)}_compareOrIncludes(r,i,n){return Array.isArray(i)?i.filter(s=>s!==n).includes(r):r===i}_validIP(r){return!(r.length===4&&!r.some((i,n)=>r.length!==n+1?i===z.EMPTY_STRING||Number(i)>255:i===z.EMPTY_STRING||Number(i.substring(0,3))>255))}_splitPercentZero(r){if(r===z.MINUS&&this.allowNegativeNumbers)return r;let i=typeof this.decimalMarker=="string"?r.indexOf(this.decimalMarker):r.indexOf(z.DOT),n=this.allowNegativeNumbers&&r.includes(z.MINUS)?"-":"";if(i===-1){let s=parseInt(n?r.slice(1,r.length):r,10);return isNaN(s)?z.EMPTY_STRING:`${n}${s}`}else{let s=parseInt(r.replace("-","").substring(0,i),10),a=r.substring(i+1),o=isNaN(s)?"":s.toString(),l=typeof this.decimalMarker=="string"?this.decimalMarker:z.DOT;return o===z.EMPTY_STRING?z.EMPTY_STRING:`${n}${o}${l}${a}`}}_findFirstNonZeroDigitIndex(r){for(let i=0;i<r.length;i++){let n=r[i];if(n&&n>="1"&&n<="9")return i}return-1}static \u0275fac=function(r){return new(r||t)};static \u0275prov=vt({token:t,factory:t.\u0275fac})}return t})(),Hk=(()=>{class t extends aBt{isNumberValue=!1;maskIsShown="";selStart=null;selEnd=null;writingValue=!1;maskChanged=!1;_maskExpressionArray=[];triggerOnMaskChange=!1;_previousValue="";_currentValue="";_emitValue=!1;_start;_end;onChange=r=>{};_elementRef=K(te,{optional:!0});document=K(ge);_config=K(S0);_renderer=K(Gu,{optional:!0});applyMask(r,i,n=0,s=!1,a=!1,o=()=>{}){if(!i)return r!==this.actualValue?this.actualValue:r;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():z.EMPTY_STRING,this.maskExpression===z.IP&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(r||z.HASH)),this.maskExpression===z.CPF_CNPJ&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(r||z.HASH)),!r&&this.showMaskTyped)return this.formControlResult(this.prefix),`${this.prefix}${this.maskIsShown}${this.suffix}`;let l=r&&typeof this.selStart=="number"?r[this.selStart]??z.EMPTY_STRING:z.EMPTY_STRING,c="",h=n;if(this.hiddenInput!==null&&!this.writingValue){let g=r&&r.length===1?r.split(z.EMPTY_STRING):this.actualValue.split(z.EMPTY_STRING);typeof this.selStart=="object"&&typeof this.selEnd=="object"?(this.selStart=Number(this.selStart),this.selEnd=Number(this.selEnd)):r!==z.EMPTY_STRING&&g.length?typeof this.selStart=="number"&&typeof this.selEnd=="number"&&(r.length>g.length?g.splice(this.selStart,0,l):r.length<g.length&&(g.length-r.length===1?a?g.splice(this.selStart-1,1):g.splice(r.length-1,1):g.splice(this.selStart,this.selEnd-this.selStart))):g=[],this.showMaskTyped&&!this.hiddenInput&&(c=this.removeMask(r)),c=this.actualValue.length&&g.length<=r.length?this.shiftTypedSymbols(g.join(z.EMPTY_STRING)):r}if(s&&(this.hiddenInput||!this.hiddenInput)&&(c=r),a&&this.specialCharacters.indexOf(this.maskExpression[h]??z.EMPTY_STRING)!==-1&&this.showMaskTyped&&!this.prefix&&(c=this._currentValue),this.deletedSpecialCharacter&&h&&(this.specialCharacters.includes(this.actualValue.slice(h,h+1))?h=h+1:i.slice(h-1,h+1)!==z.MONTHS&&(h=h-2),this.deletedSpecialCharacter=!1),this.showMaskTyped&&this.placeHolderCharacter.length===1&&!this.leadZeroDateTime&&(c=this.removeMask(r)),this.maskChanged?c=r:c=c&&c.length?c:r,this.showMaskTyped&&this.keepCharacterPositions&&this.actualValue&&!s&&!this.writingValue){let g=this.dropSpecialCharacters?this.removeMask(this.actualValue):this.actualValue;return this.formControlResult(g),this.actualValue?this.actualValue:`${this.prefix}${this.maskIsShown}${this.suffix}`}let p=super.applyMask(c,i,h,s,a,o);if(this.actualValue=this.getActualValue(p),this.thousandSeparator===z.DOT&&this.decimalMarker===z.DOT&&(this.decimalMarker=z.COMMA),this.maskExpression.startsWith(z.SEPARATOR)&&this.dropSpecialCharacters===!0&&(this.specialCharacters=this.specialCharacters.filter(g=>!this._compareOrIncludes(g,this.decimalMarker,this.thousandSeparator))),(p||p==="")&&(this._previousValue=this._currentValue,this._currentValue=p,this._emitValue=this._previousValue!==this._currentValue||this.maskChanged||this.writingValue||this._previousValue===this._currentValue&&s),this._emitValue&&(this.writingValue&&this.triggerOnMaskChange?requestAnimationFrame(()=>this.formControlResult(p)):this.formControlResult(p)),!this.showMaskTyped||this.showMaskTyped&&this.hiddenInput)return this.hiddenInput?a?this.hideInput(p,this.maskExpression):`${this.hideInput(p,this.maskExpression)}${this.maskIsShown.slice(p.length)}`:p;let m=p.length,f=`${this.prefix}${this.maskIsShown}${this.suffix}`;if(this.maskExpression.includes(z.HOURS)){let g=this._numberSkipedSymbols(p);return`${p}${f.slice(m+g)}`}else if(this.maskExpression===z.IP||this.maskExpression===z.CPF_CNPJ)return`${p}${f}`;return`${p}${f.slice(m)}`}_numberSkipedSymbols(r){let i=/(^|\D)(\d\D)/g,n=i.exec(r),s=0;for(;n!=null;)s+=1,n=i.exec(r);return s}applyValueChanges(r,i,n,s=()=>{}){let a=this._elementRef?.nativeElement;a&&(a.value=this.applyMask(a.value,this.maskExpression,r,i,n,s),a!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(r,i){return r.split(z.EMPTY_STRING).map((n,s)=>this.patterns&&this.patterns[i[s]??z.EMPTY_STRING]&&this.patterns[i[s]??z.EMPTY_STRING]?.symbol?this.patterns[i[s]??z.EMPTY_STRING]?.symbol:n).join(z.EMPTY_STRING)}getActualValue(r){let i=r.split(z.EMPTY_STRING).filter((n,s)=>{let a=this.maskExpression[s]??z.EMPTY_STRING;return this._checkSymbolMask(n,a)||this.specialCharacters.includes(a)&&n===a});return i.join(z.EMPTY_STRING)===r?i.join(z.EMPTY_STRING):r}shiftTypedSymbols(r){let i="";return(r&&r.split(z.EMPTY_STRING).map((n,s)=>{if(this.specialCharacters.includes(r[s+1]??z.EMPTY_STRING)&&r[s+1]!==this.maskExpression[s+1])return i=n,r[s+1];if(i.length){let a=i;return i=z.EMPTY_STRING,a}return n})||[]).join(z.EMPTY_STRING)}numberToString(r){return!r&&r!==0||this.maskExpression.startsWith(z.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters)||this.maskExpression.startsWith(z.SEPARATOR)&&this.separatorLimit.length>14&&String(r).length>14?String(r):Number(r).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}).replace(`/${z.MINUS}/`,z.MINUS)}showMaskInInput(r){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}else if(this.showMaskTyped){if(r){if(this.maskExpression===z.IP)return this._checkForIp(r);if(this.maskExpression===z.CPF_CNPJ)return this._checkForCpfCnpj(r)}return this.placeHolderCharacter.length===this.maskExpression.length?this.placeHolderCharacter:this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){let r=this._elementRef?.nativeElement;r&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==r.value.replace(this.placeHolderCharacter,z.EMPTY_STRING).length&&(this.formElementProperty=["value",z.EMPTY_STRING],this.applyMask("",this.maskExpression))}set formElementProperty([r,i]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>this._renderer?.setProperty(this._elementRef?.nativeElement,r,i))}checkDropSpecialCharAmount(r){return r.split(z.EMPTY_STRING).filter(i=>this._findDropSpecialChar(i)).length}removeMask(r){return this._removeMask(this._removeSuffix(this._removePrefix(r)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(r){if(r===z.HASH)return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;let i=[];for(let n=0;n<r.length;n++){let s=r[n]??z.EMPTY_STRING;s&&s.match("\\d")&&i.push(s)}return i.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:i.length>3&&i.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:i.length>6&&i.length<=9?this.placeHolderCharacter:(i.length>9&&i.length<=12,"")}_checkForCpfCnpj(r){let i=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,n=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if(r===z.HASH)return i;let s=[];for(let a=0;a<r.length;a++){let o=r[a]??z.EMPTY_STRING;o&&o.match("\\d")&&s.push(o)}return s.length<=3?i.slice(s.length,i.length):s.length>3&&s.length<=6?i.slice(s.length+1,i.length):s.length>6&&s.length<=9?i.slice(s.length+2,i.length):s.length>9&&s.length<11?i.slice(s.length+3,i.length):s.length===11?"":s.length===12?r.length===17?n.slice(16,n.length):n.slice(15,n.length):s.length>12&&s.length<=14?n.slice(s.length+4,n.length):""}_getActiveElement(r=this.document){let i=r?.activeElement?.shadowRoot;return i?.activeElement?this._getActiveElement(i):r.activeElement}formControlResult(r){if(this.writingValue&&!r){this.onChange("");return}if(this.writingValue||!this.triggerOnMaskChange&&this.maskChanged){this.triggerOnMaskChange&&this.maskChanged&&this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(r)))))),this.maskChanged=!1;return}Array.isArray(this.dropSpecialCharacters)?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(r)),this.dropSpecialCharacters))))):this.dropSpecialCharacters||!this.dropSpecialCharacters&&this.prefix===r?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(r)))))):this.onChange(this.outputTransformFn(this._toNumber(r)))}_toNumber(r){if(!this.isNumberValue||r===z.EMPTY_STRING||this.maskExpression.startsWith(z.SEPARATOR)&&(this.leadZero||!this.dropSpecialCharacters))return r;if(String(r).length>14&&this.maskExpression.startsWith(z.SEPARATOR))return String(r);let i=Number(r);if(this.maskExpression.startsWith(z.SEPARATOR)&&Number.isNaN(i)){let n=String(r).replace(",",".");return Number(n)}return Number.isNaN(i)?r:i}_removeMask(r,i){return this.maskExpression.startsWith(z.PERCENT)&&r.includes(z.DOT)?r:r&&r.replace(this._regExpForRemove(i),z.EMPTY_STRING)}_removePrefix(r){return this.prefix?r&&r.replace(this.prefix,z.EMPTY_STRING):r}_removeSuffix(r){return this.suffix?r&&r.replace(this.suffix,z.EMPTY_STRING):r}_retrieveSeparatorValue(r){let i=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter(n=>this.dropSpecialCharacters.includes(n)):this.specialCharacters;return!this.deletedSpecialCharacter&&this._checkPatternForSpace()&&r.includes(z.WHITE_SPACE)&&this.maskExpression.includes(z.SYMBOL_STAR)&&(i=i.filter(n=>n!==z.WHITE_SPACE)),this._removeMask(r,i)}_regExpForRemove(r){return new RegExp(r.map(i=>`\\${i}`).join("|"),"gi")}_replaceDecimalMarkerToDot(r){let i=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return r.replace(this._regExpForRemove(i),z.DOT)}_checkSymbols(r){let i=r;if(i===z.EMPTY_STRING)return i;this.maskExpression.startsWith(z.PERCENT)&&this.decimalMarker===z.COMMA&&(i=i.replace(z.COMMA,z.DOT));let n=this._retrieveSeparatorPrecision(this.maskExpression),s=this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(i));return this.isNumberValue&&n?i===this.decimalMarker?null:s.length>14?String(s):this._checkPrecision(this.maskExpression,s):s}_checkPatternForSpace(){for(let r in this.patterns)if(this.patterns[r]&&this.patterns[r]?.hasOwnProperty("pattern")){let i=this.patterns[r]?.pattern.toString(),n=this.patterns[r]?.pattern;if(i?.includes(z.WHITE_SPACE)&&n?.test(this.maskExpression))return!0}return!1}_retrieveSeparatorPrecision(r){let i=r.match(new RegExp("^separator\\.([^d]*)"));return i?Number(i[1]):null}_checkPrecision(r,i){let n=this.getPrecision(r),s=i;return r.indexOf("2")>0||this.leadZero&&Number(n)>0?(this.decimalMarker===z.COMMA&&this.leadZero&&(s=s.replace(",",".")),this.leadZero?Number(s).toFixed(Number(n)):Number(s).toFixed(2)):this.numberToString(s)}_repeatPatternSymbols(r){return r.match(/{[0-9]+}/)&&r.split(z.EMPTY_STRING).reduce((i,n,s)=>{if(this._start=n===z.CURLY_BRACKETS_LEFT?s:this._start,n!==z.CURLY_BRACKETS_RIGHT)return this._findSpecialChar(n)?i+n:i;this._end=s;let a=Number(r.slice(this._start+1,this._end)),o=new Array(a+1).join(r[this._start-1]);if(r.slice(0,this._start).length>1&&r.includes(z.LETTER_S)){let l=r.slice(0,this._start-1);return l.includes(z.CURLY_BRACKETS_LEFT)?i+o:l+i+o}else return i+o},"")||r}currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}static \u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})();static \u0275prov=vt({token:t,factory:t.\u0275fac})}return t})();function oBt(){let t=K(zG),e=K(FG);return e instanceof Function?x(x({},t),e()):x(x({},t),e)}function lBt(t){return[{provide:FG,useValue:t},{provide:zG,useValue:rBt},{provide:S0,useFactory:oBt},Hk]}var VG=(()=>{class t{maskExpression="";specialCharacters=[];patterns={};prefix="";suffix="";thousandSeparator=" ";decimalMarker=".";dropSpecialCharacters=null;hiddenInput=null;showMaskTyped=null;placeHolderCharacter=null;shownMaskExpression=null;showTemplate=null;clearIfNotMatch=null;validation=null;separatorLimit=null;allowNegativeNumbers=null;leadZeroDateTime=null;leadZero=null;triggerOnMaskChange=null;apm=null;inputTransformFn=null;outputTransformFn=null;keepCharacterPositions=null;maskFilled=new It;_maskValue="";_inputValue;_position=null;_code;_maskExpressionArray=[];_allowFewMaskChangeMask=!1;_justPasted=!1;_isFocused=!1;_isComposing=!1;document=K(ge);_maskService=K(Hk,{self:!0});_config=K(S0);onChange=r=>{};onTouch=()=>{};ngOnChanges(r){let{maskExpression:i,specialCharacters:n,patterns:s,prefix:a,suffix:o,thousandSeparator:l,decimalMarker:c,dropSpecialCharacters:h,hiddenInput:p,showMaskTyped:m,placeHolderCharacter:f,shownMaskExpression:g,showTemplate:_,clearIfNotMatch:w,validation:S,separatorLimit:C,allowNegativeNumbers:b,leadZeroDateTime:P,leadZero:L,triggerOnMaskChange:H,apm:M,inputTransformFn:E,outputTransformFn:it,keepCharacterPositions:X}=r;if(i&&(i.currentValue!==i.previousValue&&!i.firstChange&&(this._maskService.maskChanged=!0),i.currentValue&&i.currentValue.split(z.OR).length>1?(this._maskExpressionArray=i.currentValue.split(z.OR).sort((W,J)=>W.length-J.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=i.currentValue||z.EMPTY_STRING,this._maskService.maskExpression=this._maskValue)),n){if(!n.currentValue||!Array.isArray(n.currentValue))return;this._maskService.specialCharacters=n.currentValue||[]}b&&(this._maskService.allowNegativeNumbers=b.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.specialCharacters=this._maskService.specialCharacters.filter(W=>W!==z.MINUS))),s&&s.currentValue&&(this._maskService.patterns=s.currentValue),M&&M.currentValue&&(this._maskService.apm=M.currentValue),a&&(this._maskService.prefix=a.currentValue),o&&(this._maskService.suffix=o.currentValue),l&&(this._maskService.thousandSeparator=l.currentValue),c&&(this._maskService.decimalMarker=c.currentValue),h&&(this._maskService.dropSpecialCharacters=h.currentValue),p&&(this._maskService.hiddenInput=p.currentValue),m&&(this._maskService.showMaskTyped=m.currentValue,m.previousValue===!1&&m.currentValue===!0&&this._isFocused&&requestAnimationFrame(()=>{this._maskService._elementRef?.nativeElement.click()})),f&&(this._maskService.placeHolderCharacter=f.currentValue),g&&(this._maskService.shownMaskExpression=g.currentValue),_&&(this._maskService.showTemplate=_.currentValue),w&&(this._maskService.clearIfNotMatch=w.currentValue),S&&(this._maskService.validation=S.currentValue),C&&(this._maskService.separatorLimit=C.currentValue),P&&(this._maskService.leadZeroDateTime=P.currentValue),L&&(this._maskService.leadZero=L.currentValue),H&&(this._maskService.triggerOnMaskChange=H.currentValue),E&&(this._maskService.inputTransformFn=E.currentValue),it&&(this._maskService.outputTransformFn=it.currentValue),X&&(this._maskService.keepCharacterPositions=X.currentValue),this._applyMask()}validate({value:r}){let i=typeof r=="number"?String(r):r;if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(i);if(this._maskService.cpfCnpjError)return this._createValidationError(i);if(this._maskValue.startsWith(z.SEPARATOR)||sBt.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(nBt.includes(this._maskValue))return this._validateTime(i);if(this._maskValue===z.EMAIL_MASK)return!/^[^@]+@[^@]+\.[^@]+$/.test(i)&&i?this._createValidationError(i):null;if(i&&i.length>=1){let n=0;if(this._maskValue.includes(z.CURLY_BRACKETS_LEFT)&&this._maskValue.includes(z.CURLY_BRACKETS_RIGHT))return this._maskValue.slice(this._maskValue.indexOf(z.CURLY_BRACKETS_LEFT)+1,this._maskValue.indexOf(z.CURLY_BRACKETS_RIGHT))===String(i.length)?null:this._createValidationError(i);if(this._maskValue.startsWith(z.PERCENT))return null;for(let s in this._maskService.patterns)if(this._maskService.patterns[s]?.optional){if(this._maskValue.indexOf(s)!==this._maskValue.lastIndexOf(s)){let a=this._maskValue.split(z.EMPTY_STRING).filter(o=>o===s).join(z.EMPTY_STRING);n+=a.length}else this._maskValue.indexOf(s)!==-1&&n++;if(this._maskValue.indexOf(s)!==-1&&i.length>=this._maskValue.indexOf(s)||n===this._maskValue.length)return null}if(this._maskValue.indexOf(z.SYMBOL_STAR)>1&&i.length<this._maskValue.indexOf(z.SYMBOL_STAR)||this._maskValue.indexOf(z.SYMBOL_QUESTION)>1&&i.length<this._maskValue.indexOf(z.SYMBOL_QUESTION))return this._createValidationError(i);if(this._maskValue.indexOf(z.SYMBOL_STAR)===-1||this._maskValue.indexOf(z.SYMBOL_QUESTION)===-1){let s=this._maskValue.split("*"),a=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkDropSpecialCharAmount(this._maskValue)-n:this.prefix?this._maskValue.length+this.prefix.length-n:this._maskValue.length-n;if(s.length===1&&i.length<a)return this._createValidationError(i);if(s.length>1){let o=s[s.length-1];if(o&&this._maskService.specialCharacters.includes(o[0])&&String(i).includes(o[0]??"")&&!this.dropSpecialCharacters){let l=r.split(o[0]);return l[l.length-1].length===o.length-1?null:this._createValidationError(i)}else return(o&&!this._maskService.specialCharacters.includes(o[0])||!o||this._maskService.dropSpecialCharacters)&&i.length>=a-1?null:this._createValidationError(i)}}if(this._maskValue.indexOf(z.SYMBOL_STAR)===1||this._maskValue.indexOf(z.SYMBOL_QUESTION)===1)return null}return r&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onFocus(){this._isFocused=!0}onModelChange(r){(r===z.EMPTY_STRING||r===null||typeof r>"u")&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(z.EMPTY_STRING))}onInput(r){if(this._isComposing)return;let i=r.target,n=this._maskService.inputTransformFn(i.value);if(i.type!=="number")if(typeof n=="string"||typeof n=="number"){if(i.value=n.toString(),this._inputValue=i.value,this._setMask(),!this._maskValue){this.onChange(i.value);return}let s=i.selectionStart===1?i.selectionStart+this._maskService.prefix.length:i.selectionStart;if(this.showMaskTyped&&this.keepCharacterPositions&&this._maskService.placeHolderCharacter.length===1){let c=i.value.slice(s-1,s),h=this.prefix.length,p=this._maskService._checkSymbolMask(c,this._maskService.maskExpression[s-1-h]??z.EMPTY_STRING),m=this._maskService._checkSymbolMask(c,this._maskService.maskExpression[s+1-h]??z.EMPTY_STRING),f=this._maskService.selStart===this._maskService.selEnd,g=Number(this._maskService.selStart)-h,_=Number(this._maskService.selEnd)-h,w=this._code===z.BACKSPACE||this._code===z.DELETE;if(w){if(!f)this._maskService.selStart===h?this._maskService.actualValue=`${this.prefix}${this._maskService.maskIsShown.slice(0,_)}${this._inputValue.split(this.prefix).join("")}`:this._maskService.selStart===this._maskService.maskIsShown.length+h?this._maskService.actualValue=`${this._inputValue}${this._maskService.maskIsShown.slice(g,_)}`:this._maskService.actualValue=`${this.prefix}${this._inputValue.split(this.prefix).join("").slice(0,g)}${this._maskService.maskIsShown.slice(g,_)}${this._maskService.actualValue.slice(_+h,this._maskService.maskIsShown.length+h)}${this.suffix}`;else if(!this._maskService.specialCharacters.includes(this._maskService.maskExpression.slice(s-this.prefix.length,s+1-this.prefix.length))&&f)if(g===1&&this.prefix)this._maskService.actualValue=`${this.prefix}${this._maskService.placeHolderCharacter}${i.value.split(this.prefix).join("").split(this.suffix).join("")}${this.suffix}`,s=s-1;else{let S=i.value.substring(0,s),C=i.value.substring(s);this._maskService.actualValue=`${S}${this._maskService.placeHolderCharacter}${C}`}s=this._code===z.DELETE?s+1:s}w||(!p&&!m&&f?s=Number(i.selectionStart)-1:this._maskService.specialCharacters.includes(i.value.slice(s,s+1))&&m&&!this._maskService.specialCharacters.includes(i.value.slice(s+1,s+2))?(this._maskService.actualValue=`${i.value.slice(0,s-1)}${i.value.slice(s,s+1)}${c}${i.value.slice(s+2)}`,s=s+1):p?i.value.length===1&&s===1?this._maskService.actualValue=`${this.prefix}${c}${this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)}${this.suffix}`:this._maskService.actualValue=`${i.value.slice(0,s-1)}${c}${i.value.slice(s+1).split(this.suffix).join("")}${this.suffix}`:this.prefix&&i.value.length===1&&s-h===1&&this._maskService._checkSymbolMask(i.value,this._maskService.maskExpression[s-1-h]??z.EMPTY_STRING)&&(this._maskService.actualValue=`${this.prefix}${i.value}${this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)}${this.suffix}`))}let a=0,o=!1;if(this._code===z.DELETE&&z.SEPARATOR&&(this._maskService.deletedSpecialCharacter=!0),this._inputValue.length>=this._maskService.maskExpression.length-1&&this._code!==z.BACKSPACE&&this._maskService.maskExpression===z.DAYS_MONTHS_YEARS&&s<10){let c=this._inputValue.slice(s-1,s);i.value=this._inputValue.slice(0,s-1)+c+this._inputValue.slice(s+1)}if(this._maskService.maskExpression===z.DAYS_MONTHS_YEARS&&this.leadZeroDateTime&&(s<3&&Number(i.value)>31&&Number(i.value)<40||s===5&&Number(i.value.slice(3,5))>12)&&(s=s+2),this._maskService.maskExpression===z.HOURS_MINUTES_SECONDS&&this.apm&&(this._justPasted&&i.value.slice(0,2)===z.DOUBLE_ZERO&&(i.value=i.value.slice(1,2)+i.value.slice(2,i.value.length)),i.value=i.value===z.DOUBLE_ZERO?z.NUMBER_ZERO:i.value),this._maskService.applyValueChanges(s,this._justPasted,this._code===z.BACKSPACE||this._code===z.DELETE,(c,h)=>{this._justPasted=!1,a=c,o=h}),this._getActiveElement()!==i)return;if(this._maskService.plusOnePosition&&(s=s+1,this._maskService.plusOnePosition=!1),this._maskExpressionArray.length)if(this._code===z.BACKSPACE){let c=this.specialCharacters.includes(this._maskService.actualValue.slice(s-1,s)),h=this.specialCharacters.includes(this._maskService.actualValue.slice(s,s+1));this._allowFewMaskChangeMask&&!h?(s=i.selectionStart+1,this._allowFewMaskChangeMask=!1):s=c?s-1:s}else s=i.selectionStart===1?i.selectionStart+this._maskService.prefix.length:i.selectionStart;this._position=this._position===1&&this._inputValue.length===1?null:this._position;let l=this._position?this._inputValue.length+s+a:s+(this._code===z.BACKSPACE&&!o?0:a);l>this._getActualInputLength()&&(l=i.value===this._maskService.decimalMarker&&i.value.length===1?this._getActualInputLength()+1:this._getActualInputLength()),l<0&&(l=0),i.setSelectionRange(l,l),this._position=null}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof n);else{if(!this._maskValue){this.onChange(i.value);return}this._maskService.applyValueChanges(i.value.length,this._justPasted,this._code===z.BACKSPACE||this._code===z.DELETE)}}onCompositionStart(){this._isComposing=!0}onCompositionEnd(r){this._isComposing=!1,this._justPasted=!0,this.onInput(r)}onBlur(r){if(this._maskValue){let i=r.target;if(this._maskService.leadZero&&i.value.length>0&&typeof this._maskService.decimalMarker=="string"){let n=this._maskService.maskExpression,s=Number(this._maskService.maskExpression.slice(n.length-1,n.length));if(s>0){i.value=this._maskService.suffix?i.value.split(this._maskService.suffix).join(""):i.value;let a=i.value.split(this._maskService.decimalMarker)[1];i.value=i.value.includes(this._maskService.decimalMarker)?i.value+z.NUMBER_ZERO.repeat(s-a.length)+this._maskService.suffix:i.value+this._maskService.decimalMarker+z.NUMBER_ZERO.repeat(s)+this._maskService.suffix,this._maskService.actualValue=i.value}}this._maskService.clearIfNotMatchFn()}this._isFocused=!1,this.onTouch()}onClick(r){if(!this._maskValue)return;let i=r.target,n=0,s=0;i!==null&&i.selectionStart!==null&&i.selectionStart===i.selectionEnd&&i.selectionStart>this._maskService.prefix.length&&r.keyCode!==38&&this._maskService.showMaskTyped&&!this.keepCharacterPositions&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),i.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===i.value?(i.focus(),i.setSelectionRange(n,s)):i.selectionStart>this._maskService.actualValue.length&&i.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));let a=i&&(i.value===this._maskService.prefix?this._maskService.prefix+this._maskService.maskIsShown:i.value);if(i&&i.value!==a&&(i.value=a),i&&i.type!=="number"&&(i.selectionStart||i.selectionEnd)<=this._maskService.prefix.length){let o=this._maskService.maskExpression.match(new RegExp(`^[${this._maskService.specialCharacters.map(l=>`\\${l}`).join("")}]+`))?.[0].length||0;i.selectionStart=this._maskService.prefix.length+o;return}i&&i.selectionEnd>this._getActualInputLength()&&(i.selectionEnd=this._getActualInputLength())}onKeyDown(r){if(!this._maskValue)return;if(this._isComposing){r.key==="Enter"&&this.onCompositionEnd(r);return}this._code=r.code?r.code:r.key;let i=r.target;if(this._inputValue=i.value,this._setMask(),i.type!=="number"){if(r.key===z.ARROW_UP&&r.preventDefault(),r.key===z.ARROW_LEFT||r.key===z.BACKSPACE||r.key===z.DELETE){if(r.key===z.BACKSPACE&&i.value.length===0&&(i.selectionStart=i.selectionEnd),r.key===z.BACKSPACE&&i.selectionStart!==0){if(this.specialCharacters=this.specialCharacters?.length?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&i.selectionStart<=this.prefix.length)i.setSelectionRange(this.prefix.length,i.selectionEnd);else if(this._inputValue.length!==i.selectionStart&&i.selectionStart!==1)for(;this.specialCharacters.includes((this._inputValue[i.selectionStart-1]??z.EMPTY_STRING).toString())&&(this.prefix.length>=1&&i.selectionStart>this.prefix.length||this.prefix.length===0);)i.setSelectionRange(i.selectionStart-1,i.selectionEnd)}this.checkSelectionOnDeletion(i),this._maskService.prefix.length&&i.selectionStart<=this._maskService.prefix.length&&i.selectionEnd<=this._maskService.prefix.length&&r.preventDefault();let n=i.selectionStart;r.key===z.BACKSPACE&&!i.readOnly&&n===0&&i.selectionEnd===i.value.length&&i.value.length!==0&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<i.selectionStart?i.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(r.code==="KeyA"&&r.ctrlKey||r.code==="KeyA"&&r.metaKey)&&(i.setSelectionRange(0,this._getActualInputLength()),r.preventDefault()),this._maskService.selStart=i.selectionStart,this._maskService.selEnd=i.selectionEnd}}writeValue(r){return Dt(this,null,function*(){let i=r;if(typeof i=="object"&&i!==null&&"value"in i&&("disable"in i&&this.setDisabledState(!!i.disable),i=i.value),i!==null&&(i=this.inputTransformFn?this.inputTransformFn(i):i),typeof i=="string"||typeof i=="number"||i===null||typeof i>"u"){(i===null||typeof i>"u"||i==="")&&(this._maskService._currentValue="",this._maskService._previousValue="");let n=i;if(typeof n=="number"||this._maskValue.startsWith(z.SEPARATOR)){n=String(n);let s=this._maskService.currentLocaleDecimalMarker();Array.isArray(this._maskService.decimalMarker)||(n=this._maskService.decimalMarker!==s?n.replace(s,this._maskService.decimalMarker):n),this._maskService.leadZero&&n&&this.maskExpression&&this.dropSpecialCharacters!==!1&&(n=this._maskService._checkPrecision(this._maskService.maskExpression,n)),(this._maskService.decimalMarker===z.COMMA||Array.isArray(this._maskService.decimalMarker)&&this._maskService.thousandSeparator===z.DOT)&&(n=n.toString().replace(z.DOT,z.COMMA)),this.maskExpression?.startsWith(z.SEPARATOR)&&this.leadZero&&requestAnimationFrame(()=>{this._maskService.applyMask(n?.toString()??"",this._maskService.maskExpression)}),this._maskService.isNumberValue=!0}typeof n!="string"&&(n=""),this._inputValue=n,this._setMask(),n&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(typeof this.inputTransformFn!="function"&&(this._maskService.writingValue=!0),this._maskService.formElementProperty=["value",this._maskService.applyMask(n,this._maskService.maskExpression)],typeof this.inputTransformFn!="function"&&(this._maskService.writingValue=!1)):this._maskService.formElementProperty=["value",n],this._inputValue=n}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof i)})}registerOnChange(r){this._maskService.onChange=this.onChange=r}registerOnTouched(r){this.onTouch=r}_getActiveElement(r=this.document){let i=r?.activeElement?.shadowRoot;return i?.activeElement?this._getActiveElement(i):r.activeElement}checkSelectionOnDeletion(r){r.selectionStart=Math.min(Math.max(this.prefix.length,r.selectionStart),this._inputValue.length-this.suffix.length),r.selectionEnd=Math.min(Math.max(this.prefix.length,r.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(r){this._maskService.formElementProperty=["disabled",r]}_applyMask(){this._maskService.maskExpression=this._maskService._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(r){let i=this._maskValue.split(z.EMPTY_STRING).filter(n=>n!==":").length;return r&&(+(r[r.length-1]??-1)==0&&r.length<i||r.length<=i-2)?this._createValidationError(r):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(r){return{mask:{requiredMask:this._maskValue,actualValue:r}}}_setMask(){this._maskExpressionArray.some(r=>{if(r.split(z.EMPTY_STRING).some(i=>this._maskService.specialCharacters.includes(i))&&this._inputValue&&this._areAllCharactersInEachStringSame(this._maskExpressionArray)||r.includes(z.CURLY_BRACKETS_LEFT)){let i=this._maskService.removeMask(this._inputValue)?.length<=this._maskService.removeMask(r)?.length;if(i)return this._maskValue=this.maskExpression=this._maskService.maskExpression=r.includes(z.CURLY_BRACKETS_LEFT)?this._maskService._repeatPatternSymbols(r):r,i;{this._code===z.BACKSPACE&&(this._allowFewMaskChangeMask=!0);let n=this._maskExpressionArray[this._maskExpressionArray.length-1]??z.EMPTY_STRING;this._maskValue=this.maskExpression=this._maskService.maskExpression=n.includes(z.CURLY_BRACKETS_LEFT)?this._maskService._repeatPatternSymbols(n):n}}else{let i=this._maskService.removeMask(this._inputValue)?.split(z.EMPTY_STRING).every((n,s)=>{let a=r.charAt(s);return this._maskService._checkSymbolMask(n,a)});if(i||this._justPasted)return this._maskValue=this.maskExpression=this._maskService.maskExpression=r,i}})}_areAllCharactersInEachStringSame(r){let i=this._maskService.specialCharacters;function n(s){let a=new RegExp(`[${i.map(o=>`\\${o}`).join("")}]`,"g");return s.replace(a,"")}return r.map(n).every(s=>new Set(s).size===1)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=qt({type:t,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(r,i){r&1&&yt("paste",function(){return i.onPaste()})("focus",function(n){return i.onFocus(n)})("ngModelChange",function(n){return i.onModelChange(n)})("input",function(n){return i.onInput(n)})("compositionstart",function(n){return i.onCompositionStart(n)})("compositionend",function(n){return i.onCompositionEnd(n)})("blur",function(n){return i.onBlur(n)})("click",function(n){return i.onClick(n)})("keydown",function(n){return i.onKeyDown(n)})},inputs:{maskExpression:[0,"mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",leadZero:"leadZero",triggerOnMaskChange:"triggerOnMaskChange",apm:"apm",inputTransformFn:"inputTransformFn",outputTransformFn:"outputTransformFn",keepCharacterPositions:"keepCharacterPositions"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],standalone:!0,features:[We([{provide:lo,useExisting:t,multi:!0},{provide:Xu,useExisting:t,multi:!0},Hk]),yr]})}return t})();function cBt(t,e){t&1&&(N(0,"mat-error"),ut(1,"First name is required"),F())}function uBt(t,e){t&1&&(N(0,"mat-error"),ut(1,"Last name is required"),F())}function hBt(t,e){t&1&&(N(0,"mat-error"),ut(1,"Please enter a valid ORCID"),F())}function dBt(t,e){t&1&&(N(0,"mat-error"),ut(1,"Please enter a valid email"),F())}var pBt=(()=>{let t=class{constructor(){this.form=je.required(),this.orcidInputFn=i=>xG(String(i).trim())}ngOnInit(){setTimeout(()=>{this.form().controls.orcidId.updateValueAndValidity()})}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["ccf-metadata-author-form"]],inputs:{form:[1,"form"]},standalone:!0,features:[Kt],decls:27,vars:7,consts:[[1,"subheader"],[1,"fields",3,"formGroup"],[1,"field","firstname"],["matInput","","formControlName","firstName","autocomplete","given-name"],[1,"field","middlename"],["matInput","","formControlName","middleName","autocomplete","additional-name"],[1,"field","lastname"],["matInput","","formControlName","lastName","autocomplete","family-name"],[1,"field","orcid"],["matInput","","formControlName","orcidId","mask","AAAA-AAAA-AAAA-AAAA","placeholder","xxxx-xxxx-xxxx-xxxx",3,"inputTransformFn","dropSpecialCharacters"],[1,"field","email"],["matInput","","type","email","formControlName","email","autocomplete","email"]],template:function(r,i){r&1&&(N(0,"div",0),ut(1,"Author"),F(),N(2,"div",1)(3,"mat-form-field",2)(4,"mat-label"),ut(5,"First name"),F(),Ot(6,"input",3),Wt(7,cBt,2,0,"mat-error"),F(),N(8,"mat-form-field",4)(9,"mat-label"),ut(10,"Middle name"),F(),Ot(11,"input",5),F(),N(12,"mat-form-field",6)(13,"mat-label"),ut(14,"Last name"),F(),Ot(15,"input",7),Wt(16,uBt,2,0,"mat-error"),F(),N(17,"mat-form-field",8)(18,"mat-label"),ut(19,"ORCID"),F(),Ot(20,"input",9),Wt(21,hBt,2,0,"mat-error"),F(),N(22,"mat-form-field",10)(23,"mat-label"),ut(24,"Email"),F(),Ot(25,"input",11),Wt(26,dBt,2,0,"mat-error"),F()()),r&2&&($(2),mt("formGroup",i.form()),$(5),ae(i.form().hasError("required","firstName")?7:-1),$(9),ae(i.form().hasError("required","lastName")?16:-1),$(4),mt("inputTransformFn",i.orcidInputFn)("dropSpecialCharacters",!1),$(),ae(i.form().hasError("mask","orcidId")?21:-1),$(5),ae(i.form().hasError("email","email")?26:-1))},dependencies:[u0,Qf,JE,QE,pp,oT,Yo,Qu,Ko,X4,eh,th,VG,Vr],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .subheader[_ngcontent-%COMP%]{font:var(--sys-title-small);color:var(--sys-primary);margin-bottom:1rem}[_nghost-%COMP%]   .fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}[_nghost-%COMP%]   .fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]:not(.mat-form-field-invalid){height:3rem}[_nghost-%COMP%]   .fields[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{grid-column:1/span 2}"],changeDetection:0}),t})(),mBt=()=>["Updates to organ metadata reset all tissue block positions and anatomical structure tags. Are you sure you want to update metadata?"],fBt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["ccf-metadata-confirmation-dialog"]],standalone:!0,features:[Kt],decls:12,vars:3,consts:[["mat-dialog-title","",1,"title"],["mat-icon-button","","mat-dialog-close","",1,"close"],[3,"errors"],[1,"actions"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close"]],template:function(r,i){r&1&&(N(0,"h2",0),ut(1,"Confirm: Organ Update"),F(),N(2,"button",1)(3,"mat-icon"),ut(4,"close"),F()(),N(5,"mat-dialog-content"),Ot(6,"hra-error-indicator",2),F(),N(7,"mat-dialog-actions",3)(8,"button",4),ut(9,"Cancel"),F(),N(10,"button",5),ut(11,"Update Metadata"),F()()),r&2&&($(6),mt("errors",so(2,mBt)),$(4),mt("mat-dialog-close",!0))},dependencies:[rg,kT,ig,T7,gp,Hi,gr,Vr,ba,$n,kG],styles:["[_nghost-%COMP%]{display:block;position:relative;--mat-dialog-headline-padding: 1.75rem 2rem 0;--mat-dialog-with-actions-content-padding: 1rem 2rem 0;--mat-dialog-actions-padding: 1rem 2rem}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font:var(--sys-headline-small);letter-spacing:var(--sys-headline-small-tracking);margin:0}[_nghost-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;inset:1rem 1rem auto auto;padding:.5rem;margin:0;z-index:2}[_nghost-%COMP%]   .close[_ngcontent-%COMP%]:before{display:none}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{--mat-dialog-actions-alignment: space-between}"],changeDetection:0}),t})(),gBt=["trigger"],vBt=["panel"],_Bt=[[["mat-select-trigger"]],"*"],bBt=["mat-select-trigger","*"];function yBt(t,e){if(t&1&&(N(0,"span",4),ut(1),F()),t&2){let r=Rt();$(),Oi(r.placeholder)}}function wBt(t,e){t&1&&pe(0)}function xBt(t,e){if(t&1&&(N(0,"span",11),ut(1),F()),t&2){let r=Rt(2);$(),Oi(r.triggerValue)}}function CBt(t,e){if(t&1&&(N(0,"span",5),Wt(1,wBt,1,0)(2,xBt,2,1,"span",11),F()),t&2){let r=Rt();$(),ae(r.customTrigger?1:2)}}function kBt(t,e){if(t&1){let r=Qe();N(0,"div",12,1),yt("@transformPanel.done",function(i){Lt(r);let n=Rt();return Nt(n._panelDoneAnimatingStream.next(i.toState))})("keydown",function(i){Lt(r);let n=Rt();return Nt(n._handleKeydown(i))}),pe(2,1),F()}if(t&2){let r=Rt();Zo("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",r._getPanelTheme(),""),mt("ngClass",r.panelClass)("@transformPanel","showing"),ke("id",r.id+"-panel")("aria-multiselectable",r.multiple)("aria-label",r.ariaLabel||null)("aria-labelledby",r._getPanelAriaLabelledby())}}var ABt={transformPanelWrap:to("transformPanelWrap",[jn("* => void",FEt("@transformPanel",[NEt()],{optional:!0}))]),transformPanel:to("transformPanel",[us("void",tr({opacity:0,transform:"scale(1, 0.8)"})),jn("void => showing",Vn("120ms cubic-bezier(0, 0, 0.2, 1)",tr({opacity:1,transform:"scale(1, 1)"}))),jn("* => void",Vn("100ms linear",tr({opacity:0})))])},OL=0,jG=new ht("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let t=K(Ar);return()=>t.scrollStrategies.reposition()}});function SBt(t){return()=>t.scrollStrategies.reposition()}var EBt=new ht("MAT_SELECT_CONFIG"),TBt={provide:jG,deps:[Ar],useFactory:SBt},IBt=new ht("MatSelectTrigger"),OBt=class{constructor(t,e){this.source=t,this.value=e}},PBt=(()=>{let t=class{_scrollOptionIntoView(i){let n=this.options.toArray()[i];if(n){let s=this.panel.nativeElement,a=F4(i,this.options,this.optionGroups),o=n._getHostElement();i===0&&a===1?s.scrollTop=0:s.scrollTop=z4(o.offsetTop,o.offsetHeight,s.scrollTop,s.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(i){return new OBt(this,i)}get focused(){return this._focused||this._panelOpen}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(i){this._hideSingleSelectionIndicator=i,this._syncParentProperties()}get placeholder(){return this._placeholder}set placeholder(i){this._placeholder=i,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(lu.required)??!1}set required(i){this._required=i,this.stateChanges.next()}get multiple(){return this._multiple}set multiple(i){this._selectionModel,this._multiple=i}get compareWith(){return this._compareWith}set compareWith(i){this._compareWith=i,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(i){this._assignValue(i)&&this._onChange(i)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(i){this._errorStateTracker.matcher=i}get id(){return this._id}set id(i){this._id=i||this._uid,this.stateChanges.next()}get errorState(){return this._errorStateTracker.errorState}set errorState(i){this._errorStateTracker.errorState=i}constructor(i,n,s,a,o,l,c,h,p,m,f,g,_,w){this._viewportRuler=i,this._changeDetectorRef=n,this._elementRef=o,this._dir=l,this._parentFormField=p,this.ngControl=m,this._liveAnnouncer=_,this._defaultOptions=w,this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._panelOpen=!1,this._compareWith=(S,C)=>S===C,this._uid=`mat-select-${OL++}`,this._triggerAriaLabelledBy=null,this._destroy=new Bt,this.stateChanges=new Bt,this.disableAutomaticLabeling=!0,this._onChange=()=>{},this._onTouched=()=>{},this._valueId=`mat-select-value-${OL++}`,this._panelDoneAnimatingStream=new Bt,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._multiple=!1,this.disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._initialized=new Bt,this.optionSelectionChanges=Ud(()=>{let S=this.options;return S?S.changes.pipe(fr(S),_i(()=>lr(...S.map(C=>C.onSelectionChange)))):this._initialized.pipe(_i(()=>this.optionSelectionChanges))}),this.openedChange=new It,this._openedStream=this.openedChange.pipe(Ye(S=>S),kt(()=>{})),this._closedStream=this.openedChange.pipe(Ye(S=>!S),kt(()=>{})),this.selectionChange=new It,this.valueChange=new It,this._trackedModal=null,this._skipPredicate=S=>this.panelOpen?!1:S.disabled,this.ngControl&&(this.ngControl.valueAccessor=this),w?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=w.typeaheadDebounceInterval),this._errorStateTracker=new B4(a,m,h,c,this.stateChanges),this._scrollStrategyFactory=g,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(f)||0,this.id=this.id}ngOnInit(){this._selectionModel=new j4(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(ii(),Me(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(Me(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(Me(this._destroy)).subscribe(i=>{i.added.forEach(n=>n.select()),i.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(fr(null),Me(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let i=this._getTriggerAriaLabelledby(),n=this.ngControl;if(i!==this._triggerAriaLabelledBy){let s=this._elementRef.nativeElement;this._triggerAriaLabelledBy=i,i?s.setAttribute("aria-labelledby",i):s.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(this._previousControl!==void 0&&n.disabled!==null&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(i){(i.disabled||i.userAriaDescribedBy)&&this.stateChanges.next(),i.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_applyModalPanelOwnership(){let i=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!i)return;let n=`${this.id}-panel`;this._trackedModal&&ud(this._trackedModal,"aria-owns",n),Xb(i,"aria-owns",n),this._trackedModal=i}_clearFromModal(){if(!this._trackedModal)return;let i=`${this.id}-panel`;ud(this._trackedModal,"aria-owns",i),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(i){this._assignValue(i)}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this.disabled=i,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let i=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&i.reverse(),i.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(i){this.disabled||(this.panelOpen?this._handleOpenKeydown(i):this._handleClosedKeydown(i))}_handleClosedKeydown(i){let n=i.keyCode,s=n===40||n===38||n===37||n===39,a=n===13||n===32,o=this._keyManager;if(!o.isTyping()&&a&&!ps(i)||(this.multiple||i.altKey)&&s)i.preventDefault(),this.open();else if(!this.multiple){let l=this.selected;o.onKeydown(i);let c=this.selected;c&&l!==c&&this._liveAnnouncer.announce(c.viewValue,1e4)}}_handleOpenKeydown(i){let n=this._keyManager,s=i.keyCode,a=s===40||s===38,o=n.isTyping();if(a&&i.altKey)i.preventDefault(),this.close();else if(!o&&(s===13||s===32)&&n.activeItem&&!ps(i))i.preventDefault(),n.activeItem._selectViaInteraction();else if(!o&&this._multiple&&s===65&&i.ctrlKey){i.preventDefault();let l=this.options.some(c=>!c.disabled&&!c.selected);this.options.forEach(c=>{c.disabled||(l?c.select():c.deselect())})}else{let l=n.activeItemIndex;n.onKeydown(i),this._multiple&&a&&i.shiftKey&&n.activeItem&&n.activeItemIndex!==l&&n.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(br(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(i){if(this.options.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&i)Array.isArray(i),i.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{let n=this._selectOptionByValue(i);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(i){let n=this.options.find(s=>{if(this._selectionModel.isSelected(s))return!1;try{return s.value!=null&&this._compareWith(s.value,i)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(i){return i!==this._value||this._multiple&&Array.isArray(i)?(this.options&&this._setSelectionByValue(i),this._value=i,!0):!1}_getOverlayWidth(i){return this.panelWidth==="auto"?(i instanceof Kb?i.elementRef:i||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let i of this.options)i._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new S4(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let i=lr(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Me(i)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),lr(...this.options.map(n=>n._stateChanges)).pipe(Me(i)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(i,n){let s=this._selectionModel.isSelected(i);i.value==null&&!this._multiple?(i.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(i.value)):(s!==i.selected&&(i.selected?this._selectionModel.select(i):this._selectionModel.deselect(i)),n&&this._keyManager.setActiveItem(i),this.multiple&&(this._sortValues(),n&&this.focus())),s!==this._selectionModel.isSelected(i)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let i=this.options.toArray();this._selectionModel.sort((n,s)=>this.sortComparator?this.sortComparator(n,s,i):i.indexOf(n)-i.indexOf(s)),this.stateChanges.next()}}_propagateChanges(i){let n;this.multiple?n=this.selected.map(s=>s.value):n=this.selected?this.selected.value:i,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let i=-1;for(let n=0;n<this.options.length;n++)if(!this.options.get(n).disabled){i=n;break}this._keyManager.setActiveItem(i)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(i){this._elementRef.nativeElement.focus(i)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let i=this._parentFormField?.getLabelId(),n=i?i+" ":"";return this.ariaLabelledby?n+this.ariaLabelledby:i}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let i=this._parentFormField?.getLabelId(),n=(i?i+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(i){this.openedChange.emit(i)}setDescribedByIds(i){i.length?this._elementRef.nativeElement.setAttribute("aria-describedby",i.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}};return t.\u0275fac=function(r){return new(r||t)(R(d0),R(di),R(Zt),R(dT),R(te),R(Gn,8),R(sT,8),R(pp,8),R(f0,8),R(cl,10),Kd("tabindex"),R(jG),R(P4),R(EBt,8))},t.\u0275cmp=Pt({type:t,selectors:[["mat-select"]],contentQueries:function(r,i,n){if(r&1&&(Xi(n,IBt,5),Xi(n,fT,5),Xi(n,mT,5)),r&2){let s;oe(s=le())&&(i.customTrigger=s.first),oe(s=le())&&(i.options=s),oe(s=le())&&(i.optionGroups=s)}},viewQuery:function(r,i){if(r&1&&(gi(gBt,5),gi(vBt,5),gi(RD,5)),r&2){let n;oe(n=le())&&(i.trigger=n.first),oe(n=le())&&(i.panel=n.first),oe(n=le())&&(i._overlayDir=n.first)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(r,i){r&1&&yt("keydown",function(n){return i._handleKeydown(n)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),r&2&&(ke("id",i.id)("tabindex",i.disabled?-1:i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),ee("mat-mdc-select-disabled",i.disabled)("mat-mdc-select-invalid",i.errorState)("mat-mdc-select-required",i.required)("mat-mdc-select-empty",i.empty)("mat-mdc-select-multiple",i.multiple))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",Ut],disableRipple:[2,"disableRipple","disableRipple",Ut],tabIndex:[2,"tabIndex","tabIndex",r=>r==null?0:or(r)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Ut],placeholder:"placeholder",required:[2,"required","required",Ut],multiple:[2,"multiple","multiple",Ut],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",Ut],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",or],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],standalone:!0,features:[We([{provide:bT,useExisting:t},{provide:pT,useExisting:t}]),ji,yr,Kt],ngContentSelectors:bBt,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(r,i){if(r&1){let n=Qe();Mi(_Bt),N(0,"div",2,0),yt("click",function(){return Lt(n),Nt(i.open())}),N(3,"div",3),Wt(4,yBt,2,1,"span",4)(5,CBt,3,1,"span",5),F(),N(6,"div",6)(7,"div",7),ju(),N(8,"svg",8),Ot(9,"path",9),F()()()(),Wt(10,kBt,3,9,"ng-template",10),yt("backdropClick",function(){return Lt(n),Nt(i.close())})("attach",function(){return Lt(n),Nt(i._onAttached())})("detach",function(){return Lt(n),Nt(i.close())})}if(r&2){let n=fi(1);$(3),ke("id",i._valueId),$(),ae(i.empty?4:5),$(6),mt("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",i._preferredOverlayOrigin||n)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayWidth",i._overlayWidth)}},dependencies:[Kb,RD,_z],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-app-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-app-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-app-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-app-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-app-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-app-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-app-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-app-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-app-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color, var(--mat-app-surface-container))}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-app-on-surface-variant))}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform)}'],encapsulation:2,data:{animation:[ABt.transformPanel]},changeDetection:0}),t})(),MBt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[TBt],imports:[ti,Ju,vf,ai,Ld,Yo,vf,ai]}),t})(),RBt=()=>["/"];function BBt(t,e){t&1&&(N(0,"mat-error"),ut(1,"Sex is required"),F())}function DBt(t,e){t&1&&(N(0,"mat-error"),ut(1,"Organ is required"),F())}function LBt(t,e){if(t&1&&(N(0,"mat-option",13),ut(1),F()),t&2){let r=e.$implicit;mt("value",r),$(),Oi(r.name)}}function NBt(t,e){if(t&1&&(N(0,"mat-option",13),ut(1),F()),t&2){let r=e.$implicit;mt("value",r),$(),Oi(r)}}var FBt=["HuBMAP","SenNet"];function PL(t,e,r){let i=rr(()=>{let s=[...t()],a=new Intl.Collator;return s.sort((o,l)=>a.compare(r(o),r(l))),s}),n=(s,a)=>s===null||s===""?a:(typeof s!="string"&&(s=r(s)),s=s.toLowerCase(),a.filter(o=>r(o).toLowerCase().includes(s)));return YU(()=>{let s=i();return(Ym(e)?e().valueChanges:e).pipe(fr(""),ii(),kt(a=>n(a,s)))},{initialValue:[]})}var zBt=(()=>{let t=class{constructor(){this.form=je.required(),this.organs=je(bf),this.consortiums=je(FBt),this.getOrganName=i=>i?.name??"",this.organInput=new Bt,this.filteredOrgans=PL(this.organs,this.organInput,this.getOrganName),this.consortiumControl=rr(()=>this.form().controls.consortium),this.filteredConsortiums=PL(this.consortiums,this.consortiumControl,i=>i),this.doiInputFn=i=>CG(String(i)),this.doiPatterns={A:{pattern:/[\w.]/}}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["ccf-metadata-donor-form"]],inputs:{form:[1,"form"],organs:[1,"organs"],consortiums:[1,"consortiums"]},standalone:!0,features:[Kt],decls:38,vars:11,consts:[["organ",""],["organAutocomplete","matAutocomplete"],["consortium","matAutocomplete"],[1,"subheader"],[1,"fields",3,"formGroup"],[1,"field","sex"],["formControlName","sex","panelClass","options-container","disableRipple",""],["value","male"],["value","female"],[1,"field","organ"],["type","text","matInput","","formControlName","organ",3,"input","focus","matAutocomplete"],["matPrefix","",1,"search-icon"],["autoActiveFirstOption","","autoSelectActiveOption","","requireSelection","",3,"displayWith"],[3,"value"],[1,"field","consortium"],["type","text","matInput","","formControlName","consortium",3,"matAutocomplete"],[1,"field","doi"],["matInput","","formControlName","doi","mask","A*/A*","placeholder","00.00000/0000.00.00.000000",3,"specialCharacters","patterns","inputTransformFn","dropSpecialCharacters"]],template:function(r,i){if(r&1){let n=Qe();N(0,"div",3),ut(1,"Donor"),F(),N(2,"div",4)(3,"mat-form-field",5)(4,"mat-label"),ut(5,"Sex"),F(),N(6,"mat-select",6)(7,"mat-option",7),ut(8,"Male"),F(),N(9,"mat-option",8),ut(10,"Female"),F()(),Wt(11,BBt,2,0,"mat-error"),F(),N(12,"mat-form-field",9)(13,"mat-label"),ut(14,"Organ"),F(),N(15,"input",10,0),yt("input",function(){Lt(n);let s=fi(16);return Nt(i.organInput.next(s.value))})("focus",function(){Lt(n);let s=fi(16);return Nt(i.organInput.next(s.value))}),F(),N(17,"mat-icon",11),ut(18,"search"),F(),Wt(19,DBt,2,0,"mat-error"),N(20,"mat-autocomplete",12,1),ic(22,LBt,2,2,"mat-option",13,wd),F()(),N(24,"mat-form-field",14)(25,"mat-label"),ut(26,"Consortium"),F(),Ot(27,"input",15),N(28,"mat-icon",11),ut(29,"search"),F(),N(30,"mat-autocomplete",null,2),ic(32,NBt,2,2,"mat-option",13,wd),F()(),N(34,"mat-form-field",16)(35,"mat-label"),ut(36,"Publication DOI"),F(),Ot(37,"input",17),F()()}if(r&2){let n=fi(21),s=fi(31);$(2),mt("formGroup",i.form()),$(9),ae(i.form().hasError("required","sex")?11:-1),$(4),mt("matAutocomplete",n),$(4),ae(i.form().hasError("required","organ")?19:-1),$(),mt("displayWith",i.getOrganName),$(2),rc(i.filteredOrgans()),$(5),mt("matAutocomplete",s),$(5),rc(i.filteredConsortiums()),$(5),mt("specialCharacters",so(10,RBt))("patterns",i.doiPatterns)("inputTransformFn",i.doiInputFn)("dropSpecialCharacters",!1)}},dependencies:[u0,Qf,JE,QE,pp,oT,OTt,STt,fT,e7,Yo,Qu,Ko,X4,K4,Hi,gr,eh,th,vf,MBt,PBt,VG,Vr],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .subheader[_ngcontent-%COMP%]{font:var(--sys-title-small);color:var(--sys-primary);margin-bottom:1rem}[_nghost-%COMP%]   .fields[_ngcontent-%COMP%]{display:grid;grid-template-columns:8rem 12.5rem auto;gap:1.5rem}[_nghost-%COMP%]   .fields[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]:not(.mat-form-field-invalid){height:3rem}[_nghost-%COMP%]   .fields[_ngcontent-%COMP%]   .doi[_ngcontent-%COMP%]{grid-column:1/span 3}"],changeDetection:0}),t})(),VBt=["mat-menu-item",""],jBt=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],UBt=["mat-icon, [matMenuItemIcon]","*"];function HBt(t,e){t&1&&(ju(),N(0,"svg",2),Ot(1,"polygon",3),F())}var GBt=["*"];function WBt(t,e){if(t&1){let r=Qe();N(0,"div",0),yt("keydown",function(i){Lt(r);let n=Rt();return Nt(n._handleKeydown(i))})("click",function(){Lt(r);let i=Rt();return Nt(i.closed.emit("click"))})("@transformMenu.start",function(i){Lt(r);let n=Rt();return Nt(n._onAnimationStart(i))})("@transformMenu.done",function(i){Lt(r);let n=Rt();return Nt(n._onAnimationDone(i))}),N(1,"div",1),pe(2),F()()}if(t&2){let r=Rt();Ai(r._classList),mt("id",r.panelId)("@transformMenu",r._panelAnimationState),ke("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby||null)("aria-describedby",r.ariaDescribedby||null)}}var ZT=new ht("MAT_MENU_PANEL"),Vu=(()=>{let t=class{constructor(i,n,s,a,o){this._elementRef=i,this._document=n,this._focusMonitor=s,this._parentMenu=a,this._changeDetectorRef=o,this.role="menuitem",this.disabled=!1,this.disableRipple=!1,this._hovered=new Bt,this._focused=new Bt,this._highlighted=!1,this._triggersSubmenu=!1,a?.addItem?.(this)}focus(i,n){this._focusMonitor&&i?this._focusMonitor.focusVia(this._getHostElement(),i,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(i){this.disabled&&(i.preventDefault(),i.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let i=this._elementRef.nativeElement.cloneNode(!0),n=i.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<n.length;s++)n[s].remove();return i.textContent?.trim()||""}_setHighlighted(i){this._highlighted=i,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(i){this._triggersSubmenu=i,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(ge),R(ul),R(ZT,8),R(di))},t.\u0275cmp=Pt({type:t,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator"],hostVars:8,hostBindings:function(r,i){r&1&&yt("click",function(n){return i._checkDisabled(n)})("mouseenter",function(){return i._handleMouseEnter()}),r&2&&(ke("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled)("disabled",i.disabled||null),ee("mat-mdc-menu-item-highlighted",i._highlighted)("mat-mdc-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",Ut],disableRipple:[2,"disableRipple","disableRipple",Ut]},exportAs:["matMenuItem"],standalone:!0,features:[ji,Kt],attrs:VBt,ngContentSelectors:UBt,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(r,i){r&1&&(Mi(jBt),pe(0),N(1,"span",0),pe(2,1),F(),Ot(3,"div",1),Wt(4,HBt,2,0,":svg:svg",2)),r&2&&($(3),mt("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),$(),ae(i._triggersSubmenu?4:-1))},dependencies:[ac],encapsulation:2,changeDetection:0}),t})(),ZBt=new ht("MatMenuContent"),oy={transformMenu:to("transformMenu",[us("void",tr({opacity:0,transform:"scale(0.8)"})),jn("void => enter",Vn("120ms cubic-bezier(0, 0, 0.2, 1)",tr({opacity:1,transform:"scale(1)"}))),jn("* => void",Vn("100ms 25ms linear",tr({opacity:0})))]),fadeInItems:to("fadeInItems",[us("showing",tr({opacity:1})),jn("void => *",[tr({opacity:0}),Vn("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},g7t=oy.fadeInItems,v7t=oy.transformMenu,$Bt=0,XBt=new ht("mat-menu-default-options",{providedIn:"root",factory:qBt});function qBt(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}var Hl=(()=>{let t=class{get xPosition(){return this._xPosition}set xPosition(i){this._xPosition=i,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(i){this._yPosition=i,this.setPositionClasses()}set panelClass(i){let n=this._previousPanelClass,s=x({},this._classList);n&&n.length&&n.split(" ").forEach(a=>{s[a]=!1}),this._previousPanelClass=i,i&&i.length&&(i.split(" ").forEach(a=>{s[a]=!0}),this._elementRef.nativeElement.className=""),this._classList=s}get classList(){return this.panelClass}set classList(i){this.panelClass=i}constructor(i,n,s,a){this._elementRef=i,this._changeDetectorRef=a,this._elevationPrefix="mat-elevation-z",this._baseElevation=null,this._directDescendantItems=new $m,this._classList={},this._panelAnimationState="void",this._animationDone=new Bt,this.closed=new It,this.close=this.closed,this.panelId=`mat-menu-panel-${$Bt++}`,this._injector=K(Re),this.overlayPanelClass=s.overlayPanelClass||"",this._xPosition=s.xPosition,this._yPosition=s.yPosition,this.backdropClass=s.backdropClass,this.overlapTrigger=s.overlapTrigger,this.hasBackdrop=s.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new E4(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(fr(this._directDescendantItems),_i(i=>lr(...i.map(n=>n._focused)))).subscribe(i=>this._keyManager.updateActiveItem(i)),this._directDescendantItems.changes.subscribe(i=>{let n=this._keyManager;if(this._panelAnimationState==="enter"&&n.activeItem?._hasFocus()){let s=i.toArray(),a=Math.max(0,Math.min(s.length-1,n.activeItemIndex||0));s[a]&&!s[a].disabled?n.setActiveItem(a):n.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy()}_hovered(){return this._directDescendantItems.changes.pipe(fr(this._directDescendantItems),_i(i=>lr(...i.map(n=>n._hovered))))}addItem(i){}removeItem(i){}_handleKeydown(i){let n=i.keyCode,s=this._keyManager;switch(n){case 27:ps(i)||(i.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(n===38||n===40)&&s.setFocusOrigin("keyboard"),s.onKeydown(i);return}i.stopPropagation()}focusFirstItem(i="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=pc(()=>{let n=null;if(this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!n||!n.contains(document.activeElement)){let s=this._keyManager;s.setFocusOrigin(i).setFirstItemActive(),!s.activeItem&&n&&n.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(i){if(this._baseElevation===null){let o=(typeof getComputedStyle=="function"?getComputedStyle(this._elementRef.nativeElement):null)?.getPropertyValue("--mat-menu-base-elevation-level")||"8";this._baseElevation=parseInt(o)}let n=Math.min(this._baseElevation+i,24),s=`${this._elevationPrefix}${n}`,a=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));if(!a||a===this._previousElevation){let o=x({},this._classList);this._previousElevation&&(o[this._previousElevation]=!1),o[s]=!0,this._previousElevation=s,this._classList=o}}setPositionClasses(i=this.xPosition,n=this.yPosition){this._classList=Q(x({},this._classList),{"mat-menu-before":i==="before","mat-menu-after":i==="after","mat-menu-above":n==="above","mat-menu-below":n==="below"}),this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(i){this._animationDone.next(i),this._isAnimating=!1}_onAnimationStart(i){this._isAnimating=!0,i.toState==="enter"&&this._keyManager.activeItemIndex===0&&(i.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(fr(this._allItems)).subscribe(i=>{this._directDescendantItems.reset(i.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(Zt),R(XBt),R(di))},t.\u0275cmp=Pt({type:t,selectors:[["mat-menu"]],contentQueries:function(r,i,n){if(r&1&&(Xi(n,ZBt,5),Xi(n,Vu,5),Xi(n,Vu,4)),r&2){let s;oe(s=le())&&(i.lazyContent=s.first),oe(s=le())&&(i._allItems=s),oe(s=le())&&(i.items=s)}},viewQuery:function(r,i){if(r&1&&gi(Vs,5),r&2){let n;oe(n=le())&&(i.templateRef=n.first)}},hostVars:3,hostBindings:function(r,i){r&2&&ke("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",Ut],hasBackdrop:[2,"hasBackdrop","hasBackdrop",r=>r==null?null:Ut(r)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[We([{provide:ZT,useExisting:t}]),ji,Kt],ngContentSelectors:GBt,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mat-mdc-elevation-specific",3,"keydown","click","id"],[1,"mat-mdc-menu-content"]],template:function(r,i){r&1&&(Mi(),Wt(0,WBt,3,7,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-app-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-app-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-app-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-app-label-large-weight))}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;border-radius:var(--mat-menu-container-shape, var(--mat-app-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-app-surface-container));will-change:transform,opacity}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.mat-mdc-menu-panel.ng-animating:has(.mat-mdc-menu-content:empty){display:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color, var(--mat-app-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing);margin-top:var(--mat-menu-divider-top-spacing)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mat-menu-item-leading-spacing);padding-right:var(--mat-menu-item-trailing-spacing);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}[dir=rtl] .mat-mdc-menu-item{padding-right:var(--mat-menu-item-leading-spacing);padding-left:var(--mat-menu-item-trailing-spacing)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing);padding-right:var(--mat-menu-item-with-icon-trailing-spacing)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-right:var(--mat-menu-item-with-icon-leading-spacing);padding-left:var(--mat-menu-item-with-icon-trailing-spacing)}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-app-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing);height:var(--mat-menu-item-icon-size);width:var(--mat-menu-item-icon-size)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color)}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color)}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[oy.transformMenu,oy.fadeInItems]},changeDetection:0}),t})(),UG=new ht("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let t=K(Ar);return()=>t.scrollStrategies.reposition()}});function KBt(t){return()=>t.scrollStrategies.reposition()}var YBt={provide:UG,deps:[Ar],useFactory:KBt},ML=Ku({passive:!0}),E0=(()=>{let t=class{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(i){this.menu=i}get menu(){return this._menu}set menu(i){i!==this._menu&&(this._menu=i,this._menuCloseSubscription.unsubscribe(),i&&(this._parentMaterialMenu,this._menuCloseSubscription=i.close.subscribe(n=>{this._destroyMenu(n),(n==="click"||n==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(i,n,s,a,o,l,c,h,p){this._overlay=i,this._element=n,this._viewContainerRef=s,this._menuItemInstance=l,this._dir=c,this._focusMonitor=h,this._ngZone=p,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=vi.EMPTY,this._hoverSubscription=vi.EMPTY,this._menuCloseSubscription=vi.EMPTY,this._changeDetectorRef=K(di),this._handleTouchStart=m=>{hT(m)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new It,this.onMenuOpen=this.menuOpened,this.menuClosed=new It,this.onMenuClose=this.menuClosed,this._scrollStrategy=a,this._parentMaterialMenu=o instanceof Hl?o:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,ML)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,ML),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){let i=this.menu;if(this._menuOpen||!i)return;let n=this._createOverlay(i),s=n.getConfig(),a=s.positionStrategy;this._setPosition(i,a),s.hasBackdrop=i.hasBackdrop==null?!this.triggersSubmenu():i.hasBackdrop,n.attach(this._getPortal(i)),i.lazyContent&&i.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(i),i instanceof Hl&&(i._startAnimation(),i._directDescendantItems.changes.pipe(Me(i.close)).subscribe(()=>{a.withLockedPosition(!1).reapplyLastPosition(),a.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(i,n){this._focusMonitor&&i?this._focusMonitor.focusVia(this._element,i,n):this._element.nativeElement.focus(n)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(i){if(!this._overlayRef||!this.menuOpen)return;let n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&(i==="keydown"||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof Hl?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(Ye(s=>s.toState==="void"),br(1),Me(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n?.lazyContent?.detach())}_initMenu(i){i.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,i.direction=this.dir,this._setMenuElevation(i),i.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(i){if(i.setElevation){let n=0,s=i.parentMenu;for(;s;)n++,s=s.parentMenu;i.setElevation(n)}}_setIsMenuOpen(i){i!==this._menuOpen&&(this._menuOpen=i,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(i),this._changeDetectorRef.markForCheck())}_createOverlay(i){if(!this._overlayRef){let n=this._getOverlayConfig(i);this._subscribeToPositions(i,n.positionStrategy),this._overlayRef=this._overlay.create(n),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(i){return new mp({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:i.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:i.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(i,n){i.setPositionClasses&&n.positionChanges.subscribe(s=>{let a=s.connectionPair.overlayX==="start"?"after":"before",o=s.connectionPair.overlayY==="top"?"below":"above";this._ngZone?this._ngZone.run(()=>i.setPositionClasses(a,o)):i.setPositionClasses(a,o)})}_setPosition(i,n){let[s,a]=i.xPosition==="before"?["end","start"]:["start","end"],[o,l]=i.yPosition==="above"?["bottom","top"]:["top","bottom"],[c,h]=[o,l],[p,m]=[s,a],f=0;if(this.triggersSubmenu()){if(m=s=i.xPosition==="before"?"start":"end",a=p=s==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let g=this._parentMaterialMenu.items.first;this._parentInnerPadding=g?g._getHostElement().offsetTop:0}f=o==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else i.overlapTrigger||(c=o==="top"?"bottom":"top",h=l==="top"?"bottom":"top");n.withPositions([{originX:s,originY:c,overlayX:p,overlayY:o,offsetY:f},{originX:a,originY:c,overlayX:m,overlayY:o,offsetY:f},{originX:s,originY:h,overlayX:p,overlayY:l,offsetY:-f},{originX:a,originY:h,overlayX:m,overlayY:l,offsetY:-f}])}_menuClosingActions(){let i=this._overlayRef.backdropClick(),n=this._overlayRef.detachments(),s=this._parentMaterialMenu?this._parentMaterialMenu.closed:Ge(),a=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Ye(o=>o!==this._menuItemInstance),Ye(()=>this._menuOpen)):Ge();return lr(i,s,a,n)}_handleMousedown(i){uT(i)||(this._openedBy=i.button===0?"mouse":void 0,this.triggersSubmenu()&&i.preventDefault())}_handleKeydown(i){let n=i.keyCode;(n===13||n===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(n===39&&this.dir==="ltr"||n===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(i){this.triggersSubmenu()?(i.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Ye(i=>i===this._menuItemInstance&&!i.disabled),Jl(0,NP)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Hl&&this.menu._isAnimating?this.menu._animationDone.pipe(br(1),Jl(0,NP),Me(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(i){return(!this._portal||this._portal.templateRef!==i.templateRef)&&(this._portal=new Yu(i.templateRef,this._viewContainerRef)),this._portal}};return t.\u0275fac=function(r){return new(r||t)(R(Ar),R(te),R(Zn),R(UG),R(ZT,8),R(Vu,10),R(Gn,8),R(ul),R(Zt))},t.\u0275dir=qt({type:t,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(r,i){r&1&&yt("click",function(n){return i._handleClick(n)})("mousedown",function(n){return i._handleMousedown(n)})("keydown",function(n){return i._handleKeydown(n)}),r&2&&ke("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0}),t})(),T0=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[YBt],imports:[ti,$s,ai,Ju,Ld,ai]}),t})(),JBt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["ccf-metadata-help"]],standalone:!0,features:[Kt],decls:14,vars:1,consts:[["help","matMenu"],["mat-icon-button","","aria-label","Open the help menu",1,"help",3,"matMenuTriggerFor"],["backdropClass","metadata-help-backdrop",1,"metadata-help"],["mat-menu-item","","href","https://youtu.be/18imQj068Iw","target","_blank","rel","noopener noreferrer"],["mat-menu-item","","href","https://github.com/hubmapconsortium/hra-ui/wiki/Application-Guides#registration-user-interface","target","_blank","rel","noopener noreferrer"],["mat-menu-item","","href","https://doi.org/10.5281/zenodo.5575776","target","_blank","rel","noopener noreferrer"],[1,"menu-divider"],["mat-menu-item","","href","https://apps.humanatlas.io/eui/","target","_blank","rel","noopener noreferrer"]],template:function(r,i){if(r&1&&(N(0,"button",1)(1,"mat-icon"),ut(2,"help"),F()(),N(3,"mat-menu",2,0)(5,"a",3),ut(6," Watch video tutorial "),F(),N(7,"a",4),ut(8," Use app guide "),F(),N(9,"a",5),ut(10," Use standard operating procedure "),F(),Ot(11,"mat-divider",6),N(12,"a",7),ut(13," Explore all registrations "),F()()),r&2){let n=fi(4);mt("matMenuTriggerFor",n)}},dependencies:[wf,A0,Hi,gr,T0,Hl,Vu,E0,Vr,$n],styles:[".metadata-help{--mat-divider-color: #acb5c3;--mat-menu-divider-bottom-spacing: 0;--mat-menu-divider-top-spacing: 0}"],changeDetection:0}),t})(),QBt=()=>({}),tDt=()=>["Please add required metadata."];function eDt(t,e){t&1&&(N(0,"button",0)(1,"mat-icon"),ut(2,"close"),F()())}function iDt(t,e){if(t&1&&Ot(0,"hra-error-indicator",6),t&2){let r=Rt();mt("errors",r.fileErrors)}}function rDt(t,e){t&1&&Ot(0,"hra-error-indicator",14),t&2&&mt("errors",so(1,tDt))}function nDt(t,e){if(t&1&&(N(0,"button",15),ut(1," Register "),N(2,"mat-icon",17),ut(3,"arrow_right_alt"),F()()),t&2){let r=Rt();mt("disabled",r.metadataForm.invalid)}}function sDt(t,e){if(t&1&&(N(0,"button",16),ut(1," Update Metadata "),F()),t&2){let r=Rt();mt("disabled",r.metadataForm.pristine||r.metadataForm.invalid)}}var aDt=(()=>{let t=class{constructor(){this.config=K(y0),this.dialog=K(dl),this.ref=K(fp),this.referenceState=K(zu),this.nnfb=K(mSt),this.metadataForm=this.nnfb.group({author:this.nnfb.group({firstName:["",[lu.required]],middleName:[""],lastName:["",[lu.required]],email:["",[lu.email]],orcidId:[""]}),donor:this.nnfb.group({organ:new yu(null,[lu.required]),sex:["",[lu.required]],consortium:[""],doi:[""]})}),this.fileLoader=GMt,this.fileErrors=void 0,this.previousRegistration=void 0,this.metadataForm.patchValue({author:this.config.pageSnapshot?.user,donor:this.config.modelSnapshot})}setPreviousRegistration(i){if(typeof i=="object"&&i){let{creator_first_name:n,creator_middle_name:s,creator_last_name:a,creator_email:o,creator_orcid:l,placement:c,consortium:h,publication_doi:p}=this.previousRegistration=i,m=Array.isArray(c)?c[0].target:c?.target,f=m?this.referenceState.getOrganData(m):void 0;this.metadataForm.reset({author:{firstName:n,middleName:s,lastName:a,email:o,orcidId:l},donor:{organ:f?.organ,sex:f?.sex,consortium:h,doi:p}})}}setFileErrors(i){if(i.type==="type-error")this.fileErrors=["File format not supported: Please upload a JSON file."];else if(i.cause instanceof Error){let n=i.cause.message,s=/line (\d+)/i.exec(n)?.[1]??"?",a=/column (\d+)/i.exec(n)?.[1]??"?";this.fileErrors=[`Error in JSON at line ${s} column ${a}:`,"Please upload a file with valid JSON."]}}clearPreviousRegistration(){this.fileErrors=void 0,this.previousRegistration=void 0,this.metadataForm.reset()}submit(){this.config.mode==="edit"&&this.hasOrganChange()?this.dialog.open(fBt,{width:"456px",panelClass:"metadata-confirmation-modal"}).beforeClosed().subscribe(i=>{i&&this.submitResult()}):this.submitResult()}hasOrganChange(){let i=this.config.modelSnapshot?.organ,n=this.metadataForm.get(["donor","organ"]);return i!==void 0&&n?.value!==i}submitResult(){this.ref.close(Q(x({},this.metadataForm.value),{previousRegistration:this.previousRegistration}))}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["ccf-metadata-modal"]],standalone:!0,features:[We([{provide:yT,useValue:{subscriptSizing:"dynamic"}}]),Kt],decls:24,vars:13,consts:[["mat-icon-button","","mat-dialog-title","","mat-dialog-close","",1,"close"],["mat-dialog-content","",1,"content"],[1,"header"],[1,"title"],[1,"form",3,"ngSubmit","formGroup"],["step","1",1,"upload",3,"title"],[1,"errors",3,"errors"],["accept","application/json,.json,application/ld+json,.jsonld",3,"loadCancelled","loadCompleted","loadErrored","loader","options"],["step","2",1,"metadata",3,"title"],["mat-flat-button","","hraSecondaryButton","","hraCallToActionButton","","href","https://orcid.org/register","target","_blank","rel","noopener noreferrer",1,"orcid-help"],["iconPositionEnd",""],[1,"author",3,"form"],[1,"donor",3,"form"],["step","3",1,"register",3,"title"],[1,"error",3,"errors"],["mat-flat-button","","hraPrimaryButton","","hraCallToActionButton","","type","submit",3,"disabled"],["mat-flat-button","","hraPrimaryButton","","type","submit",3,"disabled"],["iconPositionEnd","",1,"material-symbols-rounded"]],template:function(r,i){r&1&&(Wt(0,eDt,3,0,"button",0),N(1,"ng-scrollbar")(2,"div",1)(3,"div",2)(4,"span",3),ut(5,"Tissue Registration Metadata"),F(),Ot(6,"ccf-metadata-help"),F(),N(7,"form",4),yt("ngSubmit",function(){return i.submit()}),N(8,"hra-workflow-card",5),Wt(9,iDt,1,1,"hra-error-indicator",6),N(10,"ccf-file-upload",7),yt("loadCancelled",function(){return i.clearPreviousRegistration()})("loadCompleted",function(n){return i.clearPreviousRegistration(),i.setPreviousRegistration(n[0])})("loadErrored",function(n){return i.clearPreviousRegistration(),i.setFileErrors(n)}),ut(11," Upload "),F()(),N(12,"hra-workflow-card",8)(13,"hra-workflow-card-extra")(14,"a",9),ut(15," Get ORCID "),N(16,"mat-icon",10),ut(17,"arrow_right_alt"),F()()(),Ot(18,"ccf-metadata-author-form",11)(19,"ccf-metadata-donor-form",12),F(),N(20,"hra-workflow-card",13),Wt(21,rDt,1,2,"hra-error-indicator",14)(22,nDt,4,1,"button",15)(23,sDt,2,1,"button",16),F()()()()),r&2&&(ae(i.config.mode==="edit"?0:-1),$(7),mt("formGroup",i.metadataForm),$(),mt("title","Optional: Upload Previous Registration"),$(),ae(i.fileErrors?9:-1),$(),mt("loader",i.fileLoader)("options",so(12,QBt)),$(2),mt("title","Add Metadata"),$(6),mt("form",i.metadataForm.controls.author),$(),mt("form",i.metadataForm.controls.donor),$(),mt("title","Register Data Spatially"),$(),ae(i.metadataForm.invalid?21:-1),$(),ae(i.config.mode==="create"?22:23))},dependencies:[u0,lSt,QE,pp,rg,kT,ig,gp,Hi,gr,Vr,CIt,ba,$n,OIt,w7,x7,kG,DRt,xRt,$Rt,NG,ZRt,iBt,pBt,zBt,JBt],styles:["[_nghost-%COMP%]{display:block;position:relative;width:100vw;height:100vh;--scrollbar-offset: 2;--mat-dialog-content-padding: 3rem 1.5rem}[_nghost-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;inset:1rem 1rem auto auto;padding:.5rem;margin:0;z-index:2}[_nghost-%COMP%]   .close[_ngcontent-%COMP%]:before{display:none}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;max-height:unset!important}[_nghost-%COMP%]   .content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{max-width:43.5rem;min-width:32.5rem;width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:2rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font:var(--sys-headline-large);letter-spacing:var(--sys-headline-large-tracking)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .upload[_ngcontent-%COMP%]   .errors[_ngcontent-%COMP%]{margin-bottom:2rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{margin-bottom:1rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin-bottom:2rem}  .metadata-modal{--mdc-dialog-container-shape: 0;--mdc-dialog-container-color: var(--sys-surface-container-low)}  .metadata-modal .mat-mdc-dialog-surface{overflow-y:hidden!important}  .metadata-confirmation-modal{--mdc-dialog-container-color: var(--sys-surface-container-low)}"],changeDetection:0}),t})(),HG=(()=>{let t=class{constructor(){this.dialog=K(dl),this.modelState=K(xi),this.pageState=K(hr),this.registrationState=K(ur),this.sceneState=K(Lr)}openModal(i){this.dialog.open(aDt,{width:"100vw",maxWidth:"100vw",height:"100vh",maxHeight:"100vh",panelClass:"metadata-modal",hasBackdrop:!1,autoFocus:!1,disableClose:i==="create",data:{mode:i,pageSnapshot:i==="edit"?this.pageState.snapshot:void 0,modelSnapshot:i==="edit"?this.modelState.snapshot:void 0}}).afterClosed().subscribe(n=>{n&&this.updateState(i,n)})}updateState(i,n){let{modelState:s,pageState:a,registrationState:o,sceneState:l}=this,{author:c,donor:{organ:h,sex:p,consortium:m,doi:f},previousRegistration:g}=n;g&&o.editRegistration(g),a.setUserName(c),a.setEmail(c.email),a.setOrcidId(c.orcidId),a.registrationStarted();let _=s.snapshot.organ;s.setOrgan(h),s.setSex(p),s.setConsortium(m),s.setDoi(f&&HMt(f)),h!==_&&s.setOrganDefaults(),l.setDeferCollisions(g!==void 0)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),RL="rui-screen-size-notice",oDt=1280,lDt=832;function cDt(t){if(Ut(localStorage.getItem(RL)))return uA;let e=()=>window.innerWidth<oDt||window.innerHeight<lDt;return mr(window,"resize").pipe(Gd(50),fr({}),Ye(e),br(1),kt(()=>t.open(uDt,{panelClass:"screen-size-notice-panel",width:"456px",disableClose:!0,closeOnNavigation:!1})),kt(r=>r.afterClosed()),YN()).subscribe(()=>{localStorage.setItem(RL,"true")})}var uDt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["ccf-screen-size-notice"]],standalone:!0,features:[Kt],decls:10,vars:0,consts:[["mat-dialog-title","",1,"header"],["mat-icon-button","","mat-dialog-close","",1,"header-close"],[1,"content"],[1,"buttons"],["mat-button","","mat-dialog-close",""]],template:function(r,i){r&1&&(N(0,"h3",0),ut(1," Heads up! "),N(2,"button",1)(3,"mat-icon"),ut(4,"close"),F()()(),N(5,"mat-dialog-content",2),ut(6,` This website is optimized for Chrome or Firefox on a minimum resolution of 1280x832.
`),F(),N(7,"mat-dialog-actions",3)(8,"button",4),ut(9,"Dismiss"),F()())},dependencies:[ti,Vr,ba,$n,rg,kT,ig,T7,gp,Hi,gr],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{--mat-dialog-headline-padding: 0 0 0 2rem;font:var(--sys-headline-small);letter-spacing:var(--sys-headline-small-tracking);display:flex;align-items:flex-end;justify-content:space-between}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]:before{display:none}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .header-close[_ngcontent-%COMP%]{margin:.75rem}[_nghost-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{--mat-dialog-with-actions-content-padding: 0 2rem;font:var(--sys-body-large);letter-spacing:var(--sys-body-large-tracking);--mdc-dialog-supporting-text-color: var(--sys-primary)}[_nghost-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{--mat-dialog-actions-padding: 1rem 2rem}  .mat-mdc-dialog-container .mdc-dialog__surface{--mdc-dialog-container-shape: 1rem;box-shadow:unset}"],changeDetection:0}),t})(),hDt=tl(uN()),GG=()=>[];function dDt(t,e){if(t&1){let r=Qe();N(0,"ccf-spatial-search-keyboard-ui-behavior",7),pi(1,"async"),yt("changePosition",function(i){Lt(r);let n=Rt();return Nt(n.model.setPosition(i))}),F()}if(t&2){let r=Rt();mt("delta",1)("shiftDelta",2)("position",mi(1,4,r.position$))("disablePositionChange",r.disablePositionChange)}}function pDt(t,e){if(t&1){let r=Qe();N(0,"ccf-body-ui",8),pi(1,"async"),pi(2,"async"),pi(3,"async"),yt("rotationChange",function(i){Lt(r),Rt();let n=fi(4);return n.rotation=i[0],Nt(n.rotationX=i[1])}),F()}if(t&2){let r,i,n=Rt();mt("scene",(r=mi(1,5,n.scene.nodes$))!==null&&r!==void 0?r:so(11,GG))("rotation",(i=mi(2,7,n.scene.rotation$))!==null&&i!==void 0?i:0)("bounds",mi(3,9,n.bounds$))("zoom",11.5)("interactive",!0)}}function mDt(t,e){if(t&1){let r=Qe();N(0,"ccf-body-ui",9),pi(1,"async"),pi(2,"async"),yt("nodeDrag",function(i){Lt(r);let n=Rt();return Nt(n.handleNodeDrag(i))}),F()}if(t&2){let r,i=Rt();mt("scene",(r=mi(1,4,i.scene.rotatedNodes$))!==null&&r!==void 0?r:so(8,GG))("interactive",!1)("bounds",mi(2,6,i.bounds$))("zoom",11.5)}}var fDt=(()=>{let t=class{constructor(i,n,s,a,o,l){this.model=i,this.page=n,this.registration=s,this.scene=a,this.rootRef=o,this.cdr=l,this.clsName="ccf-content",this.disablePositionChange=!1,this.position$=this.model.position$.pipe(kt(c=>({x:Math.floor(c.x),y:Math.floor(c.y),z:Math.floor(c.z)}))),this.is3DView$=this.model.viewType$.pipe(kt(c=>c==="3d")),this.bounds$=this.model.organDimensions$.pipe(kt(c=>({x:Math.max(c.x,this.model.defaultPosition.x+40)/1e3,y:Math.max(c.y,this.model.defaultPosition.y+40)/1e3,z:Math.max(c.z,this.model.defaultPosition.z+40)/1e3})),jP("x"),jP("y")),this.isNarrowView=!1,this.debugMode=!1,this.showDebugButtons=!Jo.production}ngOnInit(){this.sensor=new hDt.ResizeSensor(this.rootRef.nativeElement,({width:i})=>{let n=i<440;this.isNarrowView!==n&&(this.isNarrowView=n,this.cdr.markForCheck())})}ngOnDestroy(){this.sensor.detach()}setViewType(i){this.model.setViewType(i?"3d":"register")}handleNodeDrag(i){if(i.node["@id"]==="#DraftPlacement"&&i.info.coordinate){let[n,s]=i.info.coordinate.map(p=>p*1e3),{position:a,viewSide:o,organDimensions:l}=this.model.snapshot,c=[l.x,l.y,l.z].map(p=>p/2),h=a;switch(o){case"anterior":h={x:n+c[0],y:s+c[1],z:a.z};break;case"posterior":h={x:-n+c[0],y:s+c[1],z:a.z};break;case"left":h={x:a.x,y:s+c[1],z:-n+c[2]};break;case"right":h={x:a.x,y:s+c[1],z:n+c[2]};break}this.model.setPosition(h)}}};return t.\u0275fac=function(r){return new(r||t)(R(xi),R(hr),R(ur),R(Lr),R(te),R(di))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-content"]],hostVars:2,hostBindings:function(r,i){r&2&&Ai(i.clsName)},inputs:{disablePositionChange:"disablePositionChange"},decls:12,vars:17,consts:[["gizmo",""],[1,"top-bar"],[3,"delta","shiftDelta","position","disablePositionChange","changePosition",4,"ngIf"],[1,"gizmo",3,"scene","rotation","interactive","zoom"],[1,"main-content"],["class","body-ui","camera","perspective",3,"scene","rotation","bounds","zoom","interactive","rotationChange",4,"ngIf"],["class","body-ui","camera","orthographic",3,"scene","interactive","bounds","zoom","nodeDrag",4,"ngIf"],[3,"changePosition","delta","shiftDelta","position","disablePositionChange"],["camera","perspective",1,"body-ui",3,"rotationChange","scene","rotation","bounds","zoom","interactive"],["camera","orthographic",1,"body-ui",3,"nodeDrag","scene","interactive","bounds","zoom"]],template:function(r,i){if(r&1&&(N(0,"div",1),Wt(1,dDt,2,6,"ccf-spatial-search-keyboard-ui-behavior",2),pi(2,"async"),Ot(3,"ccf-body-ui",3,0),pi(5,"async"),pi(6,"async"),F(),N(7,"div",4),Wt(8,pDt,4,12,"ccf-body-ui",5),pi(9,"async"),Wt(10,mDt,3,9,"ccf-body-ui",6),pi(11,"async"),F()),r&2){let n;$(),mt("ngIf",mi(2,7,i.page.registrationStarted$)),$(2),mt("scene",mi(5,9,i.scene.gizmo$))("rotation",(n=mi(6,11,i.scene.rotation$))!==null&&n!==void 0?n:0)("interactive",!1)("zoom",9.5),$(5),mt("ngIf",mi(9,13,i.model.viewType$)==="3d"),$(2),mt("ngIf",mi(11,15,i.model.viewType$)==="register")}},dependencies:[ep,gMt,ckt,ip],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;overflow:hidden;background-color:#000;border:1px solid #acb5c3;border-bottom:none}[_nghost-%COMP%]   .top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:7.5rem;padding:0 1rem}[_nghost-%COMP%]   .top-bar[_ngcontent-%COMP%]   .reset[_ngcontent-%COMP%]{transform:scaleX(-1);cursor:pointer;transition:.6s;font-size:2rem;height:2rem;width:2rem}[_nghost-%COMP%]   .top-bar[_ngcontent-%COMP%]   .gizmo[_ngcontent-%COMP%]{width:3.375rem}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]{display:flex;height:calc(100% - 7.5rem);padding:.5rem}[_nghost-%COMP%]   .main-content[_ngcontent-%COMP%]   .body-ui[_ngcontent-%COMP%]{transition:opacity 1s}[_nghost-%COMP%]   .ccf-store-debug[_ngcontent-%COMP%]{color:#fff;position:absolute;top:.5rem;max-width:55rem}"],changeDetection:0}),t})();function gDt(t,e){if(t&1){let r=Qe();N(0,"div",1)(1,"mat-icon",2),yt("click",function(){let i=Lt(r).$implicit,n=Rt();return Nt(n.menuOpen(i))}),F(),N(2,"div",3),ut(3),F(),N(4,"div",4)(5,"ccf-opacity-slider",5),yt("opacityChange",function(i){Lt(r);let n=Rt();return Nt(n.updateOpacity(i))})("opacityReset",function(){Lt(r);let i=Rt();return Nt(i.resetItem())})("visibilityToggle",function(){let i=Lt(r).$implicit,n=Rt();return Nt(n.toggleVisibility(i))}),F()()()}if(t&2){let r,i=e.$implicit,n=Rt();ee("selected",n.selection?n.getId(0,n.selection)===n.getId(0,i):!1),$(),ee("fade",!i.visible),$(),mt("hraMicroTooltip",i.name.charAt(0).toUpperCase()+i.name.slice(1)),$(),Sn(" ",i.name.charAt(0).toUpperCase()+i.name.slice(1)," "),$(),ee("visible",i.id===(n.selection==null?null:n.selection.id))("hidden",i.id!==(n.selection==null?null:n.selection.id)),$(),mt("opacity",(r=n.selection==null?null:n.selection.opacity)!==null&&r!==void 0?r:20)}}var vDt=(()=>{let t=class{constructor(i,n){this.el=i,this.ga=n,this.clsName="ccf-visibility-menu",this.hover=new It,this.itemsChange=new It}toggleVisibility(i){i=Q(x({},i),{visible:!i.visible}),this.selection&&i.id===this.selection.id&&(this.selection=Q(x({},this.selection),{visible:i.visible})),this.ga.event("visibility_toggled","visibility_menu",""+i.id,+i.visible),this.updateOpacity(i.opacity)}menuOpen(i){this.selection=i===this.selection?void 0:i,this.hover.emit(i)}updateOpacity(i){if(!this.selection)return;let n=Q(x({},this.selection),{opacity:i,visible:i?i>0:!1});this.selection=n,n.id==="all"?this.setAllOpacity(n.opacity):(this.items=this.items.map(s=>s.id===n.id?n:s),this.ga.event("opacity_update","visibility_menu",""+n.id,n.opacity)),this.itemsChange.emit(this.items)}resetItem(){if(this.selection){let i=Q(x({},this.selection),{opacity:20,visible:!0});this.selection=i,this.selection.id==="all"?this.setAllOpacity(i.opacity):(this.items=this.items.map(n=>n.id===i.id?i:n),this.ga.event("item_reset","visibility_menu",""+i.id)),this.itemsChange.emit(this.items)}}setAllOpacity(i){this.items=this.items.map(n=>Q(x({},n),{opacity:i,visible:!0})),this.ga.event("all_items_opacity_update","visibility_menu",void 0,i),this.itemsChange.emit(this.items)}getId(i,n){return n.id}closeSlider(i){this.selection&&i.target instanceof Node&&(this.el.nativeElement.contains(i.target)||(this.selection=void 0,this.hover.emit(void 0)))}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(gs))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-visibility-menu"]],hostVars:2,hostBindings:function(r,i){r&1&&yt("mouseup",function(n){return i.closeSlider(n)},!1,cb),r&2&&Ai(i.clsName)},inputs:{items:"items",selection:"selection"},outputs:{hover:"hover",itemsChange:"itemsChange"},decls:1,vars:2,consts:[["class","item-entry",3,"selected",4,"ngFor","ngForOf","ngForTrackBy"],[1,"item-entry"],["hraMicroTooltip","Edit opacity","svgIcon","app:opacity",1,"opacity-icon",3,"click"],[1,"item-name",3,"hraMicroTooltip"],[1,"slider"],[3,"opacityChange","opacityReset","visibilityToggle","opacity"]],template:function(r,i){r&1&&Wt(0,gDt,6,11,"div",0),r&2&&mt("ngForOf",i.items)("ngForTrackBy",i.getId)},dependencies:[bS,gr,DIt,co],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;max-height:55vh;overflow-y:auto}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:.25rem}[_nghost-%COMP%]   .item-entry.selected[_ngcontent-%COMP%]{z-index:1;background:color-mix(in srgb,var(--sys-tertiary) 20%,transparent)}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .opacity-icon[_ngcontent-%COMP%]{transition:.6s;min-width:1.5rem;cursor:pointer}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .opacity-icon.fade[_ngcontent-%COMP%]{opacity:.12}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{font:var(--sys-label-small);color:var(--sys-primary);-webkit-user-select:none;user-select:none;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:.25rem}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{position:fixed;left:21rem;transition-timing-function:ease-in-out;transition-property:opacity;transition-duration:.3s}[_nghost-%COMP%]   .item-entry[_ngcontent-%COMP%]   .slider.hidden[_ngcontent-%COMP%]{transition-duration:.1s;opacity:0;pointer-events:none}"],changeDetection:0}),t})(),_Dt="225ms cubic-bezier(0.4,0.0,0.2,1)",bDt=to("bodyExpansion",[us("collapsed, void",tr({height:"0px",visibility:"hidden",opacity:0})),us("expanded",tr({height:"*",visibility:"",opacity:1})),jn("expanded <=> collapsed, void => collapsed",Vn(_Dt))]),WG=["*"],yDt=["body"],wDt=[[["hra-expansion-panel-actions"]],[["hra-expansion-panel-header-content"]],"*"],xDt=["hra-expansion-panel-actions","hra-expansion-panel-header-content","*"];function CDt(t,e){if(t&1){let r=Qe();N(0,"button",9),yt("click",function(){Lt(r),Rt();let i=fi(2);return Nt(i.toggle())}),N(1,"mat-icon",10),ut(2),F()()}if(t&2){Rt();let r=fi(2);$(),mt("hraMicroTooltip",r.expanded?"Collapse":"Expand"),$(),Sn(" ",r.expanded?"remove":"add"," ")}}var kDt=0,ZG=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-expansion-panel-actions"]],standalone:!0,features:[Kt],ngContentSelectors:WG,decls:1,vars:0,template:function(r,i){r&1&&(Mi(),pe(0))},encapsulation:2,changeDetection:0}),t})(),$G=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-expansion-panel-header-content"]],standalone:!0,features:[Kt],ngContentSelectors:WG,decls:1,vars:0,template:function(r,i){r&1&&(Mi(),pe(0))},encapsulation:2,changeDetection:0}),t})(),_p=(()=>{let t=class{constructor(){this.title=je.required(),this.expanded=je(!0,{transform:Ut}),this.disabled=je(!1,{transform:Ut}),this.tooltip=je(),this.id=kDt++,this.titleId=`expansion-panel-title-${this.id}`,this.bodyId=`expansion-panel-body-${this.id}`,this.renderer=K(Gu),this.bodyElementRef=Hit.required("body"),this.body=rr(()=>this.bodyElementRef().nativeElement),this.animationsDisabled=K(kr)==="NoopAnimations"}animationStart(i){i.fromState!=="void"&&!this.animationsDisabled&&this.renderer.setAttribute(this.body(),"inert","")}animationDone(i){i.fromState!=="void"&&!this.animationsDisabled&&this.renderer.removeAttribute(this.body(),"inert")}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-expansion-panel"]],viewQuery:function(r,i){r&1&&Urt(i.bodyElementRef,yDt,5),r&2&&Q5()},inputs:{title:[1,"title"],expanded:[1,"expanded"],disabled:[1,"disabled"],tooltip:[1,"tooltip"]},standalone:!0,features:[Kt],ngContentSelectors:xDt,decls:16,vars:10,consts:[["accordionItem","cdkAccordionItem"],["body",""],["tabindex","0",3,"expanded"],[1,"header"],["mat-icon-button","","data-testid","toggle"],[1,"title",3,"hraMicroTooltip"],[1,"filler"],["role","region","data-testid","body",1,"content"],[1,"expansion-body"],["mat-icon-button","","data-testid","toggle",3,"click"],[3,"hraMicroTooltip"]],template:function(r,i){if(r&1){let n=Qe();Mi(wDt),N(0,"cdk-accordion")(1,"cdk-accordion-item",2,0)(3,"div",3),Wt(4,CDt,3,2,"button",4),N(5,"span",5),ut(6),F(),N(7,"span"),pe(8),F(),Ot(9,"div",6),N(10,"span"),pe(11,1),F()(),N(12,"div",7,1),yt("@bodyExpansion.start",function(s){return Lt(n),Nt(i.animationStart(s))})("@bodyExpansion.done",function(s){return Lt(n),Nt(i.animationDone(s))}),N(14,"div",8),pe(15,2),F()()()()}if(r&2){let n=fi(2);$(),mt("expanded",i.expanded),ke("aria-expanded",n.expanded)("aria-controls",i.bodyId),$(3),ae(i.disabled()?-1:4),$(),mt("hraMicroTooltip",i.tooltip()),ke("id",i.titleId),$(),Sn(" ",i.title()," "),$(6),mt("@bodyExpansion",n.expanded?"expanded":"collapsed"),ke("id",i.bodyId)("aria-labelledby",i.titleId)}},dependencies:[P7,YIt,O7,$n,Hi,gr,co],styles:['[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;font:var(--sys-label-medium);color:var(--sys-secondary)}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{font:var(--sys-label-large);display:flex;flex-direction:column}  -shadowcsshost-no-combinator .content[style*="visibility: hidden"] *{visibility:hidden!important}'],data:{animation:[bDt]},changeDetection:0}),t})(),ADt=()=>[],SDt=(()=>{let t=class{constructor(i,n,s){this.page=i,this.model=n,this.registration=s,this.clsName="ccf-left-sidebar",this.modalClosed=!1,this.organSelected$=this.model.organ$.pipe(kt(a=>a!==void 0)),this.extractionSiteTooltip="",this.asTooltip="Parts of the body in defined locations and regions, including the surface, internal organs and tissues. These structures may be described by gross or microscopic morphology and include functional tissue units and highly organized cellular ecosystems (such as alveoli in the lungs).",this.landmarksTooltip="Some organs have predefined landmarks to help guide manual tissue registration."}};return t.\u0275fac=function(r){return new(r||t)(R(hr),R(xi),R(ur))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-left-sidebar"]],hostVars:2,hostBindings:function(r,i){r&2&&Ai(i.clsName)},inputs:{modalClosed:"modalClosed"},decls:25,vars:12,consts:[["menu","matMenu"],["anatomical",""],["landmarks",""],[1,"opacity-settings"],["mat-icon-button","","hraIconButtonSize","large","aria-label","Icon to open nested menu","hraMicroTooltip","More",3,"matMenuTriggerFor"],[1,"opacity-overlay"],["mat-menu-item","","matRipple","","matRippleColor","#201E3D14"],[3,"click"],[1,"menu-divider"],[1,"as-expansion",3,"title","tooltip"],[3,"itemsChange","items"],[3,"title","tooltip"]],template:function(r,i){if(r&1){let n=Qe();N(0,"div",3),ut(1," Opacity Settings "),N(2,"button",4)(3,"mat-icon"),ut(4,"more_vert"),F()(),N(5,"mat-menu",5,0)(7,"button",6)(8,"span",7),yt("click",function(){Lt(n);let s=fi(19),a=fi(23);return s.setAllOpacity(20),Nt(a.setAllOpacity(0))}),ut(9,"Reset All Settings"),F()(),Ot(10,"mat-divider",8),N(11,"button",6)(12,"span",7),yt("click",function(){Lt(n);let s=fi(19);return Nt(s.setAllOpacity(20))}),ut(13,"Reset anatomical structures"),F()(),N(14,"button",6)(15,"span",7),yt("click",function(){Lt(n);let s=fi(23);return Nt(s.setAllOpacity(0))}),ut(16,"Reset landmarks"),F()()()(),N(17,"hra-expansion-panel",9)(18,"ccf-visibility-menu",10,1),pi(20,"async"),yt("itemsChange",function(s){return Lt(n),Nt(i.model.setAnatomicalStructures(s))}),F()(),N(21,"hra-expansion-panel",11)(22,"ccf-visibility-menu",10,2),pi(24,"async"),yt("itemsChange",function(s){return Lt(n),Nt(i.model.setExtractionSites(s))}),F()()}if(r&2){let n,s=fi(6);$(2),mt("matMenuTriggerFor",s),$(15),mt("title","Anatomical Structures")("tooltip",i.asTooltip),$(),mt("items",(n=mi(20,7,i.model.anatomicalStructures$))!==null&&n!==void 0?n:so(11,ADt)),$(3),mt("title","Landmarks")("tooltip",i.landmarksTooltip),$(),mt("items",mi(24,9,i.model.extractionSites$))}},dependencies:[gr,A0,vDt,_p,Hl,Vu,E0,lg,$n,co,ip],styles:["[_nghost-%COMP%]{display:block;height:100%}[_nghost-%COMP%]   .opacity-settings[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.5rem 1.25rem;font:var(--sys-label-large)}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]   ccf-visibility-menu[_ngcontent-%COMP%]{padding:0 .75rem}[_nghost-%COMP%]   .as-expansion[_ngcontent-%COMP%]{border-bottom:1px solid #acb5c3}  .opacity-overlay button.mat-mdc-menu-item .mat-mdc-menu-item-text{font:var(--sys-label-medium)}"],changeDetection:0}),t})(),BL={x:10,y:10,z:10},EDt=(()=>{let t=class{constructor(i){this.ga=i,this.clsName="ccf-block-size-input",this.blockSize=BL,this.blockSizeChange=new It}updateBlockSizes(i,n){let s=i.target;this.blockSize=Q(x({},this.blockSize),{[n]:+s.value}),this.ga.event("block_size_change","block_size_input",n,this.blockSize[n]),this.blockSizeChange.emit(this.blockSize)}refreshBlockSize(){this.blockSize=BL,this.ga.event("block_size_reset","block_size_input"),this.blockSizeChange.emit(this.blockSize)}};return t.\u0275fac=function(r){return new(r||t)(R(gs))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-block-size-input"]],hostVars:2,hostBindings:function(r,i){r&2&&Ai(i.clsName)},inputs:{blockSize:"blockSize"},outputs:{blockSizeChange:"blockSizeChange"},decls:15,vars:3,consts:[[1,"header"],[1,"size-inputs"],["hraMicroTooltip","Size is measured in millimeters",1,"field"],[1,"text","form-input-label"],["matInput","","type","number","placeholder","","matTooltip","Enter tissue block width.",1,"input",3,"keyup","value"],["matInput","","type","number","placeholder","","matTooltip","Enter tissue block height.",1,"input",3,"keyup","value"],["matInput","","type","number","placeholder","","matTooltip","Enter tissue block depth.",1,"input",3,"keyup","value"]],template:function(r,i){r&1&&(N(0,"div",0),ut(1,"Size"),F(),N(2,"div",1)(3,"mat-form-field",2)(4,"mat-label",3),ut(5,"Width"),F(),N(6,"input",4),yt("keyup",function(n){return i.updateBlockSizes(n,"x")}),F()(),N(7,"mat-form-field",2)(8,"mat-label",3),ut(9,"Height"),F(),N(10,"input",5),yt("keyup",function(n){return i.updateBlockSizes(n,"y")}),F()(),N(11,"mat-form-field",2)(12,"mat-label",3),ut(13,"Depth"),F(),N(14,"input",6),yt("keyup",function(n){return i.updateBlockSizes(n,"z")}),F()()()),r&2&&($(6),mt("value",i.blockSize.x),$(4),mt("value",i.blockSize.y),$(4),mt("value",i.blockSize.z))},dependencies:[th,Qu,Ko,co],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{align-items:center;padding:.5rem 0;font:var(--sys-label-medium)}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:5rem;--mdc-filled-text-field-input-text-color: var(--sys-on-primary-fixed-variant);--mdc-filled-text-field-label-text-color: var(--sys-on-primary-fixed-variant)}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:not(:last-child){margin-bottom:.5rem}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mdc-text-field{padding:0 .75rem}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mdc-text-field .mat-mdc-form-field-icon-suffix{padding:1rem 0 0px .25rem}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{height:0}[_nghost-%COMP%]   .size-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mdc-floating-label{transform:translateY(-100%)}"],changeDetection:0}),t})();function TDt(t,e){if(t&1){let r=Qe();N(0,"span",5)(1,"button",6),yt("click",function(){Lt(r);let i=Rt();return Nt(i.snackbarRef.dismissWithAction())}),ut(2),F()()}if(t&2){let r=Rt();ee("position-end",r.data.actionButtonPosition==="end"),$(2),Sn(" ",r.data.action," ")}}function IDt(t,e){if(t&1){let r=Qe();N(0,"button",7),yt("click",function(){Lt(r);let i=Rt();return Nt(i.snackbarRef.dismiss())}),N(1,"mat-icon"),ut(2," close "),F()()}}var ODt=(()=>{let t=class{constructor(){this.snackbarRef=K(ey),this.data=K(k0)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-snackbar"]],standalone:!0,features:[Kt],decls:6,vars:3,consts:[["matSnackbarLabel","",1,"label"],[2,"flex-grow","1"],[1,"actions"],["matSnackBarActions","",3,"position-end"],["mat-icon-button","","hraIconButtonSize","large","data-testid","close-btn"],["matSnackBarActions",""],["mat-button","","disableRipple","","hraButtonSize","medium","matSnackBarAction","",3,"click"],["mat-icon-button","","hraIconButtonSize","large","data-testid","close-btn",3,"click"]],template:function(r,i){r&1&&(N(0,"span",0),ut(1),F(),Ot(2,"div",1),N(3,"div",2),Wt(4,TDt,3,3,"span",3)(5,IDt,3,0,"button",4),F()),r&2&&($(),Oi(i.data.message),$(3),ae(i.data.action?4:-1),$(),ae(i.data.close?5:-1))},dependencies:[ti,Hi,gr,Vr,ba,$n,b0,lg],styles:["[_nghost-%COMP%]{display:flex;align-items:center;font:var(--sys-label-medium);gap:.25rem}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{padding:1rem}[_nghost-%COMP%]:has([matSnackBarActions])   .label[_ngcontent-%COMP%]{padding:.875rem .25rem .875rem 1rem}[_nghost-%COMP%]:has([matSnackBarActions]):has(.position-end)   .label[_ngcontent-%COMP%]{padding:.875rem 1rem .5rem}[_nghost-%COMP%]:has(button[mat-icon-button])   .label[_ngcontent-%COMP%]{padding:.8438rem 1rem}[_nghost-%COMP%]:has(.position-end){flex-direction:column;gap:0}[_nghost-%COMP%]:has(.position-end)   [matSnackBarActions][_ngcontent-%COMP%]{margin-bottom:.25rem}[_nghost-%COMP%]:has(.position-end)   [matSnackBarLabel][_ngcontent-%COMP%]{padding-top:.875rem;padding-bottom:.5rem}[_nghost-%COMP%]:has(.position-end)   .actions[_ngcontent-%COMP%]{align-self:flex-end}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]   .position-end[_ngcontent-%COMP%]{align-self:flex-end}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]   [matSnackBarActions][_ngcontent-%COMP%]:not(:has( + button[mat-icon-button]))[_ngcontent-%COMP%]{margin-right:.5rem}  .hra-snackbar-panel{--mdc-snackbar-container-color: var(--sys-surface-container);--mdc-snackbar-supporting-text-color: var(--sys-secondary);max-width:21.5rem}  .hra-snackbar-panel .mat-mdc-snackbar-surface{padding:0;box-shadow:0 5px 16px rgb(from var(--sys-secondary) r g b/.24)}  .hra-snackbar-panel .mat-mdc-snackbar-surface .mat-mdc-snack-bar-label{padding:0}"],changeDetection:0}),t})(),PDt=(()=>{let t=class{constructor(){this.matSnackbar=K(zT)}open(i,n,s=!1,a="start",o){return this.matSnackbar.openFromComponent(ODt,Q(x({announcementMessage:i},o),{data:{message:i,action:n,close:s,actionButtonPosition:a},panelClass:["hra-snackbar-panel"]}))}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),MDt=()=>["Author Metadata","Donor Metadata","Tissue Block Registration"];function RDt(t,e){if(t&1&&(N(0,"tr")(1,"td",9),ut(2),F(),N(3,"td",10),ut(4),F()()),t&2){let r=e.$implicit;$(2),Oi(r.label),$(2),Oi(r.value)}}function BDt(t,e){if(t&1&&(N(0,"div",6)(1,"div",8),ut(2),F(),N(3,"table"),ic(4,RDt,5,2,"tr",null,wd),F()()),t&2){let r=e.$implicit,i=Rt();$(2),Oi(r),$(2),rc(i.metaData[r])}}var DDt=(()=>{let t=class{constructor(i,n){this.dialogRef=i,this.data=n,this.clsName="ccf-review-modal",this.metaData={},this.snackbar=K(PDt);let s=n.metaData;this.metaData["Author Metadata"]=s.slice(0,5),this.metaData["Donor Metadata"]=s.slice(5,9),this.metaData["Tissue Block Registration"]=s.slice(9,16)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}downloadClicked(){this.dialogRef.close(!0),this.snackbar.open("File downloaded","",!1,"end",{duration:5e3})}};return t.\u0275fac=function(r){return new(r||t)(R(fp),R(y0))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-review-modal"]],hostVars:2,hostBindings:function(r,i){r&2&&Ai(i.clsName)},decls:13,vars:2,consts:[[1,"header"],[1,"title"],[1,"filler"],["mat-icon-button","","hraIconButtonSize","large",1,"close"],[3,"click"],[1,"metadata-tables"],[1,"metadata-table"],["mat-button","","mat-flat-button","",1,"download-button",3,"click"],[1,"type-title"],[1,"data-label"],[1,"data-value"]],template:function(r,i){r&1&&(N(0,"mat-dialog-content")(1,"div",0)(2,"div",1),ut(3,"Review and Download"),F(),Ot(4,"div",2),N(5,"button",3)(6,"mat-icon",4),yt("click",function(){return i.close()}),ut(7,"clear"),F()()(),N(8,"div",5),ic(9,BDt,6,1,"div",6,wd),F(),N(11,"button",7),yt("click",function(){return i.downloadClicked()}),ut(12),F()()),r&2&&($(9),rc(so(1,MDt)),$(3),Sn(" ",i.data.registrationCallbackSet?"Register":"Download"," "))},dependencies:[gp,gr,ba,$n],styles:["[_nghost-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{--mat-dialog-content-padding: 1.5rem;display:flex;flex-direction:column;max-height:100vh;color:var(--sys-secondary)}[_nghost-%COMP%]   .type-title[_ngcontent-%COMP%], [_nghost-%COMP%]   .data-value[_ngcontent-%COMP%]{color:var(--sys-primary-fixed)}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;font:var(--sys-headline-small);margin-bottom:.75rem}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .metadata-tables[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}[_nghost-%COMP%]   .type-title[_ngcontent-%COMP%]{font:var(--sys-title-small);margin-bottom:.5rem}[_nghost-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-spacing:0;font:var(--sys-label-medium)}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.5rem 1rem;border-bottom:1px solid #acb5c3;border-right:1px solid #acb5c3}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-left:1px solid #acb5c3;width:14.5rem;background-color:var(--sys-surface-container)}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]{border-top:1px solid #acb5c3}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]:first-child{border-top-left-radius:.5rem}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]:last-child{border-top-right-radius:.5rem}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:first-child{border-bottom-left-radius:.5rem}[_nghost-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]:last-child{border-bottom-right-radius:.5rem}[_nghost-%COMP%]   .download-button[_ngcontent-%COMP%]{width:fit-content;margin-top:1.5rem;min-height:2.5rem}"],changeDetection:0}),t})(),LDt=(()=>{let t=class{get tooltip(){return this.disabled?"Tissue block does not collide with any anatomical structures":"Review registration and submit/download."}constructor(i,n,s){this.dialog=i,this.ga=n,this.page=s,this.clsName="ccf-review-button",this.registrationCallbackSet=!0,this.metaData=[],this.displayErrors=!0,this.userValid=!1,this.registerData=new It,this.enterErrorMode=new It,this.registrationIsValid=!1}ngOnChanges(){let i=this.metaDataLookup("Reference Organ Name"),n=this.metaDataLookup("Tissue Block Dimensions (mm)"),s=this.metaDataLookup("Tissue Block Position (mm)"),a=this.metaDataLookup("Anatomical Structure Tags");this.registrationIsValid=this.userValid&&[i,n,s,a].every(o=>o!=="")}get disabled(){return!this.registrationIsValid}metaDataLookup(i){return this.metaData.find(n=>n.label===i)?.value}registerButtonClick(i){return i&&i.preventDefault(),this.enterErrorMode.emit(),this.registrationIsValid&&(this.ga.event("review_start","review_button"),this.launchReviewModal()),!1}launchReviewModal(){this.page.patchState({registrationStarted:!1}),this.dialog.open(DDt,{panelClass:"modal-animated",minWidth:"40rem",maxWidth:"40rem",data:{registrationCallbackSet:this.registrationCallbackSet,metaData:this.metaData}}).afterClosed().subscribe(i=>{this.page.registrationStarted(),i&&(this.ga.event("register","review_button"),this.registerData.emit())})}};return t.\u0275fac=function(r){return new(r||t)(R(dl),R(gs),R(hr))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-review-button"]],hostVars:2,hostBindings:function(r,i){r&2&&Ai(i.clsName)},inputs:{registrationCallbackSet:"registrationCallbackSet",metaData:"metaData",displayErrors:"displayErrors",userValid:"userValid"},outputs:{registerData:"registerData",enterErrorMode:"enterErrorMode"},features:[yr],decls:2,vars:3,consts:[["mat-flat-button","",1,"review-button",3,"click","disabled","hraMicroTooltip"]],template:function(r,i){r&1&&(N(0,"button",0),yt("click",function(n){return i.registerButtonClick(n)}),ut(1),F()),r&2&&(mt("disabled",i.disabled)("hraMicroTooltip",i.tooltip),$(),Sn(" ",i.registrationCallbackSet?"Review and Register":"Review and Download",`
`))},dependencies:[ba,co],encapsulation:2,changeDetection:0}),t})();function NDt(t,e){if(t&1){let r=Qe();N(0,"ccf-slider-box",3),yt("displaySlider",function(){let i=Lt(r).$implicit,n=Rt();return Nt(n.displaySlider(i))})("resetRotation",function(){let i=Lt(r).$implicit,n=Rt();return Nt(n.resetRotation(i))})("changeRotation",function(i){let n=Lt(r).$implicit,s=Rt();return Nt(s.changeRotation(i,n))}),F()}if(t&2){let r=e.$implicit,i=Rt();mt("sliderAxis",r)("displayedSlider",i.displayedSlider)("rotation",i.rotation)("step",i.step)}}var FDt={x:0,y:0,z:0},XG=(()=>{let t=class{constructor(i,n){this.el=i,this.ga=n,this.clsName="ccf-rotation-slider",this.rotation=FDt,this.rotationChange=new It,this.axisOptions=["x","y","z"],this.step=1}changeRotation(i,n){let s=+i>180?180:+i<-180?-180:+i;this.rotation=Q(x({},this.rotation),{[n]:+s}),this.ga.event("rotation_update","rotation_slider",n,+s),this.rotationChange.emit(this.rotation)}resetRotation(i){this.rotation=Q(x({},this.rotation),{[i]:0}),this.ga.event("rotation_reset","rotation_slider"),this.rotationChange.emit(this.rotation)}resetAllRotations(){this.axisOptions.forEach(i=>this.resetRotation(i))}displaySlider(i){this.displayedSlider=i}changeStep(i){this.step=i.shiftKey?30:1}closeResults(i){this.displayedSlider&&i.target instanceof Node&&(this.el.nativeElement.contains(i.target)||(this.displayedSlider=void 0))}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(gs))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-rotation-slider"]],hostVars:2,hostBindings:function(r,i){r&1&&yt("keydown",function(n){return i.changeStep(n)},!1,Xm)("keyup",function(n){return i.changeStep(n)},!1,Xm)("mouseup",function(n){return i.closeResults(n)},!1,cb),r&2&&Ai(i.clsName)},inputs:{rotation:"rotation"},outputs:{rotationChange:"rotationChange"},decls:5,vars:0,consts:[[1,"header"],[1,"text","title"],["hraMicroTooltip","Rotation is measured in degrees",1,"slider-box",3,"sliderAxis","displayedSlider","rotation","step"],["hraMicroTooltip","Rotation is measured in degrees",1,"slider-box",3,"displaySlider","resetRotation","changeRotation","sliderAxis","displayedSlider","rotation","step"]],template:function(r,i){r&1&&(N(0,"div",0)(1,"span",1),ut(2,"Rotation"),F()(),ic(3,NDt,1,4,"ccf-slider-box",2,wd)),r&2&&($(3),rc(i.axisOptions))},styles:["[_nghost-%COMP%]{width:5rem}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;padding:.5rem 0}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font:var(--sys-label-medium)}[_nghost-%COMP%]   .slider-box[_ngcontent-%COMP%]:not(:last-child){margin-bottom:.5rem}"],changeDetection:0}),t})(),DL={thickness:0,numSlices:0},zDt=(()=>{let t=class{constructor(i){this.ga=i,this.clsName="ccf-slices-input",this.slicesConfig=DL,this.slicesConfigChange=new It}emptyStringIfNaN(i){return Number.isNaN(i)?"":i}updateSlicesData(i,n){let{value:s}=i.target;this.slicesConfig=Q(x({},this.slicesConfig),{[n]:s!==""?+s:NaN}),this.ga.event("slice_config_update","slice_input",n,this.slicesConfig[n]),this.slicesConfigChange.emit(this.slicesConfig)}refreshSlices(){this.slicesConfig=DL,this.ga.event("slice_config_reset","slice_input"),this.slicesConfigChange.emit(this.slicesConfig)}};return t.\u0275fac=function(r){return new(r||t)(R(gs))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-slices-input"]],hostVars:2,hostBindings:function(r,i){r&2&&Ai(i.clsName)},inputs:{slicesConfig:"slicesConfig"},outputs:{slicesConfigChange:"slicesConfigChange"},decls:12,vars:2,consts:[[1,"header"],[1,"text","title"],[1,"slices-inputs"],[1,"text","form-input-label"],["matInput","","ccfNumbersOnly","","type","number",1,"input",3,"keyup","value"],[1,"field"],["matInput","","ccfNumbersOnly","","type","number","matTooltip","Enter total number of sections",1,"input",3,"keyup","value"]],template:function(r,i){r&1&&(N(0,"div",0)(1,"span",1),ut(2,"Tissue Section"),F()(),N(3,"div",2)(4,"mat-form-field")(5,"mat-label",3),ut(6,"Thickness"),F(),N(7,"input",4),yt("keyup",function(n){return i.updateSlicesData(n,"thickness")}),F()(),N(8,"mat-form-field",5)(9,"mat-label",3),ut(10,"# Sections"),F(),N(11,"input",6),yt("keyup",function(n){return i.updateSlicesData(n,"numSlices")}),F()()()),r&2&&($(7),mt("value",i.emptyStringIfNaN(i.slicesConfig.thickness)),$(4),mt("value",i.emptyStringIfNaN(i.slicesConfig.numSlices)))},dependencies:[th,Qu,Ko,Ek,yPt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:.5rem;width:100%}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;height:1.5rem;padding:.5rem 0}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]{display:flex;gap:1rem;margin:0 auto;width:100%}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field.mat-focused[_ngcontent-%COMP%]   .suffix[_ngcontent-%COMP%], [_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   .suffix.show[_ngcontent-%COMP%]{display:initial}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{--mdc-filled-text-field-input-text-color: var(--sys-on-primary-fixed-variant);--mdc-filled-text-field-label-text-color: var(--sys-on-primary-fixed-variant)}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{height:0}[_nghost-%COMP%]   .slices-inputs[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mdc-floating-label{transform:translateY(-100%)}"],changeDetection:0}),t})(),qG=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],KG=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function VDt(t,e){t&1&&(N(0,"span",3),pe(1,1),F())}function jDt(t,e){t&1&&(N(0,"span",6),pe(1,2),F())}function UDt(t,e){t&1&&(N(0,"span",3),pe(1,1),N(2,"span",8),ju(),N(3,"svg",9),Ot(4,"path",10),F()()())}function HDt(t,e){t&1&&(N(0,"span",6),pe(1,2),F())}var GDt='.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-outline-width);border-radius:var(--mdc-chip-container-shape-radius);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-outline-color, var(--mat-app-outline))}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mdc-chip-focus-outline-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-disabled-outline-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font, var(--mat-app-label-large-font));line-height:var(--mdc-chip-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mdc-chip-label-text-size, var(--mat-app-label-large-size));font-weight:var(--mdc-chip-label-text-weight, var(--mat-app-label-large-weight));letter-spacing:var(--mdc-chip-label-text-tracking, var(--mat-app-label-large-tracking))}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mdc-chip-with-avatar-avatar-size);height:var(--mdc-chip-with-avatar-avatar-size);font-size:var(--mdc-chip-with-avatar-avatar-size)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.cdk-high-contrast-active .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius);height:var(--mdc-chip-container-height)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-flat-disabled-selected-container-color)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius);width:var(--mdc-chip-with-icon-icon-size);height:var(--mdc-chip-with-icon-icon-size);font-size:var(--mdc-chip-with-icon-icon-size)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-highlighted{--mdc-chip-with-icon-icon-color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container));--mdc-chip-elevated-container-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container));--mdc-chip-label-text-color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container));--mdc-chip-outline-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-hover-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-hover-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mdc-chip-with-avatar-disabled-avatar-opacity)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mdc-chip-with-icon-disabled-icon-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity)}.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity)}.mat-mdc-chip-remove::after{background:var(--mat-chip-trailing-action-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background:var(--mat-chip-selected-trailing-action-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-2px;bottom:-2px;left:6px;right:6px;border-radius:50%}.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}',YG=["*"],WDt=".mat-mdc-chip-set{display:flex}.mat-mdc-chip-set:focus{outline:none}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%;margin-left:-8px;margin-right:0}.mat-mdc-chip-set .mdc-evolution-chip{margin:4px 0 4px 8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip-set__chips{margin-left:0;margin-right:-8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip{margin-left:0;margin-right:8px}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}",$T=new ht("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})}),LL=new ht("MatChipAvatar"),NL=new ht("MatChipTrailingIcon"),Gk=new ht("MatChipRemove"),XT=new ht("MatChip"),ly=(()=>{let t=class{get disabled(){return this._disabled||this._parentChip.disabled}set disabled(i){this._disabled=i}_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}constructor(i,n){this._elementRef=i,this._parentChip=n,this.isInteractive=!0,this._isPrimary=!0,this._disabled=!1,this.tabIndex=-1,this._allowFocusWhenDisabled=!1,i.nativeElement.nodeName==="BUTTON"&&i.nativeElement.setAttribute("type","button")}focus(){this._elementRef.nativeElement.focus()}_handleClick(i){!this.disabled&&this.isInteractive&&this._isPrimary&&(i.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(i){(i.keyCode===13||i.keyCode===32)&&!this.disabled&&this.isInteractive&&this._isPrimary&&!this._parentChip._isEditing&&(i.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(XT))},t.\u0275dir=qt({type:t,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:9,hostBindings:function(r,i){r&1&&yt("click",function(n){return i._handleClick(n)})("keydown",function(n){return i._handleKeydown(n)}),r&2&&(ke("tabindex",i._getTabindex())("disabled",i._getDisabledAttribute())("aria-disabled",i.disabled),ee("mdc-evolution-chip__action--primary",i._isPrimary)("mdc-evolution-chip__action--presentational",!i.isInteractive)("mdc-evolution-chip__action--trailing",!i._isPrimary))},inputs:{isInteractive:"isInteractive",disabled:[2,"disabled","disabled",Ut],tabIndex:[2,"tabIndex","tabIndex",r=>r==null?-1:or(r)],_allowFocusWhenDisabled:"_allowFocusWhenDisabled"},standalone:!0,features:[ji]}),t})(),ZDt=(()=>{let t=class extends ly{constructor(){super(...arguments),this._isPrimary=!1}_handleClick(i){this.disabled||(i.stopPropagation(),i.preventDefault(),this._parentChip.remove())}_handleKeydown(i){(i.keyCode===13||i.keyCode===32)&&!this.disabled&&(i.stopPropagation(),i.preventDefault(),this._parentChip.remove())}};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275dir=qt({type:t,selectors:[["","matChipRemove",""]],hostAttrs:["role","button",1,"mat-mdc-chip-remove","mat-mdc-chip-trailing-icon","mat-mdc-focus-indicator","mdc-evolution-chip__icon","mdc-evolution-chip__icon--trailing"],hostVars:1,hostBindings:function(r,i){r&2&&ke("aria-hidden",null)},standalone:!0,features:[We([{provide:Gk,useExisting:t}]),oi]}),t})(),$Dt=0,cy=(()=>{let t=class{_hasFocus(){return this._hasFocusInternal}get value(){return this._value!==void 0?this._value:this._textElement.textContent.trim()}set value(i){this._value=i}get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}constructor(i,n,s,a,o,l,c){this._changeDetectorRef=i,this._elementRef=n,this._ngZone=s,this._focusMonitor=a,this._globalRippleOptions=c,this._onFocus=new Bt,this._onBlur=new Bt,this.role=null,this._hasFocusInternal=!1,this.id=`mat-mdc-chip-${$Dt++}`,this.ariaLabel=null,this.ariaDescription=null,this._ariaDescriptionId=`${this.id}-aria-description`,this.removable=!0,this.highlighted=!1,this.disableRipple=!1,this.disabled=!1,this.removed=new It,this.destroyed=new It,this.basicChipAttrName="mat-basic-chip",this._rippleLoader=K(V4),this._injector=K(Re),this._document=o,this._animationsDisabled=l==="NoopAnimations",this._monitorFocus(),this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-chip-ripple",disabled:this._isRippleDisabled()})}ngOnInit(){let i=this._elementRef.nativeElement;this._isBasicChip=i.hasAttribute(this.basicChipAttrName)||i.tagName.toLowerCase()===this.basicChipAttrName}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngAfterContentInit(){this._actionChanges=lr(this._allLeadingIcons.changes,this._allTrailingIcons.changes,this._allRemoveIcons.changes).subscribe(()=>this._changeDetectorRef.markForCheck())}ngDoCheck(){this._rippleLoader.setDisabled(this._elementRef.nativeElement,this._isRippleDisabled())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement),this._actionChanges?.unsubscribe(),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&this.removed.emit({chip:this})}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!!(this.trailingIcon||this.removeIcon)}_handleKeydown(i){(i.keyCode===8&&!i.repeat||i.keyCode===46)&&(i.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(i){return this._getActions().find(n=>{let s=n._elementRef.nativeElement;return s===i||s.contains(i)})}_getActions(){let i=[];return this.primaryAction&&i.push(this.primaryAction),this.removeIcon&&i.push(this.removeIcon),this.trailingIcon&&i.push(this.trailingIcon),i}_handlePrimaryActionInteraction(){}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(i=>{let n=i!==null;n!==this._hasFocusInternal&&(this._hasFocusInternal=n,n?this._onFocus.next({chip:this}):pc(()=>this._ngZone.run(()=>this._onBlur.next({chip:this})),{injector:this._injector}))})}};return t.\u0275fac=function(r){return new(r||t)(R(di),R(te),R(Zt),R(ul),R(ge),R(kr,8),R(h0,8))},t.\u0275cmp=Pt({type:t,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(r,i,n){if(r&1&&(Xi(n,LL,5),Xi(n,NL,5),Xi(n,Gk,5),Xi(n,LL,5),Xi(n,NL,5),Xi(n,Gk,5)),r&2){let s;oe(s=le())&&(i.leadingIcon=s.first),oe(s=le())&&(i.trailingIcon=s.first),oe(s=le())&&(i.removeIcon=s.first),oe(s=le())&&(i._allLeadingIcons=s),oe(s=le())&&(i._allTrailingIcons=s),oe(s=le())&&(i._allRemoveIcons=s)}},viewQuery:function(r,i){if(r&1&&gi(ly,5),r&2){let n;oe(n=le())&&(i.primaryAction=n.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:31,hostBindings:function(r,i){r&1&&yt("keydown",function(n){return i._handleKeydown(n)}),r&2&&(_a("id",i.id),ke("role",i.role)("aria-label",i.ariaLabel),Ai("mat-"+(i.color||"primary")),ee("mdc-evolution-chip",!i._isBasicChip)("mdc-evolution-chip--disabled",i.disabled)("mdc-evolution-chip--with-trailing-action",i._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",i.leadingIcon)("mdc-evolution-chip--with-primary-icon",i.leadingIcon)("mdc-evolution-chip--with-avatar",i.leadingIcon)("mat-mdc-chip-with-avatar",i.leadingIcon)("mat-mdc-chip-highlighted",i.highlighted)("mat-mdc-chip-disabled",i.disabled)("mat-mdc-basic-chip",i._isBasicChip)("mat-mdc-standard-chip",!i._isBasicChip)("mat-mdc-chip-with-trailing-icon",i._hasTrailingIcon())("_mat-animation-noopable",i._animationsDisabled))},inputs:{role:"role",id:"id",ariaLabel:[0,"aria-label","ariaLabel"],ariaDescription:[0,"aria-description","ariaDescription"],value:"value",color:"color",removable:[2,"removable","removable",Ut],highlighted:[2,"highlighted","highlighted",Ut],disableRipple:[2,"disableRipple","disableRipple",Ut],disabled:[2,"disabled","disabled",Ut]},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],standalone:!0,features:[We([{provide:XT,useExisting:t}]),ji,Kt],ngContentSelectors:KG,decls:8,vars:3,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(r,i){r&1&&(Mi(qG),Ot(0,"span",0),N(1,"span",1)(2,"span",2),Wt(3,VDt,2,0,"span",3),N(4,"span",4),pe(5),Ot(6,"span",5),F()()(),Wt(7,jDt,2,0,"span",6)),r&2&&($(2),mt("isInteractive",!1),$(),ae(i.leadingIcon?3:-1),$(4),ae(i._hasTrailingIcon()?7:-1))},dependencies:[ly],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{flex-basis:100%;overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit;overflow-x:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-outline-width);border-radius:var(--mdc-chip-container-shape-radius);box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1;border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-outline-color, var(--mat-app-outline))}.mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus::before{border-color:var(--mdc-chip-focus-outline-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary::before{border-color:var(--mdc-chip-disabled-outline-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary::before{border-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}.mdc-evolution-chip__text-label{-webkit-user-select:none;user-select:none;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font, var(--mat-app-label-large-font));line-height:var(--mdc-chip-label-text-line-height, var(--mat-app-label-large-line-height));font-size:var(--mdc-chip-label-text-size, var(--mat-app-label-large-size));font-weight:var(--mdc-chip-label-text-weight, var(--mat-app-label-large-weight));letter-spacing:var(--mdc-chip-label-text-tracking, var(--mat-app-label-large-tracking))}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label,.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{width:var(--mdc-chip-with-avatar-avatar-size);height:var(--mdc-chip-with-avatar-avatar-size);font-size:var(--mdc-chip-with-avatar-avatar-size)}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:8px;padding-right:4px}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%;height:20px;width:20px}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.cdk-high-contrast-active .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius);height:var(--mdc-chip-container-height)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-flat-disabled-selected-container-color)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius);width:var(--mdc-chip-with-icon-icon-size);height:var(--mdc-chip-with-icon-icon-size);font-size:var(--mdc-chip-with-icon-icon-size)}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color, var(--mat-app-on-surface-variant))}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-highlighted{--mdc-chip-with-icon-icon-color:var(--mdc-chip-with-icon-selected-icon-color, var(--mat-app-on-secondary-container));--mdc-chip-elevated-container-color:var(--mdc-chip-elevated-selected-container-color, var(--mat-app-secondary-container));--mdc-chip-label-text-color:var(--mdc-chip-selected-label-text-color, var(--mat-app-on-secondary-container));--mdc-chip-outline-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-hover-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-hover-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color, var(--mat-app-on-surface-variant));opacity:var(--mdc-chip-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color, var(--mat-app-on-secondary-container));opacity:var(--mdc-chip-selected-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mdc-chip-with-avatar-disabled-avatar-opacity)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mdc-chip-with-icon-disabled-icon-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color, var(--mat-app-on-surface))}.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity)}.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity)}.mat-mdc-chip-remove::after{background:var(--mat-chip-trailing-action-state-layer-color, var(--mat-app-on-surface-variant))}.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity, var(--mat-app-hover-state-layer-opacity))}.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity, var(--mat-app-focus-state-layer-opacity))}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background:var(--mat-chip-selected-trailing-action-state-layer-color, var(--mat-app-on-secondary-container))}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-2px;bottom:-2px;left:6px;right:6px;border-radius:50%}.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),t})(),XDt=(()=>{let t=class extends cy{constructor(){super(...arguments),this._defaultOptions=K($T,{optional:!0}),this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListHideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._selectable=!0,this._selected=!1,this.basicChipAttrName="mat-basic-chip-option",this.selectionChange=new It}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(i){this._selectable=i,this._changeDetectorRef.markForCheck()}get selected(){return this._selected}set selected(i){this._setSelectedState(i,!1,!0)}get ariaSelected(){return this.selectable?this.selected.toString():null}ngOnInit(){super.ngOnInit(),this.role="presentation"}select(){this._setSelectedState(!0,!1,!0)}deselect(){this._setSelectedState(!1,!1,!0)}selectViaInteraction(){this._setSelectedState(!0,!0,!0)}toggleSelected(i=!1){return this._setSelectedState(!this.selected,i,!0),this.selected}_handlePrimaryActionInteraction(){this.disabled||(this.focus(),this.selectable&&this.toggleSelected(!0))}_hasLeadingGraphic(){return this.leadingIcon?!0:!this._chipListHideSingleSelectionIndicator||this._chipListMultiple}_setSelectedState(i,n,s){i!==this.selected&&(this._selected=i,s&&this.selectionChange.emit({source:this,isUserInput:n,selected:this.selected}),this._changeDetectorRef.markForCheck())}};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275cmp=Pt({type:t,selectors:[["mat-basic-chip-option"],["","mat-basic-chip-option",""],["mat-chip-option"],["","mat-chip-option",""]],hostAttrs:[1,"mat-mdc-chip","mat-mdc-chip-option"],hostVars:37,hostBindings:function(r,i){r&2&&(_a("id",i.id),ke("tabindex",null)("aria-label",null)("aria-description",null)("role",i.role),ee("mdc-evolution-chip",!i._isBasicChip)("mdc-evolution-chip--filter",!i._isBasicChip)("mdc-evolution-chip--selectable",!i._isBasicChip)("mat-mdc-chip-selected",i.selected)("mat-mdc-chip-multiple",i._chipListMultiple)("mat-mdc-chip-disabled",i.disabled)("mat-mdc-chip-with-avatar",i.leadingIcon)("mdc-evolution-chip--disabled",i.disabled)("mdc-evolution-chip--selected",i.selected)("mdc-evolution-chip--selecting",!i._animationsDisabled)("mdc-evolution-chip--with-trailing-action",i._hasTrailingIcon())("mdc-evolution-chip--with-primary-icon",i.leadingIcon)("mdc-evolution-chip--with-primary-graphic",i._hasLeadingGraphic())("mdc-evolution-chip--with-avatar",i.leadingIcon)("mat-mdc-chip-highlighted",i.highlighted)("mat-mdc-chip-with-trailing-icon",i._hasTrailingIcon()))},inputs:{selectable:[2,"selectable","selectable",Ut],selected:[2,"selected","selected",Ut]},outputs:{selectionChange:"selectionChange"},standalone:!0,features:[We([{provide:cy,useExisting:t},{provide:XT,useExisting:t}]),ji,oi,Kt],ngContentSelectors:KG,decls:10,vars:8,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","","role","option",3,"_allowFocusWhenDisabled"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"],[1,"cdk-visually-hidden",3,"id"],[1,"mdc-evolution-chip__checkmark"],["viewBox","-2 -3 30 30","focusable","false","aria-hidden","true",1,"mdc-evolution-chip__checkmark-svg"],["fill","none","stroke","currentColor","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-evolution-chip__checkmark-path"]],template:function(r,i){r&1&&(Mi(qG),Ot(0,"span",0),N(1,"span",1)(2,"button",2),Wt(3,UDt,5,0,"span",3),N(4,"span",4),pe(5),Ot(6,"span",5),F()()(),Wt(7,HDt,2,0,"span",6),N(8,"span",7),ut(9),F()),r&2&&($(2),mt("_allowFocusWhenDisabled",!0),ke("aria-selected",i.ariaSelected)("aria-label",i.ariaLabel)("aria-describedby",i._ariaDescriptionId),$(),ae(i._hasLeadingGraphic()?3:-1),$(4),ae(i._hasTrailingIcon()?7:-1),$(),mt("id",i._ariaDescriptionId),$(),Oi(i.ariaDescription))},dependencies:[ly],styles:[GDt],encapsulation:2,changeDetection:0}),t})(),qDt=(()=>{let t=class{get chipFocusChanges(){return this._getChipStream(i=>i._onFocus)}get chipDestroyedChanges(){return this._getChipStream(i=>i.destroyed)}get chipRemovedChanges(){return this._getChipStream(i=>i.removed)}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._syncChipsState()}get empty(){return!this._chips||this._chips.length===0}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}set role(i){this._explicitRole=i}get focused(){return this._hasFocusedChip()}constructor(i,n,s){this._elementRef=i,this._changeDetectorRef=n,this._dir=s,this._lastDestroyedFocusedChipIndex=null,this._destroyed=new Bt,this._defaultRole="presentation",this._disabled=!1,this.tabIndex=0,this._explicitRole=null,this._chipActions=new $m}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(i=>i._hasFocus())}_syncChipsState(){this._chips&&this._chips.forEach(i=>{i.disabled=this._disabled,i._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(i){this._originatesFromChip(i)&&this._keyManager.onKeydown(i)}_isValidIndex(i){return i>=0&&i<this._chips.length}_allowFocusEscape(){if(this.tabIndex!==-1){let i=this.tabIndex;this.tabIndex=-1,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.tabIndex=i,this._changeDetectorRef.markForCheck()})}}_getChipStream(i){return this._chips.changes.pipe(fr(null),_i(()=>lr(...this._chips.map(i))))}_originatesFromChip(i){let n=i.target;for(;n&&n!==this._elementRef.nativeElement;){if(n.classList.contains("mat-mdc-chip"))return!0;n=n.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe(fr(this._chips)).subscribe(i=>{let n=[];i.forEach(s=>s._getActions().forEach(a=>n.push(a))),this._chipActions.reset(n),this._chipActions.notifyOnChanges()}),this._keyManager=new E4(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(i=>this._skipPredicate(i)),this.chipFocusChanges.pipe(Me(this._destroyed)).subscribe(({chip:i})=>{let n=i._getSourceAction(document.activeElement);n&&this._keyManager.updateActiveItem(n)}),this._dir?.change.pipe(Me(this._destroyed)).subscribe(i=>this._keyManager.withHorizontalOrientation(i))}_skipPredicate(i){return!i.isInteractive||i.disabled}_trackChipSetChanges(){this._chips.changes.pipe(fr(null),Me(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe(Me(this._destroyed)).subscribe(i=>{let n=this._chips.toArray().indexOf(i.chip);this._isValidIndex(n)&&i.chip._hasFocus()&&(this._lastDestroyedFocusedChipIndex=n)})}_redirectDestroyedChipFocus(){if(this._lastDestroyedFocusedChipIndex!=null){if(this._chips.length){let i=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),n=this._chips.toArray()[i];n.disabled?this._chips.length===1?this.focus():this._keyManager.setPreviousItemActive():n.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(di),R(Gn,8))},t.\u0275cmp=Pt({type:t,selectors:[["mat-chip-set"]],contentQueries:function(r,i,n){if(r&1&&Xi(n,cy,5),r&2){let s;oe(s=le())&&(i._chips=s)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(r,i){r&1&&yt("keydown",function(n){return i._handleKeydown(n)}),r&2&&ke("role",i.role)},inputs:{disabled:[2,"disabled","disabled",Ut],role:"role",tabIndex:[2,"tabIndex","tabIndex",r=>r==null?0:or(r)]},standalone:!0,features:[ji,Kt],ngContentSelectors:YG,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(r,i){r&1&&(Mi(),N(0,"div",0),pe(1),F())},styles:[".mat-mdc-chip-set{display:flex}.mat-mdc-chip-set:focus{outline:none}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%;margin-left:-8px;margin-right:0}.mat-mdc-chip-set .mdc-evolution-chip{margin:4px 0 4px 8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip-set__chips{margin-left:0;margin-right:-8px}[dir=rtl] .mat-mdc-chip-set .mdc-evolution-chip{margin-left:0;margin-right:8px}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0}),t})(),KDt=class{constructor(t,e){this.source=t,this.value=e}},YDt={provide:lo,useExisting:fs(()=>JG),multi:!0},JG=(()=>{let t=class extends qDt{constructor(){super(...arguments),this._onTouched=()=>{},this._onChange=()=>{},this._defaultRole="listbox",this._defaultOptions=K($T,{optional:!0}),this._multiple=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.compareWith=(i,n)=>i===n,this.required=!1,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this.change=new It,this._chips=void 0}get multiple(){return this._multiple}set multiple(i){this._multiple=i,this._syncListboxProperties()}get selected(){let i=this._chips.toArray().filter(n=>n.selected);return this.multiple?i:i[0]}get selectable(){return this._selectable}set selectable(i){this._selectable=i,this._syncListboxProperties()}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(i){this._hideSingleSelectionIndicator=i,this._syncListboxProperties()}get chipSelectionChanges(){return this._getChipStream(i=>i.selectionChange)}get chipBlurChanges(){return this._getChipStream(i=>i._onBlur)}get value(){return this._value}set value(i){this.writeValue(i),this._value=i}ngAfterContentInit(){this._pendingInitialValue!==void 0&&Promise.resolve().then(()=>{this._setSelectionByValue(this._pendingInitialValue,!1),this._pendingInitialValue=void 0}),this._chips.changes.pipe(fr(null),Me(this._destroyed)).subscribe(()=>{this._syncListboxProperties()}),this.chipBlurChanges.pipe(Me(this._destroyed)).subscribe(()=>this._blur()),this.chipSelectionChanges.pipe(Me(this._destroyed)).subscribe(i=>{this.multiple||this._chips.forEach(n=>{n!==i.source&&n._setSelectedState(!1,!1,!1)}),i.isUserInput&&this._propagateChanges()})}focus(){if(this.disabled)return;let i=this._getFirstSelectedChip();i&&!i.disabled?i.focus():this._chips.length>0?this._keyManager.setFirstItemActive():this._elementRef.nativeElement.focus()}writeValue(i){this._chips?this._setSelectionByValue(i,!1):i!=null&&(this._pendingInitialValue=i)}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this.disabled=i}_setSelectionByValue(i,n=!0){this._clearSelection(),Array.isArray(i)?i.forEach(s=>this._selectValue(s,n)):this._selectValue(i,n)}_blur(){this.disabled||setTimeout(()=>{this.focused||this._markAsTouched()})}_keydown(i){i.keyCode===9&&super._allowFocusEscape()}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck()}_propagateChanges(){let i=null;Array.isArray(this.selected)?i=this.selected.map(n=>n.value):i=this.selected?this.selected.value:void 0,this._value=i,this.change.emit(new KDt(this,i)),this._onChange(i),this._changeDetectorRef.markForCheck()}_clearSelection(i){this._chips.forEach(n=>{n!==i&&n.deselect()})}_selectValue(i,n){let s=this._chips.find(a=>a.value!=null&&this.compareWith(a.value,i));return s&&(n?s.selectViaInteraction():s.select()),s}_syncListboxProperties(){this._chips&&Promise.resolve().then(()=>{this._chips.forEach(i=>{i._chipListMultiple=this.multiple,i.chipListSelectable=this._selectable,i._chipListHideSingleSelectionIndicator=this.hideSingleSelectionIndicator,i._changeDetectorRef.markForCheck()})})}_getFirstSelectedChip(){return Array.isArray(this.selected)?this.selected.length?this.selected[0]:void 0:this.selected}_skipPredicate(i){return!i.isInteractive}};return t.\u0275fac=(()=>{let r;return function(i){return(r||(r=Cr(t)))(i||t)}})(),t.\u0275cmp=Pt({type:t,selectors:[["mat-chip-listbox"]],contentQueries:function(r,i,n){if(r&1&&Xi(n,XDt,5),r&2){let s;oe(s=le())&&(i._chips=s)}},hostAttrs:[1,"mdc-evolution-chip-set","mat-mdc-chip-listbox"],hostVars:11,hostBindings:function(r,i){r&1&&yt("focus",function(){return i.focus()})("blur",function(){return i._blur()})("keydown",function(n){return i._keydown(n)}),r&2&&(_a("tabIndex",i.disabled||i.empty?-1:i.tabIndex),ke("role",i.role)("aria-describedby",i._ariaDescribedby||null)("aria-required",i.role?i.required:null)("aria-disabled",i.disabled.toString())("aria-multiselectable",i.multiple)("aria-orientation",i.ariaOrientation),ee("mat-mdc-chip-list-disabled",i.disabled)("mat-mdc-chip-list-required",i.required))},inputs:{multiple:[2,"multiple","multiple",Ut],ariaOrientation:[0,"aria-orientation","ariaOrientation"],selectable:[2,"selectable","selectable",Ut],compareWith:"compareWith",required:[2,"required","required",Ut],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Ut],value:"value"},outputs:{change:"change"},standalone:!0,features:[We([YDt]),ji,oi,Kt],ngContentSelectors:YG,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(r,i){r&1&&(Mi(),N(0,"div",0),pe(1),F())},styles:[WDt],encapsulation:2,changeDetection:0}),t})(),JDt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[dT,{provide:$T,useValue:{separatorKeyCodes:[13]}}],imports:[ai,$s,ai]}),t})();function QDt(t,e){t&1&&(N(0,"span",0),ut(1,"Added"),F())}function tLt(t,e){if(t&1){let r=Qe();N(0,"mat-chip",3),yt("removed",function(){let i=Lt(r).$implicit,n=Rt();return Nt(n.removeTag(i))}),ut(1),N(2,"mat-icon",4),ut(3,"close"),F()()}if(t&2){let r=e.$implicit,i=Rt();Ai(i.tagClasses(r)),$(),Sn(" ",r.label," ")}}var eLt=(()=>{let t=class{constructor(i){this.ga=i,this.clsName="ccf-tag-list",this.tagRemoved=new It,this.tagsChange=new It}tagId(i,n){return n.id}tagClasses(i){return i.type==="added"?["added"]:["assigned"]}removeTag(i){this.tags=this.tags.filter(n=>n!==i),this.ga.event("tag_removed","tag_list",i.label),this.tagRemoved.emit(i),this.tagsChange.emit(this.tags)}};return t.\u0275fac=function(r){return new(r||t)(R(gs))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-tag-list"]],hostVars:2,hostBindings:function(r,i){r&2&&Ai(i.clsName)},inputs:{tags:"tags"},outputs:{tagRemoved:"tagRemoved",tagsChange:"tagsChange"},decls:3,vars:3,consts:[[1,"added-label"],["selectable","false"],["removable","","disableRipple","",3,"class","removed",4,"ngFor","ngForOf","ngForTrackBy"],["removable","","disableRipple","",3,"removed"],["matChipRemove","",1,"icon","remove"]],template:function(r,i){r&1&&(Wt(0,QDt,2,0,"span",0),N(1,"mat-chip-listbox",1),Wt(2,tLt,4,3,"mat-chip",2),F()),r&2&&(ae(i.tags?0:-1),$(2),mt("ngForOf",i.tags)("ngForTrackBy",i.tagId))},dependencies:[bS,cy,JG,ZDt,gr],styles:["[_nghost-%COMP%]{display:block;overflow-x:hidden;overflow-y:auto;--mdc-chip-label-text-color: var(--sys-on-primary-fixed-variant)}[_nghost-%COMP%]   .added-label[_ngcontent-%COMP%]{font:var(--sys-label-medium);margin-bottom:.25rem}[_nghost-%COMP%]     .mdc-evolution-chip-set__chips{margin:0!important;gap:.25rem}[_nghost-%COMP%]     .mdc-evolution-chip-set__chips .mdc-evolution-chip__text-label{font:var(--sys-label-medium)}[_nghost-%COMP%]     .mdc-evolution-chip-set__chips .mat-mdc-chip{margin:0}[_nghost-%COMP%]   .icon.remove[_ngcontent-%COMP%]{color:var(--sys-on-primary-fixed-variant)}"],changeDetection:0}),t})(),iLt=(t,e)=>e.id;function rLt(t,e){if(t&1){let r=Qe();N(0,"div",7)(1,"mat-checkbox",8),ez("ngModelChange",function(i){let n=Lt(r).$implicit,s=Rt(2);return Grt(s.checkedResults[n.id],i)||(s.checkedResults[n.id]=i),Nt(i)}),ut(2),F()()}if(t&2){let r=e.$implicit,i=Rt(2);$(),tz("ngModel",i.checkedResults[r.id]),$(),Sn(" ",r.label," ")}}function nLt(t,e){if(t&1&&(N(0,"div",6),ic(1,rLt,3,2,"div",7,iLt),F()),t&2){let r=Rt();$(),rc(r.searchResults.results)}}var FL=5,sLt=100,n_={totalCount:0,results:[]},aLt=(()=>{let t=class{constructor(i,n,s){this.el=i,this.ga=n,this.clsName="ccf-tag-search",this.added=new It,this.searchControl=new sSt,this.searchResults=n_,this.checkedResults={},this.resultsVisible=!1,this.destroy$=new Bt,this.executeSearch=a=>{let{search:o,searchLimit:l=FL}=this;return!a||!o?[n_]:zs(o(a,l)).pipe(il(()=>[n_]),kt(this.truncateResults))},this.truncateResults=a=>{let{searchLimit:o=FL}=this,l=a.results;return l.length>o?Q(x({},a),{results:l.slice(0,o)}):a},this.searchControl.valueChanges.pipe(Me(this.destroy$),QN(()=>WN(this.searchThrottle??sLt),{leading:!0,trailing:!0}),_i(this.executeSearch)).subscribe(a=>{this.searchResults=a,this.checkedResults=this.getUpdatedCheckedResults(a),s.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}hasCheckedTags(){return Object.values(this.checkedResults).some(i=>i)}addTags(){let{searchControl:i,searchResults:n,checkedResults:s}=this,a=n.results.filter(o=>s[o.id]);a.length>0&&(i.reset(),this.searchResults=n_,this.checkedResults={},this.ga.event("tags_added","tag_search",a.map(o=>o.label).join(",")),this.added.emit(a))}openResults(){this.resultsVisible||(this.resultsVisible=!0)}closeResults(i){this.resultsVisible&&i.target instanceof Node&&(this.el.nativeElement.contains(i.target)||(this.resultsVisible=!1))}getUpdatedCheckedResults(i){let n=this.checkedResults;return i.results.reduce((s,{id:a})=>(s[a]=n[a]??!1,s),{})}};return t.\u0275fac=function(r){return new(r||t)(R(te),R(gs),R(di))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-tag-search"]],hostVars:2,hostBindings:function(r,i){r&1&&yt("click",function(){return i.openResults()})("focusin",function(){return i.openResults()})("click",function(n){return i.closeResults(n)},!1,cb)("focusin",function(n){return i.closeResults(n)},!1,cb),r&2&&Ai(i.clsName)},inputs:{search:"search",searchLimit:"searchLimit",searchThrottle:"searchThrottle"},outputs:{added:"added"},decls:11,vars:7,consts:[["search",""],["subscriptSizing","dynamic"],[1,"form-input-label"],["matInput","",3,"formControl"],["matPrefix","",1,"search-icon"],["matSuffix","","mat-icon-button","","hraIconButtonSize","small",1,"add-icon",3,"click","disabled"],[1,"results"],[1,"item"],["labelPosition","after",3,"ngModelChange","ngModel"]],template:function(r,i){if(r&1){let n=Qe();N(0,"mat-form-field",1)(1,"mat-label",2),ut(2,"Search"),F(),Ot(3,"input",3,0),N(5,"mat-icon",4),ut(6,"search"),F(),N(7,"button",5),yt("click",function(){Lt(n);let s=fi(4);return i.addTags(),Nt(s.focus())}),N(8,"mat-icon"),ut(9,"add_circle"),F()()(),Wt(10,nLt,3,0,"div",6)}r&2&&(ee("expanded",i.resultsVisible),$(3),mt("formControl",i.searchControl),$(4),ee("active",i.hasCheckedTags()),mt("disabled",!i.hasCheckedTags()),$(3),ae(i.resultsVisible&&i.searchResults.totalCount>0?10:-1))},dependencies:[Qf,JE,m4,f4,$n,jT,Qu,Ko,K4,mTt,gr,th],styles:["[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{--mdc-filled-text-field-active-indicator-color: var(--sys-primary);--mdc-filled-text-field-focus-active-indicator-color: var(--sys-primary);--mdc-filled-text-field-input-text-color: var(--sys-primary);--mat-form-field-trailing-icon-color: var(--sys-primary);--mat-form-field-leading-icon-color: var(--sys-primary);width:100%}[_nghost-%COMP%]   mat-label[_ngcontent-%COMP%]{color:var(--sys-inverse-surface);font:var(--sys-label-medium)}[_nghost-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--sys-primary-fixed)}[_nghost-%COMP%]   .search-icon[_ngcontent-%COMP%]{padding-right:.5rem}[_nghost-%COMP%]   .results[_ngcontent-%COMP%]{background:var(--sys-surface-container-low);border-top:2px solid var(--sys-primary);box-shadow:0 5px 4px #201e3d29;padding:.5rem 0}[_nghost-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{--mdc-checkbox-state-layer-size: 3rem;--mdc-checkbox-selected-icon-color: var(--sys-on-tertiary-fixed);--mdc-checkbox-selected-focus-icon-color: var(--sys-on-tertiary-fixed)}[_nghost-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label{font:var(--sys-label-medium);padding-right:.5rem}"],changeDetection:0}),t})(),QG=()=>[];function oLt(t,e){if(t&1){let r=Qe();N(0,"ccf-tag-list",33),pi(1,"async"),yt("tagRemoved",function(i){Lt(r);let n=Rt();return Nt(n.astags.removeTag(i))}),F()}if(t&2){let r,i=Rt();mt("tags",(r=mi(1,1,i.astags.tags$))!==null&&r!==void 0?r:so(3,QG))}}function lLt(t,e){}var cLt=(()=>{let t=class{constructor(i,n,s,a){this.model=i,this.registration=n,this.page=s,this.astags=a,this.clsName="ccf-right-sidebar",this.modalClosed=!1,this.registrationExpanded=new It,this.position$=this.model.position$.pipe(kt(o=>({x:Math.floor(o.x),y:Math.floor(o.y),z:Math.floor(o.z)}))),this.metadata=K(HG)}setDefaultPosition(){this.registration.snapshot.initialRegistration?this.registration.resetPosition():this.model.setDefaultPosition()}};return t.\u0275fac=function(r){return new(r||t)(R(xi),R(ur),R(hr),R(Qo))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-right-sidebar"]],hostVars:2,hostBindings:function(r,i){r&2&&Ai(i.clsName)},inputs:{modalClosed:"modalClosed"},outputs:{registrationExpanded:"registrationExpanded"},decls:76,vars:40,consts:[["menu","matMenu"],["help","matMenu"],["blocksize",""],["rotation",""],["slices",""],["tagListPlaceholder",""],[1,"tissue-block-settings",3,"title"],["mat-icon-button","","hraIconButtonSize","large","aria-label","Icon to open nested menu","hraMicroTooltip","More",3,"matMenuTriggerFor"],[1,"settings-overlay"],["mat-menu-item","","matRipple","","matRippleColor","#201E3D14",3,"click"],[1,"menu-divider"],["mat-icon-button","","hraIconButtonSize","large","aria-label","Icon to open nested menu","hraMicroTooltip","App guides and training resources",3,"matMenuTriggerFor"],["mat-menu-item","","href","https://youtu.be/vk9oReXWfkY","target","_blank","rel","noopener noreferrer"],["mat-menu-item","","href","https://github.com/hubmapconsortium/hra-ui/wiki/Application-Guides#registration-user-interface","target","_blank","rel","noopener noreferrer"],["mat-menu-item","","href","https://doi.org/10.5281/zenodo.5575776","target","_blank","rel","noopener noreferrer"],["mat-menu-item","","href","https://apps.humanatlas.io/eui/","target","_blank","rel","noopener noreferrer"],[1,"position"],[1,"label"],["hraMicroTooltip","Current position of the tissue block measured in millimeters",1,"x-position","box"],[1,"position-label"],[1,"position-value"],["hraMicroTooltip","Current position of the tissue block measured in millimeters",1,"y-position","box"],["hraMicroTooltip","Current position of the tissue block measured in millimeters",1,"z-position","box"],[3,"blockSizeChange","blockSize"],[3,"rotationChange","rotation"],[3,"slicesConfigChange","slicesConfig"],[1,"as-tags",3,"title"],[3,"added","search"],["class","tag-list",3,"tags","tagRemoved",4,"ngIf","ngIfElse"],[2,"flex-grow","1"],[1,"buttons"],["mat-button","","hraButtonSize","medium",3,"click"],[1,"review-button",3,"registerData","enterErrorMode","registrationCallbackSet","displayErrors","userValid","metaData"],[1,"tag-list",3,"tagRemoved","tags"]],template:function(r,i){if(r&1){let n=Qe();N(0,"hra-expansion-panel",6)(1,"hra-expansion-panel-actions")(2,"button",7)(3,"mat-icon"),ut(4,"more_vert"),F()(),N(5,"mat-menu",8,0)(7,"button",9),yt("click",function(){Lt(n);let s=fi(53),a=fi(56),o=fi(59);return i.setDefaultPosition(),s.refreshBlockSize(),o.refreshSlices(),Nt(a.resetAllRotations())}),ut(8," Reset all settings "),F(),Ot(9,"mat-divider",10),N(10,"button",9),yt("click",function(){return Lt(n),Nt(i.setDefaultPosition())}),ut(11,"Reset position"),F(),N(12,"button",9),yt("click",function(){Lt(n);let s=fi(53);return Nt(s.refreshBlockSize())}),ut(13," Reset size "),F(),N(14,"button",9),yt("click",function(){Lt(n);let s=fi(56);return Nt(s.resetAllRotations())}),ut(15," Reset rotation "),F()()(),N(16,"hra-expansion-panel-header-content")(17,"button",11)(18,"mat-icon"),ut(19,"help"),F()(),N(20,"mat-menu",null,1)(22,"a",12),ut(23," Watch video tutorial "),F(),N(24,"a",13),ut(25," Use app guide "),F(),N(26,"a",14),ut(27," Use standard operating procedure "),F(),Ot(28,"mat-divider",10),N(29,"a",15),ut(30," Explore all registrations "),F()()(),N(31,"div",16)(32,"span",17),ut(33,"Position"),F(),N(34,"div",18)(35,"span",19),ut(36,"X"),F(),N(37,"span",20),ut(38),pi(39,"async"),F()(),N(40,"div",21)(41,"span",19),ut(42,"Y"),F(),N(43,"span",20),ut(44),pi(45,"async"),F()(),N(46,"div",22)(47,"span",19),ut(48,"Z"),F(),N(49,"span",20),ut(50),pi(51,"async"),F()()(),N(52,"ccf-block-size-input",23,2),pi(54,"async"),yt("blockSizeChange",function(s){return Lt(n),Nt(i.model.setBlockSize(s))}),F(),N(55,"ccf-rotation-slider",24,3),pi(57,"async"),yt("rotationChange",function(s){return Lt(n),Nt(i.model.setRotation(s))}),F(),N(58,"ccf-slices-input",25,4),pi(60,"async"),yt("slicesConfigChange",function(s){return Lt(n),Nt(i.model.setSlicesConfig(s))}),F()(),N(61,"hra-expansion-panel",26)(62,"ccf-tag-search",27),yt("added",function(s){return Lt(n),Nt(i.astags.addTags(s))}),F(),Wt(63,oLt,2,4,"ccf-tag-list",28),pi(64,"async"),Wt(65,lLt,0,0,"ng-template",null,5,sz),F(),Ot(67,"div",29),N(68,"div",30)(69,"button",31),yt("click",function(){return Lt(n),Nt(i.metadata.openModal("edit"))}),ut(70,"Edit Metadata"),F(),N(71,"ccf-review-button",32),pi(72,"async"),pi(73,"async"),pi(74,"async"),pi(75,"async"),yt("registerData",function(){return Lt(n),Nt(i.registration.register())})("enterErrorMode",function(){return Lt(n),Nt(i.registration.setDisplayErrors(!i.registration.isValid))}),F()()}if(r&2){let n,s,a,o,l,c,h,p,m=fi(6),f=fi(21),g=fi(66);mt("title","Tissue Block Settings"),$(2),mt("matMenuTriggerFor",m),$(15),mt("matMenuTriggerFor",f),$(21),Oi((n=mi(39,17,i.position$))==null?null:n.x),$(6),Oi((s=mi(45,19,i.position$))==null?null:s.y),$(6),Oi((a=mi(51,21,i.position$))==null?null:a.z),$(2),mt("blockSize",mi(54,23,i.model.blockSize$)),$(3),mt("rotation",mi(57,25,i.model.rotation$)),$(3),mt("slicesConfig",mi(60,27,i.model.slicesConfig$)),$(3),mt("title","Anatomical Structure Tags"),$(),mt("search",i.astags.searchExternal),$(),mt("ngIf",(o=mi(64,29,i.model.organ$))==null?null:o.name)("ngIfElse",g),$(8),mt("registrationCallbackSet",(l=mi(72,31,i.page.registrationCallbackSet$))!==null&&l!==void 0?l:!1)("displayErrors",(c=mi(73,33,i.registration.displayErrors$))!==null&&c!==void 0?c:!1)("userValid",(h=mi(74,35,i.registration.valid$))!==null&&h!==void 0?h:!1)("metaData",(p=mi(75,37,i.registration.metadata$))!==null&&p!==void 0?p:so(39,QG))}},dependencies:[ep,A0,gr,EDt,LDt,XG,zDt,eLt,aLt,_p,ZG,$G,Hl,Vu,E0,ba,$n,b0,lg,co,ip],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;margin-top:1rem}[_nghost-%COMP%]   ccf-slices-input[_ngcontent-%COMP%]{margin:.75rem 0 1.5rem}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]     .header>.title{font:var(--sys-label-large)}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]     .content{margin:0 1rem}[_nghost-%COMP%]   hra-expansion-panel.tissue-block-settings[_ngcontent-%COMP%]     .content .expansion-body{display:flex;flex-wrap:wrap;justify-content:space-between;padding:0 40px 0 28px}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{padding:.5rem 0;font:var(--sys-label-medium)}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]{height:3rem;width:5rem;border-radius:.25rem;display:flex;flex-direction:column;justify-content:center;padding:0 12px}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--sys-on-primary-fixed-variant)}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .position-label[_ngcontent-%COMP%]{font:var(--sys-label-small)}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   .box[_ngcontent-%COMP%]   .position-value[_ngcontent-%COMP%]{font:var(--sys-label-medium)}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   .x-position[_ngcontent-%COMP%]{background-color:color-mix(in srgb,#d50000 8%,transparent);margin-bottom:.5rem}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   .y-position[_ngcontent-%COMP%]{background-color:color-mix(in srgb,#00c853 8%,transparent);margin-bottom:.5rem}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]   .position[_ngcontent-%COMP%]   .z-position[_ngcontent-%COMP%]{background-color:color-mix(in srgb,#2979ff 8%,transparent)}[_nghost-%COMP%]   .tissue-block-settings[_ngcontent-%COMP%]{border-bottom:1px solid #acb5c3}[_nghost-%COMP%]   .as-tags[_ngcontent-%COMP%]   ccf-tag-list[_ngcontent-%COMP%]{margin-top:1rem}[_nghost-%COMP%]   .as-tags[_ngcontent-%COMP%]     .header{height:3.5rem}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{padding:1rem;display:flex;justify-content:space-between;border-top:1px solid #acb5c3;margin-top:1rem}[_nghost-%COMP%]   .info-button-container[_ngcontent-%COMP%]{height:3.75rem;display:flex;justify-content:flex-end}[_nghost-%COMP%]   .review-button[_ngcontent-%COMP%]     .mat-mdc-button-disabled{pointer-events:auto;box-shadow:none}"],changeDetection:0}),t})(),qT=function(){function t(){}return t}(),t9=function(){function t(e){this._ranScripts={},this._renderer=e.createRenderer(null,null)}return t.prototype.insertEl=function(e,r,i,n,s){if(n&&!s){var a=e._prevSVG&&e._prevSVG.parentNode;a&&this._renderer.removeChild(a,e._prevSVG),r.innerHTML=""}s?this._renderer.insertBefore(r,i,r.firstChild):this._renderer.appendChild(r,i),i.nodeName==="svg"&&(e._prevSVG=i)},t.prototype.evalScripts=function(e,r,i){for(var n=e.querySelectorAll("script"),s=[],a=0;a<n.length;a++){var o=n[a].getAttribute("type");if(!o||o==="application/ecmascript"||o==="application/javascript"){var l=n[a].innerText||n[a].textContent;s.push(l),this._renderer.removeChild(n[a].parentNode,n[a])}}if(s.length>0&&(i==="always"||i==="once"&&!this._ranScripts[r])){for(var a=0;a<s.length;a++)new Function(s[a])(window);this._ranScripts[r]=!0}},t.\u0275fac=function(e){return new(e||t)(U(Qd))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),zL=function(){function t(e,r){this._inlineSVGService=e,this._el=r}return t.prototype.ngAfterViewInit=function(){this._updateContent()},t.prototype.ngOnChanges=function(e){e.content&&this._updateContent()},t.prototype._updateContent=function(){this._inlineSVGService.insertEl(this.context,this._el.nativeElement,this.content,this.replaceContents,this.prepend)},t.\u0275fac=function(e){return new(e||t)(R(t9),R(te))},t.\u0275cmp=Pt({type:t,selectors:[["inline-svg"]],inputs:{context:"context",content:"content",replaceContents:"replaceContents",prepend:"prepend"},features:[yr],decls:0,vars:0,template:function(e,r){},encapsulation:2,changeDetection:0}),t}(),VL=function(){function t(e,r,i,n,s,a){this._appBase=e,this._location=r,this._config=i,this._http=i&&!i.bypassHttpClientInterceptorChain?n:new js(s),this._renderer=a.createRenderer(null,null),this.setBaseUrl(),t._cache||(t._cache=new Map),t._inProgressReqs||(t._inProgressReqs=new Map)}return t.prototype.getSVG=function(e,r,i){var n=this;i===void 0&&(i=!0);var s=(r?this.getAbsoluteUrl(e):e).replace(/#.+$/,"");if(i&&t._cache.has(s))return Ge(this._cloneSVG(t._cache.get(s)));if(t._inProgressReqs.has(s))return t._inProgressReqs.get(s);var a=this._http.get(s,{responseType:"text"}).pipe(Li(function(){t._inProgressReqs.delete(s)}),il(function(o){return t._inProgressReqs.delete(s),If(o.message)}),oa(),kt(function(o){var l=n._svgElementFromString(o);return t._cache.set(s,l),n._cloneSVG(l)}));return t._inProgressReqs.set(s,a),a},t.prototype.setBaseUrl=function(){this._config?this._baseUrl=this._config.baseUrl:this._appBase!==null?this._baseUrl=this._appBase:this._location!==null&&(this._baseUrl=this._location.getBaseHrefFromDOM())},t.prototype.getAbsoluteUrl=function(e){this._baseUrl&&!/^https?:\/\//i.test(e)&&(e=this._baseUrl+e,e.indexOf("//")===0&&(e=e.substring(1)));var r=this._renderer.createElement("BASE");return r.href=e,r.href},t.prototype._svgElementFromString=function(e){var r=this._renderer.createElement("DIV");r.innerHTML=e;var i=r.querySelector("svg");if(!i)throw new Error("No SVG found in loaded contents");return i},t.prototype._cloneSVG=function(e){return e.cloneNode(!0)},t.\u0275fac=function(e){return new(e||t)(U(fz,8),U(gS,8),U(qT,8),U(js),U(wS),U(Qd))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();function uLt(t){return t.charAt(0)==="#"||t.indexOf(".svg#")>-1}function hLt(){return typeof SVGRect<"u"}function dLt(t,e,r){var i=e.querySelector('[id="'.concat(r,'"]'));if(!i)throw new Error('Symbol "'.concat(r,'" not found'));var n=t.createElement("svg","svg");t.appendChild(n,i);var s=t.createElement("use","svg");return t.setAttribute(s,"href","#".concat(r),"xlink"),t.appendChild(n,s),n}function e9(t,e){for(var r=0;r<e.length;r++){var i=t.getAttribute(e[r]);i&&t.removeAttribute(e[r])}for(var n=t.getElementsByTagName("*"),r=0;r<n.length;r++)e9(n[r],e)}function pLt(t,e){for(var r in e)t.setAttribute(r,e[r])}var mLt=function(){function t(e,r,i,n,s,a,o,l){this._el=e,this._viewContainerRef=r,this._resolver=i,this._svgCache=n,this._renderer=s,this._inlineSVGService=a,this._config=o,this.platformId=l,this.resolveSVGUrl=!0,this.replaceContents=!0,this.prepend=!1,this.injectComponent=!1,this.cacheSVG=!0,this.forceEvalStyles=!1,this.evalScripts="always",this.onSVGInserted=new It,this.onSVGFailed=new It,this._supportsSVG=hLt(),!Bo(this.platformId)&&!this._supportsSVG&&this._fail("Embed SVG are not supported by this browser")}return t.prototype.ngOnInit=function(){!this._isValidPlatform()||this._isSSRDisabled()||this._insertSVG()},t.prototype.ngOnChanges=function(e){if(!(!this._isValidPlatform()||this._isSSRDisabled())){var r=!!e.setSVGAttributes;(e.inlineSVG||r)&&this._insertSVG(r)}},t.prototype.ngOnDestroy=function(){this._subscription&&this._subscription.unsubscribe()},t.prototype._insertSVG=function(e){var r=this;if(e===void 0&&(e=!1),!(!Bo(this.platformId)&&!this._supportsSVG)){if(!this.inlineSVG){this._fail("No URL passed to [inlineSVG]");return}!e&&this.inlineSVG===this._prevUrl||(this._prevUrl=this.inlineSVG,this._subscription=this._svgCache.getSVG(this.inlineSVG,this.resolveSVGUrl,this.cacheSVG).subscribe(function(i){if(uLt(r.inlineSVG)){var n=r.inlineSVG.split("#")[1];i=dLt(r._renderer,i,n)}r._processSvg(i)},function(i){r._fail(i)}))}},t.prototype._processSvg=function(e){if(e){if(this.removeSVGAttributes&&Fn(this.platformId)&&e9(e,this.removeSVGAttributes),this.setSVGAttributes&&pLt(e,this.setSVGAttributes),this.onSVGLoaded&&(e=this.onSVGLoaded(e,this._el.nativeElement)),this._insertEl(e),Fn(this.platformId)&&this._inlineSVGService.evalScripts(e,this.inlineSVG,this.evalScripts),this.forceEvalStyles){var r=e.querySelectorAll("style");Array.from(r).forEach(function(i){return i.textContent+=""})}this.onSVGInserted.emit(e)}},t.prototype._insertEl=function(e){if(this.injectComponent){if(!this._svgComp){var r=this._resolver.resolveComponentFactory(zL);this._svgComp=this._viewContainerRef.createComponent(r)}this._svgComp.instance.context=this,this._svgComp.instance.replaceContents=this.replaceContents,this._svgComp.instance.prepend=this.prepend,this._svgComp.instance.content=e,this._renderer.appendChild(this._el.nativeElement,this._svgComp.injector.get(zL)._el.nativeElement)}else this._inlineSVGService.insertEl(this,this._el.nativeElement,e,this.replaceContents,this.prepend)},t.prototype._fail=function(e){if(this.onSVGFailed.emit(e),this.fallbackImgUrl){var r=this._renderer.createElement("IMG");this._renderer.setAttribute(r,"src",this.fallbackImgUrl),this._insertEl(r)}else this.fallbackSVG&&this.fallbackSVG!==this.inlineSVG&&(this.inlineSVG=this.fallbackSVG,this._insertSVG())},t.prototype._isValidPlatform=function(){return Bo(this.platformId)||Fn(this.platformId)},t.prototype._isSSRDisabled=function(){return Bo(this.platformId)&&this._config&&this._config.clientOnly},t.\u0275fac=function(e){return new(e||t)(R(te),R(Zn),R(dc),R(VL),R(Gu),R(t9),R(qT,8),R(dn))},t.\u0275dir=qt({type:t,selectors:[["","inlineSVG",""]],inputs:{inlineSVG:"inlineSVG",resolveSVGUrl:"resolveSVGUrl",replaceContents:"replaceContents",prepend:"prepend",injectComponent:"injectComponent",cacheSVG:"cacheSVG",setSVGAttributes:"setSVGAttributes",removeSVGAttributes:"removeSVGAttributes",forceEvalStyles:"forceEvalStyles",evalScripts:"evalScripts",fallbackImgUrl:"fallbackImgUrl",fallbackSVG:"fallbackSVG",onSVGLoaded:"onSVGLoaded"},outputs:{onSVGInserted:"onSVGInserted",onSVGFailed:"onSVGFailed"},features:[We([VL]),yr]}),t}(),fLt=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:qT,useValue:e}]}},t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t}(),gLt=(()=>{let t=class{constructor(){this.contrast=je(!1),this.svgPath=rr(()=>`assets/logo/hra_brandmark${this.contrast()?"_contrast":""}.svg`)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-brandmark"]],inputs:{contrast:[1,"contrast"]},standalone:!0,features:[Kt],decls:2,vars:3,consts:[["alt","Human Reference Atlas brandmark","data-testid","brandmark",1,"hra-brandmark",3,"inlineSVG"]],template:function(r,i){r&1&&(Ot(0,"div",0),pi(1,"assetUrl")),r&2&&mt("inlineSVG",mi(1,1,i.svgPath()))},dependencies:[ti,fLt,mLt,PRt],styles:["[_nghost-%COMP%]{color:var(--hra-brandmark-color, var(--sys-tertiary))}[_nghost-%COMP%]   .hra-brandmark[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .hra-brandmark[_ngcontent-%COMP%]     svg{height:100%;width:min-content}"],changeDetection:0}),t})(),vLt=(()=>{let t=class{constructor(){this.name=je.required(),this.size=je.required(),this.icon=rr(()=>`products:${this.name()}${this.size()==="large"?"_large":""}`)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-product-logo"]],inputs:{name:[1,"name"],size:[1,"size"]},standalone:!0,features:[Kt],decls:1,vars:3,consts:[["data-testid","product-logo",3,"svgIcon"]],template:function(r,i){r&1&&Ot(0,"mat-icon",0),r&2&&(ee("small",i.size()==="small"),mt("svgIcon",i.icon()))},dependencies:[ti,Hi,gr],styles:["[_nghost-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:5rem;height:5rem}[_nghost-%COMP%]   mat-icon.small[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}"],changeDetection:0}),t})(),_Lt={small:"var(--sys-label-micro)",medium:"var(--sys-label-medium)",large:"var(--sys-label-large)"},bLt=(()=>{let t=class{constructor(){this.size=je.required({alias:"hraSoftwareStatusSize"}),this.font=rr(()=>_Lt[this.size()])}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=qt({type:t,selectors:[["","hraSoftwareStatusSize",""]],hostVars:2,hostBindings:function(r,i){r&2&&Ya("font",i.font())},inputs:{size:[1,"hraSoftwareStatusSize","size"]},standalone:!0}),t})(),yLt=(()=>{let t=class{constructor(){this.status=je.required(),this.size=je("medium"),this.tooltips={Preview:"Earliest development stage: Core features are under construction and evolving.",Alpha:"Early testing stage: Features may change. Expect bugs and incomplete functionality.",Beta:"Near-final stage: Most features are ready, fewer bugs, and more feedback is needed."}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-software-status-indicator"]],inputs:{status:[1,"status"],size:[1,"size"]},standalone:!0,features:[Kt],decls:2,vars:3,consts:[["hraMicroTooltipSize","small",1,"app-description",3,"hraSoftwareStatusSize","hraMicroTooltip"]],template:function(r,i){r&1&&(N(0,"div",0),ut(1),F()),r&2&&(mt("hraSoftwareStatusSize",i.size())("hraMicroTooltip",i.tooltips[i.status()]),$(),Sn(" ",i.status(),`
`))},dependencies:[ti,co,bLt],styles:["[_nghost-%COMP%]   .app-description[_ngcontent-%COMP%]{font:var(--sys-label-micro);letter-spacing:var(--sys-label-micro-tracking);border-radius:.125rem;width:fit-content;padding:.125rem .25rem;color:var(--sys-on-tertiary-fixed);background:rgb(from var(--sys-on-tertiary-container) r g b/.08);cursor:default}"],changeDetection:0}),t})();function wLt(t,e){t&1&&(N(0,"a",0),Ot(1,"hra-brandmark"),F())}function xLt(t,e){if(t&1&&(N(0,"mat-button-toggle",4)(1,"span",7),ut(2),F()()),t&2){let r=Rt();$(2),Oi(r.appTitle())}}function CLt(t,e){if(t&1&&(N(0,"a",5)(1,"span",8),ut(2),F()()),t&2){let r=Rt();mt("href",r.appLink(),KA),$(2),Oi(r.appTitle())}}function kLt(t,e){if(t&1&&Ot(0,"hra-software-status-indicator",6),t&2){let r=Rt();mt("status",r.appStatus())}}var i9=(()=>{let t=class{constructor(){this.variant=je("basic"),this.appStatus=je(),this.brandmark=je(!0),this.app=je.required(),this.appLink=je.required(),this.appTitle=je.required()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-nav-header-buttons"]],inputs:{variant:[1,"variant"],appStatus:[1,"appStatus"],brandmark:[1,"brandmark"],app:[1,"app"],appLink:[1,"appLink"],appTitle:[1,"appTitle"]},standalone:!0,features:[Kt],decls:7,vars:6,consts:[["href","https://humanatlas.io","target","_blank","rel","noopener noreferrer","aria-label","Visit Human Reference Atlas",1,"hra-logo"],[1,"app-logo",3,"href"],["size","small",3,"name"],[1,"logos-text"],["value","bold","hraNavCatButton","","hraButtonSize","small","disableRipple","",1,"app-name-nav"],["aria-label","Return to app home",1,"app-name",3,"href"],["size","small",3,"status"],[1,"label"],[1,"app-label"]],template:function(r,i){r&1&&(Wt(0,wLt,2,0,"a",0),N(1,"a",1),Ot(2,"hra-product-logo",2),F(),N(3,"span",3),Wt(4,xLt,3,1,"mat-button-toggle",4)(5,CLt,3,2,"a",5)(6,kLt,1,1,"hra-software-status-indicator",6),F()),r&2&&(ae(i.brandmark()?0:-1),$(),mt("href",i.appLink(),KA),ke("alt",i.appTitle()+" logo"),$(),mt("name",i.app()),$(2),ae(i.variant()==="sidenav"?4:5),$(2),ae(i.appStatus()?6:-1))},dependencies:[ti,gLt,PIt,b0,Vr,_0,vLt,yLt],styles:["[_nghost-%COMP%]{display:flex;height:2.5rem}[_nghost-%COMP%] > a[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .hra-logo[_ngcontent-%COMP%], [_nghost-%COMP%]   .app-logo[_ngcontent-%COMP%]{display:inline-flex;color:var(--sys-secondary)}[_nghost-%COMP%]   .hra-logo[_ngcontent-%COMP%]{margin-right:.25rem;width:2.5rem}[_nghost-%COMP%]   .app-logo[_ngcontent-%COMP%]{margin-right:.125rem}[_nghost-%COMP%]   .logos-text[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}[_nghost-%COMP%]   .logos-text[_ngcontent-%COMP%]   .app-label[_ngcontent-%COMP%]{font:var(--sys-label-large);letter-spacing:var(--sys-label-large-tracking)}[_nghost-%COMP%]   .app-name[_ngcontent-%COMP%]{margin-left:.5rem;color:var(--sys-secondary)}[_nghost-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{--mat-standard-button-toggle-height: 1.25rem}[_nghost-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]     .mat-button-toggle-button{display:flex;align-items:center}[_nghost-%COMP%]   hra-software-status-indicator[_ngcontent-%COMP%]{margin-left:.5rem}"],changeDetection:0}),t})(),r9=(()=>{let t=class{constructor(){this.backClick=su()}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-back-bar"]],outputs:{backClick:"backClick"},standalone:!0,features:[Kt],decls:4,vars:0,consts:[["mat-button","",3,"click"]],template:function(r,i){r&1&&(N(0,"button",0),yt("click",function(){return i.backClick.emit()}),N(1,"mat-icon"),ut(2,"arrow_back"),F(),ut(3,` Back
`),F())},dependencies:[Hi,gr,Vr,ba],styles:["[_nghost-%COMP%]{display:block;width:100%;height:3rem;padding:.25rem;background-color:var(--sys-surface-dim);box-shadow:0 .25rem .25rem color-mix(in srgb,var(--sys-on-surface) 20%,transparent)}"],changeDetection:0}),t})(),ALt=(()=>{let t=class{get isLightTheme(){return this.theming.getTheme().endsWith("light")}constructor(i,n,s,a,o,l,c,h,p,m,f,g){this.model=i,this.page=n,this.consentService=s,this.snackbar=a,this.theming=o,this.dialog=l,this.globalConfig=p,this.ga=f,this.registration=g,this.registrationStarted=!1,this.disablePositionChange=!1,this.registrationExpanded=!1,this.theme$=this.globalConfig.getOption("theme"),this.themeMode$=new cc("light"),this.homeUrl$=this.globalConfig.getOption("homeUrl"),this.view$=this.globalConfig.getOption("view"),this.viewSide$=this.globalConfig.getOption("viewSide"),this.side="anterior",this.view3D=!1,this.metadata=K(HG),this.embedded=Vy(K(hr).useCancelRegistrationCallback$),this.subscriptions=new vi,o.initialize(c,h),this.subscriptions.add(n.registrationStarted$.subscribe(_=>{this.registrationStarted=_})),Rr([this.theme$,this.themeMode$]).subscribe(([_,w])=>{this.theming.setTheme(`${_}-theme-${w}`),m.markForCheck()}),Rr([this.view$,this.viewSide$]).subscribe(([_,w])=>{this.model.setViewType(_??"register"),this.model.setViewSide(w??"anterior"),m.markForCheck()}),cDt(l)}ngOnInit(){let i=this.snackbar.openFromComponent(B2t,{data:{preClose:()=>{i.dismiss()}},duration:this.consentService.consent==="not-set"?1/0:3e3,panelClass:"usage-snackbar"}),{editRegistration:n,user:s,organ:a}=this.globalConfig.snapshot;!n&&(!s||!a)&&this.metadata.openModal("create")}toggleScheme(){this.themeMode$.next(this.isLightTheme?"dark":"light")}registrationToggle(i){this.registrationExpanded=i,this.registrationExpanded||(this.disablePositionChange=!1)}handleClick(i){let n=["mat-mdc-input-element","mat-mdc-form-field","form-input-label"];for(let s of n)if(typeof i.className=="string"&&i.className.includes(s)){this.disablePositionChange=!0;return}this.disablePositionChange=!1}ngOnDestroy(){this.subscriptions.unsubscribe()}updateSide(i){this.ga.event("side_update","stage_nav",i),i==="3D"?this.updateView(!0):(this.updateView(!1),this.side=i,this.model.setViewSide(i))}updateView(i){this.view3D=i,this.ga.event("view_update","stage_nav",i?"3D":"Register"),this.model.setViewType(i?"3d":"register")}resetStage(){this.resetMetadata(),this.resetCamera()}resetCamera(){this.model.setViewSide("anterior"),this.model.setViewType("register")}resetMetadata(){this.registration.snapshot.initialRegistration?this.registration.setToInitialRegistration():this.model.setOrganDefaults()}resetBlock(){this.registration.snapshot.initialRegistration?this.registration.resetPosition():this.model.setDefaultPosition()}};return t.\u0275fac=function(r){return new(r||t)(R(xi),R(hr),R(ag),R(zT),R(jk),R(dl),R(te),R(Re),R(Dr),R(di),R(gs),R(ur))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-root"]],hostVars:2,hostBindings:function(r,i){r&1&&yt("mousedown",function(n){return i.handleClick(n.target)},!1,Xm),r&2&&ee("embedded",i.embedded())},inputs:{side:"side",view3D:"view3D"},decls:38,vars:9,consts:[["menu","matMenu"],[3,"backClick"],["app","rui","appTitle","Registration User Interface",3,"appLink","brandmark"],[3,"modalClosed"],["disabled","",1,"registration",3,"title"],["mat-icon-button","","hraIconButtonSize","large","aria-label","Icon to open nested menu",3,"matMenuTriggerFor"],["mat-menu-item","","matRipple","","matRippleColor","#201E3D14",3,"click"],[1,"menu-divider"],["name","sideSelect","aria-label","Side Select","hideSingleSelectionIndicator","","hraButtonToggleSize","medium",3,"change"],["value","left"],["value","right"],["value","anterior","checked",""],["value","posterior"],["name","modeSelect","aria-label","Mode Select","hideSingleSelectionIndicator","","hraButtonToggleSize","medium",3,"change"],["value","register","checked",""],["value","preview"],[1,"stage-content",3,"disablePositionChange"],[3,"registrationExpanded","modalClosed"]],template:function(r,i){if(r&1){let n=Qe();N(0,"hra-back-bar",1),yt("backClick",function(){return Lt(n),Nt(i.page.cancelRegistration())}),F(),Ot(1,"hra-nav-header-buttons",2),pi(2,"async"),Ot(3,"ccf-left-sidebar",3),N(4,"hra-expansion-panel",4)(5,"hra-expansion-panel-actions")(6,"button",5)(7,"mat-icon"),ut(8,"more_vert"),F()(),N(9,"mat-menu",null,0)(11,"button",6),yt("click",function(){return Lt(n),Nt(i.resetStage())}),ut(12,"Reset all"),F(),Ot(13,"mat-divider",7),N(14,"button",6),yt("click",function(){return Lt(n),Nt(i.resetCamera())}),ut(15,"Reset camera view"),F(),N(16,"button",6),yt("click",function(){return Lt(n),Nt(i.resetBlock())}),ut(17,"Reset tissue block"),F(),Ot(18,"mat-divider",7),N(19,"button",6),yt("click",function(){return Lt(n),Nt(i.resetMetadata())}),ut(20," Reset registration metadata "),F()()(),N(21,"hra-expansion-panel-header-content")(22,"mat-button-toggle-group",8),yt("change",function(s){return Lt(n),Nt(i.updateSide(s.value))}),N(23,"mat-button-toggle",9),ut(24,"Left"),F(),N(25,"mat-button-toggle",10),ut(26,"Right"),F(),N(27,"mat-button-toggle",11),ut(28,"Anterior"),F(),N(29,"mat-button-toggle",12),ut(30,"Posterior"),F()(),N(31,"mat-button-toggle-group",13),yt("change",function(s){return Lt(n),Nt(i.updateView(s.value==="preview"))}),N(32,"mat-button-toggle",14),ut(33,"Register"),F(),N(34,"mat-button-toggle",15),ut(35,"Preview"),F()()()(),Ot(36,"ccf-content",16),N(37,"ccf-right-sidebar",17),yt("registrationExpanded",function(s){return Lt(n),Nt(i.registrationToggle(s))}),F()}if(r&2){let n,s=fi(10);$(),mt("appLink",(n=mi(2,7,i.homeUrl$))!==null&&n!==void 0?n:"https://apps.humanatlas.io/rui/")("brandmark",!0),$(2),mt("modalClosed",i.registrationStarted),$(),mt("title","Registration"),$(2),mt("matMenuTriggerFor",s),$(30),mt("disablePositionChange",i.disablePositionChange),$(),mt("modalClosed",i.registrationStarted)}},dependencies:[gr,fDt,SDt,cLt,i9,_p,ZG,$G,Hl,Vu,E0,lg,b7,_0,$n,A0,r9,ip],styles:['[_nghost-%COMP%]{display:grid;grid-template-columns:21rem minmax(586px,calc(100vw - 43.25rem - 4px)) 22.25rem;grid-template-rows:0rem 4.5rem auto;grid-template-areas:"back back back" "header registration metadata" "left content metadata";height:100%}.embedded[_nghost-%COMP%]{grid-template-rows:3rem 4.5rem auto}[_nghost-%COMP%]:not(.embedded)   hra-back-bar[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   ccf-registration-modal[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   hra-back-bar[_ngcontent-%COMP%]{grid-area:back}[_nghost-%COMP%]   hra-nav-header-buttons[_ngcontent-%COMP%]{grid-area:header}[_nghost-%COMP%]   .registration[_ngcontent-%COMP%]{grid-area:registration;border-left:1px solid #acb5c3;border-right:1px solid #acb5c3}[_nghost-%COMP%]   ccf-right-sidebar[_ngcontent-%COMP%]{grid-area:metadata}[_nghost-%COMP%]   ccf-left-sidebar[_ngcontent-%COMP%]{grid-area:left;border-top:1px solid #acb5c3}[_nghost-%COMP%]   .stage-content[_ngcontent-%COMP%]{grid-area:content}[_nghost-%COMP%]   hra-nav-header-buttons[_ngcontent-%COMP%]{margin:1rem .75rem}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]{padding:1rem}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]     .title{font:var(--sys-label-large)}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]   hra-expansion-panel-header-content[_ngcontent-%COMP%]{display:flex;gap:1rem}[_nghost-%COMP%]   hra-expansion-panel[_ngcontent-%COMP%]   hra-expansion-panel-header-content[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{--mat-standard-button-toggle-height: auto}  .cdk-global-overlay-wrapper:has(.usage-snackbar){z-index:2000!important;--mdc-snackbar-container-color: var(--sys-surface-dim);--mdc-snackbar-supporting-text-color: var(--sys-secondary)}'],changeDetection:0}),t})();function SLt(t,e){t&1&&Ot(0,"ccf-root")}function ELt(t){try{return yG.json(t)}catch{return""+t}}var TLt=(()=>{let t=class extends yMt{constructor(i,n){let s=yG;super(i,n,{initialConfig:x(x(x({},Jo.dbOptions),globalThis.ruiConfig),Jo.customization),parse:{useDownload:s.boolean,user:s.json,organ:ELt,editRegistration:s.json,register:s.function,cancelRegistration:s.function,fetchPreviousRegistrations:s.function,skipUnsavedChangesConfirmation:s.boolean,organOptions:s.stringArray}})}};return t.\u0275fac=function(r){return new(r||t)(R(Dr),R(di))},t.\u0275cmp=Pt({type:t,selectors:[["ccf-root-wc"]],inputs:{baseHref:"baseHref",useDownload:"useDownload",referenceData:"referenceData",user:"user",organ:"organ",editRegistration:"editRegistration",register:"register",cancelRegistration:"cancelRegistration",fetchPreviousRegistrations:"fetchPreviousRegistrations",skipUnsavedChangesConfirmation:"skipUnsavedChangesConfirmation",theme:"theme",homeUrl:"homeUrl",organOptions:"organOptions",collisionsEndpoint:"collisionsEndpoint",view:"view",viewSide:"viewSide"},features:[oi],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(r,i){r&1&&Wt(0,SLt,1,0,"ccf-root",0),r&2&&mt("ngIf",i.initialized)},dependencies:[ep,ALt],encapsulation:2,changeDetection:0}),t})();function jL(t){return new Vt(3e3,!1)}function ILt(){return new Vt(3100,!1)}function OLt(){return new Vt(3101,!1)}function PLt(t){return new Vt(3001,!1)}function MLt(t){return new Vt(3003,!1)}function RLt(t){return new Vt(3004,!1)}function BLt(t,e){return new Vt(3005,!1)}function DLt(){return new Vt(3006,!1)}function LLt(){return new Vt(3007,!1)}function NLt(t,e){return new Vt(3008,!1)}function FLt(t){return new Vt(3002,!1)}function zLt(t,e,r,i,n){return new Vt(3010,!1)}function VLt(){return new Vt(3011,!1)}function jLt(){return new Vt(3012,!1)}function ULt(){return new Vt(3200,!1)}function HLt(){return new Vt(3202,!1)}function GLt(){return new Vt(3013,!1)}function WLt(t){return new Vt(3014,!1)}function ZLt(t){return new Vt(3015,!1)}function $Lt(t){return new Vt(3016,!1)}function XLt(t,e){return new Vt(3404,!1)}function qLt(t){return new Vt(3502,!1)}function KLt(t){return new Vt(3503,!1)}function YLt(){return new Vt(3300,!1)}function JLt(t){return new Vt(3504,!1)}function QLt(t){return new Vt(3301,!1)}function tNt(t,e){return new Vt(3302,!1)}function eNt(t){return new Vt(3303,!1)}function iNt(t,e){return new Vt(3400,!1)}function rNt(t){return new Vt(3401,!1)}function nNt(t){return new Vt(3402,!1)}function sNt(t,e){return new Vt(3505,!1)}function jl(t){switch(t.length){case 0:return new _f;case 1:return t[0];default:return new Z4(t)}}function n9(t,e,r=new Map,i=new Map){let n=[],s=[],a=-1,o=null;if(e.forEach(l=>{let c=l.get("offset"),h=c==a,p=h&&o||new Map;l.forEach((m,f)=>{let g=f,_=m;if(f!=="offset")switch(g=t.normalizePropertyName(g,n),_){case _T:_=r.get(f);break;case Do:_=i.get(f);break;default:_=t.normalizeStyleValue(f,g,_,n);break}p.set(g,_)}),h||s.push(p),o=p,a=c}),n.length)throw qLt(n);return s}function KT(t,e,r,i){switch(e){case"start":t.onStart(()=>i(r&&H1(r,"start",t)));break;case"done":t.onDone(()=>i(r&&H1(r,"done",t)));break;case"destroy":t.onDestroy(()=>i(r&&H1(r,"destroy",t)));break}}function H1(t,e,r){let i=r.totalTime,n=!!r.disabled,s=JT(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,i??t.totalTime,n),a=t._data;return a!=null&&(s._data=a),s}function JT(t,e,r,i,n="",s=0,a){return{element:t,triggerName:e,fromState:r,toState:i,phaseName:n,totalTime:s,disabled:!!a}}function ls(t,e,r){let i=t.get(e);return i||t.set(e,i=r),i}function UL(t){let e=t.indexOf(":"),r=t.substring(1,e),i=t.slice(e+1);return[r,i]}var aNt=typeof document>"u"?null:document.documentElement;function QT(t){let e=t.parentNode||t.host||null;return e===aNt?null:e}function oNt(t){return t.substring(1,6)=="ebkit"}var qc=null,HL=!1;function lNt(t){qc||(qc=cNt()||{},HL=qc.style?"WebkitAppearance"in qc.style:!1);let e=!0;return qc.style&&!oNt(t)&&(e=t in qc.style,!e&&HL&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in qc.style)),e}function cNt(){return typeof document<"u"?document.body:null}function s9(t,e){for(;e;){if(e===t)return!0;e=QT(e)}return!1}function a9(t,e,r){if(r)return Array.from(t.querySelectorAll(e));let i=t.querySelector(e);return i?[i]:[]}var o9=(()=>{let t=class{validateStyleProperty(i){return lNt(i)}containsElement(i,n){return s9(i,n)}getParentElement(i){return QT(i)}query(i,n,s){return a9(i,n,s)}computeStyle(i,n,s){return s||""}animate(i,n,s,a,o,l=[],c){return new _f(s,a)}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),l9=class{};l9.NOOP=new o9;var tI=l9,eI=class{},uNt=1e3,c9="{{",hNt="}}",u9="ng-enter",Wk="ng-leave",s_="ng-trigger",uy=".ng-trigger",GL="ng-animating",Zk=".ng-animating";function Mo(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:$k(parseFloat(e[1]),e[2])}function $k(t,e){switch(e){case"s":return t*uNt;default:return t}}function hy(t,e,r){return t.hasOwnProperty("duration")?t:dNt(t,e,r)}function dNt(t,e,r){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,n,s=0,a="";if(typeof t=="string"){let o=t.match(i);if(o===null)return e.push(jL(t)),{duration:0,delay:0,easing:""};n=$k(parseFloat(o[1]),o[2]);let l=o[3];l!=null&&(s=$k(parseFloat(l),o[4]));let c=o[5];c&&(a=c)}else n=t;if(!r){let o=!1,l=e.length;n<0&&(e.push(ILt()),o=!0),s<0&&(e.push(OLt()),o=!0),o&&e.splice(l,0,jL(t))}return{duration:n,delay:s,easing:a}}function pNt(t){return t.length?t[0]instanceof Map?t:t.map(e=>new Map(Object.entries(e))):[]}function Va(t,e,r){e.forEach((i,n)=>{let s=iI(n);r&&!r.has(n)&&r.set(n,t.style[s]),t.style[s]=i})}function gu(t,e){e.forEach((r,i)=>{let n=iI(i);t.style[n]=""})}function dm(t){return Array.isArray(t)?t.length==1?t[0]:LEt(t):t}function mNt(t,e,r){let i=e.params||{},n=h9(t);n.length&&n.forEach(s=>{i.hasOwnProperty(s)||r.push(PLt(s))})}var Xk=new RegExp(`${c9}\\s*(.+?)\\s*${hNt}`,"g");function h9(t){let e=[];if(typeof t=="string"){let r;for(;r=Xk.exec(t);)e.push(r[1]);Xk.lastIndex=0}return e}function Af(t,e,r){let i=`${t}`,n=i.replace(Xk,(s,a)=>{let o=e[a];return o==null&&(r.push(MLt(a)),o=""),o.toString()});return n==i?t:n}var fNt=/-+([a-z0-9])/g;function iI(t){return t.replace(fNt,(...e)=>e[1].toUpperCase())}function gNt(t,e){return t===0||e===0}function vNt(t,e,r){if(r.size&&e.length){let i=e[0],n=[];if(r.forEach((s,a)=>{i.has(a)||n.push(a),i.set(a,s)}),n.length)for(let s=1;s<e.length;s++){let a=e[s];n.forEach(o=>a.set(o,rI(t,o)))}}return e}function ss(t,e,r){switch(e.type){case Oe.Trigger:return t.visitTrigger(e,r);case Oe.State:return t.visitState(e,r);case Oe.Transition:return t.visitTransition(e,r);case Oe.Sequence:return t.visitSequence(e,r);case Oe.Group:return t.visitGroup(e,r);case Oe.Animate:return t.visitAnimate(e,r);case Oe.Keyframes:return t.visitKeyframes(e,r);case Oe.Style:return t.visitStyle(e,r);case Oe.Reference:return t.visitReference(e,r);case Oe.AnimateChild:return t.visitAnimateChild(e,r);case Oe.AnimateRef:return t.visitAnimateRef(e,r);case Oe.Query:return t.visitQuery(e,r);case Oe.Stagger:return t.visitStagger(e,r);default:throw RLt(e.type)}}function rI(t,e){return window.getComputedStyle(t)[e]}var _Nt=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),bNt=class extends eI{normalizePropertyName(t,e){return iI(t)}normalizeStyleValue(t,e,r,i){let n="",s=r.toString().trim();if(_Nt.has(e)&&r!==0&&r!=="0")if(typeof r=="number")n="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(BLt(t,r))}return s+n}},dy="*";function yNt(t,e){let r=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(i=>wNt(i,r,e)):r.push(t),r}function wNt(t,e,r){if(t[0]==":"){let l=xNt(t,r);if(typeof l=="function"){e.push(l);return}t=l}let i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return r.push(ZLt(t)),e;let n=i[1],s=i[2],a=i[3];e.push(WL(n,a));let o=n==dy&&a==dy;s[0]=="<"&&!o&&e.push(WL(a,n))}function xNt(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(r,i)=>parseFloat(i)>parseFloat(r);case":decrement":return(r,i)=>parseFloat(i)<parseFloat(r);default:return e.push($Lt(t)),"* => *"}}var a_=new Set(["true","1"]),o_=new Set(["false","0"]);function WL(t,e){let r=a_.has(t)||o_.has(t),i=a_.has(e)||o_.has(e);return(n,s)=>{let a=t==dy||t==n,o=e==dy||e==s;return!a&&r&&typeof n=="boolean"&&(a=n?a_.has(t):o_.has(t)),!o&&i&&typeof s=="boolean"&&(o=s?a_.has(e):o_.has(e)),a&&o}}var d9=":self",CNt=new RegExp(`s*${d9}s*,?`,"g");function p9(t,e,r,i){return new kNt(t).build(e,r,i)}var ZL="",kNt=class{constructor(t){this._driver=t}build(t,e,r){let i=new ENt(e);return this._resetContextStyleTimingState(i),ss(this,dm(t),i)}_resetContextStyleTimingState(t){t.currentQuerySelector=ZL,t.collectedStyles=new Map,t.collectedStyles.set(ZL,new Map),t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,i=e.depCount=0,n=[],s=[];return t.name.charAt(0)=="@"&&e.errors.push(DLt()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),a.type==Oe.State){let o=a,l=o.name;l.toString().split(/\s*,\s*/).forEach(c=>{o.name=c,n.push(this.visitState(o,e))}),o.name=l}else if(a.type==Oe.Transition){let o=this.visitTransition(a,e);r+=o.queryCount,i+=o.depCount,s.push(o)}else e.errors.push(LLt())}),{type:Oe.Trigger,name:t.name,states:n,transitions:s,queryCount:r,depCount:i,options:null}}visitState(t,e){let r=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(r.containsDynamicStyles){let n=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(o=>{h9(o).forEach(l=>{s.hasOwnProperty(l)||n.add(l)})})}),n.size&&e.errors.push(NLt(t.name,[...n.values()]))}return{type:Oe.State,name:t.name,style:r,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;let r=ss(this,dm(t.animation),e),i=yNt(t.expr,e.errors);return{type:Oe.Transition,matchers:i,animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Kc(t.options)}}visitSequence(t,e){return{type:Oe.Sequence,steps:t.steps.map(r=>ss(this,r,e)),options:Kc(t.options)}}visitGroup(t,e){let r=e.currentTime,i=0,n=t.steps.map(s=>{e.currentTime=r;let a=ss(this,s,e);return i=Math.max(i,e.currentTime),a});return e.currentTime=i,{type:Oe.Group,steps:n,options:Kc(t.options)}}visitAnimate(t,e){let r=INt(t.timings,e.errors);e.currentAnimateTimings=r;let i,n=t.styles?t.styles:tr({});if(n.type==Oe.Keyframes)i=this.visitKeyframes(n,e);else{let s=t.styles,a=!1;if(!s){a=!0;let l={};r.easing&&(l.easing=r.easing),s=tr(l)}e.currentTime+=r.duration+r.delay;let o=this.visitStyle(s,e);o.isEmptyStep=a,i=o}return e.currentAnimateTimings=null,{type:Oe.Animate,timings:r,style:i,options:null}}visitStyle(t,e){let r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){let r=[],i=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of i)typeof a=="string"?a===Do?r.push(a):e.errors.push(FLt(a)):r.push(new Map(Object.entries(a)));let n=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!n)){for(let o of a.values())if(o.toString().indexOf(c9)>=0){n=!0;break}}}),{type:Oe.Style,styles:r,easing:s,offset:t.offset,containsDynamicStyles:n,options:null}}_validateStyleAst(t,e){let r=e.currentAnimateTimings,i=e.currentTime,n=e.currentTime;r&&n>0&&(n-=r.duration+r.delay),t.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,o)=>{let l=e.collectedStyles.get(e.currentQuerySelector),c=l.get(o),h=!0;c&&(n!=i&&n>=c.startTime&&i<=c.endTime&&(e.errors.push(zLt(o,c.startTime,c.endTime,n,i)),h=!1),n=c.startTime),h&&l.set(o,{startTime:n,endTime:i}),e.options&&mNt(a,e.options,e.errors)})})}visitKeyframes(t,e){let r={type:Oe.Keyframes,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(VLt()),r;let i=1,n=0,s=[],a=!1,o=!1,l=0,c=t.steps.map(w=>{let S=this._makeStyleAst(w,e),C=S.offset!=null?S.offset:TNt(S.styles),b=0;return C!=null&&(n++,b=S.offset=C),o=o||b<0||b>1,a=a||b<l,l=b,s.push(b),S});o&&e.errors.push(jLt()),a&&e.errors.push(ULt());let h=t.steps.length,p=0;n>0&&n<h?e.errors.push(HLt()):n==0&&(p=i/(h-1));let m=h-1,f=e.currentTime,g=e.currentAnimateTimings,_=g.duration;return c.forEach((w,S)=>{let C=p>0?S==m?1:p*S:s[S],b=C*_;e.currentTime=f+g.delay+b,g.duration=b,this._validateStyleAst(w,e),w.offset=C,r.styles.push(w)}),r}visitReference(t,e){return{type:Oe.Reference,animation:ss(this,dm(t.animation),e),options:Kc(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:Oe.AnimateChild,options:Kc(t.options)}}visitAnimateRef(t,e){return{type:Oe.AnimateRef,animation:this.visitReference(t.animation,e),options:Kc(t.options)}}visitQuery(t,e){let r=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;let[n,s]=ANt(t.selector);e.currentQuerySelector=r.length?r+" "+n:n,ls(e.collectedStyles,e.currentQuerySelector,new Map);let a=ss(this,dm(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:Oe.Query,selector:n,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:Kc(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(GLt());let r=t.timings==="full"?{duration:0,delay:0,easing:"full"}:hy(t.timings,e.errors,!0);return{type:Oe.Stagger,animation:ss(this,dm(t.animation),e),timings:r,options:null}}};function ANt(t){let e=!!t.split(/\s*,\s*/).find(r=>r==d9);return e&&(t=t.replace(CNt,"")),t=t.replace(/@\*/g,uy).replace(/@\w+/g,r=>uy+"-"+r.slice(1)).replace(/:animating/g,Zk),[t,e]}function SNt(t){return t?x({},t):null}var ENt=class{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function TNt(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(r=>{if(r instanceof Map&&r.has("offset")){let i=r;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}return e}function INt(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let n=hy(t,e).duration;return G1(n,0,"")}let r=t;if(r.split(/\s+/).some(n=>n.charAt(0)=="{"&&n.charAt(1)=="{")){let n=G1(0,0,"");return n.dynamic=!0,n.strValue=r,n}let i=hy(r,e);return G1(i.duration,i.delay,i.easing)}function Kc(t){return t?(t=x({},t),t.params&&(t.params=SNt(t.params))):t={},t}function G1(t,e,r){return{duration:t,delay:e,easing:r}}function nI(t,e,r,i,n,s,a=null,o=!1){return{type:1,element:t,keyframes:e,preStyleProps:r,postStyleProps:i,duration:n,delay:s,totalTime:n+s,easing:a,subTimeline:o}}var sI=class{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}},ONt=1,PNt=":enter",MNt=new RegExp(PNt,"g"),RNt=":leave",BNt=new RegExp(RNt,"g");function m9(t,e,r,i,n,s=new Map,a=new Map,o,l,c=[]){return new DNt().buildKeyframes(t,e,r,i,n,s,a,o,l,c)}var DNt=class{buildKeyframes(t,e,r,i,n,s,a,o,l,c=[]){l=l||new sI;let h=new LNt(t,e,l,i,n,c,[]);h.options=o;let p=o.delay?Mo(o.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([s],null,h.errors,o),ss(this,r,h);let m=h.timelines.filter(f=>f.containsAnimation());if(m.length&&a.size){let f;for(let g=m.length-1;g>=0;g--){let _=m[g];if(_.element===e){f=_;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,h.errors,o)}return m.length?m.map(f=>f.buildKeyframes()):[nI(e,[],[],[],0,p,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){let r=e.subInstructions.get(e.element);if(r){let i=e.createSubContext(t.options),n=e.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);n!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){let r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,r),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,r){for(let i of t){let n=i?.delay;if(n){let s=typeof n=="number"?n:Mo(Af(n,i?.params??{},e.errors));r.delayNextStep(s)}}}_visitSubInstructions(t,e,r){let i=e.currentTimeline.currentTime,n=r.duration!=null?Mo(r.duration):null,s=r.delay!=null?Mo(r.delay):null;return n!==0&&t.forEach(a=>{let o=e.appendInstructionToTimeline(a,n,s);i=Math.max(i,o.duration+o.delay)}),i}visitReference(t,e){e.updateOptions(t.options,!0),ss(this,t.animation,e),e.previousNode=t}visitSequence(t,e){let r=e.subContextCount,i=e,n=t.options;if(n&&(n.params||n.delay)&&(i=e.createSubContext(n),i.transformIntoNewTimeline(),n.delay!=null)){i.previousNode.type==Oe.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=py);let s=Mo(n.delay);i.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>ss(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){let r=[],i=e.currentTimeline.currentTime,n=t.options&&t.options.delay?Mo(t.options.delay):0;t.steps.forEach(s=>{let a=e.createSubContext(t.options);n&&a.delayNextStep(n),ss(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){let r=t.strValue,i=e.params?Af(r,e.params,e.errors):r;return hy(i,e.errors)}else return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){let r=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),i.snapshotCurrentStyles());let n=t.style;n.type==Oe.Keyframes?this.visitKeyframes(n,e):(e.incrementTime(r.duration),this.visitStyle(n,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){let r=e.currentTimeline,i=e.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let n=i&&i.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(n):r.setStyles(t.styles,n,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){let r=e.currentAnimateTimings,i=e.currentTimeline.duration,n=r.duration,s=e.createSubContext().currentTimeline;s.easing=r.easing,t.styles.forEach(a=>{let o=a.offset||0;s.forwardTime(o*n),s.setStyles(a.styles,a.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(i+n),e.previousNode=t}visitQuery(t,e){let r=e.currentTimeline.currentTime,i=t.options||{},n=i.delay?Mo(i.delay):0;n&&(e.previousNode.type===Oe.Style||r==0&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=py);let s=r,a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=a.length;let o=null;a.forEach((l,c)=>{e.currentQueryIndex=c;let h=e.createSubContext(t.options,l);n&&h.delayNextStep(n),l===e.element&&(o=h.currentTimeline),ss(this,t.animation,h),h.currentTimeline.applyStylesToKeyframe();let p=h.currentTimeline.currentTime;s=Math.max(s,p)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),o&&(e.currentTimeline.mergeTimelineCollectedStyles(o),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){let r=e.parentContext,i=e.currentTimeline,n=t.timings,s=Math.abs(n.duration),a=s*(e.currentQueryTotal-1),o=s*e.currentQueryIndex;switch(n.duration<0?"reverse":n.easing){case"reverse":o=a-o;break;case"full":o=r.currentStaggerTime;break}let l=e.currentTimeline;o&&l.delayNextStep(o);let c=l.currentTime;ss(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=i.currentTime-c+(i.startTime-r.currentTimeline.startTime)}},py={},LNt=class f9{constructor(e,r,i,n,s,a,o,l){this._driver=e,this.element=r,this.subInstructions=i,this._enterClassName=n,this._leaveClassName=s,this.errors=a,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=py,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new g9(this._driver,r,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,r){if(!e)return;let i=e,n=this.options;i.duration!=null&&(n.duration=Mo(i.duration)),i.delay!=null&&(n.delay=Mo(i.delay));let s=i.params;if(s){let a=n.params;a||(a=this.options.params={}),Object.keys(s).forEach(o=>{(!r||!a.hasOwnProperty(o))&&(a[o]=Af(s[o],a,this.errors))})}}_copyOptions(){let e={};if(this.options){let r=this.options.params;if(r){let i=e.params={};Object.keys(r).forEach(n=>{i[n]=r[n]})}}return e}createSubContext(e=null,r,i){let n=r||this.element,s=new f9(this._driver,n,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(n,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=py,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,r,i){let n={duration:r??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new NNt(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,n,e.stretchStartingKeyframe);return this.timelines.push(s),n}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,r,i,n,s,a){let o=[];if(n&&o.push(this.element),e.length>0){e=e.replace(MNt,"."+this._enterClassName),e=e.replace(BNt,"."+this._leaveClassName);let l=i!=1,c=this._driver.query(this.element,e,l);i!==0&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),o.push(...c)}return!s&&o.length==0&&a.push(WLt(r)),o}},g9=class v9{constructor(e,r,i,n){this._driver=e,this.element=r,this.startTime=i,this._elementTimelineStylesLookup=n,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(r),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(r,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let r=this._keyframes.size===1&&this._pendingStyles.size;this.duration||r?(this.forwardTime(this.currentTime+e),r&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,r){return this.applyStylesToKeyframe(),new v9(this._driver,e,r||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=ONt,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,r){this._localTimelineStyles.set(e,r),this._globalTimelineStyles.set(e,r),this._styleSummary.set(e,{time:this.currentTime,value:r})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[r,i]of this._globalTimelineStyles)this._backFill.set(r,i||Do),this._currentKeyframe.set(r,Do);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,r,i,n){r&&this._previousKeyframe.set("easing",r);let s=n&&n.params||{},a=FNt(e,this._globalTimelineStyles);for(let[o,l]of a){let c=Af(l,s,i);this._pendingStyles.set(o,c),this._localTimelineStyles.has(o)||this._backFill.set(o,this._globalTimelineStyles.get(o)??Do),this._updateStyle(o,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,r)=>{this._currentKeyframe.set(r,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,r)=>{this._currentKeyframe.has(r)||this._currentKeyframe.set(r,e)}))}snapshotCurrentStyles(){for(let[e,r]of this._localTimelineStyles)this._pendingStyles.set(e,r),this._updateStyle(e,r)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let r in this._currentKeyframe)e.push(r);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((r,i)=>{let n=this._styleSummary.get(i);(!n||r.time>n.time)&&this._updateStyle(i,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,r=new Set,i=this._keyframes.size===1&&this.duration===0,n=[];this._keyframes.forEach((o,l)=>{let c=new Map([...this._backFill,...o]);c.forEach((h,p)=>{h===_T?e.add(p):h===Do&&r.add(p)}),i||c.set("offset",l/this.duration),n.push(c)});let s=[...e.values()],a=[...r.values()];if(i){let o=n[0],l=new Map(o);o.set("offset",0),l.set("offset",1),n=[o,l]}return nI(this.element,n,s,a,this.duration,this.startTime,this.easing,!1)}},NNt=class extends g9{constructor(t,e,r,i,n,s,a=!1){super(t,e,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=n,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){let n=[],s=r+e,a=e/s,o=new Map(t[0]);o.set("offset",0),n.push(o);let l=new Map(t[0]);l.set("offset",$L(a)),n.push(l);let c=t.length-1;for(let h=1;h<=c;h++){let p=new Map(t[h]),m=p.get("offset"),f=e+m*r;p.set("offset",$L(f/s)),n.push(p)}r=s,e=0,i="",t=n}return nI(this.element,t,this.preStyleProps,this.postStyleProps,r,e,i,!0)}};function $L(t,e=3){let r=Math.pow(10,e-1);return Math.round(t*r)/r}function FNt(t,e){let r=new Map,i;return t.forEach(n=>{if(n==="*"){i??=e.keys();for(let s of i)r.set(s,Do)}else for(let[s,a]of n)r.set(s,a)}),r}function XL(t,e,r,i,n,s,a,o,l,c,h,p,m){return{type:0,element:t,triggerName:e,isRemovalTransition:n,fromState:r,fromStyles:s,toState:i,toStyles:a,timelines:o,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:p,errors:m}}var W1={},_9=class{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,i){return zNt(this.ast.matchers,t,e,r,i)}buildStyles(t,e,r){let i=this._stateStyles.get("*");return t!==void 0&&(i=this._stateStyles.get(t?.toString())||i),i?i.buildStyles(e,r):new Map}build(t,e,r,i,n,s,a,o,l,c){let h=[],p=this.ast.options&&this.ast.options.params||W1,m=a&&a.params||W1,f=this.buildStyles(r,m,h),g=o&&o.params||W1,_=this.buildStyles(i,g,h),w=new Set,S=new Map,C=new Map,b=i==="void",P={params:b9(g,p),delay:this.ast.options?.delay},L=c?[]:m9(t,e,this.ast.animation,n,s,f,_,P,l,h),H=0;return L.forEach(M=>{H=Math.max(M.duration+M.delay,H)}),h.length?XL(e,this._triggerName,r,i,b,f,_,[],[],S,C,H,h):(L.forEach(M=>{let E=M.element,it=ls(S,E,new Set);M.preStyleProps.forEach(W=>it.add(W));let X=ls(C,E,new Set);M.postStyleProps.forEach(W=>X.add(W)),E!==e&&w.add(E)}),XL(e,this._triggerName,r,i,b,f,_,L,[...w.values()],S,C,H))}};function zNt(t,e,r,i,n){return t.some(s=>s(e,r,i,n))}function b9(t,e){let r=x({},e);return Object.entries(t).forEach(([i,n])=>{n!=null&&(r[i]=n)}),r}var VNt=class{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){let r=new Map,i=b9(t,this.defaultParams);return this.styles.styles.forEach(n=>{typeof n!="string"&&n.forEach((s,a)=>{s&&(s=Af(s,i,e));let o=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,o,s,e),r.set(a,s)})}),r}};function jNt(t,e,r){return new UNt(t,e,r)}var UNt=class{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states=new Map,e.states.forEach(i=>{let n=i.options&&i.options.params||{};this.states.set(i.name,new VNt(i.style,n,r))}),qL(this.states,"true","1"),qL(this.states,"false","0"),e.transitions.forEach(i=>{this.transitionFactories.push(new _9(t,i,this.states))}),this.fallbackTransition=HNt(t,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,i){return this.transitionFactories.find(n=>n.match(t,e,r,i))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}};function HNt(t,e,r){let i=[(a,o)=>!0],n={type:Oe.Sequence,steps:[],options:null},s={type:Oe.Transition,animation:n,matchers:i,options:null,queryCount:0,depCount:0};return new _9(t,s,e)}function qL(t,e,r){t.has(e)?t.has(r)||t.set(r,t.get(e)):t.has(r)&&t.set(e,t.get(r))}var GNt=new sI,WNt=class{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){let r=[],i=[],n=p9(this._driver,e,r,i);if(r.length)throw KLt(r);i.length,this._animations.set(t,n)}_buildPlayer(t,e,r){let i=t.element,n=n9(this._normalizer,t.keyframes,e,r);return this._driver.animate(i,n,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){let i=[],n=this._animations.get(t),s,a=new Map;if(n?(s=m9(this._driver,e,n,u9,Wk,new Map,new Map,r,GNt,i),s.forEach(c=>{let h=ls(a,c.element,new Map);c.postStyleProps.forEach(p=>h.set(p,null))})):(i.push(YLt()),s=[]),i.length)throw JLt(i);a.forEach((c,h)=>{c.forEach((p,m)=>{c.set(m,this._driver.computeStyle(h,m,Do))})});let o=s.map(c=>{let h=a.get(c.element);return this._buildPlayer(c,new Map,h)}),l=jl(o);return this._playersById.set(t,l),l.onDestroy(()=>this.destroy(t)),this.players.push(l),l}destroy(t){let e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);let r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){let e=this._playersById.get(t);if(!e)throw QLt(t);return e}listen(t,e,r,i){let n=JT(e,"","","");return KT(this._getPlayer(t),r,n,i),()=>{}}command(t,e,r,i){if(r=="register"){this.register(t,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(t,e,s);return}let n=this._getPlayer(t);switch(r){case"play":n.play();break;case"pause":n.pause();break;case"reset":n.reset();break;case"restart":n.restart();break;case"finish":n.finish();break;case"init":n.init();break;case"setPosition":n.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t);break}}},KL="ng-animate-queued",ZNt=".ng-animate-queued",Z1="ng-animate-disabled",$Nt=".ng-animate-disabled",XNt="ng-star-inserted",qNt=".ng-star-inserted",KNt=[],y9={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},YNt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},aa="__ng_removed",qk=class{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;let r=t&&t.hasOwnProperty("value"),i=r?t.value:t;if(this.value=eFt(i),r){let n=t,{value:s}=n,a=oK(n,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){let e=t.params;if(e){let r=this.options.params;Object.keys(e).forEach(i=>{r[i]==null&&(r[i]=e[i])})}}},zm="void",$1=new qk(zm),JNt=class{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Bs(e,this._hostClassName)}listen(t,e,r,i){if(!this._triggers.has(e))throw tNt(r,e);if(r==null||r.length==0)throw eNt(e);if(!iFt(r))throw iNt(r,e);let n=ls(this._elementListeners,t,[]),s={name:e,phase:r,callback:i};n.push(s);let a=ls(this._engine.statesByElement,t,new Map);return a.has(e)||(Bs(t,s_),Bs(t,s_+"-"+e),a.set(e,$1)),()=>{this._engine.afterFlush(()=>{let o=n.indexOf(s);o>=0&&n.splice(o,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return this._triggers.has(t)?!1:(this._triggers.set(t,e),!0)}_getTrigger(t){let e=this._triggers.get(t);if(!e)throw rNt(t);return e}trigger(t,e,r,i=!0){let n=this._getTrigger(e),s=new Kk(this.id,e,t),a=this._engine.statesByElement.get(t);a||(Bs(t,s_),Bs(t,s_+"-"+e),this._engine.statesByElement.set(t,a=new Map));let o=a.get(e),l=new qk(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&o&&l.absorbOptions(o.options),a.set(e,l),o||(o=$1),l.value!==zm&&o.value===l.value){if(!sFt(o.params,l.params)){let m=[],f=n.matchStyles(o.value,o.params,m),g=n.matchStyles(l.value,l.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{gu(t,f),Va(t,g)})}return}let c=ls(this._engine.playersByElement,t,[]);c.forEach(m=>{m.namespaceId==this.id&&m.triggerName==e&&m.queued&&m.destroy()});let h=n.matchTransition(o.value,l.value,t,l.params),p=!1;if(!h){if(!i)return;h=n.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:o,toState:l,player:s,isFallbackTransition:p}),p||(Bs(t,KL),s.onStart(()=>{Yh(t,KL)})),s.onDone(()=>{let m=this.players.indexOf(s);m>=0&&this.players.splice(m,1);let f=this._engine.playersByElement.get(t);if(f){let g=f.indexOf(s);g>=0&&f.splice(g,1)}}),this.players.push(s),c.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(i=>i.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);let e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){let r=this._engine.driver.query(t,uy,!0);r.forEach(i=>{if(i[aa])return;let n=this._engine.fetchNamespacesByElement(i);n.size?n.forEach(s=>s.triggerLeaveAnimation(i,e,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(t,e,r,i){let n=this._engine.statesByElement.get(t),s=new Map;if(n){let a=[];if(n.forEach((o,l)=>{if(s.set(l,o.value),this._triggers.has(l)){let c=this.trigger(t,l,zm,i);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),r&&jl(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){let e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){let i=new Set;e.forEach(n=>{let s=n.name;if(i.has(s))return;i.add(s);let a=this._triggers.get(s).fallbackTransition,o=r.get(s)||$1,l=new qk(zm),c=new Kk(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:a,fromState:o,toState:l,player:c,isFallbackTransition:!0})})}}removeNode(t,e){let r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(r.totalAnimations){let n=r.players.length?r.playersByQueriedElement.get(t):[];if(n&&n.length)i=!0;else{let s=t;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)r.markElementAsRemoved(this.id,t,!1,e);else{let n=t[aa];(!n||n===y9)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){Bs(t,this._hostClassName)}drainQueuedTransitions(t){let e=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let n=r.element,s=this._elementListeners.get(n);s&&s.forEach(a=>{if(a.name==r.triggerName){let o=JT(n,r.triggerName,r.fromState.value,r.toState.value);o._data=t,KT(r.player,a.phase,o,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(r)}),this._queue=[],e.sort((r,i)=>{let n=r.transition.ast.depCount,s=i.transition.ast.depCount;return n==0||s==0?n-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}},QNt=class{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,n)=>{}}get queuedPlayers(){let t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){let r=new JNt(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let n=!1,s=this.driver.getParentElement(e);for(;s;){let a=i.get(s);if(a){let o=r.indexOf(a);r.splice(o+1,0,t),n=!0;break}s=this.driver.getParentElement(s)}n||r.unshift(t)}else r.push(t);return i.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let i=this._namespaceLookup[t];i&&i.register(e,r)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(t);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){let e=new Set,r=this.statesByElement.get(t);if(r){for(let i of r.values())if(i.namespaceId){let n=this._fetchNamespace(i.namespaceId);n&&e.add(n)}}return e}trigger(t,e,r,i){if(l_(e)){let n=this._fetchNamespace(t);if(n)return n.trigger(e,r,i),!0}return!1}insertNode(t,e,r,i){if(!l_(e))return;let n=e[aa];if(n&&n.setForRemoval){n.setForRemoval=!1,n.setForMove=!0;let s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){let s=this._fetchNamespace(t);s&&s.insertNode(e,r)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Bs(t,Z1)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Yh(t,Z1))}removeNode(t,e,r){if(l_(e)){let i=t?this._fetchNamespace(t):null;i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r);let n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,r)}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,r,i,n){this.collectedLeaveElements.push(e),e[aa]={namespaceId:t,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:n}}listen(t,e,r,i,n){return l_(e)?this._fetchNamespace(t).listen(e,r,i,n):()=>{}}_buildInstruction(t,e,r,i,n){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,i,t.fromState.options,t.toState.options,e,n)}destroyInnerAnimations(t){let e=this.driver.query(t,uy,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(e=this.driver.query(t,Zk,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){let e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){let e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return jl(this.players).onDone(()=>t());t()})}processLeaveNode(t){let e=t[aa];if(e&&e.setForRemoval){if(t[aa]=y9,e.namespaceId){this.destroyInnerAnimations(t);let r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(Z1)&&this.markElementAsDisabled(t,!1),this.driver.query(t,$Nt,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Bs(i,XNt)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{e=this._flushAnimations(r,t)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],e.length?jl(e).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(t){throw nNt(t)}_flushAnimations(t,e){let r=new sI,i=[],n=new Map,s=[],a=new Map,o=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(Y=>{c.add(Y);let nt=this.driver.query(Y,ZNt,!0);for(let ot=0;ot<nt.length;ot++)c.add(nt[ot])});let h=this.bodyNode,p=Array.from(this.statesByElement.keys()),m=QL(p,this.collectedEnterElements),f=new Map,g=0;m.forEach((Y,nt)=>{let ot=u9+g++;f.set(nt,ot),Y.forEach(xt=>Bs(xt,ot))});let _=[],w=new Set,S=new Set;for(let Y=0;Y<this.collectedLeaveElements.length;Y++){let nt=this.collectedLeaveElements[Y],ot=nt[aa];ot&&ot.setForRemoval&&(_.push(nt),w.add(nt),ot.hasAnimation?this.driver.query(nt,qNt,!0).forEach(xt=>w.add(xt)):S.add(nt))}let C=new Map,b=QL(p,Array.from(w));b.forEach((Y,nt)=>{let ot=Wk+g++;C.set(nt,ot),Y.forEach(xt=>Bs(xt,ot))}),t.push(()=>{m.forEach((Y,nt)=>{let ot=f.get(nt);Y.forEach(xt=>Yh(xt,ot))}),b.forEach((Y,nt)=>{let ot=C.get(nt);Y.forEach(xt=>Yh(xt,ot))}),_.forEach(Y=>{this.processLeaveNode(Y)})});let P=[],L=[];for(let Y=this._namespaceList.length-1;Y>=0;Y--)this._namespaceList[Y].drainQueuedTransitions(e).forEach(nt=>{let ot=nt.player,xt=nt.element;if(P.push(ot),this.collectedEnterElements.length){let Ze=xt[aa];if(Ze&&Ze.setForMove){if(Ze.previousTriggersValues&&Ze.previousTriggersValues.has(nt.triggerName)){let li=Ze.previousTriggersValues.get(nt.triggerName),ci=this.statesByElement.get(nt.element);if(ci&&ci.has(nt.triggerName)){let wr=ci.get(nt.triggerName);wr.value=li,ci.set(nt.triggerName,wr)}}ot.destroy();return}}let Z=!h||!this.driver.containsElement(h,xt),et=C.get(xt),tt=f.get(xt),ct=this._buildInstruction(nt,r,tt,et,Z);if(ct.errors&&ct.errors.length){L.push(ct);return}if(Z){ot.onStart(()=>gu(xt,ct.fromStyles)),ot.onDestroy(()=>Va(xt,ct.toStyles)),i.push(ot);return}if(nt.isFallbackTransition){ot.onStart(()=>gu(xt,ct.fromStyles)),ot.onDestroy(()=>Va(xt,ct.toStyles)),i.push(ot);return}let re=[];ct.timelines.forEach(Ze=>{Ze.stretchStartingKeyframe=!0,this.disabledNodes.has(Ze.element)||re.push(Ze)}),ct.timelines=re,r.append(xt,ct.timelines);let me={instruction:ct,player:ot,element:xt};s.push(me),ct.queriedElements.forEach(Ze=>ls(a,Ze,[]).push(ot)),ct.preStyleProps.forEach((Ze,li)=>{if(Ze.size){let ci=o.get(li);ci||o.set(li,ci=new Set),Ze.forEach((wr,Ct)=>ci.add(Ct))}}),ct.postStyleProps.forEach((Ze,li)=>{let ci=l.get(li);ci||l.set(li,ci=new Set),Ze.forEach((wr,Ct)=>ci.add(Ct))})});if(L.length){let Y=[];L.forEach(nt=>{Y.push(sNt(nt.triggerName,nt.errors))}),P.forEach(nt=>nt.destroy()),this.reportError(Y)}let H=new Map,M=new Map;s.forEach(Y=>{let nt=Y.element;r.has(nt)&&(M.set(nt,nt),this._beforeAnimationBuild(Y.player.namespaceId,Y.instruction,H))}),i.forEach(Y=>{let nt=Y.element;this._getPreviousPlayers(nt,!1,Y.namespaceId,Y.triggerName,null).forEach(ot=>{ls(H,nt,[]).push(ot),ot.destroy()})});let E=_.filter(Y=>tN(Y,o,l)),it=new Map;JL(it,this.driver,S,l,Do).forEach(Y=>{tN(Y,o,l)&&E.push(Y)});let X=new Map;m.forEach((Y,nt)=>{JL(X,this.driver,new Set(Y),o,_T)}),E.forEach(Y=>{let nt=it.get(Y),ot=X.get(Y);it.set(Y,new Map([...nt?.entries()??[],...ot?.entries()??[]]))});let W=[],J=[],lt={};s.forEach(Y=>{let{element:nt,player:ot,instruction:xt}=Y;if(r.has(nt)){if(c.has(nt)){ot.onDestroy(()=>Va(nt,xt.toStyles)),ot.disabled=!0,ot.overrideTotalTime(xt.totalTime),i.push(ot);return}let Z=lt;if(M.size>1){let tt=nt,ct=[];for(;tt=tt.parentNode;){let re=M.get(tt);if(re){Z=re;break}ct.push(tt)}ct.forEach(re=>M.set(re,Z))}let et=this._buildAnimation(ot.namespaceId,xt,H,n,X,it);if(ot.setRealPlayer(et),Z===lt)W.push(ot);else{let tt=this.playersByElement.get(Z);tt&&tt.length&&(ot.parentPlayer=jl(tt)),i.push(ot)}}else gu(nt,xt.fromStyles),ot.onDestroy(()=>Va(nt,xt.toStyles)),J.push(ot),c.has(nt)&&i.push(ot)}),J.forEach(Y=>{let nt=n.get(Y.element);if(nt&&nt.length){let ot=jl(nt);Y.setRealPlayer(ot)}}),i.forEach(Y=>{Y.parentPlayer?Y.syncPlayerEvents(Y.parentPlayer):Y.destroy()});for(let Y=0;Y<_.length;Y++){let nt=_[Y],ot=nt[aa];if(Yh(nt,Wk),ot&&ot.hasAnimation)continue;let xt=[];if(a.size){let et=a.get(nt);et&&et.length&&xt.push(...et);let tt=this.driver.query(nt,Zk,!0);for(let ct=0;ct<tt.length;ct++){let re=a.get(tt[ct]);re&&re.length&&xt.push(...re)}}let Z=xt.filter(et=>!et.destroyed);Z.length?rFt(this,nt,Z):this.processLeaveNode(nt)}return _.length=0,W.forEach(Y=>{this.players.push(Y),Y.onDone(()=>{Y.destroy();let nt=this.players.indexOf(Y);this.players.splice(nt,1)}),Y.play()}),W}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,i,n){let s=[];if(e){let a=this.playersByQueriedElement.get(t);a&&(s=a)}else{let a=this.playersByElement.get(t);if(a){let o=!n||n==zm;a.forEach(l=>{l.queued||!o&&l.triggerName!=i||s.push(l)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(t,e,r){let i=e.triggerName,n=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:i;for(let o of e.timelines){let l=o.element,c=l!==n,h=ls(r,l,[]);this._getPreviousPlayers(l,c,s,a,e.toState).forEach(p=>{let m=p.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),p.destroy(),h.push(p)})}gu(n,e.fromStyles)}_buildAnimation(t,e,r,i,n,s){let a=e.triggerName,o=e.element,l=[],c=new Set,h=new Set,p=e.timelines.map(f=>{let g=f.element;c.add(g);let _=g[aa];if(_&&_.removedBeforeQueried)return new _f(f.duration,f.delay);let w=g!==o,S=nFt((r.get(g)||KNt).map(H=>H.getRealPlayer())).filter(H=>{let M=H;return M.element?M.element===g:!1}),C=n.get(g),b=s.get(g),P=n9(this._normalizer,f.keyframes,C,b),L=this._buildPlayer(f,P,S);if(f.subTimeline&&i&&h.add(g),w){let H=new Kk(t,a,g);H.setRealPlayer(L),l.push(H)}return L});l.forEach(f=>{ls(this.playersByQueriedElement,f.element,[]).push(f),f.onDone(()=>tFt(this.playersByQueriedElement,f.element,f))}),c.forEach(f=>Bs(f,GL));let m=jl(p);return m.onDestroy(()=>{c.forEach(f=>Yh(f,GL)),Va(o,e.toStyles)}),h.forEach(f=>{ls(i,f,[]).push(m)}),m}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new _f(t.duration,t.delay)}},Kk=class{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new _f,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,r)=>{e.forEach(i=>KT(t,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){let e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ls(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){let e=this._player;e.triggerCallback&&e.triggerCallback(t)}};function tFt(t,e,r){let i=t.get(e);if(i){if(i.length){let n=i.indexOf(r);i.splice(n,1)}i.length==0&&t.delete(e)}return i}function eFt(t){return t??null}function l_(t){return t&&t.nodeType===1}function iFt(t){return t=="start"||t=="done"}function YL(t,e){let r=t.style.display;return t.style.display=e??"none",r}function JL(t,e,r,i,n){let s=[];r.forEach(l=>s.push(YL(l)));let a=[];i.forEach((l,c)=>{let h=new Map;l.forEach(p=>{let m=e.computeStyle(c,p,n);h.set(p,m),(!m||m.length==0)&&(c[aa]=YNt,a.push(c))}),t.set(c,h)});let o=0;return r.forEach(l=>YL(l,s[o++])),a}function QL(t,e){let r=new Map;if(t.forEach(o=>r.set(o,[])),e.length==0)return r;let i=1,n=new Set(e),s=new Map;function a(o){if(!o)return i;let l=s.get(o);if(l)return l;let c=o.parentNode;return r.has(c)?l=c:n.has(c)?l=i:l=a(c),s.set(o,l),l}return e.forEach(o=>{let l=a(o);l!==i&&r.get(l).push(o)}),r}function Bs(t,e){t.classList?.add(e)}function Yh(t,e){t.classList?.remove(e)}function rFt(t,e,r){jl(r).onDone(()=>t.processLeaveNode(e))}function nFt(t){let e=[];return w9(t,e),e}function w9(t,e){for(let r=0;r<t.length;r++){let i=t[r];i instanceof Z4?w9(i.players,e):e.push(i)}}function sFt(t,e){let r=Object.keys(t),i=Object.keys(e);if(r.length!=i.length)return!1;for(let n=0;n<r.length;n++){let s=r[n];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}function tN(t,e,r){let i=r.get(t);if(!i)return!1;let n=e.get(t);return n?i.forEach(s=>n.add(s)):e.set(t,i),r.delete(t),!0}var Yk=class{constructor(t,e,r){this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,n)=>{},this._transitionEngine=new QNt(t.body,e,r),this._timelineEngine=new WNt(t.body,e,r),this._transitionEngine.onRemovalComplete=(i,n)=>this.onRemovalComplete(i,n)}registerTrigger(t,e,r,i,n){let s=t+"-"+i,a=this._triggerCache[s];if(!a){let o=[],l=[],c=p9(this._driver,n,o,l);if(o.length)throw XLt(i,o);l.length,a=jNt(i,c,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,i,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,i){this._transitionEngine.insertNode(t,e,r,i)}onRemove(t,e,r){this._transitionEngine.removeNode(t,e,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,i){if(r.charAt(0)=="@"){let[n,s]=UL(r),a=i;this._timelineEngine.command(n,e,s,a)}else this._transitionEngine.trigger(t,e,r,i)}listen(t,e,r,i,n){if(r.charAt(0)=="@"){let[s,a]=UL(r);return this._timelineEngine.listen(s,e,a,n)}return this._transitionEngine.listen(t,e,r,i,n)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}};function aFt(t,e){let r=null,i=null;return Array.isArray(e)&&e.length?(r=X1(e[0]),e.length>1&&(i=X1(e[e.length-1]))):e instanceof Map&&(r=X1(e)),r||i?new oFt(t,r,i):null}var x9=class V_{constructor(e,r,i){this._element=e,this._startStyles=r,this._endStyles=i,this._state=0;let n=V_.initialStylesByElement.get(e);n||V_.initialStylesByElement.set(e,n=new Map),this._initialStyles=n}start(){this._state<1&&(this._startStyles&&Va(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Va(this._element,this._initialStyles),this._endStyles&&(Va(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(V_.initialStylesByElement.delete(this._element),this._startStyles&&(gu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(gu(this._element,this._endStyles),this._endStyles=null),Va(this._element,this._initialStyles),this._state=3)}};x9.initialStylesByElement=new WeakMap;var oFt=x9;function X1(t){let e=null;return t.forEach((r,i)=>{lFt(i)&&(e=e||new Map,e.set(i,r))}),e}function lFt(t){return t==="display"||t==="position"}var eN=class{constructor(t,e,r,i){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;let e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){let e=[];return t.forEach(r=>{e.push(Object.fromEntries(r))}),e}_triggerWebAnimation(t,e,r){return t.animate(this._convertKeyframesToObject(e),r)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((e,r)=>{r!=="offset"&&t.set(r,this._finished?e:rI(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){let e=t==="start"?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}},cFt=class{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}containsElement(t,e){return s9(t,e)}getParentElement(t){return QT(t)}query(t,e,r){return a9(t,e,r)}computeStyle(t,e,r){return rI(t,e)}animate(t,e,r,i,n,s=[]){let a=i==0?"both":"forwards",o={duration:r,delay:i,fill:a};n&&(o.easing=n);let l=new Map,c=s.filter(m=>m instanceof eN);gNt(r,i)&&c.forEach(m=>{m.currentSnapshot.forEach((f,g)=>l.set(g,f))});let h=pNt(e).map(m=>new Map(m));h=vNt(t,h,l);let p=aFt(t,h);return new eN(t,h,o,p)}},j_="@",C9="@.disabled",k9=class{constructor(t,e,r,i){this.namespaceId=t,this.delegate=e,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,i=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,r){this.parentNode(e)&&this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,i){this.delegate.setAttribute(t,e,r,i)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,i){this.delegate.setStyle(t,e,r,i)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){e.charAt(0)==j_&&e==C9?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}},uFt=class extends k9{constructor(t,e,r,i,n){super(e,r,i,n),this.factory=t,this.namespaceId=e}setProperty(t,e,r){e.charAt(0)==j_?e.charAt(1)=="."&&e==C9?(r=r===void 0?!0:!!r,this.disableAnimations(t,r)):this.engine.process(this.namespaceId,t,e.slice(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if(e.charAt(0)==j_){let i=hFt(t),n=e.slice(1),s="";return n.charAt(0)!=j_&&([n,s]=dFt(n)),this.engine.listen(this.namespaceId,i,n,s,a=>{let o=a._data||-1;this.factory.scheduleListenerCallback(o,r,a)})}return this.delegate.listen(t,e,r)}};function hFt(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function dFt(t){let e=t.indexOf("."),r=t.substring(0,e),i=t.slice(e+1);return[r,i]}var pFt=class{constructor(t,e,r){this.delegate=t,this.engine=e,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,e.onRemovalComplete=(i,n)=>{n?.removeChild(null,i)}}createRenderer(t,e){let r="",i=this.delegate.createRenderer(t,e);if(!t||!e?.data?.animation){let o=this._rendererCache,l=o.get(i);if(!l){let c=()=>o.delete(i);l=new k9(r,i,this.engine,c),o.set(i,l)}return l}let n=e.id,s=e.id+"-"+this._currentId;this._currentId++,this.engine.register(s,t);let a=o=>{Array.isArray(o)?o.forEach(a):this.engine.registerTrigger(n,s,t,o.name,o)};return e.data.animation.forEach(a),new uFt(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,r){if(t>=0&&t<this._microtaskId){this._zone.run(()=>e(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(n=>{let[s,a]=n;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([e,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}},mFt=(()=>{let t=class extends Yk{constructor(i,n,s){super(i,n,s)}ngOnDestroy(){this.flush()}};return t.\u0275fac=function(r){return new(r||t)(U(ge),U(tI),U(eI))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})();function fFt(){return new bNt}function gFt(t,e,r){return new pFt(t,e,r)}var A9=[{provide:eI,useFactory:fFt},{provide:Yk,useClass:mFt},{provide:Qd,useFactory:gFt,deps:[LC,Yk,Zt]}],Jk=[{provide:tI,useFactory:()=>new cFt},{provide:kr,useValue:"BrowserAnimations"},...A9],vFt=[{provide:tI,useClass:o9},{provide:kr,useValue:"NoopAnimations"},...A9],aI=(()=>{let t=class S9{static withConfig(i){return{ngModule:S9,providers:i.disableAnimations?vFt:Jk}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:Jk,imports:[Vz]}),t})();function _Ft(){return no("NgEagerAnimations"),[...Jk]}function bFt(t){let{appHref:e,sanitizer:r,directory:i}=t;return(n,s)=>{let a=yFt(i,s,n)+".svg",o=e()+a;return r.bypassSecurityTrustResourceUrl(o)}}function yFt(...t){return t.join("/").replace(/\/{2,}/g,"/")}var iN=new ht("FONT_ICONS_CONFIG"),rN=new ht("SVG_ICONS_CONFIG"),wFt={defaultClasses:[]},xFt={directory:"assets/icons"};function CFt(t,{defaultClasses:e}){return()=>{let r=t.getDefaultFontSetClass();t.setDefaultFontSetClass(...e,...r)}}function kFt(t,e,r,{directory:i}){return()=>{let n=bFt({appHref:e.appHref,sanitizer:r,directory:i});t.addSvgIconResolver(n)}}function AFt(t){return An([{provide:iN,useValue:x(x({},wFt),t)},{provide:tp,multi:!0,useFactory:CFt,deps:[g0,iN]}])}function SFt(t){return An([{provide:rN,useValue:x(x({},xFt),t)},{provide:tp,multi:!0,useFactory:kFt,deps:[g0,LG,rp,rN]}])}function EFt(t){return An([AFt(t?.fontIcons),SFt(t?.svgIcons)])}var TFt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-button-toggle-styles"]],standalone:!0,features:[Kt],decls:0,vars:0,template:function(r,i){},styles:[`mat-button-toggle-group{--mat-standard-button-toggle-shape: .25rem;--mat-standard-button-toggle-divider-color: var(--sys-primary)}mat-button-toggle-group.mat-button-toggle-group-appearance-standard{border:unset;outline:solid 1px var(--mat-standard-button-toggle-divider-color)}mat-button-toggle-group .mat-button-toggle{width:100%;font:inherit}mat-button-toggle-group .mat-button-toggle:not(.mat-button-toggle-checked) .mat-button-toggle-button{padding:.5rem 1rem}mat-button-toggle-group .mat-button-toggle.mat-button-toggle-checked .mat-button-toggle-button{padding:.5rem 1rem}mat-button-toggle-group .mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0}mat-button-toggle-group[hraButtonToggleSize=medium] .mat-button-toggle:not(.mat-button-toggle-checked) .mat-button-toggle-button{padding:.3438rem .5rem}mat-button-toggle-group[hraButtonToggleSize=medium] .mat-button-toggle.mat-button-toggle-checked .mat-button-toggle-button{padding:.3438rem .5rem}mat-button-toggle-group[hraButtonToggleSize=small] .mat-button-toggle:not(.mat-button-toggle-checked) .mat-button-toggle-button{padding:.3125rem .5rem}mat-button-toggle-group[hraButtonToggleSize=small] .mat-button-toggle.mat-button-toggle-checked .mat-button-toggle-button{padding:.3125rem .5rem}
`],encapsulation:2,changeDetection:0}),t})();function IFt(){return An([hl(TFt)])}var OFt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-input-styles"]],standalone:!0,features:[Kt],decls:0,vars:0,template:function(r,i){},dependencies:[ti],styles:[`mat-form-field.mat-mdc-form-field-type-mat-input{--mdc-filled-text-field-container-color: var(--sys-surface-container);--mdc-outlined-text-field-outline-color: var(--sys-outline-variant);--mdc-outlined-text-field-focus-outline-color: var(--sys-tertiary);--mdc-outlined-text-field-input-text-color: var(--sys-primary-fixed);--mat-form-field-container-height: 3rem;--mat-form-field-filled-with-label-container-padding-top: 1.25rem;--mat-form-field-filled-with-label-container-padding-bottom: .25rem}mat-form-field.mat-mdc-form-field-type-mat-input mat-label{font:var(--sys-label-small);letter-spacing:var(--sys-label-small-tracking);color:var(--sys-primary-fixed)}mat-form-field.mat-mdc-form-field-type-mat-input .mat-mdc-form-field-infix{font:var(--sys-label-medium);letter-spacing:var(--sys-label-medium-tracking)}mat-form-field.mat-mdc-form-field-type-mat-input .mat-mdc-form-field-infix input{height:1.5rem}mat-form-field.mat-mdc-form-field-type-mat-input.mat-focused{--mdc-filled-text-field-focus-label-text-color: var(--sys-tertiary);--mdc-filled-text-field-active-indicator-color: var(--sys-tertiary);--mdc-filled-text-field-focus-active-indicator-color: var(--sys-tertiary);--mdc-filled-text-field-focus-active-indicator-height: 1px}mat-form-field.mat-mdc-form-field-type-mat-input.mat-focused mat-label{color:var(--sys-tertiary)}mat-form-field.mat-mdc-form-field-type-mat-input.mat-form-field-disabled mat-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}mat-form-field[appearance=outline]{--mdc-outlined-text-field-outline-width: 1px}mat-form-field[appearance=outline] .mdc-text-field:hover{--mdc-outlined-text-field-outline-width: 2px;--mdc-outlined-text-field-hover-outline-color: var(--sys-outline-variant)}
`],encapsulation:2,changeDetection:0}),t})();function PFt(){return An([hl(OFt)])}var MFt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-menu-styles"]],standalone:!0,features:[Kt],decls:0,vars:0,template:function(r,i){},styles:[`.mat-mdc-menu-panel{--mat-menu-container-shape: .5rem;--mat-app-elevation-shadow-level-2: 0rem .3125rem 1rem 0rem rgb(from var(--sys-shadow) r g b / .16);--mat-menu-item-with-icon-leading-spacing: 1rem;--mat-menu-item-with-icon-trailing-spacing: 1rem;--mat-menu-item-label-text-color: var(--sys-secondary);--mat-menu-item-icon-color: var(--sys-secondary);--mat-menu-container-color: var(--sys-surface-container-low);--mat-menu-item-hover-state-layer-color: rgb(from var(--sys-secondary) r g b / .08);--mat-menu-item-focus-state-layer-color: rgb(from var(--sys-tertiary) r g b / .2);--mat-menu-item-label-text-tracking: var(--sys-label-medium-tracking);--mat-menu-item-label-text-weight: var(--sys-label-medium-weight);--mat-menu-item-label-text-size: var(--sys-label-medium-size);--mat-menu-item-label-text-line-height: var(--sys-label-medium-line-height)}.mat-mdc-menu-panel button{min-width:12rem;border:.125rem solid transparent}.mat-mdc-menu-panel .expand-arrow{--mat-menu-item-spacing: 1rem;position:absolute;right:0}.mat-mdc-menu-panel .mat-mdc-menu-submenu-icon{display:none}.mat-mdc-menu-panel .cdk-keyboard-focused{background-color:var(--sys-on-primary)!important;border:.125rem solid var(--sys-tertiary)}.mat-mdc-menu-panel .mat-mdc-menu-item-highlighted{background-color:rgb(from var(--sys-tertiary) r g b/.2)}
`],encapsulation:2,changeDetection:0}),t})();function RFt(){return An([hl(MFt)])}var BFt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-select-styles"]],standalone:!0,features:[Kt],decls:0,vars:0,template:function(r,i){},styles:[`mat-form-field.mat-mdc-form-field-type-mat-select{--mdc-filled-text-field-container-color: var(--sys-surface-container);--mat-select-focused-arrow-color: var(--sys-tertiary);--mat-form-field-container-height: 3rem;--mat-form-field-filled-with-label-container-padding-top: 1.25rem;--mat-form-field-filled-with-label-container-padding-bottom: .25rem}mat-form-field.mat-mdc-form-field-type-mat-select mat-label{font:var(--sys-label-small);letter-spacing:var(--sys-label-small-tracking);color:var(--sys-primary-fixed)}mat-form-field.mat-mdc-form-field-type-mat-select.mat-focused mat-label{color:var(--sys-tertiary)}mat-form-field.mat-mdc-form-field-type-mat-select.mat-focused .mdc-line-ripple:after{--mdc-filled-text-field-focus-active-indicator-color: var(--sys-tertiary)}mat-form-field.mat-mdc-form-field-type-mat-select.mat-focused mat-select .mat-mdc-select-value-text .mat-mdc-select-min-line{color:var(--sys-primary-fixed);letter-spacing:var(--sys-label-medium-tracking)}mat-form-field.mat-mdc-form-field-type-mat-select mat-select .mat-mdc-select-value-text .mat-mdc-select-min-line{font:var(--sys-label-medium);letter-spacing:var(--sys-label-medium-tracking)}mat-form-field.mat-mdc-form-field-type-mat-select.mat-form-field-disabled mat-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.options-container{--mat-select-panel-background-color: var(--sys-on-primary);--mat-option-selected-state-label-text-color: var(--sys-secondary);--mat-option-hover-state-layer-color: color-mix(in srgb, var(--sys-on-surface) 4%, transparent);--mat-select-container-elevation-shadow: 0px 5px 4px 0px rgb(from var(--sys-shadow) r g b / .16);--mat-option-label-text-color: var(--sys-primary-container);--mat-option-focus-state-layer-color: color-mix(in srgb, var(--sys-on-surface) 4%, transparent)}.options-container mat-option.mat-mdc-option{font:var(--sys-label-large);margin-bottom:.5px;min-height:3.5rem}.options-container mat-option.mat-mdc-option:active{--mat-option-hover-state-layer-color: color-mix(in srgb, var(--sys-on-surface) 8%, transparent)}.options-container mat-option.mat-mdc-option:focus-visible{outline:2px solid var(--sys-tertiary)}.options-container mat-option.mat-mdc-option.mdc-list-item--selected.mat-mdc-option-active{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var(--sys-on-tertiary-container);background-color:color-mix(in srgb,var(--sys-on-tertiary-container) 8%,transparent)}.options-container mat-option.mat-mdc-option.mat-mdc-option-active{outline:1px solid color-mix(in srgb,var(--sys-on-surface) 32%,transparent)}
`],encapsulation:2,changeDetection:0}),t})();function DFt(){return An([hl(BFt)])}var LFt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-table-styles"]],standalone:!0,features:[Kt],decls:0,vars:0,template:function(r,i){},styles:[`table[matSort]{--mat-sort-arrow-color: var(--sys-secondary);--mat-table-background-color: var(--sys-surface-container-low);--mat-table-header-container-height: 2rem;--mat-table-row-item-container-height: 2rem}table[matSort] th,table[matSort] tr>td{padding:0 .5rem;font:var(--sys-label-medium);letter-spacing:var(--sys-label-medium-tracking)}table[matSort] th{color:var(--sys-secondary);line-height:normal}table[matSort] tr{color:#000}table[matSort] .mat-sort-header-container{height:1.5rem;border-bottom:.0625rem solid transparent;max-width:4.375rem}table[matSort] .mat-sort-header-container:focus-visible{border-color:var(--sys-secondary)}table[matSort] .mat-sort-header-container .mat-sort-header-arrow{margin-right:.375rem}table[matSort] .mat-sort-header-container .mat-sort-header-arrow .mat-sort-header-stem{border-radius:.25rem;height:.75rem}table[matSort] .mat-sort-header-container .mat-sort-header-arrow .mat-sort-header-pointer-left,table[matSort] .mat-sort-header-container .mat-sort-header-arrow .mat-sort-header-pointer-right{width:.4375rem}table[matSort] .mat-sort-header-container .mat-sort-header-arrow .mat-sort-header-pointer-left{left:-.0625rem;border-radius:.25rem 0 0 .25rem}table[matSort] .mat-sort-header-container .mat-sort-header-arrow .mat-sort-header-pointer-right{right:-.0625rem;border-radius:0 .25rem .25rem 0}table[matSort] .mat-sort-header-container .mat-sort-header-arrow .mat-sort-header-pointer-middle{border-radius:.25rem}
`],encapsulation:2,changeDetection:0}),t})();function NFt(){return An([hl(LFt)])}var FFt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["hra-tree-styles"]],standalone:!0,features:[Kt],decls:0,vars:0,template:function(r,i){},styles:[`mat-tree{--mat-tree-container-background-color: var(--sys-on-primary)}mat-tree-node{--mat-tree-node-text-font: var(--sys-label-medium-font);--mat-tree-node-text-weight: var(--sys-label-medium-weight);--mat-tree-node-text-color: var(--sys-secondary);letter-spacing:var(--sys-label-medium-tracking);cursor:pointer;-webkit-user-select:none;user-select:none;outline:none}mat-tree-node:focus-visible .node-content{border-color:var(--sys-tertiary)}.node-content{display:flex;height:var(--mat-tree-node-min-height);line-height:var(--mat-tree-node-min-height);border-radius:.25rem;width:100%;border-width:2px;border-style:solid;border-color:transparent}.node-content button{--mat-icon-button-hover-state-layer-opacity: 0;--mat-icon-button-pressed-state-layer-opacity: 0}.node-content.leaf{padding-left:.5rem}.node-content:hover{background:rgb(from var(--sys-secondary) r g b/.08)}.node-content:active{background:rgb(from var(--sys-secondary) r g b/.16);border-color:transparent}.node-content.selected{background:rgb(from var(--sys-tertiary) r g b/.2)}
`],encapsulation:2,changeDetection:0}),t})();function zFt(){return An([hl(FFt)])}function VFt(t){return[EFt({fontIcons:{defaultClasses:["material-symbols-rounded"]}}),gIt(),YRt(),zFt(),BRt(t?.scrolling),RFt(),NFt(),DFt(),PFt(),IFt()]}function jFt(t){return An([AS(...t?.http??[]),_Ft(),...VFt(t)])}var UFt=new ht("Global configuration object");function HFt(t){return t.get("ruiConfig",{user:{firstName:"",lastName:"",email:""}})}var GFt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[{provide:UFt,useFactory:HFt,deps:[RT]}]}),t})(),WFt=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[{provide:fS,useValue:jk.initialize,multi:!0},jk]}),t})(),ZFt=(t,e)=>new Array(e+1).join(t),c_=(t,e)=>ZFt("0",e-t.toString().length)+t;function $Ft(t){return c_(t.getHours(),2)+":"+c_(t.getMinutes(),2)+":"+c_(t.getSeconds(),2)+"."+c_(t.getMilliseconds(),3)}var XFt=class{constructor(t,e,r){this.action=t,this.store=e,this.logWriter=r}dispatched(t){let e=Nu(this.action),r=$Ft(new Date),i=`action ${e} @ ${r}`;this.logWriter.startGroup(i),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",x({},this.action)),this.logWriter.logGrey("prev state",t)}completed(t){this.logWriter.logGreen("next state",t),this.logWriter.endGroup()}errored(t){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",t),this.logWriter.endGroup()}_hasPayload(t){return this._getNonEmptyProperties(t).length>0}_getNonEmptyProperties(t){return Object.keys(t).map(e=>t[e]).filter(e=>e!==void 0)}},qFt=class{constructor(t){this.options=t,this.options=this.options||{},this.logger=t.logger||console}startGroup(t){let e=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{e.call(this.logger,t)}catch{console.log(t)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(t,e){this.log(t,"color: #9E9E9E; font-weight: bold",e)}logGreen(t,e){this.log(t,"color: #4CAF50; font-weight: bold",e)}logRedish(t,e){this.log(t,"color: #FD8182; font-weight: bold",e)}log(t,e,r){this.isIE()?this.logger.log(t,r):this.logger.log("%c "+t,e,r)}isIE(){let t=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"",e=!1,r=t.indexOf("MSIE "),i=t.indexOf("Trident/");return(r>-1||i>-1)&&(e=!0),e}},E9=new ht("NGXS_LOGGER_PLUGIN_OPTIONS"),KFt=(()=>{let t=class{constructor(i,n){this._options=i,this._injector=n}handle(i,n,s){if(this._options.disabled||!this._options.filter(n,i))return s(i,n);this._logWriter=this._logWriter||new qFt(this._options),this._store=this._store||this._injector.get(ll);let a=new XFt(n,this._store,this._logWriter);return a.dispatched(i),s(i,n).pipe(Li(o=>{a.completed(o)}),il(o=>{throw a.errored(o),o}))}};return t.\u0275fac=function(r){return new(r||t)(U(E9),U(Re))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),nN=new ht("LOGGER_USER_OPTIONS");function YFt(t){return x(x({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0}),t)}var JFt=(()=>{let t=class T9{static forRoot(i){return{ngModule:T9,providers:[{provide:jE,useClass:KFt,multi:!0},{provide:nN,useValue:i},{provide:E9,useFactory:YFt,deps:[nN]}]}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})(),I9="@@STATE",I0=!1,Qk=new ht(I0?"USER_OPTIONS":""),QFt=new ht(I0?"ALL_STATES_PERSISTED":"",{providedIn:"root",factory:()=>K(Qk).keys==="*"}),my=new ht(I0?"NGXS_STORAGE_PLUGIN_OPTIONS":""),O9=new ht(I0?"STORAGE_ENGINE":"");function P9(t){return t!=null&&!!t.engine}function t3t(t){return P9(t)&&(t=t.key),t.hasOwnProperty(zb)&&(t=t[zb].name),t instanceof pkt?t.getName():t}function e3t(t){return Q(x({storage:0,serialize:JSON.stringify,deserialize:JSON.parse,beforeSerialize:e=>e,afterDeserialize:e=>e},t),{keys:t.keys==="*"?[I9]:t.keys})}function i3t(t,e){return Bo(e)?null:t.storage===0?localStorage:t.storage===1?sessionStorage:null}function sN(t,e){return e?.namespace?`${e.namespace}:${t}`:t}var r3t=(()=>{let t=class{constructor(){this._keys=new Set,this._injector=K(Re),this._keysWithEngines=[];let{keys:i}=K(my);this.addKeys(i)}getKeysWithEngines(){return[...this._keysWithEngines]}addKeys(i){for(let n of i){let s=t3t(n);if(this._keys.has(s))continue;this._keys.add(s);let a=P9(n)?this._injector.get(n.engine):this._injector.get(O9);this._keysWithEngines.push({key:s,engine:a})}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),aN=!1,n3t=(()=>{let t=class{constructor(i,n,s){this._keysManager=i,this._options=n,this._platformId=s,this._allStatesPersisted=K(QFt)}handle(i,n,s){if(Bo(this._platformId))return s(i,n);let a=bkt(n),o=a(n0),l=a(s0),c=o||l,h=!1;if(c){let p=l&&n.addedStates;for(let{key:m,engine:f}of this._keysManager.getKeysWithEngines()){if(!this._allStatesPersisted&&p){let w=m.indexOf(s3t),S=w>-1?m.slice(0,w):m;if(!p.hasOwnProperty(S))continue}let g=sN(m,this._options),_=f.getItem(g);if(_!=="undefined"&&_!=null){try{let w=this._options.deserialize(_);_=this._options.afterDeserialize(w,m)}catch{aN&&console.error(`Error ocurred while deserializing the ${g} store value, falling back to empty object, the value obtained from the store: `,_),_={}}this._options.migrations?.forEach(w=>{let S=w.version===mf(_,w.versionKey||"version"),C=!w.key&&this._allStatesPersisted||w.key===m;S&&C&&(_=w.migrate(_),h=!0)}),this._allStatesPersisted?(_=this._hydrateSelectivelyOnUpdate(_,p),i=x(x({},i),_)):i=UE(i,m,_)}}}return s(i,n).pipe(Li(p=>{if(!(c&&!h))for(let{key:m,engine:f}of this._keysManager.getKeysWithEngines()){let g=p,_=sN(m,this._options);m!==I9&&(g=mf(p,m));try{let w=this._options.beforeSerialize(g,m);f.setItem(_,this._options.serialize(w))}catch(w){aN&&(w&&(w.name==="QuotaExceededError"||w.name==="NS_ERROR_DOM_QUOTA_REACHED")?console.error(`The ${_} store value exceeds the browser storage quota: `,g):console.error(`Error ocurred while serializing the ${_} store value, value not updated, the value obtained from the store: `,g))}}}))}_hydrateSelectivelyOnUpdate(i,n){return!i||!n||Object.keys(n).length===0?i:Object.keys(n).reduce((s,a)=>(i.hasOwnProperty(a)&&(s[a]=i[a]),s),{})}};return t.\u0275fac=function(r){return new(r||t)(U(r3t),U(my),U(dn))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),s3t=".",a3t=(()=>{let t=class M9{static forRoot(i){return{ngModule:M9,providers:[{provide:jE,useClass:n3t,multi:!0},{provide:Qk,useValue:i},{provide:my,useFactory:e3t,deps:[Qk]},{provide:O9,useFactory:i3t,deps:[my,dn]}]}}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({}),t})(),R9=!1,gGt=new ht(R9?"LOCAL_STORAGE_ENGINE":"",{providedIn:"root",factory:()=>Fn(K(dn))?localStorage:null}),vGt=new ht(R9?"SESSION_STORAGE_ENGINE":"",{providedIn:"root",factory:()=>Fn(K(dn))?sessionStorage:null}),oN=[{name:"bladder",namespace:"app",url:"assets/icons/organ-icons/organ-icon-bladder.svg"},{name:"blood",namespace:"app",url:"assets/icons/organ-icons/organ-icon-blood.svg"},{name:"bone-marrow",namespace:"app",url:"assets/icons/organ-icons/organ-icon-bone-marrow.svg"},{name:"brain",namespace:"app",url:"assets/icons/organ-icons/organ-icon-brain.svg"},{name:"mammary-gland",namespace:"app",url:"assets/icons/organ-icons/organ-icon-breast.svg"},{name:"main-bronchus",namespace:"app",url:"assets/icons/organ-icons/organ-icon-extrapulmonary-bronchus.svg"},{name:"eye",namespace:"app",url:"assets/icons/organ-icons/organ-icon-eye.svg"},{name:"fallopian-tube-left",namespace:"app",url:"assets/icons/organ-icons/organ-icon-fallopian-tube-left.svg"},{name:"fallopian-tube-right",namespace:"app",url:"assets/icons/organ-icons/organ-icon-fallopian-tube-right.svg"},{name:"heart",namespace:"app",url:"assets/icons/organ-icons/organ-icon-heart.svg"},{name:"kidney-left",namespace:"app",url:"assets/icons/organ-icons/organ-icon-kidney-left.svg"},{name:"kidney-right",namespace:"app",url:"assets/icons/organ-icons/organ-icon-kidney-right.svg"},{name:"kidneys",namespace:"app",url:"assets/icons/organ-icons/organ-icon-kidneys.svg"},{name:"knee",namespace:"app",url:"assets/icons/organ-icons/organ-icon-knee.svg"},{name:"large-intestine",namespace:"app",url:"assets/icons/organ-icons/organ-icon-large-intestine.svg"},{name:"larynx",namespace:"app",url:"assets/icons/organ-icons/organ-icon-larynx.svg"},{name:"liver",namespace:"app",url:"assets/icons/organ-icons/organ-icon-liver.svg"},{name:"lung-left",namespace:"app",url:"assets/icons/organ-icons/organ-icon-lung-left.svg"},{name:"lung-right",namespace:"app",url:"assets/icons/organ-icons/organ-icon-lung-right.svg"},{name:"lung",namespace:"app",url:"assets/icons/organ-icons/organ-icon-lungs.svg"},{name:"lymph-nodes",namespace:"app",url:"assets/icons/organ-icons/organ-icon-lymph-nodes.svg"},{name:"neurons",namespace:"app",url:"assets/icons/organ-icons/organ-icon-neurons.svg"},{name:"ovaries",namespace:"app",url:"assets/icons/organ-icons/organ-icon-ovaries.svg"},{name:"ovary-left",namespace:"app",url:"assets/icons/organ-icons/organ-icon-ovary-left.svg"},{name:"ovary-right",namespace:"app",url:"assets/icons/organ-icons/organ-icon-ovary-right.svg"},{name:"palatine-tonsil",namespace:"app",url:"assets/icons/organ-icons/organ-icon-palatine-tonsil.svg"},{name:"pancreas",namespace:"app",url:"assets/icons/organ-icons/organ-icon-pancreas.svg"},{name:"pelvis-f",namespace:"app",url:"assets/icons/organ-icons/organ-icon-pelvis.svg"},{name:"placenta",namespace:"app",url:"assets/icons/organ-icons/organ-icon-placenta.svg"},{name:"prostate",namespace:"app",url:"assets/icons/organ-icons/organ-icon-prostate.svg"},{name:"skin",namespace:"app",url:"assets/icons/organ-icons/organ-icon-skin.svg"},{name:"small-intestine",namespace:"app",url:"assets/icons/organ-icons/organ-icon-small-intestine.svg"},{name:"spinal-cord",namespace:"app",url:"assets/icons/organ-icons/organ-icon-spinal-cord.svg"},{name:"spleen",namespace:"app",url:"assets/icons/organ-icons/organ-icon-spleen.svg"},{name:"stomach",namespace:"app",url:"assets/icons/organ-icons/organ-icon-stomach.svg"},{name:"thymus",namespace:"app",url:"assets/icons/organ-icons/organ-icon-thymus.svg"},{name:"trachea",namespace:"app",url:"assets/icons/organ-icons/organ-icon-trachea.svg"},{name:"ureter-left",namespace:"app",url:"assets/icons/organ-icons/organ-icon-ureter-left.svg"},{name:"ureter-right",namespace:"app",url:"assets/icons/organ-icons/organ-icon-ureter-right.svg"},{name:"uterus",namespace:"app",url:"assets/icons/organ-icons/organ-icon-uterus.svg"},{name:"vasculature-thick",namespace:"app",url:"assets/icons/organ-icons/organ-icon-vasculature-thick.svg"},{name:"vasculature-thin",namespace:"app",url:"assets/icons/organ-icons/organ-icon-vasculature-thin.svg"},{name:"opacity",namespace:"app",url:"assets/icons/opacity-24px.svg"},{name:"visibility_on",namespace:"app",url:"assets/icons/visibility-on-24px.svg"},{name:"visibility_off",namespace:"app",url:"assets/icons/visibility-off-24px.svg"},{name:"visibility_off_cube",namespace:"app",url:"assets/icons/ico-cube.svg"}],Yc,fy=(Yc=class extends i2t{constructor(t,e,r){super(),this.registry=t,this.sanitizer=e,this.globalConfig=r}ngxsOnInit(){oN.filter(t=>t.html!==void 0).map(t=>Q(x({},t),{html:this.sanitizer.bypassSecurityTrustHtml(t.html??"")})).forEach(t=>this.registerIconImpl(t)),this.registry?.addSvgIconResolver((t,e)=>{let r=oN.find(n=>(n.name??"")===t&&(n.namespace??"")===e);if(r?.url===void 0)return null;let i=this.globalConfig.snapshot.baseHref??"";return this.sanitizer.bypassSecurityTrustResourceUrl(i+r.url)})}registerIcon(t){return this.registerIconImpl(t)}registerIconImpl(t){if(!this.registry||!t.url&&!t.html)return!1;let e=this.registry,r=this.getMethodName(t),i=e[r],n=this.getArguments(t);if(!i)return!1;try{return i.apply(e,n),!0}catch{return!1}}getMethodName({name:t,namespace:e,url:r}){let i=["addSvgIcon"];return t||i.push("Set"),r||i.push("Literal"),e&&i.push("InNamespace"),i.join("")}getArguments({name:t,namespace:e,url:r,html:i}){return[e,t,r??i].filter(n=>!!n)}},Yc.\u0275fac=function(t){return new(t||Yc)(U(g0,8),U(rp),U(Dr))},Yc.\u0275prov=vt({token:Yc,factory:Yc.\u0275fac}),Yc);ft([ue(),j("design:type",Function),j("design:paramtypes",[Object]),j("design:returntype",Boolean)],fy.prototype,"registerIcon",null);fy=ft([pl(),oo({name:"iconRegistry"}),j("design:paramtypes",[Object,rp,Dr])],fy);var o3t=[Dr,fy,hr,xi,Qo,zu,ur,Lr],l3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[JPt.forRoot(),yAt.forRoot(o3t,{developmentMode:!Jo.production}),a3t.forRoot({keys:["registration.registrations"]}),JFt.forRoot({disabled:Jo.production})]}),t})(),c3t=(()=>{let t=class{constructor(i){if(i)throw new Error("The core module should only be imported once in the root module")}};return t.\u0275fac=function(r){return new(r||t)(U(t,12))},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[AS(Rz())],imports:[P2t.forRoot({gaToken:Jo.googleAnalyticsToken,appName:"rui"}),d2t,GFt,l3t,WFt]}),t})(),u3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,Hi,OAt,$s,vMt,ukt]}),t})(),h3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,Hi,$s,C7]}),t})(),d3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,AT,Hi,wf,C7,h3t,_p,T0,Vr]}),t})(),p3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,eh,Hi,$s,Yo]}),t})();function m3t(t,e){if(t&1){let r=Qe();N(0,"mat-form-field",3),yt("click",function(){Lt(r);let i=Rt();return Nt(i.displaySlider.emit())}),N(1,"mat-label",4),ut(2),F(),Ot(3,"input",5),F()}if(t&2){let r=Rt();$(2),Oi(r.sliderAxis.toUpperCase()),$(),mt("value",r.rotation[r.sliderAxis])}}function f3t(t,e){if(t&1){let r=Qe();N(0,"div",2)(1,"button",6),yt("click",function(){Lt(r);let i=Rt();return Nt(i.resetRotation.emit())}),N(2,"mat-icon"),ut(3,"reset_settings"),F()(),N(4,"mat-slider",7)(5,"input",8,0),yt("input",function(){Lt(r);let i=fi(6),n=Rt();return Nt(n.changeRotation.emit(i.value))}),F()(),N(7,"mat-form-field",9)(8,"mat-label",4),ut(9),F(),N(10,"input",10),yt("change",function(i){Lt(r);let n=Rt();return Nt(n.changeRotation.emit(i.target.value))}),F()()()}if(t&2){let r=Rt();$(4),mt("max",180)("min",-180)("step",r.step),$(),mt("value",r.rotation[r.sliderAxis]),$(4),Oi(r.sliderAxis.toUpperCase()),$(),mt("value",r.rotation[r.sliderAxis])("min",-180)("max",180)}}var g3t=(()=>{let t=class{constructor(){this.displaySlider=new It,this.resetRotation=new It,this.changeRotation=new It}};return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pt({type:t,selectors:[["ccf-slider-box"]],inputs:{sliderAxis:"sliderAxis",displayedSlider:"displayedSlider",rotation:"rotation",step:"step"},outputs:{displaySlider:"displaySlider",resetRotation:"resetRotation",changeRotation:"changeRotation"},decls:2,vars:1,consts:[["slider",""],["subscriptSizing","dynamic",1,"rotation-value"],[1,"slider-container"],["subscriptSizing","dynamic",1,"rotation-value",3,"click"],[1,"text","form-input-label"],["matInput","",3,"value"],["mat-icon-button","","hraMicroTooltip","Reset",1,"icon","reset",3,"click"],["disableRipple","","hraMicroTooltip","Hold shift while using the slider to rotate in smaller increments by 1 degree",1,"slider",3,"max","min","step"],["matSliderThumb","",1,"slider-input",3,"input","value"],["subscriptSizing","dynamic"],["matInput","","type","number",1,"input",3,"change","value","min","max"]],template:function(r,i){r&1&&Wt(0,m3t,4,2,"mat-form-field",1)(1,f3t,11,8,"div",2),r&2&&ae(i.displayedSlider!==i.sliderAxis?0:1)},dependencies:[gr,o7,xT,th,Qu,Ko,$n,co],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:flex-end;height:3rem}[_nghost-%COMP%]   .rotation-value[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .rotation-value[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:5rem;--mdc-filled-text-field-input-text-color: var(--sys-on-primary-fixed-variant);--mdc-filled-text-field-label-text-color: var(--sys-on-primary-fixed-variant)}[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mdc-floating-label{transform:translateY(-100%)}[_nghost-%COMP%]   .slider-container[_ngcontent-%COMP%]{display:flex;align-items:center;background:var(--sys-on-primary);border-radius:.5rem;box-shadow:0 5px 4px #201e3d29;z-index:1;padding:1rem;translate:1rem}[_nghost-%COMP%]   .slider-container[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]{--mdc-slider-active-track-color: var(--sys-on-tertiary-fixed);--mdc-slider-inactive-track-color: #acb5c3;--mdc-slider-handle-color: var(--sys-on-tertiary-fixed);--mdc-slider-active-track-height: 2px;--mdc-slider-inactive-track-height: 2px;width:11.5rem;margin:0 1.5rem}[_nghost-%COMP%]   .slider-container[_ngcontent-%COMP%]   mat-slider.disabled[_ngcontent-%COMP%]{pointer-events:none;cursor:not-allowed}[_nghost-%COMP%]   .slider-container[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]     mat-slider-visual-thumb{transition:none}[_nghost-%COMP%]   .slider-container[_ngcontent-%COMP%]   mat-slider[_ngcontent-%COMP%]     .mdc-slider__track--inactive{opacity:1}"],changeDetection:0}),t})(),v3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,Hi,l7,$s,eh,Yo,Vr]}),t})(),_3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,v3t]}),t})();Krt(XG,[co,g3t],[]);var b3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[IA(aI)],imports:[ti,eh,Hi,$s,eIt,wPt,Yo]}),t})(),y3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,JDt,Hi]}),t})(),w3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,fSt,u0,v0,hMt,Yo,Hi,eh]}),t})(),x3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,rg,Hi,Vr]}),t})(),C3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,x3t,Vr]}),t})(),k3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({imports:[ti,AT,wf,Hi,aI,p3t,C3t,_3t,b3t,y3t,w3t,vPt,_p,T0,Vr,wf]}),t})(),A3t=(()=>{let t=class{};return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=zt({type:t}),t.\u0275inj=Ft({providers:[lBt(),jFt(),{provide:yT,useValue:{floatLabel:!0}}],imports:[Vz,aI,c3t,Hi,u3t,d3t,k3t,D2t,A2t,i9,_p,T0,y7,Vr,wf,r9]}),t})();bat("ccf-rui",TLt,{providers:[IA(A3t)]});lv({});
