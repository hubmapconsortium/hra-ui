<div class="graph-config-layout">
  <!-- Left Column -->
  <div class="left-column">
    <!-- Organ Selection -->

    <div class="organ-group">
      <h1>Organ dataset</h1>
      <mat-form-field subscriptSizing="dynamic">
        <mat-label>Organ</mat-label>
        <mat-select
          [value]="selectedOrgan()"
          (selectionChange)="selectedOrgan.set($event.value)"
          [disabled]="loading()"
        >
          @for (organ of organOptions(); track organ) {
            <mat-option [value]="organ">{{ organ | titlecase }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Data Type Selection -->
    <div class="datatype-group">
      <h1>Data Type</h1>
      <mat-form-field subscriptSizing="dynamic">
        <mat-label>Data Type</mat-label>
        <mat-select [value]="selectedDataType()" (selectionChange)="selectedDataType.set($event.value)">
          @for (config of dataTypeOptions(); track config.key) {
            <mat-option [value]="config.key">{{ config.label }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
    </div>

    <!-- Sort Selection -->
    <div class="sort-group">
      <h1>Sort</h1>
      <mat-form-field subscriptSizing="dynamic">
        <mat-label>Sort By</mat-label>
        <mat-select [value]="selectedSort()" (selectionChange)="selectedSort.set($event.value)" [disabled]="loading()">
          @for (option of sortOptions(); track option.value) {
            <mat-option [value]="option.value">{{ option.label }}</mat-option>
          }
        </mat-select>
      </mat-form-field>
    </div>
  </div>

  <!-- Right Column -->
  <div class="right-column">
    <!-- X Axis Group -->
    <div class="x-axis-group">
      <h1>X axis</h1>
      <mat-button-toggle-group
        [value]="selectedXAxis()"
        (change)="selectedXAxis.set($event.value)"
        [disabled]="loading()"
        hraButtonToggleSize="medium"
        class="toggle-group"
      >
        @for (option of xAxisOptions(); track option.value) {
          <mat-button-toggle [value]="option.value">
            {{ option.label }}
          </mat-button-toggle>
        }
      </mat-button-toggle-group>
    </div>

    <!-- Y Axis Group -->
    <div class="y-axis-group">
      <h1>Y axis</h1>
      <mat-button-toggle-group
        [value]="selectedYAxis()"
        (change)="selectedYAxis.set($event.value)"
        [disabled]="loading()"
        hraButtonToggleSize="medium"
        class="toggle-group"
      >
        @for (option of yAxisOptions(); track option.value) {
          <mat-button-toggle [value]="option.value">
            {{ option.label }}
          </mat-button-toggle>
        }
      </mat-button-toggle-group>
    </div>

    <!-- Sex Selection -->
    <div class="sex-toggle-group">
      <h1>Sex</h1>
      <div class="sex-checkbox-row">
        @for (sex of availableSexes; track sex) {
          <div class="sex-option">
            <mat-checkbox [checked]="selectedSexes().includes(sex)" (change)="onSexChange(sex, $event.checked)">
              {{ sex }}
            </mat-checkbox>
          </div>
        }
      </div>
    </div>

    <div class="annotation-group">
      <h1>Annotation Tool ({{ availableTools().length }}/{{ allTools.length }} available)</h1>
      <div class="annotation-checkbox-row">
        @for (tool of allTools; track tool) {
          <div class="annotation-option">
            <mat-checkbox
              [checked]="selectedTools().includes(tool)"
              [disabled]="!isToolAvailable(tool) || loading()"
              [class.unavailable]="!isToolAvailable(tool)"
              (change)="onToolChange(tool, $event.checked)"
            >
              {{ getToolDisplayName(tool) }}
            </mat-checkbox>
          </div>
        }
      </div>
    </div>
  </div>
</div>
