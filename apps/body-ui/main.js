var vj=Object.create;var Vd=Object.defineProperty,yj=Object.defineProperties,_j=Object.getOwnPropertyDescriptor,bj=Object.getOwnPropertyDescriptors,xj=Object.getOwnPropertyNames,KT=Object.getOwnPropertySymbols,Ej=Object.getPrototypeOf,eS=Object.prototype.hasOwnProperty,wj=Object.prototype.propertyIsEnumerable;var Rv=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t);var QT=(t,e,n)=>e in t?Vd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v=(t,e)=>{for(var n in e||={})eS.call(e,n)&&QT(t,n,e[n]);if(KT)for(var n of KT(e))wj.call(e,n)&&QT(t,n,e[n]);return t},S=(t,e)=>yj(t,bj(e));var Nv=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Tt=(t,e)=>{for(var n in e)Vd(t,n,{get:e[n],enumerable:!0})},Aj=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of xj(e))!eS.call(t,i)&&i!==n&&Vd(t,i,{get:()=>e[i],enumerable:!(r=_j(e,i))||r.enumerable});return t};var Ov=(t,e,n)=>(n=t!=null?vj(Ej(t)):{},Aj(e||!t||!t.__esModule?Vd(n,"default",{value:t,enumerable:!0}):n,t));var R=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())}),ao=function(t,e){this[0]=t,this[1]=e},Yc=(t,e,n)=>{var r=(s,a,c,l)=>{try{var u=n[s](a),d=(a=u.value)instanceof ao,f=u.done;Promise.resolve(d?a[0]:a).then(h=>d?r(s==="return"?s:"next",a[1]?{done:h.done,value:h.value}:h,c,l):c({value:h,done:f})).catch(h=>r("throw",h,c,l))}catch(h){l(h)}},i=s=>o[s]=a=>new Promise((c,l)=>r(s,a,c,l)),o={};return n=n.apply(t,e),o[Rv("asyncIterator")]=()=>o,i("next"),i("throw"),i("return"),o};var Rs=(t,e,n)=>(e=t[Rv("asyncIterator")])?e.call(t):(t=t[Rv("iterator")](),e={},n=(r,i)=>(i=t[r])&&(e[r]=o=>new Promise((s,a,c)=>(o=i.call(t,o),c=o.done,Promise.resolve(o.value).then(l=>s({value:l,done:c}),a)))),n("next"),n("return"),e);var yD=Nv(()=>{"use strict"});var vO=Nv((tNe,om)=>{"use strict";(function(t,e,n,r){"use strict";var i=["","webkit","Moz","MS","ms","o"],o=e.createElement("div"),s="function",a=Math.round,c=Math.abs,l=Date.now;function u(b,w,T){return setTimeout(E(b,T),w)}function d(b,w,T){return Array.isArray(b)?(f(b,T[w],T),!0):!1}function f(b,w,T){var P;if(b)if(b.forEach)b.forEach(w,T);else if(b.length!==r)for(P=0;P<b.length;)w.call(T,b[P],P,b),P++;else for(P in b)b.hasOwnProperty(P)&&w.call(T,b[P],P,b)}function h(b,w,T){var P="DEPRECATED METHOD: "+w+`
`+T+` AT 
`;return function(){var U=new Error("get-stack-trace"),X=U&&U.stack?U.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",pe=t.console&&(t.console.warn||t.console.log);return pe&&pe.call(t.console,P,X),b.apply(this,arguments)}}var p;typeof Object.assign!="function"?p=function(w){if(w===r||w===null)throw new TypeError("Cannot convert undefined or null to object");for(var T=Object(w),P=1;P<arguments.length;P++){var U=arguments[P];if(U!==r&&U!==null)for(var X in U)U.hasOwnProperty(X)&&(T[X]=U[X])}return T}:p=Object.assign;var g=h(function(w,T,P){for(var U=Object.keys(T),X=0;X<U.length;)(!P||P&&w[U[X]]===r)&&(w[U[X]]=T[U[X]]),X++;return w},"extend","Use `assign`."),y=h(function(w,T){return g(w,T,!0)},"merge","Use `assign`.");function _(b,w,T){var P=w.prototype,U;U=b.prototype=Object.create(P),U.constructor=b,U._super=P,T&&p(U,T)}function E(b,w){return function(){return b.apply(w,arguments)}}function A(b,w){return typeof b==s?b.apply(w&&w[0]||r,w):b}function I(b,w){return b===r?w:b}function C(b,w,T){f(j(w),function(P){b.addEventListener(P,T,!1)})}function D(b,w,T){f(j(w),function(P){b.removeEventListener(P,T,!1)})}function F(b,w){for(;b;){if(b==w)return!0;b=b.parentNode}return!1}function z(b,w){return b.indexOf(w)>-1}function j(b){return b.trim().split(/\s+/g)}function k(b,w,T){if(b.indexOf&&!T)return b.indexOf(w);for(var P=0;P<b.length;){if(T&&b[P][T]==w||!T&&b[P]===w)return P;P++}return-1}function B(b){return Array.prototype.slice.call(b,0)}function W(b,w,T){for(var P=[],U=[],X=0;X<b.length;){var pe=w?b[X][w]:b[X];k(U,pe)<0&&P.push(b[X]),U[X]=pe,X++}return T&&(w?P=P.sort(function(mt,It){return mt[w]>It[w]}):P=P.sort()),P}function O(b,w){for(var T,P,U=w[0].toUpperCase()+w.slice(1),X=0;X<i.length;){if(T=i[X],P=T?T+U:w,P in b)return P;X++}return r}var Z=1;function J(){return Z++}function q(b){var w=b.ownerDocument||b;return w.defaultView||w.parentWindow||t}var Ie=/mobile|tablet|ip(ad|hone|od)|android/i,de="ontouchstart"in t,_e=O(t,"PointerEvent")!==r,rn=de&&Ie.test(navigator.userAgent),ct="touch",ne="pen",Zn="mouse",Ds="kinect",$c=25,nt=1,qn=2,Ke=4,Bt=8,Rd=1,Gc=2,Hc=4,Wc=8,Zc=16,Xn=Gc|Hc,oo=Wc|Zc,NT=Xn|oo,OT=["x","y"],Nd=["clientX","clientY"];function on(b,w){var T=this;this.manager=b,this.callback=w,this.element=b.element,this.target=b.options.inputTarget,this.domHandler=function(P){A(b.options.enable,[b])&&T.handler(P)},this.init()}on.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(q(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&D(this.element,this.evEl,this.domHandler),this.evTarget&&D(this.target,this.evTarget,this.domHandler),this.evWin&&D(q(this.element),this.evWin,this.domHandler)}};function G2(b){var w,T=b.options.inputClass;return T?w=T:_e?w=wv:rn?w=Bd:de?w=Av:w=Ld,new w(b,H2)}function H2(b,w,T){var P=T.pointers.length,U=T.changedPointers.length,X=w&nt&&P-U===0,pe=w&(Ke|Bt)&&P-U===0;T.isFirst=!!X,T.isFinal=!!pe,X&&(b.session={}),T.eventType=w,W2(b,T),b.emit("hammer.input",T),b.recognize(T),b.session.prevInput=T}function W2(b,w){var T=b.session,P=w.pointers,U=P.length;T.firstInput||(T.firstInput=LT(w)),U>1&&!T.firstMultiple?T.firstMultiple=LT(w):U===1&&(T.firstMultiple=!1);var X=T.firstInput,pe=T.firstMultiple,lt=pe?pe.center:X.center,mt=w.center=BT(P);w.timeStamp=l(),w.deltaTime=w.timeStamp-X.timeStamp,w.angle=Ev(lt,mt),w.distance=Od(lt,mt),Z2(T,w),w.offsetDirection=FT(w.deltaX,w.deltaY);var It=kT(w.deltaTime,w.deltaX,w.deltaY);w.overallVelocityX=It.x,w.overallVelocityY=It.y,w.overallVelocity=c(It.x)>c(It.y)?It.x:It.y,w.scale=pe?J2(pe.pointers,P):1,w.rotation=pe?X2(pe.pointers,P):0,w.maxPointers=T.prevInput?w.pointers.length>T.prevInput.maxPointers?w.pointers.length:T.prevInput.maxPointers:w.pointers.length,q2(T,w);var Yn=b.element;F(w.srcEvent.target,Yn)&&(Yn=w.srcEvent.target),w.target=Yn}function Z2(b,w){var T=w.center,P=b.offsetDelta||{},U=b.prevDelta||{},X=b.prevInput||{};(w.eventType===nt||X.eventType===Ke)&&(U=b.prevDelta={x:X.deltaX||0,y:X.deltaY||0},P=b.offsetDelta={x:T.x,y:T.y}),w.deltaX=U.x+(T.x-P.x),w.deltaY=U.y+(T.y-P.y)}function q2(b,w){var T=b.lastInterval||w,P=w.timeStamp-T.timeStamp,U,X,pe,lt;if(w.eventType!=Bt&&(P>$c||T.velocity===r)){var mt=w.deltaX-T.deltaX,It=w.deltaY-T.deltaY,Yn=kT(P,mt,It);X=Yn.x,pe=Yn.y,U=c(Yn.x)>c(Yn.y)?Yn.x:Yn.y,lt=FT(mt,It),b.lastInterval=w}else U=T.velocity,X=T.velocityX,pe=T.velocityY,lt=T.direction;w.velocity=U,w.velocityX=X,w.velocityY=pe,w.direction=lt}function LT(b){for(var w=[],T=0;T<b.pointers.length;)w[T]={clientX:a(b.pointers[T].clientX),clientY:a(b.pointers[T].clientY)},T++;return{timeStamp:l(),pointers:w,center:BT(w),deltaX:b.deltaX,deltaY:b.deltaY}}function BT(b){var w=b.length;if(w===1)return{x:a(b[0].clientX),y:a(b[0].clientY)};for(var T=0,P=0,U=0;U<w;)T+=b[U].clientX,P+=b[U].clientY,U++;return{x:a(T/w),y:a(P/w)}}function kT(b,w,T){return{x:w/b||0,y:T/b||0}}function FT(b,w){return b===w?Rd:c(b)>=c(w)?b<0?Gc:Hc:w<0?Wc:Zc}function Od(b,w,T){T||(T=OT);var P=w[T[0]]-b[T[0]],U=w[T[1]]-b[T[1]];return Math.sqrt(P*P+U*U)}function Ev(b,w,T){T||(T=OT);var P=w[T[0]]-b[T[0]],U=w[T[1]]-b[T[1]];return Math.atan2(U,P)*180/Math.PI}function X2(b,w){return Ev(w[1],w[0],Nd)+Ev(b[1],b[0],Nd)}function J2(b,w){return Od(w[0],w[1],Nd)/Od(b[0],b[1],Nd)}var Y2={mousedown:nt,mousemove:qn,mouseup:Ke},K2="mousedown",Q2="mousemove mouseup";function Ld(){this.evEl=K2,this.evWin=Q2,this.pressed=!1,on.apply(this,arguments)}_(Ld,on,{handler:function(w){var T=Y2[w.type];T&nt&&w.button===0&&(this.pressed=!0),T&qn&&w.which!==1&&(T=Ke),this.pressed&&(T&Ke&&(this.pressed=!1),this.callback(this.manager,T,{pointers:[w],changedPointers:[w],pointerType:Zn,srcEvent:w}))}});var ej={pointerdown:nt,pointermove:qn,pointerup:Ke,pointercancel:Bt,pointerout:Bt},tj={2:ct,3:ne,4:Zn,5:Ds},jT="pointerdown",UT="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(jT="MSPointerDown",UT="MSPointerMove MSPointerUp MSPointerCancel");function wv(){this.evEl=jT,this.evWin=UT,on.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_(wv,on,{handler:function(w){var T=this.store,P=!1,U=w.type.toLowerCase().replace("ms",""),X=ej[U],pe=tj[w.pointerType]||w.pointerType,lt=pe==ct,mt=k(T,w.pointerId,"pointerId");X&nt&&(w.button===0||lt)?mt<0&&(T.push(w),mt=T.length-1):X&(Ke|Bt)&&(P=!0),!(mt<0)&&(T[mt]=w,this.callback(this.manager,X,{pointers:T,changedPointers:[w],pointerType:pe,srcEvent:w}),P&&T.splice(mt,1))}});var nj={touchstart:nt,touchmove:qn,touchend:Ke,touchcancel:Bt},rj="touchstart",ij="touchstart touchmove touchend touchcancel";function zT(){this.evTarget=rj,this.evWin=ij,this.started=!1,on.apply(this,arguments)}_(zT,on,{handler:function(w){var T=nj[w.type];if(T===nt&&(this.started=!0),!!this.started){var P=oj.call(this,w,T);T&(Ke|Bt)&&P[0].length-P[1].length===0&&(this.started=!1),this.callback(this.manager,T,{pointers:P[0],changedPointers:P[1],pointerType:ct,srcEvent:w})}}});function oj(b,w){var T=B(b.touches),P=B(b.changedTouches);return w&(Ke|Bt)&&(T=W(T.concat(P),"identifier",!0)),[T,P]}var sj={touchstart:nt,touchmove:qn,touchend:Ke,touchcancel:Bt},aj="touchstart touchmove touchend touchcancel";function Bd(){this.evTarget=aj,this.targetIds={},on.apply(this,arguments)}_(Bd,on,{handler:function(w){var T=sj[w.type],P=cj.call(this,w,T);P&&this.callback(this.manager,T,{pointers:P[0],changedPointers:P[1],pointerType:ct,srcEvent:w})}});function cj(b,w){var T=B(b.touches),P=this.targetIds;if(w&(nt|qn)&&T.length===1)return P[T[0].identifier]=!0,[T,T];var U,X,pe=B(b.changedTouches),lt=[],mt=this.target;if(X=T.filter(function(It){return F(It.target,mt)}),w===nt)for(U=0;U<X.length;)P[X[U].identifier]=!0,U++;for(U=0;U<pe.length;)P[pe[U].identifier]&&lt.push(pe[U]),w&(Ke|Bt)&&delete P[pe[U].identifier],U++;if(lt.length)return[W(X.concat(lt),"identifier",!0),lt]}var lj=2500,VT=25;function Av(){on.apply(this,arguments);var b=E(this.handler,this);this.touch=new Bd(this.manager,b),this.mouse=new Ld(this.manager,b),this.primaryTouch=null,this.lastTouches=[]}_(Av,on,{handler:function(w,T,P){var U=P.pointerType==ct,X=P.pointerType==Zn;if(!(X&&P.sourceCapabilities&&P.sourceCapabilities.firesTouchEvents)){if(U)uj.call(this,T,P);else if(X&&dj.call(this,P))return;this.callback(w,T,P)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function uj(b,w){b&nt?(this.primaryTouch=w.changedPointers[0].identifier,$T.call(this,w)):b&(Ke|Bt)&&$T.call(this,w)}function $T(b){var w=b.changedPointers[0];if(w.identifier===this.primaryTouch){var T={x:w.clientX,y:w.clientY};this.lastTouches.push(T);var P=this.lastTouches,U=function(){var X=P.indexOf(T);X>-1&&P.splice(X,1)};setTimeout(U,lj)}}function dj(b){for(var w=b.srcEvent.clientX,T=b.srcEvent.clientY,P=0;P<this.lastTouches.length;P++){var U=this.lastTouches[P],X=Math.abs(w-U.x),pe=Math.abs(T-U.y);if(X<=VT&&pe<=VT)return!0}return!1}var GT=O(o.style,"touchAction"),HT=GT!==r,WT="compute",ZT="auto",Iv="manipulation",so="none",qc="pan-x",Xc="pan-y",kd=hj();function Tv(b,w){this.manager=b,this.set(w)}Tv.prototype={set:function(b){b==WT&&(b=this.compute()),HT&&this.manager.element.style&&kd[b]&&(this.manager.element.style[GT]=b),this.actions=b.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var b=[];return f(this.manager.recognizers,function(w){A(w.options.enable,[w])&&(b=b.concat(w.getTouchAction()))}),fj(b.join(" "))},preventDefaults:function(b){var w=b.srcEvent,T=b.offsetDirection;if(this.manager.session.prevented){w.preventDefault();return}var P=this.actions,U=z(P,so)&&!kd[so],X=z(P,Xc)&&!kd[Xc],pe=z(P,qc)&&!kd[qc];if(U){var lt=b.pointers.length===1,mt=b.distance<2,It=b.deltaTime<250;if(lt&&mt&&It)return}if(!(pe&&X)&&(U||X&&T&Xn||pe&&T&oo))return this.preventSrc(w)},preventSrc:function(b){this.manager.session.prevented=!0,b.preventDefault()}};function fj(b){if(z(b,so))return so;var w=z(b,qc),T=z(b,Xc);return w&&T?so:w||T?w?qc:Xc:z(b,Iv)?Iv:ZT}function hj(){if(!HT)return!1;var b={},w=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(T){b[T]=w?t.CSS.supports("touch-action",T):!0}),b}var Fd=1,sn=2,Ps=4,ui=8,Rr=ui,Jc=16,Jn=32;function Nr(b){this.options=p({},this.defaults,b||{}),this.id=J(),this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=Fd,this.simultaneous={},this.requireFail=[]}Nr.prototype={defaults:{},set:function(b){return p(this.options,b),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(b){if(d(b,"recognizeWith",this))return this;var w=this.simultaneous;return b=jd(b,this),w[b.id]||(w[b.id]=b,b.recognizeWith(this)),this},dropRecognizeWith:function(b){return d(b,"dropRecognizeWith",this)?this:(b=jd(b,this),delete this.simultaneous[b.id],this)},requireFailure:function(b){if(d(b,"requireFailure",this))return this;var w=this.requireFail;return b=jd(b,this),k(w,b)===-1&&(w.push(b),b.requireFailure(this)),this},dropRequireFailure:function(b){if(d(b,"dropRequireFailure",this))return this;b=jd(b,this);var w=k(this.requireFail,b);return w>-1&&this.requireFail.splice(w,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(b){return!!this.simultaneous[b.id]},emit:function(b){var w=this,T=this.state;function P(U){w.manager.emit(U,b)}T<ui&&P(w.options.event+qT(T)),P(w.options.event),b.additionalEvent&&P(b.additionalEvent),T>=ui&&P(w.options.event+qT(T))},tryEmit:function(b){if(this.canEmit())return this.emit(b);this.state=Jn},canEmit:function(){for(var b=0;b<this.requireFail.length;){if(!(this.requireFail[b].state&(Jn|Fd)))return!1;b++}return!0},recognize:function(b){var w=p({},b);if(!A(this.options.enable,[this,w])){this.reset(),this.state=Jn;return}this.state&(Rr|Jc|Jn)&&(this.state=Fd),this.state=this.process(w),this.state&(sn|Ps|ui|Jc)&&this.tryEmit(w)},process:function(b){},getTouchAction:function(){},reset:function(){}};function qT(b){return b&Jc?"cancel":b&ui?"end":b&Ps?"move":b&sn?"start":""}function XT(b){return b==Zc?"down":b==Wc?"up":b==Gc?"left":b==Hc?"right":""}function jd(b,w){var T=w.manager;return T?T.get(b):b}function In(){Nr.apply(this,arguments)}_(In,Nr,{defaults:{pointers:1},attrTest:function(b){var w=this.options.pointers;return w===0||b.pointers.length===w},process:function(b){var w=this.state,T=b.eventType,P=w&(sn|Ps),U=this.attrTest(b);return P&&(T&Bt||!U)?w|Jc:P||U?T&Ke?w|ui:w&sn?w|Ps:sn:Jn}});function Ud(){In.apply(this,arguments),this.pX=null,this.pY=null}_(Ud,In,{defaults:{event:"pan",threshold:10,pointers:1,direction:NT},getTouchAction:function(){var b=this.options.direction,w=[];return b&Xn&&w.push(Xc),b&oo&&w.push(qc),w},directionTest:function(b){var w=this.options,T=!0,P=b.distance,U=b.direction,X=b.deltaX,pe=b.deltaY;return U&w.direction||(w.direction&Xn?(U=X===0?Rd:X<0?Gc:Hc,T=X!=this.pX,P=Math.abs(b.deltaX)):(U=pe===0?Rd:pe<0?Wc:Zc,T=pe!=this.pY,P=Math.abs(b.deltaY))),b.direction=U,T&&P>w.threshold&&U&w.direction},attrTest:function(b){return In.prototype.attrTest.call(this,b)&&(this.state&sn||!(this.state&sn)&&this.directionTest(b))},emit:function(b){this.pX=b.deltaX,this.pY=b.deltaY;var w=XT(b.direction);w&&(b.additionalEvent=this.options.event+w),this._super.emit.call(this,b)}});function Sv(){In.apply(this,arguments)}_(Sv,In,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[so]},attrTest:function(b){return this._super.attrTest.call(this,b)&&(Math.abs(b.scale-1)>this.options.threshold||this.state&sn)},emit:function(b){if(b.scale!==1){var w=b.scale<1?"in":"out";b.additionalEvent=this.options.event+w}this._super.emit.call(this,b)}});function Cv(){Nr.apply(this,arguments),this._timer=null,this._input=null}_(Cv,Nr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ZT]},process:function(b){var w=this.options,T=b.pointers.length===w.pointers,P=b.distance<w.threshold,U=b.deltaTime>w.time;if(this._input=b,!P||!T||b.eventType&(Ke|Bt)&&!U)this.reset();else if(b.eventType&nt)this.reset(),this._timer=u(function(){this.state=Rr,this.tryEmit()},w.time,this);else if(b.eventType&Ke)return Rr;return Jn},reset:function(){clearTimeout(this._timer)},emit:function(b){this.state===Rr&&(b&&b.eventType&Ke?this.manager.emit(this.options.event+"up",b):(this._input.timeStamp=l(),this.manager.emit(this.options.event,this._input)))}});function Mv(){In.apply(this,arguments)}_(Mv,In,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[so]},attrTest:function(b){return this._super.attrTest.call(this,b)&&(Math.abs(b.rotation)>this.options.threshold||this.state&sn)}});function Dv(){In.apply(this,arguments)}_(Dv,In,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Xn|oo,pointers:1},getTouchAction:function(){return Ud.prototype.getTouchAction.call(this)},attrTest:function(b){var w=this.options.direction,T;return w&(Xn|oo)?T=b.overallVelocity:w&Xn?T=b.overallVelocityX:w&oo&&(T=b.overallVelocityY),this._super.attrTest.call(this,b)&&w&b.offsetDirection&&b.distance>this.options.threshold&&b.maxPointers==this.options.pointers&&c(T)>this.options.velocity&&b.eventType&Ke},emit:function(b){var w=XT(b.offsetDirection);w&&this.manager.emit(this.options.event+w,b),this.manager.emit(this.options.event,b)}});function zd(){Nr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}_(zd,Nr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Iv]},process:function(b){var w=this.options,T=b.pointers.length===w.pointers,P=b.distance<w.threshold,U=b.deltaTime<w.time;if(this.reset(),b.eventType&nt&&this.count===0)return this.failTimeout();if(P&&U&&T){if(b.eventType!=Ke)return this.failTimeout();var X=this.pTime?b.timeStamp-this.pTime<w.interval:!0,pe=!this.pCenter||Od(this.pCenter,b.center)<w.posThreshold;this.pTime=b.timeStamp,this.pCenter=b.center,!pe||!X?this.count=1:this.count+=1,this._input=b;var lt=this.count%w.taps;if(lt===0)return this.hasRequireFailures()?(this._timer=u(function(){this.state=Rr,this.tryEmit()},w.interval,this),sn):Rr}return Jn},failTimeout:function(){return this._timer=u(function(){this.state=Jn},this.options.interval,this),Jn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Rr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function di(b,w){return w=w||{},w.recognizers=I(w.recognizers,di.defaults.preset),new Pv(b,w)}di.VERSION="2.0.7",di.defaults={domEvents:!1,touchAction:WT,enable:!0,inputTarget:null,inputClass:null,preset:[[Mv,{enable:!1}],[Sv,{enable:!1},["rotate"]],[Dv,{direction:Xn}],[Ud,{direction:Xn},["swipe"]],[zd],[zd,{event:"doubletap",taps:2},["tap"]],[Cv]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var pj=1,JT=2;function Pv(b,w){this.options=p({},di.defaults,w||{}),this.options.inputTarget=this.options.inputTarget||b,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=b,this.input=G2(this),this.touchAction=new Tv(this,this.options.touchAction),YT(this,!0),f(this.options.recognizers,function(T){var P=this.add(new T[0](T[1]));T[2]&&P.recognizeWith(T[2]),T[3]&&P.requireFailure(T[3])},this)}Pv.prototype={set:function(b){return p(this.options,b),b.touchAction&&this.touchAction.update(),b.inputTarget&&(this.input.destroy(),this.input.target=b.inputTarget,this.input.init()),this},stop:function(b){this.session.stopped=b?JT:pj},recognize:function(b){var w=this.session;if(!w.stopped){this.touchAction.preventDefaults(b);var T,P=this.recognizers,U=w.curRecognizer;(!U||U&&U.state&Rr)&&(U=w.curRecognizer=null);for(var X=0;X<P.length;)T=P[X],w.stopped!==JT&&(!U||T==U||T.canRecognizeWith(U))?T.recognize(b):T.reset(),!U&&T.state&(sn|Ps|ui)&&(U=w.curRecognizer=T),X++}},get:function(b){if(b instanceof Nr)return b;for(var w=this.recognizers,T=0;T<w.length;T++)if(w[T].options.event==b)return w[T];return null},add:function(b){if(d(b,"add",this))return this;var w=this.get(b.options.event);return w&&this.remove(w),this.recognizers.push(b),b.manager=this,this.touchAction.update(),b},remove:function(b){if(d(b,"remove",this))return this;if(b=this.get(b),b){var w=this.recognizers,T=k(w,b);T!==-1&&(w.splice(T,1),this.touchAction.update())}return this},on:function(b,w){if(b!==r&&w!==r){var T=this.handlers;return f(j(b),function(P){T[P]=T[P]||[],T[P].push(w)}),this}},off:function(b,w){if(b!==r){var T=this.handlers;return f(j(b),function(P){w?T[P]&&T[P].splice(k(T[P],w),1):delete T[P]}),this}},emit:function(b,w){this.options.domEvents&&mj(b,w);var T=this.handlers[b]&&this.handlers[b].slice();if(!(!T||!T.length)){w.type=b,w.preventDefault=function(){w.srcEvent.preventDefault()};for(var P=0;P<T.length;)T[P](w),P++}},destroy:function(){this.element&&YT(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function YT(b,w){var T=b.element;if(T.style){var P;f(b.options.cssProps,function(U,X){P=O(T.style,X),w?(b.oldCssProps[P]=T.style[P],T.style[P]=U):T.style[P]=b.oldCssProps[P]||""}),w||(b.oldCssProps={})}}function mj(b,w){var T=e.createEvent("Event");T.initEvent(b,!0,!0),T.gesture=w,w.target.dispatchEvent(T)}p(di,{INPUT_START:nt,INPUT_MOVE:qn,INPUT_END:Ke,INPUT_CANCEL:Bt,STATE_POSSIBLE:Fd,STATE_BEGAN:sn,STATE_CHANGED:Ps,STATE_ENDED:ui,STATE_RECOGNIZED:Rr,STATE_CANCELLED:Jc,STATE_FAILED:Jn,DIRECTION_NONE:Rd,DIRECTION_LEFT:Gc,DIRECTION_RIGHT:Hc,DIRECTION_UP:Wc,DIRECTION_DOWN:Zc,DIRECTION_HORIZONTAL:Xn,DIRECTION_VERTICAL:oo,DIRECTION_ALL:NT,Manager:Pv,Input:on,TouchAction:Tv,TouchInput:Bd,MouseInput:Ld,PointerEventInput:wv,TouchMouseInput:Av,SingleTouchInput:zT,Recognizer:Nr,AttrRecognizer:In,Tap:zd,Pan:Ud,Swipe:Dv,Pinch:Sv,Rotate:Mv,Press:Cv,on:C,off:D,each:f,merge:y,extend:g,assign:p,inherit:_,bindFn:E,prefixed:O});var gj=typeof t<"u"?t:typeof self<"u"?self:{};gj.Hammer=di,typeof om<"u"&&om.exports?om.exports=di:t[n]=di})(window,document,"Hammer")});var xL=Nv((uke,IE)=>{"use strict";IE.exports=Bu;IE.exports.default=Bu;var ac=1e20;function Bu(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=e===void 0?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var s=this.size=this.fontSize+this.buffer*2,a=s+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=s,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Uint16Array(a),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(s/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function S5(t,e,n,r,i,o,s){o.fill(ac,0,e*n),s.fill(0,0,e*n);for(var a=(e-r)/2,c=0;c<i;c++)for(var l=0;l<r;l++){var u=(c+a)*e+l+a,d=t.data[4*(c*r+l)+3]/255;if(d===1)o[u]=0,s[u]=ac;else if(d===0)o[u]=ac,s[u]=0;else{var f=Math.max(0,.5-d),h=Math.max(0,d-.5);o[u]=f*f,s[u]=h*h}}}function C5(t,e,n,r,i,o,s){for(var a=0;a<e*n;a++){var c=Math.sqrt(r[a])-Math.sqrt(i[a]);t[a]=Math.round(255-255*(c/o+s))}}Bu.prototype._draw=function(t,e){var n=this.ctx.measureText(t),r=n.width,i=2*this.buffer,o,s,a,c,l,u,d,f;e&&this.useMetrics?(l=Math.floor(n.actualBoundingBoxAscent),f=this.buffer+Math.ceil(n.actualBoundingBoxAscent),u=this.buffer,d=this.buffer,s=Math.min(this.size,Math.ceil(n.actualBoundingBoxRight-n.actualBoundingBoxLeft)),c=Math.min(this.size-u,Math.ceil(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)),o=s+i,a=c+i,this.ctx.textBaseline="alphabetic"):(o=s=this.size,a=c=this.size,l=19*this.fontSize/24,u=d=0,f=this.middle,this.ctx.textBaseline="middle");var h;s&&c&&(this.ctx.clearRect(d,u,s,c),this.ctx.fillText(t,this.buffer,f),h=this.ctx.getImageData(d,u,s,c));var p=new Uint8ClampedArray(o*a);return S5(h,o,a,s,c,this.gridOuter,this.gridInner),_L(this.gridOuter,o,a,this.f,this.v,this.z),_L(this.gridInner,o,a,this.f,this.v,this.z),C5(p,o,a,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:s,height:c,sdfWidth:o,sdfHeight:a,top:l,left:0,advance:r}}};Bu.prototype.draw=function(t){return this._draw(t,!1).data};Bu.prototype.drawWithMetrics=function(t){return this._draw(t,!0)};function _L(t,e,n,r,i,o){for(var s=0;s<e;s++)bL(t,s,e,n,r,i,o);for(var a=0;a<n;a++)bL(t,a*e,1,e,r,i,o)}function bL(t,e,n,r,i,o,s){var a,c,l,u;for(o[0]=0,s[0]=-ac,s[1]=ac,a=0;a<r;a++)i[a]=t[e+a*n];for(a=1,c=0,l=0;a<r;a++){do u=o[c],l=(i[a]-i[u]+a*a-u*u)/(a-u)/2;while(l<=s[c]&&--c>-1);c++,o[c]=a,s[c]=l,s[c+1]=ac}for(a=0,c=0;a<r;a++){for(;s[c+1]<a;)c++;u=o[c],t[e+a*n]=i[u]+(a-u)*(a-u)}}});var Lv;function $d(){return Lv}function Kn(t){let e=Lv;return Lv=t,e}var tS=Symbol("NotFound");function Ns(t){return t===tS||t?.name==="\u0275NotFound"}function qd(t,e){return Object.is(t,e)}var Et=null,Gd=!1,Bv=1,Ij=null,ut=Symbol("SIGNAL");function ce(t){let e=Et;return Et=t,e}function Xd(){return Et}var co={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Os(t){if(Gd)throw new Error("");if(Et===null)return;Et.consumerOnSignalRead(t);let e=Et.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Et.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Et.producers,n!==void 0&&n.producer===t)){Et.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===Et&&(!r||Sj(i,Et)))return;let o=ks(Et),s={producer:t,consumer:Et,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};Et.producersTail=s,e!==void 0?e.nextProducer=s:Et.producers=s,o&&rS(t,s)}function nS(){Bv++}function Jd(t){if(!(ks(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Bv)){if(!t.producerMustRecompute(t)&&!Bs(t)){Zd(t);return}t.producerRecomputeValue(t),Zd(t)}}function kv(t){if(t.consumers===void 0)return;let e=Gd;Gd=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||Tj(r)}}finally{Gd=e}}function Fv(){return Et?.consumerAllowSignalWrites!==!1}function Tj(t){t.dirty=!0,kv(t),t.consumerMarkedDirty?.(t)}function Zd(t){t.dirty=!1,t.lastCleanEpoch=Bv}function lo(t){return t&&(t.producersTail=void 0,t.recomputing=!0),ce(t)}function Ls(t,e){if(ce(e),!t)return;t.recomputing=!1;let n=t.producersTail,r=n!==void 0?n.nextProducer:t.producers;if(r!==void 0){if(ks(t))do r=jv(r);while(r!==void 0);n!==void 0?n.nextProducer=void 0:t.producers=void 0}}function Bs(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Jd(n),r!==n.version))return!0}return!1}function uo(t){if(ks(t)){let e=t.producers;for(;e!==void 0;)e=jv(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function rS(t,e){let n=t.consumersTail,r=ks(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)rS(i.producer,i)}function jv(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!ks(e)){let o=e.producers;for(;o!==void 0;)o=jv(o)}return n}function ks(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Yd(t){Ij?.(t)}function Sj(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Qc(t,e){let n=Object.create(Cj);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Jd(n),Os(n),n.value===Kc)throw n.error;return n.value};return r[ut]=n,Yd(n),r}var Hd=Symbol("UNSET"),Wd=Symbol("COMPUTING"),Kc=Symbol("ERRORED"),Cj=S(v({},co),{value:Hd,dirty:!0,error:null,equal:qd,kind:"computed",producerMustRecompute(t){return t.value===Hd||t.value===Wd},producerRecomputeValue(t){if(t.value===Wd)throw new Error("");let e=t.value;t.value=Wd;let n=lo(t),r,i=!1;try{r=t.computation(),ce(null),i=e!==Hd&&e!==Kc&&r!==Kc&&t.equal(e,r)}catch(o){r=Kc,t.error=o}finally{Ls(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function Mj(){throw new Error}var iS=Mj;function oS(t){iS(t)}function Uv(t){iS=t}var Dj=null;function zv(t,e){let n=Object.create(Kd);n.value=t,e!==void 0&&(n.equal=e);let r=()=>sS(n);return r[ut]=n,Yd(n),[r,s=>Fs(n,s),s=>Vv(n,s)]}function sS(t){return Os(t),t.value}function Fs(t,e){Fv()||oS(t),t.equal(t.value,e)||(t.value=e,Pj(t))}function Vv(t,e){Fv()||oS(t),Fs(t,e(t.value))}var Kd=S(v({},co),{equal:qd,value:void 0,kind:"signal"});function Pj(t){t.version++,nS(),kv(t),Dj?.(t)}function me(t){return typeof t=="function"}function js(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Qd=js(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function el(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var gt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(me(r))try{r()}catch(o){e=o instanceof Qd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{aS(o)}catch(s){e=e??[],s instanceof Qd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Qd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)aS(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&el(n,e)}remove(e){let{_finalizers:n}=this;n&&el(n,e),e instanceof t&&e._removeParent(this)}};gt.EMPTY=(()=>{let t=new gt;return t.closed=!0,t})();var $v=gt.EMPTY;function ef(t){return t instanceof gt||t&&"closed"in t&&me(t.remove)&&me(t.add)&&me(t.unsubscribe)}function aS(t){me(t)?t():t.unsubscribe()}var Tn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Us={setTimeout(t,e,...n){let{delegate:r}=Us;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Us;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function tf(t){Us.setTimeout(()=>{let{onUnhandledError:e}=Tn;if(e)e(t);else throw t})}function Gv(){}var cS=Hv("C",void 0,void 0);function lS(t){return Hv("E",void 0,t)}function uS(t){return Hv("N",t,void 0)}function Hv(t,e,n){return{kind:t,value:e,error:n}}var fo=null;function zs(t){if(Tn.useDeprecatedSynchronousErrorHandling){let e=!fo;if(e&&(fo={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=fo;if(fo=null,n)throw r}}else t()}function dS(t){Tn.useDeprecatedSynchronousErrorHandling&&fo&&(fo.errorThrown=!0,fo.error=t)}var ho=class extends gt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ef(e)&&e.add(this)):this.destination=Oj}static create(e,n,r){return new Sn(e,n,r)}next(e){this.isStopped?Zv(uS(e),this):this._next(e)}error(e){this.isStopped?Zv(lS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zv(cS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Rj=Function.prototype.bind;function Wv(t,e){return Rj.call(t,e)}var qv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){nf(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){nf(r)}else nf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){nf(n)}}},Sn=class extends ho{constructor(e,n,r){super();let i;if(me(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Tn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Wv(e.next,o),error:e.error&&Wv(e.error,o),complete:e.complete&&Wv(e.complete,o)}):i=e}this.destination=new qv(i)}};function nf(t){Tn.useDeprecatedSynchronousErrorHandling?dS(t):tf(t)}function Nj(t){throw t}function Zv(t,e){let{onStoppedNotification:n}=Tn;n&&Us.setTimeout(()=>n(t,e))}var Oj={closed:!0,next:Gv,error:Nj,complete:Gv};var Vs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function fi(t){return t}function fS(t){return t.length===0?fi:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Bj(n)?n:new Sn(n,r,i);return zs(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=hS(r),new r((i,o)=>{let s=new Sn({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Vs](){return this}pipe(...n){return fS(n)(this)}toPromise(n){return n=hS(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function hS(t){var e;return(e=t??Tn.Promise)!==null&&e!==void 0?e:Promise}function Lj(t){return t&&me(t.next)&&me(t.error)&&me(t.complete)}function Bj(t){return t&&t instanceof ho||Lj(t)&&ef(t)}function kj(t){return me(t?.lift)}function Qe(t){return e=>{if(kj(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function vt(t,e,n,r,i){return new Xv(t,e,n,r,i)}var Xv=class extends ho{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var pS=js(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ze=(()=>{class t extends Ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new rf(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new pS}next(n){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?$v:(this.currentObservers=null,o.push(n),new gt(()=>{this.currentObservers=null,el(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Ae;return n.source=this,n}}return t.create=(e,n)=>new rf(e,n),t})(),rf=class extends Ze{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:$v}};var po=class extends Ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Jv={now(){return(Jv.delegate||Date).now()},delegate:void 0};var hi=class extends Ze{constructor(e=1/0,n=1/0,r=Jv){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var mS=new Ae(t=>t.complete());function gS(t){return t&&me(t.schedule)}function vS(t){return t[t.length-1]}function of(t){return gS(vS(t))?t.pop():void 0}function yS(t,e){return typeof vS(t)=="number"?t.pop():e}function bS(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function _S(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mo(t){return this instanceof mo?(this.v=t,this):new mo(t)}function xS(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(g){return new Promise(function(y,_){o.push([h,g,y,_])>1||c(h,g)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(g){f(o[0][3],g)}}function l(h){h.value instanceof mo?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function ES(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof _S=="function"?_S(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var sf=t=>t&&typeof t.length=="number"&&typeof t!="function";function af(t){return me(t?.then)}function cf(t){return me(t[Vs])}function lf(t){return Symbol.asyncIterator&&me(t?.[Symbol.asyncIterator])}function uf(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Fj(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var df=Fj();function ff(t){return me(t?.[df])}function hf(t){return xS(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield mo(n.read());if(i)return yield mo(void 0);yield yield mo(r)}}finally{n.releaseLock()}})}function pf(t){return me(t?.getReader)}function $e(t){if(t instanceof Ae)return t;if(t!=null){if(cf(t))return jj(t);if(sf(t))return Uj(t);if(af(t))return zj(t);if(lf(t))return wS(t);if(ff(t))return Vj(t);if(pf(t))return $j(t)}throw uf(t)}function jj(t){return new Ae(e=>{let n=t[Vs]();if(me(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Uj(t){return new Ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function zj(t){return new Ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,tf)})}function Vj(t){return new Ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function wS(t){return new Ae(e=>{Gj(t,e).catch(n=>e.error(n))})}function $j(t){return wS(hf(t))}function Gj(t,e){var n,r,i,o;return bS(this,void 0,void 0,function*(){try{for(n=ES(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function an(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function mf(t,e=0){return Qe((n,r)=>{n.subscribe(vt(r,i=>an(r,t,()=>r.next(i),e),()=>an(r,t,()=>r.complete(),e),i=>an(r,t,()=>r.error(i),e)))})}function gf(t,e=0){return Qe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function AS(t,e){return $e(t).pipe(gf(e),mf(e))}function IS(t,e){return $e(t).pipe(gf(e),mf(e))}function TS(t,e){return new Ae(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function SS(t,e){return new Ae(n=>{let r;return an(n,e,()=>{r=t[df](),an(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>me(r?.return)&&r.return()})}function vf(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ae(n=>{an(n,e,()=>{let r=t[Symbol.asyncIterator]();an(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function CS(t,e){return vf(hf(t),e)}function MS(t,e){if(t!=null){if(cf(t))return AS(t,e);if(sf(t))return TS(t,e);if(af(t))return IS(t,e);if(lf(t))return vf(t,e);if(ff(t))return SS(t,e);if(pf(t))return CS(t,e)}throw uf(t)}function yf(t,e){return e?MS(t,e):$e(t)}function pi(...t){let e=of(t);return yf(t,e)}function $s(t){return!!t&&(t instanceof Ae||me(t.lift)&&me(t.subscribe))}var DS=js(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function Yv(t,e){let n=typeof e=="object";return new Promise((r,i)=>{let o=new Sn({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{n?r(e.defaultValue):i(new DS)}});t.subscribe(o)})}function yt(t,e){return Qe((n,r)=>{let i=0;n.subscribe(vt(r,o=>{r.next(t.call(e,o,i++))}))})}function PS(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=g=>l<r?p(g):c.push(g),p=g=>{o&&e.next(g),l++;let y=!1;$e(n(g,u++)).subscribe(vt(e,_=>{i?.(_),o?h(_):e.next(_)},()=>{y=!0},void 0,()=>{if(y)try{for(l--;c.length&&l<r;){let _=c.shift();s?an(e,s,()=>p(_)):p(_)}f()}catch(_){e.error(_)}}))};return t.subscribe(vt(e,h,()=>{d=!0,f()})),()=>{a?.()}}function Gs(t,e,n=1/0){return me(e)?Gs((r,i)=>yt((o,s)=>e(r,o,i,s))($e(t(r,i))),n):(typeof e=="number"&&(n=e),Qe((r,i)=>PS(r,i,t,n)))}function go(t=1/0){return Gs(fi,t)}function Kv(){return go(1)}function tl(...t){let e=of(t),n=yS(t,1/0),r=t;return r.length?r.length===1?$e(r[0]):go(n)(yf(r,e)):mS}function Hs(t,e){return Qe((n,r)=>{let i=0;n.subscribe(vt(r,o=>t.call(e,o,i++)&&r.next(o)))})}function _f(t){return Qe((e,n)=>{let r=null,i=!1,o;r=e.subscribe(vt(n,void 0,void 0,s=>{o=$e(t(s,_f(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Qv(t,e){return me(e)?Gs(t,e,1):Gs(t,1)}function ey(t,e){return e?n=>n.pipe(ey((r,i)=>$e(t(r,i)).pipe(yt((o,s)=>e(r,o,i,s))))):Qe((n,r)=>{let i=0,o=null,s=!1;n.subscribe(vt(r,a=>{o||(o=vt(r,void 0,()=>{o=null,s&&r.complete()}),$e(t(a,i++)).subscribe(o))},()=>{s=!0,!o&&r.complete()}))})}function ty(){return ey(fi)}function ny(t){return Qe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Or(t={}){let{connector:e=()=>new Ze,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,l=0,u=!1,d=!1,f=()=>{a?.unsubscribe(),a=void 0},h=()=>{f(),s=c=void 0,u=d=!1},p=()=>{let g=s;h(),g?.unsubscribe()};return Qe((g,y)=>{l++,!d&&!u&&f();let _=c=c??e();y.add(()=>{l--,l===0&&!d&&!u&&(a=ry(p,i))}),_.subscribe(y),!s&&l>0&&(s=new Sn({next:E=>_.next(E),error:E=>{d=!0,f(),a=ry(h,n,E),_.error(E)},complete:()=>{u=!0,f(),a=ry(h,r),_.complete()}}),$e(g).subscribe(s))})(o)}}function ry(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new Sn({next:()=>{r.unsubscribe(),t()}});return $e(e(...n)).subscribe(r)}function Lr(t,e){return Qe((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(vt(r,c=>{i?.unsubscribe();let l=0,u=o++;$e(t(c,u)).subscribe(i=vt(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function iy(){return Lr(fi)}function RS(t){let e=ce(null);try{return t()}finally{ce(e)}}var NS=S(v({},co),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,kind:"effect"});function OS(t){if(t.dirty=!1,t.hasRun&&!Bs(t))return;t.hasRun=!0;let e=lo(t);try{t.cleanup(),t.fn()}finally{Ls(t,e)}}var re=class extends Error{code;constructor(e,n){super(xo(e,n)),this.code=e}};function Hj(t){return`NG0${Math.abs(t)}`}function xo(t,e){return`${Hj(t)}${e?": "+e:""}`}function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("")}function yo(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(yo).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function gy(t,e){return t?e?`${t} ${e}`:t:e||""}var Wj=Te({__forward_ref__:Te});function If(t){return t.__forward_ref__=If,t.toString=function(){return yo(this())},t}function Gt(t){return kS(t)?t():t}function kS(t){return typeof t=="function"&&t.hasOwnProperty(Wj)&&t.__forward_ref__===If}function FS(t,e){t==null&&vy(e,t,null,"!=")}function vy(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function Ce(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Tf(t){return Zj(t,Sf)}function Zj(t,e){return t.hasOwnProperty(e)&&t[e]||null}function qj(t){let e=t?.[Sf]??null;return e||null}function sy(t){return t&&t.hasOwnProperty(xf)?t[xf]:null}var Sf=Te({\u0275prov:Te}),xf=Te({\u0275inj:Te}),ae=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Ce({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function yy(t){return t&&!!t.\u0275providers}var _y=Te({\u0275cmp:Te}),by=Te({\u0275dir:Te}),xy=Te({\u0275pipe:Te});var ay=Te({\u0275fac:Te}),Eo=Te({__NG_ELEMENT_ID__:Te}),LS=Te({__NG_ENV_ID__:Te});function jS(t){return typeof t=="string"?t:t==null?"":String(t)}function Ef(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():jS(t)}var Ey=Te({ngErrorCode:Te}),US=Te({ngErrorMessage:Te}),rl=Te({ngTokenPath:Te});function wy(t,e){return zS("",-200,e)}function Cf(t,e){throw new re(-201,!1)}function Xj(t,e){t[rl]??=[];let n=t[rl],r;typeof e=="object"&&"multi"in e&&e?.multi===!0?(FS(e.provide,"Token with multi: true should have a provide property"),r=Ef(e.provide)):r=Ef(e),n[0]!==r&&t[rl].unshift(r)}function Jj(t,e){let n=t[rl],r=t[Ey],i=t[US]||t.message;return t.message=Kj(i,r,n,e),t}function zS(t,e,n){let r=new re(e,t);return r[Ey]=e,r[US]=t,n&&(r[rl]=n),r}function Yj(t){return t[Ey]}function Kj(t,e,n=[],r=null){let i="";n&&n.length>1&&(i=` Path: ${n.join(" -> ")}.`);let o=r?` Source: ${r}.`:"";return xo(e,`${t}${o}${i}`)}var cy;function VS(){return cy}function $t(t){let e=cy;return cy=t,e}function Ay(t,e,n){let r=Tf(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Cf(t,"Injector")}var Qj={},vo=Qj,eU="__NG_DI_FLAG__",ly=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=_o(n)||0;try{return this.injector.get(e,r&8?null:vo,r)}catch(i){if(Ns(i))return i;throw i}}};function tU(t,e=0){let n=$d();if(n===void 0)throw new re(-203,!1);if(n===null)return Ay(t,void 0,e);{let r=nU(e),i=n.retrieve(t,r);if(Ns(i)){if(r.optional)return null;throw i}return i}}function he(t,e=0){return(VS()||tU)(Gt(t),e)}function te(t,e){return he(t,_o(e))}function _o(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function nU(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function uy(t){let e=[];for(let n=0;n<t.length;n++){let r=Gt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=rU(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(he(i,o))}else e.push(he(r))}return e}function rU(t){return t[eU]}function Zs(t,e){let n=t.hasOwnProperty(ay);return n?t[ay]:null}function $S(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function GS(t){return t.flat(Number.POSITIVE_INFINITY)}function Mf(t,e){t.forEach(n=>Array.isArray(n)?Mf(n,e):e(n))}function Iy(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function sl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var wo={},mi=[],Ao=new ae(""),Ty=new ae("",-1),Sy=new ae(""),il=class{get(e,n=vo){if(n===vo){let i=zS("",-201);throw i.name="\u0275NotFound",i}return n}};function kr(t){return t[_y]||null}function Cy(t){return t[by]||null}function HS(t){return t[xy]||null}function al(t){return{\u0275providers:t}}function WS(...t){return{\u0275providers:My(!0,t),\u0275fromNgModule:!0}}function My(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Mf(e,s=>{let a=s;wf(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&ZS(i,o),n}function ZS(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Dy(i,o=>{e(o,r)})}}function wf(t,e,n,r){if(t=Gt(t),!t)return!1;let i=null,o=sy(t),s=!o&&kr(t);if(!o&&!s){let c=t.ngModule;if(o=sy(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)wf(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Mf(o.imports,u=>{wf(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&ZS(l,e)}if(!a){let l=Zs(i)||(()=>new i);e({provide:i,useFactory:l,deps:mi},i),e({provide:Sy,useValue:i,multi:!0},i),e({provide:Ao,useValue:()=>he(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;Dy(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Dy(t,e){for(let n of t)yy(n)&&(n=n.\u0275providers),Array.isArray(n)?Dy(n,e):e(n)}var iU=Te({provide:String,useValue:Te});function qS(t){return t!==null&&typeof t=="object"&&iU in t}function oU(t){return!!(t&&t.useExisting)}function sU(t){return!!(t&&t.useFactory)}function Af(t){return typeof t=="function"}var cl=new ae(""),bf={},BS={},oy;function qs(){return oy===void 0&&(oy=new il),oy}var wt=class{},bo=class extends wt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,fy(e,s=>this.processProvider(s)),this.records.set(Ty,Ws(void 0,this)),i.has("environment")&&this.records.set(wt,Ws(void 0,this));let o=this.records.get(cl);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Sy,mi,{self:!0}))}retrieve(e,n){let r=_o(n)||0;try{return this.get(e,vo,r)}catch(i){if(Ns(i))return i;throw i}}destroy(){nl(this),this._destroyed=!0;let e=ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ce(e)}}onDestroy(e){return nl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){nl(this);let n=Kn(this),r=$t(void 0),i;try{return e()}finally{Kn(n),$t(r)}}get(e,n=vo,r){if(nl(this),e.hasOwnProperty(LS))return e[LS](this);let i=_o(r),o,s=Kn(this),a=$t(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let u=dU(e)&&Tf(e);u&&this.injectableDefInScope(u)?l=Ws(dy(e),bf):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let c=i&2?qs():this.parent;return n=i&8&&n===vo?null:n,c.get(e,n)}catch(c){let l=Yj(c);throw l===-200||l===-201?new re(l,null):c}finally{$t(a),Kn(s)}}resolveInjectorInitializers(){let e=ce(null),n=Kn(this),r=$t(void 0),i;try{let o=this.get(Ao,mi,{self:!0});for(let s of o)s()}finally{Kn(n),$t(r),ce(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(yo(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Gt(e);let n=Af(e)?e:Gt(e&&e.provide),r=cU(e);if(!Af(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ws(void 0,bf,!0),i.factory=()=>uy(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=ce(null);try{if(n.value===BS)throw wy(yo(e));return n.value===bf&&(n.value=BS,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&uU(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ce(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Gt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function dy(t){let e=Tf(t),n=e!==null?e.factory:Zs(t);if(n!==null)return n;if(t instanceof ae)throw new re(204,!1);if(t instanceof Function)return aU(t);throw new re(204,!1)}function aU(t){if(t.length>0)throw new re(204,!1);let n=qj(t);return n!==null?()=>n.factory(t):()=>new t}function cU(t){if(qS(t))return Ws(void 0,t.useValue);{let e=XS(t);return Ws(e,bf)}}function XS(t,e,n){let r;if(Af(t)){let i=Gt(t);return Zs(i)||dy(i)}else if(qS(t))r=()=>Gt(t.useValue);else if(sU(t))r=()=>t.useFactory(...uy(t.deps||[]));else if(oU(t))r=(i,o)=>he(Gt(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Gt(t&&(t.useClass||t.provide));if(lU(t))r=()=>new i(...uy(t.deps));else return Zs(i)||dy(i)}return r}function nl(t){if(t.destroyed)throw new re(205,!1)}function Ws(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function lU(t){return!!t.deps}function uU(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function dU(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function fy(t,e){for(let n of t)Array.isArray(n)?fy(n,e):n&&yy(n)?fy(n.\u0275providers,e):e(n)}function vi(t,e){let n;t instanceof bo?(nl(t),n=t):n=new ly(t);let r,i=Kn(n),o=$t(void 0);try{return e()}finally{Kn(i),$t(o)}}function Py(){return VS()!==void 0||$d()!=null}function Ry(t){if(!Py())throw new re(-203,!1)}var Cn=0,ue=1,se=2,dt=3,ln=4,un=5,ll=6,ul=7,Ht=8,Xs=9,Fr=10,dn=11,Js=12,Ny=13,Ys=14,fn=15,yi=16,Io=17,Qn=18,dl=19,Oy=20,Br=21,Df=22,jr=23,Wt=24,Pf=25,er=26,JS=1;var _i=7,fl=8,To=9,Ct=10;function Ur(t){return Array.isArray(t)&&typeof t[JS]=="object"}function Mn(t){return Array.isArray(t)&&t[JS]===!0}function Ly(t){return(t.flags&4)!==0}function Ks(t){return t.componentOffset>-1}function YS(t){return(t.flags&1)===1}function Qs(t){return!!t.template}function ea(t){return(t[se]&512)!==0}function So(t){return(t[se]&256)===256}var KS="svg",QS="math";function tr(t){for(;Array.isArray(t);)t=t[Cn];return t}function bi(t,e){return tr(e[t.index])}function By(t,e){return t.data[e]}function zr(t,e){let n=e[t];return Ur(n)?n:n[Cn]}function Rf(t){return(t[se]&128)===128}function eC(t){return Mn(t[dt])}function hl(t,e){return e==null?null:t[e]}function ky(t){t[Io]=0}function Nf(t){t[se]&1024||(t[se]|=1024,Rf(t)&&Co(t))}function ta(t){return!!(t[se]&9216||t[Wt]?.dirty)}function Of(t){t[Fr].changeDetectionScheduler?.notify(8),t[se]&64&&(t[se]|=1024),ta(t)&&Co(t)}function Co(t){t[Fr].changeDetectionScheduler?.notify(0);let e=gi(t);for(;e!==null&&!(e[se]&8192||(e[se]|=8192,!Rf(e)));)e=gi(e)}function Fy(t,e){if(So(t))throw new re(911,!1);t[Br]===null&&(t[Br]=[]),t[Br].push(e)}function tC(t,e){if(t[Br]===null)return;let n=t[Br].indexOf(e);n!==-1&&t[Br].splice(n,1)}function gi(t){let e=t[dt];return Mn(e)?e[dt]:e}function nC(t){return t[ul]??=[]}function rC(t){return t.cleanup??=[]}function iC(t,e,n,r){let i=nC(e);i.push(n),t.firstCreatePass&&rC(t).push(r,i.length-1)}var Se={lFrame:bC(null),bindingsEnabled:!0,skipHydrationRootTNode:null},pl=(function(t){return t[t.Off=0]="Off",t[t.Exhaustive=1]="Exhaustive",t[t.OnlyDirtyViews=2]="OnlyDirtyViews",t})(pl||{}),fU=0,hy=!1;function oC(){return Se.lFrame.elementDepthCount}function sC(){Se.lFrame.elementDepthCount++}function aC(){Se.lFrame.elementDepthCount--}function cC(){return Se.skipHydrationRootTNode!==null}function lC(t){return Se.skipHydrationRootTNode===t}function uC(){Se.skipHydrationRootTNode=null}function Zt(){return Se.lFrame.lView}function dC(){return Se.lFrame.tView}function Dn(){let t=jy();for(;t!==null&&t.type===64;)t=t.parent;return t}function jy(){return Se.lFrame.currentTNode}function fC(){let t=Se.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Lf(t,e){let n=Se.lFrame;n.currentTNode=t,n.isParent=e}function Uy(){return Se.lFrame.isParent}function hC(){Se.lFrame.isParent=!1}function zy(t){vy("Must never be called in production mode"),fU=t}function Vy(){return hy}function na(t){let e=hy;return hy=t,e}function pC(t){return Se.lFrame.bindingIndex=t}function mC(){return Se.lFrame.inI18n}function gC(t,e){let n=Se.lFrame;n.bindingIndex=n.bindingRootIndex=t,Bf(e)}function vC(){return Se.lFrame.currentDirectiveIndex}function Bf(t){Se.lFrame.currentDirectiveIndex=t}function yC(){return Se.lFrame.currentQueryIndex}function kf(t){Se.lFrame.currentQueryIndex=t}function hU(t){let e=t[ue];return e.type===2?e.declTNode:e.type===1?t[un]:null}function $y(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=hU(o),i===null||(o=o[Ys],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Se.lFrame=_C();return r.currentTNode=e,r.lView=t,!0}function Ff(t){let e=_C(),n=t[ue];Se.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function _C(){let t=Se.lFrame,e=t===null?null:t.child;return e===null?bC(t):e}function bC(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function xC(){let t=Se.lFrame;return Se.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Gy=xC;function jf(){let t=xC();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function EC(){return Se.lFrame.selectedIndex}function xi(t){Se.lFrame.selectedIndex=t}function wC(){return Se.lFrame.currentNamespace}var AC=!0;function IC(){return AC}function TC(t){AC=t}var pU={elements:void 0};function Uf(){return pU}function py(t,e=null,n=null,r){let i=SC(t,e,n,r);return i.resolveInjectorInitializers(),i}function SC(t,e=null,n=null,r,i=new Set){let o=[n||mi,WS(t)];return r=r||(typeof t=="object"?void 0:yo(t)),new bo(o,e||qs(),r||null,i)}var St=class t{static THROW_IF_NOT_FOUND=vo;static NULL=new il;static create(e,n){if(Array.isArray(e))return py({name:""},n,e,"");{let r=e.name??"";return py({name:r},e.parent,e.providers,r)}}static \u0275prov=Ce({token:t,providedIn:"any",factory:()=>he(Ty)});static __NG_ELEMENT_ID__=-1},qt=new ae(""),nr=(()=>{class t{static __NG_ELEMENT_ID__=mU;static __NG_ENV_ID__=n=>n}return t})(),ol=class extends nr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return So(this._lView)}onDestroy(e){let n=this._lView;return Fy(n,e),()=>tC(n,e)}};function mU(){return new ol(Zt())}var kt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ei=new ae("",{providedIn:"root",factory:()=>{let t=te(wt),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(kt),e.handleError(n))}}}),CC={provide:Ao,useValue:()=>void te(kt),multi:!0};function zf(t){return typeof t=="function"&&t[ut]!==void 0}function Mo(t,e){let[n,r,i]=zv(t,e?.equal),o=n,s=o[ut];return o.set=r,o.update=i,o.asReadonly=Hy.bind(o),o}function Hy(){let t=this[ut];if(t.readonlyFn===void 0){let e=()=>this();e[ut]=t,t.readonlyFn=e}return t.readonlyFn}var cn=class{},ml=new ae("",{providedIn:"root",factory:()=>!1});var Wy=new ae(""),Zy=new ae("");var gl=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=gU}return t})();function gU(){return new gl(Zt(),Dn())}var wi=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new po(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ae(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=Ce({token:t,providedIn:"root",factory:()=>new t})}return t})(),vl=(()=>{class t{internalPendingTasks=te(wi);scheduler=te(cn);errorHandler=te(Ei);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=Ce({token:t,providedIn:"root",factory:()=>new t})}return t})();function Do(...t){}var yl=(()=>{class t{static \u0275prov=Ce({token:t,providedIn:"root",factory:()=>new my})}return t})(),my=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}};function QC(t){return{toString:t}.toString()}function DU(t){return typeof t=="function"}var Wf=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function eM(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function PU(t){return t.type.prototype.ngOnChanges&&(t.setInput=NU),RU}function RU(){let t=nM(this),e=t?.current;if(e){let n=t.previous;if(n===wo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function NU(t,e,n,r,i){let o=this.declaredInputs[r],s=nM(t)||OU(t,{previous:wo,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Wf(l&&l.currentValue,n,c===wo),eM(t,e,i,n)}var tM="__ngSimpleChanges__";function nM(t){return t[tM]||null}function OU(t,e){return t[tM]=e}var MC=[];var Ne=function(t,e=null,n){for(let r=0;r<MC.length;r++){let i=MC[r];i(t,e,n)}};function LU(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=PU(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function BU(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Vf(t,e,n){rM(t,e,3,n)}function $f(t,e,n,r){(t[se]&3)===n&&rM(t,e,n,r)}function qy(t,e){let n=t[se];(n&3)===e&&(n&=16383,n+=1,t[se]=n)}function rM(t,e,n,r){let i=r!==void 0?t[Io]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Io]+=65536),(a<o||o==-1)&&(kU(t,n,e,c),t[Io]=(t[Io]&4294901760)+c+2),c++}function DC(t,e){Ne(4,t,e);let n=ce(null);try{e.call(t)}finally{ce(n),Ne(5,t,e)}}function kU(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[se]>>14<t[Io]>>16&&(t[se]&3)===e&&(t[se]+=16384,DC(a,o)):DC(a,o)}var ia=-1,xl=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function FU(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];jU(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function jU(t){return t.charCodeAt(0)===64}function b_(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?PC(t,n,i,null,e[++r]):PC(t,n,i,null,null))}}return t}function PC(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function iM(t){return t!==ia}function Zf(t){return t&32767}function UU(t){return t>>16}function qf(t,e){let n=UU(t),r=e;for(;n>0;)r=r[Ys],n--;return r}var Ky=!0;function RC(t){let e=Ky;return Ky=t,e}var zU=256,oM=zU-1,sM=5,VU=0,rr={};function $U(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Eo)&&(r=n[Eo]),r==null&&(r=n[Eo]=VU++);let i=r&oM,o=1<<i;e.data[t+(i>>sM)]|=o}function aM(t,e){let n=cM(t,e);if(n!==-1)return n;let r=e[ue];r.firstCreatePass&&(t.injectorIndex=e.length,Xy(r.data,t),Xy(e,null),Xy(r.blueprint,null));let i=x_(t,e),o=t.injectorIndex;if(iM(i)){let s=Zf(i),a=qf(i,e),c=a[ue].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function Xy(t,e){t.push(0,0,0,0,0,0,0,0,e)}function cM(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function x_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=hM(i),r===null)return ia;if(n++,i=i[Ys],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return ia}function GU(t,e,n){$U(t,e,n)}function lM(t,e,n){if(n&8||t!==void 0)return t;Cf(e,"NodeInjector")}function uM(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Xs],o=$t(void 0);try{return i?i.get(e,r,n&8):Ay(e,r,n&8)}finally{$t(o)}}return lM(r,e,n)}function dM(t,e,n,r=0,i){if(t!==null){if(e[se]&2048&&!(r&2)){let s=qU(t,e,n,r,rr);if(s!==rr)return s}let o=fM(t,e,n,r,rr);if(o!==rr)return o}return uM(e,n,r,i)}function fM(t,e,n,r,i){let o=WU(n);if(typeof o=="function"){if(!$y(e,t,r))return r&1?lM(i,n,r):uM(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Cf(n);else return s}finally{Gy()}}else if(typeof o=="number"){let s=null,a=cM(t,e),c=ia,l=r&1?e[fn][un]:null;for((a===-1||r&4)&&(c=a===-1?x_(t,e):e[a+8],c===ia||!OC(r,!1)?a=-1:(s=e[ue],a=Zf(c),e=qf(c,e)));a!==-1;){let u=e[ue];if(NC(o,a,u.data)){let d=HU(a,e,n,s,r,l);if(d!==rr)return d}c=e[a+8],c!==ia&&OC(r,e[ue].data[a+8]===l)&&NC(o,a,e)?(s=u,a=Zf(c),e=qf(c,e)):a=-1}}return i}function HU(t,e,n,r,i,o){let s=e[ue],a=s.data[t+8],c=r==null?Ks(a)&&Ky:r!=s&&(a.type&3)!==0,l=i&1&&o===a,u=Gf(a,s,n,c,l);return u!==null?Xf(e,s,u,a,i):rr}function Gf(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,f=i?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(i){let h=s[c];if(h&&Qs(h)&&h.type===n)return c}return null}function Xf(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof xl){let a=o;if(a.resolving){let h=Ef(s[n]);throw wy(h)}let c=RC(a.canSeeViewProviders);a.resolving=!0;let l=s[n].type||s[n],u,d=a.injectImpl?$t(a.injectImpl):null,f=$y(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&LU(n,s[n],e)}finally{d!==null&&$t(d),RC(c),a.resolving=!1,Gy()}}return o}function WU(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Eo)?t[Eo]:void 0;return typeof e=="number"?e>=0?e&oM:ZU:e}function NC(t,e,n){let r=1<<t;return!!(n[e+(t>>sM)]&r)}function OC(t,e){return!(t&2)&&!(t&1&&e)}var Po=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return dM(this._tNode,this._lView,e,_o(r),n)}};function ZU(){return new Po(Dn(),Zt())}function qU(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[se]&2048&&!ea(s);){let a=fM(o,s,n,r|2,rr);if(a!==rr)return a;let c=o.parent;if(!c){let l=s[Oy];if(l){let u=l.get(n,rr,r);if(u!==rr)return u}c=hM(s),s=s[Ys]}o=c}return i}function hM(t){let e=t[ue],n=e.type;return n===2?e.declTNode:n===1?t[un]:null}function XU(){return oa(Dn(),Zt())}function oa(t,e){return new Tl(bi(t,e))}var Tl=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=XU}return t})();function JU(t){return t instanceof Tl?t.nativeElement:t}function YU(){return this._results[Symbol.iterator]()}var Jf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ze}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=GS(e);(this._changesDetected=!$S(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=YU};function pM(t){return(t.flags&128)===128}var E_=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(E_||{}),mM=new Map,KU=0;function QU(){return KU++}function ez(t){mM.set(t[dl],t)}function Qy(t){mM.delete(t[dl])}var LC="__ngContext__";function El(t,e){Ur(e)?(t[LC]=e[dl],ez(e)):t[LC]=e}function gM(t){return yM(t[Js])}function vM(t){return yM(t[ln])}function yM(t){for(;t!==null&&!Mn(t);)t=t[ln];return t}var e_;function w_(t){e_=t}function _M(){if(e_!==void 0)return e_;if(typeof document<"u")return document;throw new re(210,!1)}var rh=new ae("",{providedIn:"root",factory:()=>tz}),tz="ng",ih=new ae(""),sa=new ae("",{providedIn:"platform",factory:()=>"unknown"});var oh=new ae("",{providedIn:"root",factory:()=>_M().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var nz="h",rz="b";var bM=!1,xM=new ae("",{providedIn:"root",factory:()=>bM});function A_(t){return(t.flags&32)===32}var iz=()=>null;function EM(t,e,n=!1){return iz(t,e,n)}function wM(t,e){let n=t.contentQueries;if(n!==null){let r=ce(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];kf(o),a.contentQueries(2,e[s],s)}}}finally{ce(r)}}}function t_(t,e,n){kf(0);let r=ce(null);try{e(t,n)}finally{ce(r)}}function oz(t,e,n){if(Ly(e)){let r=ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{ce(r)}}}var $r=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})($r||{});var sz="ng-template";function az(t){return t.type===4&&t.value!==sz}function n_(t){return(t&1)===0}function BC(t,e){return t?":not("+e.trim()+")":e}function cz(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!n_(s)&&(e+=BC(o,i),i=""),r=s,o=o||!n_(r);n++}return i!==""&&(e+=BC(o,i)),e}function lz(t){return t.map(cz).join(",")}function uz(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!n_(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var I_={};function AM(t,e,n){return t.createElement(e,n)}function Yf(t,e,n,r,i){t.insertBefore(e,n,r,i)}function IM(t,e,n){t.appendChild(e,n)}function kC(t,e,n,r,i){r!==null?Yf(t,e,n,r,i):IM(t,e,n)}function dz(t,e,n){t.removeChild(null,e,n)}function fz(t,e,n){t.setAttribute(e,"style",n)}function hz(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function TM(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&FU(t,e,r),i!==null&&hz(t,e,i),o!==null&&fz(t,e,o)}function SM(t,e,n,r,i,o,s,a,c,l,u){let d=er+r,f=d+i,h=pz(d,f),p=typeof l=="function"?l():l;return h[ue]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function pz(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:I_);return n}function mz(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=SM(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function T_(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Cn]=i,d[se]=r|4|128|8|64|1024,(l!==null||t&&t[se]&2048)&&(d[se]|=2048),ky(d),d[dt]=d[Ys]=t,d[Ht]=n,d[Fr]=s||t&&t[Fr],d[dn]=a||t&&t[dn],d[Xs]=c||t&&t[Xs]||null,d[un]=o,d[dl]=QU(),d[ll]=u,d[Oy]=l,d[fn]=e.type==2?t[fn]:d,d}function gz(t,e,n){let r=bi(e,t),i=mz(n),o=t[Fr].rendererFactory,s=DM(t,T_(t,i,null,CM(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function CM(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function MM(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function DM(t,e){return t[Js]?t[Ny][ln]=e:t[Js]=e,t[Ny]=e,e}function vz(t,e,n,r){if(!r)if((e[se]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Vf(e,o,n)}else{let o=t.preOrderHooks;o!==null&&$f(e,o,0,n)}xi(n)}var sh=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(sh||{});function r_(t,e,n,r){let i=ce(null);try{let[o,s,a]=t.inputs[n],c=null;(s&sh.SignalBased)!==0&&(c=e[o][ut]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,c,r,n,o):eM(e,c,o,r)}finally{ce(i)}}var Oo=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Oo||{}),yz;function S_(t,e){return yz(t,e)}function ra(t,e,n,r,i){if(r!=null){let o,s=!1;Mn(r)?o=r:Ur(r)&&(s=!0,r=r[Cn]);let a=tr(r);t===0&&n!==null?i==null?IM(e,n,a):Yf(e,n,a,i||null,!0):t===1&&n!==null?Yf(e,n,a,i||null,!0):t===2?dz(e,a,s):t===3&&e.destroyNode(a),o!=null&&Pz(e,t,o,n,i)}}function _z(t,e){PM(t,e),e[Cn]=null,e[un]=null}function bz(t,e,n,r,i,o){r[Cn]=i,r[un]=e,ah(t,r,n,1,i,o)}function PM(t,e){e[Fr].changeDetectionScheduler?.notify(9),ah(t,e,e[dn],2,null,null)}function xz(t){let e=t[Js];if(!e)return Jy(t[ue],t);for(;e;){let n=null;if(Ur(e))n=e[Js];else{let r=e[Ct];r&&(n=r)}if(!n){for(;e&&!e[ln]&&e!==t;)Ur(e)&&Jy(e[ue],e),e=e[dt];e===null&&(e=t),Ur(e)&&Jy(e[ue],e),n=e&&e[ln]}e=n}}function C_(t,e){let n=t[To],r=n.indexOf(e);n.splice(r,1)}function RM(t,e){if(So(e))return;let n=e[dn];n.destroyNode&&ah(t,e,n,3,null,null),xz(e)}function Jy(t,e){if(So(e))return;let n=ce(null);try{e[se]&=-129,e[se]|=256,e[Wt]&&uo(e[Wt]),wz(t,e),Ez(t,e),e[ue].type===1&&e[dn].destroy();let r=e[yi];if(r!==null&&Mn(e[dt])){r!==e[dt]&&C_(r,e);let i=e[Qn];i!==null&&i.detachView(t)}Qy(e)}finally{ce(n)}}function Ez(t,e){let n=t.cleanup,r=e[ul];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[ul]=null);let i=e[Br];if(i!==null){e[Br]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[jr];if(o!==null){e[jr]=null;for(let s of o)s.destroy()}}function wz(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof xl)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Ne(4,a,c);try{c.call(a)}finally{Ne(5,a,c)}}else{Ne(4,i,o);try{o.call(i)}finally{Ne(5,i,o)}}}}}function Az(t,e,n){return Iz(t,e.parent,n)}function Iz(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Cn];if(Ks(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===$r.None||i===$r.Emulated)return null}return bi(r,n)}function Tz(t,e,n){return Cz(t,e,n)}function Sz(t,e,n){return t.type&40?bi(t,n):null}var Cz=Sz,FC;function Mz(t,e,n,r){let i=Az(t,r,e),o=e[dn],s=r.parent||e[un],a=Tz(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)kC(o,i,n[c],a,!1);else kC(o,i,n,a,!1);FC!==void 0&&FC(o,r,e,n,i)}function _l(t,e){if(e!==null){let n=e.type;if(n&3)return bi(e,t);if(n&4)return i_(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return _l(t,r);{let i=t[e.index];return Mn(i)?i_(-1,i):tr(i)}}else{if(n&128)return _l(t,e.next);if(n&32)return S_(e,t)()||tr(t[e.index]);{let r=NM(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=gi(t[fn]);return _l(i,r)}else return _l(t,e.next)}}}return null}function NM(t,e){if(e!==null){let r=t[fn][un],i=e.projection;return r.projection[i]}return null}function i_(t,e){let n=Ct+t+1;if(n<e.length){let r=e[n],i=r[ue].firstChild;if(i!==null)return _l(r,i)}return e[_i]}function M_(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(s&&e===0&&(a&&El(tr(a),r),n.flags|=2),!A_(n))if(c&8)M_(t,e,n.child,r,i,o,!1),ra(e,t,i,a,o);else if(c&32){let l=S_(n,r),u;for(;u=l();)ra(e,t,i,u,o);ra(e,t,i,a,o)}else c&16?Dz(t,e,r,n,i,o):ra(e,t,i,a,o);n=s?n.projectionNext:n.next}}function ah(t,e,n,r,i,o){M_(n,r,t.firstChild,e,i,o,!1)}function Dz(t,e,n,r,i,o){let s=n[fn],c=s[un].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ra(e,t,i,u,o)}else{let l=c,u=s[dt];pM(r)&&(l.flags|=128),M_(t,e,l,u,i,o,!0)}}function Pz(t,e,n,r,i){let o=n[_i],s=tr(n);o!==s&&ra(e,t,r,o,i);for(let a=Ct;a<n.length;a++){let c=n[a];ah(c[ue],c,t,e,r,o)}}function OM(t,e,n,r,i){let o=EC(),s=r&2;try{xi(-1),s&&e.length>er&&vz(t,e,er,!1),Ne(s?2:0,i,n),n(r,i)}finally{xi(o),Ne(s?3:1,i,n)}}function Rz(t,e,n){kz(t,e,n),(n.flags&64)===64&&Fz(t,e,n)}function Nz(t,e,n=bi){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function Oz(t,e,n,r){let o=r.get(xM,bM)||n===$r.ShadowDom,s=t.selectRootElement(e,o);return Lz(s),s}function Lz(t){Bz(t)}var Bz=()=>null;function kz(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Ks(n)&&gz(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||aM(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],c=Xf(e,t,s,n);if(El(c,e),o!==null&&Uz(e,s-r,c,a,n,o),Qs(a)){let l=zr(n.index,e);l[Ht]=Xf(e,t,s,n)}}}function Fz(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=vC();try{xi(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];Bf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&jz(c,l)}}finally{xi(-1),Bf(s)}}function jz(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Uz(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],l=s[a+1];r_(r,n,c,l)}}function zz(t,e,n,r,i){let o=er+n,s=e[ue],a=i(s,e,t,r,n);e[o]=a,Lf(t,!0);let c=t.type===2;return c?(TM(e[dn],a,t),(oC()===0||YS(t))&&El(a,e),sC()):El(a,e),IC()&&(!c||!A_(t))&&Mz(s,e,a,t),t}function Vz(t){let e=t;return Uy()?hC():(e=e.parent,Lf(e,!1)),e}function $z(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let l=s[c],u=s[c+1],d=e.data[l];r_(d,n[l],u,i),a=!0}if(o)for(let c of o){let l=n[c],u=e.data[c];r_(u,l,r,i),a=!0}return a}function Gz(t,e){let n=zr(e,t),r=n[ue];Hz(r,n);let i=n[Cn];i!==null&&n[ll]===null&&(n[ll]=EM(i,n[Xs])),Ne(18),D_(r,n,n[Ht]),Ne(19,n[Ht])}function Hz(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function D_(t,e,n){Ff(e);try{let r=t.viewQuery;r!==null&&t_(1,r,n);let i=t.template;i!==null&&OM(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Qn]?.finishViewCreation(t),t.staticContentQueries&&wM(t,e),t.staticViewQueries&&t_(2,t.viewQuery,n);let o=t.components;o!==null&&Wz(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[se]&=-5,jf()}}function Wz(t,e){for(let n=0;n<e.length;n++)Gz(t,e[n])}function Zz(t,e,n,r){let i=ce(null);try{let o=e.tView,a=t[se]&4096?4096:16,c=T_(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[yi]=l;let u=t[Qn];return u!==null&&(c[Qn]=u.createEmbeddedView(o)),D_(o,c,n),c}finally{ce(i)}}function jC(t,e){return!e||e.firstChild===null||pM(t)}var UC=!1,qz=new ae("");function wl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(tr(o)),Mn(o)&&LM(o,r);let s=n.type;if(s&8)wl(t,e,n.child,r);else if(s&32){let a=S_(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=NM(e,n);if(Array.isArray(a))r.push(...a);else{let c=gi(e[fn]);wl(c[ue],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function LM(t,e){for(let n=Ct;n<t.length;n++){let r=t[n],i=r[ue].firstChild;i!==null&&wl(r[ue],r,i,e)}t[_i]!==t[Cn]&&e.push(t[_i])}function BM(t){if(t[Pf]!==null){for(let e of t[Pf])e.impl.addSequence(e);t[Pf].length=0}}var kM=[];function Xz(t){return t[Wt]??Jz(t)}function Jz(t){let e=kM.pop()??Object.create(Kz);return e.lView=t,e}function Yz(t){t.lView[Wt]!==t&&(t.lView=null,kM.push(t))}var Kz=S(v({},co),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Co(t.lView)},consumerOnSignalRead(){this.lView[Wt]=this}});function Qz(t){let e=t[Wt]??Object.create(e3);return e.lView=t,e}var e3=S(v({},co),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=gi(t.lView);for(;e&&!FM(e[ue]);)e=gi(e);e&&Nf(e)},consumerOnSignalRead(){this.lView[Wt]=this}});function FM(t){return t.type!==2}function jM(t){if(t[jr]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[jr])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[se]&8192)}}var t3=100;function P_(t,e=0){let r=t[Fr].rendererFactory,i=!1;i||r.begin?.();try{n3(t,e)}finally{i||r.end?.()}}function n3(t,e){let n=Vy();try{na(!0),o_(t,e);let r=0;for(;ta(t);){if(r===t3)throw new re(103,!1);r++,o_(t,1)}}finally{na(n)}}function UM(t,e){zy(e?pl.Exhaustive:pl.OnlyDirtyViews);try{P_(t)}finally{zy(pl.Off)}}function r3(t,e,n,r){if(So(e))return;let i=e[se],o=!1,s=!1;Ff(e);let a=!0,c=null,l=null;o||(FM(t)?(l=Xz(e),c=lo(l)):Xd()===null?(a=!1,l=Qz(e),c=lo(l)):e[Wt]&&(uo(e[Wt]),e[Wt]=null));try{ky(e),pC(t.bindingStartIndex),n!==null&&OM(t,e,n,2,r);let u=(i&3)===3;if(!o)if(u){let h=t.preOrderCheckHooks;h!==null&&Vf(e,h,null)}else{let h=t.preOrderHooks;h!==null&&$f(e,h,0,null),qy(e,0)}if(s||i3(e),jM(e),zM(e,0),t.contentQueries!==null&&wM(t,e),!o)if(u){let h=t.contentCheckHooks;h!==null&&Vf(e,h)}else{let h=t.contentHooks;h!==null&&$f(e,h,1),qy(e,1)}s3(t,e);let d=t.components;d!==null&&$M(e,d,0);let f=t.viewQuery;if(f!==null&&t_(2,f,r),!o)if(u){let h=t.viewCheckHooks;h!==null&&Vf(e,h)}else{let h=t.viewHooks;h!==null&&$f(e,h,2),qy(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Df]){for(let h of e[Df])h();e[Df]=null}o||(BM(e),e[se]&=-73)}catch(u){throw o||Co(e),u}finally{l!==null&&(Ls(l,c),a&&Yz(l)),jf()}}function zM(t,e){for(let n=gM(t);n!==null;n=vM(n))for(let r=Ct;r<n.length;r++){let i=n[r];VM(i,e)}}function i3(t){for(let e=gM(t);e!==null;e=vM(e)){if(!(e[se]&2))continue;let n=e[To];for(let r=0;r<n.length;r++){let i=n[r];Nf(i)}}}function o3(t,e,n){Ne(18);let r=zr(e,t);VM(r,n),Ne(19,r[Ht])}function VM(t,e){Rf(t)&&o_(t,e)}function o_(t,e){let r=t[ue],i=t[se],o=t[Wt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Bs(o)),s||=!1,o&&(o.dirty=!1),t[se]&=-9217,s)r3(r,t,r.template,t[Ht]);else if(i&8192){let a=ce(null);try{jM(t),zM(t,1);let c=r.components;c!==null&&$M(t,c,1),BM(t)}finally{ce(a)}}}function $M(t,e,n){for(let r=0;r<e.length;r++)o3(t,e[r],n)}function s3(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)xi(~i);else{let o=i,s=n[++r],a=n[++r];gC(s,o);let c=e[o];Ne(24,c),a(2,c),Ne(25,c)}}}finally{xi(-1)}}function GM(t,e){let n=Vy()?64:1088;for(t[Fr].changeDetectionScheduler?.notify(e);t;){t[se]|=n;let r=gi(t);if(ea(t)&&!r)return t;t=r}return null}function a3(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function c3(t,e,n,r=!0){let i=e[ue];if(l3(i,e,t,n),r){let s=i_(n,t),a=e[dn],c=a.parentNode(t[_i]);c!==null&&bz(i,t[un],a,e,c,s)}let o=e[ll];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function s_(t,e){if(t.length<=Ct)return;let n=Ct+e,r=t[n];if(r){let i=r[yi];i!==null&&i!==t&&C_(i,r),e>0&&(t[n-1][ln]=r[ln]);let o=sl(t,Ct+e);_z(r[ue],r);let s=o[Qn];s!==null&&s.detachView(o[ue]),r[dt]=null,r[ln]=null,r[se]&=-129}return r}function l3(t,e,n,r){let i=Ct+r,o=n.length;r>0&&(n[i-1][ln]=e),r<o-Ct?(e[ln]=n[i],Iy(n,Ct+r,e)):(n.push(e),e[ln]=null),e[dt]=n;let s=e[yi];s!==null&&n!==s&&HM(s,e);let a=e[Qn];a!==null&&a.insertView(t),Of(e),e[se]|=128}function HM(t,e){let n=t[To],r=e[dt];if(Ur(r))t[se]|=2;else{let i=r[dt][fn];e[fn]!==i&&(t[se]|=2)}n===null?t[To]=[e]:n.push(e)}var Ai=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[ue];return wl(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Ht]}set context(e){this._lView[Ht]=e}get destroyed(){return So(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[dt];if(Mn(e)){let n=e[fl],r=n?n.indexOf(this):-1;r>-1&&(s_(e,r),sl(n,r))}this._attachedToViewContainer=!1}RM(this._lView[ue],this._lView)}onDestroy(e){Fy(this._lView,e)}markForCheck(){GM(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[se]&=-129}reattach(){Of(this._lView),this._lView[se]|=128}detectChanges(){this._lView[se]|=1024,P_(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ea(this._lView),n=this._lView[yi];n!==null&&!e&&C_(n,this._lView),PM(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let n=ea(this._lView),r=this._lView[yi];r!==null&&!n&&HM(r,this._lView),Of(this._lView)}};function R_(t){return ta(t._lView)||!!(t._lView[se]&64)}function N_(t){Nf(t._lView)}var Al=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=u3;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=Zz(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new Ai(o)}}return t})();function u3(){return O_(Dn(),Zt())}function O_(t,e){return t.type&4?new Al(e,t,oa(t,e)):null}function WM(t,e,n,r,i){let o=t.data[e];if(o===null)o=d3(t,e,n,r,i),mC()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=fC();o.injectorIndex=s===null?-1:s.injectorIndex}return Lf(o,!0),o}function d3(t,e,n,r,i){let o=jy(),s=Uy(),a=s?o:o&&o.parent,c=t.data[e]=h3(t,a,n,e,r,i);return f3(t,c,o,s),c}function f3(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function h3(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return cC()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Yse=new RegExp(`^(\\d+)*(${rz}|${nz})*(.*)`);var p3=()=>null;function zC(t,e){return p3(t,e)}var ZM=class{},ch=class{},a_=class{resolveComponentFactory(e){throw new re(917,!1)}},Lo=class{static NULL=new a_},Ro=class{};var qM=(()=>{class t{static \u0275prov=Ce({token:t,providedIn:"root",factory:()=>null})}return t})();var Hf={},c_=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,Hf,r);return i!==Hf||n===Hf?i:this.parentInjector.get(e,n,r)}};function Kf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=gy(i,a);else if(o==2){let c=a,l=e[++s];r=gy(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function XM(t,e=0){let n=Zt();if(n===null)return he(t,e);let r=Dn();return dM(r,n,Gt(t),e)}function m3(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,c=null,l=null;for(let u of s)if(u.resolveHostDirectives!==null){[a,c,l]=u.resolveHostDirectives(s);break}y3(t,e,n,a,o,c,l)}o!==null&&r!==null&&g3(n,r,o)}function g3(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new re(-301,!1);r.push(e[i],o)}}function v3(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function y3(t,e,n,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let h=r[f];!c&&Qs(h)&&(c=!0,v3(t,n,f)),GU(aM(n,e),t,h.type)}A3(n,t.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let l=!1,u=!1,d=MM(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(n.mergedAttrs=b_(n.mergedAttrs,h.hostAttrs),b3(t,n,e,d,h),w3(d,h,i),s!==null&&s.has(h)){let[g,y]=s.get(h);n.directiveToIndex.set(h.type,[d,g+n.directiveStart,y+n.directiveStart])}else(o===null||!o.has(h))&&n.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),u=!0),d++}_3(t,n,o)}function _3(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))VC(0,e,i,r),VC(1,e,i,r),GC(e,r,!1);else{let o=n.get(i);$C(0,e,o,r),$C(1,e,o,r),GC(e,r,!0)}}}function VC(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),JM(e,o)}}function $C(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),JM(e,s)}}function JM(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function GC(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||az(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let l=i[c];for(let u of l)if(u===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let l=o[c];for(let u=0;u<l.length;u+=2)if(l[u]===e){s??=[],s.push(l[u+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function b3(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Zs(i.type,!0)),s=new xl(o,Qs(i),XM,null);t.blueprint[r]=s,n[r]=s,x3(t,e,r,MM(t,n,i.hostVars,I_),i)}function x3(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;E3(s)!=a&&s.push(a),s.push(n,r,o)}}function E3(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function w3(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Qs(e)&&(n[""]=t)}}function A3(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function I3(t,e,n,r,i,o,s,a){let c=e[ue],l=c.consts,u=hl(l,s),d=WM(c,t,n,r,u);return o&&m3(c,e,d,hl(l,a),i),d.mergedAttrs=b_(d.mergedAttrs,d.attrs),d.attrs!==null&&Kf(d,d.attrs,!1),d.mergedAttrs!==null&&Kf(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function T3(t,e){BU(t,e),Ly(e)&&t.queries.elementEnd(e)}function S3(t,e,n,r,i,o){let s=e.consts,a=hl(s,i),c=WM(e,t,n,r,a);if(c.mergedAttrs=b_(c.mergedAttrs,c.attrs),o!=null){let l=hl(s,o);c.localNames=[];for(let u=0;u<l.length;u+=2)c.localNames.push(l[u],-1)}return c.attrs!==null&&Kf(c,c.attrs,!1),c.mergedAttrs!==null&&Kf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}var l_=Symbol("BINDING");var u_=class extends Lo{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=kr(e);return new No(n,this.ngModule)}};function C3(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&sh.SignalBased)!==0};return i&&(o.transform=i),o})}function M3(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function D3(t,e,n){let r=e instanceof wt?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new c_(n,r):n}function P3(t){let e=t.get(Ro,null);if(e===null)throw new re(407,!1);let n=t.get(qM,null),r=t.get(cn,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function R3(t,e){let n=YM(t);return AM(e,n,n==="svg"?KS:n==="math"?QS:null)}function YM(t){return(t.selectors[0][0]||"div").toLowerCase()}var No=class extends ch{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=C3(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=M3(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=lz(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Ne(22);let a=ce(null);try{let c=this.componentDef,l=N3(r,c,s,o),u=D3(c,i||this.ngModule,e),d=P3(u),f=d.rendererFactory.createRenderer(null,c),h=r?Oz(f,r,c.encapsulation,u):R3(c,f),p=s?.some(HC)||o?.some(_=>typeof _!="function"&&_.bindings.some(HC)),g=T_(null,l,null,512|CM(c),null,null,d,f,u,null,EM(h,u,!0));g[er]=h,Ff(g);let y=null;try{let _=I3(er,g,2,"#host",()=>l.directiveRegistry,!0,0);h&&(TM(f,h,_),El(h,g)),Rz(l,g,_),oz(l,_,g),T3(l,_),n!==void 0&&L3(_,this.ngContentSelectors,n),y=zr(_.index,g),g[Ht]=y[Ht],D_(l,g,null)}catch(_){throw y!==null&&Qy(y),Qy(g),_}finally{Ne(23),jf()}return new Qf(this.componentType,g,!!p)}finally{ce(a)}}};function N3(t,e,n,r){let i=t?["ng-version","20.2.4"]:uz(e.selectors[0]),o=null,s=null,a=0;if(n)for(let u of n)a+=u[l_].requiredVars,u.create&&(u.targetIdx=0,(o??=[]).push(u)),u.update&&(u.targetIdx=0,(s??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let f of d.bindings){a+=f[l_].requiredVars;let h=u+1;f.create&&(f.targetIdx=h,(o??=[]).push(f)),f.update&&(f.targetIdx=h,(s??=[]).push(f))}}let c=[e];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,f=Cy(d);c.push(f)}return SM(0,null,O3(o,s),1,a,c,null,null,null,[i],null)}function O3(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function HC(t){let e=t[l_].kind;return e==="input"||e==="twoWay"}var Qf=class extends ZM{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=By(n[ue],er),this.location=oa(this._tNode,n),this.instance=zr(this._tNode.index,n)[Ht],this.hostView=this.changeDetectorRef=new Ai(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=$z(r,i[ue],i,e,n);this.previousInputValues.set(e,n);let s=zr(r.index,i);GM(s,1)}get injector(){return new Po(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function L3(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var lh=(()=>{class t{static __NG_ELEMENT_ID__=B3}return t})();function B3(){let t=Dn();return QM(t,Zt())}var k3=lh,KM=class extends k3{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return oa(this._hostTNode,this._hostLView)}get injector(){return new Po(this._hostTNode,this._hostLView)}get parentInjector(){let e=x_(this._hostTNode,this._hostLView);if(iM(e)){let n=qf(e,this._hostLView),r=Zf(e),i=n[ue].data[r+8];return new Po(i,n)}else return new Po(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=WC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ct}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=zC(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,jC(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let c=e&&!DU(e),l;if(c)l=n;else{let y=n||{};l=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef,s=y.directives,a=y.bindings}let u=c?e:new No(kr(e)),d=r||this.parentInjector;if(!o&&u.ngModule==null){let _=(c?d:this.parentInjector).get(wt,null);_&&(o=_)}let f=kr(u.componentType??{}),h=zC(this._lContainer,f?.id??null),p=h?.firstChild??null,g=u.create(d,i,p,o,s,a);return this.insertImpl(g.hostView,l,jC(this._hostTNode,h)),g}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(eC(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[dt],l=new KM(c,c[un],c[dt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return c3(s,i,o,r),e.attachToViewContainerRef(),Iy(Yy(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=WC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=s_(this._lContainer,n);r&&(sl(Yy(this._lContainer),n),RM(r[ue],r))}detach(e){let n=this._adjustIndex(e,-1),r=s_(this._lContainer,n);return r&&sl(Yy(this._lContainer),n)!=null?new Ai(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function WC(t){return t[fl]}function Yy(t){return t[fl]||(t[fl]=[])}function QM(t,e){let n,r=e[t.index];return Mn(r)?n=r:(n=a3(r,e,null,t),e[t.index]=n,DM(e,n)),j3(n,e,t,r),new KM(n,t,e)}function F3(t,e){let n=t[dn],r=n.createComment(""),i=bi(e,t),o=n.parentNode(i);return Yf(n,o,r,n.nextSibling(i),!1),r}var j3=U3;function U3(t,e,n,r){if(t[_i])return;let i;n.type&8?i=tr(r):i=F3(e,n),t[_i]=i}var d_=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},f_=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)n1(e,n).matches!==null&&this.queries[n].setDirty()}},h_=class{flags;read;predicate;constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=Z3(e):this.predicate=e}},p_=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},m_=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,z3(n,o)),this.matchTNodeWithReadOption(e,n,Gf(n,e,o,!1,!1))}else r===Al?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Gf(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Tl||i===lh||i===Al&&n.type&4)this.addMatch(n.index,-2);else{let o=Gf(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function z3(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function V3(t,e){return t.type&11?oa(t,e):t.type&4?O_(t,e):null}function $3(t,e,n,r){return n===-1?V3(e,t):n===-2?G3(t,e,r):Xf(t,t[ue],n,e)}function G3(t,e,n){if(n===Tl)return oa(e,t);if(n===Al)return O_(e,t);if(n===lh)return QM(e,t)}function e1(t,e,n,r){let i=e[Qn].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push($3(e,u,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function g_(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=e1(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let d=Ct;d<u.length;d++){let f=u[d];f[yi]===f[dt]&&g_(f[ue],f,l,r)}if(u[To]!==null){let d=u[To];for(let f=0;f<d.length;f++){let h=d[f];g_(h[ue],h,l,r)}}}}}return r}function t1(t,e){return t[Qn].queries[e].queryList}function H3(t,e,n){let r=new Jf((n&4)===4);return iC(t,e,r,r.destroy),(e[Qn]??=new f_).queries.push(new d_(r))-1}function W3(t,e,n){let r=dC();return r.firstCreatePass&&(q3(r,new h_(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),H3(r,Zt(),e)}function Z3(t){return t.split(",").map(e=>e.trim())}function q3(t,e,n){t.queries===null&&(t.queries=new p_),t.queries.track(new m_(e,n))}function n1(t,e){return t.queries.getByIndex(e)}function X3(t,e){let n=t[ue],r=n1(n,e);return r.crossesNgTemplate?g_(n,t,e,[]):e1(n,t,r,e)}function r1(t,e,n){let r,i=Qc(()=>{r._dirtyCounter();let o=Y3(r,t);if(e&&o===void 0)throw new re(-951,!1);return o});return r=i[ut],r._dirtyCounter=Mo(0),r._flatValue=void 0,i}function i1(t){return r1(!0,!1,t)}function o1(t){return r1(!0,!0,t)}function J3(t,e){let n=t[ut];n._lView=Zt(),n._queryIndex=e,n._queryList=t1(n._lView,e),n._queryList.onDirty(()=>n._dirtyCounter.update(r=>r+1))}function Y3(t,e){let n=t._lView,r=t._queryIndex;if(n===void 0||r===void 0||n[se]&4)return e?void 0:mi;let i=t1(n,r),o=X3(n,r);return i.reset(o,JU),e?i.first:i._changesDetected||t._flatValue===void 0?t._flatValue=i.toArray():t._flatValue}var ZC=new Set;function L_(t){ZC.has(t)||(ZC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var eh=class{};var Il=class extends eh{injector;componentFactoryResolver=new u_(this);instance=null;constructor(e){super();let n=new bo([...e.providers,{provide:eh,useValue:this},{provide:Lo,useValue:this.componentFactoryResolver}],e.parent||qs(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function s1(t,e,n=null){return new Il({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var K3=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=My(!1,n.type),i=r.length>0?s1([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Ce({token:t,providedIn:"environment",factory:()=>new t(he(wt))})}return t})();function B_(t){return QC(()=>{let e=nV(t),n=S(v({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===E_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(K3).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||$r.Emulated,styles:t.styles||mi,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&L_("NgStandalone"),rV(n);let r=t.dependencies;return n.directiveDefs=qC(r,Q3),n.pipeDefs=qC(r,HS),n.id=iV(n),n})}function Q3(t){return kr(t)||Cy(t)}function eV(t,e){if(t==null)return wo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=sh.None,c=null),n[o]=[r,a,c],e[o]=s}return n}function tV(t){if(t==null)return wo;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function nV(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||wo,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||mi,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:eV(t.inputs,e),outputs:tV(t.outputs),debugInfo:null}}function rV(t){t.features?.forEach(e=>e(t))}function qC(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function iV(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var k_=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(k_||{}),Sl=new ae(""),a1=!1,v_=class extends Ze{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Py()&&(this.destroyRef=te(nr,{optional:!0})??void 0,this.pendingTasks=te(wi,{optional:!0})??void 0)}emit(e){let n=ce(null);try{super.next(e)}finally{ce(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof gt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Vr=v_;function c1(t){let e,n;function r(){t=Do;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function XC(t){return queueMicrotask(()=>t()),()=>{t=Do}}var F_="isAngularZone",th=F_+"_ID",oV=0,ze=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Vr(!1);onMicrotaskEmpty=new Vr(!1);onStable=new Vr(!1);onError=new Vr(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=a1}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,cV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(F_)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new re(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,sV,Do,Do);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},sV={};function j_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function aV(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){c1(()=>{t.callbackScheduled=!1,y_(t),t.isCheckStableRunning=!0,j_(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),y_(t)}function cV(t){let e=()=>{aV(t)},n=oV++;t._inner=t._inner.fork({name:"angular",properties:{[F_]:!0,[th]:n,[th+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(lV(c))return r.invokeTask(o,s,a,c);try{return JC(t),r.invokeTask(o,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),YC(t)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return JC(t),r.invoke(o,s,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!uV(c)&&e(),YC(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,y_(t),j_(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function y_(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function JC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function YC(t){t._nesting--,j_(t)}var nh=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Vr;onMicrotaskEmpty=new Vr;onStable=new Vr;onError=new Vr;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function lV(t){return l1(t,"__ignore_ng_zone__")}function uV(t){return l1(t,"__scheduler_tick__")}function l1(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var u1=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=Ce({token:t,providedIn:"root",factory:()=>new t})}return t})();var U_=new ae("");function z_(t){return!!t&&typeof t.then=="function"}function d1(t){return!!t&&typeof t.subscribe=="function"}var f1=new ae("");var V_=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=te(f1,{optional:!0})??[];injector=te(St);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=vi(this.injector,i);if(z_(o))n.push(o);else if(d1(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),h1=new ae("");function p1(){Uv(()=>{let t="";throw new re(600,t)})}function m1(t){return t.isBoundToModule}var dV=10;var Pn=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=te(Ei);afterRenderManager=te(u1);zonelessEnabled=te(ml);rootEffectScheduler=te(yl);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ze;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=te(wi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(yt(n=>!n))}constructor(){te(Sl,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=te(wt);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=St.NULL){return this._injector.get(ze).run(()=>{Ne(10);let s=n instanceof ch;if(!this._injector.get(V_).done){let p="";throw new re(405,p)}let c;s?c=n:c=this._injector.get(Lo).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let l=m1(c)?void 0:this._injector.get(eh),u=r||c.selector,d=c.create(i,[],u,l),f=d.location.nativeElement,h=d.injector.get(U_,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),bl(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),Ne(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ne(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(k_.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new re(101,!1);let n=ce(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ce(n),this.afterTick.next(),Ne(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Ro,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<dV;)Ne(14),this.synchronizeOnce(),Ne(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!ta(i))continue;let o=r&&!this.zonelessEnabled?0:1;P_(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ta(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;bl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(h1,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>bl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new re(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var $_=new ae("",{providedIn:"root",factory:()=>!1}),G_=new ae("",{providedIn:"root",factory:()=>fV}),fV=4e3;var rae=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function H_(t,e,n,r){let i=Zt(),o=i[ue],s=t+er,a=o.firstCreatePass?S3(s,o,2,e,n,r):o.data[s];return zz(a,i,t,e,hV),r!=null&&Nz(i,a),H_}function W_(){let t=Dn(),e=Vz(t);return lC(e)&&uC(),aC(),W_}function uh(t,e,n,r){return H_(t,e,n,r),W_(),uh}var hV=(t,e,n,r,i)=>(TC(!0),AM(e[dn],r,wC()));var Cl="en-US";var pV=Cl;function g1(t){typeof t=="string"&&(pV=t.toLowerCase().replace(/_/g,"-"))}function Z_(t,e,n,r){J3(t,W3(e,n,r))}function q_(t=1){kf(yC()+t)}var mV=(()=>{class t{zone=te(ze);changeDetectionScheduler=te(cn);applicationRef=te(Pn);applicationErrorHandler=te(Ei);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),v1=new ae("",{factory:()=>!1});function X_({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ze(S(v({},Y_()),{scheduleInRootZone:n})),[{provide:ze,useFactory:t},{provide:Ao,multi:!0,useFactory:()=>{let r=te(mV,{optional:!0});return()=>r.initialize()}},{provide:Ao,multi:!0,useFactory:()=>{let r=te(gV);return()=>{r.initialize()}}},e===!0?{provide:Wy,useValue:!0}:[],{provide:Zy,useValue:n??a1},{provide:Ei,useFactory:()=>{let r=te(ze),i=te(wt),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(kt),o.handleError(s))})}}}]}function J_(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=X_({ngZoneFactory:()=>{let i=Y_(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&L_("NgZone_CoalesceEvent"),new ze(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return al([{provide:v1,useValue:!0},{provide:ml,useValue:!1},r])}function Y_(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var gV=(()=>{class t{subscription=new gt;initialized=!1;zone=te(ze);pendingTasks=te(wi);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ze.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ze.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var y1=(()=>{class t{applicationErrorHandler=te(Ei);appRef=te(Pn);taskService=te(wi);ngZone=te(ze);zonelessEnabled=te(ml);tracing=te(Sl,{optional:!0});disableScheduling=te(Wy,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new gt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(th):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(te(Zy,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof nh||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?XC:c1;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(th+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,XC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ce({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function vV(){return typeof $localize<"u"&&$localize.locale||Cl}var K_=new ae("",{providedIn:"root",factory:()=>te(K_,{optional:!0,skipSelf:!0})||vV()});var dh=class{destroyed=!1;listeners=null;errorHandler=te(kt,{optional:!0});destroyRef=te(nr);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new re(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed){console.warn(xo(953,!1));return}if(this.listeners===null)return;let n=ce(null);try{for(let r of this.listeners)try{r(e)}catch(i){this.errorHandler?.handleError(i)}}finally{ce(n)}}};function eb(t){return t.destroyRef}function Ml(t){return RS(t)}function aa(t,e){return Qc(t,e?.equal)}var Q_=class{[ut];constructor(e){this[ut]=e}destroy(){this[ut].destroy()}};function Bo(t,e){let n=e?.injector??te(St),r=e?.manualCleanup!==!0?n.get(nr):null,i,o=n.get(gl,null,{optional:!0}),s=n.get(cn);return o!==null?(i=bV(o.view,s,t),r instanceof ol&&r._lView===o.view&&(r=null)):i=xV(t,n.get(yl),s),i.injector=n,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Q_(i)}var _1=S(v({},NS),{cleanupFns:void 0,zone:null,onDestroyFn:Do,run(){let t=na(!1);try{OS(this)}finally{na(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=ce(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],ce(t)}}}),yV=S(v({},_1),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){uo(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),_V=S(v({},_1),{consumerMarkedDirty(){this.view[se]|=8192,Co(this.view),this.notifier.notify(13)},destroy(){uo(this),this.onDestroyFn(),this.cleanup(),this.view[jr]?.delete(this)}});function bV(t,e,n){let r=Object.create(_V);return r.view=t,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=b1(r,n),t[jr]??=new Set,t[jr].add(r),r.consumerMarkedDirty(r),r}function xV(t,e,n){let r=Object.create(yV);return r.fn=b1(r,t),r.scheduler=e,r.notifier=n,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function b1(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}var A1=Symbol("InputSignalNode#UNSET"),MV=S(v({},Kd),{transformFn:void 0,applyValueToInputSignal(t,e){Fs(t,e)}});function I1(t,e){let n=Object.create(MV);n.value=t,n.transformFn=e?.transform;function r(){if(Os(n),n.value===A1){let i=null;throw new re(-950,i)}return n.value}return r[ut]=n,r}var DV=new ae("");DV.__NG_ELEMENT_ID__=t=>{let e=Dn();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new re(204,!1)};function ca(t){return new dh}function x1(t,e){return I1(t,e)}function PV(t){return I1(A1,t)}var Gr=(x1.required=PV,x1);function E1(t,e){return i1(e)}function RV(t,e){return o1(e)}var T1=(E1.required=RV,E1);var tb=new ae(""),NV=new ae("");function Dl(t){return!t.moduleRef}function OV(t){let e=Dl(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ze);return n.run(()=>{Dl(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Ei),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Dl(t)){let o=()=>e.destroy(),s=t.platformInjector.get(tb);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(tb);s.add(o),t.moduleRef.onDestroy(()=>{bl(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return BV(r,n,()=>{let o=e.get(wi),s=o.add(),a=e.get(V_);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(K_,Cl);if(g1(c||Cl),!e.get(NV,!0))return Dl(t)?e.get(Pn):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Dl(t)){let u=e.get(Pn);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return LV?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var LV;function BV(t,e,n){try{let r=n();return z_(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var fh=null;function kV(t=[],e){return St.create({name:e,providers:[{provide:cl,useValue:"platform"},{provide:tb,useValue:new Set([()=>fh=null])},...t]})}function FV(t=[]){if(fh)return fh;let e=kV(t);return fh=e,p1(),jV(e),e}function jV(t){let e=t.get(ih,null);vi(t,()=>{e?.forEach(n=>n())})}var S1=(()=>{class t{static __NG_ELEMENT_ID__=UV}return t})();function UV(t){return zV(Dn(),Zt(),(t&16)===16)}function zV(t,e,n){if(Ks(t)&&!n){let r=zr(t.index,e);return new Ai(r,r)}else if(t.type&175){let r=e[fn];return new Ai(r,e)}return null}function C1(t){Ne(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=FV(r),o=[X_({}),{provide:cn,useExisting:y1},CC,...n||[]],s=new Il({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return OV({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{Ne(9)}}function M1(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function hh(t,e=NaN){return!isNaN(parseFloat(t))&&!isNaN(Number(t))?Number(t):e}function D1(t,e){let n=kr(t),r=e.elementInjector||qs();return new No(n).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}function P1(t){let e=kr(t);if(!e)return null;let n=new No(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}function Pl(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ko=class{};var da=class{},Rl=class{},Ii=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var gh=class{encodeKey(e){return R1(e)}encodeValue(e){return R1(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function VV(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var $V=/%(\d[a-f0-9])/gi,GV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function R1(t){return encodeURIComponent(t).replace($V,(e,n)=>GV[n]??e)}function mh(t){return`${t}`}var Hr=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new gh,e.fromString){if(e.fromObject)throw new re(2805,!1);this.map=VV(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(mh):[mh(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(mh(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(mh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var vh=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function HV(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function N1(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function O1(t){return typeof Blob<"u"&&t instanceof Blob}function L1(t){return typeof FormData<"u"&&t instanceof FormData}function WV(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var B1="Content-Type",k1="Accept",F1="X-Request-URL",j1="text/plain",U1="application/json",ZV=`${U1}, ${j1}, */*`,la=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(HV(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new re(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new Ii,this.context??=new vh,!this.params)this.params=new Hr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||N1(this.body)||O1(this.body)||L1(this.body)||WV(this.body)?this.body:this.body instanceof Hr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||L1(this.body)?null:O1(this.body)?this.body.type||null:N1(this.body)?null:typeof this.body=="string"?j1:this.body instanceof Hr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?U1:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,l=e.redirect||this.redirect,u=e.credentials||this.credentials,d=e.referrer||this.referrer,f=e.integrity||this.integrity,h=e.transferCache??this.transferCache,p=e.timeout??this.timeout,g=e.body!==void 0?e.body:this.body,y=e.withCredentials??this.withCredentials,_=e.reportProgress??this.reportProgress,E=e.headers||this.headers,A=e.params||this.params,I=e.context??this.context;return e.setHeaders!==void 0&&(E=Object.keys(e.setHeaders).reduce((C,D)=>C.set(D,e.setHeaders[D]),E)),e.setParams&&(A=Object.keys(e.setParams).reduce((C,D)=>C.set(D,e.setParams[D]),A)),new t(n,r,g,{params:A,headers:E,context:I,reportProgress:_,responseType:i,withCredentials:y,transferCache:h,keepalive:o,cache:a,priority:s,timeout:p,mode:c,redirect:l,credentials:u,referrer:d,integrity:f})}},Fo=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(Fo||{}),fa=class{headers;status;statusText;url;ok;type;redirected;constructor(e,n=200,r="OK"){this.headers=e.headers||new Ii,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},yh=class t extends fa{constructor(e={}){super(e)}type=Fo.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Nl=class t extends fa{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Fo.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},ua=class extends fa{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},qV=200,XV=204;function nb(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer}}var bh=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof la)o=n;else{let c;i.headers instanceof Ii?c=i.headers:c=new Ii(i.headers);let l;i.params&&(i.params instanceof Hr?l=i.params:l=new Hr({fromObject:i.params})),o=new la(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let s=pi(o).pipe(Qv(c=>this.handler.handle(c)));if(n instanceof la||i.observe==="events")return s;let a=s.pipe(Hs(c=>c instanceof Nl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(yt(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new re(2806,!1);return c.body}));case"blob":return a.pipe(yt(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new re(2807,!1);return c.body}));case"text":return a.pipe(yt(c=>{if(c.body!==null&&typeof c.body!="string")throw new re(2808,!1);return c.body}));case"json":default:return a.pipe(yt(c=>c.body))}case"response":return a;default:throw new re(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Hr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,nb(i,r))}post(n,r,i={}){return this.request("POST",n,nb(i,r))}put(n,r,i={}){return this.request("PUT",n,nb(i,r))}static \u0275fac=function(r){return new(r||t)(he(da))};static \u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();var JV=new ae("");function YV(t,e){return e(t)}function KV(t,e,n){return(r,i)=>vi(n,()=>e(r,o=>t(o,i)))}var z1=new ae(""),V1=new ae(""),$1=new ae("",{providedIn:"root",factory:()=>!0});var _h=(()=>{class t extends da{backend;injector;chain=null;pendingTasks=te(vl);contributeToStability=te($1);constructor(n,r){super(),this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(z1),...this.injector.get(V1,[])]));this.chain=r.reduceRight((i,o)=>KV(i,o,this.injector),YV)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(ny(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(he(Rl),he(wt))};static \u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();var QV=/^\)\]\}',?\n/,e$=RegExp(`^${F1}:`,"m");function t$(t){return"responseURL"in t&&t.responseURL?t.responseURL:e$.test(t.getAllResponseHeaders())?t.getResponseHeader(F1):null}var rb=(()=>{class t{xhrFactory;constructor(n){this.xhrFactory=n}handle(n){if(n.method==="JSONP")throw new re(-2800,!1);let r=this.xhrFactory;return pi(null).pipe(Lr(()=>new Ae(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((y,_)=>s.setRequestHeader(y,_.join(","))),n.headers.has(k1)||s.setRequestHeader(k1,ZV),!n.headers.has(B1)){let y=n.detectContentTypeHeader();y!==null&&s.setRequestHeader(B1,y)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let y=n.responseType.toLowerCase();s.responseType=y!=="json"?y:"text"}let a=n.serializeBody(),c=null,l=()=>{if(c!==null)return c;let y=s.statusText||"OK",_=new Ii(s.getAllResponseHeaders()),E=t$(s)||n.url;return c=new yh({headers:_,status:s.status,statusText:y,url:E}),c},u=()=>{let{headers:y,status:_,statusText:E,url:A}=l(),I=null;_!==XV&&(I=typeof s.response>"u"?s.responseText:s.response),_===0&&(_=I?qV:0);let C=_>=200&&_<300;if(n.responseType==="json"&&typeof I=="string"){let D=I;I=I.replace(QV,"");try{I=I!==""?JSON.parse(I):null}catch(F){I=D,C&&(C=!1,I={error:F,text:I})}}C?(o.next(new Nl({body:I,headers:y,status:_,statusText:E,url:A||void 0})),o.complete()):o.error(new ua({error:I,headers:y,status:_,statusText:E,url:A||void 0}))},d=y=>{let{url:_}=l(),E=new ua({error:y,status:s.status||0,statusText:s.statusText||"Unknown Error",url:_||void 0});o.error(E)},f=d;n.timeout&&(f=y=>{let{url:_}=l(),E=new ua({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:_||void 0});o.error(E)});let h=!1,p=y=>{h||(o.next(l()),h=!0);let _={type:Fo.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(_.total=y.total),n.responseType==="text"&&s.responseText&&(_.partialText=s.responseText),o.next(_)},g=y=>{let _={type:Fo.UploadProgress,loaded:y.loaded};y.lengthComputable&&(_.total=y.total),o.next(_)};return s.addEventListener("load",u),s.addEventListener("error",d),s.addEventListener("timeout",f),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",g)),s.send(a),o.next({type:Fo.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",u),s.removeEventListener("timeout",f),n.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",g)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(he(ko))};static \u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})(),G1=new ae(""),n$="XSRF-TOKEN",r$=new ae("",{providedIn:"root",factory:()=>n$}),i$="X-XSRF-TOKEN",o$=new ae("",{providedIn:"root",factory:()=>i$}),Ol=class{},s$=(()=>{class t{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(n,r){this.doc=n,this.cookieName=r}getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Pl(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)(he(qt),he(r$))};static \u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();function a$(t,e){let n=t.url.toLowerCase();if(!te(G1)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=te(Ol).getToken(),i=te(o$);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function ib(...t){let e=[bh,rb,_h,{provide:da,useExisting:_h},{provide:Rl,useFactory:()=>te(JV,{optional:!0})??te(rb)},{provide:z1,useValue:a$,multi:!0},{provide:G1,useValue:!0},{provide:Ol,useClass:s$}];for(let n of t)e.push(...n.\u0275providers);return al(e)}var c$={schedule(t,e){let n=setTimeout(t,e);return()=>clearTimeout(n)}};function l$(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function u$(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}var ob;function d$(t,e){if(!ob){let n=Element.prototype;ob=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE?ob.call(t,e):!1}function f$(t){let e={};return t.forEach(({propName:n,templateName:r,transform:i})=>{e[l$(r)]=[n,i]}),e}function h$(t,e){return e.get(Lo).resolveComponentFactory(t).inputs}function p$(t,e){let n=t.childNodes,r=e.map(()=>[]),i=-1;e.some((o,s)=>o==="*"?(i=s,!0):!1);for(let o=0,s=n.length;o<s;++o){let a=n[o],c=m$(a,e,i);c!==-1&&r[c].push(a)}return r}function m$(t,e,n){let r=n;return u$(t)&&e.some((i,o)=>i!=="*"&&d$(t,i)?(r=o,!0):!1),r}var g$=10,sb=class{componentFactory;inputMap=new Map;constructor(e,n){this.componentFactory=n.get(Lo).resolveComponentFactory(e);for(let r of this.componentFactory.inputs)this.inputMap.set(r.propName,r.templateName)}create(e){return new ab(this.componentFactory,e,this.inputMap)}},ab=class{componentFactory;injector;inputMap;eventEmitters=new hi(1);events=this.eventEmitters.pipe(Lr(e=>tl(...e)));componentRef=null;scheduledDestroyFn=null;initialInputValues=new Map;ngZone;elementZone;appRef;cdScheduler;constructor(e,n,r){this.componentFactory=e,this.injector=n,this.inputMap=r,this.ngZone=this.injector.get(ze),this.appRef=this.injector.get(Pn),this.cdScheduler=n.get(cn),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(this.scheduledDestroyFn!==null){this.scheduledDestroyFn(),this.scheduledDestroyFn=null;return}this.componentRef===null&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{this.componentRef===null||this.scheduledDestroyFn!==null||(this.scheduledDestroyFn=c$.schedule(()=>{this.componentRef!==null&&(this.componentRef.destroy(),this.componentRef=null)},g$))})}getInputValue(e){return this.runInZone(()=>this.componentRef===null?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,n){if(this.componentRef===null){this.initialInputValues.set(e,n);return}this.runInZone(()=>{this.componentRef.setInput(this.inputMap.get(e)??e,n),R_(this.componentRef.hostView)&&(N_(this.componentRef.changeDetectorRef),this.cdScheduler.notify(6))})}initializeComponent(e){let n=St.create({providers:[],parent:this.injector}),r=p$(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(n,r,e),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.appRef.attachView(this.componentRef.hostView),this.componentRef.hostView.detectChanges()}initializeInputs(){for(let[e,n]of this.initialInputValues)this.setInputValue(e,n);this.initialInputValues.clear()}initializeOutputs(e){let n=this.componentFactory.outputs.map(({propName:r,templateName:i})=>{let o=e.instance[r];return new Ae(s=>{let a=o.subscribe(c=>s.next({name:i,value:c}));return()=>a.unsubscribe()})});this.eventEmitters.next(n)}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}},cb=class extends HTMLElement{ngElementEventsSubscription=null};function H1(t,e){let n=h$(t,e.injector),r=e.strategyFactory||new sb(t,e.injector),i=f$(n);class o extends cb{injector;static observedAttributes=Object.keys(i);get ngElementStrategy(){if(!this._ngElementStrategy){let a=this._ngElementStrategy=r.create(this.injector||e.injector);n.forEach(({propName:c,transform:l})=>{if(!this.hasOwnProperty(c))return;let u=this[c];delete this[c],a.setInputValue(c,u,l)})}return this._ngElementStrategy}_ngElementStrategy;constructor(a){super(),this.injector=a}attributeChangedCallback(a,c,l,u){let[d,f]=i[a];this.ngElementStrategy.setInputValue(d,l,f)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{let c=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(c)})}}return n.forEach(({propName:s,transform:a})=>{Object.defineProperty(o.prototype,s,{get(){return this.ngElementStrategy.getInputValue(s)},set(c){this.ngElementStrategy.setInputValue(s,c,a)},configurable:!0,enumerable:!0})}),o}var W1=null;function Bl(){return W1}function lb(t){W1??=t}var Ll=class{};var Z1="browser";var Eh=new ae(""),pb=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new re(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(he(Eh),he(ze))};static \u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})(),kl=class{_doc;constructor(e){this._doc=e}manager},ub="ng-app-id";function q1(t){for(let e of t)e.remove()}function X1(t,e){let n=e.createElement("style");return n.textContent=t,n}function v$(t,e,n,r){let i=t.head?.querySelectorAll(`style[${ub}="${e}"],link[${ub}="${e}"]`);if(i)for(let o of i)o.removeAttribute(ub),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function fb(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var mb=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,v$(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,X1);r?.forEach(i=>this.addUsage(i,this.external,fb))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(q1(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])q1(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,X1(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,fb(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(he(qt),he(rh),he(oh,8),he(sa))};static \u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})(),db={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gb=/%COMP%/g;var Y1="%COMP%",y$=`_nghost-${Y1}`,_$=`_ngcontent-${Y1}`,b$=!0,x$=new ae("",{providedIn:"root",factory:()=>b$});function E$(t){return _$.replace(gb,t)}function w$(t){return y$.replace(gb,t)}function K1(t,e){return e.map(n=>n.replace(gb,t))}var vb=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;animationDisabled;maxAnimationTimeout;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;registry;constructor(n,r,i,o,s,a,c,l=null,u,d,f=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.animationDisabled=u,this.maxAnimationTimeout=d,this.tracingService=f,this.platformIsServer=!1,this.defaultRenderer=new Fl(n,s,c,this.platformIsServer,this.tracingService,this.registry=Uf(),this.maxAnimationTimeout)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof xh?i.applyToHost(n):i instanceof jl&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case $r.Emulated:o=new xh(c,l,r,this.appId,u,s,a,d,f,this.registry,this.animationDisabled,this.maxAnimationTimeout);break;case $r.ShadowDom:return new hb(c,l,n,r,s,a,this.nonce,d,f,this.registry,this.maxAnimationTimeout);default:o=new jl(c,l,r,u,s,a,d,f,this.registry,this.animationDisabled,this.maxAnimationTimeout);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(he(pb),he(mb),he(rh),he(x$),he(qt),he(sa),he(ze),he(oh),he($_),he(G_),he(Sl,8))};static \u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})(),Fl=class{eventManager;doc;ngZone;platformIsServer;tracingService;registry;maxAnimationTimeout;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o,s,a){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o,this.registry=s,this.maxAnimationTimeout=a}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(db[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(J1(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(J1(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){let{elements:r}=this.registry;if(r){r.animate(n,()=>n.remove(),this.maxAnimationTimeout);return}n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=db[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=db[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Oo.DashCase|Oo.Important)?e.style.setProperty(n,r,i&Oo.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Oo.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Bl().getGlobalEventTarget(this.doc,e),!e))throw new re(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function J1(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var hb=class extends Fl{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,c,l,u,d){super(e,o,s,c,l,u,d),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=K1(i.id,f);for(let p of f){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}let h=i.getExternalStyles?.();if(h)for(let p of h){let g=fb(p,o);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},jl=class extends Fl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;_animationDisabled;constructor(e,n,r,i,o,s,a,c,l,u,d,f){super(e,o,s,a,c,l,d),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this._animationDisabled=u;let h=r.styles;this.styles=f?K1(f,h):h,this.styleUrls=r.getExternalStyles?.(f)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){if(this.removeStylesOnCompDestroy){if(!this._animationDisabled&&this.registry.elements){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)},this.maxAnimationTimeout)});return}this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}},xh=class extends jl{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,c,l,u,d,f){let h=i+"-"+r.id;super(e,n,r,o,s,a,c,l,u,d,f,h),this.contentAttr=E$(h),this.hostAttr=w$(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var wh=class t extends Ll{supportsDOMEvents=!0;static makeCurrent(){lb(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=A$();return n==null?null:I$(n)}resetBaseElement(){Ul=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Pl(document.cookie,e)}},Ul=null;function A$(){return Ul=Ul||document.head.querySelector("base"),Ul?Ul.getAttribute("href"):null}function I$(t){return new URL(t,document.baseURI).pathname}var T$=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})(),eD=(()=>{class t extends kl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(he(qt))};static \u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})(),Q1=["alt","control","meta","shift"],S$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},C$={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},tD=(()=>{class t extends kl{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bl().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Q1.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=S$[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Q1.forEach(s=>{if(s!==i){let a=C$[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(he(qt))};static \u0275prov=Ce({token:t,factory:t.\u0275fac})}return t})();function yb(t){return C1(M$(t))}function M$(t){return{appProviders:[...O$,...t?.providers??[]],platformProviders:N$}}function D$(){wh.makeCurrent()}function P$(){return new kt}function R$(){return w_(document),document}var N$=[{provide:sa,useValue:Z1},{provide:ih,useValue:D$,multi:!0},{provide:qt,useFactory:R$}];var O$=[{provide:cl,useValue:"root"},{provide:kt,useFactory:P$},{provide:Eh,useClass:eD,multi:!0,deps:[qt]},{provide:Eh,useClass:tD,multi:!0,deps:[qt]},vb,mb,pb,{provide:Ro,useExisting:vb},{provide:ko,useClass:T$},[]];function nD(t){let e=eb(t);return new Ae(n=>{let r=e?.onDestroy(()=>n.complete()),i=t.subscribe(o=>n.next(o));return()=>{i.unsubscribe(),r?.()}})}var zl={schedule(t,e){let n=setTimeout(t,e);return()=>clearTimeout(n)},scheduleBeforeRender(t){if(typeof window>"u")return zl.schedule(t,0);if(typeof window.requestAnimationFrame>"u")return zl.schedule(t,16);let e=window.requestAnimationFrame(t);return()=>window.cancelAnimationFrame(e)}};function rD(t){return!!t&&t.nodeType===Node.ELEMENT_NODE}var _b;function iD(t,e){if(!_b){let n=Element.prototype;_b=n.matches||n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}return t.nodeType===Node.ELEMENT_NODE?_b.call(t,e):!1}function oD(t,e){return t===e||t!==t&&e!==e}function sD(t,e){let n=t.childNodes,r=e.map(()=>[]),i=-1;e.some((o,s)=>o==="*"?(i=s,!0):!1);for(let o=0,s=n.length;o<s;++o){let a=n[o],c=L$(a,e,i);c!==-1&&r[c].push(a)}return r}function L$(t,e,n){let r=n;return rD(t)&&e.some((i,o)=>i!=="*"&&iD(t,i)?(r=o,!0):!1),r}var B$=10,Ah=class{constructor(e){this.component=e}create(e){return new bb(this.component,e)}},bb=class{constructor(e,n){this.component=e,this.injector=n,this.eventEmitters=new hi(1),this.events=this.eventEmitters.pipe(Lr(r=>tl(...r))),this.componentRef=null,this.viewChangeDetectorRef=null,this.hasInputChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.componentMirror=P1(this.component),this.unchangedInputs=new Set(this.componentMirror.inputs.map(({propName:r})=>r)),this.ngZone=this.injector.get(ze),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(this.scheduledDestroyFn!==null){this.scheduledDestroyFn(),this.scheduledDestroyFn=null;return}this.componentRef===null&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{this.componentRef===null||this.scheduledDestroyFn!==null||(this.scheduledDestroyFn=zl.schedule(()=>{this.componentRef!==null&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},B$))})}getInputValue(e){return this.runInZone(()=>{if(this.componentRef===null)return this.initialInputValues.get(e);let n=this.componentRef.instance[e];return zf(n)?n():n})}setInputValue(e,n,r){this.runInZone(()=>{if(r&&(n=r.call(this.componentRef?.instance,n)),this.componentRef===null){this.initialInputValues.set(e,n);return}oD(n,this.getInputValue(e))&&!(n===void 0&&this.unchangedInputs.has(e))||(this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.setInput(e,n),this.scheduleDetectChanges())})}initializeComponent(e){let n=this.injector.get(wt),r=St.create({providers:[],parent:this.injector}),i=sD(e,[...this.componentMirror.ngContentSelectors]);this.componentRef=D1(this.component,{environmentInjector:n,elementInjector:r,projectableNodes:i,hostElement:e}),this.viewChangeDetectorRef=this.componentRef.injector.get(S1),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(Pn).attachView(this.componentRef.hostView)}initializeInputs(){this.componentMirror.inputs.forEach(({propName:e,transform:n})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),n)}),this.initialInputValues.clear()}initializeOutputs(e){let n=this.componentMirror.outputs.map(({propName:r,templateName:i})=>{let o=e.instance[r];return($s(o)?o:nD(o)).pipe(yt(a=>({name:i,value:a})))});this.eventEmitters.next(n)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=zl.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}detectChanges(){this.componentRef!==null&&(this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}};function k$(t,e){class n extends t{get instance(){return this.ngElementStrategy.componentRef?.instance}whenStable(){return R(this,null,function*(){let i=e.get(Pn);yield Yv(i.isStable.pipe(Hs(o=>o)))})}}return n}function aD(t,e,n){return R(this,null,function*(){let{injector:r}=yield yb(n),i=new Ah(e),o=H1(e,{injector:r,strategyFactory:i}),s=k$(o,r);return customElements.define(t,s),s})}function Ih(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var ir={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},F$=ir.self||ir.window||ir.global||{},j$=ir.window||ir.self||ir.global||{},U$=ir.global||ir.self||ir.window||{},z$=ir.document||{};var Vl=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser);var cD=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),V$=cD&&parseFloat(cD[1])||0;var lD="3.2.13";function ft(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}var or={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},Rge=or.self||or.window||or.global||{},Nge=or.window||or.self||or.global||{},dD=or.global||or.self||or.window||{},Oge=or.document||{};var Rn=typeof process!="object"||String(process)!=="[object process]"||process.browser,$l=typeof importScripts=="function",fD=typeof window<"u"&&typeof window.orientation<"u",uD=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),Lge=uD&&parseFloat(uD[1])||0;function jo(t){"@babel/helpers - typeof";return jo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jo(t)}function hD(t,e){if(jo(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(jo(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pD(t){var e=hD(t,"string");return jo(e)=="symbol"?e:e+""}function m(t,e,n){return(e=pD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Th=class{constructor(e,n){m(this,"name",void 0),m(this,"workerThread",void 0),m(this,"isRunning",!0),m(this,"result",void 0),m(this,"_resolve",()=>{}),m(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){ft(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){ft(this.isRunning),this.isRunning=!1,this._reject(e)}};var ha=class{};var xb=new Map;function mD(t){ft(t.source&&!t.url||!t.source&&t.url);let e=xb.get(t.source||t.url);return e||(t.url&&(e=$$(t.url),xb.set(t.url,e)),t.source&&(e=gD(t.source),xb.set(t.source,e))),ft(e),e}function $$(t){if(!t.startsWith("http"))return t;let e=G$(t);return gD(e)}function gD(t){let e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function G$(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function Eb(t,e=!0,n){let r=n||new Set;if(t){if(vD(t))r.add(t);else if(vD(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(let i in t)Eb(t[i],e,r)}}return n===void 0?Array.from(r):[]}function vD(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}var wb=()=>{},Uo=class{static isSupported(){return typeof Worker<"u"&&Rn||typeof ha<"u"&&!Rn}constructor(e){m(this,"name",void 0),m(this,"source",void 0),m(this,"url",void 0),m(this,"terminated",!1),m(this,"worker",void 0),m(this,"onMessage",void 0),m(this,"onError",void 0),m(this,"_loadableURL","");let{name:n,source:r,url:i}=e;ft(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=wb,this.onError=o=>console.log(o),this.worker=Rn?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=wb,this.onError=wb,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||Eb(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=mD({source:this.source,url:this.url});let e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){let r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new ha(r,{eval:!1})}else if(this.source)e=new ha(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}};var Sh=class{static isSupported(){return Uo.isSupported()}constructor(e){m(this,"name","unnamed"),m(this,"source",void 0),m(this,"url",void 0),m(this,"maxConcurrency",1),m(this,"maxMobileConcurrency",1),m(this,"onDebug",()=>{}),m(this,"reuseWorkers",!0),m(this,"props",{}),m(this,"jobQueue",[]),m(this,"idleQueue",[]),m(this,"count",0),m(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props=v(v({},this.props),e),e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}startJob(e,n=(i,o,s)=>i.done(s),r=(i,o)=>i.error(o)){return R(this,null,function*(){let i=new Promise(o=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:o}),this));return this._startQueuedJob(),yield i})}_startQueuedJob(){return R(this,null,function*(){if(!this.jobQueue.length)return;let e=this._getAvailableWorker();if(!e)return;let n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});let r=new Th(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{yield r.result}finally{this.returnWorkerToQueue(e)}}})}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;let e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Uo({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return fD?this.maxMobileConcurrency:this.maxConcurrency}};var H$={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},zo=class t{static isSupported(){return Uo.isSupported()}static getWorkerFarm(e={}){return t._workerFarm=t._workerFarm||new t({}),t._workerFarm.setProps(e),t._workerFarm}constructor(e){m(this,"props",void 0),m(this,"workerPools",new Map),this.props=v({},H$),this.setProps(e),this.workerPools=new Map}destroy(){for(let e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props=v(v({},this.props),e);for(let n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){let{name:n,source:r,url:i}=e,o=this.workerPools.get(n);return o||(o=new Sh({name:n,source:r,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};m(zo,"_workerFarm",void 0);var W$="latest";function Ab(t,e={}){let n=e[t.id]||{},r="".concat(t.id,"-worker.js"),i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let o=t.version;o==="latest"&&(o=W$);let s=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(s,"/dist/").concat(r)}return ft(i),i}function Ib(t,e=lD){ft(t,"no worker provided");let n=t.version;return!(!e||!n)}var Vo=Ov(yD());var Z$="3.2.13",Tb={};function sr(r){return R(this,arguments,function*(t,e=null,n={}){return e&&(t=_D(t,e,n)),Tb[t]=Tb[t]||q$(t),yield Tb[t]})}function _D(t,e,n){if(t.startsWith("http"))return t;let r=n.modules||{};return r[t]?r[t]:Rn?n.CDN?(ft(n.CDN.startsWith("http")),"".concat(n.CDN,"/").concat(e,"@").concat(Z$,"/dist/libs/").concat(t)):$l?"../src/libs/".concat(t):"modules/".concat(e,"/src/libs/").concat(t):"modules/".concat(e,"/dist/libs/").concat(t)}function q$(t){return R(this,null,function*(){if(t.endsWith("wasm"))return yield(yield fetch(t)).arrayBuffer();if(!Rn)try{return Vo&&void 0&&(yield(void 0)(t))}catch{return null}if($l)return importScripts(t);let n=yield(yield fetch(t)).text();return X$(n,t)})}function X$(t,e){if(!Rn)return void 0&&(void 0)(t,e);if($l)return eval.call(dD,t),null;let n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}function Sb(t,e){return!zo.isSupported()||!Rn&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&e?.worker}function Cb(t,e,n,r,i){return R(this,null,function*(){let o=t.id,s=Ab(t,n),c=zo.getWorkerFarm(n).getWorkerPool({name:o,url:s});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));let l=yield c.startJob("process-on-worker",J$.bind(null,i));return l.postMessage("process",{input:e,options:n,context:r}),yield(yield l.result).result})}function J$(t,e,n,r){return R(this,null,function*(){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":let{id:i,input:o,options:s}=r;try{let a=yield t(o,s);e.postMessage("done",{id:i,result:a})}catch(a){let c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}})}function Mb(t){return t&&typeof t=="object"&&t.isBuffer}function bD(t){return Mb(t)?new Uint8Array(t.buffer,t.byteOffset,t.length).slice().buffer:t}function Ch(t){if(Mb(t))return bD(t);if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){let e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function Db(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;let r=new Uint8Array(t),i=new Uint8Array(e);for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}function Pb(...t){let e=t.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),n=e.reduce((o,s)=>o+s.byteLength,0),r=new Uint8Array(n),i=0;for(let o of e)r.set(o,i),i+=o.byteLength;return r.buffer}function Rb(t){return R(this,null,function*(){let e=[];try{for(var n=Rs(t),r,i,o;r=!(i=yield n.next()).done;r=!1){let s=i.value;e.push(s)}}catch{o=[i]}finally{try{r&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o[0]}}return Pb(...e)})}function Gl(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){let e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}var $o=class{constructor(e,n){m(this,"name",void 0),m(this,"type",void 0),m(this,"sampleSize",1),m(this,"time",void 0),m(this,"count",void 0),m(this,"samples",void 0),m(this,"lastTiming",void 0),m(this,"lastSampleTime",void 0),m(this,"lastSampleCount",void 0),m(this,"_count",0),m(this,"_time",0),m(this,"_samples",0),m(this,"_startTime",0),m(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Gl(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Gl()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}};var ar=class{constructor(e){m(this,"id",void 0),m(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(let e in this.stats)this.stats[e].reset();return this}forEach(e){for(let n in this.stats)e(this.stats[n])}getTable(){let e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;let{name:n,type:r}=e;return this.stats[n]||(e instanceof $o?this.stats[n]=e:this.stats[n]=new $o(n,r)),this.stats[n]}};var Y$="",xD={};function Nb(t){for(let e in xD)if(t.startsWith(e)){let n=xD[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(Y$).concat(t)),t}var Mh={};Tt(Mh,{dirname:()=>Q$,filename:()=>K$,join:()=>eG});function K$(t){let e=t&&t.lastIndexOf("/");return e>=0?t.substr(e+1):""}function Q$(t){let e=t&&t.lastIndexOf("/");return e>=0?t.substr(0,e):""}function eG(...t){return t=t.map((n,r)=>(r&&(n=n.replace(new RegExp("^".concat("/")),"")),r!==t.length-1&&(n=n.replace(new RegExp("".concat("/","$")),"")),n)),t.join("/")}var tG=t=>typeof t=="boolean",Hl=t=>typeof t=="function",pa=t=>t!==null&&typeof t=="object",Ob=t=>pa(t)&&t.constructor==={}.constructor;var ED=t=>t&&typeof t[Symbol.iterator]=="function",wD=t=>t&&typeof t[Symbol.asyncIterator]=="function";var Nn=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json;var On=t=>typeof Blob<"u"&&t instanceof Blob,AD=t=>t&&typeof t=="object"&&t.isBuffer;var nG=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||pa(t)&&Hl(t.tee)&&Hl(t.cancel)&&Hl(t.getReader);var rG=t=>pa(t)&&Hl(t.read)&&Hl(t.pipe)&&tG(t.readable),Dh=t=>nG(t)||rG(t);var iG=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,oG=/^([-\w.]+\/[-\w.+]+)/;function ID(t){let e=oG.exec(t);return e?e[1]:t}function Lb(t){let e=iG.exec(t);return e?e[1]:""}var sG=/\?.*/;function Go(t){if(Nn(t)){let e=Bb(t.url||""),n=t.headers.get("content-type")||"";return{url:e,type:ID(n)||Lb(e)}}return On(t)?{url:Bb(t.name||""),type:t.type||""}:typeof t=="string"?{url:Bb(t),type:Lb(t)}:{url:"",type:""}}function TD(t){return Nn(t)?t.headers["content-length"]||-1:On(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}function Bb(t){return t.replace(sG,"")}function Ph(t){return R(this,null,function*(){if(Nn(t))return t;let e={},n=TD(t);n>=0&&(e["content-length"]=String(n));let{url:r,type:i}=Go(t);i&&(e["content-type"]=i);let o=yield cG(t);o&&(e["x-first-bytes"]=o),typeof t=="string"&&(t=new TextEncoder().encode(t));let s=new Response(t,{headers:e});return Object.defineProperty(s,"url",{value:r}),s})}function SD(t){return R(this,null,function*(){if(!t.ok){let e=yield aG(t);throw new Error(e)}})}function aG(t){return R(this,null,function*(){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{let n=t.headers.get("Content-Type"),r=t.statusText;n.includes("application/json")&&(r+=" ".concat(yield t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e})}function cG(t){return R(this,null,function*(){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){let n=t.slice(0,5);return yield new Promise(r=>{let i=new FileReader;i.onload=o=>{var s;return r(o==null||(s=o.target)===null||s===void 0?void 0:s.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){let n=t.slice(0,5),r=lG(n);return"data:base64,".concat(r)}return null})}function lG(t){let e="",n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function kb(t,e){return R(this,null,function*(){if(typeof t=="string"){t=Nb(t);let n=e;return e!=null&&e.fetch&&typeof e?.fetch!="function"&&(n=e.fetch),yield fetch(t,n)}return yield Ph(t)})}function Wl(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;let e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function rt(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||Wl()}var Ti={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process};var uG=Ti.self||Ti.window||Ti.global,ma=Ti.window||Ti.self||Ti.global,dG=Ti.document||{},Ho=Ti.process||{};var Rh=typeof __VERSION__<"u"?__VERSION__:"untranspiled source",Nye=rt();var Fb=globalThis;function ga(t){if(!t&&!rt())return"Node";if(Wl(t))return"Electron";let n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";let r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":Fb.chrome?"Chrome":Fb.safari?"Safari":Fb.mozInnerScreenX?"Firefox":"Unknown"}function fG(t){try{let e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}var Nh=class{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";m(this,"storage",void 0),m(this,"id",void 0),m(this,"config",void 0),this.storage=fG(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){let n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){let n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function CD(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function MD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8,n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function Oh(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600,i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));let o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}var Lh;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Lh||(Lh={}));function DD(t){return typeof t=="string"?Lh[t.toUpperCase()]||Lh.WHITE:t}function PD(t,e,n){return!rt&&typeof t=="string"&&(e&&(e=DD(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=DD(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function RD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"],n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(let i of r)typeof t[i]=="function"&&(e.find(o=>i===o)||(t[i]=t[i].bind(t)))}function va(t,e){if(!t)throw new Error(e||"Assertion failed")}function Wo(){let t;if(rt&&"performance"in ma){var e,n;t=ma===null||ma===void 0||(e=ma.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in Ho){var r;let i=Ho===null||Ho===void 0||(r=Ho.hrtime)===null||r===void 0?void 0:r.call(Ho);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}var ya={debug:rt&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},hG={enabled:!0,level:0};function hn(){}var ND={},OD={once:!0},Mt=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};m(this,"id",void 0),m(this,"VERSION",Rh),m(this,"_startTs",Wo()),m(this,"_deltaTs",Wo()),m(this,"_storage",void 0),m(this,"userData",{}),m(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new Nh("__probe-".concat(this.id,"__"),hG),this.timeStamp("".concat(this.id," started")),RD(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Wo()-this._startTs).toPrecision(10))}getDelta(){return Number((Wo()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){va(e,n)}warn(e){return this._getLogFunction(0,e,ya.warn,arguments,OD)}error(e){return this._getLogFunction(0,e,ya.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,ya.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,ya.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return this._getLogFunction(e,n,ya.debug||ya.info,arguments,OD)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||hn,r&&[r],{tag:vG(n)}):hn}image(e){let{logLevel:n,priority:r,image:i,message:o="",scale:s=1}=e;return this._shouldLog(n||r)?rt?gG({image:i,message:o,scale:s}):mG({image:i,message:o,scale:s}):hn}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||hn)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1},i=LD({logLevel:e,message:n,opts:r}),{collapsed:o}=r;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||hn)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=BD(e)}_getLogFunction(e,n,r,i,o){if(this._shouldLog(e)){o=LD({logLevel:e,message:n,args:i,opts:o}),r=r||o.method,va(r),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Wo();let s=o.tag||o.message;if(o.once)if(!ND[s])ND[s]=Wo();else return hn;return n=pG(this.id,o.message,o),r.bind(console,n,...o.args)}return hn}};m(Mt,"VERSION",Rh);function BD(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return va(Number.isFinite(e)&&e>=0),e}function LD(t){let{logLevel:e,message:n}=t;t.logLevel=BD(e);let r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break;default:}typeof t.message=="function"&&(t.message=t.message());let i=typeof t.message;return va(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function pG(t,e,n){if(typeof e=="string"){let r=n.time?MD(CD(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=PD(e,n.color,n.background)}return e}function mG(t){let{image:e,message:n="",scale:r=1}=t;return console.warn("removed"),hn}function gG(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){let o=new Image;return o.onload=()=>{let s=Oh(o,n,r);console.log(...s)},o.src=e,hn}let i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...Oh(e,n,r)),hn;if(i.toLowerCase()==="canvas"){let o=new Image;return o.onload=()=>console.log(...Oh(o,n,r)),o.src=e.toDataURL(),hn}return hn}function vG(t){for(let e in t)for(let n in t[e])return n||"untitled";return"empty"}var f_e=new Mt({id:"@probe.gl/log"});var jb=new Mt({id:"loaders.gl"}),Bh=class{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}},kh=class{constructor(){m(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}};var Ub={fetch:null,mimeType:void 0,nothrow:!1,log:new kh,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:Vl,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},kD={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function zb(){globalThis.loaders=globalThis.loaders||{};let{loaders:t}=globalThis;return t._state=t._state||{},t._state}var UD=()=>{let t=zb();return t.globalOptions=t.globalOptions||v({},Ub),t.globalOptions};function zD(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],yG(t,n),bG(e,t,r)}function Fh(t,e){let n=UD(),r=t||n;return typeof r.fetch=="function"?r.fetch:pa(r.fetch)?i=>kb(i,r):e!=null&&e.fetch?e?.fetch:kb}function yG(t,e){FD(t,null,Ub,kD,e);for(let n of e){let r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},o=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};FD(r,n.id,i,o,e)}}function FD(t,e,n,r,i){let o=e||"Top level",s=e?"".concat(e,"."):"";for(let a in t){let c=!e&&pa(t[a]),l=a==="baseUri"&&!e,u=a==="workerUrl"&&e;if(!(a in n)&&!l&&!u){if(a in r)jb.warn("".concat(o," loader option '").concat(s).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!c){let d=_G(a,i);jb.warn("".concat(o," loader option '").concat(s).concat(a,"' not recognized. ").concat(d))()}}}}function _G(t,e){let n=t.toLowerCase(),r="";for(let i of e)for(let o in i.options){if(t===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");let s=o.toLowerCase();(n.startsWith(s)||s.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return r}function bG(t,e,n){let r=t.options||{},i=v({},r);return xG(i,n),i.log===null&&(i.log=new Bh),jD(i,UD()),jD(i,e),i}function jD(t,e){for(let n in e)if(n in e){let r=e[n];Ob(r)&&Ob(t[n])?t[n]=v(v({},t[n]),e[n]):t[n]=e[n]}}function xG(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function Zl(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function ql(t){var e,n;Ih(t,"null loader"),Ih(Zl(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t=S(v({},t),{options:v(v({},t.options),r)})),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}var VD=()=>{let t=zb();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function Xl(t){let e=VD();t=Array.isArray(t)?t:[t];for(let n of t){let r=ql(n);e.find(i=>r===i)||e.unshift(r)}}function $D(){return VD()}var GD=new Mt({id:"loaders.gl"});var EG=/\.([^.]+)$/;function ZD(i){return R(this,arguments,function*(t,e=[],n,r){if(!qD(t))return null;let o=HD(t,e,S(v({},n),{nothrow:!0}),r);if(o)return o;if(On(t)&&(t=yield t.slice(0,10).arrayBuffer(),o=HD(t,e,n,r)),!o&&!(n!=null&&n.nothrow))throw new Error(XD(t));return o})}function HD(t,e=[],n,r){if(!qD(t))return null;if(e&&!Array.isArray(e))return ql(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...$D()),AG(i);let o=wG(t,i,n,r);if(!o&&!(n!=null&&n.nothrow))throw new Error(XD(t));return o}function wG(t,e,n,r){let{url:i,type:o}=Go(t),s=i||r?.url,a=null,c="";if(n!=null&&n.mimeType&&(a=Vb(e,n?.mimeType),c="match forced by supplied MIME type ".concat(n?.mimeType)),a=a||IG(e,s),c=c||(a?"matched url ".concat(s):""),a=a||Vb(e,o),c=c||(a?"matched MIME type ".concat(o):""),a=a||SG(e,t),c=c||(a?"matched initial data ".concat(JD(t)):""),a=a||Vb(e,n?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(o):""),c){var l;GD.log(1,"selectLoader selected ".concat((l=a)===null||l===void 0?void 0:l.name,": ").concat(c,"."))}return a}function qD(t){return!(t instanceof Response&&t.status===204)}function XD(t){let{url:e,type:n}=Go(t),r="No valid loader found (";r+=e?"".concat(Mh.filename(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");let i=t?JD(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function AG(t){for(let e of t)ql(e)}function IG(t,e){let n=e&&EG.exec(e),r=n&&n[1];return r?TG(t,r):null}function TG(t,e){e=e.toLowerCase();for(let n of t)for(let r of n.extensions)if(r.toLowerCase()===e)return n;return null}function Vb(t,e){for(let n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function SG(t,e){if(!e)return null;for(let n of t)if(typeof e=="string"){if(CG(e,n))return n}else if(ArrayBuffer.isView(e)){if(WD(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&WD(e,0,n))return n;return null}function CG(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function WD(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>MG(t,e,n,i))}function MG(t,e,n,r){if(r instanceof ArrayBuffer)return Db(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":let i=$b(t,e,r.length);return r===i;default:return!1}}function JD(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?$b(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?$b(t,0,e):""}function $b(t,e,n){if(t.byteLength<e+n)return"";let r=new DataView(t),i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}function*YD(t,e){let n=e?.chunkSize||262144,r=0,i=new TextEncoder;for(;r<t.length;){let o=Math.min(t.length-r,n),s=t.slice(r,r+o);r+=o,yield i.encode(s)}}function*KD(t,e={}){let{chunkSize:n=262144}=e,r=0;for(;r<t.byteLength;){let i=Math.min(t.byteLength-r,n),o=new ArrayBuffer(i),s=new Uint8Array(t,r,i);new Uint8Array(o).set(s),r+=i,yield o}}function QD(t,e){return Yc(this,null,function*(){let n=e?.chunkSize||1048576,r=0;for(;r<t.size;){let i=r+n,o=yield new ao(t.slice(r,i).arrayBuffer());r=i,yield o}})}function Gb(t,e){return Vl?DG(t,e):PG(t,e)}function DG(t,e){return Yc(this,null,function*(){let n=t.getReader(),r;try{for(;;){let i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());let{done:o,value:s}=yield new ao(i);if(o)return;yield Ch(s)}}catch{n.releaseLock()}})}function PG(t,e){return Yc(this,null,function*(){try{for(var n=Rs(t),r,i,o;r=!(i=yield new ao(n.next())).done;r=!1){let s=i.value;yield Ch(s)}}catch{o=[i]}finally{try{r&&(i=n.return)&&(yield new ao(i.call(n)))}finally{if(o)throw o[0]}}})}function eP(t,e){if(typeof t=="string")return YD(t,e);if(t instanceof ArrayBuffer)return KD(t,e);if(On(t))return QD(t,e);if(Dh(t))return Gb(t,e);if(Nn(t))return Gb(t.body,e);throw new Error("makeIterator")}var tP="Cannot convert supplied data type";function RG(t,e,n){if(e.text&&typeof t=="string")return t;if(AD(t)&&(t=t.buffer),t instanceof ArrayBuffer){let r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer,i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(tP)}function nP(t,e,n){return R(this,null,function*(){let r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return RG(t,e,n);if(On(t)&&(t=yield Ph(t)),Nn(t)){let i=t;return yield SD(i),e.binary?yield i.arrayBuffer():yield i.text()}if(Dh(t)&&(t=eP(t,n)),ED(t)||wD(t))return Rb(t);throw new Error(tP)})}function rP(t,e,n=null){if(n)return n;let r=v({fetch:Fh(e,t)},t);return Array.isArray(r.loaders)||(r.loaders=null),r}function iP(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){let r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}function Zo(t,e,n,r){return R(this,null,function*(){ft(!r||typeof r=="object"),e&&!Array.isArray(e)&&!Zl(e)&&(r=void 0,n=e,e=void 0),t=yield t,n=n||{};let{url:i}=Go(t),s=iP(e,r),a=yield ZD(t,s,n);return a?(n=zD(n,a,s,i),r=rP({url:i,parse:Zo,loaders:s},n,r),yield NG(a,t,n,r)):null})}function NG(t,e,n,r){return R(this,null,function*(){if(Ib(t),Nn(e)){let i=e,{ok:o,redirected:s,status:a,statusText:c,type:l,url:u}=i,d=Object.fromEntries(i.headers.entries());r.response={headers:d,ok:o,redirected:s,status:a,statusText:c,type:l,url:u}}if(e=yield nP(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(Sb(t,n))return yield Cb(t,e,n,r,Zo);if(t.parseText&&typeof e=="string")return yield t.parseText(e,n,r,t);if(t.parse)return yield t.parse(e,n,r,t);throw ft(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))})}function cr(t,e,n,r){return R(this,null,function*(){!Array.isArray(e)&&!Zl(e)&&(r=void 0,n=e,e=void 0);let i=Fh(n),o=t;return typeof t=="string"&&(o=yield i(t)),On(t)&&(o=yield i(t)),yield Zo(o,e,n)})}var oP="3.4.15";function Jl(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var lr={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},OG=lr.self||lr.window||lr.global||{},LG=lr.window||lr.self||lr.global||{},BG=lr.global||lr.self||lr.window||{},kG=lr.document||{};var Hb=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser);var sP=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),FG=sP&&parseFloat(sP[1])||0;var{_parseImageNode:jG}=globalThis,Wb=typeof Image<"u",Zb=typeof ImageBitmap<"u",UG=!!jG,qb=Hb?!0:UG;function aP(t){switch(t){case"auto":return Zb||Wb||qb;case"imagebitmap":return Zb;case"image":return Wb;case"data":return qb;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function cP(){if(Zb)return"imagebitmap";if(Wb)return"image";if(qb)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function zG(t){let e=VG(t);if(!e)throw new Error("Not an image");return e}function lP(t){switch(zG(t)){case"data":return t;case"image":case"imagebitmap":let e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function VG(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}var $G=/^data:image\/svg\+xml/,GG=/\.svg((\?|#).*)?$/;function jh(t){return t&&($G.test(t)||GG.test(t))}function uP(t,e){if(jh(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return Xb(t,e)}function Xb(t,e){if(jh(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function Uh(t,e,n){return R(this,null,function*(){let r=uP(t,n),i=self.URL||self.webkitURL,o=typeof r!="string"&&i.createObjectURL(r);try{return yield HG(o||r,e)}finally{o&&i.revokeObjectURL(o)}})}function HG(t,e){return R(this,null,function*(){let n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=o=>i(new Error("Could not load image ".concat(t,": ").concat(o)))}catch(o){i(o)}})})}var WG={},dP=!0;function fP(t,e,n){return R(this,null,function*(){let r;jh(n)?r=yield Uh(t,e,n):r=Xb(t,n);let i=e&&e.imagebitmap;return yield ZG(r,i)})}function ZG(e){return R(this,arguments,function*(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((qG(n)||!dP)&&(n=null),n)try{return yield createImageBitmap(t,n)}catch(r){console.warn(r),dP=!1}return yield createImageBitmap(t)})}function qG(t){for(let e in t||WG)return!1;return!0}function hP(t){return!KG(t,"ftyp",4)||(t[8]&96)===0?null:XG(t)}function XG(t){switch(JG(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function JG(t,e,n){return String.fromCharCode(...t.slice(e,n))}function YG(t){return[...t].map(e=>e.charCodeAt(0))}function KG(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=YG(e);for(let i=0;i<r.length;++i)if(r[i]!==t[i+n])return!1;return!0}var ur=!1,Yl=!0;function zh(t){let e=Kl(t);return e4(e)||r4(e)||t4(e)||n4(e)||QG(e)}function QG(t){let e=new Uint8Array(t instanceof DataView?t.buffer:t),n=hP(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function e4(t){let e=Kl(t);return e.byteLength>=24&&e.getUint32(0,ur)===2303741511?{mimeType:"image/png",width:e.getUint32(16,ur),height:e.getUint32(20,ur)}:null}function t4(t){let e=Kl(t);return e.byteLength>=10&&e.getUint32(0,ur)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Yl),height:e.getUint16(8,Yl)}:null}function n4(t){let e=Kl(t);return e.byteLength>=14&&e.getUint16(0,ur)===16973&&e.getUint32(2,Yl)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Yl),height:e.getUint32(22,Yl)}:null}function r4(t){let e=Kl(t);if(!(e.byteLength>=3&&e.getUint16(0,ur)===65496&&e.getUint8(2)===255))return null;let{tableMarkers:r,sofMarkers:i}=i4(),o=2;for(;o+9<e.byteLength;){let s=e.getUint16(o,ur);if(i.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,ur),width:e.getUint16(o+7,ur)};if(!r.has(s))return null;o+=2,o+=e.getUint16(o,ur)}return null}function i4(){let t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Kl(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function pP(t,e){return R(this,null,function*(){let{mimeType:n}=zh(t)||{},r=globalThis._parseImageNode;return Jl(r),yield r(t,n)})}function mP(t,e,n){return R(this,null,function*(){e=e||{};let i=(e.image||{}).type||"auto",{url:o}=n||{},s=o4(i),a;switch(s){case"imagebitmap":a=yield fP(t,e,o);break;case"image":a=yield Uh(t,e,o);break;case"data":a=yield pP(t,e);break;default:Jl(!1)}return i==="data"&&(a=lP(a)),a})}function o4(t){switch(t){case"auto":case"data":return cP();default:return aP(t),t}}var s4=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],a4=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],c4={image:{type:"auto",decode:!0}},Ql={id:"image",module:"images",name:"Images",version:oP,mimeTypes:a4,extensions:s4,parse:mP,tests:[t=>!!zh(new DataView(t))],options:c4};var K=new Mt({id:"deck"});var Jb={};function gP(t){Jb=t}function Ge(t,e,n,r){K.level>0&&Jb[t]&&Jb[t].call(null,e,n,r)}function l4(t){let e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}var vP={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:l4,parseTextSync:JSON.parse};var eu="8.8.27",Vh=globalThis.deck&&globalThis.deck.VERSION;if(Vh&&Vh!==eu)throw new Error("deck.gl - multiple versions detected: ".concat(Vh," vs ").concat(eu));Vh||(K.log(1,"deck.gl ".concat(eu))(),globalThis.deck=S(v({},globalThis.deck),{VERSION:eu,version:eu,log:K,_registerLoggers:gP}),Xl([vP,[Ql,{imagebitmap:{premultiplyAlpha:"none"}}]]));var yP=globalThis.deck;var $=new Mt({id:"luma.gl"});function qe(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}var u4="Invalid WebGLRenderingContext";var d4="Requires WebGL2";function Wr(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function Y(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function Yb(t){return Y(t)?t:null}function Zr(t){return qe(Wr(t),u4),t}function Oe(t){return qe(Y(t),d4),t}var tu={};function f4(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function h4(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function p4(t,e){tu[t]=!0,e!==void 0&&f4(e)}function m4(t){let e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(tu[r]=!0);while(r!==0);for(r in tu)if(tu[r])return delete tu[r],parseInt(r,10);return 0}}var nu=function t(e){let n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){let i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};nu.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};nu.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};var qo=function(e){let n=this;this.gl=e,m4(e);let r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(o){return o===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(o){let s=n.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);let a=s.attribs[o];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(o){let s=n.currentVertexArrayObject;s.maxAttrib=Math.max(s.maxAttrib,o);let a=s.attribs[o];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(o,s){switch(o){case 34962:n.currentArrayBuffer=s;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=s;break;default:}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(o,s){let c=n.currentVertexArrayObject.attribs[o];switch(s){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(o,s,a,c,l,u){let d=n.currentVertexArrayObject;d.maxAttrib=Math.max(d.maxAttrib,o);let f=d.attribs[o];return f.buffer=n.currentArrayBuffer,f.size=s,f.type=a,f.normalized=c,f.stride=l,f.offset=u,f.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{h4("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};qo.prototype.VERTEX_ARRAY_BINDING_OES=34229;qo.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;let n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new nu(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};qo.prototype.createVertexArrayOES=function(){let e=new nu(this);return this.vertexArrayObjects.push(e),e};qo.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};qo.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof nu&&e.hasBeenBound&&e.ext===this)};qo.prototype.bindVertexArrayOES=function(e){let n=this.gl;if(e&&!e.isAlive){p4(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}let r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;let o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,o.elementArrayBuffer);let s=this.currentArrayBuffer,a=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let c=0;c<=a;c++){let l=o.attribs[c],u=i?i.attribs[c]:null;if((!i||l.enabled!==u.enabled)&&(l.enabled?r.enableVertexAttribArray.call(n,c):r.disableVertexAttribArray.call(n,c)),l.enabled){let d=!1;(!i||l.buffer!==u.buffer)&&(s!==l.buffer&&(r.bindBuffer.call(n,34962,l.buffer),s=l.buffer),d=!0),(d||l.cached!==u.cached)&&r.vertexAttribPointer.call(n,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==s&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function _P(t){if(typeof t.createVertexArray=="function")return;let e=t.getSupportedExtensions;t.getSupportedExtensions=function(){let i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};let n=t.getExtension;t.getExtension=function(i){let o=n.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new qo(this)),this.__OESVertexArrayObject))}}var bP="OES_element_index",xP="WEBGL_draw_buffers",g4="EXT_disjoint_timer_query",v4="EXT_disjoint_timer_query_webgl2",y4="EXT_texture_filter_anisotropic",EP="WEBGL_debug_renderer_info",_4=35723,b4=4352,x4=36795,E4=34047,w4=37445,A4=37446,Pe=t=>Y(t)?void 0:0,I4={3074:t=>Y(t)?void 0:36064,[_4]:t=>Y(t)?void 0:b4,35977:Pe,32937:Pe,[x4]:(t,e)=>{let n=Y(t)?t.getExtension(v4):t.getExtension(g4);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[w4]:(t,e)=>{let n=t.getExtension(EP);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[A4]:(t,e)=>{let n=t.getExtension(EP);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[E4]:(t,e)=>{let n=t.luma.extensions[y4];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Pe,35071:Pe,37447:Pe,36063:(t,e)=>{if(!Y(t)){let n=t.getExtension(xP);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Pe,35374:Pe,35377:Pe,34852:t=>{if(!Y(t)){let e=t.getExtension(xP);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(bP)?2147483647:65535,33001:t=>t.getExtension(bP)?16777216:65535,33e3:t=>16777216,37157:Pe,35373:Pe,35657:Pe,36183:Pe,37137:Pe,34045:Pe,35978:Pe,35979:Pe,35968:Pe,35376:Pe,35375:Pe,35659:Pe,37154:Pe,35371:Pe,35658:Pe,35076:Pe,35077:Pe,35380:Pe};function wP(t,e,n){let r=I4[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}var T4="OES_vertex_array_object",AP="ANGLE_instanced_arrays",S4="WEBGL_draw_buffers",C4="EXT_disjoint_timer_query",M4="EXT_texture_filter_anisotropic",D4="VertexArray requires WebGL2 or OES_vertex_array_object extension";function P4(t,e){return{webgl2:Y(t),ext:t.getExtension(e)}}var Kb={[T4]:{meta:{suffix:"OES"},createVertexArray:()=>{qe(!1,D4)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[AP]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){qe(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[S4]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{qe(!1)}},[C4]:{meta:{suffix:"EXT"},createQuery:()=>{qe(!1)},deleteQuery:()=>{qe(!1)},beginQuery:()=>{qe(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},$h={readBuffer:(t,e,n)=>{Y(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{let{webgl2:i,ext:o}=P4(t,AP),s;switch(r){case 35069:s=i?void 0:!1;break;case 35070:s=!i&&!o?0:void 0;break;default:}return s!==void 0?s:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!Y(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0;default:}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!Y(t))switch(i){case 32937:return new Int32Array([0]);default:}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:let{extensions:i}=t.luma,o=i[M4];r=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break;default:}return e(n,r)},getParameter:wP,hint(t,e,n,r){return e(n,r)}};function IP(t){t.luma=t.luma||{};let{luma:e}=t;return e.polyfilled||(_P(t),R4(t),O4(t,Kb),N4(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=IP;function R4(t){t.luma.extensions={};let e=t.getSupportedExtensions()||[];for(let n of e)t.luma[n]=t.getExtension(n)}function N4(t,e){let{target:n,target2:r}=e;Object.keys($h).forEach(i=>{if(typeof $h[i]=="function"){let o=t[i]?t[i].bind(t):()=>{},s=$h[i].bind(null,t,o);n[i]=s,r[i]=s}})}function O4(t,e){for(let n of Object.getOwnPropertyNames(e))n!=="overrides"&&L4(t,{extension:n,target:t.luma,target2:t})}function L4(t,e){let{extension:n,target:r,target2:i}=e,o=Kb[n];qe(o);let{meta:s={}}=o,{suffix:a=""}=s,c=t.getExtension(n);for(let l of Object.keys(o)){let u="".concat(l).concat(a),d=null;l==="meta"||typeof t[l]=="function"||(c&&typeof c[u]=="function"?d=function(){return c[u](...arguments)}:typeof o[l]=="function"&&(d=o[l].bind(r))),d&&(r[l]=d,i[l]=d)}}var iu={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},Si=(t,e,n)=>e?t.enable(n):t.disable(n),TP=(t,e,n)=>t.hint(n,e),Xt=(t,e,n)=>t.pixelStorei(n,e),B4=(t,e)=>{let n=Y(t)?36009:36160;return t.bindFramebuffer(n,e)},k4=(t,e)=>t.bindFramebuffer(36008,e);function ru(t){return Array.isArray(t)||ArrayBuffer.isView(t)}var SP={3042:Si,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:Si,2885:(t,e)=>t.cullFace(e),2929:Si,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:Si,35723:TP,36006:B4,2886:(t,e)=>t.frontFace(e),33170:TP,2849:(t,e)=>t.lineWidth(e),32823:Si,32824:"polygonOffset",10752:"polygonOffset",35977:Si,32938:"sampleCoverage",32939:"sampleCoverage",3089:Si,3088:(t,e)=>t.scissor(...e),2960:Si,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Xt,3317:Xt,37440:Xt,37441:Xt,37443:Xt,3330:Xt,3332:Xt,3331:Xt,36010:k4,3314:Xt,32878:Xt,3316:Xt,3315:Xt,32877:Xt,framebuffer:(t,e)=>{let n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=ru(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=ru(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=ru(e)?e:[e,e];let[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=ru(e)&&e.length===3?[...e,...e]:e;let[n,r,i,o,s,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,o,s,a)},stencilOp:(t,e)=>{e=ru(e)&&e.length===3?[...e,...e]:e;let[n,r,i,o,s,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,o,s,a)},viewport:(t,e)=>t.viewport(...e)};function He(t,e,n){return e[t]!==void 0?e[t]:n[t]}var CP={blendEquation:(t,e,n)=>t.blendEquationSeparate(He(32777,e,n),He(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(He(32969,e,n),He(32968,e,n),He(32971,e,n),He(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(He(32824,e,n),He(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(He(32938,e,n),He(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,He(2962,e,n),He(2967,e,n),He(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,He(34816,e,n),He(36003,e,n),He(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,He(2964,e,n),He(2965,e,n),He(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,He(34817,e,n),He(34818,e,n),He(34819,e,n))},Qb={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},dr=(t,e)=>t.isEnabled(e),ex={3042:dr,2884:dr,2929:dr,3024:dr,32823:dr,32926:dr,32928:dr,3089:dr,2960:dr,35977:dr};function tx(t){for(let e in t)return!1;return!0}function MP(t,e){if(t===e)return!0;let n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function DP(t,e){let n=t[e].bind(t);t[e]=function(){let i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function F4(t,e,n){let r=t[e].bind(t);t[e]=function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];let{valueChanged:c,oldValue:l}=n(t.state._updateCache,...s);return c&&r(...s),l},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function j4(t){let e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}var nx=class{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?Wh(e):Object.assign({},iu),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.stateStack.push({})}pop(){qe(this.stateStack.length>0);let e=this.stateStack[this.stateStack.length-1];Dt(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r,i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(let o in e){qe(o!==void 0);let s=e[o],a=this.cache[o];MP(s,a)||(n=!0,r=a,i&&!(o in i)&&(i[o]=a),this.cache[o]=s)}return{valueChanged:n,oldValue:r}}};function Gh(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{enable:n=!0,copyState:r}=e;if(qe(r!==void 0),!t.state){let{polyfillContext:i}=globalThis;i&&i(t),t.state=new nx(t,{copyState:r}),j4(t);for(let o in Qb){let s=Qb[o];F4(t,o,s)}DP(t,"getParameter"),DP(t,"isEnabled")}return t.state.enable=n,t}function rx(t){t.state||Gh(t,{copyState:!1}),t.state.push()}function Hh(t){qe(t.state),t.state.pop()}function Dt(t,e){if(qe(Wr(t),"setParameters requires a WebGL context"),tx(e))return;let n={};for(let i in e){let o=Number(i),s=SP[i];s&&(typeof s=="string"?n[s]=!0:s(t,e[i],o))}let r=t.state&&t.state.cache;if(r)for(let i in n){let o=CP[i];o(t,e,r)}}function Wh(t,e){if(e=e||iu,typeof e=="number"){let i=e,o=ex[i];return o?o(t,i):t.getParameter(i)}let n=Array.isArray(e)?e:Object.keys(e),r={};for(let i of n){let o=ex[i];r[i]=o?o(t,Number(i)):t.getParameter(Number(i))}return r}function Zh(t){Dt(t,iu)}function Fe(t,e,n){if(tx(e))return n(t);let{nocatch:r=!0}=e;rx(t),Dt(t,e);let i;if(r)i=n(t),Hh(t);else try{i=n(t)}finally{Hh(t)}return i}function Ln(t){let{luma:e}=t;if(t.canvas&&e){let n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function _a(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=Ln(t),i=t.drawingBufferWidth,o=t.drawingBufferHeight;return U4(e,r,i,o,n)}function NP(t){let e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function U4(t,e,n,r,i){let o=PP(t[0],e,n),s=RP(t[1],e,r,i),a=PP(t[0]+1,e,n),c=a===n-1?a:a-1;a=RP(t[1]+1,e,r,i);let l;return i?(a=a===0?a:a+1,l=s,s=a):l=a===r-1?a:a-1,{x:o,y:s,width:Math.max(c-o+1,1),height:Math.max(l-s+1,1)}}function PP(t,e,n){return Math.min(Math.round(t*e),n-1)}function RP(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}var ix=rt(),z4=ix&&typeof document<"u",OP={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function ba(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};qe(ix,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},OP,t);let{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i,{canvas:o}=t,s=$4({canvas:o,width:e,height:n,onError:r});return i=V4(s,t),i?(i=Xo(i,t),G4(i),i):null}function Xo(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||H4(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},OP,e);let{manageState:n,debug:r}=e;return n&&Gh(t,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return $.log(1,...o)()}}),ix&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),$.level=Math.max($.level,1)):$.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function LP(t){let e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),o=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:o||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function ox(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){let r=NP(e.useDevicePixels);W4(t,r,e);return}let n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function V4(t,e){let{onError:n}=e,r=null,i=c=>r=c.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);let{webgl1:o=!0,webgl2:s=!0}=e,a=null;return s&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),o&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(s&&!o?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function $4(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,o;return typeof e=="string"?(z4&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),o=document.getElementById(e)):e?o=e:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",o.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function G4(t){let e=Y(t)?"WebGL2":"WebGL1",n=LP(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";$.info(1,"".concat(e).concat(i," context ").concat(r))()}function H4(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function W4(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&($.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};let o=t.luma.canvasSizeInfo;if(o.clientWidth!==r||o.clientHeight!==i||o.devicePixelRatio!==e){let s=e,a=Math.floor(r*s),c=Math.floor(i*s);t.canvas.width=a,t.canvas.height=c,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==c)&&($.warn("Device pixel ratio clamped")(),s=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*s),t.canvas.height=Math.floor(i*s)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}var ou="8.5.21",Z4="set luma.log.level=1 (or higher) to trace rendering",sx=class{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new ar({id:e})),this.stats.get(e)}},pn=new sx;if(globalThis.luma&&globalThis.luma.VERSION!==ou)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(ou));globalThis.luma||(rt()&&$.log(1,"luma.gl ".concat(ou," - ").concat(Z4))(),globalThis.luma=globalThis.luma||{VERSION:ou,version:ou,log:$,stats:pn,globals:{modules:{},nodeIO:{}}});var CEe=globalThis.luma;function ax(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function cx(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function L(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function qh(t,e){if(typeof e!="string")return e;let n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");let r=t[e];return L(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function mn(t,e){e=Number(e);for(let n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}var lx={};function Me(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";lx[t]=lx[t]||1;let e=lx[t]++;return"".concat(t,"-").concat(e)}function ux(t){return L(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function fr(t){let e=!0;for(let n in t){e=!1;break}return e}function Xh(t,e,n,r){let i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(t);r.forEach(s=>{o.methodName||(o[s]=()=>{throw $.removed("Calling removed method ".concat(e,".").concat(s,": "),i)(),new Error(s)})})}var xa="Resource subclass must define virtual methods",et=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Zr(e);let{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||Me(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=qh(this.gl,e),L(e);let i=(this.constructor.PARAMETERS||{})[e];if(i){let o=Y(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){let a=i.webgl1,c="webgl2"in i?i.webgl2:i.webgl1;return o?c:a}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},o=Y(this.gl),s={},a=n||Object.keys(i);for(let c of a){let l=i[c];if(l&&(!("webgl2"in l)||o)&&(!("extension"in l)||this.gl.getExtension(l.extension))){let d=r?mn(this.gl,c):c;s[d]=this.getParameter(c,e),r&&l.type==="GLenum"&&(s[d]=mn(this.gl,s[d]))}}return s}setParameter(e,n){e=qh(this.gl,e),L(e);let i=(this.constructor.PARAMETERS||{})[e];if(i){let o=Y(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=qh(n))}return this._setParameter(e,n),this}setParameters(e){for(let n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return Xh(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(xa)}_deleteHandle(){throw new Error(xa)}_bindHandle(e){throw new Error(xa)}_getOptsFromHandle(){throw new Error(xa)}_getParameter(e,n){throw new Error(xa)}_setParameter(e,n){throw new Error(xa)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){let e=this[Symbol.toStringTag],n=pn.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){let e=this[Symbol.toStringTag];pn.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",i=pn.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=pn.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength)}};var q4="Failed to deduce GL constant from typed array";function su(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(q4)}}function Ci(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function BP(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:o}=t,s=n*i;o=o||new Uint8Array(s);for(let a=0;a<r/2;++a){let c=a*s,l=(r-a-1)*s;o.set(e.subarray(c,c+s)),e.copyWithin(c,l,l+s),e.set(o,l)}}function kP(t){let{data:e,width:n,height:r}=t,i=Math.round(n/2),o=Math.round(r/2),s=new Uint8Array(i*o*4);for(let a=0;a<o;a++)for(let c=0;c<i;c++)for(let l=0;l<4;l++)s[(a*i+c)*4+l]=e[(a*2*n+c*2)*4+l];return{data:s,width:i,height:o}}function au(t,e,n){let{removedProps:r={},deprecatedProps:i={},replacedProps:o={}}=n;for(let a in r)if(a in e){let l=r[a]?"".concat(t,".").concat(r[a]):"N/A";$.removed("".concat(t,".").concat(a),l)()}for(let a in i)if(a in e){let c=i[a];$.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))()}let s=null;for(let a in o)if(a in e){let c=o[a];$.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(c))(),s=s||Object.assign({},e),s[c]=e[a],delete s[a]}return s||e}var X4={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},J4={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},_t=class t{static getBytesPerElement(e){return Ci(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return L(e.size),Ci(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new t(X4,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return t.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return t.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=au("Accessor",e,J4),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}};var FP=10,jP={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Y4={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:jP},K4={removedProps:jP},ie=class extends et{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/_t.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/_t.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=au("Buffer",e,Y4),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=au("Buffer",e,K4),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new _t(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});let{data:n,offset:r=0,srcOffset:i=0}=e,o=e.byteLength||e.length;L(n);let s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),i!==0||o!==void 0?(Oe(this.gl),this.gl.bufferSubData(this.target,r,n,i,o)):this.gl.bufferSubData(s,r,n),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:o}=e,{gl:s}=this;return Oe(s),s.bindBuffer(36662,n.handle),s.bindBuffer(36663,this.handle),s.copyBufferSubData(36662,36663,r,i,o),s.bindBuffer(36662,null),s.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Oe(this.gl);let o=Ci(this.accessor.type||5126,{clamped:!1}),s=this._getAvailableElementCount(n),a=r,c,l;e?(l=e.length,c=l-a):(c=Math.min(s,i||s),l=a+c);let u=Math.min(s,c);return i=i||u,L(i<=u),e=e||new o(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(L(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(FP,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;L(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();let i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,FP),this.bytesUsed=r,this._trackAllocatedMemory(r);let o=su(e);return L(o),this.setAccessor(new _t(this.accessor,{type:o})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;L(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));let i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){let n=Ci(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new _t(this.accessor,{type:su(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);let n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return $.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return $.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return $.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return $.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new _t(this.accessor,e),this}};var Jh={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},Yh={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},Kh={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function UP(t,e){let n=Jh[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;let r=Y(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function zP(t,e){let n=Jh[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}var Q4=[9729,9728],VP=globalThis.WebGLBuffer||function(){},Pt=class extends et{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{format:r,linearFiltering:i}=n,o=!0;return r&&(o=o&&UP(e,r),o=o&&(!i||zP(e,r))),o}constructor(e,n){let{id:r=Me("texture"),handle:i,target:o}=n;super(e,{id:r,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(E=>this.initialize(Object.assign({},e,{pixels:E,data:E}))),this;let r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;let{pixels:i=null,format:o=6408,border:s=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:u=void 0}=e;n||(n=i);let{width:d,height:f,dataFormat:h,type:p,compressed:g=!1,mipmaps:y=!0}=e,{depth:_=0}=e;return{width:d,height:f,compressed:g,dataFormat:h,type:p}=this._deduceParameters({format:o,type:p,dataFormat:h,compressed:g,data:n,width:d,height:f}),this.width=d,this.height=f,this.depth=_,this.format=o,this.type=p,this.dataFormat=h,this.border=s,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),y&&this._isNPOT()&&($.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),y=!1,this._updateForNPOT(c)),this.mipmaps=y,this.setImageData({data:n,width:d,height:f,depth:_,format:o,type:p,dataFormat:h,border:s,mipmaps:y,parameters:l,compressed:g}),y&&this.generateMipmap(),this.setParameters(c),a&&(this.data=n),r&&(this._video={video:n,parameters:c,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){let{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?($.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Fe(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");let{target:n=this.target,pixels:r=null,level:i=0,format:o=this.format,border:s=this.border,offset:a=0,parameters:c={}}=e,{data:l=null,type:u=this.type,width:d=this.width,height:f=this.height,dataFormat:h=this.dataFormat,compressed:p=!1}=e;l||(l=r),{type:u,dataFormat:h,compressed:p,width:d,height:f}=this._deduceParameters({format:o,type:u,dataFormat:h,compressed:p,data:l,width:d,height:f});let{gl:g}=this;g.bindTexture(this.target,this.handle);let y=null;({data:l,dataType:y}=this._getDataType({data:l,compressed:p}));let _,E=0;if(Fe(this.gl,c,()=>{switch(y){case"null":g.texImage2D(n,i,o,d,f,s,h,u,l);break;case"typed-array":g.texImage2D(n,i,o,d,f,s,h,u,l,a);break;case"buffer":_=Oe(g),_.bindBuffer(35052,l.handle||l),_.texImage2D(n,i,o,d,f,s,h,u,a),_.bindBuffer(35052,null);break;case"browser-object":Y(g)?g.texImage2D(n,i,o,d,f,s,h,u,l):g.texImage2D(n,i,o,h,u,l);break;case"compressed":for(let[A,I]of l.entries())g.compressedTexImage2D(n,A,I.format,I.width,I.height,s,I.data),E+=I.levelSize;break;default:L(!1,"Unknown image data type")}}),y==="compressed")this._trackAllocatedMemory(E,"Texture");else if(l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{let A=Yh[this.dataFormat]||4,I=Kh[this.type]||1;this._trackAllocatedMemory(this.width*this.height*A*I,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:o=0,y:s=0,width:a=this.width,height:c=this.height,level:l=0,format:u=this.format,type:d=this.type,dataFormat:f=this.dataFormat,compressed:h=!1,offset:p=0,border:g=this.border,parameters:y={}}=e;if({type:d,dataFormat:f,compressed:h,width:a,height:c}=this._deduceParameters({format:u,type:d,dataFormat:f,compressed:h,data:i,width:a,height:c}),L(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){let _=i;i=_.data,a=_.shape[0],c=_.shape[1]}i instanceof ie&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Fe(this.gl,y,()=>{if(h)this.gl.compressedTexSubImage2D(n,l,o,s,a,c,u,i);else if(i===null)this.gl.texSubImage2D(n,l,o,s,a,c,f,d,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,l,o,s,a,c,f,d,i,p);else if(i instanceof VP){let _=Oe(this.gl);_.bindBuffer(35052,i),_.texSubImage2D(n,l,o,s,a,c,f,d,p),_.bindBuffer(35052,null)}else Y(this.gl)?Oe(this.gl).texSubImage2D(n,l,o,s,a,c,f,d,i):this.gl.texSubImage2D(n,l,o,s,f,d,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit,{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof ie?{data:n.handle,dataType:"buffer"}:n instanceof VP?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){let{format:n,data:r}=e,{width:i,height:o,dataFormat:s,type:a,compressed:c}=e,l=Jh[n];return s=s||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,{width:i,height:o}=this._deduceImageSize(r,i,o),{dataFormat:s,type:a,compressed:c,width:i,height:o,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},L(i,"Could not deduced texture size"),L(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),L(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);let n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:L(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Y(this.gl)||!this.width||!this.height?!1:!ux(this.width)||!ux(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:Q4.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break;default:break}return n}};var eH="";function $P(t,e){return L(typeof t=="string"),t=eH+t,new Promise((n,r)=>{try{let i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}var ve=class extends Pt{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return Pt.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Zr(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:$P(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}};var dx=[34069,34070,34071,34072,34073,34074],fx=(()=>{class t extends Pt{get[Symbol.toStringTag](){return"TextureCube"}constructor(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Zr(n),super(n,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{mipmaps:r=!0,parameters:i={}}=n;return this.opts=n,this.setCubeMapImageData(n).then(()=>{this.loaded=!0,r&&this.generateMipmap(n),this.setParameters(i)}),this}subImage(n){let{face:r,data:i,x:o=0,y:s=0,mipmapLevel:a=0}=n;return this._subImage({target:r,data:i,x:o,y:s,mipmapLevel:a})}setCubeMapImageData(n){return R(this,null,function*(){let{width:r,height:i,pixels:o,data:s,border:a=0,format:c=6408,type:l=5121}=n,{gl:u}=this,d=o||s,f=yield Promise.all(dx.map(h=>{let p=d[h];return Promise.all(Array.isArray(p)?p:[p])}));this.bind(),dx.forEach((h,p)=>{f[p].length>1&&this.opts.mipmaps!==!1&&$.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[p].forEach((g,y)=>{r&&i?u.texImage2D(h,y,c,r,i,a,c,l,g):u.texImage2D(h,y,c,c,l,g)})}),this.unbind()})}setImageDataForFace(n){let{face:r,width:i,height:o,pixels:s,data:a,border:c=0,format:l=6408,type:u=5121}=n,{gl:d}=this,f=s||a;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},n,{face:r,data:h,pixels:h}))):this.width||this.height?d.texImage2D(r,0,l,i,o,c,l,u,f):d.texImage2D(r,0,l,l,u,f),this}}return t.FACES=dx,t})();var cu=class extends Pt{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return Y(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Oe(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:o,depth:s=1,border:a=0,format:c,type:l=5121,offset:u=0,data:d,parameters:f={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Fe(this.gl,f,()=>{ArrayBuffer.isView(d)&&this.gl.texImage3D(this.target,n,r,i,o,s,a,c,l,d),d instanceof ie&&(this.gl.bindBuffer(35052,d.handle),this.gl.texImage3D(this.target,n,r,i,o,s,a,c,l,u))}),d&&d.byteLength)this._trackAllocatedMemory(d.byteLength,"Texture");else{let h=Yh[this.dataFormat]||4,p=Kh[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*h*p,"Texture")}return this.loaded=!0,this}};var Jo="EXT_color_buffer_float",hx={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Jo,bpp:2},33327:{gl2:Jo,bpp:4},34842:{gl2:Jo,bpp:8},33326:{gl2:Jo,bpp:4},33328:{gl2:Jo,bpp:8},34836:{gl2:Jo,bpp:16},35898:{gl2:Jo,bpp:4}};function tH(t,e,n){let r=n[e];if(!r)return!1;let i=Y(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}var Jt=class extends et{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||tH(e,n,hx)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:o=0}=e;return L(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&Y(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*hx[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}};var nH=256,rH=1024,iH=16384,GP=6144,HP=6145,WP=6146,ZP=34041,qP="clear: bad arguments";function Mi(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o={};e&&(o.framebuffer=e);let s=0;n&&(s|=iH,n!==!0&&(o.clearColor=n)),r&&(s|=nH,r!==!0&&(o.clearDepth=r)),i&&(s|=rH,r!==!0&&(o.clearStencil=r)),L(s!==0,qP),Fe(t,o,()=>{t.clear(s)})}function px(t){let{framebuffer:e=null,buffer:n=GP,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Oe(t),Fe(t,{framebuffer:e},()=>{switch(n){case GP:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case HP:t.clearBufferfv(HP,0,[i]);break;case WP:t.clearBufferiv(WP,0,[i]);break;case ZP:let[o,s]=i;t.clearBufferfi(ZP,0,o,s);break;default:L(!1,qP)}})}function XP(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return L(!1),0}}function qr(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e,{sourceAttachment:o=36064,target:s=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e,{framebuffer:u,deleteFramebuffer:d}=JP(t);L(u);let{gl:f,handle:h,attachments:p}=u;a=a||u.width,c=c||u.height,o===36064&&h===null&&(o=1028),L(p[o]),l=l||p[o].type,s=oH(s,l,i,a,c),l=l||su(s);let g=f.bindFramebuffer(36160,h);return f.readPixels(n,r,a,c,i,l,s),f.bindFramebuffer(36160,g||null),d&&u.delete(),s}function Qh(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=qr(t,{sourceAttachment:e}),{width:i,height:o}=t;for(;o>n;)({data:r,width:i,height:o}=kP({data:r,width:i,height:o}));BP({data:r,width:i,height:o});let s=document.createElement("canvas");s.width=i,s.height=o;let a=s.getContext("2d"),c=a.createImageData(i,o);return c.data.set(r),a.putImageData(c,0,0),s.toDataURL()}function ep(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{sourceX:r=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:s=6408}=n,{targetX:a,targetY:c,targetZ:l,width:u,height:d}=n,{framebuffer:f,deleteFramebuffer:h}=JP(t);L(f);let{gl:p,handle:g}=f,y=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;let _=p.bindFramebuffer(36160,g);L(e);let E=null;if(e instanceof Pt&&(E=e,u=Number.isFinite(u)?u:E.width,d=Number.isFinite(d)?d:E.height,E.bind(0),e=E.target),!y)p.copyTexImage2D(e,o,s,r,i,u,d,0);else switch(e){case 3553:case 34067:p.copyTexSubImage2D(e,o,a,c,r,i,u,d);break;case 35866:case 32879:Oe(p).copyTexSubImage3D(e,o,a,c,l,r,i,u,d);break;default:}return E&&E.unbind(),p.bindFramebuffer(36160,_||null),h&&f.delete(),E}function JP(t){return t instanceof ye?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:YP(t),deleteFramebuffer:!0}}function oH(t,e,n,r,i){if(t)return t;e=e||5121;let o=Ci(e,{clamped:!1}),s=XP(n);return new o(r*i*s)}var be={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function sH(t){let e=new ve(t,{format:6408,type:5126,dataFormat:6408}),n=new ye(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}var mx={[be.WEBGL2]:[!1,!0],[be.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[be.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[be.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[be.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[be.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[be.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[be.FLOAT_BLEND]:["EXT_float_blend"],[be.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[be.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[be.TEXTURE_FLOAT]:["OES_texture_float",!0],[be.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[be.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[be.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[be.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[be.COLOR_ATTACHMENT_RGBA32F]:[sH,"EXT_color_buffer_float"],[be.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[be.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[be.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[be.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[be.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[be.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]};var aH=2;function Xr(t,e){return Ea(t,e)}function Ea(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>KP(t,n))}function tp(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(let e in mx)t.luma.caps[e]===void 0&&(t.luma.caps[e]=KP(t,e));return t.luma.caps}function KP(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=cH(t,e)),t.luma.caps[e]||$.log(aH,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function cH(t,e){let n=mx[e];L(n,e);let r,i=Y(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(let o of i)r=r&&!!t.getExtension(o)}else typeof i=="string"?r=!!t.getExtension(i):typeof i=="boolean"?r=i:L(!1);return r}var QP="Multiple render targets not supported",ye=class t extends et{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{colorBufferFloat:r,colorBufferHalfFloat:i}=n,o=!0;return r&&(o=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(o=o&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new t(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){let e=Oe(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){let e=Oe(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:o=!0,depth:s=!0,stencil:a=!1,check:c=!0,readBuffer:l=void 0,drawBuffers:u=void 0}=e;if(L(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(let d in i){let f=i[d];(Array.isArray(f)?f[0]:f).resize({width:n,height:r})}else i=this._createDefaultAttachments(o,s,a,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:l,drawBuffers:u}),i&&c&&this.checkStatus()}delete(){for(let e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:s=!0}=e;this.attach(n,{clearAttachments:o,resizeAttachments:s});let{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return L(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&$.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(let i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i={};n&&Object.keys(this.attachments).forEach(s=>{i[s]=null}),Object.assign(i,e);let o=this.gl.bindFramebuffer(36160,this.handle);for(let s in i){L(s!==void 0,"Misspelled framebuffer binding point?");let a=Number(s),c=i[a],l=c;if(!l)this._unattach(a);else if(l instanceof Jt)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){let[u,d=0,f=0]=c;l=u,this._attachTexture({attachment:a,texture:u,layer:d,level:f})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});r&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(s=>!this.attachments[s]).forEach(s=>{delete this.attachments[s]})}checkStatus(){let{gl:e}=this,n=this.getStatus();if(n!==36053)throw new Error(uH(n));return this}getStatus(){let{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{color:n,depth:r,stencil:i,drawBuffers:o=[]}=e,s=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&Mi(this.gl,{color:n,depth:r,stencil:i}),o.forEach((a,c)=>{px(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:o,height:s}=e,a=Oe(this.gl),c=a.bindFramebuffer(36008,this.handle);return r===0&&i===0&&o===void 0&&s===void 0?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,r,i,o,s),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=mn(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],i={};for(let o of r){let s=n?mn(this.gl,o):o;i[s]=this.getAttachmentParameter(e,o,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=Object.keys(this.attachments),r={};for(let i of n){let o=Number(i),s=e?mn(this.gl,o):o;r[s]=this.getAttachmentParameters(o,e)}return r}show(){return typeof window<"u"&&window.open(Qh(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>$.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);let r=Qh(this,{targetMaxHeight:100});return $.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,o){let s=null;return e&&(s=s||{},s[36064]=new ve(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(s[36064])),n&&r?(s=s||{},s[33306]=new Jt(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(s[33306])):n?(s=s||{},s[36096]=new Jt(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(s[36096])):r&&L(!1),s}_unattach(e){let n=this.attachments[e];n&&(n instanceof Jt?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e,{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:o}=e,{gl:s}=this;switch(s.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:Oe(s).framebufferTextureLayer(36160,n,r.target,o,i);break;case 34067:let c=lH(i);s.framebufferTexture2D(36160,n,c,r.handle,o);break;case 3553:s.framebufferTexture2D(36160,n,3553,r.handle,o);break;default:L(!1,"Illegal texture type")}s.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){let n=Yb(this.gl);n?n.readBuffer(e):L(e===36064||e===1029,QP),this.readBuffer=e}_setDrawBuffers(e){let{gl:n}=this,r=Oe(n);if(r)r.drawBuffers(e);else{let i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):L(e.length===1&&(e[0]===36064||e[0]===1029),QP)}this.drawBuffers=e}_getAttachmentParameterFallback(e){let n=tp(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}};function lH(t){return t<34069?t+34069:t}function uH(t){return(ye.STATUS||{})[t]||"Framebuffer error ".concat(t)}var dH=[36049,36048,33296,33298,33299,33300,33301,33302,33303];ye.ATTACHMENT_PARAMETERS=dH;function np(t,e){L(t instanceof ve||t instanceof fx||t instanceof cu);let n=t.constructor,{gl:r,width:i,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:u}=t,d=Object.assign({width:i,height:o,format:s,type:a,dataFormat:c,border:l,mipmaps:u},e);return new n(r,d)}function YP(t,e){let{gl:n,width:r,height:i,id:o}=t;return new ye(n,Object.assign({},e,{id:"framebuffer-for-".concat(o),width:r,height:i,attachments:{36064:t}}))}function Di(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed",n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}function gx(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}function vx(t,e,n,r){let i=t.split(/\r?\n/),o={},s={},a=r||Di(e)||"(unnamed)",c="".concat(gx(n)," shader ").concat(a);for(let u=0;u<i.length;u++){let d=i[u];if(d.length<=1)continue;let f=d.split(":"),h=f[0],p=parseInt(f[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));h!=="WARNING"?o[p]=d:s[p]=d}let l=fH(e);return{shaderName:c,errors:eR(o,l),warnings:eR(s,l)}}function eR(t,e){let n="";for(let r=0;r<e.length;r++){let i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){let o=t[r+1],s=o.split(":",3),a=s[0],c=parseInt(s[1],10)||0,l=o.substring(s.join(":").length+1).trim();n+=tR("^^^ ".concat(a,": ").concat(l,`

`),c)}}return n}function fH(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ",r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((o,s)=>{let a=String(s+e),c=a.length;return tR(a,i-c)+n+o})}function tR(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function wa(t){let e=100,n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){let r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}var hH="Shader: GLSL source code must be a JavaScript string",rp=class t extends et{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return L(!1),"unknown"}}constructor(e,n){Zr(e),L(typeof n.source=="string",hH);let r=Di(n.source,null)||n.id||Me("unnamed ".concat(t.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e,r=Di(n,null);r&&(this.id=Me(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(t.getTypeName(this.shaderType),":").concat(this.id)}getName(){return Di(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){let e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){let r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:s}=vx(r,this.source,this.shaderType,this.id);throw $.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),$.warn("GLSL compilation warnings in ".concat(i,`
`).concat(s))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}},Yo=class extends rp{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}},Ko=class extends rp{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}};var pH={5126:Le.bind(null,"uniform1fv",Yt,1,At),35664:Le.bind(null,"uniform2fv",Yt,2,At),35665:Le.bind(null,"uniform3fv",Yt,3,At),35666:Le.bind(null,"uniform4fv",Yt,4,At),5124:Le.bind(null,"uniform1iv",Pi,1,At),35667:Le.bind(null,"uniform2iv",Pi,2,At),35668:Le.bind(null,"uniform3iv",Pi,3,At),35669:Le.bind(null,"uniform4iv",Pi,4,At),35670:Le.bind(null,"uniform1iv",Pi,1,At),35671:Le.bind(null,"uniform2iv",Pi,2,At),35672:Le.bind(null,"uniform3iv",Pi,3,At),35673:Le.bind(null,"uniform4iv",Pi,4,At),35674:Le.bind(null,"uniformMatrix2fv",Yt,4,Jr),35675:Le.bind(null,"uniformMatrix3fv",Yt,9,Jr),35676:Le.bind(null,"uniformMatrix4fv",Yt,16,Jr),35678:bt,35680:bt,5125:Le.bind(null,"uniform1uiv",ip,1,At),36294:Le.bind(null,"uniform2uiv",ip,2,At),36295:Le.bind(null,"uniform3uiv",ip,3,At),36296:Le.bind(null,"uniform4uiv",ip,4,At),35685:Le.bind(null,"uniformMatrix2x3fv",Yt,6,Jr),35686:Le.bind(null,"uniformMatrix2x4fv",Yt,8,Jr),35687:Le.bind(null,"uniformMatrix3x2fv",Yt,6,Jr),35688:Le.bind(null,"uniformMatrix3x4fv",Yt,12,Jr),35689:Le.bind(null,"uniformMatrix4x2fv",Yt,8,Jr),35690:Le.bind(null,"uniformMatrix4x3fv",Yt,12,Jr),35678:bt,35680:bt,35679:bt,35682:bt,36289:bt,36292:bt,36293:bt,36298:bt,36299:bt,36300:bt,36303:bt,36306:bt,36307:bt,36308:bt,36311:bt},mH={},gH={},vH={},nR=[0];function yx(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(nR[0]=t,t=nR);let i=t.length;if(i%e&&$.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let o=r[i];o||(o=new n(i),r[i]=o);for(let s=0;s<i;s++)o[s]=t[s];return o}function Yt(t,e){return yx(t,e,Float32Array,mH)}function Pi(t,e){return yx(t,e,Int32Array,gH)}function ip(t,e){return yx(t,e,Uint32Array,vH)}function _x(t,e,n){let r=pH[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function rR(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};let e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function iR(t,e,n){for(let r in t){let i=t[r];if((!n||!!n[r])&&!yH(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function yH(t){return Array.isArray(t)||ArrayBuffer.isView(t)?_H(t):isFinite(t)||t===!0||t===!1||t instanceof Pt||t instanceof Jt?!0:t instanceof ye?!!t.texture:!1}function oR(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){let r=t[e];for(let i=0,o=n.length;i<o;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function _H(t){if(t.length===0)return!1;let e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function bt(){let t=null;return(e,n,r)=>{let i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function Le(t,e,n,r){let i=null,o=null;return(s,a,c)=>{let l=e(c,n),u=l.length,d=!1;if(i===null)i=new Float32Array(u),o=u,d=!0;else{L(o===u,"Uniform length cannot change.");for(let f=0;f<u;++f)if(l[f]!==i[f]){d=!0;break}}return d&&(r(s,t,a,l),i.set(l)),d}}function At(t,e,n,r){t[e](n,r)}function Jr(t,e,n,r){t[e](n,!1,r)}var bH=5120,xH=5121,EH=5122,wH=5123,sR=0,op=1,AH=2,IH=3,sp=4,TH=5,SH=6,it=5126,CH=35664,MH=35665,DH=35666,lu=5124,PH=35667,RH=35668,NH=35669,uu=5125,OH=36294,LH=36295,BH=36296,kH=35670,FH=35671,jH=35672,UH=35673,zH=35674,VH=35675,$H=35676,GH=35685,HH=35686,WH=35687,ZH=35688,qH=35689,XH=35690,bx={[it]:[it,1,"float"],[CH]:[it,2,"vec2"],[MH]:[it,3,"vec3"],[DH]:[it,4,"vec4"],[lu]:[lu,1,"int"],[PH]:[lu,2,"ivec2"],[RH]:[lu,3,"ivec3"],[NH]:[lu,4,"ivec4"],[uu]:[uu,1,"uint"],[OH]:[uu,2,"uvec2"],[LH]:[uu,3,"uvec3"],[BH]:[uu,4,"uvec4"],[kH]:[it,1,"bool"],[FH]:[it,2,"bvec2"],[jH]:[it,3,"bvec3"],[UH]:[it,4,"bvec4"],[zH]:[it,8,"mat2"],[GH]:[it,8,"mat2x3"],[HH]:[it,8,"mat2x4"],[VH]:[it,12,"mat3"],[WH]:[it,12,"mat3x2"],[ZH]:[it,12,"mat3x4"],[$H]:[it,16,"mat4"],[qH]:[it,16,"mat4x2"],[XH]:[it,16,"mat4x3"]};function aR(t){switch(t){case sR:return sR;case op:return op;case IH:return op;case AH:return op;case sp:return sp;case TH:return sp;case SH:return sp;default:return L(!1),0}}function xx(t){let e=bx[t];if(!e)return null;let[n,r]=e;return{type:n,components:r}}function ap(t,e){switch(t){case bH:case xH:case EH:case wH:t=it;break;default:}for(let n in bx){let[r,i,o]=bx[n];if(r===t&&i===e)return{glType:n,name:o}}return null}var cp=class{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){let n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){let n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){let n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){let n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){let n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){let n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){let{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){let{name:o,type:s,size:a}=n.getActiveAttrib(e.handle,i),c=n.getAttribLocation(e.handle,o);c>=0&&this._addAttribute(c,o,s,a)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(e){let{gl:n}=e;if(!Y(n))return;let r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){let{name:o,type:s,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,o,s,a)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(e,n,r,i){let{type:o,components:s}=xx(r),a={type:o,size:i*s};this._inferProperties(e,n,a);let c={location:e,name:n,accessor:new _t(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){let{type:o,components:s}=xx(r),a=new _t({type:o,size:i*s}),c={location:e,name:n,accessor:a};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}};var cR=4,JH=35981,YH=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],Ri=class extends et{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",YH),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{hash:n,vs:r,fs:i,varyings:o,bufferMode:s=JH}=e;return this.hash=n||"",this.vs=typeof r=="string"?new Yo(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new Ko(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,L(this.vs instanceof Yo),L(this.fs instanceof Ko),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Oe(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new cp(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:o=0,start:s,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:u=0,isInstanced:d=u>0,vertexArray:f=null,transformFeedback:h,framebuffer:p,parameters:g={},uniforms:y,samplers:_}=e;if((y||_)&&($.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(y||{})),$.priority>=n){let E=p?p.id:"default",A="mode=".concat(mn(this.gl,r)," verts=").concat(i," ")+"instances=".concat(u," indexType=").concat(mn(this.gl,l)," ")+"isInstanced=".concat(d," isIndexed=").concat(c," ")+"Framebuffer=".concat(E);$.log(n,A)()}return L(f),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||d&&u===0?!1:(f.bindForDraw(i,u,()=>{if(p!==void 0&&(g=Object.assign({},g,{framebuffer:p})),h){let E=aR(r);h.begin(E)}this._bindTextures(),Fe(this.gl,g,()=>{c&&d?this.gl2.drawElementsInstanced(r,i,l,o,u):c&&Y(this.gl)&&!isNaN(s)&&!isNaN(a)?this.gl2.drawRangeElements(r,s,a,i,l,o):c?this.gl.drawElements(r,i,l,o):d?this.gl2.drawArraysInstanced(r,o,i,u):this.gl.drawArrays(r,o,i)}),h&&h.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$.priority>=2&&iR(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(let n in e){let r=e[n],i=this._uniformSetters[n];if(i){let o=r,s=!1;if(o instanceof ye&&(o=o.texture),o instanceof Pt)if(s=this.uniforms[n]!==r,s){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);let a=o,{textureIndex:c}=i;a.bind(c),o=c,this._textureUniforms[n]=a}else o=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(o)||s)&&oR(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(let n in this._textureUniforms){let r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(let e in this._textureUniforms){let n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){let n=this.gl.getAttachedShaders(e),r={};for(let i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new Yo({handle:i});break;case 35632:r.fs=new Ko({handle:i});break;default:}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){let n=this._getName();this.id=Me(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){let{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),$.time(cR,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),$.timeEnd(cR,"linkProgram for ".concat(this._getName()))(),e.debug||$.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){let{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){let r=this.gl.getActiveUniform(this.handle,n),{name:i}=rR(r.name),o=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=_x(e,o,r),r.size>1)for(let s=0;s<r.size;s++)o=e.getUniformLocation(this.handle,"".concat(i,"[").concat(s,"]")),this._uniformSetters["".concat(i,"[").concat(s,"]")]=_x(e,o,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}};var KH=34918,QH=34919,e6=35007,t6=36795,n6=35976,r6=35887,i6=36202,Aa=class t extends et{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=Y(e),i=Ea(e,be.TIMER_QUERY),o=r||i;for(let s of n)switch(s){case"queries":o=o&&r;break;case"timers":o=o&&i;break;default:L(!1)}return o}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(e6)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?i6:r6)}beginTransformFeedbackQuery(){return this.begin(n6)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;let e=this.gl2.getQueryParameter(this.handle,QH);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(t6)}getResult(){return this.gl2.getQueryParameter(this.handle,KH)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{let o=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return t.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}};var Ni=class extends et{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Y(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Oe(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,fr(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(let n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){let r=this._getVaryingIndex(e),{buffer:i,byteSize:o,byteOffset:s}=this._getBufferParams(n);return r<0?(this.unused[e]=i,$.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,s,o),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof ie?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;let n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(let e in this.buffers){let{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(let e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,o=n&&n.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,e,o):this.gl.bindBufferRange(35982,e,o,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}};var lp=null;function o6(t){return(!lp||lp.byteLength<t)&&(lp=new ArrayBuffer(t)),lp}function lR(t,e){let n=o6(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function uR(t){let{target:e,source:n,start:r=0,count:i=1}=t,o=n.length,s=i*o,a=0;for(let c=r;a<o;a++)e[c++]=n[a];for(;a<s;)a<s-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+s-a),a=s);return e}var s6="elements must be GL.ELEMENT_ARRAY_BUFFER",Ia=class t extends et{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Y(e)||ga()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new t(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return t.MAX_ATTRIBUTES=t.MAX_ATTRIBUTES||e.getParameter(34921),t.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:t._setConstantFloatArray(e,n,r);break;case Int32Array:t._setConstantIntArray(e,n,r);break;case Uint32Array:t._setConstantUintArray(e,n,r);break;default:L(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return t.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return L(!e||e.target===34963,s6),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);let{size:i,type:o,stride:s,offset:a,normalized:c,integer:l,divisor:u}=r,{gl:d,gl2:f}=this;return e=Number(e),this.bind(()=>{d.bindBuffer(34962,n.handle),l?(L(Y(d)),f.vertexAttribIPointer(e,i,o,s,a)):d.vertexAttribPointer(e,i,o,c,s,a),d.enableVertexAttribArray(e),f.vertexAttribDivisor(e,u||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!t.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){let r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,o=r.length*e,s=!this.buffer;if(this.buffer=this.buffer||new ie(this.gl,i),s=s||this.buffer.reallocate(i),s=s||!this._compareConstantArrayValues(r,this.bufferValue),s){let a=lR(n.constructor,o);uR({target:a,source:r,start:0,count:o}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:L(!1)}}static _setConstantIntArray(e,n,r){switch(L(Y(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:L(!1)}}static _setConstantUintArray(e,n,r){switch(L(Y(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:L(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return L(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}};var a6="VertexArray: attributes must be Buffers or constants (i.e. typed array)",c6=/^(.+)__LOCATION_([0-9]+)$/,l6=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],du=class{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Ia(e),Xh(this,"VertexArray","v6.0",l6),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;let{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(let n in e){let r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);let{location:i,accessor:o}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,o)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{location:i,accessor:o}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new ie(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof ie&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){let n=this.values[e];n instanceof ie&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){let o={location:-1,accessor:null},{location:s,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(s)||s<0)return this.unused[e]=n,$.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),o;let c=this._getAttributeInfo(a||s);if(!c)return o;let l=this.accessors[s]||{},u=_t.resolve(c.accessor,l,r,i),{size:d,type:f}=u;return L(Number.isFinite(d)&&Number.isFinite(f)),{location:s,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){let n=Number(e);if(Number.isFinite(n))return{location:n};let r=c6.exec(e),i=r?r[1]:e,o=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof ie)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof ie){let r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){let r=n;this.setConstant(e,r)}else if(n.buffer instanceof ie){let r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(a6)}_setConstantAttributes(e,n){let r=Math.max(e|0,n|0),i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(e,n){if(Ia.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}let r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){Ia.setConstant(this.gl,e,n)}_updateDrawParams(){let e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){let r=this.values[n],i=this.accessors[n];if(!r)return;let{divisor:o}=i,s=o>0;if(e.isInstanced=e.isInstanced||s,r instanceof ie){let a=r;if(s){let c=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,c)}else{let c=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}};function u6(t,e){let{maxElts:n=16,size:r=1}=e,i="[";for(let s=0;s<t.length&&s<n;++s)s>0&&(i+=",".concat(s%r===0?" ":"")),i+=Qo(t[s],e);let o=t.length>n?"...":"]";return"".concat(i).concat(o)}function Qo(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return u6(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);let i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function up(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;L(n);let o=".*_.*",s=".*Matrix",a=n._uniformSetters,c={},l=Object.keys(a).sort(),u=0;for(let h of l)!h.match(o)&&!h.match(s)&&Ex({table:c,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&u++;for(let h of l)h.match(s)&&Ex({table:c,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&u++;for(let h of l)c[h]||Ex({table:c,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&u++;let d=0,f={};if(!i)for(let h in r){let p=r[h];c[h]||(d++,f[h]={Type:"NOT USED: ".concat(p),[e]:Qo(p)})}return{table:c,count:u,unusedTable:f,unusedCount:d}}function Ex(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:o}=t,s=r[i],a=d6(s);return!o||!a?(e[i]={[n]:a?Qo(s):"N/A","Uniform Type":a?s:"NOT PROVIDED"},!0):!1}function d6(t){return t!=null}function wx(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};let r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=dR(e,e.elements,null,n));let i=e.values;for(let o in i){let s=e._getAttributeInfo(o);if(s){let a="".concat(o,": ").concat(s.name),c=e.accessors[s.location];c&&(a="".concat(o,": ").concat(f6(s.name,c))),r[a]=dR(e,i[o],c,n)}}return r}function dR(t,e,n,r){let{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let o="NOT PROVIDED",s=1,a=0,c=0,l,u,d;if(n&&(o=n.type,s=n.size,o=String(o).replace("Array",""),l=o.indexOf("nt")!==-1),e instanceof ie){let f=e,{data:h,changed:p}=f.getDebugData();u=p?"*":"",d=h,c=f.byteLength,a=c/h.BYTES_PER_ELEMENT/s;let g;if(n){let y=n.divisor>0;g="".concat(y?"I ":"P "," ").concat(a," (x").concat(s,"=").concat(c," bytes ").concat(mn(i,o),")")}else l=!0,g="".concat(c," bytes");return{[r]:"".concat(u).concat(Qo(d,{size:s,isInteger:l})),"Format ":g}}return d=e,s=e.length,o=String(e.constructor.name).replace("Array",""),l=o.indexOf("nt")!==-1,{[r]:"".concat(Qo(d,{size:s,isInteger:l})," (constant)"),"Format ":"".concat(s,"x").concat(o," (constant)")}}function f6(t,e){let{type:n,size:r}=e,i=ap(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function Ax(t){let e={},n="Accessors for ".concat(t.id);for(let r of t.attributeInfos)if(r){let i=fR(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(let r of t.varyingInfos)if(r){let i=fR(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function fR(t){let{type:e,size:n}=t.accessor,r=ap(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}var hR=rt()&&typeof document<"u",p6=0,Ta=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{onCreateContext:n=y=>ba(y),onAddHTML:r=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:s=()=>{},onError:a,gl:c=null,glOptions:l={},debug:u=!1,createFramebuffer:d=!1,autoResizeViewport:f=!0,autoResizeDrawingBuffer:h=!0,stats:p=pn.get("animation-loop-".concat(p6++))}=e,{useDevicePixels:g=!0}=e;"useDevicePixelRatio"in e&&($.deprecated("useDevicePixelRatio","useDevicePixels")(),g=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:o,onFinalize:s,onError:a,gl:c,glOptions:l,debug:u,createFramebuffer:d},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:f,autoResizeDrawingBuffer:h,useDevicePixels:g}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return L(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;let n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Aa.isSupported(this.gl,["timers"])?new Aa(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){return R(this,null,function*(){return this.setNeedsRedraw("toDataURL"),yield this.waitForRender(),this.gl.canvas.toDataURL()})}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return $.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){let e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=hR?new Promise((e,n)=>{if(hR&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):cx(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):ax(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){let{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?Xo(this.props.gl,e):this.onCreateContext(e),!Wr(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Zh(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){let e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";let n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);let r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){let e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight,r=1,{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&ox(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new ye(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){let{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}};function Xe(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}var Ix={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function mR(t){let e={};for(let n in t){let r=t[n],i=m6(r);e[n]=i}return e}function m6(t){let e=pR(t);return e==="object"?t?"type"in t?Object.assign({},t,Ix[t.type]):"value"in t?(e=pR(t.value),Object.assign({type:e},t,Ix[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},Ix[e])}function pR(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}var g6="vs",v6="fs",fu=class{constructor(e){let{name:n,vs:r,fs:i,dependencies:o=[],uniforms:s,getUniforms:a,deprecations:c=[],defines:l={},inject:u={},vertexShader:d,fragmentShader:f}=e;Xe(typeof n=="string"),this.name=n,this.vs=r||d,this.fs=i||f,this.getModuleUniforms=a,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=y6(u),s&&(this.uniforms=mR(s))}getModuleSource(e){let n;switch(e){case g6:n=this.vs||"";break;case v6:n=this.fs||"";break;default:Xe(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n={},r=this.uniforms;for(let i in r){let o=r[i];i in e&&!o.private?(o.validate&&Xe(o.validate(e[i],o),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=o.value}return n}};function y6(t){let e={vs:{},fs:{}};for(let n in t){let r=t[n],i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function gR(t){return _6(yR(t))}function _6(t){let e={},n={};return vR({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function vR(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(let o of e)r[o.name]=o,(i[o.name]===void 0||i[o.name]<n)&&(i[o.name]=n);for(let o of e)o.dependencies&&vR({modules:o.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function yR(t,e){return t.map(n=>(n instanceof fu||(Xe(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Xe(n.name,"shader module has no name"),n=new fu(n),n.dependencies=yR(n.dependencies)),n))}function Tx(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}var b6=7936,x6=7937,E6=7938,w6=35724,Cx={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Oi={};Object.keys(Cx).forEach(t=>{Oi[t]=t});function A6(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function _R(t){let e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||b6),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||x6);return{gpuVendor:I6(n,r),vendor:n,renderer:r,version:t.getParameter(E6),shadingLanguageVersion:t.getParameter(w6)}}function I6(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}var Sx={};function Mx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=Cx[e];if(Xe(r,e),!Tx(n))return!0;if(e in Sx)return Sx[e];let i=r[0],o=n.behavior||"enable",s="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),a=t.createShader(35633);t.shaderSource(a,s),t.compileShader(a);let c=t.getShaderParameter(a,35713);return t.deleteShader(a),Sx[e]=c,c}function T6(t,e){let n=Cx[e];Xe(n,e);let r=A6(t)&&n[1]||n[0],i=typeof r=="string"?!!t.getExtension(r):r;return Xe(i===!1||i===!0),i}function hu(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>T6(t,n))}function bR(t){switch(_R(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function xR(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return hu(t,Oi.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),hu(t,Oi.GLSL_DERIVATIVES)&&Mx(t,Oi.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),hu(t,Oi.GLSL_FRAG_DATA)&&Mx(t,Oi.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),hu(t,Oi.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}var ER=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,wR=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`;var S6={vs:ER,fs:wR},pu="__LUMA_INJECT_DECLARATIONS__",AR=/void\s+main\s*\([^)]*\)\s*\{\n?/,IR=/}\n?[^{}]*$/,Dx=[];function fp(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=e==="vs";for(let o in n){let s=n[o];s.sort((c,l)=>c.order-l.order),Dx.length=s.length;for(let c=0,l=s.length;c<l;++c)Dx[c]=s[c].injection;let a="".concat(Dx.join(`
`),`
`);switch(o){case"vs:#decl":i&&(t=t.replace(pu,a));break;case"vs:#main-start":i&&(t=t.replace(AR,c=>c+a));break;case"vs:#main-end":i&&(t=t.replace(IR,c=>a+c));break;case"fs:#decl":i||(t=t.replace(pu,a));break;case"fs:#main-start":i||(t=t.replace(AR,c=>c+a));break;case"fs:#main-end":i||(t=t.replace(IR,c=>a+c));break;default:t=t.replace(o,c=>c+a)}}return t=t.replace(pu,""),r&&(t=t.replace(/\}\s*$/,o=>o+S6[e])),t}function Sa(t){let e={};return Xe(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(let r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function Ca(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}var SR=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],C6=[...SR,[Ca("attribute"),"in $1"],[Ca("varying"),"out $1"]],M6=[...SR,[Ca("varying"),"in $1"]],CR=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],D6=[...CR,[Ca("in"),"attribute $1"],[Ca("out"),"varying $1"]],P6=[...CR,[Ca("in"),"varying $1"]],Px="gl_FragColor",Rx=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,R6=/void\s+main\s*\([^)]*\)\s*\{\n?/;function Nx(t,e,n){switch(e){case 300:return n?hp(t,C6):N6(t);case 100:return n?hp(t,D6):O6(t);default:throw new Error("unknown GLSL version ".concat(e))}}function hp(t,e){for(let[n,r]of e)t=t.replace(n,r);return t}function N6(t){t=hp(t,M6);let e=t.match(Rx);if(e){let n=e[1];t=t.replace(new RegExp("\\b".concat(Px,"\\b"),"g"),n)}else{let n="fragmentColor";t=t.replace(R6,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(Px,"\\b"),"g"),n)}return t}function O6(t){t=hp(t,P6);let e=t.match(Rx);if(e){let n=e[1];t=t.replace(Rx,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),Px)}return t}var L6=`

`.concat(pu,`

`),DR={vs:"vertex",fs:"fragment"},B6=`precision highp float;

`;function Ox(t,e){let{vs:n,fs:r}=e,i=gR(e.modules||[]);return{gl:t,vs:MR(t,Object.assign({},e,{source:n,type:"vs",modules:i})),fs:MR(t,Object.assign({},e,{source:r,type:"fs",modules:i})),getUniforms:k6(i)}}function MR(t,e){let{id:n,source:r,type:i,modules:o,defines:s={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:u=!0,log:d}=e;Xe(typeof r=="string","shader source must be a string");let f=i==="vs",h=r.split(`
`),p=100,g="",y=r;h[0].indexOf("#version ")===0?(p=300,g=h[0],y=h.slice(1).join(`
`)):g="#version ".concat(p);let _={};o.forEach(F=>{Object.assign(_,F.getDefines())}),Object.assign(_,s);let E=u?"".concat(g,`
`).concat(j6({id:n,source:r,type:i}),`
`).concat(F6({type:i}),`
`).concat(bR(t),`
`).concat(xR(t,p,!f),`
`).concat(U6(_),`
`).concat(f?"":B6,`
`):"".concat(g,`
`),A=V6(a),I={},C={},D={};for(let F in c){let z=typeof c[F]=="string"?{injection:c[F],order:0}:c[F],j=F.match(/^(v|f)s:(#)?([\w-]+)$/);if(j){let k=j[2],B=j[3];k?B==="decl"?C[F]=[z]:D[F]=[z]:I[F]=[z]}else D[F]=[z]}for(let F of o){d&&F.checkDeprecations(y,d);let z=F.getModuleSource(i,p);E+=z;let j=F.injections[i];for(let k in j){let B=k.match(/^(v|f)s:#([\w-]+)$/);if(B){let O=B[2]==="decl"?C:D;O[k]=O[k]||[],O[k].push(j[k])}else I[k]=I[k]||[],I[k].push(j[k])}}return E+=L6,E=fp(E,i,C),E+=z6(A[i],I),E+=y,E=fp(E,i,D),E=Nx(E,l?100:p,f),E}function k6(t){return function(n){let r={};for(let i of t){let o=i.getUniforms(n,r);Object.assign(r,o)}return r}}function F6(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(DR[e].toUpperCase(),`
`)}function j6(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(DR[r],`

`):""}function U6(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(let r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;let i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function z6(t,e){let n="";for(let r in t){let i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){let o=e[r];o.sort((s,a)=>s.order-a.order);for(let s of o)n+="  ".concat(s.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function V6(t){let e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();let[i,o]=n.split(":"),s=n.replace(/\(.+/,"");e[i][s]=Object.assign(r,{signature:o})}),e}var $6="void main() {gl_FragColor = vec4(0);}",PR=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,G6=`#version 300 es
`.concat(PR);function pp(t,e){e=Array.isArray(e)?e:[e];let n=t.replace(/^\s+/,"").split(/\s+/),[r,i,o]=n;if(!e.includes(r)||!i||!o)return null;let s=o.split(";")[0];return{qualifier:r,type:i,name:s}}function mu(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?G6:e>300?"#version ".concat(e,`
`).concat(PR):$6;let o=RR(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function Lx(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Xe(!1),null}}function Bx(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Xe(!1),null}}function RR(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Xe(!1),null}}var H6=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,mp={name:"fp32",vs:H6,fs:null};function gp(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}var QIe=1/Math.PI*180,eTe=1/180*Math.PI,Je={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function kx(t,{precision:e=Je.precision}={}){return t=W6(t),"".concat(parseFloat(t.toPrecision(e)))}function Bn(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ve(t,e,n){return q6(t,r=>Math.max(e,Math.min(n,r)))}function es(t,e,n){return Bn(t)?t.map((r,i)=>es(r,e[i],n)):n*e+(1-n)*t}function kn(t,e,n){let r=Je.EPSILON;n&&(Je.EPSILON=n);try{if(t===e)return!0;if(Bn(t)&&Bn(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!kn(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=Je.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{Je.EPSILON=r}}function W6(t){return Math.round(t/Je.EPSILON)*Je.EPSILON}function Z6(t){return t.clone?t.clone():new Array(t.length)}function q6(t,e,n){if(Bn(t)){let r=t;n=n||Z6(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function X6(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}var Li=class extends X6(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Bn(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Je)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+kx(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!kn(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){let o=e[i];this[i]=o+r*(n[i]-o)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(let n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(let n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(Je.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}};function J6(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function xe(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Ma(t,e,n=""){if(Je.debug&&!J6(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}var Da=class extends Li{get x(){return this[0]}set x(e){this[0]=xe(e)}get y(){return this[1]}set y(e){this[1]=xe(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){let i=this[r]-e[r];n+=i*i}return xe(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return xe(n)}normalize(){let e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(let n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(let n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return gp(e>=0&&e<this.ELEMENTS,"index is out of range"),xe(this[e])}setComponent(e,n){return gp(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}};var Fn=1e-6,xt=typeof Float32Array<"u"?Float32Array:Array;var uTe=Math.PI/180,dTe=180/Math.PI;function Y6(){var t=new xt(2);return xt!=Float32Array&&(t[0]=0,t[1]=0),t}function Ra(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function vp(t,e){return t[0]=-e[0],t[1]=-e[1],t}function yp(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function OR(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}var fTe=(function(){var t=Y6();return function(e,n,r,i,o,s){var a,c;for(n||(n=2),r||(r=0),i?c=Math.min(i*n+r,e.length):c=e.length,a=r;a<c;a+=n)t[0]=e[a],t[1]=e[a+1],o(t,t,s),e[a]=t[0],e[a+1]=t[1];return e}})();function LR(t,e,n){let r=e[0],i=e[1],o=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/o,t[1]=(n[1]*r+n[5]*i)/o,t}function _p(t,e,n){let r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o||1;return t[0]=(n[0]*r+n[4]*i+n[8]*o)/s,t[1]=(n[1]*r+n[5]*i+n[9]*o)/s,t[2]=(n[2]*r+n[6]*i+n[10]*o)/s,t}function BR(t,e,n){let r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function kR(t,e,n){let r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t[3]=e[3],t}function FR(t,e,n){let r=e[0],i=e[1],o=e[2];return t[0]=n[0]*r+n[3]*i+n[6]*o,t[1]=n[1]*r+n[4]*i+n[7]*o,t[2]=n[2]*r+n[5]*i+n[8]*o,t[3]=e[3],t}function jx(){var t=new xt(3);return xt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function K6(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function Ux(t,e,n){var r=new xt(3);return r[0]=t,r[1]=e,r[2]=n,r}function Q6(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function jR(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function UR(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function zx(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Na(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[0],a=n[1],c=n[2];return t[0]=i*c-o*a,t[1]=o*s-r*c,t[2]=r*a-i*s,t}function Oa(t,e,n){var r=e[0],i=e[1],o=e[2],s=n[3]*r+n[7]*i+n[11]*o+n[15];return s=s||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/s,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/s,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/s,t}function zR(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function bp(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],c=e[1],l=e[2],u=i*l-o*c,d=o*a-r*l,f=r*c-i*a;return u=u+u,d=d+d,f=f+f,t[0]=a+s*u+i*f-o*d,t[1]=c+s*d+o*u-r*f,t[2]=l+s*f+r*d-i*u,t}function VR(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function $R(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function GR(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function HR(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2],c=Math.sqrt((n*n+r*r+i*i)*(o*o+s*s+a*a)),l=c&&zx(t,e)/c;return Math.acos(Math.min(Math.max(l,-1),1))}var WR=Q6;var ZR=K6;var pTe=(function(){var t=jx();return function(e,n,r,i,o,s){var a,c;for(n||(n=3),r||(r=0),i?c=Math.min(i*n+r,e.length):c=e.length,a=r;a<c;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();var Vx=[0,0,0],xp,je=class t extends Da{static get ZERO(){return xp||(xp=new t(0,0,0),Object.freeze(xp)),xp}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&Bn(e)?this.copy(e):(Je.debug&&(xe(e),xe(n),xe(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return Je.debug&&(xe(e.x),xe(e.y),xe(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=xe(e)}angle(e){return HR(this,e)}cross(e){return Na(this,this,e),this.check()}rotateX({radians:e,origin:n=Vx}){return VR(this,this,n,e),this.check()}rotateY({radians:e,origin:n=Vx}){return $R(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=Vx}){return GR(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return Oa(this,this,e),this.check()}transformAsVector(e){return _p(this,this,e),this.check()}transformByMatrix3(e){return zR(this,this,e),this.check()}transformByMatrix2(e){return BR(this,this,e),this.check()}transformByQuaternion(e){return bp(this,this,e),this.check()}};var Ep,wp=class t extends Da{static get ZERO(){return Ep||(Ep=new t(0,0,0,0),Object.freeze(Ep)),Ep}constructor(e=0,n=0,r=0,i=0){super(-0,-0,-0,-0),Bn(e)&&arguments.length===1?this.copy(e):(Je.debug&&(xe(e),xe(n),xe(r),xe(i)),this[0]=e,this[1]=n,this[2]=r,this[3]=i)}set(e,n,r,i){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return Je.debug&&(xe(e.x),xe(e.y),xe(e.z),xe(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=xe(e)}get w(){return this[3]}set w(e){this[3]=xe(e)}transform(e){return Oa(this,this,e),this.check()}transformByMatrix3(e){return FR(this,this,e),this.check()}transformByMatrix2(e){return kR(this,this,e),this.check()}transformByQuaternion(e){return bp(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}};var Ap=class extends Li{toString(){let e="[";if(Je.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=xe(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){let r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){let r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}};function qR(){var t=new xt(9);return xt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function t8(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function XR(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],s=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=s,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function vu(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],f=e[10],h=e[11],p=e[12],g=e[13],y=e[14],_=e[15],E=n*a-r*s,A=n*c-i*s,I=n*l-o*s,C=r*c-i*a,D=r*l-o*a,F=i*l-o*c,z=u*g-d*p,j=u*y-f*p,k=u*_-h*p,B=d*y-f*g,W=d*_-h*g,O=f*_-h*y,Z=E*O-A*W+I*B+C*k-D*j+F*z;return Z?(Z=1/Z,t[0]=(a*O-c*W+l*B)*Z,t[1]=(i*W-r*O-o*B)*Z,t[2]=(g*F-y*D+_*C)*Z,t[3]=(f*D-d*F-h*C)*Z,t[4]=(c*k-s*O-l*j)*Z,t[5]=(n*O-i*k+o*j)*Z,t[6]=(y*I-p*F-_*A)*Z,t[7]=(u*F-f*I+h*A)*Z,t[8]=(s*W-a*k+l*z)*Z,t[9]=(r*k-n*W-o*z)*Z,t[10]=(p*D-g*I+_*E)*Z,t[11]=(d*I-u*D-h*E)*Z,t[12]=(a*j-s*B-c*z)*Z,t[13]=(n*B-r*j+i*z)*Z,t[14]=(g*A-p*C-y*E)*Z,t[15]=(u*C-d*A+f*E)*Z,t):null}function JR(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],c=t[7],l=t[8],u=t[9],d=t[10],f=t[11],h=t[12],p=t[13],g=t[14],y=t[15],_=e*s-n*o,E=e*a-r*o,A=n*a-r*s,I=l*p-u*h,C=l*g-d*h,D=u*g-d*p,F=e*D-n*C+r*I,z=o*D-s*C+a*I,j=l*A-u*E+d*_,k=h*A-p*E+g*_;return c*F-i*z+y*j-f*k}function hr(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],c=e[5],l=e[6],u=e[7],d=e[8],f=e[9],h=e[10],p=e[11],g=e[12],y=e[13],_=e[14],E=e[15],A=n[0],I=n[1],C=n[2],D=n[3];return t[0]=A*r+I*a+C*d+D*g,t[1]=A*i+I*c+C*f+D*y,t[2]=A*o+I*l+C*h+D*_,t[3]=A*s+I*u+C*p+D*E,A=n[4],I=n[5],C=n[6],D=n[7],t[4]=A*r+I*a+C*d+D*g,t[5]=A*i+I*c+C*f+D*y,t[6]=A*o+I*l+C*h+D*_,t[7]=A*s+I*u+C*p+D*E,A=n[8],I=n[9],C=n[10],D=n[11],t[8]=A*r+I*a+C*d+D*g,t[9]=A*i+I*c+C*f+D*y,t[10]=A*o+I*l+C*h+D*_,t[11]=A*s+I*u+C*p+D*E,A=n[12],I=n[13],C=n[14],D=n[15],t[12]=A*r+I*a+C*d+D*g,t[13]=A*i+I*c+C*f+D*y,t[14]=A*o+I*l+C*h+D*_,t[15]=A*s+I*u+C*p+D*E,t}function ts(t,e,n){var r=n[0],i=n[1],o=n[2],s,a,c,l,u,d,f,h,p,g,y,_;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(s=e[0],a=e[1],c=e[2],l=e[3],u=e[4],d=e[5],f=e[6],h=e[7],p=e[8],g=e[9],y=e[10],_=e[11],t[0]=s,t[1]=a,t[2]=c,t[3]=l,t[4]=u,t[5]=d,t[6]=f,t[7]=h,t[8]=p,t[9]=g,t[10]=y,t[11]=_,t[12]=s*r+u*i+p*o+e[12],t[13]=a*r+d*i+g*o+e[13],t[14]=c*r+f*i+y*o+e[14],t[15]=l*r+h*i+_*o+e[15]),t}function Ba(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function YR(t,e,n,r){var i=r[0],o=r[1],s=r[2],a=Math.sqrt(i*i+o*o+s*s),c,l,u,d,f,h,p,g,y,_,E,A,I,C,D,F,z,j,k,B,W,O,Z,J;return a<Fn?null:(a=1/a,i*=a,o*=a,s*=a,c=Math.sin(n),l=Math.cos(n),u=1-l,d=e[0],f=e[1],h=e[2],p=e[3],g=e[4],y=e[5],_=e[6],E=e[7],A=e[8],I=e[9],C=e[10],D=e[11],F=i*i*u+l,z=o*i*u+s*c,j=s*i*u-o*c,k=i*o*u-s*c,B=o*o*u+l,W=s*o*u+i*c,O=i*s*u+o*c,Z=o*s*u-i*c,J=s*s*u+l,t[0]=d*F+g*z+A*j,t[1]=f*F+y*z+I*j,t[2]=h*F+_*z+C*j,t[3]=p*F+E*z+D*j,t[4]=d*k+g*B+A*W,t[5]=f*k+y*B+I*W,t[6]=h*k+_*B+C*W,t[7]=p*k+E*B+D*W,t[8]=d*O+g*Z+A*J,t[9]=f*O+y*Z+I*J,t[10]=h*O+_*Z+C*J,t[11]=p*O+E*Z+D*J,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Ip(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],c=e[7],l=e[8],u=e[9],d=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=s*i+u*r,t[6]=a*i+d*r,t[7]=c*i+f*r,t[8]=l*i-o*r,t[9]=u*i-s*r,t[10]=d*i-a*r,t[11]=f*i-c*r,t}function KR(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[8],u=e[9],d=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=s*i-u*r,t[2]=a*i-d*r,t[3]=c*i-f*r,t[8]=o*r+l*i,t[9]=s*r+u*i,t[10]=a*r+d*i,t[11]=c*r+f*i,t}function Tp(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],c=e[3],l=e[4],u=e[5],d=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=s*i+u*r,t[2]=a*i+d*r,t[3]=c*i+f*r,t[4]=l*i-o*r,t[5]=u*i-s*r,t[6]=d*i-a*r,t[7]=f*i-c*r,t}function QR(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n+n,a=r+r,c=i+i,l=n*s,u=r*s,d=r*a,f=i*s,h=i*a,p=i*c,g=o*s,y=o*a,_=o*c;return t[0]=1-d-p,t[1]=u+_,t[2]=f-y,t[3]=0,t[4]=u-_,t[5]=1-l-p,t[6]=h+g,t[7]=0,t[8]=f+y,t[9]=h-g,t[10]=1-l-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function eN(t,e,n,r,i,o,s){var a=1/(n-e),c=1/(i-r),l=1/(o-s);return t[0]=o*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o*2*c,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*c,t[10]=(s+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*o*2*l,t[15]=0,t}function n8(t,e,n,r,i){var o=1/Math.tan(e/2);if(t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0){var s=1/(r-i);t[10]=(i+r)*s,t[14]=2*i*r*s}else t[10]=-1,t[14]=-2*r;return t}var $x=n8;function r8(t,e,n,r,i,o,s){var a=1/(e-n),c=1/(r-i),l=1/(o-s);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*c,t[14]=(s+o)*l,t[15]=1,t}var tN=r8;function nN(t,e,n,r){var i,o,s,a,c,l,u,d,f,h,p=e[0],g=e[1],y=e[2],_=r[0],E=r[1],A=r[2],I=n[0],C=n[1],D=n[2];return Math.abs(p-I)<Fn&&Math.abs(g-C)<Fn&&Math.abs(y-D)<Fn?t8(t):(u=p-I,d=g-C,f=y-D,h=1/Math.sqrt(u*u+d*d+f*f),u*=h,d*=h,f*=h,i=E*f-A*d,o=A*u-_*f,s=_*d-E*u,h=Math.sqrt(i*i+o*o+s*s),h?(h=1/h,i*=h,o*=h,s*=h):(i=0,o=0,s=0),a=d*s-f*o,c=f*i-u*s,l=u*o-d*i,h=Math.sqrt(a*a+c*c+l*l),h?(h=1/h,a*=h,c*=h,l*=h):(a=0,c=0,l=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=o,t[5]=c,t[6]=d,t[7]=0,t[8]=s,t[9]=l,t[10]=f,t[11]=0,t[12]=-(i*p+o*g+s*y),t[13]=-(a*p+c*g+l*y),t[14]=-(u*p+d*g+f*y),t[15]=1,t)}function i8(){var t=new xt(4);return xt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function rN(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Cp(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function iN(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}function oN(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function sN(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o;return s>0&&(s=1/Math.sqrt(s)),t[0]=n*s,t[1]=r*s,t[2]=i*s,t[3]=o*s,t}function aN(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function cN(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=s+r*(n[2]-s),t[3]=a+r*(n[3]-a),t}function Yr(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}function lN(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],c=e[1],l=e[2],u=i*l-o*c,d=o*a-r*l,f=r*c-i*a;return u=u+u,d=d+d,f=f+f,t[0]=a+s*u+i*f-o*d,t[1]=c+s*d+o*u-r*f,t[2]=l+s*f+r*d-i*u,t[3]=e[3],t}var MTe=(function(){var t=i8();return function(e,n,r,i,o,s){var a,c;for(n||(n=4),r||(r=0),i?c=Math.min(i*n+r,e.length):c=e.length,a=r;a<c;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],o(t,t,s),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();var dN=(function(t){return t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3",t})(dN||{}),o8=45*Math.PI/180,s8=1,Gx=.1,Hx=500,a8=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),Q=class extends Ap{static get IDENTITY(){return l8()}static get ZERO(){return c8()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return dN}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,o,s,a,c,l,u,d,f,h,p,g,y){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=o,this[5]=s,this[6]=a,this[7]=c,this[8]=l,this[9]=u,this[10]=d,this[11]=f,this[12]=h,this[13]=p,this[14]=g,this[15]=y,this.check()}setRowMajor(e,n,r,i,o,s,a,c,l,u,d,f,h,p,g,y){return this[0]=e,this[1]=o,this[2]=l,this[3]=h,this[4]=n,this[5]=s,this[6]=u,this[7]=p,this[8]=r,this[9]=a,this[10]=d,this[11]=g,this[12]=i,this[13]=c,this[14]=f,this[15]=y,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(a8)}fromObject(e){return this.check()}fromQuaternion(e){return QR(this,e),this.check()}frustum(e){let{left:n,right:r,bottom:i,top:o,near:s=Gx,far:a=Hx}=e;return a===1/0?u8(this,n,r,i,o,s):eN(this,n,r,i,o,s,a),this.check()}lookAt(e){let{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return nN(this,n,r,i),this.check()}ortho(e){let{left:n,right:r,bottom:i,top:o,near:s=Gx,far:a=Hx}=e;return tN(this,n,r,i,o,s,a),this.check()}orthographic(e){let{fovy:n=o8,aspect:r=s8,focalDistance:i=1,near:o=Gx,far:s=Hx}=e;uN(n);let a=n/2,c=i*Math.tan(a),l=c*r;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:o,far:s})}perspective(e){let{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:o=500}=e;return uN(n),$x(this,n,r,i,o),this.check()}determinant(){return JR(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];let r=this.getScale(n),i=1/r[0],o=1/r[1],s=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*o,e[6]=this[6]*s,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*o,e[10]=this[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];let r=this.getScale(n),i=1/r[0],o=1/r[1],s=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*o,e[2]=this[2]*s,e[3]=this[4]*i,e[4]=this[5]*o,e[5]=this[6]*s,e[6]=this[8]*i,e[7]=this[9]*o,e[8]=this[10]*s,e}transpose(){return XR(this,this),this.check()}invert(){return vu(this,this),this.check()}multiplyLeft(e){return hr(this,e,this),this.check()}multiplyRight(e){return hr(this,this,e),this.check()}rotateX(e){return Ip(this,this,e),this.check()}rotateY(e){return KR(this,this,e),this.check()}rotateZ(e){return Tp(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return YR(this,this,e,n),this.check()}scale(e){return Ba(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return ts(this,this,e),this.check()}transform(e,n){return e.length===4?(n=Yr(n||[-0,-0,-0,-0],e,this),Ma(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){let{length:r}=e,i;switch(r){case 2:i=OR(n||[-0,-0],e,this);break;case 3:i=Oa(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ma(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=LR(n||[-0,-0],e,this);break;case 3:r=_p(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Ma(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}};var Mp,Dp;function c8(){return Mp||(Mp=new Q([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Mp)),Mp}function l8(){return Dp||(Dp=new Q,Object.freeze(Dp)),Dp}function uN(t){if(t>Math.PI*2)throw Error("expected radians")}function u8(t,e,n,r,i,o){let s=2*o/(n-e),a=2*o/(i-r),c=(n+e)/(n-e),l=(i+r)/(i-r),u=-1,d=-1,f=-2*o;return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=c,t[9]=l,t[10]=u,t[11]=d,t[12]=0,t[13]=0,t[14]=f,t[15]=0,t}function fN(){var t=new xt(4);return xt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function hN(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Wx(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Zx(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=n[0],c=n[1],l=n[2],u=n[3];return t[0]=r*u+s*a+i*l-o*c,t[1]=i*u+s*c+o*a-r*l,t[2]=o*u+s*l+r*c-i*a,t[3]=s*u-r*a-i*c-o*l,t}function pN(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);return t[0]=r*c+s*a,t[1]=i*c+o*a,t[2]=o*c-i*a,t[3]=s*c-r*a,t}function mN(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);return t[0]=r*c-o*a,t[1]=i*c+s*a,t[2]=o*c+r*a,t[3]=s*c-i*a,t}function gN(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],s=e[3],a=Math.sin(n),c=Math.cos(n);return t[0]=r*c+i*a,t[1]=i*c-r*a,t[2]=o*c+s*a,t[3]=s*c-o*a,t}function vN(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function _u(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=e[3],c=n[0],l=n[1],u=n[2],d=n[3],f,h,p,g,y;return h=i*c+o*l+s*u+a*d,h<0&&(h=-h,c=-c,l=-l,u=-u,d=-d),1-h>Fn?(f=Math.acos(h),p=Math.sin(f),g=Math.sin((1-r)*f)/p,y=Math.sin(r*f)/p):(g=1-r,y=r),t[0]=g*i+y*c,t[1]=g*o+y*l,t[2]=g*s+y*u,t[3]=g*a+y*d,t}function yN(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=n*n+r*r+i*i+o*o,a=s?1/s:0;return t[0]=-n*a,t[1]=-r*a,t[2]=-i*a,t[3]=o*a,t}function _N(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function qx(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var o=(i+1)%3,s=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[o*3+o]-e[s*3+s]+1),t[i]=.5*r,r=.5/r,t[3]=(e[o*3+s]-e[s*3+o])*r,t[o]=(e[o*3+i]+e[i*3+o])*r,t[s]=(e[s*3+i]+e[i*3+s])*r}return t}var bN=rN;var xN=Cp,EN=aN,wN=cN,AN=iN;var IN=oN;var TN=sN;var SN=(function(){var t=jx(),e=Ux(1,0,0),n=Ux(0,1,0);return function(r,i,o){var s=zx(i,o);return s<-.999999?(Na(t,e,i),ZR(t)<1e-6&&Na(t,n,i),UR(t,t),Wx(r,t,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Na(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+s,TN(r,r))}})(),UTe=(function(){var t=fN(),e=fN();return function(n,r,i,o,s,a){return _u(t,r,s,a),_u(e,i,o,a),_u(n,t,e,2*a*(1-a)),n}})(),zTe=(function(){var t=qR();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],TN(e,qx(e,t))}})();var f8=[0,0,0,1],bu=class extends Li{constructor(e=0,n=0,r=0,i=1){super(-0,-0,-0,-0),Array.isArray(e)&&arguments.length===1?this.copy(e):this.set(e,n,r,i)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,r,i){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return qx(this,e),this.check()}fromAxisRotation(e,n){return Wx(this,e,n),this.check()}identity(){return hN(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=xe(e)}get y(){return this[1]}set y(e){this[1]=xe(e)}get z(){return this[2]}set z(e){this[2]=xe(e)}get w(){return this[3]}set w(e){this[3]=xe(e)}len(){return AN(this)}lengthSquared(){return IN(this)}dot(e){return EN(this,e)}rotationTo(e,n){return SN(this,e,n),this.check()}add(e){return bN(this,this,e),this.check()}calculateW(){return vN(this,this),this.check()}conjugate(){return _N(this,this),this.check()}invert(){return yN(this,this),this.check()}lerp(e,n,r){return r===void 0?this.lerp(this,e,n):(wN(this,e,n,r),this.check())}multiplyRight(e){return Zx(this,this,e),this.check()}multiplyLeft(e){return Zx(this,e,this),this.check()}normalize(){let e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,e===0&&(this[3]=1),this.check()}rotateX(e){return pN(this,this,e),this.check()}rotateY(e){return mN(this,this,e),this.check()}rotateZ(e){return gN(this,this,e),this.check()}scale(e){return xN(this,this,e),this.check()}slerp(e,n,r){let i,o,s;switch(arguments.length){case 1:({start:i=f8,target:o,ratio:s}=e);break;case 2:i=this,o=e,s=n;break;default:i=e,o=n,s=r}return _u(this,i,o,s),this.check()}transformVector4(e,n=new wp){return lN(n,e,this),Ma(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}};var Xx=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`;var h8={lightSources:{}};function Jx(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function p8(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t,i={};return e?i["lighting_uAmbientLight.color"]=Jx(e):i["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((o,s)=>{i["lighting_uPointLight[".concat(s,"].color")]=Jx(o),i["lighting_uPointLight[".concat(s,"].position")]=o.position,i["lighting_uPointLight[".concat(s,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((o,s)=>{i["lighting_uDirectionalLight[".concat(s,"].color")]=Jx(o),i["lighting_uDirectionalLight[".concat(s,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=r.length,i}function CN(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h8;if("lightSources"in t){let{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},p8({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){let e={pointLights:[],directionalLights:[]};for(let n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break;default:}return CN({lightSources:e})}return{}}var Pp={name:"lights",vs:Xx,fs:Xx,getUniforms:CN,defines:{MAX_LIGHTS:3}};var m8=new Uint8Array([0,255,255,255]),g8={pickingSelectedColor:null,pickingHighlightColor:m8,pickingActive:!1,pickingAttribute:!1};function v8(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g8,e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{let n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){let n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}var y8=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,_8=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,Rp={name:"picking",vs:y8,fs:_8,getUniforms:v8};var MN=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`;var b8={};function x8(t){let{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(o=>o/255)}}function E8(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b8;if(!("material"in t))return{};let{material:e}=t;return e?x8(e):{lighting_uEnabled:!1}}var ka={name:"phong-lighting",dependencies:[Pp],fs:MN,defines:{LIGHTING_FRAGMENT:1},getUniforms:E8};var DN=`uniform mat4 u_MVPMatrix;
uniform mat4 u_ModelMatrix;
uniform mat4 u_NormalMatrix;

varying vec3 pbr_vPosition;
varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
# ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
# else
varying vec3 pbr_vNormal;
# endif
#endif

void pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)
{
  vec4 pos = u_ModelMatrix * position;
  pbr_vPosition = vec3(pos.xyz) / pos.w;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));
  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));
  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;
  pbr_vTBN = mat3(tangentW, bitangentW, normalW);
#else
  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));
#endif
#endif

#ifdef HAS_UV
  pbr_vUV = uv;
#else
  pbr_vUV = vec2(0.,0.);
#endif
}
`;var PN=`#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)
# error PBR fragment shader: Texture LOD is not available
#endif

#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)
# error PBR fragment shader: Derivatives are not available
#endif


#if (__VERSION__ < 300)
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)
#else
  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)
#endif

precision highp float;

uniform bool pbr_uUnlit;

#ifdef USE_IBL
uniform samplerCube u_DiffuseEnvSampler;
uniform samplerCube u_SpecularEnvSampler;
uniform sampler2D u_brdfLUT;
uniform vec2 u_ScaleIBLAmbient;
#endif

#ifdef HAS_BASECOLORMAP
uniform sampler2D u_BaseColorSampler;
#endif
#ifdef HAS_NORMALMAP
uniform sampler2D u_NormalSampler;
uniform float u_NormalScale;
#endif
#ifdef HAS_EMISSIVEMAP
uniform sampler2D u_EmissiveSampler;
uniform vec3 u_EmissiveFactor;
#endif
#ifdef HAS_METALROUGHNESSMAP
uniform sampler2D u_MetallicRoughnessSampler;
#endif
#ifdef HAS_OCCLUSIONMAP
uniform sampler2D u_OcclusionSampler;
uniform float u_OcclusionStrength;
#endif

#ifdef ALPHA_CUTOFF
uniform float u_AlphaCutoff;
#endif

uniform vec2 u_MetallicRoughnessValues;
uniform vec4 u_BaseColorFactor;

uniform vec3 u_Camera;
#ifdef PBR_DEBUG
uniform vec4 u_ScaleDiffBaseMR;
uniform vec4 u_ScaleFGDSpec;
#endif

varying vec3 pbr_vPosition;

varying vec2 pbr_vUV;

#ifdef HAS_NORMALS
#ifdef HAS_TANGENTS
varying mat3 pbr_vTBN;
#else
varying vec3 pbr_vNormal;
#endif
#endif


struct PBRInfo
{
  float NdotL;
  float NdotV;
  float NdotH;
  float LdotH;
  float VdotH;
  float perceptualRoughness;
  float metalness;
  vec3 reflectance0;
  vec3 reflectance90;
  float alphaRoughness;
  vec3 diffuseColor;
  vec3 specularColor;
  vec3 n;
  vec3 v;
};

const float M_PI = 3.141592653589793;
const float c_MinRoughness = 0.04;

vec4 SRGBtoLINEAR(vec4 srgbIn)
{
#ifdef MANUAL_SRGB
#ifdef SRGB_FAST_APPROXIMATION
  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));
#else
  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);
  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );
#endif
  return vec4(linOut,srgbIn.w);;
#else
  return srgbIn;
#endif
}

vec3 getNormal()
{
#ifndef HAS_TANGENTS
  vec3 pos_dx = dFdx(pbr_vPosition);
  vec3 pos_dy = dFdy(pbr_vPosition);
  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));
  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));
  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);

#ifdef HAS_NORMALS
  vec3 ng = normalize(pbr_vNormal);
#else
  vec3 ng = cross(pos_dx, pos_dy);
#endif

  t = normalize(t - ng * dot(ng, t));
  vec3 b = normalize(cross(ng, t));
  mat3 tbn = mat3(t, b, ng);
#else
  mat3 tbn = pbr_vTBN;
#endif

#ifdef HAS_NORMALMAP
  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;
  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));
#else
  vec3 n = normalize(tbn[2].xyz);
#endif

  return n;
}


#ifdef USE_IBL
vec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)
{
  float mipCount = 9.0;
  float lod = (pbrInputs.perceptualRoughness * mipCount);
  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,
    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;
  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;

#ifdef USE_TEX_LOD
  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;
#else
  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;
#endif

  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;
  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);
  diffuse *= u_ScaleIBLAmbient.x;
  specular *= u_ScaleIBLAmbient.y;

  return diffuse + specular;
}
#endif


vec3 diffuse(PBRInfo pbrInputs)
{
  return pbrInputs.diffuseColor / M_PI;
}

vec3 specularReflection(PBRInfo pbrInputs)
{
  return pbrInputs.reflectance0 +
    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *
    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);
}



float geometricOcclusion(PBRInfo pbrInputs)
{
  float NdotL = pbrInputs.NdotL;
  float NdotV = pbrInputs.NdotV;
  float r = pbrInputs.alphaRoughness;

  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));
  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));
  return attenuationL * attenuationV;
}





float microfacetDistribution(PBRInfo pbrInputs)
{
  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;
  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;
  return roughnessSq / (M_PI * f * f);
}

void PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {
  pbrInputs.NdotL = 1.0;
  pbrInputs.NdotH = 0.0;
  pbrInputs.LdotH = 0.0;
  pbrInputs.VdotH = 1.0;
}

void PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {
  vec3 n = pbrInputs.n;
  vec3 v = pbrInputs.v;
  vec3 l = normalize(lightDirection);
  vec3 h = normalize(l+v);

  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);
  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);
  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);
  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);
}

void PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {
  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);
  PBRInfo_setDirectionalLight(pbrInputs, light_direction);
}

vec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {
  vec3 F = specularReflection(pbrInputs);
  float G = geometricOcclusion(pbrInputs);
  float D = microfacetDistribution(pbrInputs);
  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);
  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);
  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);
}

vec4 pbr_filterColor(vec4 colorUnused)
{
#ifdef HAS_BASECOLORMAP
  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;
#else
  vec4 baseColor = u_BaseColorFactor;
#endif

#ifdef ALPHA_CUTOFF
  if (baseColor.a < u_AlphaCutoff) {
    discard;
  }
#endif

  vec3 color = vec3(0, 0, 0);

  if(pbr_uUnlit){
    color.rgb = baseColor.rgb;
  }
  else{


    float perceptualRoughness = u_MetallicRoughnessValues.y;
    float metallic = u_MetallicRoughnessValues.x;
#ifdef HAS_METALROUGHNESSMAP

    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);
    perceptualRoughness = mrSample.g * perceptualRoughness;
    metallic = mrSample.b * metallic;
#endif
    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);
    metallic = clamp(metallic, 0.0, 1.0);

    float alphaRoughness = perceptualRoughness * perceptualRoughness;

    vec3 f0 = vec3(0.04);
    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);
    diffuseColor *= 1.0 - metallic;
    vec3 specularColor = mix(f0, baseColor.rgb, metallic);
    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);



    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);
    vec3 specularEnvironmentR0 = specularColor.rgb;
    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;

    vec3 n = getNormal();
    vec3 v = normalize(u_Camera - pbr_vPosition);

    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);
    vec3 reflection = -normalize(reflect(v, n));

    PBRInfo pbrInputs = PBRInfo(
      0.0,
      NdotV,
      0.0,
      0.0,
      0.0,
      perceptualRoughness,
      metallic,
      specularEnvironmentR0,
      specularEnvironmentR90,
      alphaRoughness,
      diffuseColor,
      specularColor,
      n,
      v
    );

#ifdef USE_LIGHTS
    PBRInfo_setAmbientLight(pbrInputs);
    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {
      if (i < lighting_uDirectionalLightCount) {
        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);
        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);
      }
    }
    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {
      if (i < lighting_uPointLightCount) {
        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);
        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));
        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);
      }
    }
#endif
#ifdef USE_IBL
    color += getIBLContribution(pbrInputs, n, reflection);
#endif
#ifdef HAS_OCCLUSIONMAP
    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;
    color = mix(color, color * ao, u_OcclusionStrength);
#endif

#ifdef HAS_EMISSIVEMAP
    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;
    color += emissive;
#endif

#ifdef PBR_DEBUG





    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);
    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);
    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);
#endif

  }

  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);
}
`;var Fa={name:"pbr",vs:DN,fs:PN,defines:{LIGHTING_FRAGMENT:1},dependencies:[Pp]};var w8=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,Yx={name:"transform",vs:w8,fs:null};var pr=class t{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new t(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){let n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{vs:n="",fs:r="",defines:i={},inject:o={},varyings:s=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),u=this._getHash(n),d=this._getHash(r),f=l.map(A=>this._getHash(A.name)).sort(),h=s.map(A=>this._getHash(A)),p=Object.keys(i).sort(),g=Object.keys(o).sort(),y=[],_=[];for(let A of p)y.push(this._getHash(A)),y.push(this._getHash(i[A]));for(let A of g)_.push(this._getHash(A)),_.push(this._getHash(o[A]));let E="".concat(u,"/").concat(d,"D").concat(y.join("/"),"M").concat(f.join("/"),"I").concat(_.join("/"),"V").concat(h.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[E]){let A=Ox(this.gl,{vs:n,fs:r,modules:l,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[E]=new Ri(this.gl,{hash:E,vs:A.vs,fs:A.fs,varyings:s,bufferMode:a}),this._getUniforms[E]=A.getUniforms||(I=>{}),this._useCounts[E]=0}return this._useCounts[E]++,this._programCache[E]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){let n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=new Array(this._defaultModules.length+e.length),r={},i=0;for(let o=0,s=this._defaultModules.length;o<s;++o){let a=this._defaultModules[o],c=a.name;n[i++]=a,r[c]=!0}for(let o=0,s=e.length;o<s;++o){let a=e[o],c=a.name;r[c]||(n[i++]=a,r[c]=!0)}return n.length=i,n}};var A8={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function RN(t,e,n){let r={},i=e.indices;for(let o in e.attributes){let s=e.attributes[o],a=I8(o,n);if(o==="indices")i=s;else if(s.constant)r[a]=s.value;else{let c=s.value,l=v({},s);delete l.value,r[a]=[new ie(t,c),l],T8(o,l)}}if(i){let o=i.value||i;L(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');let s={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new ie(t,{data:o,target:34963}),s]}return r}function I8(t,e){let{attributeMap:n=A8}=e||{};return n&&n[t]||t}function T8(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break;default:}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break;default:}L(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}var ja=2,S8=1e4,C8="Model needs drawMode and vertexCount",NN=()=>{},M8={},Rt=class{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{id:r=Me("model")}=n;L(Wr(e)),this.id=r,this.gl=e,this.id=n.id||Me("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||pr.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;let{program:n=null,vs:r,fs:i,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},L(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),C8)}setProps(e){this._setModelProps(e)}delete(){for(let e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){let{program:n,vs:r,fs:i,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:o,defines:s,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return L(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return L(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=RN(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(fr(e))return this;let n={};for(let r in e){let i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();let n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){let n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return Mi(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();let{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:o={},transformFeedback:s=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;this.setAttributes(o),this.updateModuleSettings(n),this.setUniforms(i);let l;$.priority>=ja&&(l=this._logDrawCallStart(ja));let u=this.vertexArray.getDrawParams(),{isIndexed:d=u.isIndexed,indexType:f=u.indexType,indexOffset:h=u.indexOffset,vertexArrayInstanced:p=u.isInstanced}=this.props;p&&!this.isInstanced&&$.warn("Found instanced attributes on non-instanced model",this.id)();let{isInstanced:g,instanceCount:y}=this,{onBeforeRender:_=NN,onAfterRender:E=NN}=this.props;_(),this.program.setUniforms(this.uniforms);let A=this.program.draw(Object.assign(M8,e,{logPriority:l,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:s,isIndexed:d,indexType:f,isInstanced:g,instanceCount:y,offset:d?h:0}));return E(),$.priority>=ja&&this._logDrawCallEnd(l,c,r),A}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e,{parameters:o}=e;r&&this._setFeedbackBuffers(r),n&&(o=Object.assign({},o,{35977:n})),i.forEach(s=>s.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:o}))}finally{i.forEach(s=>s.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{let{vs:r,fs:i,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:o,inject:s,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}L(n instanceof Ri,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new du(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(let e in this.geometryBuffers){let n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof ie&&n.delete()}}_setAnimationProps(e){this.animated&&L(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(fr(e))return this;let{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new Ni(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){let n=e>3?0:S8;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),$.group(ja,">>> DRAWING MODEL ".concat(this.id),{collapsed:$.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;let o=wx({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:s,unusedTable:a,unusedCount:c}=up({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:l,count:u}=up({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});u>0&&$.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&$.log("UNUSED UNIFORMS",Object.keys(a))();let d=Ax(this.vertexArray.configuration);$.table(e,o)(),$.table(e,s)(),$.table(e+1,d)(),i&&i.log({logLevel:ja,message:"Rendered to ".concat(i.id)}),$.groupEnd(ja)()}};var Np=class{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(let n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){let{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof ie?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(let e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&L(Y(this.gl))}_getFeedbackBuffers(e){let{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(let i in this.feedbackMap){let o=this.feedbackMap[i];i in n&&(r[o]=i)}Object.assign(r,e.feedbackBuffers);for(let i in r){let o=r[i];if(typeof o=="string"){let s=n[o],{byteLength:a,usage:c,accessor:l}=s;r[i]=this._createNewBuffer(i,{byteLength:a,usage:c,accessor:l})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);let r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n,{program:i}=r;e.transformFeedback=new Ni(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){let{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;let n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(let i in this.feedbackMap){let o=this.feedbackMap[i];n[i]=e.feedbackBuffers[o],r[o]=e.sourceBuffers[i],L(r[o]instanceof ie)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){let r=new ie(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}};var D8="transform_uSampler_",Op="transform_uSize_",ON="transform_position";function LN(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,s=Object.keys(n).length,a=null,c={},l=e,u={};if(s>0||r){let d=l.split(`
`),f=d.slice();if(d.forEach((h,p,g)=>{if(s>0){let y=O8(h,n);if(y){let{updatedLine:_,inject:E}=y;f[p]=_,u=Sa([u,E]),Object.assign(c,y.samplerTextureMap),s--}}r&&!a&&(a=N8(h,r))}),r){L(i);let h="".concat(Op).concat(r),p="uniform vec2 ".concat(h,`;
`),g="     vec2 ".concat(ON," = transform_getPos(").concat(h,`);
     gl_Position = vec4(`).concat(ON,`, 0, 1.);
`);u=Sa([u,{"vs:#decl":p,"vs:#main-start":g}])}l=f.join(`
`)}return{vs:l,targetTextureType:a,inject:u,samplerTextureMap:c}}function BN(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t,i={},o,s;n&&({width:o,height:s}=r,i["".concat(Op).concat(n)]=[o,s]);for(let a in e)({width:o,height:s}=e[a]),i["".concat(Op).concat(a)]=[o,s];return i}function P8(t){return pp(t,["attribute","in"])}function R8(t){let e="".concat(D8).concat(t),n="".concat(Op).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function N8(t,e){let n=pp(t,["varying","out"]);return n&&n.name===e?n.type:null}function O8(t,e){let n={},r=P8(t);if(!r)return null;let{type:i,name:o}=r;if(o&&e[o]){let s="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=R8(o),u=Lx(i),d="  ".concat(i," ").concat(o," = transform_getInput(").concat(a,", ").concat(c,").").concat(u,`;
`);return n[a]=o,{updatedLine:s,inject:{"vs:#decl":l,"vs:#main-start":d},samplerTextureMap:n}}return null}var L8={10241:9728,10240:9728,10242:33071,10243:33071},B8="transform_output",Lp=class{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],s=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters),l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){s.transform_elementID=this.elementIDBuffer;for(let d in this.samplerTextureMap){let f=this.samplerTextureMap[d];a[d]=r[f]}this._setSourceTextureParameters();let u=BN({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(a,u)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,i.width,i.height]),{attributes:s,framebuffer:i,uniforms:a,discard:l,parameters:c}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){let{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{framebuffer:n}=this.bindings[this.currentIndex],r=qr(n);if(!e)return r;let i=r.constructor,o=Bx(this.targetTextureType),s=new i(r.length*o/4),a=0;for(let c=0;c<r.length;c+=4)for(let l=0;l<o;l++)s[a++]=r[c+l];return s}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){let{sourceTextures:n,textureOrReference:r}=e;if(r instanceof ve)return r;let i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,o=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:o}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;let n=new Float32Array(e);n.forEach((r,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new ie(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){let{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){let{sourceBuffers:r,sourceTextures:i,targetTexture:o}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),o){e.targetTexture=o;let{width:s,height:a}=o,{framebuffer:c}=e;c?(c.update({attachments:{36064:o},resizeAttachments:!1}),c.resize({width:s,height:a})):e.framebuffer=new ye(this.gl,{id:"transform-framebuffer",width:s,height:a,attachments:{36064:o}})}return e}_setSourceTextureParameters(){let e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(let r in n)n[r].setParameters(L8)}_swapTextures(e){if(!this._swapTexture)return null;let n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;let r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){let n=np(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:s,inject:a,samplerTextureMap:c}=LN({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),l=Sa([e.inject||{},a]);this.targetTextureType=s,this.samplerTextureMap=c;let u=e._fs||mu({version:wa(i),input:this.targetTextureVarying,inputType:s,output:B8}),d=this.hasSourceTextures||this.targetTextureVarying?[Yx].concat(e.modules||[]):e.modules;return{vs:i,fs:u,modules:d,uniforms:o,inject:l}}};var mr=class{static isSupported(e){return Y(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){let{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1,n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let r of n)e=e||r.swap();L(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let r of n){let i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);let n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new Rt(n,Object.assign({},e,{fs:e.fs||mu({version:wa(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e),r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){k8(n)&&(this.bufferTransform=new Np(e,n)),F8(n)&&(this.textureTransform=new Lp(e,n)),L(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e),r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(let i of r)n=Object.assign(n,i.getDrawOptions(n));return n}};function k8(t){return!!(!fr(t.feedbackBuffers)||!fr(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function F8(t){return!!(!fr(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}var kN={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},ht=class{static get DRAW_MODE(){return kN}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:n=Me("geometry"),drawMode:r=kN.TRIANGLES,attributes:i={},indices:o=null,vertexCount:s=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=s||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?v({indices:this.indices},this.attributes):this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(let r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,L(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(L(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(let i in e){let o=e[i],{value:s,size:a,constant:c}=o;!c&&s&&a>=1&&(r=Math.min(r,s.length/a))}return L(Number.isFinite(r)),r}};var j8={x:[2,0,1],y:[0,1,2],z:[1,2,0]},ns=class extends ht{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:n=Me("truncated-code-geometry")}=e,{indices:r,attributes:i}=U8(e);super(S(v({},e),{id:n,indices:r,attributes:v(v({},i),e.attributes)}))}};function U8(t){let{bottomRadius:e=0,topRadius:n=0,height:r=1,nradial:i=10,nvertical:o=10,verticalAxis:s="y",topCap:a=!1,bottomCap:c=!1}=t,l=(a?2:0)+(c?2:0),u=(i+1)*(o+1+l),d=Math.atan2(e-n,r),f=Math.sin,h=Math.cos,p=Math.PI,g=h(d),y=f(d),_=a?-2:0,E=o+(c?2:0),A=i+1,I=new Uint16Array(i*(o+l)*6),C=j8[s],D=new Float32Array(u*3),F=new Float32Array(u*3),z=new Float32Array(u*2),j=0,k=0;for(let B=_;B<=E;B++){let W=B/o,O=r*W,Z;B<0?(O=0,W=1,Z=e):B>o?(O=r,W=1,Z=n):Z=e+(n-e)*(B/o),(B===-2||B===o+2)&&(Z=0,W=0),O-=r/2;for(let J=0;J<A;J++){let q=f(J*p*2/i),Ie=h(J*p*2/i);D[j+C[0]]=q*Z,D[j+C[1]]=O,D[j+C[2]]=Ie*Z,F[j+C[0]]=B<0||B>o?0:q*g,F[j+C[1]]=B<0?-1:B>o?1:y,F[j+C[2]]=B<0||B>o?0:Ie*g,z[k+0]=J/i,z[k+1]=W,k+=2,j+=3}}for(let B=0;B<o+l;B++)for(let W=0;W<i;W++){let O=(B*i+W)*6;I[O+0]=A*(B+0)+0+W,I[O+1]=A*(B+0)+1+W,I[O+2]=A*(B+1)+1+W,I[O+3]=A*(B+0)+0+W,I[O+4]=A*(B+1)+1+W,I[O+5]=A*(B+1)+0+W}return{indices:I,attributes:{POSITION:{size:3,value:D},NORMAL:{size:3,value:F},TEXCOORD_0:{size:2,value:z}}}}var Ua=class extends ns{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:n=Me("cone-geometry"),radius:r=1,cap:i=!0}=e;super(S(v({},e),{id:n,topRadius:0,topCap:!!i,bottomCap:!!i,bottomRadius:r}))}};var z8=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),V8=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),$8=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),G8=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),H8={POSITION:{size:3,value:new Float32Array(V8)},NORMAL:{size:3,value:new Float32Array($8)},TEXCOORD_0:{size:2,value:new Float32Array(G8)}},za=class extends ht{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:n=Me("cube-geometry")}=e;super(S(v({},e),{id:n,indices:{size:1,value:new Uint16Array(z8)},attributes:v(v({},H8),e.attributes)}))}};var Va=class extends ns{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:n=Me("cylinder-geometry"),radius:r=1}=e;super(S(v({},e),{id:n,bottomRadius:r,topRadius:r}))}};var $a=class extends ht{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:n=Me("sphere-geometry")}=e,{indices:r,attributes:i}=W8(e);super(S(v({},e),{id:n,indices:r,attributes:v(v({},i),e.attributes)}))}};function W8(t){let{nlat:e=10,nlong:n=10}=t,{radius:r=1}=t,s=Math.PI-0,l=2*Math.PI-0,u=(e+1)*(n+1);if(typeof r=="number"){let _=r;r=(E,A,I,C,D)=>_}let d=new Float32Array(u*3),f=new Float32Array(u*3),h=new Float32Array(u*2),p=u>65535?Uint32Array:Uint16Array,g=new p(e*n*6);for(let _=0;_<=e;_++)for(let E=0;E<=n;E++){let A=E/n,I=_/e,C=E+_*(n+1),D=C*2,F=C*3,z=l*A,j=s*I,k=Math.sin(z),B=Math.cos(z),W=Math.sin(j),O=Math.cos(j),Z=B*W,J=O,q=k*W,Ie=r(Z,J,q,A,I);d[F+0]=Ie*Z,d[F+1]=Ie*J,d[F+2]=Ie*q,f[F+0]=Z,f[F+1]=J,f[F+2]=q,h[D+0]=A,h[D+1]=1-I}let y=n+1;for(let _=0;_<n;_++)for(let E=0;E<e;E++){let A=(_*e+E)*6;g[A+0]=E*y+_,g[A+1]=E*y+_+1,g[A+2]=(E+1)*y+_,g[A+3]=(E+1)*y+_,g[A+4]=E*y+_+1,g[A+5]=(E+1)*y+_+1}return{indices:{size:1,value:g},attributes:{POSITION:{size:3,value:d},NORMAL:{size:3,value:f},TEXCOORD_0:{size:2,value:h}}}}var Z8=1,q8=1,Bi=class{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){let{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=e,s=Z8++,a={time:0,delay:n,duration:r,rate:i,repeat:o};return this._setChannelTime(a,this.time),this.channels.set(s,a),s}removeChannel(e){this.channels.delete(e);for(let[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){let n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;let n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);let n=this.channels.values();for(let i of n)this._setChannelTime(i,this.time);let r=this.animations.values();for(let i of r){let{animation:o,channel:s}=i;o.setTime(this.getTime(s))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){let r=q8++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){let r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}};var FN="#define SMOOTH_EDGE_RADIUS 0.5",X8=`
`.concat(FN,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),J8=`
`.concat(FN,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),jN={name:"geometry",vs:X8,fs:J8};var le={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(le,"IDENTITY",{get:()=>(K.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});var Ft={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},ki={common:0,meters:1,pixels:2},Qx={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},jn={DRAW:"draw",MASK:"mask"};var Y8=Object.keys(le).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(le[t],";")).join(""),K8=Object.keys(Ft).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Ft[t],";")).join(""),Q8=Object.keys(ki).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(ki[t],";")).join(""),UN="".concat(Y8,`
`).concat(K8,`
`).concat(Q8,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}

//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function e9(t,e){if(t===e)return!0;if(Array.isArray(t)){let n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function Fi(t){let e={},n;return r=>{for(let i in r)if(!e9(r[i],e[i])){n=t(r),e=r;break}return n}}var zN=[0,0,0,0],t9=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],VN=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n9=[0,0,0],$N=[0,0,0],r9=Fi(o9);function eE(t,e,n=$N){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,o=!0;switch(e===le.LNGLAT_OFFSETS||e===le.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Ft.WEB_MERCATOR:(e===le.LNGLAT||e===le.CARTESIAN)&&(i=[0,0,0],o=!1);break;case Ft.WEB_MERCATOR_AUTO_OFFSET:e===le.LNGLAT?r=i:e===le.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case Ft.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case Ft.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:o}}function i9(t,e,n){let{viewMatrixUncentered:r,projectionMatrix:i}=t,{viewMatrix:o,viewProjectionMatrix:s}=t,a=zN,c=zN,l=t.cameraPosition,{geospatialOrigin:u,shaderCoordinateOrigin:d,offsetMode:f}=eE(t,e,n);return f&&(c=t.projectPosition(u||d),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=Yr([],c,s),o=r||o,s=hr([],i,o),s=hr([],s,t9)),{viewMatrix:o,viewProjectionMatrix:s,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:d,geospatialOrigin:u}}function GN({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=le.DEFAULT,coordinateOrigin:i=$N,autoWrapLongitude:o=!1}){r===le.DEFAULT&&(r=t.isGeospatial?le.LNGLAT:le.CARTESIAN);let s=r9({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return s.project_uWrapLongitude=o,s.project_uModelMatrix=n||VN,s}function o9({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){let{projectionCenter:i,viewProjectionMatrix:o,originCommon:s,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=i9(t,n,r),u=t.getDistanceScales(),d=[t.width*e,t.height*e],f=Yr([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,h={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:s.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:d,project_uDevicePixelRatio:e,project_uFocalDistance:f,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:n9,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:VN,project_uCameraPosition:a};if(l){let p=t.getDistanceScales(l);switch(n){case le.METER_OFFSETS:h.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,h.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case le.LNGLAT:case le.LNGLAT_OFFSETS:t._pseudoMeters||(h.project_uCommonUnitsPerMeter=p.unitsPerMeter),h.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,h.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case le.CARTESIAN:h.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],h.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break;default:break}}return h}var s9={};function a9(t=s9){return"viewport"in t?GN(t):{}}var rs={name:"project",dependencies:[mp,jN],vs:UN,getUniforms:a9};var c9=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,gr={name:"project32",dependencies:[rs],vs:c9};function tE(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function ji(t,e){let n=Yr([],e,t);return Cp(n,n,1/n[3]),n}function nE(t,e){let n=t%e;return n<0?e+n:n}function xu(t,e,n){return t<e?e:t>n?n:t}function l9(t){return Math.log(t)*Math.LOG2E}var Ga=Math.log2||l9;function gn(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}var Un=Math.PI,HN=Un/4,zn=Un/180,rE=180/Un,Eu=512,iE=4003e4,Ha=85.051129,WN=1.5;function oE(t){return Ga(t)}function Kr(t){let[e,n]=t;gn(Number.isFinite(e)),gn(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");let r=e*zn,i=n*zn,o=Eu*(r+Un)/(2*Un),s=Eu*(Un+Math.log(Math.tan(HN+i*.5)))/(2*Un);return[o,s]}function Kt(t){let[e,n]=t,r=e/Eu*(2*Un)-Un,i=2*(Math.atan(Math.exp(n/Eu*(2*Un)-Un))-HN);return[r*rE,i*rE]}function sE(t){let{latitude:e}=t;gn(Number.isFinite(e));let n=Math.cos(e*zn);return oE(iE*n)-9}function Wa(t){let{latitude:e,longitude:n,highPrecision:r=!1}=t;gn(Number.isFinite(e)&&Number.isFinite(n));let i=Eu,o=Math.cos(e*zn),s=i/360,a=s/o,c=i/iE/o,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[s,a,c],degreesPerUnit:[1/s,1/a,1/c]};if(r){let u=zn*Math.tan(e*zn)/o,d=s*u/2,f=i/iE*u,h=f/a*c;l.unitsPerDegree2=[0,d,f],l.unitsPerMeter2=[h,0,h]}return l}function wu(t,e){let[n,r,i]=t,[o,s,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=Wa({longitude:n,latitude:r,highPrecision:!0}),u=Kr(t);u[0]+=o*(c[0]+l[0]*s),u[1]+=s*(c[1]+l[1]*s);let d=Kt(u),f=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[d[0],d[1],f]:d}function Bp(t){let{height:e,pitch:n,bearing:r,altitude:i,scale:o,center:s}=t,a=tE();ts(a,a,[0,0,-i]),Ip(a,a,-n*zn),Tp(a,a,r*zn);let c=o/e;return Ba(a,a,[c,c,c]),s&&ts(a,a,jR([],s)),a}function aE(t){let{width:e,height:n,altitude:r,pitch:i=0,offset:o,center:s,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=t,{fovy:u=is(WN)}=t;r!==void 0&&(u=is(r));let d=u*zn,f=i*zn,h=os(u),p=h;s&&(p+=s[2]*a/Math.cos(f)/n);let g=d*(.5+(o?o[1]:0)/n),y=Math.sin(g)*p/Math.sin(xu(Math.PI/2-f-g,.01,Math.PI-.01)),_=Math.sin(f)*y+p,E=p*10,A=Math.min(_*l,E);return{fov:d,aspect:e/n,focalDistance:h,near:c,far:A}}function is(t){return 2*Math.atan(.5/t)*rE}function os(t){return .5/Math.tan(.5*t*zn)}function Za(t,e){let[n,r,i=0]=t;return gn(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),ji(e,[n,r,i,1])}function vn(t,e,n=0){let[r,i,o]=t;if(gn(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return ji(e,[r,i,o,1]);let s=ji(e,[r,i,0,1]),a=ji(e,[r,i,1,1]),c=s[2],l=a[2],u=c===l?0:((n||0)-c)/(l-c);return yp([],s,a,u)}function ss(t){let{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:o=24,offset:s=[0,0]}=t,[[a,c],[l,u]]=r,d=u9(t.padding),f=Kr([a,xu(u,-Ha,Ha)]),h=Kr([l,xu(c,-Ha,Ha)]),p=[Math.max(Math.abs(h[0]-f[0]),i),Math.max(Math.abs(h[1]-f[1]),i)],g=[e-d.left-d.right-Math.abs(s[0])*2,n-d.top-d.bottom-Math.abs(s[1])*2];gn(g[0]>0&&g[1]>0);let y=g[0]/p[0],_=g[1]/p[1],E=(d.right-d.left)/2/y,A=(d.top-d.bottom)/2/_,I=[(h[0]+f[0])/2+E,(h[1]+f[1])/2+A],C=Kt(I),D=Math.min(o,Ga(Math.abs(Math.min(y,_))));return gn(Number.isFinite(D)),{longitude:C[0],latitude:C[1],zoom:D}}function u9(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(gn(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}var ZN=Math.PI/180;function Au(t,e=0){let{width:n,height:r,unproject:i}=t,o={targetZ:e},s=i([0,r],o),a=i([n,r],o),c,l,u=t.fovy?.5*t.fovy*ZN:Math.atan(.5/t.altitude),d=(90-t.pitch)*ZN;return u>d-.01?(c=qN(t,0,e),l=qN(t,n,e)):(c=i([0,0],o),l=i([n,0],o)),[s,a,l,c]}function qN(t,e,n){let{pixelUnprojectionMatrix:r}=t,i=ji(r,[e,0,1,1]),o=ji(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),c=yp([],i,o,a),l=Kt(c);return l.push(n),l}var JN=512;function kp(t){let{width:e,height:n,pitch:r=0}=t,{longitude:i,latitude:o,zoom:s,bearing:a=0}=t;(i<-180||i>180)&&(i=nE(i+180,360)-180),(a<-180||a>180)&&(a=nE(a+180,360)-180);let c=Ga(n/JN);if(s<=c)s=c,o=0;else{let l=n/2/Math.pow(2,s),u=Kt([0,l])[1];if(o<u)o=u;else{let d=Kt([0,JN-l])[1];o>d&&(o=d)}}return{width:e,height:n,longitude:i,latitude:o,zoom:s,pitch:r,bearing:a}}var h9=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,p9=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,m9=Fi(b9),g9=Fi(x9),v9=[0,0,0,1],y9=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function _9(t,e){let[n,r,i]=t,o=vn([n,r,i],e);return Number.isFinite(i)?o:[o[0],o[1],0]}function b9({viewport:t,center:e}){return new Q(t.viewProjectionMatrix).invert().transform(e)}function x9({viewport:t,shadowMatrices:e}){let n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,o=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(s=>_9(s,r));for(let s of e){let a=s.clone().translate(new je(t.center).negate()),c=o.map(u=>a.transform(u)),l=new Q().ortho({left:Math.min(...c.map(u=>u[0])),right:Math.max(...c.map(u=>u[0])),bottom:Math.min(...c.map(u=>u[1])),top:Math.max(...c.map(u=>u[1])),near:Math.min(...c.map(u=>-u[2])),far:Math.max(...c.map(u=>-u[2]))});n.push(l.multiplyRight(s))}return n}function E9(t,e){let{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};let r={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||v9,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=m9({viewport:t.viewport,center:e.project_uCenter}),o=[],s=g9({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){let c=s[a],l=c.clone().translate(new je(t.viewport.center).negate());e.project_uCoordinateSystem===le.LNGLAT&&e.project_uProjectionMode===Ft.WEB_MERCATOR?(s[a]=l,o[a]=i):(s[a]=c.clone().multiplyRight(y9),o[a]=l.transform(i))}for(let a=0;a<s.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=s[a],r["shadow_uProjectCenters[".concat(a,"]")]=o[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}var Iu={name:"shadow",dependencies:[rs],vs:h9,fs:p9,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?E9(t,e):{}};var vr=v({inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},Rp);var w9=[rs],A9=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function YN(t){let e=pr.getDefaultProgramManager(t);for(let n of w9)e.addDefaultModule(n);for(let n of A9)e.addShaderHook(n);return e}var I9=[255,255,255],T9=1,S9=0,as=class{constructor(e={}){m(this,"id",void 0),m(this,"color",void 0),m(this,"intensity",void 0),m(this,"type","ambient");let{color:n=I9}=e,{intensity:r=T9}=e;this.id=e.id||"ambient-".concat(S9++),this.color=n,this.intensity=r}};var C9=[255,255,255],M9=1,D9=[0,0,-1],P9=0,Tu=class{constructor(e={}){m(this,"id",void 0),m(this,"color",void 0),m(this,"intensity",void 0),m(this,"type","directional"),m(this,"direction",void 0),m(this,"shadow",void 0);let{color:n=C9}=e,{intensity:r=M9}=e,{direction:i=D9}=e,{_shadow:o=!1}=e;this.id=e.id||"directional-".concat(P9++),this.color=n,this.intensity=r,this.type="directional",this.direction=new je(i).normalize().toArray(),this.shadow=o}getProjectedLight(e){return this}};var Fp=class{constructor(e,n={id:"pass"}){m(this,"id",void 0),m(this,"gl",void 0),m(this,"props",void 0);let{id:r}=n;this.id=r,this.gl=e,this.props=v({},n)}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}};var yr=class extends Fp{constructor(...e){super(...e),m(this,"_lastRenderIndex",-1)}render(e){let n=this.gl;return Dt(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){let{target:n,moduleParameters:r,viewports:i,views:o,onViewportActive:s,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";let l=this.gl;c&&N9(l),a&&(this._lastRenderIndex=-1);let u=[];for(let d of i){let f=o&&o[d.id];s(d);let h=this._getDrawLayerParams(d,e),p=d.subViewports||[d];for(let g of p){let y=this._drawLayersInViewport(l,{target:n,moduleParameters:r,viewport:g,view:f,pass:e.pass,layers:e.layers},h);u.push(y)}}return u}_getDrawLayerParams(e,{layers:n,pass:r,layerFilter:i,cullRect:o,effects:s,moduleParameters:a}){let c=[],l=KN(this._lastRenderIndex+1),u={layer:n[0],viewport:e,isPicking:r.startsWith("picking"),renderPass:r,cullRect:o},d={};for(let f=0;f<n.length;f++){let h=n[f],p=this._shouldDrawLayer(h,u,i,d),g={shouldDrawLayer:p};p&&(g.layerRenderIndex=l(h,p),g.moduleParameters=this._getModuleParameters(h,s,r,a),g.layerParameters=this.getLayerParameters(h,f,e)),c[f]=g}return c}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:o,viewport:s,view:a},c){let l=R9(e,{moduleParameters:r,target:o,viewport:s});if(a&&a.props.clear){let d=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;Fe(e,{scissorTest:!0,scissor:l},()=>Mi(e,d))}let u={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Dt(e,{viewport:l});for(let d=0;d<n.length;d++){let f=n[d],{shouldDrawLayer:h,layerRenderIndex:p,moduleParameters:g,layerParameters:y}=c[d];if(h&&f.props.pickable&&u.pickableCount++,f.isComposite)u.compositeCount++;else if(h){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),g.viewport=s;try{f._drawLayer({moduleParameters:g,uniforms:{layerIndex:p},parameters:y})}catch(_){f.raiseError(_,"drawing ".concat(f," to ").concat(i))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let s=e.parent;for(;s;){if(!s.props.visible||!s.filterSubLayer(n))return!1;n.layer=s,s=s.parent}if(r){let a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var o;let s=Object.assign(Object.create(((o=e.internalState)===null||o===void 0?void 0:o.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:Ln(this.gl)});if(n)for(let c of n){var a;Object.assign(s,(a=c.getModuleParameters)===null||a===void 0?void 0:a.call(c,e))}return Object.assign(s,this.getModuleParameters(e,n),i)}};function KN(t=0,e={}){let n={},r=(i,o)=>{let s=i.props._offset,a=i.id,c=i.parent&&i.parent.id,l;if(c&&!(c in e)&&r(i.parent,!1),c in n){let u=n[c]=n[c]||KN(e[c],e);l=u(i,o),n[a]=u}else Number.isFinite(s)?(l=s+(e[c]||0),n[a]=null):l=t;return o&&l>=t&&(t=l+1),e[a]=l,l};return r}function R9(t,{moduleParameters:e,target:n,viewport:r}){let i=n&&n.id!=="default-framebuffer",o=e&&e.devicePixelRatio||Ln(t),s=i?n.height:t.drawingBufferHeight,a=r;return[a.x*o,s-(a.y+a.height)*o,a.width*o,a.height*o]}function N9(t){let e=t.drawingBufferWidth,n=t.drawingBufferHeight;Dt(t,{viewport:[0,0,e,n]}),t.clear(16640)}var jp=class extends yr{constructor(e,n){super(e,n),m(this,"shadowMap",void 0),m(this,"depthBuffer",void 0),m(this,"fbo",void 0),this.shadowMap=new ve(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Jt(e,{format:33189,width:1,height:1}),this.fbo=new ye(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){let n=this.fbo;Fe(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{let r=e.viewports[0],i=Ln(this.gl),o=r.width*i,s=r.height*i;(o!==n.width||s!==n.height)&&n.resize({width:o,height:s}),super.render(S(v({},e),{target:n,pass:"shadow"}))})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}};var O9={color:[255,255,255],intensity:1},QN=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],L9=[0,0,0,200/255],Ui=class{constructor(e={}){m(this,"id","lighting-effect"),m(this,"props",null),m(this,"shadowColor",L9),m(this,"shadow",void 0),m(this,"ambientLight",null),m(this,"directionalLights",[]),m(this,"pointLights",[]),m(this,"shadowPasses",[]),m(this,"shadowMaps",[]),m(this,"dummyShadowMap",null),m(this,"programManager",void 0),m(this,"shadowMatrices",void 0);for(let n in e){let r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break;default:}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow)}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=pr.getDefaultProgramManager(e),Iu&&this.programManager.addDefaultModule(Iu)),this.dummyShadowMap||(this.dummyShadowMap=new ve(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){let n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(let e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Iu),this.programManager=null)}_calculateMatrices(){let e=[];for(let n of this.directionalLights){let r=new Q().lookAt({eye:new je(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){let r=new jp(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){let{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new as(O9),this.directionalLights.push(new Tu(QN[0]),new Tu(QN[1])))}};var cE=class{constructor(e={}){m(this,"_pool",[]),m(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:o=0,copy:s=!1,initialize:a=!1,maxCount:c}){let l=i||e&&e.constructor||Float32Array,u=n*r+o;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,u)}let d=1/0;c&&(d=c*r+o);let f=this._allocate(l,u,a,d);return e&&s?f.set(e):a||f.fill(0,0,4),this._release(e),f}release(e){this._release(e)}_allocate(e,n,r,i){let o=Math.max(Math.ceil(n*this.opts.overAlloc),1);o>i&&(o=i);let s=this._pool,a=e.BYTES_PER_ELEMENT*o,c=s.findIndex(l=>l.byteLength>=a);if(c>=0){let l=new e(s.splice(c,1)[0],0,o);return r&&l.fill(0),l}return new e(o)}_release(e){if(!ArrayBuffer.isView(e))return;let n=this._pool,{buffer:r}=e,{byteLength:i}=r,o=n.findIndex(s=>s.byteLength>=i);o<0?n.push(r):(o>0||n.length<this.opts.poolSize)&&n.splice(o,0,r),n.length>this.opts.poolSize&&n.shift()}},Qr=new cE;function Xa(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function tO(t,e){let n=t%e;return n<0?e+n:n}function nO(t){return[t[12],t[13],t[14]]}function rO(t){return{left:qa(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:qa(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:qa(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:qa(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:qa(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:qa(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}var eO=new je;function qa(t,e,n,r){eO.set(t,e,n);let i=eO.len();return{distance:r/i,normal:new je(-t/i,-e/i,-n/i)}}function B9(t){return t-Math.fround(t)}var Su;function Up(t,e){let{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,o=(i-r)/n;Su=Qr.allocate(Su,o,{type:Float32Array,size:n*2});let s=r,a=0;for(;s<i;){for(let c=0;c<n;c++){let l=t[s++];Su[a+c]=l,Su[a+c+n]=B9(l)}a+=n*2}return Su.subarray(0,o*n*2)}var k9=Math.PI/180,F9=Xa(),iO=[0,0,0],j9={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function U9({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:o,near:s,far:a}){let c=t/e,l=n?new Q().orthographic({fovy:r,aspect:c,focalDistance:i,near:s,far:a}):new Q().perspective({fovy:r,aspect:c,near:s,far:a});if(o){let{left:u=0,right:d=0,top:f=0,bottom:h=0}=o,p=Ve((u+t-d)/2,0,t)-t/2,g=Ve((f+e-h)/2,0,e)-e/2;l[8]-=p*2/t,l[9]+=g*2/e}return l}var Qt=class t{constructor(e={}){m(this,"id",void 0),m(this,"x",void 0),m(this,"y",void 0),m(this,"width",void 0),m(this,"height",void 0),m(this,"padding",void 0),m(this,"isGeospatial",void 0),m(this,"zoom",void 0),m(this,"focalDistance",void 0),m(this,"position",void 0),m(this,"modelMatrix",void 0),m(this,"distanceScales",void 0),m(this,"scale",void 0),m(this,"center",void 0),m(this,"cameraPosition",void 0),m(this,"projectionMatrix",void 0),m(this,"viewMatrix",void 0),m(this,"viewMatrixUncentered",void 0),m(this,"viewMatrixInverse",void 0),m(this,"viewProjectionMatrix",void 0),m(this,"pixelProjectionMatrix",void 0),m(this,"pixelUnprojectionMatrix",void 0),m(this,"resolution",void 0),m(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||j9,this.focalDistance=e.focalDistance||1,this.position=e.position||iO,this.modelMatrix=e.modelMatrix||null;let{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Ft.WEB_MERCATOR:Ft.WEB_MERCATOR_AUTO_OFFSET:Ft.IDENTITY}equals(e){return e instanceof t?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&kn(e.projectionMatrix,this.projectionMatrix)&&kn(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){let r=this.projectPosition(e),i=Za(r,this.pixelProjectionMatrix),[o,s]=i,a=n?s:this.height-s;return e.length===2?[o,a]:[o,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){let[i,o,s]=e,a=n?o:this.height-o,c=r&&r*this.distanceScales.unitsPerMeter[2],l=vn([i,a,s],this.pixelUnprojectionMatrix,c),[u,d,f]=this.unprojectPosition(l);return Number.isFinite(s)?[u,d,f]:Number.isFinite(r)?[u,d,r]:[u,d]}projectPosition(e){let[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){let[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){let n=Kr(e);return n[1]=Ve(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Kt(e):e}getBounds(e={}){let n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),o=this.unproject([0,this.height],n),s=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],o[0],s[0]),Math.min(r[1],i[1],o[1],s[1]),Math.max(r[0],i[0],o[0],s[0]),Math.max(r[1],i[1],o[1],s[1])]}getDistanceScales(e){return e?Wa({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,rO(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){let n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=sE({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||Wa({latitude:r,longitude:n}));let i=Math.pow(2,this.zoom);this.scale=i;let{position:o,modelMatrix:s}=e,a=iO;if(o&&(a=s?new Q(s).transformAsVector(o,[]):o),this.isGeospatial){let c=this.projectPosition([n,r,0]);this.center=new je(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){let{viewMatrix:n=F9,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:o,fovy:s=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:u=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new Q().multiplyRight(n).translate(new je(this.center).negate()),this.projectionMatrix=r||U9({width:this.width,height:this.height,orthographic:i,fovyRadians:o||s*k9,focalDistance:u,padding:l,near:a,far:c});let d=Xa();hr(d,d,this.projectionMatrix),hr(d,d,this.viewMatrix),this.viewProjectionMatrix=d,this.viewMatrixInverse=vu([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=nO(this.viewMatrixInverse);let f=Xa(),h=Xa();Ba(f,f,[this.width/2,-this.height/2,1]),ts(f,f,[1,-1,0]),hr(h,f,this.viewProjectionMatrix),this.pixelProjectionMatrix=h,this.pixelUnprojectionMatrix=vu(Xa(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||K.warn("Pixel project matrix not invertible")()}};m(Qt,"displayName","Viewport");var z9=512,V9=4003e4,$9=Math.PI/180;function oO(t){let e=Math.cos(t*$9);return z9/V9/e}var _r=class t extends Qt{constructor(e={}){let{latitude:n=0,longitude:r=0,zoom:i=0,pitch:o=0,bearing:s=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:u,repeat:d=!1,worldOffset:f=0,legacyMeterSizes:h=!1}=e,{width:p,height:g,altitude:y=1.5}=e,_=Math.pow(2,i);p=p||1,g=g||1;let E,A=null;u?(y=u[5]/2,E=is(y)):(e.fovy?(E=e.fovy,y=os(E)):E=is(y),A=aE({width:p,height:g,pitch:o,fovy:E,nearZMultiplier:a,farZMultiplier:c}));let I=Bp({height:g,pitch:o,bearing:s,scale:_,altitude:y});f&&(I=new Q().translate([512*f,0,0]).multiplyLeft(I)),super(S(v(S(v({},e),{width:p,height:g,viewMatrix:I,longitude:r,latitude:n,zoom:i}),A),{fovy:E,focalDistance:y})),m(this,"longitude",void 0),m(this,"latitude",void 0),m(this,"pitch",void 0),m(this,"bearing",void 0),m(this,"altitude",void 0),m(this,"fovy",void 0),m(this,"orthographic",void 0),m(this,"_subViewports",void 0),m(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=o,this.bearing=s,this.altitude=y,this.fovy=E,this.orthographic=l,this._subViewports=d?[]:null,this._pseudoMeters=h,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){let e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){let o=i?new t(S(v({},this),{worldOffset:i})):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);let[n,r]=this.projectFlat(e),i=(e[2]||0)*oO(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);let[n,r]=this.unprojectFlat(e),i=(e[2]||0)/oO(r);return[n,r,i]}addMetersToLngLat(e,n){return wu(e,n)}panByPosition(e,n){let r=vn(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),o=Ra([],i,vp([],r)),s=Ra([],this.center,o),[a,c]=this.unprojectFlat(s);return{longitude:a,latitude:c}}getBounds(e={}){let n=Au(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){let{width:r,height:i}=this,{longitude:o,latitude:s,zoom:a}=ss(v({width:r,height:i,bounds:e},n));return new t({width:r,height:i,longitude:o,latitude:s,zoom:a})}};m(_r,"displayName","WebMercatorViewport");function lE(t,e,n=!1){let r=e.projectPosition(t);if(n&&e instanceof _r){let[i,o,s=0]=t,a=e.getDistanceScales([i,o]);r[2]=s*a.unitsPerMeter[2]}return r}function G9(t){let{viewport:e,modelMatrix:n,coordinateOrigin:r}=t,{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:s}=t;return i===le.DEFAULT&&(i=e.isGeospatial?le.LNGLAT:le.CARTESIAN),o===void 0&&(o=i),s===void 0&&(s=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:o,fromCoordinateOrigin:s}}function uE(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:o}){let[s,a,c=0]=t;switch(n&&([s,a,c]=Yr([],[s,a,c,1],n)),r){case le.LNGLAT:return lE([s,a,c],e,o);case le.LNGLAT_OFFSETS:return lE([s+i[0],a+i[1],c+(i[2]||0)],e,o);case le.METER_OFFSETS:return lE(wu(i,[s,a,c]),e,o);case le.CARTESIAN:default:return e.isGeospatial?[s+i[0],a+i[1],c+i[2]]:e.projectPosition([s,a,c])}}function sO(t,e){let{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:s,fromCoordinateOrigin:a}=G9(e),{geospatialOrigin:c,shaderCoordinateOrigin:l,offsetMode:u}=eE(n,r,i),d=uE(t,{viewport:n,modelMatrix:o,coordinateSystem:s,coordinateOrigin:a,offsetMode:u});if(u){let f=n.projectPosition(c||l);WR(d,d,f)}return d}var zi={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},Ja=Symbol.for("component"),ei=Symbol.for("asyncPropDefaults"),br=Symbol.for("asyncPropOriginal"),Vn=Symbol.for("asyncPropResolved");function Ya(t,e=()=>!0){return Array.isArray(t)?aO(t,e,[]):e(t)?[t]:[]}function aO(t,e,n){let r=-1;for(;++r<t.length;){let i=t[r];Array.isArray(i)?aO(i,e,n):e(i)&&n.push(i)}return n}function cO({target:t,source:e,start:n=0,count:r=1}){let i=e.length,o=r*i,s=0;for(let a=n;s<i;s++)t[a++]=e[s];for(;s<o;)s<o-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+o-s),s=o);return t}var zp=class{constructor(e,n,r){m(this,"id",void 0),m(this,"context",void 0),m(this,"isLoaded",void 0),m(this,"persistent",void 0),m(this,"_loadCount",0),m(this,"_subscribers",new Set),m(this,"_data",void 0),m(this,"_loader",void 0),m(this,"_error",void 0),m(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;let r=++this._loadCount,i=e;typeof e=="string"&&(i=cr(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===r&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(let o of this._subscribers)o.onChange(this.getData())}};var Vp=class{constructor({gl:e,protocol:n}){m(this,"protocol",void 0),m(this,"_context",void 0),m(this,"_resources",void 0),m(this,"_consumers",void 0),m(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let o=this._resources[e];o?o.setData(n,r):(o=new zp(e,n,this._context),this._resources[e]=o),o.persistent=i}remove(e){let n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){let n=this._consumers[e];if(n){for(let r in n){let i=n[r],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){let{_resources:o,protocol:s}=this;e.startsWith(s)&&(e=e.replace(s,""),o[e]||this.add({resourceId:e,data:null,persistent:!1}));let a=o[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(let e in this._resources)this._resources[e].delete()}_track(e,n,r,i){let o=this._consumers,s=o[e]=o[e]||{},a=s[n]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),r&&(s[n]=a,a.onChange=i,a.resourceId=r.id,r.subscribe(a))}_prune(){this._pruneRequest=null;for(let e of Object.keys(this._resources)){let n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}};var H9="layerManager.setLayers",W9="layerManager.activateViewport",$p=class{constructor(e,{deck:n,stats:r,viewport:i,timeline:o}={}){m(this,"layers",void 0),m(this,"context",void 0),m(this,"resourceManager",void 0),m(this,"_lastRenderedLayers",[]),m(this,"_needsRedraw",!1),m(this,"_needsUpdate",!1),m(this,"_nextLayers",null),m(this,"_debug",!1),m(this,"activateViewport",s=>{Ge(W9,this,s),s&&(this.context.viewport=s)}),this.layers=[],this.resourceManager=new Vp({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&YN(e),stats:r||new ar({id:"deck.gl"}),viewport:i||new Qt({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new Bi,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(let e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(let r of this.layers){let i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Ge(H9,this,n,e),this._lastRenderedLayers=e;let r=Ya(e,Boolean);for(let i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){let e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){let r={};for(let s of e)r[s.id]?K.warn("Multiple old layers with same id ".concat(s.id))():r[s.id]=s;let i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let o=!1;for(let s of i)if(s.hasUniformTransition()){o="Uniform transition in ".concat(s);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(e,n,r){for(let i of e){i.context=this.context;let o=n[i.id];o===null&&K.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let s=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),s=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}s&&this._updateSublayersRecursively(s,n,r)}}_finalizeOldLayers(e){for(let n in e){let r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=zi.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=zi.MATCHED,n!==e&&(e.lifecycle=zi.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=zi.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=zi.FINALIZED}catch(n){this._handleError("finalization",n,e)}}};function $n(t,e){if(t===e)return!0;if(!t||!e)return!1;for(let n in t){let r=t[n],i=e[n];if(!(r===i||Array.isArray(r)&&Array.isArray(i)&&$n(r,i)))return!1}return!0}var Gp=class{constructor(e){m(this,"width",void 0),m(this,"height",void 0),m(this,"views",void 0),m(this,"viewState",void 0),m(this,"controllers",void 0),m(this,"timeline",void 0),m(this,"_viewports",void 0),m(this,"_viewportMap",void 0),m(this,"_isUpdating",void 0),m(this,"_needsRedraw",void 0),m(this,"_needsUpdate",void 0),m(this,"_eventManager",void 0),m(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(let e in this.controllers){let n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(let e in this.controllers){let n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){let e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){let n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){let r=this.getViewports(),i={x:e[0],y:e[1]};for(let o=r.length-1;o>=0;--o){let s=r[o];if(s.containsPixel(i)){let a=e.slice();return a[0]-=s.x,a[1]-=s.y,s.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=Ya(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!$n(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):K.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange(S(v({},n),{viewId:e}))}_createController(e,n){let r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>{var s;return(s=this.getView(e.id))===null||s===void 0?void 0:s.makeViewport({viewState:o,width:this.width,height:this.height})}})}_updateController(e,n,r,i){let o=e.controller;if(o){let s=S(v(v({},n),o),{id:e.id,x:r.x,y:r.y,width:r.width,height:r.height});return i||(i=this._createController(e,s)),i&&i.setProps(s),i}return null}_rebuildViewports(){let{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){let o=e[i],s=this.getViewState(o),a=o.makeViewport({viewState:s,width:this.width,height:this.height}),c=n[o.id],l=!!o.controller;l&&!c&&(r=!0),(r||!l)&&c&&(c.finalize(),c=null),this.controllers[o.id]=this._updateController(o,s,a,c),this._viewports.unshift(a)}for(let i in n){let o=n[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}};var Z9=/([0-9]+\.?[0-9]*)(%|px)/;function ti(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":let e=Z9.exec(t);if(e&&e.length>=3){let n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function ni(t,e){return t.relative?Math.round(t.position*e):t.position}function Ue(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}var Vi=class{constructor(e){m(this,"id",void 0),m(this,"viewportInstance",void 0),m(this,"_x",void 0),m(this,"_y",void 0),m(this,"_width",void 0),m(this,"_height",void 0),m(this,"_padding",void 0),m(this,"props",void 0);let{id:n,x:r=0,y:i=0,width:o="100%",height:s="100%",padding:a=null,viewportInstance:c}=e||{};Ue(!c||c instanceof Qt),this.viewportInstance=c,this.id=n||this.constructor.displayName||"view",this.props=S(v({},e),{id:this.id}),this._x=ti(r),this._y=ti(i),this._width=ti(o),this._height=ti(s),this._padding=a&&{left:ti(a.left||0),right:ti(a.right||0),top:ti(a.top||0),bottom:ti(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&$n(this.props,e.props)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);let i=this.getDimensions({width:e,height:n});return new this.ViewportType(v(v(v({},r),this.props),i))}getViewStateId(){let{viewState:e}=this.props;return typeof e=="string"?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;let n=v({},e);for(let r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){let r={x:ni(this._x,e),y:ni(this._y,n),width:ni(this._width,e),height:ni(this._height,n)};return this._padding&&(r.padding={left:ni(this._padding.left,e),top:ni(this._padding.top,n),right:ni(this._padding.right,e),bottom:ni(this._padding.bottom,n)}),r}get controller(){let e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:v({type:this.ControllerType},e):null}};var yn=class{constructor(e){m(this,"_inProgress",void 0),m(this,"_handle",void 0),m(this,"_timeline",void 0),m(this,"time",void 0),m(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){let{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}};var lO=()=>{},dE={BREAK:1,SNAP_TO_END:2,IGNORE:3},q9=t=>t,X9=dE.BREAK,Hp=class{constructor(e){m(this,"getControllerState",void 0),m(this,"props",void 0),m(this,"propsInTransition",void 0),m(this,"transition",void 0),m(this,"onViewStateChange",void 0),m(this,"onStateChange",void 0),m(this,"_onTransitionUpdate",n=>{let{time:r,settings:{interpolator:i,startProps:o,endProps:s,duration:a,easing:c}}=n,l=c(r/a),u=i.interpolateProps(o,s,l);this.propsInTransition=this.getControllerState(v(v({},this.props),u)).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new yn(e.timeline),this.onViewStateChange=e.onViewStateChange||lO,this.onStateChange=e.onStateChange||lO}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1,r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){let{interruption:o,endProps:s}=this.transition.settings;i=v(v({},r),o===dE.SNAP_TO_END?s:this.propsInTransition||r)}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){let{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===dE.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){let r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),o=n.transitionInterpolator,s=o.getDuration?o.getDuration(e,n):n.transitionDuration;if(s===0)return;let a=o.initializeProps(e,i);this.propsInTransition={};let c={duration:s,easing:n.transitionEasing||q9,interpolator:o,interruption:n.transitionInterruption||X9,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(n)}}};var Wp=class{constructor(e){m(this,"_propsToCompare",void 0),m(this,"_propsToExtract",void 0),m(this,"_requiredProps",void 0);let{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(let r of this._propsToCompare)if(!(r in e)||!(r in n)||!kn(e[r],n[r]))return!1;return!0}initializeProps(e,n){let r={},i={};for(let o of this._propsToExtract)(o in e||o in n)&&(r[o]=e[o],i[o]=n[o]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{let r=e[n];Ue(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}};var J9=["longitude","latitude","zoom","bearing","pitch"],Y9=["longitude","latitude","zoom"],xr=class extends Wp{constructor(e={}){let n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:J9,required:Y9},super(r.transitionProps),m(this,"opts",void 0),this.opts=r}initializeProps(e,n){let r=super.initializeProps(e,n),{makeViewport:i,around:o}=this.opts;if(i&&o){let s=i(e),a=i(n),c=s.unproject(o);r.start.around=o,Object.assign(r.end,{around:a.project(c),aroundPosition:c,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){let i={};for(let o of this._propsToExtract)i[o]=es(e[o]||0,n[o]||0,r);if(n.aroundPosition&&this.opts.makeViewport){let o=this.opts.makeViewport(v(v({},n),i));Object.assign(i,o.panByPosition(n.aroundPosition,es(e.around,n.around,r)))}return i}};var $i={transitionDuration:0},K9=300,Zp=t=>1-(1-t)*(1-t),Ka={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},cs={},Gi=class{constructor(e){m(this,"props",void 0),m(this,"state",{}),m(this,"transitionManager",void 0),m(this,"eventManager",void 0),m(this,"onViewStateChange",void 0),m(this,"onStateChange",void 0),m(this,"makeViewport",void 0),m(this,"_controllerState",void 0),m(this,"_events",{}),m(this,"_interactionState",{isDragging:!1}),m(this,"_customEvents",[]),m(this,"_eventStartBlocked",null),m(this,"_panMove",!1),m(this,"invertPan",!1),m(this,"dragMode","rotate"),m(this,"inertia",0),m(this,"scrollZoom",!0),m(this,"dragPan",!0),m(this,"dragRotate",!0),m(this,"doubleClickZoom",!0),m(this,"touchZoom",!0),m(this,"touchRotate",!1),m(this,"keyboard",!0),this.transitionManager=new Hp(S(v({},e),{getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)})),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(let n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;let n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState(v(v({makeViewport:this.makeViewport},this.props),this.state)),this._controllerState}getCenter(e){let{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){let{width:r,height:i}=this.props;if(n&&n.handled)return!1;let o=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return o&&n&&n.stopPropagation(),o}isFunctionKeyPressed(e){let{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){let n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);let{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?K9:0;let{scrollZoom:r=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:s=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(Ka.WHEEL,u&&r),this.toggleEvents(Ka.PAN,u&&(i||o)),this.toggleEvents(Ka.PINCH,u&&(a||c)),this.toggleEvents(Ka.TRIPLE_PAN,u&&c),this.toggleEvents(Ka.DOUBLE_TAP,u&&s),this.toggleEvents(Ka.KEYBOARD,u&&l),this.scrollZoom=r,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=s,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){let i=v(v({},e.getViewportProps()),n),o=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),o){let s=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:s})}}_onTransition(e){this.onViewStateChange(S(v({},e),{interactionState:this._interactionState}))}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){let n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);let i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,$i,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;let n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,$i,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){let{inertia:n}=this;if(this.dragPan&&n&&e.velocity){let r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,S(v({},this._getTransitionProps()),{transitionDuration:n,transitionEasing:Zp}),{isDragging:!1,isPanning:!0})}else{let r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;let n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,$i,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){let{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){let r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,S(v({},this._getTransitionProps()),{transitionDuration:n,transitionEasing:Zp}),{isDragging:!1,isRotating:!0})}else{let r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();let n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=e,s=2/(1+Math.exp(-Math.abs(o*r)));o<0&&s!==0&&(s=1/s);let a=this.controllerState.zoom({pos:n,scale:s});return this.updateViewport(a,S(v({},this._getTransitionProps({around:n})),{transitionDuration:i?250:1}),{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){let n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,$i,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;let n=this.getCenter(e);n[0]-=e.deltaX;let r=this.controllerState.rotate({pos:n});return this.updateViewport(r,$i,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;let{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){let r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,S(v({},this._getTransitionProps()),{transitionDuration:n,transitionEasing:Zp}),{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{let r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){let n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return cs._startPinchRotation=e.rotation,cs._lastPinchEvent=e,this.updateViewport(r,$i,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){let{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){let{rotation:r}=e;n=n.rotate({deltaAngleX:cs._startPinchRotation-r})}return this.updateViewport(n,$i,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),cs._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;let{inertia:n}=this,{_lastPinchEvent:r}=cs;if(this.touchZoom&&n&&r&&e.scale!==r.scale){let i=this.getCenter(e),o=this.controllerState.rotateEnd(),s=Math.log2(e.scale),a=(s-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),c=Math.pow(2,s+a*n/2);o=o.zoom({pos:i,scale:c}).zoomEnd(),this.updateViewport(o,S(v({},this._getTransitionProps({around:i})),{transitionDuration:n,transitionEasing:Zp}),{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{let i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return cs._startPinchRotation=null,cs._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;let n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;let n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:s}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this,c,l={};switch(e.srcEvent.code){case"Minus":c=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),l.isZooming=!0;break;case"Equal":c=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),l.isZooming=!0;break;case"ArrowLeft":n?(c=a.rotateLeft(o),l.isRotating=!0):(c=a.moveLeft(i),l.isPanning=!0);break;case"ArrowRight":n?(c=a.rotateRight(o),l.isRotating=!0):(c=a.moveRight(i),l.isPanning=!0);break;case"ArrowUp":n?(c=a.rotateUp(s),l.isRotating=!0):(c=a.moveUp(i),l.isPanning=!0);break;case"ArrowDown":n?(c=a.rotateDown(s),l.isRotating=!0):(c=a.moveDown(i),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){let{transition:n}=this;return!n||!n.transitionInterpolator?$i:e?S(v({},n),{transitionInterpolator:new xr(S(v(v({},e),n.transitionInterpolator.opts),{makeViewport:this.controllerState.makeViewport}))}):n}};var Qa=class{constructor(e,n){m(this,"_viewportProps",void 0),m(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}};var uO=5,Q9=1.2,fE=class extends Qa{constructor(e){let{width:n,height:r,latitude:i,longitude:o,zoom:s,bearing:a=0,pitch:c=0,altitude:l=1.5,position:u=[0,0,0],maxZoom:d=20,minZoom:f=0,maxPitch:h=60,minPitch:p=0,startPanLngLat:g,startZoomLngLat:y,startRotatePos:_,startBearing:E,startPitch:A,startZoom:I,normalize:C=!0}=e;Ue(Number.isFinite(o)),Ue(Number.isFinite(i)),Ue(Number.isFinite(s)),super({width:n,height:r,latitude:i,longitude:o,zoom:s,bearing:a,pitch:c,altitude:l,maxZoom:d,minZoom:f,maxPitch:h,minPitch:p,normalize:C,position:u},{startPanLngLat:g,startZoomLngLat:y,startRotatePos:_,startBearing:E,startPitch:A,startZoom:I}),m(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){let r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;let o=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){let{startRotatePos:i,startBearing:o,startPitch:s}=this.getState();if(!i||o===void 0||s===void 0)return this;let a;return e?a=this._getNewRotation(e,i,s,o):a={bearing:o+n,pitch:s+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;let{maxZoom:s,minZoom:a}=this.getViewportProps(),c=i+Math.log2(r);c=Ve(c,a,s);let l=this.makeViewport(S(v({},this.getViewportProps()),{zoom:c}));return this._getUpdatedState(v({zoom:c},l.panByPosition(o,e)))}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){let n=e.getViewportProps(),r=v({},this.getViewportProps()),{bearing:i,longitude:o}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(o-n.longitude)>180&&(r.longitude=o<0?o+360:o-360),r}applyConstraints(e){let{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=Ve(i,r,n);let{maxPitch:o,minPitch:s,pitch:a}=e;e.pitch=Ve(a,s,o);let{normalize:c=!0}=e;return c&&Object.assign(e,kp(e)),e}_zoomFromCenter(e){let{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){let{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor(v(v(v({makeViewport:this.makeViewport},this.getViewportProps()),this.getState()),e))}_unproject(e){let n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){let o=e[0]-n[0],s=e[1]-n[1],a=e[1],c=n[1],{width:l,height:u}=this.getViewportProps(),d=o/l,f=0;s>0?Math.abs(u-c)>uO&&(f=s/(c-u)*Q9):s<0&&c>uO&&(f=1-a/c),f=Ve(f,-1,1);let{minPitch:h,maxPitch:p}=this.getViewportProps(),g=i+180*d,y=r;return f>0?y=r+f*(p-r):f<0&&(y=r-f*(h-r)),{pitch:y,bearing:g}}},qp=class extends Gi{constructor(...e){super(...e),m(this,"ControllerState",fE),m(this,"transition",{transitionDuration:300,transitionInterpolator:new xr({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),m(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];let n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState(v(v({makeViewport:this.makeViewport},e),this.state)))}};var Cu=class extends Vi{get ViewportType(){return _r}get ControllerType(){return qp}};m(Cu,"displayName","MapView");var Xp=class extends yr{constructor(e,n){super(e,n),m(this,"maskMap",void 0),m(this,"fbo",void 0);let{mapSize:r=2048}=n;this.maskMap=new ve(e,{width:r,height:r,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new ye(e,{id:"maskmap",width:r,height:r,attachments:{36064:this.maskMap}})}render(e){let n=this.gl,r=[!1,!1,!1,!1];return r[e.channel]=!0,Fe(n,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:r,depthTest:!1},()=>super.render(S(v({},e),{target:this.fbo,pass:"mask"})))}shouldDrawLayer(e){return e.props.operation===jn.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}};var eW=new Q().lookAt({eye:[0,0,1]});function tW({width:t,height:e,near:n,far:r,padding:i}){let o=-t/2,s=t/2,a=-e/2,c=e/2;if(i){let{left:l=0,right:u=0,top:d=0,bottom:f=0}=i,h=Ve((l+t-u)/2,0,t)-t/2,p=Ve((d+e-f)/2,0,e)-e/2;o-=h,s-=h,a+=p,c+=p}return new Q().ortho({left:o,right:s,bottom:a,top:c,near:n,far:r})}var Jp=class extends Qt{constructor(e){let{width:n,height:r,near:i=.1,far:o=1e3,zoom:s=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,u=Array.isArray(s)?s[0]:s,d=Array.isArray(s)?s[1]:s,f=Math.min(u,d),h=Math.pow(2,f),p;if(u!==d){let g=Math.pow(2,u),y=Math.pow(2,d);p={unitsPerMeter:[g/h,y/h,1],metersPerUnit:[h/g,h/y,1]}}super(S(v({},e),{longitude:void 0,position:a,viewMatrix:eW.clone().scale([h,h*(l?-1:1),h]),projectionMatrix:tW({width:n||1,height:r||1,padding:c,near:i,far:o}),zoom:f,distanceScales:p}))}projectFlat([e,n]){let{unitsPerMeter:r}=this.distanceScales;return[e*r[0],n*r[1]]}unprojectFlat([e,n]){let{metersPerUnit:r}=this.distanceScales;return[e*r[0],n*r[1]]}panByPosition(e,n){let r=vn(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),o=Ra([],i,vp([],r)),s=Ra([],this.center,o);return{target:this.unprojectFlat(s)}}};var Mu=class extends Qa{constructor(e){let{width:n,height:r,rotationX:i=0,rotationOrbit:o=0,target:s=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:u=-1/0,maxZoom:d=1/0,startPanPosition:f,startRotatePos:h,startRotationX:p,startRotationOrbit:g,startZoomPosition:y,startZoom:_}=e;super({width:n,height:r,rotationX:i,rotationOrbit:o,target:s,zoom:a,minRotationX:c,maxRotationX:l,minZoom:u,maxZoom:d},{startPanPosition:f,startRotatePos:h,startRotationX:p,startRotationOrbit:g,startZoomPosition:y,startZoom:_}),m(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){let r=this.getState().startPanPosition||n;if(!r)return this;let o=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){let{startRotatePos:i,startRotationX:o,startRotationOrbit:s}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!i||o===void 0||s===void 0)return this;let l;if(e){let u=(e[0]-i[0])/a,d=(e[1]-i[1])/c;(o<-90||o>90)&&(u*=-1),l={rotationX:o+d*180,rotationOrbit:s+u*180}}else l={rotationX:o+r,rotationOrbit:s+n};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){let n=e.getViewportProps(),r=v({},this.getViewportProps()),{rotationOrbit:i}=r;return Math.abs(i-n.rotationOrbit)>180&&(r.rotationOrbit=i<0?i+360:i-360),r}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(n)||this._unproject(e)),!o)return this;let s=this._calculateNewZoom({scale:r,startZoom:i}),a=this.makeViewport(S(v({},this.getViewportProps()),{zoom:s}));return this._getUpdatedState(v({zoom:s},a.panByPosition(o,e)))}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){let n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){let{maxZoom:r,minZoom:i}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);let o=n+Math.log2(e);return Ve(o,i,r)}_panFromCenter(e){let{width:n,height:r,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor(v(v(v({makeViewport:this.makeViewport},this.getViewportProps()),this.getState()),e))}applyConstraints(e){let{maxZoom:n,minZoom:r,zoom:i,maxRotationX:o,minRotationX:s,rotationOrbit:a}=e;return e.zoom=Array.isArray(i)?[Ve(i[0],r,n),Ve(i[1],r,n)]:Ve(i,r,n),e.rotationX=Ve(e.rotationX,s,o),(a<-180||a>180)&&(e.rotationOrbit=tO(a+180,360)-180),e}},Yp=class extends Gi{constructor(...e){super(...e),m(this,"ControllerState",Mu),m(this,"transition",{transitionDuration:300,transitionInterpolator:new xr({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}};var hE=class extends Mu{constructor(e){super(e),m(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){let{maxZoom:r,minZoom:i}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);let o=Math.log2(e);if(Array.isArray(n)){let[s,a]=n;switch(this.zoomAxis){case"X":s=Ve(s+o,i,r);break;case"Y":a=Ve(a+o,i,r);break;default:let c=Math.min(s+o,a+o);c<i&&(o+=i-c),c=Math.max(s+o,a+o),c>r&&(o+=r-c),s+=o,a+=o}return[s,a]}return Ve(n+o,i,r)}},Kp=class extends Gi{constructor(...e){super(...e),m(this,"ControllerState",hE),m(this,"transition",{transitionDuration:300,transitionInterpolator:new xr(["target","zoom"])}),m(this,"dragMode","pan")}_onPanRotate(){return!1}};var Hi=class extends Vi{get ViewportType(){return Jp}get ControllerType(){return Kp}};m(Hi,"displayName","OrthographicView");function dO({layers:t,viewport:e}){let n=null;for(let o of t){let s=o.getBounds();s&&(n?(n[0]=Math.min(n[0],s[0][0]),n[1]=Math.min(n[1],s[0][1]),n[2]=Math.max(n[2],s[1][0]),n[3]=Math.max(n[3],s[1][1])):n=[s[0][0],s[0][1],s[1][0],s[1][1]])}let r=e.getBounds();if(!n)return r;let i=nW(r);return n[2]-n[0]<i[2]-i[0]||n[3]-n[1]<i[3]-i[1]||(n[0]=Math.max(n[0],i[0]),n[1]=Math.max(n[1],i[1]),n[2]=Math.min(n[2],i[2]),n[3]=Math.min(n[3],i[3])),n}function fO({bounds:t,viewport:e,width:n,height:r}){if(t[2]<=t[0]||t[3]<=t[1])return null;let i=1;if(n-=i*2,r-=i*2,e instanceof _r){let{longitude:a,latitude:c,zoom:l}=ss({width:n,height:r,bounds:[[t[0],t[1]],[t[2],t[3]]],maxZoom:20});return new _r({longitude:a,latitude:c,zoom:l,x:i,y:i,width:n,height:r})}let o=[(t[0]+t[2])/2,(t[1]+t[3])/2,0],s=Math.min(20,n/(t[2]-t[0]),r/(t[3]-t[1]));return new Hi({x:i,y:i}).makeViewport({width:n,height:r,viewState:{target:o,zoom:Math.log2(s)}})}function nW(t){let e={x:t[2]-t[0],y:t[3]-t[1]},n={x:t[0]+.5*e.x,y:t[1]+.5*e.y};return[n.x-e.x,n.y-e.y,n.x+e.x,n.y+e.y]}var Qp=class{constructor(){m(this,"id","mask-effect"),m(this,"props",null),m(this,"useInPicking",!0),m(this,"dummyMaskMap",void 0),m(this,"channels",[]),m(this,"masks",null),m(this,"maskPass",void 0),m(this,"maskMap",void 0),m(this,"lastViewport",void 0)}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:o,views:s}){this.dummyMaskMap||(this.dummyMaskMap=new ve(e,{width:1,height:1}));let a=n.filter(d=>d.props.visible&&d.props.operation===jn.MASK);if(a.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new Xp(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);let c=this._sortMaskChannels(a),l=i[0],u=!this.lastViewport||!this.lastViewport.equals(l);for(let d in c)this._renderChannel(c[d],{layerFilter:r,onViewportActive:o,views:s,viewport:l,viewportChanged:u})}_renderChannel(e,{layerFilter:n,onViewportActive:r,views:i,viewport:o,viewportChanged:s}){let a=this.channels[e.index];if(!a)return;let c=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,u)=>l!==a.layerBounds[u]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(c||s)&&(this.lastViewport=o,e.bounds=dO({layers:e.layers,viewport:o}),c||!kn(e.bounds,a.bounds))){let{maskPass:l,maskMap:u}=this,d=fO({bounds:e.bounds,viewport:o,width:u.width,height:u.height});e.maskBounds=d?d.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:n,viewports:d?[d]:[],onViewportActive:r,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){let n={},r=0;for(let i of e){let{id:o}=i.root,s=n[o];if(!s){if(++r>4){K.warn("Too many mask layers. The max supported is 4")();continue}s={id:o,index:this.channels.findIndex(a=>a?.id===o),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},n[o]=s}s.layers.push(i),s.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){let o=this.channels[i];(!o||!(o.id in n))&&(this.channels[i]=null)}for(let i in n){let o=n[i];o.index<0&&(o.index=this.channels.findIndex(s=>!s),this.channels[o.index]=o)}return n}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}};var rW=new Ui,em=class{constructor(){m(this,"effects",void 0),m(this,"_internalEffects",void 0),m(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!$n(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new Qp),e.some(n=>n instanceof Ui)||this._internalEffects.push(rW)}cleanup(){for(let e of this.effects)e.cleanup();for(let e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}};var tm=class extends yr{shouldDrawLayer(e){return e.props.operation===jn.DRAW}};var hO={blendFunc:[1,0,32771,0],blendEquation:32774},ec=class extends yr{constructor(...e){super(...e),m(this,"pickZ",void 0),m(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,pickingFBO:s,deviceRect:{x:a,y:c,width:l,height:u},cullRect:d,effects:f,pass:h="picking",pickZ:p}){let g=this.gl;this.pickZ=p;let y=p?null:{byLayer:new Map,byAlpha:[]};this._colors=y;let _=Fe(g,S(v({scissorTest:!0,scissor:[a,c,l,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0]},hO),{blend:!p}),()=>super.render({target:s,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:o,cullRect:d,effects:f?.filter(A=>A.useInPicking),pass:h}));return this._colors=null,{decodePickingColor:y&&oW.bind(null,y),stats:_}}shouldDrawLayer(e){return e.props.pickable&&e.props.operation===jn.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){let i=v({},e.props.parameters);return this._colors?(Object.assign(i,hO),i.blend=!0,i.blendColor=iW(this._colors,e,r)):i.blend=!1,i}};function iW(t,e,n){let{byLayer:r,byAlpha:i}=t,o,s=r.get(e);return s?(s.viewports.push(n),o=s.a):(o=r.size+1,o<=255?(s={a:o,layer:e,viewports:[n]},r.set(e,s),i[o]=s):(K.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function oW(t,e){let n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}var sW="deckRenderer.renderLayers",nm=class{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new tm(e),this.pickLayersPass=new ec(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){let n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||ye.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);let r=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,i=n.render(S(v({},e),{target:r}));this._postRender(e.effects,e),this.renderCount++,Ge(sW,this,i,e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){let{renderBuffers:e}=this;for(let n of e)n.delete();e.length=0}_preRender(e,n){let r=null;for(let i of e)i.preRender(this.gl,n),i.postRender&&(r=i);r&&this._resizeRenderBuffers(),this.lastPostProcessEffect=r}_resizeRenderBuffers(){let{renderBuffers:e}=this;e.length===0&&e.push(new ye(this.gl),new ye(this.gl));for(let n of e)n.resize()}_postRender(e,n){let{renderBuffers:r}=this,i={inputBuffer:r[0],swapBuffer:r[1],target:null};for(let o of e)if(o.postRender){if(o===this.lastPostProcessEffect){i.target=n.target,o.postRender(this.gl,i);break}let s=o.postRender(this.gl,i);i.inputBuffer=s,i.swapBuffer=s===r[0]?r[1]:r[0]}}};var aW={pickedColor:null,pickedObjectIndex:-1};function pO({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:o}){let{x:s,y:a,width:c,height:l}=o,u=i*i,d=-1,f=0;for(let h=0;h<l;h++){let p=h+a-r,g=p*p;if(g>u)f+=4*c;else for(let y=0;y<c;y++){if(t[f+3]-1>=0){let E=y+s-n,A=E*E+g;A<=u&&(u=A,d=f)}f+=4}}if(d>=0){let h=t.slice(d,d+4),p=e(h);if(p){let g=Math.floor(d/4/c),y=d/4-g*c;return S(v({},p),{pickedColor:h,pickedX:s+y,pickedY:a+g})}K.error("Picked non-existent layer. Is picking buffer corrupt?")()}return aW}function mO({pickedColors:t,decodePickingColor:e}){let n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){let o=t.slice(r,r+4),s=o.join(",");if(!n.has(s)){let a=e(o);a?n.set(s,S(v({},a),{color:o})):K.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function pE({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:o}){let s=e[0];e.length>1&&(s=cW(t?.pickedViewports||e,{x:r,y:i}));let a;if(s){let c=[r-s.x,i-s.y];o!==void 0&&(c[2]=o),a=s.unproject(c)}return{color:null,layer:null,viewport:s,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function gO(t){let{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:o,pickedLayer:s,pickedObjectIndex:a}=e,c=s?[s]:[];if(r==="hover"){let d=n.index,f=n.layerId,h=s?s.props.id:null;if(h!==f||a!==d){if(h!==f){let p=i.find(g=>g.props.id===f);p&&c.unshift(p)}n.layerId=h,n.index=a,n.info=null}}let l=pE(t),u=new Map;return u.set(null,l),c.forEach(d=>{let f=v({},l);d===s&&(f.color=o,f.index=a,f.picked=!0),f=mE({layer:d,info:f,mode:r});let h=f.layer;d===s&&r==="hover"&&(n.info=f),u.set(h.id,f),r==="hover"&&h.updateAutoHighlight(f)}),u}function mE({layer:t,info:e,mode:n}){for(;t&&e;){let r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function cW(t,e){for(let n=t.length-1;n>=0;n--){let r=t[n];if(r.containsPixel(e))return r}return t[0]}var rm=class{constructor(e){m(this,"gl",void 0),m(this,"pickingFBO",void 0),m(this,"depthFBO",void 0),m(this,"pickLayersPass",void 0),m(this,"layerFilter",void 0),m(this,"lastPickedInfo",void 0),m(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new ec(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},o=this.lastPickedInfo.info){let s=o&&o.layer&&o.layer.id,a=o&&o.viewport&&o.viewport.id,c=s?r.find(f=>f.id===s):null,l=a&&i.find(f=>f.id===a)||i[0],u=l&&l.unproject([e-l.x,n-l.y]),d={x:e,y:n,viewport:l,coordinate:u,layer:c};return v(v({},o),d)}_resizeBuffer(){var e,n;let{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new ye(r),ye.isSupported(r,{colorBufferFloat:!0}))){let i=new ye(r);i.attach({36064:new ve(r,{format:Y(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;let n=e.filter(r=>r.isPickable()&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:o,radius:s=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:u,effects:d}){let f=this._getPickable(e),h=Ln(this.gl);if(!f)return{result:[],emptyInfo:pE({viewports:r,x:i,y:o,pixelRatio:h})};this._resizeBuffer();let p=_a(this.gl,[i,o],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],y=Math.round(s*h),{width:_,height:E}=this.pickingFBO,A=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:y,deviceWidth:_,deviceHeight:E}),I={x:i-s,y:o-s,width:s*2+1,height:s*2+1},C,D=[],F=new Set;for(let z=0;z<a;z++){let j;if(A){let B=this._drawAndSample({layers:f,views:n,viewports:r,onViewportActive:u,deviceRect:A,cullRect:I,effects:d,pass:"picking:".concat(c)});j=pO(S(v({},B),{deviceX:g[0],deviceY:g[1],deviceRadius:y,deviceRect:A}))}else j={pickedColor:null,pickedObjectIndex:-1};let k;j.pickedLayer&&l&&this.depthFBO&&(k=this._drawAndSample({layers:[j.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:j.pickedX,y:j.pickedY,width:1,height:1},cullRect:I,effects:d,pass:"picking:".concat(c,":z")},!0).pickedColors[0]),j.pickedLayer&&z+1<a&&(F.add(j.pickedLayer),j.pickedLayer.disablePickingIndex(j.pickedObjectIndex)),C=gO({pickInfo:j,lastPickedInfo:this.lastPickedInfo,mode:c,layers:f,viewports:r,x:i,y:o,z:k,pixelRatio:h});for(let B of C.values())B.layer&&D.push(B);if(!j.pickedColor)break}for(let z of F)z.restorePickingColors();return{result:D,emptyInfo:C.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:o,width:s=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:u,effects:d}){let f=this._getPickable(e);if(!f)return[];this._resizeBuffer();let h=Ln(this.gl),p=_a(this.gl,[i,o],!0),g=p.x,y=p.y+p.height,_=_a(this.gl,[i+s,o+a],!0),E=_.x+_.width,A=_.y,I={x:g,y:A,width:E-g,height:y-A},C=this._drawAndSample({layers:f,views:n,viewports:r,onViewportActive:u,deviceRect:I,cullRect:{x:i,y:o,width:s,height:a},effects:d,pass:"picking:".concat(c)}),D=mO(C),F=new Map,z=Number.isFinite(l);for(let j=0;j<D.length&&!(z&&l&&F.size>=l);j++){let k=D[j],B={color:k.pickedColor,layer:null,index:k.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:h};B=mE({layer:k.pickedLayer,info:B,mode:c}),F.has(B.object)||F.set(B.object,B)}return Array.from(F.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:o,cullRect:s,effects:a,pass:c},l=!1){let u=l?this.depthFBO:this.pickingFBO,{decodePickingColor:d}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:o,cullRect:s,effects:a,pass:c,pickZ:l}),{x:f,y:h,width:p,height:g}=o,y=new(l?Float32Array:Uint8Array)(p*g*4);return qr(u,{sourceX:f,sourceY:h,sourceWidth:p,sourceHeight:g,target:y}),{pickedColors:y,decodePickingColor:d}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:o}){let s=Math.max(0,e-r),a=Math.max(0,n-r),c=Math.min(i,e+r+1)-s,l=Math.min(o,n+r+1)-a;return c<=0||l<=0?null:{x:s,y:a,width:c,height:l}}};var lW={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"},im=class{constructor(e){m(this,"el",null),m(this,"isVisible",!1);let n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,lW),n.appendChild(this.el))}setTooltip(e,n,r){let i=this.el;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className),Object.assign(i.style,e.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}};var ls=Ov(vO());var uW={mousedown:1,mousemove:2,mouseup:4};function dW(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function yO(t){let e=t.prototype.handler;t.prototype.handler=function(r){let i=this.store;r.button>0&&r.type==="pointerdown"&&(dW(i,o=>o.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function _O(t){t.prototype.handler=function(n){let r=uW[n.type];r&1&&n.button>=0&&(this.pressed=!0),r&2&&n.buttons===0&&(r=4),this.pressed&&(r&4&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}yO(ls.PointerEventInput);_O(ls.MouseInput);var bO=ls.Manager,Gn=ls;var Er=class{constructor(e,n,r){this.element=e,this.callback=n,this.options=v({enable:!0},r)}};var xO=Gn?[[Gn.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Gn.Rotate,{enable:!1}],[Gn.Pinch,{enable:!1}],[Gn.Swipe,{enable:!1}],[Gn.Pan,{threshold:0,enable:!1}],[Gn.Press,{enable:!1}],[Gn.Tap,{event:"doubletap",taps:2,enable:!1}],[Gn.Tap,{event:"anytap",enable:!1}],[Gn.Tap,{enable:!1}]]:null,gE={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},EO={doubletap:["tap"]},wO={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},tc={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},AO={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},vE={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"};var IO=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",us=typeof window<"u"?window:global;var sm=!1;try{let t={get passive(){return sm=!0,!0}};us.addEventListener("test",null,t),us.removeEventListener("test",null)}catch{sm=!1}var fW=IO.indexOf("firefox")!==-1,{WHEEL_EVENTS:hW}=tc,TO="wheel",SO=4.000244140625,pW=40,mW=.25,am=class extends Er{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;us.WheelEvent&&(fW&&i.deltaMode===us.WheelEvent.DOM_DELTA_PIXEL&&(o/=us.devicePixelRatio),i.deltaMode===us.WheelEvent.DOM_DELTA_LINE&&(o*=pW)),o!==0&&o%SO===0&&(o=Math.floor(o/SO)),i.shiftKey&&o&&(o=o*mW),this.callback({type:TO,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(hW),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,sm?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===TO&&(this.options.enable=n)}};var{MOUSE_EVENTS:gW}=tc,CO="pointermove",MO="pointerover",DO="pointerout",PO="pointerenter",RO="pointerleave",cm=class extends Er{constructor(e,n,r){super(e,n,r),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;let{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(gW),this.events.forEach(o=>e.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===CO&&(this.enableMoveEvent=n),e===MO&&(this.enableOverEvent=n),e===DO&&(this.enableOutEvent=n),e===PO&&(this.enableEnterEvent=n),e===RO&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(MO,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(DO,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(PO,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(RO,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit(CO,e);break;case"mouseup":this.pressed=!1;break;default:}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}};var{KEY_EVENTS:vW}=tc,NO="keydown",OO="keyup",lm=class extends Er{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{let o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:NO,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:OO,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(vW),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===NO&&(this.enableDownEvent=n),e===OO&&(this.enableUpEvent=n)}};var LO="contextmenu",um=class extends Er{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:LO,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===LO&&(this.options.enable=n)}};var yW={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4},_W=0,bW=1,xW=2,EW=1,wW=2,AW=4;function BO(t){let e=yW[t.srcEvent.type];if(!e)return null;let{buttons:n,button:r}=t.srcEvent,i=!1,o=!1,s=!1;return e===2?(i=!!(n&EW),o=!!(n&AW),s=!!(n&wW)):(i=r===_W,o=r===bW,s=r===xW),{leftButton:i,middleButton:o,rightButton:s}}function kO(t,e){let n=t.center;if(!n)return null;let r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,o=r.height/e.offsetHeight||1,s={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/o};return{center:n,offsetCenter:s}}var yE={srcElement:"root",priority:0},dm=class{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;let r=this._normalizeEvent(n),i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,o=!1){let{handlers:s,handlersByElement:a}=this,c=yE;typeof r=="string"||r&&r.addEventListener?c=S(v({},yE),{srcElement:r}):r&&(c=v(v({},yE),r));let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));let u={type:e,handler:n,srcElement:c.srcElement,priority:c.priority};i&&(u.once=!0),o&&(u.passive=!0),s.push(u),this._active=this._active||!u.passive;let d=l.length-1;for(;d>=0&&!(l[d].priority>=u.priority);)d--;l.splice(d+1,0,u)}remove(e,n){let{handlers:r,handlersByElement:i}=this;for(let o=r.length-1;o>=0;o--){let s=r[o];if(s.type===e&&s.handler===n){r.splice(o,1);let a=i.get(s.srcElement);a.splice(a.indexOf(s),1),a.length===0&&i.delete(s.srcElement)}}this._active=r.some(o=>!o.passive)}_emit(e,n){let r=this.handlersByElement.get(n);if(r){let i=!1,o=()=>{e.handled=!0},s=()=>{e.handled=!0,i=!0},a=[];for(let c=0;c<r.length;c++){let{type:l,handler:u,once:d}=r[c];if(u(S(v({},e),{type:l,stopPropagation:o,stopImmediatePropagation:s})),d&&a.push(r[c]),i)break}for(let c=0;c<a.length;c++){let{type:l,handler:u}=a[c];this.remove(l,u)}}}_normalizeEvent(e){let n=this.eventManager.getElement();return S(v(v(v({},e),BO(e)),kO(e,n)),{preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n})}};var IW={events:null,recognizers:null,recognizerOptions:{},Manager:bO,touchAction:"none",tabIndex:0},Du=class{constructor(e=null,n){this._onBasicInput=i=>{let{srcEvent:o}=i,s=wO[o.type];s&&this.manager.emit(s,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options=v(v({},IW),n),this.events=new Map,this.setElement(e);let{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;let{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||xO}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(gE).forEach(i=>{let o=this.manager.get(i);o&&gE[i].forEach(s=>{o.recognizeWith(s)})});for(let i in n.recognizerOptions){let o=this.manager.get(i);if(o){let s=n.recognizerOptions[i];delete s.enable,o.set(s)}}this.wheelInput=new am(e,this._onOtherEvent,{enable:!1}),this.moveInput=new cm(e,this._onOtherEvent,{enable:!1}),this.keyInput=new lm(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new um(e,this._onOtherEvent,{enable:!1});for(let[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){let{manager:r}=this;if(!r)return;let i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});let o=EO[e];o&&!this.options.recognizers&&o.forEach(s=>{let a=r.get(s);n?(a.requireFailure(e),i.dropRequireFailure(s)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,o){if(typeof e!="string"){r=n;for(let u in e)this._addEventHandler(u,e[u],r,i,o);return}let{manager:s,events:a}=this,c=vE[e]||e,l=a.get(c);l||(l=new dm(this),a.set(c,l),l.recognizerName=AO[c]||c,s&&s.on(c,l.handleEvent)),l.add(e,n,r,i,o),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(let s in e)this._removeEventHandler(s,e[s]);return}let{events:r}=this,i=vE[e]||e,o=r.get(i);if(o&&(o.remove(e,n),o.isEmpty())){let{recognizerName:s}=o,a=!1;for(let c of r.values())if(c.recognizerName===s&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}};function ds(){}var TW=({isDragging:t})=>t?"grabbing":"grab",FO={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:ds,onResize:ds,onViewStateChange:ds,onInteractionStateChange:ds,onBeforeRender:ds,onAfterRender:ds,onLoad:ds,onError:t=>K.error(t.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:TW,getTooltip:null,debug:!1,drawPickingColors:!1},fs=class{constructor(e){m(this,"props",void 0),m(this,"width",0),m(this,"height",0),m(this,"userData",{}),m(this,"canvas",null),m(this,"viewManager",null),m(this,"layerManager",null),m(this,"effectManager",null),m(this,"deckRenderer",null),m(this,"deckPicker",null),m(this,"eventManager",null),m(this,"tooltip",null),m(this,"metrics",void 0),m(this,"animationLoop",void 0),m(this,"stats",void 0),m(this,"viewState",void 0),m(this,"cursorState",void 0),m(this,"_needsRedraw",void 0),m(this,"_pickRequest",void 0),m(this,"_lastPointerDownInfo",null),m(this,"_metricsCounter",void 0),m(this,"_onPointerMove",n=>{let{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{let i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),m(this,"_onEvent",n=>{let r=Qx[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;let o=this.layerManager.getLayers(),s=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=s,c=a&&(a[r.handler]||a.props[r.handler]),l=this.props[r.handler],u=!1;c&&(u=c.call(a,s,n)),!u&&l&&l(s,n)}),m(this,"_onPointerDown",n=>{let r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props=v(v({},FO),e),e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&K.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),ga()==="IE"&&K.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new ar({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Qr.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,o,s,a;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(e=this.layerManager)===null||e===void 0||e.finalize(),this.layerManager=null,(n=this.viewManager)===null||n===void 0||n.finalize(),this.viewManager=null,(r=this.effectManager)===null||r===void 0||r.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(s=this.eventManager)===null||s===void 0||s.destroy(),this.eventManager=null,(a=this.tooltip)===null||a===void 0||a.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var c;(c=this.canvas.parentElement)===null||c===void 0||c.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&K.removed("onLayerHover","onHover")(),"onLayerClick"in e&&K.removed("onLayerClick","onClick")(),e.initialViewState&&!$n(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);let n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);let r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),o=this.effectManager.needsRedraw(e),s=this.deckRenderer.needsRedraw(e);return n=n||r||i||o||s,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return Ue(this.viewManager),this.viewManager.views}getViewports(e){return Ue(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){let n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(let r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(let n of e)this.layerManager.resourceManager.remove(n)}_pick(e,n,r){Ue(this.deckPicker);let{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();let o=this.deckPicker[e](v({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects()},r));return i.get(n).timeEnd(),o}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),Ue(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;let{width:n,height:r}=e;if(n||n===0){let o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=o}if(r||r===0){var i;let o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){let{canvas:e}=this;if(!e)return;let n=e.clientWidth||e.width,r=e.clientHeight||e.height;if(n!==this.width||r!==this.height){var i;this.width=n,this.height=r,(i=this.viewManager)===null||i===void 0||i.setProps({width:n,height:r}),this.props.onResize({width:n,height:r})}}_createAnimationLoop(e){let{width:n,height:r,gl:i,glOptions:o,debug:s,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:u}=e;return new Ta({width:n,height:r,useDevicePixels:u,autoResizeViewport:!1,gl:i,onCreateContext:d=>ba(S(v(v({},o),d),{canvas:this.canvas,debug:s,onContextLost:()=>this._onContextLost()})),onInitialize:d=>this._setGLContext(d.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new Cu({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){let{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){let{_pickRequest:e}=this;if(e.event){let{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let o=i,s=!1;for(let a of r){var n;o=a,s=((n=a.layer)===null||n===void 0?void 0:n.onHover(a,e.event))||s}if(!s&&this.props.onHover&&this.props.onHover(o,e.event),this.props.getTooltip&&this.tooltip){let a=this.props.getTooltip(o);this.tooltip.setTooltip(a,o.x,o.y)}e.event=null}}_updateCursor(){let e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,Xo(e,{enable:!0,copyState:!0})),this.tooltip=new im(this.canvas),Dt(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);let n=new Bi;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new Du(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(let i in Qx)this.eventManager.on(i,this._onEvent);this.viewManager=new Gp({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});let r=this.viewManager.getViewports()[0];this.layerManager=new $p(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new em,this.deckRenderer=new nm(e),this.deckPicker=new rm(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){let{gl:r}=this.layerManager.context;Dt(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers(v({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects()},n)),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),K.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){let n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState=S(v({},this.viewState),{[e.viewId]:n}),this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){let{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();let n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){let{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();let r=pn.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}};m(fs,"defaultProps",FO);m(fs,"VERSION",yP.VERSION);var nc=class{constructor(e,n){m(this,"opts",void 0),m(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){let e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];let{value:r}=this.source,{size:i}=n,o=r;if(r&&r.length!==i){o=new Float32Array(i);let s=n.elementOffset||0;for(let a=0;a<i;++a)o[a]=r[s+a]}return o}getAccessor(){return v(v({},this.source.getAccessor()),this.opts)}};function jO(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function fm(t){return t.stride||t.size*t.bytesPerElement}function UO(t,e){e.offset&&K.removed("shaderAttribute.offset","vertexOffset, elementOffset")();let n=fm(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,o=r*n+i*t.bytesPerElement+(t.offset||0);return S(v({},e),{offset:o,stride:n})}function SW(t,e){let n=UO(t,e);return{high:n,low:S(v({},n),{offset:n.offset+t.size*4})}}var hm=class{constructor(e,n,r){m(this,"gl",void 0),m(this,"id",void 0),m(this,"size",void 0),m(this,"settings",void 0),m(this,"value",void 0),m(this,"doublePrecision",void 0),m(this,"_buffer",void 0),m(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;let i=n.logicalType||n.type,o=i===5130,{defaultValue:s}=n;s=Number.isFinite(s)?[s]:s||new Array(this.size).fill(0);let a;o?a=5126:!i&&n.isIndexed?a=e&&Xr(e,be.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let c=jO(i||a||5126);this.doublePrecision=o,o&&n.fp64===!1&&(c=Float32Array),this.value=null,this.settings=S(v({},n),{defaultType:c,defaultValue:s,logicalType:i,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT}),this.state=S(v({},r),{externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}),this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){let{isIndexed:e,type:n}=this.settings;this._buffer=new ie(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){let e=this.getAccessor();return e.vertexOffset?e.vertexOffset*fm(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Qr.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){let r={},i=this.value instanceof Float64Array,o=SW(this.getAccessor(),n||{});return r[e]=new nc(this,o.high),r["".concat(e,"64Low")]=i?new nc(this,o.low):new Float32Array(this.size),r}if(n){let r=UO(this.getAccessor(),n);return{[e]:new nc(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){let n=Array.from(this.value);e=[n,n]}else{let{value:n,numInstances:r,size:i}=this,o=r*i;if(n&&o&&n.length>=o){let s=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let c=0;c<o;)for(let l=0;l<i;l++){let u=n[c++];u<s[l]&&(s[l]=u),u>a[l]&&(a[l]=u)}e=[s,a]}}return this.state.bounds=e,e}setData(e){let{state:n}=this,r;ArrayBuffer.isView(e)?r={value:e}:e instanceof ie?r={buffer:e}:r=e;let i=v(v({},this.settings),r);if(n.bufferAccessor=i,n.bounds=null,r.constant){let o=r.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!n.constant||!this._areValuesEqual(o,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=o}else if(r.buffer){let o=r.buffer;n.externalBuffer=o,n.constant=!1,this.value=r.value||null;let s=r.value instanceof Float64Array;i.type=r.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(s?2:1),i.stride=fm(i)}else if(r.value){this._checkExternalBuffer(r);let o=r.value;n.externalBuffer=null,n.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=fm(i);let{buffer:s,byteOffset:a}=this;this.doublePrecision&&o instanceof Float64Array&&(o=Up(o,i));let c=o.byteLength+a+i.stride*2;s.byteLength<c&&s.reallocate(c),s.setAccessor(null),s.subData({data:o,offset:a}),i.type=r.type||s.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;let n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?Up(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){let{state:r}=this,i=r.allocatedValue,o=Qr.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=o;let{buffer:s,byteOffset:a}=this;return s.byteLength<o.byteLength+a&&(s.reallocate(o.byteLength+a),n&&i&&s.subData({data:i instanceof Float64Array?Up(i,this):i,offset:a})),r.allocatedValue=o,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){let{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));let r=this.settings.defaultType,i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&K.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){let{defaultValue:i,size:o}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e)return n[r]=i[0],n;switch(o){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let s=o;for(;--s>=0;)n[r+s]=Number.isFinite(e[s])?e[s]:i[s]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;let{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}};var zO=[],VO=[];function ri(t,e=0,n=1/0){let r=zO,i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(VO.length=t.length,r=VO):r=zO,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function pm(t){return t&&t[Symbol.asyncIterator]}function $O(t,e){let{size:n,stride:r,offset:i,startIndices:o,nested:s}=e,a=t.BYTES_PER_ELEMENT,c=r?r/a:n,l=i?i/a:0,u=Math.floor((t.length-l)/c);return(d,{index:f,target:h})=>{if(!o){let _=f*c+l;for(let E=0;E<n;E++)h[E]=t[_+E];return h}let p=o[f],g=o[f+1]||u,y;if(s){y=new Array(g-p);for(let _=p;_<g;_++){let E=_*c+l;h=new Array(n);for(let A=0;A<n;A++)h[A]=t[E+A];y[_-p]=h}}else if(c===n)y=t.subarray(p*n+l,g*n+l);else{y=new t.constructor((g-p)*n);let _=0;for(let E=p;E<g;E++){let A=E*c+l;for(let I=0;I<n;I++)y[_++]=t[A+I]}}return y}}var GO=[],Pu=[[0,1/0]];function HO(t,e){if(t===Pu||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;let n=[],r=t.length,i=0;for(let o=0;o<r;o++){let s=t[o];s[1]<e[0]?(n.push(s),i=o+1):s[0]>e[1]?n.push(s):e=[Math.min(s[0],e[0]),Math.max(s[1],e[1])]}return n.splice(i,0,e),n}function _E(t){let{source:e,target:n,start:r=0,size:i,getData:o}=t,s=t.end||n.length,a=e.length,c=s-r;if(a>c){n.set(e.subarray(0,c),r);return}if(n.set(e,r),!o)return;let l=a;for(;l<c;){let u=o(l,e);for(let d=0;d<i;d++)n[r+l]=u[d]||0,l++}}function WO({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return _E({source:t,target:e,size:n,getData:r}),e;let s=0,a=0,c=r&&((u,d)=>r(u+a,d)),l=Math.min(i.length,o.length);for(let u=1;u<l;u++){let d=i[u]*n,f=o[u]*n;_E({source:t.subarray(s,d),target:e,start:a,end:f,size:n,getData:c}),s=d,a=f}return a<e.length&&_E({source:[],target:e,start:a,size:n,getData:c}),e}var MW={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function mm(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});let n=t.type||"interpolation";return S(v(v(v({},MW[n]),e),t),{type:n})}function gm(t,e){let n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function vm(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function ym(t){t.push(t.shift())}function Ru(t,e){let{doublePrecision:n,settings:r,value:i,size:o}=t,s=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*o)*s}function _m({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:o=s=>s}){let s=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*s,c=n.byteOffset,l=n.startIndices,u=i&&l,d=Ru(n,e),f=n.isConstant;if(!u&&r>=d)return;let h=f?n.value:n.getBuffer().getData({srcByteOffset:c});if(n.settings.normalized&&!f){let _=o;o=(E,A)=>n.normalizeConstant(_(E,A))}let p=f?(_,E)=>o(h,E):(_,E)=>o(h.subarray(_,_+a),E),g=t.getData({length:r}),y=new Float32Array(d);WO({source:g,target:y,sourceStartIndices:i,targetStartIndices:l,size:a,getData:p}),t.byteLength<y.byteLength+c&&t.reallocate(y.byteLength+c),t.subData({data:y,offset:c})}var Wi=class extends hm{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Pu}),m(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){let n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){let{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;let{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(o=>e[o])]:e[n];return mm(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){let{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=HO(this.state.updateRanges,[r,i])}else this.state.updateRanges=Pu}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=GO}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){let{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==Pu),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;let{state:{updateRanges:o},settings:{update:s,noAlloc:a}}=this,c=!0;if(s){for(let[l,u]of o)s.call(i,this,{data:n,startRow:l,endRow:u,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(let[l,u]of o){let d=Number.isFinite(l)?this.getVertexOffset(l):0,f=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:d,endOffset:f})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){let{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){let{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});let s=e;Ue(ArrayBuffer.isView(s.value),"invalid ".concat(i.accessor));let a=!!s.size&&s.size!==this.size;return r.binaryAccessor=$O(s.value,{size:s.size||this.size,stride:s.stride,offset:s.offset,startIndices:n,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){let{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){let e=this.settings.shaderAttributes||{[this.id]:null},n={};for(let r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:o,numInstances:s}){if(e.constant)return;let{settings:a,state:c,value:l,size:u,startIndices:d}=e,{accessor:f,transform:h}=a,p=c.binaryAccessor||(typeof f=="function"?f:o[f]);Ue(typeof p=="function",'accessor "'.concat(f,'" is not a function'));let g=e.getVertexOffset(r),{iterable:y,objectInfo:_}=ri(n,r,i);for(let E of y){_.index++;let A=p(E,_);if(h&&(A=h.call(this,A)),d){let I=(_.index<d.length-1?d[_.index+1]:s)-d[_.index];if(A&&Array.isArray(A[0])){let C=g;for(let D of A)e._normalizeValue(D,l,C),C+=u}else A&&A.length>u?l.set(A,g):(e._normalizeValue(A,_.target,0),cO({target:l,source:_.target,start:g,count:I}));g+=I*u}else e._normalizeValue(A,l,g),g+=u}}_validateAttributeUpdaters(){let{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){let{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}};var bm=class{constructor({gl:e,attribute:n,timeline:r}){m(this,"gl",void 0),m(this,"type","interpolation"),m(this,"attributeInTransition",void 0),m(this,"settings",void 0),m(this,"attribute",void 0),m(this,"transition",void 0),m(this,"currentStartIndices",void 0),m(this,"currentLength",void 0),m(this,"transform",void 0),m(this,"buffers",void 0),this.gl=e,this.transition=new yn(r),this.attribute=n,this.attributeInTransition=new Wi(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=PW(e,n);let i={byteLength:0,usage:35050};this.buffers=[new ie(e,i),new ie(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;let{gl:r,buffers:i,attribute:o}=this;ym(i);let s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(let a of i)_m(v({buffer:a},s));this.currentStartIndices=o.startIndices,this.currentLength=Ru(o,n),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:gm(r,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){let e=this.transition.update();if(e){let{duration:n,easing:r}=this.settings,{time:i}=this.transition,o=i/n;r&&(o=r(o)),this.transform.run({uniforms:{time:o}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(let e of this.buffers)e.delete();this.buffers.length=0}};var DW=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function PW(t,e){let n=vm(e.size);return new mr(t,{vs:DW,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}var xm=class{constructor({gl:e,attribute:n,timeline:r}){m(this,"gl",void 0),m(this,"type","spring"),m(this,"attributeInTransition",void 0),m(this,"settings",void 0),m(this,"attribute",void 0),m(this,"transition",void 0),m(this,"currentStartIndices",void 0),m(this,"currentLength",void 0),m(this,"texture",void 0),m(this,"framebuffer",void 0),m(this,"transform",void 0),m(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new yn(r),this.attribute=n,this.attributeInTransition=new Wi(e,S(v({},n.settings),{normalized:!1})),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=NW(e),this.framebuffer=OW(e,this.texture),this.transform=RW(e,n,this.framebuffer);let i={byteLength:0,usage:35050};this.buffers=[new ie(e,i),new ie(e,i),new ie(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){let{gl:r,buffers:i,attribute:o}=this,s={numInstances:n,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(let a of i)_m(v({buffer:a},s));this.settings=e,this.currentStartIndices=o.startIndices,this.currentLength=Ru(o,n),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(S(v({},e),{duration:1/0})),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:gm(r,o)}})}update(){let{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;let s=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:s.stiffness,damping:s.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),ym(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),qr(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(let e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}};function RW(t,e,n){let r=vm(e.size);return new mr(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function NW(t){return new ve(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function OW(t,e){return new ye(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}var LW={interpolation:bm,spring:xm},Em=class{constructor(e,{id:n,timeline:r}){m(this,"id",void 0),m(this,"isSupported",void 0),m(this,"gl",void 0),m(this,"timeline",void 0),m(this,"transitions",void 0),m(this,"needsRedraw",void 0),m(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=mr.isSupported(e)}finalize(){for(let e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(let i in e){let o=e[i],s=o.getTransitionSetting(n);s&&this._updateAttribute(i,o,s)}for(let i in this.transitions){let o=e[i];(!o||!o.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){let n=this.transitions[e];return n&&n.inProgress}getAttributes(){let e={};for(let n in this.transitions){let r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(let n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);let e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){let i=this.transitions[e],o=!i||i.type!==r.type;if(o){if(!this.isSupported){K.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);let s=LW[r.type];s?this.transitions[e]=new s({attribute:n,timeline:this.timeline,gl:this.gl}):(K.error("unsupported transition type '".concat(r.type,"'"))(),o=!1)}(o||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}};var ZO="attributeManager.invalidate",BW="attributeManager.updateStart",kW="attributeManager.updateEnd",FW="attribute.updateStart",jW="attribute.allocate",UW="attribute.updateEnd",wm=class{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){m(this,"id",void 0),m(this,"gl",void 0),m(this,"attributes",void 0),m(this,"updateTriggers",void 0),m(this,"needsRedraw",void 0),m(this,"userData",void 0),m(this,"stats",void 0),m(this,"attributeTransitionManager",void 0),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new Em(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(let e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){let n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(let n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){let r=this._invalidateTrigger(e,n);Ge(ZO,this,e,r)}invalidateAll(e){for(let n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Ge(ZO,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:o={},buffers:s={},context:a={}}){let c=!1;Ge(BW,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(let l in this.attributes){let u=this.attributes[l],d=u.settings.accessor;u.startIndices=r,u.numInstances=n,o[l]&&K.removed("props.".concat(l),"data.attributes.".concat(l))(),u.setExternalBuffer(s[l])||u.setBinaryValue(typeof d=="string"?s[d]:void 0,e.startIndices)||typeof d=="string"&&!s[d]&&u.setConstantValue(o[d])||u.needsUpdate()&&(c=!0,this._updateAttribute({attribute:u,numInstances:n,data:e,props:o,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}c&&Ge(kW,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){let{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){let{attributes:n,attributeTransitionManager:r}=this,i=v({},r.getAttributes());for(let o in n){let s=n[o];s.needsRedraw(e)&&!r.hasAttribute(o)&&(i[o]=s)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());let r={};for(let i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(let r in e){let i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){let i=S(v({},n),{id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0});return new Wi(this.gl,i)}_mapUpdateTriggersToAttributes(){let e={};for(let n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){let{attributes:r,updateTriggers:i}=this,o=i[e];return o&&o.forEach(s=>{let a=r[s];a&&a.setNeedsUpdate(a.id,n)}),o}_updateAttribute(e){let{attribute:n,numInstances:r}=e;if(Ge(FW,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Ge(jW,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Ge(UW,n,r))}};var Am=class extends yn{get value(){return this._value}_onUpdate(){let{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:o}}=this,s=o(e/i);this._value=es(n,r,s)}};var qO=1e-5;function XO(t,e,n,r,i){let o=e-t,a=(n-e)*i,c=-o*r;return a+c+o+e}function zW(t,e,n,r,i){if(Array.isArray(n)){let o=[];for(let s=0;s<n.length;s++)o[s]=XO(t[s],e[s],n[s],r,i);return o}return XO(t,e,n,r,i)}function JO(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){let i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}var Im=class extends yn{get value(){return this._currValue}_onUpdate(){let{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:o=e,_currValue:s=e}=this,a=zW(o,s,n,r,i),c=JO(a,n),l=JO(a,s);c<qO&&l<qO&&(a=n,this.end()),this._prevValue=s,this._currValue=a}};var VW={interpolation:Am,spring:Im},Tm=class{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){let{transitions:o}=this;if(o.has(e)){let c=o.get(e),{value:l=c.settings.fromValue}=c;n=l,this.remove(e)}if(i=mm(i),!i)return;let s=VW[i.type];if(!s){K.error("unsupported transition type '".concat(i.type,"'"))();return}let a=new s(this.timeline);a.start(S(v({},i),{fromValue:n,toValue:r})),o.set(e,a)}remove(e){let{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){let e={};for(let[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(let e of this.transitions.keys())this.remove(e)}};function KO(t){let e=xE(t);for(let n in e){let r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function QO(t,e){let n=eL({newProps:t,oldProps:e,propTypes:xE(t),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=GW(t,e),i=!1;return r||(i=HW(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:WW(t,e),transitionsChanged:$W(t,e)}}function $W(t,e){if(!t.transitions)return!1;let n={},r=xE(t),i=!1;for(let o in t.transitions){let s=r[o],a=s&&s.type;(a==="number"||a==="color"||a==="array")&&bE(t[o],e[o],s)&&(n[o]=!0,i=!0)}return i?n:!1}function eL({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(let o of Object.keys(t))if(!(o in n)){if(!(o in e))return"".concat(i,".").concat(o," added");let s=bE(t[o],e[o],r[o]);if(s)return"".concat(i,".").concat(o," ").concat(s)}for(let o of Object.keys(e))if(!(o in n)){if(!(o in t))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(t,o)){let s=bE(t[o],e[o],r[o]);if(s)return"".concat(i,".").concat(o," ").concat(s)}}return!1}function bE(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function GW(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1,{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function HW(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&YO(t,e,"all"))return{all:!0};let n={},r=!1;for(let i in t.updateTriggers)i!=="all"&&YO(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function WW(t,e){if(e===null)return!0;let n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function YO(t,e,n){let r=t.updateTriggers[n];r=r??{};let i=e.updateTriggers[n];return i=i??{},eL({oldProps:i,newProps:r,triggerName:n})}function xE(t){let e=t[Ja],n=e&&e.constructor;return n?n._propTypes:{}}var ZW="count(): argument not an object",qW="count(): argument not a container";function tL(t){if(!JW(t))throw new Error(ZW);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(XW(t))return Object.keys(t).length;throw new Error(qW)}function XW(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function JW(t){return t!==null&&typeof t=="object"}function nL(t,e){if(!e)return t;let n=v(v({},t),e);if("defines"in e&&(n.defines=v(v({},t.defines),e.defines)),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){let r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{let r=v({},t.inject);for(let i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}var YW={10241:9987,10240:9729,10242:33071,10243:33071},EE={};function rL(t,e){let n=t.context&&t.context.gl;if(!n||!e)return null;if(e instanceof ve)return e;e.constructor&&e.constructor.name!=="Object"&&(e={data:e});let r=null;e.compressed&&(r={10241:e.data.length>1?9985:9729});let i=new ve(n,S(v({},e),{parameters:v(v(v({},YW),r),t.props.textureParameters)}));return EE[i.id]=!0,i}function iL(t){!t||!(t instanceof ve)||EE[t.id]&&(t.delete(),delete EE[t.id])}var KW={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||Ou(t)&&(t.length===3||t.length===4)},equal(t,e,n){return wE(t,e)}},accessor:{validate(t,e){let n=Sm(t);return n==="function"||n===Sm(e.value)},equal(t,e,n){return typeof e=="function"?!0:wE(t,e)}},array:{validate(t,e){return e.optional&&!t||Ou(t)},equal(t,e,n){return n.compare?wE(t,e):t===e}},object:{equal(t,e,n){return n.compare?$n(t,e):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare||t===e}},data:{transform:(t,e,n)=>{let{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>rL(n,t),release:t=>{iL(t)}}};function wE(t,e){if(t===e)return!0;if(!Ou(t)||!Ou(e))return!1;let n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function oL(t){let e={},n={},r={};for(let[i,o]of Object.entries(t)){let s=o?.deprecatedFor;if(s)r[i]=Array.isArray(s)?s:[s];else{let a=QW(i,o);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function QW(t,e){switch(Sm(e)){case"object":return Nu(t,e);case"array":return Nu(t,{type:"array",value:e,compare:!1});case"boolean":return Nu(t,{type:"boolean",value:e});case"number":return Nu(t,{type:"number",value:e});case"function":return Nu(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Nu(t,e){return"type"in e?v(v({name:t},KW[e.type]),e):"value"in e?v({name:t,type:Sm(e.value)},e):{name:t,type:"object",value:e}}function Ou(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function Sm(t){return Ou(t)?"array":t===null?"null":typeof t}function sL(t,e){let n=aL(t.constructor),r=Object.create(n);r[Ja]=t,r[br]={},r[Vn]={};for(let i=0;i<e.length;++i){let o=e[i];for(let s in o)r[s]=o[s]}return Object.freeze(r),r}function aL(t){let e=Cm(t,"_mergedDefaultProps");return e||(e5(t),t._mergedDefaultProps)}function e5(t){if(!t.prototype)return;let n=Object.getPrototypeOf(t),r=aL(n),i=Cm(t,"defaultProps")||{},o=oL(i),s=t5(o.defaultProps,r,t),a=v(v({},n._propTypes),o.propTypes);r5(s,a);let c=v(v({},n._deprecatedProps),o.deprecatedProps);n5(s,c),t._mergedDefaultProps=s,t._propTypes=a,t._deprecatedProps=c}function t5(t,e,n){let r=Object.create(null);Object.assign(r,e,t);let i=o5(n);return delete t.id,Object.defineProperties(r,{id:{writable:!0,value:i}}),r}function n5(t,e){for(let n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){let i="".concat(this.id,": ").concat(n);for(let o of e[n])cL(this,o)||(this[o]=r);K.deprecated(i,e[n].join("/"))()}})}function r5(t,e){let n={},r={};for(let i in e){let o=e[i],{name:s,value:a}=o;o.async&&(n[s]=a,r[s]=i5(s))}t[ei]=n,t[br]={},Object.defineProperties(t,r)}function i5(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||pm(e)?this[br][t]=e:this[Vn][t]=e},get(){if(this[Vn]){if(t in this[Vn])return this[Vn][t]||this[ei][t];if(t in this[br]){let e=this[Ja]&&this[Ja].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[ei][t]}}return this[ei][t]}}}function cL(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Cm(t,e){return cL(t,e)&&t[e]}function o5(t){let e=Cm(t,"layerName")||Cm(t,"componentName");return e||K.once(0,"".concat(t.name,".componentName not specified"))(),e||t.name}var s5=0,rc=class{constructor(...e){m(this,"id",void 0),m(this,"props",void 0),m(this,"count",void 0),this.props=sL(this,e),this.id=this.props.id,this.count=s5++}clone(e){let{props:n}=this,r={};for(let i in n[ei])i in n[Vn]?r[i]=n[Vn][i]:i in n[br]&&(r[i]=n[br][i]);return new this.constructor(v(v(v({},n),r),e))}};m(rc,"componentName","Component");m(rc,"defaultProps",{});var a5=Object.freeze({}),Mm=class{constructor(e){m(this,"component",void 0),m(this,"onAsyncPropUpdated",void 0),m(this,"asyncProps",void 0),m(this,"oldProps",void 0),m(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(let e in this.asyncProps){let n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||a5}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){let n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){let n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(let n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){let n=e[Vn]||{},r=e[br]||e,i=e[ei]||{};for(let o in n){let s=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s),n[o]=this.getAsyncProp(o)}for(let o in r){let s=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,s)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(pm(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(let e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){let r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();let r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){let i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){let r=this.asyncProps[e];if(r){r.pendingLoadCount++;let i=r.pendingLoadCount;n.then(o=>{o=this._postProcessValue(r,o),this._setAsyncPropValue(e,o,i),this._onResolve(e,o)}).catch(o=>{this._onError(e,o)})}}_resolveAsyncIterable(e,n){return R(this,null,function*(){if(e!=="data"){this._setPropValue(e,n);return}let r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;let i=r.pendingLoadCount,o=[],s=0;try{for(var a=Rs(n),c,l,u;c=!(l=yield a.next()).done;c=!1){let d=l.value;let{dataTransform:f}=this.component.props;f?o=f(d,o):o=o.concat(d),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:s,endRow:o.length}]}),s=o.length,this._setAsyncPropValue(e,o,i)}}catch{u=[l]}finally{try{c&&(l=a.return)&&(yield l.call(a))}finally{if(u)throw u[0]}}this._onResolve(e,o)})}_postProcessValue(e,n){let r=e.type;return r&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){let i=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}};var Dm=class extends Mm{constructor({attributeManager:e,layer:n}){super(n),m(this,"attributeManager",void 0),m(this,"needsRedraw",void 0),m(this,"needsUpdate",void 0),m(this,"subLayers",void 0),m(this,"usesPickingColorCache",void 0),m(this,"changeFlags",void 0),m(this,"viewport",void 0),m(this,"uniformTransitions",void 0),m(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,n){let r=this.component.props.fetch;return r?r(n,{propName:e,layer:this.layer}):super._fetch(e,n)}_onResolve(e,n){let r=this.component.props.onDataLoad;e==="data"&&r&&r(n,{propName:e,layer:this.layer})}_onError(e,n){this.layer.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}};var c5="layer.changeFlag",l5="layer.initialize",u5="layer.update",d5="layer.finalize",f5="layer.matched",lL=2**24-1,h5=Object.freeze([]),p5=Fi(({oldViewport:t,viewport:e})=>t.equals(e)),wr=new Uint8ClampedArray(0),m5={data:{type:"data",value:h5,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:o})=>{let{resourceManager:s}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,o){var a;i=S(v({},i),{fetch:S(v({},(a=i)===null||a===void 0?void 0:a.fetch),{signal:o})})}let c=s.contains(t);return!c&&!i&&(s.add({resourceId:t,data:cr(t,r),persistent:!1}),c=!0),c?s.subscribe({resourceId:t,onChange:l=>{var u;return(u=n.internalState)===null||u===void 0?void 0:u.reloadAsyncProp(e,l)},consumerId:n.id,requestId:e}):cr(t,r,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:jn.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:le.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}},Nt=class extends rc{constructor(...e){super(...e),m(this,"internalState",null),m(this,"lifecycle",zi.NO_STATE),m(this,"context",void 0),m(this,"state",void 0),m(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){let e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){Ue(this.internalState);let n=this.internalState.viewport||this.context.viewport,r=uE(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,s]=Za(r,n.pixelProjectionMatrix);return e.length===2?[i,o]:[i,o,s]}unproject(e){return Ue(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){Ue(this.internalState);let r=this.internalState.viewport||this.context.viewport;return sO(e,v({viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem},n))}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(let n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){let{coordinateSystem:e}=this.props;return e===le.DEFAULT||e===le.LNGLAT||e===le.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Ue(e instanceof Uint8Array);let[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:tL(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;let n=this.getAttributeManager();if(!n)return null;let{positions:r,instancePositions:i}=n.attributes;return(e=r||i)===null||e===void 0?void 0:e.getBounds()}getShaders(e){for(let n of this.props.extensions)e=nL(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){let n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(let c of r)n.invalidateAll(c);else n.invalidateAll();let{props:i,oldProps:o}=e,s=Number.isInteger(o.highlightedObjectIndex)||o.pickable,a=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(s!==a&&n){let{pickingColors:c,instancePickingColors:l}=n.attributes,u=c||l;u&&(a&&u.constant&&(u.constant=!1,n.invalidate(u.id)),!u.value&&!a&&(u.constant=!0,u.value=[0,0,0]))}}finalizeState(e){for(let r of this.getModels())r.delete();let n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(let n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){let{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e.message="".concat(n,": ").concat(e.message)),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var o,s;(o=this.context)===null||o===void 0||(s=o.onError)===null||s===void 0||s.call(o,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;let n=this.internalState.viewport;this.internalState.viewport=e,(!n||!p5({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){let n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(let n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){let e=this.getAttributeManager();if(!e)return;let n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});let o=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){let e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){let{uniformTransitions:e}=this.internalState;if(e.active){let n=e.update(),r=Object.create(this.props);for(let i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;let r=Math.floor(wr.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>lL&&K.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),wr=Qr.allocate(wr,n,{size:3,copy:!0,maxCount:Math.max(n,lL)});let i=Math.floor(wr.length/3),o=[];for(let s=r;s<i;s++)this.encodePickingColor(s,o),wr[s*3+0]=o[0],wr[s*3+1]=o[1],wr[s*3+2]=o[2]}e.value=wr.subarray(0,n*3)}_setModelAttributes(e,n){let r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},o=r.getShaderAttributes(n,i);e.setAttributes(o)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){let{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;let o=i.getVertexOffset(e),s=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(s-o),offset:o})}restorePickingColors(){let{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==wr.buffer&&(r.value=wr.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){Ue(!this.internalState),Ue(Number.isFinite(this.props.coordinateSystem)),Ge(l5,this);let e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new Dm({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(K.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new Tm(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(let n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Ge(f5,this,this===e);let{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.internalState.layer=this,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){let e=this.needsUpdate();if(Ge(u5,this,e),!e)return;let n=this.props,r=this.context,i=this.internalState,o=r.viewport,s=this._updateUniformTransition();i.propsInTransition=s,r.viewport=i.viewport||o,this.props=s;try{let a=this._getUpdateParams(),c=this.getModels();if(r.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(let u of this.props.extensions)u.updateState.call(this,a,u);let l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{r.viewport=o,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Ge(d5,this),this.finalizeState(this.context);for(let e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();let i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;let s=this.props.opacity;n.opacity=Math.pow(s,1/2.2);try{e&&this.setModuleParameters(e);let{getPolygonOffset:a}=this.props,c=a&&a(n)||[0,0];Dt(o.gl,{polygonOffset:c}),Fe(o.gl,r,()=>{let l={moduleParameters:e,uniforms:n,parameters:r,context:o};for(let u of this.props.extensions)u.draw.call(this,l,u);this.draw(l)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;let{changeFlags:n}=this.internalState;for(let i in e)if(e[i]){let o=!1;switch(i){case"dataChanged":let s=e[i],a=n[i];s&&Array.isArray(a)&&(n.dataChanged=Array.isArray(s)?a.concat(s):s,o=!0);default:n[i]||(n[i]=e[i],o=!0)}o&&Ge(c5,this,i,e)}let r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){let r=QO(e,n);if(r.updateTriggersChanged)for(let o in r.updateTriggersChanged)r.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(r.transitionsChanged)for(let o in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,n[o],e[o],(i=e.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(r)}validateProps(){KO(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){let n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){let e=this.context;return new wm(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){let{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();let{model:o}=this.state;o?.setInstanceCount(this.getNumInstances());let{autoHighlight:s,highlightedObjectIndex:a,highlightColor:c}=r;if(n||i.autoHighlight!==s||i.highlightedObjectIndex!==a||i.highlightColor!==c){let l={};s||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(n||a!==i.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;let r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;return n=n||i,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}};m(Nt,"defaultProps",m5);m(Nt,"layerName","Layer");var g5="compositeLayer.renderLayers",Zi=class extends Nt{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){let{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){let{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){let n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var n;let{opacity:r,pickable:i,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:d,coordinateOrigin:f,wrapLongitude:h,positionFormat:p,modelMatrix:g,extensions:y,fetch:_,operation:E,_subLayerProps:A}=this.props,I={id:"",updateTriggers:{},opacity:r,pickable:i,visible:o,parameters:s,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:d,coordinateOrigin:f,wrapLongitude:h,positionFormat:p,modelMatrix:g,extensions:y,fetch:_,operation:E},C=A&&e.id&&A[e.id],D=C&&C.updateTriggers,F=e.id||"sublayer";if(C){let z=this.constructor._propTypes,j=e.type?e.type._propTypes:{};for(let k in C){let B=j[k]||z[k];B&&B.type==="accessor"&&(C[k]=this.getSubLayerAccessor(C[k]))}}Object.assign(I,e,C),I.id="".concat(this.props.id,"-").concat(F),I.updateTriggers=v(v({all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all},e.updateTriggers),D);for(let z of y){let j=z.getSubLayerProps.call(this,z);j&&Object.assign(I,j,{updateTriggers:Object.assign(I.updateTriggers,j.updateTriggers)})}return I}_updateAutoHighlight(e){for(let n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers,i=!r||this.needsUpdate();if(i){let o=this.renderLayers();r=Ya(o,Boolean),this.internalState.subLayers=r}Ge(g5,this,i,r);for(let o of r)o.parent=this}};m(Zi,"layerName","CompositeLayer");var AE=Math.PI/180;function v5({height:t,focalDistance:e,orbitAxis:n,rotationX:r,rotationOrbit:i,zoom:o}){let s=n==="Z"?[0,0,1]:[0,1,0],a=n==="Z"?[0,-e,0]:[0,0,e],c=new Q().lookAt({eye:a,up:s});c.rotateX(r*AE),n==="Z"?c.rotateZ(i*AE):c.rotateY(i*AE);let l=Math.pow(2,o)/t;return c.scale(l),c}var Pm=class extends Qt{constructor(e){let{height:n,projectionMatrix:r,fovy:i=50,orbitAxis:o="Z",target:s=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,u=r?r[5]/2:os(i);super(S(v({},e),{longitude:void 0,viewMatrix:v5({height:n||1,focalDistance:u,orbitAxis:o,rotationX:a,rotationOrbit:c,zoom:l}),fovy:i,focalDistance:u,position:s,zoom:l})),m(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:n=!0}={}){let[r,i,o=this.projectedCenter[2]]=e,s=n?i:this.height-i,[a,c,l]=vn([r,s,o],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,n){let r=this.project(e),i=[this.width/2+r[0]-n[0],this.height/2+r[1]-n[1],this.projectedCenter[2]];return{target:this.unproject(i)}}};var ic=class extends Vi{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return Pm}get ControllerType(){return Yp}};m(ic,"displayName","OrbitView");var uL=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`;var dL=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var y5=1024,_5=4,fL=()=>{},hL={10241:9987,10240:9729,10242:33071,10243:33071};function b5(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function x5(t,e,n,r){return n===e.width&&r===e.height?e:(t.canvas.height=r,t.canvas.width=n,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e,0,0,e.width,e.height,0,0,n,r),t.canvas)}function Lu(t){return t&&(t.id||t.url)}function E5(t,e,n,r){let i=t.width,o=t.height,s=new ve(t.gl,{width:e,height:n,parameters:r});return ep(t,s,{targetY:0,width:i,height:o}),t.delete(),s}function pL(t,e,n){for(let r=0;r<e.length;r++){let{icon:i,xOffset:o}=e[r],s=Lu(i);t[s]=S(v({},i),{x:o,y:n})}}function w5({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:o=0,canvasWidth:s}){let a=[];for(let c=0;c<t.length;c++){let l=t[c],u=Lu(l);if(!n[u]){let{height:d,width:f}=l;r+f+e>s&&(pL(n,a,i),r=0,i=o+i+e,o=0,a=[]),a.push({icon:l,xOffset:r}),r=r+f+e,o=Math.max(o,d)}}return a.length>0&&pL(n,a,i),{mapping:n,rowHeight:o,xOffset:r,yOffset:i,canvasWidth:s,canvasHeight:b5(o+i+e)}}function A5(t,e,n){if(!t||!e)return null;n=n||{};let r={},{iterable:i,objectInfo:o}=ri(t);for(let s of i){o.index++;let a=e(s,o),c=Lu(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!r[c]&&(!n[c]||a.url!==n[c].url)&&(r[c]=S(v({},a),{source:s,sourceIndex:o.index}))}return r}var Rm=class{constructor(e,{onUpdate:n=fL,onError:r=fL}){m(this,"gl",void 0),m(this,"onUpdate",void 0),m(this,"onError",void 0),m(this,"_loadOptions",null),m(this,"_texture",null),m(this,"_externalTexture",null),m(this,"_mapping",{}),m(this,"_textureParameters",null),m(this,"_pendingCount",0),m(this,"_autoPacking",!1),m(this,"_xOffset",0),m(this,"_yOffset",0),m(this,"_rowHeight",0),m(this,"_buffer",_5),m(this,"_canvasWidth",y5),m(this,"_canvasHeight",0),m(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=r}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){let n=this._autoPacking?Lu(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:o}){if(e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),i&&(this._mapping=i),r){var s;(s=this._texture)===null||s===void 0||s.delete(),this._texture=null,this._externalTexture=r}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;let r=Object.values(A5(e,n,this._mapping)||{});if(r.length>0){let{mapping:i,xOffset:o,yOffset:s,rowHeight:a,canvasHeight:c}=w5({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=i,this._xOffset=o,this._yOffset=s,this._canvasHeight=c,this._texture||(this._texture=new ve(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||hL})),this._texture.height!==this._canvasHeight&&(this._texture=E5(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||hL)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(e){let n=this._canvas.getContext("2d");for(let r of e)this._pendingCount++,cr(r.url,Ql,this._loadOptions).then(i=>{let o=Lu(r),{x:s,y:a,width:c,height:l}=this._mapping[o],u=x5(n,i,c,l);this._texture.setSubImageData({data:u,x:s,y:a,width:c,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}};var mL=[0,0,0,255],I5={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:mL},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}},oc=class extends Nt{constructor(...e){super(...e),m(this,"state",void 0)}getShaders(){return super.getShaders({vs:uL,fs:dL,modules:[gr,vr]})}initializeState(){this.state={iconManager:new Rm(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:mL},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);let{props:n,oldProps:r,changeFlags:i}=e,o=this.getAttributeManager(),{iconAtlas:s,iconMapping:a,data:c,getIcon:l,textureParameters:u}=n,{iconManager:d}=this.state,f=s||this.internalState.isAsyncPropLoading("iconAtlas");if(d.setProps({loadOptions:n.loadOptions,autoPacking:!f,iconAtlas:s,iconMapping:f?a:null,textureParameters:u}),f?r.iconMapping!==n.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&d.packIcons(c,l),i.extensionsChanged){var h;let{gl:p}=this.context;(h=this.state.model)===null||h===void 0||h.delete(),this.state.model=this._getModel(p),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){let{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:o,billboard:s,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:ki[o],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:s,alphaCutoff:a}).draw()}_getModel(e){let n=[-1,-1,-1,1,1,1,1,-1];return new Rt(e,S(v({},this.getShaders()),{id:this.props.id,geometry:new ht({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0}))}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;let r=(n=this.getCurrentLayer())===null||n===void 0?void 0:n.props.onIconError;r?r(e):K.error(e.error.message)()}getInstanceOffset(e){let{width:n,height:r,anchorX:i=n/2,anchorY:o=r/2}=this.state.iconManager.getIconMapping(e);return[n/2-i,r/2-o]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){let{x:n,y:r,width:i,height:o}=this.state.iconManager.getIconMapping(e);return[n,r,i,o]}};m(oc,"defaultProps",I5);m(oc,"layerName","IconLayer");var gL=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var vL=192/256,yL=[],T5={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}},sc=class extends oc{constructor(...e){super(...e),m(this,"state",void 0)}getShaders(){return S(v({},super.getShaders()),{fs:gL})}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:r,target:i})=>this.encodePickingColor(r,i)}})}updateState(e){super.updateState(e);let{props:n,oldProps:r}=e,{outlineColor:i}=n;i!==r.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!n.sdf&&n.outlineWidth&&K.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){let{sdf:n,smoothing:r,outlineWidth:i}=this.props,{outlineColor:o}=this.state;e.uniforms=S(v({},e.uniforms),{buffer:vL,outlineBuffer:i?Math.max(r,vL*(1-i)):-1,gamma:r,sdf:!!n,outlineColor:o}),super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):yL}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):yL}};m(sc,"defaultProps",T5);m(sc,"layerName","MultiIconLayer");var ML=Ov(xL());var M5=32,D5=[];function P5(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function EL({characterSet:t,getFontWidth:e,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:o={},xOffset:s=0,yOffset:a=0}){let c=0,l=s;for(let d of t)if(!o[d]){let f=e(d);l+f+r*2>i&&(l=0,c++),o[d]={x:l+r,y:a+c*(n+r*2)+r,width:f,height:n},l+=f+r*2}let u=n+r*2;return{mapping:o,xOffset:l,yOffset:a+c*u,canvasHeight:P5(a+(c+1)*u)}}function wL(t,e,n,r){let i=0;for(let s=e;s<n;s++){var o;let a=t[s];i+=((o=r[a])===null||o===void 0?void 0:o.width)||0}return i}function AL(t,e,n,r,i,o){let s=e,a=0;for(let c=e;c<n;c++){let l=wL(t,c,c+1,i);a+l>r&&(s<c&&o.push(c),s=c,a=0),a+=l}return a}function R5(t,e,n,r,i,o){let s=e,a=e,c=e,l=0;for(let u=e;u<n;u++)if((t[u]===" "||t[u+1]===" "||u+1===n)&&(c=u+1),c>a){let d=wL(t,a,c,i);l+d>r&&(s<a&&(o.push(a),s=a,l=0),d>r&&(d=AL(t,a,c,r,i,o),s=o[o.length-1])),a=c,l+=d}return l}function N5(t,e,n,r,i=0,o){o===void 0&&(o=t.length);let s=[];return e==="break-all"?AL(t,i,o,n,r,s):R5(t,i,o,n,r,s),s}function O5(t,e,n,r,i,o){let s=0,a=0;for(let c=e;c<n;c++){let l=t[c],u=r[l];u?(a||(a=u.height),i[c]=s+u.width/2,s+=u.width):(K.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),i[c]=s,s+=M5)}o[0]=s,o[1]=a}function TE(t,e,n,r,i){let o=Array.from(t),s=o.length,a=new Array(s),c=new Array(s),l=new Array(s),u=(n==="break-word"||n==="break-all")&&isFinite(r)&&r>0,d=[0,0],f=[0,0],h=0,p=0,g=0;for(let y=0;y<=s;y++){let _=o[y];if((_===`
`||y===s)&&(g=y),g>p){let E=u?N5(o,n,r,i,p,g):D5;for(let A=0;A<=E.length;A++){let I=A===0?p:E[A-1],C=A<E.length?E[A]:g;O5(o,I,C,i,a,f);for(let D=I;D<C;D++)c[D]=h+f[1]/2,l[D]=f[0];h=h+f[1]*e,d[0]=Math.max(d[0],f[0])}p=g}_===`
`&&(a[p]=0,c[p]=0,l[p]=0,p++)}return d[1]=h,{x:a,y:c,rowWidth:l,size:d}}function IL({value:t,length:e,stride:n,offset:r,startIndices:i,characterSet:o}){let s=t.BYTES_PER_ELEMENT,a=n?n/s:1,c=r?r/s:0,l=i[e]||Math.ceil((t.length-c)/a),u=o&&new Set,d=new Array(e),f=t;if(a>1||c>0){let h=t.constructor;f=new h(l);for(let p=0;p<l;p++)f[p]=t[p*a+c]}for(let h=0;h<e;h++){let p=i[h],g=i[h+1]||l,y=f.subarray(p,g);d[h]=String.fromCodePoint.apply(null,y),u&&y.forEach(u.add,u)}if(u)for(let h of u)o.add(String.fromCodePoint(h));return{texts:d,characterCount:l}}var ku=class{constructor(e=5){m(this,"limit",void 0),m(this,"_cache",{}),m(this,"_order",[]),this.limit=e}get(e){let n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){let n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}};function L5(){let t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}var cc={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:L5(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},TL=1024,B5=.9,SL=1.2,DL=3,Nm=new ku(DL);function k5(t,e){let n;typeof e=="string"?n=new Set(Array.from(e)):n=new Set(e);let r=Nm.get(t);if(!r)return n;for(let i in r.mapping)n.has(i)&&n.delete(i);return n}function F5(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function CL(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function PL(t){K.assert(Number.isFinite(t)&&t>=DL,"Invalid cache limit"),Nm=new ku(t)}var Om=class{constructor(){m(this,"props",v({},cc)),m(this,"_key",void 0),m(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return SL}setProps(e={}){Object.assign(this.props,e);let n=this._key;this._key=this._getKey();let r=k5(this._key,this.props.characterSet),i=Nm.get(this._key);if(i&&r.size===0){this._key!==n&&(this._atlas=i);return}let o=this._generateFontAtlas(this._key,r,i);this._atlas=o,Nm.set(this._key,o)}_generateFontAtlas(e,n,r){let{fontFamily:i,fontWeight:o,fontSize:s,buffer:a,sdf:c,radius:l,cutoff:u}=this.props,d=r&&r.data;d||(d=document.createElement("canvas"),d.width=TL);let f=d.getContext("2d");CL(f,i,s,o);let{mapping:h,canvasHeight:p,xOffset:g,yOffset:y}=EL(v({getFontWidth:_=>f.measureText(_).width,fontHeight:s*SL,buffer:a,characterSet:n,maxCanvasWidth:TL},r&&{mapping:r.mapping,xOffset:r.xOffset,yOffset:r.yOffset}));if(d.height!==p){let _=f.getImageData(0,0,d.width,d.height);d.height=p,f.putImageData(_,0,0)}if(CL(f,i,s,o),c){let _=new ML.default(s,a,l,u,i,o),E=f.getImageData(0,0,_.size,_.size);for(let A of n)F5(_.draw(A),E),f.putImageData(E,h[A].x-a,h[A].y+a)}else for(let _ of n)f.fillText(_,h[_].x,h[_].y+s*B5);return{xOffset:g,yOffset:y,mapping:h,data:d,width:d.width,height:d.height}}_getKey(){let{fontFamily:e,fontWeight:n,fontSize:r,buffer:i,sdf:o,radius:s,cutoff:a}=this.props;return o?"".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(s," ").concat(a):"".concat(e," ").concat(n," ").concat(r," ").concat(i)}};var RL=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`;var NL=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`;var j5={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}},lc=class extends Nt{constructor(...e){super(...e),m(this,"state",void 0)}getShaders(){return super.getShaders({vs:RL,fs:NL,modules:[gr,vr]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);let{changeFlags:n}=e;if(n.extensionsChanged){var r;let{gl:i}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){let{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:s,getLineWidth:a}=this.props,{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!a,padding:c,sizeUnits:ki[i],sizeScale:r,sizeMinPixels:o,sizeMaxPixels:s}).draw()}_getModel(e){let n=[0,0,1,0,1,1,0,1];return new Rt(e,S(v({},this.getShaders()),{id:this.props.id,geometry:new ht({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0}))}};m(lc,"defaultProps",j5);m(lc,"layerName","TextBackgroundLayer");var OL={start:1,middle:0,end:-1},LL={top:1,center:0,bottom:-1},SE=[0,0,0,255],U5=1,z5={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:SE},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:cc.characterSet},fontFamily:cc.fontFamily,fontWeight:cc.fontWeight,lineHeight:U5,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:SE},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:SE},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}},hs=class extends Zi{constructor(...e){super(...e),m(this,"state",void 0),m(this,"getBoundingRect",(n,r)=>{let i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:u}=this.props,d=o(n,r)||"",{size:[f,h]}=TE(d,c,s,a,i),p=OL[typeof l=="function"?l(n,r):l],g=LL[typeof u=="function"?u(n,r):u];return[(p-1)*f/2,(g-1)*h/2,f,h]}),m(this,"getIconOffsets",(n,r)=>{let i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:s,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:u}=this.props,d=o(n,r)||"",{x:f,y:h,rowWidth:p,size:[g,y]}=TE(d,c,s,a,i),_=OL[typeof l=="function"?l(n,r):l],E=LL[typeof u=="function"?u(n,r):u],A=f.length,I=new Array(A*2),C=0;for(let D=0;D<A;D++){let F=(1-_)*(g-p[D])/2;I[C++]=(_-1)*g/2+F+f[D],I[C++]=(E-1)*y/2+h[D]}return I})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Om}}updateState(e){let{props:n,oldProps:r,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==r.lineHeight||n.wordBreak!==r.wordBreak||n.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){let{fontSettings:e,fontFamily:n,fontWeight:r}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,s=S(v({},e),{characterSet:o,fontFamily:n,fontWeight:r});if(!i.mapping)return i.setProps(s),!0;for(let a in s)if(s[a]!==i.props[a])return i.setProps(s),!0;return!1}_updateText(){var e;let{data:n,characterSet:r}=this.props,i=(e=n.attributes)===null||e===void 0?void 0:e.getText,{getText:o}=this.props,s=n.startIndices,a,c=r==="auto"&&new Set;if(i&&s){let{texts:l,characterCount:u}=IL(S(v({},ArrayBuffer.isView(i)?{value:i}:i),{length:n.length,startIndices:s,characterSet:c}));a=u,o=(d,{index:f})=>l[f]}else{let{iterable:l,objectInfo:u}=ri(n);s=[0],a=0;for(let d of l){u.index++;let f=Array.from(o(d,u)||"");c&&f.forEach(c.add,c),a+=f.length,s.push(a)}}this.setState({getText:o,startIndices:s,numInstances:a,characterSet:c||r})}renderLayers(){let{startIndices:e,numInstances:n,getText:r,fontAtlasManager:{scale:i,texture:o,mapping:s},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:u,getColor:d,getSize:f,getAngle:h,getPixelOffset:p,getBackgroundColor:g,getBorderColor:y,getBorderWidth:_,backgroundPadding:E,background:A,billboard:I,fontSettings:C,outlineWidth:D,outlineColor:F,sizeScale:z,sizeUnits:j,sizeMinPixels:k,sizeMaxPixels:B,transitions:W,updateTriggers:O}=this.props,Z=this.getSubLayerClass("characters",sc),J=this.getSubLayerClass("background",lc);return[A&&new J({getFillColor:g,getLineColor:y,getLineWidth:_,padding:E,getPosition:u,getSize:f,getAngle:h,getPixelOffset:p,billboard:I,sizeScale:z/this.state.fontAtlasManager.props.fontSize,sizeUnits:j,sizeMinPixels:k,sizeMaxPixels:B,transitions:W&&{getPosition:W.getPosition,getAngle:W.getAngle,getSize:W.getSize,getFillColor:W.getBackgroundColor,getLineColor:W.getBorderColor,getLineWidth:W.getBorderWidth,getPixelOffset:W.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:O.getPosition,getAngle:O.getAngle,getSize:O.getSize,getFillColor:O.getBackgroundColor,getLineColor:O.getBorderColor,getLineWidth:O.getBorderWidth,getPixelOffset:O.getPixelOffset,getBoundingRect:{getText:O.getText,getTextAnchor:O.getTextAnchor,getAlignmentBaseline:O.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new Z({sdf:C.sdf,smoothing:Number.isFinite(C.smoothing)?C.smoothing:cc.smoothing,outlineWidth:D,outlineColor:F,iconAtlas:o,iconMapping:s,getPosition:u,getColor:d,getSize:f,getAngle:h,getPixelOffset:p,billboard:I,sizeScale:z*i,sizeUnits:j,sizeMinPixels:k*i,sizeMaxPixels:B*i,transitions:W&&{getPosition:W.getPosition,getAngle:W.getAngle,getColor:W.getColor,getSize:W.getSize,getPixelOffset:W.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:O.getText,getPosition:O.getPosition,getAngle:O.getAngle,getColor:O.getColor,getSize:O.getSize,getPixelOffset:O.getPixelOffset,getIconOffsets:{getText:O.getText,getTextAnchor:O.getTextAnchor,getAlignmentBaseline:O.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:r})]}static set fontAtlasCacheLimit(e){PL(e)}};m(hs,"defaultProps",z5);m(hs,"layerName","TextLayer");var CE=Math.PI/180,Lm=new Float32Array(16),BL=new Float32Array(12);function kL(t,e,n){let r=e[0]*CE,i=e[1]*CE,o=e[2]*CE,s=Math.sin(o),a=Math.sin(r),c=Math.sin(i),l=Math.cos(o),u=Math.cos(r),d=Math.cos(i),f=n[0],h=n[1],p=n[2];t[0]=f*d*u,t[1]=f*c*u,t[2]=f*-a,t[3]=h*(-c*l+d*a*s),t[4]=h*(d*l+c*a*s),t[5]=h*u*s,t[6]=p*(c*s+d*a*l),t[7]=p*(-d*s+c*a*l),t[8]=p*u*l}function FL(t){return t[0]=t[0],t[1]=t[1],t[2]=t[2],t[3]=t[4],t[4]=t[5],t[5]=t[6],t[6]=t[8],t[7]=t[9],t[8]=t[10],t[9]=t[12],t[10]=t[13],t[11]=t[14],t.subarray(0,12)}var Bm={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(t,{startRow:e,endRow:n}){let{data:r,getOrientation:i,getScale:o,getTranslation:s,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&a.length===16,u=Array.isArray(o),d=Array.isArray(i),f=Array.isArray(s),h=l||!c&&!!a(r[0]);h?t.constant=l:t.constant=d&&u&&f;let p=t.value;if(t.constant){let g;h?(Lm.set(a),g=FL(Lm)):(g=BL,kL(g,i,o),g.set(s,9)),t.value=new Float32Array(g)}else{let g=e*t.size,{iterable:y,objectInfo:_}=ri(r,e,n);for(let E of y){_.index++;let A;if(h)Lm.set(l?a:a(E,_)),A=FL(Lm);else{A=BL;let I=d?i:i(E,_),C=u?o:o(E,_);kL(A,I,C),A.set(f?s:s(E,_),9)}p[g++]=A[0],p[g++]=A[1],p[g++]=A[2],p[g++]=A[3],p[g++]=A[4],p[g++]=A[5],p[g++]=A[6],p[g++]=A[7],p[g++]=A[8],p[g++]=A[9],p[g++]=A[10],p[g++]=A[11]}}}};function km(t,e){return e===le.CARTESIAN||e===le.METER_OFFSETS||e===le.DEFAULT&&!t.isGeospatial}var jL=`#version 300 es
#define SHADER_NAME simple-mesh-layer-vs

// Scale the model
uniform float sizeScale;
uniform bool composeModelMatrix;

// Primitive attributes
in vec3 positions;
in vec3 normals;
in vec3 colors;
in vec2 texCoords;

// Instance attributes
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;

// Outputs to fragment shader
out vec2 vTexCoord;
out vec3 cameraPosition;
out vec3 normals_commonspace;
out vec4 position_commonspace;
out vec4 vColor;

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = texCoords;
  geometry.pickingColor = instancePickingColors;

  vTexCoord = texCoords;
  cameraPosition = project_uCameraPosition;
  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);

  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;

  if (composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    // using instancePositions as world coordinates
    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth
    // call project_normal before setting position to avoid rotation
    normals_commonspace = project_normal(instanceModelMatrix * normals);
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);
    geometry.position = position_commonspace;
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);
    geometry.position = position_commonspace;
    normals_commonspace = project_normal(instanceModelMatrix * normals);
  }

  geometry.normal = normals_commonspace;
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var UL=`#version 300 es
#define SHADER_NAME simple-mesh-layer-fs

precision highp float;

uniform bool hasTexture;
uniform sampler2D sampler;
uniform bool flatShading;
uniform float opacity;

in vec2 vTexCoord;
in vec3 cameraPosition;
in vec3 normals_commonspace;
in vec4 position_commonspace;
in vec4 vColor;

out vec4 fragColor;

void main(void) {
  geometry.uv = vTexCoord;

  vec3 normal;
  if (flatShading) {

// NOTE(Tarek): This is necessary because
// headless.gl reports the extension as
// available but does not support it in
// the shader.
#ifdef DERIVATIVES_AVAILABLE
    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
#else
    normal = vec3(0.0, 0.0, 1.0);
#endif
  } else {
    normal = normals_commonspace;
  }

  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;
  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);
  fragColor = vec4(lightColor, color.a * opacity);

  DECKGL_FILTER_COLOR(fragColor, geometry);
}
`;function zL(t,e){(t.COLOR_0||t.colors)&&e||(t.colors={constant:!0,value:new Float32Array([1,1,1])}),K.assert(t.positions||t.POSITION,'no "postions" or "POSITION" attribute in mesh')}function V5(t,e){if(t.attributes)return zL(t.attributes,e),t instanceof ht?t:new ht(t);if(t.positions||t.POSITION)return zL(t,e),new ht({attributes:t});throw Error("Invalid mesh")}var $5=[0,0,0,255],G5={mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:$5},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}},ps=class extends Nt{constructor(...e){super(...e),m(this,"state",void 0)}getShaders(){let e=!Y(this.context.gl),n={};return Xr(this.context.gl,be.GLSL_DERIVATIVES)&&(n.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:jL,fs:UL,modules:[gr,ka,vr],transpileToGLSL100:e,defines:n})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:Bm}),this.setState({emptyTexture:new ve(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);let{props:n,oldProps:r,changeFlags:i}=e;if(n.mesh!==r.mesh||i.extensionsChanged){var o;if((o=this.state.model)===null||o===void 0||o.delete(),n.mesh){this.state.model=this.getModel(n.mesh);let s=n.mesh.attributes||n.mesh;this.setState({hasNormals:!!(s.NORMAL||s.normals)})}this.getAttributeManager().invalidateAll()}n.texture!==r.texture&&this.setTexture(n.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;let{viewport:n}=this.context,{sizeScale:r,coordinateSystem:i,_instanced:o}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:r,composeModelMatrix:!o||km(n,i),flatShading:!this.state.hasNormals}).draw()}getModel(e){let n=new Rt(this.context.gl,S(v({},this.getShaders()),{id:this.props.id,geometry:V5(e,this.props._useMeshColors),isInstanced:!0})),{texture:r}=this.props,{emptyTexture:i}=this.state;return n.setUniforms({sampler:r||i,hasTexture:!!r}),n}setTexture(e){let{emptyTexture:n,model:r}=this.state;r&&r.setUniforms({sampler:e||n,hasTexture:!!e})}};m(ps,"defaultProps",G5);m(ps,"layerName","SimpleMeshLayer");var _n=class{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{id:n}=e;this.id=n||Me(this.constructor.name),this.display=!0,this.position=new je,this.rotation=new je,this.scale=new je(1,1,1),this.matrix=new Q,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return L(e.length===3,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return L(e.length===3,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return L(e.length===3,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?this.matrix.copy(e):this.matrix=e}setMatrixComponents(e){let{position:n,rotation:r,scale:i,update:o=!0}=e;return n&&this.setPosition(n),r&&this.setRotation(r),i&&this.setScale(i),o&&this.updateMatrix(),this}updateMatrix(){let e=this.position,n=this.rotation,r=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(n),this.matrix.scale(r),this}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{position:n,rotation:r,scale:i}=e;return n&&this.setPosition(n),r&&this.setRotation(r),i&&this.setScale(i),this.updateMatrix(),this}getCoordinateUniforms(e,n){L(e),n=n||this.matrix;let r=new Q(e).multiplyRight(n),i=r.invert(),o=i.transpose();return{viewMatrix:e,modelMatrix:n,objectMatrix:n,worldMatrix:r,worldInverseMatrix:i,worldInverseTransposeMatrix:o}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}};var uc=class t extends _n{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;let{children:n=[]}=e;$.assert(n.every(r=>r instanceof _n),"every child must an instance of ScenegraphNode"),super(e),this.children=n}add(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];for(let i of n)Array.isArray(i)?this.add(...i):this.children.push(i);return this}remove(e){let n=this.children,r=n.indexOf(e);return r>-1&&n.splice(r,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){let e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((n,r)=>{let{worldMatrix:i}=r,o=n.getBounds();if(!o)return;let[s,a]=o,c=new je(s).add(a).divide([2,2,2]);i.transformAsPoint(c,c);let l=new je(a).subtract(s).divide([2,2,2]);i.transformAsVector(l,l);for(let u=0;u<8;u++){let d=new je(u&1?-1:1,u&2?-1:1,u&4?-1:1).multiply(l).add(c);for(let f=0;f<3;f++)e[0][f]=Math.min(e[0][f],d[f]),e[1][f]=Math.max(e[1][f],d[f])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:n=new Q}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=new Q(n).multiplyRight(this.matrix);for(let i of this.children)i instanceof t?i.traverse(e,{worldMatrix:r}):e(i,{worldMatrix:r})}};var H5={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},W5={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function VL(t){if(!t._animation){let e=W5[t.componentType],n=H5[t.type],r=n*t.count,{buffer:i,byteOffset:o}=t.bufferView.data,s=new e(i,o+(t.byteOffset||0),r);if(n===1)t._animation=Array.from(s);else{let a=[];for(let c=0;c<s.length;c+=n)a.push(Array.from(s.slice(c,c+n)));t._animation=a}}return t._animation}var Z5=new Q;function q5(t,e){if(e.matrix.identity(),t.translation&&e.matrix.translate(t.translation),t.rotation){let n=Z5.fromQuaternion(t.rotation);e.matrix.multiplyRight(n)}t.scale&&e.matrix.scale(t.scale)}var ME=new bu;function X5(t,e,n,r,i){if(e==="rotation"){ME.slerp({start:n,target:r,ratio:i});for(let o=0;o<ME.length;o++)t[e][o]=ME[o]}else for(let o=0;o<n.length;o++)t[e][o]=i*r[o]+(1-i)*n[o]}function J5(t,e,n){let{p0:r,outTangent0:i,inTangent1:o,p1:s,tDiff:a,ratio:c}=n;for(let l=0;l<t[e].length;l++){let u=i[l]*a,d=o[l]*a;t[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*r[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*u+(-2*Math.pow(c,3)+3*Math.pow(c,2))*s[l]+(Math.pow(c,3)-Math.pow(c,2))*d}}function Y5(t,e,n){for(let r=0;r<n.length;r++)t[e][r]=n[r]}function K5(t,e,n,r){let{input:i,interpolation:o,output:s}=e,a=i[i.length-1],c=t%a,l=i.findIndex(h=>h>=c),u=Math.max(0,l-1);if(!Array.isArray(n[r]))switch(r){case"translation":n[r]=[0,0,0];break;case"rotation":n[r]=[0,0,0,1];break;case"scale":n[r]=[1,1,1];break;default:$.warn("Bad animation path ".concat(r))()}L(n[r].length===s[u].length);let d=i[u],f=i[l];switch(o){case"STEP":Y5(n,r,s[u]);break;case"LINEAR":if(f>d){let h=(c-d)/(f-d);X5(n,r,s[u],s[l],h)}break;case"CUBICSPLINE":if(f>d){let h=(c-d)/(f-d),p=f-d,g=s[3*u+1],y=s[3*u+2],_=s[3*l+0],E=s[3*l+1];J5(n,r,{p0:g,outTangent0:y,inTangent1:_,p1:E,tDiff:p,ratio:h})}break;default:$.warn("Interpolation ".concat(o," not supported"))();break}}var DE=class{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;let r=(e/1e3-this.startTime)*this.speed;this.channels.forEach(i=>{let{sampler:o,target:s,path:a}=i;K5(r,o,s,a),q5(s,s._node)})}},Fm=class{constructor(e){this.animations=e.animations.map((n,r)=>{let i=n.name||"Animation-".concat(r),o=n.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:u}=a;return{input:VL(e.accessors[c]),interpolation:l,output:VL(e.accessors[u])}}),s=n.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:o[c],target:e.nodes[l.node],path:l.path}});return new DE({name:i,channels:s})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(n=>n.animate(e))}getAnimations(){return this.animations}};var jm=class extends _n{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(n),this.onBeforeRender=null,this.AfterRender=null,e instanceof Rt?(this.model=e,this._setModelNodeProps(n)):this.model=new Rt(e,n),this.bounds=null,this.managedResources=n.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}};var Um=class{constructor(e,n){let{attributes:r,material:i,pbrDebug:o,imageBasedLightingEnvironment:s,lights:a,useTangents:c}=n;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},Xr(e,be.GLSL_TEXTURE_LOD)&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],s&&(this.uniforms.u_DiffuseEnvSampler=s.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=s.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=s.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),o&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(r.NORMAL,"HAS_NORMALS"),this.defineIfPresent(r.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(r.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(s,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(o,"PBR_DEBUG"),i&&this.parseMaterial(i)}defineIfPresent(e,n){e&&(this.defines[n]=1)}parseTexture(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,i=e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},o=e.texture.source.image,s,a={};o.compressed?(s=o,a={[this.gl.TEXTURE_MIN_FILTER]:o.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):s={data:o};let c=new ve(this.gl,v({id:e.name||e.id,parameters:v(v({},i),a),pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1}},s));this.uniforms[n]=c,this.defineIfPresent(r,r),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");let{metallicFactor:n=1,roughnessFactor:r=1}=e;this.uniforms.u_MetallicRoughnessValues=[n,r]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");let{scale:n=1}=e.normalTexture;this.uniforms.u_NormalScale=n}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");let{strength:n=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=n}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),e.alphaMode==="MASK"){let{alphaCutoff:n=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=n}else e.alphaMode==="BLEND"&&($.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}};var Q5=`
#if (__VERSION__ < 300)
  #define _attr attribute
#else
  #define _attr in
#endif

  _attr vec4 POSITION;

  #ifdef HAS_NORMALS
    _attr vec4 NORMAL;
  #endif

  #ifdef HAS_TANGENTS
    _attr vec4 TANGENT;
  #endif

  #ifdef HAS_UV
    _attr vec2 TEXCOORD_0;
  #endif

  void main(void) {
    vec4 _NORMAL = vec4(0.);
    vec4 _TANGENT = vec4(0.);
    vec2 _TEXCOORD_0 = vec2(0.);

    #ifdef HAS_NORMALS
      _NORMAL = NORMAL;
    #endif

    #ifdef HAS_TANGENTS
      _TANGENT = TANGENT;
    #endif

    #ifdef HAS_UV
      _TEXCOORD_0 = TEXCOORD_0;
    #endif

    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);
    gl_Position = u_MVPMatrix * POSITION;
  }
`,eZ=`
#if (__VERSION__ < 300)
  #define fragmentColor gl_FragColor
#else
  out vec4 fragmentColor;
#endif

  void main(void) {
    fragmentColor = pbr_filterColor(vec4(0));
  }
`;function $L(t,e){return Y(t)?`#version 300 es
`.concat(e):e}function PE(t,e){let{id:n,drawMode:r,vertexCount:i,attributes:o,modelOptions:s}=e,a=new Um(t,e);$.info(4,"createGLTFModel defines: ",a.defines)();let c=[];c.push(...a.generatedTextures),c.push(...Object.values(o).map(u=>u.buffer));let l=new jm(t,S(v({id:n,drawMode:r,vertexCount:i,modules:[Fa],parameters:a.parameters,vs:$L(t,Q5),fs:$L(t,eZ),managedResources:c},s),{defines:v(v({},a.defines),s.defines)}));return l.setProps({attributes:o}),l.setUniforms(a.uniforms),l}var tZ={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},nZ={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1},zm=class{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.options=Object.assign({},nZ,n)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(r=>this.createScene(r))}createAnimator(){return Array.isArray(this.gltf.animations)?new Fm(this.gltf):null}createScene(e){let r=(e.nodes||[]).map(o=>this.createNode(o));return new uc({id:e.name||e.id,children:r})}createNode(e){if(!e._node){let r=(e.children||[]).map(o=>this.createNode(o));e.mesh&&r.push(this.createMesh(e.mesh));let i=new uc({id:e.name||e.id,children:r});if(e.matrix)i.setMatrix(e.matrix);else{if(i.matrix.identity(),e.translation&&i.matrix.translate(e.translation),e.rotation){let o=new Q().fromQuaternion(e.rotation);i.matrix.multiplyRight(o)}e.scale&&i.matrix.scale(e.scale)}e._node=i}return e._node}createMesh(e){if(!e._mesh){let r=(e.primitives||[]).map((o,s)=>this.createPrimitive(o,s,e)),i=new uc({id:e.name||e.id,children:r});e._mesh=i}return e._mesh}getVertexCount(e){$.warn("getVertexCount() not found")()}createPrimitive(e,n,r){let i=PE(this.gl,Object.assign({id:e.name||"".concat(r.name||r.id,"-primitive-").concat(n),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return i.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],i}createAttributes(e,n){let r={};return Object.keys(e).forEach(i=>{r[i]=this.createAccessor(e[i],this.createBuffer(e[i],this.gl.ARRAY_BUFFER))}),n&&(r.indices=this.createAccessor(n,this.createBuffer(n,this.gl.ELEMENT_ARRAY_BUFFER))),$.info(4,"glTF Attributes",{attributes:e,indices:n,generated:r})(),r}createBuffer(e,n){e.bufferView||(e.bufferView={});let{bufferView:r}=e;return r.lumaBuffers||(r.lumaBuffers={}),r.lumaBuffers[n]||(r.lumaBuffers[n]=new ie(this.gl,{id:"from-".concat(r.id),data:r.data||e.value,target:n})),r.lumaBuffers[n]}createAccessor(e,n){return new _t({buffer:n,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:tZ[e.type]})}createSampler(e){return e}needsPOT(){return!1}};function Vm(t,e,n){let r=new zm(t,n),i=r.instantiate(e),o=r.createAnimator();return{scenes:i,animator:o}}var GL="3.2.13";var HL="3.2.13";var WL="3.2.13",rZ="https://unpkg.com/@loaders.gl/textures@".concat(WL,"/dist/libs/basis_encoder.wasm"),iZ="https://unpkg.com/@loaders.gl/textures@".concat(WL,"/dist/libs/basis_encoder.js"),RE;function OE(t){return R(this,null,function*(){let e=t.modules||{};return e.basis?e.basis:(RE=RE||oZ(t),yield RE)})}function oZ(t){return R(this,null,function*(){let e=null,n=null;return[e,n]=yield Promise.all([yield sr("basis_transcoder.js","textures",t),yield sr("basis_transcoder.wasm","textures",t)]),e=e||globalThis.BASIS,yield sZ(e,n)})}function sZ(t,e){let n={};return e&&(n.wasmBinary=e),new Promise(r=>{t(n).then(i=>{let{BasisFile:o,initializeBasis:s}=i;s(),r({BasisFile:o})})})}var NE;function LE(t){return R(this,null,function*(){let e=t.modules||{};return e.basisEncoder?e.basisEncoder:(NE=NE||aZ(t),yield NE)})}function aZ(t){return R(this,null,function*(){let e=null,n=null;return[e,n]=yield Promise.all([yield sr(iZ,"textures",t),yield sr(rZ,"textures",t)]),e=e||globalThis.BASIS,yield cZ(e,n)})}function cZ(t,e){let n={};return e&&(n.wasmBinary=e),new Promise(r=>{t(n).then(i=>{let{BasisFile:o,KTX2File:s,initializeBasis:a,BasisEncoder:c}=i;a(),r({BasisFile:o,KTX2File:s,BasisEncoder:c})})})}var ms={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919};var lZ=["","WEBKIT_","MOZ_"],ZL={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"},$m=null;function qL(t){if(!$m){t=t||uZ()||void 0,$m=new Set;for(let e of lZ)for(let n in ZL)if(t&&t.getExtension("".concat(e).concat(n))){let r=ZL[n];$m.add(r)}}return $m}function uZ(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}var UFe=new Uint8Array([0]);var XL,JL,YL,KL,QL,eB,tB,nB;(function(t){t[t.NONE=0]="NONE",t[t.BASISLZ=1]="BASISLZ",t[t.ZSTD=2]="ZSTD",t[t.ZLIB=3]="ZLIB"})(XL||(XL={})),(function(t){t[t.BASICFORMAT=0]="BASICFORMAT"})(JL||(JL={})),(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.ETC1S=163]="ETC1S",t[t.UASTC=166]="UASTC"})(YL||(YL={})),(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.SRGB=1]="SRGB"})(KL||(KL={})),(function(t){t[t.UNSPECIFIED=0]="UNSPECIFIED",t[t.LINEAR=1]="LINEAR",t[t.SRGB=2]="SRGB",t[t.ITU=3]="ITU",t[t.NTSC=4]="NTSC",t[t.SLOG=5]="SLOG",t[t.SLOG2=6]="SLOG2"})(QL||(QL={})),(function(t){t[t.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",t[t.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"})(eB||(eB={})),(function(t){t[t.RGB=0]="RGB",t[t.RRR=3]="RRR",t[t.GGG=4]="GGG",t[t.AAA=15]="AAA"})(tB||(tB={})),(function(t){t[t.RGB=0]="RGB",t[t.RGBA=3]="RGBA",t[t.RRR=4]="RRR",t[t.RRRG=5]="RRRG"})(nB||(nB={}));var en=[171,75,84,88,32,50,48,187,13,10,26,10];function rB(t){let e=new Uint8Array(t);return!(e.byteLength<en.length||e[0]!==en[0]||e[1]!==en[1]||e[2]!==en[2]||e[3]!==en[3]||e[4]!==en[4]||e[5]!==en[5]||e[6]!==en[6]||e[7]!==en[7]||e[8]!==en[8]||e[9]!==en[9]||e[10]!==en[10]||e[11]!==en[11])}var dZ={etc1:{basisFormat:0,compressed:!0,format:ms.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:ms.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:ms.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:ms.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:ms.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:ms.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function kE(t,e){return R(this,null,function*(){if(e.basis.containerFormat==="auto"){if(rB(t)){let r=yield LE(e);return iB(r.KTX2File,t,e)}let{BasisFile:n}=yield OE(e);return BE(n,t,e)}switch(e.basis.module){case"encoder":let n=yield LE(e);switch(e.basis.containerFormat){case"ktx2":return iB(n.KTX2File,t,e);case"basis":default:return BE(n.BasisFile,t,e)}case"transcoder":default:let{BasisFile:r}=yield OE(e);return BE(r,t,e)}})}function BE(t,e,n){let r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("Failed to start basis transcoding");let i=r.getNumImages(),o=[];for(let s=0;s<i;s++){let a=r.getNumLevels(s),c=[];for(let l=0;l<a;l++)c.push(fZ(r,s,l,n));o.push(c)}return o}finally{r.close(),r.delete()}}function fZ(t,e,n,r){let i=t.getImageWidth(e,n),o=t.getImageHeight(e,n),s=t.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=oB(r,s),u=t.getImageTranscodedSizeInBytes(e,n,l),d=new Uint8Array(u);if(!t.transcodeImage(d,e,n,l,0,0))throw new Error("failed to start Basis transcoding");return{width:i,height:o,data:d,compressed:a,format:c,hasAlpha:s}}function iB(t,e,n){let r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("failed to start KTX2 transcoding");let i=r.getLevels(),o=[];for(let s=0;s<i;s++){o.push(hZ(r,s,n));break}return[o]}finally{r.close(),r.delete()}}function hZ(t,e,n){let{alphaFlag:r,height:i,width:o}=t.getImageLevelInfo(e,0,0),{compressed:s,format:a,basisFormat:c}=oB(n,r),l=t.getImageTranscodedSizeInBytes(e,0,0,c),u=new Uint8Array(l);if(!t.transcodeImage(u,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:o,height:i,data:u,compressed:s,hasAlpha:r,format:a}}function oB(t,e){let n=t&&t.basis&&t.basis.format;return n==="auto"&&(n=Gm()),typeof n=="object"&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),dZ[n]}function Gm(){let t=qL();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}var sB={name:"Basis",id:"basis",module:"textures",version:HL,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},FE=S(v({},sB),{parse:kE});var aB="3.2.13";function bn(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var Ar={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},pZ=Ar.self||Ar.window||Ar.global||{},mZ=Ar.window||Ar.self||Ar.global||{},gZ=Ar.global||Ar.self||Ar.window||{},vZ=Ar.document||{};var gs=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser);var cB=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),yZ=cB&&parseFloat(cB[1])||0;function uB(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?lB(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?lB(t,0,e):""}function lB(t,e,n){if(t.byteLength<=e+n)return"";let r=new DataView(t),i="";for(let o=0;o<n;o++)i+=String.fromCharCode(r.getUint8(e+o));return i}function jE(t){try{return JSON.parse(t)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(uB(t),'"'))}}function Fu(t,e,n){let r=n!==void 0?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(r).buffer}function qi(t,e){return bn(t>=0),bn(e>0),t+(e-1)&~(e-1)}function UE(t,e,n){let r;if(t instanceof ArrayBuffer)r=new Uint8Array(t);else{let i=t.byteOffset,o=t.byteLength;r=new Uint8Array(t.buffer||t.arrayBuffer,i,o)}return e.set(r,n),n+qi(r.byteLength,4)}var{_parseImageNode:_Z}=globalThis,zE=typeof Image<"u",VE=typeof ImageBitmap<"u",bZ=!!_Z,$E=gs?!0:bZ;function dB(t){switch(t){case"auto":return VE||zE||$E;case"imagebitmap":return VE;case"image":return zE;case"data":return $E;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function fB(){if(VE)return"imagebitmap";if(zE)return"image";if($E)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function xZ(t){let e=EZ(t);if(!e)throw new Error("Not an image");return e}function hB(t){switch(xZ(t)){case"data":return t;case"image":case"imagebitmap":let e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function EZ(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}var wZ=/^data:image\/svg\+xml/,AZ=/\.svg((\?|#).*)?$/;function Hm(t){return t&&(wZ.test(t)||AZ.test(t))}function pB(t,e){if(Hm(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return GE(t,e)}function GE(t,e){if(Hm(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}function ju(t,e,n){return R(this,null,function*(){let r=pB(t,n),i=self.URL||self.webkitURL,o=typeof r!="string"&&i.createObjectURL(r);try{return yield IZ(o||r,e)}finally{o&&i.revokeObjectURL(o)}})}function IZ(t,e){return R(this,null,function*(){let n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(yield n.decode(),n):yield new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=o=>i(new Error("Could not load image ".concat(t,": ").concat(o)))}catch(o){i(o)}})})}var TZ={},mB=!0;function HE(t,e,n){return R(this,null,function*(){let r;Hm(n)?r=yield ju(t,e,n):r=GE(t,n);let i=e&&e.imagebitmap;return yield SZ(r,i)})}function SZ(t,e=null){return R(this,null,function*(){if((CZ(e)||!mB)&&(e=null),e)try{return yield createImageBitmap(t,e)}catch(n){console.warn(n),mB=!1}return yield createImageBitmap(t)})}function CZ(t){for(let e in t||TZ)return!1;return!0}function vs(t){let e=Uu(t);return MZ(e)||RZ(e)||DZ(e)||PZ(e)}function MZ(t){let e=Uu(t);return e.byteLength>=24&&e.getUint32(0,!1)===2303741511?{mimeType:"image/png",width:e.getUint32(16,!1),height:e.getUint32(20,!1)}:null}function DZ(t){let e=Uu(t);return e.byteLength>=10&&e.getUint32(0,!1)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,!0),height:e.getUint16(8,!0)}:null}function PZ(t){let e=Uu(t);return e.byteLength>=14&&e.getUint16(0,!1)===16973&&e.getUint32(2,!0)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,!0),height:e.getUint32(22,!0)}:null}function RZ(t){let e=Uu(t);if(!(e.byteLength>=3&&e.getUint16(0,!1)===65496&&e.getUint8(2)===255))return null;let{tableMarkers:r,sofMarkers:i}=NZ(),o=2;for(;o+9<e.byteLength;){let s=e.getUint16(o,!1);if(i.has(s))return{mimeType:"image/jpeg",height:e.getUint16(o+5,!1),width:e.getUint16(o+7,!1)};if(!r.has(s))return null;o+=2,o+=e.getUint16(o,!1)}return null}function NZ(){let t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Uu(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}function WE(t,e){return R(this,null,function*(){let{mimeType:n}=vs(t)||{},r=globalThis._parseImageNode;return bn(r),yield r(t,n)})}function ZE(t,e,n){return R(this,null,function*(){e=e||{};let i=(e.image||{}).type||"auto",{url:o}=n||{},s=OZ(i),a;switch(s){case"imagebitmap":a=yield HE(t,e,o);break;case"image":a=yield ju(t,e,o);break;case"data":a=yield WE(t,e);break;default:bn(!1)}return i==="data"&&(a=hB(a)),a})}function OZ(t){switch(t){case"auto":case"data":return fB();default:return dB(t),t}}var LZ=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],BZ=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],kZ={image:{type:"auto",decode:!0}},qE={id:"image",module:"images",name:"Images",version:aB,mimeTypes:BZ,extensions:LZ,parse:ZE,tests:[t=>!!vs(new DataView(t))],options:kZ};var FZ=["image/png","image/jpeg","image/gif"],XE={};function JE(t){return XE[t]===void 0&&(XE[t]=jZ(t)),XE[t]}function jZ(t){switch(t){case"image/webp":return UZ();case"image/svg":return gs;default:if(!gs){let{_parseImageNode:e}=globalThis;return!!e&&FZ.includes(t)}return!0}}function UZ(){if(!gs)return!1;try{return document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")===0}catch{return!1}}function ot(t,e){if(!t)throw new Error(e||"assert failed: gltf")}function YE(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;let r=e.baseUri||e.uri;if(!r)throw new Error("'baseUri' must be provided to resolve relative url ".concat(t));return r.substr(0,r.lastIndexOf("/")+1)+t}function gB(t,e,n){let r=t.bufferViews[n];ot(r);let i=r.buffer,o=e[i];ot(o);let s=(r.byteOffset||0)+o.byteOffset;return new Uint8Array(o.arrayBuffer,s,r.byteLength)}var e0={};Tt(e0,{decode:()=>iq,name:()=>rq});var vB=["SCALAR","VEC2","VEC3","VEC4"],zZ=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],VZ=new Map(zZ),$Z={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},GZ={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},HZ={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Wm(t){return vB[t-1]||vB[0]}function Zm(t){let e=VZ.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function qm(t,e){let n=HZ[t.componentType],r=$Z[t.type],i=GZ[t.componentType],o=t.count*r,s=t.count*r*i;return ot(s>=0&&s<=e.byteLength),{ArrayType:n,length:o,byteLength:s}}var WZ={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]},We=class{constructor(e){m(this,"gltf",void 0),m(this,"sourceBuffers",void 0),m(this,"byteLength",void 0),this.gltf=e||{json:v({},WZ),buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){let n=this.getUsedExtensions().find(i=>i===e),r=this.json.extensions||{};return n?r[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(r=>r===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if(typeof n=="object")return n;let r=this.json[e]&&this.json[e][n];if(!r)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(n,"]"));return r}getTypedArrayForBufferView(e){e=this.getBufferView(e);let n=e.buffer,r=this.gltf.buffers[n];ot(r);let i=(e.byteOffset||0)+r.byteOffset;return new Uint8Array(r.arrayBuffer,i,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);let n=this.getBufferView(e.bufferView),i=this.getBuffer(n.buffer).data,{ArrayType:o,length:s}=qm(e,n),a=n.byteOffset+e.byteOffset;return new o(i,a,s)}getTypedArrayForImageData(e){e=this.getAccessor(e);let n=this.getBufferView(e.bufferView),i=this.getBuffer(n.buffer).data,o=n.byteOffset||0;return new Uint8Array(i,o,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,r){return e.extensions=e.extensions||{},e.extensions[n]=r,this.registerUsedExtension(n),this}setObjectExtension(e,n,r){let i=e.extensions||{};i[n]=r}removeObjectExtension(e,n){let r=e.extensions||{},i=r[n];return delete r[n],i}addExtension(e,n={}){return ot(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e,n={}){return ot(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){let{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){let{meshIndex:n,matrix:r}=e;this.json.nodes=this.json.nodes||[];let i={mesh:n};return r&&(i.matrix=r),this.json.nodes.push(i),this.json.nodes.length-1}addMesh(e){let{attributes:n,indices:r,material:i,mode:o=4}=e,a={primitives:[{attributes:this._addAttributes(n),mode:o}]};if(r){let c=this._addIndices(r);a.primitives[0].indices=c}return Number.isFinite(i)&&(a.primitives[0].material=i),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){let r={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(r),this.json.meshes.length-1}addImage(e,n){let r=vs(e),i=n||r?.mimeType,s={bufferView:this.addBufferView(e),mimeType:i};return this.json.images=this.json.images||[],this.json.images.push(s),this.json.images.length-1}addBufferView(e){let n=e.byteLength;ot(Number.isFinite(n)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);let r={buffer:0,byteOffset:this.byteLength,byteLength:n};return this.byteLength+=qi(n,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(r),this.json.bufferViews.length-1}addAccessor(e,n){let r={bufferView:e,type:Wm(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(r),this.json.accessors.length-1}addBinaryBuffer(e,n={size:3}){let r=this.addBufferView(e),i={min:n.min,max:n.max};(!i.min||!i.max)&&(i=this._getAccessorMinMax(e,n.size));let o={size:n.size,componentType:Zm(e),count:Math.round(e.length/n.size),min:i.min,max:i.max};return this.addAccessor(r,Object.assign(o,n))}addTexture(e){let{imageIndex:n}=e,r={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(r),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,n;this.gltf.buffers=[];let r=this.byteLength,i=new ArrayBuffer(r),o=new Uint8Array(i),s=0;for(let a of this.sourceBuffers||[])s=UE(a,o,s);(e=this.json)!==null&&e!==void 0&&(n=e.buffers)!==null&&n!==void 0&&n[0]?this.json.buffers[0].byteLength=r:this.json.buffers=[{byteLength:r}],this.gltf.binary=i,this.sourceBuffers=[i]}_removeStringFromArray(e,n){let r=!0;for(;r;){let i=e.indexOf(n);i>-1?e.splice(i,1):r=!1}}_addAttributes(e={}){let n={};for(let r in e){let i=e[r],o=this._getGltfAttributeName(r),s=this.addBinaryBuffer(i.value,i);n[o]=s}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){let r={min:null,max:null};if(e.length<n)return r;r.min=[],r.max=[];let i=e.subarray(0,n);for(let o of i)r.min.push(o),r.max.push(o);for(let o=n;o<e.length;o+=n)for(let s=0;s<n;s++)r.min[0+s]=Math.min(r.min[0+s],e[o+s]),r.max[0+s]=Math.max(r.max[0+s],e[o+s]);return r}};var ZZ="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",qZ="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",XZ=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),JZ=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),YZ={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},KZ={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function yB(t,e,n,r,i,o="NONE"){return R(this,null,function*(){let s=yield QZ();nq(s,s.exports[KZ[i]],t,e,n,r,s.exports[YZ[o||"NONE"]])})}var KE;function QZ(){return R(this,null,function*(){return KE||(KE=eq()),KE})}function eq(){return R(this,null,function*(){let t=ZZ;WebAssembly.validate(XZ)&&(t=qZ,console.log("Warning: meshopt_decoder is using experimental SIMD support"));let e=yield WebAssembly.instantiate(tq(t),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance})}function tq(t){let e=new Uint8Array(t.length);for(let r=0;r<t.length;++r){let i=t.charCodeAt(r);e[r]=i>96?i-71:i>64?i-65:i>47?i+4:i>46?63:62}let n=0;for(let r=0;r<t.length;++r)e[n++]=e[r]<60?JZ[e[r]]:(e[r]-60)*64+e[++r];return e.buffer.slice(0,n)}function nq(t,e,n,r,i,o,s){let a=t.exports.sbrk,c=r+3&-4,l=a(c*i),u=a(o.length),d=new Uint8Array(t.exports.memory.buffer);d.set(o,u);let f=e(l,r,i,u,o.length);if(f===0&&s&&s(l,c,i),n.set(d.subarray(l,l+r*i)),a(l-a(0)),f!==0)throw new Error("Malformed buffer data: ".concat(f))}var QE="EXT_meshopt_compression",rq=QE;function iq(t,e){return R(this,null,function*(){var n;let r=new We(t);if(!(e!=null&&(n=e.gltf)!==null&&n!==void 0&&n.decompressMeshes))return;let i=[];for(let o of t.json.bufferViews||[])i.push(oq(r,o));yield Promise.all(i),r.removeExtension(QE)})}function oq(t,e){return R(this,null,function*(){let n=t.getObjectExtension(e,QE);if(n){let{byteOffset:r=0,byteLength:i=0,byteStride:o,count:s,mode:a,filter:c="NONE",buffer:l}=n,u=t.gltf.buffers[l],d=new Uint8Array(u.arrayBuffer,u.byteOffset+r,i),f=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield yB(f,s,o,d,a,c),f}return null})}var t0={};Tt(t0,{name:()=>sq,preprocess:()=>aq});var dc="EXT_texture_webp",sq=dc;function aq(t,e){let n=new We(t);if(!JE("image/webp")){if(n.getRequiredExtensions().includes(dc))throw new Error("gltf: Required extension ".concat(dc," not supported by browser"));return}let{json:r}=n;for(let i of r.textures||[]){let o=n.getObjectExtension(i,dc);o&&(i.source=o.source),n.removeObjectExtension(i,dc)}n.removeExtension(dc)}var n0={};Tt(n0,{name:()=>cq,preprocess:()=>lq});var Xm="KHR_texture_basisu",cq=Xm;function lq(t,e){let n=new We(t),{json:r}=n;for(let i of r.textures||[]){let o=n.getObjectExtension(i,Xm);o&&(i.source=o.source),n.removeObjectExtension(i,Xm)}n.removeExtension(Xm)}var s0={};Tt(s0,{decode:()=>Zq,encode:()=>qq,name:()=>Hq,preprocess:()=>Wq});var _B="3.2.13";var uq={draco:{decoderType:typeof WebAssembly=="object"?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}},Jm={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:_B,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:uq};function r0(t){let e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0,a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){let u=a[l],d=a[l+1],f=a[l+2];e=u<e?u:e,n=d<n?d:n,r=f<r?f:r,i=u>i?u:i,o=d>o?d:o,s=f>s?f:s}return[[e,n,r],[i,o,s]]}function bB(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var ys=class t{constructor(e,n){m(this,"fields",void 0),m(this,"metadata",void 0),bB(Array.isArray(e)),dq(e),this.fields=e,this.metadata=n||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let n=0;n<this.fields.length;++n)if(!this.fields[n].compareTo(e.fields[n]))return!1;return!0}select(...e){let n=Object.create(null);for(let i of e)n[i]=!0;let r=this.fields.filter(i=>n[i.name]);return new t(r,this.metadata)}selectAt(...e){let n=e.map(r=>this.fields[r]).filter(Boolean);return new t(n,this.metadata)}assign(e){let n,r=this.metadata;if(e instanceof t){let s=e;n=s.fields,r=xB(xB(new Map,this.metadata),s.metadata)}else n=e;let i=Object.create(null);for(let s of this.fields)i[s.name]=s;for(let s of n)i[s.name]=s;let o=Object.values(i);return new t(o,r)}};function dq(t){let e={};for(let n of t)e[n.name]&&console.warn("Schema: duplicated field name",n.name,n),e[n.name]=!0}function xB(t,e){return new Map([...t||new Map,...e||new Map])}var _s=class t{constructor(e,n,r=!1,i=new Map){m(this,"name",void 0),m(this,"type",void 0),m(this,"nullable",void 0),m(this,"metadata",void 0),this.name=e,this.type=n,this.nullable=r,this.metadata=i}get typeId(){return this.type&&this.type.typeId}clone(){return new t(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}};var Ee;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"})(Ee||(Ee={}));var EB,wB,AB,IB,TB,SB,CB,MB,xn=class{static isNull(e){return e&&e.typeId===Ee.Null}static isInt(e){return e&&e.typeId===Ee.Int}static isFloat(e){return e&&e.typeId===Ee.Float}static isBinary(e){return e&&e.typeId===Ee.Binary}static isUtf8(e){return e&&e.typeId===Ee.Utf8}static isBool(e){return e&&e.typeId===Ee.Bool}static isDecimal(e){return e&&e.typeId===Ee.Decimal}static isDate(e){return e&&e.typeId===Ee.Date}static isTime(e){return e&&e.typeId===Ee.Time}static isTimestamp(e){return e&&e.typeId===Ee.Timestamp}static isInterval(e){return e&&e.typeId===Ee.Interval}static isList(e){return e&&e.typeId===Ee.List}static isStruct(e){return e&&e.typeId===Ee.Struct}static isUnion(e){return e&&e.typeId===Ee.Union}static isFixedSizeBinary(e){return e&&e.typeId===Ee.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===Ee.FixedSizeList}static isMap(e){return e&&e.typeId===Ee.Map}static isDictionary(e){return e&&e.typeId===Ee.Dictionary}get typeId(){return Ee.NONE}compareTo(e){return this===e}};EB=Symbol.toStringTag;var Ir=class extends xn{constructor(e,n){super(),m(this,"isSigned",void 0),m(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=n}get typeId(){return Ee.Int}get[EB](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}},fc=class extends Ir{constructor(){super(!0,8)}},hc=class extends Ir{constructor(){super(!0,16)}},pc=class extends Ir{constructor(){super(!0,32)}};var mc=class extends Ir{constructor(){super(!1,8)}},gc=class extends Ir{constructor(){super(!1,16)}},vc=class extends Ir{constructor(){super(!1,32)}};var DB={HALF:16,SINGLE:32,DOUBLE:64};wB=Symbol.toStringTag;var yc=class extends xn{constructor(e){super(),m(this,"precision",void 0),this.precision=e}get typeId(){return Ee.Float}get[wB](){return"Float"}toString(){return"Float".concat(this.precision)}};var _c=class extends yc{constructor(){super(DB.SINGLE)}},bc=class extends yc{constructor(){super(DB.DOUBLE)}};var fq={DAY:0,MILLISECOND:1};AB=Symbol.toStringTag;var Ym=class extends xn{constructor(e){super(),m(this,"unit",void 0),this.unit=e}get typeId(){return Ee.Date}get[AB](){return"Date"}toString(){return"Date".concat((this.unit+1)*32,"<").concat(fq[this.unit],">")}};var PB={SECOND:1,MILLISECOND:1e3,MICROSECOND:1e6,NANOSECOND:1e9};IB=Symbol.toStringTag;var Km=class extends xn{constructor(e,n){super(),m(this,"unit",void 0),m(this,"bitWidth",void 0),this.unit=e,this.bitWidth=n}get typeId(){return Ee.Time}toString(){return"Time".concat(this.bitWidth,"<").concat(PB[this.unit],">")}get[IB](){return"Time"}};TB=Symbol.toStringTag;var Qm=class extends xn{constructor(e,n=null){super(),m(this,"unit",void 0),m(this,"timezone",void 0),this.unit=e,this.timezone=n}get typeId(){return Ee.Timestamp}get[TB](){return"Timestamp"}toString(){return"Timestamp<".concat(PB[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}};var hq={DAY_TIME:0,YEAR_MONTH:1};SB=Symbol.toStringTag;var eg=class extends xn{constructor(e){super(),m(this,"unit",void 0),this.unit=e}get typeId(){return Ee.Interval}get[SB](){return"Interval"}toString(){return"Interval<".concat(hq[this.unit],">")}};CB=Symbol.toStringTag;var xc=class extends xn{constructor(e,n){super(),m(this,"listSize",void 0),m(this,"children",void 0),this.listSize=e,this.children=[n]}get typeId(){return Ee.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[CB](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}};MB=Symbol.toStringTag;var tg=class extends xn{constructor(e){super(),m(this,"children",void 0),this.children=e}get typeId(){return Ee.Struct}toString(){return"Struct<{".concat(this.children.map(e=>"".concat(e.name,":").concat(e.type)).join(", "),"}>")}get[MB](){return"Struct"}};function RB(t){switch(t.constructor){case Int8Array:return new fc;case Uint8Array:return new mc;case Int16Array:return new hc;case Uint16Array:return new gc;case Int32Array:return new pc;case Uint32Array:return new vc;case Float32Array:return new _c;case Float64Array:return new bc;default:throw new Error("array type not supported")}}function i0(t,e,n){let r=RB(e.value),i=n||NB(e);return new _s(t,new xc(e.size,new _s("value",r)),!1,i)}function NB(t){let e=new Map;return"byteOffset"in t&&e.set("byteOffset",t.byteOffset.toString(10)),"byteStride"in t&&e.set("byteStride",t.byteStride.toString(10)),"normalized"in t&&e.set("normalized",t.normalized.toString()),e}function LB(t,e,n){let r=BB(e.metadata),i=[],o=Pq(e.attributes);for(let s in t){let a=t[s],c=OB(s,a,o[s]);i.push(c)}if(n){let s=OB("indices",n);i.push(s)}return new ys(i,r)}function Pq(t){let e={};for(let n in t){let r=t[n];e[r.name||"undefined"]=r}return e}function OB(t,e,n){let r=n?BB(n.metadata):void 0;return i0(t,e,r)}function BB(t){let e=new Map;for(let n in t)e.set("".concat(n,".string"),JSON.stringify(t[n]));return e}var kB={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},Rq={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},Nq=4,ng=class{constructor(e){m(this,"draco",void 0),m(this,"decoder",void 0),m(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,n={}){let r=new this.draco.DecoderBuffer;r.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);let i=this.decoder.GetEncodedGeometryType(r),o=i===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let s;switch(i){case this.draco.TRIANGULAR_MESH:s=this.decoder.DecodeBufferToMesh(r,o);break;case this.draco.POINT_CLOUD:s=this.decoder.DecodeBufferToPointCloud(r,o);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!s.ok()||!o.ptr){let f="DRACO decompression failed: ".concat(s.error_msg());throw new Error(f)}let a=this._getDracoLoaderData(o,i,n),c=this._getMeshData(o,a,n),l=r0(c.attributes),u=LB(c.attributes,a,c.indices);return S(v({loader:"draco",loaderData:a,header:{vertexCount:o.num_points(),boundingBox:l}},c),{schema:u})}finally{this.draco.destroy(r),o&&this.draco.destroy(o)}}_getDracoLoaderData(e,n,r){let i=this._getTopLevelMetadata(e),o=this._getDracoAttributes(e,r);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:i,attributes:o}}_getDracoAttributes(e,n){let r={};for(let i=0;i<e.num_attributes();i++){let o=this.decoder.GetAttribute(e,i),s=this._getAttributeMetadata(e,i);r[o.unique_id()]={unique_id:o.unique_id(),attribute_type:o.attribute_type(),data_type:o.data_type(),num_components:o.num_components(),byte_offset:o.byte_offset(),byte_stride:o.byte_stride(),normalized:o.normalized(),attribute_index:i,metadata:s};let a=this._getQuantizationTransform(o,n);a&&(r[o.unique_id()].quantization_transform=a);let c=this._getOctahedronTransform(o,n);c&&(r[o.unique_id()].octahedron_transform=c)}return r}_getMeshData(e,n,r){let i=this._getMeshAttributes(n,e,r);if(!i.POSITION)throw new Error("DRACO: No position attribute found.");if(e instanceof this.draco.Mesh)switch(r.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:i,indices:{value:this._getTriangleStripIndices(e),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:i,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:"point-list",mode:0,attributes:i}}_getMeshAttributes(e,n,r){let i={};for(let o of Object.values(e.attributes)){let s=this._deduceAttributeName(o,r);o.name=s;let{value:a,size:c}=this._getAttributeValues(n,o);i[s]={value:a,size:c,byteOffset:o.byte_offset,byteStride:o.byte_stride,normalized:o.normalized}}return i}_getTriangleListIndices(e){let r=e.num_faces()*3,i=r*Nq,o=this.draco._malloc(i);try{return this.decoder.GetTrianglesUInt32Array(e,i,o),new Uint32Array(this.draco.HEAPF32.buffer,o,r).slice()}finally{this.draco._free(o)}}_getTriangleStripIndices(e){let n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),Bq(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){let r=Rq[n.data_type],i=n.num_components,s=e.num_points()*i,a=s*r.BYTES_PER_ELEMENT,c=Oq(this.draco,r),l,u=this.draco._malloc(a);try{let d=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,d,c,a,u),l=new r(this.draco.HEAPF32.buffer,u,s).slice()}finally{this.draco._free(u)}return{value:l,size:i}}_deduceAttributeName(e,n){let r=e.unique_id;for(let[s,a]of Object.entries(n.extraAttributes||{}))if(a===r)return s;let i=e.attribute_type;for(let s in kB)if(this.draco[s]===i)return kB[s];let o=n.attributeNameEntry||"name";return e.metadata[o]?e.metadata[o].string:"CUSTOM_ATTRIBUTE_".concat(r)}_getTopLevelMetadata(e){let n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){let r=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(r)}_getDracoMetadata(e){if(!e||!e.ptr)return{};let n={},r=this.metadataQuerier.NumEntries(e);for(let i=0;i<r;i++){let o=this.metadataQuerier.GetEntryName(e,i);n[o]=this._getDracoMetadataField(e,o)}return n}_getDracoMetadataField(e,n){let r=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,r);let i=Lq(r);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:i}}finally{this.draco.destroy(r)}}_disableAttributeTransforms(e){let{quantizedAttributes:n=[],octahedronAttributes:r=[]}=e,i=[...n,...r];for(let o of i)this.decoder.SkipAttributeTransform(this.draco[o])}_getQuantizationTransform(e,n){let{quantizedAttributes:r=[]}=n,i=e.attribute_type();if(r.map(s=>this.decoder[s]).includes(i)){let s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits(),range:s.range(),min_values:new Float32Array([1,2,3]).map(a=>s.min_value(a))}}finally{this.draco.destroy(s)}}return null}_getOctahedronTransform(e,n){let{octahedronAttributes:r=[]}=n,i=e.attribute_type();if(r.map(s=>this.decoder[s]).includes(i)){let s=new this.draco.AttributeQuantizationTransform;try{if(s.InitFromAttribute(e))return{quantization_bits:s.quantization_bits()}}finally{this.draco.destroy(s)}}return null}};function Oq(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}function Lq(t){let e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}function Bq(t){let e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}var rg="1.4.1",kq="https://www.gstatic.com/draco/versioned/decoders/".concat(rg,"/draco_decoder.js"),Fq="https://www.gstatic.com/draco/versioned/decoders/".concat(rg,"/draco_wasm_wrapper.js"),jq="https://www.gstatic.com/draco/versioned/decoders/".concat(rg,"/draco_decoder.wasm"),uUe="https://raw.githubusercontent.com/google/draco/".concat(rg,"/javascript/draco_encoder.js"),zu;function FB(t){return R(this,null,function*(){let e=t.modules||{};return e.draco3d?zu=zu||e.draco3d.createDecoderModule({}).then(n=>({draco:n})):zu=zu||Uq(t),yield zu})}function Uq(t){return R(this,null,function*(){let e,n;switch(t.draco&&t.draco.decoderType){case"js":e=yield sr(kq,"draco",t);break;case"wasm":default:[e,n]=yield Promise.all([yield sr(Fq,"draco",t),yield sr(jq,"draco",t)])}return e=e||globalThis.DracoDecoderModule,yield zq(e,n)})}function zq(t,e){let n={};return e&&(n.wasmBinary=e),new Promise(r=>{t(S(v({},n),{onModuleLoaded:i=>r({draco:i})}))})}var Ec=S(v({},Jm),{parse:Vq});function Vq(t,e){return R(this,null,function*(){let{draco:n}=yield FB(e),r=new ng(n);try{return r.parseSync(t,e?.draco)}finally{r.destroy()}})}function jB(t){let e={};for(let n in t){let r=t[n];if(n!=="indices"){let i=o0(r);e[n]=i}}return e}function o0(t){let{buffer:e,size:n,count:r}=$q(t);return{value:e,size:n,byteOffset:0,count:r,type:Wm(n),componentType:Zm(e)}}function $q(t){let e=t,n=1,r=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=Gq(e,Float32Array)),r=e.length/n),{buffer:e,size:n,count:r}}function Gq(t,e,n=!1){return t?Array.isArray(t)?new e(t):n&&!(t instanceof e)?new e(t):t:null}var bs="KHR_draco_mesh_compression",Hq=bs;function Wq(t,e,n){let r=new We(t);for(let i of UB(r))r.getObjectExtension(i,bs)}function Zq(t,e,n){return R(this,null,function*(){var r;if(!(e!=null&&(r=e.gltf)!==null&&r!==void 0&&r.decompressMeshes))return;let i=new We(t),o=[];for(let s of UB(i))i.getObjectExtension(s,bs)&&o.push(Xq(i,s,e,n));yield Promise.all(o),i.removeExtension(bs)})}function qq(t,e={}){let n=new We(t);for(let r of n.json.meshes||[])Jq(r,e),n.addRequiredExtension(bs)}function Xq(t,e,n,r){return R(this,null,function*(){let i=t.getObjectExtension(e,bs);if(!i)return;let o=t.getTypedArrayForBufferView(i.bufferView),s=Fu(o.buffer,o.byteOffset),{parse:a}=r,c=v({},n);delete c["3d-tiles"];let l=yield a(s,Ec,c,r),u=jB(l.attributes);for(let[d,f]of Object.entries(u))if(d in e.attributes){let h=e.attributes[d],p=t.getAccessor(h);p!=null&&p.min&&p!==null&&p!==void 0&&p.max&&(f.min=p.min,f.max=p.max)}e.attributes=u,l.indices&&(e.indices=o0(l.indices)),Yq(e)})}function Jq(t,e,n=4,r,i){var o;if(!r.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");let s=r.DracoWriter.encodeSync({attributes:t}),a=i==null||(o=i.parseSync)===null||o===void 0?void 0:o.call(i,{attributes:t}),c=r._addFauxAttributes(a.attributes),l=r.addBufferView(s);return{primitives:[{attributes:c,mode:n,extensions:{[bs]:{bufferView:l,attributes:c}}}]}}function Yq(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*UB(t){for(let e of t.json.meshes||[])for(let n of e.primitives)yield n}var a0={};Tt(a0,{decode:()=>Qq,encode:()=>eX,name:()=>Kq});var xs="KHR_lights_punctual",Kq=xs;function Qq(t){return R(this,null,function*(){let e=new We(t),{json:n}=e,r=e.getExtension(xs);r&&(e.json.lights=r.lights,e.removeExtension(xs));for(let i of n.nodes||[]){let o=e.getObjectExtension(i,xs);o&&(i.light=o.light),e.removeObjectExtension(i,xs)}})}function eX(t){return R(this,null,function*(){let e=new We(t),{json:n}=e;if(n.lights){let r=e.addExtension(xs);ot(!r.lights),r.lights=n.lights,delete n.lights}if(e.json.lights){for(let r of e.json.lights){let i=r.node;e.addObjectExtension(i,xs,r)}delete e.json.lights}})}var c0={};Tt(c0,{decode:()=>nX,encode:()=>rX,name:()=>tX});var Vu="KHR_materials_unlit",tX=Vu;function nX(t){return R(this,null,function*(){let e=new We(t),{json:n}=e;e.removeExtension(Vu);for(let r of n.materials||[])r.extensions&&r.extensions.KHR_materials_unlit&&(r.unlit=!0),e.removeObjectExtension(r,Vu)})}function rX(t){let e=new We(t),{json:n}=e;if(e.materials)for(let r of n.materials||[])r.unlit&&(delete r.unlit,e.addObjectExtension(r,Vu,{}),e.addExtension(Vu))}var l0={};Tt(l0,{decode:()=>oX,encode:()=>sX,name:()=>iX});var $u="KHR_techniques_webgl",iX=$u;function oX(t){return R(this,null,function*(){let e=new We(t),{json:n}=e,r=e.getExtension($u);if(r){let i=aX(r,e);for(let o of n.materials||[]){let s=e.getObjectExtension(o,$u);s&&(o.technique=Object.assign({},s,i[s.technique]),o.technique.values=cX(o.technique,e)),e.removeObjectExtension(o,$u)}e.removeExtension($u)}})}function sX(t,e){return R(this,null,function*(){})}function aX(t,e){let{programs:n=[],shaders:r=[],techniques:i=[]}=t,o=new TextDecoder;return r.forEach(s=>{if(Number.isFinite(s.bufferView))s.code=o.decode(e.getTypedArrayForBufferView(s.bufferView));else throw new Error("KHR_techniques_webgl: no shader code")}),n.forEach(s=>{s.fragmentShader=r[s.fragmentShader],s.vertexShader=r[s.vertexShader]}),i.forEach(s=>{s.program=n[s.program]}),i}function cX(t,e){let n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(r=>{t.uniforms[r].value&&!(r in n)&&(n[r]=t.uniforms[r].value)}),Object.keys(n).forEach(r=>{typeof n[r]=="object"&&n[r].index!==void 0&&(n[r].texture=e.getTexture(n[r].index))}),n}var zB=[e0,t0,n0,s0,a0,c0,l0];function VB(t,e={},n){let r=zB.filter(o=>GB(o.name,e));for(let o of r){var i;(i=o.preprocess)===null||i===void 0||i.call(o,t,e,n)}}function $B(r){return R(this,arguments,function*(t,e={},n){let i=zB.filter(s=>GB(s.name,e));for(let s of i){var o;yield(o=s.decode)===null||o===void 0?void 0:o.call(s,t,e,n)}})}function GB(t,e){var n;let r=(e==null||(n=e.gltf)===null||n===void 0?void 0:n.excludeExtensions)||{};return!(t in r&&!r[t])}var u0="KHR_binary_glTF";function HB(t){let e=new We(t),{json:n}=e;for(let r of n.images||[]){let i=e.getObjectExtension(r,u0);i&&Object.assign(r,i),e.removeObjectExtension(r,u0)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(u0)}var WB={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},uX={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},d0=class{constructor(){m(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),m(this,"json",void 0)}normalize(e,n){this.json=e.json;let r=e.json;switch(r.asset&&r.asset.version){case"2.0":return;case void 0:case"1.0":break;default:console.warn("glTF: Unknown version ".concat(r.asset.version));return}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(r),this._convertTopLevelObjectsToArrays(r),HB(e),this._convertObjectIdsToArrayIndices(r),this._updateObjects(r),this._updateMaterial(r)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(let n in WB)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){let r=e[n];if(!(!r||Array.isArray(r))){e[n]=[];for(let i in r){let o=r[i];o.id=o.id||i;let s=e[n].length;e[n].push(o),this.idToIndexMap[n][i]=s}}}_convertObjectIdsToArrayIndices(e){for(let n in WB)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(let n of e.textures)this._convertTextureIds(n);for(let n of e.meshes)this._convertMeshIds(n);for(let n of e.nodes)this._convertNodeIds(n);for(let n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(let n of e.primitives){let{attributes:r,indices:i,material:o}=n;for(let s in r)r[s]=this._convertIdToIndex(r[s],"accessor");i&&(n.indices=this._convertIdToIndex(i,"accessor")),o&&(n.material=this._convertIdToIndex(o,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn("gltf v1: json doesn't contain attribute ".concat(n)),e[n]=[]);for(let r of e[n])for(let i in r){let o=r[i],s=this._convertIdToIndex(o,i);r[i]=s}}_convertIdToIndex(e,n){let r=uX[n];if(r in this.idToIndexMap){let i=this.idToIndexMap[r][e];if(!Number.isFinite(i))throw new Error("gltf v1: failed to resolve ".concat(n," with id ").concat(e));return i}return e}_updateObjects(e){for(let n of this.json.buffers)delete n.type}_updateMaterial(e){for(let o of e.materials){var n,r,i;o.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};let s=((n=o.values)===null||n===void 0?void 0:n.tex)||((r=o.values)===null||r===void 0?void 0:r.texture2d_0)||((i=o.values)===null||i===void 0?void 0:i.diffuseTex),a=e.textures.findIndex(c=>c.id===s);a!==-1&&(o.pbrMetallicRoughness.baseColorTexture={index:a})}}};function ZB(t,e={}){return new d0().normalize(t,e)}var dX={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},fX={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},En={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},hX={magFilter:En.TEXTURE_MAG_FILTER,minFilter:En.TEXTURE_MIN_FILTER,wrapS:En.TEXTURE_WRAP_S,wrapT:En.TEXTURE_WRAP_T},pX={[En.TEXTURE_MAG_FILTER]:En.LINEAR,[En.TEXTURE_MIN_FILTER]:En.NEAREST_MIPMAP_LINEAR,[En.TEXTURE_WRAP_S]:En.REPEAT,[En.TEXTURE_WRAP_T]:En.REPEAT};function mX(t){return fX[t]}function gX(t){return dX[t]}var f0=class{constructor(){m(this,"baseUri",""),m(this,"json",{}),m(this,"buffers",[]),m(this,"images",[])}postProcess(e,n={}){let{json:r,buffers:i=[],images:o=[],baseUri:s=""}=e;return ot(r),this.baseUri=s,this.json=r,this.buffers=i,this.images=o,this._resolveTree(this.json,n),this.json}_resolveTree(e,n={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((r,i)=>this._resolveBufferView(r,i))),e.images&&(e.images=e.images.map((r,i)=>this._resolveImage(r,i))),e.samplers&&(e.samplers=e.samplers.map((r,i)=>this._resolveSampler(r,i))),e.textures&&(e.textures=e.textures.map((r,i)=>this._resolveTexture(r,i))),e.accessors&&(e.accessors=e.accessors.map((r,i)=>this._resolveAccessor(r,i))),e.materials&&(e.materials=e.materials.map((r,i)=>this._resolveMaterial(r,i))),e.meshes&&(e.meshes=e.meshes.map((r,i)=>this._resolveMesh(r,i))),e.nodes&&(e.nodes=e.nodes.map((r,i)=>this._resolveNode(r,i))),e.skins&&(e.skins=e.skins.map((r,i)=>this._resolveSkin(r,i))),e.scenes&&(e.scenes=e.scenes.map((r,i)=>this._resolveScene(r,i))),e.scene!==void 0&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,n){if(typeof n=="object")return n;let r=this.json[e]&&this.json[e][n];return r||console.warn("glTF file error: Could not find ".concat(e,"[").concat(n,"]")),r}_resolveScene(e,n){return e.id=e.id||"scene-".concat(n),e.nodes=(e.nodes||[]).map(r=>this.getNode(r)),e}_resolveNode(e,n){return e.id=e.id||"node-".concat(n),e.children&&(e.children=e.children.map(r=>this.getNode(r))),e.mesh!==void 0?e.mesh=this.getMesh(e.mesh):e.meshes!==void 0&&e.meshes.length&&(e.mesh=e.meshes.reduce((r,i)=>{let o=this.getMesh(i);return r.id=o.id,r.primitives=r.primitives.concat(o.primitives),r},{primitives:[]})),e.camera!==void 0&&(e.camera=this.getCamera(e.camera)),e.skin!==void 0&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,n){return e.id=e.id||"skin-".concat(n),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,n){return e.id=e.id||"mesh-".concat(n),e.primitives&&(e.primitives=e.primitives.map(r=>{r=v({},r);let i=r.attributes;r.attributes={};for(let o in i)r.attributes[o]=this.getAccessor(i[o]);return r.indices!==void 0&&(r.indices=this.getAccessor(r.indices)),r.material!==void 0&&(r.material=this.getMaterial(r.material)),r})),e}_resolveMaterial(e,n){if(e.id=e.id||"material-".concat(n),e.normalTexture&&(e.normalTexture=v({},e.normalTexture),e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture=v({},e.occlustionTexture),e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture=v({},e.emmisiveTexture),e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness=v({},e.pbrMetallicRoughness);let r=e.pbrMetallicRoughness;r.baseColorTexture&&(r.baseColorTexture=v({},r.baseColorTexture),r.baseColorTexture.texture=this.getTexture(r.baseColorTexture.index)),r.metallicRoughnessTexture&&(r.metallicRoughnessTexture=v({},r.metallicRoughnessTexture),r.metallicRoughnessTexture.texture=this.getTexture(r.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,n){if(e.id=e.id||"accessor-".concat(n),e.bufferView!==void 0&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=mX(e.componentType),e.components=gX(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){let r=e.bufferView.buffer,{ArrayType:i,byteLength:o}=qm(e,e.bufferView),s=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+r.byteOffset,a=r.arrayBuffer.slice(s,s+o);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(r,s,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new i(a)}return e}_getValueFromInterleavedBuffer(e,n,r,i,o){let s=new Uint8Array(o*i);for(let a=0;a<o;a++){let c=n+a*r;s.set(new Uint8Array(e.arrayBuffer.slice(c,c+i)),a*i)}return s.buffer}_resolveTexture(e,n){return e.id=e.id||"texture-".concat(n),e.sampler="sampler"in e?this.getSampler(e.sampler):pX,e.source=this.getImage(e.source),e}_resolveSampler(e,n){e.id=e.id||"sampler-".concat(n),e.parameters={};for(let r in e){let i=this._enumSamplerParameter(r);i!==void 0&&(e.parameters[i]=e[r])}return e}_enumSamplerParameter(e){return hX[e]}_resolveImage(e,n){e.id=e.id||"image-".concat(n),e.bufferView!==void 0&&(e.bufferView=this.getBufferView(e.bufferView));let r=this.images[n];return r&&(e.image=r),e}_resolveBufferView(e,n){let r=e.buffer,i=S(v({id:"bufferView-".concat(n)},e),{buffer:this.buffers[r]}),o=this.buffers[r].arrayBuffer,s=this.buffers[r].byteOffset||0;return"byteOffset"in e&&(s+=e.byteOffset),i.data=new Uint8Array(o,s,e.byteLength),i}_resolveCamera(e,n){return e.id=e.id||"camera-".concat(n),e.perspective,e.orthographic,e}};function qB(t,e){return new f0().postProcess(t,e)}var XB=1735152710,m0=12,ig=8,vX=1313821514,yX=5130562,_X=0,bX=1,xX=0,wc=!0;function EX(t,e=0){return"".concat(String.fromCharCode(t.getUint8(e+0))).concat(String.fromCharCode(t.getUint8(e+1))).concat(String.fromCharCode(t.getUint8(e+2))).concat(String.fromCharCode(t.getUint8(e+3)))}function JB(t,e=0,n={}){let r=new DataView(t),{magic:i=XB}=n,o=r.getUint32(e,!1);return o===i||o===XB}function g0(t,e,n=0,r={}){let i=new DataView(e),o=EX(i,n+0),s=i.getUint32(n+4,wc),a=i.getUint32(n+8,wc);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:o,version:s,json:{},binChunks:[]}),n+=m0,t.version){case 1:return wX(t,i,n);case 2:return AX(t,i,n,r={});default:throw new Error("Invalid GLB version ".concat(t.version,". Only supports v1 and v2."))}}function wX(t,e,n){bn(t.header.byteLength>m0+ig);let r=e.getUint32(n+0,wc),i=e.getUint32(n+4,wc);return n+=ig,bn(i===xX),h0(t,e,n,r),n+=r,n+=p0(t,e,n,t.header.byteLength),n}function AX(t,e,n,r){return bn(t.header.byteLength>m0+ig),IX(t,e,n,r),n+t.header.byteLength}function IX(t,e,n,r){for(;n+8<=t.header.byteLength;){let i=e.getUint32(n+0,wc),o=e.getUint32(n+4,wc);switch(n+=ig,o){case vX:h0(t,e,n,i);break;case yX:p0(t,e,n,i);break;case _X:r.strict||h0(t,e,n,i);break;case bX:r.strict||p0(t,e,n,i);break;default:break}n+=qi(i,4)}return n}function h0(t,e,n,r){let i=new Uint8Array(e.buffer,n,r),s=new TextDecoder("utf8").decode(i);return t.json=JSON.parse(s),qi(r,4)}function p0(t,e,n,r){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:r,arrayBuffer:e.buffer}),qi(r,4)}function YB(t,e,n=0,r,i){return R(this,null,function*(){var o,s,a,c;TX(t,e,n,r),ZB(t,{normalize:r==null||(o=r.gltf)===null||o===void 0?void 0:o.normalize}),VB(t,r,i);let l=[];if(r!=null&&(s=r.gltf)!==null&&s!==void 0&&s.loadBuffers&&t.json.buffers&&(yield SX(t,r,i)),r!=null&&(a=r.gltf)!==null&&a!==void 0&&a.loadImages){let d=CX(t,r,i);l.push(d)}let u=$B(t,r,i);return l.push(u),yield Promise.all(l),r!=null&&(c=r.gltf)!==null&&c!==void 0&&c.postProcess?qB(t,r):t})}function TX(t,e,n,r){if(r.uri&&(t.baseUri=r.uri),e instanceof ArrayBuffer&&!JB(e,n,r)&&(e=new TextDecoder().decode(e)),typeof e=="string")t.json=jE(e);else if(e instanceof ArrayBuffer){let s={};n=g0(s,e,n,r.glb),ot(s.type==="glTF","Invalid GLB magic string ".concat(s.type)),t._glb=s,t.json=s.json}else ot(!1,"GLTF: must be ArrayBuffer or string");let i=t.json.buffers||[];if(t.buffers=new Array(i.length).fill(null),t._glb&&t._glb.header.hasBinChunk){let{binChunks:s}=t._glb;t.buffers[0]={arrayBuffer:s[0].arrayBuffer,byteOffset:s[0].byteOffset,byteLength:s[0].byteLength}}let o=t.json.images||[];t.images=new Array(o.length).fill({})}function SX(t,e,n){return R(this,null,function*(){let r=t.json.buffers||[];for(let s=0;s<r.length;++s){let a=r[s];if(a.uri){var i,o;let{fetch:c}=n;ot(c);let l=YE(a.uri,e),u=yield n==null||(i=n.fetch)===null||i===void 0?void 0:i.call(n,l),d=yield u==null||(o=u.arrayBuffer)===null||o===void 0?void 0:o.call(u);t.buffers[s]={arrayBuffer:d,byteOffset:0,byteLength:d.byteLength},delete a.uri}else t.buffers[s]===null&&(t.buffers[s]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}})}function CX(t,e,n){return R(this,null,function*(){let r=MX(t),i=t.json.images||[],o=[];for(let s of r)o.push(DX(t,i[s],s,e,n));return yield Promise.all(o)})}function MX(t){let e=new Set,n=t.json.textures||[];for(let r of n)r.source!==void 0&&e.add(r.source);return Array.from(e).sort()}function DX(t,e,n,r,i){return R(this,null,function*(){let{fetch:o,parse:s}=i,a;if(e.uri&&!e.hasOwnProperty("bufferView")){let l=YE(e.uri,r);a=yield(yield o(l)).arrayBuffer()}if(Number.isFinite(e.bufferView)){let l=gB(t.json,t.buffers,e.bufferView);a=Fu(l.buffer,l.byteOffset,l.byteLength)}ot(a,"glTF image has no data");let c=yield s(a,[qE,FE],{mimeType:e.mimeType,basis:r.basis||{format:Gm()}},i);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),t.images=t.images||[],t.images[n]=c})}var Tr={name:"glTF",id:"gltf",module:"gltf",version:GL,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:PX,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function PX(r){return R(this,arguments,function*(t,e={},n){e=v(v({},Tr.options),e),e.gltf=v(v({},Tr.options.gltf),e.gltf);let{byteOffset:i=0}=e;return yield YB({},t,i,e,n)})}function KB(t){return R(this,null,function*(){let e=[];return t.scenes.forEach(n=>{n.traverse(r=>{Object.values(r.model.getUniforms()).forEach(i=>{i.loaded===!1&&e.push(i)})})}),yield RX(()=>e.some(n=>!n.loaded))})}function RX(t){return R(this,null,function*(){for(;t();)yield new Promise(e=>requestAnimationFrame(e))})}var QB=`#version 300 es

// Instance attributes
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceColors;
in vec3 instancePickingColors;
in mat3 instanceModelMatrix;
in vec3 instanceTranslation;

// Uniforms
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform mat4 sceneModelMatrix;
uniform bool composeModelMatrix;

// Attributes
in vec4 POSITION;

#ifdef HAS_UV
  in vec2 TEXCOORD_0;
#endif

#ifdef MODULE_PBR
  #ifdef HAS_NORMALS
    in vec4 NORMAL;
  #endif
#endif

// Varying
out vec4 vColor;

// MODULE_PBR contains all the varying definitions needed
#ifndef MODULE_PBR
  #ifdef HAS_UV
    out vec2 vTEXCOORD_0;
  #endif
#endif

// Main
void main(void) {
  #if defined(HAS_UV) && !defined(MODULE_PBR)
    vTEXCOORD_0 = TEXCOORD_0;
    geometry.uv = vTEXCOORD_0;
  #endif

  geometry.worldPosition = instancePositions;
  geometry.pickingColor = instancePickingColors;

  vec3 normal = vec3(0.0, 0.0, 1.0);
  #ifdef MODULE_PBR
    #ifdef HAS_NORMALS
      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;
    #endif
  #endif

  float originalSize = project_size_to_pixel(sizeScale);
  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);

  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;
  if(composeModelMatrix) {
    DECKGL_FILTER_SIZE(pos, geometry);
    // using instancePositions as world coordinates
    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth
    // call project_normal before setting position to avoid rotation
    geometry.normal = project_normal(normal);
    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
  }
  else {
    pos = project_size(pos);
    DECKGL_FILTER_SIZE(pos, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);
    geometry.normal = project_normal(normal);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  #ifdef MODULE_PBR
    // set PBR data
    pbr_vPosition = geometry.position.xyz;
    #ifdef HAS_NORMALS
      pbr_vNormal = geometry.normal;
    #endif

    #ifdef HAS_UV
      pbr_vUV = TEXCOORD_0;
    #else
      pbr_vUV = vec2(0., 0.);
    #endif
    geometry.uv = pbr_vUV;
  #endif

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`;var ek=`#version 300 es

// Uniforms
uniform float opacity;

// Varying
in vec4 vColor;

out vec4 fragmentColor;

// MODULE_PBR contains all the varying definitions needed
#ifndef MODULE_PBR
  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
    in vec2 vTEXCOORD_0;
    uniform sampler2D u_BaseColorSampler;
  #endif
#endif

void main(void) {
  #ifdef MODULE_PBR
    fragmentColor = vColor * pbr_filterColor(vec4(0));
    geometry.uv = pbr_vUV;
  #else
    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)
      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);
      geometry.uv = vTEXCOORD_0;
    #else
      fragmentColor = vColor;
    #endif
  #endif

  fragmentColor.a *= opacity;
  DECKGL_FILTER_COLOR(fragmentColor, geometry);
}
`;var tk=[255,255,255,255],NX={scenegraph:{type:"object",value:null,async:!0},getScene:t=>t&&t.scenes?typeof t.scene=="object"?t.scene:t.scenes[t.scene||0]:t,getAnimator:t=>t&&t.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:tk},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[Tr]},Es=class extends Nt{constructor(...e){super(...e),m(this,"state",void 0)}getShaders(){let e=[gr,vr];return this.props._lighting==="pbr"&&e.push(Fa),{vs:QB,fs:ek,modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:tk,transition:!0},instanceModelMatrix:Bm})}updateState(e){super.updateState(e);let{props:n,oldProps:r}=e;n.scenegraph!==r.scenegraph?this._updateScenegraph():n._animations!==r._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,n._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){let e=this.props,{gl:n}=this.context,r=null;if(e.scenegraph instanceof _n)r={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){let a=e.scenegraph,c=Vm(n,a,this._getModelOptions());r=v({gltf:a},c),KB(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(K.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),r=e.scenegraph);let i={layer:this,gl:n},o=e.getScene(r,i),s=e.getAnimator(r,i);o instanceof _n?(this._deleteScenegraph(),this._applyAllAttributes(o),this._applyAnimationsProp(o,s,e._animations),this.setState({scenegraph:o,animator:s})):o!==null&&K.warn("invalid scenegraph:",o)()}_applyAllAttributes(e){if(this.state.attributesAvailable){let n=this.getAttributeManager().getAttributes();e.traverse(r=>{this._setModelAttributes(r.model,n)})}}_applyAnimationsProp(e,n,r){if(!e||!n||!r)return;let i=n.getAnimations();Object.keys(r).sort().forEach(o=>{let s=r[o];if(o==="*")i.forEach(a=>{Object.assign(a,s)});else if(Number.isFinite(Number(o))){let a=Number(o);a>=0&&a<i.length?Object.assign(i[a],s):K.warn("animation ".concat(o," not found"))()}else{let a=i.find(({name:c})=>c===o);a?Object.assign(a,s):K.warn("animation ".concat(o," not found"))()}})}_deleteScenegraph(){let{scenegraph:e}=this.state;e instanceof _n&&e.delete()}_getModelOptions(){let{_imageBasedLightingEnvironment:e}=this.props,n=null;return e&&(typeof e=="function"?n=e({gl:this.context.gl,layer:this}):n=e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:n,modelOptions:v({isInstanced:!0,transpileToGLSL100:!Y(this.context.gl)},this.getShaders()),useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(n=>{this._setModelAttributes(n.model,e)})}draw({moduleParameters:e=null,parameters:n={},context:r}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(r.timeline.getTime()),this.setNeedsRedraw());let{viewport:i}=this.context,{sizeScale:o,sizeMinPixels:s,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,u=this.getNumInstances();this.state.scenegraph.traverse((d,{worldMatrix:f})=>{d.model.setInstanceCount(u),d.updateModuleSettings(e),d.draw({parameters:n,uniforms:{sizeScale:o,opacity:c,sizeMinPixels:s,sizeMaxPixels:a,composeModelMatrix:km(i,l),sceneModelMatrix:f,u_Camera:d.model.getUniforms().project_uCameraPosition}})})}};m(Es,"defaultProps",NX);m(Es,"layerName","ScenegraphLayer");function Xi(t,e,n){e||(e=new Q(Q.IDENTITY));let r=new Q(Q.IDENTITY);if(t)if(t.matrix)r.copy(t.matrix);else{if(r.identity(),t.translation&&r.translate(t.translation),t.rotation){let o=new Q(Q.IDENTITY).fromQuaternion(t.rotation);r.multiplyRight(o)}t.scale&&r.scale(t.scale)}else return!0;let i=new Q(e).multiplyRight(r);if(n(t,i,e)===!1)return!1;for(let o of t.nodes||t.children||[])if(Xi(o,i,n)===!1)return!1;return!0}function og(){Xl([Jm,Tr])}function nk(t,e){let n=e.nodes?.find(r=>r.name===t);if(n){let r=!1;for(let i of e.scenes)r||Xi(i,new Q(Q.IDENTITY),(o,s)=>o===n?(o.matrix=s,o.translation=void 0,o.rotation=void 0,o.scale=void 0,r=!0,!1):!0);return e.scene={id:t,name:t,nodes:[n]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function Gu(t,e){return R(this,null,function*(){let n=t.scenegraph,r;e?r=e[n]||(e[n]=fetch(n).then(o=>o.blob())):r=fetch(n);let i=yield Zo(r,Tr,{DracoLoader:Ec,gltf:{decompressMeshes:!0,postProcess:!0}});return i.nodes||console.log("WARNING: Empty Scene",n,i),nk(t.scenegraphNode,i)})}function rk(t,e){return R(this,null,function*(){return nk(t,yield e)})}var Yi=class t{constructor(e){e===void 0&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){let e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){let e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){let n=this.elements;n[0]=e.x,n[4]=e.y,n[8]=e.z}getTrace(e){e===void 0&&(e=new x);let n=this.elements;return e.x=n[0],e.y=n[4],e.z=n[8],e}vmult(e,n){n===void 0&&(n=new x);let r=this.elements,i=e.x,o=e.y,s=e.z;return n.x=r[0]*i+r[1]*o+r[2]*s,n.y=r[3]*i+r[4]*o+r[5]*s,n.z=r[6]*i+r[7]*o+r[8]*s,n}smult(e){for(let n=0;n<this.elements.length;n++)this.elements[n]*=e}mmult(e,n){n===void 0&&(n=new t);let r=this.elements,i=e.elements,o=n.elements,s=r[0],a=r[1],c=r[2],l=r[3],u=r[4],d=r[5],f=r[6],h=r[7],p=r[8],g=i[0],y=i[1],_=i[2],E=i[3],A=i[4],I=i[5],C=i[6],D=i[7],F=i[8];return o[0]=s*g+a*E+c*C,o[1]=s*y+a*A+c*D,o[2]=s*_+a*I+c*F,o[3]=l*g+u*E+d*C,o[4]=l*y+u*A+d*D,o[5]=l*_+u*I+d*F,o[6]=f*g+h*E+p*C,o[7]=f*y+h*A+p*D,o[8]=f*_+h*I+p*F,n}scale(e,n){n===void 0&&(n=new t);let r=this.elements,i=n.elements;for(let o=0;o!==3;o++)i[3*o+0]=e.x*r[3*o+0],i[3*o+1]=e.y*r[3*o+1],i[3*o+2]=e.z*r[3*o+2];return n}solve(e,n){n===void 0&&(n=new x);let r=3,i=4,o=[],s,a;for(s=0;s<r*i;s++)o.push(0);for(s=0;s<3;s++)for(a=0;a<3;a++)o[s+i*a]=this.elements[s+3*a];o[3]=e.x,o[7]=e.y,o[11]=e.z;let c=3,l=c,u,d=4,f;do{if(s=l-c,o[s+i*s]===0){for(a=s+1;a<l;a++)if(o[s+i*a]!==0){u=d;do f=d-u,o[f+i*s]+=o[f+i*a];while(--u);break}}if(o[s+i*s]!==0)for(a=s+1;a<l;a++){let h=o[s+i*a]/o[s+i*s];u=d;do f=d-u,o[f+i*a]=f<=s?0:o[f+i*a]-o[f+i*s]*h;while(--u)}}while(--c);if(n.z=o[2*i+3]/o[2*i+2],n.y=(o[1*i+3]-o[1*i+2]*n.z)/o[1*i+1],n.x=(o[0*i+3]-o[0*i+2]*n.z-o[0*i+1]*n.y)/o[0*i+0],isNaN(n.x)||isNaN(n.y)||isNaN(n.z)||n.x===1/0||n.y===1/0||n.z===1/0)throw`Could not solve equation! Got x=[${n.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return n}e(e,n,r){if(r===void 0)return this.elements[n+3*e];this.elements[n+3*e]=r}copy(e){for(let n=0;n<e.elements.length;n++)this.elements[n]=e.elements[n];return this}toString(){let e="";for(let r=0;r<9;r++)e+=this.elements[r]+",";return e}reverse(e){e===void 0&&(e=new t);let n=3,r=6,i=OX,o,s;for(o=0;o<3;o++)for(s=0;s<3;s++)i[o+r*s]=this.elements[o+3*s];i[3]=1,i[9]=0,i[15]=0,i[4]=0,i[10]=1,i[16]=0,i[5]=0,i[11]=0,i[17]=1;let a=3,c=a,l,u=r,d;do{if(o=c-a,i[o+r*o]===0){for(s=o+1;s<c;s++)if(i[o+r*s]!==0){l=u;do d=u-l,i[d+r*o]+=i[d+r*s];while(--l);break}}if(i[o+r*o]!==0)for(s=o+1;s<c;s++){let f=i[o+r*s]/i[o+r*o];l=u;do d=u-l,i[d+r*s]=d<=o?0:i[d+r*s]-i[d+r*o]*f;while(--l)}}while(--a);o=2;do{s=o-1;do{let f=i[o+r*s]/i[o+r*o];l=r;do d=r-l,i[d+r*s]=i[d+r*s]-i[d+r*o]*f;while(--l)}while(s--)}while(--o);o=2;do{let f=1/i[o+r*o];l=r;do d=r-l,i[d+r*o]=i[d+r*o]*f;while(--l)}while(o--);o=2;do{s=2;do{if(d=i[n+s+r*o],isNaN(d)||d===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(o,s,d)}while(s--)}while(o--);return e}setRotationFromQuaternion(e){let n=e.x,r=e.y,i=e.z,o=e.w,s=n+n,a=r+r,c=i+i,l=n*s,u=n*a,d=n*c,f=r*a,h=r*c,p=i*c,g=o*s,y=o*a,_=o*c,E=this.elements;return E[0]=1-(f+p),E[1]=u-_,E[2]=d+y,E[3]=u+_,E[4]=1-(l+p),E[5]=h-g,E[6]=d-y,E[7]=h+g,E[8]=1-(l+f),this}transpose(e){e===void 0&&(e=new t);let n=this.elements,r=e.elements,i;return r[0]=n[0],r[4]=n[4],r[8]=n[8],i=n[1],r[1]=n[3],r[3]=i,i=n[2],r[2]=n[6],r[6]=i,i=n[5],r[5]=n[7],r[7]=i,e}},OX=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=class t{constructor(e,n,r){e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=0),this.x=e,this.y=n,this.z=r}cross(e,n){n===void 0&&(n=new t);let r=e.x,i=e.y,o=e.z,s=this.x,a=this.y,c=this.z;return n.x=a*o-c*i,n.y=c*r-s*o,n.z=s*i-a*r,n}set(e,n,r){return this.x=e,this.y=n,this.z=r,this}setZero(){this.x=this.y=this.z=0}vadd(e,n){if(n)n.x=e.x+this.x,n.y=e.y+this.y,n.z=e.z+this.z;else return new t(this.x+e.x,this.y+e.y,this.z+e.z)}vsub(e,n){if(n)n.x=this.x-e.x,n.y=this.y-e.y,n.z=this.z-e.z;else return new t(this.x-e.x,this.y-e.y,this.z-e.z)}crossmat(){return new Yi([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){let e=this.x,n=this.y,r=this.z,i=Math.sqrt(e*e+n*n+r*r);if(i>0){let o=1/i;this.x*=o,this.y*=o,this.z*=o}else this.x=0,this.y=0,this.z=0;return i}unit(e){e===void 0&&(e=new t);let n=this.x,r=this.y,i=this.z,o=Math.sqrt(n*n+r*r+i*i);return o>0?(o=1/o,e.x=n*o,e.y=r*o,e.z=i*o):(e.x=1,e.y=0,e.z=0),e}length(){let e=this.x,n=this.y,r=this.z;return Math.sqrt(e*e+n*n+r*r)}lengthSquared(){return this.dot(this)}distanceTo(e){let n=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z;return Math.sqrt((o-n)*(o-n)+(s-r)*(s-r)+(a-i)*(a-i))}distanceSquared(e){let n=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z;return(o-n)*(o-n)+(s-r)*(s-r)+(a-i)*(a-i)}scale(e,n){n===void 0&&(n=new t);let r=this.x,i=this.y,o=this.z;return n.x=e*r,n.y=e*i,n.z=e*o,n}vmul(e,n){return n===void 0&&(n=new t),n.x=e.x*this.x,n.y=e.y*this.y,n.z=e.z*this.z,n}addScaledVector(e,n,r){return r===void 0&&(r=new t),r.x=this.x+e*n.x,r.y=this.y+e*n.y,r.z=this.z+e*n.z,r}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return this.x===0&&this.y===0&&this.z===0}negate(e){return e===void 0&&(e=new t),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,n){let r=this.length();if(r>0){let i=LX,o=1/r;i.set(this.x*o,this.y*o,this.z*o);let s=BX;Math.abs(i.x)<.9?(s.set(1,0,0),i.cross(s,e)):(s.set(0,1,0),i.cross(s,e)),i.cross(e,n)}else e.set(1,0,0),n.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,n,r){let i=this.x,o=this.y,s=this.z;r.x=i+(e.x-i)*n,r.y=o+(e.y-o)*n,r.z=s+(e.z-s)*n}almostEquals(e,n){return n===void 0&&(n=1e-6),!(Math.abs(this.x-e.x)>n||Math.abs(this.y-e.y)>n||Math.abs(this.z-e.z)>n)}almostZero(e){return e===void 0&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,n){return this.negate(ik),ik.almostEquals(e,n)}clone(){return new t(this.x,this.y,this.z)}};x.ZERO=new x(0,0,0);x.UNIT_X=new x(1,0,0);x.UNIT_Y=new x(0,1,0);x.UNIT_Z=new x(0,0,1);var LX=new x,BX=new x,ik=new x,pt=class t{constructor(e){e===void 0&&(e={}),this.lowerBound=new x,this.upperBound=new x,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,n,r,i){let o=this.lowerBound,s=this.upperBound,a=r;o.copy(e[0]),a&&a.vmult(o,o),s.copy(o);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,ok),l=ok),l.x>s.x&&(s.x=l.x),l.x<o.x&&(o.x=l.x),l.y>s.y&&(s.y=l.y),l.y<o.y&&(o.y=l.y),l.z>s.z&&(s.z=l.z),l.z<o.z&&(o.z=l.z)}return n&&(n.vadd(o,o),n.vadd(s,s)),i&&(o.x-=i,o.y-=i,o.z-=i,s.x+=i,s.y+=i,s.z+=i),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return new t().copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){let n=this.lowerBound,r=this.upperBound,i=e.lowerBound,o=e.upperBound,s=i.x<=r.x&&r.x<=o.x||n.x<=o.x&&o.x<=r.x,a=i.y<=r.y&&r.y<=o.y||n.y<=o.y&&o.y<=r.y,c=i.z<=r.z&&r.z<=o.z||n.z<=o.z&&o.z<=r.z;return s&&a&&c}volume(){let e=this.lowerBound,n=this.upperBound;return(n.x-e.x)*(n.y-e.y)*(n.z-e.z)}contains(e){let n=this.lowerBound,r=this.upperBound,i=e.lowerBound,o=e.upperBound;return n.x<=i.x&&r.x>=o.x&&n.y<=i.y&&r.y>=o.y&&n.z<=i.z&&r.z>=o.z}getCorners(e,n,r,i,o,s,a,c){let l=this.lowerBound,u=this.upperBound;e.copy(l),n.set(u.x,l.y,l.z),r.set(u.x,u.y,l.z),i.set(l.x,u.y,u.z),o.set(u.x,l.y,u.z),s.set(l.x,u.y,l.z),a.set(l.x,l.y,u.z),c.copy(u)}toLocalFrame(e,n){let r=sk,i=r[0],o=r[1],s=r[2],a=r[3],c=r[4],l=r[5],u=r[6],d=r[7];this.getCorners(i,o,s,a,c,l,u,d);for(let f=0;f!==8;f++){let h=r[f];e.pointToLocal(h,h)}return n.setFromPoints(r)}toWorldFrame(e,n){let r=sk,i=r[0],o=r[1],s=r[2],a=r[3],c=r[4],l=r[5],u=r[6],d=r[7];this.getCorners(i,o,s,a,c,l,u,d);for(let f=0;f!==8;f++){let h=r[f];e.pointToWorld(h,h)}return n.setFromPoints(r)}overlapsRay(e){let{direction:n,from:r}=e,i=1/n.x,o=1/n.y,s=1/n.z,a=(this.lowerBound.x-r.x)*i,c=(this.upperBound.x-r.x)*i,l=(this.lowerBound.y-r.y)*o,u=(this.upperBound.y-r.y)*o,d=(this.lowerBound.z-r.z)*s,f=(this.upperBound.z-r.z)*s,h=Math.max(Math.max(Math.min(a,c),Math.min(l,u)),Math.min(d,f)),p=Math.min(Math.min(Math.max(a,c),Math.max(l,u)),Math.max(d,f));return!(p<0||h>p)}},ok=new x,sk=[new x,new x,new x,new x,new x,new x,new x,new x];var x0=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});let r=this._listeners;return r[e]===void 0&&(r[e]=[]),r[e].includes(n)||r[e].push(n),this}hasEventListener(e,n){if(this._listeners===void 0)return!1;let r=this._listeners;return!!(r[e]!==void 0&&r[e].includes(n))}hasAnyEventListener(e){return this._listeners===void 0?!1:this._listeners[e]!==void 0}removeEventListener(e,n){if(this._listeners===void 0)return this;let r=this._listeners;if(r[e]===void 0)return this;let i=r[e].indexOf(n);return i!==-1&&r[e].splice(i,1),this}dispatchEvent(e){if(this._listeners===void 0)return this;let r=this._listeners[e.type];if(r!==void 0){e.target=this;for(let i=0,o=r.length;i<o;i++)r[i].call(this,e)}return this}},Ot=class t{constructor(e,n,r,i){e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=1),this.x=e,this.y=n,this.z=r,this.w=i}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,n){let r=Math.sin(n*.5);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(n*.5),this}toAxisAngle(e){e===void 0&&(e=new x),this.normalize();let n=2*Math.acos(this.w),r=Math.sqrt(1-this.w*this.w);return r<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/r,e.y=this.y/r,e.z=this.z/r),[e,n]}setFromVectors(e,n){if(e.isAntiparallelTo(n)){let r=kX,i=FX;e.tangents(r,i),this.setFromAxisAngle(r,Math.PI)}else{let r=e.cross(n);this.x=r.x,this.y=r.y,this.z=r.z,this.w=Math.sqrt(e.length()**2*n.length()**2)+e.dot(n),this.normalize()}return this}mult(e,n){n===void 0&&(n=new t);let r=this.x,i=this.y,o=this.z,s=this.w,a=e.x,c=e.y,l=e.z,u=e.w;return n.x=r*u+s*a+i*l-o*c,n.y=i*u+s*c+o*a-r*l,n.z=o*u+s*l+r*c-i*a,n.w=s*u-r*a-i*c-o*l,n}inverse(e){e===void 0&&(e=new t);let n=this.x,r=this.y,i=this.z,o=this.w;this.conjugate(e);let s=1/(n*n+r*r+i*i+o*o);return e.x*=s,e.y*=s,e.z*=s,e.w*=s,e}conjugate(e){return e===void 0&&(e=new t),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){let e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return e===0?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,n){n===void 0&&(n=new x);let r=e.x,i=e.y,o=e.z,s=this.x,a=this.y,c=this.z,l=this.w,u=l*r+a*o-c*i,d=l*i+c*r-s*o,f=l*o+s*i-a*r,h=-s*r-a*i-c*o;return n.x=u*l+h*-s+d*-c-f*-a,n.y=d*l+h*-a+f*-s-u*-c,n.z=f*l+h*-c+u*-a-d*-s,n}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,n){n===void 0&&(n="YZX");let r,i,o,s=this.x,a=this.y,c=this.z,l=this.w;switch(n){case"YZX":let u=s*a+c*l;if(u>.499&&(r=2*Math.atan2(s,l),i=Math.PI/2,o=0),u<-.499&&(r=-2*Math.atan2(s,l),i=-Math.PI/2,o=0),r===void 0){let d=s*s,f=a*a,h=c*c;r=Math.atan2(2*a*l-2*s*c,1-2*f-2*h),i=Math.asin(2*u),o=Math.atan2(2*s*l-2*a*c,1-2*d-2*h)}break;default:throw new Error(`Euler order ${n} not supported yet.`)}e.y=r,e.z=i,e.x=o}setFromEuler(e,n,r,i){i===void 0&&(i="XYZ");let o=Math.cos(e/2),s=Math.cos(n/2),a=Math.cos(r/2),c=Math.sin(e/2),l=Math.sin(n/2),u=Math.sin(r/2);return i==="XYZ"?(this.x=c*s*a+o*l*u,this.y=o*l*a-c*s*u,this.z=o*s*u+c*l*a,this.w=o*s*a-c*l*u):i==="YXZ"?(this.x=c*s*a+o*l*u,this.y=o*l*a-c*s*u,this.z=o*s*u-c*l*a,this.w=o*s*a+c*l*u):i==="ZXY"?(this.x=c*s*a-o*l*u,this.y=o*l*a+c*s*u,this.z=o*s*u+c*l*a,this.w=o*s*a-c*l*u):i==="ZYX"?(this.x=c*s*a-o*l*u,this.y=o*l*a+c*s*u,this.z=o*s*u-c*l*a,this.w=o*s*a+c*l*u):i==="YZX"?(this.x=c*s*a+o*l*u,this.y=o*l*a+c*s*u,this.z=o*s*u-c*l*a,this.w=o*s*a-c*l*u):i==="XZY"&&(this.x=c*s*a-o*l*u,this.y=o*l*a-c*s*u,this.z=o*s*u+c*l*a,this.w=o*s*a+c*l*u),this}clone(){return new t(this.x,this.y,this.z,this.w)}slerp(e,n,r){r===void 0&&(r=new t);let i=this.x,o=this.y,s=this.z,a=this.w,c=e.x,l=e.y,u=e.z,d=e.w,f,h,p,g,y;return h=i*c+o*l+s*u+a*d,h<0&&(h=-h,c=-c,l=-l,u=-u,d=-d),1-h>1e-6?(f=Math.acos(h),p=Math.sin(f),g=Math.sin((1-n)*f)/p,y=Math.sin(n*f)/p):(g=1-n,y=n),r.x=g*i+y*c,r.y=g*o+y*l,r.z=g*s+y*u,r.w=g*a+y*d,r}integrate(e,n,r,i){i===void 0&&(i=new t);let o=e.x*r.x,s=e.y*r.y,a=e.z*r.z,c=this.x,l=this.y,u=this.z,d=this.w,f=n*.5;return i.x+=f*(o*d+s*u-a*l),i.y+=f*(s*d+a*c-o*u),i.z+=f*(a*d+o*l-s*c),i.w+=f*(-o*c-s*l-a*u),i}},kX=new x,FX=new x,jX={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256},ee=(()=>{class t{constructor(n){n===void 0&&(n={}),this.id=t.idCounter++,this.type=n.type||0,this.boundingSphereRadius=0,this.collisionResponse=n.collisionResponse?n.collisionResponse:!0,this.collisionFilterGroup=n.collisionFilterGroup!==void 0?n.collisionFilterGroup:1,this.collisionFilterMask=n.collisionFilterMask!==void 0?n.collisionFilterMask:-1,this.material=n.material?n.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(n,r){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(n,r,i,o){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return t.idCounter=0,t.types=jX,t})(),we=class t{constructor(e){e===void 0&&(e={}),this.position=new x,this.quaternion=new Ot,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,n){return t.pointToLocalFrame(this.position,this.quaternion,e,n)}pointToWorld(e,n){return t.pointToWorldFrame(this.position,this.quaternion,e,n)}vectorToWorldFrame(e,n){return n===void 0&&(n=new x),this.quaternion.vmult(e,n),n}static pointToLocalFrame(e,n,r,i){return i===void 0&&(i=new x),r.vsub(e,i),n.conjugate(ak),ak.vmult(i,i),i}static pointToWorldFrame(e,n,r,i){return i===void 0&&(i=new x),n.vmult(r,i),i.vadd(e,i),i}static vectorToWorldFrame(e,n,r){return r===void 0&&(r=new x),e.vmult(n,r),r}static vectorToLocalFrame(e,n,r,i){return i===void 0&&(i=new x),n.w*=-1,n.vmult(r,i),n.w*=-1,i}},ak=new Ot,E0=class t extends ee{constructor(e){e===void 0&&(e={});let{vertices:n=[],faces:r=[],normals:i=[],axes:o,boundingSphereRadius:s}=e;super({type:ee.types.CONVEXPOLYHEDRON}),this.vertices=n,this.faces=r,this.faceNormals=i,this.faceNormals.length===0&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=o?o.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){let e=this.faces,n=this.vertices,r=this.uniqueEdges;r.length=0;let i=new x;for(let o=0;o!==e.length;o++){let s=e[o],a=s.length;for(let c=0;c!==a;c++){let l=(c+1)%a;n[s[c]].vsub(n[s[l]],i),i.normalize();let u=!1;for(let d=0;d!==r.length;d++)if(r[d].almostEquals(i)||r[d].almostEquals(i)){u=!0;break}u||r.push(i.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let i=0;i<this.faces[e].length;i++)if(!this.vertices[this.faces[e][i]])throw new Error(`Vertex ${this.faces[e][i]} not found!`);let n=this.faceNormals[e]||new x;this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n;let r=this.vertices[this.faces[e][0]];if(n.dot(r)<0){console.error(`.faceNormals[${e}] = Vec3(${n.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let i=0;i<this.faces[e].length;i++)console.warn(`.vertices[${this.faces[e][i]}] = Vec3(${this.vertices[this.faces[e][i]].toString()})`)}}}getFaceNormal(e,n){let r=this.faces[e],i=this.vertices[r[0]],o=this.vertices[r[1]],s=this.vertices[r[2]];t.computeNormal(i,o,s,n)}static computeNormal(e,n,r,i){let o=new x,s=new x;n.vsub(e,s),r.vsub(n,o),o.cross(s,i),i.isZero()||i.normalize()}clipAgainstHull(e,n,r,i,o,s,a,c,l){let u=new x,d=-1,f=-Number.MAX_VALUE;for(let p=0;p<r.faces.length;p++){u.copy(r.faceNormals[p]),o.vmult(u,u);let g=u.dot(s);g>f&&(f=g,d=p)}let h=[];for(let p=0;p<r.faces[d].length;p++){let g=r.vertices[r.faces[d][p]],y=new x;y.copy(g),o.vmult(y,y),i.vadd(y,y),h.push(y)}d>=0&&this.clipFaceAgainstHull(s,e,n,h,a,c,l)}findSeparatingAxis(e,n,r,i,o,s,a,c){let l=new x,u=new x,d=new x,f=new x,h=new x,p=new x,g=Number.MAX_VALUE,y=this;if(y.uniqueAxes)for(let _=0;_!==y.uniqueAxes.length;_++){r.vmult(y.uniqueAxes[_],l);let E=y.testSepAxis(l,e,n,r,i,o);if(E===!1)return!1;E<g&&(g=E,s.copy(l))}else{let _=a?a.length:y.faces.length;for(let E=0;E<_;E++){let A=a?a[E]:E;l.copy(y.faceNormals[A]),r.vmult(l,l);let I=y.testSepAxis(l,e,n,r,i,o);if(I===!1)return!1;I<g&&(g=I,s.copy(l))}}if(e.uniqueAxes)for(let _=0;_!==e.uniqueAxes.length;_++){o.vmult(e.uniqueAxes[_],u);let E=y.testSepAxis(u,e,n,r,i,o);if(E===!1)return!1;E<g&&(g=E,s.copy(u))}else{let _=c?c.length:e.faces.length;for(let E=0;E<_;E++){let A=c?c[E]:E;u.copy(e.faceNormals[A]),o.vmult(u,u);let I=y.testSepAxis(u,e,n,r,i,o);if(I===!1)return!1;I<g&&(g=I,s.copy(u))}}for(let _=0;_!==y.uniqueEdges.length;_++){r.vmult(y.uniqueEdges[_],f);for(let E=0;E!==e.uniqueEdges.length;E++)if(o.vmult(e.uniqueEdges[E],h),f.cross(h,p),!p.almostZero()){p.normalize();let A=y.testSepAxis(p,e,n,r,i,o);if(A===!1)return!1;A<g&&(g=A,s.copy(p))}}return i.vsub(n,d),d.dot(s)>0&&s.negate(s),!0}testSepAxis(e,n,r,i,o,s){let a=this;t.project(a,e,r,i,v0),t.project(n,e,o,s,y0);let c=v0[0],l=v0[1],u=y0[0],d=y0[1];if(c<d||u<l)return!1;let f=c-d,h=u-l;return f<h?f:h}calculateLocalInertia(e,n){let r=new x,i=new x;this.computeLocalAABB(i,r);let o=r.x-i.x,s=r.y-i.y,a=r.z-i.z;n.x=1/12*e*(2*s*2*s+2*a*2*a),n.y=1/12*e*(2*o*2*o+2*a*2*a),n.z=1/12*e*(2*s*2*s+2*o*2*o)}getPlaneConstantOfFace(e){let n=this.faces[e],r=this.faceNormals[e],i=this.vertices[n[0]];return-r.dot(i)}clipFaceAgainstHull(e,n,r,i,o,s,a){let c=new x,l=new x,u=new x,d=new x,f=new x,h=new x,p=new x,g=new x,y=this,_=[],E=i,A=_,I=-1,C=Number.MAX_VALUE;for(let k=0;k<y.faces.length;k++){c.copy(y.faceNormals[k]),r.vmult(c,c);let B=c.dot(e);B<C&&(C=B,I=k)}if(I<0)return;let D=y.faces[I];D.connectedFaces=[];for(let k=0;k<y.faces.length;k++)for(let B=0;B<y.faces[k].length;B++)D.indexOf(y.faces[k][B])!==-1&&k!==I&&D.connectedFaces.indexOf(k)===-1&&D.connectedFaces.push(k);let F=D.length;for(let k=0;k<F;k++){let B=y.vertices[D[k]],W=y.vertices[D[(k+1)%F]];B.vsub(W,l),u.copy(l),r.vmult(u,u),n.vadd(u,u),d.copy(this.faceNormals[I]),r.vmult(d,d),n.vadd(d,d),u.cross(d,f),f.negate(f),h.copy(B),r.vmult(h,h),n.vadd(h,h);let O=D.connectedFaces[k];p.copy(this.faceNormals[O]);let Z=this.getPlaneConstantOfFace(O);g.copy(p),r.vmult(g,g);let J=Z-g.dot(n);for(this.clipFaceAgainstPlane(E,A,g,J);E.length;)E.shift();for(;A.length;)E.push(A.shift())}p.copy(this.faceNormals[I]);let z=this.getPlaneConstantOfFace(I);g.copy(p),r.vmult(g,g);let j=z-g.dot(n);for(let k=0;k<E.length;k++){let B=g.dot(E[k])+j;if(B<=o&&(console.log(`clamped: depth=${B} to minDist=${o}`),B=o),B<=s){let W=E[k];if(B<=1e-6){let O={point:W,normal:g,depth:B};a.push(O)}}}}clipFaceAgainstPlane(e,n,r,i){let o,s,a=e.length;if(a<2)return n;let c=e[e.length-1],l=e[0];o=r.dot(c)+i;for(let u=0;u<a;u++){if(l=e[u],s=r.dot(l)+i,o<0)if(s<0){let d=new x;d.copy(l),n.push(d)}else{let d=new x;c.lerp(l,o/(o-s),d),n.push(d)}else if(s<0){let d=new x;c.lerp(l,o/(o-s),d),n.push(d),n.push(l)}c=l,o=s}return n}computeWorldVertices(e,n){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new x);let r=this.vertices,i=this.worldVertices;for(let o=0;o!==this.vertices.length;o++)n.vmult(r[o],i[o]),e.vadd(i[o],i[o]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,n){let r=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let i=0;i<this.vertices.length;i++){let o=r[i];o.x<e.x?e.x=o.x:o.x>n.x&&(n.x=o.x),o.y<e.y?e.y=o.y:o.y>n.y&&(n.y=o.y),o.z<e.z?e.z=o.z:o.z>n.z&&(n.z=o.z)}}computeWorldFaceNormals(e){let n=this.faceNormals.length;for(;this.worldFaceNormals.length<n;)this.worldFaceNormals.push(new x);let r=this.faceNormals,i=this.worldFaceNormals;for(let o=0;o!==n;o++)e.vmult(r[o],i[o]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0,n=this.vertices;for(let r=0;r!==n.length;r++){let i=n[r].lengthSquared();i>e&&(e=i)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,n,r,i){let o=this.vertices,s,a,c,l,u,d,f=new x;for(let h=0;h<o.length;h++){f.copy(o[h]),n.vmult(f,f),e.vadd(f,f);let p=f;(s===void 0||p.x<s)&&(s=p.x),(l===void 0||p.x>l)&&(l=p.x),(a===void 0||p.y<a)&&(a=p.y),(u===void 0||p.y>u)&&(u=p.y),(c===void 0||p.z<c)&&(c=p.z),(d===void 0||p.z>d)&&(d=p.z)}r.set(s,a,c),i.set(l,u,d)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){e===void 0&&(e=new x);let n=this.vertices;for(let r=0;r<n.length;r++)e.vadd(n[r],e);return e.scale(1/n.length,e),e}transformAllPoints(e,n){let r=this.vertices.length,i=this.vertices;if(n){for(let o=0;o<r;o++){let s=i[o];n.vmult(s,s)}for(let o=0;o<this.faceNormals.length;o++){let s=this.faceNormals[o];n.vmult(s,s)}}if(e)for(let o=0;o<r;o++){let s=i[o];s.vadd(e,s)}}pointIsInside(e){let n=this.vertices,r=this.faces,i=this.faceNormals,o=null,s=new x;this.getAveragePointLocal(s);for(let a=0;a<this.faces.length;a++){let c=i[a],l=n[r[a][0]],u=new x;e.vsub(l,u);let d=c.dot(u),f=new x;s.vsub(l,f);let h=c.dot(f);if(d<0&&h>0||d>0&&h<0)return!1}return o?1:-1}static project(e,n,r,i,o){let s=e.vertices.length,a=zX,c=0,l=0,u=VX,d=e.vertices;u.setZero(),we.vectorToLocalFrame(r,i,n,a),we.pointToLocalFrame(r,i,u,u);let f=u.dot(a);l=c=d[0].dot(a);for(let h=1;h<s;h++){let p=d[h].dot(a);p>c&&(c=p),p<l&&(l=p)}if(l-=f,c-=f,l>c){let h=l;l=c,c=h}o[0]=c,o[1]=l}},v0=[],y0=[],UX=new x,zX=new x,VX=new x,w0=class t extends ee{constructor(e){super({type:ee.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){let e=this.halfExtents.x,n=this.halfExtents.y,r=this.halfExtents.z,i=x,o=[new i(-e,-n,-r),new i(e,-n,-r),new i(e,n,-r),new i(-e,n,-r),new i(-e,-n,r),new i(e,-n,r),new i(e,n,r),new i(-e,n,r)],s=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],a=[new i(0,0,1),new i(0,1,0),new i(1,0,0)],c=new E0({vertices:o,faces:s,axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,n){return n===void 0&&(n=new x),t.calculateInertia(this.halfExtents,e,n),n}static calculateInertia(e,n,r){let i=e;r.x=1/12*n*(2*i.y*2*i.y+2*i.z*2*i.z),r.y=1/12*n*(2*i.x*2*i.x+2*i.z*2*i.z),r.z=1/12*n*(2*i.y*2*i.y+2*i.x*2*i.x)}getSideNormals(e,n){let r=e,i=this.halfExtents;if(r[0].set(i.x,0,0),r[1].set(0,i.y,0),r[2].set(0,0,i.z),r[3].set(-i.x,0,0),r[4].set(0,-i.y,0),r[5].set(0,0,-i.z),n!==void 0)for(let o=0;o!==r.length;o++)n.vmult(r[o],r[o]);return r}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,n,r){let i=this.halfExtents,o=[[i.x,i.y,i.z],[-i.x,i.y,i.z],[-i.x,-i.y,i.z],[-i.x,-i.y,-i.z],[i.x,-i.y,-i.z],[i.x,i.y,-i.z],[-i.x,i.y,-i.z],[i.x,-i.y,i.z]];for(let s=0;s<o.length;s++)Ji.set(o[s][0],o[s][1],o[s][2]),n.vmult(Ji,Ji),e.vadd(Ji,Ji),r(Ji.x,Ji.y,Ji.z)}calculateWorldAABB(e,n,r,i){let o=this.halfExtents;Sr[0].set(o.x,o.y,o.z),Sr[1].set(-o.x,o.y,o.z),Sr[2].set(-o.x,-o.y,o.z),Sr[3].set(-o.x,-o.y,-o.z),Sr[4].set(o.x,-o.y,-o.z),Sr[5].set(o.x,o.y,-o.z),Sr[6].set(-o.x,o.y,-o.z),Sr[7].set(o.x,-o.y,o.z);let s=Sr[0];n.vmult(s,s),e.vadd(s,s),i.copy(s),r.copy(s);for(let a=1;a<8;a++){let c=Sr[a];n.vmult(c,c),e.vadd(c,c);let l=c.x,u=c.y,d=c.z;l>i.x&&(i.x=l),u>i.y&&(i.y=u),d>i.z&&(i.z=d),l<r.x&&(r.x=l),u<r.y&&(r.y=u),d<r.z&&(r.z=d)}}},Ji=new x,Sr=[new x,new x,new x,new x,new x,new x,new x,new x],S0={DYNAMIC:1,STATIC:2,KINEMATIC:4},C0={AWAKE:0,SLEEPY:1,SLEEPING:2},Ye=class t extends x0{constructor(e){e===void 0&&(e={}),super(),this.id=t.idCounter++,this.index=-1,this.world=null,this.vlambda=new x,this.collisionFilterGroup=typeof e.collisionFilterGroup=="number"?e.collisionFilterGroup:1,this.collisionFilterMask=typeof e.collisionFilterMask=="number"?e.collisionFilterMask:-1,this.collisionResponse=typeof e.collisionResponse=="boolean"?e.collisionResponse:!0,this.position=new x,this.previousPosition=new x,this.interpolatedPosition=new x,this.initPosition=new x,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new x,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new x,this.force=new x;let n=typeof e.mass=="number"?e.mass:0;this.mass=n,this.invMass=n>0?1/n:0,this.material=e.material||null,this.linearDamping=typeof e.linearDamping=="number"?e.linearDamping:.01,this.type=n<=0?t.STATIC:t.DYNAMIC,typeof e.type==typeof t.STATIC&&(this.type=e.type),this.allowSleep=typeof e.allowSleep<"u"?e.allowSleep:!0,this.sleepState=t.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new x,this.quaternion=new Ot,this.initQuaternion=new Ot,this.previousQuaternion=new Ot,this.interpolatedQuaternion=new Ot,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new x,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new x,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new x,this.invInertia=new x,this.invInertiaWorld=new Yi,this.invMassSolve=0,this.invInertiaSolve=new x,this.invInertiaWorldSolve=new Yi,this.fixedRotation=typeof e.fixedRotation<"u"?e.fixedRotation:!1,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new x(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new x(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new pt,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new x,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){let e=this.sleepState;this.sleepState=t.AWAKE,this.wakeUpAfterNarrowphase=!1,e===t.SLEEPING&&this.dispatchEvent(t.wakeupEvent)}sleep(){this.sleepState=t.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){let n=this.sleepState,r=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),i=this.sleepSpeedLimit**2;n===t.AWAKE&&r<i?(this.sleepState=t.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(t.sleepyEvent)):n===t.SLEEPY&&r>i?this.wakeUp():n===t.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(t.sleepEvent))}}updateSolveMassProperties(){this.sleepState===t.SLEEPING||this.type===t.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,n){return n===void 0&&(n=new x),e.vsub(this.position,n),this.quaternion.conjugate().vmult(n,n),n}vectorToLocalFrame(e,n){return n===void 0&&(n=new x),this.quaternion.conjugate().vmult(e,n),n}pointToWorldFrame(e,n){return n===void 0&&(n=new x),this.quaternion.vmult(e,n),n.vadd(this.position,n),n}vectorToWorldFrame(e,n){return n===void 0&&(n=new x),this.quaternion.vmult(e,n),n}addShape(e,n,r){let i=new x,o=new Ot;return n&&i.copy(n),r&&o.copy(r),this.shapes.push(e),this.shapeOffsets.push(i),this.shapeOrientations.push(o),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){let n=this.shapes.indexOf(e);return n===-1?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(n,1),this.shapeOffsets.splice(n,1),this.shapeOrientations.splice(n,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){let e=this.shapes,n=this.shapeOffsets,r=e.length,i=0;for(let o=0;o!==r;o++){let s=e[o];s.updateBoundingSphereRadius();let a=n[o].length(),c=s.boundingSphereRadius;a+c>i&&(i=a+c)}this.boundingRadius=i}updateAABB(){let e=this.shapes,n=this.shapeOffsets,r=this.shapeOrientations,i=e.length,o=$X,s=GX,a=this.quaternion,c=this.aabb,l=HX;for(let u=0;u!==i;u++){let d=e[u];a.vmult(n[u],o),o.vadd(this.position,o),a.mult(r[u],s),d.calculateWorldAABB(o,s,l.lowerBound,l.upperBound),u===0?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){let n=this.invInertia;if(!(n.x===n.y&&n.y===n.z&&!e)){let r=WX,i=ZX;r.setRotationFromQuaternion(this.quaternion),r.transpose(i),r.scale(n,r),r.mmult(i,this.invInertiaWorld)}}applyForce(e,n){if(n===void 0&&(n=new x),this.type!==t.DYNAMIC)return;this.sleepState===t.SLEEPING&&this.wakeUp();let r=XX;n.cross(e,r),this.force.vadd(e,this.force),this.torque.vadd(r,this.torque)}applyLocalForce(e,n){if(n===void 0&&(n=new x),this.type!==t.DYNAMIC)return;let r=JX,i=YX;this.vectorToWorldFrame(e,r),this.vectorToWorldFrame(n,i),this.applyForce(r,i)}applyTorque(e){this.type===t.DYNAMIC&&(this.sleepState===t.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,n){if(n===void 0&&(n=new x),this.type!==t.DYNAMIC)return;this.sleepState===t.SLEEPING&&this.wakeUp();let r=n,i=KX;i.copy(e),i.scale(this.invMass,i),this.velocity.vadd(i,this.velocity);let o=QX;r.cross(e,o),this.invInertiaWorld.vmult(o,o),this.angularVelocity.vadd(o,this.angularVelocity)}applyLocalImpulse(e,n){if(n===void 0&&(n=new x),this.type!==t.DYNAMIC)return;let r=eJ,i=tJ;this.vectorToWorldFrame(e,r),this.vectorToWorldFrame(n,i),this.applyImpulse(r,i)}updateMassProperties(){let e=nJ;this.invMass=this.mass>0?1/this.mass:0;let n=this.inertia,r=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),w0.calculateInertia(e,this.mass,n),this.invInertia.set(n.x>0&&!r?1/n.x:0,n.y>0&&!r?1/n.y:0,n.z>0&&!r?1/n.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,n){let r=new x;return e.vsub(this.position,r),this.angularVelocity.cross(r,n),this.velocity.vadd(n,n),n}integrate(e,n,r){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),!(this.type===t.DYNAMIC||this.type===t.KINEMATIC)||this.sleepState===t.SLEEPING)return;let i=this.velocity,o=this.angularVelocity,s=this.position,a=this.force,c=this.torque,l=this.quaternion,u=this.invMass,d=this.invInertiaWorld,f=this.linearFactor,h=u*e;i.x+=a.x*h*f.x,i.y+=a.y*h*f.y,i.z+=a.z*h*f.z;let p=d.elements,g=this.angularFactor,y=c.x*g.x,_=c.y*g.y,E=c.z*g.z;o.x+=e*(p[0]*y+p[1]*_+p[2]*E),o.y+=e*(p[3]*y+p[4]*_+p[5]*E),o.z+=e*(p[6]*y+p[7]*_+p[8]*E),s.x+=i.x*e,s.y+=i.y*e,s.z+=i.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),n&&(r?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}};Ye.idCounter=0;Ye.COLLIDE_EVENT_NAME="collide";Ye.DYNAMIC=S0.DYNAMIC;Ye.STATIC=S0.STATIC;Ye.KINEMATIC=S0.KINEMATIC;Ye.AWAKE=C0.AWAKE;Ye.SLEEPY=C0.SLEEPY;Ye.SLEEPING=C0.SLEEPING;Ye.wakeupEvent={type:"wakeup"};Ye.sleepyEvent={type:"sleepy"};Ye.sleepEvent={type:"sleep"};var $X=new x,GX=new Ot,HX=new pt,WX=new Yi,ZX=new Yi,qX=new Yi,XX=new x,JX=new x,YX=new x,KX=new x,QX=new x,eJ=new x,tJ=new x,nJ=new x;var Bze=new x;new x;new Ot;new x;new x;var kze=new x;new x;var Zu=class{constructor(){this.rayFromWorld=new x,this.rayToWorld=new x,this.hitNormalWorld=new x,this.hitPointWorld=new x,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,n,r,i,o,s,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(n),this.hitNormalWorld.copy(r),this.hitPointWorld.copy(i),this.shape=o,this.body=s,this.distance=a}},_k,bk,xk,Ek,wk,Ak,Ik,M0={CLOSEST:1,ANY:2,ALL:4};_k=ee.types.SPHERE;bk=ee.types.PLANE;xk=ee.types.BOX;Ek=ee.types.CYLINDER;wk=ee.types.CONVEXPOLYHEDRON;Ak=ee.types.HEIGHTFIELD;Ik=ee.types.TRIMESH;var ii=class t{get[_k](){return this._intersectSphere}get[bk](){return this._intersectPlane}get[xk](){return this._intersectBox}get[Ek](){return this._intersectConvex}get[wk](){return this._intersectConvex}get[Ak](){return this._intersectHeightfield}get[Ik](){return this._intersectTrimesh}constructor(e,n){e===void 0&&(e=new x),n===void 0&&(n=new x),this.from=e.clone(),this.to=n.clone(),this.direction=new x,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=t.ANY,this.result=new Zu,this.hasHit=!1,this.callback=r=>{}}intersectWorld(e,n){return this.mode=n.mode||t.ANY,this.result=n.result||new Zu,this.skipBackfaces=!!n.skipBackfaces,this.collisionFilterMask=typeof n.collisionFilterMask<"u"?n.collisionFilterMask:-1,this.collisionFilterGroup=typeof n.collisionFilterGroup<"u"?n.collisionFilterGroup:-1,this.checkCollisionResponse=typeof n.checkCollisionResponse<"u"?n.checkCollisionResponse:!0,n.from&&this.from.copy(n.from),n.to&&this.to.copy(n.to),this.callback=n.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(ck),_0.length=0,e.broadphase.aabbQuery(e,ck,_0),this.intersectBodies(_0),this.hasHit}intersectBody(e,n){n&&(this.result=n,this.updateDirection());let r=this.checkCollisionResponse;if(r&&!e.collisionResponse||(this.collisionFilterGroup&e.collisionFilterMask)===0||(e.collisionFilterGroup&this.collisionFilterMask)===0)return;let i=rJ,o=iJ;for(let s=0,a=e.shapes.length;s<a;s++){let c=e.shapes[s];if(!(r&&!c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[s],o),e.quaternion.vmult(e.shapeOffsets[s],i),i.vadd(e.position,i),this.intersectShape(c,o,i,e),this.result.shouldStop))break}}intersectBodies(e,n){n&&(this.result=n,this.updateDirection());for(let r=0,i=e.length;!this.result.shouldStop&&r<i;r++)this.intersectBody(e[r])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,n,r,i){let o=this.from;if(bJ(o,this.direction,r)>e.boundingSphereRadius)return;let a=this[e.type];a&&a.call(this,e,n,r,i,e)}_intersectBox(e,n,r,i,o){return this._intersectConvex(e.convexPolyhedronRepresentation,n,r,i,o)}_intersectPlane(e,n,r,i,o){let s=this.from,a=this.to,c=this.direction,l=new x(0,0,1);n.vmult(l,l);let u=new x;s.vsub(r,u);let d=u.dot(l);a.vsub(r,u);let f=u.dot(l);if(d*f>0||s.distanceTo(a)<d)return;let h=l.dot(c);if(Math.abs(h)<this.precision)return;let p=new x,g=new x,y=new x;s.vsub(r,p);let _=-l.dot(p)/h;c.scale(_,g),s.vadd(g,y),this.reportIntersection(l,y,o,i,-1)}getAABB(e){let{lowerBound:n,upperBound:r}=e,i=this.to,o=this.from;n.x=Math.min(i.x,o.x),n.y=Math.min(i.y,o.y),n.z=Math.min(i.z,o.z),r.x=Math.max(i.x,o.x),r.y=Math.max(i.y,o.y),r.z=Math.max(i.z,o.z)}_intersectHeightfield(e,n,r,i,o){e.data,e.elementSize;let s=oJ;s.from.copy(this.from),s.to.copy(this.to),we.pointToLocalFrame(r,n,s.from,s.from),we.pointToLocalFrame(r,n,s.to,s.to),s.updateDirection();let a=sJ,c,l,u,d;c=l=0,u=d=e.data.length-1;let f=new pt;s.getAABB(f),e.getIndexOfPosition(f.lowerBound.x,f.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(f.upperBound.x,f.upperBound.y,a,!0),u=Math.min(u,a[0]+1),d=Math.min(d,a[1]+1);for(let h=c;h<u;h++)for(let p=l;p<d;p++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(h,p,f),!!f.overlapsRay(s)){if(e.getConvexTrianglePillar(h,p,!1),we.pointToWorldFrame(r,n,e.pillarOffset,sg),this._intersectConvex(e.pillarConvex,n,sg,i,o,lk),this.result.shouldStop)return;e.getConvexTrianglePillar(h,p,!0),we.pointToWorldFrame(r,n,e.pillarOffset,sg),this._intersectConvex(e.pillarConvex,n,sg,i,o,lk)}}}_intersectSphere(e,n,r,i,o){let s=this.from,a=this.to,c=e.radius,l=(a.x-s.x)**2+(a.y-s.y)**2+(a.z-s.z)**2,u=2*((a.x-s.x)*(s.x-r.x)+(a.y-s.y)*(s.y-r.y)+(a.z-s.z)*(s.z-r.z)),d=(s.x-r.x)**2+(s.y-r.y)**2+(s.z-r.z)**2-c**2,f=u**2-4*l*d,h=aJ,p=cJ;if(!(f<0))if(f===0)s.lerp(a,f,h),h.vsub(r,p),p.normalize(),this.reportIntersection(p,h,o,i,-1);else{let g=(-u-Math.sqrt(f))/(2*l),y=(-u+Math.sqrt(f))/(2*l);if(g>=0&&g<=1&&(s.lerp(a,g,h),h.vsub(r,p),p.normalize(),this.reportIntersection(p,h,o,i,-1)),this.result.shouldStop)return;y>=0&&y<=1&&(s.lerp(a,y,h),h.vsub(r,p),p.normalize(),this.reportIntersection(p,h,o,i,-1))}}_intersectConvex(e,n,r,i,o,s){let a=lJ,c=uk,l=s&&s.faceList||null,u=e.faces,d=e.vertices,f=e.faceNormals,h=this.direction,p=this.from,g=this.to,y=p.distanceTo(g),_=l?l.length:u.length,E=this.result;for(let A=0;!E.shouldStop&&A<_;A++){let I=l?l[A]:A,C=u[I],D=f[I],F=n,z=r;c.copy(d[C[0]]),F.vmult(c,c),c.vadd(z,c),c.vsub(p,c),F.vmult(D,a);let j=h.dot(a);if(Math.abs(j)<this.precision)continue;let k=a.dot(c)/j;if(!(k<0)){h.scale(k,jt),jt.vadd(p,jt),Hn.copy(d[C[0]]),F.vmult(Hn,Hn),z.vadd(Hn,Hn);for(let B=1;!E.shouldStop&&B<C.length-1;B++){Cr.copy(d[C[B]]),Mr.copy(d[C[B+1]]),F.vmult(Cr,Cr),F.vmult(Mr,Mr),z.vadd(Cr,Cr),z.vadd(Mr,Mr);let W=jt.distanceTo(p);!(t.pointInTriangle(jt,Hn,Cr,Mr)||t.pointInTriangle(jt,Cr,Hn,Mr))||W>y||this.reportIntersection(a,jt,o,i,I)}}}}_intersectTrimesh(e,n,r,i,o,s){let a=fJ,c=yJ,l=_J,u=uk,d=hJ,f=pJ,h=mJ,p=vJ,g=gJ,y=e.indices;e.vertices;let _=this.from,E=this.to,A=this.direction;l.position.copy(r),l.quaternion.copy(n),we.vectorToLocalFrame(r,n,A,d),we.pointToLocalFrame(r,n,_,f),we.pointToLocalFrame(r,n,E,h),h.x*=e.scale.x,h.y*=e.scale.y,h.z*=e.scale.z,f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,h.vsub(f,d),d.normalize();let I=f.distanceSquared(h);e.tree.rayQuery(this,l,c);for(let C=0,D=c.length;!this.result.shouldStop&&C!==D;C++){let F=c[C];e.getNormal(F,a),e.getVertex(y[F*3],Hn),Hn.vsub(f,u);let z=d.dot(a),j=a.dot(u)/z;if(j<0)continue;d.scale(j,jt),jt.vadd(f,jt),e.getVertex(y[F*3+1],Cr),e.getVertex(y[F*3+2],Mr);let k=jt.distanceSquared(f);!(t.pointInTriangle(jt,Cr,Hn,Mr)||t.pointInTriangle(jt,Hn,Cr,Mr))||k>I||(we.vectorToWorldFrame(n,a,g),we.pointToWorldFrame(r,n,jt,p),this.reportIntersection(g,p,o,i,F))}c.length=0}reportIntersection(e,n,r,i,o){let s=this.from,a=this.to,c=s.distanceTo(n),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof o<"u"?o:-1,this.mode){case t.ALL:this.hasHit=!0,l.set(s,a,e,n,r,i,c),l.hasHit=!0,this.callback(l);break;case t.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,n,r,i,c));break;case t.ANY:this.hasHit=!0,l.hasHit=!0,l.set(s,a,e,n,r,i,c),l.shouldStop=!0;break}}static pointInTriangle(e,n,r,i){i.vsub(n,As),r.vsub(n,Hu),e.vsub(n,b0);let o=As.dot(As),s=As.dot(Hu),a=As.dot(b0),c=Hu.dot(Hu),l=Hu.dot(b0),u,d;return(u=c*a-s*l)>=0&&(d=o*l-s*a)>=0&&u+d<o*c-s*s}};ii.CLOSEST=M0.CLOSEST;ii.ANY=M0.ANY;ii.ALL=M0.ALL;var ck=new pt,_0=[],Hu=new x,b0=new x,rJ=new x,iJ=new Ot,jt=new x,Hn=new x,Cr=new x,Mr=new x;new x;new Zu;var lk={faceList:[0]},sg=new x,oJ=new ii,sJ=[],aJ=new x,cJ=new x,lJ=new x,uJ=new x,dJ=new x,uk=new x,fJ=new x,hJ=new x,pJ=new x,mJ=new x,gJ=new x,vJ=new x;new pt;var yJ=[],_J=new we,As=new x,ag=new x;function bJ(t,e,n){n.vsub(t,As);let r=As.dot(e);return e.scale(r,ag),ag.vadd(t,ag),n.distanceTo(ag)}var dg=class{constructor(){this.spatial=new x,this.rotational=new x}multiplyElement(e){return e.spatial.dot(this.spatial)+e.rotational.dot(this.rotational)}multiplyVectors(e,n){return e.dot(this.spatial)+n.dot(this.rotational)}},Tk=(()=>{class t{constructor(n,r,i,o){i===void 0&&(i=-1e6),o===void 0&&(o=1e6),this.id=t.idCounter++,this.minForce=i,this.maxForce=o,this.bi=n,this.bj=r,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new dg,this.jacobianElementB=new dg,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(n,r,i){let o=r,s=n,a=i;this.a=4/(a*(1+4*o)),this.b=4*o/(1+4*o),this.eps=4/(a*a*s*(1+4*o))}computeB(n,r,i){let o=this.computeGW(),s=this.computeGq(),a=this.computeGiMf();return-s*n-o*r-a*i}computeGq(){let n=this.jacobianElementA,r=this.jacobianElementB,i=this.bi,o=this.bj,s=i.position,a=o.position;return n.spatial.dot(s)+r.spatial.dot(a)}computeGW(){let n=this.jacobianElementA,r=this.jacobianElementB,i=this.bi,o=this.bj,s=i.velocity,a=o.velocity,c=i.angularVelocity,l=o.angularVelocity;return n.multiplyVectors(s,c)+r.multiplyVectors(a,l)}computeGWlambda(){let n=this.jacobianElementA,r=this.jacobianElementB,i=this.bi,o=this.bj,s=i.vlambda,a=o.vlambda,c=i.wlambda,l=o.wlambda;return n.multiplyVectors(s,c)+r.multiplyVectors(a,l)}computeGiMf(){let n=this.jacobianElementA,r=this.jacobianElementB,i=this.bi,o=this.bj,s=i.force,a=i.torque,c=o.force,l=o.torque,u=i.invMassSolve,d=o.invMassSolve;return s.scale(u,dk),c.scale(d,fk),i.invInertiaWorldSolve.vmult(a,hk),o.invInertiaWorldSolve.vmult(l,pk),n.multiplyVectors(dk,hk)+r.multiplyVectors(fk,pk)}computeGiMGt(){let n=this.jacobianElementA,r=this.jacobianElementB,i=this.bi,o=this.bj,s=i.invMassSolve,a=o.invMassSolve,c=i.invInertiaWorldSolve,l=o.invInertiaWorldSolve,u=s+a;return c.vmult(n.rotational,cg),u+=cg.dot(n.rotational),l.vmult(r.rotational,cg),u+=cg.dot(r.rotational),u}addToWlambda(n){let r=this.jacobianElementA,i=this.jacobianElementB,o=this.bi,s=this.bj,a=xJ;o.vlambda.addScaledVector(o.invMassSolve*n,r.spatial,o.vlambda),s.vlambda.addScaledVector(s.invMassSolve*n,i.spatial,s.vlambda),o.invInertiaWorldSolve.vmult(r.rotational,a),o.wlambda.addScaledVector(n,a,o.wlambda),s.invInertiaWorldSolve.vmult(i.rotational,a),s.wlambda.addScaledVector(n,a,s.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}return t.idCounter=0,t})(),dk=new x,fk=new x,hk=new x,pk=new x,cg=new x,xJ=new x,A0=class extends Tk{constructor(e,n,r){r===void 0&&(r=1e6),super(e,n,0,r),this.restitution=0,this.ri=new x,this.rj=new x,this.ni=new x}computeB(e){let n=this.a,r=this.b,i=this.bi,o=this.bj,s=this.ri,a=this.rj,c=EJ,l=wJ,u=i.velocity,d=i.angularVelocity;i.force,i.torque;let f=o.velocity,h=o.angularVelocity;o.force,o.torque;let p=AJ,g=this.jacobianElementA,y=this.jacobianElementB,_=this.ni;s.cross(_,c),a.cross(_,l),_.negate(g.spatial),c.negate(g.rotational),y.spatial.copy(_),y.rotational.copy(l),p.copy(o.position),p.vadd(a,p),p.vsub(i.position,p),p.vsub(s,p);let E=_.dot(p),A=this.restitution+1,I=A*f.dot(_)-A*u.dot(_)+h.dot(l)-d.dot(c),C=this.computeGiMf();return-E*n-I*r-e*C}getImpactVelocityAlongNormal(){let e=IJ,n=TJ,r=SJ,i=CJ,o=MJ;return this.bi.position.vadd(this.ri,r),this.bj.position.vadd(this.rj,i),this.bi.getVelocityAtWorldPoint(r,e),this.bj.getVelocityAtWorldPoint(i,n),e.vsub(n,o),this.ni.dot(o)}},EJ=new x,wJ=new x,AJ=new x,IJ=new x,TJ=new x,SJ=new x,CJ=new x,MJ=new x;var Fze=new x,jze=new x;var Uze=new x,zze=new x;new x;new x;var Vze=new x,$ze=new x;var Gze=new x,Hze=new x,fg=class extends Tk{constructor(e,n,r){super(e,n,-r,r),this.ri=new x,this.rj=new x,this.t=new x}computeB(e){this.a;let n=this.b;this.bi,this.bj;let r=this.ri,i=this.rj,o=DJ,s=PJ,a=this.t;r.cross(a,o),i.cross(a,s);let c=this.jacobianElementA,l=this.jacobianElementB;a.negate(c.spatial),o.negate(c.rotational),l.spatial.copy(a),l.rotational.copy(s);let u=this.computeGW(),d=this.computeGiMf();return-u*n-e*d}},DJ=new x,PJ=new x;var Wze=new x,Zze=new x,qze=new x,Xze=new x,Jze=new x,Yze=new x,Kze=new x,Qze=new x,e3e=new x,t3e=new x,n3e=new x;var r3e=new x,i3e=new x;new x;new x;new x;var o3e=new x,s3e=new x,a3e=new x;new ii;new x;var c3e=new x,l3e=new x,u3e=[new x(1,0,0),new x(0,1,0),new x(0,0,1)],d3e=new x;var f3e=new x,h3e=new x,p3e=new x;var m3e=new x,g3e=new x,v3e=new x,y3e=new x;var _3e=new x,b3e=new x,x3e=new x;var E3e=new x,w3e=new x;var A3e=new x,I3e=new x,T3e=new x,S3e=new x,C3e=new x,M3e=new x,D3e=new x;var P3e=new x;var R3e=new x,N3e=new x,O3e=new x,L3e=new x,B3e=new x,k3e=new x,F3e=new x,j3e=new x,U3e=new x;var z3e=new x,V3e=new pt;var $3e=new x,G3e=new pt,H3e=new x,W3e=new x,Z3e=new x,q3e=new x,X3e=new x,J3e=new x,Y3e=new x,K3e=new pt,Q3e=new x,eVe=new we,tVe=new pt;var nVe=Ye.STATIC;var I0=class{constructor(){this.objects=[],this.type=Object}release(){let e=arguments.length;for(let n=0;n!==e;n++)this.objects.push(n<0||arguments.length<=n?void 0:arguments[n]);return this}get(){return this.objects.length===0?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(e){let n=this.objects;for(;n.length>e;)n.pop();for(;n.length<e;)n.push(this.constructObject());return this}},T0=class extends I0{constructor(){super(...arguments),this.type=x}constructObject(){return new x}},Be={sphereSphere:ee.types.SPHERE,spherePlane:ee.types.SPHERE|ee.types.PLANE,boxBox:ee.types.BOX|ee.types.BOX,sphereBox:ee.types.SPHERE|ee.types.BOX,planeBox:ee.types.PLANE|ee.types.BOX,convexConvex:ee.types.CONVEXPOLYHEDRON,sphereConvex:ee.types.SPHERE|ee.types.CONVEXPOLYHEDRON,planeConvex:ee.types.PLANE|ee.types.CONVEXPOLYHEDRON,boxConvex:ee.types.BOX|ee.types.CONVEXPOLYHEDRON,sphereHeightfield:ee.types.SPHERE|ee.types.HEIGHTFIELD,boxHeightfield:ee.types.BOX|ee.types.HEIGHTFIELD,convexHeightfield:ee.types.CONVEXPOLYHEDRON|ee.types.HEIGHTFIELD,sphereParticle:ee.types.PARTICLE|ee.types.SPHERE,planeParticle:ee.types.PLANE|ee.types.PARTICLE,boxParticle:ee.types.BOX|ee.types.PARTICLE,convexParticle:ee.types.PARTICLE|ee.types.CONVEXPOLYHEDRON,cylinderCylinder:ee.types.CYLINDER,sphereCylinder:ee.types.SPHERE|ee.types.CYLINDER,planeCylinder:ee.types.PLANE|ee.types.CYLINDER,boxCylinder:ee.types.BOX|ee.types.CYLINDER,convexCylinder:ee.types.CONVEXPOLYHEDRON|ee.types.CYLINDER,heightfieldCylinder:ee.types.HEIGHTFIELD|ee.types.CYLINDER,particleCylinder:ee.types.PARTICLE|ee.types.CYLINDER,sphereTrimesh:ee.types.SPHERE|ee.types.TRIMESH,planeTrimesh:ee.types.PLANE|ee.types.TRIMESH},mk=class{get[Be.sphereSphere](){return this.sphereSphere}get[Be.spherePlane](){return this.spherePlane}get[Be.boxBox](){return this.boxBox}get[Be.sphereBox](){return this.sphereBox}get[Be.planeBox](){return this.planeBox}get[Be.convexConvex](){return this.convexConvex}get[Be.sphereConvex](){return this.sphereConvex}get[Be.planeConvex](){return this.planeConvex}get[Be.boxConvex](){return this.boxConvex}get[Be.sphereHeightfield](){return this.sphereHeightfield}get[Be.boxHeightfield](){return this.boxHeightfield}get[Be.convexHeightfield](){return this.convexHeightfield}get[Be.sphereParticle](){return this.sphereParticle}get[Be.planeParticle](){return this.planeParticle}get[Be.boxParticle](){return this.boxParticle}get[Be.convexParticle](){return this.convexParticle}get[Be.cylinderCylinder](){return this.convexConvex}get[Be.sphereCylinder](){return this.sphereConvex}get[Be.planeCylinder](){return this.planeConvex}get[Be.boxCylinder](){return this.boxConvex}get[Be.convexCylinder](){return this.convexConvex}get[Be.heightfieldCylinder](){return this.heightfieldCylinder}get[Be.particleCylinder](){return this.particleCylinder}get[Be.sphereTrimesh](){return this.sphereTrimesh}get[Be.planeTrimesh](){return this.planeTrimesh}constructor(e){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new T0,this.world=e,this.currentContactMaterial=e.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(e,n,r,i,o,s){let a;this.contactPointPool.length?(a=this.contactPointPool.pop(),a.bi=e,a.bj=n):a=new A0(e,n),a.enabled=e.collisionResponse&&n.collisionResponse&&r.collisionResponse&&i.collisionResponse;let c=this.currentContactMaterial;a.restitution=c.restitution,a.setSpookParams(c.contactEquationStiffness,c.contactEquationRelaxation,this.world.dt);let l=r.material||e.material,u=i.material||n.material;return l&&u&&l.restitution>=0&&u.restitution>=0&&(a.restitution=l.restitution*u.restitution),a.si=o||r,a.sj=s||i,a}createFrictionEquationsFromContact(e,n){let r=e.bi,i=e.bj,o=e.si,s=e.sj,a=this.world,c=this.currentContactMaterial,l=c.friction,u=o.material||r.material,d=s.material||i.material;if(u&&d&&u.friction>=0&&d.friction>=0&&(l=u.friction*d.friction),l>0){let f=l*(a.frictionGravity||a.gravity).length(),h=r.invMass+i.invMass;h>0&&(h=1/h);let p=this.frictionEquationPool,g=p.length?p.pop():new fg(r,i,f*h),y=p.length?p.pop():new fg(r,i,f*h);return g.bi=y.bi=r,g.bj=y.bj=i,g.minForce=y.minForce=-f*h,g.maxForce=y.maxForce=f*h,g.ri.copy(e.ri),g.rj.copy(e.rj),y.ri.copy(e.ri),y.rj.copy(e.rj),e.ni.tangents(g.t,y.t),g.setSpookParams(c.frictionEquationStiffness,c.frictionEquationRelaxation,a.dt),y.setSpookParams(c.frictionEquationStiffness,c.frictionEquationRelaxation,a.dt),g.enabled=y.enabled=e.enabled,n.push(g,y),!0}return!1}createFrictionFromAverage(e){let n=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(n,this.frictionResult)||e===1)return;let r=this.frictionResult[this.frictionResult.length-2],i=this.frictionResult[this.frictionResult.length-1];ws.setZero(),Ac.setZero(),Ic.setZero();let o=n.bi;n.bj;for(let a=0;a!==e;a++)n=this.result[this.result.length-1-a],n.bi!==o?(ws.vadd(n.ni,ws),Ac.vadd(n.ri,Ac),Ic.vadd(n.rj,Ic)):(ws.vsub(n.ni,ws),Ac.vadd(n.rj,Ac),Ic.vadd(n.ri,Ic));let s=1/e;Ac.scale(s,r.ri),Ic.scale(s,r.rj),i.ri.copy(r.ri),i.rj.copy(r.rj),ws.normalize(),ws.tangents(r.t,i.t)}getContacts(e,n,r,i,o,s,a){this.contactPointPool=o,this.frictionEquationPool=a,this.result=i,this.frictionResult=s;let c=OJ,l=LJ,u=RJ,d=NJ;for(let f=0,h=e.length;f!==h;f++){let p=e[f],g=n[f],y=null;p.material&&g.material&&(y=r.getContactMaterial(p.material,g.material)||null);let _=p.type&Ye.KINEMATIC&&g.type&Ye.STATIC||p.type&Ye.STATIC&&g.type&Ye.KINEMATIC||p.type&Ye.KINEMATIC&&g.type&Ye.KINEMATIC;for(let E=0;E<p.shapes.length;E++){p.quaternion.mult(p.shapeOrientations[E],c),p.quaternion.vmult(p.shapeOffsets[E],u),u.vadd(p.position,u);let A=p.shapes[E];for(let I=0;I<g.shapes.length;I++){g.quaternion.mult(g.shapeOrientations[I],l),g.quaternion.vmult(g.shapeOffsets[I],d),d.vadd(g.position,d);let C=g.shapes[I];if(!(A.collisionFilterMask&C.collisionFilterGroup&&C.collisionFilterMask&A.collisionFilterGroup)||u.distanceTo(d)>A.boundingSphereRadius+C.boundingSphereRadius)continue;let D=null;A.material&&C.material&&(D=r.getContactMaterial(A.material,C.material)||null),this.currentContactMaterial=D||y||r.defaultContactMaterial;let F=A.type|C.type,z=this[F];if(z){let j=!1;A.type<C.type?j=z.call(this,A,C,u,d,c,l,p,g,A,C,_):j=z.call(this,C,A,d,u,l,c,g,p,A,C,_),j&&_&&(r.shapeOverlapKeeper.set(A.id,C.id),r.bodyOverlapKeeper.set(p.id,g.id))}}}}}sphereSphere(e,n,r,i,o,s,a,c,l,u,d){if(d)return r.distanceSquared(i)<(e.radius+n.radius)**2;let f=this.createContactEquation(a,c,e,n,l,u);i.vsub(r,f.ni),f.ni.normalize(),f.ri.copy(f.ni),f.rj.copy(f.ni),f.ri.scale(e.radius,f.ri),f.rj.scale(-n.radius,f.rj),f.ri.vadd(r,f.ri),f.ri.vsub(a.position,f.ri),f.rj.vadd(i,f.rj),f.rj.vsub(c.position,f.rj),this.result.push(f),this.createFrictionEquationsFromContact(f,this.frictionResult)}spherePlane(e,n,r,i,o,s,a,c,l,u,d){let f=this.createContactEquation(a,c,e,n,l,u);if(f.ni.set(0,0,1),s.vmult(f.ni,f.ni),f.ni.negate(f.ni),f.ni.normalize(),f.ni.scale(e.radius,f.ri),r.vsub(i,lg),f.ni.scale(f.ni.dot(lg),gk),lg.vsub(gk,f.rj),-lg.dot(f.ni)<=e.radius){if(d)return!0;let h=f.ri,p=f.rj;h.vadd(r,h),h.vsub(a.position,h),p.vadd(i,p),p.vsub(c.position,p),this.result.push(f),this.createFrictionEquationsFromContact(f,this.frictionResult)}}boxBox(e,n,r,i,o,s,a,c,l,u,d){return e.convexPolyhedronRepresentation.material=e.material,n.convexPolyhedronRepresentation.material=n.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,n.convexPolyhedronRepresentation.collisionResponse=n.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,n.convexPolyhedronRepresentation,r,i,o,s,a,c,e,n,d)}sphereBox(e,n,r,i,o,s,a,c,l,u,d){let f=this.v3pool,h=aY;r.vsub(i,ug),n.getSideNormals(h,s);let p=e.radius,g=!1,y=lY,_=uY,E=dY,A=null,I=0,C=0,D=0,F=null;for(let q=0,Ie=h.length;q!==Ie&&g===!1;q++){let de=iY;de.copy(h[q]);let _e=de.length();de.normalize();let rn=ug.dot(de);if(rn<_e+p&&rn>0){let ct=oY,ne=sY;ct.copy(h[(q+1)%3]),ne.copy(h[(q+2)%3]);let Zn=ct.length(),Ds=ne.length();ct.normalize(),ne.normalize();let $c=ug.dot(ct),nt=ug.dot(ne);if($c<Zn&&$c>-Zn&&nt<Ds&&nt>-Ds){let qn=Math.abs(rn-_e-p);if((F===null||qn<F)&&(F=qn,C=$c,D=nt,A=_e,y.copy(de),_.copy(ct),E.copy(ne),I++,d))return!0}}}if(I){g=!0;let q=this.createContactEquation(a,c,e,n,l,u);y.scale(-p,q.ri),q.ni.copy(y),q.ni.negate(q.ni),y.scale(A,y),_.scale(C,_),y.vadd(_,y),E.scale(D,E),y.vadd(E,q.rj),q.ri.vadd(r,q.ri),q.ri.vsub(a.position,q.ri),q.rj.vadd(i,q.rj),q.rj.vsub(c.position,q.rj),this.result.push(q),this.createFrictionEquationsFromContact(q,this.frictionResult)}let z=f.get(),j=cY;for(let q=0;q!==2&&!g;q++)for(let Ie=0;Ie!==2&&!g;Ie++)for(let de=0;de!==2&&!g;de++)if(z.set(0,0,0),q?z.vadd(h[0],z):z.vsub(h[0],z),Ie?z.vadd(h[1],z):z.vsub(h[1],z),de?z.vadd(h[2],z):z.vsub(h[2],z),i.vadd(z,j),j.vsub(r,j),j.lengthSquared()<p*p){if(d)return!0;g=!0;let _e=this.createContactEquation(a,c,e,n,l,u);_e.ri.copy(j),_e.ri.normalize(),_e.ni.copy(_e.ri),_e.ri.scale(p,_e.ri),_e.rj.copy(z),_e.ri.vadd(r,_e.ri),_e.ri.vsub(a.position,_e.ri),_e.rj.vadd(i,_e.rj),_e.rj.vsub(c.position,_e.rj),this.result.push(_e),this.createFrictionEquationsFromContact(_e,this.frictionResult)}f.release(z),z=null;let k=f.get(),B=f.get(),W=f.get(),O=f.get(),Z=f.get(),J=h.length;for(let q=0;q!==J&&!g;q++)for(let Ie=0;Ie!==J&&!g;Ie++)if(q%3!==Ie%3){h[Ie].cross(h[q],k),k.normalize(),h[q].vadd(h[Ie],B),W.copy(r),W.vsub(B,W),W.vsub(i,W);let de=W.dot(k);k.scale(de,O);let _e=0;for(;_e===q%3||_e===Ie%3;)_e++;Z.copy(r),Z.vsub(O,Z),Z.vsub(B,Z),Z.vsub(i,Z);let rn=Math.abs(de),ct=Z.length();if(rn<h[_e].length()&&ct<p){if(d)return!0;g=!0;let ne=this.createContactEquation(a,c,e,n,l,u);B.vadd(O,ne.rj),ne.rj.copy(ne.rj),Z.negate(ne.ni),ne.ni.normalize(),ne.ri.copy(ne.rj),ne.ri.vadd(i,ne.ri),ne.ri.vsub(r,ne.ri),ne.ri.normalize(),ne.ri.scale(p,ne.ri),ne.ri.vadd(r,ne.ri),ne.ri.vsub(a.position,ne.ri),ne.rj.vadd(i,ne.rj),ne.rj.vsub(c.position,ne.rj),this.result.push(ne),this.createFrictionEquationsFromContact(ne,this.frictionResult)}}f.release(k,B,W,O,Z)}planeBox(e,n,r,i,o,s,a,c,l,u,d){return n.convexPolyhedronRepresentation.material=n.material,n.convexPolyhedronRepresentation.collisionResponse=n.collisionResponse,n.convexPolyhedronRepresentation.id=n.id,this.planeConvex(e,n.convexPolyhedronRepresentation,r,i,o,s,a,c,e,n,d)}convexConvex(e,n,r,i,o,s,a,c,l,u,d,f,h){let p=TY;if(!(r.distanceTo(i)>e.boundingSphereRadius+n.boundingSphereRadius)&&e.findSeparatingAxis(n,r,o,i,s,p,f,h)){let g=[],y=SY;e.clipAgainstHull(r,o,n,i,s,p,-100,100,g);let _=0;for(let E=0;E!==g.length;E++){if(d)return!0;let A=this.createContactEquation(a,c,e,n,l,u),I=A.ri,C=A.rj;p.negate(A.ni),g[E].normal.negate(y),y.scale(g[E].depth,y),g[E].point.vadd(y,I),C.copy(g[E].point),I.vsub(r,I),C.vsub(i,C),I.vadd(r,I),I.vsub(a.position,I),C.vadd(i,C),C.vsub(c.position,C),this.result.push(A),_++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(A,this.frictionResult)}this.enableFrictionReduction&&_&&this.createFrictionFromAverage(_)}}sphereConvex(e,n,r,i,o,s,a,c,l,u,d){let f=this.v3pool;r.vsub(i,fY);let h=n.faceNormals,p=n.faces,g=n.vertices,y=e.radius,_=!1;for(let E=0;E!==g.length;E++){let A=g[E],I=gY;s.vmult(A,I),i.vadd(I,I);let C=mY;if(I.vsub(r,C),C.lengthSquared()<y*y){if(d)return!0;_=!0;let D=this.createContactEquation(a,c,e,n,l,u);D.ri.copy(C),D.ri.normalize(),D.ni.copy(D.ri),D.ri.scale(y,D.ri),I.vsub(i,D.rj),D.ri.vadd(r,D.ri),D.ri.vsub(a.position,D.ri),D.rj.vadd(i,D.rj),D.rj.vsub(c.position,D.rj),this.result.push(D),this.createFrictionEquationsFromContact(D,this.frictionResult);return}}for(let E=0,A=p.length;E!==A&&_===!1;E++){let I=h[E],C=p[E],D=vY;s.vmult(I,D);let F=yY;s.vmult(g[C[0]],F),F.vadd(i,F);let z=_Y;D.scale(-y,z),r.vadd(z,z);let j=bY;z.vsub(F,j);let k=j.dot(D),B=xY;if(r.vsub(F,B),k<0&&B.dot(D)>0){let W=[];for(let O=0,Z=C.length;O!==Z;O++){let J=f.get();s.vmult(g[C[O]],J),i.vadd(J,J),W.push(J)}if(rY(W,D,r)){if(d)return!0;_=!0;let O=this.createContactEquation(a,c,e,n,l,u);D.scale(-y,O.ri),D.negate(O.ni);let Z=f.get();D.scale(-k,Z);let J=f.get();D.scale(-y,J),r.vsub(i,O.rj),O.rj.vadd(J,O.rj),O.rj.vadd(Z,O.rj),O.rj.vadd(i,O.rj),O.rj.vsub(c.position,O.rj),O.ri.vadd(r,O.ri),O.ri.vsub(a.position,O.ri),f.release(Z),f.release(J),this.result.push(O),this.createFrictionEquationsFromContact(O,this.frictionResult);for(let q=0,Ie=W.length;q!==Ie;q++)f.release(W[q]);return}else for(let O=0;O!==C.length;O++){let Z=f.get(),J=f.get();s.vmult(g[C[(O+1)%C.length]],Z),s.vmult(g[C[(O+2)%C.length]],J),i.vadd(Z,Z),i.vadd(J,J);let q=hY;J.vsub(Z,q);let Ie=pY;q.unit(Ie);let de=f.get(),_e=f.get();r.vsub(Z,_e);let rn=_e.dot(Ie);Ie.scale(rn,de),de.vadd(Z,de);let ct=f.get();if(de.vsub(r,ct),rn>0&&rn*rn<q.lengthSquared()&&ct.lengthSquared()<y*y){if(d)return!0;let ne=this.createContactEquation(a,c,e,n,l,u);de.vsub(i,ne.rj),de.vsub(r,ne.ni),ne.ni.normalize(),ne.ni.scale(y,ne.ri),ne.rj.vadd(i,ne.rj),ne.rj.vsub(c.position,ne.rj),ne.ri.vadd(r,ne.ri),ne.ri.vsub(a.position,ne.ri),this.result.push(ne),this.createFrictionEquationsFromContact(ne,this.frictionResult);for(let Zn=0,Ds=W.length;Zn!==Ds;Zn++)f.release(W[Zn]);f.release(Z),f.release(J),f.release(de),f.release(ct),f.release(_e);return}f.release(Z),f.release(J),f.release(de),f.release(ct),f.release(_e)}for(let O=0,Z=W.length;O!==Z;O++)f.release(W[O])}}}planeConvex(e,n,r,i,o,s,a,c,l,u,d){let f=EY,h=wY;h.set(0,0,1),o.vmult(h,h);let p=0,g=AY;for(let y=0;y!==n.vertices.length;y++)if(f.copy(n.vertices[y]),s.vmult(f,f),i.vadd(f,f),f.vsub(r,g),h.dot(g)<=0){if(d)return!0;let E=this.createContactEquation(a,c,e,n,l,u),A=IY;h.scale(h.dot(g),A),f.vsub(A,A),A.vsub(r,E.ri),E.ni.copy(h),f.vsub(i,E.rj),E.ri.vadd(r,E.ri),E.ri.vsub(a.position,E.ri),E.rj.vadd(i,E.rj),E.rj.vsub(c.position,E.rj),this.result.push(E),p++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(E,this.frictionResult)}this.enableFrictionReduction&&p&&this.createFrictionFromAverage(p)}boxConvex(e,n,r,i,o,s,a,c,l,u,d){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,n,r,i,o,s,a,c,e,n,d)}sphereHeightfield(e,n,r,i,o,s,a,c,l,u,d){let f=n.data,h=e.radius,p=n.elementSize,g=jY,y=FY;we.pointToLocalFrame(i,s,r,y);let _=Math.floor((y.x-h)/p)-1,E=Math.ceil((y.x+h)/p)+1,A=Math.floor((y.y-h)/p)-1,I=Math.ceil((y.y+h)/p)+1;if(E<0||I<0||_>f.length||A>f[0].length)return;_<0&&(_=0),E<0&&(E=0),A<0&&(A=0),I<0&&(I=0),_>=f.length&&(_=f.length-1),E>=f.length&&(E=f.length-1),I>=f[0].length&&(I=f[0].length-1),A>=f[0].length&&(A=f[0].length-1);let C=[];n.getRectMinMax(_,A,E,I,C);let D=C[0],F=C[1];if(y.z-h>F||y.z+h<D)return;let z=this.result;for(let j=_;j<E;j++)for(let k=A;k<I;k++){let B=z.length,W=!1;if(n.getConvexTrianglePillar(j,k,!1),we.pointToWorldFrame(i,s,n.pillarOffset,g),r.distanceTo(g)<n.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(W=this.sphereConvex(e,n.pillarConvex,r,g,o,s,a,c,e,n,d)),d&&W||(n.getConvexTrianglePillar(j,k,!0),we.pointToWorldFrame(i,s,n.pillarOffset,g),r.distanceTo(g)<n.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(W=this.sphereConvex(e,n.pillarConvex,r,g,o,s,a,c,e,n,d)),d&&W))return!0;if(z.length-B>2)return}}boxHeightfield(e,n,r,i,o,s,a,c,l,u,d){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexHeightfield(e.convexPolyhedronRepresentation,n,r,i,o,s,a,c,e,n,d)}convexHeightfield(e,n,r,i,o,s,a,c,l,u,d){let f=n.data,h=n.elementSize,p=e.boundingSphereRadius,g=BY,y=kY,_=LY;we.pointToLocalFrame(i,s,r,_);let E=Math.floor((_.x-p)/h)-1,A=Math.ceil((_.x+p)/h)+1,I=Math.floor((_.y-p)/h)-1,C=Math.ceil((_.y+p)/h)+1;if(A<0||C<0||E>f.length||I>f[0].length)return;E<0&&(E=0),A<0&&(A=0),I<0&&(I=0),C<0&&(C=0),E>=f.length&&(E=f.length-1),A>=f.length&&(A=f.length-1),C>=f[0].length&&(C=f[0].length-1),I>=f[0].length&&(I=f[0].length-1);let D=[];n.getRectMinMax(E,I,A,C,D);let F=D[0],z=D[1];if(!(_.z-p>z||_.z+p<F))for(let j=E;j<A;j++)for(let k=I;k<C;k++){let B=!1;if(n.getConvexTrianglePillar(j,k,!1),we.pointToWorldFrame(i,s,n.pillarOffset,g),r.distanceTo(g)<n.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(B=this.convexConvex(e,n.pillarConvex,r,g,o,s,a,c,null,null,d,y,null)),d&&B||(n.getConvexTrianglePillar(j,k,!0),we.pointToWorldFrame(i,s,n.pillarOffset,g),r.distanceTo(g)<n.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(B=this.convexConvex(e,n.pillarConvex,r,g,o,s,a,c,null,null,d,y,null)),d&&B))return!0}}sphereParticle(e,n,r,i,o,s,a,c,l,u,d){let f=PY;if(f.set(0,0,1),i.vsub(r,f),f.lengthSquared()<=e.radius*e.radius){if(d)return!0;let p=this.createContactEquation(c,a,n,e,l,u);f.normalize(),p.rj.copy(f),p.rj.scale(e.radius,p.rj),p.ni.copy(f),p.ni.negate(p.ni),p.ri.set(0,0,0),this.result.push(p),this.createFrictionEquationsFromContact(p,this.frictionResult)}}planeParticle(e,n,r,i,o,s,a,c,l,u,d){let f=CY;f.set(0,0,1),a.quaternion.vmult(f,f);let h=MY;if(i.vsub(a.position,h),f.dot(h)<=0){if(d)return!0;let g=this.createContactEquation(c,a,n,e,l,u);g.ni.copy(f),g.ni.negate(g.ni),g.ri.set(0,0,0);let y=DY;f.scale(f.dot(i),y),i.vsub(y,y),g.rj.copy(y),this.result.push(g),this.createFrictionEquationsFromContact(g,this.frictionResult)}}boxParticle(e,n,r,i,o,s,a,c,l,u,d){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexParticle(e.convexPolyhedronRepresentation,n,r,i,o,s,a,c,e,n,d)}convexParticle(e,n,r,i,o,s,a,c,l,u,d){let f=-1,h=NY,p=OY,g=null,y=RY;if(y.copy(i),y.vsub(r,y),o.conjugate(vk),vk.vmult(y,y),e.pointIsInside(y)){e.worldVerticesNeedsUpdate&&e.computeWorldVertices(r,o),e.worldFaceNormalsNeedsUpdate&&e.computeWorldFaceNormals(o);for(let _=0,E=e.faces.length;_!==E;_++){let A=[e.worldVertices[e.faces[_][0]]],I=e.worldFaceNormals[_];i.vsub(A[0],yk);let C=-I.dot(yk);if(g===null||Math.abs(C)<Math.abs(g)){if(d)return!0;g=C,f=_,h.copy(I)}}if(f!==-1){let _=this.createContactEquation(c,a,n,e,l,u);h.scale(g,p),p.vadd(i,p),p.vsub(r,p),_.rj.copy(p),h.negate(_.ni),_.ri.set(0,0,0);let E=_.ri,A=_.rj;E.vadd(i,E),E.vsub(c.position,E),A.vadd(r,A),A.vsub(a.position,A),this.result.push(_),this.createFrictionEquationsFromContact(_,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}}heightfieldCylinder(e,n,r,i,o,s,a,c,l,u,d){return this.convexHeightfield(n,e,i,r,s,o,c,a,l,u,d)}particleCylinder(e,n,r,i,o,s,a,c,l,u,d){return this.convexParticle(n,e,i,r,s,o,c,a,l,u,d)}sphereTrimesh(e,n,r,i,o,s,a,c,l,u,d){let f=$J,h=GJ,p=HJ,g=WJ,y=ZJ,_=qJ,E=KJ,A=VJ,I=UJ,C=QJ;we.pointToLocalFrame(i,s,r,y);let D=e.radius;E.lowerBound.set(y.x-D,y.y-D,y.z-D),E.upperBound.set(y.x+D,y.y+D,y.z+D),n.getTrianglesInAABB(E,C);let F=zJ,z=e.radius*e.radius;for(let O=0;O<C.length;O++)for(let Z=0;Z<3;Z++)if(n.getVertex(n.indices[C[O]*3+Z],F),F.vsub(y,I),I.lengthSquared()<=z){if(A.copy(F),we.pointToWorldFrame(i,s,A,F),F.vsub(r,I),d)return!0;let J=this.createContactEquation(a,c,e,n,l,u);J.ni.copy(I),J.ni.normalize(),J.ri.copy(J.ni),J.ri.scale(e.radius,J.ri),J.ri.vadd(r,J.ri),J.ri.vsub(a.position,J.ri),J.rj.copy(F),J.rj.vsub(c.position,J.rj),this.result.push(J),this.createFrictionEquationsFromContact(J,this.frictionResult)}for(let O=0;O<C.length;O++)for(let Z=0;Z<3;Z++){n.getVertex(n.indices[C[O]*3+Z],f),n.getVertex(n.indices[C[O]*3+(Z+1)%3],h),h.vsub(f,p),y.vsub(h,_);let J=_.dot(p);y.vsub(f,_);let q=_.dot(p);if(q>0&&J<0&&(y.vsub(f,_),g.copy(p),g.normalize(),q=_.dot(g),g.scale(q,_),_.vadd(f,_),_.distanceTo(y)<e.radius)){if(d)return!0;let de=this.createContactEquation(a,c,e,n,l,u);_.vsub(y,de.ni),de.ni.normalize(),de.ni.scale(e.radius,de.ri),de.ri.vadd(r,de.ri),de.ri.vsub(a.position,de.ri),we.pointToWorldFrame(i,s,_,_),_.vsub(c.position,de.rj),we.vectorToWorldFrame(s,de.ni,de.ni),we.vectorToWorldFrame(s,de.ri,de.ri),this.result.push(de),this.createFrictionEquationsFromContact(de,this.frictionResult)}}let j=XJ,k=JJ,B=YJ,W=jJ;for(let O=0,Z=C.length;O!==Z;O++){n.getTriangleVertices(C[O],j,k,B),n.getNormal(C[O],W),y.vsub(j,_);let J=_.dot(W);if(W.scale(J,_),y.vsub(_,_),J=_.distanceTo(y),ii.pointInTriangle(_,j,k,B)&&J<e.radius){if(d)return!0;let q=this.createContactEquation(a,c,e,n,l,u);_.vsub(y,q.ni),q.ni.normalize(),q.ni.scale(e.radius,q.ri),q.ri.vadd(r,q.ri),q.ri.vsub(a.position,q.ri),we.pointToWorldFrame(i,s,_,_),_.vsub(c.position,q.rj),we.vectorToWorldFrame(s,q.ni,q.ni),we.vectorToWorldFrame(s,q.ri,q.ri),this.result.push(q),this.createFrictionEquationsFromContact(q,this.frictionResult)}}C.length=0}planeTrimesh(e,n,r,i,o,s,a,c,l,u,d){let f=new x,h=BJ;h.set(0,0,1),o.vmult(h,h);for(let p=0;p<n.vertices.length/3;p++){n.getVertex(p,f);let g=new x;g.copy(f),we.pointToWorldFrame(i,s,g,f);let y=kJ;if(f.vsub(r,y),h.dot(y)<=0){if(d)return!0;let E=this.createContactEquation(a,c,e,n,l,u);E.ni.copy(h);let A=FJ;h.scale(y.dot(h),A),f.vsub(A,A),E.ri.copy(A),E.ri.vsub(a.position,E.ri),E.rj.copy(f),E.rj.vsub(c.position,E.rj),this.result.push(E),this.createFrictionEquationsFromContact(E,this.frictionResult)}}}},ws=new x,Ac=new x,Ic=new x,RJ=new x,NJ=new x,OJ=new Ot,LJ=new Ot,BJ=new x,kJ=new x,FJ=new x,jJ=new x,UJ=new x;new x;var zJ=new x,VJ=new x,$J=new x,GJ=new x,HJ=new x,WJ=new x,ZJ=new x,qJ=new x,XJ=new x,JJ=new x,YJ=new x,KJ=new pt,QJ=[],lg=new x,gk=new x,eY=new x,tY=new x,nY=new x;function rY(t,e,n){let r=null,i=t.length;for(let o=0;o!==i;o++){let s=t[o],a=eY;t[(o+1)%i].vsub(s,a);let c=tY;a.cross(e,c);let l=nY;n.vsub(s,l);let u=c.dot(l);if(r===null||u>0&&r===!0||u<=0&&r===!1){r===null&&(r=u>0);continue}else return!1}return!0}var ug=new x,iY=new x,oY=new x,sY=new x,aY=[new x,new x,new x,new x,new x,new x],cY=new x,lY=new x,uY=new x,dY=new x,fY=new x,hY=new x,pY=new x,mY=new x,gY=new x,vY=new x,yY=new x,_Y=new x,bY=new x,xY=new x;new x;new x;var EY=new x,wY=new x,AY=new x,IY=new x,TY=new x,SY=new x,CY=new x,MY=new x,DY=new x,PY=new x,vk=new Ot,RY=new x;new x;var NY=new x,yk=new x,OY=new x,LY=new x,BY=new x,kY=[0],FY=new x,jY=new x;new pt;var rVe=new ii,Wu=globalThis.performance||{};if(!Wu.now){let t=Date.now();Wu.timing&&Wu.timing.navigationStart&&(t=Wu.timing.navigationStart),Wu.now=()=>Date.now()-t}new x;var iVe={type:Ye.COLLIDE_EVENT_NAME,body:null,contact:null};function Sk(t){return R(this,null,function*(){console.log("Starting Collisioning");let e=t.filter(s=>!s.scenegraph&&s.geometry!=="wireframe").map(s=>{let a=new Q(s.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":s["@id"],name:s.tooltip,entityId:s.entityId,bbox:new pt({lowerBound:new x(...c.map((u,d)=>Math.min(u,l[d]))),upperBound:new x(...l.map((u,d)=>Math.max(u,c[d])))})}}),n=[];for(let s of t.filter(a=>!!a.scenegraph)){let a=yield cr(s.scenegraph,Tr,{DracoLoader:Ec,decompress:!0,postProcess:!0});for(let c of a.scenes??[])Xi(c,new Q(s.transformMatrix),(l,u)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0){for(let d of l.mesh.primitives)if(d.attributes.POSITION&&d.attributes.POSITION.min){let f=u.transformAsPoint(d.attributes.POSITION.min,[]),h=u.transformAsPoint(d.attributes.POSITION.max,[]);n.push({"@id":s["@id"],name:l.name,entityId:s.entityId,bbox:new pt({lowerBound:new x(...f.map((p,g)=>Math.min(p,h[g]))),upperBound:new x(...h.map((p,g)=>Math.max(p,f[g])))}),gltf:a})}}return!0})}let r=[],i=[];for(let s of e){let a=[];for(let c of n)s.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?r.push({"@id":s.entityId,name:s.name,hits:a}):i.push(s)}console.log({sourceBoxes:e,targetBoxes:n,report:r,sad:i,maxHits:Math.max(...r.map(s=>s.hits.length))});let o=[];for(let s of r){o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":"","Hit Name":""});for(let a of s.hits)o.push({"Tissue ID":s["@id"],"Tissue Name":s.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(o),r})}function D0(t,e,n){if(!e||e.length===0)return;let r;switch(n.geometry){case"sphere":r=new $a;break;case"cone":r=new Ua;break;case"cylinder":r=new Va;break;case"cube":default:r=new za;break}return new ps(v({id:t,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:le.CARTESIAN,data:e,mesh:r,wireframe:!1,getColor:i=>i.color||[255,255,255,.9*255],getTransformMatrix:i=>i.transformMatrix},n))}function Ck(t,e,n){if(!(!e||e.length===0))return new hs(v({id:t,pickable:!0,data:e.map(r=>S(v({},r),{position:new Q(r.transformMatrix).getTranslation()})),getText:r=>r.text,getPosition:r=>r.position,getColor:r=>r.color},n))}var Mk=(()=>{let e=class e extends Zi{initializeState(){let{data:r}=this.props;this.setState({data:r??[],zoomOpacity:.8,doCollisions:!1}),og()}renderLayers(){let r=this.state,i={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(let a of r.data){let c=a.geometry??"cube";a.scenegraph?i.scenegraph.push(a):i[c]!==void 0&&i[c].push(a)}let o={};for(let a of i.scenegraph)a.scenegraph&&a.scenegraphNode&&!Object.prototype.hasOwnProperty.call(o,a.scenegraph)&&(o[a.scenegraph]=Gu({scenegraph:a.scenegraph},e.gltfCache));let s=[];for(let[a,c]of Object.entries(i))if(a==="scenegraph")for(let l of c)s.push(new Es({id:"models-"+l["@id"],opacity:l.zoomBasedOpacity?r.zoomOpacity:l.opacity??1,pickable:!l.unpickable,coordinateSystem:le.CARTESIAN,data:[l],scenegraph:l.scenegraphNode?rk(l.scenegraphNode,o[l.scenegraph]):l.scenegraph,_lighting:l._lighting,getTransformMatrix:l.transformMatrix,getColor:l.color??[0,255,0,.5*255],parameters:{depthMask:!l.zoomBasedOpacity&&(l.opacity===void 0||l.opacity===1)}}));else a==="text"?(s.push(Ck("text",c.filter(l=>l.unpickable),{pickable:!1})),s.push(Ck("textPickable",c.filter(l=>!l.unpickable),{pickable:!0}))):a==="wireframe"?s.push(D0(a,c,{wireframe:!0,pickable:!1,geometry:a})):(s.push(D0(a,c.filter(l=>l.unpickable),{wireframe:!1,pickable:!1,geometry:a})),s.push(D0(`${a}Pickable`,c.filter(l=>!l.unpickable),{wireframe:!1,pickable:!0,geometry:a})));return r.doCollisions&&Sk(r.data),s.filter(a=>!!a)}getPickingInfo(r){return r.info}};e.layerName="BodyUILayer",e.gltfCache={};let t=e;return t})();function Dk(t,e=[]){for(let n of t.nodes||t.children||[])e.push(n.name),Dk(n,e);return e}function Pk(t,e,n,r){return R(this,null,function*(){og();let i=yield Gu({scenegraph:t,scenegraphNode:n},r),o={},s=[];e=new Q(e??Q.IDENTITY);for(let a of i.scenes)Xi(a,e,(c,l)=>{let u={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new Q(l),geometry:"wireframe",node:c};if(s.push({"@id":`GLTF:${u["@id"]}`,"@type":"GLTFNode",scenegraph:t,scenegraphNode:u["@id"],transformMatrix:new Q(e||Q.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0){for(let d of c.mesh.primitives)if(d.attributes.POSITION&&d.attributes.POSITION.min){let f=l.transformAsPoint(d.attributes.POSITION.min,[]),h=l.transformAsPoint(d.attributes.POSITION.max,[]);u.bbox=new pt({lowerBound:new x(...f.map((p,g)=>Math.min(p,h[g]))),upperBound:new x(...h.map((p,g)=>Math.max(p,f[g])))})}}return o[u["@id"]]=u,!0});for(let a of Object.values(o).filter(c=>!c.bbox)){for(let c of Dk(a.node).map(l=>o[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete o[a["@id"]]}for(let a of Object.values(o)){let c=a.bbox.lowerBound,l=a.bbox.upperBound,d=(a.size=l.clone().vsub(c)).clone().vmul(new x(.5,.5,.5)),f=a.center=c.clone().vadd(d);a.transformMatrix=new Q(Q.IDENTITY).translate(f.toArray()).scale(d.toArray())}for(let a of s)o[a["@id"]]=a;return o})}var hg=class{constructor(e){this.deckProps=e,this.bodyUILayer=new Mk({}),this.nodeClickSubject=new Ze,this.nodeHoverStartSubject=new Ze,this.nodeHoverStopSubject=new Ze,this.sceneRotationSubject=new po([0,0]),this.nodeDragStartSubject=new Ze,this.nodeDragSubject=new Ze,this.nodeDragEndSubject=new Ze,this.nodeClick$=this.nodeClickSubject.pipe(Or()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(Or()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(Or()),this.sceneRotation$=this.sceneRotationSubject.pipe(Or()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(Or()),this.nodeDrag$=this.nodeDragSubject.pipe(Or()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(Or()),this._onHover=r=>{let{lastHovered:i}=this;this.cursor=r.picked?"pointer":void 0,r.picked&&r.object?.["@id"]?i!==r.object&&(i&&this.nodeHoverStopSubject.next(i),this.lastHovered=r.object,this.nodeHoverStartSubject.next(r.object)):i&&(this.nodeHoverStopSubject.next(i),this.lastHovered=void 0)},this._onClick=(r,i)=>{r.picked&&r.object?.["@id"]&&this.nodeClickSubject.next({node:r.object,ctrlClick:i?.srcEvent?.ctrlKey??void 0})},this._onViewStateChange=r=>{if(r.interactionState?.isZooming){let i=this.bodyUILayer.state,o=Math.min(Math.max(1-(r.viewState.zoom-8.9)/2,.05),1);i.zoomOpacity!==o&&this.bodyUILayer.setState({data:i.data,zoomOpacity:o})}this.deck.setProps({viewState:v({},r.viewState)}),this.sceneRotationSubject.next([r.viewState.rotationOrbit,r.viewState.rotationX])},this._onDragStart=(r,i)=>{this._dragEvent(r,i,this.nodeDragStartSubject)},this._onDrag=(r,i)=>{this._dragEvent(r,i,this.nodeDragSubject)},this._onDragEnd=(r,i)=>{this._dragEvent(r,i,this.nodeDragEndSubject)};let n=S(v({},e),{views:[e.camera==="orthographic"?new Hi({flipY:!1,near:-1e3}):new ic({orbitAxis:"Y"})],controller:e.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:r=>this.cursor??(r.isDragging?"grabbing":"grab")});e.legacyLighting&&(n.effects=[new Ui({ambientLight:new as({color:[255,255,255],intensity:10})})]),this.deck=new fs(n),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:e.minRotationX??-15,maxRotationX:e.maxRotationX??15,target:e.target??[.5,.5,0],rotationX:0,rotationOrbit:e.rotation??0,zoom:e.zoom??9.5,camera:e.camera}}),e.rotation&&this.sceneRotationSubject.next([e.rotation,0])}initialize(){return R(this,null,function*(){for(;!this.bodyUILayer.state;)yield new Promise(e=>{setTimeout(e,200)})})}finalize(){this.deck.finalize()}setScene(e){let n=this.bodyUILayer.state.zoomOpacity,r=!1;for(let i of e)i.zoomToOnLoad&&(this.zoomTo(i),r=!0);n=r?.05:n,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(e,n):this.bodyUILayer.setState({data:e,zoomOpacity:n})}debugSceneNodeProcessing(e,n){let r="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",i=new Q([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);Pk(r,i,"VHF_Kidney_L_Low1").then(o=>{console.log("results",o),console.log("data",e),e=e.concat(Object.values(o)),e.push({"@id":"TEST","@type":"TEST",scenegraph:r,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:i,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:e,zoomOpacity:n})})}zoomTo(e){let n=new Q(e.transformMatrix);this.deck.setProps({viewState:S(v({},this.deck.props.viewState),{target:n.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5})})}setRotation(e){this.deck.setProps({viewState:S(v({},this.deck.props.viewState),{rotationOrbit:e})})}setRotationX(e){this.deck.setProps({viewState:S(v({},this.deck.props.viewState),{rotationX:e})})}setZoom(e){this.deck.setProps({viewState:S(v({},this.deck.props.viewState),{zoom:e})})}setTarget(e){this.deck.setProps({viewState:S(v({},this.deck.props.viewState),{target:e})})}setInteractive(e){this.deck.setProps({controller:e})}_dragEvent(e,n,r){e?.object?.["@id"]&&r.next({node:e.object,info:e,e:n})}};function Rk(t,e,n){!e&&Ry(t);let r=e??te(St);return n?vi(r,n):r}function pg(t,e={}){return Rk(pg,e?.injector,()=>{let n=te(nr),r=new Ze,o=VY(r,e?.behavior??"switch").subscribe({next:c=>s.set({kind:1,value:c}),error:c=>s.set({kind:2,error:c})});n.onDestroy(()=>o.unsubscribe());let s;if(e?.requireSync&&e?.initialValue===void 0){let c=t(void 0);if(Nk(c))throw new Error(UY);s=Mo({kind:0}),$s(c)?r.next(c):s.set({kind:1,value:c})}else s=Mo({kind:1,value:e?.initialValue});if(e?.requireSync&&s().kind===0)throw new Error(zY);let a=e?.requireSync===!0;return Bo(()=>{let c=Ml(()=>{let u=s();return u.kind===1?u.value:void 0}),l=t(c);if(a){a=!1;return}Ml(()=>{r.next($s(l)||Nk(l)?l:pi(l))})}),aa(()=>{let c=s();switch(c.kind){case 1:return c.value;case 2:throw c.error;case 0:return;default:throw new Error("Unknown state")}},{equal:e?.equal})})}var UY="Promises cannot be used with requireSync. Pass an initialValue or set requireSync to false.",zY="The observable passed to derivedAsync() did not emit synchronously. Pass an initialValue or set requireSync to false.";function VY(t,e){let n={merge:go,concat:Kv,exhaust:ty,switch:iy};return t.pipe(n[e]())}function Nk(t){return t&&typeof t.then=="function"}var at={};Tt(at,{$brand:()=>R0,$input:()=>XA,$output:()=>qA,NEVER:()=>P0,TimePrecision:()=>KA,ZodAny:()=>i2,ZodArray:()=>c2,ZodBase64:()=>mT,ZodBase64URL:()=>gT,ZodBigInt:()=>Dd,ZodBigIntFormat:()=>_T,ZodBoolean:()=>Md,ZodCIDRv4:()=>hT,ZodCIDRv6:()=>pT,ZodCUID:()=>sT,ZodCUID2:()=>aT,ZodCatch:()=>S2,ZodCodec:()=>MT,ZodCustom:()=>bv,ZodCustomStringFormat:()=>Sd,ZodDate:()=>vv,ZodDefault:()=>x2,ZodDiscriminatedUnion:()=>l2,ZodE164:()=>vT,ZodEmail:()=>rT,ZodEmoji:()=>iT,ZodEnum:()=>Id,ZodError:()=>fQ,ZodFile:()=>y2,ZodFirstPartyTypeKind:()=>DT,ZodFunction:()=>B2,ZodGUID:()=>fv,ZodIPv4:()=>dT,ZodIPv6:()=>fT,ZodISODate:()=>cv,ZodISODateTime:()=>av,ZodISODuration:()=>uv,ZodISOTime:()=>lv,ZodIntersection:()=>u2,ZodIssueCode:()=>wee,ZodJWT:()=>yT,ZodKSUID:()=>uT,ZodLazy:()=>N2,ZodLiteral:()=>v2,ZodMap:()=>m2,ZodNaN:()=>M2,ZodNanoID:()=>oT,ZodNever:()=>s2,ZodNonOptional:()=>ST,ZodNull:()=>n2,ZodNullable:()=>b2,ZodNumber:()=>Cd,ZodNumberFormat:()=>Uc,ZodObject:()=>_v,ZodOptional:()=>TT,ZodPipe:()=>CT,ZodPrefault:()=>w2,ZodPromise:()=>L2,ZodReadonly:()=>D2,ZodRealError:()=>Vt,ZodRecord:()=>wT,ZodSet:()=>g2,ZodString:()=>Td,ZodStringFormat:()=>Re,ZodSuccess:()=>T2,ZodSymbol:()=>e2,ZodTemplateLiteral:()=>R2,ZodTransform:()=>_2,ZodTuple:()=>f2,ZodType:()=>fe,ZodULID:()=>cT,ZodURL:()=>gv,ZodUUID:()=>li,ZodUndefined:()=>t2,ZodUnion:()=>xT,ZodUnknown:()=>o2,ZodVoid:()=>a2,ZodXID:()=>lT,_ZodString:()=>nT,_default:()=>E2,_function:()=>gee,any:()=>JQ,array:()=>yv,base64:()=>NQ,base64url:()=>OQ,bigint:()=>HQ,boolean:()=>QF,catch:()=>C2,check:()=>vee,cidrv4:()=>PQ,cidrv6:()=>RQ,clone:()=>Lt,codec:()=>hee,coerce:()=>PT,config:()=>tt,core:()=>ci,cuid:()=>AQ,cuid2:()=>IQ,custom:()=>yee,date:()=>KQ,decode:()=>ZI,decodeAsync:()=>XI,discriminatedUnion:()=>ree,e164:()=>LQ,email:()=>pQ,emoji:()=>EQ,encode:()=>WI,encodeAsync:()=>qI,endsWith:()=>yd,enum:()=>AT,file:()=>lee,flattenError:()=>nd,float32:()=>zQ,float64:()=>VQ,formatError:()=>rd,function:()=>gee,getErrorMap:()=>Iee,globalRegistry:()=>Pr,gt:()=>si,gte:()=>zt,guid:()=>mQ,hash:()=>UQ,hex:()=>jQ,hostname:()=>FQ,httpUrl:()=>xQ,includes:()=>gd,instanceof:()=>_ee,int:()=>tT,int32:()=>$Q,int64:()=>WQ,intersection:()=>d2,ipv4:()=>MQ,ipv6:()=>DQ,iso:()=>dv,json:()=>xee,jwt:()=>BQ,keyof:()=>QQ,ksuid:()=>CQ,lazy:()=>O2,length:()=>kc,literal:()=>cee,locales:()=>ld,looseObject:()=>nee,lowercase:()=>pd,lt:()=>oi,lte:()=>An,map:()=>oee,maxLength:()=>Bc,maxSize:()=>Lc,mime:()=>_d,minLength:()=>io,minSize:()=>Ms,multipleOf:()=>Cs,nan:()=>fee,nanoid:()=>wQ,nativeEnum:()=>aee,negative:()=>SI,never:()=>bT,nonnegative:()=>MI,nonoptional:()=>I2,nonpositive:()=>CI,normalize:()=>bd,null:()=>r2,nullable:()=>pv,nullish:()=>uee,number:()=>KF,object:()=>eee,optional:()=>hv,overwrite:()=>ai,parse:()=>VI,parseAsync:()=>$I,partialRecord:()=>iee,pipe:()=>mv,positive:()=>TI,prefault:()=>A2,preprocess:()=>Eee,prettifyError:()=>$0,promise:()=>mee,property:()=>DI,readonly:()=>P2,record:()=>p2,refine:()=>k2,regex:()=>hd,regexes:()=>wn,registry:()=>Ug,safeDecode:()=>YI,safeDecodeAsync:()=>QI,safeEncode:()=>JI,safeEncodeAsync:()=>KI,safeParse:()=>GI,safeParseAsync:()=>HI,set:()=>see,setErrorMap:()=>Aee,size:()=>fd,startsWith:()=>vd,strictObject:()=>tee,string:()=>eT,stringFormat:()=>kQ,stringbool:()=>bee,success:()=>dee,superRefine:()=>F2,symbol:()=>qQ,templateLiteral:()=>pee,toJSONSchema:()=>kI,toLowerCase:()=>Ed,toUpperCase:()=>wd,transform:()=>IT,treeifyError:()=>V0,trim:()=>xd,tuple:()=>h2,uint32:()=>GQ,uint64:()=>ZQ,ulid:()=>TQ,undefined:()=>XQ,union:()=>ET,unknown:()=>jc,uppercase:()=>md,url:()=>bQ,util:()=>V,uuid:()=>gQ,uuidv4:()=>vQ,uuidv6:()=>yQ,uuidv7:()=>_Q,void:()=>YQ,xid:()=>SQ});var ci={};Tt(ci,{$ZodAny:()=>vA,$ZodArray:()=>EA,$ZodAsyncError:()=>Wn,$ZodBase64:()=>aA,$ZodBase64URL:()=>cA,$ZodBigInt:()=>Bg,$ZodBigIntFormat:()=>hA,$ZodBoolean:()=>ad,$ZodCIDRv4:()=>iA,$ZodCIDRv6:()=>oA,$ZodCUID:()=>Zw,$ZodCUID2:()=>qw,$ZodCatch:()=>jA,$ZodCheck:()=>ke,$ZodCheckBigIntFormat:()=>ww,$ZodCheckEndsWith:()=>Lw,$ZodCheckGreaterThan:()=>Mg,$ZodCheckIncludes:()=>Nw,$ZodCheckLengthEquals:()=>Mw,$ZodCheckLessThan:()=>Cg,$ZodCheckLowerCase:()=>Pw,$ZodCheckMaxLength:()=>Sw,$ZodCheckMaxSize:()=>Aw,$ZodCheckMimeType:()=>kw,$ZodCheckMinLength:()=>Cw,$ZodCheckMinSize:()=>Iw,$ZodCheckMultipleOf:()=>xw,$ZodCheckNumberFormat:()=>Ew,$ZodCheckOverwrite:()=>Fw,$ZodCheckProperty:()=>Bw,$ZodCheckRegex:()=>Dw,$ZodCheckSizeEquals:()=>Tw,$ZodCheckStartsWith:()=>Ow,$ZodCheckStringFormat:()=>Nc,$ZodCheckUpperCase:()=>Rw,$ZodCodec:()=>cd,$ZodCustom:()=>ZA,$ZodCustomStringFormat:()=>dA,$ZodDate:()=>xA,$ZodDefault:()=>LA,$ZodDiscriminatedUnion:()=>AA,$ZodE164:()=>lA,$ZodEmail:()=>$w,$ZodEmoji:()=>Hw,$ZodEncodeError:()=>Ki,$ZodEnum:()=>MA,$ZodError:()=>td,$ZodFile:()=>PA,$ZodFunction:()=>GA,$ZodGUID:()=>zw,$ZodIPv4:()=>nA,$ZodIPv6:()=>rA,$ZodISODate:()=>Qw,$ZodISODateTime:()=>Kw,$ZodISODuration:()=>tA,$ZodISOTime:()=>eA,$ZodIntersection:()=>IA,$ZodJWT:()=>uA,$ZodKSUID:()=>Yw,$ZodLazy:()=>WA,$ZodLiteral:()=>DA,$ZodMap:()=>SA,$ZodNaN:()=>UA,$ZodNanoID:()=>Ww,$ZodNever:()=>_A,$ZodNonOptional:()=>kA,$ZodNull:()=>gA,$ZodNullable:()=>OA,$ZodNumber:()=>Lg,$ZodNumberFormat:()=>fA,$ZodObject:()=>iF,$ZodObjectJIT:()=>wA,$ZodOptional:()=>NA,$ZodPipe:()=>zA,$ZodPrefault:()=>BA,$ZodPromise:()=>HA,$ZodReadonly:()=>VA,$ZodRealError:()=>Ut,$ZodRecord:()=>TA,$ZodRegistry:()=>Oc,$ZodSet:()=>CA,$ZodString:()=>Ss,$ZodStringFormat:()=>De,$ZodSuccess:()=>FA,$ZodSymbol:()=>pA,$ZodTemplateLiteral:()=>$A,$ZodTransform:()=>RA,$ZodTuple:()=>Fg,$ZodType:()=>oe,$ZodULID:()=>Xw,$ZodURL:()=>Gw,$ZodUUID:()=>Vw,$ZodUndefined:()=>mA,$ZodUnion:()=>kg,$ZodUnknown:()=>yA,$ZodVoid:()=>bA,$ZodXID:()=>Jw,$brand:()=>R0,$constructor:()=>M,$input:()=>XA,$output:()=>qA,Doc:()=>sd,JSONSchema:()=>XF,JSONSchemaGenerator:()=>Ad,NEVER:()=>P0,TimePrecision:()=>KA,_any:()=>_I,_array:()=>PI,_base64:()=>rv,_base64url:()=>iv,_bigint:()=>fI,_boolean:()=>uI,_catch:()=>oQ,_check:()=>qF,_cidrv4:()=>tv,_cidrv6:()=>nv,_coercedBigint:()=>hI,_coercedBoolean:()=>dI,_coercedDate:()=>AI,_coercedNumber:()=>iI,_coercedString:()=>YA,_cuid:()=>qg,_cuid2:()=>Xg,_custom:()=>NI,_date:()=>wI,_decode:()=>bg,_decodeAsync:()=>Eg,_default:()=>nQ,_discriminatedUnion:()=>G7,_e164:()=>ov,_email:()=>zg,_emoji:()=>Wg,_encode:()=>_g,_encodeAsync:()=>xg,_endsWith:()=>yd,_enum:()=>J7,_file:()=>RI,_float32:()=>sI,_float64:()=>aI,_gt:()=>si,_gte:()=>zt,_guid:()=>ud,_includes:()=>gd,_int:()=>oI,_int32:()=>cI,_int64:()=>pI,_intersection:()=>H7,_ipv4:()=>Qg,_ipv6:()=>ev,_isoDate:()=>eI,_isoDateTime:()=>QA,_isoDuration:()=>nI,_isoTime:()=>tI,_jwt:()=>sv,_ksuid:()=>Kg,_lazy:()=>lQ,_length:()=>kc,_literal:()=>K7,_lowercase:()=>pd,_lt:()=>oi,_lte:()=>An,_map:()=>q7,_max:()=>An,_maxLength:()=>Bc,_maxSize:()=>Lc,_mime:()=>_d,_min:()=>zt,_minLength:()=>io,_minSize:()=>Ms,_multipleOf:()=>Cs,_nan:()=>II,_nanoid:()=>Zg,_nativeEnum:()=>Y7,_negative:()=>SI,_never:()=>xI,_nonnegative:()=>MI,_nonoptional:()=>rQ,_nonpositive:()=>CI,_normalize:()=>bd,_null:()=>yI,_nullable:()=>tQ,_number:()=>rI,_optional:()=>eQ,_overwrite:()=>ai,_parse:()=>Mc,_parseAsync:()=>Dc,_pipe:()=>sQ,_positive:()=>TI,_promise:()=>uQ,_property:()=>DI,_readonly:()=>aQ,_record:()=>Z7,_refine:()=>OI,_regex:()=>hd,_safeDecode:()=>Ag,_safeDecodeAsync:()=>Tg,_safeEncode:()=>wg,_safeEncodeAsync:()=>Ig,_safeParse:()=>Pc,_safeParseAsync:()=>Rc,_set:()=>X7,_size:()=>fd,_startsWith:()=>vd,_string:()=>JA,_stringFormat:()=>Fc,_stringbool:()=>BI,_success:()=>iQ,_superRefine:()=>LI,_symbol:()=>gI,_templateLiteral:()=>cQ,_toLowerCase:()=>Ed,_toUpperCase:()=>wd,_transform:()=>Q7,_trim:()=>xd,_tuple:()=>W7,_uint32:()=>lI,_uint64:()=>mI,_ulid:()=>Jg,_undefined:()=>vI,_union:()=>$7,_unknown:()=>bI,_uppercase:()=>md,_url:()=>dd,_uuid:()=>Vg,_uuidv4:()=>$g,_uuidv6:()=>Gg,_uuidv7:()=>Hg,_void:()=>EI,_xid:()=>Yg,clone:()=>Lt,config:()=>tt,decode:()=>gK,decodeAsync:()=>yK,encode:()=>mK,encodeAsync:()=>vK,flattenError:()=>nd,formatError:()=>rd,globalConfig:()=>qu,globalRegistry:()=>Pr,isValidBase64:()=>sA,isValidBase64URL:()=>eF,isValidJWT:()=>tF,locales:()=>ld,parse:()=>vg,parseAsync:()=>yg,prettifyError:()=>$0,regexes:()=>wn,registry:()=>Ug,safeDecode:()=>bK,safeDecodeAsync:()=>EK,safeEncode:()=>_K,safeEncodeAsync:()=>xK,safeParse:()=>G0,safeParseAsync:()=>H0,toDotPath:()=>Fk,toJSONSchema:()=>kI,treeifyError:()=>V0,util:()=>V,version:()=>jw});var P0=Object.freeze({status:"aborted"});function M(t,e,n){function r(a,c){var l;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(l=a._zod).traits??(l.traits=new Set),a._zod.traits.add(t),e(a,c);for(let u in s.prototype)u in a||Object.defineProperty(a,u,{value:s.prototype[u].bind(a)});a._zod.constr=s,a._zod.def=c}let i=n?.Parent??Object;class o extends i{}Object.defineProperty(o,"name",{value:t});function s(a){var c;let l=n?.Parent?new o:this;r(l,a),(c=l._zod).deferred??(c.deferred=[]);for(let u of l._zod.deferred)u();return l}return Object.defineProperty(s,"init",{value:r}),Object.defineProperty(s,Symbol.hasInstance,{value:a=>n?.Parent&&a instanceof n.Parent?!0:a?._zod?.traits?.has(t)}),Object.defineProperty(s,"name",{value:t}),s}var R0=Symbol("zod_brand"),Wn=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},Ki=class extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}},qu={};function tt(t){return t&&Object.assign(qu,t),qu}var V={};Tt(V,{BIGINT_FORMAT_RANGES:()=>z0,Class:()=>O0,NUMBER_FORMAT_RANGES:()=>U0,aborted:()=>ro,allowsEval:()=>B0,assert:()=>ZY,assertEqual:()=>$Y,assertIs:()=>HY,assertNever:()=>WY,assertNotEqual:()=>GY,assignProp:()=>eo,base64ToUint8Array:()=>Lk,base64urlToUint8Array:()=>uK,cached:()=>Sc,captureStackTrace:()=>gg,cleanEnum:()=>lK,cleanRegex:()=>Yu,clone:()=>Lt,cloneDef:()=>XY,createTransparentProxy:()=>tK,defineLazy:()=>ge,esc:()=>mg,escapeRegex:()=>Dr,extend:()=>iK,finalizeIssue:()=>nn,floatSafeRemainder:()=>L0,getElementAtPath:()=>JY,getEnumValues:()=>Ju,getLengthableOrigin:()=>ed,getParsedType:()=>eK,getSizableOrigin:()=>Qu,hexToUint8Array:()=>fK,isObject:()=>Is,isPlainObject:()=>no,issue:()=>Cc,joinValues:()=>N,jsonStringifyReplacer:()=>Tc,merge:()=>sK,mergeDefs:()=>to,normalizeParams:()=>G,nullish:()=>Qi,numKeys:()=>QY,objectClone:()=>qY,omit:()=>rK,optionalKeys:()=>j0,partial:()=>aK,pick:()=>nK,prefixIssues:()=>tn,primitiveTypes:()=>F0,promiseAllObject:()=>YY,propertyKeyTypes:()=>Ku,randomString:()=>KY,required:()=>cK,safeExtend:()=>oK,shallowClone:()=>k0,stringifyPrimitive:()=>H,uint8ArrayToBase64:()=>Bk,uint8ArrayToBase64url:()=>dK,uint8ArrayToHex:()=>hK,unwrapMessage:()=>Xu});function $Y(t){return t}function GY(t){return t}function HY(t){}function WY(t){throw new Error}function ZY(t){}function Ju(t){let e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,i])=>e.indexOf(+r)===-1).map(([r,i])=>i)}function N(t,e="|"){return t.map(n=>H(n)).join(e)}function Tc(t,e){return typeof e=="bigint"?e.toString():e}function Sc(t){return{get value(){{let n=t();return Object.defineProperty(this,"value",{value:n}),n}throw new Error("cached value already set")}}}function Qi(t){return t==null}function Yu(t){let e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function L0(t,e){let n=(t.toString().split(".")[1]||"").length,r=e.toString(),i=(r.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(r)){let c=r.match(/\d?e-(\d?)/);c?.[1]&&(i=Number.parseInt(c[1]))}let o=n>i?n:i,s=Number.parseInt(t.toFixed(o).replace(".","")),a=Number.parseInt(e.toFixed(o).replace(".",""));return s%a/10**o}var Ok=Symbol("evaluating");function ge(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==Ok)return r===void 0&&(r=Ok,r=n()),r},set(i){Object.defineProperty(t,e,{value:i})},configurable:!0})}function qY(t){return Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyDescriptors(t))}function eo(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function to(...t){let e={};for(let n of t){let r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function XY(t){return to(t._zod.def)}function JY(t,e){return e?e.reduce((n,r)=>n?.[r],t):t}function YY(t){let e=Object.keys(t),n=e.map(r=>t[r]);return Promise.all(n).then(r=>{let i={};for(let o=0;o<e.length;o++)i[e[o]]=r[o];return i})}function KY(t=10){let e="abcdefghijklmnopqrstuvwxyz",n="";for(let r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n}function mg(t){return JSON.stringify(t)}var gg="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function Is(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}var B0=Sc(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let t=Function;return new t(""),!0}catch{return!1}});function no(t){if(Is(t)===!1)return!1;let e=t.constructor;if(e===void 0)return!0;let n=e.prototype;return!(Is(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function k0(t){return no(t)?v({},t):t}function QY(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}var eK=t=>{let e=typeof t;switch(e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(t)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(t)?"array":t===null?"null":t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?"promise":typeof Map<"u"&&t instanceof Map?"map":typeof Set<"u"&&t instanceof Set?"set":typeof Date<"u"&&t instanceof Date?"date":typeof File<"u"&&t instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${e}`)}},Ku=new Set(["string","number","symbol"]),F0=new Set(["string","number","bigint","boolean","symbol","undefined"]);function Dr(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Lt(t,e,n){let r=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(r._zod.parent=t),r}function G(t){let e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?S(v({},e),{error:()=>e.error}):e}function tK(t){let e;return new Proxy({},{get(n,r,i){return e??(e=t()),Reflect.get(e,r,i)},set(n,r,i,o){return e??(e=t()),Reflect.set(e,r,i,o)},has(n,r){return e??(e=t()),Reflect.has(e,r)},deleteProperty(n,r){return e??(e=t()),Reflect.deleteProperty(e,r)},ownKeys(n){return e??(e=t()),Reflect.ownKeys(e)},getOwnPropertyDescriptor(n,r){return e??(e=t()),Reflect.getOwnPropertyDescriptor(e,r)},defineProperty(n,r,i){return e??(e=t()),Reflect.defineProperty(e,r,i)}})}function H(t){return typeof t=="bigint"?t.toString()+"n":typeof t=="string"?`"${t}"`:`${t}`}function j0(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}var U0={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},z0={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function nK(t,e){let n=t._zod.def,r=to(t._zod.def,{get shape(){let i={};for(let o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(i[o]=n.shape[o])}return eo(this,"shape",i),i},checks:[]});return Lt(t,r)}function rK(t,e){let n=t._zod.def,r=to(t._zod.def,{get shape(){let i=v({},t._zod.def.shape);for(let o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete i[o]}return eo(this,"shape",i),i},checks:[]});return Lt(t,r)}function iK(t,e){if(!no(e))throw new Error("Invalid input to extend: expected a plain object");let n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let i=to(t._zod.def,{get shape(){let o=v(v({},t._zod.def.shape),e);return eo(this,"shape",o),o},checks:[]});return Lt(t,i)}function oK(t,e){if(!no(e))throw new Error("Invalid input to safeExtend: expected a plain object");let n=S(v({},t._zod.def),{get shape(){let r=v(v({},t._zod.def.shape),e);return eo(this,"shape",r),r},checks:t._zod.def.checks});return Lt(t,n)}function sK(t,e){let n=to(t._zod.def,{get shape(){let r=v(v({},t._zod.def.shape),e._zod.def.shape);return eo(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Lt(t,n)}function aK(t,e,n){let r=to(e._zod.def,{get shape(){let i=e._zod.def.shape,o=v({},i);if(n)for(let s in n){if(!(s in i))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(o[s]=t?new t({type:"optional",innerType:i[s]}):i[s])}else for(let s in i)o[s]=t?new t({type:"optional",innerType:i[s]}):i[s];return eo(this,"shape",o),o},checks:[]});return Lt(e,r)}function cK(t,e,n){let r=to(e._zod.def,{get shape(){let i=e._zod.def.shape,o=v({},i);if(n)for(let s in n){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);n[s]&&(o[s]=new t({type:"nonoptional",innerType:i[s]}))}else for(let s in i)o[s]=new t({type:"nonoptional",innerType:i[s]});return eo(this,"shape",o),o},checks:[]});return Lt(e,r)}function ro(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function tn(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function Xu(t){return typeof t=="string"?t:t?.message}function nn(t,e,n){let r=S(v({},t),{path:t.path??[]});if(!t.message){let i=Xu(t.inst?._zod.def?.error?.(t))??Xu(e?.error?.(t))??Xu(n.customError?.(t))??Xu(n.localeError?.(t))??"Invalid input";r.message=i}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function Qu(t){return t instanceof Set?"set":t instanceof Map?"map":t instanceof File?"file":"unknown"}function ed(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function Cc(...t){let[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:v({},e)}function lK(t){return Object.entries(t).filter(([e,n])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function Lk(t){let e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}function Bk(t){let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function uK(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),n="=".repeat((4-e.length%4)%4);return Lk(e+n)}function dK(t){return Bk(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function fK(t){let e=t.replace(/^0x/,"");if(e.length%2!==0)throw new Error("Invalid hex string length");let n=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2)n[r/2]=Number.parseInt(e.slice(r,r+2),16);return n}function hK(t){return Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}var O0=class{constructor(...e){}};var kk=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Tc,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},td=M("$ZodError",kk),Ut=M("$ZodError",kk,{Parent:Error});function nd(t,e=n=>n.message){let n={},r=[];for(let i of t.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}function rd(t,e){let n=e||function(o){return o.message},r={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(a=>i({issues:a}));else if(s.code==="invalid_key")i({issues:s.issues});else if(s.code==="invalid_element")i({issues:s.issues});else if(s.path.length===0)r._errors.push(n(s));else{let a=r,c=0;for(;c<s.path.length;){let l=s.path[c];c===s.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(s))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return i(t),r}function V0(t,e){let n=e||function(o){return o.message},r={errors:[]},i=(o,s=[])=>{var a,c;for(let l of o.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(u=>i({issues:u},l.path));else if(l.code==="invalid_key")i({issues:l.issues},l.path);else if(l.code==="invalid_element")i({issues:l.issues},l.path);else{let u=[...s,...l.path];if(u.length===0){r.errors.push(n(l));continue}let d=r,f=0;for(;f<u.length;){let h=u[f],p=f===u.length-1;typeof h=="string"?(d.properties??(d.properties={}),(a=d.properties)[h]??(a[h]={errors:[]}),d=d.properties[h]):(d.items??(d.items=[]),(c=d.items)[h]??(c[h]={errors:[]}),d=d.items[h]),p&&d.errors.push(n(l)),f++}}};return i(t),r}function Fk(t){let e=[],n=t.map(r=>typeof r=="object"?r.key:r);for(let r of n)typeof r=="number"?e.push(`[${r}]`):typeof r=="symbol"?e.push(`[${JSON.stringify(String(r))}]`):/[^\w$]/.test(r)?e.push(`[${JSON.stringify(r)}]`):(e.length&&e.push("."),e.push(r));return e.join("")}function $0(t){let e=[],n=[...t.issues].sort((r,i)=>(r.path??[]).length-(i.path??[]).length);for(let r of n)e.push(`\u2716 ${r.message}`),r.path?.length&&e.push(`  \u2192 at ${Fk(r.path)}`);return e.join(`
`)}var Mc=t=>(e,n,r,i)=>{let o=r?Object.assign(r,{async:!1}):{async:!1},s=e._zod.run({value:n,issues:[]},o);if(s instanceof Promise)throw new Wn;if(s.issues.length){let a=new(i?.Err??t)(s.issues.map(c=>nn(c,o,tt())));throw gg(a,i?.callee),a}return s.value},vg=Mc(Ut),Dc=t=>(e,n,r,i)=>R(null,null,function*(){let o=r?Object.assign(r,{async:!0}):{async:!0},s=e._zod.run({value:n,issues:[]},o);if(s instanceof Promise&&(s=yield s),s.issues.length){let a=new(i?.Err??t)(s.issues.map(c=>nn(c,o,tt())));throw gg(a,i?.callee),a}return s.value}),yg=Dc(Ut),Pc=t=>(e,n,r)=>{let i=r?S(v({},r),{async:!1}):{async:!1},o=e._zod.run({value:n,issues:[]},i);if(o instanceof Promise)throw new Wn;return o.issues.length?{success:!1,error:new(t??td)(o.issues.map(s=>nn(s,i,tt())))}:{success:!0,data:o.value}},G0=Pc(Ut),Rc=t=>(e,n,r)=>R(null,null,function*(){let i=r?Object.assign(r,{async:!0}):{async:!0},o=e._zod.run({value:n,issues:[]},i);return o instanceof Promise&&(o=yield o),o.issues.length?{success:!1,error:new t(o.issues.map(s=>nn(s,i,tt())))}:{success:!0,data:o.value}}),H0=Rc(Ut),_g=t=>(e,n,r)=>{let i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Mc(t)(e,n,i)},mK=_g(Ut),bg=t=>(e,n,r)=>Mc(t)(e,n,r),gK=bg(Ut),xg=t=>(e,n,r)=>R(null,null,function*(){let i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Dc(t)(e,n,i)}),vK=xg(Ut),Eg=t=>(e,n,r)=>R(null,null,function*(){return Dc(t)(e,n,r)}),yK=Eg(Ut),wg=t=>(e,n,r)=>{let i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Pc(t)(e,n,i)},_K=wg(Ut),Ag=t=>(e,n,r)=>Pc(t)(e,n,r),bK=Ag(Ut),Ig=t=>(e,n,r)=>R(null,null,function*(){let i=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Rc(t)(e,n,i)}),xK=Ig(Ut),Tg=t=>(e,n,r)=>R(null,null,function*(){return Rc(t)(e,n,r)}),EK=Tg(Ut);var wn={};Tt(wn,{base64:()=>sw,base64url:()=>Sg,bigint:()=>hw,boolean:()=>gw,browserEmail:()=>PK,cidrv4:()=>iw,cidrv6:()=>ow,cuid:()=>W0,cuid2:()=>Z0,date:()=>lw,datetime:()=>dw,domain:()=>NK,duration:()=>K0,e164:()=>cw,email:()=>ew,emoji:()=>tw,extendedDuration:()=>wK,guid:()=>Q0,hex:()=>OK,hostname:()=>aw,html5Email:()=>SK,idnEmail:()=>DK,integer:()=>pw,ipv4:()=>nw,ipv6:()=>rw,ksuid:()=>J0,lowercase:()=>_w,md5_base64:()=>BK,md5_base64url:()=>kK,md5_hex:()=>LK,nanoid:()=>Y0,null:()=>vw,number:()=>mw,rfc5322Email:()=>CK,sha1_base64:()=>jK,sha1_base64url:()=>UK,sha1_hex:()=>FK,sha256_base64:()=>VK,sha256_base64url:()=>$K,sha256_hex:()=>zK,sha384_base64:()=>HK,sha384_base64url:()=>WK,sha384_hex:()=>GK,sha512_base64:()=>qK,sha512_base64url:()=>XK,sha512_hex:()=>ZK,string:()=>fw,time:()=>uw,ulid:()=>q0,undefined:()=>yw,unicodeEmail:()=>MK,uppercase:()=>bw,uuid:()=>Ts,uuid4:()=>AK,uuid6:()=>IK,uuid7:()=>TK,xid:()=>X0});var W0=/^[cC][^\s-]{8,}$/,Z0=/^[0-9a-z]+$/,q0=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,X0=/^[0-9a-vA-V]{20}$/,J0=/^[A-Za-z0-9]{27}$/,Y0=/^[a-zA-Z0-9_-]{21}$/,K0=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,wK=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Q0=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ts=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,AK=Ts(4),IK=Ts(6),TK=Ts(7),ew=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,SK=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,CK=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,MK=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,DK=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,PK=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,RK="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function tw(){return new RegExp(RK,"u")}var nw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rw=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,iw=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,ow=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,sw=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Sg=/^[A-Za-z0-9_-]*$/,aw=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,NK=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,cw=/^\+(?:[0-9]){6,14}[0-9]$/,jk="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",lw=new RegExp(`^${jk}$`);function Uk(t){let e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function uw(t){return new RegExp(`^${Uk(t)}$`)}function dw(t){let e=Uk({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let r=`${e}(?:${n.join("|")})`;return new RegExp(`^${jk}T(?:${r})$`)}var fw=t=>{let e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},hw=/^\d+n?$/,pw=/^\d+$/,mw=/^-?\d+(?:\.\d+)?/i,gw=/true|false/i,vw=/null/i;var yw=/undefined/i;var _w=/^[^A-Z]*$/,bw=/^[^a-z]*$/,OK=/^[0-9a-fA-F]*$/;function id(t,e){return new RegExp(`^[A-Za-z0-9+/]{${t}}${e}$`)}function od(t){return new RegExp(`^[A-Za-z0-9-_]{${t}}$`)}var LK=/^[0-9a-fA-F]{32}$/,BK=id(22,"=="),kK=od(22),FK=/^[0-9a-fA-F]{40}$/,jK=id(27,"="),UK=od(27),zK=/^[0-9a-fA-F]{64}$/,VK=id(43,"="),$K=od(43),GK=/^[0-9a-fA-F]{96}$/,HK=id(64,""),WK=od(64),ZK=/^[0-9a-fA-F]{128}$/,qK=id(86,"=="),XK=od(86);var ke=M("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),Vk={number:"number",bigint:"bigint",object:"date"},Cg=M("$ZodCheckLessThan",(t,e)=>{ke.init(t,e);let n=Vk[typeof e.value];t._zod.onattach.push(r=>{let i=r._zod.bag,o=(e.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?i.maximum=e.value:i.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Mg=M("$ZodCheckGreaterThan",(t,e)=>{ke.init(t,e);let n=Vk[typeof e.value];t._zod.onattach.push(r=>{let i=r._zod.bag,o=(e.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?i.minimum=e.value:i.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),xw=M("$ZodCheckMultipleOf",(t,e)=>{ke.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):L0(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),Ew=M("$ZodCheckNumberFormat",(t,e)=>{ke.init(t,e),e.format=e.format||"float64";let n=e.format?.includes("int"),r=n?"int":"number",[i,o]=U0[e.format];t._zod.onattach.push(s=>{let a=s._zod.bag;a.format=e.format,a.minimum=i,a.maximum=o,n&&(a.pattern=pw)}),t._zod.check=s=>{let a=s.value;if(n){if(!Number.isInteger(a)){s.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:a,inst:t});return}if(!Number.isSafeInteger(a)){a>0?s.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):s.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}a<i&&s.issues.push({origin:"number",input:a,code:"too_small",minimum:i,inclusive:!0,inst:t,continue:!e.abort}),a>o&&s.issues.push({origin:"number",input:a,code:"too_big",maximum:o,inst:t})}}),ww=M("$ZodCheckBigIntFormat",(t,e)=>{ke.init(t,e);let[n,r]=z0[e.format];t._zod.onattach.push(i=>{let o=i._zod.bag;o.format=e.format,o.minimum=n,o.maximum=r}),t._zod.check=i=>{let o=i.value;o<n&&i.issues.push({origin:"bigint",input:o,code:"too_small",minimum:n,inclusive:!0,inst:t,continue:!e.abort}),o>r&&i.issues.push({origin:"bigint",input:o,code:"too_big",maximum:r,inst:t})}}),Aw=M("$ZodCheckMaxSize",(t,e)=>{var n;ke.init(t,e),(n=t._zod.def).when??(n.when=r=>{let i=r.value;return!Qi(i)&&i.size!==void 0}),t._zod.onattach.push(r=>{let i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{let i=r.value;i.size<=e.maximum||r.issues.push({origin:Qu(i),code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),Iw=M("$ZodCheckMinSize",(t,e)=>{var n;ke.init(t,e),(n=t._zod.def).when??(n.when=r=>{let i=r.value;return!Qi(i)&&i.size!==void 0}),t._zod.onattach.push(r=>{let i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{let i=r.value;i.size>=e.minimum||r.issues.push({origin:Qu(i),code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),Tw=M("$ZodCheckSizeEquals",(t,e)=>{var n;ke.init(t,e),(n=t._zod.def).when??(n.when=r=>{let i=r.value;return!Qi(i)&&i.size!==void 0}),t._zod.onattach.push(r=>{let i=r._zod.bag;i.minimum=e.size,i.maximum=e.size,i.size=e.size}),t._zod.check=r=>{let i=r.value,o=i.size;if(o===e.size)return;let s=o>e.size;r.issues.push(S(v({origin:Qu(i)},s?{code:"too_big",maximum:e.size}:{code:"too_small",minimum:e.size}),{inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort}))}}),Sw=M("$ZodCheckMaxLength",(t,e)=>{var n;ke.init(t,e),(n=t._zod.def).when??(n.when=r=>{let i=r.value;return!Qi(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{let i=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{let i=r.value;if(i.length<=e.maximum)return;let s=ed(i);r.issues.push({origin:s,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),Cw=M("$ZodCheckMinLength",(t,e)=>{var n;ke.init(t,e),(n=t._zod.def).when??(n.when=r=>{let i=r.value;return!Qi(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{let i=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{let i=r.value;if(i.length>=e.minimum)return;let s=ed(i);r.issues.push({origin:s,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:t,continue:!e.abort})}}),Mw=M("$ZodCheckLengthEquals",(t,e)=>{var n;ke.init(t,e),(n=t._zod.def).when??(n.when=r=>{let i=r.value;return!Qi(i)&&i.length!==void 0}),t._zod.onattach.push(r=>{let i=r._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),t._zod.check=r=>{let i=r.value,o=i.length;if(o===e.length)return;let s=ed(i),a=o>e.length;r.issues.push(S(v({origin:s},a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length}),{inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort}))}}),Nc=M("$ZodCheckStringFormat",(t,e)=>{var n,r;ke.init(t,e),t._zod.onattach.push(i=>{let o=i._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push(S(v({origin:"string",code:"invalid_format",format:e.format,input:i.value},e.pattern?{pattern:e.pattern.toString()}:{}),{inst:t,continue:!e.abort}))}):(r=t._zod).check??(r.check=()=>{})}),Dw=M("$ZodCheckRegex",(t,e)=>{Nc.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),Pw=M("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=_w),Nc.init(t,e)}),Rw=M("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=bw),Nc.init(t,e)}),Nw=M("$ZodCheckIncludes",(t,e)=>{ke.init(t,e);let n=Dr(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(i=>{let o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:t,continue:!e.abort})}}),Ow=M("$ZodCheckStartsWith",(t,e)=>{ke.init(t,e);let n=new RegExp(`^${Dr(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{let i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),Lw=M("$ZodCheckEndsWith",(t,e)=>{ke.init(t,e);let n=new RegExp(`.*${Dr(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{let i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}});function zk(t,e,n){t.issues.length&&e.issues.push(...tn(n,t.issues))}var Bw=M("$ZodCheckProperty",(t,e)=>{ke.init(t,e),t._zod.check=n=>{let r=e.schema._zod.run({value:n.value[e.property],issues:[]},{});if(r instanceof Promise)return r.then(i=>zk(i,n,e.property));zk(r,n,e.property)}}),kw=M("$ZodCheckMimeType",(t,e)=>{ke.init(t,e);let n=new Set(e.mime);t._zod.onattach.push(r=>{r._zod.bag.mime=e.mime}),t._zod.check=r=>{n.has(r.value.type)||r.issues.push({code:"invalid_value",values:e.mime,input:r.value.type,inst:t,continue:!e.abort})}}),Fw=M("$ZodCheckOverwrite",(t,e)=>{ke.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});var sd=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let r=e.split(`
`).filter(s=>s),i=Math.min(...r.map(s=>s.length-s.trimStart().length)),o=r.map(s=>s.slice(i)).map(s=>" ".repeat(this.indent*2)+s);for(let s of o)this.content.push(s)}compile(){let e=Function,n=this?.args,i=[...(this?.content??[""]).map(o=>`  ${o}`)];return new e(...n,i.join(`
`))}};var jw={major:4,minor:1,patch:5};var oe=M("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=jw;let r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(let i of r)for(let o of i._zod.onattach)o(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{let i=(s,a,c)=>{let l=ro(s),u;for(let d of a){if(d._zod.def.when){if(!d._zod.def.when(s))continue}else if(l)continue;let f=s.issues.length,h=d._zod.check(s);if(h instanceof Promise&&c?.async===!1)throw new Wn;if(u||h instanceof Promise)u=(u??Promise.resolve()).then(()=>R(null,null,function*(){yield h,s.issues.length!==f&&(l||(l=ro(s,f)))}));else{if(s.issues.length===f)continue;l||(l=ro(s,f))}}return u?u.then(()=>s):s},o=(s,a,c)=>{if(ro(s))return s.aborted=!0,s;let l=i(a,r,c);if(l instanceof Promise){if(c.async===!1)throw new Wn;return l.then(u=>t._zod.parse(u,c))}return t._zod.parse(l,c)};t._zod.run=(s,a)=>{if(a.skipChecks)return t._zod.parse(s,a);if(a.direction==="backward"){let l=t._zod.parse({value:s.value,issues:[]},S(v({},a),{skipChecks:!0}));return l instanceof Promise?l.then(u=>o(u,s,a)):o(l,s,a)}let c=t._zod.parse(s,a);if(c instanceof Promise){if(a.async===!1)throw new Wn;return c.then(l=>i(l,r,a))}return i(c,r,a)}}t["~standard"]={validate:i=>{try{let o=G0(t,i);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return H0(t,i).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),Ss=M("$ZodString",(t,e)=>{oe.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??fw(t._zod.bag),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),De=M("$ZodStringFormat",(t,e)=>{Nc.init(t,e),Ss.init(t,e)}),zw=M("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=Q0),De.init(t,e)}),Vw=M("$ZodUUID",(t,e)=>{if(e.version){let r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Ts(r))}else e.pattern??(e.pattern=Ts());De.init(t,e)}),$w=M("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=ew),De.init(t,e)}),Gw=M("$ZodURL",(t,e)=>{De.init(t,e),t._zod.check=n=>{try{let r=n.value.trim(),i=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:aw.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=i.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),Hw=M("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=tw()),De.init(t,e)}),Ww=M("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=Y0),De.init(t,e)}),Zw=M("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=W0),De.init(t,e)}),qw=M("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=Z0),De.init(t,e)}),Xw=M("$ZodULID",(t,e)=>{e.pattern??(e.pattern=q0),De.init(t,e)}),Jw=M("$ZodXID",(t,e)=>{e.pattern??(e.pattern=X0),De.init(t,e)}),Yw=M("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=J0),De.init(t,e)}),Kw=M("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=dw(e)),De.init(t,e)}),Qw=M("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=lw),De.init(t,e)}),eA=M("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=uw(e)),De.init(t,e)}),tA=M("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=K0),De.init(t,e)}),nA=M("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=nw),De.init(t,e),t._zod.onattach.push(n=>{let r=n._zod.bag;r.format="ipv4"})}),rA=M("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=rw),De.init(t,e),t._zod.onattach.push(n=>{let r=n._zod.bag;r.format="ipv6"}),t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),iA=M("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=iw),De.init(t,e)}),oA=M("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=ow),De.init(t,e),t._zod.check=n=>{let[r,i]=n.value.split("/");try{if(!i)throw new Error;let o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function sA(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}var aA=M("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=sw),De.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),t._zod.check=n=>{sA(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function eF(t){if(!Sg.test(t))return!1;let e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return sA(n)}var cA=M("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=Sg),De.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),t._zod.check=n=>{eF(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),lA=M("$ZodE164",(t,e)=>{e.pattern??(e.pattern=cw),De.init(t,e)});function tF(t,e=null){try{let n=t.split(".");if(n.length!==3)return!1;let[r]=n;if(!r)return!1;let i=JSON.parse(atob(r));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}var uA=M("$ZodJWT",(t,e)=>{De.init(t,e),t._zod.check=n=>{tF(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),dA=M("$ZodCustomStringFormat",(t,e)=>{De.init(t,e),t._zod.check=n=>{e.fn(n.value)||n.issues.push({code:"invalid_format",format:e.format,input:n.value,inst:t,continue:!e.abort})}}),Lg=M("$ZodNumber",(t,e)=>{oe.init(t,e),t._zod.pattern=t._zod.bag.pattern??mw,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}let i=n.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return n;let o=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return n.issues.push(v({expected:"number",code:"invalid_type",input:i,inst:t},o?{received:o}:{})),n}}),fA=M("$ZodNumber",(t,e)=>{Ew.init(t,e),Lg.init(t,e)}),ad=M("$ZodBoolean",(t,e)=>{oe.init(t,e),t._zod.pattern=gw,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}let i=n.value;return typeof i=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:t}),n}}),Bg=M("$ZodBigInt",(t,e)=>{oe.init(t,e),t._zod.pattern=hw,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=BigInt(n.value)}catch{}return typeof n.value=="bigint"||n.issues.push({expected:"bigint",code:"invalid_type",input:n.value,inst:t}),n}}),hA=M("$ZodBigInt",(t,e)=>{ww.init(t,e),Bg.init(t,e)}),pA=M("$ZodSymbol",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>{let i=n.value;return typeof i=="symbol"||n.issues.push({expected:"symbol",code:"invalid_type",input:i,inst:t}),n}}),mA=M("$ZodUndefined",(t,e)=>{oe.init(t,e),t._zod.pattern=yw,t._zod.values=new Set([void 0]),t._zod.optin="optional",t._zod.optout="optional",t._zod.parse=(n,r)=>{let i=n.value;return typeof i>"u"||n.issues.push({expected:"undefined",code:"invalid_type",input:i,inst:t}),n}}),gA=M("$ZodNull",(t,e)=>{oe.init(t,e),t._zod.pattern=vw,t._zod.values=new Set([null]),t._zod.parse=(n,r)=>{let i=n.value;return i===null||n.issues.push({expected:"null",code:"invalid_type",input:i,inst:t}),n}}),vA=M("$ZodAny",(t,e)=>{oe.init(t,e),t._zod.parse=n=>n}),yA=M("$ZodUnknown",(t,e)=>{oe.init(t,e),t._zod.parse=n=>n}),_A=M("$ZodNever",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)}),bA=M("$ZodVoid",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>{let i=n.value;return typeof i>"u"||n.issues.push({expected:"void",code:"invalid_type",input:i,inst:t}),n}}),xA=M("$ZodDate",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=new Date(n.value)}catch{}let i=n.value,o=i instanceof Date;return o&&!Number.isNaN(i.getTime())||n.issues.push(S(v({expected:"date",code:"invalid_type",input:i},o?{received:"Invalid Date"}:{}),{inst:t})),n}});function Gk(t,e,n){t.issues.length&&e.issues.push(...tn(n,t.issues)),e.value[n]=t.value}var EA=M("$ZodArray",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>{let i=n.value;if(!Array.isArray(i))return n.issues.push({expected:"array",code:"invalid_type",input:i,inst:t}),n;n.value=Array(i.length);let o=[];for(let s=0;s<i.length;s++){let a=i[s],c=e.element._zod.run({value:a,issues:[]},r);c instanceof Promise?o.push(c.then(l=>Gk(l,n,s))):Gk(c,n,s)}return o.length?Promise.all(o).then(()=>n):n}});function Og(t,e,n,r){t.issues.length&&e.issues.push(...tn(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function nF(t){let e=Object.keys(t.shape);for(let r of e)if(!t.shape[r]._zod.traits.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);let n=j0(t.shape);return S(v({},t),{keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)})}function rF(t,e,n,r,i,o){let s=[],a=i.keySet,c=i.catchall._zod,l=c.def.type;for(let u of Object.keys(e)){if(a.has(u))continue;if(l==="never"){s.push(u);continue}let d=c.run({value:e[u],issues:[]},r);d instanceof Promise?t.push(d.then(f=>Og(f,n,u,e))):Og(d,n,u,e)}return s.length&&n.issues.push({code:"unrecognized_keys",keys:s,input:e,inst:o}),t.length?Promise.all(t).then(()=>n):n}var iF=M("$ZodObject",(t,e)=>{oe.init(t,e);let n=Sc(()=>nF(e));ge(t._zod,"propValues",()=>{let s=e.shape,a={};for(let c in s){let l=s[c]._zod;if(l.values){a[c]??(a[c]=new Set);for(let u of l.values)a[c].add(u)}}return a});let r=Is,i=e.catchall,o;t._zod.parse=(s,a)=>{o??(o=n.value);let c=s.value;if(!r(c))return s.issues.push({expected:"object",code:"invalid_type",input:c,inst:t}),s;s.value={};let l=[],u=o.shape;for(let d of o.keys){let h=u[d]._zod.run({value:c[d],issues:[]},a);h instanceof Promise?l.push(h.then(p=>Og(p,s,d,c))):Og(h,s,d,c)}return i?rF(l,c,s,a,n.value,t):l.length?Promise.all(l).then(()=>s):s}}),wA=M("$ZodObjectJIT",(t,e)=>{iF.init(t,e);let n=t._zod.parse,r=Sc(()=>nF(e)),i=f=>{let h=new sd(["shape","payload","ctx"]),p=r.value,g=A=>{let I=mg(A);return`shape[${I}]._zod.run({ value: input[${I}], issues: [] }, ctx)`};h.write("const input = payload.value;");let y=Object.create(null),_=0;for(let A of p.keys)y[A]=`key_${_++}`;h.write("const newResult = {}");for(let A of p.keys){let I=y[A],C=mg(A);h.write(`const ${I} = ${g(A)};`),h.write(`
        if (${I}.issues.length) {
          payload.issues = payload.issues.concat(${I}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${C}, ...iss.path] : [${C}]
          })));
        }
        
        if (${I}.value === undefined) {
          if (${C} in input) {
            newResult[${C}] = undefined;
          }
        } else {
          newResult[${C}] = ${I}.value;
        }
      `)}h.write("payload.value = newResult;"),h.write("return payload;");let E=h.compile();return(A,I)=>E(f,A,I)},o,s=Is,a=!qu.jitless,l=a&&B0.value,u=e.catchall,d;t._zod.parse=(f,h)=>{d??(d=r.value);let p=f.value;return s(p)?a&&l&&h?.async===!1&&h.jitless!==!0?(o||(o=i(e.shape)),f=o(f,h),u?rF([],p,f,h,d,t):f):n(f,h):(f.issues.push({expected:"object",code:"invalid_type",input:p,inst:t}),f)}});function Hk(t,e,n,r){for(let o of t)if(o.issues.length===0)return e.value=o.value,e;let i=t.filter(o=>!ro(o));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(o=>o.issues.map(s=>nn(s,r,tt())))}),e)}var kg=M("$ZodUnion",(t,e)=>{oe.init(t,e),ge(t._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),ge(t._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),ge(t._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),ge(t._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){let i=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${i.map(o=>Yu(o.source)).join("|")})$`)}});let n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(i,o)=>{if(n)return r(i,o);let s=!1,a=[];for(let c of e.options){let l=c._zod.run({value:i.value,issues:[]},o);if(l instanceof Promise)a.push(l),s=!0;else{if(l.issues.length===0)return l;a.push(l)}}return s?Promise.all(a).then(c=>Hk(c,i,t,o)):Hk(a,i,t,o)}}),AA=M("$ZodDiscriminatedUnion",(t,e)=>{kg.init(t,e);let n=t._zod.parse;ge(t._zod,"propValues",()=>{let i={};for(let o of e.options){let s=o._zod.propValues;if(!s||Object.keys(s).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(o)}"`);for(let[a,c]of Object.entries(s)){i[a]||(i[a]=new Set);for(let l of c)i[a].add(l)}}return i});let r=Sc(()=>{let i=e.options,o=new Map;for(let s of i){let a=s._zod.propValues?.[e.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(s)}"`);for(let c of a){if(o.has(c))throw new Error(`Duplicate discriminator value "${String(c)}"`);o.set(c,s)}}return o});t._zod.parse=(i,o)=>{let s=i.value;if(!Is(s))return i.issues.push({code:"invalid_type",expected:"object",input:s,inst:t}),i;let a=r.value.get(s?.[e.discriminator]);return a?a._zod.run(i,o):e.unionFallback?n(i,o):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:e.discriminator,input:s,path:[e.discriminator],inst:t}),i)}}),IA=M("$ZodIntersection",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>{let i=n.value,o=e.left._zod.run({value:i,issues:[]},r),s=e.right._zod.run({value:i,issues:[]},r);return o instanceof Promise||s instanceof Promise?Promise.all([o,s]).then(([c,l])=>Wk(n,c,l)):Wk(n,o,s)}});function Uw(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(no(t)&&no(e)){let n=Object.keys(e),r=Object.keys(t).filter(o=>n.indexOf(o)!==-1),i=v(v({},t),e);for(let o of r){let s=Uw(t[o],e[o]);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};i[o]=s.data}return{valid:!0,data:i}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e[r],s=Uw(i,o);if(!s.valid)return{valid:!1,mergeErrorPath:[r,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Wk(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),ro(t))return t;let r=Uw(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}var Fg=M("$ZodTuple",(t,e)=>{oe.init(t,e);let n=e.items,r=n.length-[...n].reverse().findIndex(i=>i._zod.optin!=="optional");t._zod.parse=(i,o)=>{let s=i.value;if(!Array.isArray(s))return i.issues.push({input:s,inst:t,expected:"tuple",code:"invalid_type"}),i;i.value=[];let a=[];if(!e.rest){let l=s.length>n.length,u=s.length<r-1;if(l||u)return i.issues.push(S(v({},l?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length}),{input:s,inst:t,origin:"array"})),i}let c=-1;for(let l of n){if(c++,c>=s.length&&c>=r)continue;let u=l._zod.run({value:s[c],issues:[]},o);u instanceof Promise?a.push(u.then(d=>Dg(d,i,c))):Dg(u,i,c)}if(e.rest){let l=s.slice(n.length);for(let u of l){c++;let d=e.rest._zod.run({value:u,issues:[]},o);d instanceof Promise?a.push(d.then(f=>Dg(f,i,c))):Dg(d,i,c)}}return a.length?Promise.all(a).then(()=>i):i}});function Dg(t,e,n){t.issues.length&&e.issues.push(...tn(n,t.issues)),e.value[n]=t.value}var TA=M("$ZodRecord",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>{let i=n.value;if(!no(i))return n.issues.push({expected:"record",code:"invalid_type",input:i,inst:t}),n;let o=[];if(e.keyType._zod.values){let s=e.keyType._zod.values;n.value={};for(let c of s)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){let l=e.valueType._zod.run({value:i[c],issues:[]},r);l instanceof Promise?o.push(l.then(u=>{u.issues.length&&n.issues.push(...tn(c,u.issues)),n.value[c]=u.value})):(l.issues.length&&n.issues.push(...tn(c,l.issues)),n.value[c]=l.value)}let a;for(let c in i)s.has(c)||(a=a??[],a.push(c));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:i,inst:t,keys:a})}else{n.value={};for(let s of Reflect.ownKeys(i)){if(s==="__proto__")continue;let a=e.keyType._zod.run({value:s,issues:[]},r);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:a.issues.map(l=>nn(l,r,tt())),input:s,path:[s],inst:t}),n.value[a.value]=a.value;continue}let c=e.valueType._zod.run({value:i[s],issues:[]},r);c instanceof Promise?o.push(c.then(l=>{l.issues.length&&n.issues.push(...tn(s,l.issues)),n.value[a.value]=l.value})):(c.issues.length&&n.issues.push(...tn(s,c.issues)),n.value[a.value]=c.value)}}return o.length?Promise.all(o).then(()=>n):n}}),SA=M("$ZodMap",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>{let i=n.value;if(!(i instanceof Map))return n.issues.push({expected:"map",code:"invalid_type",input:i,inst:t}),n;let o=[];n.value=new Map;for(let[s,a]of i){let c=e.keyType._zod.run({value:s,issues:[]},r),l=e.valueType._zod.run({value:a,issues:[]},r);c instanceof Promise||l instanceof Promise?o.push(Promise.all([c,l]).then(([u,d])=>{Zk(u,d,n,s,i,t,r)})):Zk(c,l,n,s,i,t,r)}return o.length?Promise.all(o).then(()=>n):n}});function Zk(t,e,n,r,i,o,s){t.issues.length&&(Ku.has(typeof r)?n.issues.push(...tn(r,t.issues)):n.issues.push({code:"invalid_key",origin:"map",input:i,inst:o,issues:t.issues.map(a=>nn(a,s,tt()))})),e.issues.length&&(Ku.has(typeof r)?n.issues.push(...tn(r,e.issues)):n.issues.push({origin:"map",code:"invalid_element",input:i,inst:o,key:r,issues:e.issues.map(a=>nn(a,s,tt()))})),n.value.set(t.value,e.value)}var CA=M("$ZodSet",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>{let i=n.value;if(!(i instanceof Set))return n.issues.push({input:i,inst:t,expected:"set",code:"invalid_type"}),n;let o=[];n.value=new Set;for(let s of i){let a=e.valueType._zod.run({value:s,issues:[]},r);a instanceof Promise?o.push(a.then(c=>qk(c,n))):qk(a,n)}return o.length?Promise.all(o).then(()=>n):n}});function qk(t,e){t.issues.length&&e.issues.push(...t.issues),e.value.add(t.value)}var MA=M("$ZodEnum",(t,e)=>{oe.init(t,e);let n=Ju(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(i=>Ku.has(typeof i)).map(i=>typeof i=="string"?Dr(i):i.toString()).join("|")})$`),t._zod.parse=(i,o)=>{let s=i.value;return r.has(s)||i.issues.push({code:"invalid_value",values:n,input:s,inst:t}),i}}),DA=M("$ZodLiteral",(t,e)=>{if(oe.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");t._zod.values=new Set(e.values),t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?Dr(n):n?Dr(n.toString()):String(n)).join("|")})$`),t._zod.parse=(n,r)=>{let i=n.value;return t._zod.values.has(i)||n.issues.push({code:"invalid_value",values:e.values,input:i,inst:t}),n}}),PA=M("$ZodFile",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>{let i=n.value;return i instanceof File||n.issues.push({expected:"file",code:"invalid_type",input:i,inst:t}),n}}),RA=M("$ZodTransform",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Ki(t.constructor.name);let i=e.transform(n.value,n);if(r.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(n.value=s,n));if(i instanceof Promise)throw new Wn;return n.value=i,n}});function Xk(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}var NA=M("$ZodOptional",(t,e)=>{oe.init(t,e),t._zod.optin="optional",t._zod.optout="optional",ge(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),ge(t._zod,"pattern",()=>{let n=e.innerType._zod.pattern;return n?new RegExp(`^(${Yu(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){let i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>Xk(o,n.value)):Xk(i,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),OA=M("$ZodNullable",(t,e)=>{oe.init(t,e),ge(t._zod,"optin",()=>e.innerType._zod.optin),ge(t._zod,"optout",()=>e.innerType._zod.optout),ge(t._zod,"pattern",()=>{let n=e.innerType._zod.pattern;return n?new RegExp(`^(${Yu(n.source)}|null)$`):void 0}),ge(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),LA=M("$ZodDefault",(t,e)=>{oe.init(t,e),t._zod.optin="optional",ge(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;let i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>Jk(o,e)):Jk(i,e)}});function Jk(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}var BA=M("$ZodPrefault",(t,e)=>{oe.init(t,e),t._zod.optin="optional",ge(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),kA=M("$ZodNonOptional",(t,e)=>{oe.init(t,e),ge(t._zod,"values",()=>{let n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{let i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>Yk(o,t)):Yk(i,t)}});function Yk(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}var FA=M("$ZodSuccess",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Ki("ZodSuccess");let i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>(n.value=o.issues.length===0,n)):(n.value=i.issues.length===0,n)}}),jA=M("$ZodCatch",(t,e)=>{oe.init(t,e),ge(t._zod,"optin",()=>e.innerType._zod.optin),ge(t._zod,"optout",()=>e.innerType._zod.optout),ge(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);let i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(o=>(n.value=o.value,o.issues.length&&(n.value=e.catchValue(S(v({},n),{error:{issues:o.issues.map(s=>nn(s,r,tt()))},input:n.value})),n.issues=[]),n)):(n.value=i.value,i.issues.length&&(n.value=e.catchValue(S(v({},n),{error:{issues:i.issues.map(o=>nn(o,r,tt()))},input:n.value})),n.issues=[]),n)}}),UA=M("$ZodNaN",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>((typeof n.value!="number"||!Number.isNaN(n.value))&&n.issues.push({input:n.value,inst:t,expected:"nan",code:"invalid_type"}),n)}),zA=M("$ZodPipe",(t,e)=>{oe.init(t,e),ge(t._zod,"values",()=>e.in._zod.values),ge(t._zod,"optin",()=>e.in._zod.optin),ge(t._zod,"optout",()=>e.out._zod.optout),ge(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){let o=e.out._zod.run(n,r);return o instanceof Promise?o.then(s=>Pg(s,e.in,r)):Pg(o,e.in,r)}let i=e.in._zod.run(n,r);return i instanceof Promise?i.then(o=>Pg(o,e.out,r)):Pg(i,e.out,r)}});function Pg(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}var cd=M("$ZodCodec",(t,e)=>{oe.init(t,e),ge(t._zod,"values",()=>e.in._zod.values),ge(t._zod,"optin",()=>e.in._zod.optin),ge(t._zod,"optout",()=>e.out._zod.optout),ge(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if((r.direction||"forward")==="forward"){let o=e.in._zod.run(n,r);return o instanceof Promise?o.then(s=>Rg(s,e,r)):Rg(o,e,r)}else{let o=e.out._zod.run(n,r);return o instanceof Promise?o.then(s=>Rg(s,e,r)):Rg(o,e,r)}}});function Rg(t,e,n){if(t.issues.length)return t.aborted=!0,t;if((n.direction||"forward")==="forward"){let i=e.transform(t.value,t);return i instanceof Promise?i.then(o=>Ng(t,o,e.out,n)):Ng(t,i,e.out,n)}else{let i=e.reverseTransform(t.value,t);return i instanceof Promise?i.then(o=>Ng(t,o,e.in,n)):Ng(t,i,e.in,n)}}function Ng(t,e,n,r){return t.issues.length?(t.aborted=!0,t):n._zod.run({value:e,issues:t.issues},r)}var VA=M("$ZodReadonly",(t,e)=>{oe.init(t,e),ge(t._zod,"propValues",()=>e.innerType._zod.propValues),ge(t._zod,"values",()=>e.innerType._zod.values),ge(t._zod,"optin",()=>e.innerType._zod.optin),ge(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);let i=e.innerType._zod.run(n,r);return i instanceof Promise?i.then(Kk):Kk(i)}});function Kk(t){return t.value=Object.freeze(t.value),t}var $A=M("$ZodTemplateLiteral",(t,e)=>{oe.init(t,e);let n=[];for(let r of e.parts)if(typeof r=="object"&&r!==null){if(!r._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...r._zod.traits].shift()}`);let i=r._zod.pattern instanceof RegExp?r._zod.pattern.source:r._zod.pattern;if(!i)throw new Error(`Invalid template literal part: ${r._zod.traits}`);let o=i.startsWith("^")?1:0,s=i.endsWith("$")?i.length-1:i.length;n.push(i.slice(o,s))}else if(r===null||F0.has(typeof r))n.push(Dr(`${r}`));else throw new Error(`Invalid template literal part: ${r}`);t._zod.pattern=new RegExp(`^${n.join("")}$`),t._zod.parse=(r,i)=>typeof r.value!="string"?(r.issues.push({input:r.value,inst:t,expected:"template_literal",code:"invalid_type"}),r):(t._zod.pattern.lastIndex=0,t._zod.pattern.test(r.value)||r.issues.push({input:r.value,inst:t,code:"invalid_format",format:e.format??"template_literal",pattern:t._zod.pattern.source}),r)}),GA=M("$ZodFunction",(t,e)=>(oe.init(t,e),t._def=e,t._zod.def=e,t.implement=n=>{if(typeof n!="function")throw new Error("implement() must be called with a function");return function(...r){let i=t._def.input?vg(t._def.input,r):r,o=Reflect.apply(n,this,i);return t._def.output?vg(t._def.output,o):o}},t.implementAsync=n=>{if(typeof n!="function")throw new Error("implementAsync() must be called with a function");return function(...r){return R(this,null,function*(){let i=t._def.input?yield yg(t._def.input,r):r,o=yield Reflect.apply(n,this,i);return t._def.output?yield yg(t._def.output,o):o})}},t._zod.parse=(n,r)=>typeof n.value!="function"?(n.issues.push({code:"invalid_type",expected:"function",input:n.value,inst:t}),n):(t._def.output&&t._def.output._zod.def.type==="promise"?n.value=t.implementAsync(n.value):n.value=t.implement(n.value),n),t.input=(...n)=>{let r=t.constructor;return Array.isArray(n[0])?new r({type:"function",input:new Fg({type:"tuple",items:n[0],rest:n[1]}),output:t._def.output}):new r({type:"function",input:n[0],output:t._def.output})},t.output=n=>{let r=t.constructor;return new r({type:"function",input:t._def.input,output:n})},t)),HA=M("$ZodPromise",(t,e)=>{oe.init(t,e),t._zod.parse=(n,r)=>Promise.resolve(n.value).then(i=>e.innerType._zod.run({value:i,issues:[]},r))}),WA=M("$ZodLazy",(t,e)=>{oe.init(t,e),ge(t._zod,"innerType",()=>e.getter()),ge(t._zod,"pattern",()=>t._zod.innerType._zod.pattern),ge(t._zod,"propValues",()=>t._zod.innerType._zod.propValues),ge(t._zod,"optin",()=>t._zod.innerType._zod.optin??void 0),ge(t._zod,"optout",()=>t._zod.innerType._zod.optout??void 0),t._zod.parse=(n,r)=>t._zod.innerType._zod.run(n,r)}),ZA=M("$ZodCustom",(t,e)=>{ke.init(t,e),oe.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{let r=n.value,i=e.fn(r);if(i instanceof Promise)return i.then(o=>Qk(o,n,r,t));Qk(i,n,r,t)}});function Qk(t,e,n,r){if(!t){let i={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(i.params=r._zod.def.params),e.issues.push(Cc(i))}}var ld={};Tt(ld,{ar:()=>oF,az:()=>sF,be:()=>cF,ca:()=>lF,cs:()=>uF,da:()=>dF,de:()=>fF,en:()=>jg,eo:()=>hF,es:()=>pF,fa:()=>mF,fi:()=>gF,fr:()=>vF,frCA:()=>yF,he:()=>_F,hu:()=>bF,id:()=>xF,is:()=>EF,it:()=>wF,ja:()=>AF,kh:()=>IF,ko:()=>TF,mk:()=>SF,ms:()=>CF,nl:()=>MF,no:()=>DF,ota:()=>PF,pl:()=>NF,ps:()=>RF,pt:()=>OF,ru:()=>BF,sl:()=>kF,sv:()=>FF,ta:()=>jF,th:()=>UF,tr:()=>zF,ua:()=>VF,ur:()=>$F,vi:()=>GF,yo:()=>ZF,zhCN:()=>HF,zhTW:()=>WF});var YK=()=>{let t={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return i=>{switch(i.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${i.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${H(i.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${i.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${i.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${i.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${i.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${i.minimum.toString()} ${s.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${i.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${i.prefix}"`:o.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${o.suffix}"`:o.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${o.includes}"`:o.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${o.pattern}`:`${r[o.format]??i.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${i.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${i.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${i.keys.length>1?"\u0629":""}: ${N(i.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${i.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${i.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}};function oF(){return{localeError:YK()}}var KK=()=>{let t={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${i.expected}, daxil olan ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${H(i.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${i.origin??"d\u0259y\u0259r"} ${o}${i.maximum.toString()} ${s.unit??"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${i.origin??"d\u0259y\u0259r"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${i.origin} ${o}${i.minimum.toString()} ${s.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${o.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:o.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${o.suffix}" il\u0259 bitm\u0259lidir`:o.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${o.includes}" daxil olmal\u0131d\u0131r`:o.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${o.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${r[o.format]??i.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${i.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${i.keys.length>1?"lar":""}: ${N(i.keys,", ")}`;case"invalid_key":return`${i.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${i.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};function sF(){return{localeError:KK()}}function aF(t,e,n,r){let i=Math.abs(t),o=i%10,s=i%100;return s>=11&&s<=19?r:o===1?e:o>=2&&o<=4?n:r}var QK=()=>{let t={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0456\u045E";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${i.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${H(i.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);if(s){let a=Number(i.maximum),c=aF(a,s.unit.one,s.unit.few,s.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${s.verb} ${o}${i.maximum.toString()} ${c}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);if(s){let a=Number(i.minimum),c=aF(a,s.unit.one,s.unit.few,s.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${s.verb} ${o}${i.minimum.toString()} ${c}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${r[o.format]??i.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${i.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${N(i.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${i.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${i.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};function cF(){return{localeError:QK()}}var e7=()=>{let t={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return i=>{switch(i.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${i.expected}, s'ha rebut ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Valor inv\xE0lid: s'esperava ${H(i.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${N(i.values," o ")}`;case"too_big":{let o=i.inclusive?"com a m\xE0xim":"menys de",s=e(i.origin);return s?`Massa gran: s'esperava que ${i.origin??"el valor"} contingu\xE9s ${o} ${i.maximum.toString()} ${s.unit??"elements"}`:`Massa gran: s'esperava que ${i.origin??"el valor"} fos ${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?"com a m\xEDnim":"m\xE9s de",s=e(i.origin);return s?`Massa petit: s'esperava que ${i.origin} contingu\xE9s ${o} ${i.minimum.toString()} ${s.unit}`:`Massa petit: s'esperava que ${i.origin} fos ${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${o.prefix}"`:o.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${o.suffix}"`:o.format==="includes"?`Format inv\xE0lid: ha d'incloure "${o.includes}"`:o.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${o.pattern}`:`Format inv\xE0lid per a ${r[o.format]??i.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${i.divisor}`;case"unrecognized_keys":return`Clau${i.keys.length>1?"s":""} no reconeguda${i.keys.length>1?"s":""}: ${N(i.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${i.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${i.origin}`;default:return"Entrada inv\xE0lida"}}};function lF(){return{localeError:e7()}}var t7=()=>{let t={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(i))return"pole";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return i=>{switch(i.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${i.expected}, obdr\u017Eeno ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${H(i.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${i.origin??"hodnota"} mus\xED m\xEDt ${o}${i.maximum.toString()} ${s.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${i.origin??"hodnota"} mus\xED b\xFDt ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${i.origin??"hodnota"} mus\xED m\xEDt ${o}${i.minimum.toString()} ${s.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${i.origin??"hodnota"} mus\xED b\xFDt ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${o.prefix}"`:o.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${o.suffix}"`:o.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${o.includes}"`:o.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${o.pattern}`:`Neplatn\xFD form\xE1t ${r[o.format]??i.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${i.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${N(i.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${i.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${i.origin}`;default:return"Neplatn\xFD vstup"}}};function uF(){return{localeError:t7()}}var n7=()=>{let t={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},e={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function n(s){return t[s]??null}function r(s){return e[s]??s}let i=s=>{let a=typeof s;switch(a){case"number":return Number.isNaN(s)?"NaN":"tal";case"object":return Array.isArray(s)?"liste":s===null?"null":Object.getPrototypeOf(s)!==Object.prototype&&s.constructor?s.constructor.name:"objekt"}return a},o={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return s=>{switch(s.code){case"invalid_type":return`Ugyldigt input: forventede ${r(s.expected)}, fik ${r(i(s.input))}`;case"invalid_value":return s.values.length===1?`Ugyldig v\xE6rdi: forventede ${H(s.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${N(s.values,"|")}`;case"too_big":{let a=s.inclusive?"<=":"<",c=n(s.origin),l=r(s.origin);return c?`For stor: forventede ${l??"value"} ${c.verb} ${a} ${s.maximum.toString()} ${c.unit??"elementer"}`:`For stor: forventede ${l??"value"} havde ${a} ${s.maximum.toString()}`}case"too_small":{let a=s.inclusive?">=":">",c=n(s.origin),l=r(s.origin);return c?`For lille: forventede ${l} ${c.verb} ${a} ${s.minimum.toString()} ${c.unit}`:`For lille: forventede ${l} havde ${a} ${s.minimum.toString()}`}case"invalid_format":{let a=s;return a.format==="starts_with"?`Ugyldig streng: skal starte med "${a.prefix}"`:a.format==="ends_with"?`Ugyldig streng: skal ende med "${a.suffix}"`:a.format==="includes"?`Ugyldig streng: skal indeholde "${a.includes}"`:a.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${a.pattern}`:`Ugyldig ${o[a.format]??s.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${s.divisor}`;case"unrecognized_keys":return`${s.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${N(s.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${s.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${s.origin}`;default:return"Ugyldigt input"}}};function dF(){return{localeError:n7()}}var r7=()=>{let t={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"Zahl";case"object":{if(Array.isArray(i))return"Array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return i=>{switch(i.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${i.expected}, erhalten ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Ung\xFCltige Eingabe: erwartet ${H(i.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Zu gro\xDF: erwartet, dass ${i.origin??"Wert"} ${o}${i.maximum.toString()} ${s.unit??"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${i.origin??"Wert"} ${o}${i.maximum.toString()} ist`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Zu klein: erwartet, dass ${i.origin} ${o}${i.minimum.toString()} ${s.unit} hat`:`Zu klein: erwartet, dass ${i.origin} ${o}${i.minimum.toString()} ist`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ung\xFCltiger String: muss mit "${o.prefix}" beginnen`:o.format==="ends_with"?`Ung\xFCltiger String: muss mit "${o.suffix}" enden`:o.format==="includes"?`Ung\xFCltiger String: muss "${o.includes}" enthalten`:o.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${o.pattern} entsprechen`:`Ung\xFCltig: ${r[o.format]??i.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${i.divisor} sein`;case"unrecognized_keys":return`${i.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${N(i.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${i.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${i.origin}`;default:return"Ung\xFCltige Eingabe"}}};function fF(){return{localeError:r7()}}var i7=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},o7=()=>{let t={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function e(r){return t[r]??null}let n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return r=>{switch(r.code){case"invalid_type":return`Invalid input: expected ${r.expected}, received ${i7(r.input)}`;case"invalid_value":return r.values.length===1?`Invalid input: expected ${H(r.values[0])}`:`Invalid option: expected one of ${N(r.values,"|")}`;case"too_big":{let i=r.inclusive?"<=":"<",o=e(r.origin);return o?`Too big: expected ${r.origin??"value"} to have ${i}${r.maximum.toString()} ${o.unit??"elements"}`:`Too big: expected ${r.origin??"value"} to be ${i}${r.maximum.toString()}`}case"too_small":{let i=r.inclusive?">=":">",o=e(r.origin);return o?`Too small: expected ${r.origin} to have ${i}${r.minimum.toString()} ${o.unit}`:`Too small: expected ${r.origin} to be ${i}${r.minimum.toString()}`}case"invalid_format":{let i=r;return i.format==="starts_with"?`Invalid string: must start with "${i.prefix}"`:i.format==="ends_with"?`Invalid string: must end with "${i.suffix}"`:i.format==="includes"?`Invalid string: must include "${i.includes}"`:i.format==="regex"?`Invalid string: must match pattern ${i.pattern}`:`Invalid ${n[i.format]??r.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${r.divisor}`;case"unrecognized_keys":return`Unrecognized key${r.keys.length>1?"s":""}: ${N(r.keys,", ")}`;case"invalid_key":return`Invalid key in ${r.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${r.origin}`;default:return"Invalid input"}}};function jg(){return{localeError:o7()}}var s7=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"nombro";case"object":{if(Array.isArray(t))return"tabelo";if(t===null)return"senvalora";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},a7=()=>{let t={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function e(r){return t[r]??null}let n={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return r=>{switch(r.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${r.expected}, ricevi\u011Dis ${s7(r.input)}`;case"invalid_value":return r.values.length===1?`Nevalida enigo: atendi\u011Dis ${H(r.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${N(r.values,"|")}`;case"too_big":{let i=r.inclusive?"<=":"<",o=e(r.origin);return o?`Tro granda: atendi\u011Dis ke ${r.origin??"valoro"} havu ${i}${r.maximum.toString()} ${o.unit??"elementojn"}`:`Tro granda: atendi\u011Dis ke ${r.origin??"valoro"} havu ${i}${r.maximum.toString()}`}case"too_small":{let i=r.inclusive?">=":">",o=e(r.origin);return o?`Tro malgranda: atendi\u011Dis ke ${r.origin} havu ${i}${r.minimum.toString()} ${o.unit}`:`Tro malgranda: atendi\u011Dis ke ${r.origin} estu ${i}${r.minimum.toString()}`}case"invalid_format":{let i=r;return i.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${i.prefix}"`:i.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${i.suffix}"`:i.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${i.includes}"`:i.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${i.pattern}`:`Nevalida ${n[i.format]??r.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${r.divisor}`;case"unrecognized_keys":return`Nekonata${r.keys.length>1?"j":""} \u015Dlosilo${r.keys.length>1?"j":""}: ${N(r.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${r.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${r.origin}`;default:return"Nevalida enigo"}}};function hF(){return{localeError:a7()}}var c7=()=>{let t={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(i))return"arreglo";if(i===null)return"nulo";if(Object.getPrototypeOf(i)!==Object.prototype)return i.constructor.name}}return o},r={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return i=>{switch(i.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${i.expected}, recibido ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Entrada inv\xE1lida: se esperaba ${H(i.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Demasiado grande: se esperaba que ${i.origin??"valor"} tuviera ${o}${i.maximum.toString()} ${s.unit??"elementos"}`:`Demasiado grande: se esperaba que ${i.origin??"valor"} fuera ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Demasiado peque\xF1o: se esperaba que ${i.origin} tuviera ${o}${i.minimum.toString()} ${s.unit}`:`Demasiado peque\xF1o: se esperaba que ${i.origin} fuera ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${o.prefix}"`:o.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${o.suffix}"`:o.format==="includes"?`Cadena inv\xE1lida: debe incluir "${o.includes}"`:o.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${o.pattern}`:`Inv\xE1lido ${r[o.format]??i.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${i.divisor}`;case"unrecognized_keys":return`Llave${i.keys.length>1?"s":""} desconocida${i.keys.length>1?"s":""}: ${N(i.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${i.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${i.origin}`;default:return"Entrada inv\xE1lida"}}};function pF(){return{localeError:c7()}}var l7=()=>{let t={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(i))return"\u0622\u0631\u0627\u06CC\u0647";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return i=>{switch(i.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${i.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${n(i.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":return i.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${H(i.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${N(i.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${i.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${i.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} ${s.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:o.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:o.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${o.includes}" \u0628\u0627\u0634\u062F`:o.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${o.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${r[o.format]??i.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${i.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${i.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${N(i.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${i.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${i.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}};function mF(){return{localeError:l7()}}var u7=()=>{let t={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return i=>{switch(i.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${i.expected}, oli ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${H(i.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Liian suuri: ${s.subject} t\xE4ytyy olla ${o}${i.maximum.toString()} ${s.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Liian pieni: ${s.subject} t\xE4ytyy olla ${o}${i.minimum.toString()} ${s.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${o.prefix}"`:o.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${o.suffix}"`:o.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${o.includes}"`:o.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${o.pattern}`:`Virheellinen ${r[o.format]??i.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${i.divisor} monikerta`;case"unrecognized_keys":return`${i.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${N(i.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};function gF(){return{localeError:u7()}}var d7=()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"nombre";case"object":{if(Array.isArray(i))return"tableau";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return i=>{switch(i.code){case"invalid_type":return`Entr\xE9e invalide : ${i.expected} attendu, ${n(i.input)} re\xE7u`;case"invalid_value":return i.values.length===1?`Entr\xE9e invalide : ${H(i.values[0])} attendu`:`Option invalide : une valeur parmi ${N(i.values,"|")} attendue`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Trop grand : ${i.origin??"valeur"} doit ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"\xE9l\xE9ment(s)"}`:`Trop grand : ${i.origin??"valeur"} doit \xEAtre ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Trop petit : ${i.origin} doit ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`Trop petit : ${i.origin} doit \xEAtre ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${o.pattern}`:`${r[o.format]??i.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${i.divisor}`;case"unrecognized_keys":return`Cl\xE9${i.keys.length>1?"s":""} non reconnue${i.keys.length>1?"s":""} : ${N(i.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${i.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${i.origin}`;default:return"Entr\xE9e invalide"}}};function vF(){return{localeError:d7()}}var f7=()=>{let t={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return i=>{switch(i.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${i.expected}, re\xE7u ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Entr\xE9e invalide : attendu ${H(i.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"\u2264":"<",s=e(i.origin);return s?`Trop grand : attendu que ${i.origin??"la valeur"} ait ${o}${i.maximum.toString()} ${s.unit}`:`Trop grand : attendu que ${i.origin??"la valeur"} soit ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?"\u2265":">",s=e(i.origin);return s?`Trop petit : attendu que ${i.origin} ait ${o}${i.minimum.toString()} ${s.unit}`:`Trop petit : attendu que ${i.origin} soit ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${o.pattern}`:`${r[o.format]??i.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${i.divisor}`;case"unrecognized_keys":return`Cl\xE9${i.keys.length>1?"s":""} non reconnue${i.keys.length>1?"s":""} : ${N(i.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${i.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${i.origin}`;default:return"Entr\xE9e invalide"}}};function yF(){return{localeError:f7()}}var h7=()=>{let t={string:{unit:"\u05D0\u05D5\u05EA\u05D9\u05D5\u05EA",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",verb:"\u05DC\u05DB\u05DC\u05D5\u05DC"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u05E7\u05DC\u05D8",email:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",url:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",emoji:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",date:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",time:"\u05D6\u05DE\u05DF ISO",duration:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",ipv4:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",ipv6:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",cidrv4:"\u05D8\u05D5\u05D5\u05D7 IPv4",cidrv6:"\u05D8\u05D5\u05D5\u05D7 IPv6",base64:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",base64url:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",json_string:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",e164:"\u05DE\u05E1\u05E4\u05E8 E.164",jwt:"JWT",template_literal:"\u05E7\u05DC\u05D8"};return i=>{switch(i.code){case"invalid_type":return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ${i.expected}, \u05D4\u05EA\u05E7\u05D1\u05DC ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA ${H(i.values[0])}`:`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05D0\u05D7\u05EA \u05DE\u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA  ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${i.origin??"value"} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${o}${i.maximum.toString()} ${s.unit??"elements"}`:`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${i.origin??"value"} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${i.origin} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${o}${i.minimum.toString()} ${s.unit}`:`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${i.origin} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1"${o.prefix}"`:o.format==="ends_with"?`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${o.suffix}"`:o.format==="includes"?`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${o.includes}"`:o.format==="regex"?`\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05E0\u05D4: \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${o.pattern}`:`${r[o.format]??i.format} \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${i.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${i.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${i.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${N(i.keys,", ")}`;case"invalid_key":return`\u05DE\u05E4\u05EA\u05D7 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${i.origin}`;case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${i.origin}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};function _F(){return{localeError:h7()}}var p7=()=>{let t={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(i))return"t\xF6mb";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return i=>{switch(i.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${i.expected}, a kapott \xE9rt\xE9k ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${H(i.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`T\xFAl nagy: ${i.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${o}${i.maximum.toString()} ${s.unit??"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${i.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${i.origin} m\xE9rete t\xFAl kicsi ${o}${i.minimum.toString()} ${s.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${i.origin} t\xFAl kicsi ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\xC9rv\xE9nytelen string: "${o.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:o.format==="ends_with"?`\xC9rv\xE9nytelen string: "${o.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:o.format==="includes"?`\xC9rv\xE9nytelen string: "${o.includes}" \xE9rt\xE9ket kell tartalmaznia`:o.format==="regex"?`\xC9rv\xE9nytelen string: ${o.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${r[o.format]??i.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${i.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${i.keys.length>1?"s":""}: ${N(i.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${i.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${i.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};function bF(){return{localeError:p7()}}var m7=()=>{let t={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Input tidak valid: diharapkan ${i.expected}, diterima ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Input tidak valid: diharapkan ${H(i.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Terlalu besar: diharapkan ${i.origin??"value"} memiliki ${o}${i.maximum.toString()} ${s.unit??"elemen"}`:`Terlalu besar: diharapkan ${i.origin??"value"} menjadi ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Terlalu kecil: diharapkan ${i.origin} memiliki ${o}${i.minimum.toString()} ${s.unit}`:`Terlalu kecil: diharapkan ${i.origin} menjadi ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`String tidak valid: harus dimulai dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak valid: harus berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak valid: harus menyertakan "${o.includes}"`:o.format==="regex"?`String tidak valid: harus sesuai pola ${o.pattern}`:`${r[o.format]??i.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${i.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${i.keys.length>1?"s":""}: ${N(i.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${i.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${i.origin}`;default:return"Input tidak valid"}}};function xF(){return{localeError:m7()}}var g7=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(t))return"fylki";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},v7=()=>{let t={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function e(r){return t[r]??null}let n={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return r=>{switch(r.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${g7(r.input)} \xFEar sem \xE1 a\xF0 vera ${r.expected}`;case"invalid_value":return r.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${H(r.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${N(r.values,"|")}`;case"too_big":{let i=r.inclusive?"<=":"<",o=e(r.origin);return o?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${r.origin??"gildi"} hafi ${i}${r.maximum.toString()} ${o.unit??"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${r.origin??"gildi"} s\xE9 ${i}${r.maximum.toString()}`}case"too_small":{let i=r.inclusive?">=":">",o=e(r.origin);return o?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${r.origin} hafi ${i}${r.minimum.toString()} ${o.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${r.origin} s\xE9 ${i}${r.minimum.toString()}`}case"invalid_format":{let i=r;return i.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${i.prefix}"`:i.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${i.suffix}"`:i.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${i.includes}"`:i.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${i.pattern}`:`Rangt ${n[i.format]??r.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${r.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${r.keys.length>1?"ir lyklar":"ur lykill"}: ${N(r.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${r.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${r.origin}`;default:return"Rangt gildi"}}};function EF(){return{localeError:v7()}}var y7=()=>{let t={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"numero";case"object":{if(Array.isArray(i))return"vettore";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Input non valido: atteso ${i.expected}, ricevuto ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Input non valido: atteso ${H(i.values[0])}`:`Opzione non valida: atteso uno tra ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Troppo grande: ${i.origin??"valore"} deve avere ${o}${i.maximum.toString()} ${s.unit??"elementi"}`:`Troppo grande: ${i.origin??"valore"} deve essere ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Troppo piccolo: ${i.origin} deve avere ${o}${i.minimum.toString()} ${s.unit}`:`Troppo piccolo: ${i.origin} deve essere ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Stringa non valida: deve iniziare con "${o.prefix}"`:o.format==="ends_with"?`Stringa non valida: deve terminare con "${o.suffix}"`:o.format==="includes"?`Stringa non valida: deve includere "${o.includes}"`:o.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${o.pattern}`:`Invalid ${r[o.format]??i.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${i.divisor}`;case"unrecognized_keys":return`Chiav${i.keys.length>1?"i":"e"} non riconosciut${i.keys.length>1?"e":"a"}: ${N(i.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${i.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${i.origin}`;default:return"Input non valido"}}};function wF(){return{localeError:y7()}}var _7=()=>{let t={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(i))return"\u914D\u5217";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return i=>{switch(i.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${i.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${n(i.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":return i.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${H(i.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${N(i.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let o=i.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",s=e(i.origin);return s?`\u5927\u304D\u3059\u304E\u308B\u5024: ${i.origin??"\u5024"}\u306F${i.maximum.toString()}${s.unit??"\u8981\u7D20"}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${i.origin??"\u5024"}\u306F${i.maximum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let o=i.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",s=e(i.origin);return s?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${i.origin}\u306F${i.minimum.toString()}${s.unit}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${i.origin}\u306F${i.minimum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${o.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${r[o.format]??i.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${i.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${i.keys.length>1?"\u7FA4":""}: ${N(i.keys,"\u3001")}`;case"invalid_key":return`${i.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${i.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};function AF(){return{localeError:_7()}}var b7=()=>{let t={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(i))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(i===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return i=>{switch(i.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${H(i.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${i.maximum.toString()} ${s.unit??"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin} ${o} ${i.minimum.toString()} ${s.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin} ${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${o.prefix}"`:o.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${o.suffix}"`:o.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${o.includes}"`:o.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${o.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${r[o.format]??i.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${i.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${N(i.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${i.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${i.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}};function IF(){return{localeError:b7()}}var x7=()=>{let t={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return i=>{switch(i.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${i.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${n(i.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":return i.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${H(i.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${N(i.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let o=i.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",s=o==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",a=e(i.origin),c=a?.unit??"\uC694\uC18C";return a?`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${i.maximum.toString()}${c} ${o}${s}`:`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${i.maximum.toString()} ${o}${s}`}case"too_small":{let o=i.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",s=o==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",a=e(i.origin),c=a?.unit??"\uC694\uC18C";return a?`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${i.minimum.toString()}${c} ${o}${s}`:`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${i.minimum.toString()} ${o}${s}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:o.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${o.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${r[o.format]??i.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${i.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${N(i.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${i.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${i.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}};function TF(){return{localeError:x7()}}var E7=()=>{let t={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(i))return"\u043D\u0438\u0437\u0430";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return i=>{switch(i.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Invalid input: expected ${H(i.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${o}${i.maximum.toString()} ${s.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin} \u0434\u0430 \u0438\u043C\u0430 ${o}${i.minimum.toString()} ${s.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${o.pattern}`:`Invalid ${r[o.format]??i.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${N(i.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${i.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${i.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};function SF(){return{localeError:E7()}}var w7=()=>{let t={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"nombor";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Input tidak sah: dijangka ${i.expected}, diterima ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Input tidak sah: dijangka ${H(i.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Terlalu besar: dijangka ${i.origin??"nilai"} ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"elemen"}`:`Terlalu besar: dijangka ${i.origin??"nilai"} adalah ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Terlalu kecil: dijangka ${i.origin} ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`Terlalu kecil: dijangka ${i.origin} adalah ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`String tidak sah: mesti bermula dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak sah: mesti mengandungi "${o.includes}"`:o.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${o.pattern}`:`${r[o.format]??i.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${i.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${N(i.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${i.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${i.origin}`;default:return"Input tidak sah"}}};function CF(){return{localeError:w7()}}var A7=()=>{let t={string:{unit:"tekens"},file:{unit:"bytes"},array:{unit:"elementen"},set:{unit:"elementen"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"getal";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return i=>{switch(i.code){case"invalid_type":return`Ongeldige invoer: verwacht ${i.expected}, ontving ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Ongeldige invoer: verwacht ${H(i.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Te lang: verwacht dat ${i.origin??"waarde"} ${o}${i.maximum.toString()} ${s.unit??"elementen"} bevat`:`Te lang: verwacht dat ${i.origin??"waarde"} ${o}${i.maximum.toString()} is`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Te kort: verwacht dat ${i.origin} ${o}${i.minimum.toString()} ${s.unit} bevat`:`Te kort: verwacht dat ${i.origin} ${o}${i.minimum.toString()} is`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ongeldige tekst: moet met "${o.prefix}" beginnen`:o.format==="ends_with"?`Ongeldige tekst: moet op "${o.suffix}" eindigen`:o.format==="includes"?`Ongeldige tekst: moet "${o.includes}" bevatten`:o.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${o.pattern}`:`Ongeldig: ${r[o.format]??i.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${i.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${i.keys.length>1?"s":""}: ${N(i.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${i.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${i.origin}`;default:return"Ongeldige invoer"}}};function MF(){return{localeError:A7()}}var I7=()=>{let t={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"tall";case"object":{if(Array.isArray(i))return"liste";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Ugyldig input: forventet ${i.expected}, fikk ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Ugyldig verdi: forventet ${H(i.values[0])}`:`Ugyldig valg: forventet en av ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`For stor(t): forventet ${i.origin??"value"} til \xE5 ha ${o}${i.maximum.toString()} ${s.unit??"elementer"}`:`For stor(t): forventet ${i.origin??"value"} til \xE5 ha ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`For lite(n): forventet ${i.origin} til \xE5 ha ${o}${i.minimum.toString()} ${s.unit}`:`For lite(n): forventet ${i.origin} til \xE5 ha ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${o.prefix}"`:o.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${o.suffix}"`:o.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${o.includes}"`:o.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${o.pattern}`:`Ugyldig ${r[o.format]??i.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${N(i.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${i.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${i.origin}`;default:return"Ugyldig input"}}};function DF(){return{localeError:I7()}}var T7=()=>{let t={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"numara";case"object":{if(Array.isArray(i))return"saf";if(i===null)return"gayb";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return i=>{switch(i.code){case"invalid_type":return`F\xE2sit giren: umulan ${i.expected}, al\u0131nan ${n(i.input)}`;case"invalid_value":return i.values.length===1?`F\xE2sit giren: umulan ${H(i.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Fazla b\xFCy\xFCk: ${i.origin??"value"}, ${o}${i.maximum.toString()} ${s.unit??"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${i.origin??"value"}, ${o}${i.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Fazla k\xFC\xE7\xFCk: ${i.origin}, ${o}${i.minimum.toString()} ${s.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${i.origin}, ${o}${i.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let o=i;return o.format==="starts_with"?`F\xE2sit metin: "${o.prefix}" ile ba\u015Flamal\u0131.`:o.format==="ends_with"?`F\xE2sit metin: "${o.suffix}" ile bitmeli.`:o.format==="includes"?`F\xE2sit metin: "${o.includes}" ihtiv\xE2 etmeli.`:o.format==="regex"?`F\xE2sit metin: ${o.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${r[o.format]??i.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${i.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${i.keys.length>1?"s":""}: ${N(i.keys,", ")}`;case"invalid_key":return`${i.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${i.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};function PF(){return{localeError:T7()}}var S7=()=>{let t={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(i))return"\u0627\u0631\u06D0";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return i=>{switch(i.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${i.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${n(i.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":return i.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${H(i.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${N(i.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${i.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${i.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} \u0648\u064A`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} ${s.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} \u0648\u064A`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:o.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:o.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${o.includes}" \u0648\u0644\u0631\u064A`:o.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${o.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${r[o.format]??i.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${i.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${i.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${N(i.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${i.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${i.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}};function RF(){return{localeError:S7()}}var C7=()=>{let t={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"liczba";case"object":{if(Array.isArray(i))return"tablica";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return i=>{switch(i.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${i.expected}, otrzymano ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${H(i.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${i.maximum.toString()} ${s.unit??"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${i.minimum.toString()} ${s.unit??"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${o.prefix}"`:o.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${o.suffix}"`:o.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${o.includes}"`:o.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${o.pattern}`:`Nieprawid\u0142ow(y/a/e) ${r[o.format]??i.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${i.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${i.keys.length>1?"s":""}: ${N(i.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${i.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${i.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};function NF(){return{localeError:C7()}}var M7=()=>{let t={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(i))return"array";if(i===null)return"nulo";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return i=>{switch(i.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${i.expected}, recebido ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Entrada inv\xE1lida: esperado ${H(i.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Muito grande: esperado que ${i.origin??"valor"} tivesse ${o}${i.maximum.toString()} ${s.unit??"elementos"}`:`Muito grande: esperado que ${i.origin??"valor"} fosse ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Muito pequeno: esperado que ${i.origin} tivesse ${o}${i.minimum.toString()} ${s.unit}`:`Muito pequeno: esperado que ${i.origin} fosse ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${o.prefix}"`:o.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${o.suffix}"`:o.format==="includes"?`Texto inv\xE1lido: deve incluir "${o.includes}"`:o.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${o.pattern}`:`${r[o.format]??i.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${i.divisor}`;case"unrecognized_keys":return`Chave${i.keys.length>1?"s":""} desconhecida${i.keys.length>1?"s":""}: ${N(i.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${i.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${i.origin}`;default:return"Campo inv\xE1lido"}}};function OF(){return{localeError:M7()}}function LF(t,e,n,r){let i=Math.abs(t),o=i%10,s=i%100;return s>=11&&s<=19?r:o===1?e:o>=2&&o<=4?n:r}var D7=()=>{let t={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${i.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${H(i.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);if(s){let a=Number(i.maximum),c=LF(a,s.unit.one,s.unit.few,s.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${i.maximum.toString()} ${c}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);if(s){let a=Number(i.minimum),c=LF(a,s.unit.one,s.unit.few,s.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${i.minimum.toString()} ${c}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin} \u0431\u0443\u0434\u0435\u0442 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${r[o.format]??i.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${i.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${i.keys.length>1?"\u0438":""}: ${N(i.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${i.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${i.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};function BF(){return{localeError:D7()}}var P7=()=>{let t={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(i))return"tabela";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return i=>{switch(i.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${i.expected}, prejeto ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${H(i.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Preveliko: pri\u010Dakovano, da bo ${i.origin??"vrednost"} imelo ${o}${i.maximum.toString()} ${s.unit??"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${i.origin??"vrednost"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Premajhno: pri\u010Dakovano, da bo ${i.origin} imelo ${o}${i.minimum.toString()} ${s.unit}`:`Premajhno: pri\u010Dakovano, da bo ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${o.prefix}"`:o.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${o.suffix}"`:o.format==="includes"?`Neveljaven niz: mora vsebovati "${o.includes}"`:o.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${o.pattern}`:`Neveljaven ${r[o.format]??i.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${i.divisor}`;case"unrecognized_keys":return`Neprepoznan${i.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${N(i.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${i.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${i.origin}`;default:return"Neveljaven vnos"}}};function kF(){return{localeError:P7()}}var R7=()=>{let t={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"antal";case"object":{if(Array.isArray(i))return"lista";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return i=>{switch(i.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${i.expected}, fick ${n(i.input)}`;case"invalid_value":return i.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${H(i.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`F\xF6r stor(t): f\xF6rv\xE4ntade ${i.origin??"v\xE4rdet"} att ha ${o}${i.maximum.toString()} ${s.unit??"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${i.origin??"v\xE4rdet"} att ha ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`F\xF6r lite(t): f\xF6rv\xE4ntade ${i.origin??"v\xE4rdet"} att ha ${o}${i.minimum.toString()} ${s.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${i.origin??"v\xE4rdet"} att ha ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${o.prefix}"`:o.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${o.suffix}"`:o.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${o.includes}"`:o.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${o.pattern}"`:`Ogiltig(t) ${r[o.format]??i.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${N(i.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${i.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${i.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}};function FF(){return{localeError:R7()}}var N7=()=>{let t={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(i))return"\u0B85\u0BA3\u0BBF";if(i===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${H(i.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${N(i.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${i.maximum.toString()} ${s.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${i.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin} ${o}${i.minimum.toString()} ${s.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin} ${o}${i.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${o.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${r[o.format]??i.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${i.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${i.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${N(i.keys,", ")}`;case"invalid_key":return`${i.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${i.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};function jF(){return{localeError:N7()}}var O7=()=>{let t={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(i))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(i===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return i=>{switch(i.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${i.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${H(i.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",s=e(i.origin);return s?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.maximum.toString()} ${s.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",s=e(i.origin);return s?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.minimum.toString()} ${s.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${o.prefix}"`:o.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${o.suffix}"`:o.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${o.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:o.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${o.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${r[o.format]??i.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${i.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${N(i.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${i.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${i.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};function UF(){return{localeError:O7()}}var L7=t=>{let e=typeof t;switch(e){case"number":return Number.isNaN(t)?"NaN":"number";case"object":{if(Array.isArray(t))return"array";if(t===null)return"null";if(Object.getPrototypeOf(t)!==Object.prototype&&t.constructor)return t.constructor.name}}return e},B7=()=>{let t={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function e(r){return t[r]??null}let n={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return r=>{switch(r.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${r.expected}, al\u0131nan ${L7(r.input)}`;case"invalid_value":return r.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${H(r.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${N(r.values,"|")}`;case"too_big":{let i=r.inclusive?"<=":"<",o=e(r.origin);return o?`\xC7ok b\xFCy\xFCk: beklenen ${r.origin??"de\u011Fer"} ${i}${r.maximum.toString()} ${o.unit??"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${r.origin??"de\u011Fer"} ${i}${r.maximum.toString()}`}case"too_small":{let i=r.inclusive?">=":">",o=e(r.origin);return o?`\xC7ok k\xFC\xE7\xFCk: beklenen ${r.origin} ${i}${r.minimum.toString()} ${o.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${r.origin} ${i}${r.minimum.toString()}`}case"invalid_format":{let i=r;return i.format==="starts_with"?`Ge\xE7ersiz metin: "${i.prefix}" ile ba\u015Flamal\u0131`:i.format==="ends_with"?`Ge\xE7ersiz metin: "${i.suffix}" ile bitmeli`:i.format==="includes"?`Ge\xE7ersiz metin: "${i.includes}" i\xE7ermeli`:i.format==="regex"?`Ge\xE7ersiz metin: ${i.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${n[i.format]??r.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${r.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${r.keys.length>1?"lar":""}: ${N(r.keys,", ")}`;case"invalid_key":return`${r.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${r.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};function zF(){return{localeError:B7()}}var k7=()=>{let t={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0438\u0432";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${i.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${H(i.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin} ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin} \u0431\u0443\u0434\u0435 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${r[o.format]??i.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${i.keys.length>1?"\u0456":""}: ${N(i.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${i.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${i.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};function VF(){return{localeError:k7()}}var F7=()=>{let t={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(i))return"\u0622\u0631\u06D2";if(i===null)return"\u0646\u0644";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return i=>{switch(i.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${i.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${n(i.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":return i.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${H(i.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${N(i.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${i.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${o}${i.maximum.toString()} ${s.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${i.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${o}${i.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${i.origin} \u06A9\u06D2 ${o}${i.minimum.toString()} ${s.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${i.origin} \u06A9\u0627 ${o}${i.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${o.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${r[o.format]??i.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${i.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${i.keys.length>1?"\u0632":""}: ${N(i.keys,"\u060C ")}`;case"invalid_key":return`${i.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${i.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};function $F(){return{localeError:F7()}}var j7=()=>{let t={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(i))return"m\u1EA3ng";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return i=>{switch(i.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${i.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${H(i.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${i.origin??"gi\xE1 tr\u1ECB"} ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${i.origin??"gi\xE1 tr\u1ECB"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${i.origin} ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${o.prefix}"`:o.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${o.suffix}"`:o.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${o.includes}"`:o.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${o.pattern}`:`${r[o.format]??i.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${i.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${N(i.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${i.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${i.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};function GF(){return{localeError:j7()}}var U7=()=>{let t={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(i))return"\u6570\u7EC4";if(i===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return i=>{switch(i.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${i.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${H(i.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${i.origin??"\u503C"} ${o}${i.maximum.toString()} ${s.unit??"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${i.origin??"\u503C"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${i.origin} ${o}${i.minimum.toString()} ${s.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.prefix}" \u5F00\u5934`:o.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.suffix}" \u7ED3\u5C3E`:o.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${o.pattern}`:`\u65E0\u6548${r[o.format]??i.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${i.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${N(i.keys,", ")}`;case"invalid_key":return`${i.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${i.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};function HF(){return{localeError:U7()}}var z7=()=>{let t={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return i=>{switch(i.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${i.expected}\uFF0C\u4F46\u6536\u5230 ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${H(i.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${i.origin??"\u503C"} \u61C9\u70BA ${o}${i.maximum.toString()} ${s.unit??"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${i.origin??"\u503C"} \u61C9\u70BA ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${i.origin} \u61C9\u70BA ${o}${i.minimum.toString()} ${s.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${i.origin} \u61C9\u70BA ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.prefix}" \u958B\u982D`:o.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.suffix}" \u7D50\u5C3E`:o.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${o.pattern}`:`\u7121\u6548\u7684 ${r[o.format]??i.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${i.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${i.keys.length>1?"\u5011":""}\uFF1A${N(i.keys,"\u3001")}`;case"invalid_key":return`${i.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${i.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};function WF(){return{localeError:z7()}}var V7=()=>{let t={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function e(i){return t[i]??null}let n=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(i))return"akop\u1ECD";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},r={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return i=>{switch(i.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${i.expected}, \xE0m\u1ECD\u0300 a r\xED ${n(i.input)}`;case"invalid_value":return i.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${H(i.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${N(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${i.origin??"iye"} ${s.verb} ${o}${i.maximum} ${s.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${i.maximum}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${i.origin} ${s.verb} ${o}${i.minimum} ${s.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${i.minimum}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${o.prefix}"`:o.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${o.suffix}"`:o.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${o.includes}"`:o.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${o.pattern}`:`A\u1E63\xEC\u1E63e: ${r[o.format]??i.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${i.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${N(i.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${i.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${i.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}};function ZF(){return{localeError:V7()}}var qA=Symbol("ZodOutput"),XA=Symbol("ZodInput"),Oc=class{constructor(){this._map=new Map,this._idmap=new Map}add(e,...n){let r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){let n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){let n=e._zod.parent;if(n){let r=v({},this.get(n)??{});delete r.id;let i=v(v({},r),this._map.get(e));return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};function Ug(){return new Oc}var Pr=Ug();function JA(t,e){return new t(v({type:"string"},G(e)))}function YA(t,e){return new t(v({type:"string",coerce:!0},G(e)))}function zg(t,e){return new t(v({type:"string",format:"email",check:"string_format",abort:!1},G(e)))}function ud(t,e){return new t(v({type:"string",format:"guid",check:"string_format",abort:!1},G(e)))}function Vg(t,e){return new t(v({type:"string",format:"uuid",check:"string_format",abort:!1},G(e)))}function $g(t,e){return new t(v({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4"},G(e)))}function Gg(t,e){return new t(v({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6"},G(e)))}function Hg(t,e){return new t(v({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7"},G(e)))}function dd(t,e){return new t(v({type:"string",format:"url",check:"string_format",abort:!1},G(e)))}function Wg(t,e){return new t(v({type:"string",format:"emoji",check:"string_format",abort:!1},G(e)))}function Zg(t,e){return new t(v({type:"string",format:"nanoid",check:"string_format",abort:!1},G(e)))}function qg(t,e){return new t(v({type:"string",format:"cuid",check:"string_format",abort:!1},G(e)))}function Xg(t,e){return new t(v({type:"string",format:"cuid2",check:"string_format",abort:!1},G(e)))}function Jg(t,e){return new t(v({type:"string",format:"ulid",check:"string_format",abort:!1},G(e)))}function Yg(t,e){return new t(v({type:"string",format:"xid",check:"string_format",abort:!1},G(e)))}function Kg(t,e){return new t(v({type:"string",format:"ksuid",check:"string_format",abort:!1},G(e)))}function Qg(t,e){return new t(v({type:"string",format:"ipv4",check:"string_format",abort:!1},G(e)))}function ev(t,e){return new t(v({type:"string",format:"ipv6",check:"string_format",abort:!1},G(e)))}function tv(t,e){return new t(v({type:"string",format:"cidrv4",check:"string_format",abort:!1},G(e)))}function nv(t,e){return new t(v({type:"string",format:"cidrv6",check:"string_format",abort:!1},G(e)))}function rv(t,e){return new t(v({type:"string",format:"base64",check:"string_format",abort:!1},G(e)))}function iv(t,e){return new t(v({type:"string",format:"base64url",check:"string_format",abort:!1},G(e)))}function ov(t,e){return new t(v({type:"string",format:"e164",check:"string_format",abort:!1},G(e)))}function sv(t,e){return new t(v({type:"string",format:"jwt",check:"string_format",abort:!1},G(e)))}var KA={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function QA(t,e){return new t(v({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null},G(e)))}function eI(t,e){return new t(v({type:"string",format:"date",check:"string_format"},G(e)))}function tI(t,e){return new t(v({type:"string",format:"time",check:"string_format",precision:null},G(e)))}function nI(t,e){return new t(v({type:"string",format:"duration",check:"string_format"},G(e)))}function rI(t,e){return new t(v({type:"number",checks:[]},G(e)))}function iI(t,e){return new t(v({type:"number",coerce:!0,checks:[]},G(e)))}function oI(t,e){return new t(v({type:"number",check:"number_format",abort:!1,format:"safeint"},G(e)))}function sI(t,e){return new t(v({type:"number",check:"number_format",abort:!1,format:"float32"},G(e)))}function aI(t,e){return new t(v({type:"number",check:"number_format",abort:!1,format:"float64"},G(e)))}function cI(t,e){return new t(v({type:"number",check:"number_format",abort:!1,format:"int32"},G(e)))}function lI(t,e){return new t(v({type:"number",check:"number_format",abort:!1,format:"uint32"},G(e)))}function uI(t,e){return new t(v({type:"boolean"},G(e)))}function dI(t,e){return new t(v({type:"boolean",coerce:!0},G(e)))}function fI(t,e){return new t(v({type:"bigint"},G(e)))}function hI(t,e){return new t(v({type:"bigint",coerce:!0},G(e)))}function pI(t,e){return new t(v({type:"bigint",check:"bigint_format",abort:!1,format:"int64"},G(e)))}function mI(t,e){return new t(v({type:"bigint",check:"bigint_format",abort:!1,format:"uint64"},G(e)))}function gI(t,e){return new t(v({type:"symbol"},G(e)))}function vI(t,e){return new t(v({type:"undefined"},G(e)))}function yI(t,e){return new t(v({type:"null"},G(e)))}function _I(t){return new t({type:"any"})}function bI(t){return new t({type:"unknown"})}function xI(t,e){return new t(v({type:"never"},G(e)))}function EI(t,e){return new t(v({type:"void"},G(e)))}function wI(t,e){return new t(v({type:"date"},G(e)))}function AI(t,e){return new t(v({type:"date",coerce:!0},G(e)))}function II(t,e){return new t(v({type:"nan"},G(e)))}function oi(t,e){return new Cg(S(v({check:"less_than"},G(e)),{value:t,inclusive:!1}))}function An(t,e){return new Cg(S(v({check:"less_than"},G(e)),{value:t,inclusive:!0}))}function si(t,e){return new Mg(S(v({check:"greater_than"},G(e)),{value:t,inclusive:!1}))}function zt(t,e){return new Mg(S(v({check:"greater_than"},G(e)),{value:t,inclusive:!0}))}function TI(t){return si(0,t)}function SI(t){return oi(0,t)}function CI(t){return An(0,t)}function MI(t){return zt(0,t)}function Cs(t,e){return new xw(S(v({check:"multiple_of"},G(e)),{value:t}))}function Lc(t,e){return new Aw(S(v({check:"max_size"},G(e)),{maximum:t}))}function Ms(t,e){return new Iw(S(v({check:"min_size"},G(e)),{minimum:t}))}function fd(t,e){return new Tw(S(v({check:"size_equals"},G(e)),{size:t}))}function Bc(t,e){return new Sw(S(v({check:"max_length"},G(e)),{maximum:t}))}function io(t,e){return new Cw(S(v({check:"min_length"},G(e)),{minimum:t}))}function kc(t,e){return new Mw(S(v({check:"length_equals"},G(e)),{length:t}))}function hd(t,e){return new Dw(S(v({check:"string_format",format:"regex"},G(e)),{pattern:t}))}function pd(t){return new Pw(v({check:"string_format",format:"lowercase"},G(t)))}function md(t){return new Rw(v({check:"string_format",format:"uppercase"},G(t)))}function gd(t,e){return new Nw(S(v({check:"string_format",format:"includes"},G(e)),{includes:t}))}function vd(t,e){return new Ow(S(v({check:"string_format",format:"starts_with"},G(e)),{prefix:t}))}function yd(t,e){return new Lw(S(v({check:"string_format",format:"ends_with"},G(e)),{suffix:t}))}function DI(t,e,n){return new Bw(v({check:"property",property:t,schema:e},G(n)))}function _d(t,e){return new kw(v({check:"mime_type",mime:t},G(e)))}function ai(t){return new Fw({check:"overwrite",tx:t})}function bd(t){return ai(e=>e.normalize(t))}function xd(){return ai(t=>t.trim())}function Ed(){return ai(t=>t.toLowerCase())}function wd(){return ai(t=>t.toUpperCase())}function PI(t,e,n){return new t(v({type:"array",element:e},G(n)))}function $7(t,e,n){return new t(v({type:"union",options:e},G(n)))}function G7(t,e,n,r){return new t(v({type:"union",options:n,discriminator:e},G(r)))}function H7(t,e,n){return new t({type:"intersection",left:e,right:n})}function W7(t,e,n,r){let i=n instanceof oe,o=i?r:n,s=i?n:null;return new t(v({type:"tuple",items:e,rest:s},G(o)))}function Z7(t,e,n,r){return new t(v({type:"record",keyType:e,valueType:n},G(r)))}function q7(t,e,n,r){return new t(v({type:"map",keyType:e,valueType:n},G(r)))}function X7(t,e,n){return new t(v({type:"set",valueType:e},G(n)))}function J7(t,e,n){let r=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new t(v({type:"enum",entries:r},G(n)))}function Y7(t,e,n){return new t(v({type:"enum",entries:e},G(n)))}function K7(t,e,n){return new t(v({type:"literal",values:Array.isArray(e)?e:[e]},G(n)))}function RI(t,e){return new t(v({type:"file"},G(e)))}function Q7(t,e){return new t({type:"transform",transform:e})}function eQ(t,e){return new t({type:"optional",innerType:e})}function tQ(t,e){return new t({type:"nullable",innerType:e})}function nQ(t,e,n){return new t({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():k0(n)}})}function rQ(t,e,n){return new t(v({type:"nonoptional",innerType:e},G(n)))}function iQ(t,e){return new t({type:"success",innerType:e})}function oQ(t,e,n){return new t({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}function sQ(t,e,n){return new t({type:"pipe",in:e,out:n})}function aQ(t,e){return new t({type:"readonly",innerType:e})}function cQ(t,e,n){return new t(v({type:"template_literal",parts:e},G(n)))}function lQ(t,e){return new t({type:"lazy",getter:e})}function uQ(t,e){return new t({type:"promise",innerType:e})}function NI(t,e,n){let r=G(n);return r.abort??(r.abort=!0),new t(v({type:"custom",check:"custom",fn:e},r))}function OI(t,e,n){return new t(v({type:"custom",check:"custom",fn:e},G(n)))}function LI(t){let e=qF(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(Cc(r,n.value,e._zod.def));else{let i=r;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=n.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),n.issues.push(Cc(i))}},t(n.value,n)));return e}function qF(t,e){let n=new ke(v({check:"custom"},G(e)));return n._zod.check=t,n}function BI(t,e){let n=G(e),r=n.truthy??["true","1","yes","on","y","enabled"],i=n.falsy??["false","0","no","off","n","disabled"];n.case!=="sensitive"&&(r=r.map(h=>typeof h=="string"?h.toLowerCase():h),i=i.map(h=>typeof h=="string"?h.toLowerCase():h));let o=new Set(r),s=new Set(i),a=t.Codec??cd,c=t.Boolean??ad,l=t.String??Ss,u=new l({type:"string",error:n.error}),d=new c({type:"boolean",error:n.error}),f=new a({type:"pipe",in:u,out:d,transform:(h,p)=>{let g=h;return n.case!=="sensitive"&&(g=g.toLowerCase()),o.has(g)?!0:s.has(g)?!1:(p.issues.push({code:"invalid_value",expected:"stringbool",values:[...o,...s],input:p.value,inst:f,continue:!1}),{})},reverseTransform:(h,p)=>h===!0?r[0]||"true":i[0]||"false",error:n.error});return f}function Fc(t,e,n,r={}){let i=G(r),o=v(S(v({},G(r)),{check:"string_format",type:"string",format:e,fn:typeof n=="function"?n:a=>n.test(a)}),i);return n instanceof RegExp&&(o.pattern=n),new t(o)}var Ad=class{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??Pr,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,n={path:[],schemaPath:[]}){var r;let i=e._zod.def,o={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},s=this.seen.get(e);if(s)return s.count++,n.schemaPath.includes(e)&&(s.cycle=n.path),s.schema;let a={schema:{},count:1,cycle:void 0,path:n.path};this.seen.set(e,a);let c=e._zod.toJSONSchema?.();if(c)a.schema=c;else{let d=S(v({},n),{schemaPath:[...n.schemaPath,e],path:n.path}),f=e._zod.parent;if(f)a.ref=f,this.process(f,d),this.seen.get(f).isParent=!0;else{let h=a.schema;switch(i.type){case"string":{let p=h;p.type="string";let{minimum:g,maximum:y,format:_,patterns:E,contentEncoding:A}=e._zod.bag;if(typeof g=="number"&&(p.minLength=g),typeof y=="number"&&(p.maxLength=y),_&&(p.format=o[_]??_,p.format===""&&delete p.format),A&&(p.contentEncoding=A),E&&E.size>0){let I=[...E];I.length===1?p.pattern=I[0].source:I.length>1&&(a.schema.allOf=[...I.map(C=>S(v({},this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{}),{pattern:C.source}))])}break}case"number":{let p=h,{minimum:g,maximum:y,format:_,multipleOf:E,exclusiveMaximum:A,exclusiveMinimum:I}=e._zod.bag;typeof _=="string"&&_.includes("int")?p.type="integer":p.type="number",typeof I=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(p.minimum=I,p.exclusiveMinimum=!0):p.exclusiveMinimum=I),typeof g=="number"&&(p.minimum=g,typeof I=="number"&&this.target!=="draft-4"&&(I>=g?delete p.minimum:delete p.exclusiveMinimum)),typeof A=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(p.maximum=A,p.exclusiveMaximum=!0):p.exclusiveMaximum=A),typeof y=="number"&&(p.maximum=y,typeof A=="number"&&this.target!=="draft-4"&&(A<=y?delete p.maximum:delete p.exclusiveMaximum)),typeof E=="number"&&(p.multipleOf=E);break}case"boolean":{let p=h;p.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(h.type="string",h.nullable=!0,h.enum=[null]):h.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{h.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let p=h,{minimum:g,maximum:y}=e._zod.bag;typeof g=="number"&&(p.minItems=g),typeof y=="number"&&(p.maxItems=y),p.type="array",p.items=this.process(i.element,S(v({},d),{path:[...d.path,"items"]}));break}case"object":{let p=h;p.type="object",p.properties={};let g=i.shape;for(let E in g)p.properties[E]=this.process(g[E],S(v({},d),{path:[...d.path,"properties",E]}));let y=new Set(Object.keys(g)),_=new Set([...y].filter(E=>{let A=i.shape[E]._zod;return this.io==="input"?A.optin===void 0:A.optout===void 0}));_.size>0&&(p.required=Array.from(_)),i.catchall?._zod.def.type==="never"?p.additionalProperties=!1:i.catchall?i.catchall&&(p.additionalProperties=this.process(i.catchall,S(v({},d),{path:[...d.path,"additionalProperties"]}))):this.io==="output"&&(p.additionalProperties=!1);break}case"union":{let p=h,g=i.options.map((y,_)=>this.process(y,S(v({},d),{path:[...d.path,"anyOf",_]})));p.anyOf=g;break}case"intersection":{let p=h,g=this.process(i.left,S(v({},d),{path:[...d.path,"allOf",0]})),y=this.process(i.right,S(v({},d),{path:[...d.path,"allOf",1]})),_=A=>"allOf"in A&&Object.keys(A).length===1,E=[..._(g)?g.allOf:[g],..._(y)?y.allOf:[y]];p.allOf=E;break}case"tuple":{let p=h;p.type="array";let g=this.target==="draft-2020-12"?"prefixItems":"items",y=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",_=i.items.map((C,D)=>this.process(C,S(v({},d),{path:[...d.path,g,D]}))),E=i.rest?this.process(i.rest,S(v({},d),{path:[...d.path,y,...this.target==="openapi-3.0"?[i.items.length]:[]]})):null;this.target==="draft-2020-12"?(p.prefixItems=_,E&&(p.items=E)):this.target==="openapi-3.0"?(p.items={anyOf:_},E&&p.items.anyOf.push(E),p.minItems=_.length,E||(p.maxItems=_.length)):(p.items=_,E&&(p.additionalItems=E));let{minimum:A,maximum:I}=e._zod.bag;typeof A=="number"&&(p.minItems=A),typeof I=="number"&&(p.maxItems=I);break}case"record":{let p=h;p.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(p.propertyNames=this.process(i.keyType,S(v({},d),{path:[...d.path,"propertyNames"]}))),p.additionalProperties=this.process(i.valueType,S(v({},d),{path:[...d.path,"additionalProperties"]}));break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let p=h,g=Ju(i.entries);g.every(y=>typeof y=="number")&&(p.type="number"),g.every(y=>typeof y=="string")&&(p.type="string"),p.enum=g;break}case"literal":{let p=h,g=[];for(let y of i.values)if(y===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof y=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");g.push(Number(y))}else g.push(y);if(g.length!==0)if(g.length===1){let y=g[0];p.type=y===null?"null":typeof y,this.target==="draft-4"||this.target==="openapi-3.0"?p.enum=[y]:p.const=y}else g.every(y=>typeof y=="number")&&(p.type="number"),g.every(y=>typeof y=="string")&&(p.type="string"),g.every(y=>typeof y=="boolean")&&(p.type="string"),g.every(y=>y===null)&&(p.type="null"),p.enum=g;break}case"file":{let p=h,g={type:"string",format:"binary",contentEncoding:"binary"},{minimum:y,maximum:_,mime:E}=e._zod.bag;y!==void 0&&(g.minLength=y),_!==void 0&&(g.maxLength=_),E?E.length===1?(g.contentMediaType=E[0],Object.assign(p,g)):p.anyOf=E.map(A=>S(v({},g),{contentMediaType:A})):Object.assign(p,g);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let p=this.process(i.innerType,d);this.target==="openapi-3.0"?(a.ref=i.innerType,h.nullable=!0):h.anyOf=[p,{type:"null"}];break}case"nonoptional":{this.process(i.innerType,d),a.ref=i.innerType;break}case"success":{let p=h;p.type="boolean";break}case"default":{this.process(i.innerType,d),a.ref=i.innerType,h.default=JSON.parse(JSON.stringify(i.defaultValue));break}case"prefault":{this.process(i.innerType,d),a.ref=i.innerType,this.io==="input"&&(h._prefault=JSON.parse(JSON.stringify(i.defaultValue)));break}case"catch":{this.process(i.innerType,d),a.ref=i.innerType;let p;try{p=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}h.default=p;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let p=h,g=e._zod.pattern;if(!g)throw new Error("Pattern not found in template literal");p.type="string",p.pattern=g.source;break}case"pipe":{let p=this.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;this.process(p,d),a.ref=p;break}case"readonly":{this.process(i.innerType,d),a.ref=i.innerType,h.readOnly=!0;break}case"promise":{this.process(i.innerType,d),a.ref=i.innerType;break}case"optional":{this.process(i.innerType,d),a.ref=i.innerType;break}case"lazy":{let p=e._zod.innerType;this.process(p,d),a.ref=p;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}default:}}}let l=this.metadataRegistry.get(e);return l&&Object.assign(a.schema,l),this.io==="input"&&st(e)&&(delete a.schema.examples,delete a.schema.default),this.io==="input"&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(e).schema}emit(e,n){let r={cycles:n?.cycles??"ref",reused:n?.reused??"inline",external:n?.external??void 0},i=this.seen.get(e);if(!i)throw new Error("Unprocessed schema. This is a bug in Zod.");let o=u=>{let d=this.target==="draft-2020-12"?"$defs":"definitions";if(r.external){let g=r.external.registry.get(u[0])?.id,y=r.external.uri??(E=>E);if(g)return{ref:y(g)};let _=u[1].defId??u[1].schema.id??`schema${this.counter++}`;return u[1].defId=_,{defId:_,ref:`${y("__shared")}#/${d}/${_}`}}if(u[1]===i)return{ref:"#"};let h=`#/${d}/`,p=u[1].schema.id??`__schema${this.counter++}`;return{defId:p,ref:h+p}},s=u=>{if(u[1].schema.$ref)return;let d=u[1],{ref:f,defId:h}=o(u);d.def=v({},d.schema),h&&(d.defId=h);let p=d.schema;for(let g in p)delete p[g];p.$ref=f};if(r.cycles==="throw")for(let u of this.seen.entries()){let d=u[1];if(d.cycle)throw new Error(`Cycle detected: #/${d.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let u of this.seen.entries()){let d=u[1];if(e===u[0]){s(u);continue}if(r.external){let h=r.external.registry.get(u[0])?.id;if(e!==u[0]&&h){s(u);continue}}if(this.metadataRegistry.get(u[0])?.id){s(u);continue}if(d.cycle){s(u);continue}if(d.count>1&&r.reused==="ref"){s(u);continue}}let a=(u,d)=>{let f=this.seen.get(u),h=f.def??f.schema,p=v({},h);if(f.ref===null)return;let g=f.ref;if(f.ref=null,g){a(g,d);let y=this.seen.get(g).schema;y.$ref&&(d.target==="draft-7"||d.target==="draft-4"||d.target==="openapi-3.0")?(h.allOf=h.allOf??[],h.allOf.push(y)):(Object.assign(h,y),Object.assign(h,p))}f.isParent||this.override({zodSchema:u,jsonSchema:h,path:f.path??[]})};for(let u of[...this.seen.entries()].reverse())a(u[0],{target:this.target});let c={};if(this.target==="draft-2020-12"?c.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?c.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?c.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),r.external?.uri){let u=r.external.registry.get(e)?.id;if(!u)throw new Error("Schema is missing an `id` property");c.$id=r.external.uri(u)}Object.assign(c,i.def);let l=r.external?.defs??{};for(let u of this.seen.entries()){let d=u[1];d.def&&d.defId&&(l[d.defId]=d.def)}r.external||Object.keys(l).length>0&&(this.target==="draft-2020-12"?c.$defs=l:c.definitions=l);try{return JSON.parse(JSON.stringify(c))}catch{throw new Error("Error converting schema to JSON.")}}};function kI(t,e){if(t instanceof Oc){let r=new Ad(e),i={};for(let a of t._idmap.entries()){let[c,l]=a;r.process(l)}let o={},s={registry:t,uri:e?.uri,defs:i};for(let a of t._idmap.entries()){let[c,l]=a;o[c]=r.emit(l,S(v({},e),{external:s}))}if(Object.keys(i).length>0){let a=r.target==="draft-2020-12"?"$defs":"definitions";o.__shared={[a]:i}}return{schemas:o}}let n=new Ad(e);return n.process(t),n.emit(t,e)}function st(t,e){let n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);let i=t._zod.def;switch(i.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return st(i.element,n);case"object":{for(let o in i.shape)if(st(i.shape[o],n))return!0;return!1}case"union":{for(let o of i.options)if(st(o,n))return!0;return!1}case"intersection":return st(i.left,n)||st(i.right,n);case"tuple":{for(let o of i.items)if(st(o,n))return!0;return!!(i.rest&&st(i.rest,n))}case"record":return st(i.keyType,n)||st(i.valueType,n);case"map":return st(i.keyType,n)||st(i.valueType,n);case"set":return st(i.valueType,n);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return st(i.innerType,n);case"lazy":return st(i.getter(),n);case"default":return st(i.innerType,n);case"prefault":return st(i.innerType,n);case"custom":return!1;case"transform":return!0;case"pipe":return st(i.in,n)||st(i.out,n);case"success":return!1;case"catch":return!1;case"function":return!1;default:}throw new Error(`Unknown schema type: ${i.type}`)}var XF={};var dv={};Tt(dv,{ZodISODate:()=>cv,ZodISODateTime:()=>av,ZodISODuration:()=>uv,ZodISOTime:()=>lv,date:()=>jI,datetime:()=>FI,duration:()=>zI,time:()=>UI});var av=M("ZodISODateTime",(t,e)=>{Kw.init(t,e),Re.init(t,e)});function FI(t){return QA(av,t)}var cv=M("ZodISODate",(t,e)=>{Qw.init(t,e),Re.init(t,e)});function jI(t){return eI(cv,t)}var lv=M("ZodISOTime",(t,e)=>{eA.init(t,e),Re.init(t,e)});function UI(t){return tI(lv,t)}var uv=M("ZodISODuration",(t,e)=>{tA.init(t,e),Re.init(t,e)});function zI(t){return nI(uv,t)}var YF=(t,e)=>{td.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>rd(t,n)},flatten:{value:n=>nd(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Tc,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Tc,2)}},isEmpty:{get(){return t.issues.length===0}}})},fQ=M("ZodError",YF),Vt=M("ZodError",YF,{Parent:Error});var VI=Mc(Vt),$I=Dc(Vt),GI=Pc(Vt),HI=Rc(Vt),WI=_g(Vt),ZI=bg(Vt),qI=xg(Vt),XI=Eg(Vt),JI=wg(Vt),YI=Ag(Vt),KI=Ig(Vt),QI=Tg(Vt);var fe=M("ZodType",(t,e)=>(oe.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(S(v({},e),{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>Lt(t,n,r),t.brand=()=>t,t.register=(n,r)=>(n.add(t,r),t),t.parse=(n,r)=>VI(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>GI(t,n,r),t.parseAsync=(n,r)=>R(null,null,function*(){return $I(t,n,r,{callee:t.parseAsync})}),t.safeParseAsync=(n,r)=>R(null,null,function*(){return HI(t,n,r)}),t.spa=t.safeParseAsync,t.encode=(n,r)=>WI(t,n,r),t.decode=(n,r)=>ZI(t,n,r),t.encodeAsync=(n,r)=>R(null,null,function*(){return qI(t,n,r)}),t.decodeAsync=(n,r)=>R(null,null,function*(){return XI(t,n,r)}),t.safeEncode=(n,r)=>JI(t,n,r),t.safeDecode=(n,r)=>YI(t,n,r),t.safeEncodeAsync=(n,r)=>R(null,null,function*(){return KI(t,n,r)}),t.safeDecodeAsync=(n,r)=>R(null,null,function*(){return QI(t,n,r)}),t.refine=(n,r)=>t.check(k2(n,r)),t.superRefine=n=>t.check(F2(n)),t.overwrite=n=>t.check(ai(n)),t.optional=()=>hv(t),t.nullable=()=>pv(t),t.nullish=()=>hv(pv(t)),t.nonoptional=n=>I2(t,n),t.array=()=>yv(t),t.or=n=>ET([t,n]),t.and=n=>d2(t,n),t.transform=n=>mv(t,IT(n)),t.default=n=>E2(t,n),t.prefault=n=>A2(t,n),t.catch=n=>C2(t,n),t.pipe=n=>mv(t,n),t.readonly=()=>P2(t),t.describe=n=>{let r=t.clone();return Pr.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){return Pr.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Pr.get(t);let r=t.clone();return Pr.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),nT=M("_ZodString",(t,e)=>{Ss.init(t,e),fe.init(t,e);let n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(hd(...r)),t.includes=(...r)=>t.check(gd(...r)),t.startsWith=(...r)=>t.check(vd(...r)),t.endsWith=(...r)=>t.check(yd(...r)),t.min=(...r)=>t.check(io(...r)),t.max=(...r)=>t.check(Bc(...r)),t.length=(...r)=>t.check(kc(...r)),t.nonempty=(...r)=>t.check(io(1,...r)),t.lowercase=r=>t.check(pd(r)),t.uppercase=r=>t.check(md(r)),t.trim=()=>t.check(xd()),t.normalize=(...r)=>t.check(bd(...r)),t.toLowerCase=()=>t.check(Ed()),t.toUpperCase=()=>t.check(wd())}),Td=M("ZodString",(t,e)=>{Ss.init(t,e),nT.init(t,e),t.email=n=>t.check(zg(rT,n)),t.url=n=>t.check(dd(gv,n)),t.jwt=n=>t.check(sv(yT,n)),t.emoji=n=>t.check(Wg(iT,n)),t.guid=n=>t.check(ud(fv,n)),t.uuid=n=>t.check(Vg(li,n)),t.uuidv4=n=>t.check($g(li,n)),t.uuidv6=n=>t.check(Gg(li,n)),t.uuidv7=n=>t.check(Hg(li,n)),t.nanoid=n=>t.check(Zg(oT,n)),t.guid=n=>t.check(ud(fv,n)),t.cuid=n=>t.check(qg(sT,n)),t.cuid2=n=>t.check(Xg(aT,n)),t.ulid=n=>t.check(Jg(cT,n)),t.base64=n=>t.check(rv(mT,n)),t.base64url=n=>t.check(iv(gT,n)),t.xid=n=>t.check(Yg(lT,n)),t.ksuid=n=>t.check(Kg(uT,n)),t.ipv4=n=>t.check(Qg(dT,n)),t.ipv6=n=>t.check(ev(fT,n)),t.cidrv4=n=>t.check(tv(hT,n)),t.cidrv6=n=>t.check(nv(pT,n)),t.e164=n=>t.check(ov(vT,n)),t.datetime=n=>t.check(FI(n)),t.date=n=>t.check(jI(n)),t.time=n=>t.check(UI(n)),t.duration=n=>t.check(zI(n))});function eT(t){return JA(Td,t)}var Re=M("ZodStringFormat",(t,e)=>{De.init(t,e),nT.init(t,e)}),rT=M("ZodEmail",(t,e)=>{$w.init(t,e),Re.init(t,e)});function pQ(t){return zg(rT,t)}var fv=M("ZodGUID",(t,e)=>{zw.init(t,e),Re.init(t,e)});function mQ(t){return ud(fv,t)}var li=M("ZodUUID",(t,e)=>{Vw.init(t,e),Re.init(t,e)});function gQ(t){return Vg(li,t)}function vQ(t){return $g(li,t)}function yQ(t){return Gg(li,t)}function _Q(t){return Hg(li,t)}var gv=M("ZodURL",(t,e)=>{Gw.init(t,e),Re.init(t,e)});function bQ(t){return dd(gv,t)}function xQ(t){return dd(gv,v({protocol:/^https?$/,hostname:wn.domain},V.normalizeParams(t)))}var iT=M("ZodEmoji",(t,e)=>{Hw.init(t,e),Re.init(t,e)});function EQ(t){return Wg(iT,t)}var oT=M("ZodNanoID",(t,e)=>{Ww.init(t,e),Re.init(t,e)});function wQ(t){return Zg(oT,t)}var sT=M("ZodCUID",(t,e)=>{Zw.init(t,e),Re.init(t,e)});function AQ(t){return qg(sT,t)}var aT=M("ZodCUID2",(t,e)=>{qw.init(t,e),Re.init(t,e)});function IQ(t){return Xg(aT,t)}var cT=M("ZodULID",(t,e)=>{Xw.init(t,e),Re.init(t,e)});function TQ(t){return Jg(cT,t)}var lT=M("ZodXID",(t,e)=>{Jw.init(t,e),Re.init(t,e)});function SQ(t){return Yg(lT,t)}var uT=M("ZodKSUID",(t,e)=>{Yw.init(t,e),Re.init(t,e)});function CQ(t){return Kg(uT,t)}var dT=M("ZodIPv4",(t,e)=>{nA.init(t,e),Re.init(t,e)});function MQ(t){return Qg(dT,t)}var fT=M("ZodIPv6",(t,e)=>{rA.init(t,e),Re.init(t,e)});function DQ(t){return ev(fT,t)}var hT=M("ZodCIDRv4",(t,e)=>{iA.init(t,e),Re.init(t,e)});function PQ(t){return tv(hT,t)}var pT=M("ZodCIDRv6",(t,e)=>{oA.init(t,e),Re.init(t,e)});function RQ(t){return nv(pT,t)}var mT=M("ZodBase64",(t,e)=>{aA.init(t,e),Re.init(t,e)});function NQ(t){return rv(mT,t)}var gT=M("ZodBase64URL",(t,e)=>{cA.init(t,e),Re.init(t,e)});function OQ(t){return iv(gT,t)}var vT=M("ZodE164",(t,e)=>{lA.init(t,e),Re.init(t,e)});function LQ(t){return ov(vT,t)}var yT=M("ZodJWT",(t,e)=>{uA.init(t,e),Re.init(t,e)});function BQ(t){return sv(yT,t)}var Sd=M("ZodCustomStringFormat",(t,e)=>{dA.init(t,e),Re.init(t,e)});function kQ(t,e,n={}){return Fc(Sd,t,e,n)}function FQ(t){return Fc(Sd,"hostname",wn.hostname,t)}function jQ(t){return Fc(Sd,"hex",wn.hex,t)}function UQ(t,e){let n=e?.enc??"hex",r=`${t}_${n}`,i=wn[r];if(!i)throw new Error(`Unrecognized hash format: ${r}`);return Fc(Sd,r,i,e)}var Cd=M("ZodNumber",(t,e)=>{Lg.init(t,e),fe.init(t,e),t.gt=(r,i)=>t.check(si(r,i)),t.gte=(r,i)=>t.check(zt(r,i)),t.min=(r,i)=>t.check(zt(r,i)),t.lt=(r,i)=>t.check(oi(r,i)),t.lte=(r,i)=>t.check(An(r,i)),t.max=(r,i)=>t.check(An(r,i)),t.int=r=>t.check(tT(r)),t.safe=r=>t.check(tT(r)),t.positive=r=>t.check(si(0,r)),t.nonnegative=r=>t.check(zt(0,r)),t.negative=r=>t.check(oi(0,r)),t.nonpositive=r=>t.check(An(0,r)),t.multipleOf=(r,i)=>t.check(Cs(r,i)),t.step=(r,i)=>t.check(Cs(r,i)),t.finite=()=>t;let n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function KF(t){return rI(Cd,t)}var Uc=M("ZodNumberFormat",(t,e)=>{fA.init(t,e),Cd.init(t,e)});function tT(t){return oI(Uc,t)}function zQ(t){return sI(Uc,t)}function VQ(t){return aI(Uc,t)}function $Q(t){return cI(Uc,t)}function GQ(t){return lI(Uc,t)}var Md=M("ZodBoolean",(t,e)=>{ad.init(t,e),fe.init(t,e)});function QF(t){return uI(Md,t)}var Dd=M("ZodBigInt",(t,e)=>{Bg.init(t,e),fe.init(t,e),t.gte=(r,i)=>t.check(zt(r,i)),t.min=(r,i)=>t.check(zt(r,i)),t.gt=(r,i)=>t.check(si(r,i)),t.gte=(r,i)=>t.check(zt(r,i)),t.min=(r,i)=>t.check(zt(r,i)),t.lt=(r,i)=>t.check(oi(r,i)),t.lte=(r,i)=>t.check(An(r,i)),t.max=(r,i)=>t.check(An(r,i)),t.positive=r=>t.check(si(BigInt(0),r)),t.negative=r=>t.check(oi(BigInt(0),r)),t.nonpositive=r=>t.check(An(BigInt(0),r)),t.nonnegative=r=>t.check(zt(BigInt(0),r)),t.multipleOf=(r,i)=>t.check(Cs(r,i));let n=t._zod.bag;t.minValue=n.minimum??null,t.maxValue=n.maximum??null,t.format=n.format??null});function HQ(t){return fI(Dd,t)}var _T=M("ZodBigIntFormat",(t,e)=>{hA.init(t,e),Dd.init(t,e)});function WQ(t){return pI(_T,t)}function ZQ(t){return mI(_T,t)}var e2=M("ZodSymbol",(t,e)=>{pA.init(t,e),fe.init(t,e)});function qQ(t){return gI(e2,t)}var t2=M("ZodUndefined",(t,e)=>{mA.init(t,e),fe.init(t,e)});function XQ(t){return vI(t2,t)}var n2=M("ZodNull",(t,e)=>{gA.init(t,e),fe.init(t,e)});function r2(t){return yI(n2,t)}var i2=M("ZodAny",(t,e)=>{vA.init(t,e),fe.init(t,e)});function JQ(){return _I(i2)}var o2=M("ZodUnknown",(t,e)=>{yA.init(t,e),fe.init(t,e)});function jc(){return bI(o2)}var s2=M("ZodNever",(t,e)=>{_A.init(t,e),fe.init(t,e)});function bT(t){return xI(s2,t)}var a2=M("ZodVoid",(t,e)=>{bA.init(t,e),fe.init(t,e)});function YQ(t){return EI(a2,t)}var vv=M("ZodDate",(t,e)=>{xA.init(t,e),fe.init(t,e),t.min=(r,i)=>t.check(zt(r,i)),t.max=(r,i)=>t.check(An(r,i));let n=t._zod.bag;t.minDate=n.minimum?new Date(n.minimum):null,t.maxDate=n.maximum?new Date(n.maximum):null});function KQ(t){return wI(vv,t)}var c2=M("ZodArray",(t,e)=>{EA.init(t,e),fe.init(t,e),t.element=e.element,t.min=(n,r)=>t.check(io(n,r)),t.nonempty=n=>t.check(io(1,n)),t.max=(n,r)=>t.check(Bc(n,r)),t.length=(n,r)=>t.check(kc(n,r)),t.unwrap=()=>t.element});function yv(t,e){return PI(c2,t,e)}function QQ(t){let e=t._zod.def.shape;return AT(Object.keys(e))}var _v=M("ZodObject",(t,e)=>{wA.init(t,e),fe.init(t,e),V.defineLazy(t,"shape",()=>e.shape),t.keyof=()=>AT(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone(S(v({},t._zod.def),{catchall:n})),t.passthrough=()=>t.clone(S(v({},t._zod.def),{catchall:jc()})),t.loose=()=>t.clone(S(v({},t._zod.def),{catchall:jc()})),t.strict=()=>t.clone(S(v({},t._zod.def),{catchall:bT()})),t.strip=()=>t.clone(S(v({},t._zod.def),{catchall:void 0})),t.extend=n=>V.extend(t,n),t.safeExtend=n=>V.safeExtend(t,n),t.merge=n=>V.merge(t,n),t.pick=n=>V.pick(t,n),t.omit=n=>V.omit(t,n),t.partial=(...n)=>V.partial(TT,t,n[0]),t.required=(...n)=>V.required(ST,t,n[0])});function eee(t,e){let n=v({type:"object",get shape(){return V.assignProp(this,"shape",t?V.objectClone(t):{}),this.shape}},V.normalizeParams(e));return new _v(n)}function tee(t,e){return new _v(v({type:"object",get shape(){return V.assignProp(this,"shape",V.objectClone(t)),this.shape},catchall:bT()},V.normalizeParams(e)))}function nee(t,e){return new _v(v({type:"object",get shape(){return V.assignProp(this,"shape",V.objectClone(t)),this.shape},catchall:jc()},V.normalizeParams(e)))}var xT=M("ZodUnion",(t,e)=>{kg.init(t,e),fe.init(t,e),t.options=e.options});function ET(t,e){return new xT(v({type:"union",options:t},V.normalizeParams(e)))}var l2=M("ZodDiscriminatedUnion",(t,e)=>{xT.init(t,e),AA.init(t,e)});function ree(t,e,n){return new l2(v({type:"union",options:e,discriminator:t},V.normalizeParams(n)))}var u2=M("ZodIntersection",(t,e)=>{IA.init(t,e),fe.init(t,e)});function d2(t,e){return new u2({type:"intersection",left:t,right:e})}var f2=M("ZodTuple",(t,e)=>{Fg.init(t,e),fe.init(t,e),t.rest=n=>t.clone(S(v({},t._zod.def),{rest:n}))});function h2(t,e,n){let r=e instanceof oe,i=r?n:e,o=r?e:null;return new f2(v({type:"tuple",items:t,rest:o},V.normalizeParams(i)))}var wT=M("ZodRecord",(t,e)=>{TA.init(t,e),fe.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function p2(t,e,n){return new wT(v({type:"record",keyType:t,valueType:e},V.normalizeParams(n)))}function iee(t,e,n){let r=Lt(t);return r._zod.values=void 0,new wT(v({type:"record",keyType:r,valueType:e},V.normalizeParams(n)))}var m2=M("ZodMap",(t,e)=>{SA.init(t,e),fe.init(t,e),t.keyType=e.keyType,t.valueType=e.valueType});function oee(t,e,n){return new m2(v({type:"map",keyType:t,valueType:e},V.normalizeParams(n)))}var g2=M("ZodSet",(t,e)=>{CA.init(t,e),fe.init(t,e),t.min=(...n)=>t.check(Ms(...n)),t.nonempty=n=>t.check(Ms(1,n)),t.max=(...n)=>t.check(Lc(...n)),t.size=(...n)=>t.check(fd(...n))});function see(t,e){return new g2(v({type:"set",valueType:t},V.normalizeParams(e)))}var Id=M("ZodEnum",(t,e)=>{MA.init(t,e),fe.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);let n=new Set(Object.keys(e.entries));t.extract=(r,i)=>{let o={};for(let s of r)if(n.has(s))o[s]=e.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Id(S(v(S(v({},e),{checks:[]}),V.normalizeParams(i)),{entries:o}))},t.exclude=(r,i)=>{let o=v({},e.entries);for(let s of r)if(n.has(s))delete o[s];else throw new Error(`Key ${s} not found in enum`);return new Id(S(v(S(v({},e),{checks:[]}),V.normalizeParams(i)),{entries:o}))}});function AT(t,e){let n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Id(v({type:"enum",entries:n},V.normalizeParams(e)))}function aee(t,e){return new Id(v({type:"enum",entries:t},V.normalizeParams(e)))}var v2=M("ZodLiteral",(t,e)=>{DA.init(t,e),fe.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function cee(t,e){return new v2(v({type:"literal",values:Array.isArray(t)?t:[t]},V.normalizeParams(e)))}var y2=M("ZodFile",(t,e)=>{PA.init(t,e),fe.init(t,e),t.min=(n,r)=>t.check(Ms(n,r)),t.max=(n,r)=>t.check(Lc(n,r)),t.mime=(n,r)=>t.check(_d(Array.isArray(n)?n:[n],r))});function lee(t){return RI(y2,t)}var _2=M("ZodTransform",(t,e)=>{RA.init(t,e),fe.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new Ki(t.constructor.name);n.addIssue=o=>{if(typeof o=="string")n.issues.push(V.issue(o,n.value,e));else{let s=o;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=t),n.issues.push(V.issue(s))}};let i=e.transform(n.value,n);return i instanceof Promise?i.then(o=>(n.value=o,n)):(n.value=i,n)}});function IT(t){return new _2({type:"transform",transform:t})}var TT=M("ZodOptional",(t,e)=>{NA.init(t,e),fe.init(t,e),t.unwrap=()=>t._zod.def.innerType});function hv(t){return new TT({type:"optional",innerType:t})}var b2=M("ZodNullable",(t,e)=>{OA.init(t,e),fe.init(t,e),t.unwrap=()=>t._zod.def.innerType});function pv(t){return new b2({type:"nullable",innerType:t})}function uee(t){return hv(pv(t))}var x2=M("ZodDefault",(t,e)=>{LA.init(t,e),fe.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function E2(t,e){return new x2({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():V.shallowClone(e)}})}var w2=M("ZodPrefault",(t,e)=>{BA.init(t,e),fe.init(t,e),t.unwrap=()=>t._zod.def.innerType});function A2(t,e){return new w2({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():V.shallowClone(e)}})}var ST=M("ZodNonOptional",(t,e)=>{kA.init(t,e),fe.init(t,e),t.unwrap=()=>t._zod.def.innerType});function I2(t,e){return new ST(v({type:"nonoptional",innerType:t},V.normalizeParams(e)))}var T2=M("ZodSuccess",(t,e)=>{FA.init(t,e),fe.init(t,e),t.unwrap=()=>t._zod.def.innerType});function dee(t){return new T2({type:"success",innerType:t})}var S2=M("ZodCatch",(t,e)=>{jA.init(t,e),fe.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function C2(t,e){return new S2({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}var M2=M("ZodNaN",(t,e)=>{UA.init(t,e),fe.init(t,e)});function fee(t){return II(M2,t)}var CT=M("ZodPipe",(t,e)=>{zA.init(t,e),fe.init(t,e),t.in=e.in,t.out=e.out});function mv(t,e){return new CT({type:"pipe",in:t,out:e})}var MT=M("ZodCodec",(t,e)=>{CT.init(t,e),cd.init(t,e)});function hee(t,e,n){return new MT({type:"pipe",in:t,out:e,transform:n.decode,reverseTransform:n.encode})}var D2=M("ZodReadonly",(t,e)=>{VA.init(t,e),fe.init(t,e),t.unwrap=()=>t._zod.def.innerType});function P2(t){return new D2({type:"readonly",innerType:t})}var R2=M("ZodTemplateLiteral",(t,e)=>{$A.init(t,e),fe.init(t,e)});function pee(t,e){return new R2(v({type:"template_literal",parts:t},V.normalizeParams(e)))}var N2=M("ZodLazy",(t,e)=>{WA.init(t,e),fe.init(t,e),t.unwrap=()=>t._zod.def.getter()});function O2(t){return new N2({type:"lazy",getter:t})}var L2=M("ZodPromise",(t,e)=>{HA.init(t,e),fe.init(t,e),t.unwrap=()=>t._zod.def.innerType});function mee(t){return new L2({type:"promise",innerType:t})}var B2=M("ZodFunction",(t,e)=>{GA.init(t,e),fe.init(t,e)});function gee(t){return new B2({type:"function",input:Array.isArray(t?.input)?h2(t?.input):t?.input??yv(jc()),output:t?.output??jc()})}var bv=M("ZodCustom",(t,e)=>{ZA.init(t,e),fe.init(t,e)});function vee(t){let e=new ke({check:"custom"});return e._zod.check=t,e}function yee(t,e){return NI(bv,t??(()=>!0),e)}function k2(t,e={}){return OI(bv,t,e)}function F2(t){return LI(t)}function _ee(t,e={error:`Input not instance of ${t.name}`}){let n=new bv(v({type:"custom",check:"custom",fn:r=>r instanceof t,abort:!0},V.normalizeParams(e)));return n._zod.bag.Class=t,n}var bee=(...t)=>BI({Codec:MT,Boolean:Md,String:Td},...t);function xee(t){let e=O2(()=>ET([eT(t),KF(),QF(),r2(),yv(e),p2(eT(),e)]));return e}function Eee(t,e){return mv(IT(t),e)}var wee={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function Aee(t){tt({customError:t})}function Iee(){return tt().customError}var DT;DT||(DT={});var PT={};Tt(PT,{bigint:()=>Mee,boolean:()=>Cee,date:()=>Dee,number:()=>See,string:()=>Tee});function Tee(t){return YA(Td,t)}function See(t){return iI(Cd,t)}function Cee(t){return dI(Md,t)}function Mee(t){return hI(Dd,t)}function Dee(t){return AI(vv,t)}tt(jg());var Pee=["canvas"];function RT(t){try{if(typeof t=="string")return JSON.parse(t)}catch{}return t}function Vc(t,e,n,r){let i=e??r;t&&i!==void 0&&t[n](i)}function zc(t,e,n){Bo(()=>Vc(t(),e(),n))}function xv(t,e){return e.subscribe(n=>t.emit(n))}var Ree=at.object({}).passthrough().refine(t=>!0),V2=at.array(Ree),j2=at.preprocess(RT,at.union([at.literal(""),at.string().url(),V2])),Nee=j2.parse.bind(j2),U2=at.preprocess(RT,at.tuple([at.number(),at.number(),at.number()])),Oee=U2.parse.bind(U2),z2=at.preprocess(RT,at.object({x:at.number(),y:at.number(),z:at.number()})),Lee=z2.parse.bind(z2),Pd={zoom:9.5,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:!0,camera:""},$2=(()=>{let e=class e{constructor(){this.scene=Gr(void 0,{transform:Nee}),this.rotation=Gr(void 0,{transform:hh}),this.rotationX=Gr(void 0,{transform:hh}),this.zoom=Gr(void 0,{transform:hh}),this.target=Gr(void 0,{transform:Oee}),this.bounds=Gr(void 0,{transform:Lee}),this.camera=Gr(),this.interactive=Gr(!0,{transform:M1}),this.rotationChange=ca(),this.nodeClick=ca(),this.nodeDrag=ca(),this.nodeHoverStart=ca(),this.nodeHoverStop=ca(),this.http=te(bh),this.errorHandler=te(kt),this.canvas=T1.required("canvas"),this.bodyUi=pg(()=>R(this,null,function*(){let r=new hg(v({id:"bodyUI",canvas:this.canvas().nativeElement},Pd));return yield r.initialize(),r}),{initialValue:void 0}),this.sceneData=pg(()=>{let r=this.scene();if(r){if(typeof r!="string")return r}else return[];return this.http.get(r).pipe(yt(i=>V2.parse(i)),_f(i=>(this.errorHandler.handleError(i),pi([]))))},{initialValue:[]}),this.boundsZoom=aa(()=>{let r=this.bounds();return r?this.getBoundsZoom(r):void 0}),zc(this.bodyUi,this.sceneData,"setScene"),zc(this.bodyUi,this.rotation,"setRotation"),zc(this.bodyUi,this.rotationX,"setRotationX"),zc(this.bodyUi,this.target,"setTarget"),zc(this.bodyUi,this.zoom,"setZoom"),zc(this.bodyUi,this.boundsZoom,"setZoom"),Bo(r=>{let i=this.bodyUi();if(i){let o=new gt;o.add(xv(this.nodeClick,i.nodeClick$)),o.add(xv(this.nodeDrag,i.nodeDrag$)),o.add(xv(this.nodeHoverStart,i.nodeHoverStart$)),o.add(xv(this.nodeHoverStop,i.nodeHoverStop$)),o.add(()=>i.finalize()),r(()=>o.unsubscribe())}})}resetView(){let r=this.bodyUi();Vc(r,this.target(),"setTarget",Pd.target),Vc(r,this.rotation(),"setRotation",Pd.rotation),Vc(r,this.rotationX(),"setRotationX",0),Vc(r,this.zoom(),"setZoom",Pd.zoom),Vc(r,this.boundsZoom(),"setZoom")}zoomToBounds(r,i={x:48,y:48}){let o=this.getBoundsZoom(r,i);this.bodyUi()?.setZoom(o)}getBoundsZoom(r,i={x:48,y:48}){let{width:o,height:s}=this.canvas().nativeElement,a=window.devicePixelRatio;return r.x===0&&r.y===0?Pd.zoom:Math.min(Math.log2((o-i.x)/a/r.x),Math.log2((s-i.y)/a/r.y))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=B_({type:e,selectors:[["hra-body-ui"]],viewQuery:function(i,o){i&1&&Z_(o.canvas,Pee,5),i&2&&q_()},inputs:{scene:[1,"scene"],rotation:[1,"rotation"],rotationX:[1,"rotationX"],zoom:[1,"zoom"],target:[1,"target"],bounds:[1,"bounds"],camera:[1,"camera"],interactive:[1,"interactive"]},outputs:{rotationChange:"rotationChange",nodeClick:"nodeClick",nodeDrag:"nodeDrag",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop"},decls:2,vars:0,consts:[["canvas",""],["role","img"]],template:function(i,o){i&1&&uh(0,"canvas",1,0)},styles:[`:host{display:block}:host canvas{background-color:#000}
`],encapsulation:3});let t=e;return t})();aD("hra-body-ui",$2,{providers:[J_({eventCoalescing:!0}),ib()]});
