(()=>{"use strict";var e,s={},v={};function a(e){var n=v[e];if(void 0!==n)return n.exports;var r=v[e]={exports:{}};return s[e].call(r.exports,r,r.exports,a),r.exports}a.m=s,e=[],a.O=(n,r,l,o)=>{if(!r){var c=1/0;for(f=0;f<e.length;f++){for(var[r,l,o]=e[f],_=!0,t=0;t<r.length;t++)(!1&o||c>=o)&&Object.keys(a.O).every(p=>a.O[p](r[t]))?r.splice(t--,1):(_=!1,o<c&&(c=o));if(_){e.splice(f--,1);var u=l();void 0!==u&&(n=u)}}return n}o=o||0;for(var f=e.length;f>0&&e[f-1][2]>o;f--)e[f]=e[f-1];e[f]=[r,l,o]},a.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return a.d(n,{a:n}),n},a.d=(e,n)=>{for(var r in n)a.o(n,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},a.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),a.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={121:0};a.O.j=l=>0===e[l];var n=(l,o)=>{var t,u,[f,c,_]=o,i=0;if(f.some(b=>0!==e[b])){for(t in c)a.o(c,t)&&(a.m[t]=c[t]);if(_)var d=_(a)}for(l&&l(o);i<f.length;i++)a.o(e,u=f[i])&&e[u]&&e[u][0](),e[u]=0;return a.O(d)},r=self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})()})();
"use strict";(self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[]).push([[461],{343:(te,Q,ve)=>{ve(935)},935:()=>{const te=globalThis;function Q(e){return(te.__Zone_symbol_prefix||"__zone_symbol__")+e}const Te=Object.getOwnPropertyDescriptor,Le=Object.defineProperty,Ie=Object.getPrototypeOf,_t=Object.create,Et=Array.prototype.slice,Me="addEventListener",Ze="removeEventListener",Ae=Q(Me),je=Q(Ze),ae="true",le="false",Pe=Q("");function He(e,r){return Zone.current.wrap(e,r)}function xe(e,r,c,t,i){return Zone.current.scheduleMacroTask(e,r,c,t,i)}const j=Q,Ce=typeof window<"u",ge=Ce?window:void 0,$=Ce&&ge||globalThis,Tt="removeAttribute";function Ve(e,r){for(let c=e.length-1;c>=0;c--)"function"==typeof e[c]&&(e[c]=He(e[c],r+"_"+c));return e}function We(e){return!e||!1!==e.writable&&!("function"==typeof e.get&&typeof e.set>"u")}const qe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,De=!("nw"in $)&&typeof $.process<"u"&&"[object process]"===$.process.toString(),Ge=!De&&!qe&&!(!Ce||!ge.HTMLElement),Xe=typeof $.process<"u"&&"[object process]"===$.process.toString()&&!qe&&!(!Ce||!ge.HTMLElement),Se={},yt=j("enable_beforeunload"),Ye=function(e){if(!(e=e||$.event))return;let r=Se[e.type];r||(r=Se[e.type]=j("ON_PROPERTY"+e.type));const c=this||e.target||$,t=c[r];let i;return Ge&&c===ge&&"error"===e.type?(i=t&&t.call(this,e.message,e.filename,e.lineno,e.colno,e.error),!0===i&&e.preventDefault()):(i=t&&t.apply(this,arguments),"beforeunload"===e.type&&$[yt]&&"string"==typeof i?e.returnValue=i:null!=i&&!i&&e.preventDefault()),i};function $e(e,r,c){let t=Te(e,r);if(!t&&c&&Te(c,r)&&(t={enumerable:!0,configurable:!0}),!t||!t.configurable)return;const i=j("on"+r+"patched");if(e.hasOwnProperty(i)&&e[i])return;delete t.writable,delete t.value;const u=t.get,E=t.set,T=r.slice(2);let m=Se[T];m||(m=Se[T]=j("ON_PROPERTY"+T)),t.set=function(D){let d=this;!d&&e===$&&(d=$),d&&("function"==typeof d[m]&&d.removeEventListener(T,Ye),E&&E.call(d,null),d[m]=D,"function"==typeof D&&d.addEventListener(T,Ye,!1))},t.get=function(){let D=this;if(!D&&e===$&&(D=$),!D)return null;const d=D[m];if(d)return d;if(u){let w=u.call(this);if(w)return t.set.call(this,w),"function"==typeof D[Tt]&&D.removeAttribute(r),w}return null},Le(e,r,t),e[i]=!0}function Ke(e,r,c){if(r)for(let t=0;t<r.length;t++)$e(e,"on"+r[t],c);else{const t=[];for(const i in e)"on"==i.slice(0,2)&&t.push(i);for(let i=0;i<t.length;i++)$e(e,t[i],c)}}const re=j("originalInstance");function we(e){const r=$[e];if(!r)return;$[j(e)]=r,$[e]=function(){const i=Ve(arguments,e);switch(i.length){case 0:this[re]=new r;break;case 1:this[re]=new r(i[0]);break;case 2:this[re]=new r(i[0],i[1]);break;case 3:this[re]=new r(i[0],i[1],i[2]);break;case 4:this[re]=new r(i[0],i[1],i[2],i[3]);break;default:throw new Error("Arg list too long.")}},fe($[e],r);const c=new r(function(){});let t;for(t in c)"XMLHttpRequest"===e&&"responseBlob"===t||function(i){"function"==typeof c[i]?$[e].prototype[i]=function(){return this[re][i].apply(this[re],arguments)}:Le($[e].prototype,i,{set:function(u){"function"==typeof u?(this[re][i]=He(u,e+"."+i),fe(this[re][i],u)):this[re][i]=u},get:function(){return this[re][i]}})}(t);for(t in r)"prototype"!==t&&r.hasOwnProperty(t)&&($[e][t]=r[t])}function ue(e,r,c){let t=e;for(;t&&!t.hasOwnProperty(r);)t=Ie(t);!t&&e[r]&&(t=e);const i=j(r);let u=null;if(t&&(!(u=t[i])||!t.hasOwnProperty(i))&&(u=t[i]=t[r],We(t&&Te(t,r)))){const T=c(u,i,r);t[r]=function(){return T(this,arguments)},fe(t[r],u)}return u}function mt(e,r,c){let t=null;function i(u){const E=u.data;return E.args[E.cbIdx]=function(){u.invoke.apply(this,arguments)},t.apply(E.target,E.args),u}t=ue(e,r,u=>function(E,T){const m=c(E,T);return m.cbIdx>=0&&"function"==typeof T[m.cbIdx]?xe(m.name,T[m.cbIdx],m,i):u.apply(E,T)})}function fe(e,r){e[j("OriginalDelegate")]=r}let Je=!1,Be=!1;function kt(){if(Je)return Be;Je=!0;try{const e=ge.navigator.userAgent;(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/"))&&(Be=!0)}catch{}return Be}function Qe(e){return"function"==typeof e}function et(e){return"number"==typeof e}let ye=!1;if(typeof window<"u")try{const e=Object.defineProperty({},"passive",{get:function(){ye=!0}});window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch{ye=!1}const vt={useG:!0},ne={},tt={},nt=new RegExp("^"+Pe+"(\\w+)(true|false)$"),rt=j("propagationStopped");function ot(e,r){const c=(r?r(e):e)+le,t=(r?r(e):e)+ae,i=Pe+c,u=Pe+t;ne[e]={},ne[e][le]=i,ne[e][ae]=u}function bt(e,r,c,t){const i=t&&t.add||Me,u=t&&t.rm||Ze,E=t&&t.listeners||"eventListeners",T=t&&t.rmAll||"removeAllListeners",m=j(i),D="."+i+":",d="prependListener",w="."+d+":",Z=function(k,h,H){if(k.isRemoved)return;const V=k.callback;let Y;"object"==typeof V&&V.handleEvent&&(k.callback=g=>V.handleEvent(g),k.originalDelegate=V);try{k.invoke(k,h,[H])}catch(g){Y=g}const G=k.options;return G&&"object"==typeof G&&G.once&&h[u].call(h,H.type,k.originalDelegate?k.originalDelegate:k.callback,G),Y};function x(k,h,H){if(!(h=h||e.event))return;const V=k||h.target||e,Y=V[ne[h.type][H?ae:le]];if(Y){const G=[];if(1===Y.length){const g=Z(Y[0],V,h);g&&G.push(g)}else{const g=Y.slice();for(let z=0;z<g.length&&(!h||!0!==h[rt]);z++){const O=Z(g[z],V,h);O&&G.push(O)}}if(1===G.length)throw G[0];for(let g=0;g<G.length;g++){const z=G[g];r.nativeScheduleMicroTask(()=>{throw z})}}}const U=function(k){return x(this,k,!1)},K=function(k){return x(this,k,!0)};function J(k,h){if(!k)return!1;let H=!0;h&&void 0!==h.useG&&(H=h.useG);const V=h&&h.vh;let Y=!0;h&&void 0!==h.chkDup&&(Y=h.chkDup);let G=!1;h&&void 0!==h.rt&&(G=h.rt);let g=k;for(;g&&!g.hasOwnProperty(i);)g=Ie(g);if(!g&&k[i]&&(g=k),!g||g[m])return!1;const z=h&&h.eventNameToString,O={},R=g[m]=g[i],b=g[j(u)]=g[u],S=g[j(E)]=g[E],ee=g[j(T)]=g[T];let W;h&&h.prepend&&(W=g[j(h.prepend)]=g[h.prepend]);const q=H?function(s){if(!O.isExisting)return R.call(O.target,O.eventName,O.capture?K:U,O.options)}:function(s){return R.call(O.target,O.eventName,s.invoke,O.options)},A=H?function(s){if(!s.isRemoved){const l=ne[s.eventName];let v;l&&(v=l[s.capture?ae:le]);const C=v&&s.target[v];if(C)for(let y=0;y<C.length;y++)if(C[y]===s){C.splice(y,1),s.isRemoved=!0,s.removeAbortListener&&(s.removeAbortListener(),s.removeAbortListener=null),0===C.length&&(s.allRemoved=!0,s.target[v]=null);break}}if(s.allRemoved)return b.call(s.target,s.eventName,s.capture?K:U,s.options)}:function(s){return b.call(s.target,s.eventName,s.invoke,s.options)},he=h&&h.diff?h.diff:function(s,l){const v=typeof l;return"function"===v&&s.callback===l||"object"===v&&s.originalDelegate===l},de=Zone[j("UNPATCHED_EVENTS")],oe=e[j("PASSIVE_EVENTS")],a=function(s,l,v,C,y=!1,L=!1){return function(){const I=this||e;let M=arguments[0];h&&h.transferEventName&&(M=h.transferEventName(M));let B=arguments[1];if(!B)return s.apply(this,arguments);if(De&&"uncaughtException"===M)return s.apply(this,arguments);let F=!1;if("function"!=typeof B){if(!B.handleEvent)return s.apply(this,arguments);F=!0}if(V&&!V(s,B,I,arguments))return;const Ee=ye&&!!oe&&-1!==oe.indexOf(M),ie=function f(s){if("object"==typeof s&&null!==s){const l={...s};return s.signal&&(l.signal=s.signal),l}return s}(function N(s,l){return!ye&&"object"==typeof s&&s?!!s.capture:ye&&l?"boolean"==typeof s?{capture:s,passive:!0}:s?"object"==typeof s&&!1!==s.passive?{...s,passive:!0}:s:{passive:!0}:s}(arguments[2],Ee)),pe=ie?.signal;if(pe?.aborted)return;if(de)for(let ce=0;ce<de.length;ce++)if(M===de[ce])return Ee?s.call(I,M,B,ie):s.apply(this,arguments);const Ue=!!ie&&("boolean"==typeof ie||ie.capture),lt=!(!ie||"object"!=typeof ie)&&ie.once,At=Zone.current;let ze=ne[M];ze||(ot(M,z),ze=ne[M]);const ut=ze[Ue?ae:le];let Ne,ke=I[ut],ft=!1;if(ke){if(ft=!0,Y)for(let ce=0;ce<ke.length;ce++)if(he(ke[ce],B))return}else ke=I[ut]=[];const ht=I.constructor.name,dt=tt[ht];dt&&(Ne=dt[M]),Ne||(Ne=ht+l+(z?z(M):M)),O.options=ie,lt&&(O.options.once=!1),O.target=I,O.capture=Ue,O.eventName=M,O.isExisting=ft;const Re=H?vt:void 0;Re&&(Re.taskData=O),pe&&(O.options.signal=void 0);const se=At.scheduleEventTask(Ne,B,Re,v,C);if(pe){O.options.signal=pe;const ce=()=>se.zone.cancelTask(se);s.call(pe,"abort",ce,{once:!0}),se.removeAbortListener=()=>pe.removeEventListener("abort",ce)}return O.target=null,Re&&(Re.taskData=null),lt&&(O.options.once=!0),!ye&&"boolean"==typeof se.options||(se.options=ie),se.target=I,se.capture=Ue,se.eventName=M,F&&(se.originalDelegate=B),L?ke.unshift(se):ke.push(se),y?I:void 0}};return g[i]=a(R,D,q,A,G),W&&(g[d]=a(W,w,function(s){return W.call(O.target,O.eventName,s.invoke,O.options)},A,G,!0)),g[u]=function(){const s=this||e;let l=arguments[0];h&&h.transferEventName&&(l=h.transferEventName(l));const v=arguments[2],C=!!v&&("boolean"==typeof v||v.capture),y=arguments[1];if(!y)return b.apply(this,arguments);if(V&&!V(b,y,s,arguments))return;const L=ne[l];let I;L&&(I=L[C?ae:le]);const M=I&&s[I];if(M)for(let B=0;B<M.length;B++){const F=M[B];if(he(F,y))return M.splice(B,1),F.isRemoved=!0,0!==M.length||(F.allRemoved=!0,s[I]=null,C||"string"!=typeof l)||(s[Pe+"ON_PROPERTY"+l]=null),F.zone.cancelTask(F),G?s:void 0}return b.apply(this,arguments)},g[E]=function(){const s=this||e;let l=arguments[0];h&&h.transferEventName&&(l=h.transferEventName(l));const v=[],C=st(s,z?z(l):l);for(let y=0;y<C.length;y++){const L=C[y];v.push(L.originalDelegate?L.originalDelegate:L.callback)}return v},g[T]=function(){const s=this||e;let l=arguments[0];if(l){h&&h.transferEventName&&(l=h.transferEventName(l));const v=ne[l];if(v){const L=s[v[le]],I=s[v[ae]];if(L){const M=L.slice();for(let B=0;B<M.length;B++){const F=M[B];this[u].call(this,l,F.originalDelegate?F.originalDelegate:F.callback,F.options)}}if(I){const M=I.slice();for(let B=0;B<M.length;B++){const F=M[B];this[u].call(this,l,F.originalDelegate?F.originalDelegate:F.callback,F.options)}}}}else{const v=Object.keys(s);for(let C=0;C<v.length;C++){const L=nt.exec(v[C]);let I=L&&L[1];I&&"removeListener"!==I&&this[T].call(this,I)}this[T].call(this,"removeListener")}if(G)return this},fe(g[i],R),fe(g[u],b),ee&&fe(g[T],ee),S&&fe(g[E],S),!0}let X=[];for(let k=0;k<c.length;k++)X[k]=J(c[k],t);return X}function st(e,r){if(!r){const u=[];for(let E in e){const T=nt.exec(E);let m=T&&T[1];if(m&&(!r||m===r)){const D=e[E];if(D)for(let d=0;d<D.length;d++)u.push(D[d])}}return u}let c=ne[r];c||(ot(r),c=ne[r]);const t=e[c[le]],i=e[c[ae]];return t?i?t.concat(i):t.slice():i?i.slice():[]}function Pt(e,r){const c=e.Event;c&&c.prototype&&r.patchMethod(c.prototype,"stopImmediatePropagation",t=>function(i,u){i[rt]=!0,t&&t.apply(i,u)})}const Oe=j("zoneTask");function me(e,r,c,t){let i=null,u=null;c+=t;const E={};function T(D){const d=D.data;d.args[0]=function(){return D.invoke.apply(this,arguments)};const w=i.apply(e,d.args);return et(w)?d.handleId=w:(d.handle=w,d.isRefreshable=Qe(w.refresh)),D}function m(D){const{handle:d,handleId:w}=D.data;return u.call(e,d??w)}i=ue(e,r+=t,D=>function(d,w){if(Qe(w[0])){const Z={isRefreshable:!1,isPeriodic:"Interval"===t,delay:"Timeout"===t||"Interval"===t?w[1]||0:void 0,args:w},x=w[0];w[0]=function(){try{return x.apply(this,arguments)}finally{const{handle:H,handleId:V,isPeriodic:Y,isRefreshable:G}=Z;!Y&&!G&&(V?delete E[V]:H&&(H[Oe]=null))}};const U=xe(r,w[0],Z,T,m);if(!U)return U;const{handleId:K,handle:J,isRefreshable:X,isPeriodic:k}=U.data;if(K)E[K]=U;else if(J&&(J[Oe]=U,X&&!k)){const h=J.refresh;J.refresh=function(){const{zone:H,state:V}=U;return"notScheduled"===V?(U._state="scheduled",H._updateTaskCount(U,1)):"running"===V&&(U._state="scheduling"),h.call(this)}}return J??K??U}return D.apply(e,w)}),u=ue(e,c,D=>function(d,w){const Z=w[0];let x;et(Z)?(x=E[Z],delete E[Z]):(x=Z?.[Oe],x?Z[Oe]=null:x=Z),x?.type?x.cancelFn&&x.zone.cancelTask(x):D.apply(e,w)})}function it(e,r,c){if(!c||0===c.length)return r;const t=c.filter(u=>u.target===e);if(!t||0===t.length)return r;const i=t[0].ignoreProperties;return r.filter(u=>-1===i.indexOf(u))}function ct(e,r,c,t){e&&Ke(e,it(e,r,c),t)}function Fe(e){return Object.getOwnPropertyNames(e).filter(r=>r.startsWith("on")&&r.length>2).map(r=>r.substring(2))}function It(e,r,c,t,i){const u=Zone.__symbol__(t);if(r[u])return;const E=r[u]=r[t];r[t]=function(T,m,D){return m&&m.prototype&&i.forEach(function(d){const w=`${c}.${t}::`+d,Z=m.prototype;try{if(Z.hasOwnProperty(d)){const x=e.ObjectGetOwnPropertyDescriptor(Z,d);x&&x.value?(x.value=e.wrapWithCurrentZone(x.value,w),e._redefineProperty(m.prototype,d,x)):Z[d]&&(Z[d]=e.wrapWithCurrentZone(Z[d],w))}else Z[d]&&(Z[d]=e.wrapWithCurrentZone(Z[d],w))}catch{}}),E.call(r,T,m,D)},e.attachOriginToPatched(r[t],E)}const at=function be(){const e=globalThis,r=!0===e[Q("forceDuplicateZoneCheck")];if(e.Zone&&(r||"function"!=typeof e.Zone.__symbol__))throw new Error("Zone already loaded.");return e.Zone??=function ve(){const e=te.performance;function r(N){e&&e.mark&&e.mark(N)}function c(N,_){e&&e.measure&&e.measure(N,_)}r("Zone");let t=(()=>{class N{static#e=this.__symbol__=Q;static assertZonePatched(){if(te.Promise!==O.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let n=N.current;for(;n.parent;)n=n.parent;return n}static get current(){return b.zone}static get currentTask(){return S}static __load_patch(n,o,p=!1){if(O.hasOwnProperty(n)){const P=!0===te[Q("forceDuplicateZoneCheck")];if(!p&&P)throw Error("Already loaded patch: "+n)}else if(!te["__Zone_disable_"+n]){const P="Zone:"+n;r(P),O[n]=o(te,N,R),c(P,P)}}get parent(){return this._parent}get name(){return this._name}constructor(n,o){this._parent=n,this._name=o?o.name||"unnamed":"<root>",this._properties=o&&o.properties||{},this._zoneDelegate=new u(this,this._parent&&this._parent._zoneDelegate,o)}get(n){const o=this.getZoneWith(n);if(o)return o._properties[n]}getZoneWith(n){let o=this;for(;o;){if(o._properties.hasOwnProperty(n))return o;o=o._parent}return null}fork(n){if(!n)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,n)}wrap(n,o){if("function"!=typeof n)throw new Error("Expecting function got: "+n);const p=this._zoneDelegate.intercept(this,n,o),P=this;return function(){return P.runGuarded(p,this,arguments,o)}}run(n,o,p,P){b={parent:b,zone:this};try{return this._zoneDelegate.invoke(this,n,o,p,P)}finally{b=b.parent}}runGuarded(n,o=null,p,P){b={parent:b,zone:this};try{try{return this._zoneDelegate.invoke(this,n,o,p,P)}catch(q){if(this._zoneDelegate.handleError(this,q))throw q}}finally{b=b.parent}}runTask(n,o,p){if(n.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(n.zone||J).name+"; Execution: "+this.name+")");const P=n,{type:q,data:{isPeriodic:A=!1,isRefreshable:_e=!1}={}}=n;if(n.state===X&&(q===z||q===g))return;const he=n.state!=H;he&&P._transitionTo(H,h);const de=S;S=P,b={parent:b,zone:this};try{q==g&&n.data&&!A&&!_e&&(n.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,P,o,p)}catch(oe){if(this._zoneDelegate.handleError(this,oe))throw oe}}finally{const oe=n.state;if(oe!==X&&oe!==Y)if(q==z||A||_e&&oe===k)he&&P._transitionTo(h,H,k);else{const f=P._zoneDelegates;this._updateTaskCount(P,-1),he&&P._transitionTo(X,H,X),_e&&(P._zoneDelegates=f)}b=b.parent,S=de}}scheduleTask(n){if(n.zone&&n.zone!==this){let p=this;for(;p;){if(p===n.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${n.zone.name}`);p=p.parent}}n._transitionTo(k,X);const o=[];n._zoneDelegates=o,n._zone=this;try{n=this._zoneDelegate.scheduleTask(this,n)}catch(p){throw n._transitionTo(Y,k,X),this._zoneDelegate.handleError(this,p),p}return n._zoneDelegates===o&&this._updateTaskCount(n,1),n.state==k&&n._transitionTo(h,k),n}scheduleMicroTask(n,o,p,P){return this.scheduleTask(new E(G,n,o,p,P,void 0))}scheduleMacroTask(n,o,p,P,q){return this.scheduleTask(new E(g,n,o,p,P,q))}scheduleEventTask(n,o,p,P,q){return this.scheduleTask(new E(z,n,o,p,P,q))}cancelTask(n){if(n.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(n.zone||J).name+"; Execution: "+this.name+")");if(n.state===h||n.state===H){n._transitionTo(V,h,H);try{this._zoneDelegate.cancelTask(this,n)}catch(o){throw n._transitionTo(Y,V),this._zoneDelegate.handleError(this,o),o}return this._updateTaskCount(n,-1),n._transitionTo(X,V),n.runCount=-1,n}}_updateTaskCount(n,o){const p=n._zoneDelegates;-1==o&&(n._zoneDelegates=null);for(let P=0;P<p.length;P++)p[P]._updateTaskCount(n.type,o)}}return N})();const i={name:"",onHasTask:(N,_,n,o)=>N.hasTask(n,o),onScheduleTask:(N,_,n,o)=>N.scheduleTask(n,o),onInvokeTask:(N,_,n,o,p,P)=>N.invokeTask(n,o,p,P),onCancelTask:(N,_,n,o)=>N.cancelTask(n,o)};class u{get zone(){return this._zone}constructor(_,n,o){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=_,this._parentDelegate=n,this._forkZS=o&&(o&&o.onFork?o:n._forkZS),this._forkDlgt=o&&(o.onFork?n:n._forkDlgt),this._forkCurrZone=o&&(o.onFork?this._zone:n._forkCurrZone),this._interceptZS=o&&(o.onIntercept?o:n._interceptZS),this._interceptDlgt=o&&(o.onIntercept?n:n._interceptDlgt),this._interceptCurrZone=o&&(o.onIntercept?this._zone:n._interceptCurrZone),this._invokeZS=o&&(o.onInvoke?o:n._invokeZS),this._invokeDlgt=o&&(o.onInvoke?n:n._invokeDlgt),this._invokeCurrZone=o&&(o.onInvoke?this._zone:n._invokeCurrZone),this._handleErrorZS=o&&(o.onHandleError?o:n._handleErrorZS),this._handleErrorDlgt=o&&(o.onHandleError?n:n._handleErrorDlgt),this._handleErrorCurrZone=o&&(o.onHandleError?this._zone:n._handleErrorCurrZone),this._scheduleTaskZS=o&&(o.onScheduleTask?o:n._scheduleTaskZS),this._scheduleTaskDlgt=o&&(o.onScheduleTask?n:n._scheduleTaskDlgt),this._scheduleTaskCurrZone=o&&(o.onScheduleTask?this._zone:n._scheduleTaskCurrZone),this._invokeTaskZS=o&&(o.onInvokeTask?o:n._invokeTaskZS),this._invokeTaskDlgt=o&&(o.onInvokeTask?n:n._invokeTaskDlgt),this._invokeTaskCurrZone=o&&(o.onInvokeTask?this._zone:n._invokeTaskCurrZone),this._cancelTaskZS=o&&(o.onCancelTask?o:n._cancelTaskZS),this._cancelTaskDlgt=o&&(o.onCancelTask?n:n._cancelTaskDlgt),this._cancelTaskCurrZone=o&&(o.onCancelTask?this._zone:n._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const p=o&&o.onHasTask;(p||n&&n._hasTaskZS)&&(this._hasTaskZS=p?o:i,this._hasTaskDlgt=n,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,o.onScheduleTask||(this._scheduleTaskZS=i,this._scheduleTaskDlgt=n,this._scheduleTaskCurrZone=this._zone),o.onInvokeTask||(this._invokeTaskZS=i,this._invokeTaskDlgt=n,this._invokeTaskCurrZone=this._zone),o.onCancelTask||(this._cancelTaskZS=i,this._cancelTaskDlgt=n,this._cancelTaskCurrZone=this._zone))}fork(_,n){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,_,n):new t(_,n)}intercept(_,n,o){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,_,n,o):n}invoke(_,n,o,p,P){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,_,n,o,p,P):n.apply(o,p)}handleError(_,n){return!this._handleErrorZS||this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,_,n)}scheduleTask(_,n){let o=n;if(this._scheduleTaskZS)this._hasTaskZS&&o._zoneDelegates.push(this._hasTaskDlgtOwner),o=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,_,n),o||(o=n);else if(n.scheduleFn)n.scheduleFn(n);else{if(n.type!=G)throw new Error("Task is missing scheduleFn.");U(n)}return o}invokeTask(_,n,o,p){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,_,n,o,p):n.callback.apply(o,p)}cancelTask(_,n){let o;if(this._cancelTaskZS)o=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,_,n);else{if(!n.cancelFn)throw Error("Task is not cancelable");o=n.cancelFn(n)}return o}hasTask(_,n){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,_,n)}catch(o){this.handleError(_,o)}}_updateTaskCount(_,n){const o=this._taskCounts,p=o[_],P=o[_]=p+n;if(P<0)throw new Error("More tasks executed then were scheduled.");0!=p&&0!=P||this.hasTask(this._zone,{microTask:o.microTask>0,macroTask:o.macroTask>0,eventTask:o.eventTask>0,change:_})}}class E{constructor(_,n,o,p,P,q){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=_,this.source=n,this.data=p,this.scheduleFn=P,this.cancelFn=q,!o)throw new Error("callback is not defined");this.callback=o;const A=this;this.invoke=_===z&&p&&p.useG?E.invokeTask:function(){return E.invokeTask.call(te,A,this,arguments)}}static invokeTask(_,n,o){_||(_=this),ee++;try{return _.runCount++,_.zone.runTask(_,n,o)}finally{1==ee&&K(),ee--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(X,k)}_transitionTo(_,n,o){if(this._state!==n&&this._state!==o)throw new Error(`${this.type} '${this.source}': can not transition to '${_}', expecting state '${n}'${o?" or '"+o+"'":""}, was '${this._state}'.`);this._state=_,_==X&&(this._zoneDelegates=null)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const T=Q("setTimeout"),m=Q("Promise"),D=Q("then");let Z,d=[],w=!1;function x(N){if(Z||te[m]&&(Z=te[m].resolve(0)),Z){let _=Z[D];_||(_=Z.then),_.call(Z,N)}else te[T](N,0)}function U(N){0===ee&&0===d.length&&x(K),N&&d.push(N)}function K(){if(!w){for(w=!0;d.length;){const N=d;d=[];for(let _=0;_<N.length;_++){const n=N[_];try{n.zone.runTask(n,null,null)}catch(o){R.onUnhandledError(o)}}}R.microtaskDrainDone(),w=!1}}const J={name:"NO ZONE"},X="notScheduled",k="scheduling",h="scheduled",H="running",V="canceling",Y="unknown",G="microTask",g="macroTask",z="eventTask",O={},R={symbol:Q,currentZoneFrame:()=>b,onUnhandledError:W,microtaskDrainDone:W,scheduleMicroTask:U,showUncaughtError:()=>!t[Q("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:W,patchMethod:()=>W,bindArguments:()=>[],patchThen:()=>W,patchMacroTask:()=>W,patchEventPrototype:()=>W,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>W,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>W,wrapWithCurrentZone:()=>W,filterProperties:()=>[],attachOriginToPatched:()=>W,_redefineProperty:()=>W,patchCallbacks:()=>W,nativeScheduleMicroTask:x};let b={parent:null,zone:new t(null,null)},S=null,ee=0;function W(){}return c("Zone","Zone"),t}(),e.Zone}();(function Zt(e){(function Nt(e){e.__load_patch("ZoneAwarePromise",(r,c,t)=>{const i=Object.getOwnPropertyDescriptor,u=Object.defineProperty,T=t.symbol,m=[],D=!1!==r[T("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")],d=T("Promise"),w=T("then"),Z="__creationTrace__";t.onUnhandledError=f=>{if(t.showUncaughtError()){const a=f&&f.rejection;a?console.error("Unhandled Promise rejection:",a instanceof Error?a.message:a,"; Zone:",f.zone.name,"; Task:",f.task&&f.task.source,"; Value:",a,a instanceof Error?a.stack:void 0):console.error(f)}},t.microtaskDrainDone=()=>{for(;m.length;){const f=m.shift();try{f.zone.runGuarded(()=>{throw f.throwOriginal?f.rejection:f})}catch(a){U(a)}}};const x=T("unhandledPromiseRejectionHandler");function U(f){t.onUnhandledError(f);try{const a=c[x];"function"==typeof a&&a.call(this,f)}catch{}}function K(f){return f&&f.then}function J(f){return f}function X(f){return A.reject(f)}const k=T("state"),h=T("value"),H=T("finally"),V=T("parentPromiseValue"),Y=T("parentPromiseState"),G="Promise.then",g=null,z=!0,O=!1,R=0;function b(f,a){return s=>{try{N(f,a,s)}catch(l){N(f,!1,l)}}}const S=function(){let f=!1;return function(s){return function(){f||(f=!0,s.apply(null,arguments))}}},ee="Promise resolved with itself",W=T("currentTaskTrace");function N(f,a,s){const l=S();if(f===s)throw new TypeError(ee);if(f[k]===g){let v=null;try{("object"==typeof s||"function"==typeof s)&&(v=s&&s.then)}catch(C){return l(()=>{N(f,!1,C)})(),f}if(a!==O&&s instanceof A&&s.hasOwnProperty(k)&&s.hasOwnProperty(h)&&s[k]!==g)n(s),N(f,s[k],s[h]);else if(a!==O&&"function"==typeof v)try{v.call(s,l(b(f,a)),l(b(f,!1)))}catch(C){l(()=>{N(f,!1,C)})()}else{f[k]=a;const C=f[h];if(f[h]=s,f[H]===H&&a===z&&(f[k]=f[Y],f[h]=f[V]),a===O&&s instanceof Error){const y=c.currentTask&&c.currentTask.data&&c.currentTask.data[Z];y&&u(s,W,{configurable:!0,enumerable:!1,writable:!0,value:y})}for(let y=0;y<C.length;)o(f,C[y++],C[y++],C[y++],C[y++]);if(0==C.length&&a==O){f[k]=R;let y=s;try{throw new Error("Uncaught (in promise): "+function E(f){return f&&f.toString===Object.prototype.toString?(f.constructor&&f.constructor.name||"")+": "+JSON.stringify(f):f?f.toString():Object.prototype.toString.call(f)}(s)+(s&&s.stack?"\n"+s.stack:""))}catch(L){y=L}D&&(y.throwOriginal=!0),y.rejection=s,y.promise=f,y.zone=c.current,y.task=c.currentTask,m.push(y),t.scheduleMicroTask()}}}return f}const _=T("rejectionHandledHandler");function n(f){if(f[k]===R){try{const a=c[_];a&&"function"==typeof a&&a.call(this,{rejection:f[h],promise:f})}catch{}f[k]=O;for(let a=0;a<m.length;a++)f===m[a].promise&&m.splice(a,1)}}function o(f,a,s,l,v){n(f);const C=f[k],y=C?"function"==typeof l?l:J:"function"==typeof v?v:X;a.scheduleMicroTask(G,()=>{try{const L=f[h],I=!!s&&H===s[H];I&&(s[V]=L,s[Y]=C);const M=a.run(y,void 0,I&&y!==X&&y!==J?[]:[L]);N(s,!0,M)}catch(L){N(s,!1,L)}},s)}const P=function(){},q=r.AggregateError;class A{static toString(){return"function ZoneAwarePromise() { [native code] }"}static resolve(a){return a instanceof A?a:N(new this(null),z,a)}static reject(a){return N(new this(null),O,a)}static withResolvers(){const a={};return a.promise=new A((s,l)=>{a.resolve=s,a.reject=l}),a}static any(a){if(!a||"function"!=typeof a[Symbol.iterator])return Promise.reject(new q([],"All promises were rejected"));const s=[];let l=0;try{for(let y of a)l++,s.push(A.resolve(y))}catch{return Promise.reject(new q([],"All promises were rejected"))}if(0===l)return Promise.reject(new q([],"All promises were rejected"));let v=!1;const C=[];return new A((y,L)=>{for(let I=0;I<s.length;I++)s[I].then(M=>{v||(v=!0,y(M))},M=>{C.push(M),l--,0===l&&(v=!0,L(new q(C,"All promises were rejected")))})})}static race(a){let s,l,v=new this((L,I)=>{s=L,l=I});function C(L){s(L)}function y(L){l(L)}for(let L of a)K(L)||(L=this.resolve(L)),L.then(C,y);return v}static all(a){return A.allWithCallback(a)}static allSettled(a){return(this&&this.prototype instanceof A?this:A).allWithCallback(a,{thenCallback:l=>({status:"fulfilled",value:l}),errorCallback:l=>({status:"rejected",reason:l})})}static allWithCallback(a,s){let l,v,C=new this((M,B)=>{l=M,v=B}),y=2,L=0;const I=[];for(let M of a){K(M)||(M=this.resolve(M));const B=L;try{M.then(F=>{I[B]=s?s.thenCallback(F):F,y--,0===y&&l(I)},F=>{s?(I[B]=s.errorCallback(F),y--,0===y&&l(I)):v(F)})}catch(F){v(F)}y++,L++}return y-=2,0===y&&l(I),C}constructor(a){const s=this;if(!(s instanceof A))throw new Error("Must be an instanceof Promise.");s[k]=g,s[h]=[];try{const l=S();a&&a(l(b(s,z)),l(b(s,O)))}catch(l){N(s,!1,l)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return A}then(a,s){let l=this.constructor?.[Symbol.species];(!l||"function"!=typeof l)&&(l=this.constructor||A);const v=new l(P),C=c.current;return this[k]==g?this[h].push(C,v,a,s):o(this,C,v,a,s),v}catch(a){return this.then(null,a)}finally(a){let s=this.constructor?.[Symbol.species];(!s||"function"!=typeof s)&&(s=A);const l=new s(P);l[H]=H;const v=c.current;return this[k]==g?this[h].push(v,l,a,a):o(this,v,l,a,a),l}}A.resolve=A.resolve,A.reject=A.reject,A.race=A.race,A.all=A.all;const _e=r[d]=r.Promise;r.Promise=A;const he=T("thenPatched");function de(f){const a=f.prototype,s=i(a,"then");if(s&&(!1===s.writable||!s.configurable))return;const l=a.then;a[w]=l,f.prototype.then=function(v,C){return new A((L,I)=>{l.call(this,L,I)}).then(v,C)},f[he]=!0}return t.patchThen=de,_e&&(de(_e),ue(r,"fetch",f=>function oe(f){return function(a,s){let l=f.apply(a,s);if(l instanceof A)return l;let v=l.constructor;return v[he]||de(v),l}}(f))),Promise[c.__symbol__("uncaughtPromiseErrors")]=m,A})})(e),function Lt(e){e.__load_patch("toString",r=>{const c=Function.prototype.toString,t=j("OriginalDelegate"),i=j("Promise"),u=j("Error"),E=function(){if("function"==typeof this){const d=this[t];if(d)return"function"==typeof d?c.call(d):Object.prototype.toString.call(d);if(this===Promise){const w=r[i];if(w)return c.call(w)}if(this===Error){const w=r[u];if(w)return c.call(w)}}return c.call(this)};E[t]=c,Function.prototype.toString=E;const T=Object.prototype.toString;Object.prototype.toString=function(){return"function"==typeof Promise&&this instanceof Promise?"[object Promise]":T.call(this)}})}(e),function Mt(e){e.__load_patch("util",(r,c,t)=>{const i=Fe(r);t.patchOnProperties=Ke,t.patchMethod=ue,t.bindArguments=Ve,t.patchMacroTask=mt;const u=c.__symbol__("BLACK_LISTED_EVENTS"),E=c.__symbol__("UNPATCHED_EVENTS");r[E]&&(r[u]=r[E]),r[u]&&(c[u]=c[E]=r[u]),t.patchEventPrototype=Pt,t.patchEventTarget=bt,t.isIEOrEdge=kt,t.ObjectDefineProperty=Le,t.ObjectGetOwnPropertyDescriptor=Te,t.ObjectCreate=_t,t.ArraySlice=Et,t.patchClass=we,t.wrapWithCurrentZone=He,t.filterProperties=it,t.attachOriginToPatched=fe,t._redefineProperty=Object.defineProperty,t.patchCallbacks=It,t.getGlobalObjects=()=>({globalSources:tt,zoneSymbolEventNames:ne,eventNames:i,isBrowser:Ge,isMix:Xe,isNode:De,TRUE_STR:ae,FALSE_STR:le,ZONE_SYMBOL_PREFIX:Pe,ADD_EVENT_LISTENER_STR:Me,REMOVE_EVENT_LISTENER_STR:Ze})})}(e)})(at),function Ot(e){e.__load_patch("legacy",r=>{const c=r[e.__symbol__("legacyPatch")];c&&c()}),e.__load_patch("timers",r=>{const c="set",t="clear";me(r,c,t,"Timeout"),me(r,c,t,"Interval"),me(r,c,t,"Immediate")}),e.__load_patch("requestAnimationFrame",r=>{me(r,"request","cancel","AnimationFrame"),me(r,"mozRequest","mozCancel","AnimationFrame"),me(r,"webkitRequest","webkitCancel","AnimationFrame")}),e.__load_patch("blocking",(r,c)=>{const t=["alert","prompt","confirm"];for(let i=0;i<t.length;i++)ue(r,t[i],(E,T,m)=>function(D,d){return c.current.run(E,r,d,m)})}),e.__load_patch("EventTarget",(r,c,t)=>{(function Dt(e,r){r.patchEventPrototype(e,r)})(r,t),function Ct(e,r){if(Zone[r.symbol("patchEventTarget")])return;const{eventNames:c,zoneSymbolEventNames:t,TRUE_STR:i,FALSE_STR:u,ZONE_SYMBOL_PREFIX:E}=r.getGlobalObjects();for(let m=0;m<c.length;m++){const D=c[m],Z=E+(D+u),x=E+(D+i);t[D]={},t[D][u]=Z,t[D][i]=x}const T=e.EventTarget;T&&T.prototype&&r.patchEventTarget(e,r,[T&&T.prototype])}(r,t);const i=r.XMLHttpRequestEventTarget;i&&i.prototype&&t.patchEventTarget(r,t,[i.prototype])}),e.__load_patch("MutationObserver",(r,c,t)=>{we("MutationObserver"),we("WebKitMutationObserver")}),e.__load_patch("IntersectionObserver",(r,c,t)=>{we("IntersectionObserver")}),e.__load_patch("FileReader",(r,c,t)=>{we("FileReader")}),e.__load_patch("on_property",(r,c,t)=>{!function St(e,r){if(De&&!Xe||Zone[e.symbol("patchEvents")])return;const c=r.__Zone_ignore_on_properties;let t=[];if(Ge){const i=window;t=t.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const u=function pt(){try{const e=ge.navigator.userAgent;if(-1!==e.indexOf("MSIE ")||-1!==e.indexOf("Trident/"))return!0}catch{}return!1}()?[{target:i,ignoreProperties:["error"]}]:[];ct(i,Fe(i),c&&c.concat(u),Ie(i))}t=t.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let i=0;i<t.length;i++){const u=r[t[i]];u&&u.prototype&&ct(u.prototype,Fe(u.prototype),c)}}(t,r)}),e.__load_patch("customElements",(r,c,t)=>{!function Rt(e,r){const{isBrowser:c,isMix:t}=r.getGlobalObjects();(c||t)&&e.customElements&&"customElements"in e&&r.patchCallbacks(r,e.customElements,"customElements","define",["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"])}(r,t)}),e.__load_patch("XHR",(r,c)=>{!function D(d){const w=d.XMLHttpRequest;if(!w)return;const Z=w.prototype;let U=Z[Ae],K=Z[je];if(!U){const R=d.XMLHttpRequestEventTarget;if(R){const b=R.prototype;U=b[Ae],K=b[je]}}const J="readystatechange",X="scheduled";function k(R){const b=R.data,S=b.target;S[E]=!1,S[m]=!1;const ee=S[u];U||(U=S[Ae],K=S[je]),ee&&K.call(S,J,ee);const W=S[u]=()=>{if(S.readyState===S.DONE)if(!b.aborted&&S[E]&&R.state===X){const _=S[c.__symbol__("loadfalse")];if(0!==S.status&&_&&_.length>0){const n=R.invoke;R.invoke=function(){const o=S[c.__symbol__("loadfalse")];for(let p=0;p<o.length;p++)o[p]===R&&o.splice(p,1);!b.aborted&&R.state===X&&n.call(R)},_.push(R)}else R.invoke()}else!b.aborted&&!1===S[E]&&(S[m]=!0)};return U.call(S,J,W),S[t]||(S[t]=R),z.apply(S,b.args),S[E]=!0,R}function h(){}function H(R){const b=R.data;return b.aborted=!0,O.apply(b.target,b.args)}const V=ue(Z,"open",()=>function(R,b){return R[i]=0==b[2],R[T]=b[1],V.apply(R,b)}),G=j("fetchTaskAborting"),g=j("fetchTaskScheduling"),z=ue(Z,"send",()=>function(R,b){if(!0===c.current[g]||R[i])return z.apply(R,b);{const S={target:R,url:R[T],isPeriodic:!1,args:b,aborted:!1},ee=xe("XMLHttpRequest.send",h,S,k,H);R&&!0===R[m]&&!S.aborted&&ee.state===X&&ee.invoke()}}),O=ue(Z,"abort",()=>function(R,b){const S=function x(R){return R[t]}(R);if(S&&"string"==typeof S.type){if(null==S.cancelFn||S.data&&S.data.aborted)return;S.zone.cancelTask(S)}else if(!0===c.current[G])return O.apply(R,b)})}(r);const t=j("xhrTask"),i=j("xhrSync"),u=j("xhrListener"),E=j("xhrScheduled"),T=j("xhrURL"),m=j("xhrErrorBeforeScheduled")}),e.__load_patch("geolocation",r=>{r.navigator&&r.navigator.geolocation&&function gt(e,r){const c=e.constructor.name;for(let t=0;t<r.length;t++){const i=r[t],u=e[i];if(u){if(!We(Te(e,i)))continue;e[i]=(T=>{const m=function(){return T.apply(this,Ve(arguments,c+"."+i))};return fe(m,T),m})(u)}}}(r.navigator.geolocation,["getCurrentPosition","watchPosition"])}),e.__load_patch("PromiseRejectionEvent",(r,c)=>{function t(i){return function(u){st(r,i).forEach(T=>{const m=r.PromiseRejectionEvent;if(m){const D=new m(i,{promise:u.promise,reason:u.rejection});T.invoke(D)}})}}r.PromiseRejectionEvent&&(c[j("unhandledPromiseRejectionHandler")]=t("unhandledrejection"),c[j("rejectionHandledHandler")]=t("rejectionhandled"))}),e.__load_patch("queueMicrotask",(r,c,t)=>{!function wt(e,r){r.patchMethod(e,"queueMicrotask",c=>function(t,i){Zone.current.scheduleMicroTask("queueMicrotask",i[0])})}(r,t)})}(at)}},te=>{te(te.s=343)}]);
(self.webpackChunkccf_organ_info=self.webpackChunkccf_organ_info||[]).push([[792],{772:Ei=>{"use strict";Ei.exports=Qe,Ei.exports.default=Qe;var Kn=1e20;function Qe(ge,lt,Ce,He,Ee,Ne){this.fontSize=ge||24,this.buffer=void 0===lt?3:lt,this.cutoff=He||.25,this.fontFamily=Ee||"sans-serif",this.fontWeight=Ne||"normal",this.radius=Ce||8;var ne=this.size=this.fontSize+2*this.buffer,K=ne+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=ne,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(K*K),this.gridInner=new Float64Array(K*K),this.f=new Float64Array(K),this.z=new Float64Array(K+1),this.v=new Uint16Array(K),this.useMetrics=void 0!==this.ctx.measureText("A").actualBoundingBoxLeft,this.middle=Math.round(ne/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function rn(ge,lt,Ce,He,Ee,Ne){for(var ne=0;ne<lt;ne++)Jn(ge,ne,lt,Ce,He,Ee,Ne);for(var K=0;K<Ce;K++)Jn(ge,K*lt,1,lt,He,Ee,Ne)}function Jn(ge,lt,Ce,He,Ee,Ne,ne){var K,z,ze,et;for(Ne[0]=0,ne[0]=-Kn,ne[1]=Kn,K=0;K<He;K++)Ee[K]=ge[lt+K*Ce];for(K=1,z=0,ze=0;K<He;K++){do{ze=(Ee[K]-Ee[et=Ne[z]]+K*K-et*et)/(K-et)/2}while(ze<=ne[z]&&--z>-1);Ne[++z]=K,ne[z]=ze,ne[z+1]=Kn}for(K=0,z=0;K<He;K++){for(;ne[z+1]<K;)z++;ge[lt+K*Ce]=Ee[et=Ne[z]]+(K-et)*(K-et)}}Qe.prototype._draw=function(ge,lt){var Ne,ne,K,z,ze,et,le,Et,on,Ce=this.ctx.measureText(ge),He=Ce.width,Ee=2*this.buffer;lt&&this.useMetrics?(ze=Math.floor(Ce.actualBoundingBoxAscent),Et=this.buffer+Math.ceil(Ce.actualBoundingBoxAscent),et=this.buffer,le=this.buffer,Ne=(ne=Math.min(this.size,Math.ceil(Ce.actualBoundingBoxRight-Ce.actualBoundingBoxLeft)))+Ee,K=(z=Math.min(this.size-et,Math.ceil(Ce.actualBoundingBoxAscent+Ce.actualBoundingBoxDescent)))+Ee,this.ctx.textBaseline="alphabetic"):(Ne=ne=this.size,K=z=this.size,ze=19*this.fontSize/24,et=le=0,Et=this.middle,this.ctx.textBaseline="middle"),ne&&z&&(this.ctx.clearRect(le,et,ne,z),this.ctx.fillText(ge,this.buffer,Et),on=this.ctx.getImageData(le,et,ne,z));var wt=new Uint8ClampedArray(Ne*K);return function ln(ge,lt,Ce,He,Ee,Ne,ne){Ne.fill(Kn,0,lt*Ce),ne.fill(0,0,lt*Ce);for(var K=(lt-He)/2,z=0;z<Ee;z++)for(var ze=0;ze<He;ze++){var et=(z+K)*lt+ze+K,le=ge.data[4*(z*He+ze)+3]/255;if(1===le)Ne[et]=0,ne[et]=Kn;else if(0===le)Ne[et]=Kn,ne[et]=0;else{var Et=Math.max(0,.5-le),on=Math.max(0,le-.5);Ne[et]=Et*Et,ne[et]=on*on}}}(on,Ne,K,ne,z,this.gridOuter,this.gridInner),rn(this.gridOuter,Ne,K,this.f,this.v,this.z),rn(this.gridInner,Ne,K,this.f,this.v,this.z),function Nt(ge,lt,Ce,He,Ee,Ne,ne){for(var K=0;K<lt*Ce;K++){var z=Math.sqrt(He[K])-Math.sqrt(Ee[K]);ge[K]=Math.round(255-255*(z/Ne+ne))}}(wt,Ne,K,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:wt,metrics:{width:ne,height:z,sdfWidth:Ne,sdfHeight:K,top:ze,left:0,advance:He}}},Qe.prototype.draw=function(ge){return this._draw(ge,!1).data},Qe.prototype.drawWithMetrics=function(ge){return this._draw(ge,!0)}},595:(Ei,Kn,Qe)=>{"use strict";var ln={};Qe.r(ln),Qe.d(ln,{decode:()=>PIe,name:()=>OIe});var Nt={};Qe.r(Nt),Qe.d(Nt,{name:()=>VIe,preprocess:()=>UIe});var rn={};Qe.r(rn),Qe.d(rn,{name:()=>jIe,preprocess:()=>HIe});var Jn={};Qe.r(Jn),Qe.d(Jn,{decode:()=>SDe,encode:()=>xDe,name:()=>ADe,preprocess:()=>TDe});var ge={};Qe.r(ge),Qe.d(ge,{decode:()=>ODe,encode:()=>PDe,name:()=>RDe});var lt={};Qe.r(lt),Qe.d(lt,{decode:()=>FDe,encode:()=>kDe,name:()=>NDe});var Ce={};function He(n,e){return Object.is(n,e)}Qe.r(Ce),Qe.d(Ce,{decode:()=>BDe,encode:()=>VDe,name:()=>LDe});let Ee=null,Ne=!1,ne=1;const K=Symbol("SIGNAL");function z(n){const e=Ee;return Ee=n,e}const Et={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function on(n){if(Ne)throw new Error("");if(null===Ee)return;Ee.consumerOnSignalRead(n);const e=Ee.nextProducerIndex++;Zt(Ee),e<Ee.producerNode.length&&Ee.producerNode[e]!==n&&Ct(Ee)&&ke(Ee.producerNode[e],Ee.producerIndexOfThis[e]),Ee.producerNode[e]!==n&&(Ee.producerNode[e]=n,Ee.producerIndexOfThis[e]=Ct(Ee)?xe(n,Ee,e):0),Ee.producerLastReadVersion[e]=n.version}function kn(n){if((!Ct(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==ne)){if(!n.producerMustRecompute(n)&&!J(n))return n.dirty=!1,void(n.lastCleanEpoch=ne);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ne}}function mr(n){if(void 0===n.liveConsumerNode)return;const e=Ne;Ne=!0;try{for(const t of n.liveConsumerNode)t.dirty||ki(t)}finally{Ne=e}}function ri(){return!1!==Ee?.consumerAllowSignalWrites}function ki(n){n.dirty=!0,mr(n),n.consumerMarkedDirty?.(n)}function Li(n){return n&&(n.nextProducerIndex=0),z(n)}function Y(n,e){if(z(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Ct(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ke(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function J(n){Zt(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(kn(t),i!==t.version))return!0}return!1}function Se(n){if(Zt(n),Ct(n))for(let e=0;e<n.producerNode.length;e++)ke(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function xe(n,e,t){if(Ft(n),0===n.liveConsumerNode.length&&un(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=xe(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function ke(n,e){if(Ft(n),1===n.liveConsumerNode.length&&un(n))for(let i=0;i<n.producerNode.length;i++)ke(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Zt(r),r.producerIndexOfThis[i]=e}}function Ct(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Zt(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Ft(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function un(n){return void 0!==n.producerNode}const si=Symbol("UNSET"),Qn=Symbol("COMPUTING"),ut=Symbol("ERRORED"),wi={...Et,value:si,dirty:!0,error:null,equal:He,producerMustRecompute:n=>n.value===si||n.value===Qn,producerRecomputeValue(n){if(n.value===Qn)throw new Error("Detected cycle in computations.");const e=n.value;n.value=Qn;const t=Li(n);let i;try{i=n.computation()}catch(r){i=ut,n.error=r}finally{Y(n,t)}e!==si&&e!==ut&&i!==ut&&n.equal(e,i)?n.value=e:(n.value=i,n.version++)}};let Bg=function _r(){throw new Error};function jl(){Bg()}let Hl=null;function ai(n,e){ri()||jl(),n.equal(n.value,e)||(n.value=e,function Ec(n){n.version++,function wt(){ne++}(),mr(n),Hl?.()}(n))}const bc={...Et,equal:He,value:void 0};function Ve(n){return"function"==typeof n}function pa(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Ci=pa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Wl(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class xt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Ve(i))try{i()}catch(s){e=s instanceof Ci?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{jg(s)}catch(o){e=e??[],o instanceof Ci?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ci(e)}}add(e){var t;if(e&&e!==this)if(this.closed)jg(e);else{if(e instanceof xt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Wl(t,e)}remove(e){const{_finalizers:t}=this;t&&Wl(t,e),e instanceof xt&&e._removeParent(this)}}xt.EMPTY=(()=>{const n=new xt;return n.closed=!0,n})();const Vg=xt.EMPTY;function Ug(n){return n instanceof xt||n&&"closed"in n&&Ve(n.remove)&&Ve(n.add)&&Ve(n.unsubscribe)}function jg(n){Ve(n)?n():n.unsubscribe()}const Lr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Cc={setTimeout(n,e,...t){const{delegate:i}=Cc;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Cc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function lh(n){Cc.setTimeout(()=>{const{onUnhandledError:e}=Lr;if(!e)throw n;e(n)})}function Ac(){}const $l=dh("C",void 0,void 0);function dh(n,e,t){return{kind:n,value:e,error:t}}let Mo=null;function ql(n){if(Lr.useDeprecatedSynchronousErrorHandling){const e=!Mo;if(e&&(Mo={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=Mo;if(Mo=null,t)throw i}}else n()}class ga extends xt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ug(e)&&e.add(this)):this.destination=S0}static create(e,t,i){return new Io(e,t,i)}next(e){this.isStopped?fh(function w0(n){return dh("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?fh(function uh(n){return dh("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?fh($l,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const A0=Function.prototype.bind;function hh(n,e){return A0.call(n,e)}class Hg{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){ma(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){ma(i)}else ma(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ma(t)}}}class Io extends ga{constructor(e,t,i){let r;if(super(),Ve(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Lr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&hh(e.next,s),error:e.error&&hh(e.error,s),complete:e.complete&&hh(e.complete,s)}):r=e}this.destination=new Hg(r)}}function ma(n){Lr.useDeprecatedSynchronousErrorHandling?function C0(n){Lr.useDeprecatedSynchronousErrorHandling&&Mo&&(Mo.errorThrown=!0,Mo.error=n)}(n):lh(n)}function fh(n,e){const{onStoppedNotification:t}=Lr;t&&Cc.setTimeout(()=>t(n,e))}const S0={closed:!0,next:Ac,error:function T0(n){throw n},complete:Ac},Xl="function"==typeof Symbol&&Symbol.observable||"@@observable";function ks(n){return n}let me=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function Wg(n){return n&&n instanceof ga||function M0(n){return n&&Ve(n.next)&&Ve(n.error)&&Ve(n.complete)}(n)&&Ug(n)}(t)?t:new Io(t,i,r);return ql(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Gg(i))((r,s)=>{const o=new Io({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Xl](){return this}pipe(...t){return function zg(n){return 0===n.length?ks:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}(t)(this)}toPromise(t){return new(t=Gg(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Gg(n){var e;return null!==(e=n??Lr.Promise)&&void 0!==e?e:Promise}const ph=pa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ue=(()=>{class n extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new gh(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new ph}next(t){ql(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){ql(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){ql(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Vg:(this.currentObservers=null,s.push(t),new xt(()=>{this.currentObservers=null,Wl(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new me;return t.source=this,t}}return n.create=(e,t)=>new gh(e,t),n})();class gh extends ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Vg}}class wn extends ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function mh(n){return Ve(n?.lift)}function At(n){return e=>{if(mh(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function dt(n,e,t,i,r){return new $g(n,e,t,i,r)}class $g extends ga{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function oe(n,e){return At((t,i)=>{let r=0;t.subscribe(dt(i,s=>{i.next(n.call(e,s,r++))}))})}typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const E1="https://g.co/ng/security#xss";class H extends Error{constructor(e,t){super(function Zl(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Oo(n){return{toString:n}.toString()}const eu="__parameters__";function nu(n,e,t){return Oo(()=>{const i=function F0(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(c,l,u){const d=c.hasOwnProperty(eu)?c[eu]:Object.defineProperty(c,eu,{value:[]})[eu];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}const Mt=globalThis;function Tt(n){for(let e in n)if(n[e]===Tt)return e;throw Error("Could not find renamed property on target object.")}function JW(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Vn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Vn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function k0(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const ZW=Tt({__forward_ref__:Tt});function It(n){return n.__forward_ref__=It,n.toString=function(){return Vn(this())},n}function Me(n){return nm(n)?n():n}function nm(n){return"function"==typeof n&&n.hasOwnProperty(ZW)&&n.__forward_ref__===It}function j(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function im(n){return T1(n,sm)||T1(n,S1)}function T1(n,e){return n.hasOwnProperty(e)?n[e]:null}function rm(n){return n&&(n.hasOwnProperty(L0)||n.hasOwnProperty(r$))?n[L0]:null}const sm=Tt({\u0275prov:Tt}),L0=Tt({\u0275inj:Tt}),S1=Tt({ngInjectableDef:Tt}),r$=Tt({ngInjectorDef:Tt});class F{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=j({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function H0(n){return n&&!!n.\u0275providers}const Ch=Tt({\u0275cmp:Tt}),z0=Tt({\u0275dir:Tt}),G0=Tt({\u0275pipe:Tt}),Po=Tt({\u0275fac:Tt}),Ah=Tt({__NG_ELEMENT_ID__:Tt}),I1=Tt({__NG_ENV_ID__:Tt});function Oe(n){return"string"==typeof n?n:null==n?"":String(n)}function W0(n,e){throw new H(-201,!1)}var Ke=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ke||{});let $0;function D1(){return $0}function Qi(n){const e=$0;return $0=n,e}function R1(n,e,t){const i=im(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Ke.Optional?null:void 0!==e?e:void W0()}const Th={},q0="__NG_DI_FLAG__",om="ngTempTokenPath",u$=/\n/gm,O1="__source";let iu;function Ea(n){const e=iu;return iu=n,e}function f$(n,e=Ke.Default){if(void 0===iu)throw new H(-203,!1);return null===iu?R1(n,void 0,e):iu.get(n,e&Ke.Optional?null:void 0,e)}function I(n,e=Ke.Default){return(D1()||f$)(Me(n),e)}function P(n,e=Ke.Default){return I(n,am(e))}function am(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function X0(n){const e=[];for(let t=0;t<n.length;t++){const i=Me(n[t]);if(Array.isArray(i)){if(0===i.length)throw new H(900,!1);let r,s=Ke.Default;for(let o=0;o<i.length;o++){const a=i[o],c=p$(a);"number"==typeof c?-1===c?r=a.token:s|=c:r=a}e.push(I(r,s))}else e.push(I(i))}return e}function Sh(n,e){return n[q0]=e,n.prototype[q0]=e,n}function p$(n){return n[q0]}const ru=Sh(nu("Optional"),8),cm=Sh(nu("SkipSelf"),4);function xc(n,e){return n.hasOwnProperty(Po)?n[Po]:null}function su(n,e){n.forEach(t=>Array.isArray(t)?su(t,e):e(t))}function N1(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function lm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Er(n,e,t){let i=ou(n,e);return i>=0?n[1|i]=t:(i=~i,function F1(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function K0(n,e){const t=ou(n,e);if(t>=0)return n[1|t]}function ou(n,e){return function k1(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const Ls={},rt=[],wr=new F(""),dm=new F("",-1),J0=new F("");class hm{get(e,t=Th){if(t===Th){const i=new Error(`NullInjectorError: No provider for ${Vn(e)}!`);throw i.name="NullInjectorError",i}return t}}var fm=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(fm||{}),ds=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ds||{}),wa=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(wa||{});function E$(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function Z0(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];B1(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function L1(n){return 3===n||4===n||6===n}function B1(n){return 64===n.charCodeAt(0)}function xh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||V1(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function V1(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const U1="ng-template";function w$(n,e,t,i){let r=0;if(i){for(;r<e.length&&"string"==typeof e[r];r+=2)if("class"===e[r]&&-1!==E$(e[r+1].toLowerCase(),t,0))return!0}else if(Q0(n))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&"string"==typeof(s=e[r]);)if(s.toLowerCase()===t)return!0}return!1}function Q0(n){return 4===n.type&&n.value!==U1}function C$(n,e,t){return e===(4!==n.type||t?n.value:U1)}function A$(n,e,t){let i=4;const r=n.attrs,s=null!==r?function x$(n){for(let e=0;e<n.length;e++)if(L1(n[e]))return e;return n.length}(r):0;let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&i){if(i=2|1&i,""!==c&&!C$(n,c,t)||""===c&&1===e.length){if(hs(i))return!1;o=!0}}else if(8&i){if(null===r||!w$(n,r,c,t)){if(hs(i))return!1;o=!0}}else{const l=e[++a],u=T$(c,r,Q0(n),t);if(-1===u){if(hs(i))return!1;o=!0;continue}if(""!==l){let d;if(d=u>s?"":r[u+1].toLowerCase(),2&i&&l!==d){if(hs(i))return!1;o=!0}}}}else{if(!o&&!hs(i)&&!hs(c))return!1;if(o&&hs(c))continue;o=!1,i=c|1&i}}return hs(i)||o}function hs(n){return!(1&n)}function T$(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function M$(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function j1(n,e,t=!1){for(let i=0;i<e.length;i++)if(A$(n,e[i],t))return!0;return!1}function I$(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function H1(n,e){return n?":not("+e.trim()+")":e}function D$(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!hs(o)&&(e+=H1(s,r),r=""),i=o,s=s||!hs(i);t++}return""!==r&&(e+=H1(s,r)),e}function Ut(n){return Oo(()=>{const e=G1(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===fm.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ds.Emulated,styles:n.styles||rt,_:null,schemas:n.schemas||null,tView:null,id:""};W1(t);const i=n.dependencies;return t.directiveDefs=pm(i,!1),t.pipeDefs=pm(i,!0),t.id=function k$(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function P$(n){return We(n)||Un(n)}function N$(n){return null!==n}function sn(n){return Oo(()=>({type:n.type,bootstrap:n.bootstrap||rt,declarations:n.declarations||rt,imports:n.imports||rt,exports:n.exports||rt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function z1(n,e){if(null==n)return Ls;const t={};for(const i in n)if(n.hasOwnProperty(i)){const r=n[i];let s,o,a=wa.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(t[s]=a!==wa.None?[i,a]:i,e[s]=o):t[s]=i}return t}function ie(n){return Oo(()=>{const e=G1(n);return W1(e),e})}function Ai(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function We(n){return n[Ch]||null}function Un(n){return n[z0]||null}function li(n){return n[G0]||null}function G1(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ls,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||rt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:z1(n.inputs,e),outputs:z1(n.outputs),debugInfo:null}}function W1(n){n.features?.forEach(e=>e(n))}function pm(n,e){if(!n)return null;const t=e?li:P$;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(N$)}function $1(...n){return{\u0275providers:eE(0,n),\u0275fromNgModule:!0}}function eE(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return su(e,o=>{const a=o;gm(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&q1(r,s),t}function q1(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];tE(r,s=>{e(s,i)})}}function gm(n,e,t,i){if(!(n=Me(n)))return!1;let r=null,s=rm(n);const o=!s&&We(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(s=rm(c),!s)return!1;r=c}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const l of c)gm(l,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let l;i.add(r);try{su(s.imports,u=>{gm(u,e,t,i)&&(l||=[],l.push(u))})}finally{}void 0!==l&&q1(l,e)}if(!a){const l=xc(r)||(()=>new r);e({provide:r,useFactory:l,deps:rt},r),e({provide:J0,useValue:r,multi:!0},r),e({provide:wr,useValue:()=>I(r),multi:!0},r)}const c=s.providers;if(null!=c&&!a){const l=n;tE(c,u=>{e(u,l)})}}}return r!==n&&void 0!==n.providers}function tE(n,e){for(let t of n)H0(t)&&(t=t.\u0275providers),Array.isArray(t)?tE(t,e):e(t)}const L$=Tt({provide:String,useValue:Tt});function nE(n){return null!==n&&"object"==typeof n&&L$ in n}function Mc(n){return"function"==typeof n}const iE=new F(""),mm={},V$={};let rE;function _m(){return void 0===rE&&(rE=new hm),rE}class Si{}class au extends Si{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,oE(e,o=>this.processProvider(o)),this.records.set(dm,cu(void 0,this)),r.has("environment")&&this.records.set(Si,cu(void 0,this));const s=this.records.get(iE);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(J0,rt,Ke.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=z(null);try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),z(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Ea(this),i=Qi(void 0);try{return e()}finally{Ea(t),Qi(i)}}get(e,t=Th,i=Ke.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(I1))return e[I1](this);i=am(i);const s=Ea(this),o=Qi(void 0);try{if(!(i&Ke.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function G$(n){return"function"==typeof n||"object"==typeof n&&n instanceof F}(e)&&im(e);c=l&&this.injectableDefInScope(l)?cu(sE(e),mm):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(i&Ke.Self?_m():this.parent).get(e,t=i&Ke.Optional&&t===Th?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[om]=a[om]||[]).unshift(Vn(e)),s)throw a;return function g$(n,e,t,i){const r=n[om];throw e[O1]&&r.unshift(e[O1]),n.message=function m$(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Vn(e);if(Array.isArray(e))r=e.map(Vn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Vn(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(u$,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[om]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{Qi(o),Ea(s)}}resolveInjectorInitializers(){const e=z(null),t=Ea(this),i=Qi(void 0);try{const s=this.get(wr,rt,Ke.Self);for(const o of s)o()}finally{Ea(t),Qi(i),z(e)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Vn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new H(205,!1)}processProvider(e){let t=Mc(e=Me(e))?e:Me(e&&e.provide);const i=function j$(n){return nE(n)?cu(void 0,n.useValue):cu(K1(n),mm)}(e);if(!Mc(e)&&!0===e.multi){let r=this.records.get(t);r||(r=cu(void 0,mm,!0),r.factory=()=>X0(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){const i=z(null);try{return t.value===mm&&(t.value=V$,t.value=t.factory()),"object"==typeof t.value&&t.value&&function z$(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{z(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Me(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function sE(n){const e=im(n),t=null!==e?e.factory:xc(n);if(null!==t)return t;if(n instanceof F)throw new H(204,!1);if(n instanceof Function)return function U$(n){if(n.length>0)throw new H(204,!1);const t=function i$(n){return n&&(n[sm]||n[S1])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new H(204,!1)}function K1(n,e,t){let i;if(Mc(n)){const r=Me(n);return xc(r)||sE(r)}if(nE(n))i=()=>Me(n.useValue);else if(function Y1(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...X0(n.deps||[]));else if(function X1(n){return!(!n||!n.useExisting)}(n))i=()=>I(Me(n.useExisting));else{const r=Me(n&&(n.useClass||n.provide));if(!function H$(n){return!!n.deps}(n))return xc(r)||sE(r);i=()=>new r(...X0(n.deps))}return i}function cu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function oE(n,e){for(const t of n)Array.isArray(t)?oE(t,e):t&&H0(t)?oE(t.\u0275providers,e):e(t)}function Bs(n,e){n instanceof au&&n.assertNotDestroyed();const i=Ea(n),r=Qi(void 0);try{return e()}finally{Ea(i),Qi(r)}}function J1(){return void 0!==D1()||null!=function h$(){return iu}()}function Ih(n){if(!J1())throw new H(-203,!1)}const en=0,X=1,ye=2,Cn=3,fs=4,ui=5,Bi=6,uu=7,jt=8,An=9,Vs=10,Ie=11,Rh=12,Q1=13,du=14,tn=15,Ic=16,hu=17,No=18,fu=19,eR=20,Aa=21,vm=22,jr=23,he=25,cE=1,Us=7,pu=9,hn=10;var Em=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Em||{});function Hn(n){return Array.isArray(n)&&"object"==typeof n[cE]}function xi(n){return Array.isArray(n)&&!0===n[cE]}function lE(n){return!!(4&n.flags)}function Dc(n){return n.componentOffset>-1}function wm(n){return!(1&~n.flags)}function ps(n){return!!n.template}function Ph(n){return!!(512&n[ye])}class sR{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function oR(n,e,t,i){null!==e?e.applyValueToInputSignal(e,i):n[t]=i}function zn(){return aR}function aR(n){return n.type.prototype.ngOnChanges&&(n.setInput=rq),iq}function iq(){const n=lR(this),e=n?.current;if(e){const t=n.previous;if(t===Ls)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function rq(n,e,t,i,r){const s=this.declaredInputs[i],o=lR(n)||function sq(n,e){return n[cR]=e}(n,{previous:Ls,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new sR(l&&l.currentValue,t,c===Ls),oR(n,e,r,t)}zn.ngInherit=!0;const cR="__ngSimpleChanges__";function lR(n){return n[cR]||null}const js=function(n,e,t){},uR="svg";function st(n){for(;Array.isArray(n);)n=n[en];return n}function Nh(n,e){return st(e[n])}function Vi(n,e){return st(e[n.index])}function Fh(n,e){return n.data[e]}function Rc(n,e){return n[e]}function Cr(n,e){const t=e[n];return Hn(t)?t:t[en]}function pE(n){return!(128&~n[ye])}function Hr(n,e){return null==e?null:n[e]}function hR(n){n[hu]=0}function fR(n){1024&n[ye]||(n[ye]|=1024,pE(n)&&Cm(n))}function kh(n){return!!(9216&n[ye]||n[jr]?.dirty)}function gE(n){n[Vs].changeDetectionScheduler?.notify(7),64&n[ye]&&(n[ye]|=1024),kh(n)&&Cm(n)}function Cm(n){n[Vs].changeDetectionScheduler?.notify(0);let e=Fo(n);for(;null!==e&&!(8192&e[ye])&&(e[ye]|=8192,pE(e));)e=Fo(e)}function Am(n,e){if(!(256&~n[ye]))throw new H(911,!1);null===n[Aa]&&(n[Aa]=[]),n[Aa].push(e)}function Fo(n){const e=n[Cn];return xi(e)?e[Cn]:e}const De={lFrame:SR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let gR=!1;function mR(){return De.bindingsEnabled}function Oc(){return null!==De.skipHydrationRootTNode}function B(){return De.lFrame.lView}function Ue(){return De.lFrame.tView}function fn(n){return De.lFrame.contextLView=n,n[jt]}function pn(n){return De.lFrame.contextLView=null,n}function St(){let n=_R();for(;null!==n&&64===n.type;)n=n.parent;return n}function _R(){return De.lFrame.currentTNode}function gs(n,e){const t=De.lFrame;t.currentTNode=n,t.isParent=e}function yE(){return De.lFrame.isParent}function vE(){De.lFrame.isParent=!1}function bR(){return gR}function ER(n){gR=n}function Ui(){const n=De.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ms(){return De.lFrame.bindingIndex++}function Lo(n){const e=De.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function vq(n,e){const t=De.lFrame;t.bindingIndex=t.bindingRootIndex=n,bE(e)}function bE(n){De.lFrame.currentDirectiveIndex=n}function wE(){return De.lFrame.currentQueryIndex}function Sm(n){De.lFrame.currentQueryIndex=n}function Eq(n){const e=n[X];return 2===e.type?e.declTNode:1===e.type?n[ui]:null}function AR(n,e,t){if(t&Ke.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Ke.Host||(r=Eq(s),null===r||(s=s[du],10&r.type))););if(null===r)return!1;e=r,n=s}const i=De.lFrame=TR();return i.currentTNode=e,i.lView=n,!0}function CE(n){const e=TR(),t=n[X];De.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function TR(){const n=De.lFrame,e=null===n?null:n.child;return null===e?SR(n):e}function SR(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function xR(){const n=De.lFrame;return De.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const MR=xR;function AE(){const n=xR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function di(){return De.lFrame.selectedIndex}function Pc(n){De.lFrame.selectedIndex=n}function Ht(){const n=De.lFrame;return Fh(n.tView,n.selectedIndex)}function xm(){De.lFrame.currentNamespace=uR}let DR=!0;function Bh(){return DR}function Hs(n){DR=n}function Mm(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Im(n,e,t){RR(n,e,3,t)}function Dm(n,e,t,i){(3&n[ye])===t&&RR(n,e,t,i)}function TE(n,e){let t=n[ye];(3&t)===e&&(t&=16383,t+=1,n[ye]=t)}function RR(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let c=void 0!==i?65535&n[hu]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=i&&a>=i)break}else e[c]<0&&(n[hu]+=65536),(a<s||-1==s)&&(xq(n,t,e,c),n[hu]=(4294901760&n[hu])+c+2),c++}function OR(n,e){js(4,n,e);const t=z(null);try{e.call(n)}finally{z(t),js(5,n,e)}}function xq(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[ye]>>14<n[hu]>>16&&(3&n[ye])===e&&(n[ye]+=16384,OR(a,s)):OR(a,s)}const gu=-1;class Vh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}const xE={};class Nc{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=am(i);const r=this.injector.get(e,xE,i);return r!==xE||t===xE?r:this.parentInjector.get(e,t,i)}}function ME(n){return n!==gu}function Uh(n){return 32767&n}function jh(n,e){let t=function Rq(n){return n>>16}(n),i=e;for(;t>0;)i=i[du],t--;return i}let IE=!0;function Rm(n){const e=IE;return IE=n,e}const NR=255,FR=5;let Pq=0;const zs={};function Om(n,e){const t=kR(n,e);if(-1!==t)return t;const i=e[X];i.firstCreatePass&&(n.injectorIndex=e.length,DE(i.data,n),DE(e,null),DE(i.blueprint,null));const r=Pm(n,e),s=n.injectorIndex;if(ME(r)){const o=Uh(r),a=jh(r,e),c=a[X].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function DE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function kR(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Pm(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=zR(r),null===i)return gu;if(t++,r=r[du],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return gu}function RE(n,e,t){!function Nq(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Ah)&&(i=t[Ah]),null==i&&(i=t[Ah]=Pq++);const r=i&NR;e.data[n+(r>>FR)]|=1<<r}(n,e,t)}function LR(n,e,t){if(t&Ke.Optional||void 0!==n)return n;W0()}function BR(n,e,t,i){if(t&Ke.Optional&&void 0===i&&(i=null),!(t&(Ke.Self|Ke.Host))){const r=n[An],s=Qi(void 0);try{return r?r.get(e,i,t&Ke.Optional):R1(e,i,t&Ke.Optional)}finally{Qi(s)}}return LR(i,0,t)}function VR(n,e,t,i=Ke.Default,r){if(null!==n){if(2048&e[ye]&&!(i&Ke.Self)){const o=function Vq(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[ye]&&!(512&o[ye]);){const a=UR(s,o,t,i|Ke.Self,zs);if(a!==zs)return a;let c=s.parent;if(!c){const l=o[eR];if(l){const u=l.get(t,zs,i);if(u!==zs)return u}c=zR(o),o=o[du]}s=c}return r}(n,e,t,i,zs);if(o!==zs)return o}const s=UR(n,e,t,i,zs);if(s!==zs)return s}return BR(e,t,i,r)}function UR(n,e,t,i,r){const s=function Lq(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Ah)?n[Ah]:void 0;return"number"==typeof e?e>=0?e&NR:Bq:e}(t);if("function"==typeof s){if(!AR(e,n,i))return i&Ke.Host?LR(r,0,i):BR(e,t,i,r);try{let o;if(o=s(i),null!=o||i&Ke.Optional)return o;W0()}finally{MR()}}else if("number"==typeof s){let o=null,a=kR(n,e),c=gu,l=i&Ke.Host?e[tn][ui]:null;for((-1===a||i&Ke.SkipSelf)&&(c=-1===a?Pm(n,e):e[a+8],c!==gu&&HR(i,!1)?(o=e[X],a=Uh(c),e=jh(c,e)):a=-1);-1!==a;){const u=e[X];if(jR(s,a,u.data)){const d=kq(a,e,t,o,i,l);if(d!==zs)return d}c=e[a+8],c!==gu&&HR(i,e[X].data[a+8]===l)&&jR(s,a,e)?(o=u,a=Uh(c),e=jh(c,e)):a=-1}}return r}function kq(n,e,t,i,r,s){const o=e[X],a=o.data[n+8],u=Nm(a,o,t,null==i?Dc(a)&&IE:i!=o&&!!(3&a.type),r&Ke.Host&&s===a);return null!==u?Fc(e,o,u,a):zs}function Nm(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,c=n.directiveStart,u=s>>20,h=r?a+u:n.directiveEnd;for(let f=i?a:a+u;f<h;f++){const p=o[f];if(f<c&&t===p||f>=c&&p.type===t)return f}if(r){const f=o[c];if(f&&ps(f)&&f.type===t)return c}return null}function Fc(n,e,t,i){let r=n[t];const s=e.data;if(function Mq(n){return n instanceof Vh}(r)){const o=r;o.resolving&&function a$(n,e){throw e&&e.join(" > "),new H(-200,n)}(function pt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Oe(n)}(s[t]));const a=Rm(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Qi(o.injectImpl):null;AR(n,i,Ke.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function Sq(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=aR(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&Qi(l),Rm(a),o.resolving=!1,MR()}}return r}function jR(n,e,t){return!!(t[e+(n>>FR)]&1<<n)}function HR(n,e){return!(n&Ke.Self||n&Ke.Host&&e)}class Gn{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return VR(this._tNode,this._lView,e,am(i),t)}}function Bq(){return new Gn(St(),B())}function zt(n){return Oo(()=>{const e=n.prototype.constructor,t=e[Po]||OE(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Po]||OE(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function OE(n){return nm(n)?()=>{const e=OE(Me(n));return e&&e()}:xc(n)}function zR(n){const e=n[X],t=e.type;return 2===t?e.declTNode:1===t?n[ui]:null}function Ta(n){return function Fq(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(L1(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(St(),n)}function XR(n,e=null,t=null,i){const r=function YR(n,e=null,t=null,i,r=new Set){const s=[t||rt,$1(n)];return i=i||("object"==typeof n?void 0:Vn(n)),new au(s,e||_m(),i||null,r)}(n,e,t,i);return r.resolveInjectorInitializers(),r}class ht{static#e=this.THROW_IF_NOT_FOUND=Th;static#t=this.NULL=new hm;static create(e,t){if(Array.isArray(e))return XR({name:""},t,e,"");{const i=e.name??"";return XR({name:i},e.parent,e.providers,i)}}static#n=this.\u0275prov=j({token:ht,providedIn:"any",factory:()=>I(dm)});static#i=this.__NG_ELEMENT_ID__=-1}new F("").__NG_ELEMENT_ID__=n=>{const e=St();if(null===e)throw new H(204,!1);if(2&e.type)return e.value;if(n&Ke.Optional)return null;throw new H(204,!1)};function NE(n){return n.ngOriginalError}const JR=!0;let kc=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Yq;static#t=this.__NG_ENV_ID__=t=>t}return n})();class Xq extends kc{constructor(e){super(),this._lView=e}onDestroy(e){return Am(this._lView,e),()=>function mE(n,e){if(null===n[Aa])return;const t=n[Aa].indexOf(e);-1!==t&&n[Aa].splice(t,1)}(this._lView,e)}}function Yq(){return new Xq(B())}let Bo=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new wn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})();const be=class Kq extends ue{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,J1()&&(this.destroyRef=P(kc,{optional:!0})??void 0,this.pendingTasks=P(Bo,{optional:!0})??void 0)}emit(e){const t=z(null);try{super.next(e)}finally{z(t)}}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),r&&(r=this.wrapInTimeout(r)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof xt&&e.add(a),a}wrapInTimeout(e){return t=>{const i=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==i&&this.pendingTasks?.remove(i)})}}};function km(...n){}function ZR(n){let e,t;function i(){n=km;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function QR(n){return queueMicrotask(()=>n()),()=>{n=km}}const FE="isAngularZone",Lm=FE+"_ID";let Jq=0;class pe{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new be(!1),this.onMicrotaskEmpty=new be(!1),this.onStable=new be(!1),this.onError=new be(!1);const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:s=JR}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&i,o.shouldCoalesceRunChangeDetection=r,o.callbackScheduled=!1,o.scheduleInRootZone=s,function eX(n){const e=()=>{!function Qq(n){function e(){ZR(()=>{n.callbackScheduled=!1,LE(n),n.isCheckStableRunning=!0,kE(n),n.isCheckStableRunning=!1})}n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),LE(n))}(n)},t=Jq++;n._inner=n._inner.fork({name:"angular",properties:{[FE]:!0,[Lm]:t,[Lm+t]:!0},onInvokeTask:(i,r,s,o,a,c)=>{if(function tX(n){return nO(n,"__ignore_ng_zone__")}(c))return i.invokeTask(s,o,a,c);try{return eO(n),i.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),tO(n)}},onInvoke:(i,r,s,o,a,c,l)=>{try{return eO(n),i.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function nX(n){return nO(n,"__scheduler_tick__")}(c)&&e(),tO(n)}},onHasTask:(i,r,s,o)=>{i.hasTask(s,o),r===s&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,LE(n),kE(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(i,r,s,o)=>(i.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(FE)}static assertInAngularZone(){if(!pe.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(pe.isInAngularZone())throw new H(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Zq,km,km);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Zq={};function kE(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function LE(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function eO(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function tO(n){n._nesting--,kE(n)}class BE{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new be,this.onMicrotaskEmpty=new be,this.onStable=new be,this.onError=new be}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}function nO(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class tr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&NE(e);for(;t&&NE(t);)t=NE(t);return t||null}}const rX=new F("",{providedIn:"root",factory:()=>{const n=P(pe),e=P(tr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function oX(){return yu(St(),B())}function yu(n,e){return new gt(Vi(n,e))}let gt=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=oX}return n})();function rO(n){return n instanceof gt?n.nativeElement:n}function aX(){return this._results[Symbol.iterator]()}class vu{static#e=Symbol.iterator;get changes(){return this._changes??=new be}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=vu.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=aX)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const i=function er(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function b$(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function zh(n){return!(128&~n.flags)}const UE=new Map;let lX=0;const Bm="__ngContext__";function Mi(n,e){Hn(e)?(n[Bm]=e[fu],function dX(n){UE.set(n[fu],n)}(e)):n[Bm]=e}function pO(n){return mO(n[Rh])}function gO(n){return mO(n[fs])}function mO(n){for(;null!==n&&!xi(n);)n=n[fs];return n}let HE;const Eu=new F("",{providedIn:"root",factory:()=>IX}),IX="ng",AO=new F(""),zr=new F("",{providedIn:"platform",factory:()=>"unknown"}),Lc=new F(""),Um=new F("",{providedIn:"root",factory:()=>function Sa(){if(void 0!==HE)return HE;if(typeof document<"u")return document;throw new H(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let TO=()=>null;function YE(n,e,t=!1){return TO(n,e,t)}const PO=new F("",{providedIn:"root",factory:()=>!1});let Xm;function Au(n){return function ew(){if(void 0===Xm&&(Xm=null,Mt.trustedTypes))try{Xm=Mt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Xm}()?.createHTML(n)||n}class Vc{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${E1})`}}class zX extends Vc{getTypeName(){return"HTML"}}class GX extends Vc{getTypeName(){return"Style"}}class WX extends Vc{getTypeName(){return"Script"}}class $X extends Vc{getTypeName(){return"URL"}}class qX extends Vc{getTypeName(){return"ResourceURL"}}function Ar(n){return n instanceof Vc?n.changingThisBreaksApplicationSecurity:n}function Gs(n,e){const t=function XX(n){return n instanceof Vc&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${E1})`)}return t===e}class eY{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Au(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}}class tY{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Au(e),t}}const iY=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Km(n){return(n=String(n)).match(iY)?n:"unsafe:"+n}function Vo(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Kh(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const UO=Vo("area,br,col,hr,img,wbr"),jO=Vo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),HO=Vo("rp,rt"),nw=Kh(UO,Kh(jO,Vo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Kh(HO,Vo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Kh(HO,jO)),iw=Vo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zO=Kh(iw,Vo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),rY=Vo("script,style,template");class sY{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)r.push(t),t=cY(t);else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=aY(t);if(s){t=s;break}t=r.pop()}return this.buf.join("")}startElement(e){const t=GO(e).toLowerCase();if(!nw.hasOwnProperty(t))return this.sanitizedSomething=!0,!rY.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!zO.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;iw[a]&&(c=Km(c)),this.buf.push(" ",o,'="',$O(c),'"')}return this.buf.push(">"),!0}endElement(e){const t=GO(e).toLowerCase();nw.hasOwnProperty(t)&&!UO.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push($O(e))}}function aY(n){const e=n.nextSibling;if(e&&n!==e.previousSibling)throw WO(e);return e}function cY(n){const e=n.firstChild;if(e&&function oY(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,e))throw WO(e);return e}function GO(n){const e=n.nodeName;return"string"==typeof e?e:"FORM"}function WO(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const lY=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,uY=/([^\#-~ |!])/g;function $O(n){return n.replace(/&/g,"&amp;").replace(lY,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(uY,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jm;function qO(n,e){let t=null;try{Jm=Jm||function VO(n){const e=new tY(n);return function nY(){try{return!!(new window.DOMParser).parseFromString(Au(""),"text/html")}catch{return!1}}()?new eY(e):e}(n);let i=e?String(e):"";t=Jm.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=Jm.getInertBodyElement(i)}while(i!==s);return Au((new sY).sanitizeChildren(rw(t)||t))}finally{if(t){const i=rw(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function rw(n){return"content"in n&&function dY(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var hi=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(hi||{});function sw(n){const e=function Jh(){const n=B();return n&&n[Vs].sanitizer}();return e?e.sanitize(hi.URL,n)||"":Gs(n,"URL")?Ar(n):Km(Oe(n))}function ir(n){return"browser"===(n??P(ht)).get(zr)}var xa=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(xa||{});let cw;function lw(n,e){return cw(n,e)}function Su(n,e,t,i,r){if(null!=i){let s,o=!1;xi(i)?s=i:Hn(i)&&(o=!0,i=i[en]);const a=st(i);0===n&&null!==t?null==r?cP(e,t,a):Uc(e,t,a,r||null,!0):1===n&&null!==t?Uc(e,t,a,r||null,!0):2===n?function Qh(n,e,t){n.removeChild(null,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function UY(n,e,t,i,r){const s=t[Us];s!==st(t)&&Su(e,n,i,s,r);for(let a=hn;a<t.length;a++){const c=t[a];i_(c[X],c,n,e,i,s)}}(e,n,s,t,r)}}function e_(n,e,t){return n.createElement(e,t)}function sP(n,e){e[Vs].changeDetectionScheduler?.notify(8),i_(n,e,e[Ie],2,null,null)}function oP(n,e){const t=n[pu],i=e[Cn];(Hn(i)||e[tn]!==i[Cn][tn])&&(n[ye]|=Em.HasTransplantedViews),null===t?n[pu]=[e]:t.push(e)}function hw(n,e){const t=n[pu],i=t.indexOf(e);t.splice(i,1)}function Zh(n,e){if(n.length<=hn)return;const t=hn+e,i=n[t];if(i){const r=i[Ic];null!==r&&r!==n&&hw(r,i),e>0&&(n[t-1][fs]=i[fs]);const s=lm(n,hn+e);!function OY(n,e){sP(n,e),e[en]=null,e[ui]=null}(i[X],i);const o=s[No];null!==o&&o.detachView(s[X]),i[Cn]=null,i[fs]=null,i[ye]&=-129}return i}function t_(n,e){if(!(256&e[ye])){const t=e[Ie];t.destroyNode&&i_(n,e,t,3,null,null),function NY(n){let e=n[Rh];if(!e)return fw(n[X],n);for(;e;){let t=null;if(Hn(e))t=e[Rh];else{const i=e[hn];i&&(t=i)}if(!t){for(;e&&!e[fs]&&e!==n;)Hn(e)&&fw(e[X],e),e=e[Cn];null===e&&(e=n),Hn(e)&&fw(e[X],e),t=e&&e[fs]}e=t}}(e)}}function fw(n,e){if(256&e[ye])return;const t=z(null);try{e[ye]&=-129,e[ye]|=256,e[jr]&&Se(e[jr]),function LY(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Vh)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],c=s[o+1];js(4,a,c);try{c.call(a)}finally{js(5,a,c)}}else{js(4,r,s);try{s.call(r)}finally{js(5,r,s)}}}}}(n,e),function kY(n,e){const t=n.cleanup,i=e[uu];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[uu]=null);const r=e[Aa];if(null!==r){e[Aa]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[X].type&&e[Ie].destroy();const i=e[Ic];if(null!==i&&xi(e[Cn])){i!==e[Cn]&&hw(i,e);const r=e[No];null!==r&&r.detachView(n)}!function hX(n){UE.delete(n[fu])}(e)}finally{z(t)}}function pw(n,e,t){return function aP(n,e,t){let i=e;for(;null!==i&&168&i.type;)i=(e=i).parent;if(null===i)return t[en];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===ds.None||s===ds.Emulated)return null}return Vi(i,t)}}(n,e.parent,t)}function Uc(n,e,t,i,r){n.insertBefore(e,t,i,r)}function cP(n,e,t){n.appendChild(e,t)}function lP(n,e,t,i,r){null!==i?Uc(n,e,t,i,r):cP(n,e,t)}function gw(n,e){return n.parentNode(e)}function uP(n,e,t){return hP(n,e,t)}let mw,hP=function dP(n,e,t){return 40&n.type?Vi(n,t):null};function n_(n,e,t,i){const r=pw(n,i,e),s=e[Ie],a=uP(i.parent||e[ui],i,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)lP(s,r,t[c],a,!1);else lP(s,r,t,a,!1);void 0!==mw&&mw(s,i,e,t,r)}function jc(n,e){if(null!==e){const t=e.type;if(3&t)return Vi(e,n);if(4&t)return _w(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return jc(n,i);{const r=n[e.index];return xi(r)?_w(-1,r):st(r)}}if(128&t)return jc(n,e.next);if(32&t)return lw(e,n)()||st(n[e.index]);{const i=pP(n,e);return null!==i?Array.isArray(i)?i[0]:jc(Fo(n[tn]),i):jc(n,e.next)}}return null}function pP(n,e){return null!==e?n[tn][ui].projection[e.projection]:null}function _w(n,e){const t=hn+n+1;if(t<e.length){const i=e[t],r=i[X].firstChild;if(null!==r)return jc(i,r)}return e[Us]}function yw(n,e,t,i,r,s,o){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=i[t.index],c=t.type;if(o&&0===e&&(a&&Mi(st(a),i),t.flags|=2),32&~t.flags)if(8&c)yw(n,e,t.child,i,r,s,!1),Su(e,n,r,a,s);else if(32&c){const l=lw(t,i);let u;for(;u=l();)Su(e,n,r,u,s);Su(e,n,r,a,s)}else 16&c?mP(n,e,i,t,r,s):Su(e,n,r,a,s);t=o?t.projectionNext:t.next}}function i_(n,e,t,i,r,s){yw(t,i,n.firstChild,e,r,s,!1)}function mP(n,e,t,i,r,s){const o=t[tn],c=o[ui].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Su(e,n,r,c[l],s);else{let l=c;const u=o[Cn];zh(i)&&(l.flags|=128),yw(n,e,l,u,r,s,!0)}}function _P(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function yP(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&Z0(n,e,i),null!==r&&_P(n,e,r),null!==s&&function HY(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}const Pe={};function je(n=1){vP(Ue(),B(),di()+n,!1)}function vP(n,e,t,i){if(!i)if(3&~e[ye]){const s=n.preOrderHooks;null!==s&&Dm(e,s,0,t)}else{const s=n.preOrderCheckHooks;null!==s&&Im(e,s,t)}Pc(t)}function R(n,e=Ke.Default){const t=B();return null===t?I(n,e):VR(St(),t,Me(n),e)}function EP(n,e,t,i,r,s){const o=z(null);try{let a=null;r&wa.SignalBased&&(a=e[i][K]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),r&wa.HasDecoratorInputTransform&&(s=n.inputTransforms[i].call(e,s)),null!==n.setInput?n.setInput(e,a,s,t,i):oR(e,a,i,s)}finally{z(o)}}function r_(n,e,t,i,r,s,o,a,c,l,u){const d=e.blueprint.slice();return d[en]=r,d[ye]=204|i,(null!==l||n&&2048&n[ye])&&(d[ye]|=2048),hR(d),d[Cn]=d[du]=n,d[jt]=t,d[Vs]=o||n&&n[Vs],d[Ie]=a||n&&n[Ie],d[An]=c||n&&n[An]||null,d[ui]=s,d[fu]=function uX(){return lX++}(),d[Bi]=u,d[eR]=l,d[tn]=2==e.type?n[tn]:d,d}function Hc(n,e,t,i,r){let s=n.data[e];if(null===s)s=function vw(n,e,t,i,r){const s=_R(),o=yE(),c=n.data[e]=function KY(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return Oc()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=c),null!==s&&(o?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c,c.prev=s)),c}(n,e,t,i,r),function yq(){return De.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Lh(){const n=De.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return gs(s,!0),s}function ef(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function wP(n,e,t,i,r){const s=di(),o=2&i;try{Pc(-1),o&&e.length>he&&vP(n,e,he,!1),js(o?2:0,r),t(i,r)}finally{Pc(s),js(o?3:1,r)}}function bw(n,e,t){if(lE(e)){const i=z(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{z(i)}}}function Ew(n,e,t){mR()&&(function r7(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;Dc(t)&&function d7(n,e,t){const i=Vi(e,n),r=CP(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=s_(n,r_(n,r,null,o,i,e,null,n[Vs].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Om(t,e),Mi(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const c=n.data[a],l=Fc(e,n,a,t);Mi(l,e),null!==o&&h7(0,a-r,l,c,0,o),ps(c)&&(Cr(t.index,e)[jt]=Fc(e,n,a,t))}}(n,e,t,Vi(t,e)),!(64&~t.flags)&&MP(n,e,t))}function ww(n,e,t=Vi){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function CP(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Cw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Cw(n,e,t,i,r,s,o,a,c,l,u){const d=he+i,h=d+r,f=function GY(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Pe);return t}(d,h),p="function"==typeof l?l():l;return f[X]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}let AP=()=>null;function TP(n,e,t,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;i??={};let a,c=wa.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(null!==r){if(!r.hasOwnProperty(s))continue;l=r[s]}0===n?SP(i,t,l,a,c):SP(i,t,l,a)}return i}function SP(n,e,t,i,r){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,i):s=n[t]=[e,i],void 0!==r&&s.push(r)}function rr(n,e,t,i,r,s,o,a){const c=Vi(e,t);let u,l=e.inputs;!a&&null!=l&&(u=l[i])?(Mw(n,t,u,i,r),Dc(e)&&function QY(n,e){const t=Cr(e,n);16&t[ye]||(t[ye]|=64)}(t,e.index)):3&e.type&&(i=function ZY(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(c,i,r))}function Aw(n,e,t,i){if(mR()){const r=null===i?null:{"":-1},s=function o7(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(j1(e,o.selectors,!1))if(i||(i=[]),ps(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),Tw(n,e,a.length)}else i.unshift(o),Tw(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&xP(n,e,t,o,r,a),r&&function a7(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new H(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=xh(t.mergedAttrs,t.attrs)}function xP(n,e,t,i,r,s){for(let l=0;l<i.length;l++)RE(Om(t,e),n,i[l].type);!function l7(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let l=0;l<i.length;l++){const u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=ef(n,e,i.length,null);for(let l=0;l<i.length;l++){const u=i[l];t.mergedAttrs=xh(t.mergedAttrs,u.hostAttrs),u7(n,t,e,c,u),c7(c,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function JY(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let c=null,l=null;for(let u=e.directiveStart;u<r;u++){const d=s[u],h=t?t.get(d):null,p=h?h.outputs:null;c=TP(0,d.inputs,u,c,h?h.inputs:null),l=TP(1,d.outputs,u,l,p);const g=null===c||null===o||Q0(e)?null:f7(c,u,o);a.push(g)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,s)}function MP(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function bq(){return De.lFrame.currentDirectiveIndex}();try{Pc(s);for(let a=i;a<r;a++){const c=n.data[a],l=e[a];bE(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&s7(c,l)}}finally{Pc(-1),bE(o)}}function s7(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Tw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function c7(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;ps(e)&&(t[""]=n)}}function u7(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=xc(r.type)),o=new Vh(s,ps(r),R);n.blueprint[i]=o,t[i]=o,function t7(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function n7(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,ef(n,t,r.hostVars,Pe),r)}function Ws(n,e,t,i,r,s){const o=Vi(n,e);!function Sw(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?Oe(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[Ie],o,s,n.value,t,i,r)}function h7(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)EP(i,t,o[a++],o[a++],o[a++],o[a++])}function f7(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function IP(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function DP(n,e){const t=n.contentQueries;if(null!==t){const i=z(null);try{for(let r=0;r<t.length;r+=2){const o=t[r+1];if(-1!==o){const a=n.data[o];Sm(t[r]),a.contentQueries(2,e[o],o)}}}finally{z(i)}}}function s_(n,e){return n[Rh]?n[Q1][fs]=e:n[Rh]=e,n[Q1]=e,e}function xw(n,e,t){Sm(0);const i=z(null);try{e(n,t)}finally{z(i)}}function RP(n){return n[uu]??=[]}function OP(n){return n.cleanup??=[]}function o_(n,e){const t=n[An],i=t?t.get(tr,null):null;i&&i.handleError(e)}function Mw(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],c=t[s++];EP(n.data[o],e[o],i,a,c,r)}}function p7(n,e){const t=Cr(e,n),i=t[X];!function g7(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[en];null!==r&&null===t[Bi]&&(t[Bi]=YE(r,t[An])),Iw(i,t,t[jt])}function Iw(n,e,t){CE(e);try{const i=n.viewQuery;null!==i&&xw(1,i,t);const r=n.template;null!==r&&wP(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[No]?.finishViewCreation(n),n.staticContentQueries&&DP(n,e),n.staticViewQueries&&xw(2,n.viewQuery,t);const s=n.components;null!==s&&function m7(n,e){for(let t=0;t<e.length;t++)p7(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[ye]&=-5,AE()}}function xu(n,e,t,i){const r=z(null);try{const s=e.tView,c=r_(n,s,t,4096&n[ye]?4096:16,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null);c[Ic]=n[e.index];const u=n[No];return null!==u&&(c[No]=u.createEmbeddedView(s)),Iw(s,c,t),c}finally{z(r)}}function zc(n,e){return!e||null===e.firstChild||zh(n)}function Mu(n,e,t,i=!0){const r=e[X];if(function FY(n,e,t,i){const r=hn+i,s=t.length;i>0&&(t[r-1][fs]=e),i<s-hn?(e[fs]=t[r],N1(t,hn+i,e)):(t.push(e),e[fs]=null),e[Cn]=t;const o=e[Ic];null!==o&&t!==o&&oP(o,e);const a=e[No];null!==a&&a.insertView(n),gE(e),e[ye]|=128}(r,e,n,t),i){const o=_w(t,n),a=e[Ie],c=gw(a,n[Us]);null!==c&&function PY(n,e,t,i,r,s){i[en]=r,i[ui]=e,i_(n,i,t,1,r,s)}(r,n[ui],a,e,c,o)}const s=e[Bi];null!==s&&null!==s.firstChild&&(s.firstChild=null)}function tf(n,e,t,i,r=!1){for(;null!==t;){if(128===t.type){t=r?t.projectionNext:t.next;continue}const s=e[t.index];null!==s&&i.push(st(s)),xi(s)&&FP(s,i);const o=t.type;if(8&o)tf(n,e,t.child,i);else if(32&o){const a=lw(t,e);let c;for(;c=a();)i.push(c)}else if(16&o){const a=pP(e,t);if(Array.isArray(a))i.push(...a);else{const c=Fo(e[tn]);tf(c[X],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function FP(n,e){for(let t=hn;t<n.length;t++){const i=n[t],r=i[X].firstChild;null!==r&&tf(i[X],i,r,e)}n[Us]!==n[en]&&e.push(n[Us])}let kP=[];const b7={...Et,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Cm(n.lView)},consumerOnSignalRead(){this.lView[jr]=this}},w7={...Et,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Fo(n.lView);for(;e&&!LP(e[X]);)e=Fo(e);e&&fR(e)},consumerOnSignalRead(){this.lView[jr]=this}};function LP(n){return 2!==n.type}const C7=100;function a_(n,e=!0,t=0){const i=n[Vs],r=i.rendererFactory;r.begin?.();try{!function A7(n,e){const t=bR();try{ER(!0),Rw(n,e);let i=0;for(;kh(n);){if(i===C7)throw new H(103,!1);i++,Rw(n,1)}}finally{ER(t)}}(n,t)}catch(o){throw e&&o_(n,o),o}finally{r.end?.(),i.inlineEffectRunner?.flush()}}function T7(n,e,t,i){const r=e[ye];if(!(256&~r))return;e[Vs].inlineEffectRunner?.flush(),CE(e);let a=!0,c=null,l=null;LP(n)?(l=function _7(n){return n[jr]??function y7(n){const e=kP.pop()??Object.create(b7);return e.lView=n,e}(n)}(e),c=Li(l)):null===function ze(){return Ee}()?(a=!1,l=function E7(n){const e=n[jr]??Object.create(w7);return e.lView=n,e}(e),c=Li(l)):e[jr]&&(Se(e[jr]),e[jr]=null);try{hR(e),function wR(n){return De.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&wP(n,e,t,2,i);const u=!(3&~r);if(u){const f=n.preOrderCheckHooks;null!==f&&Im(e,f,null)}else{const f=n.preOrderHooks;null!==f&&Dm(e,f,0,null),TE(e,0)}if(function S7(n){for(let e=pO(n);null!==e;e=gO(e)){if(!(e[ye]&Em.HasTransplantedViews))continue;const t=e[pu];for(let i=0;i<t.length;i++)fR(t[i])}}(e),VP(e,0),null!==n.contentQueries&&DP(n,e),u){const f=n.contentCheckHooks;null!==f&&Im(e,f)}else{const f=n.contentHooks;null!==f&&Dm(e,f,1),TE(e,1)}!function zY(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)Pc(~r);else{const s=r,o=t[++i],a=t[++i];vq(o,s),a(2,e[s])}}}finally{Pc(-1)}}(n,e);const d=n.components;null!==d&&jP(e,d,0);const h=n.viewQuery;if(null!==h&&xw(2,h,i),u){const f=n.viewCheckHooks;null!==f&&Im(e,f)}else{const f=n.viewHooks;null!==f&&Dm(e,f,2),TE(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[vm]){for(const f of e[vm])f();e[vm]=null}e[ye]&=-73}catch(u){throw Cm(e),u}finally{null!==l&&(Y(l,c),a&&function v7(n){n.lView[jr]!==n&&(n.lView=null,kP.push(n))}(l)),AE()}}function VP(n,e){for(let t=pO(n);null!==t;t=gO(t))for(let i=hn;i<t.length;i++)UP(t[i],e)}function x7(n,e,t){UP(Cr(e,n),t)}function UP(n,e){pE(n)&&Rw(n,e)}function Rw(n,e){const i=n[X],r=n[ye],s=n[jr];let o=!!(0===e&&16&r);if(o||=!!(64&r&&0===e),o||=!!(1024&r),o||=!(!s?.dirty||!J(s)),o||=!1,s&&(s.dirty=!1),n[ye]&=-9217,o)T7(i,n,i.template,n[jt]);else if(8192&r){VP(n,1);const a=i.components;null!==a&&jP(n,a,1)}}function jP(n,e,t){for(let i=0;i<e.length;i++)x7(n,e[i],t)}function nf(n,e){const t=bR()?64:1088;for(n[Vs].changeDetectionScheduler?.notify(e);n;){n[ye]|=t;const i=Fo(n);if(Ph(n)&&!i)return n;n=i}return null}class rf{get rootNodes(){const e=this._lView,t=e[X];return tf(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jt]}set context(e){this._lView[jt]=e}get destroyed(){return!(256&~this._lView[ye])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Cn];if(xi(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Zh(e,i),lm(t,i))}this._attachedToViewContainer=!1}t_(this._lView[X],this._lView)}onDestroy(e){Am(this._lView,e)}markForCheck(){nf(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ye]&=-129}reattach(){gE(this._lView),this._lView[ye]|=128}detectChanges(){this._lView[ye]|=1024,a_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Ph(this._lView),t=this._lView[Ic];null!==t&&!e&&hw(t,this._lView),sP(this._lView[X],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;const t=Ph(this._lView),i=this._lView[Ic];null!==i&&!t&&oP(i,this._lView),gE(this._lView)}}let _s=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=D7}return n})();const M7=_s,I7=class extends M7{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=xu(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new rf(r)}};function D7(){return c_(St(),B())}function c_(n,e){return 4&n.type?new I7(e,n,yu(n,e)):null}let cN=()=>null;function Wc(n,e){return cN(n,e)}class Du{}const ff=new F("",{providedIn:"root",factory:()=>!1}),lN=new F(""),Hw=new F("");class wK{}class uN{}class AK{resolveComponentFactory(e){throw function CK(n){const e=Error(`No component factory found for ${Vn(n)}.`);return e.ngComponent=n,e}(e)}}class Ma{static#e=this.NULL=new AK}class zw{}let SK=(()=>{class n{static#e=this.\u0275prov=j({token:n,providedIn:"root",factory:()=>null})}return n})();const hN=new Set;function ji(n){hN.has(n)||(hN.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Hi=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Hi||{});const fN={destroy(){}};function p_(n,e){!e&&Ih();const t=e?.injector??P(ht);return ir(t)?(ji("NgAfterNextRender"),gN(n,t,!0,e?.phase??Hi.MixedReadWrite)):fN}function gN(n,e,t,i){const r=function xK(n,e){if(n instanceof Function)switch(e){case Hi.EarlyRead:return{earlyRead:n};case Hi.Write:return{write:n};case Hi.MixedReadWrite:return{mixedReadWrite:n};case Hi.Read:return{read:n}}return n}(n,i),s=e.get(g_),o=s.handler??=new IK,a=[],c=[],l=()=>{for(const f of c)o.unregister(f);u()},u=e.get(kc).onDestroy(l);let d=0;const h=(f,p)=>{if(!p)return;const g=t?(...y)=>(d--,d<1&&l(),p(...y)):p,m=Bs(e,()=>new MK(f,a,g));o.register(m),c.push(m),d++};return h(Hi.EarlyRead,r.earlyRead),h(Hi.Write,r.write),h(Hi.MixedReadWrite,r.mixedReadWrite),h(Hi.Read,r.read),{destroy:l}}class MK{constructor(e,t,i){this.phase=e,this.pipelinedArgs=t,this.callbackFn=i,this.zone=P(pe),this.errorHandler=P(tr,{optional:!0}),P(Du,{optional:!0})?.notify(6)}invoke(){try{const e=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,e)}catch(e){this.errorHandler?.handleError(e)}}}class IK{constructor(){this.executingCallbacks=!1,this.buckets={[Hi.EarlyRead]:new Set,[Hi.Write]:new Set,[Hi.MixedReadWrite]:new Set,[Hi.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const t of e)t.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let g_=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const i of t)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})();function __(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=k0(r,a):2==s&&(i=k0(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}class yN extends Ma{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=We(e);return new mf(t,this.ngModule)}}function vN(n,e){const t=[];for(const i in n){if(!n.hasOwnProperty(i))continue;const r=n[i];if(void 0===r)continue;const s=Array.isArray(r),o=s?r[0]:r;t.push(e?{propName:o,templateName:i,isSignal:!!((s?r[1]:wa.None)&wa.SignalBased)}:{propName:o,templateName:i})}return t}class mf extends uN{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=vN(e.inputs,!0);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return vN(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function R$(n){return n.map(D$).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){const s=z(null);try{let o=(r=r||this.ngModule)instanceof Si?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new Nc(e,o):e,c=a.get(zw,null);if(null===c)throw new H(407,!1);const l=a.get(SK,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:a.get(g_,null),changeDetectionScheduler:a.get(Du,null)},f=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=i?function WY(n,e,t,i){const s=i.get(PO,!1)||t===ds.ShadowDom,o=n.selectRootElement(e,s);return function $Y(n){AP(n)}(o),o}(f,i,this.componentDef.encapsulation,a):e_(f,p,function OK(n){const e=n.toLowerCase();return"svg"===e?uR:"math"===e?"math":null}(p));let m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let y=null;null!==g&&(y=YE(g,a,!0));const v=Cw(0,null,null,1,0,null,null,null,null,null,null),_=r_(null,v,null,m,null,null,h,f,a,null,y);let w,A;CE(_);try{const S=this.componentDef;let D,x=null;S.findHostDirectiveDefs?(D=[],x=new Map,S.findHostDirectiveDefs(S,D,x),D.push(S)):D=[S];const k=function NK(n,e){const t=n[X],i=he;return n[i]=e,Hc(t,i,2,"#host",null)}(_,g),U=function FK(n,e,t,i,r,s,o){const a=r[X];!function kK(n,e,t,i){for(const r of n)e.mergedAttrs=xh(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(__(e,e.mergedAttrs,!0),null!==t&&yP(i,t,e))}(i,n,e,o);let c=null;null!==e&&(c=YE(e,r[An]));const l=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=r_(r,CP(t),null,u,r[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Tw(a,n,i.length-1),s_(r,d),r[n.index]=d}(k,g,S,D,_,h,f);A=Fh(v,he),g&&function BK(n,e,t,i){if(i)Z0(n,t,["ng-version","18.2.1"]);else{const{attrs:r,classes:s}=function O$(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!hs(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Z0(n,t,r),s&&s.length>0&&_P(n,t,s.join(" "))}}(f,S,g,i),void 0!==t&&function VK(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(A,this.ngContentSelectors,t),w=function LK(n,e,t,i,r,s){const o=St(),a=r[X],c=Vi(o,r);xP(a,r,o,t,null,i);for(let u=0;u<t.length;u++)Mi(Fc(r,a,o.directiveStart+u,o),r);MP(a,r,o),c&&Mi(c,r);const l=Fc(r,a,o.directiveStart+o.componentOffset,o);if(n[jt]=r[jt]=l,null!==s)for(const u of s)u(l,e);return bw(a,o,r),l}(U,S,D,x,_,[UK]),Iw(v,_,null)}finally{AE()}return new PK(this.componentType,w,yu(A,_),_,A)}finally{z(s)}}}class PK extends wK{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new rf(r,void 0,!1),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;Mw(s[X],s,r,e,t),this.previousInputValues.set(e,t),nf(Cr(this._tNode.index,s),1)}}get injector(){return new Gn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function UK(){const n=St();Mm(B()[X],n)}let zi=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=jK}return n})();function jK(){return wN(St(),B())}const HK=zi,bN=class extends HK{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return yu(this._hostTNode,this._hostLView)}get injector(){return new Gn(this._hostTNode,this._hostLView)}get parentInjector(){const e=Pm(this._hostTNode,this._hostLView);if(ME(e)){const t=jh(e,this._hostLView),i=Uh(e);return new Gn(t[X].data[i+8],t)}return new Gn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=EN(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-hn}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=Wc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,zc(this._hostTNode,o)),a}createComponent(e,t,i,r,s){const o=e&&!function Dh(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}const c=o?e:new mf(We(e)),l=i||this.parentInjector;if(!s&&null==c.ngModule){const g=(o?l:this.parentInjector).get(Si,null);g&&(s=g)}const u=We(c.componentType??{}),d=Wc(this._lContainer,u?.id??null),f=c.create(l,r,d?.firstChild??null,s);return this.insertImpl(f.hostView,a,zc(this._hostTNode,d)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){const r=e._lView;if(function lq(n){return xi(n[Cn])}(r)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=r[Cn],l=new bN(c,c[ui],c[Cn]);l.detach(l.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;return Mu(o,r,s,i),e.attachToViewContainerRef(),N1(qw(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=EN(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Zh(this._lContainer,t);i&&(lm(qw(this._lContainer),t),t_(i[X],i))}detach(e){const t=this._adjustIndex(e,-1),i=Zh(this._lContainer,t);return i&&null!=lm(qw(this._lContainer),t)?new rf(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function EN(n){return n[8]}function qw(n){return n[8]||(n[8]=[])}function wN(n,e){let t;const i=e[n.index];return xi(i)?t=i:(t=IP(i,e,null,n),e[n.index]=t,s_(e,t)),CN(t,e,n,i),new bN(t,n,e)}let CN=function TN(n,e,t,i){if(n[Us])return;let r;r=8&t.type?st(i):function zK(n,e){const t=n[Ie],i=t.createComment(""),r=Vi(e,n);return Uc(t,gw(t,r),i,function BY(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[Us]=r},Xw=()=>!1;class Yw{constructor(e){this.queryList=e,this.matches=null}clone(){return new Yw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Kw{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new Kw(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==tC(e,t).matches&&this.queries[t].setDirty()}}class SN{constructor(e,t,i=null){this.flags=t,this.read=i,this.predicate="string"==typeof e?function JK(n){return n.split(",").map(e=>e.trim())}(e):e}}class Jw{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new Jw(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Zw{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Zw(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,qK(t,s)),this.matchTNodeWithReadOption(e,t,Nm(t,e,s,!1,!1))}else i===_s?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Nm(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===gt||r===zi||r===_s&&4&t.type)this.addMatch(t.index,-2);else{const s=Nm(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function qK(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function YK(n,e,t,i){return-1===t?function XK(n,e){return 11&n.type?yu(n,e):4&n.type?c_(n,e):null}(e,n):-2===t?function KK(n,e,t){return t===gt?yu(e,n):t===_s?c_(e,n):t===zi?wN(e,n):void 0}(n,e,i):Fc(n,n[X],t,e)}function xN(n,e,t,i){const r=e[No].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let c=0;null!==o&&c<o.length;c+=2){const l=o[c];a.push(l<0?null:YK(e,s[l],o[c+1],t.metadata.read))}r.matches=a}return r.matches}function Qw(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=xN(n,e,r,t);for(let a=0;a<s.length;a+=2){const c=s[a];if(c>0)i.push(o[a/2]);else{const l=s[a+1],u=e[-c];for(let d=hn;d<u.length;d++){const h=u[d];h[Ic]===h[Cn]&&Qw(h[X],h,l,i)}if(null!==u[pu]){const d=u[pu];for(let h=0;h<d.length;h++){const f=d[h];Qw(f[X],f,l,i)}}}}}return i}function MN(n,e,t){const i=new vu(!(4&~t));return function YY(n,e,t,i){const r=RP(e);r.push(t),n.firstCreatePass&&OP(n).push(i,r.length-1)}(n,e,i,i.destroy),(e[No]??=new Kw).queries.push(new Yw(i))-1}function RN(n,e,t){null===n.queries&&(n.queries=new Jw),n.queries.track(new Zw(e,t))}function tC(n,e){return n.queries.getByIndex(e)}function ON(n,e){const t=n[X],i=tC(t,e);return i.crossesNgTemplate?Qw(t,n,e,[]):xN(t,n,i,e)}function Ra(n,e){ji("NgSignals");const t=function oi(n){const e=Object.create(bc);e.value=n;const t=()=>(on(e),e.value);return t[K]=e,t}(n),i=t[K];return e?.equal&&(i.equal=e.equal),t.set=r=>ai(i,r),t.update=r=>function zl(n,e){ri()||jl(),ai(n,e(n.value))}(i,r),t.asReadonly=PN.bind(t),t}function PN(){const n=this[K];if(void 0===n.readonlyFn){const e=()=>this();e[K]=n,n.readonlyFn=e}return n.readonlyFn}function Je(n){let e=function WN(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(ps(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=v_(n.inputs),o.inputTransforms=v_(n.inputTransforms),o.declaredInputs=v_(n.declaredInputs),o.outputs=v_(n.outputs);const a=r.hostBindings;a&&hJ(n,a);const c=r.viewQuery,l=r.contentQueries;if(c&&uJ(n,c),l&&dJ(n,l),cJ(n,r),JW(n.outputs,r.outputs),ps(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===Je&&(t=!1)}}e=Object.getPrototypeOf(e)}!function lJ(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=xh(r.hostAttrs,t=xh(t,r.hostAttrs))}}(i)}function cJ(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const i=e.inputs[t];if(void 0!==i&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function v_(n){return n===Ls?{}:n===rt?[]:n}function uJ(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function dJ(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function hJ(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function $N(n){const e=t=>{const i=(Array.isArray(n)?n:n()).map(r=>"function"==typeof r?{directive:Me(r),inputs:Ls,outputs:Ls}:{directive:Me(r.directive),inputs:XN(r.inputs),outputs:XN(r.outputs)});null===t.hostDirectives?(t.findHostDirectiveDefs=qN,t.hostDirectives=i):t.hostDirectives.unshift(...i)};return e.ngInherit=!0,e}function qN(n,e,t){if(null!==n.hostDirectives)for(const i of n.hostDirectives){const r=Un(i.directive);mJ(r.declaredInputs,i.inputs),qN(r,e,t),t.set(r,i),e.push(r)}}function XN(n){if(void 0===n||0===n.length)return Ls;const e={};for(let t=0;t<n.length;t+=2)e[n[t]]=n[t+1];return e}function mJ(n,e){for(const t in e)e.hasOwnProperty(t)&&(n[e[t]]=n[t])}function Oa(n){const e=n.inputConfig,t={};for(const i in e)if(e.hasOwnProperty(i)){const r=e[i];Array.isArray(r)&&r[3]&&(t[i]=r[3])}n.inputTransforms=t}class $c{}class JN extends $c{constructor(e){super(),this.componentFactoryResolver=new yN(this),this.instance=null;const t=new au([...e.providers,{provide:$c,useValue:this},{provide:Ma,useValue:this.componentFactoryResolver}],e.parent||_m(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function b_(n){return!!function oC(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function $s(n,e,t){return n[e]=t}function gn(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function bf(n,e,t,i,r,s,o,a,c,l){const u=t+he,d=e.firstCreatePass?function CJ(n,e,t,i,r,s,o,a,c){const l=e.consts,u=Hc(e,n,4,o||null,a||null);Aw(e,t,u,Hr(l,c)),Mm(e,u);const d=u.tView=Cw(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,e,n,i,r,s,o,a,c):e.data[u];gs(d,!1);const h=ZN(e,n,d,t);Bh()&&n_(e,n,h,d),Mi(h,n);const f=IP(h,n,h,d);return n[u]=f,s_(n,f),function AN(n,e,t){return Xw(n,e,t)}(f,d,n),wm(d)&&Ew(e,n,d),null!=c&&ww(n,d,l),d}function Gi(n,e,t,i,r,s,o,a){const c=B(),l=Ue();return bf(c,l,n,e,t,i,r,Hr(l.consts,s),o,a),Gi}let ZN=function QN(n,e,t,i){return Hs(!0),e[Ie].createComment("")};function Tn(n,e,t,i){const r=B();return gn(r,ms(),e)&&(Ue(),Ws(Ht(),r,n,e,t,i)),Tn}function Uu(n,e,t,i){return gn(n,ms(),t)?e+Oe(t)+i:Pe}function x_(n,e){return n<<17|e<<2}function Na(n){return n>>17&32767}function _C(n){return 2|n}function Yc(n){return(131068&n)>>2}function yC(n,e){return-131069&n|e<<2}function vC(n){return 1|n}function DF(n,e,t,i){const r=n[t+1],s=null===e;let o=i?Na(r):Yc(r),a=!1;for(;0!==o&&(!1===a||s);){const l=n[o+1];cZ(n[o],e)&&(a=!0,n[o+1]=i?vC(l):_C(l)),o=i?Na(l):Yc(l)}a&&(n[t+1]=i?_C(r):vC(r))}function cZ(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&ou(n,e)>=0}const Wn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function RF(n){return n.substring(Wn.key,Wn.keyEnd)}function OF(n,e){const t=Wn.textEnd;return t===e?-1:(e=Wn.keyEnd=function hZ(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Wn.key=e,t),Xu(n,e,t))}function Xu(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function mt(n,e,t){const i=B();return gn(i,ms(),e)&&rr(Ue(),Ht(),i,n,e,i[Ie],t,!1),mt}function bC(n,e,t,i,r){const o=r?"class":"style";Mw(n,t,e.inputs[o],o,i)}function Af(n,e,t){return ys(n,e,t,!1),Af}function yn(n,e){return ys(n,e,null,!0),yn}function Yu(n){!function vs(n,e,t,i){const r=Ue(),s=Lo(2);r.firstUpdatePass&&BF(r,null,s,i);const o=B();if(t!==Pe&&gn(o,s,t)){const a=r.data[di()];if(HF(a,i)&&!LF(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=k0(c,t||"")),bC(r,a,o,t,i)}else!function wZ(n,e,t,i,r,s,o,a){r===Pe&&(r=rt);let c=0,l=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const h=c<r.length?r[c+1]:void 0,f=l<s.length?s[l+1]:void 0;let g,p=null;u===d?(c+=2,l+=2,h!==f&&(p=d,g=f)):null===d||null!==u&&u<d?(c+=2,p=u):(l+=2,p=d,g=f),null!==p&&UF(n,e,t,i,p,g,o,a),u=c<r.length?r[c]:null,d=l<s.length?s[l]:null}}(r,a,o,o[Ie],o[s+1],o[s+1]=function bZ(n,e,t){if(null==t||""===t)return rt;const i=[],r=Ar(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}(EZ,Xs,n,!0)}function Xs(n,e){for(let t=function uZ(n){return function NF(n){Wn.key=0,Wn.keyEnd=0,Wn.value=0,Wn.valueEnd=0,Wn.textEnd=n.length}(n),OF(n,Xu(n,0,Wn.textEnd))}(e);t>=0;t=OF(e,t))Er(n,RF(e),!0)}function ys(n,e,t,i){const r=B(),s=Ue(),o=Lo(2);s.firstUpdatePass&&BF(s,n,o,i),e!==Pe&&gn(r,o,e)&&UF(s,s.data[di()],r,r[Ie],n,r[o+1]=function CZ(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Vn(Ar(n)))),n}(e,t),i,o)}function LF(n,e){return e>=n.expandoStartIndex}function BF(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[di()],o=LF(n,t);HF(s,i)&&null===e&&!o&&(e=!1),e=function mZ(n,e,t,i){const r=function EE(n){const e=De.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Tf(t=EC(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=EC(r,n,e,t,i),null===s){let c=function _Z(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Yc(i))return n[Na(i)]}(n,e,i);void 0!==c&&Array.isArray(c)&&(c=EC(null,n,e,c[1],i),c=Tf(c,e.attrs,i),function yZ(n,e,t,i){n[Na(t?e.classBindings:e.styleBindings)]=i}(n,e,i,c))}else s=function vZ(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Tf(i,n[s].hostAttrs,t);return Tf(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function oZ(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Na(o),c=Yc(o);n[i]=t;let u,l=!1;if(Array.isArray(t)?(u=t[1],(null===u||ou(t,u)>0)&&(l=!0)):u=t,r)if(0!==c){const h=Na(n[a+1]);n[i+1]=x_(h,a),0!==h&&(n[h+1]=yC(n[h+1],i)),n[a+1]=function rZ(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=x_(a,0),0!==a&&(n[a+1]=yC(n[a+1],i)),a=i;else n[i+1]=x_(c,0),0===a?a=i:n[c+1]=yC(n[c+1],i),c=i;l&&(n[i+1]=_C(n[i+1])),DF(n,u,i,!0),DF(n,u,i,!1),function aZ(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&ou(s,e)>=0&&(t[i+1]=vC(t[i+1]))}(e,u,n,i,s),o=x_(a,c),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function EC(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Tf(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Tf(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Er(n,o,!!t||e[++s]))}return void 0===n?null:n}function EZ(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&Er(n,i,t)}function UF(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],u=function sZ(n){return!(1&~n)}(l)?jF(c,e,t,r,Yc(l),o):void 0;M_(u)||(M_(s)||function iZ(n){return!(2&~n)}(l)&&(s=jF(c,null,t,r,a,o)),function jY(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:xa.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=xa.Important),n.setStyle(t,i,r,s))}}(i,o,Nh(di(),t),r,s))}function jF(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let h=t[r+1];h===Pe&&(h=d?rt:void 0);let f=d?K0(h,i):u===i?h:void 0;if(l&&!M_(f)&&(f=K0(c,i)),M_(f)&&(a=f,o))return a;const p=n[r+1];r=o?Na(p):Yc(p)}if(null!==e){let c=s?e.residualClasses:e.residualStyles;null!=c&&(a=K0(c,i))}return a}function M_(n){return void 0!==n}function HF(n,e){return!!(n.flags&(e?8:16))}function I_(n,e){ji("NgControlFlow");const t=B(),i=ms(),r=t[i]!==Pe?t[i]:-1,s=-1!==r?D_(t,he+r):void 0;if(gn(t,i,n)){const a=z(null);try{if(void 0!==s&&function Dw(n,e){const t=Zh(n,e);return void 0!==t&&t_(t[X],t),t}(s,0),-1!==n){const c=he+n,l=D_(t,c),u=function AC(n,e){return Fh(n,e)}(t[X],c),d=Wc(l,u.tView.ssrId);Mu(l,xu(t,u,e,{dehydratedView:d}),0,zc(u,d))}}finally{z(a)}}else if(void 0!==s){const a=function NP(n,e){const t=hn+e;if(t<n.length)return n[t]}(s,0);void 0!==a&&(a[jt]=e)}}function D_(n,e){return n[e]}function we(n,e,t,i){const r=B(),s=Ue(),o=he+n,a=r[Ie],c=s.firstCreatePass?function WZ(n,e,t,i,r,s){const o=e.consts,c=Hc(e,n,2,i,Hr(o,r));return Aw(e,t,c,Hr(o,s)),null!==c.attrs&&__(c,c.attrs,!1),null!==c.mergedAttrs&&__(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,e,t,i):s.data[o],l=$F(s,r,c,a,e,n);r[o]=l;const u=wm(c);return gs(c,!0),yP(a,l,c),!function Ou(n){return!(32&~n.flags)}(c)&&Bh()&&n_(s,r,l,c),0===function uq(){return De.lFrame.elementDepthCount}()&&Mi(l,r),function dq(){De.lFrame.elementDepthCount++}(),u&&(Ew(s,r,c),bw(s,c,r)),null!==i&&ww(r,c),we}function Te(){let n=St();yE()?vE():(n=n.parent,gs(n,!1));const e=n;(function fq(n){return De.skipHydrationRootTNode===n})(e)&&function _q(){De.skipHydrationRootTNode=null}(),function hq(){De.lFrame.elementDepthCount--}();const t=Ue();return t.firstCreatePass&&(Mm(t,n),lE(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Iq(n){return!!(8&n.flags)}(e)&&bC(t,e,B(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Dq(n){return!!(16&n.flags)}(e)&&bC(t,e,B(),e.stylesWithoutHost,!1),Te}function fi(n,e,t,i){return we(n,e,t,i),Te(),fi}let $F=(n,e,t,i,r,s)=>(Hs(!0),e_(i,r,function IR(){return De.lFrame.currentNamespace}()));function Ys(){return B()}function Sf(n,e,t){const i=B();return gn(i,ms(),e)&&rr(Ue(),Ht(),i,n,e,i[Ie],t,!0),Sf}const R_="en-US";let ZF=R_,mk=(n,e,t)=>{};function ot(n,e,t,i){const r=B(),s=Ue(),o=St();return function IC(n,e,t,i,r,s,o){const a=wm(i),l=n.firstCreatePass&&OP(n),u=e[jt],d=RP(e);let h=!0;if(3&i.type||o){const g=Vi(i,e),m=o?o(g):g,y=d.length,v=o?w=>o(st(w[i.index])):i.index;let _=null;if(!o&&a&&(_=function jQ(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[uu],c=r[s+2];return a.length>c?a[c]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==_)(_.__ngLastListenerFn__||_).__ngNextListenerFn__=s,_.__ngLastListenerFn__=s,h=!1;else{s=bk(i,e,u,s),mk(g,r,s);const w=t.listen(m,r,s);d.push(s,w),l&&l.push(r,v,y,y+1)}}else s=bk(i,e,u,s);const f=i.outputs;let p;if(h&&null!==f&&(p=f[r])){const g=p.length;if(g)for(let m=0;m<g;m+=2){const A=e[p[m]][p[m+1]].subscribe(s),S=d.length;d.push(s,A),l&&l.push(r,i.index,S,-(S+1))}}}(s,r,r[Ie],o,n,e,i),ot}function vk(n,e,t,i){const r=z(null);try{return js(6,e,t),!1!==t(i)}catch(s){return o_(n,s),!1}finally{js(7,e,t),z(r)}}function bk(n,e,t,i){return function r(s){if(s===Function)return i;nf(n.componentOffset>-1?Cr(n.index,e):e,5);let a=vk(e,t,i,s),c=r.__ngNextListenerFn__;for(;c;)a=vk(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function bs(n=1){return function wq(n){return(De.lFrame.contextLView=function pR(n,e){for(;n>0;)e=e[du],n--;return e}(n,De.lFrame.contextLView))[jt]}(n)}function HQ(n,e){let t=null;const i=function S$(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?j1(n,s,!0):I$(i,s))return r}else t=r}return t}function Ks(n){const e=B()[tn][ui];if(!e.projection){const i=e.projection=function um(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){if(128!==s.type){const o=n?HQ(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s)}s=s.next}}}function ei(n,e=0,t,i,r,s){const o=B(),a=Ue(),c=i?n+1:null;null!==c&&bf(o,a,c,i,r,s,null,t);const l=Hc(a,he+n,16,null,t||null);null===l.projection&&(l.projection=e),vE();const d=!o[Bi]||Oc();null===o[tn][ui].projection[l.projection]&&null!==c?function zQ(n,e,t){const i=he+t,r=e.data[i],s=n[i],o=Wc(s,r.tView.ssrId);Mu(s,xu(n,r,void 0,{dehydratedView:o}),0,zc(r,o))}(o,a,c):d&&32&~l.flags&&function VY(n,e,t){mP(e[Ie],0,e,t,pw(n,t,e),uP(t.parent||e[ui],t,e))}(a,o,l)}function DC(n,e,t){return RC(n,"",e,"",t),DC}function RC(n,e,t,i,r){const s=B(),o=Uu(s,e,t,i);return o!==Pe&&rr(Ue(),Ht(),s,n,o,s[Ie],r,!1),RC}function OC(n,e,t,i){!function DN(n,e,t,i){const r=Ue();if(r.firstCreatePass){const s=St();RN(r,new SN(e,t,i),s.index),function ZK(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),!(2&~t)&&(r.staticContentQueries=!0)}return MN(r,B(),t)}(n,e,t,i)}function Ho(n,e,t){!function IN(n,e,t){const i=Ue();return i.firstCreatePass&&(RN(i,new SN(n,e,t),-1),!(2&~e)&&(i.staticViewQueries=!0)),MN(i,B(),e)}(n,e,t)}function Es(n){const e=B(),t=Ue(),i=wE();Sm(i+1);const r=tC(t,i);if(n.dirty&&function cq(n){return!(4&~n[ye])}(e)===!(2&~r.metadata.flags)){if(null===r.matches)n.reset([]);else{const s=ON(e,i);n.reset(s,rO),n.notifyOnChanges()}return!0}return!1}function ws(){return function eC(n,e){return n[No].queries[e].queryList}(B(),wE())}function F_(n){return Rc(function yR(){return De.lFrame.contextLView}(),he+n)}function pi(n,e=""){const t=B(),i=Ue(),r=n+he,s=i.firstCreatePass?Hc(i,r,1,e,null):i.data[r],o=Bk(i,t,s,e,n);t[r]=o,Bh()&&n_(i,t,o,s),gs(s,!1)}let Bk=(n,e,t,i,r)=>(Hs(!0),function uw(n,e){return n.createText(e)}(e[Ie],i));function Js(n){return Fa("",n,""),Js}function Fa(n,e,t){const i=B(),r=Uu(i,n,e,t);return r!==Pe&&function Uo(n,e,t){const i=Nh(e,n);!function rP(n,e,t){n.setValue(e,t)}(n[Ie],i,t)}(i,di(),r),Fa}function NC(n,e,t,i,r){if(n=Me(n),Array.isArray(n))for(let s=0;s<n.length;s++)NC(n[s],e,t,i,r);else{const s=Ue(),o=B(),a=St();let c=Mc(n)?n:Me(n.provide);const l=K1(n),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(Mc(n)||!n.multi){const f=new Vh(l,r,R),p=kC(c,e,r?u:u+h,d);-1===p?(RE(Om(a,o),s,c),FC(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=kC(c,e,u+h,d),p=kC(c,e,u,u+h),m=p>=0&&t[p];if(r&&!m||!r&&!(f>=0&&t[f])){RE(Om(a,o),s,c);const y=function uee(n,e,t,i,r){const s=new Vh(n,t,R);return s.multi=[],s.index=e,s.componentProviders=0,Jk(s,r,i&&!t),s}(r?lee:cee,t.length,r,i,l);!r&&m&&(t[p].providerFactory=y),FC(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(y),o.push(y)}else FC(s,n,f>-1?f:p,Jk(t[r?p:f],l,!r&&i));!r&&i&&m&&t[p].componentProviders++}}}function FC(n,e,t,i){const r=Mc(e),s=function B$(n){return!!n.useClass}(e);if(r||s){const c=(s?Me(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=l.indexOf(t);-1===u?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function Jk(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function kC(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function cee(n,e,t,i){return LC(this.multi,[])}function lee(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Fc(t,t[X],this.providerFactory.index,i);s=a.slice(0,o),LC(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],LC(r,s);return s}function LC(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Dt(n,e=[]){return t=>{t.providersResolver=(i,r)=>function aee(n,e,t){const i=Ue();if(i.firstCreatePass){const r=ps(n);NC(t,i.data,i.blueprint,r,!0),NC(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}let dee=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=eE(0,t.type),r=i.length>0?function sC(n,e,t=null){return new JN({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=j({token:n,providedIn:"environment",factory:()=>new n(I(Si))})}return n})();function Ii(n){ji("NgStandalone"),n.getStandaloneInjector=e=>e.get(dee).getOrCreateStandaloneInjector(n)}function Ju(n,e,t){const i=Ui()+n,r=B();return r[i]===Pe?$s(r,i,t?e.call(t):e()):function vf(n,e){return n[e]}(r,i)}function eL(n,e,t,i,r,s){const o=e+t;return gn(n,o,r)?$s(n,o+1,s?i.call(s,r):i(r)):function Of(n,e){const t=n[e];return t===Pe?void 0:t}(n,o+1)}function vn(n,e){const t=Ue();let i;const r=n+he;t.firstCreatePass?(i=function Aee(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=xc(i.type)),a=Qi(R);try{const c=Rm(!1),l=s();return Rm(c),function PC(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,B(),r,l),l}finally{Qi(a)}}function bn(n,e,t){const i=n+he,r=B(),s=Rc(r,i);return function Pf(n,e){return n[X].data[e].pure}(r,i)?eL(r,Ui(),e,s.transform,t,s):s.transform(t)}const TL=new F(""),U_=new F("");let WC,zC=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,WC||(function wte(n){WC=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t()},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(I(pe),I(GC),I(U_))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),GC=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return WC?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function La(n){return!!n&&"function"==typeof n.then}function SL(n){return!!n&&"function"==typeof n.subscribe}const $C=new F("");let xL=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=P($C,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(La(s))t.push(s);else if(SL(s)){const o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const kf=new F("");let or=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=P(rX),this.afterRenderEffectManager=P(g_),this.zonelessEnabled=P(ff),this.externalTestViews=new Set,this.beforeRender=new ue,this.afterTick=new ue,this.componentTypes=[],this.components=[],this.isStable=P(Bo).hasPendingTasks.pipe(oe(t=>!t)),this._injector=P(Si)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof uN;if(!this._injector.get(xL).done)throw!r&&function Ca(n){const e=We(n)||Un(n)||li(n);return null!==e&&e.standalone}(t),new H(405,!1);let o;o=r?t:this._injector.get(Ma).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function Cte(n){return n.isBoundToModule}(o)?void 0:this._injector.get($c),l=o.create(ht.NULL,[],i||o.selector,a),u=l.location.nativeElement,d=l.injector.get(TL,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),j_(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new H(101,!1);const i=z(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,z(i),this.afterTick.next()}}detectChangesInAttachedViews(t){let i=null;this._injector.destroyed||(i=this._injector.get(zw,null,{optional:!0}));let r=0;const s=this.afterRenderEffectManager;for(;r<10;){const o=0===r;if(t||!o){this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)Ste(a,c,o,this.zonelessEnabled)}else i?.begin?.(),i?.end?.();if(r++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:a})=>kh(a))&&(s.execute(),!this.allViews.some(({_lView:a})=>kh(a))))break}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;j_(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(kf,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>j_(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new H(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function j_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ste(n,e,t,i){(t||kh(n))&&a_(n,e,t&&!i?0:1)}let Rte=(()=>{class n{constructor(){this.zone=P(pe),this.changeDetectionScheduler=P(Du),this.applicationRef=P(or)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function qC({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new pe({...XC(),scheduleInRootZone:t}),[{provide:pe,useFactory:n},{provide:wr,multi:!0,useFactory:()=>{const i=P(Rte,{optional:!0});return()=>i.initialize()}},{provide:wr,multi:!0,useFactory:()=>{const i=P(Pte);return()=>{i.initialize()}}},!0===e?{provide:lN,useValue:!0}:[],{provide:Hw,useValue:t??JR}]}function XC(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let Pte=(()=>{class n{constructor(){this.subscription=new xt,this.initialized=!1,this.zone=P(pe),this.pendingTasks=P(Bo)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Lf=(()=>{class n{constructor(){this.appRef=P(or),this.taskService=P(Bo),this.ngZone=P(pe),this.zonelessEnabled=P(ff),this.disableScheduling=P(lN,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new xt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Lm):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Hw,{optional:!0})??!1),this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof BE||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const i=this.useMicrotaskScheduler?QR:ZR;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick(this.shouldRefreshViews))):this.ngZone.runOutsideAngular(()=>i(()=>this.tick(this.shouldRefreshViews)))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Lm+this.angularZoneId))}tick(t){if(this.runningTick||this.appRef.destroyed)return;const i=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(t)},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(i),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,QR(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(i)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const zo=new F("",{providedIn:"root",factory:()=>P(zo,Ke.Optional|Ke.SkipSelf)||function Nte(){return typeof $localize<"u"&&$localize.locale||R_}()}),KC=new F("");function z_(n){return!!n.platformInjector}let Ba=null;let ar=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=Gte}return n})();function Gte(n){return function Wte(n,e,t){if(Dc(n)&&!t){const i=Cr(n.index,e);return new rf(i,i)}return 175&n.type?new rf(e[tn],e):null}(St(),B(),!(16&~n))}class GL{constructor(){}supports(e){return b_(e)}create(e){return new Kte(e)}}const Yte=(n,e)=>e;class Kte{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Yte}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<$L(i,r,s)?t:i,a=$L(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const l=a-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<l&&(s[h]=f+1)}s[o.previousIndex]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!b_(e))throw new H(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function EJ(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new Jte(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new WL),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WL),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Jte{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zte{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class WL{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new Zte,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $L(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function XL(){return new nA([new GL])}let nA=(()=>{class n{static#e=this.\u0275prov=j({token:n,providedIn:"root",factory:XL});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||XL()),deps:[[n,new cm,new ru]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new H(901,!1)}}return n})(),ine=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(I(or))};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({})}return n})();function gne(n){try{const{rootComponent:e,appProviders:t,platformProviders:i}=n,r=function zte(n=[]){if(Ba)return Ba;const e=function BL(n=[],e){return ht.create({name:e,providers:[{provide:iE,useValue:"platform"},{provide:KC,useValue:new Set([()=>Ba=null])},...n]})}(n);return Ba=e,function ML(){!function b0(n){Bg=n}(()=>{throw new H(600,!1)})}(),function VL(n){n.get(AO,null)?.forEach(t=>t())}(e),e}(i),s=[qC({}),{provide:Du,useExisting:Lf},...t||[]];return function FL(n){const e=z_(n)?n.r3Injector:n.moduleRef.injector,t=e.get(pe);return t.run(()=>{z_(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();const i=e.get(tr,null);let r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:s=>{i.handleError(s)}})}),z_(n)){const s=()=>e.destroy(),o=n.platformInjector.get(KC);o.add(s),e.onDestroy(()=>{r.unsubscribe(),o.delete(s)})}else n.moduleRef.onDestroy(()=>{j_(n.allPlatformModules,n.moduleRef),r.unsubscribe()});return function Tte(n,e,t){try{const i=t();return La(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(i,t,()=>{const s=e.get(xL);return s.runInitializers(),s.donePromise.then(()=>{if(function iQ(n){"string"==typeof n&&(ZF=n.toLowerCase().replace(/_/g,"-"))}(e.get(zo,R_)||R_),z_(n)){const a=e.get(or);return void 0!==n.rootComponent&&a.bootstrap(n.rootComponent),a}return function Ute(n,e){const t=n.injector.get(or);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new H(-403,!1);n.instance.ngDoBootstrap(t)}e.push(n)}(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}({r3Injector:new JN({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}}const dB=new F("");function Sn(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function jf(n,e=NaN){return isNaN(parseFloat(n))||isNaN(Number(n))?e:Number(n)}function Zc(n,e){ji("NgSignals");const t=function Zn(n){const e=Object.create(wi);e.computation=n;const t=()=>{if(kn(e),on(e),e.value===ut)throw e.error;return e.value};return t[K]=e,t}(n);return e?.equal&&(t[K].equal=e.equal),t}function Wr(n){const e=z(null);try{return n()}finally{z(e)}}function wB(n,e,t,i,r,s,o){try{var a=n[s](o),c=a.value}catch(l){return void t(l)}a.done?e(c):Promise.resolve(c).then(i,r)}function te(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(c){wB(s,i,r,o,a,"next",c)}function a(c){wB(s,i,r,o,a,"throw",c)}o(void 0)})}}const oA={now:()=>(oA.delegate||Date).now(),delegate:void 0};class Zs extends ue{constructor(e=1/0,t=1/0,i=oA){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=t.now();let a=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}}}function qe(n,e,t,i){var o,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(s=(r<3?o(s):r>3?o(e,t,s):o(e,t))||s);return r>3&&s&&Object.defineProperty(e,t,s),s}function lA(n,e){return function(t,i){e(t,i,n)}}function Q(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)}function Ua(n){return this instanceof Ua?(this.v=n,this):new Ua(n)}function SB(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function dA(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){!function r(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}(a,c,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const hA=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function xB(n){return Ve(n?.then)}function MB(n){return Ve(n[Xl])}function IB(n){return Symbol.asyncIterator&&Ve(n?.[Symbol.asyncIterator])}function DB(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const RB=function aie(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function OB(n){return Ve(n?.[RB])}function PB(n){return function TB(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},a("next"),a("throw"),a("return",function o(f){return function(p){return Promise.resolve(p).then(f,d)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(f,p){i[f]&&(r[f]=function(g){return new Promise(function(m,y){s.push([f,g,m,y])>1||c(f,g)})},p&&(r[f]=p(r[f])))}function c(f,p){try{!function l(f){f.value instanceof Ua?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}(i[f](p))}catch(g){h(s[0][3],g)}}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),s.shift(),s.length&&c(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Ua(t.read());if(r)return yield Ua(void 0);yield yield Ua(i)}}finally{t.releaseLock()}})}function NB(n){return Ve(n?.getReader)}function xn(n){if(n instanceof me)return n;if(null!=n){if(MB(n))return function cie(n){return new me(e=>{const t=n[Xl]();if(Ve(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(hA(n))return function lie(n){return new me(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(xB(n))return function uie(n){return new me(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,lh)})}(n);if(IB(n))return FB(n);if(OB(n))return function die(n){return new me(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(NB(n))return function hie(n){return FB(PB(n))}(n)}throw DB(n)}function FB(n){return new me(e=>{(function fie(n,e){var t,i,r,s;return function CB(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{l(i.next(u))}catch(d){o(d)}}function c(u){try{l(i.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,c)}l((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=SB(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Go(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Mn(n,e,t=1/0){return Ve(e)?Mn((i,r)=>oe((s,o)=>e(i,s,r,o))(xn(n(i,r))),t):("number"==typeof e&&(t=e),At((i,r)=>function pie(n,e,t,i,r,s,o,a){const c=[];let l=0,u=0,d=!1;const h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<i?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let m=!1;xn(t(g,u++)).subscribe(dt(e,y=>{r?.(y),s?f(y):e.next(y)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<i;){const y=c.shift();o?Go(e,o,()=>p(y)):p(y)}h()}catch(y){e.error(y)}}))};return n.subscribe(dt(e,f,()=>{d=!0,h()})),()=>{a?.()}}(i,r,n,t)))}function Q_(n=1/0){return Mn(ks,n)}const cr=new me(n=>n.complete());function kB(n){return n&&Ve(n.schedule)}function fA(n){return n[n.length-1]}function LB(n){return Ve(fA(n))?n.pop():void 0}function Hf(n){return kB(fA(n))?n.pop():void 0}function BB(n,e=0){return At((t,i)=>{t.subscribe(dt(i,r=>Go(i,n,()=>i.next(r),e),()=>Go(i,n,()=>i.complete(),e),r=>Go(i,n,()=>i.error(r),e)))})}function VB(n,e=0){return At((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function UB(n,e){if(!n)throw new Error("Iterable cannot be null");return new me(t=>{Go(t,e,()=>{const i=n[Symbol.asyncIterator]();Go(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function In(n,e){return e?function Cie(n,e){if(null!=n){if(MB(n))return function yie(n,e){return xn(n).pipe(VB(e),BB(e))}(n,e);if(hA(n))return function bie(n,e){return new me(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(xB(n))return function vie(n,e){return xn(n).pipe(VB(e),BB(e))}(n,e);if(IB(n))return UB(n,e);if(OB(n))return function Eie(n,e){return new me(t=>{let i;return Go(t,e,()=>{i=n[RB](),Go(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Ve(i?.return)&&i.return()})}(n,e);if(NB(n))return function wie(n,e){return UB(PB(n),e)}(n,e)}throw DB(n)}(n,e):xn(n)}function Qc(...n){const e=Hf(n),t=function _ie(n,e){return"number"==typeof fA(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?xn(i[0]):Q_(t)(In(i,e)):cr}function nn(n,e){return At((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(dt(i,c=>{r?.unsubscribe();let l=0;const u=s++;xn(n(c,u)).subscribe(r=dt(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}const ey={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if(typeof window>"u")return ey.schedule(n,0);if(typeof window.requestAnimationFrame>"u")return ey.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let pA;function Oie(n,e,t){let i=t;return function Tie(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((r,s)=>!("*"===r||!function xie(n,e){if(!pA){const t=Element.prototype;pA=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&pA.call(n,e)}(n,r)||(i=s,0))),i}class Nie{constructor(e,t){this.componentFactory=t.get(Ma).resolveComponentFactory(e)}create(e){return new Fie(this.componentFactory,e)}}class Fie{constructor(e,t){this.componentFactory=e,this.injector=t,this.eventEmitters=new Zs(1),this.events=this.eventEmitters.pipe(nn(i=>Qc(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.inputChanges=null,this.hasInputChanges=!1,this.implementsOnChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.unchangedInputs=new Set(this.componentFactory.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(pe),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=ey.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>null===this.componentRef?this.initialInputValues.get(e):this.componentRef.instance[e])}setInputValue(e,t,i){this.runInZone(()=>{i&&(t=i.call(this.componentRef?.instance,t)),null!==this.componentRef?function Mie(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.recordInputChange(e,t),this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.instance[e]=t,this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=ht.create({providers:[],parent:this.injector}),i=function Rie(n,e){const t=n.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=t.length;s<o;++s){const a=t[s],c=Oie(a,e,r);-1!==c&&i[c].push(a)}return i}(e,this.componentFactory.ngContentSelectors);this.componentRef=this.componentFactory.create(t,i,e),this.viewChangeDetectorRef=this.componentRef.injector.get(ar),this.implementsOnChanges=function Sie(n){return"function"==typeof n}(this.componentRef.instance.ngOnChanges),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(or).attachView(this.componentRef.hostView)}initializeInputs(){this.componentFactory.inputs.forEach(({propName:e,transform:t})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),t)}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentFactory.outputs.map(({propName:i,templateName:r})=>e.instance[i].pipe(oe(o=>({name:r,value:o}))));this.eventEmitters.next(t)}callNgOnChanges(e){if(!this.implementsOnChanges||null===this.inputChanges)return;const t=this.inputChanges;this.inputChanges=null,e.instance.ngOnChanges(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=ey.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}recordInputChange(e,t){if(!this.implementsOnChanges)return;null===this.inputChanges&&(this.inputChanges={});const i=this.inputChanges[e];if(i)return void(i.currentValue=t);const r=this.unchangedInputs.has(e),s=r?void 0:this.getInputValue(e);this.inputChanges[e]=new sR(s,t,r)}detectChanges(){null!==this.componentRef&&(this.callNgOnChanges(this.componentRef),this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}class kie extends HTMLElement{constructor(){super(...arguments),this.ngElementEventsSubscription=null}}let jB=null;function ja(){return jB}class Vie{}const Xe=new F("");let HB=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:()=>P(Uie),providedIn:"platform"})}return n})(),Uie=(()=>{class n extends HB{constructor(){super(),this._doc=P(Xe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ja().getBaseHref(this._doc)}onPopState(t){const i=ja().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=ja().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function zB(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function GB(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function el(n){return n&&"?"!==n[0]?"?"+n:n}let ty=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:()=>P(Hie),providedIn:"root"})}return n})();const jie=new F("");let Hie=(()=>{class n extends ty{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??P(Xe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return zB(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+el(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+el(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+el(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(I(HB),I(jie,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),tl=(()=>{class n{constructor(t){this._subject=new be,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function Wie(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(GB(WB(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+el(i))}normalize(t){return n.stripTrailingSlash(function Gie(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,WB(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+el(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+el(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=el;static#t=this.joinWithSlash=zB;static#n=this.stripTrailingSlash=GB;static#i=this.\u0275fac=function(i){return new(i||n)(I(ty))};static#r=this.\u0275prov=j({token:n,factory:()=>function zie(){return new tl(I(ty))}(),providedIn:"root"})}return n})();function WB(n){return n.replace(/\/index.html$/,"")}function e2(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}class Rre{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fy=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Rre(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),r2(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{r2(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(R(zi),R(_s),R(nA))};static#t=this.\u0275dir=ie({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function r2(n,e){n.context.$implicit=e.item}let TA=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Ore,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){s2("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){s2("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(R(zi),R(_s))};static#t=this.\u0275dir=ie({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Ore{constructor(){this.$implicit=null,this.ngIf=null}}function s2(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Vn(e)}'.`)}class Fre{createSubscription(e,t){return Wr(()=>e.subscribe({next:t,error:i=>{throw i}}))}dispose(e){Wr(()=>e.unsubscribe())}}class kre{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const Lre=new kre,Bre=new Fre;let py=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(La(t))return Lre;if(SL(t))return Bre;throw function As(n,e){return new H(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(i){return new(i||n)(R(ar,16))};static#t=this.\u0275pipe=Ai({name:"async",type:n,pure:!1,standalone:!0})}return n})(),td=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({})}return n})();const c2="browser";function Ha(n){return n===c2}function DA(n){return"server"===n}class l2{}class Rse extends Vie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class NA extends Rse{static makeCurrent(){!function Bie(n){jB??=n}(new NA)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ose(){return $f=$f||document.querySelector("base"),$f?$f.getAttribute("href"):null}();return null==t?null:function Pse(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){$f=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return e2(document.cookie,e)}}let $f=null,Fse=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();const yy=new F("");let v2=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new H(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(I(yy),I(pe))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();class FA{constructor(e){this._doc=e}}const kA="ng-app-id";let b2=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=DA(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${kA}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(kA),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(kA,this.appId),t.appendChild(o),o}}addStyleToHost(t,i){const r=this.getStyleElement(t,i),s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(I(Xe),I(Eu),I(Um,8),I(zr))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();const LA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},BA=/%COMP%/g,Vse=new F("",{providedIn:"root",factory:()=>!0});function w2(n,e){return e.map(t=>t.replace(BA,n))}let C2=(()=>{class n{constructor(t,i,r,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=DA(a),this.defaultRenderer=new VA(t,o,c,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ds.ShadowDom&&(i={...i,encapsulation:ds.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof T2?r.applyToHost(t):r instanceof UA&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case ds.Emulated:s=new T2(c,l,i,this.appId,u,o,a,d);break;case ds.ShadowDom:return new zse(c,l,t,i,o,a,this.nonce,d);default:s=new UA(c,l,i,u,o,a,d)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(I(v2),I(b2),I(Eu),I(Vse),I(Xe),I(zr),I(pe),I(Um))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();class VA{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(LA[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(A2(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(A2(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new H(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=LA[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=LA[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(xa.DashCase|xa.Important)?e.style.setProperty(t,i,r&xa.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&xa.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){null!=e&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=ja().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function A2(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class zse extends VA{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=w2(r.id,r.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class UA extends VA{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?w2(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class T2 extends UA{constructor(e,t,i,r,s,o,a,c){const l=r+"-"+i.id;super(e,t,i,s,o,a,c,l),this.contentAttr=function Use(n){return"_ngcontent-%COMP%".replace(BA,n)}(l),this.hostAttr=function jse(n){return"_nghost-%COMP%".replace(BA,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let Gse=(()=>{class n extends FA{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(I(Xe))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Wse=(()=>{class n extends FA{constructor(t){super(t),this.delegate=P(dB,{optional:!0})}supports(t){return!!this.delegate&&this.delegate.supports(t)}addEventListener(t,i,r){return this.delegate.addEventListener(t,i,r)}removeEventListener(t,i,r){return this.delegate.removeEventListener(t,i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(I(Xe))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();const S2=["alt","control","meta","shift"],$se={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qse={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Xse=(()=>{class n extends FA{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ja().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),S2.forEach(l=>{const u=i.indexOf(l);u>-1&&(i.splice(u,1),o+=l+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let r=$se[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),S2.forEach(o=>{o!==r&&(0,qse[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(I(Xe))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();const Qse=[{provide:zr,useValue:c2},{provide:AO,useValue:function Kse(){NA.makeCurrent()},multi:!0},{provide:Xe,useFactory:function Zse(){return function MX(n){HE=n}(document),document},deps:[]}],eoe=new F(""),M2=[{provide:U_,useClass:class Nse{addToWindow(e){Mt.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new H(5103,!1);return s},Mt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Mt.getAllAngularRootElements=()=>e.getAllRootElements(),Mt.frameworkStabilizers||(Mt.frameworkStabilizers=[]),Mt.frameworkStabilizers.push(i=>{const r=Mt.getAllAngularTestabilities();let s=r.length;const o=function(){s--,0==s&&i()};r.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?ja().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:TL,useClass:zC,deps:[pe,GC,U_]},{provide:zC,useClass:zC,deps:[pe,GC,U_]}],I2=[{provide:iE,useValue:"root"},{provide:tr,useFactory:function Jse(){return new tr},deps:[]},{provide:yy,useClass:Gse,multi:!0,deps:[Xe,pe,zr]},{provide:yy,useClass:Xse,multi:!0,deps:[Xe]},{provide:yy,useClass:Wse,multi:!0},C2,b2,v2,{provide:zw,useExisting:C2},{provide:l2,useClass:Fse,deps:[]},[]];let toe=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Eu,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(I(eoe,12))};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({providers:[...I2,...M2],imports:[td,ine]})}return n})(),qf=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:function(i){let r=null;return r=i?new(i||n):I(ooe),r},providedIn:"root"})}return n})(),ooe=(()=>{class n extends qf{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case hi.NONE:return i;case hi.HTML:return Gs(i,"HTML")?Ar(i):qO(this._doc,String(i)).toString();case hi.STYLE:return Gs(i,"Style")?Ar(i):i;case hi.SCRIPT:if(Gs(i,"Script"))return Ar(i);throw new H(5200,!1);case hi.URL:return Gs(i,"URL")?Ar(i):Km(String(i));case hi.RESOURCE_URL:if(Gs(i,"ResourceURL"))return Ar(i);throw new H(5201,!1);default:throw new H(5202,!1)}}bypassSecurityTrustHtml(t){return function YX(n){return new zX(n)}(t)}bypassSecurityTrustStyle(t){return function KX(n){return new GX(n)}(t)}bypassSecurityTrustScript(t){return function JX(n){return new WX(n)}(t)}bypassSecurityTrustUrl(t){return function ZX(n){return new $X(n)}(t)}bypassSecurityTrustResourceUrl(t){return function QX(n){return new qX(n)}(t)}static#e=this.\u0275fac=function(i){return new(i||n)(I(Xe))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Xf=pa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function vt(n,e){return At((t,i)=>{let r=0;t.subscribe(dt(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Ts(n){return!!n&&(n instanceof me||Ve(n.lift)&&Ve(n.subscribe))}const by={schedule(n,e){const t=setTimeout(n,e);return()=>clearTimeout(t)},scheduleBeforeRender(n){if(typeof window>"u")return by.schedule(n,0);if(typeof window.requestAnimationFrame>"u")return by.schedule(n,16);const e=window.requestAnimationFrame(n);return()=>window.cancelAnimationFrame(e)}};let jA;function _oe(n,e,t){let i=t;return function foe(n){return!!n&&n.nodeType===Node.ELEMENT_NODE}(n)&&e.some((r,s)=>!("*"===r||!function poe(n,e){if(!jA){const t=Element.prototype;jA=t.matches||t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}return n.nodeType===Node.ELEMENT_NODE&&jA.call(n,e)}(n,r)||(i=s,0))),i}class voe{constructor(e){this.component=e}create(e){return new boe(this.component,e)}}class boe{constructor(e,t){this.component=e,this.injector=t,this.eventEmitters=new Zs(1),this.events=this.eventEmitters.pipe(nn(i=>Qc(...i))),this.componentRef=null,this.viewChangeDetectorRef=null,this.hasInputChanges=!1,this.scheduledChangeDetectionFn=null,this.scheduledDestroyFn=null,this.initialInputValues=new Map,this.componentMirror=function Hne(n){const e=We(n);if(!e)return null;const t=new mf(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(this.component),this.unchangedInputs=new Set(this.componentMirror.inputs.map(({propName:i})=>i)),this.ngZone=this.injector.get(pe),this.elementZone=typeof Zone>"u"?null:this.ngZone.run(()=>Zone.current)}connect(e){this.runInZone(()=>{if(null!==this.scheduledDestroyFn)return this.scheduledDestroyFn(),void(this.scheduledDestroyFn=null);null===this.componentRef&&this.initializeComponent(e)})}disconnect(){this.runInZone(()=>{null===this.componentRef||null!==this.scheduledDestroyFn||(this.scheduledDestroyFn=by.schedule(()=>{null!==this.componentRef&&(this.componentRef.destroy(),this.componentRef=null,this.viewChangeDetectorRef=null)},10))})}getInputValue(e){return this.runInZone(()=>{if(null===this.componentRef)return this.initialInputValues.get(e);const t=this.componentRef.instance[e];return function _f(n){return"function"==typeof n&&void 0!==n[K]}(t)?t():t})}setInputValue(e,t,i){this.runInZone(()=>{i&&(t=i.call(this.componentRef?.instance,t)),null!==this.componentRef?function goe(n,e){return n===e||n!=n&&e!=e}(t,this.getInputValue(e))&&(void 0!==t||!this.unchangedInputs.has(e))||(this.unchangedInputs.delete(e),this.hasInputChanges=!0,this.componentRef.setInput(e,t),this.scheduleDetectChanges()):this.initialInputValues.set(e,t)})}initializeComponent(e){const t=this.injector.get(Si),i=ht.create({providers:[],parent:this.injector}),r=function moe(n,e){const t=n.childNodes,i=e.map(()=>[]);let r=-1;e.some((s,o)=>"*"===s&&(r=o,!0));for(let s=0,o=t.length;s<o;++s){const a=t[s],c=_oe(a,e,r);-1!==c&&i[c].push(a)}return i}(e,[...this.componentMirror.ngContentSelectors]);this.componentRef=function jne(n,e){const t=We(n),i=e.elementInjector||_m();return new mf(t).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}(this.component,{environmentInjector:t,elementInjector:i,projectableNodes:r,hostElement:e}),this.viewChangeDetectorRef=this.componentRef.injector.get(ar),this.initializeInputs(),this.initializeOutputs(this.componentRef),this.detectChanges(),this.injector.get(or).attachView(this.componentRef.hostView)}initializeInputs(){this.componentMirror.inputs.forEach(({propName:e,transform:t})=>{this.initialInputValues.has(e)&&this.setInputValue(e,this.initialInputValues.get(e),t)}),this.initialInputValues.clear()}initializeOutputs(e){const t=this.componentMirror.outputs.map(({propName:i,templateName:r})=>{const s=e.instance[i];return(Ts(s)?s:function loe(n){const e=function sX(n){return n.destroyRef}(n);return new me(t=>{e?.onDestroy(()=>t.complete());const i=n.subscribe(r=>t.next(r));return()=>i.unsubscribe()})}(s)).pipe(oe(a=>({name:r,value:a})))});this.eventEmitters.next(t)}markViewForCheck(e){this.hasInputChanges&&(this.hasInputChanges=!1,e.markForCheck())}scheduleDetectChanges(){this.scheduledChangeDetectionFn||(this.scheduledChangeDetectionFn=by.scheduleBeforeRender(()=>{this.scheduledChangeDetectionFn=null,this.detectChanges()}))}detectChanges(){null!==this.componentRef&&(this.markViewForCheck(this.viewChangeDetectorRef),this.componentRef.changeDetectorRef.detectChanges())}runInZone(e){return this.elementZone&&Zone.current!==this.elementZone?this.ngZone.run(e):e()}}function HA(){return(HA=te(function*(n,e,t){const{injector:i}=yield function Yse(n){return gne(function x2(n){return{appProviders:[...I2,...n?.providers??[]],platformProviders:Qse}}(n))}(t),o=function Eoe(n,e){return class extends n{whenStable(){return te(function*(){const i=e.get(or);yield function aoe(n,e){const t="object"==typeof e;return new Promise((i,r)=>{const s=new Io({next:o=>{i(o),s.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new Xf)}});n.subscribe(s)})}(i.isStable.pipe(vt(r=>r)))})()}}}(function Lie(n,e){const t=function Die(n,e){return e.get(Ma).resolveComponentFactory(n).inputs}(n,e.injector),i=e.strategyFactory||new Nie(n,e.injector),r=function Iie(n){const e={};return n.forEach(({propName:t,templateName:i,transform:r})=>{e[function Aie(n){return n.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}(i)]=[t,r]}),e}(t);class s extends kie{static#e=this.observedAttributes=Object.keys(r);get ngElementStrategy(){if(!this._ngElementStrategy){const a=this._ngElementStrategy=i.create(this.injector||e.injector);t.forEach(({propName:c,transform:l})=>{if(!this.hasOwnProperty(c))return;const u=this[c];delete this[c],a.setInputValue(c,u,l)})}return this._ngElementStrategy}constructor(a){super(),this.injector=a}attributeChangedCallback(a,c,l,u){const[d,h]=r[a];this.ngElementStrategy.setInputValue(d,l,h)}connectedCallback(){let a=!1;this.ngElementStrategy.events&&(this.subscribeToEvents(),a=!0),this.ngElementStrategy.connect(this),a||this.subscribeToEvents()}disconnectedCallback(){this._ngElementStrategy&&this._ngElementStrategy.disconnect(),this.ngElementEventsSubscription&&(this.ngElementEventsSubscription.unsubscribe(),this.ngElementEventsSubscription=null)}subscribeToEvents(){this.ngElementEventsSubscription=this.ngElementStrategy.events.subscribe(a=>{const c=new CustomEvent(a.name,{detail:a.value});this.dispatchEvent(c)})}}return t.forEach(({propName:o,transform:a})=>{Object.defineProperty(s.prototype,o,{get(){return this.ngElementStrategy.getInputValue(o)},set(c){this.ngElementStrategy.setInputValue(o,c,a)},configurable:!0,enumerable:!0})}),s}(e,{injector:i,strategyFactory:new voe(e)}),i);return customElements.define(n,o),o})).apply(this,arguments)}let Coe=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({imports:[td]})}return n})();new F("Maximum number of autocomplete options displayed",{providedIn:"root",factory:()=>10}),Qe(123);const N2=[{src:"app:skin",organ:"Skin",name:"Skin",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002097"},{src:"app:brain",organ:"Brain",name:"Brain",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000955"},{disabled:!0,src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000029"},{src:"app:lymph-nodes",organ:"Lymph Node",name:"Lymph Node",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002509"},{disabled:!0,src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000970"},{src:"app:eye",organ:"Eye",name:"Eye, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004548"},{src:"app:eye",organ:"Eye",name:"Eye, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004549"},{disabled:!0,src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0003889"},{src:"app:fallopian-tube-left",organ:"Fallopian Tube",name:"Fallopian Tube, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001303"},{src:"app:fallopian-tube-right",organ:"Fallopian Tube",name:"Fallopian Tube, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001302"},{src:"app:heart",organ:"Heart",name:"Heart",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000948"},{disabled:!0,src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002113"},{src:"app:kidney-left",organ:"Kidney",name:"Kidney, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004538"},{src:"app:kidney-right",organ:"Kidney",name:"Kidney, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004539"},{disabled:!0,src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001465"},{src:"app:knee",organ:"Knee",name:"Knee, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24978"},{src:"app:knee",organ:"Knee",name:"Knee, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma24977"},{src:"app:liver",organ:"Liver",name:"Liver",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002107"},{disabled:!0,src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002048"},{src:"app:lung",organ:"Lung",name:"Lungs",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001004"},{disabled:!0,src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001911"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57991"},{src:"app:mammary-gland",organ:"Mammary Gland",name:"Mammary Gland, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma57987"},{disabled:!0,src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000992"},{src:"app:ovary-left",organ:"Ovary",name:"Ovary, L",side:"left",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7214"},{src:"app:ovary-right",organ:"Ovary",name:"Ovary, R",side:"right",hasSex:!1,sex:"female",id:"http://purl.org/sig/ont/fma/fma7213"},{src:"app:larynx",organ:"Larynx",name:"Larynx",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001737"},{src:"app:main-bronchus",organ:"Main Bronchus",name:"Main Bronchus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002182"},{disabled:!0,src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002373"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, L",side:"left",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54974"},{src:"app:palatine-tonsil",organ:"Palatine Tonsil",name:"Palatine Tonsil, R",side:"right",hasSex:!0,id:"http://purl.org/sig/ont/fma/fma54973"},{src:"app:pancreas",organ:"Pancreas",name:"Pancreas",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001264"},{src:"app:pelvis-f",organ:"Pelvis",name:"Pelvis",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001270"},{src:"app:placenta",organ:"Placenta",name:"Placenta",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0001987"},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0002367",disabled:!0},{src:"app:prostate",organ:"Prostate",name:"Prostate",hasSex:!1,sex:"male",id:"http://purl.obolibrary.org/obo/UBERON_0000079"},{src:"app:small-intestine",organ:"Small Intestine",name:"Small Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002108"},{src:"app:large-intestine",organ:"Large Intestine",name:"Large Intestine",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000059"},{src:"app:spinal-cord",organ:"Spinal Cord",name:"Spinal Cord",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002240"},{src:"app:spleen",organ:"Spleen",name:"Spleen",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002106"},{src:"app:thymus",organ:"Thymus",name:"Thymus",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002370"},{src:"app:trachea",organ:"Trachea",name:"Trachea",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0003126"},{disabled:!0,src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0000056"},{src:"app:ureter-left",organ:"Ureter",name:"Ureter, L",side:"left",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001223"},{src:"app:ureter-right",organ:"Ureter",name:"Ureter, R",side:"right",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001222"},{src:"app:bladder",organ:"Urinary Bladder",name:"Urinary Bladder",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0001255"},{src:"app:uterus",organ:"Uterus",name:"Uterus",hasSex:!1,sex:"female",id:"http://purl.obolibrary.org/obo/UBERON_0000995"},{src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0004537"},{disabled:!0,src:"app:vasculature-thick",organ:"Blood Vasculature",name:"Blood Vasculature",hasSex:!0,id:"http://purl.obolibrary.org/obo/UBERON_0002049"}].sort((n,e)=>n.name.localeCompare(e.name));function id(n){return!0===n}function lr(n){return null===n||typeof n>"u"}function Di(n){return!lr(n)}function zA(n){return!!n}function V2(n){return lr(n)?n:JSON.parse(JSON.stringify(n))}function U2(n){return Di(n)&&"object"==typeof n&&function GA(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}N2.filter(n=>!0!==n.disabled);const{isArray:Xoe}=Array,{getPrototypeOf:Yoe,prototype:Koe,keys:Joe}=Object;function z2(n){if(1===n.length){const e=n[0];if(Xoe(e))return{args:e,keys:null};if(function Zoe(n){return n&&"object"==typeof n&&Yoe(n)===Koe}(e)){const t=Joe(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:Qoe}=Array;function Ty(n){return oe(e=>function eae(n,e){return Qoe(e)?n(...e):n(e)}(n,e))}function G2(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Kf(...n){const e=LB(n),{args:t,keys:i}=z2(n),r=new me(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let c=o,l=o;for(let u=0;u<o;u++){let d=!1;xn(t[u]).subscribe(dt(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(i?G2(i,a):a),s.complete())}))}});return e?r.pipe(Ty(e)):r}function Z(...n){return In(n,Hf(n))}function za(n,e){const t=Ve(n)?n:()=>n,i=r=>r.error(t());return new me(e?r=>e.schedule(i,0,r):i)}function qo(n={}){const{connector:e=()=>new ue,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return At((g,m)=>{l++,!d&&!u&&h();const y=c=c??e();m.add(()=>{l--,0===l&&!d&&!u&&(a=WA(p,r))}),y.subscribe(m),!o&&l>0&&(o=new Io({next:v=>y.next(v),error:v=>{d=!0,h(),a=WA(f,t,v),y.error(v)},complete:()=>{u=!0,h(),a=WA(f,i),y.complete()}}),xn(g).subscribe(o))})(s)}}function WA(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new Io({next:()=>{i.unsubscribe(),n()}});return xn(e(...t)).subscribe(i)}function Xr(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,qo({connector:()=>new Zs(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Qs(n){return At((e,t)=>{let s,i=null,r=!1;i=e.subscribe(dt(t,void 0,void 0,o=>{s=xn(n(o,Qs(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function Jf(n,e=ks){return n=n??tae,At((t,i)=>{let r,s=!0;t.subscribe(dt(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function tae(n,e){return n===e}function qn(n){return n<=0?()=>cr:At((e,t)=>{let i=0;e.subscribe(dt(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}const Xo="NGXS_META",W2="NGXS_OPTIONS_META",$A="NGXS_SELECTOR_META";function $2(n){if(!n.hasOwnProperty(Xo)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,Xo,{value:e})}return Zf(n)}function Zf(n){return n[Xo]}function X2(n){return n[$A]}function nae(n,e){return n===e}function qA(n,e=nae){let t=null,i=null;function r(){return function iae(n,e,t){if(null===e||null===t||e.length!==t.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}(e,t,arguments)||(i=n.apply(null,arguments)),t=arguments,i}return r.reset=function(){t=null,i=null},r}let sae=(()=>{class n{static#e=this._value={};static set(t){this._value=t}static pop(){const t=this._value;return this._value={},t}}return n})();const Y2=new F("",{providedIn:"root",factory:()=>sae.pop()});let K2=(()=>{class n extends Zs{constructor(){super(1)}bootstrap(){this.next(!0),this.complete()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Z2=new F(""),Q2=new F("");function eV(n){const e=[];let t=!1;return function(...r){if(t)e.unshift(r);else{for(t=!0,n(...r);e.length>0;){const s=e.pop();s&&n(...s)}t=!1}}}class oae extends ue{constructor(){super(...arguments),this._orderedNext=eV(e=>super.next(e))}next(e){this._orderedNext(e)}}class aae extends wn{constructor(e){super(e),this._orderedNext=eV(t=>super.next(t)),this._currentValue=e}getValue(){return this._currentValue}next(e){this._currentValue=e,this._orderedNext(e)}}function tV(n){return e=>new me(t=>e.subscribe({next(i){n(()=>t.next(i))},error(i){n(()=>t.error(i))},complete(){n(()=>t.complete())}}))}let XA=(()=>{class n extends aae{constructor(){super({}),this.state=function P2(n,e){const t=!e?.manualCleanup;t&&!e?.injector&&Ih();const i=t?e?.injector?.get(kc)??P(kc):null,r=function doe(n=Object.is){return(e,t)=>1===e.kind&&1===t.kind&&n(e.value,t.value)}(e?.equal);let s;s=Ra(e?.requireSync?{kind:0}:{kind:1,value:e?.initialValue},{equal:r});const o=n.subscribe({next:a=>s.set({kind:1,value:a}),error:a=>{if(e?.rejectErrors)throw a;s.set({kind:2,error:a})}});if(e?.requireSync&&0===s().kind)throw new H(601,!1);return i?.onDestroy(o.unsubscribe.bind(o)),Zc(()=>{const a=s();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new H(601,!1)}},{equal:e?.equal})}(this.pipe(tV(Wr)),{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.complete()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nV(n,e){return e?t=>t.pipe(nV((i,r)=>xn(n(i,r)).pipe(oe((s,o)=>e(i,s,r,o))))):At((t,i)=>{let r=0,s=null,o=!1;t.subscribe(dt(i,a=>{s||(s=dt(i,void 0,()=>{s=null,o&&i.complete()}),xn(n(a,r++)).subscribe(s))},()=>{o=!0,!s&&i.complete()}))})}function rd(n){return At((e,t)=>{let i=!1;e.subscribe(dt(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Ss(n){return At((e,t)=>{xn(n).subscribe(dt(t,()=>t.complete(),Ac)),!t.closed&&e.subscribe(t)})}function bt(n,e,t){const i=Ve(n)||e||t?{next:n,error:e,complete:t}:n;return i?At((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(dt(s,c=>{var l;null===(l=i.next)||void 0===l||l.call(i,c),s.next(c)},()=>{var c;a=!1,null===(c=i.complete)||void 0===c||c.call(i),s.complete()},c=>{var l;a=!1,null===(l=i.error)||void 0===l||l.call(i,c),s.error(c)},()=>{var c,l;a&&(null===(c=i.unsubscribe)||void 0===c||c.call(i)),null===(l=i.finalize)||void 0===l||l.call(i)}))}):ks}function sd(...n){return function cae(){return Q_(1)}()(In(n,Hf(n)))}function Ga(...n){const e=Hf(n);return At((t,i)=>{(e?sd(n,t,e):sd(n,t)).subscribe(i)})}let YA=(()=>{class n{static#e=this.type="@@INIT"}return n})(),KA=(()=>{class n{static#e=this.type="@@UPDATE_STATE";constructor(t){this.addedStates=t}}return n})();const iV=new F("");function il(n){return n.constructor?.type||n.type}const rV=(n,e,t)=>{n={...n};const i=e.split("."),r=i.length-1;return i.reduce((s,o,a)=>(s[o]=a===r?t:Array.isArray(s[o])?s[o].slice():{...s[o]},s&&s[o]),n),n},JA=(n,e)=>e.split(".").reduce((t,i)=>t&&t[i],n);let hae=(()=>{class n{enter(t){return t()}leave(t){return t()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lV=(()=>{class n{constructor(t,i){this._ngZone=t,this._platformId=i}enter(t){return DA(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return pe.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return pe.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}static#e=this.\u0275fac=function(i){return new(i||n)(I(pe),I(zr))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const dV=new F(""),Eae=new F("",{providedIn:"root",factory:()=>{const n=P(pe),e=P(dm),t=e.get(dV);return e.get(t||(n instanceof pe?lV:hae))}});let hV=(()=>{class n{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}static#e=this.\u0275fac=function(i){return new(i||n)(I(Eae))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fV=n=>(...e)=>n.shift()(...e,(...i)=>fV(n)(...i));function xy(n){return tV(e=>n.leave(e))}let pV=(()=>{class n extends oae{ngOnDestroy(){this.complete()}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=zt(n)))(r||n)}})();static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QA=(()=>{class n{constructor(t,i){this._parentManager=t,this._pluginHandlers=i,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(i=>i.handle?i.handle.bind(i):i)}static#e=this.\u0275fac=function(i){return new(i||n)(I(n,12),I(iV,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();const eT=new WeakMap,gV=Lr.onUnhandledError;Lr.onUnhandledError=function(n){const e=eT.get(n);if(e)e();else{if(!gV)throw n;gV.call(this,n)}};let mV=(()=>{class n extends ue{static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=zt(n)))(r||n)}})();static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Tae=(()=>{class n{constructor(t,i,r,s,o,a){this._ngZone=t,this._actions=i,this._actionResults=r,this._pluginManager=s,this._stateStream=o,this._ngxsExecutionStrategy=a}dispatch(t){return this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t)).pipe(function Aae(n){return e=>{let t=e.subscribe({error:i=>{n.runOutsideAngular(()=>{queueMicrotask(()=>{t&&function wae(n){const e=eT.get(n);e&&e()}(i)})})}});return new me(i=>(t?.unsubscribe(),t=null,e.subscribe(i)))}}(this._ngZone),xy(this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?Z(void 0):Kf(t.map(i=>this.dispatchSingle(i))).pipe(oe(()=>{})):this.dispatchSingle(t)}dispatchSingle(t){const i=this._stateStream.getValue();return fV([...this._pluginManager.plugins,(s,o)=>{s!==i&&this._stateStream.next(s);const a=this.getActionResultStream(o);return a.subscribe(c=>this._actions.next(c)),this._actions.next({action:o,status:"DISPATCHED"}),this.createDispatchObservable(a)}])(i,t).pipe(Xr())}getActionResultStream(t){return this._actionResults.pipe(vt(i=>i.action===t&&"DISPATCHED"!==i.status),qn(1),Xr())}createDispatchObservable(t){return t.pipe(nV(i=>{switch(i.status){case"SUCCESSFUL":return Z(this._stateStream.getValue());case"ERRORED":return za(()=>i.error);default:return cr}})).pipe(Xr())}static#e=this.\u0275fac=function(i){return new(i||n)(I(pe),I(pV),I(mV),I(QA),I(XA),I(hV))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const _V=new F(""),yV=new F(""),vV=new F("");let Qf=(()=>{class n{constructor(){this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=lV,this.selectorOptions={injectContainerState:!1,suppressErrors:!1}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:()=>(()=>{const t=new n,i=P(vV);return{...t,...i,selectorOptions:{...t.selectorOptions,...i.selectorOptions}}})(),providedIn:"root"})}return n})();class Sae{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}}let ep=(()=>{class n{constructor(t,i,r){this._stateStream=t,this._dispatcher=i,this._config=r}getRootStateOperations(){return{getState:()=>this._stateStream.getValue(),setState:i=>this._stateStream.next(i),dispatch:i=>this._dispatcher.dispatch(i)}}setStateToTheCurrentWithNew(t){const i=this.getRootStateOperations(),r=i.getState();i.setState({...r,...t.defaults})}static#e=this.\u0275fac=function(i){return new(i||n)(I(XA),I(Tae),I(Qf))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const xae=!1;function EV(n){const e=X2(n)||Zf(n);return e&&e.makeRootSelector||(()=>n)}function wV(n){return e=>{for(let t=0;t<n.length;t++){if(!e)return;e=e[n[t]]}return e}}function CV(n){const e=n;let t="store."+e[0],i=0;const r=e.length;let s=t;for(;++i<r;)s=s+" && "+(t=t+"."+e[i]);return new Function("store","return "+s+";")}const Pae=new F("",{providedIn:"root",factory:()=>P(Qf).compatibility?.strictContentSecurityPolicy?wV:CV});function Bae(...n){return function od(n,e,t=Uae){const i=function jae(n){return n.reduce((e,t)=>(e[il(t)]=!0,e),{})}(n),r=e&&function Hae(n){return n.reduce((e,t)=>(e[t]=!0,e),{})}(e);return function(s){return s.pipe(function Vae(n,e){return vt(t=>{const i=il(t.action);return n[i]&&(!e||e[t.status])})}(i,r),t())}}(n,["DISPATCHED"])}function Uae(){return oe(n=>n.action)}let iT=(()=>{class n{constructor(t){this._internalStateOperations=t}createStateContext(t){const i=this._internalStateOperations.getRootStateOperations();return{getState:()=>xV(i.getState(),t.path),patchState(r){const s=i.getState(),o=function zae(n){return e=>{const t={...e};for(const i in n)t[i]=n[i];return t}}(r);SV(i,s,o,t.path)},setState(r){const s=i.getState();!function Sy(n){return"function"==typeof n}(r)?TV(i,s,r,t.path):SV(i,s,r,t.path)},dispatch:r=>i.dispatch(r)}}static#e=this.\u0275fac=function(i){return new(i||n)(I(ep))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function TV(n,e,t,i){const r=rV(e,i,t);return n.setState(r),r}function SV(n,e,t,i){return TV(n,e,t(xV(e,i)),i)}function xV(n,e){return JA(n,e)}new RegExp("^[a-zA-Z0-9_]+$"),new F("",{providedIn:"root",factory:()=>({warnOnUnhandledActions:!0})});let Jae=(()=>{class n{constructor(){this._ngZone=P(pe),this._errorHandler=P(tr)}handleError(t,i){this._ngZone.runOutsideAngular(()=>this._errorHandler.handleError(t))}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zae(n){let e=void 0===n?{}:n;return n&&(Array.isArray(n)?e=n.slice():"object"==typeof n&&(e={...n})),e}let ad=(()=>{class n{constructor(t,i,r,s,o,a,c){this._injector=t,this._config=i,this._parentFactory=r,this._actions=s,this._actionResults=o,this._stateContextFactory=a,this._initialState=c,this._actionsSubscription=null,this._propGetter=P(Pae),this._ngxsUnhandledErrorHandler=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=qA(()=>{const l=this,u=l._propGetter;return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(f){let p=function d(f){const p=l.statePaths[f];return p?u(p.split(".")):null}(f);return p||((...g)=>(p||(p=function d(f){const p=l.statePaths[f];return p?u(p.split(".")):null}(f)),p?p(...g):void 0))},getSelectorOptions:f=>({...l._config.selectorOptions,...f||{}})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}ngOnDestroy(){this._actionsSubscription?.unsubscribe()}add(t){const{newStates:i}=this.addToStatesMap(t);if(!i.length)return[];const r=function Nae(n){const e=t=>{const i=n.find(r=>r===t);return i[Xo].name};return n.reduce((t,i)=>{const{name:r,children:s}=i[Xo];return t[r]=(s||[]).map(e),t},{})}(i),s=function Lae(n){const e=[],t={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),t[r]=!0,n[r].forEach(o=>{t[o]||i(o,s.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(n).forEach(r=>i(r)),e.reverse()}(r),o=function kae(n,e={}){const t=(i,r)=>{for(const s in i)if(i.hasOwnProperty(s)&&i[s].indexOf(r)>=0){const o=t(i,s);return null!==o?`${o}.${s}`:s}return null};for(const i in n)if(n.hasOwnProperty(i)){const r=t(n,i);e[i]=r?`${r}.${i}`:i}return e}(r),a=function Fae(n){return n.reduce((e,t)=>(e[t[Xo].name]=t,e),{})}(i),c=[];for(const l of s){const u=a[l],d=o[l],h=u[Xo];this.addRuntimeInfoToMeta(h,d);const f={name:l,path:d,isInitialised:!1,actions:h.actions,instance:this._injector.get(u),defaults:Zae(h.defaults)};this.hasBeenMountedAndBootstrapped(l,d)||c.push(f),this.states.push(f)}return c}addAndReturnDefaults(t){const r=this.add(t||[]);return{defaults:r.reduce((o,a)=>rV(o,a.path,a.defaults),{}),states:r}}connectActionHandlers(){if(this._parentFactory||null!==this._actionsSubscription)return;const t=new ue;this._actionsSubscription=this._actions.pipe(vt(i=>"DISPATCHED"===i.status),Mn(i=>{t.next(i);const r=i.action;return this.invokeActions(t,r).pipe(oe(()=>({action:r,status:"SUCCESSFUL"})),rd({action:r,status:"CANCELED"}),Qs(s=>{const o=this._ngxsUnhandledErrorHandler||=this._injector.get(Jae),a=function Cae(n,e){if(null!==n&&"object"==typeof n){let t=!1;eT.set(n,()=>{t||(t=!0,e())})}return n}(s,()=>o.handleError(s,{action:r}));return Z({action:r,status:"ERRORED",error:a})}))})).subscribe(i=>this._actionResults.next(i))}invokeActions(t,i){const r=il(i),s=[];let o=!1;for(const a of this.states){const c=a.actions[r];if(c)for(const l of c){const u=this._stateContextFactory.createStateContext(a);try{let d=a.instance[l.fn](u,i);La(d)&&(d=In(d)),Ts(d)?(d=d.pipe(Mn(h=>La(h)?In(h):Ts(h)?h:Z(h)),rd({})),l.options.cancelUncompleted&&(d=d.pipe(Ss(t.pipe(Bae(i)))))):d=Z({}).pipe(Xr()),s.push(d)}catch(d){s.push(za(d))}o=!0}}return s.length||s.push(Z({})),Kf(s)}addToStatesMap(t){const i=[],r=this.statesByName;for(const s of t){const o=Zf(s).name;!r[o]&&(i.push(s),r[o]=s)}return{newStates:i}}addRuntimeInfoToMeta(t,i){this.statePaths[t.name]=i,t.path=i}hasBeenMountedAndBootstrapped(t,i){const r=void 0!==JA(this._initialState,i);return this.statesByName[t]&&r}static#e=this.\u0275fac=function(i){return new(i||n)(I(ht),I(Qf),I(n,12),I(pV),I(mV),I(iT),I(Y2,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Yr=(()=>{class n{constructor(t,i,r,s,o,a){this._stateStream=t,this._internalStateOperations=i,this._config=r,this._internalExecutionStrategy=s,this._stateFactory=o,this._selectableStateStream=this._stateStream.pipe(xy(this._internalExecutionStrategy),Xr({bufferSize:1,refCount:!0})),this.initStateStream(a)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const i=this.getStoreBoundSelectorFn(t);return this._selectableStateStream.pipe(oe(i),Qs(r=>this._config.selectorOptions.suppressErrors&&r instanceof TypeError?Z(void 0):za(r)),Jf(),xy(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(qn(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}selectSignal(t){const i=this.getStoreBoundSelectorFn(t);return Zc(()=>i(this._stateStream.state()))}subscribe(t){return this._selectableStateStream.pipe(xy(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return EV(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const i=this._stateStream.value;(!i||0===Object.keys(i).length)&&this._stateStream.next(t)}static#e=this.\u0275fac=function(i){return new(i||n)(I(XA),I(ep),I(Qf),I(hV),I(ad),I(Y2,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const DV=new F("");let Iy=(()=>{class n{static#e=this.store=null;static#t=this.config=null;constructor(t,i){n.store=t,n.config=i}ngOnDestroy(){n.store=null,n.config=null}static#n=this.\u0275fac=function(i){return new(i||n)(I(Yr),I(Qf))};static#i=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),RV=(()=>{class n{constructor(t,i,r,s){this._store=t,this._internalStateOperations=i,this._stateContextFactory=r,this._appBootstrappedState=s,this._destroy$=new Zs(1)}ngOnDestroy(){this._destroy$.next()}ngxsBootstrap(t,i){this._internalStateOperations.getRootStateOperations().dispatch(t).pipe(vt(()=>!!i),bt(()=>this._invokeInitOnStates(i.states)),Mn(()=>this._appBootstrappedState),vt(r=>!!r),Ss(this._destroy$)).subscribe(()=>this._invokeBootstrapOnStates(i.states))}_invokeInitOnStates(t){for(const i of t){const r=i.instance;r.ngxsOnChanges&&this._store.select(s=>JA(s,i.path)).pipe(Ga(void 0),At((n,e)=>{let t,i=!1;n.subscribe(dt(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))}),Ss(this._destroy$)).subscribe(([s,o])=>{const a=new Sae(s,o,!i.isInitialised);r.ngxsOnChanges(a)}),r.ngxsOnInit&&r.ngxsOnInit(this._getStateContext(i)),i.isInitialised=!0}}_invokeBootstrapOnStates(t){for(const i of t){const r=i.instance;r.ngxsAfterBootstrap&&r.ngxsAfterBootstrap(this._getStateContext(i))}}_getStateContext(t){return this._stateContextFactory.createStateContext(t)}static#e=this.\u0275fac=function(i){return new(i||n)(I(Yr),I(ep),I(iT),I(K2))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();new F(""),new F("");let ice=(()=>{class n{constructor(){!function PV(){(P(DV,{optional:!0})||[]).forEach(o=>o());const e=P(ad),t=P(ep);P(Yr),P(Iy);const i=P(_V,{optional:!0})||[],r=P(RV),s=e.addAndReturnDefaults(i);t.setStateToTheCurrentWithNew(s),e.connectActionHandlers(),r.ngxsBootstrap(new YA,s)}()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({})}return n})(),rce=(()=>{class n{constructor(){!function NV(){P(Yr);const n=P(ep),e=P(ad),t=P(yV,{optional:!0})||[],i=P(RV),r=t.reduce((o,a)=>o.concat(a),[]),s=e.addAndReturnDefaults(r);s.states.length&&(n.setStateToTheCurrentWithNew(s),i.ngxsBootstrap(new KA(s.defaults),s))}()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({})}return n})();function LV(n,e){return[ad,QA,...n,{provide:_V,useValue:n},{provide:kf,useFactory:()=>{const t=P(K2);return()=>t.bootstrap()},multi:!0},{provide:vV,useValue:e},{provide:dV,useValue:e.executionStrategy},{provide:Q2,useExisting:iT},{provide:Z2,useExisting:ad}]}function BV(n){return[ad,QA,...n,{provide:yV,multi:!0,useValue:n}]}let sce=(()=>{class n{static forRoot(t=[],i={}){return{ngModule:ice,providers:LV(t,i)}}static forFeature(t=[]){return{ngModule:rce,providers:BV(t)}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({})}return n})();function rT(n,e){return(t,i,r)=>{const s=$2(t.constructor),o=Array.isArray(n)?n:[n];for(const a of o){const c=a.type;s.actions[c]||(s.actions[c]=[]),s.actions[c].push({fn:i,options:e||{},type:c})}}}function sT(n){return e=>{const t=e,i=$2(t),r=Object.getPrototypeOf(t),s=function oce(n,e){return{...n[W2]||{},...e}}(r,n);(function ace(n){const{meta:e,inheritedStateClass:t,optionsWithInheritance:i}=n,{children:r,defaults:s,name:o}=i,a="string"==typeof o?o:o&&o.getName()||null;t.hasOwnProperty(Xo)&&(e.actions={...e.actions,...(t[Xo]||{}).actions}),e.children=r,e.defaults=s,e.name=a})({meta:i,inheritedStateClass:r,optionsWithInheritance:s}),t[W2]=s}}const cce=36;function Dy(n,...e){return function(t,i){const r=i.toString(),s=`__${r}__selector`,o=function uce(n,e,t=[]){return e=e||function dce(n){const e=n.length-1;return n.charCodeAt(e)===cce?n.slice(0,e):n}(n),"string"==typeof e?function Oae(n,e){return e?.compatibility?.strictContentSecurityPolicy?wV(n):CV(n)}(t.length?[e,...t]:e.split("."),Iy.config):e}(r,n,e);Object.defineProperties(t,{[s]:{writable:!0,enumerable:!1,configurable:!0},[r]:{enumerable:!0,configurable:!0,get(){return this[s]||(this[s]=function lce(n){return Iy.store||function bae(){throw new Error("You have forgotten to import the NGXS module!")}(),Iy.store.select(n)}(o))}}})}}const VV="NGXS_SELECTOR_OPTIONS_META",Ry={getOptions:n=>n&&n[VV]||{},defineOptions:(n,e)=>{n&&(n[VV]=e)}};function hce(n,e){const t=function q2(n){return n.hasOwnProperty($A)||Object.defineProperty(n,$A,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),X2(n)}(n);t.originalFn=n;let i=()=>({});e&&(t.containerClass=e.containerClass,t.selectorName=e.selectorName||null,i=e.getSelectorOptions||i);const r={...t};return t.getSelectorOptions=()=>function fce(n,e){return{...Ry.getOptions(n.containerClass)||{},...Ry.getOptions(n.originalFn)||{},...n.getSelectorOptions()||{},...e}}(r,i()),t}function tp(n,e,t){const i=function Iae(n,e){const t=e&&e.containerClass,r=qA(function(...o){const a=n.apply(t,o);return a instanceof Function?qA.apply(null,[a]):a});return Object.setPrototypeOf(r,n),r}(e,t),r=hce(e,t);return r.makeRootSelector=function Mae(n,e,t){return i=>{const{argumentSelectorFunctions:r,selectorOptions:s}=function Dae(n,e,t=[]){const i=e.getSelectorOptions(),r=n.getSelectorOptions(i),o=function Rae(n=[],e,t){const i=[];return t&&(e.injectContainerState||0===n.length)&&Zf(t)&&i.push(t),i.push(...n),i}(t,r,e.containerClass).map(a=>EV(a)(n));return{selectorOptions:r,argumentSelectorFunctions:o}}(i,n,e),{suppressErrors:o}=s;return function(c){const l=r.map(u=>u(c));try{return t(...l)}catch(u){if(o&&u instanceof TypeError)return;throw xae&&console.error("The selector below has thrown an error upon invocation. Please check for any unsafe property access that may result in null or undefined values.",n.originalFn),u}}}}(r,n,i),i}function cd(n){return(e,t,i)=>{i||=Object.getOwnPropertyDescriptor(e,t);const r=i?.value,s=tp(n,r,{containerClass:e,selectorName:t.toString(),getSelectorOptions:()=>({})});return{configurable:!0,get:()=>s,originalFn:r}}}const _ce="NGXS_COMPUTED_OPTION",UV="NGXS_DATA_META",oT="NGXS_META",jV="NGXS_ARGUMENT_REGISTRY_META";function HV(n=vce){return At((e,t)=>{let i=!1;e.subscribe(dt(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function vce(){return new Xf}let zV=(()=>{class n{constructor(t){this.subscription=null,this.sequence$=new wn(0),t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){this.sequence$.next(0),this.subscription?.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}static#e=this.\u0275fac=function(i){return new(i||n)(I(Yr,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function np(n){return n[UV]}let Kr=(()=>{class n{static#e=this.store=null;static#t=this.computed=null;static#n=this.context=null;static#i=this.factory=null;static#r=this.ngZone=null;static#s=this.injector=null;constructor(t,i,r){n.store=t.get(Yr),n.ngZone=t.get(pe),n.factory=i,n.context=r,n.computed=t.get(zV),n.injector=t}static#o=this.\u0275fac=function(i){return new(i||n)(I(ht),I(Z2),I(Q2))};static#a=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();class ti{static#e=this.statesCachedMeta=new Map;constructor(){ti.statesCachedMeta.clear()}static createStateContext(e){return Kr.context.createStateContext(e)}static ensureMappedState(e){if(lr(Kr.factory)||lr(e))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(Di(e.name)?ti.statesCachedMeta.get(e.name):null)||ti.ensureMeta(e)}static getRepositoryByInstance(e){const i=np(ti.getStateClassByInstance(e))??null;if(lr(i))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return i}static getStateClassByInstance(e){return(e??{}).constructor}static clearMetaByInstance(e){const t=ti.getRepositoryByInstance(e);t.stateMeta.actions={},t.operations={}}static createPayload(e,t){const i={},r=Array.from(e);for(const[s,o]of r.entries()){const a=t?.getPayloadTypeByIndex(s);Di(a)&&(i[a]=o)}return Object.keys(i).length>0?i:null}static createAction(e,t,i){const r=ti.createPayload(t,i),s=function wce(n){return class{constructor(t){if(t)for(const i of Object.keys(t))this[i]=t[i]}static get type(){return n}}}(e.type);return new s(r)}static ensureMeta(e){const t=Di(e.name)?Kr.factory.states?.find(i=>i.name===e.name):null;return Di(t)&&Di(e.name)&&ti.statesCachedMeta.set(e.name,t),t}static#t=this.\u0275fac=function(t){return new(t||ti)};static#n=this.\u0275prov=j({token:ti,factory:ti.\u0275fac})}new class Cce{constructor(){this.subject=new Zs(1)}init(){this.subject.next()}onInit(e){this.subject.pipe(function Yo(n,e){const t=arguments.length>=2;return i=>i.pipe(n?vt((r,s)=>n(r,s,i)):ks,qn(1),t?rd(e):HV(()=>new Xf))}()).subscribe(e)}reset(){this.subject.complete(),this.subject=new Zs(1)}};class Tce extends Error{constructor(e){super(`Child states can only be added to an object. Cannot convert ${Di(e?.constructor)?e.constructor.name:e} to PlainObject`)}}function GV(n){return n.NGXS_OPTIONS_META??{name:""}}function WV(n){const e=GV(n),t=e.children??[],r=V2(void 0===e.defaults?{}:e.defaults);if(t.length>0){if(U2(r))return function Sce(n,e){return e.reduce((t,i)=>{const r=GV(i);if(function Yf(n){const e="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(e)}(r.name))throw new Error("State name not provided in class");return t[r.name.toString()]=WV(i),t},n??{})}(r,t);throw new Tce(r)}return r}function $V(){return`__${_ce}__`}function qV(n){return n[$V()]??null}function XV(){return Kr?.computed?.sequenceValue??0}function Ice(n){let e=!1;return Ts(n)&&(e=!0),e}function aT(n){return n[jV]}class Dce extends Error{constructor(e,t){super(`An argument with the name '${e}' already exists in the method '${t}'`)}}class Rce{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(e){return this.payloadMap.get(e)??null}getArgumentNameByIndex(e){return this.argumentMap.get(e)??null}createPayloadType(e,t,i){this.checkDuplicateName(e,t),this.payloadMap.set(i,e),this.payloadMap.set(e,e)}createArgumentName(e,t,i){this.checkDuplicateName(e,t),this.argumentMap.set(i,e),this.argumentMap.set(e,e)}checkDuplicateName(e,t){if(zA(this.argumentMap.has(e))||zA(this.payloadMap.has(e)))throw new Dce(e,t)}}function Lce(n){return{enumerable:!0,configurable:!0,get(){const e=np(n),t=ti.ensureMappedState(e.stateMeta);return ti.createStateContext(t)}}}const zce={dataActionSubscribeRequired:!0},Gce=new F("NGXS_DATA_CONFIG",{providedIn:"root",factory:()=>zce});let Wce=(()=>{class n{constructor(t,i){this.accessor=t,this.injector=i}static forRoot(t=[]){return{ngModule:n,providers:[ti,Kr,zV,...t]}}static#e=this.\u0275fac=function(i){return new(i||n)(I(ti,2),I(Kr,2))};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({})}return n})();function YV(){return(n,e,t)=>{!function Ece(n,e){if(!function joe(n,e){let t=n,i=!1;if(U2(t))for(;null!==t;){if(id(t?.hasOwnProperty(e))){i=!!Object.getOwnPropertyDescriptor(t,e)?.get;break}t=Object.getPrototypeOf(t)}return i}(n,e?.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(n,e);const i=t.get;return t.get=function(...r){const s=function Mce(n){return lr(qV(n))&&Object.defineProperties(n,{[$V()]:{enumerable:!0,configurable:!0,value:new WeakMap}}),qV(n)}(this),o=s?.get(i);if(id(o?.isObservable))return o?.value;if(lr(o)||o.sequenceId!==XV()){s.delete(i);const c=i.apply(this,r);return s.set(i,{value:c,sequenceId:XV(),isObservable:Ice(c)}),c}return o?.value},t}}const $ce={cancelUncompleted:!0,insideZone:!1,subscribeRequired:!0};function Py(n={}){const e=function qce(n){const e=Kr?.injector?.get(Gce,void 0,Ke.Optional),t={...$ce};return Di(e)&&void 0!==e?.dataActionSubscribeRequired&&(t.subscribeRequired=e.dataActionSubscribeRequired),{...t,...n}}(n);return(t,i,r)=>{!function bce(n,e){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(t,r);const s=r.value,o=i.toString();return r.value=function(...a){const c=this;let l=null;const u=ti.getRepositoryByInstance(c),d=u.operations;let h=d[o];const f=u.stateMeta,p=aT(s);if(lr(h)){const _=function Hce(n){return String(n).replaceAll(/\/\/.*$/gm,"").replaceAll(/\s+/g,"").replaceAll(/\/\*[^*/]*\*\//g,"").split("){",1)?.[0]?.replace(/^[^(]*\(/,"").replaceAll(/=[^,]+/g,"").split(",").filter(Boolean)??[]}(s),w=function Ace(n){const{statePath:e,argumentsNames:t,methodName:i,argumentRegistry:r}=n;let s="";for(let o=0;o<t.length;o++)Di(r?.getArgumentNameByIndex(o))?s+=r?.getArgumentNameByIndex(o):Di(r?.getPayloadTypeByIndex(o))?s+=r?.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==t.length-1&&(s+=", ");return`@${e.replaceAll(".","/")}.${i}(${s})`}({statePath:f.path,methodName:o,argumentsNames:_,argumentRegistry:p});h=d[o]={type:w,options:{cancelUncompleted:e.cancelUncompleted??!1}},Di(h)&&(f.actions[h.type]=[{type:h.type,options:h.options,fn:h.type}])}ti.ensureMappedState(f).instance[h.type]=()=>(id(e.insideZone)?Kr.ngZone?.run(()=>{l=s.apply(c,a)}):l=s.apply(c,a),Ts(l)&&id(e.subscribeRequired)?Z(null).pipe(oe(()=>l)):l);const y=ti.createAction(h,a,p),v=Kr.store.dispatch(y);return Ts(l)?function xce(n,e){return Kf([n,e]).pipe(oe(t=>t.pop()))}(v,l):l},r}}function KV(n){return(e,t,i)=>{const r=n.trim();if(!r)throw new Error("Payload name should be initialized");(function Oce(n,e){const t=n[e];return lr(aT(t))&&Object.defineProperties(t,{[jV]:{enumerable:!0,configurable:!0,value:new Rce}}),aT(t)})(e,t).createPayloadType(r,t,i)}}function JV(){return n=>{const e=function jce(n){if(function Doe(n){return!zA(n)}(n.hasOwnProperty(oT))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(n,oT,{value:e})}return function Uce(n){return n?.[oT]}(n)}(n);if(lr(e.name))throw new Error("@StateRepository should be add before decorator @State");!function Fce(n,e){(function Nce(n){const e=np(n)??null;return(lr(e)||e?.stateClass!==n)&&function Pce(n){Object.defineProperty(n,UV,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),np(n)}(n)).stateMeta=e}(n,e),function Yce(n,e,t){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>V2(t)},context:Lce(n)})}(n,e,WV(n)),function Bce(n){const t=np(n)?.stateMeta?.name??null;if(Di(t)){const i=`__${t}__selector`;Object.defineProperties(n.prototype,{[i]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(Di(this[i]))return this[i];if(lr(Kr.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[i]=Kr.store.select(n).pipe(oe(r=>r),Xr({refCount:!0,bufferSize:1})),this[i]}}})}}(n)}}let Kce=(()=>{class n{constructor(){this._dirty=!0,this.browserStorageEvents$=new ue,this.isInitialised=!1,this.isBootstrapped=!1}get dirty(){return this._dirty}set dirty(t){this._dirty=t}ngxsOnChanges(t){this.dirty&&this.isBootstrapped&&(this.dirty=!1,this.ngxsDataDoCheck?.())}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,this.ngxsDataDoCheck?.())}markAsDirtyAfterReset(){this.dirty=!0,this.ngxsDataAfterReset?.()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),ZV=(()=>{class n extends Kce{get snapshot(){return this.getState()}get ctx(){return function Vce(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return{...n,getState:()=>n.getState(),setState(e){n.setState(e)},patchState(e){n.patchState(e)}}}(this.context)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=zt(n)))(r||n)}})();static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return qe([YV()],n.prototype,"snapshot",null),qe([Py(),lA(0,KV("patchValue"))],n.prototype,"patchState",null),qe([Py(),lA(0,KV("stateValue"))],n.prototype,"setState",null),qe([Py()],n.prototype,"reset",null),n})();function QV(...n){const e=n.length;if(0===e)throw new Error("list of properties cannot be empty.");return oe(t=>{let i=t;for(let r=0;r<e;r++){const s=i?.[n[r]];if(!(typeof s<"u"))return;i=s}return i})}let rl=class kg extends ZV{constructor(){super(...arguments),this.optionCache=new Map}get config$(){return this.state$.pipe(function Jce(){return vt(n=>null!=n)}(),Xr(1))}setConfig(e){this.setState(e)}patchConfig(e){this.patchState(e)}getProperty(e){return this.config$.pipe(QV(...e),Jf(),Xr(1))}getOption(...e){const t=this.getPathKey(e);if(this.optionCache.has(t))return this.optionCache.get(t)??Z();const i=this.config$.pipe(QV(...e),Jf(),Xr(1));return this.optionCache.set(t,i),i}getPathKey(e){return`${e.length}:${e.join(".")}`}static#e=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=zt(kg)))(i||kg)}})();static#t=this.\u0275prov=j({token:kg,factory:kg.\u0275fac})};qe([YV(),Q("design:type",me),Q("design:paramtypes",[])],rl.prototype,"config$",null),rl=qe([JV(),sT({name:"globalConfig",defaults:null})],rl);const e3="ALLOW_TELEMETRY",Qce=t3();function t3(){const n=localStorage.getItem(e3);return null===n?void 0:"true"===n.toLowerCase()}let cT=class Lg extends ZV{setAllowTelemetry(e){const t=t3();localStorage.setItem(e3,e.toString()),this.ctx.patchState({allowTelemetry:e}),(void 0!==t||!1===e)&&location.reload()}static#e=this.\u0275fac=(()=>{let e;return function(i){return(e||(e=zt(Lg)))(i||Lg)}})();static#t=this.\u0275prov=j({token:Lg,factory:Lg.\u0275fac})};qe([Py(),Q("design:type",Function),Q("design:paramtypes",[Boolean]),Q("design:returntype",void 0)],cT.prototype,"setAllowTelemetry",null),cT=qe([JV(),sT({name:"tracking",defaults:{allowTelemetry:Qce}})],cT);const ele=["addListener","removeListener"],tle=["addEventListener","removeEventListener"],nle=["on","off"];function ip(n,e,t,i){if(Ve(t)&&(i=t,t=void 0),i)return ip(n,e,t).pipe(Ty(i));const[r,s]=function sle(n){return Ve(n.addEventListener)&&Ve(n.removeEventListener)}(n)?tle.map(o=>a=>n[o](e,a,t)):function ile(n){return Ve(n.addListener)&&Ve(n.removeListener)}(n)?ele.map(n3(n,e)):function rle(n){return Ve(n.on)&&Ve(n.off)}(n)?nle.map(n3(n,e)):[];if(!r&&hA(n))return Mn(o=>ip(o,e,t))(xn(n));if(!r)throw new TypeError("Invalid event target");return new me(o=>{const a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function n3(n,e){return t=>i=>n[t](e,i)}function ld(...n){const e=Hf(n),t=LB(n),{args:i,keys:r}=z2(n);if(0===i.length)return In([],e);const s=new me(function ole(n,e,t=ks){return i=>{r3(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)r3(e,()=>{const l=In(n[c],e);let u=!1;l.subscribe(dt(i,d=>{s[c]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>G2(r,o):ks));return t?s.pipe(Ty(t)):s}function r3(n,e,t){n?Go(t,n,e):e()}function Ny(n){return new me(e=>{xn(n()).subscribe(e)})}function Fy(){return At((n,e)=>{let t=null;n._refCount++;const i=dt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class lT extends me{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,mh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new xt;const t=this.getSubject();e.add(this.source.subscribe(dt(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=xt.EMPTY)}return e}refCount(){return Fy()(this)}}function dT(n){return oe(()=>n)}function sl(n){return At((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function LT(n){return vt((e,t)=>n<=t)}Error;let sU=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ie({type:n,selectors:[["","gaEvent","","gaCategory",""],["","gaCategory",""]],inputs:{gaCategory:"gaCategory"},exportAs:["gaCategory"]}),n})();const bp=new F("ngx-google-analytics-settings",{factory:()=>({trackingCode:"",enableTracing:!1})}),BT=new F("ngx-window",{providedIn:"root",factory:()=>{const{defaultView:n}=P(Xe);if(!n)throw new Error("Window is not available");return n}}),bde=new F("ngx-data-layer",{providedIn:"root",factory:()=>function vde(n){return n?n.dataLayer=n.dataLayer||[]:null}(P(BT))}),oU=new F("ngx-gtag-fn",{providedIn:"root",factory:()=>function Ede(n,e){return n?n.gtag=n.gtag||function(){e.push(arguments)}:null}(P(BT),P(bde))});let _d=(()=>{class n{constructor(t,i,r){this.settings=t,this._document=i,this._gtag=r}get document(){return this._document}throw(t){this.settings.enableTracing&&console&&console.error&&console.error(t)}toKeyValue(t){return t.size>0?Array.from(t).reduce((i,[r,s])=>Object.defineProperty(i,r,{value:s,enumerable:!0}),{}):void 0}gtag(...t){try{this._gtag(...t.filter(i=>void 0!==i))}catch(i){this.throw(i)}}event(t,i,r,s,o,a){try{const c=new Map;i&&c.set("event_category",i),r&&c.set("event_label",r),s&&c.set("value",s),void 0!==o&&c.set("interaction",o),a&&Object.entries(a).map(([u,d])=>c.set(u,d));const l=this.toKeyValue(c);l?this.gtag("event",t,l):this.gtag("event",t)}catch(c){this.throw(c)}}pageView(t,i,r,s){try{const o=new Map([["page_path",t]]);i&&o.set("page_title",i),(r||this.document)&&o.set("page_location",r||this.document.location.href),s&&Object.entries(s).map(([a,c])=>o.set(a,c)),this.gtag("config",this.settings.trackingCode,this.toKeyValue(o))}catch(o){this.throw(o)}}appView(t,i,r,s,o){try{const a=new Map([["screen_name",t],["app_name",i]]);r&&a.set("app_id",r),s&&a.set("app_version",s),o&&a.set("app_installer_id",o),this.gtag("event","screen_view",this.toKeyValue(a))}catch(a){this.throw(a)}}set(...t){try{this._gtag("set",...t)}catch(i){this.throw(i)}}exception(t,i){try{const r=new Map;t&&r.set("description",t),i&&r.set("fatal",i),this.toKeyValue(r)?this.gtag("event","exception",this.toKeyValue(r)):this.gtag("event","exception")}catch(r){this.throw(r)}}}return n.\u0275fac=function(t){return new(t||n)(I(bp),I(Xe),I(oU))},n.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wde=(()=>{class n{constructor(t,i,r,s){this.gaCategoryDirective=t,this.gaService=i,this.settings=r,this.el=s,this.gaBind="click"}set gaBind(t){this.bindSubscription&&this.bindSubscription.unsubscribe(),this._gaBind=t,this.bindSubscription=ip(this.el.nativeElement,t).subscribe(()=>this.trigger())}get gaBind(){return this._gaBind}ngOnDestroy(){this.bindSubscription&&this.bindSubscription.unsubscribe()}trigger(){try{if(!this.gaAction&&!this.gaEvent)throw new Error("You must provide a gaAction attribute to identify this event.");this.gaService.event(this.gaAction||this.gaEvent,this.gaCategoryDirective?this.gaCategoryDirective.gaCategory:void 0,this.gaLabel||this.label,this.gaValue,this.gaInteraction)}catch(t){this.throw(t)}}throw(t){this.settings.enableTracing&&console&&console.warn&&console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)(R(sU,8),R(_d),R(bp),R(gt))},n.\u0275dir=ie({type:n,selectors:[["","gaEvent",""]],inputs:{gaAction:"gaAction",gaLabel:"gaLabel",label:"label",gaValue:"gaValue",gaInteraction:"gaInteraction",gaEvent:"gaEvent",gaBind:"gaBind"},exportAs:["gaEvent"]}),n})();const Ade={provide:$C,multi:!0,useFactory:function Tde(n,e,t){return te(function*(){if(!n.trackingCode)return void console.error("Empty tracking code for Google Analytics. Make sure to provide one when initializing NgxGoogleAnalyticsModule.");if(!e)return void console.error("Was not possible create or read gtag() fn. Make sure this module is running on a Browser w/ access to Window interface.");t||console.error("Was not possible to access Document interface. Make sure this module is running on a Browser w/ access do Document interface."),n.uri=n.uri||`https://www.googletagmanager.com/gtag/js?id=${n.trackingCode}`,n.initCommands=n?.initCommands??[],n.initCommands.find(s=>"config"===s.command)||n.initCommands.unshift({command:"config",values:[n.trackingCode]}),n.initCommands.find(s=>"js"===s.command)||n.initCommands.unshift({command:"js",values:[new Date]});for(const s of n.initCommands)e(s.command,...s.values);const i=t.createElement("script");i.async=!0,i.src=n.uri,n.nonce&&i.setAttribute("nonce",n.nonce),t.getElementsByTagName("head")[0].appendChild(i)})},deps:[bp,oU,Xe]};new F("ngx-google-analytics-routing-settings",{factory:()=>({})});let VT=(()=>{class n{static forRoot(t,i=[],r,s,o){return{ngModule:n,providers:[{provide:bp,useValue:{trackingCode:t,initCommands:i,uri:r,enableTracing:s,nonce:o}},Ade]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=sn({type:n}),n.\u0275inj=Qt({}),n})(),UT=(()=>{class n{constructor(){this.consent="not-set",this.consentChange=new Zs(1),this.consentChange.next(this.consent)}ngOnDestroy(){this.consentChange.complete()}setConsent(t){this.consent!==t&&(this.consent=t,this.consentChange.next(t))}unsetConsent(){this.setConsent("not-set")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Mde=(()=>{class n{constructor(t,i,{trackingCode:r}){this.window=i,this.subscriptions=new xt,this.token=r,this.subscriptions.add(t.consentChange.subscribe(s=>this.toggleGoogleAnalytics("rescinded"===s)))}ngOnDestroy(){this.subscriptions.unsubscribe()}toggleGoogleAnalytics(t){this.window&&(this.window[`ga-disable-${this.token}`]=t)}static#e=this.\u0275fac=function(i){return new(i||n)(I(UT),I(BT),I(bp))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();const Ide=new F("Key under which consent is stored",{providedIn:"root",factory:()=>"ALLOW_TELEMETRY"}),cU=[UT,Mde,(()=>{class n{constructor(t,i){this.key=i,this.subscriptions=new xt;try{this.storage=localStorage}catch{}t.setConsent(this.loadConsent()),this.subscriptions.add(t.consentChange.subscribe(r=>this.saveConsent(r)))}ngOnDestroy(){this.subscriptions.unsubscribe()}loadConsent(){const t=this.storage?.getItem?.(this.key);if(null==t)return"not-set";const i=t.trim().toLowerCase();switch(i){case"given":case"rescinded":return i;default:return"not-set"}}saveConsent(t){this.storage?.setItem?.(this.key,t)}static#e=this.\u0275fac=function(i){return new(i||n)(I(UT),I(Ide))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})()];function Dde(n){return Object.entries(n).reduce((e,[t,i])=>(null!=i&&(e[t]=`${i}`),e),{})}let Ode=(()=>{class n{static forRoot(t){const{providers:i=[]}=VT.forRoot(t.gaToken,function Rde(n){const{appName:e,projectName:t,developmentMode:i}=n;return[{command:"set",values:[Dde({appName:e,projectName:t,developmentMode:i})]}]}(t));return{ngModule:n,providers:i}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({providers:[...cU,{provide:$C,multi:!0,useFactory:()=>()=>{},deps:cU}],imports:[VT]})}return n})(),lU=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();Math,Math;const En={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function Fde(n,{precision:e=En.precision}={}){return n=function Vde(n){return Math.round(n/En.EPSILON)*En.EPSILON}(n),"".concat(parseFloat(n.toPrecision(e)))}function Jo(n){return Array.isArray(n)||ArrayBuffer.isView(n)&&!(n instanceof DataView)}function gi(n,e,t){return function Zo(n,e,t){if(Jo(n)){const i=n;t=t||function Ude(n){return n.clone?n.clone():new Array(n.length)}(i);for(let r=0;r<t.length&&r<i.length;++r)t[r]=e(n[r],r,t);return t}return e(n)}(n,i=>Math.max(e,Math.min(t,i)))}function ev(n,e,t){return Jo(n)?n.map((i,r)=>ev(i,e[r],t)):t*e+(1-t)*n}function yd(n,e,t){const i=En.EPSILON;t&&(En.EPSILON=t);try{if(n===e)return!0;if(Jo(n)&&Jo(e)){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!yd(n[r],e[r]))return!1;return!0}return n&&n.equals?n.equals(e):e&&e.equals?e.equals(n):"number"==typeof n&&"number"==typeof e&&Math.abs(n-e)<=En.EPSILON*Math.max(1,Math.abs(n),Math.abs(e))}finally{En.EPSILON=i}}class jT extends(function jde(n){function e(){var t=Reflect.construct(n,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return e.prototype=Object.create(n.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n,e}(Array)){clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){for(let i=0;i<this.ELEMENTS;++i)this[i]=e[i+t];return this.check()}toArray(e=[],t=0){for(let i=0;i<this.ELEMENTS;++i)e[t+i]=this[i];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:Jo(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(En)}formatString(e){let t="";for(let i=0;i<this.ELEMENTS;++i)t+=(i>0?", ":"")+Fde(this[i],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(t,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(!yd(this[t],e[t]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,t,i){if(void 0===i)return this.lerp(this,e,t);for(let r=0;r<this.ELEMENTS;++r){const s=e[r];this[r]=s+i*(t[r]-s)}return this.check()}min(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.min(e[t],this[t]);return this.check()}max(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=Math.max(e[t],this[t]);return this.check()}clamp(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e[i]),t[i]);return this.check()}add(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]+=t[i];return this.check()}subtract(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]-=t[i];return this.check()}scale(e){if("number"==typeof e)for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;else for(let t=0;t<this.ELEMENTS&&t<e.length;++t)this[t]*=e[t];return this.check()}multiplyByScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}check(){if(En.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let t=0;t<this.ELEMENTS;++t)e=e&&Number.isFinite(this[t]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]=e;return this.check()}addScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let t=0;t<this.ELEMENTS;++t)this[t]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,t){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(Math.max(this[i],e),t);return this.check()}get elements(){return this}}function Bt(n){if(!Number.isFinite(n))throw new Error("Invalid number ".concat(n));return n}function tv(n,e,t=""){if(En.debug&&!function Hde(n,e){if(n.length!==e)return!1;for(let t=0;t<n.length;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n,e))throw new Error("math.gl: ".concat(t," some fields set to invalid numbers'"));return n}class zde extends jT{toString(){let e="[";if(En.printRowMajor){e+="row-major:";for(let t=0;t<this.RANK;++t)for(let i=0;i<this.RANK;++i)e+=" ".concat(this[i*this.RANK+t])}else{e+="column-major:";for(let t=0;t<this.ELEMENTS;++t)e+=" ".concat(this[t])}return e+="]",e}getElementIndex(e,t){return t*this.RANK+e}getElement(e,t){return this[t*this.RANK+e]}setElement(e,t,i){return this[t*this.RANK+e]=Bt(i),this}getColumn(e,t=new Array(this.RANK).fill(-0)){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)t[r]=this[i+r];return t}setColumn(e,t){const i=e*this.RANK;for(let r=0;r<this.RANK;++r)this[i+r]=t[r];return this}}function dU(n,e,t){const i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s||1;return n[0]=(t[0]*i+t[4]*r+t[8]*s)/o,n[1]=(t[1]*i+t[5]*r+t[9]*s)/o,n[2]=(t[2]*i+t[6]*r+t[10]*s)/o,n}var io=1e-6,ur=typeof Float32Array<"u"?Float32Array:Array;function HT(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],g=e[13],m=e[14],y=e[15],v=t*a-i*o,_=t*c-r*o,w=t*l-s*o,A=i*c-r*a,S=i*l-s*a,D=r*l-s*c,x=u*g-d*p,k=u*m-h*p,U=u*y-f*p,V=d*m-h*g,G=d*y-f*g,O=h*y-f*m,L=v*O-_*G+w*V+A*U-S*k+D*x;return L?(n[0]=(a*O-c*G+l*V)*(L=1/L),n[1]=(r*G-i*O-s*V)*L,n[2]=(g*D-m*S+y*A)*L,n[3]=(h*S-d*D-f*A)*L,n[4]=(c*U-o*O-l*k)*L,n[5]=(t*O-r*U+s*k)*L,n[6]=(m*w-p*D-y*_)*L,n[7]=(u*D-h*w+f*_)*L,n[8]=(o*G-a*U+l*x)*L,n[9]=(i*U-t*G-s*x)*L,n[10]=(p*S-g*w+y*v)*L,n[11]=(d*w-u*S-f*v)*L,n[12]=(a*k-o*V-c*x)*L,n[13]=(t*V-i*k+r*x)*L,n[14]=(g*_-p*A-m*v)*L,n[15]=(u*A-d*_+h*v)*L,n):null}function ul(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],c=e[5],l=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],g=e[12],m=e[13],y=e[14],v=e[15],_=t[0],w=t[1],A=t[2],S=t[3];return n[0]=_*i+w*a+A*d+S*g,n[1]=_*r+w*c+A*h+S*m,n[2]=_*s+w*l+A*f+S*y,n[3]=_*o+w*u+A*p+S*v,n[4]=(_=t[4])*i+(w=t[5])*a+(A=t[6])*d+(S=t[7])*g,n[5]=_*r+w*c+A*h+S*m,n[6]=_*s+w*l+A*f+S*y,n[7]=_*o+w*u+A*p+S*v,n[8]=(_=t[8])*i+(w=t[9])*a+(A=t[10])*d+(S=t[11])*g,n[9]=_*r+w*c+A*h+S*m,n[10]=_*s+w*l+A*f+S*y,n[11]=_*o+w*u+A*p+S*v,n[12]=(_=t[12])*i+(w=t[13])*a+(A=t[14])*d+(S=t[15])*g,n[13]=_*r+w*c+A*h+S*m,n[14]=_*s+w*l+A*f+S*y,n[15]=_*o+w*u+A*p+S*v,n}function nv(n,e,t){var o,a,c,l,u,d,h,f,p,g,m,y,i=t[0],r=t[1],s=t[2];return e===n?(n[12]=e[0]*i+e[4]*r+e[8]*s+e[12],n[13]=e[1]*i+e[5]*r+e[9]*s+e[13],n[14]=e[2]*i+e[6]*r+e[10]*s+e[14],n[15]=e[3]*i+e[7]*r+e[11]*s+e[15]):(a=e[1],c=e[2],l=e[3],u=e[4],d=e[5],h=e[6],f=e[7],p=e[8],g=e[9],m=e[10],y=e[11],n[0]=o=e[0],n[1]=a,n[2]=c,n[3]=l,n[4]=u,n[5]=d,n[6]=h,n[7]=f,n[8]=p,n[9]=g,n[10]=m,n[11]=y,n[12]=o*i+u*r+p*s+e[12],n[13]=a*i+d*r+g*s+e[13],n[14]=c*i+h*r+m*s+e[14],n[15]=l*i+f*r+y*s+e[15]),n}function zT(n,e,t){var i=t[0],r=t[1],s=t[2];return n[0]=e[0]*i,n[1]=e[1]*i,n[2]=e[2]*i,n[3]=e[3]*i,n[4]=e[4]*r,n[5]=e[5]*r,n[6]=e[6]*r,n[7]=e[7]*r,n[8]=e[8]*s,n[9]=e[9]*s,n[10]=e[10]*s,n[11]=e[11]*s,n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15],n}function hU(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],u=e[9],d=e[10],h=e[11];return e!==n&&(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[4]=s*r+l*i,n[5]=o*r+u*i,n[6]=a*r+d*i,n[7]=c*r+h*i,n[8]=l*r-s*i,n[9]=u*r-o*i,n[10]=d*r-a*i,n[11]=h*r-c*i,n}function fU(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],c=e[3],l=e[4],u=e[5],d=e[6],h=e[7];return e!==n&&(n[8]=e[8],n[9]=e[9],n[10]=e[10],n[11]=e[11],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r+l*i,n[1]=o*r+u*i,n[2]=a*r+d*i,n[3]=c*r+h*i,n[4]=l*r-s*i,n[5]=u*r-o*i,n[6]=d*r-a*i,n[7]=h*r-c*i,n}Math,Math,Math.hypot||(Math.hypot=function(){for(var n=0,e=arguments.length;e--;)n+=arguments[e]*arguments[e];return Math.sqrt(n)});function iv(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function pU(n,e){return n[0]=-e[0],n[1]=-e[1],n}function gU(n,e,t,i){var r=e[0],s=e[1];return n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n}function mU(){var n=new ur(3);return ur!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function _U(n,e,t){var i=new ur(3);return i[0]=n,i[1]=e,i[2]=t,i}function yU(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]}function rv(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],c=t[2];return n[0]=r*c-s*a,n[1]=s*o-i*c,n[2]=i*a-r*o,n}function GT(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[3]*i+t[7]*r+t[11]*s+t[15];return n[0]=(t[0]*i+t[4]*r+t[8]*s+t[12])/(o=o||1),n[1]=(t[1]*i+t[5]*r+t[9]*s+t[13])/o,n[2]=(t[2]*i+t[6]*r+t[10]*s+t[14])/o,n}function vU(n,e,t){var i=t[0],r=t[1],s=t[2],a=e[0],c=e[1],l=e[2],u=r*l-s*c,d=s*a-i*l,h=i*c-r*a,f=r*h-s*d,p=s*u-i*h,g=i*d-r*u,m=2*t[3];return d*=m,h*=m,p*=2,g*=2,n[0]=a+(u*=m)+(f*=2),n[1]=c+d+p,n[2]=l+h+g,n}(function lhe(){var n=new ur(2);ur!=Float32Array&&(n[0]=0,n[1]=0)})();function bU(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n[2]=e[2]*t,n[3]=e[3]*t,n}function Ep(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3];return n[0]=t[0]*i+t[4]*r+t[8]*s+t[12]*o,n[1]=t[1]*i+t[5]*r+t[9]*s+t[13]*o,n[2]=t[2]*i+t[6]*r+t[10]*s+t[14]*o,n[3]=t[3]*i+t[7]*r+t[11]*s+t[15]*o,n}mU(),function whe(){var n=new ur(4);ur!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0)}();var EU=function(n){return n[n.COL0ROW0=0]="COL0ROW0",n[n.COL0ROW1=1]="COL0ROW1",n[n.COL0ROW2=2]="COL0ROW2",n[n.COL0ROW3=3]="COL0ROW3",n[n.COL1ROW0=4]="COL1ROW0",n[n.COL1ROW1=5]="COL1ROW1",n[n.COL1ROW2=6]="COL1ROW2",n[n.COL1ROW3=7]="COL1ROW3",n[n.COL2ROW0=8]="COL2ROW0",n[n.COL2ROW1=9]="COL2ROW1",n[n.COL2ROW2=10]="COL2ROW2",n[n.COL2ROW3=11]="COL2ROW3",n[n.COL3ROW0=12]="COL3ROW0",n[n.COL3ROW1=13]="COL3ROW1",n[n.COL3ROW2=14]="COL3ROW2",n[n.COL3ROW3=15]="COL3ROW3",n}(EU||{});const khe=45*Math.PI/180,Lhe=1,WT=.1,$T=500,Bhe=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Be extends zde{static get IDENTITY(){return function Uhe(){return ov||(ov=new Be,Object.freeze(ov)),ov}()}static get ZERO(){return function Vhe(){return sv||(sv=new Be([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(sv)),sv}()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return EU}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,t,i,r,s,o,a,c,l,u,d,h,f,p,g,m){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this[4]=s,this[5]=o,this[6]=a,this[7]=c,this[8]=l,this[9]=u,this[10]=d,this[11]=h,this[12]=f,this[13]=p,this[14]=g,this[15]=m,this.check()}setRowMajor(e,t,i,r,s,o,a,c,l,u,d,h,f,p,g,m){return this[0]=e,this[1]=s,this[2]=l,this[3]=f,this[4]=t,this[5]=o,this[6]=u,this[7]=p,this[8]=i,this[9]=a,this[10]=d,this[11]=g,this[12]=r,this[13]=c,this[14]=h,this[15]=m,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(Bhe)}fromObject(e){return this.check()}fromQuaternion(e){return function nhe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t+t,a=i+i,c=r+r,l=t*o,u=i*o,d=i*a,h=r*o,f=r*a,p=r*c,g=s*o,m=s*a,y=s*c;n[0]=1-d-p,n[1]=u+y,n[2]=h-m,n[3]=0,n[4]=u-y,n[5]=1-l-p,n[6]=f+g,n[7]=0,n[8]=h+m,n[9]=f-g,n[10]=1-l-d,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(this,e),this.check()}frustum(e){const{left:t,right:i,bottom:r,top:s,near:o=WT,far:a=$T}=e;return a===1/0?function jhe(n,e,t,i,r,s){const a=2*s/(r-i),c=(t+e)/(t-e),l=(r+i)/(r-i),h=-2*s;n[0]=2*s/(t-e),n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=0,n[7]=0,n[8]=c,n[9]=l,n[10]=-1,n[11]=-1,n[12]=0,n[13]=0,n[14]=h,n[15]=0}(this,t,i,r,s,o):function ihe(n,e,t,i,r,s,o){var a=1/(t-e),c=1/(r-i),l=1/(s-o);n[0]=2*s*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*s*c,n[6]=0,n[7]=0,n[8]=(t+e)*a,n[9]=(r+i)*c,n[10]=(o+s)*l,n[11]=-1,n[12]=0,n[13]=0,n[14]=o*s*2*l,n[15]=0}(this,t,i,r,s,o,a),this.check()}lookAt(e){const{eye:t,center:i=[0,0,0],up:r=[0,1,0]}=e;return function che(n,e,t,i){var r,s,o,a,c,l,u,d,h,f,p=e[0],g=e[1],m=e[2],y=i[0],v=i[1],_=i[2],w=t[0],A=t[1],S=t[2];Math.abs(p-w)<io&&Math.abs(g-A)<io&&Math.abs(m-S)<io?function Yde(n){n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1}(n):(u=p-w,d=g-A,h=m-S,r=v*(h*=f=1/Math.hypot(u,d,h))-_*(d*=f),s=_*(u*=f)-y*h,o=y*d-v*u,(f=Math.hypot(r,s,o))?(r*=f=1/f,s*=f,o*=f):(r=0,s=0,o=0),a=d*o-h*s,c=h*r-u*o,l=u*s-d*r,(f=Math.hypot(a,c,l))?(a*=f=1/f,c*=f,l*=f):(a=0,c=0,l=0),n[0]=r,n[1]=a,n[2]=u,n[3]=0,n[4]=s,n[5]=c,n[6]=d,n[7]=0,n[8]=o,n[9]=l,n[10]=h,n[11]=0,n[12]=-(r*p+s*g+o*m),n[13]=-(a*p+c*g+l*m),n[14]=-(u*p+d*g+h*m),n[15]=1)}(this,t,i,r),this.check()}ortho(e){const{left:t,right:i,bottom:r,top:s,near:o=WT,far:a=$T}=e;return function ohe(n,e,t,i,r,s,o){var a=1/(e-t),c=1/(i-r),l=1/(s-o);n[0]=-2*a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*c,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*l,n[11]=0,n[12]=(e+t)*a,n[13]=(r+i)*c,n[14]=(o+s)*l,n[15]=1}(this,t,i,r,s,o,a),this.check()}orthographic(e){const{fovy:t=khe,aspect:i=Lhe,focalDistance:r=1,near:s=WT,far:o=$T}=e;wU(t);const c=r*Math.tan(t/2),l=c*i;return this.ortho({left:-l,right:l,bottom:-c,top:c,near:s,far:o})}perspective(e){const{fovy:t=45*Math.PI/180,aspect:i=1,near:r=.1,far:s=500}=e;return wU(t),function rhe(n,e,t,i,r){var o,s=1/Math.tan(e/2);n[0]=s/t,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=r&&r!==1/0?(n[10]=(r+i)*(o=1/(i-r)),n[14]=2*r*i*o):(n[10]=-1,n[14]=-2*i)}(this,t,i,r,s),this.check()}determinant(){return function Jde(n){var e=n[0],t=n[1],i=n[2],r=n[3],s=n[4],o=n[5],a=n[6],c=n[7],l=n[8],u=n[9],d=n[10],h=n[11],f=n[12],p=n[13],g=n[14],m=n[15];return(e*o-t*s)*(d*m-h*g)-(e*a-i*s)*(u*m-h*p)+(e*c-r*s)*(u*g-d*p)+(t*a-i*o)*(l*m-h*f)-(t*c-r*o)*(l*g-d*f)+(i*c-r*a)*(l*p-u*f)}(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,t){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0];const i=this.getScale(t=t||[-0,-0,-0]),r=1/i[0],s=1/i[1],o=1/i[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return function Kde(n,e){if(n===e){var t=e[1],i=e[2],r=e[3],s=e[6],o=e[7],a=e[11];n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=t,n[6]=e[9],n[7]=e[13],n[8]=i,n[9]=s,n[11]=e[14],n[12]=r,n[13]=o,n[14]=a}else n[0]=e[0],n[1]=e[4],n[2]=e[8],n[3]=e[12],n[4]=e[1],n[5]=e[5],n[6]=e[9],n[7]=e[13],n[8]=e[2],n[9]=e[6],n[10]=e[10],n[11]=e[14],n[12]=e[3],n[13]=e[7],n[14]=e[11],n[15]=e[15]}(this,this),this.check()}invert(){return HT(this,this),this.check()}multiplyLeft(e){return ul(this,e,this),this.check()}multiplyRight(e){return ul(this,this,e),this.check()}rotateX(e){return hU(this,this,e),this.check()}rotateY(e){return function Qde(n,e,t){var i=Math.sin(t),r=Math.cos(t),s=e[0],o=e[1],a=e[2],c=e[3],l=e[8],u=e[9],d=e[10],h=e[11];e!==n&&(n[4]=e[4],n[5]=e[5],n[6]=e[6],n[7]=e[7],n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]),n[0]=s*r-l*i,n[1]=o*r-u*i,n[2]=a*r-d*i,n[3]=c*r-h*i,n[8]=s*i+l*r,n[9]=o*i+u*r,n[10]=a*i+d*r,n[11]=c*i+h*r}(this,this,e),this.check()}rotateZ(e){return fU(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,t){return function Zde(n,e,t,i){var c,l,u,d,h,f,p,g,m,y,v,_,w,A,S,D,x,k,U,V,G,O,L,$,r=i[0],s=i[1],o=i[2],a=Math.hypot(r,s,o);a<io||(r*=a=1/a,s*=a,o*=a,c=Math.sin(t),l=Math.cos(t),h=e[1],f=e[2],p=e[3],m=e[5],y=e[6],v=e[7],w=e[9],A=e[10],S=e[11],U=r*s*(u=1-l)-o*c,V=s*s*u+l,G=o*s*u+r*c,O=r*o*u+s*c,L=s*o*u-r*c,$=o*o*u+l,n[0]=(d=e[0])*(D=r*r*u+l)+(g=e[4])*(x=s*r*u+o*c)+(_=e[8])*(k=o*r*u-s*c),n[1]=h*D+m*x+w*k,n[2]=f*D+y*x+A*k,n[3]=p*D+v*x+S*k,n[4]=d*U+g*V+_*G,n[5]=h*U+m*V+w*G,n[6]=f*U+y*V+A*G,n[7]=p*U+v*V+S*G,n[8]=d*O+g*L+_*$,n[9]=h*O+m*L+w*$,n[10]=f*O+y*L+A*$,n[11]=p*O+v*L+S*$,e!==n&&(n[12]=e[12],n[13]=e[13],n[14]=e[14],n[15]=e[15]))}(this,this,e,t),this.check()}scale(e){return zT(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return nv(this,this,e),this.check()}transform(e,t){return 4===e.length?(tv(t=Ep(t||[-0,-0,-0,-0],e,this),4),t):this.transformAsPoint(e,t)}transformAsPoint(e,t){const{length:i}=e;let r;switch(i){case 2:r=function uhe(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[4]*r+t[12],n[1]=t[1]*i+t[5]*r+t[13],n}(t||[-0,-0],e,this);break;case 3:r=GT(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return tv(r,e.length),r}transformAsVector(e,t){let i;switch(e.length){case 2:i=function Gde(n,e,t){const i=e[0],r=e[1],s=t[3]*i+t[7]*r||1;return n[0]=(t[0]*i+t[4]*r)/s,n[1]=(t[1]*i+t[5]*r)/s,n}(t||[-0,-0],e,this);break;case 3:i=dU(t||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return tv(i,e.length),i}transformPoint(e,t){return this.transformAsPoint(e,t)}transformVector(e,t){return this.transformAsPoint(e,t)}transformDirection(e,t){return this.transformAsVector(e,t)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,t,i){return this.identity().translate([e,t,i])}}let sv,ov;function wU(n){if(n>2*Math.PI)throw Error("expected radians")}class Hhe extends xt{constructor(e,t){super()}schedule(e,t=0){return this}}const av={setInterval(n,e,...t){const{delegate:i}=av;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=av;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class qT extends Hhe{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return av.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&av.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Wl(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}class wp{constructor(e,t=wp.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}wp.now=oA.now;class XT extends wp{constructor(e,t=wp.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const cv=new XT(qT),zhe=cv;function Cp(n,e=cv){return At((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const l=s;s=null,i.next(l)}};function c(){const l=o+n,u=e.now();if(u<l)return r=this.schedule(void 0,l-u),void i.add(r);a()}t.subscribe(dt(i,l=>{s=l,o=e.now(),r||(r=e.schedule(c,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function CU(){return At((n,e)=>{n.subscribe(dt(e,Ac))})}function AU(n,e){return e?t=>sd(e.pipe(qn(1),CU()),t.pipe(AU(n))):Mn((t,i)=>xn(n(t,i)).pipe(qn(1),dT(t)))}function lv(n=0,e,t=zhe){let i=-1;return null!=e&&(kB(e)?t=e:i=e),new me(r=>{let s=function Ghe(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function TU(n,e=cv){const t=lv(n,e);return AU(()=>t)}const Xhe={connector:()=>new ue};function Jhe(n,e,t,i){t&&!Ve(t)&&(i=t);const r=Ve(t)?t:void 0;return s=>function Khe(n,e){const t=Ve(n)?n:()=>n;return Ve(e)?function Yhe(n,e=Xhe){const{connector:t}=e;return At((i,r)=>{const s=t();xn(n(function qhe(n){return new me(e=>n.subscribe(e))}(s))).subscribe(r),r.add(i.subscribe(s))})}(e,{connector:t}):i=>new lT(i,t)}(new Zs(n,e,i),r)(s)}class Zhe{}const efe=(n,e)=>JSON.stringify(n)===JSON.stringify(e),tfe=n=>n.map(e=>void 0!==e?JSON.parse(JSON.stringify(e)):e),Is={storageStrategy:class Qhe extends Zhe{constructor(){super(...arguments),this.cachePairs=[]}add(e,t,i){this.cachePairs.push(e)}addMany(e){this.cachePairs=e}updateAtIndex(e,t){Object.assign(this.cachePairs[e],t)}update(e,t){Object.assign(this.cachePairs[e],t)}getAll(){return this.cachePairs}removeAtIndex(e){this.cachePairs.splice(e,1)}remove(e){this.cachePairs.splice(e,1)}removeAll(){this.cachePairs.length=0}},globalCacheKey:"CACHE_STORAGE",promiseImplementation:Promise},nfe=new ue;function Ir(n={}){return function(e,t,i){const r=n.cacheKey||e.constructor.name+"#"+t,s=i.value;if(i&&i.value){let o=n.storageStrategy?new n.storageStrategy:new Is.storageStrategy;const a=[];n.cacheModifier&&n.cacheModifier.subscribe(u=>o.addMany(u(o.getAll(r,this)),r,this)),Qc(nfe.asObservable(),n.cacheBusterObserver?n.cacheBusterObserver:function gie(n){return n?function mie(n){return new me(e=>n.schedule(()=>e.complete()))}(n):cr}()).subscribe(u=>{o.removeAll(r,this),a.length=0}),n.cacheResolver=n.cacheResolver||Is.cacheResolver||efe,n.cacheHasher=n.cacheHasher||Is.cacheHasher||tfe,i.value=function(...u){const d=o.getAll(r,this);let h=n.cacheHasher(u),f=d.find(g=>n.cacheResolver(g.parameters,h));const p=a.find(g=>n.cacheResolver(g.parameters,h));if((n.maxAge||Is.maxAge)&&f&&f.created&&((new Date).getTime()-new Date(f.created).getTime()>(n.maxAge||Is.maxAge)?(o.remove?o.remove(d.indexOf(f),f,r,this):o.removeAtIndex(d.indexOf(f),r,this),f=null):(n.slidingExpiration||Is.slidingExpiration)&&(f.created=new Date,o.update?o.update(d.indexOf(f),f,r,this):o.updateAtIndex(d.indexOf(f),f,r,this))),f){const g=Z(f.response);return n.async?g.pipe(TU(0)):g}if(p)return p.response;{const g=s.call(this,...u).pipe(sl(()=>{const m=a.find(y=>n.cacheResolver(y.parameters,h));a.splice(a.indexOf(m),1)}),bt(m=>{(!n.shouldCacheDecider||n.shouldCacheDecider(m))&&((!(n.maxCacheCount||Is.maxCacheCount)||1===(n.maxCacheCount||Is.maxCacheCount)||(n.maxCacheCount||Is.maxCacheCount)&&(n.maxCacheCount||Is.maxCacheCount)<d.length+1)&&(o.remove?o.remove(0,d[0],r,this):o.removeAtIndex(0,r,this)),o.add({parameters:h,response:m,created:n.maxAge||Is.maxAge?new Date:null},r,this))}),Jhe(1),Fy());return a.push({parameters:h,response:g,created:new Date}),g}}}return i}}class uv{}class dv{}class Xi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Xi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Xi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Xi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class ife{encodeKey(e){return SU(e)}encodeValue(e){return SU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const sfe=/%(\d[a-f0-9])/gi,ofe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function SU(n){return encodeURIComponent(n).replace(sfe,(e,t)=>ofe[t]??e)}function hv(n){return`${n}`}class nt{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ife,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function rfe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(hv):[hv(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new nt({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(hv(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(hv(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Ye{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function xU(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function MU(n){return typeof Blob<"u"&&n instanceof Blob}function IU(n){return typeof FormData<"u"&&n instanceof FormData}class Ap{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function afe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Xi,this.context??=new Ye,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new nt,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||xU(this.body)||MU(this.body)||IU(this.body)||function cfe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof nt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||IU(this.body)?null:MU(this.body)?this.body.type||null:xU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof nt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress;let l=e.headers||this.headers,u=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new Ap(t,i,o,{params:u,headers:l,context:d,reportProgress:c,responseType:r,withCredentials:a,transferCache:s})}}var qa=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(qa||{});class KT{constructor(e,t=200,i="OK"){this.headers=e.headers||new Xi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class fv extends KT{constructor(e={}){super(e),this.type=qa.ResponseHeader}clone(e={}){return new fv({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class dl extends KT{constructor(e={}){super(e),this.type=qa.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new dl({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class vd extends KT{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function JT(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let Ds=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Ap)s=t;else{let c,l;c=r.headers instanceof Xi?r.headers:new Xi(r.headers),r.params&&(l=r.params instanceof nt?r.params:new nt({fromObject:r.params})),s=new Ap(t,i,void 0!==r.body?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}const o=Z(s).pipe(function rp(n,e){return Ve(e)?Mn(n,e,1):Mn(n,1)}(c=>this.handler.handle(c)));if(t instanceof Ap||"events"===r.observe)return o;const a=o.pipe(vt(c=>c instanceof dl));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(oe(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(oe(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(oe(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return a.pipe(oe(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new nt).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,JT(r,i))}post(t,i,r={}){return this.request("POST",t,JT(r,i))}put(t,i,r={}){return this.request("PUT",t,JT(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(I(uv))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();const dfe=/^\)\]\}',?\n/;function RU(n){if(n.url)return n.url;const e="X-Request-URL".toLocaleLowerCase();return n.headers.get(e)}let ZT=(()=>{class n{constructor(){this.fetchImpl=P(ffe,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=P(pe)}handle(t){return new me(i=>{const r=new AbortController;return this.doRequest(t,r.signal,i).then(QT,s=>i.error(new vd({error:s}))),()=>r.abort()})}doRequest(t,i,r){var s=this;return te(function*(){const o=s.createRequestInit(t);let a;try{const p=s.ngZone.runOutsideAngular(()=>s.fetchImpl(t.urlWithParams,{signal:i,...o}));(function pfe(n){n.then(QT,QT)})(p),r.next({type:qa.Sent}),a=yield p}catch(p){return void r.error(new vd({error:p,status:p.status??0,statusText:p.statusText,url:t.urlWithParams,headers:p.headers}))}const c=new Xi(a.headers),l=a.statusText,u=RU(a)??t.urlWithParams;let d=a.status,h=null;if(t.reportProgress&&r.next(new fv({headers:c,status:d,statusText:l,url:u})),a.body){const p=a.headers.get("content-length"),g=[],m=a.body.getReader();let v,_,y=0;const w=typeof Zone<"u"&&Zone.current;yield s.ngZone.runOutsideAngular(te(function*(){for(;;){const{done:S,value:D}=yield m.read();if(S)break;if(g.push(D),y+=D.length,t.reportProgress){_="text"===t.responseType?(_??"")+(v??=new TextDecoder).decode(D,{stream:!0}):void 0;const x=()=>r.next({type:qa.DownloadProgress,total:p?+p:void 0,loaded:y,partialText:_});w?w.run(x):x()}}}));const A=s.concatChunks(g,y);try{const S=a.headers.get("Content-Type")??"";h=s.parseBody(t,A,S)}catch(S){return void r.error(new vd({error:S,headers:new Xi(a.headers),status:a.status,statusText:a.statusText,url:RU(a)??t.urlWithParams}))}}0===d&&(d=h?200:0),d>=200&&d<300?(r.next(new dl({body:h,headers:c,status:d,statusText:l,url:u})),r.complete()):r.error(new vd({error:h,headers:c,status:d,statusText:l,url:u}))})()}parseBody(t,i,r){switch(t.responseType){case"json":const s=(new TextDecoder).decode(i).replace(dfe,"");return""===s?null:JSON.parse(s);case"text":return(new TextDecoder).decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){const i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((s,o)=>i[s]=o.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){const s=t.detectContentTypeHeader();null!==s&&(i["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){const r=new Uint8Array(i);let s=0;for(const o of t)r.set(o,s),s+=o.length;return r}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();class ffe{}function QT(){}function OU(n,e){return e(n)}function gfe(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const _fe=new F(""),Tp=new F(""),PU=new F(""),NU=new F("",{providedIn:"root",factory:()=>!0});function yfe(){let n=null;return(e,t)=>{null===n&&(n=(P(_fe,{optional:!0})??[]).reduceRight(gfe,OU));const i=P(Bo);if(P(NU)){const s=i.add();return n(e,t).pipe(sl(()=>i.remove(s)))}return n(e,t)}}let FU=(()=>{class n extends uv{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=P(Bo),this.contributeToStability=P(NU)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Tp),...this.injector.get(PU,[])]));this.chain=i.reduceRight((r,s)=>function mfe(n,e,t){return(i,r)=>Bs(t,()=>e(i,s=>n(s,r)))}(r,s,this.injector),OU)}if(this.contributeToStability){const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(sl(()=>this.pendingTasks.remove(i)))}return this.chain(t,i=>this.backend.handle(i))}static#e=this.\u0275fac=function(i){return new(i||n)(I(dv),I(Si))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();const Cfe=/^\)\]\}',?\n/;let LU=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new H(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?In(i.\u0275loadImpl()):Z(null)).pipe(nn(()=>new me(s=>{const o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((g,m)=>o.setRequestHeader(g,m.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&o.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();o.responseType="json"!==g?g:"text"}const a=t.serializeBody();let c=null;const l=()=>{if(null!==c)return c;const g=o.statusText||"OK",m=new Xi(o.getAllResponseHeaders()),y=function Afe(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return c=new fv({headers:m,status:o.status,statusText:g,url:y}),c},u=()=>{let{headers:g,status:m,statusText:y,url:v}=l(),_=null;204!==m&&(_=typeof o.response>"u"?o.responseText:o.response),0===m&&(m=_?200:0);let w=m>=200&&m<300;if("json"===t.responseType&&"string"==typeof _){const A=_;_=_.replace(Cfe,"");try{_=""!==_?JSON.parse(_):null}catch(S){_=A,w&&(w=!1,_={error:S,text:_})}}w?(s.next(new dl({body:_,headers:g,status:m,statusText:y,url:v||void 0})),s.complete()):s.error(new vd({error:_,headers:g,status:m,statusText:y,url:v||void 0}))},d=g=>{const{url:m}=l(),y=new vd({error:g,status:o.status||0,statusText:o.statusText||"Unknown Error",url:m||void 0});s.error(y)};let h=!1;const f=g=>{h||(s.next(l()),h=!0);let m={type:qa.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),"text"===t.responseType&&o.responseText&&(m.partialText=o.responseText),s.next(m)},p=g=>{let m={type:qa.UploadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),s.next(m)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",f),null!==a&&o.upload&&o.upload.addEventListener("progress",p)),o.send(a),s.next({type:qa.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",f),null!==a&&o.upload&&o.upload.removeEventListener("progress",p)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(I(l2))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();const eS=new F(""),BU=new F("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),VU=new F("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class UU{}let xfe=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=e2(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(I(Xe),I(zr),I(BU))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function Mfe(n,e){const t=n.url.toLowerCase();if(!P(eS)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=P(UU).getToken(),r=P(VU);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var Xa=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(Xa||{});function Ife(...n){const e=[Ds,LU,FU,{provide:uv,useExisting:FU},{provide:dv,useFactory:()=>P(ZT,{optional:!0})??P(LU)},{provide:Tp,useValue:Mfe,multi:!0},{provide:eS,useValue:!0},{provide:UU,useClass:xfe}];for(const t of n)e.push(...t.\u0275providers);return function Mh(n){return{\u0275providers:n}}(e)}const jU=new F("");function Dfe(){return function hl(n,e){return{\u0275kind:n,\u0275providers:e}}(Xa.LegacyInterceptors,[{provide:jU,useFactory:yfe},{provide:Tp,useExisting:jU,multi:!0}])}class tS{encodeKey(e){return encodeURIComponent(e)}encodeValue(e){return encodeURIComponent(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const nS=new F("basePath");class Ya{apiKeys;username;password;accessToken;basePath;withCredentials;encoder;encodeParam;credentials;constructor(e={}){this.apiKeys=e.apiKeys,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.withCredentials=e.withCredentials,this.encoder=e.encoder,this.encodeParam=e.encodeParam?e.encodeParam:t=>this.defaultEncodeParam(t),this.credentials=e.credentials?e.credentials:{}}selectHeaderContentType(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}selectHeaderAccept(e){if(0===e.length)return;const t=e.find(i=>this.isJsonMime(i));return void 0===t?e[0]:t}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ \t]+/[^;/ \t]+[+]json)[ \t]*(;.*)?$","i");return null!==e&&(t.test(e)||"application/json-patch+json"===e.toLowerCase())}lookupCredential(e){const t=this.credentials[e];return"function"==typeof t?t():t}defaultEncodeParam(e){const t="date-time"===e.dataFormat&&e.value instanceof Date?e.value.toISOString():e.value;return encodeURIComponent(String(t))}}let YU=(()=>{class n{httpClient;basePath="https://apps.humanatlas.io/api";defaultHeaders=new Xi;configuration=new Ya;encoder;constructor(t,i,r){this.httpClient=t,r&&(this.configuration=r),"string"!=typeof this.configuration.basePath&&("string"!=typeof i&&(i=this.basePath),this.configuration.basePath=i),this.encoder=this.configuration.encoder||new tS}addToHttpParams(t,i,r){return this.addToHttpParamsRecursive(t,i,r)}addToHttpParamsRecursive(t,i,r){if(null==i)return t;if("object"==typeof i)if(Array.isArray(i))i.forEach(s=>t=this.addToHttpParamsRecursive(t,s,r));else if(i instanceof Date){if(null==r)throw Error("key may not be null if value is Date");t=t.append(r,i.toISOString().substr(0,10))}else Object.keys(i).forEach(s=>t=this.addToHttpParamsRecursive(t,i[s],null!=r?`${r}.${s}`:s));else{if(null==r)throw Error("key may not be null if value is not object or array");t=t.append(r,i)}return t}aggregateResults(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,d=t.ontologyTerms,h=t.cellTypeTerms,f=t.consortiums,p=t.providers,g=t.sex,m=t.spatial,y=t.technologies,v=t.token;let _=new nt({encoder:this.encoder});null!=o&&(_=this.addToHttpParams(_,o,"age")),null!=a&&(_=this.addToHttpParams(_,a,"age-range")),null!=c&&(_=this.addToHttpParams(_,c,"bmi")),null!=l&&(_=this.addToHttpParams(_,l,"bmi-range")),null!=u&&(_=this.addToHttpParams(_,u,"cache")),d&&d.forEach(x=>{_=this.addToHttpParams(_,x,"ontology-terms")}),h&&h.forEach(x=>{_=this.addToHttpParams(_,x,"cell-type-terms")}),f&&f.forEach(x=>{_=this.addToHttpParams(_,x,"consortiums")}),p&&p.forEach(x=>{_=this.addToHttpParams(_,x,"providers")}),null!=g&&(_=this.addToHttpParams(_,g,"sex")),m&&m.forEach(x=>{_=this.addToHttpParams(_,x,"spatial")}),y&&y.forEach(x=>{_=this.addToHttpParams(_,x,"technologies")}),null!=v&&(_=this.addToHttpParams(_,v,"token"));let w=this.defaultHeaders,A=s&&s.httpHeaderAccept;void 0===A&&(A=this.configuration.selectHeaderAccept(["application/json"])),void 0!==A&&(w=w.set("Accept",A));let S=s&&s.context;void 0===S&&(S=new Ye);let D="json";return A&&(D=A.startsWith("text")?"text":this.configuration.isJsonMime(A)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/aggregate-results`,{context:S,params:_,responseType:D,withCredentials:this.configuration.withCredentials,headers:w,observe:i,reportProgress:r})}anatomicalSystemsTreeModel(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new nt({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let d=s&&s.context;void 0===d&&(d=new Ye);let h="json";return u&&(h=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/anatomical-systems-tree-model`,{context:d,params:c,responseType:h,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}biomarkerTermOccurences(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,d=t.ontologyTerms,h=t.cellTypeTerms,f=t.consortiums,p=t.providers,g=t.sex,m=t.spatial,y=t.technologies,v=t.token;let _=new nt({encoder:this.encoder});null!=o&&(_=this.addToHttpParams(_,o,"age")),null!=a&&(_=this.addToHttpParams(_,a,"age-range")),null!=c&&(_=this.addToHttpParams(_,c,"bmi")),null!=l&&(_=this.addToHttpParams(_,l,"bmi-range")),null!=u&&(_=this.addToHttpParams(_,u,"cache")),d&&d.forEach(x=>{_=this.addToHttpParams(_,x,"ontology-terms")}),h&&h.forEach(x=>{_=this.addToHttpParams(_,x,"cell-type-terms")}),f&&f.forEach(x=>{_=this.addToHttpParams(_,x,"consortiums")}),p&&p.forEach(x=>{_=this.addToHttpParams(_,x,"providers")}),null!=g&&(_=this.addToHttpParams(_,g,"sex")),m&&m.forEach(x=>{_=this.addToHttpParams(_,x,"spatial")}),y&&y.forEach(x=>{_=this.addToHttpParams(_,x,"technologies")}),null!=v&&(_=this.addToHttpParams(_,v,"token"));let w=this.defaultHeaders,A=s&&s.httpHeaderAccept;void 0===A&&(A=this.configuration.selectHeaderAccept(["application/json"])),void 0!==A&&(w=w.set("Accept",A));let S=s&&s.context;void 0===S&&(S=new Ye);let D="json";return A&&(D=A.startsWith("text")?"text":this.configuration.isJsonMime(A)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/biomarker-term-occurences`,{context:S,params:_,responseType:D,withCredentials:this.configuration.withCredentials,headers:w,observe:i,reportProgress:r})}biomarkerTreeModel(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new nt({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let d=s&&s.context;void 0===d&&(d=new Ye);let h="json";return u&&(h=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/biomarker-tree-model`,{context:d,params:c,responseType:h,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}cellTypeTermOccurences(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,d=t.ontologyTerms,h=t.cellTypeTerms,f=t.consortiums,p=t.providers,g=t.sex,m=t.spatial,y=t.technologies,v=t.token;let _=new nt({encoder:this.encoder});null!=o&&(_=this.addToHttpParams(_,o,"age")),null!=a&&(_=this.addToHttpParams(_,a,"age-range")),null!=c&&(_=this.addToHttpParams(_,c,"bmi")),null!=l&&(_=this.addToHttpParams(_,l,"bmi-range")),null!=u&&(_=this.addToHttpParams(_,u,"cache")),d&&d.forEach(x=>{_=this.addToHttpParams(_,x,"ontology-terms")}),h&&h.forEach(x=>{_=this.addToHttpParams(_,x,"cell-type-terms")}),f&&f.forEach(x=>{_=this.addToHttpParams(_,x,"consortiums")}),p&&p.forEach(x=>{_=this.addToHttpParams(_,x,"providers")}),null!=g&&(_=this.addToHttpParams(_,g,"sex")),m&&m.forEach(x=>{_=this.addToHttpParams(_,x,"spatial")}),y&&y.forEach(x=>{_=this.addToHttpParams(_,x,"technologies")}),null!=v&&(_=this.addToHttpParams(_,v,"token"));let w=this.defaultHeaders,A=s&&s.httpHeaderAccept;void 0===A&&(A=this.configuration.selectHeaderAccept(["application/json"])),void 0!==A&&(w=w.set("Accept",A));let S=s&&s.context;void 0===S&&(S=new Ye);let D="json";return A&&(D=A.startsWith("text")?"text":this.configuration.isJsonMime(A)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/cell-type-term-occurences`,{context:S,params:_,responseType:D,withCredentials:this.configuration.withCredentials,headers:w,observe:i,reportProgress:r})}cellTypeTreeModel(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new nt({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let d=s&&s.context;void 0===d&&(d=new Ye);let h="json";return u&&(h=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/cell-type-tree-model`,{context:d,params:c,responseType:h,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}collisions(t,i="body",r=!1,s){const o=t.spatialEntity;if(null==o)throw new Error("Required parameter spatialEntity was null or undefined when calling collisions.");let a=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=s&&s.context;void 0===l&&(l=new Ye);const d=this.configuration.selectHeaderContentType(["application/json"]);void 0!==d&&(a=a.set("Content-Type",d));let h="json";return c&&(h=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/v1/collisions`,o,{context:l,responseType:h,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}corridor(t,i="body",r=!1,s){const o=t.spatialEntity;if(null==o)throw new Error("Required parameter spatialEntity was null or undefined when calling corridor.");let a=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["model/gltf-binary","application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=s&&s.context;void 0===l&&(l=new Ye);const d=this.configuration.selectHeaderContentType(["application/json"]);return void 0!==d&&(a=a.set("Content-Type",d)),this.httpClient.post(`${this.configuration.basePath}/v1/corridor`,o,{context:l,responseType:"blob",withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}dbStatus(t,i="body",r=!1,s){const o=t.token;let a=new nt({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"token"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let u=s&&s.context;void 0===u&&(u=new Ye);let d="json";return l&&(d=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/db-status`,{context:u,params:a,responseType:d,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}dsGraph(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,d=t.ontologyTerms,h=t.cellTypeTerms,f=t.consortiums,p=t.providers,g=t.sex,m=t.spatial,y=t.technologies,v=t.token;let _=new nt({encoder:this.encoder});null!=o&&(_=this.addToHttpParams(_,o,"age")),null!=a&&(_=this.addToHttpParams(_,a,"age-range")),null!=c&&(_=this.addToHttpParams(_,c,"bmi")),null!=l&&(_=this.addToHttpParams(_,l,"bmi-range")),null!=u&&(_=this.addToHttpParams(_,u,"cache")),d&&d.forEach(x=>{_=this.addToHttpParams(_,x,"ontology-terms")}),h&&h.forEach(x=>{_=this.addToHttpParams(_,x,"cell-type-terms")}),f&&f.forEach(x=>{_=this.addToHttpParams(_,x,"consortiums")}),p&&p.forEach(x=>{_=this.addToHttpParams(_,x,"providers")}),null!=g&&(_=this.addToHttpParams(_,g,"sex")),m&&m.forEach(x=>{_=this.addToHttpParams(_,x,"spatial")}),y&&y.forEach(x=>{_=this.addToHttpParams(_,x,"technologies")}),null!=v&&(_=this.addToHttpParams(_,v,"token"));let w=this.defaultHeaders,A=s&&s.httpHeaderAccept;void 0===A&&(A=this.configuration.selectHeaderAccept(["application/json"])),void 0!==A&&(w=w.set("Accept",A));let S=s&&s.context;void 0===S&&(S=new Ye);let D="json";return A&&(D=A.startsWith("text")?"text":this.configuration.isJsonMime(A)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/ds-graph`,{context:S,params:_,responseType:D,withCredentials:this.configuration.withCredentials,headers:w,observe:i,reportProgress:r})}extractionSite(t,i="body",r=!1,s){const o=t.iri;if(null==o)throw new Error("Required parameter iri was null or undefined when calling extractionSite.");let a=new nt({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"iri"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let u=s&&s.context;void 0===u&&(u=new Ye);let d="json";return l&&(d=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/extraction-site`,{context:u,params:a,responseType:d,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}getSpatialPlacement(t,i="body",r=!1,s){const o=t.getSpatialPlacementRequest;if(null==o)throw new Error("Required parameter getSpatialPlacementRequest was null or undefined when calling getSpatialPlacement.");let a=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=s&&s.context;void 0===l&&(l=new Ye);const d=this.configuration.selectHeaderContentType(["application/json"]);void 0!==d&&(a=a.set("Content-Type",d));let h="json";return c&&(h=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/v1/get-spatial-placement`,o,{context:l,responseType:h,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}gtexRuiLocations(t,i="body",r=!1,s){const o=t.cache;let a=new nt({encoder:this.encoder});null!=o&&(a=this.addToHttpParams(a,o,"cache"));let c=this.defaultHeaders,l=s&&s.httpHeaderAccept;void 0===l&&(l=this.configuration.selectHeaderAccept(["application/json"])),void 0!==l&&(c=c.set("Accept",l));let u=s&&s.context;void 0===u&&(u=new Ye);let d="json";return l&&(d=l.startsWith("text")?"text":this.configuration.isJsonMime(l)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/gtex/rui_locations.jsonld`,{context:u,params:a,responseType:d,withCredentials:this.configuration.withCredentials,headers:c,observe:i,reportProgress:r})}hubmapRuiLocations(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new nt({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let d=s&&s.context;void 0===d&&(d=new Ye);let h="json";return u&&(h=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/hubmap/rui_locations.jsonld`,{context:d,params:c,responseType:h,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}mesh3dCellPopulation(t,i="body",r=!1,s){const o=t.mesh3dCellPopulationRequest;if(null==o)throw new Error("Required parameter mesh3dCellPopulationRequest was null or undefined when calling mesh3dCellPopulation.");let a=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["text/csv","application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=s&&s.context;void 0===l&&(l=new Ye);const d=this.configuration.selectHeaderContentType(["application/json"]);return void 0!==d&&(a=a.set("Content-Type",d)),this.httpClient.post(`${this.configuration.basePath}/v1/mesh-3d-cell-population`,o,{context:l,responseType:"blob",withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}ontologyTermOccurences(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,d=t.ontologyTerms,h=t.cellTypeTerms,f=t.consortiums,p=t.providers,g=t.sex,m=t.spatial,y=t.technologies,v=t.token;let _=new nt({encoder:this.encoder});null!=o&&(_=this.addToHttpParams(_,o,"age")),null!=a&&(_=this.addToHttpParams(_,a,"age-range")),null!=c&&(_=this.addToHttpParams(_,c,"bmi")),null!=l&&(_=this.addToHttpParams(_,l,"bmi-range")),null!=u&&(_=this.addToHttpParams(_,u,"cache")),d&&d.forEach(x=>{_=this.addToHttpParams(_,x,"ontology-terms")}),h&&h.forEach(x=>{_=this.addToHttpParams(_,x,"cell-type-terms")}),f&&f.forEach(x=>{_=this.addToHttpParams(_,x,"consortiums")}),p&&p.forEach(x=>{_=this.addToHttpParams(_,x,"providers")}),null!=g&&(_=this.addToHttpParams(_,g,"sex")),m&&m.forEach(x=>{_=this.addToHttpParams(_,x,"spatial")}),y&&y.forEach(x=>{_=this.addToHttpParams(_,x,"technologies")}),null!=v&&(_=this.addToHttpParams(_,v,"token"));let w=this.defaultHeaders,A=s&&s.httpHeaderAccept;void 0===A&&(A=this.configuration.selectHeaderAccept(["application/json"])),void 0!==A&&(w=w.set("Accept",A));let S=s&&s.context;void 0===S&&(S=new Ye);let D="json";return A&&(D=A.startsWith("text")?"text":this.configuration.isJsonMime(A)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/ontology-term-occurences`,{context:S,params:_,responseType:D,withCredentials:this.configuration.withCredentials,headers:w,observe:i,reportProgress:r})}ontologyTreeModel(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new nt({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let d=s&&s.context;void 0===d&&(d=new Ye);let h="json";return u&&(h=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/ontology-tree-model`,{context:d,params:c,responseType:h,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}providerNames(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new nt({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let d=s&&s.context;void 0===d&&(d=new Ye);let h="json";return u&&(h=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/provider-names`,{context:d,params:c,responseType:h,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}referenceOrganScene(t,i="body",r=!1,s){const o=t.organIri;if(null==o)throw new Error("Required parameter organIri was null or undefined when calling referenceOrganScene.");const a=t.age,c=t.ageRange,l=t.bmi,u=t.bmiRange,d=t.cache,h=t.ontologyTerms,f=t.cellTypeTerms,p=t.consortiums,g=t.providers,m=t.sex,y=t.spatial,v=t.technologies,_=t.token;let w=new nt({encoder:this.encoder});null!=a&&(w=this.addToHttpParams(w,a,"age")),null!=c&&(w=this.addToHttpParams(w,c,"age-range")),null!=l&&(w=this.addToHttpParams(w,l,"bmi")),null!=u&&(w=this.addToHttpParams(w,u,"bmi-range")),null!=d&&(w=this.addToHttpParams(w,d,"cache")),h&&h.forEach(k=>{w=this.addToHttpParams(w,k,"ontology-terms")}),f&&f.forEach(k=>{w=this.addToHttpParams(w,k,"cell-type-terms")}),null!=o&&(w=this.addToHttpParams(w,o,"organ-iri")),p&&p.forEach(k=>{w=this.addToHttpParams(w,k,"consortiums")}),g&&g.forEach(k=>{w=this.addToHttpParams(w,k,"providers")}),null!=m&&(w=this.addToHttpParams(w,m,"sex")),y&&y.forEach(k=>{w=this.addToHttpParams(w,k,"spatial")}),v&&v.forEach(k=>{w=this.addToHttpParams(w,k,"technologies")}),null!=_&&(w=this.addToHttpParams(w,_,"token"));let A=this.defaultHeaders,S=s&&s.httpHeaderAccept;void 0===S&&(S=this.configuration.selectHeaderAccept(["application/json"])),void 0!==S&&(A=A.set("Accept",S));let D=s&&s.context;void 0===D&&(D=new Ye);let x="json";return S&&(x=S.startsWith("text")?"text":this.configuration.isJsonMime(S)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/reference-organ-scene`,{context:D,params:w,responseType:x,withCredentials:this.configuration.withCredentials,headers:A,observe:i,reportProgress:r})}referenceOrgans(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new nt({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let d=s&&s.context;void 0===d&&(d=new Ye);let h="json";return u&&(h=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/reference-organs`,{context:d,params:c,responseType:h,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}ruiReferenceData(t="body",i=!1,r){let s=this.defaultHeaders,o=r&&r.httpHeaderAccept;void 0===o&&(o=this.configuration.selectHeaderAccept(["application/json"])),void 0!==o&&(s=s.set("Accept",o));let a=r&&r.context;void 0===a&&(a=new Ye);let c="json";return o&&(c=o.startsWith("text")?"text":this.configuration.isJsonMime(o)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/rui-reference-data`,{context:a,responseType:c,withCredentials:this.configuration.withCredentials,headers:s,observe:t,reportProgress:i})}scene(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,d=t.ontologyTerms,h=t.cellTypeTerms,f=t.consortiums,p=t.providers,g=t.sex,m=t.spatial,y=t.technologies,v=t.token;let _=new nt({encoder:this.encoder});null!=o&&(_=this.addToHttpParams(_,o,"age")),null!=a&&(_=this.addToHttpParams(_,a,"age-range")),null!=c&&(_=this.addToHttpParams(_,c,"bmi")),null!=l&&(_=this.addToHttpParams(_,l,"bmi-range")),null!=u&&(_=this.addToHttpParams(_,u,"cache")),d&&d.forEach(x=>{_=this.addToHttpParams(_,x,"ontology-terms")}),h&&h.forEach(x=>{_=this.addToHttpParams(_,x,"cell-type-terms")}),f&&f.forEach(x=>{_=this.addToHttpParams(_,x,"consortiums")}),p&&p.forEach(x=>{_=this.addToHttpParams(_,x,"providers")}),null!=g&&(_=this.addToHttpParams(_,g,"sex")),m&&m.forEach(x=>{_=this.addToHttpParams(_,x,"spatial")}),y&&y.forEach(x=>{_=this.addToHttpParams(_,x,"technologies")}),null!=v&&(_=this.addToHttpParams(_,v,"token"));let w=this.defaultHeaders,A=s&&s.httpHeaderAccept;void 0===A&&(A=this.configuration.selectHeaderAccept(["application/json"])),void 0!==A&&(w=w.set("Accept",A));let S=s&&s.context;void 0===S&&(S=new Ye);let D="json";return A&&(D=A.startsWith("text")?"text":this.configuration.isJsonMime(A)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/scene`,{context:S,params:_,responseType:D,withCredentials:this.configuration.withCredentials,headers:w,observe:i,reportProgress:r})}sennetRuiLocations(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new nt({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let d=s&&s.context;void 0===d&&(d=new Ye);let h="json";return u&&(h=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/sennet/rui_locations.jsonld`,{context:d,params:c,responseType:h,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}sessionToken(t,i="body",r=!1,s){const o=t.sessionTokenRequest;if(null==o)throw new Error("Required parameter sessionTokenRequest was null or undefined when calling sessionToken.");let a=this.defaultHeaders,c=s&&s.httpHeaderAccept;void 0===c&&(c=this.configuration.selectHeaderAccept(["application/json"])),void 0!==c&&(a=a.set("Accept",c));let l=s&&s.context;void 0===l&&(l=new Ye);const d=this.configuration.selectHeaderContentType(["application/json"]);void 0!==d&&(a=a.set("Content-Type",d));let h="json";return c&&(h=c.startsWith("text")?"text":this.configuration.isJsonMime(c)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/v1/session-token`,o,{context:l,responseType:h,withCredentials:this.configuration.withCredentials,headers:a,observe:i,reportProgress:r})}sparql(t,i="body",r=!1,s){const o=t.query;if(null==o)throw new Error("Required parameter query was null or undefined when calling sparql.");const a=t.token,c=t.format;let l=new nt({encoder:this.encoder});null!=o&&(l=this.addToHttpParams(l,o,"query")),null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let u=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==d&&(u=u.set("Accept",d));let h=s&&s.context;void 0===h&&(h=new Ye);let f="json";return d&&(f=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/sparql`,{context:h,params:l,responseType:f,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}sparqlPost(t,i="body",r=!1,s){const o=t.sparqlQueryRequest;if(null==o)throw new Error("Required parameter sparqlQueryRequest was null or undefined when calling sparqlPost.");const a=t.token,c=t.format;let l=new nt({encoder:this.encoder});null!=a&&(l=this.addToHttpParams(l,a,"token")),null!=c&&(l=this.addToHttpParams(l,c,"format"));let u=this.defaultHeaders,d=s&&s.httpHeaderAccept;void 0===d&&(d=this.configuration.selectHeaderAccept(["application/json","text/csv"])),void 0!==d&&(u=u.set("Accept",d));let h=s&&s.context;void 0===h&&(h=new Ye);const p=this.configuration.selectHeaderContentType(["application/json","application/x-www-form-urlencoded"]);void 0!==p&&(u=u.set("Content-Type",p));let g="json";return d&&(g=d.startsWith("text")?"text":this.configuration.isJsonMime(d)?"json":"blob"),this.httpClient.post(`${this.configuration.basePath}/v1/sparql`,o,{context:h,params:l,responseType:g,withCredentials:this.configuration.withCredentials,headers:u,observe:i,reportProgress:r})}technologyNames(t,i="body",r=!1,s){const o=t.cache,a=t.token;let c=new nt({encoder:this.encoder});null!=o&&(c=this.addToHttpParams(c,o,"cache")),null!=a&&(c=this.addToHttpParams(c,a,"token"));let l=this.defaultHeaders,u=s&&s.httpHeaderAccept;void 0===u&&(u=this.configuration.selectHeaderAccept(["application/json"])),void 0!==u&&(l=l.set("Accept",u));let d=s&&s.context;void 0===d&&(d=new Ye);let h="json";return u&&(h=u.startsWith("text")?"text":this.configuration.isJsonMime(u)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/technology-names`,{context:d,params:c,responseType:h,withCredentials:this.configuration.withCredentials,headers:l,observe:i,reportProgress:r})}tissueBlocks(t,i="body",r=!1,s){const o=t.age,a=t.ageRange,c=t.bmi,l=t.bmiRange,u=t.cache,d=t.ontologyTerms,h=t.cellTypeTerms,f=t.consortiums,p=t.providers,g=t.sex,m=t.spatial,y=t.technologies,v=t.token;let _=new nt({encoder:this.encoder});null!=o&&(_=this.addToHttpParams(_,o,"age")),null!=a&&(_=this.addToHttpParams(_,a,"age-range")),null!=c&&(_=this.addToHttpParams(_,c,"bmi")),null!=l&&(_=this.addToHttpParams(_,l,"bmi-range")),null!=u&&(_=this.addToHttpParams(_,u,"cache")),d&&d.forEach(x=>{_=this.addToHttpParams(_,x,"ontology-terms")}),h&&h.forEach(x=>{_=this.addToHttpParams(_,x,"cell-type-terms")}),f&&f.forEach(x=>{_=this.addToHttpParams(_,x,"consortiums")}),p&&p.forEach(x=>{_=this.addToHttpParams(_,x,"providers")}),null!=g&&(_=this.addToHttpParams(_,g,"sex")),m&&m.forEach(x=>{_=this.addToHttpParams(_,x,"spatial")}),y&&y.forEach(x=>{_=this.addToHttpParams(_,x,"technologies")}),null!=v&&(_=this.addToHttpParams(_,v,"token"));let w=this.defaultHeaders,A=s&&s.httpHeaderAccept;void 0===A&&(A=this.configuration.selectHeaderAccept(["application/json"])),void 0!==A&&(w=w.set("Accept",A));let S=s&&s.context;void 0===S&&(S=new Ye);let D="json";return A&&(D=A.startsWith("text")?"text":this.configuration.isJsonMime(A)?"json":"blob"),this.httpClient.get(`${this.configuration.basePath}/v1/tissue-blocks`,{context:S,params:_,responseType:D,withCredentials:this.configuration.withCredentials,headers:w,observe:i,reportProgress:r})}static \u0275fac=function(i){return new(i||n)(I(Ds),I(nS,8),I(Ya,8))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var bd=function(n){return n.Both="Both",n.Male="Male",n.Female="Female",n}(bd||{});let jfe=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:Ya,useFactory:t}]}}constructor(t,i){if(t)throw new Error("HraApiModule is already loaded. Import in your base AppModule only.");if(!i)throw new Error("You need to import the HttpClientModule in your AppModule! \nSee also https://github.com/angular/angular/issues/20575")}static \u0275fac=function(i){return new(i||n)(I(n,12),I(Ds,8))};static \u0275mod=sn({type:n});static \u0275inj=Qt({})}return n})();const iS=new ue,Ed={cacheBusterObserver:iS},fl={cacheBusterObserver:iS,maxCacheCount:4};function KU(n,e,t){return n?{min:n[0]>e?n[0]:void 0,max:n[1]<t?n[1]:void 0}:void 0}function Hfe(n){return n.map(e=>({...e,transformMatrix:new Be(e.transformMatrix??[])}))}function zfe(n){return{age:KU(n?.ageRange,1,110),bmi:KU(n?.bmiRange,13,83),sex:n?.sex?.toLowerCase(),ontologyTerms:n?.ontologyTerms,cellTypeTerms:n?.cellTypeTerms,biomarkerTerms:n?.biomarkerTerms,consortiums:n?.consortiums,providers:n?.tmc,technologies:n?.technologies,spatial:n?.spatialSearches}}class ni{constructor(e,t){this.api=e,this.globalConfig=t,this.initialized=new Zs(1),this.getSessionToken().pipe(bt(i=>t.patchConfig({token:i})),bt(iS),Cp(1)).subscribe(()=>{this.initialized.closed||(this.initialized.next(),this.initialized.complete())})}getDatabaseStatus(){return this.doRequest(e=>this.api.dbStatus(e))}getProviderNames(){return this.doRequest(e=>this.api.providerNames(e))}getDatasetTechnologyNames(){return this.doRequest(e=>this.api.technologyNames(e))}getOntologyTreeModel(){return this.doRequest(e=>this.api.ontologyTreeModel(e),void 0,{},n=>n)}getCellTypeTreeModel(){return this.doRequest(e=>this.api.cellTypeTreeModel(e),void 0,{},n=>n)}getBiomarkerTreeModel(){return this.doRequest(e=>this.api.biomarkerTreeModel(e),void 0,{},n=>n)}getReferenceOrgans(){return this.doRequest(e=>this.api.referenceOrgans(e),void 0,{},n=>n)}getTissueBlockResults(e){return this.doRequest(t=>this.api.tissueBlocks(t),e,{},n=>n)}getAggregateResults(e){return this.doRequest(t=>this.api.aggregateResults(t),e)}getOntologyTermOccurences(e){return this.doRequest(t=>this.api.ontologyTermOccurences(t),e)}getCellTypeTermOccurences(e){return this.doRequest(t=>this.api.cellTypeTermOccurences(t),e)}getBiomarkerTermOccurences(e){return this.doRequest(t=>this.api.biomarkerTermOccurences(t),e)}getScene(e){return this.doRequest(t=>this.api.scene(t),e,{},Hfe)}getReferenceOrganScene(e,t){return this.doRequest(i=>this.api.referenceOrganScene(i),t,{organIri:e})}doRequest(e,t,i,r){const{api:s,globalConfig:o}=this,a={...zfe(t),...i};return ld([o.getOption("remoteApiEndpoint"),o.getOption("token"),this.initialized]).pipe(Cp(1),qn(1),bt(([c,l])=>{s.configuration.basePath=c,l&&(a.token=l)}),nn(()=>e(a)),oe(c=>r?r(c):c))}getSessionToken(){const{globalConfig:e}=this;return ld([e.getOption("dataSources"),e.getOption("filter")]).pipe(Cp(50),nn(r=>this.getSessionTokenImpl(...r)),nn(r=>this.ensureDatabaseReady(r)))}getSessionTokenImpl(e,t){if((void 0===e||0===e.length)&&void 0===t)return Z(void 0);const{api:i,globalConfig:r}=this,s={dataSources:e??[],filter:t};return r.getOption("remoteApiEndpoint").pipe(bt(o=>i.configuration.basePath=o),nn(()=>i.sessionToken({sessionTokenRequest:s})),oe(({token:o})=>o))}ensureDatabaseReady(e){return Z(void 0).pipe(function Whe(n){let t,e=1/0;return null!=n&&("object"==typeof n?({count:e=1/0,delay:t}=n):e=n),e<=0?()=>cr:At((i,r)=>{let o,s=0;const a=()=>{if(o?.unsubscribe(),o=null,null!=t){const l="number"==typeof t?lv(t):xn(t(s)),u=dt(r,()=>{u.unsubscribe(),c()});l.subscribe(u)}else c()},c=()=>{let l=!1;o=i.subscribe(dt(r,void 0,()=>{++s<e?o?a():l=!0:r.complete()})),l&&a()};c()})}({delay:()=>this.api.dbStatus({token:e}).pipe(vt(i=>"Ready"!==i.status),nn(i=>Z(void 0).pipe(TU(i.checkback??0))))}),CU(),function $he(...n){return e=>sd(e,Z(...n))}(e))}static#e=this.\u0275fac=function(t){return new(t||ni)(I(YU),I(rl))};static#t=this.\u0275prov=j({token:ni,factory:ni.\u0275fac,providedIn:"root"})}qe([Ir(Ed),Q("design:type",Function),Q("design:paramtypes",[]),Q("design:returntype",me)],ni.prototype,"getProviderNames",null),qe([Ir(Ed),Q("design:type",Function),Q("design:paramtypes",[]),Q("design:returntype",me)],ni.prototype,"getDatasetTechnologyNames",null),qe([Ir(Ed),Q("design:type",Function),Q("design:paramtypes",[]),Q("design:returntype",me)],ni.prototype,"getOntologyTreeModel",null),qe([Ir(Ed),Q("design:type",Function),Q("design:paramtypes",[]),Q("design:returntype",me)],ni.prototype,"getCellTypeTreeModel",null),qe([Ir(Ed),Q("design:type",Function),Q("design:paramtypes",[]),Q("design:returntype",me)],ni.prototype,"getBiomarkerTreeModel",null),qe([Ir(Ed),Q("design:type",Function),Q("design:paramtypes",[]),Q("design:returntype",me)],ni.prototype,"getReferenceOrgans",null),qe([Ir(fl),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",me)],ni.prototype,"getTissueBlockResults",null),qe([Ir(fl),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",me)],ni.prototype,"getAggregateResults",null),qe([Ir(fl),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",me)],ni.prototype,"getOntologyTermOccurences",null),qe([Ir(fl),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",me)],ni.prototype,"getCellTypeTermOccurences",null),qe([Ir(fl),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",me)],ni.prototype,"getBiomarkerTermOccurences",null),qe([Ir(fl),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",me)],ni.prototype,"getScene",null),qe([Ir(fl),Q("design:type",Function),Q("design:paramtypes",[String,Object]),Q("design:returntype",me)],ni.prototype,"getReferenceOrganScene",null);class JU extends Error{constructor(){super(...arguments),this.message="NgxsDispatchPluginModule is not imported"}}class Yfe{constructor(){this.cancelUncompleted$=new ue}cancelPreviousAction(){this.cancelUncompleted$.next()}}const rS="\u0275fac",ZU=Symbol("InjectorInstance"),QU=Symbol("FactoryHasBeenDecorated");function ej(n,e){const t=n[ZU];return t?t.get(e):null}const Zfe={cancelUncompleted:!1};function tj(n=Zfe){return(e,t,i)=>{let r;const s=function Kfe(n){return n?new Yfe:null}(n.cancelUncompleted);function o(){null!==s&&s.cancelPreviousAction();const a=ej(this,Yr)||function qfe(){throw new JU}(),c=ej(this,pe)||function Xfe(){throw new JU}(),l=r.apply(this,arguments);return c.runOutsideAngular(()=>function $fe(n,e,t){return La(e)?function Wfe(n,e){return e.then(t=>(n.dispatch(t),t))}(n,e):Ts(e)?function Gfe(n,e,t){return null!==t&&(e=e.pipe(Ss(t.cancelUncompleted$))),e.subscribe({next:i=>n.dispatch(i)}),e}(n,e,t):(n.dispatch(e),e)}(a,l,s))}"function"==typeof i?.value?(r=i.value,i.value=o):Object.defineProperty(e,t,{set:a=>r=a,get:()=>o}),function Jfe(n){if(QU in n.constructor.prototype)return;const e=n.constructor;"function"==typeof e[rS]&&function sS(n){const e=n[rS];if("function"!=typeof e)return;const t=n.\u0275prov||n.\u0275pipe||n.\u0275cmp||n.\u0275dir,i=()=>{const r=e();return r[ZU]=R(dm),r};t&&(t.factory=i),Object.defineProperty(n,rS,{get:()=>i})}(e),n.constructor.prototype[QU]=!0}(e)}}let nj=(()=>{class n{static#e=this.type="[CallToAction] Learn More"}return n})(),ij=(()=>{class n{static#e=this.type="[CallToAction] Open Dialog"}return n})(),rj=(()=>{class n{static#e=this.type="[CallToAction] Close Dialog"}return n})();function sj(n,e=0){return function Qfe(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):2===arguments.length?e:0}function gv(n){return Array.isArray(n)?n:[n]}function On(n){return null==n?"":"string"==typeof n?n:`${n}px`}function wd(n){return n instanceof gt?n.nativeElement:n}const Mp={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=Mp;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new xt(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=Mp;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=Mp;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class tpe extends XT{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class epe extends qT{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=Mp.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(Mp.cancelAnimationFrame(t),e._scheduled=void 0)}});let oS,ipe=1;const mv={};function oj(n){return n in mv&&(delete mv[n],!0)}const rpe={setImmediate(n){const e=ipe++;return mv[e]=!0,oS||(oS=Promise.resolve()),oS.then(()=>oj(e)&&n()),e},clearImmediate(n){oj(n)}},{setImmediate:spe,clearImmediate:ope}=rpe,_v={setImmediate(...n){const{delegate:e}=_v;return(e?.setImmediate||spe)(...n)},clearImmediate(n){const{delegate:e}=_v;return(e?.clearImmediate||ope)(n)},delegate:void 0};new class cpe extends XT{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class ape extends qT{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=_v.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(_v.clearImmediate(t),e._scheduled=void 0)}});function aj(n,e=cv){return function upe(n){return At((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const l=r;r=null,t.next(l)}o&&t.complete()},c=()=>{s=null,o&&t.complete()};e.subscribe(dt(t,l=>{i=!0,r=l,s||xn(n(l)).subscribe(s=dt(t,a,c))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>lv(n,e))}let aS;try{aS=typeof Intl<"u"&&Intl.v8BreakIterator}catch{aS=!1}let Ip,Jr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Ha(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!aS)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(i){return new(i||n)(I(zr))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yv(n){return function dpe(){if(null==Ip&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ip=!0}))}finally{Ip=Ip||!1}return Ip}()?n:!!n.capture}var ro=function(n){return n[n.NORMAL=0]="NORMAL",n[n.NEGATED=1]="NEGATED",n[n.INVERTED=2]="INVERTED",n}(ro||{});let vv,pl,cS;function lj(){if(null==pl){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return pl=!1,pl;if("scrollBehavior"in document.documentElement.style)pl=!0;else{const n=Element.prototype.scrollTo;pl=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return pl}function Dp(){if("object"!=typeof document||!document)return ro.NORMAL;if(null==vv){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),vv=ro.NORMAL,0===n.scrollLeft&&(n.scrollLeft=1,vv=0===n.scrollLeft?ro.NEGATED:ro.INVERTED),n.remove()}return vv}function lS(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function Ka(n){return n.composedPath?n.composedPath()[0]:n.target}function uS(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const ppe=new F("cdk-dir-doc",{providedIn:"root",factory:function gpe(){return P(Xe)}}),mpe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let bv=(()=>{class n{constructor(t){this.value="ltr",this.change=new be,t&&(this.value=function _pe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?mpe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(i){return new(i||n)(I(ppe,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uj=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({})}return n})(),dj=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new ue,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new me(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(aj(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Z()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(vt(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=wd(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ip(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(i){return new(i||n)(I(pe),I(Jr),I(Xe,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vpe=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new ue,this._elementScrolled=new me(o=>this.ngZone.runOutsideAngular(()=>ip(this.elementRef.nativeElement,"scroll").pipe(Ss(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&Dp()!=ro.NORMAL?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),Dp()==ro.INVERTED?t.left=t.right:Dp()==ro.NEGATED&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;lj()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?r:i:"end"==t&&(t=o?i:r),o&&Dp()==ro.INVERTED?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&Dp()==ro.NEGATED?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}static#e=this.\u0275fac=function(i){return new(i||n)(R(gt),R(dj),R(pe),R(bv,8))};static#t=this.\u0275dir=ie({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}return n})(),hj=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new ue,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(aj(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(i){return new(i||n)(I(Jr),I(pe),I(Xe,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class dS{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class hS extends dS{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class fS extends dS{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Epe extends dS{constructor(e){super(),this.element=e instanceof gt?e.nativeElement:e}}class pS{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof hS?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof fS?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Epe?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class wpe extends pS{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||ht.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Ev=(()=>{class n extends pS{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new be,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}static#e=this.\u0275fac=function(i){return new(i||n)(R(Ma),R(zi),R(Xe))};static#t=this.\u0275dir=ie({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[0,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Je]})}return n})();const fj=lj();class Cpe{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=On(-this._previousScrollPosition.left),e.style.top=On(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),fj&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),fj&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class Ape{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(vt(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class pj{enable(){}disable(){}attach(){}}function gS(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function gj(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Tpe{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();gS(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Spe=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new pj,this.close=o=>new Ape(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Cpe(this._viewportRuler,this._document),this.reposition=o=>new Tpe(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static#e=this.\u0275fac=function(i){return new(i||n)(I(dj),I(hj),I(pe),I(Xe))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class mj{constructor(e){if(this.scrollStrategy=new pj,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class xpe{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let _j=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(i){return new(i||n)(I(Xe))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Mpe=(()=>{class n extends _j{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(i){return new(i||n)(I(Xe),I(pe,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ipe=(()=>{class n extends _j{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Ka(s)},this._clickListener=s=>{const o=Ka(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){const u=c[l];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(yj(u.overlayElement,o)||yj(u.overlayElement,a))break;const d=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>d.next(s)):d.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(i){return new(i||n)(I(Xe),I(Jr),I(pe,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function yj(n,e){const t=typeof ShadowRoot<"u"&&ShadowRoot;let i=e;for(;i;){if(i===n)return!0;i=t&&i instanceof ShadowRoot?i.host:i.parentNode}return!1}let wv=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||uS()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),uS()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}static#e=this.\u0275fac=function(i){return new(i||n)(I(Xe),I(Jr))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Cv{constructor(e,t,i,r,s,o,a,c,l,u=!1,d){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=u,this._injector=d,this._backdropElement=null,this._backdropClick=new ue,this._attachments=new ue,this._detachments=new ue,this._locationChanges=xt.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new ue,this._outsidePointerEvents=new ue,this._renders=new ue,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=Wr(()=>function pN(n,e){!e&&Ih();const t=e?.injector??P(ht);return ir(t)?(ji("NgAfterRender"),gN(n,t,!1,e?.phase??Hi.MixedReadWrite)):fN}(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),p_(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=On(this._config.width),e.height=On(this._config.height),e.minWidth=On(this._config.minWidth),e.minHeight=On(this._config.minHeight),e.maxWidth=On(this._config.maxWidth),e.maxHeight=On(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=gv(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const e=this._renders.pipe(Ss(Qc(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const vj="cdk-overlay-connected-position-bounding-box",Dpe=/([A-Za-z%]+)$/;class Rpe{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ue,this._resizeSubscription=xt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(vj),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let c=this._getOriginPoint(e,r,a),l=this._getOverlayPoint(c,t,a),u=this._getOverlayFit(l,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,c);this._canFitWithFlexibleDimensions(u,l,i)?s.push({position:a,origin:c,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(c,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:l,originPoint:c,position:a,overlayRect:t})}if(s.length){let a=null,c=-1;for(const l of s){const u=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);u>c&&(c=u,a=l)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&gl(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(vj),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=Ej(t);let{x:o,y:a}=e,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(o+=c),l&&(a+=l);let h=0-a,f=a+s.height-i.height,p=this._subtractOverflows(s.width,0-o,o+s.width-i.width),g=this._subtractOverflows(s.height,h,f),m=p*g;return{visibleArea:m,isCompletelyWithinViewport:s.width*s.height===m,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:p==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=bj(this._overlayRef.getConfig().minHeight),a=bj(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=Ej(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),c=Math.max(s.top-i.top-e.y,0),l=Math.max(s.left-i.left-e.x,0);let u=0,d=0;return u=r.width<=s.width?l||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,d=r.height<=s.height?c||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){const i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!function Ope(n,e){return n===e||n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}(this._lastScrollVisibility,i)){const r=new xpe(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,d,h;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const f=Math.min(i.bottom-e.y+i.top,e.y),p=this._lastBoundingBoxSize.height;s=2*f,o=e.y-f,s>p&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-p/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)h=i.width-e.x+2*this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)d=e.x,u=i.right-e.x;else{const f=Math.min(i.right-e.x+i.left,e.x),p=this._lastBoundingBoxSize.width;u=2*f,d=e.x-f,u>p&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-p/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=On(i.height),r.top=On(i.top),r.bottom=On(i.bottom),r.width=On(i.width),r.left=On(i.left),r.right=On(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=On(s)),o&&(r.maxWidth=On(o))}this._lastBoundingBoxSize=i,gl(this._boundingBox.style,r)}_resetBoundingBoxStyles(){gl(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){gl(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();gl(i,this._getExactOverlayY(t,e,u)),gl(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",c=this._getOffset(t,"x"),l=this._getOffset(t,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=On(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=On(o.maxWidth):s&&(i.maxWidth="")),gl(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=On(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=On(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:gj(e,i),isOriginOutsideView:gS(e,i),isOverlayClipped:gj(t,i),isOverlayOutsideView:gS(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&gv(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof gt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function gl(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function bj(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(Dpe);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Ej(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const wj="cdk-global-overlay-wrapper";class Ppe{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(wj),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,c=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),l=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,d=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let f="",p="",g="";c?g="flex-start":"center"===u?(g="center",h?p=d:f=d):h?"left"===u||"end"===u?(g="flex-end",f=d):("right"===u||"start"===u)&&(g="flex-start",p=d):"left"===u||"start"===u?(g="flex-start",f=d):("right"===u||"end"===u)&&(g="flex-end",p=d),e.position=this._cssPosition,e.marginLeft=c?"0":f,e.marginTop=l?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=c?"0":p,t.justifyContent=g,t.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(wj),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Npe=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new Ppe}flexibleConnectedTo(t){return new Rpe(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(i){return new(i||n)(I(hj),I(Xe),I(Jr),I(wv))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fpe=0,Ja=(()=>{class n{constructor(t,i,r,s,o,a,c,l,u,d,h,f){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=c,this._document=l,this._directionality=u,this._location=d,this._outsideClickDispatcher=h,this._animationsModuleType=f}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new mj(t);return o.direction=o.direction||this._directionality.value,new Cv(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(Si))}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Fpe++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(or)),new wpe(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(i){return new(i||n)(I(Spe),I(wv),I(Ma),I(Npe),I(Mpe),I(ht),I(pe),I(Xe),I(bv),I(tl),I(Ipe),I(Lc,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Av(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}const Tj=new Set;let ml,rge=(()=>{class n{constructor(t,i){this._platform=t,this._nonce=i,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):oge}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function sge(n,e){if(!Tj.has(n))try{ml||(ml=document.createElement("style"),e&&ml.setAttribute("nonce",e),ml.setAttribute("type","text/css"),document.head.appendChild(ml)),ml.sheet&&(ml.sheet.insertRule(`@media ${n} {body{ }}`,0),Tj.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(i){return new(i||n)(I(Jr),I(Um,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oge(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let age=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new ue}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Sj(gv(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=ld(Sj(gv(t)).map(o=>this._registerQuery(o).observable));return s=sd(s.pipe(qn(1)),s.pipe(LT(1),Cp(0))),s.pipe(oe(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new me(o=>{const a=c=>this._zone.run(()=>o.next(c));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Ga(i),oe(({matches:o})=>({query:t,matches:o})),Ss(this._destroySubject)),mql:i};return this._queries.set(t,s),s}static#e=this.\u0275fac=function(i){return new(i||n)(I(rge),I(pe))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sj(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let mS=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function mge(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function gge(n){try{return n.frameElement}catch{return null}}(function Age(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===Pj(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=Pj(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function wge(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function Cge(n){return!function yge(n){return function bge(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function _ge(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function vge(n){return function Ege(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||Oj(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}static#e=this.\u0275fac=function(i){return new(i||n)(I(Jr))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Oj(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function Pj(n){if(!Oj(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Nj{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,s=!1,o){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._injector=o,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._injector?p_(e,{injector:this._injector}):setTimeout(e)}}let Fj=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._injector=P(ht),this._document=r}create(t,i=!1){return new Nj(t,this._checker,this._ngZone,this._document,i,this._injector)}static#e=this.\u0275fac=function(i){return new(i||n)(I(mS),I(pe),I(Xe))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kj(n){return 0===n.buttons||0===n.detail}function Lj(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Tge=new F("cdk-input-modality-detector-options"),Sge={ignoreKeys:[18,17,224,91,16]},Ad=yv({passive:!0,capture:!0});let xge=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new wn(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ka(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(kj(o)?"keyboard":"mouse"),this._mostRecentTarget=Ka(o))},this._onTouchstart=o=>{Lj(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ka(o))},this._options={...Sge,...s},this.modalityDetected=this._modality.pipe(LT(1)),this.modalityChanged=this.modalityDetected.pipe(Jf()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Ad),r.addEventListener("mousedown",this._onMousedown,Ad),r.addEventListener("touchstart",this._onTouchstart,Ad)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ad),document.removeEventListener("mousedown",this._onMousedown,Ad),document.removeEventListener("touchstart",this._onTouchstart,Ad))}static#e=this.\u0275fac=function(i){return new(i||n)(I(Jr),I(pe),I(Xe),I(Tge,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Tv=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(Tv||{});const Ige=new F("cdk-focus-monitor-default-options"),Sv=yv({passive:!0,capture:!0});let xv=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ue,this._rootNodeFocusAndBlurListener=a=>{for(let l=Ka(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=s,this._detectionMode=o?.detectionMode||Tv.IMMEDIATE}monitor(t,i=!1){const r=wd(t);if(!this._platform.isBrowser||1!==r.nodeType)return Z();const s=function fpe(n){if(function hpe(){if(null==cS){const n=typeof document<"u"?document.head:null;cS=!(!n||!n.createShadowRoot&&!n.attachShadow)}return cS}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new ue,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=wd(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=wd(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,c])=>this._originChanged(a,i,c)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===Tv.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,this._detectionMode===Tv.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=Ka(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Sv),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Sv)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ss(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Sv),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Sv),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}static#e=this.\u0275fac=function(i){return new(i||n)(I(pe),I(Jr),I(xge),I(Xe,8),I(Ige,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _l=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(_l||{});const Vj="cdk-high-contrast-black-on-white",Uj="cdk-high-contrast-white-on-black",_S="cdk-high-contrast-active";let Dge=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=P(age).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return _l.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return _l.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return _l.BLACK_ON_WHITE}return _l.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(_S,Vj,Uj),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();i===_l.BLACK_ON_WHITE?t.add(_S,Vj):i===_l.WHITE_ON_BLACK&&t.add(_S,Uj)}}static#e=this.\u0275fac=function(i){return new(i||n)(I(Jr),I(Xe))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Rge(n,e){}class Mv{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let jj=(()=>{class n extends pS{constructor(t,i,r,s,o,a,c,l){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=c,this._focusMonitor=l,this._platform=P(Jr),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=P(ar),this._injector=P(ht),this._isDestroyed=!1,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const d=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),d},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(t){this._ariaLabelledByQueue.push(t),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(t){const i=this._ariaLabelledByQueue.indexOf(t);i>-1&&(this._ariaLabelledByQueue.splice(i,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._isDestroyed=!0,this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){this._isDestroyed||p_(()=>{const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElement()||this._focusDialogContainer();break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}},{injector:this._injector})}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=lS(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=lS();return t===i||t.contains(i)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=lS()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static#e=this.\u0275fac=function(i){return new(i||n)(R(gt),R(Fj),R(Xe,8),R(Mv),R(mS),R(pe),R(Cv),R(xv))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(i,r){if(1&i&&Ho(Ev,7),2&i){let s;Es(s=ws())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(i,r){2&i&&Tn("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[Je,Ii],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(i,r){1&i&&Gi(0,Rge,0,0,"ng-template",0)},dependencies:[Ev],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}return n})();class yS{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new ue,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!Av(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const Hj=new F("DialogScrollStrategy",{providedIn:"root",factory:()=>{const n=P(Ja);return()=>n.scrollStrategies.block()}}),Oge=new F("DialogData"),Pge=new F("DefaultDialogConfig");let Fge=0,kge=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,s,o,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ue,this._afterOpenedAtThisLevel=new ue,this._ariaHiddenElements=new Map,this.afterAllClosed=Ny(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ga(void 0))),this._scrollStrategy=a}open(t,i){(i={...this._defaultOptions||new Mv,...i}).id=i.id||"cdk-dialog-"+Fge++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new yS(o,i),c=this._attachContainer(o,a,i);return a.containerInstance=c,this._attachDialogContent(t,a,c,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){vS(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){vS(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),vS(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new mj({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:Mv,useValue:r},{provide:yS,useValue:i},{provide:Cv,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=jj;const c=new hS(a,r.viewContainerRef,ht.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(c).instance}_attachDialogContent(t,i,r,s){if(t instanceof _s){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new fS(t,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new hS(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentRef=a,i.componentInstance=a.instance}}_createInjector(t,i,r,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:Oge,useValue:t.data},{provide:yS,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!o||!o.get(bv,null,{optional:!0}))&&a.push({provide:bv,useValue:{value:t.direction,change:Z()}}),ht.create({parent:o||s,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}static#e=this.\u0275fac=function(i){return new(i||n)(I(Ja),I(ht),I(Pge,8),I(n,12),I(wv),I(Hj))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function vS(n,e){let t=n.length;for(;t--;)e(n[t])}var dr=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(dr||{});function bS(n,e){return{type:dr.Trigger,name:n,definitions:e,options:{}}}function Iv(n,e=null){return{type:dr.Animate,styles:e,timings:n}}function Za(n){return{type:dr.Style,styles:n,offset:null}}function Td(n,e,t){return{type:dr.State,name:n,styles:e,options:t}}function Dv(n,e,t=null){return{type:dr.Transition,expr:n,animation:e,options:t}}function jge(n,e){}class ES{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const wS="mdc-dialog--open",$j="mdc-dialog--opening",qj="mdc-dialog--closing";let Xj=(()=>{class n extends jj{constructor(t,i,r,s,o,a,c,l,u){super(t,i,r,s,o,a,c,u),this._animationMode=l,this._animationStateChanged=new be,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?Kj(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?Kj(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(Yj,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add($j,wS)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(wS),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(wS),this._animationsEnabled?(this._hostElement.style.setProperty(Yj,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(qj)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(t){this._actionSectionCount+=t,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove($j,qj)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}attachComponentPortal(t){const i=super.attachComponentPortal(t);return i.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),i}static#e=this.\u0275fac=function(i){return new(i||n)(R(gt),R(Fj),R(Xe,8),R(ES),R(mS),R(pe),R(Cv),R(Lc,8),R(xv))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(i,r){2&i&&(Sf("id",r._config.id),Tn("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),yn("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},standalone:!0,features:[Je,Ii],decls:3,vars:0,consts:[[1,"mat-mdc-dialog-inner-container","mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(i,r){1&i&&(we(0,"div",0)(1,"div",1),Gi(2,jge,0,0,"ng-template",2),Te()())},dependencies:[Ev],styles:['.mat-mdc-dialog-container{width:100%;height:100%;display:block;box-sizing:border-box;max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;outline:0}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-inner-container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;transition:opacity linear var(--mat-dialog-transition-duration, 0ms);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mdc-dialog--closing .mat-mdc-dialog-inner-container{transition:opacity 75ms linear;transform:none}.mdc-dialog--open .mat-mdc-dialog-inner-container{opacity:1}._mat-animation-noopable .mat-mdc-dialog-inner-container{transition:none}.mat-mdc-dialog-surface{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;width:100%;height:100%;position:relative;overflow-y:auto;outline:0;transform:scale(0.8);transition:transform var(--mat-dialog-transition-duration, 0ms) cubic-bezier(0, 0, 0.2, 1);max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit;box-shadow:var(--mat-dialog-container-elevation-shadow, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12));border-radius:var(--mdc-dialog-container-shape, var(--mat-app-corner-extra-large, 4px));background-color:var(--mdc-dialog-container-color, var(--mat-app-surface, white))}[dir=rtl] .mat-mdc-dialog-surface{text-align:right}.mdc-dialog--open .mat-mdc-dialog-surface,.mdc-dialog--closing .mat-mdc-dialog-surface{transform:none}._mat-animation-noopable .mat-mdc-dialog-surface{transition:none}.mat-mdc-dialog-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mat-mdc-dialog-title{display:block;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mat-mdc-dialog-title{text-align:right}.mat-mdc-dialog-container .mat-mdc-dialog-title{color:var(--mdc-dialog-subhead-color, var(--mat-app-on-surface, rgba(0, 0, 0, 0.87)));font-family:var(--mdc-dialog-subhead-font, var(--mat-app-headline-small-font, inherit));line-height:var(--mdc-dialog-subhead-line-height, var(--mat-app-headline-small-line-height, 1.5rem));font-size:var(--mdc-dialog-subhead-size, var(--mat-app-headline-small-size, 1rem));font-weight:var(--mdc-dialog-subhead-weight, var(--mat-app-headline-small-weight, 400));letter-spacing:var(--mdc-dialog-subhead-tracking, var(--mat-app-headline-small-tracking, 0.03125em))}.mat-mdc-dialog-content{display:block;flex-grow:1;box-sizing:border-box;margin:0;overflow:auto;max-height:65vh}.mat-mdc-dialog-content>:first-child{margin-top:0}.mat-mdc-dialog-content>:last-child{margin-bottom:0}.mat-mdc-dialog-container .mat-mdc-dialog-content{color:var(--mdc-dialog-supporting-text-color, var(--mat-app-on-surface-variant, rgba(0, 0, 0, 0.6)));font-family:var(--mdc-dialog-supporting-text-font, var(--mat-app-body-medium-font, inherit));line-height:var(--mdc-dialog-supporting-text-line-height, var(--mat-app-body-medium-line-height, 1.5rem));font-size:var(--mdc-dialog-supporting-text-size, var(--mat-app-body-medium-size, 1rem));font-weight:var(--mdc-dialog-supporting-text-weight, var(--mat-app-body-medium-weight, 400));letter-spacing:var(--mdc-dialog-supporting-text-tracking, var(--mat-app-body-medium-tracking, 0.03125em))}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0);padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.cdk-high-contrast-active .mat-mdc-dialog-actions{border-top-color:CanvasText}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}.mat-mdc-dialog-component-host{display:contents}'],encapsulation:2})}return n})();const Yj="--mat-dialog-transition-duration";function Kj(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?sj(n.substring(0,n.length-2)):n.endsWith("s")?1e3*sj(n.substring(0,n.length-1)):"0"===n?0:null}var Rv=function(n){return n[n.OPEN=0]="OPEN",n[n.CLOSING=1]="CLOSING",n[n.CLOSED=2]="CLOSED",n}(Rv||{});class Ov{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new ue,this._beforeClosed=new ue,this._state=Rv.OPEN,this.disableClose=t.disableClose,this.id=e.id,e.addPanelClass("mat-mdc-dialog-panel"),i._animationStateChanged.pipe(vt(r=>"opened"===r.state),qn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(vt(r=>"closed"===r.state),qn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Qc(this.backdropClick(),this.keydownEvents().pipe(vt(r=>27===r.keyCode&&!this.disableClose&&!Av(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function Jj(n,e,t){return n._closeInteractionType=e,n.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(vt(t=>"closing"===t.state),qn(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=Rv.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=Rv.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const Zj=new F("MatMdcDialogData"),Gge=new F("mat-mdc-dialog-default-options"),Qj=new F("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{const n=P(Ja);return()=>n.scrollStrategies.block()}});let $ge=0,Pv=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,s,o,a,c,l){this._overlay=t,this._defaultOptions=s,this._scrollStrategy=o,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ue,this._afterOpenedAtThisLevel=new ue,this.dialogConfigClass=ES,this.afterAllClosed=Ny(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ga(void 0))),this._dialog=i.get(kge),this._dialogRefConstructor=Ov,this._dialogContainerType=Xj,this._dialogDataToken=Zj}open(t,i){let r;(i={...this._defaultOptions||new ES,...i}).id=i.id||"mat-mdc-dialog-"+$ge++,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:Mv,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,c)=>(r=new this._dialogRefConstructor(o,i,c),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}static#e=this.\u0275fac=function(i){return new(i||n)(I(Ja),I(ht),I(tl,8),I(Gge,8),I(Qj),I(n,12),I(wv),I(Lc,8))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qge=0,eH=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r}ngOnInit(){this._dialogRef||(this._dialogRef=function tH(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static#e=this.\u0275fac=function(i){return new(i||n)(R(Ov,8),R(gt),R(Pv))};static#t=this.\u0275dir=ie({type:n,standalone:!0})}return n})(),CS=(()=>{class n extends eH{constructor(){super(...arguments),this.id="mat-mdc-dialog-title-"+qge++}_onAdd(){this._dialogRef._containerInstance?._addAriaLabelledBy?.(this.id)}_onRemove(){this._dialogRef?._containerInstance?._removeAriaLabelledBy?.(this.id)}static#e=this.\u0275fac=(()=>{let t;return function(r){return(t||(t=zt(n)))(r||n)}})();static#t=this.\u0275dir=ie({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(i,r){2&i&&Sf("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"],standalone:!0,features:[Je]})}return n})(),AS=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=ie({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"],standalone:!0,features:[$N([vpe])]})}return n})();let iH=(()=>{class n{constructor(t){this.http=t,this.panelContent=new wn({content:[],infoTitle:"",videoID:""})}updateData(t,i,r){this.http.get(t,{responseType:"text"}).subscribe(s=>{const o={content:this.parseMarkdown(s),infoTitle:r,videoID:i};this.panelContent.next(o)})}parseMarkdown(t){const i=[],r=t.split("# ");for(const s of r)if(s.length){const o=s.includes("\n\n")?"\n\n":"\r\n\r\n",a=s.split(o);i.push({title:a[0],content:a.splice(1).join(o)})}return i}static#e=this.\u0275fac=function(i){return new(i||n)(I(Ds))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Kge=["*"];let Nv;function Rp(n){return function Jge(){if(void 0===Nv&&(Nv=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(Nv=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Nv}()?.createHTML(n)||n}function rH(n){return Error(`Unable to find icon with the name "${n}"`)}function sH(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function oH(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class yl{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let Fv=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new yl(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize(hi.HTML,r);if(!o)throw oH(r);const a=Rp(o);return this._addSvgIconConfig(t,i,new yl("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new yl(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize(hi.HTML,i);if(!s)throw oH(i);const o=Rp(s);return this._addSvgIconSetConfig(t,new yl("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize(hi.RESOURCE_URL,t);if(!i)throw sH(t);const r=this._cachedIconsByUrl.get(i);return r?Z(kv(r)):this._loadSvgIconFromConfig(new yl(t,null)).pipe(bt(s=>this._cachedIconsByUrl.set(i,s)),oe(s=>kv(s)))}getNamedSvgIcon(t,i=""){const r=aH(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):za(rH(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Z(kv(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(oe(i=>kv(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?Z(r):Kf(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Qs(a=>{const l=`Loading icon set URL: ${this._sanitizer.sanitize(hi.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),Z(null)})))).pipe(oe(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw rH(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(bt(i=>t.svgText=i),oe(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Z(null):this._fetchIcon(t).pipe(bt(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(Rp("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(Rp("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function Zge(){return Error("Could not find HttpClient for use with Angular Material icons. Please add provideHttpClient() to your providers.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize(hi.RESOURCE_URL,i);if(!o)throw sH(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const c=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(oe(l=>Rp(l)),sl(()=>this._inProgressUrlFetches.delete(o)),qo());return this._inProgressUrlFetches.set(o,c),c}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(aH(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return eme(s)?new yl(s.url,null,s.options):new yl(s,null)}}static#e=this.\u0275fac=function(i){return new(i||n)(I(Ds,8),I(qf),I(Xe,8),I(tr))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kv(n){return n.cloneNode(!0)}function aH(n,e){return n+":"+e}function eme(n){return!(!n.url||!n.options)}const tme=new F("MAT_ICON_DEFAULT_OPTIONS"),nme=new F("mat-icon-location",{providedIn:"root",factory:function ime(){const n=P(Xe),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),cH=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],rme=cH.map(n=>`[${n}]`).join(", "),sme=/^url\(['"]?#(.*?)['"]?\)$/;let lH=(()=>{class n{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,s,o,a){this._elementRef=t,this._iconRegistry=i,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=xt.EMPTY,a&&(a.color&&(this.color=this._defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(rme),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)cH.forEach(o=>{const a=i[s],c=a.getAttribute(o),l=c?c.match(sme):null;if(l){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:l[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(qn(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}static#e=this.\u0275fac=function(i){return new(i||n)(R(gt),R(Fv),Ta("aria-hidden"),R(nme),R(tr),R(tme,8))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(i,r){2&i&&(Tn("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Yu(r.color?"mat-"+r.color:""),yn("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:[2,"inline","inline",Sn],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Oa,Ii],ngContentSelectors:Kge,decls:1,vars:0,template:function(i,r){1&i&&(Ks(),ei(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),uH=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const dH=new F("CdkAccordion");let ame=0,cme=(()=>{class n{get expanded(){return this._expanded}set expanded(t){this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=xt.EMPTY,this.closed=new be,this.opened=new be,this.destroyed=new be,this.expandedChange=new be,this.id="cdk-accordion-child-"+ame++,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}static#e=this.\u0275fac=function(i){return new(i||n)(R(dH,12),R(ar),R(uH))};static#t=this.\u0275dir=ie({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[2,"expanded","expanded",Sn],disabled:[2,"disabled","disabled",Sn]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[Dt([{provide:dH,useValue:void 0}]),Oa]})}return n})();const lme=["body"],ume=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],dme=["mat-expansion-panel-header","*","mat-action-row"];function hme(n,e){}const fme=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],pme=["mat-panel-title","mat-panel-description","*"];function gme(n,e){1&n&&(we(0,"span",1),xm(),we(1,"svg",2),fi(2,"path",3),Te()()),2&n&&mt("@indicatorRotate",bs()._getExpandedState())}const hH=new F("MAT_ACCORDION"),fH="225ms cubic-bezier(0.4,0.0,0.2,1)",pH={indicatorRotate:bS("indicatorRotate",[Td("collapsed, void",Za({transform:"rotate(0deg)"})),Td("expanded",Za({transform:"rotate(180deg)"})),Dv("expanded <=> collapsed, void => collapsed",Iv(fH))]),bodyExpansion:bS("bodyExpansion",[Td("collapsed, void",Za({height:"0px",visibility:"hidden"})),Td("expanded",Za({height:"*",visibility:""})),Dv("expanded <=> collapsed, void => collapsed",Iv(fH))])},gH=new F("MAT_EXPANSION_PANEL");let mme=(()=>{class n{constructor(t,i){this._template=t,this._expansionPanel=i}static#e=this.\u0275fac=function(i){return new(i||n)(R(_s),R(gH,8))};static#t=this.\u0275dir=ie({type:n,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0})}return n})(),_me=0;const mH=new F("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let _H=(()=>{class n extends cme{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=t}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}constructor(t,i,r,s,o,a,c){super(t,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new be,this.afterCollapse=new be,this._inputChanges=new ue,this._headerId="mat-expansion-panel-header-"+_me++,this.accordion=t,this._document=o,this._animationsDisabled="NoopAnimations"===a,c&&(this.hideToggle=c.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Ga(null),vt(()=>this.expanded&&!this._portal),qn(1)).subscribe(()=>{this._portal=new fS(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}_animationStarted(t){!yH(t)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(t){yH(t)||("expanded"===t.toState?this.afterExpand.emit():"collapsed"===t.toState&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}static#e=this.\u0275fac=function(i){return new(i||n)(R(hH,12),R(ar),R(uH),R(zi),R(Xe),R(Lc,8),R(mH,8))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(i,r,s){if(1&i&&OC(s,mme,5),2&i){let o;Es(o=ws())&&(r._lazyContent=o.first)}},viewQuery:function(i,r){if(1&i&&Ho(lme,5),2&i){let s;Es(s=ws())&&(r._body=s.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(i,r){2&i&&yn("mat-expanded",r.expanded)("_mat-animation-noopable",r._animationsDisabled)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:[2,"hideToggle","hideToggle",Sn],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[Dt([{provide:hH,useValue:void 0},{provide:gH,useExisting:n}]),Oa,Je,zn,Ii],ngContentSelectors:dme,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(i,r){if(1&i){const s=Ys();Ks(ume),ei(0),we(1,"div",1,0),ot("@bodyExpansion.start",function(a){return fn(s),pn(r._animationStarted(a))})("@bodyExpansion.done",function(a){return fn(s),pn(r._animationDone(a))}),we(3,"div",2),ei(4,1),Gi(5,hme,0,0,"ng-template",3),Te(),ei(6,2),Te()}2&i&&(je(),mt("@bodyExpansion",r._getExpandedState())("id",r.id),Tn("aria-labelledby",r._headerId),je(4),mt("cdkPortalOutlet",r._portal))},dependencies:[Ev],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color, var(--mat-app-surface));color:var(--mat-expansion-container-text-color, var(--mat-app-on-surface));border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font, var(--mat-app-body-large-font));font-size:var(--mat-expansion-container-text-size, var(--mat-app-body-large-size));font-weight:var(--mat-expansion-container-text-weight, var(--mat-app-body-large-weight));line-height:var(--mat-expansion-container-text-line-height, var(--mat-app-body-large-line-height));letter-spacing:var(--mat-expansion-container-text-tracking, var(--mat-app-body-large-tracking))}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color, var(--mat-app-outline))}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[pH.bodyExpansion]},changeDetection:0})}return n})();function yH(n){return"void"===n.fromState}let yme=(()=>{class n{constructor(t,i,r,s,o,a,c){this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=xt.EMPTY,this.tabIndex=0;const l=t.accordion?t.accordion._stateChanges.pipe(vt(u=>!(!u.hideToggle&&!u.togglePosition))):cr;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=Qc(t.opened,t.closed,l,t._inputChanges.pipe(vt(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(vt(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:Av(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static#e=this.\u0275fac=function(i){return new(i||n)(R(_H,1),R(gt),R(xv),R(ar),R(mH,8),R(Lc,8),Ta("tabindex"))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(i,r){1&i&&ot("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),2&i&&(Tn("id",r.panel._headerId)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),Af("height",r._getHeaderHeight()),yn("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[2,"tabIndex","tabIndex",t=>null==t?0:jf(t)]},standalone:!0,features:[Oa,Ii],ngContentSelectors:pme,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(i,r){1&i&&(Ks(fme),we(0,"span",0),ei(1),ei(2,1),ei(3,2),Te(),Gi(4,gme,3,1,"span",1)),2&i&&(yn("mat-content-hide-toggle",!r._showToggle()),je(4),I_(r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font, var(--mat-app-title-medium-font));font-size:var(--mat-expansion-header-text-size, var(--mat-app-title-medium-size));font-weight:var(--mat-expansion-header-text-weight, var(--mat-app-title-medium-weight));line-height:var(--mat-expansion-header-text-line-height, var(--mat-app-title-medium-line-height));letter-spacing:var(--mat-expansion-header-text-tracking, var(--mat-app-title-medium-tracking))}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color, var(--mat-app-surface))}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color, var(--mat-app-on-surface))}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color, var(--mat-app-on-surface-variant))}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color, var(--mat-app-on-surface-variant));display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[pH.indicatorRotate]},changeDetection:0})}return n})();function vH(n,e,t){return t?vH(n,e).pipe(Ty(t)):new me(i=>{const r=(...o)=>i.next(1===o.length?o[0]:o),s=n(r);return Ve(e)?()=>e(r,s):void 0})}const vme=["youtubeContainer"];function bme(n,e){if(1&n){const t=Ys();we(0,"youtube-player-placeholder",2),ot("click",function(){return fn(t),pn(bs()._load(!0))}),Te()}if(2&n){const t=bs();mt("videoId",t.videoId)("width",t.width)("height",t.height)("isLoading",t._isLoading)("buttonLabel",t.placeholderButtonLabel)("quality",t.placeholderImageQuality)}}let Eme=(()=>{class n{_getBackgroundImage(){let t;return t="low"===this.quality?`https://i.ytimg.com/vi/${this.videoId}/hqdefault.jpg`:"high"===this.quality?`https://i.ytimg.com/vi/${this.videoId}/maxresdefault.jpg`:`https://i.ytimg.com/vi_webp/${this.videoId}/sddefault.webp`,`url(${t})`}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Ut({type:n,selectors:[["youtube-player-placeholder"]],hostAttrs:[1,"youtube-player-placeholder"],hostVars:8,hostBindings:function(i,r){2&i&&(Af("background-image",r._getBackgroundImage())("width",r.width,"px")("height",r.height,"px"),yn("youtube-player-placeholder-loading",r.isLoading))},inputs:{videoId:"videoId",width:"width",height:"height",isLoading:"isLoading",buttonLabel:"buttonLabel",quality:"quality"},standalone:!0,features:[Ii],decls:4,vars:1,consts:[["type","button",1,"youtube-player-placeholder-button"],["height","100%","version","1.1","viewBox","0 0 68 48","focusable","false","aria-hidden","true"],["d","M66.52,7.74c-0.78-2.93-2.49-5.41-5.42-6.19C55.79,.13,34,0,34,0S12.21,.13,6.9,1.55 C3.97,2.33,2.27,4.81,1.48,7.74C0.06,13.05,0,24,0,24s0.06,10.95,1.48,16.26c0.78,2.93,2.49,5.41,5.42,6.19 C12.21,47.87,34,48,34,48s21.79-0.13,27.1-1.55c2.93-0.78,4.64-3.26,5.42-6.19C67.94,34.95,68,24,68,24S67.94,13.05,66.52,7.74z","fill","#f00"],["d","M 45,24 27,14 27,34","fill","#fff"]],template:function(i,r){1&i&&(we(0,"button",0),xm(),we(1,"svg",1),fi(2,"path",2)(3,"path",3),Te()()),2&i&&Tn("aria-label",r.buttonLabel)},styles:[".youtube-player-placeholder{display:flex;align-items:center;justify-content:center;width:100%;overflow:hidden;cursor:pointer;background-color:#000;background-position:center center;background-size:cover;transition:box-shadow 300ms ease;box-shadow:inset 0 120px 90px -90px rgba(0,0,0,.8)}.youtube-player-placeholder-button{transition:opacity 300ms ease;-moz-appearance:none;-webkit-appearance:none;background:none;border:none;padding:0;display:flex}.youtube-player-placeholder-button svg{width:68px;height:48px}.youtube-player-placeholder-loading{box-shadow:none}.youtube-player-placeholder-loading .youtube-player-placeholder-button{opacity:0}"],encapsulation:2,changeDetection:0})}return n})();const wme=new F("YOUTUBE_PLAYER_CONFIG");function wH(n){return null==n?n:jf(n,0)}var so=function(n){return n[n.UNSTARTED=-1]="UNSTARTED",n[n.ENDED=0]="ENDED",n[n.PLAYING=1]="PLAYING",n[n.PAUSED=2]="PAUSED",n[n.BUFFERING=3]="BUFFERING",n[n.CUED=5]="CUED",n}(so||{});let Cme=(()=>{class n{get height(){return this._height}set height(t){this._height=null==t||isNaN(t)?390:t}get width(){return this._width}set width(t){this._width=null==t||isNaN(t)?640:t}constructor(t,i){this._ngZone=t,this._destroyed=new ue,this._playerChanges=new wn(void 0),this._nonce=P(Um,{optional:!0}),this._changeDetectorRef=P(ar),this._isLoading=!1,this._hasPlaceholder=!0,this._height=390,this._width=640,this.disableCookies=!1,this.disablePlaceholder=!1,this.showBeforeIframeApiLoads=!1,this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange");const r=P(wme,{optional:!0});this.loadApi=r?.loadApi??!0,this.disablePlaceholder=!!r?.disablePlaceholder,this.placeholderButtonLabel=r?.placeholderButtonLabel||"Play video",this.placeholderImageQuality=r?.placeholderImageQuality||"standard",this._isBrowser=Ha(i)}ngAfterViewInit(){this._conditionallyLoad()}ngOnChanges(t){this._shouldRecreatePlayer(t)?this._conditionallyLoad():this._player&&((t.width||t.height)&&this._setSize(),t.suggestedQuality&&this._setQuality(),(t.startSeconds||t.endSeconds||t.suggestedQuality)&&this._cuePlayer())}ngOnDestroy(){this._pendingPlayer?.destroy(),this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():(this._getPendingState().playbackState=so.PLAYING,this._load(!0))}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=so.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=so.CUED}seekTo(t,i){this._player?this._player.seekTo(t,i):this._getPendingState().seek={seconds:t,allowSeekAhead:i}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(t){this._player?this._player.setVolume(t):this._getPendingState().volume=t}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(t){if(this._player)return this._player.setPlaybackRate(t);this._getPendingState().playbackRate=t}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:so.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_load(t){this._isBrowser&&(window.YT&&window.YT.Player?this._createPlayer(t):(this.loadApi&&(this._isLoading=!0,function Ame(n){if(TS)return;const t=document.createElement("script"),i=r=>{t.removeEventListener("load",i),t.removeEventListener("error",i),"error"===r.type&&(TS=!1)};t.addEventListener("load",i),t.addEventListener("error",i),t.src="https://www.youtube.com/iframe_api",t.async=!0,n&&t.setAttribute("nonce",n),TS=!0,document.body.appendChild(t)}(this._nonce)),this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback?.(),this._ngZone.run(()=>this._createPlayer(t))}))}_conditionallyLoad(){this._shouldShowPlaceholder()?1===this.playerVars?.autoplay&&this._load(!0):this._load(!1)}_shouldShowPlaceholder(){return!this.disablePlaceholder&&(!this._isBrowser||this._hasPlaceholder&&!!this.videoId&&!this._player)}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_shouldRecreatePlayer(t){const i=t.videoId||t.playerVars||t.disableCookies||t.disablePlaceholder;return!!i&&!i.isFirstChange()}_createPlayer(t){if(this._player?.destroy(),this._pendingPlayer?.destroy(),typeof YT>"u"||!this.videoId&&!this.playerVars?.list)return;const i=this._ngZone.runOutsideAngular(()=>new YT.Player(this.youtubeContainer.nativeElement,{videoId:this.videoId,host:this.disableCookies?"https://www.youtube-nocookie.com":void 0,width:this.width,height:this.height,playerVars:t?{...this.playerVars||{},autoplay:1}:this.playerVars})),r=()=>{this._ngZone.run(()=>{this._isLoading=!1,this._hasPlaceholder=!1,this._player=i,this._pendingPlayer=void 0,i.removeEventListener("onReady",r),this._playerChanges.next(i),this._setSize(),this._setQuality(),this._pendingPlayerState&&(this._applyPendingPlayerState(i,this._pendingPlayerState),this._pendingPlayerState=void 0);const s=i.getPlayerState();(s===so.UNSTARTED||s===so.CUED||null==s)&&this._cuePlayer(),this._changeDetectorRef.markForCheck()})};this._pendingPlayer=i,i.addEventListener("onReady",r)}_applyPendingPlayerState(t,i){const{playbackState:r,playbackRate:s,volume:o,muted:a,seek:c}=i;switch(r){case so.PLAYING:t.playVideo();break;case so.PAUSED:t.pauseVideo();break;case so.CUED:t.stopVideo()}null!=s&&t.setPlaybackRate(s),null!=o&&t.setVolume(o),null!=a&&(a?t.mute():t.unMute()),null!=c&&t.seekTo(c.seconds,c.allowSeekAhead)}_cuePlayer(){this._player&&this.videoId&&this._player.cueVideoById({videoId:this.videoId,startSeconds:this.startSeconds,endSeconds:this.endSeconds,suggestedQuality:this.suggestedQuality})}_setSize(){this._player?.setSize(this.width,this.height)}_setQuality(){this._player&&this.suggestedQuality&&this._player.setPlaybackQuality(this.suggestedQuality)}_getLazyEmitter(t){return this._playerChanges.pipe(nn(i=>i?vH(r=>{i.addEventListener(t,r)},r=>{try{i?.removeEventListener?.(t,r)}catch{}}):Z()),i=>new me(r=>i.subscribe({next:s=>this._ngZone.run(()=>r.next(s)),error:s=>r.error(s),complete:()=>r.complete()})),Ss(this._destroyed))}static#e=this.\u0275fac=function(i){return new(i||n)(R(pe),R(zr))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["youtube-player"]],viewQuery:function(i,r){if(1&i&&Ho(vme,7),2&i){let s;Es(s=ws())&&(r.youtubeContainer=s.first)}},inputs:{videoId:"videoId",height:[2,"height","height",jf],width:[2,"width","width",jf],startSeconds:[2,"startSeconds","startSeconds",wH],endSeconds:[2,"endSeconds","endSeconds",wH],suggestedQuality:"suggestedQuality",playerVars:"playerVars",disableCookies:[2,"disableCookies","disableCookies",Sn],loadApi:[2,"loadApi","loadApi",Sn],disablePlaceholder:[2,"disablePlaceholder","disablePlaceholder",Sn],showBeforeIframeApiLoads:[2,"showBeforeIframeApiLoads","showBeforeIframeApiLoads",Sn],placeholderButtonLabel:"placeholderButtonLabel",placeholderImageQuality:"placeholderImageQuality"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},standalone:!0,features:[Oa,zn,Ii],decls:4,vars:3,consts:[["youtubeContainer",""],[3,"videoId","width","height","isLoading","buttonLabel","quality"],[3,"click","videoId","width","height","isLoading","buttonLabel","quality"]],template:function(i,r){1&i&&(Gi(0,bme,1,6,"youtube-player-placeholder",1),we(1,"div"),fi(2,"div",null,0),Te()),2&i&&(I_(r._shouldShowPlaceholder()?0:-1),je(),Af("display",r._shouldShowPlaceholder()?"none":""))},dependencies:[Eme],encapsulation:2,changeDetection:0})}return n})(),TS=!1;let vl={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function CH(n){vl=n}const AH=/[&<>"']/,Tme=new RegExp(AH.source,"g"),TH=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Sme=new RegExp(TH.source,"g"),xme={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},SH=n=>xme[n];function Dr(n,e){if(e){if(AH.test(n))return n.replace(Tme,SH)}else if(TH.test(n))return n.replace(Sme,SH);return n}const Mme=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Ime(n){return n.replace(Mme,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const Dme=/(^|[^\[])\^/g;function Ot(n,e){let t="string"==typeof n?n:n.source;e=e||"";const i={replace:(r,s)=>{let o="string"==typeof s?s:s.source;return o=o.replace(Dme,"$1"),t=t.replace(r,o),i},getRegex:()=>new RegExp(t,e)};return i}function xH(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const Op={exec:()=>null};function MH(n,e){const i=n.replace(/\|/g,(s,o,a)=>{let c=!1,l=o;for(;--l>=0&&"\\"===a[l];)c=!c;return c?"|":" |"}).split(/ \|/);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function Lv(n,e,t){const i=n.length;if(0===i)return"";let r=0;for(;r<i;){const s=n.charAt(i-r-1);if(s!==e||t){if(s===e||!t)break;r++}else r++}return n.slice(0,i-r)}function IH(n,e,t,i){const r=e.href,s=e.title?Dr(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if("!"!==n[0].charAt(0)){i.state.inLink=!0;const a={type:"link",raw:t,href:r,title:s,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:t,href:r,title:s,text:Dr(o)}}class Bv{options;rules;lexer;constructor(e){this.options=e||vl}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Lv(i,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=function Ome(n,e){const t=n.match(/^(\s+)(?:```)/);if(null===t)return e;const i=t[1];return e.split("\n").map(r=>{const s=r.match(/^\s+/);if(null===s)return r;const[o]=s;return o.length>=i.length?r.slice(i.length):r}).join("\n")}(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=Lv(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let i=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1");i=Lv(i.replace(/^ *>[ \t]?/gm,""),"\n");const r=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(i);return this.lexer.state.top=r,{type:"blockquote",raw:t[0],tokens:s,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const o=new RegExp(`^( {0,3}${i})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a="",c="",l=!1;for(;e;){let u=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let d=t[2].split("\n",1)[0].replace(/^\t+/,y=>" ".repeat(3*y.length)),h=e.split("\n",1)[0],f=0;this.options.pedantic?(f=2,c=d.trimStart()):(f=t[2].search(/[^ ]/),f=f>4?1:f,c=d.slice(f),f+=t[1].length);let p=!1;if(!d&&/^ *$/.test(h)&&(a+=h+"\n",e=e.substring(h.length+1),u=!0),!u){const y=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),v=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),_=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),w=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;e;){const A=e.split("\n",1)[0];if(h=A,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),_.test(h)||w.test(h)||y.test(h)||v.test(e))break;if(h.search(/[^ ]/)>=f||!h.trim())c+="\n"+h.slice(f);else{if(p||d.search(/[^ ]/)>=4||_.test(d)||w.test(d)||v.test(d))break;c+="\n"+h}!p&&!h.trim()&&(p=!0),a+=A+"\n",e=e.substring(A.length+1),d=h.slice(f)}}s.loose||(l?s.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let m,g=null;this.options.gfm&&(g=/^\[[ xX]\] /.exec(c),g&&(m="[ ] "!==g[0],c=c.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!g,checked:m,loose:!1,text:c,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=c.trimEnd(),s.raw=s.raw.trimEnd();for(let u=0;u<s.items.length;u++)if(this.lexer.state.top=!1,s.items[u].tokens=this.lexer.blockTokens(s.items[u].text,[]),!s.loose){const d=s.items[u].tokens.filter(f=>"space"===f.type),h=d.length>0&&d.some(f=>/\n.*\n/.test(f.raw));s.loose=h}if(s.loose)for(let u=0;u<s.items.length;u++)s.items[u].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const i=MH(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===r.length){for(const a of r)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(const a of i)o.header.push({text:a,tokens:this.lexer.inline(a)});for(const a of s)o.rows.push(MH(a,o.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Dr(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=Lv(i.slice(0,-1),"\\");if((i.length-o.length)%2==0)return}else{const o=function Rme(n,e){if(-1===n.indexOf(e[1]))return-1;let t=0;for(let i=0;i<n.length;i++)if("\\"===n[i])i++;else if(n[i]===e[0])t++;else if(n[i]===e[1]&&(t--,t<0))return i;return-1}(t[2],"()");if(o>-1){const c=(0===t[0].indexOf("!")?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);o&&(r=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(r=this.options.pedantic&&!/>$/.test(i)?r.slice(1):r.slice(1,-1)),IH(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const s=t[(i[2]||i[1]).replace(/\s+/g," ").toLowerCase()];if(!s){const o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return IH(i,s,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))&&(!r[1]&&!r[2]||!i||this.rules.inline.punctuation.exec(i))){const o=[...r[0]].length-1;let a,c,l=o,u=0;const d="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+o);null!=(r=d.exec(t));){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(c=[...a].length,r[3]||r[4]){l+=c;continue}if((r[5]||r[6])&&o%3&&!((o+c)%3)){u+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+u);const h=[...r[0]][0].length,f=e.slice(0,o+r.index+h+c);if(Math.min(o,c)%2){const g=f.slice(1,-1);return{type:"em",raw:f,text:g,tokens:this.lexer.inlineTokens(g)}}const p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=Dr(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,r;return"@"===t[2]?(i=Dr(t[1]),r="mailto:"+i):(i=Dr(t[1]),r=i),{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,r;if("@"===t[2])i=Dr(t[0]),r="mailto:"+i;else{let s;do{s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(s!==t[0]);i=Dr(t[0]),r="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return i=this.lexer.state.inRawBlock?t[0]:Dr(t[0]),{type:"text",raw:t[0],text:i}}}}const Pp=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,DH=/(?:[*+-]|\d{1,9}[.)])/,RH=Ot(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,DH).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),xS=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,MS=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Bme=Ot(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",MS).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Vme=Ot(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,DH).getRegex(),Vv="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",IS=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ume=Ot("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",IS).replace("tag",Vv).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),OH=Ot(xS).replace("hr",Pp).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Vv).getRegex(),DS={blockquote:Ot(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",OH).getRegex(),code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,def:Bme,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:Pp,html:Ume,lheading:RH,list:Vme,newline:/^(?: *(?:\n|$))+/,paragraph:OH,table:Op,text:/^[^\n]+/},PH=Ot("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Pp).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Vv).getRegex(),jme={...DS,table:PH,paragraph:Ot(xS).replace("hr",Pp).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",PH).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Vv).getRegex()},Hme={...DS,html:Ot("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",IS).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Op,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ot(xS).replace("hr",Pp).replace("heading"," *#{1,6} *[^\n]").replace("lheading",RH).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},NH=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,FH=/^( {2,}|\\)\n(?!\s*$)/,Np="\\p{P}\\p{S}",Wme=Ot(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Np).getRegex(),qme=Ot(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Np).getRegex(),Xme=Ot("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Np).getRegex(),Yme=Ot("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Np).getRegex(),Kme=Ot(/\\([punct])/,"gu").replace(/punct/g,Np).getRegex(),Jme=Ot(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Zme=Ot(IS).replace("(?:--\x3e|$)","--\x3e").getRegex(),Qme=Ot("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Zme).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Uv=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,e_e=Ot(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Uv).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),kH=Ot(/^!?\[(label)\]\[(ref)\]/).replace("label",Uv).replace("ref",MS).getRegex(),LH=Ot(/^!?\[(ref)\](?:\[\])?/).replace("ref",MS).getRegex(),RS={_backpedal:Op,anyPunctuation:Kme,autolink:Jme,blockSkip:/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,br:FH,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:Op,emStrongLDelim:qme,emStrongRDelimAst:Xme,emStrongRDelimUnd:Yme,escape:NH,link:e_e,nolink:LH,punctuation:Wme,reflink:kH,reflinkSearch:Ot("reflink|nolink(?!\\()","g").replace("reflink",kH).replace("nolink",LH).getRegex(),tag:Qme,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:Op},n_e={...RS,link:Ot(/^!?\[(label)\]\((.*?)\)/).replace("label",Uv).getRegex(),reflink:Ot(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Uv).getRegex()},OS={...RS,escape:Ot(NH).replace("])","~|])").getRegex(),url:Ot(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},i_e={...OS,br:Ot(FH).replace("{2,}","*").getRegex(),text:Ot(OS.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},jv={normal:DS,gfm:jme,pedantic:Hme},Fp={normal:RS,gfm:OS,breaks:i_e,pedantic:n_e};class oo{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||vl,this.options.tokenizer=this.options.tokenizer||new Bv,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:jv.normal,inline:Fp.normal};this.options.pedantic?(t.block=jv.pedantic,t.inline=Fp.pedantic):this.options.gfm&&(t.block=jv.gfm,t.inline=this.options.breaks?Fp.breaks:Fp.gfm),this.tokenizer.rules=t}static get rules(){return{block:jv,inline:Fp}}static lex(e,t){return new oo(t).lex(e)}static lexInline(e,t){return new oo(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const i=this.inlineQueue[t];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){let i,r,s,o;for(e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>!!(i=a.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),1===i.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?t.push(i):(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=t[t.length-1],!r||"paragraph"!==r.type&&"text"!==r.type?this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title}):(r.raw+="\n"+i.raw,r.text+="\n"+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text);continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),"number"==typeof l&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){r=t[t.length-1],o&&"paragraph"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i),o=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===r.type?(r.raw+="\n"+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i,r,s,a,c,l,o=e;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(a=this.tokenizer.rules.inline.reflinkSearch.exec(o));)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(a=this.tokenizer.rules.inline.blockSkip.exec(o));)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(a=this.tokenizer.rules.inline.anyPunctuation.exec(o));)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>!!(i=u.call({lexer:this},e,t))&&(e=e.substring(i.raw.length),t.push(i),!0)))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=t[t.length-1],r&&"text"===i.type&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,o,l)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),t.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=e.slice(1);let h;this.options.extensions.startInline.forEach(f=>{h=f.call({lexer:this},d),"number"==typeof h&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(i=this.tokenizer.inlineText(s)){e=e.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(l=i.raw.slice(-1)),c=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}return t}}class bl{options;constructor(e){this.options=e||vl}code(e,t,i){const r=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+"\n",r?'<pre><code class="language-'+Dr(r)+'">'+(i?e:Dr(e,!0))+"</code></pre>\n":"<pre><code>"+(i?e:Dr(e,!0))+"</code></pre>\n"}blockquote(e){return`<blockquote>\n${e}</blockquote>\n`}html(e,t){return e}heading(e,t,i){return`<h${t}>${e}</h${t}>\n`}hr(){return"<hr>\n"}list(e,t,i){const r=t?"ol":"ul";return"<"+r+(t&&1!==i?' start="'+i+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e,t,i){return`<li>${e}</li>\n`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>\n`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return`<tr>\n${e}</tr>\n`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>\n`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,i){const r=xH(e);if(null===r)return i;let s='<a href="'+(e=r)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+i+"</a>",s}image(e,t,i){const r=xH(e);if(null===r)return i;let s=`<img src="${e=r}" alt="${i}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}}class PS{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class ao{options;renderer;textRenderer;constructor(e){this.options=e||vl,this.options.renderer=this.options.renderer||new bl,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new PS}static parse(e,t){return new ao(t).parse(e)}static parseInline(e,t){return new ao(t).parseInline(e)}parse(e,t=!0){let i="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(!1!==a||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){i+=a||"";continue}}switch(s.type){case"space":continue;case"hr":i+=this.renderer.hr();continue;case"heading":{const o=s;i+=this.renderer.heading(this.parseInline(o.tokens),o.depth,Ime(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":i+=this.renderer.code(s.text,s.lang,!!s.escaped);continue;case"table":{const o=s;let a="",c="";for(let u=0;u<o.header.length;u++)c+=this.renderer.tablecell(this.parseInline(o.header[u].tokens),{header:!0,align:o.align[u]});a+=this.renderer.tablerow(c);let l="";for(let u=0;u<o.rows.length;u++){const d=o.rows[u];c="";for(let h=0;h<d.length;h++)c+=this.renderer.tablecell(this.parseInline(d[h].tokens),{header:!1,align:o.align[h]});l+=this.renderer.tablerow(c)}i+=this.renderer.table(a,l);continue}case"blockquote":{const a=this.parse(s.tokens);i+=this.renderer.blockquote(a);continue}case"list":{const o=s,a=o.ordered,c=o.start,l=o.loose;let u="";for(let d=0;d<o.items.length;d++){const h=o.items[d],f=h.checked,p=h.task;let g="";if(h.task){const m=this.renderer.checkbox(!!f);l?h.tokens.length>0&&"paragraph"===h.tokens[0].type?(h.tokens[0].text=m+" "+h.tokens[0].text,h.tokens[0].tokens&&h.tokens[0].tokens.length>0&&"text"===h.tokens[0].tokens[0].type&&(h.tokens[0].tokens[0].text=m+" "+h.tokens[0].tokens[0].text)):h.tokens.unshift({type:"text",text:m+" "}):g+=m+" "}g+=this.parse(h.tokens,l),u+=this.renderer.listitem(g,p,!!f)}i+=this.renderer.list(u,a,c);continue}case"html":i+=this.renderer.html(s.text,s.block);continue;case"paragraph":i+=this.renderer.paragraph(this.parseInline(s.tokens));continue;case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;r+1<e.length&&"text"===e[r+1].type;)o=e[++r],a+="\n"+(o.tokens?this.parseInline(o.tokens):o.text);i+=t?this.renderer.paragraph(a):a;continue}default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}parseInline(e,t){t=t||this.renderer;let i="";for(let r=0;r<e.length;r++){const s=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const o=this.options.extensions.renderers[s.type].call({parser:this},s);if(!1!==o||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=o||"";continue}}switch(s.type){case"escape":case"text":i+=t.text(s.text);break;case"html":i+=t.html(s.text);break;case"link":i+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break;case"image":i+=t.image(s.href,s.title,s.text);break;case"strong":i+=t.strong(this.parseInline(s.tokens,t));break;case"em":i+=t.em(this.parseInline(s.tokens,t));break;case"codespan":i+=t.codespan(s.text);break;case"br":i+=t.br();break;case"del":i+=t.del(this.parseInline(s.tokens,t));break;default:{const o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return i}}class Hv{options;constructor(e){this.options=e||vl}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}const El=new class r_e{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.#e(oo.lex,ao.parse);parseInline=this.#e(oo.lexInline,ao.parseInline);Parser=ao;Renderer=bl;TextRenderer=PS;Lexer=oo;Tokenizer=Bv;Hooks=Hv;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{const s=r;for(const o of s.header)i=i.concat(this.walkTokens(o.tokens,t));for(const o of s.rows)for(const a of o)i=i.concat(this.walkTokens(a.tokens,t));break}case"list":i=i.concat(this.walkTokens(r.items,t));break;default:{const s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{const a=s[o].flat(1/0);i=i.concat(this.walkTokens(a,t))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const o=t.renderers[s.name];t.renderers[s.name]=o?function(...a){let c=s.renderer.apply(this,a);return!1===c&&(c=o.apply(this,a)),c}:s.renderer}if("tokenizer"in s){if(!s.level||"block"!==s.level&&"inline"!==s.level)throw new Error("extension level must be 'block' or 'inline'");const o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&("block"===s.level?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:"inline"===s.level&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),r.extensions=t),i.renderer){const s=this.defaults.renderer||new bl(this.defaults);for(const o in i.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if("options"===o)continue;const c=i.renderer[o],l=s[o];s[o]=(...u)=>{let d=c.apply(s,u);return!1===d&&(d=l.apply(s,u)),d||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new Bv(this.defaults);for(const o in i.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const c=i.tokenizer[o],l=s[o];s[o]=(...u)=>{let d=c.apply(s,u);return!1===d&&(d=l.apply(s,u)),d}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new Hv;for(const o in i.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if("options"===o)continue;const c=i.hooks[o],l=s[o];s[o]=Hv.passThroughHooks.has(o)?u=>{if(this.defaults.async)return Promise.resolve(c.call(s,u)).then(h=>l.call(s,h));const d=c.call(s,u);return l.call(s,d)}:(...u)=>{let d=c.apply(s,u);return!1===d&&(d=l.apply(s,u)),d}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,o=i.walkTokens;r.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),s&&(c=c.concat(s.call(this,a))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return oo.lex(e,t??this.defaults)}parser(e,t){return ao.parse(e,t??this.defaults)}#e(e,t){return(i,r)=>{const s={...r},o={...this.defaults,...s};!0===this.defaults.async&&!1===s.async&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);const a=this.#t(!!o.silent,!!o.async);if(typeof i>"u"||null===i)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof i)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(i):i).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(i=o.hooks.preprocess(i));let c=e(i,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}#t(e,t){return i=>{if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const r="<p>An error occurred:</p><pre>"+Dr(i.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(i);throw i}}};function ft(n,e){return El.parse(n,e)}ft.options=ft.setOptions=function(n){return El.setOptions(n),CH(ft.defaults=El.defaults),ft},ft.getDefaults=function SS(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},ft.defaults=vl,ft.use=function(...n){return El.use(...n),CH(ft.defaults=El.defaults),ft},ft.walkTokens=function(n,e){return El.walkTokens(n,e)},ft.parseInline=El.parseInline,ft.Parser=ao,ft.parser=ao.parse,ft.Renderer=bl,ft.TextRenderer=PS,ft.Lexer=oo,ft.lexer=oo.lex,ft.Tokenizer=Bv,ft.Hooks=Hv,ft.parse=ft;const s_e=["*"];let BH=(()=>{class n{constructor(){this._buttonClick$=new ue,this.copied$=this._buttonClick$.pipe(nn(()=>Qc(Z(!0),lv(3e3).pipe(dT(!1)))),Jf(),Xr(1)),this.copiedText$=this.copied$.pipe(Ga(!1),oe(t=>t?"Copied":"Copy"))}onCopyToClipboardClick(){this._buttonClick$.next()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Ut({type:n,selectors:[["markdown-clipboard"]],standalone:!0,features:[Ii],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,r){1&i&&(we(0,"button",0),vn(1,"async"),ot("click",function(){return r.onCopyToClipboardClick()}),pi(2),vn(3,"async"),Te()),2&i&&(yn("copied",bn(1,3,r.copied$)),je(2),Js(bn(3,5,r.copiedText$)))},dependencies:[py],encapsulation:2,changeDetection:0})}return n})();const c_e=new F("CLIPBOARD_OPTIONS");var NS=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(NS||{});const VH=new F("MARKED_EXTENSIONS"),u_e=new F("MARKED_OPTIONS"),UH=new F("SECURITY_CONTEXT");let FS=(()=>{class n{get options(){return this._options}set options(t){this._options={...this.DEFAULT_MARKED_OPTIONS,...t}}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}constructor(t,i,r,s,o,a,c){this.clipboardOptions=t,this.extensions=i,this.platform=s,this.securityContext=o,this.http=a,this.sanitizer=c,this.DEFAULT_MARKED_OPTIONS={renderer:new bl},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new ue,this.reload$=this._reload$.asObservable(),this.options=r}parse(t,i=this.DEFAULT_PARSE_OPTIONS){const{decodeHtml:r,inline:s,emoji:o,mermaid:a,disableSanitizer:c}=i,l={...this.options,...i.markedOptions},u=l.renderer||this.renderer||new bl;this.extensions&&(this.renderer=this.extendsRendererForExtensions(u)),a&&(this.renderer=this.extendsRendererForMermaid(u));const d=this.trimIndentation(t),h=r?this.decodeHtml(d):d,f=o?this.parseEmoji(h):h,p=this.parseMarked(f,l,s);return(c?p:this.sanitizer.sanitize(this.securityContext,p))||""}render(t,i=this.DEFAULT_RENDER_OPTIONS,r){const{clipboard:s,clipboardOptions:o,katex:a,katexOptions:c,mermaid:l,mermaidOptions:u}=i;a&&this.renderKatex(t,{...this.DEFAULT_KATEX_OPTIONS,...c}),l&&this.renderMermaid(t,{...this.DEFAULT_MERMAID_OPTIONS,...u}),s&&this.renderClipboard(t,r,{...this.DEFAULT_CLIPBOARD_OPTIONS,...this.clipboardOptions,...o}),this.highlight(t)}reload(){this._reload$.next()}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe(oe(i=>this.handleExtension(t,i)))}highlight(t){if(!Ha(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;t||(t=document);const i=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,r=>r.classList.add("language-none")),Prism.highlightAllUnder(t)}decodeHtml(t){if(!Ha(this.platform))return t;const i=document.createElement("textarea");return i.innerHTML=t,i.value}extendsRendererForExtensions(t){const i=t;return!0===i.\u0275NgxMarkdownRendererExtendedForExtensions||(this.extensions?.length>0&&ft.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),t}extendsRendererForMermaid(t){const i=t;if(!0===i.\u0275NgxMarkdownRendererExtendedForMermaid)return t;const r=t.code;return t.code=function(s,o,a){return"mermaid"===o?`<div class="mermaid">${s}</div>`:r.call(this,s,o,a)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,t}handleExtension(t,i){const r=t.lastIndexOf("://"),s=r>-1?t.substring(r+4):t,o=s.lastIndexOf("/"),a=o>-1?s.substring(o+1).split("?")[0]:"",c=a.lastIndexOf("."),l=c>-1?a.substring(c+1):"";return l&&"md"!==l?"```"+l+"\n"+i+"\n```":i}parseMarked(t,i,r=!1){if(i.renderer){const s={...i.renderer};delete s.\u0275NgxMarkdownRendererExtendedForExtensions,delete s.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,ft.use({renderer:s})}return r?ft.parseInline(t,i):ft.parse(t,i)}parseEmoji(t){if(!Ha(this.platform))return t;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}renderKatex(t,i){if(Ha(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");renderMathInElement(t,i)}}renderClipboard(t,i,r){if(!Ha(this.platform))return;if(typeof ClipboardJS>"u")throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information");if(!i)throw new Error("[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function");const{buttonComponent:s,buttonTemplate:o}=r,a=t.querySelectorAll("pre");for(let c=0;c<a.length;c++){const l=a.item(c),u=document.createElement("div");u.style.position="relative",l.parentNode.insertBefore(u,l),u.appendChild(l);const d=document.createElement("div");let h,f;if(d.classList.add("markdown-clipboard-toolbar"),d.style.position="absolute",d.style.top=".5em",d.style.right=".5em",d.style.zIndex="1",u.insertAdjacentElement("beforeend",d),u.onmouseenter=()=>d.classList.add("hover"),u.onmouseleave=()=>d.classList.remove("hover"),s){const p=i.createComponent(s);h=p.hostView,p.changeDetectorRef.markForCheck()}else if(o)h=i.createEmbeddedView(o);else{const p=i.createComponent(BH);h=p.hostView,p.changeDetectorRef.markForCheck()}h.rootNodes.forEach(p=>{d.appendChild(p),f=new ClipboardJS(p,{text:()=>l.innerText})}),h.onDestroy(()=>f.destroy())}}renderMermaid(t,i=this.DEFAULT_MERMAID_OPTIONS){if(!Ha(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error("[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information");const r=t.querySelectorAll(".mermaid");0!==r.length&&(mermaid.initialize(i),mermaid.run({nodes:r}))}trimIndentation(t){if(!t)return"";let i;return t.split("\n").map(r=>{let s=i;return r.length>0&&(s=isNaN(s)?r.search(/\S|$/):Math.min(r.search(/\S|$/),s)),isNaN(i)&&(i=s),s?r.substring(s):r}).join("\n")}static#e=this.\u0275fac=function(i){return new(i||n)(I(c_e,8),I(VH,8),I(u_e,8),I(zr),I(UH),I(Ds,8),I(qf))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),jH=(()=>{class n{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(t){this._disableSanitizer=this.coerceBooleanProperty(t)}get inline(){return this._inline}set inline(t){this._inline=this.coerceBooleanProperty(t)}get clipboard(){return this._clipboard}set clipboard(t){this._clipboard=this.coerceBooleanProperty(t)}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get mermaid(){return this._mermaid}set mermaid(t){this._mermaid=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}get commandLine(){return this._commandLine}set commandLine(t){this._commandLine=this.coerceBooleanProperty(t)}constructor(t,i,r){this.element=t,this.markdownService=i,this.viewContainerRef=r,this.error=new be,this.load=new be,this.ready=new be,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new ue}ngOnChanges(){this.loadContent()}loadContent(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(Ss(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(t,i=!1){var r=this;return te(function*(){const s={decodeHtml:i,inline:r.inline,emoji:r.emoji,mermaid:r.mermaid,disableSanitizer:r.disableSanitizer},o={clipboard:r.clipboard,clipboardOptions:{buttonComponent:r.clipboardButtonComponent,buttonTemplate:r.clipboardButtonTemplate},katex:r.katex,katexOptions:r.katexOptions,mermaid:r.mermaid,mermaidOptions:r.mermaidOptions},a=yield r.markdownService.parse(t,s);r.element.nativeElement.innerHTML=a,r.handlePlugins(),r.markdownService.render(r.element.nativeElement,o,r.viewContainerRef),r.ready.emit()})()}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:t=>{this.render(t).then(()=>{this.load.emit(t)})},error:t=>this.error.emit(t)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,NS.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,NS.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,i){const r=t.querySelectorAll("pre");for(let s=0;s<r.length;s++){const o=i instanceof Array?i:[i];r.item(s).classList.add(...o)}}setPluginOptions(t,i){const r=t.querySelectorAll("pre");for(let s=0;s<r.length;s++)Object.keys(i).forEach(o=>{const a=i[o];if(a){const c=this.toLispCase(o);r.item(s).setAttribute(c,a.toString())}})}toLispCase(t){const i=t.match(/([A-Z])/g);if(!i)return t;let r=t.toString();for(let s=0,o=i.length;s<o;s++)r=r.replace(new RegExp(i[s]),"-"+i[s].toLowerCase());return"-"===r.slice(0,1)&&(r=r.slice(1)),r}static#e=this.\u0275fac=function(i){return new(i||n)(R(gt),R(FS),R(zi))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[zn,Ii],ngContentSelectors:s_e,decls:1,vars:0,template:function(i,r){1&i&&(Ks(),ei(0))},encapsulation:2})}return n})();var HH;function y_e(n,e){if(1&n&&(we(0,"div",16),fi(1,"youtube-player",17),Te()),2&n){const t=bs(3);je(),DC("videoId",t.videoID)}}function v_e(n,e){if(1&n&&(we(0,"mat-expansion-panel",11)(1,"mat-expansion-panel-header")(2,"h2",12),pi(3),Te()(),we(4,"div",13),fi(5,"markdown",14),Gi(6,y_e,2,1,"div",15),Te()()),2&n){const t=bs(),i=t.$implicit,r=t.index;mt("expanded",0===r),je(3),Js(i.title),je(2),yn("first",0===r),mt("data",i.content),je(),mt("ngIf",0===r)}}function b_e(n,e){if(1&n&&(we(0,"div",9),Gi(1,v_e,7,6,"mat-expansion-panel",10),Te()),2&n){const t=e.$implicit;je(),mt("ngIf",t)}}!function(n){let e;var r;let t,i;(r=e=n.SecurityLevel||(n.SecurityLevel={})).Strict="strict",r.Loose="loose",r.Antiscript="antiscript",r.Sandbox="sandbox",function(r){r.Base="base",r.Forest="forest",r.Dark="dark",r.Default="default",r.Neutral="neutral"}(t=n.Theme||(n.Theme={})),function(r){r[r.Debug=1]="Debug",r[r.Info=2]="Info",r[r.Warn=3]="Warn",r[r.Error=4]="Error",r[r.Fatal=5]="Fatal"}(i=n.LogLevel||(n.LogLevel={}))}(HH||(HH={}));let E_e=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i,this.documentationContents=i.content||[],this.infoTitle=i.title||"",this.videoID=i.videoID}ngOnInit(){const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.body.appendChild(t)}close(){document.getElementsByClassName("modal-animated")[0]?.classList.add("modal-animate-fade-out"),setTimeout(()=>{this.dialogRef.close()},250)}static#e=this.\u0275fac=function(i){return new(i||n)(R(Ov),R(Zj))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["ccf-info-dialog"]],decls:11,vars:2,consts:[[1,"about","wrapper"],[1,"container"],[1,"content"],[1,"header"],["mat-dialog-title","",1,"title"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"mat-typography","dialog-content"],["class","panel",4,"ngFor","ngForOf"],[1,"panel"],[3,"expanded",4,"ngIf"],[3,"expanded"],[1,"no-header-margin"],[1,"top-padding"],[1,"variable-binding",3,"data"],["class","video-player",4,"ngIf"],[1,"video-player"],[3,"videoId"]],template:function(i,r){1&i&&(we(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),pi(5),Te(),we(6,"div",5)(7,"mat-icon",6),ot("click",function(){return r.close()}),pi(8,"clear"),Te()()(),we(9,"mat-dialog-content",7),Gi(10,b_e,2,1,"div",8),Te()()()()),2&i&&(je(5),Js(r.infoTitle),je(5),mt("ngForOf",r.documentationContents))},dependencies:[fy,TA,CS,AS,lH,_H,yme,Cme,jH],styles:[".mat-dialog-container{padding:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:1.5rem;text-align:left}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;height:3rem;margin-bottom:2.25rem;position:relative}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.5rem;margin-bottom:1rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{cursor:pointer;height:3rem;width:3rem;line-height:3rem;text-align:center;transition:.6s}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;margin:0 auto;line-height:3rem;height:3rem;justify-self:center;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1rem;margin-top:0;margin-bottom:.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]{margin-bottom:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .no-header-margin[_ngcontent-%COMP%]{font-weight:300;margin-bottom:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]{display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .panel[_ngcontent-%COMP%]   .top-padding[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]     ul{margin-top:0;padding-left:1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{height:50rem;min-height:10rem;padding:0 1.5rem}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]{font-weight:300;display:flex}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding.first[_ngcontent-%COMP%]{padding-right:1rem;width:73%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     ul{margin:0}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .variable-binding[_ngcontent-%COMP%]     img{margin-left:1rem;float:right}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]{position:relative;width:50%}.about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]   .video-player[_ngcontent-%COMP%]     iframe{width:100%;height:100%}"],changeDetection:0})}return n})();class Zr{static#e=this.storage=(()=>{let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&e&&0!==e.length?e:void 0}})();get length(){return Zr.storage?.length??0}key(e){return Zr.storage?.key(e)??null}getItem(e,t){return Zr.storage?.getItem(e)??t??null}setItem(e,t){try{return Zr.storage?.setItem(e,t),!0}catch{return!1}}removeItem(e){Zr.storage?.removeItem(e)}clear(){Zr.storage?.clear()}static#t=this.\u0275fac=function(t){return new(t||Zr)};static#n=this.\u0275prov=j({token:Zr,factory:Zr.\u0275fac,providedIn:"root"})}var zv;const zH="callToActionPopupShown";let Qr=class v0{static#e=zv=this;static ctaDatePassed(e,t=Date.now){return+t()>+new Date(e)}constructor(e,t,i,r,s){this.dialog=e,this.ga=t,this.storage=i,this.infoService=r,this.http=s}ngxsOnInit(e){const{expirationDate:t,popupShown:i}=e.getState(),r=this.storage.getItem(zH,`${i}`),s=zv.ctaDatePassed(t);"true"!==r&&!s&&e.dispatch(new ij)}getDialogData(){return this.http.get("assets/docs/SPATIAL_SEARCH_README.md",{responseType:"text"}).pipe(oe(e=>this.infoService.parseMarkdown(e)))}launchLearnMore(e){this.dialog.open(E_e,{autoFocus:!1,panelClass:"modal-animated",width:"72rem",data:{title:"Spatial Search",content:e,videoID:"UfxMpzatowE"}})}learnMore(e){return this.dialog.closeAll(),this.ga.event("open_learn_more","call_to_action"),this.getDialogData().pipe(bt(t=>this.launchLearnMore(t)))}open(e){this.dialog.open(zv.callToActionComponent,{autoFocus:!1,panelClass:"modal-animated",width:"30.75rem",height:"36.688rem"}),this.ga.event("open","call_to_action"),this.storage.setItem(zH,"true"),e.patchState({popupShown:!0})}close(e){this.dialog.closeAll(),this.ga.event("close","call_to_action")}static#t=this.\u0275fac=function(t){return new(t||v0)(I(Pv),I(_d),I(Zr),I(iH),I(Ds))};static#n=this.\u0275prov=j({token:v0,factory:v0.\u0275fac})};qe([rT(nj),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",me)],Qr.prototype,"learnMore",null),qe([rT(ij),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",void 0)],Qr.prototype,"open",null),qe([rT(rj),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",void 0)],Qr.prototype,"close",null),Qr=zv=qe([sT({name:"callToAction",defaults:{title:"New to the Exploration User Interface",message:"Spatial Search has arrived!",callToAction:"Learn More",imageUrl:"assets/images/spatial_search.gif",expirationDate:"Dec 1, 2022",popupShown:!1}}),Q("design:paramtypes",[Pv,_d,Zr,iH,Ds])],Qr);class co{static title(e){return e.title}static message(e){return e.message}static callToAction(e){return e.callToAction}static imageUrl(e){return e.imageUrl}static expirationDate(e){return e.expirationDate}static popupShown(e){return e.popupShown}}qe([cd([Qr]),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",String)],co,"title",null),qe([cd([Qr]),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",String)],co,"message",null),qe([cd([Qr]),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",String)],co,"callToAction",null),qe([cd([Qr]),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",String)],co,"imageUrl",null),qe([cd([Qr]),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",String)],co,"expirationDate",null),qe([cd([Qr]),Q("design:type",Function),Q("design:paramtypes",[Object]),Q("design:returntype",Boolean)],co,"popupShown",null);let GH=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=ie({type:n,selectors:[["","mat-card-sm-image",""],["","matCardImageSmall",""]],hostAttrs:[1,"mat-mdc-card-sm-image","mdc-card__media"],standalone:!0})}return n})(),B_e=(()=>{class n{constructor(){this.clsName="ccf-call-to-action",this.callToActionClicked=new be,this.closeClicked=new be}close(){this.closeClicked.emit()}onDialogButtonClick(){this.callToActionClicked.emit()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Ut({type:n,selectors:[["ccf-call-to-action"]],hostVars:2,hostBindings:function(i,r){2&i&&Yu(r.clsName)},inputs:{infoTitle:"infoTitle",imageUrl:"imageUrl",message:"message",callToAction:"callToAction"},outputs:{callToActionClicked:"callToActionClicked",closeClicked:"closeClicked"},decls:13,vars:4,consts:[[1,"rui-about","wrapper"],[1,"container"],[1,"content"],[1,"first-row"],["mat-dialog-title","",1,"title"],[1,"cta-mat-icon","material-icons","close-icon",3,"click"],["mat-card-sm-image","","alt","preview","layout-fill","",1,"cta-image",3,"src"],[1,"mat-typography","dialog-content"],[1,"message"],["mat-button","",1,"mat-button",3,"click","text"]],template:function(i,r){1&i&&(we(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),pi(5),Te(),we(6,"mat-icon",5),ot("click",function(){return r.close()}),pi(7,"clear"),Te()(),fi(8,"img",6),we(9,"mat-dialog-content",7)(10,"div",8),pi(11),Te(),we(12,"a",9),ot("click",function(){return r.onDialogButtonClick()}),Te()()()()()),2&i&&(je(5),Js(r.infoTitle),je(3),mt("src",r.imageUrl,sw),je(3),Js(r.message),je(),mt("text",r.callToAction))},dependencies:[lH,CS,AS,GH],styles:["[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:block;align-content:center;padding-left:1.6rem;padding-right:1.6rem;border-radius:.25rem}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]{border-radius:.25rem;padding:.6rem;transition:.6s}[_nghost-%COMP%]   .info-button-wrapper[_ngcontent-%COMP%]   .ccf-info-button[_ngcontent-%COMP%]{cursor:pointer;transition:color .6s;font-size:1.2rem;vertical-align:sub}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]{display:flex;width:100%;line-height:.9rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:7rem;padding-left:.2rem;font-size:.875rem;padding-top:.75rem}[_nghost-%COMP%]   .first-row[_ngcontent-%COMP%]   .cta-mat-icon[_ngcontent-%COMP%]{height:30%;line-height:3.4rem}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{padding:.5rem}[_nghost-%COMP%]   .cta-image[_ngcontent-%COMP%]{align-self:center;object-fit:cover;width:100%;border-radius:.25rem}[_nghost-%COMP%]   .mat-button[_ngcontent-%COMP%]{background-color:#444a65;font-size:.75rem;position:relative;margin-bottom:1rem;width:100%;height:2rem;color:#fff}"],changeDetection:0})}return n})();class lo{constructor(){this.close=()=>new rj,this.learnMore=()=>new nj}static#e=this.\u0275fac=function(t){return new(t||lo)};static#t=this.\u0275cmp=Ut({type:lo,selectors:[["ccf-call-to-action-behavior"]],decls:5,vars:12,consts:[[3,"callToActionClicked","closeClicked","infoTitle","message","callToAction","imageUrl"]],template:function(t,i){if(1&t&&(we(0,"ccf-call-to-action",0),vn(1,"async"),vn(2,"async"),vn(3,"async"),vn(4,"async"),ot("callToActionClicked",function(){return i.learnMore()})("closeClicked",function(){return i.close()}),Te()),2&t){let r,s,o,a;mt("infoTitle",null!==(r=bn(1,4,i.title$))&&void 0!==r?r:"")("message",null!==(s=bn(2,6,i.message$))&&void 0!==s?s:"")("callToAction",null!==(o=bn(3,8,i.callToAction$))&&void 0!==o?o:"")("imageUrl",null!==(a=bn(4,10,i.imageUrl$))&&void 0!==a?a:"")}},dependencies:[B_e,py],changeDetection:0})}qe([Dy(co.title),Q("design:type",me)],lo.prototype,"title$",void 0),qe([Dy(co.message),Q("design:type",me)],lo.prototype,"message$",void 0),qe([Dy(co.callToAction),Q("design:type",me)],lo.prototype,"callToAction$",void 0),qe([Dy(co.imageUrl),Q("design:type",me)],lo.prototype,"imageUrl$",void 0),qe([tj(),Q("design:type",Object)],lo.prototype,"close",void 0),qe([tj(),Q("design:type",Object)],lo.prototype,"learnMore",void 0),Qr.callToActionComponent=lo;const V_e={initialConfig:{},parse:{},rename:{}};class U_e{constructor(e,t){this.configState=e,this.storedChanges={},this.options={...V_e,...t}}addChanges(e){this.storedChanges={...this.storedChanges,...e}}applyChanges(e,t={}){void 0===e&&(e=this.storedChanges,this.storedChanges={});const{configState:i,options:{initialConfig:r}}=this,o={...r,...i.snapshot,...t};for(const[a,c]of Object.entries(e))this.processChange(a,c,o);i.setConfig(o)}processChange(e,t,i){const{options:{parse:r,rename:s}}=this,o=s[e]??e,a=t.currentValue,c=r[e]??r[o];if(null==a)delete i[o];else if(c)try{i[o]=c(a)}catch(l){console.warn(`Failed to parse ${e} = ${a} (${typeof a})`,l.message)}else i[o]=a}}let j_e=(()=>{class n{constructor(t,i,r={}){this.configState=t,this.cdr=i,this.options=r,this.initialized=!1,this.configManager=new U_e(this.configState,this.options)}ngOnInit(){this._init=setTimeout(()=>this.initialize(),this.options.initialDelay??0)}ngOnDestroy(){this._init&&clearTimeout(this._init)}ngOnChanges(t){this.configManager.addChanges(t),this.initialized&&this.configManager.applyChanges()}initialize(){this._init=void 0,!this.initialized&&(this.configManager.applyChanges(),this.initialized=!0,this.cdr.markForCheck())}static#e=this.\u0275fac=function(i){!function bP(){throw new Error("invalid")}()};static#t=this.\u0275dir=ie({type:n,features:[zn]})}return n})();const WH_json=n=>"string"==typeof n?JSON.parse(n):n,Sd_dbOptions={dataSources:["https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/kpmp/data/rui_locations.jsonld","https://cdn.jsdelivr.net/gh/hubmapconsortium/ccf-ui@staging/assets/sparc/data/rui_locations.jsonld"],remoteApiEndpoint:"https://apps.humanatlas.io/api"};let H_e=(()=>{class n{constructor(t){this.source=t,this.organs=N2}getOrganInfo(t,i,r=bd.Female){let s=this.organs.find(a=>a.id===t);if(!s)return Z(void 0);const o=s.organ;return s.disabled&&(s=this.organs.find(a=>!a.disabled&&a.organ===o)),s?.side&&i&&s.side!==i&&(s=this.organs.find(a=>!a.disabled&&a.organ===o&&a.side===i)),Z(s)}getOrgan(t,i=bd.Both){return this.source.getReferenceOrgans().pipe(oe(r=>r.find(s=>s.representation_of===t.id&&("Both"===i||s.sex===i))))}getOrganScene(t,i=bd.Female){return t.id?this.source.getReferenceOrganScene(t.id,{ontologyTerms:[t.id],sex:i}):Z([])}getOrganStats(t,i=bd.Female){return t.id?this.source.getAggregateResults({ontologyTerms:[t.id],sex:i}):Z([])}getBlocks(t,i=bd.Female){return t.id?this.source.getTissueBlockResults({ontologyTerms:[t.id],sex:i}):Z([])}static#e=this.\u0275fac=function(i){return new(i||n)(I(lU))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function z_e(n,e){if(1&n){const t=Ys();we(0,"div",6)(1,"div",7)(2,"div",8),pi(3),Te(),we(4,"div",9),ot("click",function(){const r=fn(t).$implicit;return pn(bs().goToURL(r.buttonUrl))}),pi(5),Te()()()}if(2&n){const t=e.$implicit;je(3),Js(t.body),je(),mt("gaLabel",t.buttonUrl),je(),Fa(" ",t.buttonTitle," ")}}function G_e(n,e){if(1&n){const t=Ys();we(0,"div",10),ot("click",function(){const r=fn(t).$implicit;return pn(bs().goToURL(r.buttonUrl))}),pi(1),Te()}if(2&n){const t=e.$implicit;mt("gaLabel",t.buttonUrl),je(),Fa(" ",t.buttonTitle," ")}}let W_e=(()=>{class n{constructor(){this.linkCards=[{body:"Add tissue blocks using the HRA Registration User Interface (RUI).",buttonTitle:"Register Tissue",buttonUrl:"https://hubmapconsortium.github.io/ccf-ui/rui/"},{body:"Explore tissue sections in tissue blocks with the HRA Exploration User Interface (EUI).",buttonTitle:"Explore Tissue",buttonUrl:"https://portal.hubmapconsortium.org/ccf-eui"},{body:"View linkages between anatomical structures, cell types, and common biomarkers (ASCT+B).",buttonTitle:"ASCT+B Reporter",buttonUrl:"https://hubmapconsortium.github.io/ccf-asct-reporter/"}],this.deepDives=[{body:"",buttonTitle:"HRA Portal",buttonUrl:"https://humanatlas.io"},{body:"",buttonTitle:"Online Course",buttonUrl:"https://expand.iu.edu/browse/sice/cns/courses/hubmap-visible-human-mooc"},{body:"",buttonTitle:"Paper",buttonUrl:"https://www.nature.com/articles/s41556-021-00788-6"}]}ngOnInit(){const t=[this.ruiUrl,this.euiUrl,this.asctbUrl],i=[this.hraPortalUrl,this.onlineCourseUrl,this.paperUrl];this.linkCards=this.linkCards.map((r,s)=>({...r,buttonUrl:t[s]??r.buttonUrl})),this.deepDives=this.deepDives.map((r,s)=>({...r,buttonUrl:i[s]??r.buttonUrl}))}goToURL(t){window.open(t,"_blank")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Ut({type:n,selectors:[["ccf-link-cards"]],inputs:{ruiUrl:"ruiUrl",euiUrl:"euiUrl",asctbUrl:"asctbUrl",hraPortalUrl:"hraPortalUrl",onlineCourseUrl:"onlineCourseUrl",paperUrl:"paperUrl"},decls:7,vars:2,consts:[["gaCategory","link-cards",1,"link-cards-container"],["class","link-card",4,"ngFor","ngForOf"],["gaCategory","deep-dive",1,"deep-dive-section"],[1,"title"],[1,"button-container"],["class","btn-outline btn","gaEvent","visit-link",3,"gaLabel","click",4,"ngFor","ngForOf"],[1,"link-card"],[1,"link-card-content"],[1,"body"],["gaEvent","visit-link",1,"link-button","btn",3,"click","gaLabel"],["gaEvent","visit-link",1,"btn-outline","btn",3,"click","gaLabel"]],template:function(i,r){1&i&&(we(0,"div",0),Gi(1,z_e,6,3,"div",1),Te(),we(2,"div",2)(3,"div",3),pi(4,"Human Reference Atlas (HRA) Deep Dive"),Te(),we(5,"div",4),Gi(6,G_e,2,2,"div",5),Te()()),2&i&&(je(),mt("ngForOf",r.linkCards),je(5),mt("ngForOf",r.deepDives))},dependencies:[fy,wde,sU],styles:['.link-cards-container[_ngcontent-%COMP%]{max-width:30rem}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;padding-top:1px;padding-bottom:1px}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]:last-of-type{border-bottom:1px solid #e0e0e0}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]{align-items:center;padding:1rem 0rem 1rem 1rem;display:flex;flex-direction:row;justify-content:space-between;border-left:6px solid #444a65}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]{margin-left:2rem;background-color:#444a65;color:#fff}.link-cards-container[_ngcontent-%COMP%]   .link-card[_ngcontent-%COMP%]   .link-card-content[_ngcontent-%COMP%]   .link-button[_ngcontent-%COMP%]:hover{background-color:#2f3346}.deep-dive-section[_ngcontent-%COMP%]{margin-top:2rem}.deep-dive-section[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{color:#444a65;border:1px solid #444a65;background-color:#fff}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:not(:last-of-type){margin-right:1rem}.deep-dive-section[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.btn[_ngcontent-%COMP%]{min-width:9rem!important;max-height:2.28125rem;text-align:center;white-space:nowrap;cursor:pointer;font-size:.875rem;font-weight:500;border-radius:2px;line-height:2.75;transition:background-color .25s cubic-bezier(.4,0,.2,1) 0ms,box-shadow .25s cubic-bezier(.4,0,.2,1) 0ms,border .25s cubic-bezier(.4,0,.2,1) 0ms;font-family:var(--ccf-ui-font, ""),Inter,Inter Variable,Helvetica,Arial,sans-serif}'],changeDetection:0})}return n})();function $_e(n,e){if(1&n&&(we(0,"div",3)(1,"div",4),pi(2),Te(),we(3,"div",5),pi(4),Te()()),2&n){const t=e.$implicit;je(2),Js(t.count),je(2),Js(t.label)}}let q_e=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Ut({type:n,selectors:[["ccf-stats-list"]],inputs:{statsLabel:"statsLabel",stats:"stats"},decls:4,vars:2,consts:[[1,"stats-container"],[1,"header"],["class","stats-row",4,"ngFor","ngForOf"],[1,"stats-row"],[1,"stat"],[1,"label"]],template:function(i,r){1&i&&(we(0,"div",0)(1,"div",1),pi(2),Te(),Gi(3,$_e,5,2,"div",2),Te()),2&i&&(je(2),Fa(" ",r.statsLabel," "),je(),mt("ngForOf",r.stats))},dependencies:[fy],styles:[".stats-container[_ngcontent-%COMP%]{margin-bottom:2rem;min-height:9rem}.stats-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:1rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:1.325rem}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{width:2rem;margin-right:1rem;text-align:right}.stats-container[_ngcontent-%COMP%]   .stats-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:1;text-align:left}"],changeDetection:0})}return n})();function kp(n){return(kp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function E(n,e,t){return(e=function Y_e(n){var e=function X_e(n,e){if("object"!=kp(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var i=t.call(n,e||"default");if("object"!=kp(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"==kp(e)?e:e+""}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $H(n){if(typeof window<"u"&&"object"==typeof window.process&&"renderer"===window.process.type||typeof process<"u"&&"object"==typeof process.versions&&process.versions.electron)return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,t=n||e;return!!(t&&t.indexOf("Electron")>=0)}function uo(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||$H()}const qH=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";uo();class J_e{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";E(this,"storage",void 0),E(this,"id",void 0),E(this,"config",void 0),this.storage=function K_e(n){try{const e=window[n],t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch{return null}}(i),this.id=e,this.config=t,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function kS(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=n.src.replace(/\(/g,"%28").replace(/\)/g,"%29");n.width>i&&(t=Math.min(t,i/n.width));const s=n.width*t,o=n.height*t,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(r,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Gv;function XH(n){return"string"==typeof n?Gv[n.toUpperCase()]||Gv.WHITE:n}function Wv(n,e){if(!n)throw new Error(e||"Assertion failed")}!function(n){n[n.BLACK=30]="BLACK",n[n.RED=31]="RED",n[n.GREEN=32]="GREEN",n[n.YELLOW=33]="YELLOW",n[n.BLUE=34]="BLUE",n[n.MAGENTA=35]="MAGENTA",n[n.CYAN=36]="CYAN",n[n.WHITE=37]="WHITE",n[n.BRIGHT_BLACK=90]="BRIGHT_BLACK",n[n.BRIGHT_RED=91]="BRIGHT_RED",n[n.BRIGHT_GREEN=92]="BRIGHT_GREEN",n[n.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",n[n.BRIGHT_BLUE=94]="BRIGHT_BLUE",n[n.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",n[n.BRIGHT_CYAN=96]="BRIGHT_CYAN",n[n.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(Gv||(Gv={}));const ec={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:"object"==typeof process&&process},$v=ec.window||ec.self||ec.global,Lp=ec.process||{};function xd(){let n;var e,t;if(uo&&"performance"in $v)n=null==$v||null===(e=$v.performance)||void 0===e||null===(t=e.now)||void 0===t?void 0:t.call(e);else if("hrtime"in Lp){var i;const r=null==Lp||null===(i=Lp.hrtime)||void 0===i?void 0:i.call(Lp);n=1e3*r[0]+r[1]/1e6}else n=Date.now();return n}const Md={debug:uo&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},rye={enabled:!0,level:0};function es(){}const YH={},KH={once:!0};class Bp{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};E(this,"id",void 0),E(this,"VERSION",qH),E(this,"_startTs",xd()),E(this,"_deltaTs",xd()),E(this,"_storage",void 0),E(this,"userData",{}),E(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new J_e("__probe-".concat(this.id,"__"),rye),this.timeStamp("".concat(this.id," started")),function iye(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const t=Object.getPrototypeOf(n),i=Object.getOwnPropertyNames(t);for(const r of i)"function"==typeof n[r]&&(e.find(s=>r===s)||(n[r]=n[r].bind(n)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((xd()-this._startTs).toPrecision(10))}getDelta(){return Number((xd()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){return this._storage.setConfiguration({enabled:!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.setConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){Wv(e,t)}warn(e){return this._getLogFunction(0,e,Md.warn,arguments,KH)}error(e){return this._getLogFunction(0,e,Md.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,Md.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,Md.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];return this._getLogFunction(e,t,Md.debug||Md.info,arguments,KH)}table(e,t,i){return t?this._getLogFunction(e,t,console.table||es,i&&[i],{tag:cye(t)}):es}image(e){let{logLevel:t,priority:i,image:r,message:s="",scale:o=1}=e;return this._shouldLog(t||i)?uo?function aye(n){let{image:e,message:t="",scale:i=1}=n;if("string"==typeof e){const s=new Image;return s.onload=()=>{const o=kS(s,t,i);console.log(...o)},s.src=e,es}const r=e.nodeName||"";if("img"===r.toLowerCase())return console.log(...kS(e,t,i)),es;if("canvas"===r.toLowerCase()){const s=new Image;return s.onload=()=>console.log(...kS(s,t,i)),s.src=e.toDataURL(),es}return es}({image:r,message:s,scale:o}):function oye(n){let{message:t="",scale:i=1}=n;return console.warn("removed"),es}({image:r,message:s,scale:o}):es}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||es)}group(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=ZH({logLevel:e,message:t,opts:i}),{collapsed:s}=i;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,t){return this.group(e,t,Object.assign({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||es)}withGroup(e,t,i){this.group(e,t)();try{i()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=JH(e)}_getLogFunction(e,t,i,r,s){if(this._shouldLog(e)){s=ZH({logLevel:e,message:t,args:r,opts:s}),Wv(i=i||s.method),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=xd();const o=s.tag||s.message;if(s.once){if(YH[o])return es;YH[o]=xd()}return t=function sye(n,e,t){if("string"==typeof e){const i=t.time?function Q_e(n){const t=Math.max((arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-n.length,0);return"".concat(" ".repeat(t)).concat(n)}(function Z_e(n){let e;return e=n<10?"".concat(n.toFixed(2),"ms"):n<100?"".concat(n.toFixed(1),"ms"):n<1e3?"".concat(n.toFixed(0),"ms"):"".concat((n/1e3).toFixed(2),"s"),e}(t.total)):"";e=function nye(n,e,t){return!uo&&"string"==typeof n&&(e&&(e=XH(e),n="\x1b[".concat(e,"m").concat(n,"\x1b[39m")),t&&(e=XH(t),n="\x1b[".concat(t+10,"m").concat(n,"\x1b[49m"))),n}(e=t.time?"".concat(n,": ").concat(i,"  ").concat(e):"".concat(n,": ").concat(e),t.color,t.background)}return e}(this.id,s.message,s),i.bind(console,t,...s.args)}return es}}function JH(n){if(!n)return 0;let e;switch(typeof n){case"number":e=n;break;case"object":e=n.logLevel||n.priority||0;break;default:return 0}return Wv(Number.isFinite(e)&&e>=0),e}function ZH(n){const{logLevel:e,message:t}=n;n.logLevel=JH(e);const i=n.args?Array.from(n.args):[];for(;i.length&&i.shift()!==t;);switch(typeof e){case"string":case"function":void 0!==t&&i.unshift(t),n.message=e;break;case"object":Object.assign(n,e)}"function"==typeof n.message&&(n.message=n.message());const r=typeof n.message;return Wv("string"===r||"object"===r),Object.assign(n,{args:i},n.opts)}function cye(n){for(const e in n)for(const t in n[e])return t||"untitled";return"empty"}E(Bp,"VERSION",qH);const Ze=new Bp({id:"deck"}),Vp=new class lye{constructor(e={}){E(this,"_pool",[]),E(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,t,{size:i=1,type:r,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:c}){const l=r||e&&e.constructor||Float32Array,u=t*i+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new l(e.buffer,0,u)}let d=1/0;c&&(d=c*i+s);const h=this._allocate(l,u,a,d);return e&&o?h.set(e):a||h.fill(0,0,4),this._release(e),h}release(e){this._release(e)}_allocate(e,t,i,r){let s=Math.max(Math.ceil(t*this.opts.overAlloc),1);s>r&&(s=r);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,c=o.findIndex(l=>l.byteLength>=a);if(c>=0){const l=new e(o.splice(c,1)[0],0,s);return i&&l.fill(0),l}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const t=this._pool,{buffer:i}=e,{byteLength:r}=i,s=t.findIndex(o=>o.byteLength>=r);s<0?t.push(i):(s>0||t.length<this.opts.poolSize)&&t.splice(s,0,i),t.length>this.opts.poolSize&&t.shift()}};function QH(n,e){if(!n)throw new Error("math.gl assertion ".concat(e))}class ez extends jT{get x(){return this[0]}set x(e){this[0]=Bt(e)}get y(){return this[1]}set y(e){this[1]=Bt(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let t=0;t<this.ELEMENTS;++t)e+=this[t]*this[t];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let t=0;for(let i=0;i<this.ELEMENTS;++i){const r=this[i]-e[i];t+=r*r}return Bt(t)}dot(e){let t=0;for(let i=0;i<this.ELEMENTS;++i)t+=this[i]*e[i];return Bt(t)}normalize(){const e=this.magnitude();if(0!==e)for(let t=0;t<this.ELEMENTS;++t)this[t]/=e;return this.check()}multiply(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]*=t[i];return this.check()}divide(...e){for(const t of e)for(let i=0;i<this.ELEMENTS;++i)this[i]/=t[i];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return QH(e>=0&&e<this.ELEMENTS,"index is out of range"),Bt(this[e])}setComponent(e,t){return QH(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=t,this.check()}addVectors(e,t){return this.copy(e).add(t)}subVectors(e,t){return this.copy(e).subtract(t)}multiplyVectors(e,t){return this.copy(e).multiply(t)}addScaledVector(e,t){return this.add(new this.constructor(e).multiplyScalar(t))}}const LS=[0,0,0];let qv;class Ri extends ez{static get ZERO(){return qv||(qv=new Ri(0,0,0),Object.freeze(qv)),qv}constructor(e=0,t=0,i=0){super(-0,-0,-0),1===arguments.length&&Jo(e)?this.copy(e):(En.debug&&(Bt(e),Bt(t),Bt(i)),this[0]=e,this[1]=t,this[2]=i)}set(e,t,i){return this[0]=e,this[1]=t,this[2]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return En.debug&&(Bt(e.x),Bt(e.y),Bt(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=Bt(e)}angle(e){return function vhe(n,e){var t=n[0],i=n[1],r=n[2],s=e[0],o=e[1],a=e[2],u=Math.sqrt(t*t+i*i+r*r)*Math.sqrt(s*s+o*o+a*a),d=u&&yU(n,e)/u;return Math.acos(Math.min(Math.max(d,-1),1))}(this,e)}cross(e){return rv(this,this,e),this.check()}rotateX({radians:e,origin:t=LS}){return function mhe(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0],s[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),s[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateY({radians:e,origin:t=LS}){return function _he(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),s[1]=r[1],s[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}rotateZ({radians:e,origin:t=LS}){return function yhe(n,e,t,i){var r=[],s=[];r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],s[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),s[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),s[2]=r[2],n[0]=s[0]+t[0],n[1]=s[1]+t[1],n[2]=s[2]+t[2]}(this,this,t,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return GT(this,this,e),this.check()}transformAsVector(e){return dU(this,this,e),this.check()}transformByMatrix3(e){return function ghe(n,e,t){var i=e[0],r=e[1],s=e[2];n[0]=i*t[0]+r*t[3]+s*t[6],n[1]=i*t[1]+r*t[4]+s*t[7],n[2]=i*t[2]+r*t[5]+s*t[8]}(this,this,e),this.check()}transformByMatrix2(e){return function Wde(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2]}(this,this,e),this.check()}transformByQuaternion(e){return vU(this,this,e),this.check()}}const tz=new Ri;function Id(n,e,t,i){tz.set(n,e,t);const r=tz.len();return{distance:i/r,normal:new Ri(-n/r,-e/r,-t/r)}}function fye(n){return n-Math.fround(n)}let jp;function BS(n,e){const{size:t=1,startIndex:i=0}=e,r=void 0!==e.endIndex?e.endIndex:n.length,s=(r-i)/t;jp=Vp.allocate(jp,s,{type:Float32Array,size:2*t});let o=i,a=0;for(;o<r;){for(let c=0;c<t;c++){const l=n[o++];jp[a+c]=l,jp[a+c+t]=fye(l)}a+=2*t}return jp.subarray(0,s*t*2)}function Dd(n,e){const t=Ep([],e,n);return bU(t,t,1/t[3]),t}function nz(n,e){const t=n%e;return t<0?e+t:t}function VS(n,e,t){return n<e?e:n>t?t:n}const US=Math.log2||function gye(n){return Math.log(n)*Math.LOG2E};function Qo(n,e){if(!n)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Rs=Math.PI,iz=Rs/4,ts=Rs/180,jS=180/Rs,Rd=512,Xv=4003e4,Yv=85.051129,mye=1.5;function Kv(n){const[e,t]=n;return Qo(Number.isFinite(e)),Qo(Number.isFinite(t)&&t>=-90&&t<=90,"invalid latitude"),[Rd*(e*ts+Rs)/(2*Rs),Rd*(Rs+Math.log(Math.tan(iz+t*ts*.5)))/(2*Rs)]}function Od(n){const[e,t]=n,i=e/Rd*(2*Rs)-Rs,r=2*(Math.atan(Math.exp(t/Rd*(2*Rs)-Rs))-iz);return[i*jS,r*jS]}function HS(n){const{latitude:e,longitude:t,highPrecision:i=!1}=n;Qo(Number.isFinite(e)&&Number.isFinite(t));const r=Rd,s=Math.cos(e*ts),o=r/360,a=o/s,c=r/Xv/s,l={unitsPerMeter:[c,c,c],metersPerUnit:[1/c,1/c,1/c],unitsPerDegree:[o,a,c],degreesPerUnit:[1/o,1/a,1/c]};if(i){const u=ts*Math.tan(e*ts)/s,h=r/Xv*u,f=h/a*c;l.unitsPerDegree2=[0,o*u/2,h],l.unitsPerMeter2=[f,0,f]}return l}function rz(n,e){const[t,i,r]=n,[s,o,a]=e,{unitsPerMeter:c,unitsPerMeter2:l}=HS({longitude:t,latitude:i,highPrecision:!0}),u=Kv(n);u[0]+=s*(c[0]+l[0]*o),u[1]+=o*(c[1]+l[1]*o);const d=Od(u),h=(r||0)+(a||0);return Number.isFinite(r)||Number.isFinite(a)?[d[0],d[1],h]:d}function Jv(n){return 2*Math.atan(.5/n)*jS}function zS(n){return.5/Math.tan(.5*n*ts)}function oz(n,e){const[t,i,r=0]=n;return Qo(Number.isFinite(t)&&Number.isFinite(i)&&Number.isFinite(r)),Dd(e,[t,i,r,1])}function Hp(n,e,t=0){const[i,r,s]=n;if(Qo(Number.isFinite(i)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return Dd(e,[i,r,s,1]);const o=Dd(e,[i,r,0,1]),a=Dd(e,[i,r,1,1]),c=o[2],l=a[2];return gU([],o,a,c===l?0:((t||0)-c)/(l-c))}function az(n){const{width:e,height:t,bounds:i,minExtent:r=0,maxZoom:s=24,offset:o=[0,0]}=n,[[a,c],[l,u]]=i,d=function bye(n=0){return"number"==typeof n?{top:n,bottom:n,left:n,right:n}:(Qo(Number.isFinite(n.top)&&Number.isFinite(n.bottom)&&Number.isFinite(n.left)&&Number.isFinite(n.right)),n)}(n.padding),h=Kv([a,VS(u,-Yv,Yv)]),f=Kv([l,VS(c,-Yv,Yv)]),p=[Math.max(Math.abs(f[0]-h[0]),r),Math.max(Math.abs(f[1]-h[1]),r)],g=[e-d.left-d.right-2*Math.abs(o[0]),t-d.top-d.bottom-2*Math.abs(o[1])];Qo(g[0]>0&&g[1]>0);const m=g[0]/p[0],y=g[1]/p[1],A=Od([(f[0]+h[0])/2+(d.right-d.left)/2/m,(f[1]+h[1])/2+(d.top-d.bottom)/2/y]),S=Math.min(s,US(Math.abs(Math.min(m,y))));return Qo(Number.isFinite(S)),{longitude:A[0],latitude:A[1],zoom:S}}const cz=Math.PI/180;function lz(n,e,t){const{pixelUnprojectionMatrix:i}=n,r=Dd(i,[e,0,1,1]),s=Dd(i,[e,n.height,1,1]),l=Od(gU([],r,s,(t*n.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2])));return l.push(t),l}const it={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(it,"IDENTITY",{get:()=>(Ze.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const ho={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Zv={common:0,meters:1,pixels:2},pz={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Aye=Math.PI/180,Tye=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],gz=[0,0,0],Sye={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};class tc{constructor(e={}){E(this,"id",void 0),E(this,"x",void 0),E(this,"y",void 0),E(this,"width",void 0),E(this,"height",void 0),E(this,"padding",void 0),E(this,"isGeospatial",void 0),E(this,"zoom",void 0),E(this,"focalDistance",void 0),E(this,"position",void 0),E(this,"modelMatrix",void 0),E(this,"distanceScales",void 0),E(this,"scale",void 0),E(this,"center",void 0),E(this,"cameraPosition",void 0),E(this,"projectionMatrix",void 0),E(this,"viewMatrix",void 0),E(this,"viewMatrixUncentered",void 0),E(this,"viewMatrixInverse",void 0),E(this,"viewProjectionMatrix",void 0),E(this,"pixelProjectionMatrix",void 0),E(this,"pixelUnprojectionMatrix",void 0),E(this,"resolution",void 0),E(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||Sye,this.focalDistance=e.focalDistance||1,this.position=e.position||gz,this.modelMatrix=e.modelMatrix||null;const{longitude:t,latitude:i}=e;this.isGeospatial=Number.isFinite(i)&&Number.isFinite(t),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?ho.WEB_MERCATOR:ho.WEB_MERCATOR_AUTO_OFFSET:ho.IDENTITY}equals(e){return e instanceof tc&&(this===e||e.width===this.width&&e.height===this.height&&e.scale===this.scale&&yd(e.projectionMatrix,this.projectionMatrix)&&yd(e.viewMatrix,this.viewMatrix))}project(e,{topLeft:t=!0}={}){const r=oz(this.projectPosition(e),this.pixelProjectionMatrix),[s,o]=r,a=t?o:this.height-o;return 2===e.length?[s,a]:[s,a,r[2]]}unproject(e,{topLeft:t=!0,targetZ:i}={}){const[r,s,o]=e,l=Hp([r,t?s:this.height-s,o],this.pixelUnprojectionMatrix,i&&i*this.distanceScales.unitsPerMeter[2]),[u,d,h]=this.unprojectPosition(l);return Number.isFinite(o)?[u,d,h]:Number.isFinite(i)?[u,d,i]:[u,d]}projectPosition(e){const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.unitsPerMeter[2]]}unprojectPosition(e){const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)*this.distanceScales.metersPerUnit[2]]}projectFlat(e){if(this.isGeospatial){const t=Kv(e);return t[1]=gi(t[1],-318,830),t}return e}unprojectFlat(e){return this.isGeospatial?Od(e):e}getBounds(e={}){const t={targetZ:e.z||0},i=this.unproject([0,0],t),r=this.unproject([this.width,0],t),s=this.unproject([0,this.height],t),o=this.unproject([this.width,this.height],t);return[Math.min(i[0],r[0],s[0],o[0]),Math.min(i[1],r[1],s[1],o[1]),Math.max(i[0],r[0],s[0],o[0]),Math.max(i[1],r[1],s[1],o[1])]}getDistanceScales(e){return e?HS({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:t,width:i=1,height:r=1}){return e<this.x+this.width&&this.x<e+i&&t<this.y+this.height&&this.y<t+r}getFrustumPlanes(){return this._frustumPlanes.near||Object.assign(this._frustumPlanes,function hye(n){return{left:Id(n[3]+n[0],n[7]+n[4],n[11]+n[8],n[15]+n[12]),right:Id(n[3]-n[0],n[7]-n[4],n[11]-n[8],n[15]-n[12]),bottom:Id(n[3]+n[1],n[7]+n[5],n[11]+n[9],n[15]+n[13]),top:Id(n[3]-n[1],n[7]-n[5],n[11]-n[9],n[15]-n[13]),near:Id(n[3]+n[2],n[7]+n[6],n[11]+n[10],n[15]+n[14]),far:Id(n[3]-n[2],n[7]-n[6],n[11]-n[10],n[15]-n[14])}}(this.viewProjectionMatrix)),this._frustumPlanes}panByPosition(e,t){return null}_initProps(e){const t=e.longitude,i=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=function yye(n){const{latitude:e}=n;Qo(Number.isFinite(e));const t=Math.cos(e*ts);return function _ye(n){return US(n)}(Xv*t)-9}({latitude:i})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||HS({latitude:i,longitude:t}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:s,modelMatrix:o}=e;let a=gz;if(s&&(a=o?new Be(o).transformAsVector(s,[]):s),this.isGeospatial){const c=this.projectPosition([t,i,0]);this.center=new Ri(a).scale(this.distanceScales.unitsPerMeter).add(c)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:t=Tye,projectionMatrix:i=null,orthographic:r=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:c=1e3,padding:l=null,focalDistance:u=1}=e;this.viewMatrixUncentered=t,this.viewMatrix=(new Be).multiplyRight(t).translate(new Ri(this.center).negate()),this.projectionMatrix=i||function xye({width:n,height:e,orthographic:t,fovyRadians:i,focalDistance:r,padding:s,near:o,far:a}){const c=n/e,l=t?(new Be).orthographic({fovy:i,aspect:c,focalDistance:r,near:o,far:a}):(new Be).perspective({fovy:i,aspect:c,near:o,far:a});if(s){const{left:u=0,right:d=0,top:h=0,bottom:f=0}=s,p=gi((u+n-d)/2,0,n)-n/2,g=gi((h+e-f)/2,0,e)-e/2;l[8]-=2*p/n,l[9]+=2*g/e}return l}({width:this.width,height:this.height,orthographic:r,fovyRadians:s||o*Aye,focalDistance:u,padding:l,near:a,far:c});const d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];ul(d,d,this.projectionMatrix),ul(d,d,this.viewMatrix),this.viewProjectionMatrix=d,this.viewMatrixInverse=HT([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=function dye(n){return[n[12],n[13],n[14]]}(this.viewMatrixInverse);const h=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];zT(h,h,[this.width/2,-this.height/2,1]),nv(h,h,[1,-1,0]),ul(f,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=HT([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Ze.warn("Pixel project matrix not invertible")()}}E(tc,"displayName","Viewport");const Mye=/([0-9]+\.?[0-9]*)(%|px)/;function nc(n){switch(typeof n){case"number":return{position:n,relative:!1};case"string":const e=Mye.exec(n);if(e&&e.length>=3){const t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw new Error("Could not parse position string ".concat(n))}}function ic(n,e){return n.relative?Math.round(n.position*e):n.position}function Pd(n,e){if(n===e)return!0;if(!n||!e)return!1;for(const t in n){const i=n[t],r=e[t];if(!(i===r||Array.isArray(i)&&Array.isArray(r)&&Pd(i,r)))return!1}return!0}function mi(n,e){if(!n)throw new Error(e||"deck.gl: assertion failed.")}class WS{constructor(e){E(this,"id",void 0),E(this,"viewportInstance",void 0),E(this,"_x",void 0),E(this,"_y",void 0),E(this,"_width",void 0),E(this,"_height",void 0),E(this,"_padding",void 0),E(this,"props",void 0);const{id:t,x:i=0,y:r=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:c}=e||{};mi(!c||c instanceof tc),this.viewportInstance=c,this.id=t||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=nc(i),this._y=nc(r),this._width=nc(s),this._height=nc(o),this._padding=a&&{left:nc(a.left||0),right:nc(a.right||0),top:nc(a.top||0),bottom:nc(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e||(this.viewportInstance?!!e.viewportInstance&&this.viewportInstance.equals(e.viewportInstance):this.ViewportType===e.ViewportType&&Pd(this.props,e.props))}makeViewport({width:e,height:t,viewState:i}){if(this.viewportInstance)return this.viewportInstance;i=this.filterViewState(i);const r=this.getDimensions({width:e,height:t});return new this.ViewportType({...i,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return"string"==typeof e?e:e?.id||this.id}filterViewState(e){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;const t={...e};for(const i in this.props.viewState)"id"!==i&&(t[i]=this.props.viewState[i]);return t}return e}getDimensions({width:e,height:t}){const i={x:ic(this._x,e),y:ic(this._y,t),width:ic(this._width,e),height:ic(this._height,t)};return this._padding&&(i.padding={left:ic(this._padding.left,e),top:ic(this._padding.top,t),right:ic(this._padding.right,e),bottom:ic(this._padding.bottom,t)}),i}get controller(){const e=this.props.controller;return e?!0===e?{type:this.ControllerType}:"function"==typeof e?{type:e}:{type:this.ControllerType,...e}:null}}const Iye=(new Be).lookAt({eye:[0,0,1]});function Dye({width:n,height:e,near:t,far:i,padding:r}){let s=-n/2,o=n/2,a=-e/2,c=e/2;if(r){const{left:l=0,right:u=0,top:d=0,bottom:h=0}=r,f=gi((l+n-u)/2,0,n)-n/2,p=gi((d+e-h)/2,0,e)-e/2;s-=f,o-=f,a+=p,c+=p}return(new Be).ortho({left:s,right:o,bottom:a,top:c,near:t,far:i})}class Rye extends tc{constructor(e){const{width:t,height:i,near:r=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],padding:c=null,flipY:l=!0}=e,u=Array.isArray(o)?o[0]:o,d=Array.isArray(o)?o[1]:o,h=Math.min(u,d),f=Math.pow(2,h);let p;if(u!==d){const g=Math.pow(2,u),m=Math.pow(2,d);p={unitsPerMeter:[g/f,m/f,1],metersPerUnit:[f/g,f/m,1]}}super({...e,longitude:void 0,position:a,viewMatrix:Iye.clone().scale([f,f*(l?-1:1),f]),projectionMatrix:Dye({width:t||1,height:i||1,padding:c,near:r,far:s}),zoom:h,distanceScales:p})}projectFlat([e,t]){const{unitsPerMeter:i}=this.distanceScales;return[e*i[0],t*i[1]]}unprojectFlat([e,t]){const{metersPerUnit:i}=this.distanceScales;return[e*i[0],t*i[1]]}panByPosition(e,t){const i=Hp(t,this.pixelUnprojectionMatrix),s=iv([],this.projectFlat(e),pU([],i)),o=iv([],this.center,s);return{target:this.unprojectFlat(o)}}}class Gp{constructor(e){E(this,"_inProgress",void 0),E(this,"_handle",void 0),E(this,"_timeline",void 0),E(this,"time",void 0),E(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var t,i;this.cancel(),this.settings=e,this._inProgress=!0,null===(t=(i=this.settings).onStart)||void 0===t||t.call(i,this)}end(){var e,t;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,null===(e=(t=this.settings).onEnd)||void 0===e||e.call(t,this))}cancel(){var e,t;this._inProgress&&(null===(e=(t=this.settings).onInterrupt)||void 0===e||e.call(t,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,t;if(!this._inProgress)return!1;if(null===this._handle){const{_timeline:i,settings:r}=this;this._handle=i.addChannel({delay:i.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),null===(e=(t=this.settings).onUpdate)||void 0===e||e.call(t,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const mz=()=>{},Oye=n=>n;class Nye{constructor(e){E(this,"getControllerState",void 0),E(this,"props",void 0),E(this,"propsInTransition",void 0),E(this,"transition",void 0),E(this,"onViewStateChange",void 0),E(this,"onStateChange",void 0),E(this,"_onTransitionUpdate",t=>{const{time:i,settings:{interpolator:r,startProps:s,endProps:o,duration:a,easing:c}}=t,l=c(i/a),u=r.interpolateProps(s,o,l);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new Gp(e.timeline),this.onViewStateChange=e.onViewStateChange||mz,this.onStateChange=e.onStateChange||mz}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let t=!1;const i=this.props;if(this.props=e,!i||this._shouldIgnoreViewportChange(i,e))return!1;if(this._isTransitionEnabled(e)){let r=i;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;r={...i,...2===s?o:this.propsInTransition||i}}this._triggerTransition(r,e),t=!0}else this.transition.cancel();return t}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:t,transitionInterpolator:i}=e;return(t>0||"auto"===t)&&!!i}_isUpdateDueToCurrentTransition(e){return!(!this.transition.inProgress||!this.propsInTransition)&&this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition)}_shouldIgnoreViewportChange(e,t){return this.transition.inProgress?3===this.transition.settings.interruption||this._isUpdateDueToCurrentTransition(t):!this._isTransitionEnabled(t)||t.transitionInterpolator.arePropsEqual(e,t)}_triggerTransition(e,t){const i=this.getControllerState(e),r=this.getControllerState(t).shortestPathFrom(i),s=t.transitionInterpolator,o=s.getDuration?s.getDuration(e,t):t.transitionDuration;if(0===o)return;const a=s.initializeProps(e,r);this.propsInTransition={};const c={duration:o,easing:t.transitionEasing||Oye,interpolator:s,interruption:t.transitionInterruption||1,startProps:a.start,endProps:a.end,onStart:t.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(t.onTransitionInterrupt),onEnd:this._onTransitionEnd(t.onTransitionEnd)};this.transition.start(c),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return t=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e?.(t)}}}class Fye{constructor(e){E(this,"_propsToCompare",void 0),E(this,"_propsToExtract",void 0),E(this,"_requiredProps",void 0);const{compare:t,extract:i,required:r}=e;this._propsToCompare=t,this._propsToExtract=i||t,this._requiredProps=r}arePropsEqual(e,t){for(const i of this._propsToCompare)if(!(i in e)||!(i in t)||!yd(e[i],t[i]))return!1;return!0}initializeProps(e,t){const i={},r={};for(const s of this._propsToExtract)(s in e||s in t)&&(i[s]=e[s],r[s]=t[s]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(e,t){return t.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(t=>{const i=e[t];mi(Number.isFinite(i)||Array.isArray(i),"".concat(t," is required for transition"))})}}const kye=["longitude","latitude","zoom","bearing","pitch"],Lye=["longitude","latitude","zoom"];class Qv extends Fye{constructor(e={}){const t=Array.isArray(e)?e:e.transitionProps,i=Array.isArray(e)?{}:e;i.transitionProps=Array.isArray(t)?{compare:t,required:t}:t||{compare:kye,required:Lye},super(i.transitionProps),E(this,"opts",void 0),this.opts=i}initializeProps(e,t){const i=super.initializeProps(e,t),{makeViewport:r,around:s}=this.opts;if(r&&s){const o=r(e),a=r(t),c=o.unproject(s);i.start.around=s,Object.assign(i.end,{around:a.project(c),aroundPosition:c,width:t.width,height:t.height})}return i}interpolateProps(e,t,i){const r={};for(const s of this._propsToExtract)r[s]=ev(e[s]||0,t[s]||0,i);if(t.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...t,...r});Object.assign(r,s.panByPosition(t.aroundPosition,ev(e.around,t.around,i)))}return r}}const rc={transitionDuration:0},eb=n=>1-(1-n)*(1-n),Nd_WHEEL=["wheel"],Nd_PAN=["panstart","panmove","panend"],Nd_PINCH=["pinchstart","pinchmove","pinchend"],Nd_TRIPLE_PAN=["tripanstart","tripanmove","tripanend"],Nd_DOUBLE_TAP=["doubletap"],Nd_KEYBOARD=["keydown"],wl={};class qS{constructor(e){E(this,"props",void 0),E(this,"state",{}),E(this,"transitionManager",void 0),E(this,"eventManager",void 0),E(this,"onViewStateChange",void 0),E(this,"onStateChange",void 0),E(this,"makeViewport",void 0),E(this,"_controllerState",void 0),E(this,"_events",{}),E(this,"_interactionState",{isDragging:!1}),E(this,"_customEvents",[]),E(this,"_eventStartBlocked",null),E(this,"_panMove",!1),E(this,"invertPan",!1),E(this,"dragMode","rotate"),E(this,"inertia",0),E(this,"scrollZoom",!0),E(this,"dragPan",!0),E(this,"dragRotate",!0),E(this,"doubleClickZoom",!0),E(this,"touchZoom",!0),E(this,"touchRotate",!1),E(this,"keyboard",!0),this.transitionManager=new Nye({...e,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const t in this._events)if(this._events[t]){var e;null===(e=this.eventManager)||void 0===e||e.off(t,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const t=this._eventStartBlocked;switch(e.type){case"panstart":return!t&&this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return!t&&this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return!t&&this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:t,y:i}=this.props,{offsetCenter:r}=e;return[r.x-t,r.y-i]}isPointInBounds(e,t){const{width:i,height:r}=this.props;if(t&&t.handled)return!1;const s=e[0]>=0&&e[0]<=i&&e[1]>=0&&e[1]<=r;return s&&t&&t.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:t}=e;return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const t=setTimeout(()=>{this._eventStartBlocked===t&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=t}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:t}=e;this.inertia=Number.isFinite(t)?t:!0===t?300:0;const{scrollZoom:i=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:c=!1,keyboard:l=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(Nd_WHEEL,u&&i),this.toggleEvents(Nd_PAN,u&&(r||s)),this.toggleEvents(Nd_PINCH,u&&(a||c)),this.toggleEvents(Nd_TRIPLE_PAN,u&&c),this.toggleEvents(Nd_DOUBLE_TAP,u&&o),this.toggleEvents(Nd_KEYBOARD,u&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=c,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,t){this.eventManager&&e.forEach(i=>{this._events[i]!==t&&(this._events[i]=t,t?this.eventManager.on(i,this.handleEvent):this.eventManager.off(i,this.handleEvent))})}updateViewport(e,t=null,i={}){const r={...e.getViewportProps(),...t},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(i),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;let i=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);const r=this.controllerState[i?"panStart":"rotateStart"]({pos:t});return this._panMove=i,this.updateViewport(r,rc,{isDragging:!0}),!0}_onPan(e){return!!this.isDragging()&&(this._panMove?this._onPanMove(e):this._onPanRotate(e))}_onPanEnd(e){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e))}_onPanMove(e){if(!this.dragPan)return!1;const t=this.getCenter(e),i=this.controllerState.pan({pos:t});return this.updateViewport(i,rc,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:t}=this;if(this.dragPan&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.pan({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:eb},{isDragging:!1,isPanning:!0})}else{const i=this.controllerState.panEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const t=this.getCenter(e),i=this.controllerState.rotate({pos:t});return this.updateViewport(i,rc,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:t}=this;if(this.dragRotate&&t&&e.velocity){const i=this.getCenter(e),s=this.controllerState.rotate({pos:[i[0]+e.velocityX*t/2,i[1]+e.velocityY*t/2]}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:eb},{isDragging:!1,isRotating:!0})}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;e.srcEvent.preventDefault();const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*i)));s<0&&0!==o&&(o=1/o);const a=this.controllerState.zoom({pos:t,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:t}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.rotateStart({pos:t});return this.updateViewport(i,rc,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const t=this.getCenter(e);t[0]-=e.deltaX;const i=this.controllerState.rotate({pos:t});return this.updateViewport(i,rc,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this;if(this.touchRotate&&t&&e.velocityY){const i=this.getCenter(e),r=[i[0],i[1]+=e.velocityY*t/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:t,transitionEasing:eb},{isDragging:!1,isRotating:!0}),this.blockEvents(t)}else{const i=this.controllerState.rotateEnd();this.updateViewport(i,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.controllerState.zoomStart({pos:t}).rotateStart({pos:t});return wl._startPinchRotation=e.rotation,wl._lastPinchEvent=e,this.updateViewport(i,rc,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let t=this.controllerState;if(this.touchZoom){const{scale:i}=e,r=this.getCenter(e);t=t.zoom({pos:r,scale:i})}if(this.touchRotate){const{rotation:i}=e;t=t.rotate({deltaAngleX:wl._startPinchRotation-i})}return this.updateViewport(t,rc,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),wl._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:t}=this,{_lastPinchEvent:i}=wl;if(this.touchZoom&&t&&i&&e.scale!==i.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(i.scale))/(e.deltaTime-i.deltaTime),c=Math.pow(2,o+a*t/2);s=s.zoom({pos:r,scale:c}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:t,transitionEasing:eb},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(t)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return wl._startPinchRotation=null,wl._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const t=this.getCenter(e);if(!this.isPointInBounds(t,e))return!1;const i=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:t,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:t}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const t=this.isFunctionKeyPressed(e),{zoomSpeed:i,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this;let c;const l={};switch(e.srcEvent.code){case"Minus":c=t?a.zoomOut(i).zoomOut(i):a.zoomOut(i),l.isZooming=!0;break;case"Equal":c=t?a.zoomIn(i).zoomIn(i):a.zoomIn(i),l.isZooming=!0;break;case"ArrowLeft":t?(c=a.rotateLeft(s),l.isRotating=!0):(c=a.moveLeft(r),l.isPanning=!0);break;case"ArrowRight":t?(c=a.rotateRight(s),l.isRotating=!0):(c=a.moveRight(r),l.isPanning=!0);break;case"ArrowUp":t?(c=a.rotateUp(o),l.isRotating=!0):(c=a.moveUp(r),l.isPanning=!0);break;case"ArrowDown":t?(c=a.rotateDown(o),l.isRotating=!0):(c=a.moveDown(r),l.isPanning=!0);break;default:return!1}return this.updateViewport(c,this._getTransitionProps(),l),!0}_getTransitionProps(e){const{transition:t}=this;return t&&t.transitionInterpolator?e?{...t,transitionInterpolator:new Qv({...e,...t.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:t:rc}}class _z{constructor(e,t){E(this,"_viewportProps",void 0),E(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=t}getViewportProps(){return this._viewportProps}getState(){return this._state}}class yz extends _z{constructor(e){const{width:t,height:i,rotationX:r=0,rotationOrbit:s=0,target:o=[0,0,0],zoom:a=0,minRotationX:c=-90,maxRotationX:l=90,minZoom:u=-1/0,maxZoom:d=1/0,startPanPosition:h,startRotatePos:f,startRotationX:p,startRotationOrbit:g,startZoomPosition:m,startZoom:y}=e;super({width:t,height:i,rotationX:r,rotationOrbit:s,target:o,zoom:a,minRotationX:c,maxRotationX:l,minZoom:u,maxZoom:d},{startPanPosition:h,startRotatePos:f,startRotationX:p,startRotationOrbit:g,startZoomPosition:m,startZoom:y}),E(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:t}){const i=this.getState().startPanPosition||t;if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startRotationX:s,startRotationOrbit:o}=this.getState(),{width:a,height:c}=this.getViewportProps();if(!r||void 0===s||void 0===o)return this;let l;if(e){let u=(e[0]-r[0])/a;(s<-90||s>90)&&(u*=-1),l={rotationX:s+(e[1]-r[1])/c*180,rotationOrbit:o+180*u}}else l={rotationX:s+i,rotationOrbit:o+t};return this._getUpdatedState(l)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{rotationOrbit:r}=i;return Math.abs(r-t.rotationOrbit)>180&&(i.rotationOrbit=r<0?r+360:r-360),i}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomPosition:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(t)||this._unproject(e)),!s)return this;const o=this._calculateNewZoom({scale:i,startZoom:r}),a=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();return void 0===t&&(t=this.getViewportProps().zoom),gi(t+Math.log2(e),r,i)}_panFromCenter(e){const{width:t,height:i,target:r}=this.getViewportProps();return this.pan({startPosition:r,pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Array.isArray(r)?[gi(r[0],i,t),gi(r[1],i,t)]:gi(r,i,t),e.rotationX=gi(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=function uye(n,e){const t=n%e;return t<0?e+t:t}(a+180,360)-180),e}}class Vye extends qS{constructor(...e){super(...e),E(this,"ControllerState",yz),E(this,"transition",{transitionDuration:300,transitionInterpolator:new Qv({transitionProps:{compare:["target","zoom","rotationX","rotationOrbit"],required:["target","zoom"]}})})}}class Uye extends yz{constructor(e){super(e),E(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:t}){const{maxZoom:i,minZoom:r}=this.getViewportProps();void 0===t&&(t=this.getViewportProps().zoom);let s=Math.log2(e);if(Array.isArray(t)){let[o,a]=t;switch(this.zoomAxis){case"X":o=gi(o+s,r,i);break;case"Y":a=gi(a+s,r,i);break;default:let c=Math.min(o+s,a+s);c<r&&(s+=r-c),c=Math.max(o+s,a+s),c>i&&(s+=i-c),o+=s,a+=s}return[o,a]}return gi(t+s,r,i)}}class jye extends qS{constructor(...e){super(...e),E(this,"ControllerState",Uye),E(this,"transition",{transitionDuration:300,transitionInterpolator:new Qv(["target","zoom"])}),E(this,"dragMode","pan")}_onPanRotate(){return!1}}class XS extends WS{get ViewportType(){return Rye}get ControllerType(){return jye}}E(XS,"displayName","OrthographicView");const YS=Math.PI/180;function Hye({height:n,focalDistance:e,orbitAxis:t,rotationX:i,rotationOrbit:r,zoom:s}){const o="Z"===t?[0,0,1]:[0,1,0],a="Z"===t?[0,-e,0]:[0,0,e],c=(new Be).lookAt({eye:a,up:o});c.rotateX(i*YS),"Z"===t?c.rotateZ(r*YS):c.rotateY(r*YS);const l=Math.pow(2,s)/n;return c.scale(l),c}class zye extends tc{constructor(e){const{height:t,projectionMatrix:i,fovy:r=50,orbitAxis:s="Z",target:o=[0,0,0],rotationX:a=0,rotationOrbit:c=0,zoom:l=0}=e,u=i?i[5]/2:zS(r);super({...e,longitude:void 0,viewMatrix:Hye({height:t||1,focalDistance:u,orbitAxis:s,rotationX:a,rotationOrbit:c,zoom:l}),fovy:r,focalDistance:u,position:o,zoom:l}),E(this,"projectedCenter",void 0),this.projectedCenter=this.project(this.center)}unproject(e,{topLeft:t=!0}={}){const[i,r,s=this.projectedCenter[2]]=e,o=t?r:this.height-r,[a,c,l]=Hp([i,o,s],this.pixelUnprojectionMatrix);return[a,c,l]}panByPosition(e,t){const i=this.project(e);return{target:this.unproject([this.width/2+i[0]-t[0],this.height/2+i[1]-t[1],this.projectedCenter[2]])}}}class vz extends WS{constructor(e={}){super(e),this.props.orbitAxis=e.orbitAxis||"Z"}get ViewportType(){return zye}get ControllerType(){return Vye}}E(vz,"displayName","OrbitView");const Wp="vs",KS="fs";function Rr(n,e){if(!n)throw new Error(e||"shadertools: assertion failed.")}const JS={number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},array:{validate:(n,e)=>Array.isArray(n)||ArrayBuffer.isView(n)}};function Wye(n){let e=bz(n);return"object"===e?n?"type"in n?Object.assign({},n,JS[n.type]):"value"in n?(e=bz(n.value),Object.assign({type:e},n,JS[e])):{type:"object",value:n}:{type:"object",value:null}:Object.assign({type:e,value:n},JS[e])}function bz(n){return Array.isArray(n)||ArrayBuffer.isView(n)?"array":typeof n}class ZS{constructor(e){let{name:t,vs:i,fs:r,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:c=[],defines:l={},inject:u={},vertexShader:d,fragmentShader:h}=e;Rr("string"==typeof t),this.name=t,this.vs=i||d,this.fs=r||h,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(c),this.defines=l,this.injections=function Xye(n){const e={vs:{},fs:{}};for(const t in n){let i=n[t];"string"==typeof i&&(i={order:0,injection:i}),e[t.slice(0,2)][t]=i}return e}(u),o&&(this.uniforms=function Gye(n){const e={};for(const t in n){const r=Wye(n[t]);e[t]=r}return e}(o))}getModuleSource(e){let t;switch(e){case"vs":t=this.vs||"";break;case"fs":t=this.fs||"";break;default:Rr(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),"\n").concat(t,"// END MODULE_").concat(this.name,"\n\n")}getUniforms(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,t){this.deprecations.forEach(i=>{i.regex.test(e)&&(i.deprecated?t.deprecated(i.old,i.new)():t.removed(i.old,i.new)())})}_parseDeprecationDefinitions(e){return e.forEach(t=>{t.regex="function"===t.type?new RegExp("\\b".concat(t.old,"\\(")):new RegExp("".concat(t.type," ").concat(t.old,";"))}),e}_defaultGetUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={},i=this.uniforms;for(const r in i){const s=i[r];r in e&&!s.private?(s.validate&&Rr(s.validate(e[r],s),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=s.value}return t}}function Yye(n){return function Ez(n){const e={},t={};return QS({modules:n,level:0,moduleMap:e,moduleDepth:t}),Object.keys(t).sort((i,r)=>t[r]-t[i]).map(i=>e[i])}(wz(n))}function QS(n){let{modules:e,level:t,moduleMap:i,moduleDepth:r}=n;if(t>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)i[s.name]=s,(void 0===r[s.name]||r[s.name]<t)&&(r[s.name]=t);for(const s of e)s.dependencies&&QS({modules:s.dependencies,level:t+1,moduleMap:i,moduleDepth:r})}function wz(n,e){return n.map(t=>(t instanceof ZS||(Rr("string"!=typeof t,"Shader module use by name is deprecated. Import shader module '".concat(t,"' and use it directly.")),Rr(t.name,"shader module has no name"),(t=new ZS(t)).dependencies=wz(t.dependencies)),t))}const Jye=7936,Zye=7937,Qye=7938,eve=35724,ex={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Cl={};function ive(n,e){return n.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":n.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":n.match(/AMD/i)||e.match(/AMD/i)||n.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(ex).forEach(n=>{Cl[n]=n});const tx={};function Cz(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=ex[e];if(Rr(i,e),!function Kye(){const e=typeof window<"u"&&window.navigator||{},t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).userAgent||e.userAgent||"",i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r}(t))return!0;if(e in tx)return tx[e];const s=t.behavior||"enable",o="#extension GL_".concat(i[0]," : ").concat(s,"\nvoid main(void) {}"),a=n.createShader(35633);n.shaderSource(a,o),n.compileShader(a);const c=n.getShaderParameter(a,35713);return n.deleteShader(a),tx[e]=c,c}function tb(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>function rve(n,e){const t=ex[e];Rr(t,e);const i=function tve(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}(n)&&t[1]||t[0],r="string"==typeof i?!!n.getExtension(i):i;return Rr(!1===r||!0===r),r}(n,t))}const lve={[Wp]:"#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",[KS]:"#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n"},nb="__LUMA_INJECT_DECLARATIONS__",Az=/void\s+main\s*\([^)]*\)\s*\{\n?/,Tz=/}\n?[^{}]*$/,nx=[];function Sz(n,e,t){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e===Wp;for(const s in t){const o=t[s];o.sort((c,l)=>c.order-l.order),nx.length=o.length;for(let c=0,l=o.length;c<l;++c)nx[c]=o[c].injection;const a="".concat(nx.join("\n"),"\n");switch(s){case"vs:#decl":r&&(n=n.replace(nb,a));break;case"vs:#main-start":r&&(n=n.replace(Az,c=>c+a));break;case"vs:#main-end":r&&(n=n.replace(Tz,c=>a+c));break;case"fs:#decl":r||(n=n.replace(nb,a));break;case"fs:#main-start":r||(n=n.replace(Az,c=>c+a));break;case"fs:#main-end":r||(n=n.replace(Tz,c=>a+c));break;default:n=n.replace(s,c=>c+a)}}return n=n.replace(nb,""),i&&(n=n.replace(/\}\s*$/,s=>s+lve[e])),n}function ix(n){const e={};return Rr(Array.isArray(n)&&n.length>1),n.forEach(t=>{for(const i in t)e[i]=e[i]?"".concat(e[i],"\n").concat(t[i]):t[i]}),e}function Fd(n){return new RegExp("\\b".concat(n,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const xz=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,"#version 300 es\n"],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],uve=[...xz,[Fd("attribute"),"in $1"],[Fd("varying"),"out $1"]],dve=[...xz,[Fd("varying"),"in $1"]],Mz=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],hve=[...Mz,[Fd("in"),"attribute $1"],[Fd("out"),"varying $1"]],fve=[...Mz,[Fd("in"),"varying $1"]],rx="gl_FragColor",sx=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,pve=/void\s+main\s*\([^)]*\)\s*\{\n?/;function ib(n,e){for(const[t,i]of e)n=n.replace(t,i);return n}const yve="\n\n".concat(nb,"\n\n"),Iz={[Wp]:"vertex",[KS]:"fragment"};function Dz(n,e){let{id:t,source:i,type:r,modules:s,defines:o={},hookFunctions:a=[],inject:c={},transpileToGLSL100:l=!1,prologue:u=!0,log:d}=e;Rr("string"==typeof i,"shader source must be a string");const h=r===Wp,f=i.split("\n");let p=100,g="",m=i;0===f[0].indexOf("#version ")?(p=300,g=f[0],m=f.slice(1).join("\n")):g="#version ".concat(p);const y={};s.forEach(D=>{Object.assign(y,D.getDefines())}),Object.assign(y,o);let v=u?"".concat(g,"\n").concat(function Cve(n){let{id:e,source:t,type:i}=n;return e&&"string"==typeof e&&-1===t.indexOf("SHADER_NAME")?"\n#define SHADER_NAME ".concat(e,"_").concat(Iz[i],"\n\n"):""}({id:t,source:i,type:r}),"\n").concat(function wve(n){let{type:e}=n;return"\n#define SHADER_TYPE_".concat(Iz[e].toUpperCase(),"\n")}({type:r}),"\n").concat(function sve(n){switch(function nve(n){const e=n.getExtension("WEBGL_debug_renderer_info"),t=n.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||Jye),i=n.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||Zye);return{gpuVendor:ive(t,i),vendor:t,renderer:i,version:n.getParameter(Qye),shadingLanguageVersion:n.getParameter(eve)}}(n).gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}(n),"\n").concat(function ove(n){let i="#if (__VERSION__ > 120)\n\n# define FEATURE_GLSL_DERIVATIVES\n# define FEATURE_GLSL_DRAW_BUFFERS\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FEATURE_GLSL_TEXTURE_LOD\n\n// DEPRECATED FLAGS, remove in v9\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return tb(n,Cl.GLSL_FRAG_DEPTH)&&(i+="\n// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FEATURE_GLSL_FRAG_DEPTH\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),tb(n,Cl.GLSL_DERIVATIVES)&&Cz(n,Cl.GLSL_DERIVATIVES)&&(i+="\n// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define FEATURE_GLSL_DERIVATIVES\n# define DERIVATIVES\n#endif\n"),tb(n,Cl.GLSL_FRAG_DATA)&&Cz(n,Cl.GLSL_FRAG_DATA,{behavior:"require"})&&(i+="\n// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define FEATURE_GLSL_DRAW_BUFFERS\n#define DRAW_BUFFERS\n#endif\n"),tb(n,Cl.GLSL_TEXTURE_LOD)&&(i+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n\n# define FEATURE_GLSL_TEXTURE_LOD\n# define TEXTURE_LOD\n\n#endif\n"),i}(n),"\n").concat(function Ave(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,t="";for(const i in n){0===e&&(t+="\n// APPLICATION DEFINES\n"),e++;const r=n[i];(r||Number.isFinite(r))&&(t+="#define ".concat(i.toUpperCase()," ").concat(n[i],"\n"))}return 0===e&&(t+="\n"),t}(y),"\n").concat(h?"":"precision highp float;\n\n","\n"):"".concat(g,"\n");const _=function Sve(n){const e={vs:{},fs:{}};return n.forEach(t=>{let i;"string"!=typeof t?(i=t,t=i.hook):i={},t=t.trim();const[r,s]=t.split(":"),o=t.replace(/\(.+/,"");e[r][o]=Object.assign(i,{signature:s})}),e}(a),w={},A={},S={};for(const D in c){const x="string"==typeof c[D]?{injection:c[D],order:0}:c[D],k=D.match(/^(v|f)s:(#)?([\w-]+)$/);k?k[2]?"decl"===k[3]?A[D]=[x]:S[D]=[x]:w[D]=[x]:S[D]=[x]}for(const D of s){d&&D.checkDeprecations(m,d),v+=D.getModuleSource(r,p);const k=D.injections[r];for(const U in k){const V=U.match(/^(v|f)s:#([\w-]+)$/);if(V){const O="decl"===V[2]?A:S;O[U]=O[U]||[],O[U].push(k[U])}else w[U]=w[U]||[],w[U].push(k[U])}}return v+=yve,v=Sz(v,r,A),v+=function Tve(n,e){let t="";for(const i in n){const r=n[i];if(t+="void ".concat(r.signature," {\n"),r.header&&(t+="  ".concat(r.header)),e[i]){const s=e[i];s.sort((o,a)=>o.order-a.order);for(const o of s)t+="  ".concat(o.injection,"\n")}r.footer&&(t+="  ".concat(r.footer)),t+="}\n"}return t}(_[r],w),v+=m,v=Sz(v,r,S),v=function gve(n,e,t){switch(e){case 300:return t?ib(n,uve):function mve(n){const e=(n=ib(n,dve)).match(sx);if(e){const t=e[1];n=n.replace(new RegExp("\\b".concat(rx,"\\b"),"g"),t)}else{const t="fragmentColor";n=n.replace(pve,i=>"out vec4 ".concat(t,";\n").concat(i)).replace(new RegExp("\\b".concat(rx,"\\b"),"g"),t)}return n}(n);case 100:return t?ib(n,hve):function _ve(n){const e=(n=ib(n,fve)).match(sx);if(e){const t=e[1];n=n.replace(sx,"").replace(new RegExp("\\b".concat(t,"\\b"),"g"),rx)}return n}(n);default:throw new Error("unknown GLSL version ".concat(e))}}(v,l?100:p,h),v}function Eve(n){return function(t){const i={};for(const r of n){const s=r.getUniforms(t,i);Object.assign(i,s)}return i}}const ae=new Bp({id:"luma.gl"});function Yi(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}const Mve="Requires WebGL2";function rb(n){return typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||!Number.isFinite(n._version))}function $e(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||!(!n||2!==n._version)}function sb(n){return Yi(rb(n),"Invalid WebGLRenderingContext"),n}function Oi(n){return Yi($e(n),Mve),n}const $p={};const qp=function n(e){const t=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let i=0;i<this.attribs.length;i++){const r=new n.VertexAttrib(t);this.attribs[i]=r}this.maxAttrib=0};(qp.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()}).prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Al=function(e){const t=this;this.gl=e,function Pve(n){const e=n.getError;n.getError=function(){let i;do{i=e.apply(n),0!==i&&($p[i]=!0)}while(0!==i);for(i in $p)if($p[i])return delete $p[i],parseInt(i,10);return 0}}(e);const i=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===t.VERTEX_ARRAY_BINDING_OES?t.currentVertexArrayObject===t.defaultVertexArrayObject?null:t.currentVertexArrayObject:i.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!0,i.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=t.currentVertexArrayObject;return o.maxAttrib=Math.max(o.maxAttrib,s),o.attribs[s].enabled=!1,i.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:t.currentArrayBuffer=o;break;case 34963:t.currentVertexArrayObject.elementArrayBuffer=o}return i.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const c=t.currentVertexArrayObject.attribs[s];switch(o){case 34975:return c.buffer;case 34338:return c.enabled;case 34339:return c.size;case 34340:return c.stride;case 34341:return c.type;case 34922:return c.normalized;default:return i.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,c,l,u){const d=t.currentVertexArrayObject;d.maxAttrib=Math.max(d.maxAttrib,s);const h=d.attribs[s];return h.buffer=t.currentArrayBuffer,h.size=o,h.type=a,h.normalized=c,h.stride=l,h.offset=u,h.recache(),i.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{(function Rve(n){globalThis.console&&globalThis.console.log&&globalThis.console.log(n)})("OESVertexArrayObject emulation library context restored"),t.reset_()},!0),this.reset_()};Al.prototype.VERTEX_ARRAY_BINDING_OES=34229,Al.prototype.reset_=function(){if(void 0!==this.vertexArrayObjects)for(let i=0;i<this.vertexArrayObjects.length;++i)this.vertexArrayObjects.isAlive=!1;this.maxVertexAttribs=this.gl.getParameter(34921),this.defaultVertexArrayObject=new qp(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)},Al.prototype.createVertexArrayOES=function(){const e=new qp(this);return this.vertexArrayObjects.push(e),e},Al.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)},Al.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof qp&&e.hasBeenBound&&e.ext===this)},Al.prototype.bindVertexArrayOES=function(e){const t=this.gl;if(e&&!e.isAlive)return void function Ove(n,e){$p[n]=!0,void 0!==e&&function Dve(n){globalThis.console&&globalThis.console.error&&globalThis.console.error(n)}(e)}(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");const i=this.original,r=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(r===s)return;(!r||s.elementArrayBuffer!==r.elementArrayBuffer)&&i.bindBuffer.call(t,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(r?r.maxAttrib:0,s.maxAttrib);for(let c=0;c<=a;c++){const l=s.attribs[c],u=r?r.attribs[c]:null;if((!r||l.enabled!==u.enabled)&&(l.enabled?i.enableVertexAttribArray.call(t,c):i.disableVertexAttribArray.call(t,c)),l.enabled){let d=!1;(!r||l.buffer!==u.buffer)&&(o!==l.buffer&&(i.bindBuffer.call(t,34962,l.buffer),o=l.buffer),d=!0),(d||l.cached!==u.cached)&&i.vertexAttribPointer.call(t,c,l.size,l.type,l.normalized,l.stride,l.offset)}}this.currentArrayBuffer!==o&&i.bindBuffer.call(t,34962,this.currentArrayBuffer)};const Rz="OES_element_index",Oz="WEBGL_draw_buffers",Pz="WEBGL_debug_renderer_info",Bve=35723,Uve=36795,jve=34047,Hve=37445,zve=37446,$t=n=>$e(n)?void 0:0,Gve={3074:n=>$e(n)?void 0:36064,[Bve]:n=>$e(n)?void 0:4352,35977:$t,32937:$t,[Uve]:(n,e)=>{const t=$e(n)?n.getExtension("EXT_disjoint_timer_query_webgl2"):n.getExtension("EXT_disjoint_timer_query");return t&&t.GPU_DISJOINT_EXT?e(t.GPU_DISJOINT_EXT):0},[Hve]:(n,e)=>{const t=n.getExtension(Pz);return e(t&&t.UNMASKED_VENDOR_WEBGL||7936)},[zve]:(n,e)=>{const t=n.getExtension(Pz);return e(t&&t.UNMASKED_RENDERER_WEBGL||7937)},[jve]:(n,e)=>{const t=n.luma.extensions.EXT_texture_filter_anisotropic;return t?e(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:$t,35071:$t,37447:$t,36063:(n,e)=>{if(!$e(n)){const t=n.getExtension(Oz);return t?e(t.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:$t,35374:$t,35377:$t,34852:n=>{if(!$e(n)){const e=n.getExtension(Oz);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:n=>n.getExtension(Rz)?2147483647:65535,33001:n=>n.getExtension(Rz)?16777216:65535,33e3:n=>16777216,37157:$t,35373:$t,35657:$t,36183:$t,37137:$t,34045:$t,35978:$t,35979:$t,35968:$t,35376:$t,35375:$t,35659:$t,37154:$t,35371:$t,35658:$t,35076:$t,35077:$t,35380:$t},$ve="OES_vertex_array_object",Nz="ANGLE_instanced_arrays",qve="WEBGL_draw_buffers",Xve="EXT_disjoint_timer_query",Fz={[$ve]:{meta:{suffix:"OES"},createVertexArray:()=>{Yi(!1,"VertexArray requires WebGL2 or OES_vertex_array_object extension")},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Nz]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(n,e){Yi(0===e,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[qve]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Yi(!1)}},[Xve]:{meta:{suffix:"EXT"},createQuery:()=>{Yi(!1)},deleteQuery:()=>{Yi(!1)},beginQuery:()=>{Yi(!1)},endQuery:()=>{},getQuery(n,e){return this.getQueryObject(n,e)},getQueryParameter(n,e){return this.getQueryObject(n,e)},getQueryObject:()=>{}}},ox={readBuffer:(n,e,t)=>{$e(n)&&e(t)},getVertexAttrib:(n,e,t,i)=>{const{webgl2:r,ext:s}=function Jve(n,e){return{webgl2:$e(n),ext:n.getExtension(e)}}(n,Nz);let o;switch(i){case 35069:o=!!r&&void 0;break;case 35070:o=r||s?void 0:0}return void 0!==o?o:e(t,i)},getProgramParameter:(n,e,t,i)=>{if(!$e(n))switch(i){case 35967:return 35981;case 35971:case 35382:return 0}return e(t,i)},getInternalformatParameter:(n,e,t,i,r)=>$e(n)||32937!==r?n.getInternalformatParameter(t,i,r):new Int32Array([0]),getTexParameter(n,e,t,i){if(34046===i){const{extensions:r}=n.luma,s=r.EXT_texture_filter_anisotropic;i=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046}return e(t,i)},getParameter:function Wve(n,e,t){const i=Gve[t],r="function"==typeof i?i(n,e,t):i;return void 0!==r?r:e(t)},hint:(n,e,t,i)=>e(t,i)};function nbe(n,e){let{extension:t,target:i,target2:r}=e;const s=Fz[t];Yi(s);const{meta:o={}}=s,{suffix:a=""}=o,c=n.getExtension(t);for(const l of Object.keys(s)){const u="".concat(l).concat(a);let d=null;"meta"===l||"function"==typeof n[l]||(c&&"function"==typeof c[u]?d=function(){return c[u](...arguments)}:"function"==typeof s[l]&&(d=s[l].bind(i))),d&&(i[l]=d,r[l]=d)}}globalThis.polyfillContext=function Zve(n){n.luma=n.luma||{};const{luma:e}=n;return e.polyfilled||(function Nve(n){if("function"==typeof n.createVertexArray)return;const e=n.getSupportedExtensions;n.getSupportedExtensions=function(){const r=e.call(this)||[];return r.indexOf("OES_vertex_array_object")<0&&r.push("OES_vertex_array_object"),r};const t=n.getExtension;n.getExtension=function(r){return t.call(this,r)||("OES_vertex_array_object"!==r?null:(n.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Al(this)),this.__OESVertexArrayObject))}}(n),function Qve(n){n.luma.extensions={};const e=n.getSupportedExtensions()||[];for(const t of e)n.luma[t]=n.getExtension(t)}(n),function tbe(n,e){for(const t of Object.getOwnPropertyNames(e))"overrides"!==t&&nbe(n,{extension:t,target:n.luma,target2:n})}(n,Fz),function ebe(n,e){let{target:t,target2:i}=e;Object.keys(ox).forEach(r=>{if("function"==typeof ox[r]){const s=n[r]?n[r].bind(n):()=>{},o=ox[r].bind(null,n,s);t[r]=o,i[r]=o}})}(n,{target:e,target2:n}),e.polyfilled=!0),n};const ax={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},sc=(n,e,t)=>e?n.enable(t):n.disable(t),kz=(n,e,t)=>n.hint(t,e),Or=(n,e,t)=>n.pixelStorei(t,e);function Xp(n){return Array.isArray(n)||ArrayBuffer.isView(n)}const sbe={3042:sc,32773:(n,e)=>n.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(n,e)=>n.clearColor(...e),3107:(n,e)=>n.colorMask(...e),2884:sc,2885:(n,e)=>n.cullFace(e),2929:sc,2931:(n,e)=>n.clearDepth(e),2932:(n,e)=>n.depthFunc(e),2928:(n,e)=>n.depthRange(...e),2930:(n,e)=>n.depthMask(e),3024:sc,35723:kz,36006:(n,e)=>{const t=$e(n)?36009:36160;return n.bindFramebuffer(t,e)},2886:(n,e)=>n.frontFace(e),33170:kz,2849:(n,e)=>n.lineWidth(e),32823:sc,32824:"polygonOffset",10752:"polygonOffset",35977:sc,32938:"sampleCoverage",32939:"sampleCoverage",3089:sc,3088:(n,e)=>n.scissor(...e),2960:sc,2961:(n,e)=>n.clearStencil(e),2968:(n,e)=>n.stencilMaskSeparate(1028,e),36005:(n,e)=>n.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(n,e)=>n.viewport(...e),3333:Or,3317:Or,37440:Or,37441:Or,37443:Or,3330:Or,3332:Or,3331:Or,36010:(n,e)=>n.bindFramebuffer(36008,e),3314:Or,32878:Or,3316:Or,3315:Or,32877:Or,framebuffer:(n,e)=>n.bindFramebuffer(36160,e&&"handle"in e?e.handle:e),blend:(n,e)=>e?n.enable(3042):n.disable(3042),blendColor:(n,e)=>n.blendColor(...e),blendEquation:(n,e)=>{e=Xp(e)?e:[e,e],n.blendEquationSeparate(...e)},blendFunc:(n,e)=>{e=Xp(e)&&2===e.length?[...e,...e]:e,n.blendFuncSeparate(...e)},clearColor:(n,e)=>n.clearColor(...e),clearDepth:(n,e)=>n.clearDepth(e),clearStencil:(n,e)=>n.clearStencil(e),colorMask:(n,e)=>n.colorMask(...e),cull:(n,e)=>e?n.enable(2884):n.disable(2884),cullFace:(n,e)=>n.cullFace(e),depthTest:(n,e)=>e?n.enable(2929):n.disable(2929),depthFunc:(n,e)=>n.depthFunc(e),depthMask:(n,e)=>n.depthMask(e),depthRange:(n,e)=>n.depthRange(...e),dither:(n,e)=>e?n.enable(3024):n.disable(3024),derivativeHint:(n,e)=>{n.hint(35723,e)},frontFace:(n,e)=>n.frontFace(e),mipmapHint:(n,e)=>n.hint(33170,e),lineWidth:(n,e)=>n.lineWidth(e),polygonOffsetFill:(n,e)=>e?n.enable(32823):n.disable(32823),polygonOffset:(n,e)=>n.polygonOffset(...e),sampleCoverage:(n,e)=>n.sampleCoverage(...e),scissorTest:(n,e)=>e?n.enable(3089):n.disable(3089),scissor:(n,e)=>n.scissor(...e),stencilTest:(n,e)=>e?n.enable(2960):n.disable(2960),stencilMask:(n,e)=>{e=Xp(e)?e:[e,e];const[t,i]=e;n.stencilMaskSeparate(1028,t),n.stencilMaskSeparate(1029,i)},stencilFunc:(n,e)=>{e=Xp(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilFuncSeparate(1028,t,i,r),n.stencilFuncSeparate(1029,s,o,a)},stencilOp:(n,e)=>{e=Xp(e)&&3===e.length?[...e,...e]:e;const[t,i,r,s,o,a]=e;n.stencilOpSeparate(1028,t,i,r),n.stencilOpSeparate(1029,s,o,a)},viewport:(n,e)=>n.viewport(...e)};function an(n,e,t){return void 0!==e[n]?e[n]:t[n]}const obe={blendEquation:(n,e,t)=>n.blendEquationSeparate(an(32777,e,t),an(34877,e,t)),blendFunc:(n,e,t)=>n.blendFuncSeparate(an(32969,e,t),an(32968,e,t),an(32971,e,t),an(32970,e,t)),polygonOffset:(n,e,t)=>n.polygonOffset(an(32824,e,t),an(10752,e,t)),sampleCoverage:(n,e,t)=>n.sampleCoverage(an(32938,e,t),an(32939,e,t)),stencilFuncFront:(n,e,t)=>n.stencilFuncSeparate(1028,an(2962,e,t),an(2967,e,t),an(2963,e,t)),stencilFuncBack:(n,e,t)=>n.stencilFuncSeparate(1029,an(34816,e,t),an(36003,e,t),an(36004,e,t)),stencilOpFront:(n,e,t)=>n.stencilOpSeparate(1028,an(2964,e,t),an(2965,e,t),an(2966,e,t)),stencilOpBack:(n,e,t)=>n.stencilOpSeparate(1029,an(34817,e,t),an(34818,e,t),an(34819,e,t))},Lz={enable:(n,e)=>n({[e]:!0}),disable:(n,e)=>n({[e]:!1}),pixelStorei:(n,e,t)=>n({[e]:t}),hint:(n,e,t)=>n({[e]:t}),bindFramebuffer:(n,e,t)=>{switch(e){case 36160:return n({36006:t,36010:t});case 36009:return n({36006:t});case 36008:return n({36010:t});default:return null}},blendColor:(n,e,t,i,r)=>n({32773:new Float32Array([e,t,i,r])}),blendEquation:(n,e)=>n({32777:e,34877:e}),blendEquationSeparate:(n,e,t)=>n({32777:e,34877:t}),blendFunc:(n,e,t)=>n({32969:e,32968:t,32971:e,32970:t}),blendFuncSeparate:(n,e,t,i,r)=>n({32969:e,32968:t,32971:i,32970:r}),clearColor:(n,e,t,i,r)=>n({3106:new Float32Array([e,t,i,r])}),clearDepth:(n,e)=>n({2931:e}),clearStencil:(n,e)=>n({2961:e}),colorMask:(n,e,t,i,r)=>n({3107:[e,t,i,r]}),cullFace:(n,e)=>n({2885:e}),depthFunc:(n,e)=>n({2932:e}),depthRange:(n,e,t)=>n({2928:new Float32Array([e,t])}),depthMask:(n,e)=>n({2930:e}),frontFace:(n,e)=>n({2886:e}),lineWidth:(n,e)=>n({2849:e}),polygonOffset:(n,e,t)=>n({32824:e,10752:t}),sampleCoverage:(n,e,t)=>n({32938:e,32939:t}),scissor:(n,e,t,i,r)=>n({3088:new Int32Array([e,t,i,r])}),stencilMask:(n,e)=>n({2968:e,36005:e}),stencilMaskSeparate:(n,e,t)=>n({[1028===e?2968:36005]:t}),stencilFunc:(n,e,t,i)=>n({2962:e,2967:t,2963:i,34816:e,36003:t,36004:i}),stencilFuncSeparate:(n,e,t,i,r)=>n({[1028===e?2962:34816]:t,[1028===e?2967:36003]:i,[1028===e?2963:36004]:r}),stencilOp:(n,e,t,i)=>n({2964:e,2965:t,2966:i,34817:e,34818:t,34819:i}),stencilOpSeparate:(n,e,t,i,r)=>n({[1028===e?2964:34817]:t,[1028===e?2965:34818]:i,[1028===e?2966:34819]:r}),viewport:(n,e,t,i,r)=>n({2978:[e,t,i,r]})},fo=(n,e)=>n.isEnabled(e),Bz={3042:fo,2884:fo,2929:fo,3024:fo,32823:fo,32926:fo,32928:fo,3089:fo,2960:fo,35977:fo};function Vz(n){for(const e in n)return!1;return!0}function abe(n,e){if(n===e)return!0;const t=Array.isArray(n)||ArrayBuffer.isView(n),i=Array.isArray(e)||ArrayBuffer.isView(e);if(t&&i&&n.length===e.length){for(let r=0;r<n.length;++r)if(n[r]!==e[r])return!1;return!0}return!1}function Uz(n,e){const t=n[e].bind(n);n[e]=function(){const r=arguments.length<=0?void 0:arguments[0];return r in n.state.cache&&n.state.enable?n.state.cache[r]:t(...arguments)},Object.defineProperty(n[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function cbe(n,e,t){const i=n[e].bind(n);n[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:c,oldValue:l}=t(n.state._updateCache,...o);return c&&i(...o),l},Object.defineProperty(n[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}class ube{constructor(e){let{copyState:t=!1,log:i=()=>{}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=t?function hbe(n,e){if("number"==typeof(e=e||ax)){const r=e,s=Bz[r];return s?s(n,r):n.getParameter(r)}const t=Array.isArray(e)?e:Object.keys(e),i={};for(const r of t){const s=Bz[r];i[r]=s?s(n,Number(r)):n.getParameter(Number(r))}return i}(e):Object.assign({},ax),this.log=i,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Yi(this.stateStack.length>0),ea(this.gl,this.stateStack[this.stateStack.length-1]),this.stateStack.pop()}_updateCache(e){let i,t=!1;const r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){Yi(void 0!==s);const o=e[s],a=this.cache[s];abe(o,a)||(t=!0,i=a,r&&!(s in r)&&(r[s]=a),this.cache[s]=o)}return{valueChanged:t,oldValue:i}}}function jz(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enable:t=!0,copyState:i}=e;if(Yi(void 0!==i),!n.state){const{polyfillContext:r}=globalThis;r&&r(n),n.state=new ube(n,{copyState:i}),function lbe(n){const e=n.useProgram.bind(n);n.useProgram=function(i){n.state.program!==i&&(e(i),n.state.program=i)}}(n);for(const s in Lz)cbe(n,s,Lz[s]);Uz(n,"getParameter"),Uz(n,"isEnabled")}return n.state.enable=t,n}function Hz(n){Yi(n.state),n.state.pop()}function ea(n,e){if(Yi(rb(n),"setParameters requires a WebGL context"),Vz(e))return;const t={};for(const r in e){const s=Number(r),o=sbe[r];o&&("string"==typeof o?t[o]=!0:o(n,e[r],s))}const i=n.state&&n.state.cache;if(i)for(const r in t)(0,obe[r])(n,e,i)}function ns(n,e,t){if(Vz(e))return t(n);const{nocatch:i=!0}=e;let r;if(function dbe(n){n.state||jz(n,{copyState:!1}),n.state.push()}(n),ea(n,e),i)r=t(n),Hz(n);else try{r=t(n)}finally{Hz(n)}return r}function kd(n){const{luma:e}=n;if(n.canvas&&e){const t=e.canvasSizeInfo,i="clientWidth"in t?t.clientWidth:n.canvas.clientWidth;return i?n.drawingBufferWidth/i:1}return 1}function cx(n,e){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function gbe(n,e,t,i,r){const s=zz(n[0],e,t);let o=Gz(n[1],e,i,r),a=zz(n[0]+1,e,t);const c=a===t-1?a:a-1;let l;return a=Gz(n[1]+1,e,i,r),r?(a=0===a?a:a+1,l=o,o=a):l=a===i-1?a:a-1,{x:s,y:o,width:Math.max(c-s+1,1),height:Math.max(l-o+1,1)}}(e,kd(n),n.drawingBufferWidth,n.drawingBufferHeight,t)}function zz(n,e,t){return Math.min(Math.round(n*e),t-1)}function Gz(n,e,t,i){return i?Math.max(0,t-1-Math.round(n*e)):Math.min(Math.round(n*e),t-1)}const lx=uo(),mbe=lx&&typeof document<"u",Wz={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function $z(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Yi(lx,"createGLContext only available in the browser.\nCreate your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils"),n=Object.assign({},Wz,n);const{width:e,height:t}=n;function i(a){if(n.throwOnError)throw new Error(a);return console.error(a),null}let r;n.onError=i;const{canvas:s}=n,o=function bbe(n){let s,{canvas:e,width:t=800,height:i=600,onError:r}=n;return"string"==typeof e?(mbe&&"complete"===document.readyState||r("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(t)?"".concat(t,"px"):"100%",s.style.height=Number.isFinite(i)?"".concat(i,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}({canvas:s,width:e,height:t,onError:i});return r=function vbe(n,e){const{onError:t}=e;let i=null;const r=c=>i=c.statusMessage||i;n.addEventListener("webglcontextcreationerror",r,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||n.getContext("webgl2",e),a=a||n.getContext("experimental-webgl2",e)),s&&(a=a||n.getContext("webgl",e),a=a||n.getContext("experimental-webgl",e)),n.removeEventListener("webglcontextcreationerror",r,!1),a?(e.onContextLost&&n.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&n.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):t("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(i||"Unknown error"))}(o,n),r?(r=ux(r,n),function Ebe(n){const e=$e(n)?"WebGL2":"WebGL1",t=function _be(n){const e=n.getParameter(7936),t=n.getParameter(7937),i=n.getExtension("WEBGL_debug_renderer_info");return{vendor:i&&n.getParameter(i.UNMASKED_VENDOR_WEBGL||7936)||e,renderer:i&&n.getParameter(i.UNMASKED_RENDERER_WEBGL||7937)||t,vendorMasked:e,rendererMasked:t,version:n.getParameter(7938),shadingLanguageVersion:n.getParameter(35724)}}(n),i=t?"(".concat(t.vendor,",").concat(t.renderer,")"):"",r=n.debug?" debug":"";ae.info(1,"".concat(e).concat(r," context ").concat(i))()}(r),r):null}function ux(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n||n._instrumented)return n;n._version=n._version||function wbe(n){return typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?2:1}(n),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{},e=Object.assign({},Wz,e);const{manageState:t,debug:i}=e;return t&&jz(n,{copyState:!1,log:function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return ae.log(1,...s)()}}),lx&&i&&(globalThis.makeDebugContext?(n=globalThis.makeDebugContext(n,e),ae.level=Math.max(ae.level,1)):ae.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),n._instrumented=!0,n}function qz(){let n;if(typeof window<"u"&&window.performance)n=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();n=1e3*e[0]+e[1]/1e6}else n=Date.now();return n}class Xz{constructor(e,t){E(this,"name",void 0),E(this,"type",void 0),E(this,"sampleSize",1),E(this,"time",void 0),E(this,"count",void 0),E(this,"samples",void 0),E(this,"lastTiming",void 0),E(this,"lastSampleTime",void 0),E(this,"lastSampleCount",void 0),E(this,"_count",0),E(this,"_time",0),E(this,"_samples",0),E(this,"_startTime",0),E(this,"_timerPending",!1),this.name=e,this.type=t,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=qz(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(qz()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class dx{constructor(e){E(this,"id",void 0),E(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){return this._getOrCreate({name:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count"})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const t in this.stats)e(this.stats[t])}getTable(){const e={};return this.forEach(t=>{e[t.name]={time:t.time||0,count:t.count||0,average:t.getAverageTime()||0,hz:t.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>this._getOrCreate(t))}_getOrCreate(e){if(!e||!e.name)return null;const{name:t,type:i}=e;return this.stats[t]||(this.stats[t]=e instanceof Xz?e:new Xz(t,i)),this.stats[t]}}const Yp="8.5.21",Tl=new class Tbe{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new dx({id:e})),this.stats.get(e)}};if(globalThis.luma&&globalThis.luma.VERSION!==Yp)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Yp));function ee(n,e){if(!n)throw new Error(e||"luma.gl: assertion failed.")}function hx(n,e){if("string"!=typeof e)return e;const t=Number(e);if(!isNaN(t))return t;const i=n[e=e.replace(/^.*\./,"")];return ee(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function oc(n,e){e=Number(e);for(const t in n)if(n[t]===e)return"GL.".concat(t);return String(e)}globalThis.luma||(uo()&&ae.log(1,"luma.gl ".concat(Yp," - ").concat("set luma.log.level=1 (or higher) to trace rendering"))(),globalThis.luma=globalThis.luma||{VERSION:Yp,version:Yp,log:ae,stats:Tl,globals:{modules:{},nodeIO:{}}}),globalThis;const fx={};function hr(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";fx[n]=fx[n]||1;const e=fx[n]++;return"".concat(n,"-").concat(e)}function Yz(n){return ee("number"==typeof n,"Input must be a number"),n&&!(n&n-1)}function Ld(n){let e=!0;for(const t in n){e=!1;break}return e}function Kz(n,e,t,i){const r="See luma.gl ".concat(t," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(n);i.forEach(o=>{s.methodName||(s[o]=()=>{throw ae.removed("Calling removed method ".concat(e,".").concat(o,": "),r)(),new Error(o)})})}const Bd="Resource subclass must define virtual methods";class ta{get[Symbol.toStringTag](){return"Resource"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sb(e);const{id:i,userData:r={}}=t;this.gl=e,this.gl2=e,this.id=i||hr(this[Symbol.toStringTag]),this.userData=r,this._bound=!1,this._handle=t.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,t&&e&&t.filter(Boolean).forEach(i=>i.delete()),this}bind(){let t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!=typeof e?(this._bindHandle(e),this):(this._bound?t=e():(this._bindHandle(this.handle),this._bound=!0,t=e(),this._bound=!1,this._bindHandle(null)),t)}unbind(){this.bind(null)}getParameter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ee(e=hx(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=$e(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))return s&&"webgl2"in r?r.webgl2:r.webgl1}return this._getParameter(e,t)}getParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parameters:t,keys:i}=e,r=this.constructor.PARAMETERS||{},s=$e(this.gl),o={},a=t||Object.keys(r);for(const c of a){const l=r[c];if(l&&(!("webgl2"in l)||s)&&(!("extension"in l)||this.gl.getExtension(l.extension))){const d=i?oc(this.gl,c):c;o[d]=this.getParameter(c,e),i&&"GLenum"===l.type&&(o[d]=oc(this.gl,o[d]))}}return o}setParameter(e,t){ee(e=hx(this.gl,e));const r=(this.constructor.PARAMETERS||{})[e];if(r){const s=$e(this.gl);if("webgl2"in r&&!s||"extension"in r&&!this.gl.getExtension(r.extension))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=hx(t))}return this._setParameter(e,t),this}setParameters(e){for(const t in e)this.setParameter(t,e[t]);return this}stubRemovedMethods(e,t,i){return Kz(this,e,t,i)}initialize(e){}_createHandle(){throw new Error(Bd)}_deleteHandle(){throw new Error(Bd)}_bindHandle(e){throw new Error(Bd)}_getOptsFromHandle(){throw new Error(Bd)}_getParameter(e,t){throw new Error(Bd)}_setParameter(e,t){throw new Error(Bd)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],t=Tl.get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Tl.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,t),this._trackAllocatedMemoryForContext(e,t,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this[Symbol.toStringTag];const r=Tl.get("Memory Usage".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""));r.get("GPU Memory").addCount(e),r.get("".concat(t," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this[Symbol.toStringTag];const i=Tl.get("Memory Usage".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""));i.get("GPU Memory").subtractCount(this.byteLength),i.get("".concat(e," Memory")).subtractCount(this.byteLength)}}const Sbe="Failed to deduce GL constant from typed array";function px(n){switch(ArrayBuffer.isView(n)?n.constructor:n){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Sbe)}}function Kp(n){let{clamped:e=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(n){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Mbe(n){let{data:e,width:t,height:i}=n;const r=Math.round(t/2),s=Math.round(i/2),o=new Uint8Array(r*s*4);for(let a=0;a<s;a++)for(let c=0;c<r;c++)for(let l=0;l<4;l++)o[4*(a*r+c)+l]=e[4*(2*a*t+2*c)+l];return{data:o,width:r,height:s}}function gx(n,e,t){const{removedProps:i={},deprecatedProps:r={},replacedProps:s={}}=t;for(const a in i)if(a in e){const l=i[a]?"".concat(n,".").concat(i[a]):"N/A";ae.removed("".concat(n,".").concat(a),l)()}for(const a in r)if(a in e){const c=r[a];ae.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))()}let o=null;for(const a in s)if(a in e){const c=s[a];ae.deprecated("".concat(n,".").concat(a),"".concat(n,".").concat(c))(),o=o||Object.assign({},e),o[c]=e[a],delete o[a]}return o||e}const Ibe={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Dbe={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class fr{static getBytesPerElement(e){return Kp(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return ee(e.size),Kp(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new fr(Ibe,...t)}constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(r=>this._assign(r)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return fr.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return fr.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=gx("Accessor",e,Dbe),void 0!==e.type&&(this.type=e.type,(5124===e.type||5125===e.type)&&(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&(this.index="boolean"==typeof e.index?e.index?1:0:e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}}const Zz={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Rbe={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Zz},Obe={removedProps:Zz};class Pt extends ta{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=t.target||(this.gl.webgl2?36662:34962),this.initialize(t),Object.seal(this)}getElementCount(){return Math.round(this.byteLength/fr.getBytesPerElement(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}getVertexCount(){return Math.round(this.byteLength/fr.getBytesPerVertex(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor))}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=gx("Buffer",e,Rbe),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return"accessor"in(e=gx("Buffer",e,Obe))&&this.setAccessor(e.accessor),this}setAccessor(e){return delete(e=Object.assign({},e)).buffer,this.accessor=new fr(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:t,offset:i=0,srcOffset:r=0}=e,s=e.byteLength||e.length;ee(t);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),0!==r||void 0!==s?(Oi(this.gl),this.gl.bufferSubData(this.target,i,t,r,s)):this.gl.bufferSubData(o,i,t),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(t),this}copyData(e){let{sourceBuffer:t,readOffset:i=0,writeOffset:r=0,size:s}=e;const{gl:o}=this;return Oi(o),o.bindBuffer(36662,t.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,i,r,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:t=0,dstOffset:i=0,length:r=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Oi(this.gl);const s=Kp(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(t),a=i;let c,l;e?(l=e.length,c=l-a):(c=Math.min(o,r||o),l=a+c);const u=Math.min(o,c);return r=r||u,ee(r<=u),e=e||new s(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,t,e,i,r),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index,offset:i=0,size:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?void 0!==r?this.gl.bindBufferRange(e,t,this.handle,i,r):(ee(0===i),this.gl.bindBufferBase(e,t,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:t=this.accessor&&this.accessor.index}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 35345===e||35982===e?this.gl.bindBufferBase(e,t,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength+t;ee(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const r=this._getTarget();this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,this.usage),this.gl.bufferSubData(r,t,e),this.gl.bindBuffer(r,null),this.debugData=e.slice(0,10),this.bytesUsed=i,this._trackAllocatedMemory(i);const s=px(e);return ee(s),this.setAccessor(new fr(this.accessor,{type:s})),this}_setByteLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;ee(e>=0),this._trackDeallocatedMemory();let i=e;0===e&&(i=new Float32Array(0));const r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,i,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const i=e/Kp(this.accessor.type||5126,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-i}_inferType(e){this.accessor.type||this.setAccessor(new fr(this.accessor,{type:px(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}get type(){return ae.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return ae.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return ae.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return ae.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new fr(this.accessor,e),this}}const mx={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},Qz={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},eG={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1},Fbe=[9729,9728],tG=globalThis.WebGLBuffer||function(){};class Sl extends ta{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{format:i,linearFiltering:r}=t;let s=!0;return i&&(s=s&&function Pbe(n,e){const t=mx[e];if(!t)return!1;if(void 0===t.gl1&&void 0===t.gl2)return!0;const i=$e(n)&&t.gl2||t.gl1;return"string"==typeof i?n.getExtension(i):i}(e,i),s=s&&(!r||function Nbe(n,e){const t=mx[e];switch(t&&t.types[0]){case 5126:return n.getExtension("OES_texture_float_linear");case 5131:return n.getExtension("OES_texture_half_float_linear");default:return!0}}(e,i))),s}constructor(e,t){const{id:i=hr("texture"),handle:r,target:s}=t;super(e,{id:i,handle:r}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;if(t instanceof Promise)return t.then(v=>this.initialize(Object.assign({},e,{pixels:v,data:v}))),this;const i=typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement;if(i&&t.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,t.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:r=null,format:s=6408,border:o=0,recreate:a=!1,parameters:c={},pixelStore:l={},textureUnit:u}=e;t||(t=r);let{width:d,height:h,dataFormat:f,type:p,compressed:g=!1,mipmaps:m=!0}=e;const{depth:y=0}=e;return({width:d,height:h,compressed:g,dataFormat:f,type:p}=this._deduceParameters({format:s,type:p,dataFormat:f,compressed:g,data:t,width:d,height:h})),this.width=d,this.height=h,this.depth=y,this.format=s,this.type=p,this.dataFormat=f,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),m&&this._isNPOT()&&(ae.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),m=!1,this._updateForNPOT(c)),this.mipmaps=m,this.setImageData({data:t,width:d,height:h,depth:y,format:s,type:p,dataFormat:f,border:o,mipmaps:m,parameters:l,compressed:g}),m&&this.generateMipmap(),this.setParameters(c),a&&(this.data=t),i&&(this._video={video:t,parameters:c,lastTime:t.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?t.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:t,lastTime:i}=this._video;if(i===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:t}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:t,width:i,mipmaps:r=!1}=e;return i!==this.width||t!==this.height?this.initialize({width:i,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(ae.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ns(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:t=this.target,pixels:i=null,level:r=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:c={}}=e;let{data:l=null,type:u=this.type,width:d=this.width,height:h=this.height,dataFormat:f=this.dataFormat,compressed:p=!1}=e;l||(l=i),({type:u,dataFormat:f,compressed:p,width:d,height:h}=this._deduceParameters({format:s,type:u,dataFormat:f,compressed:p,data:l,width:d,height:h}));const{gl:g}=this;g.bindTexture(this.target,this.handle);let m=null;({data:l,dataType:m}=this._getDataType({data:l,compressed:p}));let y,v=0;return ns(this.gl,c,()=>{switch(m){case"null":g.texImage2D(t,r,s,d,h,o,f,u,l);break;case"typed-array":g.texImage2D(t,r,s,d,h,o,f,u,l,a);break;case"buffer":y=Oi(g),y.bindBuffer(35052,l.handle||l),y.texImage2D(t,r,s,d,h,o,f,u,a),y.bindBuffer(35052,null);break;case"browser-object":$e(g)?g.texImage2D(t,r,s,d,h,o,f,u,l):g.texImage2D(t,r,s,f,u,l);break;case"compressed":for(const[_,w]of l.entries())g.compressedTexImage2D(t,_,w.format,w.width,w.height,o,w.data),v+=w.levelSize;break;default:ee(!1,"Unknown image data type")}}),this._trackAllocatedMemory("compressed"===m?v:l&&l.byteLength?l.byteLength:this.width*this.height*(Qz[this.dataFormat]||4)*(eG[this.type]||1),"Texture"),this.loaded=!0,this}setSubImageData(e){let{target:t=this.target,pixels:i=null,data:r=null,x:s=0,y:o=0,width:a=this.width,height:c=this.height,level:l=0,format:u=this.format,type:d=this.type,dataFormat:h=this.dataFormat,compressed:f=!1,offset:p=0,border:g=this.border,parameters:m={}}=e;if(({type:d,dataFormat:h,compressed:f,width:a,height:c}=this._deduceParameters({format:u,type:d,dataFormat:h,compressed:f,data:r,width:a,height:c})),ee(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=i),r&&r.data){const y=r;r=y.data,a=y.shape[0],c=y.shape[1]}r instanceof Pt&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),ns(this.gl,m,()=>{if(f)this.gl.compressedTexSubImage2D(t,l,s,o,a,c,u,r);else if(null===r)this.gl.texSubImage2D(t,l,s,o,a,c,h,d,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(t,l,s,o,a,c,h,d,r,p);else if(r instanceof tG){const y=Oi(this.gl);y.bindBuffer(35052,r),y.texSubImage2D(t,l,s,o,a,c,h,d,p),y.bindBuffer(35052,null)}else $e(this.gl)?Oi(this.gl).texSubImage2D(t,l,s,o,a,c,h,d,r):this.gl.texSubImage2D(t,l,s,o,h,d,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return ae.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit;const{gl:t}=this;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}_getDataType(e){let{data:t,compressed:i=!1}=e;return i?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof Pt?{data:t.handle,dataType:"buffer"}:t instanceof tG?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(e){const{format:t,data:i}=e;let{width:r,height:s,dataFormat:o,type:a,compressed:c}=e;const l=mx[t];return o=o||l&&l.dataFormat,a=a||l&&l.types[0],c=c||l&&l.compressed,({width:r,height:s}=this._deduceImageSize(i,r,s)),{dataFormat:o,type:a,compressed:c,width:r,height:s,format:t,data:i}}_deduceImageSize(e,t,i){let r;return r=typeof ImageData<"u"&&e instanceof ImageData?{width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?{width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:i}:{width:t>=0?t:1,height:i>=0?i:1},ee(r,"Could not deduced texture size"),ee(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),ee(void 0===i||r.height===i,"Deduced texture height does not match supplied height"),r}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}_setParameter(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:ee(!1);break;default:this.gl.texParameteri(this.target,e,t)}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!($e(this.gl)||!this.width||!this.height||Yz(this.width)&&Yz(this.height))}_updateForNPOT(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,t){if(this._isNPOT())switch(e){case 10241:-1===Fbe.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071)}return t}}function kbe(n,e){return ee("string"==typeof n),n=""+n,new Promise((t,i)=>{try{const r=new Image;r.onload=()=>t(r),r.onerror=()=>i(new Error("Could not load image ".concat(n,"."))),r.crossOrigin=e&&e.crossOrigin||"anonymous",r.src=n}catch(r){i(r)}})}class _i extends Sl{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,t){return Sl.isSupported(e,t)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sb(e),(t instanceof Promise||"string"==typeof t)&&(t={data:t}),"string"==typeof t.data&&(t=Object.assign({},t,{data:kbe(t.data)})),super(e,Object.assign({},t,{target:3553})),this.initialize(t),Object.seal(this)}}const xl="EXT_color_buffer_float",nG={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:xl,bpp:2},33327:{gl2:xl,bpp:4},34842:{gl2:xl,bpp:8},33326:{gl2:xl,bpp:4},33328:{gl2:xl,bpp:8},34836:{gl2:xl,bpp:16},35898:{gl2:xl,bpp:4}};class Vd extends ta{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{format:null};return!t||function Lbe(n,e,t){const i=t[e];if(!i)return!1;const r=$e(n)&&i.gl2||i.gl1;return"string"==typeof r?n.getExtension(r):r}(e,t,nG)}static getSamplesForFormat(e,t){let{format:i}=t;return e.getInternalformatParameter(36161,i,32937)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.initialize(t),Object.seal(this)}initialize(e){let{format:t,width:i=1,height:r=1,samples:s=0}=e;return ee(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==s&&$e(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,t,i,r):this.gl.renderbufferStorage(36161,t,i,r),this.format=t,this.width=i,this.height=r,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*nG[this.format].bpp),this}resize(e){let{width:t,height:i}=e;return t!==this.width||i!==this.height?this.initialize({width:t,height:i,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const iG=6144,aG="clear: bad arguments";function yx(n){let{framebuffer:e=null,color:t=null,depth:i=null,stencil:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;t&&(o|=16384,!0!==t&&(s.clearColor=t)),i&&(o|=256,!0!==i&&(s.clearDepth=i)),r&&(o|=1024,!0!==i&&(s.clearStencil=i)),ee(0!==o,aG),ns(n,s,()=>{n.clear(o)})}const vx=[34069,34070,34071,34072,34073,34074];let zbe=(()=>{class n extends Sl{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};sb(t),super(t,Object.assign({},i,{target:34067})),this.initialize(i),Object.seal(this)}initialize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mipmaps:i=!0,parameters:r={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,i&&this.generateMipmap(t),this.setParameters(r)}),this}subImage(t){let{face:i,data:r,x:s=0,y:o=0,mipmapLevel:a=0}=t;return this._subImage({target:i,data:r,x:s,y:o,mipmapLevel:a})}setCubeMapImageData(t){var i=this;return te(function*(){let{width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:u=5121}=t;const{gl:d}=i,h=o||a,f=yield Promise.all(vx.map(p=>{const g=h[p];return Promise.all(Array.isArray(g)?g:[g])}));i.bind(),vx.forEach((p,g)=>{f[g].length>1&&!1!==i.opts.mipmaps&&ae.warn("".concat(i.id," has mipmap and multiple LODs."))(),f[g].forEach((m,y)=>{r&&s?d.texImage2D(p,y,l,r,s,c,l,u,m):d.texImage2D(p,y,l,l,u,m)})}),i.unbind()})()}setImageDataForFace(t){const{face:i,width:r,height:s,pixels:o,data:a,border:c=0,format:l=6408,type:u=5121}=t,{gl:d}=this,h=o||a;return this.bind(),h instanceof Promise?h.then(f=>this.setImageDataForFace(Object.assign({},t,{face:i,data:f,pixels:f}))):this.width||this.height?d.texImage2D(i,0,l,r,s,c,l,u,h):d.texImage2D(i,0,l,l,u,h),this}}return n.FACES=vx,n})();class Gbe extends Sl{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return $e(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Oi(e),t=Object.assign({depth:1},t,{target:32879,unpackFlipY:!1}),super(e,t),this.initialize(t),Object.seal(this)}setImageData(e){let{level:t=0,dataFormat:i=6408,width:r,height:s,depth:o=1,border:a=0,format:c,type:l=5121,offset:u=0,data:d,parameters:h={}}=e;return this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ns(this.gl,h,()=>{ArrayBuffer.isView(d)&&this.gl.texImage3D(this.target,t,i,r,s,o,a,c,l,d),d instanceof Pt&&(this.gl.bindBuffer(35052,d.handle),this.gl.texImage3D(this.target,t,i,r,s,o,a,c,l,u))}),this._trackAllocatedMemory(d&&d.byteLength?d.byteLength:this.width*this.height*this.depth*(Qz[this.dataFormat]||4)*(eG[this.type]||1),"Texture"),this.loaded=!0,this}}function $be(n,e){const{gl:t,width:i,height:r,id:s}=n;return new Pn(t,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:i,height:r,attachments:{36064:n}}))}function ob(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceX:t=0,sourceY:i=0,sourceFormat:r=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:c,sourceType:l}=e;const{framebuffer:u,deleteFramebuffer:d}=Jp(n);ee(u);const{gl:h,handle:f,attachments:p}=u;a=a||u.width,c=c||u.height,36064===s&&null===f&&(s=1028),ee(p[s]),l=l||p[s].type,o=function Xbe(n,e,t,i,r){if(n)return n;const s=Kp(e=e||5121,{clamped:!1}),o=function Hbe(n){switch(n){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return ee(!1),0}}(t);return new s(i*r*o)}(o,l,r,a,c),l=l||px(o);const g=h.bindFramebuffer(36160,f);return h.readPixels(t,i,a,c,r,l,o),h.bindFramebuffer(36160,g||null),d&&u.delete(),o}function bx(n){let{sourceAttachment:e=36064,targetMaxHeight:t=Number.MAX_SAFE_INTEGER}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=ob(n,{sourceAttachment:e}),{width:r,height:s}=n;for(;s>t;)({data:i,width:r,height:s}=Mbe({data:i,width:r,height:s}));!function xbe(n){let{data:e,width:t,height:i,bytesPerPixel:r=4,temp:s}=n;const o=t*r;s=s||new Uint8Array(o);for(let a=0;a<i/2;++a){const c=a*o,l=(i-a-1)*o;s.set(e.subarray(c,c+o)),e.copyWithin(c,l,l+o),e.set(s,l)}}({data:i,width:r,height:s});const o=document.createElement("canvas");o.width=r,o.height=s;const a=o.getContext("2d"),c=a.createImageData(r,s);return c.data.set(i),a.putImageData(c,0,0),o.toDataURL()}function Jp(n){return n instanceof Pn?{framebuffer:n,deleteFramebuffer:!1}:{framebuffer:$be(n),deleteFramebuffer:!0}}const qt_WEBGL2="WEBGL2",qt_VERTEX_ARRAY_OBJECT="VERTEX_ARRAY_OBJECT",qt_TIMER_QUERY="TIMER_QUERY",qt_INSTANCED_RENDERING="INSTANCED_RENDERING",qt_MULTIPLE_RENDER_TARGETS="MULTIPLE_RENDER_TARGETS",qt_ELEMENT_INDEX_UINT32="ELEMENT_INDEX_UINT32",qt_BLEND_EQUATION_MINMAX="BLEND_EQUATION_MINMAX",qt_FLOAT_BLEND="FLOAT_BLEND",qt_COLOR_ENCODING_SRGB="COLOR_ENCODING_SRGB",qt_TEXTURE_DEPTH="TEXTURE_DEPTH",qt_TEXTURE_FLOAT="TEXTURE_FLOAT",qt_TEXTURE_HALF_FLOAT="TEXTURE_HALF_FLOAT",qt_TEXTURE_FILTER_LINEAR_FLOAT="TEXTURE_FILTER_LINEAR_FLOAT",qt_TEXTURE_FILTER_LINEAR_HALF_FLOAT="TEXTURE_FILTER_LINEAR_HALF_FLOAT",qt_TEXTURE_FILTER_ANISOTROPIC="TEXTURE_FILTER_ANISOTROPIC",qt_COLOR_ATTACHMENT_RGBA32F="COLOR_ATTACHMENT_RGBA32F",qt_COLOR_ATTACHMENT_FLOAT="COLOR_ATTACHMENT_FLOAT",qt_COLOR_ATTACHMENT_HALF_FLOAT="COLOR_ATTACHMENT_HALF_FLOAT",qt_GLSL_FRAG_DATA="GLSL_FRAG_DATA",qt_GLSL_FRAG_DEPTH="GLSL_FRAG_DEPTH",qt_GLSL_DERIVATIVES="GLSL_DERIVATIVES",qt_GLSL_TEXTURE_LOD="GLSL_TEXTURE_LOD",cG={[qt_WEBGL2]:[!1,!0],[qt_VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[qt_TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[qt_INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[qt_MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[qt_ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[qt_BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[qt_FLOAT_BLEND]:["EXT_float_blend"],[qt_COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[qt_TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[qt_TEXTURE_FLOAT]:["OES_texture_float",!0],[qt_TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[qt_TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[qt_TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[qt_TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[qt_COLOR_ATTACHMENT_RGBA32F]:[function Ybe(n){const e=new _i(n,{format:6408,type:5126,dataFormat:6408}),t=new Pn(n,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),i=t.getStatus();return e.delete(),t.delete(),36053===i},"EXT_color_buffer_float"],[qt_COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[qt_COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[qt_GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[qt_GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[qt_GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[qt_GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},Kbe=2;function Ex(n,e){return lG(n,e)}function lG(n,e){return(e=Array.isArray(e)?e:[e]).every(t=>uG(n,t))}function uG(n,e){return n.luma=n.luma||{},n.luma.caps=n.luma.caps||{},void 0===n.luma.caps[e]&&(n.luma.caps[e]=function Zbe(n,e){const t=cG[e];let i;ee(t,e);const r=$e(n)&&t[1]||t[0];if("function"==typeof r)i=r(n);else if(Array.isArray(r)){i=!0;for(const s of r)i=i&&!!n.getExtension(s)}else"string"==typeof r?i=!!n.getExtension(r):"boolean"==typeof r?i=r:ee(!1);return i}(n,e)),n.luma.caps[e]||ae.log(Kbe,"Feature: ".concat(e," not supported"))(),n.luma.caps[e]}const dG="Multiple render targets not supported";class Pn extends ta{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{colorBufferFloat:i,colorBufferHalfFloat:r}=t;let s=!0;return i&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(s=s&&!(!e.getExtension("EXT_color_buffer_float")&&!e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new Pn(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Oi(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Oi(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(t),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:t=1,height:i=1,attachments:r=null,color:s=!0,depth:o=!0,stencil:a=!1,check:c=!0,readBuffer:l,drawBuffers:u}=e;if(ee(t>=0&&i>=0,"Width and height need to be integers"),this.width=t,this.height=i,r)for(const d in r){const h=r[d];(Array.isArray(h)?h[0]:h).resize({width:t,height:i})}else r=this._createDefaultAttachments(s,o,a,t,i);this.update({clearAttachments:!0,attachments:r,readBuffer:l,drawBuffers:u}),r&&c&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:t={},readBuffer:i,drawBuffers:r,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(t,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,c=a.bindFramebuffer(36160,this.handle);return i&&this._setReadBuffer(i),r&&this._setDrawBuffers(r),a.bindFramebuffer(36160,c||null),this}resize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{width:t,height:i}=e;if(null===this.handle)return ee(void 0===t&&void 0===i),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===t&&(t=this.gl.drawingBufferWidth),void 0===i&&(i=this.gl.drawingBufferHeight),t!==this.width&&i!==this.height&&ae.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(i))();for(const r in this.attachments)this.attachments[r].resize({width:t,height:i});return this.width=t,this.height=i,this}attach(e){let{clearAttachments:t=!1,resizeAttachments:i=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r={};t&&Object.keys(this.attachments).forEach(o=>{r[o]=null}),Object.assign(r,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in r){ee(void 0!==o,"Misspelled framebuffer binding point?");const a=Number(o),c=r[a];let l=c;if(l)if(l instanceof Vd)this._attachRenderbuffer({attachment:a,renderbuffer:l});else if(Array.isArray(c)){const[u,d=0,h=0]=c;l=u,this._attachTexture({attachment:a,texture:u,layer:d,level:h})}else this._attachTexture({attachment:a,texture:l,layer:0,level:0});else this._unattach(a);i&&l&&l.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const t=this.getStatus();if(36053!==t)throw new Error(function e0e(n){return(Pn.STATUS||{})[n]||"Framebuffer error ".concat(n)}(t));return this}getStatus(){const{gl:e}=this,t=e.bindFramebuffer(36160,this.handle),i=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),i}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{color:t,depth:i,stencil:r,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(t||i||r)&&yx(this.gl,{color:t,depth:i,stencil:r}),s.forEach((a,c)=>{!function jbe(n){let{framebuffer:e=null,buffer:t=iG,drawBuffer:i=0,value:r=[0,0,0,0]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Oi(n),ns(n,{framebuffer:e},()=>{switch(t){case iG:switch(r.constructor){case Int32Array:n.clearBufferiv(t,i,r);break;case Uint32Array:n.clearBufferuiv(t,i,r);break;case Float32Array:default:n.clearBufferfv(t,i,r)}break;case 6145:n.clearBufferfv(6145,0,[r]);break;case 6146:n.clearBufferiv(6146,0,[r]);break;case 34041:const[s,o]=r;n.clearBufferfi(34041,0,s,o);break;default:ee(!1,aG)}})}(this.gl,{drawBuffer:c,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return ae.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return ae.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return ae.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return ae.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return ae.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return ae.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:t=[],x:i=0,y:r=0,width:s,height:o}=e;const a=Oi(this.gl),c=a.bindFramebuffer(36008,this.handle);return 0===i&&0===r&&void 0===s&&void 0===o?a.invalidateFramebuffer(36008,t):a.invalidateFramebuffer(36008,t,i,r,s,o),a.bindFramebuffer(36008,c),this}getAttachmentParameter(e,t,i){let r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),i&&r>1e3&&(r=oc(this.gl,r)),r}getAttachmentParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const r={};for(const s of i)r[t?oc(this.gl,s):s]=this.getAttachmentParameter(e,s,t);return r}getParameters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=Object.keys(this.attachments),i={};for(const r of t){const s=Number(r);i[e?oc(this.gl,s):s]=this.getAttachmentParameters(s,e)}return i}show(){return typeof window<"u"&&window.open(bx(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>ae.level||typeof window>"u")return this;t=t||"Framebuffer ".concat(this.id);const i=bx(this,{targetMaxHeight:100});return ae.image({logLevel:e,message:t,image:i},t)(),this}bind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,t,i,r,s){let o=null;return e&&(o=o||{},o[36064]=new _i(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:r,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),t&&i?(o=o||{},o[33306]=new Vd(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:r,height:111}),this.ownResources.push(o[33306])):t?(o=o||{},o[36096]=new Vd(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:r,height:s}),this.ownResources.push(o[36096])):i&&ee(!1),o}_unattach(e){const t=this.attachments[e];t&&(t instanceof Vd?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:t=36064,renderbuffer:i}=e;const{gl:r}=this;r.framebufferRenderbuffer(36160,t,36161,i.handle),this.attachments[t]=i}_attachTexture(e){let{attachment:t=36064,texture:i,layer:r,level:s}=e;const{gl:o}=this;switch(o.bindTexture(i.target,i.handle),i.target){case 35866:case 32879:Oi(o).framebufferTextureLayer(36160,t,i.target,s,r);break;case 34067:const c=function Qbe(n){return n<34069?n+34069:n}(r);o.framebufferTexture2D(36160,t,c,i.handle,s);break;case 3553:o.framebufferTexture2D(36160,t,3553,i.handle,s);break;default:ee(!1,"Illegal texture type")}o.bindTexture(i.target,null),this.attachments[t]=i}_setReadBuffer(e){const t=function Ive(n){return $e(n)?n:null}(this.gl);t?t.readBuffer(e):ee(36064===e||1029===e,dG),this.readBuffer=e}_setDrawBuffers(e){const{gl:t}=this,i=Oi(t);if(i)i.drawBuffers(e);else{const r=t.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(e):ee(1===e.length&&(36064===e[0]||1029===e[0]),dG)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const t=function Jbe(n){n.luma=n.luma||{},n.luma.caps=n.luma.caps||{};for(const e in cG)void 0===n.luma.caps[e]&&(n.luma.caps[e]=uG(n,e));return n.luma.caps}(this.gl);switch(e){case 36052:return t.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.WEBGL2?null:8;case 33297:return t.WEBGL2?null:5125;case 33296:return t.WEBGL2||t.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}Pn.ATTACHMENT_PARAMETERS=[36049,36048,33296,33298,33299,33300,33301,33302,33303];const n0e={5126:Yt.bind(null,"uniform1fv",Pr,1,Pi),35664:Yt.bind(null,"uniform2fv",Pr,2,Pi),35665:Yt.bind(null,"uniform3fv",Pr,3,Pi),35666:Yt.bind(null,"uniform4fv",Pr,4,Pi),5124:Yt.bind(null,"uniform1iv",ac,1,Pi),35667:Yt.bind(null,"uniform2iv",ac,2,Pi),35668:Yt.bind(null,"uniform3iv",ac,3,Pi),35669:Yt.bind(null,"uniform4iv",ac,4,Pi),35670:Yt.bind(null,"uniform1iv",ac,1,Pi),35671:Yt.bind(null,"uniform2iv",ac,2,Pi),35672:Yt.bind(null,"uniform3iv",ac,3,Pi),35673:Yt.bind(null,"uniform4iv",ac,4,Pi),35674:Yt.bind(null,"uniformMatrix2fv",Pr,4,na),35675:Yt.bind(null,"uniformMatrix3fv",Pr,9,na),35676:Yt.bind(null,"uniformMatrix4fv",Pr,16,na),35678:yi,35680:yi,5125:Yt.bind(null,"uniform1uiv",ab,1,Pi),36294:Yt.bind(null,"uniform2uiv",ab,2,Pi),36295:Yt.bind(null,"uniform3uiv",ab,3,Pi),36296:Yt.bind(null,"uniform4uiv",ab,4,Pi),35685:Yt.bind(null,"uniformMatrix2x3fv",Pr,6,na),35686:Yt.bind(null,"uniformMatrix2x4fv",Pr,8,na),35687:Yt.bind(null,"uniformMatrix3x2fv",Pr,6,na),35688:Yt.bind(null,"uniformMatrix3x4fv",Pr,12,na),35689:Yt.bind(null,"uniformMatrix4x2fv",Pr,8,na),35690:Yt.bind(null,"uniformMatrix4x3fv",Pr,12,na),35678:yi,35680:yi,35679:yi,35682:yi,36289:yi,36292:yi,36293:yi,36298:yi,36299:yi,36300:yi,36303:yi,36306:yi,36307:yi,36308:yi,36311:yi},i0e={},r0e={},s0e={},hG=[0];function wx(n,e,t,i){1===e&&"boolean"==typeof n&&(n=n?1:0),Number.isFinite(n)&&(hG[0]=n,n=hG);const r=n.length;if(r%e&&ae.warn("Uniform size should be multiples of ".concat(e),n)(),n instanceof t)return n;let s=i[r];s||(s=new t(r),i[r]=s);for(let o=0;o<r;o++)s[o]=n[o];return s}function Pr(n,e){return wx(n,e,Float32Array,i0e)}function ac(n,e){return wx(n,e,Int32Array,r0e)}function ab(n,e){return wx(n,e,Uint32Array,s0e)}function fG(n,e,t){const i=n0e[t.type];if(!i)throw new Error("Unknown GLSL uniform type ".concat(t.type));return i().bind(null,n,e)}function o0e(n){if("]"!==n[n.length-1])return{name:n,length:1,isArray:!1};const t=n.match(/([^[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(n));return{name:t[1],length:t[2]||1,isArray:!!t[2]}}function c0e(n){return Array.isArray(n)||ArrayBuffer.isView(n)?function u0e(n){if(0===n.length)return!1;const e=Math.min(n.length,16);for(let t=0;t<e;++t)if(!Number.isFinite(n[t]))return!1;return!0}(n):!!(isFinite(n)||!0===n||!1===n||n instanceof Sl||n instanceof Vd)||n instanceof Pn&&!!n.texture}function l0e(n,e,t){if(Array.isArray(t)||ArrayBuffer.isView(t))if(n[e]){const i=n[e];for(let r=0,s=t.length;r<s;++r)i[r]=t[r]}else n[e]=t.slice();else n[e]=t}function yi(){let n=null;return(e,t,i)=>{const r=n!==i;return r&&(e.uniform1i(t,i),n=i),r}}function Yt(n,e,t,i){let r=null,s=null;return(o,a,c)=>{const l=e(c,t),u=l.length;let d=!1;if(null===r)r=new Float32Array(u),s=u,d=!0;else{ee(s===u,"Uniform length cannot change.");for(let h=0;h<u;++h)if(l[h]!==r[h]){d=!0;break}}return d&&(i(o,n,a,l),r.set(l)),d}}function Pi(n,e,t,i){n[e](t,i)}function na(n,e,t,i){n[e](t,!1,i)}function cb(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed";const i=n.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return i?i[1]:e}function gG(n,e){let t="";for(let i=0;i<e.length;i++)if((n[i+3]||n[i+2]||n[i+1])&&(t+="".concat(e[i],"\n"),n[i+1])){const s=n[i+1],o=s.split(":",3),a=o[0],c=parseInt(o[1],10)||0,l=s.substring(o.join(":").length+1).trim();t+=mG("^^^ ".concat(a,": ").concat(l,"\n\n"),c)}return t}function mG(n,e){let t="";for(let i=0;i<e;++i)t+=" ";return"".concat(t).concat(n)}class Zp extends ta{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return ee(!1),"unknown"}}constructor(e,t){sb(e),ee("string"==typeof t.source,"Shader: GLSL source code must be a JavaScript string"),super(e,{id:cb(t.source,null)||t.id||hr("unnamed ".concat(Zp.getTypeName(t.shaderType)))}),this.shaderType=t.shaderType,this.source=t.source,this.initialize(t)}initialize(e){let{source:t}=e;const i=cb(t,null);i&&(this.id=hr(i)),this._compile(t)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(Zp.getTypeName(this.shaderType),":").concat(this.id)}getName(){return cb(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;if(e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const i=this.gl.getShaderInfoLog(this.handle),{shaderName:r,errors:s,warnings:o}=function pG(n,e,t,i){const r=n.split(/\r?\n/),s={},o={},a=i||cb(e)||"(unnamed)",c="".concat(function f0e(n){switch(n){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(t)," shader ").concat(a);for(let u=0;u<r.length;u++){const d=r[u];if(d.length<=1)continue;const h=d.split(":"),f=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(c,": ").concat(n));"WARNING"!==f?s[p]=d:o[p]=d}const l=function p0e(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ";const i=n.split(/\r?\n/),r=String(i.length+e-1).length;return i.map((s,o)=>{const a=String(o+e);return mG(a,r-a.length)+t+s})}(e);return{shaderName:c,errors:gG(s,l),warnings:gG(o,l)}}(i,this.source,this.shaderType,this.id);throw ae.error("GLSL compilation errors in ".concat(r,"\n").concat(s))(),ae.warn("GLSL compilation warnings in ".concat(r,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(r))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class Cx extends Zp{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class Ax extends Zp{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,t){"string"==typeof t&&(t={source:t}),super(e,Object.assign({},t,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const m0e=5120,_0e=5121,y0e=5122,v0e=5123,Xn=5126,b0e=35664,E0e=35665,w0e=35666,Qp=5124,C0e=35667,A0e=35668,T0e=35669,eg=5125,S0e=36294,x0e=36295,M0e=36296,I0e=35670,D0e=35671,R0e=35672,O0e=35673,P0e=35674,N0e=35675,F0e=35676,k0e=35685,L0e=35686,B0e=35687,V0e=35688,U0e=35689,j0e=35690,Tx={[Xn]:[Xn,1,"float"],[b0e]:[Xn,2,"vec2"],[E0e]:[Xn,3,"vec3"],[w0e]:[Xn,4,"vec4"],[Qp]:[Qp,1,"int"],[C0e]:[Qp,2,"ivec2"],[A0e]:[Qp,3,"ivec3"],[T0e]:[Qp,4,"ivec4"],[eg]:[eg,1,"uint"],[S0e]:[eg,2,"uvec2"],[x0e]:[eg,3,"uvec3"],[M0e]:[eg,4,"uvec4"],[I0e]:[Xn,1,"bool"],[D0e]:[Xn,2,"bvec2"],[R0e]:[Xn,3,"bvec3"],[O0e]:[Xn,4,"bvec4"],[P0e]:[Xn,8,"mat2"],[k0e]:[Xn,8,"mat2x3"],[L0e]:[Xn,8,"mat2x4"],[N0e]:[Xn,12,"mat3"],[B0e]:[Xn,12,"mat3x2"],[V0e]:[Xn,12,"mat3x4"],[F0e]:[Xn,16,"mat4"],[U0e]:[Xn,16,"mat4x2"],[j0e]:[Xn,16,"mat4x3"]};function wG(n){const e=Tx[n];if(!e)return null;const[t,i]=e;return{type:t,components:i}}function CG(n,e){switch(n){case m0e:case _0e:case y0e:case v0e:n=Xn}for(const t in Tx){const[i,r,s]=Tx[t];if(i===n&&r===e)return{glType:t,name:s}}return null}class z0e{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const t=this.getAttributeInfo(e);return t?t.location:-1}getAttributeAccessor(e){const t=this.getAttributeInfo(e);return t?t.accessor:null}getVaryingInfo(e){const t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const t=this.getVaryingInfo();return t?t.location:-1}getVaryingAccessor(e){const t=this.getVaryingInfo();return t?t.accessor:null}_readAttributesFromProgram(e){const{gl:t}=e,i=t.getProgramParameter(e.handle,35721);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getActiveAttrib(e.handle,r),c=t.getAttribLocation(e.handle,s);c>=0&&this._addAttribute(c,s,o,a)}this.attributeInfos.sort((r,s)=>r.location-s.location)}_readVaryingsFromProgram(e){const{gl:t}=e;if(!$e(t))return;const i=t.getProgramParameter(e.handle,35971);for(let r=0;r<i;r++){const{name:s,type:o,size:a}=t.getTransformFeedbackVarying(e.handle,r);this._addVarying(r,s,o,a)}this.varyingInfos.sort((r,s)=>r.location-s.location)}_addAttribute(e,t,i,r){const{type:s,components:o}=wG(i),a={type:s,size:r*o};this._inferProperties(e,t,a);const c={location:e,name:t,accessor:new fr(a)};this.attributeInfos.push(c),this.attributeInfosByLocation[e]=c,this.attributeInfosByName[c.name]=c}_inferProperties(e,t,i){/instance/i.test(t)&&(i.divisor=1)}_addVarying(e,t,i,r){const{type:s,components:o}=wG(i),c={location:e,name:t,accessor:new fr({type:s,size:r*o})};this.varyingInfos.push(c),this.varyingInfosByName[c.name]=c}}const G0e=35981,W0e=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class TG extends ta{get[Symbol.toStringTag](){return"Program"}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,t),this.stubRemovedMethods("Program","v6.0",W0e),this._isCached=!1,this.initialize(t),Object.seal(this),this._setId(t.id)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:t,vs:i,fs:r,varyings:s,bufferMode:o=G0e}=e;return this.hash=t||"",this.vs="string"==typeof i?new Cx(this.gl,{id:"".concat(e.id,"-vs"),source:i}):i,this.fs="string"==typeof r?new Ax(this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,ee(this.vs instanceof Cx),ee(this.fs instanceof Ax),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(Oi(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new z0e(this),this.setProps(e)}delete(){return this._isCached?this:super.delete(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:t,drawMode:i=4,vertexCount:r,offset:s=0,start:o,end:a,isIndexed:c=!1,indexType:l=5123,instanceCount:u=0,isInstanced:d=u>0,vertexArray:h=null,transformFeedback:f,framebuffer:p,parameters:g={},uniforms:m,samplers:y}=e;if((m||y)&&(ae.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(m||{})),ae.priority>=t){const v=p?p.id:"default",_="mode=".concat(oc(this.gl,i)," verts=").concat(r," ")+"instances=".concat(u," indexType=").concat(oc(this.gl,l)," ")+"isInstanced=".concat(d," isIndexed=").concat(c," ")+"Framebuffer=".concat(v);ae.log(t,_)()}return ee(h),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||d&&0===u||(h.bindForDraw(r,u,()=>{if(void 0!==p&&(g=Object.assign({},g,{framebuffer:p})),f){const v=function EG(n){switch(n){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return ee(!1),0}}(i);f.begin(v)}this._bindTextures(),ns(this.gl,g,()=>{c&&d?this.gl2.drawElementsInstanced(i,r,l,s,u):c&&$e(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(i,o,a,r,l,s):c?this.gl.drawElements(i,r,l,s):d?this.gl2.drawArraysInstanced(i,s,r,u):this.gl.drawArrays(i,s,r)}),f&&f.end()}),0))}setUniforms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ae.priority>=2&&function a0e(n,e,t){for(const i in n){const r=n[i];if((!t||t[i])&&!c0e(r))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(i),r),new Error("".concat(e," Bad uniform ").concat(i))}}(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const t in e){const i=e[t],r=this._uniformSetters[t];if(r){let s=i,o=!1;if(s instanceof Pn&&(s=s.texture),s instanceof Sl)if(o=this.uniforms[t]!==i,o){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:c}=r;a.bind(c),s=c,this._textureUniforms[t]=a}else s=r.textureIndex;else this._textureUniforms[t]&&delete this._textureUniforms[t];(r(s)||o)&&l0e(this.uniforms,t,i)}}return this}_areTexturesRenderable(){let e=!0;for(const t in this._textureUniforms){const i=this._textureUniforms[t];i.update(),e=e&&i.loaded}return e}_bindTextures(){for(const e in this._textureUniforms)this._textureUniforms[e].bind(this._uniformSetters[e].textureIndex)}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const t=this.gl.getAttachedShaders(e),i={};for(const r of t)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:i.vs=new Cx({handle:r});break;case 35632:i.fs=new Ax({handle:r})}return i}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const t=this._getName();this.id=hr(t)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),ae.time(4,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),ae.timeEnd(4,"linkProgram for ".concat(this._getName()))(),e.debug||ae.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let t=0;t<this._uniformCount;t++){const i=this.gl.getActiveUniform(this.handle,t),{name:r}=o0e(i.name);let s=e.getUniformLocation(this.handle,r);if(this._uniformSetters[r]=fG(e,s,i),i.size>1)for(let o=0;o<i.size;o++)s=e.getUniformLocation(this.handle,"".concat(r,"[").concat(o,"]")),this._uniformSetters["".concat(r,"[").concat(o,"]")]=fG(e,s,i)}this._textureIndexCounter=0}getActiveUniforms(e,t){return this.gl2.getActiveUniforms(this.handle,e,t)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,t){return this.gl2.getActiveUniformBlockParameter(this.handle,e,t)}uniformBlockBinding(e,t){this.gl2.uniformBlockBinding(this.handle,e,t)}}class tg{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new tg(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(t=>t.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const t="string"==typeof e?e:e.name;this._defaultModules=this._defaultModules.filter(i=>i.name!==t),this.stateHash++}addShaderHook(e,t){t&&(e=Object.assign(t,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{vs:t="",fs:i="",defines:r={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:c=!1}=e,l=this._getModuleList(e.modules),u=this._getHash(t),d=this._getHash(i),h=l.map(_=>this._getHash(_.name)).sort(),f=o.map(_=>this._getHash(_)),p=Object.keys(r).sort(),g=Object.keys(s).sort(),m=[],y=[];for(const _ of p)m.push(this._getHash(_)),m.push(this._getHash(r[_]));for(const _ of g)y.push(this._getHash(_)),y.push(this._getHash(s[_]));const v="".concat(u,"/").concat(d,"D").concat(m.join("/"),"M").concat(h.join("/"),"I").concat(y.join("/"),"V").concat(f.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(c?"T":"");if(!this._programCache[v]){const _=function bve(n,e){const{vs:t,fs:i}=e,r=Yye(e.modules||[]);return{gl:n,vs:Dz(n,Object.assign({},e,{source:t,type:Wp,modules:r})),fs:Dz(n,Object.assign({},e,{source:i,type:"fs",modules:r})),getUniforms:Eve(r)}}(this.gl,{vs:t,fs:i,modules:l,inject:s,defines:r,hookFunctions:this._hookFunctions,transpileToGLSL100:c});this._programCache[v]=new TG(this.gl,{hash:v,vs:_.vs,fs:_.fs,varyings:o,bufferMode:a}),this._getUniforms[v]=_.getUniforms||(w=>{}),this._useCounts[v]=0}return this._useCounts[v]++,this._programCache[v]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const t=e.hash;this._useCounts[t]--,0===this._useCounts[t]&&(this._programCache[t].delete(),delete this._programCache[t],delete this._getUniforms[t],delete this._useCounts[t])}_getHash(e){return void 0===this._hashes[e]&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=new Array(this._defaultModules.length+e.length),i={};let r=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],c=a.name;t[r++]=a,i[c]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],c=a.name;i[c]||(t[r++]=a,i[c]=!0)}return t.length=r,t}}const $0e=[255,255,255],q0e=1;let X0e=0;class SG{constructor(e={}){E(this,"id",void 0),E(this,"color",void 0),E(this,"intensity",void 0),E(this,"type","ambient");const{color:t=$0e}=e,{intensity:i=q0e}=e;this.id=e.id||"ambient-".concat(X0e++),this.color=t,this.intensity=i}}const Y0e=[255,255,255],K0e=1,J0e=[0,0,-1];let Z0e=0;class xG{constructor(e={}){E(this,"id",void 0),E(this,"color",void 0),E(this,"intensity",void 0),E(this,"type","directional"),E(this,"direction",void 0),E(this,"shadow",void 0);const{color:t=Y0e}=e,{intensity:i=K0e}=e,{direction:r=J0e}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(Z0e++),this.color=t,this.intensity=i,this.type="directional",this.direction=new Ri(r).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class Q0e{constructor(e,t={id:"pass"}){E(this,"id",void 0),E(this,"gl",void 0),E(this,"props",void 0);const{id:i}=t;this.id=i,this.gl=e,this.props={...t}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class ub extends Q0e{constructor(...e){super(...e),E(this,"_lastRenderIndex",-1)}render(e){return ea(this.gl,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:t,moduleParameters:i,viewports:r,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:c=!0}=e;e.pass=e.pass||"unknown";const l=this.gl;c&&function tEe(n){ea(n,{viewport:[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}),n.clear(16640)}(l),a&&(this._lastRenderIndex=-1);const u=[];for(const d of r){const h=s&&s[d.id];o(d);const f=this._getDrawLayerParams(d,e),p=d.subViewports||[d];for(const g of p){const m=this._drawLayersInViewport(l,{target:t,moduleParameters:i,viewport:g,view:h,pass:e.pass,layers:e.layers},f);u.push(m)}}return u}_getDrawLayerParams(e,{layers:t,pass:i,layerFilter:r,cullRect:s,effects:o,moduleParameters:a}){const c=[],l=MG(this._lastRenderIndex+1),u={layer:t[0],viewport:e,isPicking:i.startsWith("picking"),renderPass:i,cullRect:s},d={};for(let h=0;h<t.length;h++){const f=t[h],p=this._shouldDrawLayer(f,u,r,d),g={shouldDrawLayer:p};p&&(g.layerRenderIndex=l(f,p),g.moduleParameters=this._getModuleParameters(f,o,i,a),g.layerParameters=this.getLayerParameters(f,h,e)),c[h]=g}return c}_drawLayersInViewport(e,{layers:t,moduleParameters:i,pass:r,target:s,viewport:o,view:a},c){const l=function eEe(n,{moduleParameters:e,target:t,viewport:i}){const r=t&&"default-framebuffer"!==t.id,s=e&&e.devicePixelRatio||kd(n);return[i.x*s,(r?t.height:n.drawingBufferHeight)-(i.y+i.height)*s,i.width*s,i.height*s]}(e,{moduleParameters:i,target:s,viewport:o});if(a&&a.props.clear){const d=!0===a.props.clear?{color:!0,depth:!0}:a.props.clear;ns(e,{scissorTest:!0,scissor:l},()=>yx(e,d))}const u={totalCount:t.length,visibleCount:0,compositeCount:0,pickableCount:0};ea(e,{viewport:l});for(let d=0;d<t.length;d++){const h=t[d],{shouldDrawLayer:f,layerRenderIndex:p,moduleParameters:g,layerParameters:m}=c[d];if(f&&h.props.pickable&&u.pickableCount++,h.isComposite)u.compositeCount++;else if(f){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),g.viewport=o;try{h._drawLayer({moduleParameters:g,uniforms:{layerIndex:p},parameters:m})}catch(y){h.raiseError(y,"drawing ".concat(h," to ").concat(r))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,t){return null}getLayerParameters(e,t,i){return e.props.parameters}_shouldDrawLayer(e,t,i,r){if(!e.props.visible||!this.shouldDrawLayer(e))return!1;t.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(t))return!1;t.layer=o,o=o.parent}if(i){const a=t.layer.id;if(a in r||(r[a]=i(t)),!r[a])return!1}return e.activateViewport(t.viewport),!0}_getModuleParameters(e,t,i,r){var s;const o=Object.assign(Object.create((null===(s=e.internalState)||void 0===s?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:kd(this.gl)});if(t)for(const c of t){var a;Object.assign(o,null===(a=c.getModuleParameters)||void 0===a?void 0:a.call(c,e))}return Object.assign(o,this.getModuleParameters(e,t),r)}}function MG(n=0,e={}){const t={},i=(r,s)=>{const o=r.props._offset,a=r.id,c=r.parent&&r.parent.id;let l;if(c&&!(c in e)&&i(r.parent,!1),c in t){const u=t[c]=t[c]||MG(e[c],e);l=u(r,s),t[a]=u}else Number.isFinite(o)?(l=o+(e[c]||0),t[a]=null):l=n;return s&&l>=n&&(n=l+1),e[a]=l,l};return i}class nEe extends ub{constructor(e,t){super(e,t),E(this,"shadowMap",void 0),E(this,"depthBuffer",void 0),E(this,"fbo",void 0),this.shadowMap=new _i(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new Vd(e,{format:33189,width:1,height:1}),this.fbo=new Pn(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const t=this.fbo;ns(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const i=e.viewports[0],r=kd(this.gl),s=i.width*r,o=i.height*r;(s!==t.width||o!==t.height)&&t.resize({width:s,height:o}),super.render({...e,target:t,pass:"shadow"})})}shouldDrawLayer(e){return!1!==e.props.shadowEnabled}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const IG="#define SMOOTH_EDGE_RADIUS 0.5",oEe={name:"geometry",vs:"\n".concat(IG,"\n\nstruct VertexGeometry {\n  vec4 position;\n  vec3 worldPosition;\n  vec3 worldPositionAlt;\n  vec3 normal;\n  vec2 uv;\n  vec3 pickingColor;\n} geometry = VertexGeometry(\n  vec4(0.0, 0.0, 1.0, 0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec3(0.0),\n  vec2(0.0),\n  vec3(0.0)\n);\n"),fs:"\n".concat(IG,"\n\nstruct FragmentGeometry {\n  vec2 uv;\n} geometry;\n\nfloat smoothedge(float edge, float x) {\n  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);\n}\n")},aEe=Object.keys(it).map(n=>"const int COORDINATE_SYSTEM_".concat(n," = ").concat(it[n],";")).join(""),cEe=Object.keys(ho).map(n=>"const int PROJECTION_MODE_".concat(n," = ").concat(ho[n],";")).join(""),lEe=Object.keys(Zv).map(n=>"const int UNIT_".concat(n.toUpperCase()," = ").concat(Zv[n],";")).join(""),uEe="".concat(aEe,"\n").concat(cEe,"\n").concat(lEe,'\n\nuniform int project_uCoordinateSystem;\nuniform int project_uProjectionMode;\nuniform float project_uScale;\nuniform bool project_uWrapLongitude;\nuniform vec3 project_uCommonUnitsPerMeter;\nuniform vec3 project_uCommonUnitsPerWorldUnit;\nuniform vec3 project_uCommonUnitsPerWorldUnit2;\nuniform vec4 project_uCenter;\nuniform mat4 project_uModelMatrix;\nuniform mat4 project_uViewProjectionMatrix;\nuniform vec2 project_uViewportSize;\nuniform float project_uDevicePixelRatio;\nuniform float project_uFocalDistance;\nuniform vec3 project_uCameraPosition;\nuniform vec3 project_uCoordinateOrigin;\nuniform vec3 project_uCommonOrigin;\nuniform bool project_uPseudoMeters;\n\nconst float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\nconst vec3 ZERO_64_LOW = vec3(0.0);\nconst float EARTH_RADIUS = 6370972.0; // meters\nconst float GLOBE_RADIUS = 256.0;\n\n// returns an adjustment factor for uCommonUnitsPerMeter\nfloat project_size_at_latitude(float lat) {\n  float y = clamp(lat, -89.9, 89.9);\n  return 1.0 / cos(radians(y));\n}\n\nfloat project_size() {\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&\n    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&\n    project_uPseudoMeters == false) {\n\n    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear\n    // Adjust by 1 / cos(latitude)\n    // If geometry.position (vertex in common space) is populated, use it\n    // Otherwise use geometry.worldPosition (anchor in world space)\n    \n    if (geometry.position.w == 0.0) {\n      return project_size_at_latitude(geometry.worldPosition.y);\n    }\n\n    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)\n    // Taylor series of 1 / cos(latitude)\n    // Max error < 0.003\n  \n    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;\n    float y2 = y * y;\n    float y4 = y2 * y2;\n    float y6 = y4 * y2;\n    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;\n  }\n  return 1.0;\n}\n\nfloat project_size_at_latitude(float meters, float lat) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);\n}\n\n//\n// Scaling offsets - scales meters to "world distance"\n// Note the scalar version of project_size is for scaling the z component only\n//\nfloat project_size(float meters) {\n  return meters * project_uCommonUnitsPerMeter.z * project_size();\n}\n\nvec2 project_size(vec2 meters) {\n  return meters * project_uCommonUnitsPerMeter.xy * project_size();\n}\n\nvec3 project_size(vec3 meters) {\n  return meters * project_uCommonUnitsPerMeter * project_size();\n}\n\nvec4 project_size(vec4 meters) {\n  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);\n}\n\n// Get rotation matrix that aligns the z axis with the given up vector\n// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up\nmat3 project_get_orientation_matrix(vec3 up) {\n  vec3 uz = normalize(up);\n  // Tangent on XY plane\n  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));\n  vec3 uy = cross(uz, ux);\n  return mat3(ux, uy, uz);\n}\n\nbool project_needs_rotation(vec3 commonPosition, out mat3 transform) {\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    transform = project_get_orientation_matrix(commonPosition);\n    return true;\n  }\n  return false;\n}\n\n//\n// Projecting normal - transform deltas from current coordinate system to\n// normals in the worldspace\n//\nvec3 project_normal(vec3 vector) {\n  // Apply model matrix\n  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);\n  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);\n  mat3 rotation;\n  if (project_needs_rotation(geometry.position.xyz, rotation)) {\n    n = rotation * n;\n  }\n  return n;\n}\n\nvec4 project_offset_(vec4 offset) {\n  float dy = offset.y;\n  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;\n  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);\n}\n\n//\n// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]\n//\nvec2 project_mercator_(vec2 lnglat) {\n  float x = lnglat.x;\n  if (project_uWrapLongitude) {\n    x = mod(x + 180., 360.0) - 180.;\n  }\n  float y = clamp(lnglat.y, -89.9, 89.9);\n  return vec2(\n    radians(x) + PI,\n    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))\n  ) * WORLD_SCALE;\n}\n\nvec3 project_globe_(vec3 lnglatz) {\n  float lambda = radians(lnglatz.x);\n  float phi = radians(lnglatz.y);\n  float cosPhi = cos(phi);\n  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;\n\n  return vec3(\n    sin(lambda) * cosPhi,\n    -cos(lambda) * cosPhi,\n    sin(phi)\n  ) * D;\n}\n\n//\n// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)\n//\nvec4 project_position(vec4 position, vec3 position64Low) {\n  vec4 position_world = project_uModelMatrix * position;\n\n  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_mercator_(position_world.xy),\n        project_size_at_latitude(position_world.z, position_world.y),\n        position_world.w\n      );\n    }\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {\n      position_world.xyz += project_uCoordinateOrigin;\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      return vec4(\n        project_globe_(position_world.xyz),\n        position_world.w\n      );\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {\n    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {\n        // Too far from the projection center for offset mode to be accurate\n        // Only use high parts\n        return vec4(\n          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,\n          project_size(position_world.z),\n          position_world.w\n        );\n      }\n    }\n  }\n  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||\n    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&\n    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||\n     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {\n    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.\n    position_world.xyz -= project_uCoordinateOrigin;\n  }\n\n  // Translation is already added to the high parts\n  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));\n}\n\nvec4 project_position(vec4 position) {\n  return project_position(position, ZERO_64_LOW);\n}\n\nvec3 project_position(vec3 position, vec3 position64Low) {\n  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);\n  return projected_position.xyz;\n}\n\nvec3 project_position(vec3 position) {\n  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);\n  return projected_position.xyz;\n}\n\nvec2 project_position(vec2 position) {\n  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);\n  return projected_position.xy;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  return viewProjectionMatrix * position + center;\n}\n\n//\n// Projects from common space coordinates to clip space.\n// Uses project_uViewProjectionMatrix\n//\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);\n}\n\n// Returns a clip space offset that corresponds to a given number of screen pixels\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;\n  return offset * project_uFocalDistance;\n}\n\nfloat project_size_to_pixel(float meters) {\n  return project_size(meters) * project_uScale;\n}\nfloat project_size_to_pixel(float size, int unit) {\n  if (unit == UNIT_METERS) return project_size_to_pixel(size);\n  if (unit == UNIT_COMMON) return size * project_uScale;\n  // UNIT_PIXELS\n  return size;\n}\nfloat project_pixel_size(float pixels) {\n  return pixels / project_uScale;\n}\nvec2 project_pixel_size(vec2 pixels) {\n  return pixels / project_uScale;\n}\n');function dEe(n,e){if(n===e)return!0;if(Array.isArray(n)){const t=n.length;if(!e||e.length!==t)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}return!1}function db(n){let t,e={};return i=>{for(const r in i)if(!dEe(i[r],e[r])){t=n(i),e=i;break}return t}}const DG=[0,0,0,0],hEe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],RG=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],fEe=[0,0,0],OG=[0,0,0],pEe=db(function _Ee({viewport:n,devicePixelRatio:e,coordinateSystem:t,coordinateOrigin:i}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:c,geospatialOrigin:l}=function gEe(n,e,t){const{viewMatrixUncentered:i,projectionMatrix:r}=n;let{viewMatrix:s,viewProjectionMatrix:o}=n,a=DG,c=DG,l=n.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:d,offsetMode:h}=PG(n,e,t);return h&&(c=n.projectPosition(u||d),l=[l[0]-c[0],l[1]-c[1],l[2]-c[2]],c[3]=1,a=Ep([],c,o),s=i||s,o=ul([],r,s),o=ul([],o,hEe)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:c,cameraPosCommon:l,shaderCoordinateOrigin:d,geospatialOrigin:u}}(n,t,i),u=n.getDistanceScales(),d=[n.width*e,n.height*e],h=Ep([],[0,0,-n.focalDistance,1],n.projectionMatrix)[3]||1,f={project_uCoordinateSystem:t,project_uProjectionMode:n.projectionMode,project_uCoordinateOrigin:c,project_uCommonOrigin:o.slice(0,3),project_uCenter:r,project_uPseudoMeters:!!n._pseudoMeters,project_uViewportSize:d,project_uDevicePixelRatio:e,project_uFocalDistance:h,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:fEe,project_uScale:n.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:RG,project_uCameraPosition:a};if(l){const p=n.getDistanceScales(l);switch(t){case it.METER_OFFSETS:f.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,f.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case it.LNGLAT:case it.LNGLAT_OFFSETS:n._pseudoMeters||(f.project_uCommonUnitsPerMeter=p.unitsPerMeter),f.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,f.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case it.CARTESIAN:f.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],f.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]]}}return f});function PG(n,e,t=OG){t.length<3&&(t=[t[0],t[1],0]);let r,i=t,s=!0;switch(r=e===it.LNGLAT_OFFSETS||e===it.METER_OFFSETS?t:n.isGeospatial?[Math.fround(n.longitude),Math.fround(n.latitude),0]:null,n.projectionMode){case ho.WEB_MERCATOR:(e===it.LNGLAT||e===it.CARTESIAN)&&(r=[0,0,0],s=!1);break;case ho.WEB_MERCATOR_AUTO_OFFSET:e===it.LNGLAT?i=r:e===it.CARTESIAN&&(i=[Math.fround(n.center[0]),Math.fround(n.center[1]),0],r=n.unprojectPosition(i),i[0]-=t[0],i[1]-=t[1],i[2]-=t[2]);break;case ho.IDENTITY:i=n.position.map(Math.fround),i[2]=i[2]||0;break;case ho.GLOBE:s=!1,r=null;break;default:s=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:i,offsetMode:s}}const yEe={},Sx={name:"project",dependencies:[{name:"fp32",vs:"#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_taylor_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 1.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 1.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\nfloat tan_fp32(float a) {\n#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND\n  return tan_taylor_fp32(a);\n#else\n  return tan(a);\n#endif\n}\n",fs:null},oEe],vs:uEe,getUniforms:function vEe(n=yEe){return"viewport"in n?function mEe({viewport:n,devicePixelRatio:e=1,modelMatrix:t=null,coordinateSystem:i=it.DEFAULT,coordinateOrigin:r=OG,autoWrapLongitude:s=!1}){i===it.DEFAULT&&(i=n.isGeospatial?it.LNGLAT:it.CARTESIAN);const o=pEe({viewport:n,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:r});return o.project_uWrapLongitude=s,o.project_uModelMatrix=t||RG,o}(n):{}}},wEe=db(function xEe({viewport:n,center:e}){return new Be(n.viewProjectionMatrix).invert().transform(e)}),CEe=db(function MEe({viewport:n,shadowMatrices:e}){const t=[],i=n.pixelUnprojectionMatrix,r=n.isGeospatial?void 0:1,s=[[0,0,r],[n.width,0,r],[0,n.height,r],[n.width,n.height,r],[0,0,-1],[n.width,0,-1],[0,n.height,-1],[n.width,n.height,-1]].map(o=>function SEe(n,e){const[t,i,r]=n,s=Hp([t,i,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}(o,i));for(const o of e){const a=o.clone().translate(new Ri(n.center).negate()),c=s.map(u=>a.transform(u)),l=(new Be).ortho({left:Math.min(...c.map(u=>u[0])),right:Math.max(...c.map(u=>u[0])),bottom:Math.min(...c.map(u=>u[1])),top:Math.max(...c.map(u=>u[1])),near:Math.min(...c.map(u=>-u[2])),far:Math.max(...c.map(u=>-u[2]))});t.push(l.multiplyRight(o))}return t}),AEe=[0,0,0,1],TEe=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],xx={name:"shadow",dependencies:[Sx],vs:"\nconst int max_lights = 2;\nuniform mat4 shadow_uViewProjectionMatrices[max_lights];\nuniform vec4 shadow_uProjectCenters[max_lights];\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform int shadow_uLightId;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nvec4 shadow_setVertexPosition(vec4 position_commonspace) {\n  if (shadow_uDrawShadowMap) {\n    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);\n  }\n  if (shadow_uUseShadowMap) {\n    for (int i = 0; i < max_lights; i++) {\n      if(i < int(shadow_uLightCount)) {\n        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);\n        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;\n      }\n    }\n  }\n  return gl_Position;\n}\n",fs:"\nconst int max_lights = 2;\nuniform bool shadow_uDrawShadowMap;\nuniform bool shadow_uUseShadowMap;\nuniform sampler2D shadow_uShadowMap0;\nuniform sampler2D shadow_uShadowMap1;\nuniform vec4 shadow_uColor;\nuniform float shadow_uLightCount;\n\nvarying vec3 shadow_vPosition[max_lights];\n\nconst vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);\nconst vec4 bitUnpackShift = 1.0 / bitPackShift;\nconst vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);\n\nfloat shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {\n  vec4 rgbaDepth = texture2D(shadowMap, position.xy);\n\n  float z = dot(rgbaDepth, bitUnpackShift);\n  return smoothstep(0.001, 0.01, position.z - z);\n}\n\nvec4 shadow_filterShadowColor(vec4 color) {\n  if (shadow_uDrawShadowMap) {\n    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);\n    rgbaDepth -= rgbaDepth.gbaa * bitMask;\n    return rgbaDepth;\n  }\n  if (shadow_uUseShadowMap) {\n    float shadowAlpha = 0.0;\n    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);\n    if(shadow_uLightCount > 1.0) {\n      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);\n    }\n    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;\n    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);\n\n    return vec4(\n      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),\n      blendedAlpha\n    );\n  }\n  return color;\n}\n",inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    position = shadow_setVertexPosition(geometry.position);\n    ","fs:DECKGL_FILTER_COLOR":"\n    color = shadow_filterShadowColor(color);\n    "},getUniforms:(n={},e={})=>"viewport"in n&&(n.drawToShadowMap||n.shadowMaps&&n.shadowMaps.length>0)?function IEe(n,e){const{shadowEnabled:t=!0}=n;if(!t||!n.shadowMatrices||!n.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const i={shadow_uDrawShadowMap:!!n.drawToShadowMap,shadow_uUseShadowMap:!!n.shadowMaps&&n.shadowMaps.length>0,shadow_uColor:n.shadowColor||AEe,shadow_uLightId:n.shadowLightId||0,shadow_uLightCount:n.shadowMatrices.length},r=wEe({viewport:n.viewport,center:e.project_uCenter}),s=[],o=CEe({shadowMatrices:n.shadowMatrices,viewport:n.viewport}).slice();for(let a=0;a<n.shadowMatrices.length;a++){const c=o[a],l=c.clone().translate(new Ri(n.viewport.center).negate());e.project_uCoordinateSystem===it.LNGLAT&&e.project_uProjectionMode===ho.WEB_MERCATOR?(o[a]=l,s[a]=r):(o[a]=c.clone().multiplyRight(TEe),s[a]=l.transform(r))}for(let a=0;a<o.length;a++)i["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],i["shadow_uProjectCenters[".concat(a,"]")]=s[a],i["shadow_uShadowMap".concat(a)]=n.shadowMaps&&n.shadowMaps.length>0?n.shadowMaps[a]:n.dummyShadowMap;return i}(n,e):{}},DEe={color:[255,255,255],intensity:1},NG=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],REe=[0,0,0,200/255];class Mx{constructor(e={}){E(this,"id","lighting-effect"),E(this,"props",null),E(this,"shadowColor",REe),E(this,"shadow",void 0),E(this,"ambientLight",null),E(this,"directionalLights",[]),E(this,"pointLights",[]),E(this,"shadowPasses",[]),E(this,"shadowMaps",[]),E(this,"dummyShadowMap",null),E(this,"programManager",void 0),E(this,"shadowMatrices",void 0);for(const t in e){const i=e[t];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),0===this.shadowPasses.length&&this._createShadowPasses(e),this.programManager||(this.programManager=tg.getDefaultProgramManager(e),xx&&this.programManager.addDefaultModule(xx)),this.dummyShadowMap||(this.dummyShadowMap=new _i(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const t=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return t.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(i=>i.getProjectedLight({layer:e})),pointLights:this.pointLights.map(i=>i.getProjectedLight({layer:e}))},t}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(xx),this.programManager=null)}_calculateMatrices(){const e=[];for(const t of this.directionalLights){const i=(new Be).lookAt({eye:new Ri(t.direction).negate()});e.push(i)}return e}_createShadowPasses(e){for(let t=0;t<this.directionalLights.length;t++){const i=new nEe(e);this.shadowPasses[t]=i,this.shadowMaps[t]=i.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:t,directionalLights:i}=this;!e&&0===t.length&&0===i.length&&(this.ambientLight=new SG(DEe),this.directionalLights.push(new xG(NG[0]),new xG(NG[1])))}}let OEe=1,PEe=1;class FG{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:t=0,duration:i=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,o=OEe++,a={time:0,delay:t,duration:i,rate:r,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[t,i]of this.animations)i.channel===e&&this.detachAnimation(t)}isFinished(e){const t=this.channels.get(e);return void 0!==t&&this.time>=t.delay+t.duration*t.repeat}getTime(e){if(void 0===e)return this.time;const t=this.channels.get(e);return void 0===t?-1:t.time}setTime(e){this.time=Math.max(0,e);const t=this.channels.values();for(const r of t)this._setChannelTime(r,this.time);const i=this.animations.values();for(const r of i){const{animation:s,channel:o}=r;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,t){const i=PEe++;return this.animations.set(i,{animation:e,channel:t}),e.setTime(this.getTime(t)),i}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,t){const i=t-e.delay;i>=e.duration*e.repeat?e.time=e.duration*e.rate:(e.time=Math.max(0,i)%e.duration,e.time*=e.rate)}}const hb=Symbol.for("component"),zd=Symbol.for("asyncPropDefaults"),Ml=Symbol.for("asyncPropOriginal"),cc=Symbol.for("asyncPropResolved");let Ix={};function Ni(n,e,t,i){Ze.level>0&&Ix[n]&&Ix[n].call(null,e,t,i)}function Dx(n,e=()=>!0){return Array.isArray(n)?kG(n,e,[]):e(n)?[n]:[]}function kG(n,e,t){let i=-1;for(;++i<n.length;){const r=n[i];Array.isArray(r)?kG(r,e,t):e(r)&&t.push(r)}return t}function FEe({target:n,source:e,start:t=0,count:i=1}){const r=e.length,s=i*r;let o=0;for(let a=t;o<r;o++)n[a++]=e[o];for(;o<s;)o<s-o?(n.copyWithin(t+o,t,t+o),o*=2):(n.copyWithin(t+o,t,t+s-o),o=s);return n}const Os=n=>"function"==typeof n,lc=n=>null!==n&&"object"==typeof n,BG=n=>lc(n)&&n.constructor==={}.constructor,kEe=n=>n&&"function"==typeof n[Symbol.iterator],LEe=n=>n&&"function"==typeof n[Symbol.asyncIterator],Gd=n=>typeof Response<"u"&&n instanceof Response||n&&n.arrayBuffer&&n.text&&n.json,Wd=n=>typeof Blob<"u"&&n instanceof Blob,BEe=n=>n&&"object"==typeof n&&n.isBuffer,VG=n=>(n=>typeof ReadableStream<"u"&&n instanceof ReadableStream||lc(n)&&Os(n.tee)&&Os(n.cancel)&&Os(n.getReader))(n)||(n=>lc(n)&&Os(n.read)&&Os(n.pipe)&&(n=>"boolean"==typeof n)(n.readable))(n);function UG(n,e){if(!n)throw new Error(e||"loader assertion failed.")}function Rx(n){var e;return!!n&&(Array.isArray(n)&&(n=n[0]),Array.isArray(null===(e=n)||void 0===e?void 0:e.extensions))}function Ox(n){var e,t;let i;return UG(n,"null loader"),UG(Rx(n),"invalid loader"),Array.isArray(n)&&(i=n[1],n=n[0],n={...n,options:{...n.options,...i}}),(null!==(e=n)&&void 0!==e&&e.parseTextSync||null!==(t=n)&&void 0!==t&&t.parseText)&&(n.text=!0),n.text||(n.binary=!0),n}let Px="";const Nx={},GEe=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,WEe=/^([-\w.]+\/[-\w.+]+)/;function $Ee(n){const e=WEe.exec(n);return e?e[1]:n}function jG(n){const e=GEe.exec(n);return e?e[1]:""}const qEe=/\?.*/;function fb(n){if(Gd(n)){const e=Fx(n.url||"");return{url:e,type:$Ee(n.headers.get("content-type")||"")||jG(e)}}return Wd(n)?{url:Fx(n.name||""),type:n.type||""}:"string"==typeof n?{url:Fx(n),type:jG(n)}:{url:"",type:""}}function Fx(n){return n.replace(qEe,"")}function HG(n){return kx.apply(this,arguments)}function kx(){return kx=te(function*(n){if(Gd(n))return n;const e={},t=function XEe(n){return Gd(n)?n.headers["content-length"]||-1:Wd(n)?n.size:"string"==typeof n?n.length:n instanceof ArrayBuffer||ArrayBuffer.isView(n)?n.byteLength:-1}(n);t>=0&&(e["content-length"]=String(t));const{url:i,type:r}=fb(n);r&&(e["content-type"]=r);const s=yield function JEe(n){return Vx.apply(this,arguments)}(n);s&&(e["x-first-bytes"]=s),"string"==typeof n&&(n=(new TextEncoder).encode(n));const o=new Response(n,{headers:e});return Object.defineProperty(o,"url",{value:i}),o}),kx.apply(this,arguments)}function Lx(){return Lx=te(function*(n){if(!n.ok){const e=yield function KEe(n){return Bx.apply(this,arguments)}(n);throw new Error(e)}}),Lx.apply(this,arguments)}function Bx(){return Bx=te(function*(n){let e="Failed to fetch resource ".concat(n.url," (").concat(n.status,"): ");try{const t=n.headers.get("Content-Type");let i=n.statusText;t.includes("application/json")&&(i+=" ".concat(yield n.text())),e+=i,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}),Bx.apply(this,arguments)}function Vx(){return Vx=te(function*(n){if("string"==typeof n)return"data:,".concat(n.slice(0,5));if(n instanceof Blob){const t=n.slice(0,5);return yield new Promise(i=>{const r=new FileReader;r.onload=s=>{var o;return i(null==s||null===(o=s.target)||void 0===o?void 0:o.result)},r.readAsDataURL(t)})}if(n instanceof ArrayBuffer){const i=function ZEe(n){let e="";const t=new Uint8Array(n);for(let i=0;i<t.byteLength;i++)e+=String.fromCharCode(t[i]);return btoa(e)}(n.slice(0,5));return"data:base64,".concat(i)}return null}),Vx.apply(this,arguments)}function zG(n,e){return Ux.apply(this,arguments)}function Ux(){return Ux=te(function*(n,e){if("string"==typeof n){n=function zEe(n){for(const e in Nx)n.startsWith(e)&&(n=n.replace(e,Nx[e]));return!n.startsWith("http://")&&!n.startsWith("https://")&&(n="".concat(Px).concat(n)),n}(n);let t=e;return null!=e&&e.fetch&&"function"!=typeof e?.fetch&&(t=e.fetch),yield fetch(n,t)}return yield HG(n)}),Ux.apply(this,arguments)}const GG=new Bp({id:"loaders.gl"});class QEe{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const WG=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),$G=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),qG=($G&&parseFloat($G[1]),{fetch:null,mimeType:void 0,nothrow:!1,log:new class ewe{constructor(){E(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}},CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:WG,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]}),twe={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function jx(){globalThis.loaders=globalThis.loaders||{};const{loaders:n}=globalThis;return n._state=n._state||{},n._state}const Hx=()=>{const n=jx();return n.globalOptions=n.globalOptions||{...qG},n.globalOptions};function nwe(n,e,t,i){return t=t||[],function iwe(n,e){YG(n,null,qG,twe,e);for(const t of e)YG(n&&n[t.id]||{},t.id,t.options&&t.options[t.id]||{},t.deprecatedOptions&&t.deprecatedOptions[t.id]||{},e)}(n,t=Array.isArray(t)?t:[t]),function KG(n,e,t){const r={...n.options||{}};return function swe(n,e){e&&!("baseUri"in n)&&(n.baseUri=e)}(r,t),null===r.log&&(r.log=new QEe),JG(r,Hx()),JG(r,e),r}(e,n,i)}function XG(n,e){const t=Hx(),i=n||t;return"function"==typeof i.fetch?i.fetch:lc(i.fetch)?r=>zG(r,i):null!=e&&e.fetch?e?.fetch:zG}function YG(n,e,t,i,r){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in n){const c=!e&&lc(n[a]);if(!(a in t)&&("baseUri"!==a||e)&&("workerUrl"!==a||!e))if(a in i)GG.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(i[a],"'"))();else if(!c){const d=rwe(a,r);GG.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(d))()}}}function rwe(n,e){const t=n.toLowerCase();let i="";for(const r of e)for(const s in r.options){if(n===s)return"Did you mean '".concat(r.id,".").concat(s,"'?");const o=s.toLowerCase();(t.startsWith(o)||o.startsWith(t))&&(i=i||"Did you mean '".concat(r.id,".").concat(s,"'?"))}return i}function JG(n,e){for(const t in e)t in e&&(n[t]=BG(e[t])&&BG(n[t])?{...n[t],...e[t]}:e[t])}function go(n,e){if(!n)throw new Error(e||"loaders.gl assertion failed.")}const mo={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},cwe=mo.global||mo.self||mo.window||{},uc="object"!=typeof process||"[object process]"!==String(process)||process.browser,zx="function"==typeof importScripts,lwe=typeof window<"u"&&typeof window.orientation<"u",ZG=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);ZG&&parseFloat(ZG[1]);class Gx{}const Wx=new Map;function QG(n){const e=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(e)}function e4(n,e=!0,t){const i=t||new Set;if(n)if(t4(n))i.add(n);else if(t4(n.buffer))i.add(n.buffer);else if(!ArrayBuffer.isView(n)&&e&&"object"==typeof n)for(const r in n)e4(n[r],e,i);return void 0===t?Array.from(i):[]}function t4(n){return!!n&&(n instanceof ArrayBuffer||typeof MessagePort<"u"&&n instanceof MessagePort||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)}const $x=()=>{};class qx{static isSupported(){return typeof Worker<"u"&&uc||typeof Gx<"u"&&!uc}constructor(e){E(this,"name",void 0),E(this,"source",void 0),E(this,"url",void 0),E(this,"terminated",!1),E(this,"worker",void 0),E(this,"onMessage",void 0),E(this,"onError",void 0),E(this,"_loadableURL","");const{name:t,source:i,url:r}=e;go(i||r),this.name=t,this.source=i,this.url=r,this.onMessage=$x,this.onError=s=>console.log(s),this.worker=uc?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=$x,this.onError=$x,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,t){t=t||e4(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=function uwe(n){go(n.source&&!n.url||!n.source&&n.url);let e=Wx.get(n.source||n.url);return e||(n.url&&(e=function dwe(n){if(!n.startsWith("http"))return n;const e=function hwe(n){return"try {\n  importScripts('".concat(n,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")}(n);return QG(e)}(n.url),Wx.set(n.url,e)),n.source&&(e=QG(n.source),Wx.set(n.source,e))),go(e),e}({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=t=>{t.data?this.onMessage(t.data):this.onError(new Error("No data received"))},e.onerror=t=>{this.onError(this._getErrorFromErrorEvent(t)),this.terminated=!0},e.onmessageerror=t=>console.error(t),e}_createNodeWorker(){let e;if(this.url){const i=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new Gx(i,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new Gx(this.source,{eval:!0})}return e.on("message",t=>{this.onMessage(t)}),e.on("error",t=>{this.onError(t)}),e.on("exit",t=>{}),e}}class pwe{constructor(e,t){E(this,"name",void 0),E(this,"workerThread",void 0),E(this,"isRunning",!0),E(this,"result",void 0),E(this,"_resolve",()=>{}),E(this,"_reject",()=>{}),this.name=e,this.workerThread=t,this.result=new Promise((i,r)=>{this._resolve=i,this._reject=r})}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){go(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){go(this.isRunning),this.isRunning=!1,this._reject(e)}}class gwe{static isSupported(){return qx.isSupported()}constructor(e){E(this,"name","unnamed"),E(this,"source",void 0),E(this,"url",void 0),E(this,"maxConcurrency",1),E(this,"maxMobileConcurrency",1),E(this,"onDebug",()=>{}),E(this,"reuseWorkers",!0),E(this,"props",{}),E(this,"jobQueue",[]),E(this,"idleQueue",[]),E(this,"count",0),E(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}startJob(e,t=(r,s,o)=>r.done(o),i=(r,s)=>r.error(s)){var r=this;return te(function*(){const s=new Promise(o=>(r.jobQueue.push({name:e,onMessage:t,onError:i,onStart:o}),r));return r._startQueuedJob(),yield s})()}_startQueuedJob(){var e=this;return te(function*(){if(!e.jobQueue.length)return;const t=e._getAvailableWorker();if(!t)return;const i=e.jobQueue.shift();if(i){e.onDebug({message:"Starting job",name:i.name,workerThread:t,backlog:e.jobQueue.length});const r=new pwe(i.name,t);t.onMessage=s=>i.onMessage(r,s.type,s.payload),t.onError=s=>i.onError(r,s),i.onStart(r);try{yield r.result}finally{e.returnWorkerToQueue(t)}}})()}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new qx({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return lwe?this.maxMobileConcurrency:this.maxConcurrency}}const mwe={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class ia{static isSupported(){return qx.isSupported()}static getWorkerFarm(e={}){return ia._workerFarm=ia._workerFarm||new ia({}),ia._workerFarm.setProps(e),ia._workerFarm}constructor(e){E(this,"props",void 0),E(this,"workerPools",new Map),this.props={...mwe},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const t of this.workerPools.values())t.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:i,url:r}=e;let s=this.workerPools.get(t);return s||(s=new gwe({name:t,source:i,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}E(ia,"_workerFarm",void 0);const _we="latest";function Xx(){return Xx=te(function*(n,e,t,i,r){const s=n.id,o=function ywe(n,e={}){const t=e[n.id]||{},i="".concat(n.id,"-worker.js");let r=t.workerUrl;if(!r&&"compression"===n.id&&(r=e.workerUrl),"test"===e._workerType&&(r="modules/".concat(n.module,"/dist/").concat(i)),!r){let s=n.version;"latest"===s&&(s=_we);const o=s?"@".concat(s):"";r="https://unpkg.com/@loaders.gl/".concat(n.module).concat(o,"/dist/").concat(i)}return go(r),r}(n,t),c=ia.getWorkerFarm(t).getWorkerPool({name:s,url:o});t=JSON.parse(JSON.stringify(t)),i=JSON.parse(JSON.stringify(i||{}));const l=yield c.startJob("process-on-worker",Ewe.bind(null,r));return l.postMessage("process",{input:e,options:t,context:i}),yield(yield l.result).result}),Xx.apply(this,arguments)}function Ewe(n,e,t,i){return Yx.apply(this,arguments)}function Yx(){return Yx=te(function*(n,e,t,i){switch(t){case"done":e.done(i);break;case"error":e.error(new Error(i.error));break;case"process":const{id:r,input:s,options:o}=i;try{const a=yield n(s,o);e.postMessage("done",{id:r,result:a})}catch(a){const c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:r,error:c})}break;default:console.warn("parse-with-worker unknown message ".concat(t))}}),Yx.apply(this,arguments)}function Kx(n){var e,t,i,r=2;for(typeof Symbol<"u"&&(t=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(t&&null!=(e=n[t]))return e.call(n);if(i&&null!=(e=n[i]))return new pb(e.call(n));t="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function pb(n){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var i=t.done;return Promise.resolve(t.value).then(function(r){return{value:r,done:i}})}return(pb=function(i){this.s=i,this.n=i.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return void 0===r?Promise.resolve({value:i,done:!0}):e(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return void 0===r?Promise.reject(i):e(r.apply(this.s,arguments))}},new pb(n)}function r4(n){return n&&"object"==typeof n&&n.isBuffer}function s4(n){if(r4(n))return function wwe(n){return r4(n)?new Uint8Array(n.buffer,n.byteOffset,n.length).slice().buffer:n}(n);if(n instanceof ArrayBuffer)return n;if(ArrayBuffer.isView(n))return 0===n.byteOffset&&n.byteLength===n.buffer.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);if("string"==typeof n){const e=n;return(new TextEncoder).encode(e).buffer}if(n&&"object"==typeof n&&n._toArrayBuffer)return n._toArrayBuffer();throw new Error("toArrayBuffer")}function Zx(){return Zx=te(function*(n){const e=[];var r,t=!1,i=!1;try{for(var o,s=Kx(n);t=!(o=yield s.next()).done;t=!1)e.push(o.value)}catch(a){i=!0,r=a}finally{try{t&&null!=s.return&&(yield s.return())}finally{if(i)throw r}}return function Awe(...n){const e=n.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),t=e.reduce((s,o)=>s+o.byteLength,0),i=new Uint8Array(t);let r=0;for(const s of e)i.set(s,r),r+=s.byteLength;return i.buffer}(...e)}),Zx.apply(this,arguments)}Qe(492);const Swe=262144,Mwe=262144;function o4(n,e){this.v=n,this.k=e}function gb(n){return new o4(n,0)}function eM(n){return function(){return new ng(n.apply(this,arguments))}}function ng(n){var e,t;function i(s,o){try{var a=n[s](o),c=a.value,l=c instanceof o4;Promise.resolve(l?c.v:c).then(function(u){if(l){var d="return"===s?"return":"next";if(!c.k||u.done)return i(d,u);u=n[d](u).value}r(a.done?"return":"normal",u)},function(u){i("throw",u)})}catch(u){r("throw",u)}}function r(s,o){switch(s){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?i(e.key,e.arg):t=null}this._invoke=function(s,o){return new Promise(function(a,c){var l={key:s,arg:o,resolve:a,reject:c,next:null};t?t=t.next=l:(e=t=l,i(s,o))})},"function"!=typeof n.return&&(this.return=void 0)}ng.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},ng.prototype.next=function(n){return this._invoke("next",n)},ng.prototype.throw=function(n){return this._invoke("throw",n)},ng.prototype.return=function(n){return this._invoke("return",n)};const Dwe=1048576;function tM(){return tM=eM(function*(n,e){const t=e?.chunkSize||Dwe;let i=0;for(;i<n.size;){const r=i+t,s=yield gb(n.slice(i,r).arrayBuffer());i=r,yield s}}),tM.apply(this,arguments)}function a4(n,e){return WG?function Owe(n,e){return nM.apply(this,arguments)}(n,e):function Pwe(n,e){return iM.apply(this,arguments)}(n,e)}function nM(){return nM=eM(function*(n,e){const t=n.getReader();let i;try{for(;;){const r=i||t.read();null!=e&&e._streamReadAhead&&(i=t.read());const{done:s,value:o}=yield gb(r);if(s)return;yield s4(o)}}catch{t.releaseLock()}}),nM.apply(this,arguments)}function iM(){return iM=eM(function*(n,e){var r,t=!1,i=!1;try{for(var o,s=Kx(n);t=!(o=yield gb(s.next())).done;t=!1){const a=o.value;yield s4(a)}}catch(a){i=!0,r=a}finally{try{t&&null!=s.return&&(yield gb(s.return()))}finally{if(i)throw r}}}),iM.apply(this,arguments)}const rM="Cannot convert supplied data type";function sM(){return sM=te(function*(n,e,t){const i=n instanceof ArrayBuffer||ArrayBuffer.isView(n);if("string"==typeof n||i)return function Fwe(n,e){if(e.text&&"string"==typeof n)return n;if(BEe(n)&&(n=n.buffer),n instanceof ArrayBuffer){const i=n;return e.text&&!e.binary?new TextDecoder("utf8").decode(i):i}if(ArrayBuffer.isView(n)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(n);let i=n.buffer;const r=n.byteLength||n.length;return(0!==n.byteOffset||r!==i.byteLength)&&(i=i.slice(n.byteOffset,n.byteOffset+r)),i}throw new Error(rM)}(n,e);if(Wd(n)&&(n=yield HG(n)),Gd(n)){const r=n;return yield function YEe(n){return Lx.apply(this,arguments)}(r),e.binary?yield r.arrayBuffer():yield r.text()}if(VG(n)&&(n=function Nwe(n,e){if("string"==typeof n)return function*xwe(n,e){const t=e?.chunkSize||Swe;let i=0;const r=new TextEncoder;for(;i<n.length;){const s=Math.min(n.length-i,t),o=n.slice(i,i+s);i+=s,yield r.encode(o)}}(n,e);if(n instanceof ArrayBuffer)return function*Iwe(n,e={}){const{chunkSize:t=Mwe}=e;let i=0;for(;i<n.byteLength;){const r=Math.min(n.byteLength-i,t),s=new ArrayBuffer(r),o=new Uint8Array(n,i,r);new Uint8Array(s).set(o),i+=r,yield s}}(n,e);if(Wd(n))return function Rwe(n,e){return tM.apply(this,arguments)}(n,e);if(VG(n))return a4(n,e);if(Gd(n))return a4(n.body,e);throw new Error("makeIterator")}(n,t)),kEe(n)||LEe(n))return function Twe(n){return Zx.apply(this,arguments)}(n);throw new Error(rM)}),sM.apply(this,arguments)}const jwe=new Bp({id:"loaders.gl"}),c4=()=>{const n=jx();return n.loaderRegistry=n.loaderRegistry||[],n.loaderRegistry};function l4(n){const e=c4();n=Array.isArray(n)?n:[n];for(const t of n){const i=Ox(t);e.find(r=>i===r)||e.unshift(i)}}const zwe=/\.([^.]+)$/;function cM(){return cM=te(function*(n,e=[],t,i){if(!d4(n))return null;let r=u4(n,e,{...t,nothrow:!0},i);if(r)return r;if(Wd(n)&&(r=u4(n=yield n.slice(0,10).arrayBuffer(),e,t,i)),!(r||null!=t&&t.nothrow))throw new Error(h4(n));return r}),cM.apply(this,arguments)}function u4(n,e=[],t,i){if(!d4(n))return null;if(e&&!Array.isArray(e))return Ox(e);let r=[];e&&(r=r.concat(e)),null!=t&&t.ignoreRegisteredLoaders||r.push(...function Hwe(){return c4()}()),function $we(n){for(const e of n)Ox(e)}(r);const s=function Wwe(n,e,t,i){const{url:r,type:s}=fb(n),o=r||i?.url;let a=null,c="";var l;return null!=t&&t.mimeType&&(a=lM(e,t?.mimeType),c="match forced by supplied MIME type ".concat(t?.mimeType)),a=a||function qwe(n,e){const t=e&&zwe.exec(e),i=t&&t[1];return i?function Xwe(n,e){e=e.toLowerCase();for(const t of n)for(const i of t.extensions)if(i.toLowerCase()===e)return t;return null}(n,i):null}(e,o),c=c||(a?"matched url ".concat(o):""),a=a||lM(e,s),c=c||(a?"matched MIME type ".concat(s):""),a=a||function Ywe(n,e){if(!e)return null;for(const t of n)if("string"==typeof e){if(Kwe(e,t))return t}else if(ArrayBuffer.isView(e)){if(f4(e.buffer,e.byteOffset,t))return t}else if(e instanceof ArrayBuffer&&f4(e,0,t))return t;return null}(e,n),c=c||(a?"matched initial data ".concat(p4(n)):""),a=a||lM(e,t?.fallbackMimeType),c=c||(a?"matched fallback MIME type ".concat(s):""),c&&jwe.log(1,"selectLoader selected ".concat(null===(l=a)||void 0===l?void 0:l.name,": ").concat(c,".")),a}(n,r,t,i);if(!(s||null!=t&&t.nothrow))throw new Error(h4(n));return s}function d4(n){return!(n instanceof Response&&204===n.status)}function h4(n){const{url:e,type:t}=fb(n);let i="No valid loader found (";i+=e?"".concat(function Uwe(n){const e=n&&n.lastIndexOf("/");return e>=0?n.substr(e+1):""}(e),", "):"no url provided, ",i+="MIME type: ".concat(t?'"'.concat(t,'"'):"not provided",", ");const r=n?p4(n):"";return i+=r?' first bytes: "'.concat(r,'"'):"first bytes: not available",i+=")",i}function lM(n,e){for(const t of n)if(t.mimeTypes&&t.mimeTypes.includes(e)||e==="application/x.".concat(t.id))return t;return null}function Kwe(n,e){return e.testText?e.testText(n):(Array.isArray(e.tests)?e.tests:[e.tests]).some(i=>n.startsWith(i))}function f4(n,e,t){return(Array.isArray(t.tests)?t.tests:[t.tests]).some(r=>function Jwe(n,e,t,i){if(i instanceof ArrayBuffer)return function Cwe(n,e,t){if(n.byteLength<(t=t||n.byteLength)||e.byteLength<t)return!1;const i=new Uint8Array(n),r=new Uint8Array(e);for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(i,n,i.byteLength);switch(typeof i){case"function":return i(n,t);case"string":return i===uM(n,e,i.length);default:return!1}}(n,e,t,r))}function p4(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?uM(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?uM(n,0,e):""}function uM(n,e,t){if(n.byteLength<e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function mb(n,e,t,i){return dM.apply(this,arguments)}function dM(){return dM=te(function*(n,e,t,i){go(!i||"object"==typeof i),e&&!Array.isArray(e)&&!Rx(e)&&(i=void 0,t=e,e=void 0),n=yield n,t=t||{};const{url:r}=fb(n),o=function Vwe(n,e){if(!e&&n&&!Array.isArray(n))return n;let t;if(n&&(t=Array.isArray(n)?n:[n]),e&&e.loaders){const i=Array.isArray(e.loaders)?e.loaders:[e.loaders];t=t?[...t,...i]:i}return t&&t.length?t:null}(e,i),a=yield function Gwe(n){return cM.apply(this,arguments)}(n,o,t);return a?(i=function Bwe(n,e,t=null){if(t)return t;const i={fetch:XG(e,n),...n};return Array.isArray(i.loaders)||(i.loaders=null),i}({url:r,parse:mb,loaders:o},t=nwe(t,a,o,r),i),yield function Zwe(n,e,t,i){return hM.apply(this,arguments)}(a,n,t,i)):null}),dM.apply(this,arguments)}function hM(){return hM=te(function*(n,e,t,i){if(function awe(n){go(n,"no worker provided")}(n),Gd(e)){const r=e,{ok:s,redirected:o,status:a,statusText:c,type:l,url:u}=r,d=Object.fromEntries(r.headers.entries());i.response={headers:d,ok:s,redirected:o,status:a,statusText:c,type:l,url:u}}if(e=yield function kwe(n,e,t){return sM.apply(this,arguments)}(e,n,t),n.parseTextSync&&"string"==typeof e)return t.dataType="text",n.parseTextSync(e,t,i,n);if(function vwe(n,e){return!(!ia.isSupported()||!(uc||null!=e&&e._nodeWorkers))&&n.worker&&e?.worker}(n,t))return yield function bwe(n,e,t,i,r){return Xx.apply(this,arguments)}(n,e,t,i,mb);if(n.parseText&&"string"==typeof e)return yield n.parseText(e,t,i,n);if(n.parse)return yield n.parse(e,t,i,n);throw go(!n.parseSync),new Error("".concat(n.id," loader - no parser found and worker is disabled"))}),hM.apply(this,arguments)}function ig(n,e,t,i){return fM.apply(this,arguments)}function fM(){return fM=te(function*(n,e,t,i){!Array.isArray(e)&&!Rx(e)&&(t=e,e=void 0);const r=XG(t);let s=n;return"string"==typeof n&&(s=yield r(n)),Wd(n)&&(s=yield r(n)),yield mb(s,e,t)}),fM.apply(this,arguments)}class Qwe{constructor(e,t,i){E(this,"id",void 0),E(this,"context",void 0),E(this,"isLoaded",void 0),E(this,"persistent",void 0),E(this,"_loadCount",0),E(this,"_subscribers",new Set),E(this,"_data",void 0),E(this,"_loader",void 0),E(this,"_error",void 0),E(this,"_content",void 0),this.id=e,this.context=i,this.setData(t)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,t){if(e===this._data&&!t)return;this._data=e;const i=++this._loadCount;let r=e;"string"==typeof e&&(r=ig(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===i&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class eCe{constructor({gl:e,protocol:t}){E(this,"protocol",void 0),E(this,"_context",void 0),E(this,"_resources",void 0),E(this,"_consumers",void 0),E(this,"_pruneRequest",void 0),this.protocol=t||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return!!e.startsWith(this.protocol)||e in this._resources}add({resourceId:e,data:t,forceUpdate:i=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(t,i):(s=new Qwe(e,t,this._context),this._resources[e]=s),s.persistent=r}remove(e){const t=this._resources[e];t&&(t.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const t=this._consumers[e];if(t){for(const i in t){const r=t[i],s=this._resources[r.resourceId];s&&s.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:t,consumerId:i,requestId:r="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(s[e=e.replace(o,"")]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(i,r,a,t),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,t,i,r){const s=this._consumers,o=s[e]=s[e]||{},a=o[t]||{},c=a.resourceId&&this._resources[a.resourceId];c&&(c.unsubscribe(a),this.prune()),i&&(o[t]=a,a.onChange=r,a.resourceId=i.id,i.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const t=this._resources[e];!t.persistent&&!t.inUse()&&(t.delete(),delete this._resources[e])}}}const tCe=[Sx],nCe=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function iCe(n){const e=tg.getDefaultProgramManager(n);for(const t of tCe)e.addDefaultModule(t);for(const t of nCe)e.addShaderHook(t);return e}class oCe{constructor(e,{deck:t,stats:i,viewport:r,timeline:s}={}){E(this,"layers",void 0),E(this,"context",void 0),E(this,"resourceManager",void 0),E(this,"_lastRenderedLayers",[]),E(this,"_needsRedraw",!1),E(this,"_needsUpdate",!1),E(this,"_nextLayers",null),E(this,"_debug",!1),E(this,"activateViewport",o=>{Ni("layerManager.activateViewport",this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new eCe({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:t,programManager:e&&iCe(e),stats:i||new dx({id:"deck.gl"}),viewport:r||new tc({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new FG,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const i of this.layers){const r=i.getNeedsRedraw(e);t=t||r}return t}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(t=>e.find(i=>0===t.id.indexOf(i))):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,t){Ni("layerManager.setLayers",this,t,e),this._lastRenderedLayers=e;const i=Dx(e,Boolean);for(const r of i)r.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,t,i){i.raiseError(t,"".concat(e," of ").concat(i))}_updateLayers(e,t){const i={};for(const o of e)i[o.id]?Ze.warn("Multiple old layers with same id ".concat(o.id))():i[o.id]=o;const r=[];this._updateSublayersRecursively(t,i,r),this._finalizeOldLayers(i);let s=!1;for(const o of r)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,t,i){for(const r of e){r.context=this.context;const s=t[r.id];null===s&&Ze.warn("Multiple new layers with same id ".concat(r.id))(),t[r.id]=null;let o=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),o=r.isComposite?r.getSubLayers():null}catch(a){this._handleError("matching",a,r)}o&&this._updateSublayersRecursively(o,t,i)}}_finalizeOldLayers(e){for(const t in e){const i=e[t];i&&this._finalizeLayer(i)}}_initializeLayer(e){try{e._initialize(),e.lifecycle="Initialized"}catch(t){this._handleError("initialization",t,e)}}_transferLayerState(e,t){t._transferState(e),t.lifecycle="Matched. State transferred from previous layer",t!==e&&(e.lifecycle="Discarded. Awaiting garbage collection")}_updateLayer(e){try{e._update()}catch(t){this._handleError("update",t,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle="No longer matched. Awaiting garbage collection";try{e._finalize(),e.lifecycle="Finalized! Awaiting garbage collection"}catch(t){this._handleError("finalization",t,e)}}}class aCe{constructor(e){E(this,"width",void 0),E(this,"height",void 0),E(this,"views",void 0),E(this,"viewState",void 0),E(this,"controllers",void 0),E(this,"timeline",void 0),E(this,"_viewports",void 0),E(this,"_viewportMap",void 0),E(this,"_isUpdating",void 0),E(this,"_needsRedraw",void 0),E(this,"_needsUpdate",void 0),E(this,"_eventManager",void 0),E(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const t=this.controllers[e];t&&t.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const t=this.controllers[e];t&&t.updateTransition()}}getViewports(e){return e?this._viewports.filter(t=>t.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(t=>{e[t.id]=t}),e}getView(e){return this.views.find(t=>t.id===e)}getViewState(e){const t="string"==typeof e?this.getView(e):e,i=t&&this.viewState[t.getViewStateId()]||this.viewState;return t?t.filterViewState(i):i}getViewport(e){return this._viewportMap[e]}unproject(e,t){const i=this.getViewports(),r={x:e[0],y:e[1]};for(let s=i.length-1;s>=0;--s){const o=i[s];if(o.containsPixel(r)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,t)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,t){(e!==this.width||t!==this.height)&&(this.width=e,this.height=t,this.setNeedsUpdate("Size changed"))}_setViews(e){e=Dx(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Pd(e,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Ze.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,t){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...t,viewId:e})}_createController(e,t){return new(0,t.type)({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,t.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return null===(o=this.getView(e.id))||void 0===o?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,t,i,r){const s=e.controller;if(s){const o={...t,...s,id:e.id,x:i.x,y:i.y,width:i.width,height:i.height};return r||(r=this._createController(e,o)),r&&r.setProps(o),r}return null}_rebuildViewports(){const{views:e}=this,t=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=e.length;r--;){const s=e[r],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let c=t[s.id];const l=!!s.controller;l&&!c&&(i=!0),(i||!l)&&c&&(c.finalize(),c=null),this.controllers[s.id]=this._updateController(s,o,a,c),this._viewports.unshift(a)}for(const r in t){const s=t[r];s&&!this.controllers[r]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,t){return e.length!==t.length||e.some((i,r)=>!e[r].equals(t[r]))}}const uCe=Math.PI/180;function g4(n){return 512/4003e4/Math.cos(n*uCe)}class dc extends tc{constructor(e={}){const{latitude:t=0,longitude:i=0,zoom:r=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:c=1.01,orthographic:l=!1,projectionMatrix:u,repeat:d=!1,worldOffset:h=0,legacyMeterSizes:f=!1}=e;let{width:p,height:g,altitude:m=1.5}=e;const y=Math.pow(2,r);p=p||1,g=g||1;let v,_=null;u?(m=u[5]/2,v=Jv(m)):(e.fovy?(v=e.fovy,m=zS(v)):v=Jv(m),_=function sz(n){const{width:e,height:t,altitude:i,pitch:r=0,offset:s,center:o,scale:a,nearZMultiplier:c=1,farZMultiplier:l=1}=n;let{fovy:u=Jv(mye)}=n;void 0!==i&&(u=Jv(i));const d=u*ts,h=r*ts,f=zS(u);let p=f;o&&(p+=o[2]*a/Math.cos(h)/t);const g=d*(.5+(s?s[1]:0)/t),m=Math.sin(g)*p/Math.sin(VS(Math.PI/2-h-g,.01,Math.PI-.01)),y=Math.sin(h)*m+p;return{fov:d,aspect:e/t,focalDistance:f,near:c,far:Math.min(y*l,10*p)}}({width:p,height:g,pitch:s,fovy:v,nearZMultiplier:a,farZMultiplier:c}));let w=function vye(n){const{height:e,pitch:t,bearing:i,altitude:r,scale:s,center:o}=n,a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];nv(a,a,[0,0,-r]),hU(a,a,-t*ts),fU(a,a,i*ts);const c=s/e;return zT(a,a,[c,c,c]),o&&nv(a,a,function fhe(n,e){return n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n}([],o)),a}({height:g,pitch:s,bearing:o,scale:y,altitude:m});h&&(w=(new Be).translate([512*h,0,0]).multiplyLeft(w)),super({...e,width:p,height:g,viewMatrix:w,longitude:i,latitude:t,zoom:r,..._,fovy:v,focalDistance:m}),E(this,"longitude",void 0),E(this,"latitude",void 0),E(this,"pitch",void 0),E(this,"bearing",void 0),E(this,"altitude",void 0),E(this,"fovy",void 0),E(this,"orthographic",void 0),E(this,"_subViewports",void 0),E(this,"_pseudoMeters",void 0),this.latitude=t,this.longitude=i,this.zoom=r,this.pitch=s,this.bearing=o,this.altitude=m,this.fovy=v,this.orthographic=l,this._subViewports=d?[]:null,this._pseudoMeters=f,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),t=Math.floor((e[0]+180)/360),i=Math.ceil((e[2]-180)/360);for(let r=t;r<=i;r++){const s=r?new dc({...this,worldOffset:r}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[t,i]=this.projectFlat(e);return[t,i,(e[2]||0)*g4(e[1])]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[t,i]=this.unprojectFlat(e);return[t,i,(e[2]||0)/g4(i)]}addMetersToLngLat(e,t){return rz(e,t)}panByPosition(e,t){const i=Hp(t,this.pixelUnprojectionMatrix),s=iv([],this.projectFlat(e),pU([],i)),o=iv([],this.center,s),[a,c]=this.unprojectFlat(o);return{longitude:a,latitude:c}}getBounds(e={}){const t=function Eye(n,e=0){const{width:t,height:i,unproject:r}=n,s={targetZ:e},o=r([0,i],s),a=r([t,i],s);let c,l;return(n.fovy?.5*n.fovy*cz:Math.atan(.5/n.altitude))>(90-n.pitch)*cz-.01?(c=lz(n,0,e),l=lz(n,t,e)):(c=r([0,0],s),l=r([t,0],s)),[o,a,l,c]}(this,e.z||0);return[Math.min(t[0][0],t[1][0],t[2][0],t[3][0]),Math.min(t[0][1],t[1][1],t[2][1],t[3][1]),Math.max(t[0][0],t[1][0],t[2][0],t[3][0]),Math.max(t[0][1],t[1][1],t[2][1],t[3][1])]}fitBounds(e,t={}){const{width:i,height:r}=this,{longitude:s,latitude:o,zoom:a}=az({width:i,height:r,bounds:e,...t});return new dc({width:i,height:r,longitude:s,latitude:o,zoom:a})}}E(dc,"displayName","WebMercatorViewport");class hCe extends _z{constructor(e){const{width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a=0,pitch:c=0,altitude:l=1.5,position:u=[0,0,0],maxZoom:d=20,minZoom:h=0,maxPitch:f=60,minPitch:p=0,startPanLngLat:g,startZoomLngLat:m,startRotatePos:y,startBearing:v,startPitch:_,startZoom:w,normalize:A=!0}=e;mi(Number.isFinite(s)),mi(Number.isFinite(r)),mi(Number.isFinite(o)),super({width:t,height:i,latitude:r,longitude:s,zoom:o,bearing:a,pitch:c,altitude:l,maxZoom:d,minZoom:h,maxPitch:f,minPitch:p,normalize:A,position:u},{startPanLngLat:g,startZoomLngLat:m,startRotatePos:y,startBearing:v,startPitch:_,startZoom:w}),E(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:t}){const i=this.getState().startPanLngLat||this._unproject(t);if(!i)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(i,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:t=0,deltaAngleY:i=0}){const{startRotatePos:r,startBearing:s,startPitch:o}=this.getState();if(!r||void 0===s||void 0===o)return this;let a;return a=e?this._getNewRotation(e,r,o,s):{bearing:s+t,pitch:o+i},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:t,scale:i}){let{startZoom:r,startZoomLngLat:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(t)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let c=r+Math.log2(i);c=gi(c,a,o);const l=this.makeViewport({...this.getViewportProps(),zoom:c});return this._getUpdatedState({zoom:c,...l.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const t=e.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:s}=i;return Math.abs(r-t.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(s-t.longitude)>180&&(i.longitude=s<0?s+360:s-360),i}applyConstraints(e){const{maxZoom:t,minZoom:i,zoom:r}=e;e.zoom=gi(r,i,t);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=gi(a,o,s);const{normalize:c=!0}=e;return c&&Object.assign(e,function wye(n){const{width:e,height:t,pitch:i=0}=n;let{longitude:r,latitude:s,zoom:o,bearing:a=0}=n;(r<-180||r>180)&&(r=nz(r+180,360)-180),(a<-180||a>180)&&(a=nz(a+180,360)-180);const c=US(t/512);if(o<=c)o=c,s=0;else{const l=t/2/Math.pow(2,o),u=Od([0,l])[1];if(s<u)s=u;else{const d=Od([0,512-l])[1];s>d&&(s=d)}}return{width:e,height:t,longitude:r,latitude:s,zoom:o,pitch:i,bearing:a}}(e)),e}_zoomFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.zoom({pos:[t/2,i/2],scale:e})}_panFromCenter(e){const{width:t,height:i}=this.getViewportProps();return this.pan({startPos:[t/2,i/2],pos:[t/2+e[0],i/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const t=this.makeViewport(this.getViewportProps());return e&&t.unproject(e)}_getNewRotation(e,t,i,r){const s=e[0]-t[0],o=e[1]-t[1],a=e[1],c=t[1],{width:l,height:u}=this.getViewportProps(),d=s/l;let h=0;o>0?Math.abs(u-c)>5&&(h=o/(c-u)*1.2):o<0&&c>5&&(h=1-a/c),h=gi(h,-1,1);const{minPitch:f,maxPitch:p}=this.getViewportProps();let m=i;return h>0?m=i+h*(p-i):h<0&&(m=i-h*(f-i)),{pitch:m,bearing:r+180*d}}}class fCe extends qS{constructor(...e){super(...e),E(this,"ControllerState",hCe),E(this,"transition",{transitionDuration:300,transitionInterpolator:new Qv({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),E(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const t=this.props;super.setProps(e),(!t||t.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class _4 extends WS{get ViewportType(){return dc}get ControllerType(){return fCe}}E(_4,"displayName","MapView");class pCe extends ub{constructor(e,t){super(e,t),E(this,"maskMap",void 0),E(this,"fbo",void 0);const{mapSize:i=2048}=t;this.maskMap=new _i(e,{width:i,height:i,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.fbo=new Pn(e,{id:"maskmap",width:i,height:i,attachments:{36064:this.maskMap}})}render(e){const t=this.gl,i=[!1,!1,!1,!1];return i[e.channel]=!0,ns(t,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:i,depthTest:!1},()=>super.render({...e,target:this.fbo,pass:"mask"}))}shouldDrawLayer(e){return"mask"===e.props.operation}delete(){this.fbo.delete(),this.maskMap.delete()}}class yCe{constructor(){E(this,"id","mask-effect"),E(this,"props",null),E(this,"useInPicking",!0),E(this,"dummyMaskMap",void 0),E(this,"channels",[]),E(this,"masks",null),E(this,"maskPass",void 0),E(this,"maskMap",void 0),E(this,"lastViewport",void 0)}preRender(e,{layers:t,layerFilter:i,viewports:r,onViewportActive:s,views:o}){this.dummyMaskMap||(this.dummyMaskMap=new _i(e,{width:1,height:1}));const a=t.filter(d=>d.props.visible&&"mask"===d.props.operation);if(0===a.length)return this.masks=null,void(this.channels.length=0);this.masks={},this.maskPass||(this.maskPass=new pCe(e,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const c=this._sortMaskChannels(a),l=r[0],u=!this.lastViewport||!this.lastViewport.equals(l);for(const d in c)this._renderChannel(c[d],{layerFilter:i,onViewportActive:s,views:o,viewport:l,viewportChanged:u})}_renderChannel(e,{layerFilter:t,onViewportActive:i,views:r,viewport:s,viewportChanged:o}){const a=this.channels[e.index];if(!a)return;const c=e===a||a.layers.length!==e.layers.length||e.layerBounds.some((l,u)=>l!==a.layerBounds[u]);if(e.bounds=a.bounds,e.maskBounds=a.maskBounds,this.channels[e.index]=e,(c||o)&&(this.lastViewport=s,e.bounds=function gCe({layers:n,viewport:e}){let t=null;for(const s of n){const o=s.getBounds();o&&(t?(t[0]=Math.min(t[0],o[0][0]),t[1]=Math.min(t[1],o[0][1]),t[2]=Math.max(t[2],o[1][0]),t[3]=Math.max(t[3],o[1][1])):t=[o[0][0],o[0][1],o[1][0],o[1][1]])}const i=e.getBounds();if(!t)return i;const r=function _Ce(n){const e_x=n[2]-n[0],e_y=n[3]-n[1],t_x=n[0]+.5*e_x,t_y=n[1]+.5*e_y;return[t_x-e_x,t_y-e_y,t_x+e_x,t_y+e_y]}(i);return t[2]-t[0]<r[2]-r[0]||t[3]-t[1]<r[3]-r[1]||(t[0]=Math.max(t[0],r[0]),t[1]=Math.max(t[1],r[1]),t[2]=Math.min(t[2],r[2]),t[3]=Math.min(t[3],r[3])),t}({layers:e.layers,viewport:s}),c||!yd(e.bounds,a.bounds))){const{maskPass:l,maskMap:u}=this,d=function mCe({bounds:n,viewport:e,width:t,height:i}){if(n[2]<=n[0]||n[3]<=n[1])return null;if(t-=2,i-=2,e instanceof dc){const{longitude:a,latitude:c,zoom:l}=az({width:t,height:i,bounds:[[n[0],n[1]],[n[2],n[3]]],maxZoom:20});return new dc({longitude:a,latitude:c,zoom:l,x:1,y:1,width:t,height:i})}const s=[(n[0]+n[2])/2,(n[1]+n[3])/2,0],o=Math.min(20,t/(n[2]-n[0]),i/(n[3]-n[1]));return new XS({x:1,y:1}).makeViewport({width:t,height:i,viewState:{target:s,zoom:Math.log2(o)}})}({bounds:e.bounds,viewport:s,width:u.width,height:u.height});e.maskBounds=d?d.getBounds():[0,0,1,1],l.render({pass:"mask",channel:e.index,layers:e.layers,layerFilter:t,viewports:d?[d]:[],onViewportActive:i,views:r,moduleParameters:{devicePixelRatio:1}})}this.masks[e.id]={index:e.index,bounds:e.maskBounds,coordinateOrigin:e.coordinateOrigin,coordinateSystem:e.coordinateSystem}}_sortMaskChannels(e){const t={};let i=0;for(const r of e){const{id:s}=r.root;let o=t[s];if(!o){if(++i>4){Ze.warn("Too many mask layers. The max supported is 4")();continue}o={id:s,index:this.channels.findIndex(a=>a?.id===s),layers:[],layerBounds:[],coordinateOrigin:r.root.props.coordinateOrigin,coordinateSystem:r.root.props.coordinateSystem},t[s]=o}o.layers.push(r),o.layerBounds.push(r.getBounds())}for(let r=0;r<4;r++){const s=this.channels[r];(!s||!(s.id in t))&&(this.channels[r]=null)}for(const r in t){const s=t[r];s.index<0&&(s.index=this.channels.findIndex(o=>!o),this.channels[s.index]=s)}return t}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const vCe=new Mx;class bCe{constructor(){E(this,"effects",void 0),E(this,"_internalEffects",void 0),E(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(e){"effects"in e&&(e.effects.length!==this.effects.length||!Pd(e.effects,this.effects))&&(this.setEffects(e.effects),this._needsRedraw="effects changed")}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(e=[]){this.cleanup(),this.effects=e,this._internalEffects=e.slice(),this._internalEffects.push(new yCe),e.some(t=>t instanceof Mx)||this._internalEffects.push(vCe)}cleanup(){for(const e of this.effects)e.cleanup();for(const e of this._internalEffects)e.cleanup();this.effects.length=0,this._internalEffects.length=0}}class ECe extends ub{shouldDrawLayer(e){return"draw"===e.props.operation}}const y4={blendFunc:[1,0,32771,0],blendEquation:32774};class v4 extends ub{constructor(...e){super(...e),E(this,"pickZ",void 0),E(this,"_colors",null)}render(e){return e.pickingFBO?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:c,width:l,height:u},cullRect:d,effects:h,pass:f="picking",pickZ:p}){const g=this.gl;this.pickZ=p;const m=p?null:{byLayer:new Map,byAlpha:[]};this._colors=m;const y=ns(g,{scissorTest:!0,scissor:[a,c,l,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...y4,blend:!p},()=>super.render({target:o,layers:e,layerFilter:t,views:i,viewports:r,onViewportActive:s,cullRect:d,effects:h?.filter(_=>_.useInPicking),pass:f}));return this._colors=null,{decodePickingColor:m&&CCe.bind(null,m),stats:y}}shouldDrawLayer(e){return e.props.pickable&&"draw"===e.props.operation}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,t,i){const r={...e.props.parameters};return this._colors?(Object.assign(r,y4),r.blend=!0,r.blendColor=function wCe(n,e,t){const{byLayer:i,byAlpha:r}=n;let s,o=i.get(e);return o?(o.viewports.push(t),s=o.a):(s=i.size+1,s<=255?(o={a:s,layer:e,viewports:[t]},i.set(e,o),r[s]=o):(Ze.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}(this._colors,e,i)):r.blend=!1,r}}function CCe(n,e){const t=n.byAlpha[e[3]];return t&&{pickedLayer:t.layer,pickedViewports:t.viewports,pickedObjectIndex:t.layer.decodePickingColor(e)}}class TCe{constructor(e){this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new ECe(e),this.pickLayersPass=new v4(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){"layerFilter"in e&&this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in e&&this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){const t=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;e.layerFilter=e.layerFilter||this.layerFilter,e.effects=e.effects||[],e.target=e.target||Pn.getDefaultFramebuffer(this.gl),this._preRender(e.effects,e);const i=this.lastPostProcessEffect?this.renderBuffers[0]:e.target,r=t.render({...e,target:i});this._postRender(e.effects,e),this.renderCount++,Ni("deckRenderer.renderLayers",this,r,e)}needsRedraw(e={clearRedrawFlags:!1}){const t=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),t}finalize(){const{renderBuffers:e}=this;for(const t of e)t.delete();e.length=0}_preRender(e,t){let i=null;for(const r of e)r.preRender(this.gl,t),r.postRender&&(i=r);i&&this._resizeRenderBuffers(),this.lastPostProcessEffect=i}_resizeRenderBuffers(){const{renderBuffers:e}=this;0===e.length&&e.push(new Pn(this.gl),new Pn(this.gl));for(const t of e)t.resize()}_postRender(e,t){const{renderBuffers:i}=this,r={inputBuffer:i[0],swapBuffer:i[1],target:null};for(const s of e)if(s.postRender){if(s===this.lastPostProcessEffect){r.target=t.target,s.postRender(this.gl,r);break}const o=s.postRender(this.gl,r);r.inputBuffer=o,r.swapBuffer=o===i[0]?i[1]:i[0]}}}const SCe={pickedColor:null,pickedObjectIndex:-1};function xCe({pickedColors:n,decodePickingColor:e,deviceX:t,deviceY:i,deviceRadius:r,deviceRect:s}){const{x:o,y:a,width:c,height:l}=s;let u=r*r,d=-1,h=0;for(let f=0;f<l;f++){const p=f+a-i,g=p*p;if(g>u)h+=4*c;else for(let m=0;m<c;m++){if(n[h+3]-1>=0){const v=m+o-t,_=v*v+g;_<=u&&(u=_,d=h)}h+=4}}if(d>=0){const f=n.slice(d,d+4),p=e(f);if(p){const g=Math.floor(d/4/c),m=d/4-g*c;return{...p,pickedColor:f,pickedX:o+m,pickedY:a+g}}Ze.error("Picked non-existent layer. Is picking buffer corrupt?")()}return SCe}function b4({pickInfo:n,viewports:e,pixelRatio:t,x:i,y:r,z:s}){let a,o=e[0];if(e.length>1&&(o=function DCe(n,e){for(let t=n.length-1;t>=0;t--){const i=n[t];if(i.containsPixel(e))return i}return n[0]}(n?.pickedViewports||e,{x:i,y:r})),o){const c=[i-o.x,r-o.y];void 0!==s&&(c[2]=s),a=o.unproject(c)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:i,y:r,pixel:[i,r],coordinate:a,devicePixel:n&&"pickedX"in n?[n.pickedX,n.pickedY]:void 0,pixelRatio:t}}function ICe(n){const{pickInfo:e,lastPickedInfo:t,mode:i,layers:r}=n,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,c=o?[o]:[];if("hover"===i){const h=t.layerId,f=o?o.props.id:null;if(f!==h||a!==t.index){if(f!==h){const p=r.find(g=>g.props.id===h);p&&c.unshift(p)}t.layerId=f,t.index=a,t.info=null}}const l=b4(n),u=new Map;return u.set(null,l),c.forEach(d=>{let h={...l};d===o&&(h.color=s,h.index=a,h.picked=!0),h=E4({layer:d,info:h,mode:i});const f=h.layer;d===o&&"hover"===i&&(t.info=h),u.set(f.id,h),"hover"===i&&f.updateAutoHighlight(h)}),u}function E4({layer:n,info:e,mode:t}){for(;n&&e;){const i=e.layer||null;e.sourceLayer=i,e.layer=n,e=n.getPickingInfo({info:e,mode:t,sourceLayer:i}),n=n.parent}return e}class RCe{constructor(e){E(this,"gl",void 0),E(this,"pickingFBO",void 0),E(this,"depthFBO",void 0),E(this,"pickLayersPass",void 0),E(this,"layerFilter",void 0),E(this,"lastPickedInfo",void 0),E(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new v4(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:t,layers:i,viewports:r},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,c=o?i.find(h=>h.id===o):null,l=a&&r.find(h=>h.id===a)||r[0],u=l&&l.unproject([e-l.x,t-l.y]);return{...s,x:e,y:t,viewport:l,coordinate:u,layer:c}}_resizeBuffer(){var e,t;const{gl:i}=this;if(!this.pickingFBO&&(this.pickingFBO=new Pn(i),Pn.isSupported(i,{colorBufferFloat:!0}))){const r=new Pn(i);r.attach({36064:new _i(i,{format:$e(i)?34836:6408,type:5126})}),this.depthFBO=r}null===(e=this.pickingFBO)||void 0===e||e.resize({width:i.canvas.width,height:i.canvas.height}),null===(t=this.depthFBO)||void 0===t||t.resize({width:i.canvas.width,height:i.canvas.height})}_getPickable(e){if(!1===this._pickable)return null;const t=e.filter(i=>i.isPickable()&&!i.isComposite);return t.length?t:null}_pickClosestObject({layers:e,views:t,viewports:i,x:r,y:s,radius:o=0,depth:a=1,mode:c="query",unproject3D:l,onViewportActive:u,effects:d}){const h=this._getPickable(e),f=kd(this.gl);if(!h)return{result:[],emptyInfo:b4({viewports:i,x:r,y:s,pixelRatio:f})};this._resizeBuffer();const p=cx(this.gl,[r,s],!0),g=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],m=Math.round(o*f),{width:y,height:v}=this.pickingFBO,_=this._getPickingRect({deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceWidth:y,deviceHeight:v}),w={x:r-o,y:s-o,width:2*o+1,height:2*o+1};let A;const S=[],D=new Set;for(let x=0;x<a;x++){let k,U;k=_?xCe({...this._drawAndSample({layers:h,views:t,viewports:i,onViewportActive:u,deviceRect:_,cullRect:w,effects:d,pass:"picking:".concat(c)}),deviceX:g[0],deviceY:g[1],deviceRadius:m,deviceRect:_}):{pickedColor:null,pickedObjectIndex:-1},k.pickedLayer&&l&&this.depthFBO&&(U=this._drawAndSample({layers:[k.pickedLayer],views:t,viewports:i,onViewportActive:u,deviceRect:{x:k.pickedX,y:k.pickedY,width:1,height:1},cullRect:w,effects:d,pass:"picking:".concat(c,":z")},!0).pickedColors[0]),k.pickedLayer&&x+1<a&&(D.add(k.pickedLayer),k.pickedLayer.disablePickingIndex(k.pickedObjectIndex)),A=ICe({pickInfo:k,lastPickedInfo:this.lastPickedInfo,mode:c,layers:h,viewports:i,x:r,y:s,z:U,pixelRatio:f});for(const V of A.values())V.layer&&S.push(V);if(!k.pickedColor)break}for(const x of D)x.restorePickingColors();return{result:S,emptyInfo:A.get(null)}}_pickVisibleObjects({layers:e,views:t,viewports:i,x:r,y:s,width:o=1,height:a=1,mode:c="query",maxObjects:l=null,onViewportActive:u,effects:d}){const h=this._getPickable(e);if(!h)return[];this._resizeBuffer();const f=kd(this.gl),p=cx(this.gl,[r,s],!0),g=p.x,m=p.y+p.height,y=cx(this.gl,[r+o,s+a],!0),_=y.y,S=function MCe({pickedColors:n,decodePickingColor:e}){const t=new Map;if(n)for(let i=0;i<n.length;i+=4)if(n[i+3]-1>=0){const s=n.slice(i,i+4),o=s.join(",");if(!t.has(o)){const a=e(s);a?t.set(o,{...a,color:s}):Ze.error("Picked non-existent layer. Is picking buffer corrupt?")()}}return Array.from(t.values())}(this._drawAndSample({layers:h,views:t,viewports:i,onViewportActive:u,deviceRect:{x:g,y:_,width:y.x+y.width-g,height:m-_},cullRect:{x:r,y:s,width:o,height:a},effects:d,pass:"picking:".concat(c)})),D=new Map,x=Number.isFinite(l);for(let k=0;k<S.length&&!(x&&l&&D.size>=l);k++){const U=S[k];let V={color:U.pickedColor,layer:null,index:U.pickedObjectIndex,picked:!0,x:r,y:s,pixelRatio:f};V=E4({layer:U.pickedLayer,info:V,mode:c}),D.has(V.object)||D.set(V.object,V)}return Array.from(D.values())}_drawAndSample({layers:e,views:t,viewports:i,onViewportActive:r,deviceRect:s,cullRect:o,effects:a,pass:c},l=!1){const u=l?this.depthFBO:this.pickingFBO,{decodePickingColor:d}=this.pickLayersPass.render({layers:e,layerFilter:this.layerFilter,views:t,viewports:i,onViewportActive:r,pickingFBO:u,deviceRect:s,cullRect:o,effects:a,pass:c,pickZ:l}),{x:h,y:f,width:p,height:g}=s,m=new(l?Float32Array:Uint8Array)(p*g*4);return ob(u,{sourceX:h,sourceY:f,sourceWidth:p,sourceHeight:g,target:m}),{pickedColors:m,decodePickingColor:d}}_getPickingRect({deviceX:e,deviceY:t,deviceRadius:i,deviceWidth:r,deviceHeight:s}){const o=Math.max(0,e-i),a=Math.max(0,t-i),c=Math.min(r,e+i+1)-o,l=Math.min(s,t+i+1)-a;return c<=0||l<=0?null:{x:o,y:a,width:c,height:l}}}const OCe={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class PCe{constructor(e){E(this,"el",null),E(this,"isVisible",!1);const t=e.parentElement;t&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,OCe),t.appendChild(this.el))}setTooltip(e,t,i){const r=this.el;if(r){if("string"==typeof e)r.innerText=e;else{if(!e)return this.isVisible=!1,void(r.style.display="none");e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className),Object.assign(r.style,e.style)}this.isVisible=!0,r.style.display="block",r.style.transform="translate(".concat(t,"px, ").concat(i,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}function w4(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const FCe=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),C4=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:kCe}=(C4&&parseFloat(C4[1]),globalThis),pM=typeof Image<"u",gM=typeof ImageBitmap<"u",mM=!!FCe||!!kCe;function A4(n){const e=function S4(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const VCe=/^data:image\/svg\+xml/,UCe=/\.svg((\?|#).*)?$/;function _M(n){return n&&(VCe.test(n)||UCe.test(n))}function x4(n,e){if(_M(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function M4(n,e,t){return yM.apply(this,arguments)}function yM(){return yM=te(function*(n,e,t){const i=function jCe(n,e){if(_M(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return x4(n,e)}(n,t),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function HCe(n,e){return vM.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),yM.apply(this,arguments)}function vM(){return vM=te(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=s=>r(new Error("Could not load image ".concat(n,": ").concat(s)))}catch(s){r(s)}})}),vM.apply(this,arguments)}const zCe={};let I4=!0;function bM(){return bM=te(function*(n,e,t){let i;i=_M(t)?yield M4(n,e,t):x4(n,t);const r=e&&e.imagebitmap;return yield function WCe(n){return EM.apply(this,arguments)}(i,r)}),bM.apply(this,arguments)}function EM(){return EM=te(function*(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if((function $Ce(n){for(const e in n||zCe)return!1;return!0}(e)||!I4)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),I4=!1}return yield createImageBitmap(n)}),EM.apply(this,arguments)}const yo=!1,rg=!0;function D4(n){const e=sg(n);return function QCe(n){const e=sg(n);return e.byteLength>=24&&2303741511===e.getUint32(0,yo)?{mimeType:"image/png",width:e.getUint32(16,yo),height:e.getUint32(20,yo)}:null}(e)||function nAe(n){const e=sg(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,yo)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function iAe(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,yo);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,yo),width:e.getUint16(s+7,yo)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,yo)}return null}(e)||function eAe(n){const e=sg(n);return e.byteLength>=10&&1195984440===e.getUint32(0,yo)?{mimeType:"image/gif",width:e.getUint16(6,rg),height:e.getUint16(8,rg)}:null}(e)||function tAe(n){const e=sg(n);return e.byteLength>=14&&16973===e.getUint16(0,yo)&&e.getUint32(2,rg)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,rg),height:e.getUint32(22,rg)}:null}(e)||function ZCe(n){const t=function qCe(n){return function JCe(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=function KCe(n){return[...n].map(e=>e.charCodeAt(0))}(e);for(let r=0;r<i.length;++r)if(i[r]!==n[r+t])return!1;return!0}(n,"ftyp",4)&&96&n[8]?function XCe(n){switch(function YCe(n,e,t){return String.fromCharCode(...n.slice(e,t))}(n,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}(n):null}(new Uint8Array(n instanceof DataView?n.buffer:n));return t?{mimeType:t.mimeType,width:0,height:0}:null}(e)}function sg(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function wM(){return wM=te(function*(n,e){const{mimeType:t}=D4(n)||{},i=globalThis._parseImageNode;return w4(i),yield i(n,t)}),wM.apply(this,arguments)}function CM(){return CM=te(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:s}=t||{},o=function oAe(n){switch(n){case"auto":case"data":return function BCe(){if(gM)return"imagebitmap";if(pM)return"image";if(mM)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function LCe(n){switch(n){case"auto":return gM||pM||mM;case"imagebitmap":return gM;case"image":return pM;case"data":return mM;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(o){case"imagebitmap":a=yield function GCe(n,e,t){return bM.apply(this,arguments)}(n,e,s);break;case"image":a=yield M4(n,e,s);break;case"data":a=yield function rAe(n,e){return wM.apply(this,arguments)}(n,e);break;default:w4(!1)}return"data"===r&&(a=function T4(n){switch(A4(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),CM.apply(this,arguments)}const R4={id:"image",module:"images",name:"Images",version:"3.4.15",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],parse:function sAe(n,e,t){return CM.apply(this,arguments)},tests:[n=>!!D4(new DataView(n))],options:{image:{type:"auto",decode:!0}}},cAe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function aAe(n){const e=n[0],t=n[n.length-1];return"{"===e&&"}"===t||"["===e&&"]"===t},parseTextSync:JSON.parse},og="8.8.27",_b=globalThis.deck&&globalThis.deck.VERSION;if(_b&&_b!==og)throw new Error("deck.gl - multiple versions detected: ".concat(_b," vs ").concat(og));_b||(Ze.log(1,"deck.gl ".concat(og))(),globalThis.deck={...globalThis.deck,VERSION:og,version:og,log:Ze,_registerLoggers:function NEe(n){Ix=n}},l4([cAe,[R4,{imagebitmap:{premultiplyAlpha:"none"}}]]));const lAe=globalThis.deck,yb=globalThis;function O4(n){if(!n&&!uo())return"Node";if($H(n))return"Electron";const t=n||(typeof navigator<"u"?navigator:{}).userAgent||"";if(t.indexOf("Edge")>-1)return"Edge";const i=-1!==t.indexOf("MSIE "),r=-1!==t.indexOf("Trident/");return i||r?"IE":yb.chrome?"Chrome":yb.safari?"Safari":yb.mozInnerScreenX?"Firefox":"Unknown"}class vb extends ta{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=$e(e),r=lG(e,"TIMER_QUERY");let s=i||r;for(const o of t)switch(o){case"queries":s=s&&i;break;case"timers":s=s&&r;break;default:ee(!1)}return s}constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(35007)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.begin(e?36202:35887)}beginTransformFeedbackQuery(){return this.begin(35976)}begin(e){return this._queryPending||(this.target=e,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,34919);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(36795)}getResult(){return this.gl2.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let t=0;return this._pollingPromise=new Promise((i,r)=>{const s=()=>{this.isResultAvailable()?(i(this.getResult()),this._pollingPromise=null):t++>e?(r("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return vb.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}const P4=uo()&&typeof document<"u";let vAe=0;class bAe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onCreateContext:t=m=>$z(m),onAddHTML:i=null,onInitialize:r=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:a,gl:c=null,glOptions:l={},debug:u=!1,createFramebuffer:d=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:f=!0,stats:p=Tl.get("animation-loop-".concat(vAe++))}=e;let{useDevicePixels:g=!0}=e;"useDevicePixelRatio"in e&&(ae.deprecated("useDevicePixelRatio","useDevicePixels")(),g=e.useDevicePixelRatio),this.props={onCreateContext:t,onAddHTML:i,onInitialize:r,onRender:s,onFinalize:o,onError:a,gl:c,glOptions:l,debug:u,createFramebuffer:d},this.gl=c,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:f,useDevicePixels:g}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return ee("string"==typeof e),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._running)return this;this._running=!0;const t=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=vb.isSupported(this.gl,["timers"])?new vb(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(i=>{this._running&&(this._addCallbackData(i||{}),!1!==i&&this._startLoop())});return this.props.onError&&t.catch(this.props.onError),this}redraw(){return this.isContextLost()||(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers()),this}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}toDataURL(){var e=this;return te(function*(){return e.setNeedsRedraw("toDataURL"),yield e.waitForRender(),e.gl.canvas.toDataURL()})()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=document.getElementById(e);return i?Number(i.value):t}setViewParameters(){return ae.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=P4?new Promise((e,t)=>{P4&&"complete"===document.readyState?e(document):window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):function yAe(n){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(n):clearTimeout(n)}(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):function _Ae(n){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(n):setTimeout(n,1e3/60)}(e)}_renderFrame(){this.display?this.display._renderFrame(...arguments):this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:t,aspect:i}=this._getSizeAndAspect();(e!==this.animationProps.width||t!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=t,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){"object"==typeof e&&null!==e&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?ux(this.props.gl,e):this.onCreateContext(e),!rb(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");(function fbe(n){ea(n,ax)})(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const t=document.createElement("div");t.style.position="absolute",t.style.left="10px",t.style.bottom="10px",t.style.width="300px",t.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(t);const i=this.props.onAddHTML(t);i&&(t.innerHTML=i)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,t=this.gl.drawingBufferHeight;let i=1;const{canvas:r}=this.gl;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:e>0&&t>0&&(i=e/t),{width:e,height:t,aspect:i}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&function ybe(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.canvas){const i=function pbe(n){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(n)?n<=0?1:n:n?e:1}(e.useDevicePixels);return void function Cbe(n,e,t){let i="width"in t?t.width:n.canvas.clientWidth,r="height"in t?t.height:n.canvas.clientHeight;(!i||!r)&&(ae.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,i=n.canvas.width||1,r=n.canvas.height||1),n.luma=n.luma||{},n.luma.canvasSizeInfo=n.luma.canvasSizeInfo||{};const s=n.luma.canvasSizeInfo;if(s.clientWidth!==i||s.clientHeight!==r||s.devicePixelRatio!==e){let o=e;const a=Math.floor(i*o),c=Math.floor(r*o);n.canvas.width=a,n.canvas.height=c,(n.drawingBufferWidth!==a||n.drawingBufferHeight!==c)&&(ae.warn("Device pixel ratio clamped")(),o=Math.min(n.drawingBufferWidth/i,n.drawingBufferHeight/r),n.canvas.width=Math.floor(i*o),n.canvas.height=Math.floor(r*o)),Object.assign(n.luma.canvasSizeInfo,{clientWidth:i,clientHeight:r,devicePixelRatio:e})}}(n,i,e)}const t=n.getExtension("STACKGL_resize_drawingbuffer");t&&"width"in e&&"height"in e&&t.resize(e.width,e.height)}(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new Pn(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}var bb=Qe(511);const EAe={mousedown:1,mousemove:2,mouseup:4};(function CAe(n){const e=n.prototype.handler;n.prototype.handler=function(i){const r=this.store;i.button>0&&"pointerdown"===i.type&&(function wAe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return!0;return!1}(r,s=>s.pointerId===i.pointerId)||r.push(i)),e.call(this,i)}})(bb.PointerEventInput),function AAe(n){n.prototype.handler=function(t){let i=EAe[t.type];1&i&&t.button>=0&&(this.pressed=!0),2&i&&0===t.buttons&&(i=4),this.pressed&&(4&i&&(this.pressed=!1),this.callback(this.manager,i,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}}(bb.MouseInput);const TAe=bb.Manager,vo=bb;class Eb{constructor(e,t,i){this.element=e,this.callback=t,this.options={enable:!0,...i}}}const SAe=vo?[[vo.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[vo.Rotate,{enable:!1}],[vo.Pinch,{enable:!1}],[vo.Swipe,{enable:!1}],[vo.Pan,{threshold:0,enable:!1}],[vo.Press,{enable:!1}],[vo.Tap,{event:"doubletap",taps:2,enable:!1}],[vo.Tap,{event:"anytap",enable:!1}],[vo.Tap,{enable:!1}]]:null,k4={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},xAe={doubletap:["tap"]},MAe={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},TM={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},IAe={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},L4={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},DAe=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",$d=typeof window<"u"?window:global;typeof global<"u"?global:window,typeof document<"u"&&document;let SM=!1;try{$d.addEventListener("test",null,{get passive(){return SM=!0,!0}}),$d.removeEventListener("test",null)}catch{SM=!1}const RAe=-1!==DAe.indexOf("firefox"),{WHEEL_EVENTS:OAe}=TM,V4=4.000244140625;class FAe extends Eb{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{if(!this.options.enable)return;let s=r.deltaY;$d.WheelEvent&&(RAe&&r.deltaMode===$d.WheelEvent.DOM_DELTA_PIXEL&&(s/=$d.devicePixelRatio),r.deltaMode===$d.WheelEvent.DOM_DELTA_LINE&&(s*=40)),0!==s&&s%V4==0&&(s=Math.floor(s/V4)),r.shiftKey&&s&&(s*=.25),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-s,srcEvent:r,pointerType:"mouse",target:r.target})},this.events=(this.options.events||[]).concat(OAe),this.events.forEach(r=>e.addEventListener(r,this.handleEvent,!!SM&&{passive:!1}))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){"wheel"===e&&(this.options.enable=t)}}const{MOUSE_EVENTS:kAe}=TM,U4="pointermove",j4="pointerover",H4="pointerout",z4="pointerenter",G4="pointerleave";class LAe extends Eb{constructor(e,t,i){super(e,t,i),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,this.events=(this.options.events||[]).concat(kAe),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===U4&&(this.enableMoveEvent=t),e===j4&&(this.enableOverEvent=t),e===H4&&(this.enableOutEvent=t),e===z4&&(this.enableEnterEvent=t),e===G4&&(this.enableLeaveEvent=t)}handleOverEvent(e){this.enableOverEvent&&"mouseover"===e.type&&this._emit(j4,e)}handleOutEvent(e){this.enableOutEvent&&"mouseout"===e.type&&this._emit(H4,e)}handleEnterEvent(e){this.enableEnterEvent&&"mouseenter"===e.type&&this._emit(z4,e)}handleLeaveEvent(e){this.enableLeaveEvent&&"mouseleave"===e.type&&this._emit(G4,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":0===e.buttons&&(this.pressed=!1),this.pressed||this._emit(U4,e);break;case"mouseup":this.pressed=!1}}_emit(e,t){this.callback({type:e,center:{x:t.clientX,y:t.clientY},srcEvent:t,pointerType:"mouse",target:t.target})}}const{KEY_EVENTS:BAe}=TM,W4="keydown";class VAe extends Eb{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{const s=r.target||r.srcElement;"INPUT"===s.tagName&&"text"===s.type||"TEXTAREA"===s.tagName||(this.enableDownEvent&&"keydown"===r.type&&this.callback({type:W4,srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&"keyup"===r.type&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(BAe),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,t){e===W4&&(this.enableDownEvent=t),"keyup"===e&&(this.enableUpEvent=t)}}const q4="contextmenu";class UAe extends Eb{constructor(e,t,i){super(e,t,i),this.handleEvent=r=>{this.options.enable&&this.callback({type:q4,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,t){e===q4&&(this.options.enable=t)}}const jAe={pointerdown:1,pointermove:2,pointerup:4,mousedown:1,mousemove:2,mouseup:4};function XAe(n){const e=jAe[n.srcEvent.type];if(!e)return null;const{buttons:t,button:i}=n.srcEvent;let r=!1,s=!1,o=!1;return 2===e?(r=!!(1&t),s=!!(4&t),o=!!(2&t)):(r=0===i,s=1===i,o=2===i),{leftButton:r,middleButton:s,rightButton:o}}function YAe(n,e){const t=n.center;if(!t)return null;const i=e.getBoundingClientRect();return{center:t,offsetCenter:{x:(t.x-i.left-e.clientLeft)/(i.width/e.offsetWidth||1),y:(t.y-i.top-e.clientTop)/(i.height/e.offsetHeight||1)}}}const MM={srcElement:"root",priority:0};class KAe{constructor(e){this.handleEvent=t=>{if(this.isEmpty())return;const i=this._normalizeEvent(t);let r=t.srcEvent.target;for(;r&&r!==i.rootElement;){if(this._emit(i,r),i.handled)return;r=r.parentNode}this._emit(i,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,t,i,r=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let c=MM;"string"==typeof i||i&&i.addEventListener?c={...MM,srcElement:i}:i&&(c={...MM,...i});let l=a.get(c.srcElement);l||(l=[],a.set(c.srcElement,l));const u={type:e,handler:t,srcElement:c.srcElement,priority:c.priority};r&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let d=l.length-1;for(;d>=0&&!(l[d].priority>=u.priority);)d--;l.splice(d+1,0,u)}remove(e,t){const{handlers:i,handlersByElement:r}=this;for(let s=i.length-1;s>=0;s--){const o=i[s];if(o.type===e&&o.handler===t){i.splice(s,1);const a=r.get(o.srcElement);a.splice(a.indexOf(o),1),0===a.length&&r.delete(o.srcElement)}}this._active=i.some(s=>!s.passive)}_emit(e,t){const i=this.handlersByElement.get(t);if(i){let r=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,r=!0},a=[];for(let c=0;c<i.length;c++){const{type:l,handler:u,once:d}=i[c];if(u({...e,type:l,stopPropagation:s,stopImmediatePropagation:o}),d&&a.push(i[c]),r)break}for(let c=0;c<a.length;c++){const{type:l,handler:u}=a[c];this.remove(l,u)}}}_normalizeEvent(e){const t=this.eventManager.getElement();return{...e,...XAe(e),...YAe(e,t),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:t}}}const JAe={events:null,recognizers:null,recognizerOptions:{},Manager:TAe,touchAction:"none",tabIndex:0};class ZAe{constructor(e=null,t){this._onBasicInput=r=>{const{srcEvent:s}=r,o=MAe[s.type];o&&this.manager.emit(o,r)},this._onOtherEvent=r=>{this.manager.emit(r.type,r)},this.options={...JAe,...t},this.events=new Map,this.setElement(e);const{events:i}=this.options;i&&this.on(i)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:t}=this;this.manager=new(0,t.Manager)(e,{touchAction:t.touchAction,recognizers:t.recognizers||SAe}).on("hammer.input",this._onBasicInput),t.recognizers||Object.keys(k4).forEach(r=>{const s=this.manager.get(r);s&&k4[r].forEach(o=>{s.recognizeWith(o)})});for(const r in t.recognizerOptions){const s=this.manager.get(r);if(s){const o=t.recognizerOptions[r];delete o.enable,s.set(o)}}this.wheelInput=new FAe(e,this._onOtherEvent,{enable:!1}),this.moveInput=new LAe(e,this._onOtherEvent,{enable:!1}),this.keyInput=new VAe(e,this._onOtherEvent,{enable:!1,tabIndex:t.tabIndex}),this.contextmenuInput=new UAe(e,this._onOtherEvent,{enable:!1});for(const[r,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(r,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,t,i){this._addEventHandler(e,t,i,!1)}once(e,t,i){this._addEventHandler(e,t,i,!0)}watch(e,t,i){this._addEventHandler(e,t,i,!1,!0)}off(e,t){this._removeEventHandler(e,t)}_toggleRecognizer(e,t){const{manager:i}=this;if(!i)return;const r=i.get(e);if(r&&r.options.enable!==t){r.set({enable:t});const s=xAe[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=i.get(o);t?(a.requireFailure(e),r.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,t),this.moveInput.enableEventType(e,t),this.keyInput.enableEventType(e,t),this.contextmenuInput.enableEventType(e,t)}_addEventHandler(e,t,i,r,s){if("string"!=typeof e){i=t;for(const u in e)this._addEventHandler(u,e[u],i,r,s);return}const{manager:o,events:a}=this,c=L4[e]||e;let l=a.get(c);l||(l=new KAe(this),a.set(c,l),l.recognizerName=IAe[c]||c,o&&o.on(c,l.handleEvent)),l.add(e,t,i,r,s),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,t){if("string"!=typeof e){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:i}=this,s=i.get(L4[e]||e);if(s&&(s.remove(e,t),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const c of i.values())if(c.recognizerName===o&&!c.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function Il(){}const K4={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Il,onResize:Il,onViewStateChange:Il,onInteractionStateChange:Il,onBeforeRender:Il,onAfterRender:Il,onLoad:Il,onError:n=>Ze.error(n.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:n})=>n?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class IM{constructor(e){E(this,"props",void 0),E(this,"width",0),E(this,"height",0),E(this,"userData",{}),E(this,"canvas",null),E(this,"viewManager",null),E(this,"layerManager",null),E(this,"effectManager",null),E(this,"deckRenderer",null),E(this,"deckPicker",null),E(this,"eventManager",null),E(this,"tooltip",null),E(this,"metrics",void 0),E(this,"animationLoop",void 0),E(this,"stats",void 0),E(this,"viewState",void 0),E(this,"cursorState",void 0),E(this,"_needsRedraw",void 0),E(this,"_pickRequest",void 0),E(this,"_lastPointerDownInfo",null),E(this,"_metricsCounter",void 0),E(this,"_onPointerMove",t=>{const{_pickRequest:i}=this;if("pointerleave"===t.type)i.x=-1,i.y=-1,i.radius=0;else{if(t.leftButton||t.rightButton)return;{const r=t.offsetCenter;if(!r)return;i.x=r.x,i.y=r.y,i.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:i.x,y:i.y}),i.event=t}),E(this,"_onEvent",t=>{const i=pz[t.type],r=t.offsetCenter;if(!i||!r||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:r.x,y:r.y,layers:s,viewports:this.getViewports(r)},this._lastPointerDownInfo),{layer:a}=o,c=a&&(a[i.handler]||a.props[i.handler]),l=this.props[i.handler];let u=!1;c&&(u=c.call(a,o,t)),!u&&l&&l(o,t)}),E(this,"_onPointerDown",t=>{const i=t.offsetCenter,r=this._pick("pickObject","pickObject Time",{x:i.x,y:i.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=r.result[0]||r.emptyInfo}),this.props={...K4,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&Ze.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),"IE"===O4()&&Ze.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new dx({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&Vp.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,t,i,r,s,o,a,c;this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,null===(e=this.layerManager)||void 0===e||e.finalize(),this.layerManager=null,null===(t=this.viewManager)||void 0===t||t.finalize(),this.viewManager=null,null===(i=this.effectManager)||void 0===i||i.finalize(),this.effectManager=null,null===(r=this.deckRenderer)||void 0===r||r.finalize(),this.deckRenderer=null,null===(s=this.deckPicker)||void 0===s||s.finalize(),this.deckPicker=null,null===(o=this.eventManager)||void 0===o||o.destroy(),this.eventManager=null,null===(a=this.tooltip)||void 0===a||a.remove(),this.tooltip=null,this.props.canvas||this.props.gl||!this.canvas||(null===(c=this.canvas.parentElement)||void 0===c||c.removeChild(this.canvas),this.canvas=null)}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Ze.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Ze.removed("onLayerClick","onClick")(),e.initialViewState&&!Pd(this.props.initialViewState,e.initialViewState)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const t=Object.create(this.props);Object.assign(t,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(t),this.layerManager&&(this.viewManager.setProps(t),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(t),this.effectManager.setProps(t),this.deckRenderer.setProps(t),this.deckPicker.setProps(t)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let t=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const i=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return t=t||i||r||s||o,t}redraw(e){if(!this.layerManager)return;let t=this.needsRedraw({clearRedrawFlags:!0});t=e||t,t&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(t):this._drawLayers(t))}get isInitialized(){return null!==this.viewManager}getViews(){return mi(this.viewManager),this.viewManager.views}getViewports(e){return mi(this.viewManager),this.viewManager.getViewports(e)}pickObject(e){const t=this._pick("pickObject","pickObject Time",e).result;return t.length?t[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,t=!1){for(const i in e)this.layerManager.resourceManager.add({resourceId:i,data:e[i],forceUpdate:t})}_removeResources(e){for(const t of e)this.layerManager.resourceManager.remove(t)}_pick(e,t,i){mi(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(t).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(t).timeEnd(),s}_createCanvas(e){let t=e.canvas;return"string"==typeof t&&(t=document.getElementById(t),mi(t)),t||(t=document.createElement("canvas"),t.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(t)),Object.assign(t.style,e.style),t}_setCanvasSize(e){if(!this.canvas)return;const{width:t,height:i}=e;if(t||0===t){const s=Number.isFinite(t)?"".concat(t,"px"):t;this.canvas.style.width=s}if(i||0===i){var r;const s=Number.isFinite(i)?"".concat(i,"px"):i;this.canvas.style.position=(null===(r=e.style)||void 0===r?void 0:r.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){const{canvas:e}=this;if(!e)return;const t=e.clientWidth||e.width,i=e.clientHeight||e.height;var r;t===this.width&&i===this.height||(this.width=t,this.height=i,null===(r=this.viewManager)||void 0===r||r.setProps({width:t,height:i}),this.props.onResize({width:t,height:i}))}_createAnimationLoop(e){const{width:t,height:i,gl:r,glOptions:s,debug:o,onError:a,onBeforeRender:c,onAfterRender:l,useDevicePixels:u}=e;return new bAe({width:t,height:i,useDevicePixels:u,autoResizeViewport:!1,gl:r,onCreateContext:d=>$z({...s,...d,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:d=>this._setGLContext(d.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:c,onAfterRender:l,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new _4({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:i,emptyInfo:r}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=i.length>0;let s=r,o=!1;for(const a of i){var t;s=a,o=(null===(t=a.layer)||void 0===t?void 0:t.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,ux(e,{enable:!0,copyState:!0})),this.tooltip=new PCe(this.canvas),ea(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const t=new FG;t.play(),this.animationLoop.attachTimeline(t),this.eventManager=new ZAe(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const r in pz)this.eventManager.on(r,this._onEvent);this.viewManager=new aCe({timeline:t,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const i=this.viewManager.getViewports()[0];this.layerManager=new oCe(e,{deck:this,stats:this.stats,viewport:i,timeline:t}),this.effectManager=new bCe,this.deckRenderer=new TCe(e),this.deckPicker=new RCe(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,t){const{gl:i}=this.layerManager.context;ea(i,this.props.parameters),this.props.onBeforeRender({gl:i}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:e,effects:this.effectManager.getEffects(),...t}),this.props.onAfterRender({gl:i})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),Ze.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const t=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:t},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const t=this.animationLoop.stats;e.get("GPU Time").addTime(t.get("GPU Time").lastTiming),e.get("CPU Time").addTime(t.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:t}=this;e.fps=t.get("frameRate").getHz(),e.setPropsTime=t.get("setProps Time").time,e.updateAttributesTime=t.get("Update Attributes").time,e.framesRedrawn=t.get("Redraw Count").count,e.pickTime=t.get("pickObject Time").time+t.get("pickMultipleObjects Time").time+t.get("pickObjects Time").time,e.pickCount=t.get("Pick Count").count,e.gpuTime=t.get("GPU Time").time,e.cpuTime=t.get("CPU Time").time,e.gpuTimePerFrame=t.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=t.get("CPU Time").getAverageTime();const i=Tl.get("Memory Usage");e.bufferMemory=i.get("Buffer Memory").count,e.textureMemory=i.get("Texture Memory").count,e.renderbufferMemory=i.get("Renderbuffer Memory").count,e.gpuMemory=i.get("GPU Memory").count}}E(IM,"defaultProps",K4),E(IM,"VERSION",lAe.VERSION);class DM{constructor(e,t){E(this,"opts",void 0),E(this,"source",void 0),this.opts=t,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),t=this.getAccessor();if(e)return[e,t];const{value:i}=this.source,{size:r}=t;let s=i;if(i&&i.length!==r){s=new Float32Array(r);const o=t.elementOffset||0;for(let a=0;a<r;++a)s[a]=i[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function wb(n){return n.stride||n.size*n.bytesPerElement}function J4(n,e){e.offset&&Ze.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const t=wb(n),s=(void 0!==e.vertexOffset?e.vertexOffset:n.vertexOffset||0)*t+(e.elementOffset||0)*n.bytesPerElement+(n.offset||0);return{...e,offset:s,stride:t}}class tTe{constructor(e,t,i){E(this,"gl",void 0),E(this,"id",void 0),E(this,"size",void 0),E(this,"settings",void 0),E(this,"value",void 0),E(this,"doublePrecision",void 0),E(this,"_buffer",void 0),E(this,"state",void 0),this.gl=e,this.id=t.id||"",this.size=t.size||1;const r=t.logicalType||t.type,s=5130===r;let a,{defaultValue:o}=t;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0),a=s?5126:!r&&t.isIndexed?e&&Ex(e,"ELEMENT_INDEX_UINT32")?5125:5123:r||5126;let c=function QAe(n){switch(n){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}(r||a||5126);this.doublePrecision=s,s&&!1===t.fp64&&(c=Float32Array),this.value=null,this.settings={...t,defaultType:c,defaultValue:o,logicalType:r,type:a,size:this.size,bytesPerElement:c.BYTES_PER_ELEMENT},this.state={...i,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:t}=this.settings;this._buffer=new Pt(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:t}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*wb(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),Vp.release(this.state.allocatedValue)}getShaderAttributes(e,t){if(this.doublePrecision){const i={},r=this.value instanceof Float64Array,s=function eTe(n,e){const t=J4(n,e);return{high:t,low:{...t,offset:t.offset+4*n.size}}}(this.getAccessor(),t||{});return i[e]=new DM(this,s.high),i["".concat(e,"64Low")]=r?new DM(this,s.low):new Float32Array(this.size),i}if(t){const i=J4(this.getAccessor(),t);return{[e]:new DM(this,i)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const t=Array.from(this.value);e=[t,t]}else{const{value:t,numInstances:i,size:r}=this,s=i*r;if(t&&s&&t.length>=s){const o=new Array(r).fill(1/0),a=new Array(r).fill(-1/0);for(let c=0;c<s;)for(let l=0;l<r;l++){const u=t[c++];u<o[l]&&(o[l]=u),u>a[l]&&(a[l]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:t}=this;let i;i=ArrayBuffer.isView(e)?{value:e}:e instanceof Pt?{buffer:e}:e;const r={...this.settings,...i};if(t.bufferAccessor=r,t.bounds=null,i.constant){let s=i.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),t.constant&&this._areValuesEqual(s,this.value))return!1;t.externalBuffer=null,t.constant=!0,this.value=s}else if(i.buffer){const s=i.buffer;t.externalBuffer=s,t.constant=!1,this.value=i.value||null;const o=i.value instanceof Float64Array;r.type=i.type||s.accessor.type,r.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),r.stride=wb(r)}else if(i.value){this._checkExternalBuffer(i);let s=i.value;t.externalBuffer=null,t.constant=!1,this.value=s,r.bytesPerElement=s.BYTES_PER_ELEMENT,r.stride=wb(r);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=BS(s,r));const c=s.byteLength+a+2*r.stride;o.byteLength<c&&o.reallocate(c),o.setAccessor(null),o.subData({data:s,offset:a}),r.type=i.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const t=this.value,{startOffset:i=0,endOffset:r}=e;this.buffer.subData({data:this.doublePrecision&&t instanceof Float64Array?BS(t,{size:this.size,startIndex:i,endIndex:r}):t.subarray(i,r),offset:i*t.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,t=!1){const{state:i}=this,r=i.allocatedValue,s=Vp.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:t});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),t&&r&&o.subData({data:r instanceof Float64Array?BS(r,this):r,offset:a})),i.allocatedValue=s,i.constant=!1,i.externalBuffer=null,i.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:t}=e;if(!ArrayBuffer.isView(t))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const i=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=t.BYTES_PER_ELEMENT<4),r)throw new Error("Attribute ".concat(this.id," does not support ").concat(t.constructor.name));!(t instanceof i)&&this.settings.normalized&&!("normalized"in e)&&Ze.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(t=>(t+128)/255*2-1);case 5122:return new Float32Array(e).map(t=>(t+32768)/65535*2-1);case 5121:return new Float32Array(e).map(t=>t/255);case 5123:return new Float32Array(e).map(t=>t/65535);default:return e}}_normalizeValue(e,t,i){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return t[i]=e,t;if(!e)return t[i]=r[0],t;switch(s){case 4:t[i+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:t[i+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:t[i+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:t[i+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let o=s;for(;--o>=0;)t[i+o]=Number.isFinite(e[o])?e[o]:r[o]}return t}_areValuesEqual(e,t){if(!e||!t)return!1;const{size:i}=this;for(let r=0;r<i;r++)if(e[r]!==t[r])return!1;return!0}}const Z4=[],Q4=[];function Cb(n,e=0,t=1/0){let i=Z4;const r={index:-1,data:n,target:[]};return n?"function"==typeof n[Symbol.iterator]?i=n:n.length>0&&(Q4.length=n.length,i=Q4):i=Z4,(e>0||Number.isFinite(t))&&(i=(Array.isArray(i)?i:Array.from(i)).slice(e,t),r.index=e-1),{iterable:i,objectInfo:r}}function e8(n){return n&&n[Symbol.asyncIterator]}const iTe=[],Ab=[[0,1/0]];function RM(n){const{source:e,target:t,start:i=0,size:r,getData:s}=n,a=e.length,c=(n.end||t.length)-i;if(a>c)return void t.set(e.subarray(0,c),i);if(t.set(e,i),!s)return;let l=a;for(;l<c;){const u=s(l,e);for(let d=0;d<r;d++)t[i+l]=u[d]||0,l++}}const oTe={interpolation:{duration:0,easing:n=>n},spring:{stiffness:.05,damping:.5}};function t8(n,e){if(!n)return null;Number.isFinite(n)&&(n={type:"interpolation",duration:n});const t=n.type||"interpolation";return{...oTe[t],...e,...n,type:t}}function n8(n,e){const t=e.getBuffer();return t?[t,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function i8(n){switch(n){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(n,'"'))}}function r8(n){n.push(n.shift())}function OM(n,e){const{doublePrecision:t,settings:i,value:r,size:s}=n,o=t&&r instanceof Float64Array?2:1;return(i.noAlloc?r.length:e*s)*o}function s8({buffer:n,numInstances:e,attribute:t,fromLength:i,fromStartIndices:r,getData:s=o=>o}){const o=t.doublePrecision&&t.value instanceof Float64Array?2:1,a=t.size*o,c=t.byteOffset,l=t.startIndices,u=r&&l,d=OM(t,e),h=t.isConstant;if(!u&&i>=d)return;const f=h?t.value:t.getBuffer().getData({srcByteOffset:c});if(t.settings.normalized&&!h){const y=s;s=(v,_)=>t.normalizeConstant(y(v,_))}const p=h?(y,v)=>s(f,v):(y,v)=>s(f.subarray(y,y+a),v),g=n.getData({length:i}),m=new Float32Array(d);(function sTe({source:n,target:e,size:t,getData:i,sourceStartIndices:r,targetStartIndices:s}){if(!Array.isArray(s))return RM({source:n,target:e,size:t,getData:i}),e;let o=0,a=0;const c=i&&((u,d)=>i(u+a,d)),l=Math.min(r.length,s.length);for(let u=1;u<l;u++){const d=r[u]*t,h=s[u]*t;RM({source:n.subarray(o,d),target:e,start:a,end:h,size:t,getData:c}),o=d,a=h}a<e.length&&RM({source:[],target:e,start:a,size:t,getData:c})})({source:g,target:m,sourceStartIndices:r,targetStartIndices:l,size:a,getData:p}),n.byteLength<m.byteLength+c&&n.reallocate(m.byteLength+c),n.subData({data:m,offset:c})}class PM extends tTe{constructor(e,t){super(e,t,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:Ab}),E(this,"constant",!1),this.settings.update=t.update||(t.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const t=this.state.needsRedraw;return this.state.needsRedraw=t&&!e,t}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat("function"!=typeof e&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:t}=this.settings,i=this.settings.transition;return t8(Array.isArray(t)?e[t.find(s=>e[s])]:e[t],i)}setNeedsUpdate(e=this.id,t){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),t){const{startRow:i=0,endRow:r=1/0}=t;this.state.updateRanges=function rTe(n,e){if(n===Ab||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return n;const t=[],i=n.length;let r=0;for(let s=0;s<i;s++){const o=n[s];o[1]<e[0]?(t.push(o),r=s+1):o[0]>e[1]?t.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return t.splice(r,0,e),t}(this.state.updateRanges,[i,r])}else this.state.updateRanges=Ab}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=iTe}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:t,settings:i}=this;return!i.noAlloc&&!!i.update&&(super.allocate(e,t.updateRanges!==Ab),!0)}updateBuffer({numInstances:e,data:t,props:i,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let c=!0;if(o){for(const[l,u]of s)o.call(r,this,{data:t,startRow:l,endRow:u,props:i,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[l,u]of s){const d=Number.isFinite(l)?this.getVertexOffset(l):0,h=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:d,endOffset:h})}this._checkAttributeArray()}else c=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),c}setConstantValue(e){return void 0!==e&&"function"!=typeof e&&(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:t}=this;return e?(this.clearNeedsUpdate(),t.lastExternalBuffer===e||(t.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(t.lastExternalBuffer=null,!1)}setBinaryValue(e,t=null){const{state:i,settings:r}=this;if(!e)return i.binaryValue=null,i.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(i.binaryValue===e)return this.clearNeedsUpdate(),!0;if(i.binaryValue=e,this.setNeedsRedraw(),r.transform||t!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;return mi(ArrayBuffer.isView(o.value),"invalid ".concat(r.accessor)),i.binaryAccessor=function nTe(n,e){const{size:t,stride:i,offset:r,startIndices:s,nested:o}=e,a=n.BYTES_PER_ELEMENT,c=i?i/a:t,l=r?r/a:0,u=Math.floor((n.length-l)/c);return(d,{index:h,target:f})=>{if(!s){const y=h*c+l;for(let v=0;v<t;v++)f[v]=n[y+v];return f}const p=s[h],g=s[h+1]||u;let m;if(o){m=new Array(g-p);for(let y=p;y<g;y++){const v=y*c+l;f=new Array(t);for(let _=0;_<t;_++)f[_]=n[v+_];m[y-p]=f}}else if(c===t)m=n.subarray(p*t+l,g*t+l);else{m=new n.constructor((g-p)*t);let y=0;for(let v=p;v<g;v++){const _=v*c+l;for(let w=0;w<t;w++)m[y++]=n[_+w]}}return m}}(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:t,nested:!!o.size&&o.size!==this.size}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:t}=this;return(t?e<t.length?t[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},t={};for(const i in e)Object.assign(t,super.getShaderAttributes(i,e[i]));return t}_autoUpdater(e,{data:t,startRow:i,endRow:r,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:c,value:l,size:u,startIndices:d}=e,{accessor:h,transform:f}=a,p=c.binaryAccessor||("function"==typeof h?h:s[h]);mi("function"==typeof p,'accessor "'.concat(h,'" is not a function'));let g=e.getVertexOffset(i);const{iterable:m,objectInfo:y}=Cb(t,i,r);for(const v of m){y.index++;let _=p(v,y);if(f&&(_=f.call(this,_)),d){const w=(y.index<d.length-1?d[y.index+1]:o)-d[y.index];if(_&&Array.isArray(_[0])){let A=g;for(const S of _)e._normalizeValue(S,l,A),A+=u}else _&&_.length>u?l.set(_,g):(e._normalizeValue(_,y.target,0),FEe({target:l,source:y.target,start:g,count:w}));g+=w*u}else e._normalizeValue(_,l,g),g+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!e.noAlloc&&"function"!=typeof e.update)throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,t=Math.min(4,this.size);if(e&&e.length>=t){let i=!0;switch(t){case 4:i=i&&Number.isFinite(e[3]);case 3:i=i&&Number.isFinite(e[2]);case 2:i=i&&Number.isFinite(e[1]);case 1:i=i&&Number.isFinite(e[0]);break;default:i=!1}if(!i)throw new Error("Illegal attribute generated for ".concat(this.id))}}}const o8="out vec4 transform_output;\nvoid main() {\n  transform_output = vec4(0);\n}",cTe="#version 300 es\n".concat(o8);function a8(n,e){e=Array.isArray(e)?e:[e];const t=n.replace(/^\s+/,"").split(/\s+/),[i,r,s]=t;return e.includes(i)&&r&&s?{qualifier:i,type:r,name:s.split(";")[0]}:null}function c8(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{version:e=100,input:t,inputType:i,output:r}=n;if(!t)return 300===e?cTe:e>300?"#version ".concat(e,"\n").concat(o8):"void main() {gl_FragColor = vec4(0);}";const s=function dTe(n,e){switch(e){case"float":return"vec4(".concat(n,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(n,", 0.0, 1.0)");case"vec3":return"vec4(".concat(n,", 1.0)");case"vec4":return n;default:return Rr(!1),null}}(t,i);return e>=300?"#version ".concat(e," ").concat(300===e?"es":"","\nin ").concat(i," ").concat(t,";\nout vec4 ").concat(r,";\nvoid main() {\n  ").concat(r," = ").concat(s,";\n}"):"varying ".concat(i," ").concat(t,";\nvoid main() {\n  gl_FragColor = ").concat(s,";\n}")}class l8 extends ta{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return $e(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Oi(e),super(e,t),this.initialize(t),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Ld(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind(()=>{for(const t in e)this.setBuffer(t,e[t])}),this}setBuffer(e,t){const i=this._getVaryingIndex(e),{buffer:r,byteSize:s,byteOffset:o}=this._getBufferParams(t);return i<0?(this.unused[e]=r,ae.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[i]=t,this.bindOnUse||this._bindBuffer(i,r,o,s),this)}begin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let t,i,r;return e instanceof Pt?r=e:(r=e.buffer,i=e.byteSize,t=e.byteOffset),(void 0!==t||void 0!==i)&&(t=t||0,i=i||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:i}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const t=Number(e);return Number.isFinite(t)?t:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:t,byteSize:i,byteOffset:r}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,t,r,i)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,t){let r=arguments.length>3?arguments[3]:void 0;const s=t&&t.handle;return s&&void 0!==r?this.gl.bindBufferRange(35982,e,s,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r):this.gl.bindBufferBase(35982,e,s),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}class hTe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}setupResources(e){for(const t of this.bindings)this._setupTransformFeedback(t,e)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyings:t}=this;return t.length>0&&(e=Object.assign({},e,{varyings:t})),e}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.bindings[this.currentIndex],{sourceBuffers:i,transformFeedback:r}=t;return{attributes:Object.assign({},i,e.attributes),transformFeedback:r}}swap(){return!!this.feedbackMap&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupBuffers(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getBuffer(e){const{feedbackBuffers:t}=this.bindings[this.currentIndex],i=e?t[e]:null;return i?i instanceof Pt?i:i.buffer:null}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{varyingName:t}=e,i=this.getBuffer(t);return i?i.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&ee($e(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:t={}}=e,i={};if(this.bindings[this.currentIndex]&&Object.assign(i,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const r in this.feedbackMap)r in t&&(i[this.feedbackMap[r]]=r);Object.assign(i,e.feedbackBuffers);for(const r in i){const s=i[r];if("string"==typeof s){const o=t[s],{byteLength:a,usage:c,accessor:l}=o;i[r]=this._createNewBuffer(r,{byteLength:a,usage:c,accessor:l})}}return i}_setupBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const i=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:t,feedbackBuffers:i})}_setupTransformFeedback(e,t){let{model:i}=t;const{program:r}=i;e.transformFeedback=new l8(this.gl,{program:r,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:t,feedbackBuffers:i}=this._swapBuffers(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceBuffers:t,feedbackBuffers:i})}}_updateBinding(e,t){return e?(Object.assign(e.sourceBuffers,t.sourceBuffers),Object.assign(e.feedbackBuffers,t.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},t.sourceBuffers),feedbackBuffers:Object.assign({},t.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const t=Object.assign({},e.sourceBuffers),i=Object.assign({},e.feedbackBuffers);for(const r in this.feedbackMap){const s=this.feedbackMap[r];t[r]=e.feedbackBuffers[s],i[s]=e.sourceBuffers[r],ee(i[s]instanceof Pt)}return{sourceBuffers:t,feedbackBuffers:i}}_createNewBuffer(e,t){const i=new Pt(this.gl,t);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=i,i}_getNextIndex(){return(this.currentIndex+1)%2}}function u8(n){let e=100;const t=n.match(/[^\s]+/g);if(t.length>=2&&"#version"===t[0]){const i=parseInt(t[1],10);Number.isFinite(i)&&(e=i)}return e}const fTe={name:"transform",vs:"attribute float transform_elementID;\nvec2 transform_getPixelSizeHalf(vec2 size) {\n  return vec2(1.) / (2. * size);\n}\n\nvec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {\n  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);\n  float xIndex = transform_elementID - (yIndex * texSize[0]);\n  return vec2(xIndex, yIndex);\n}\nvec2 transform_getTexCoord(vec2 size) {\n  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);\n  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);\n  vec2 coord = indices / size + pixelSizeHalf;\n  return coord;\n}\nvec2 transform_getPos(vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);\n  return pos;\n}\nvec4 transform_getInput(sampler2D texSampler, vec2 size) {\n  vec2 texCoord = transform_getTexCoord(size);\n  vec4 textureColor = texture2D(texSampler, texCoord);\n  return textureColor;\n}\n",fs:null},Tb="transform_uSize_",d8="transform_position";const ETe={10241:9728,10240:9728,10242:33071,10243:33071};class CTe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(t),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._processVertexShader(e);return Object.assign({},e,t)}getDrawOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,sourceTextures:i,framebuffer:r,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},t,e.attributes),a=Object.assign({},e.uniforms),c=Object.assign({},e.parameters);let l=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const d in this.samplerTextureMap)a[d]=i[this.samplerTextureMap[d]];this._setSourceTextureParameters();const u=function mTe(n){let{sourceTextureMap:e,targetTextureVarying:t,targetTexture:i}=n;const r={};let s,o;t&&(({width:s,height:o}=i),r["".concat(Tb).concat(t)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),r["".concat(Tb).concat(a)]=[s,o];return r}({sourceTextureMap:i,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(l=!1,c.viewport=[0,0,r.width,r.height]),{attributes:o,framebuffer:r,uniforms:a,discard:l,parameters:c}}swap(){return!!this._swapTexture&&(this.currentIndex=this._getNextIndex(),!0)}update(){this._setupTextures(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{framebuffer:t}=this.bindings[this.currentIndex],i=ob(t);if(!e)return i;const r=i.constructor,s=function uTe(n){switch(n){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Rr(!1),null}}(this.targetTextureType),o=new r(i.length*s/4);let a=0;for(let c=0;c<i.length;c+=4)for(let l=0;l<s;l++)o[a++]=i[c+l];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_targetTextureVarying:t,_swapTexture:i}=e;this._swapTexture=i,this.targetTextureVarying=t,this.hasTargetTexture=t,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:t,textureOrReference:i}=e;if(i instanceof _i)return i;const r=t[i];return r?(this._targetRefTexName=i,this._createNewTexture(r)):null}_setupTextures(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceBuffers:t,_sourceTextures:i={},_targetTexture:r}=e,s=this._createTargetTexture({sourceTextures:i,textureOrReference:r});this.hasSourceTextures=this.hasSourceTextures||i&&Object.keys(i).length>0,this._updateBindings({sourceBuffers:t,sourceTextures:i,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if("number"!=typeof e||this.elementCount>=e)return;const t=new Float32Array(e);t.forEach((i,r,s)=>{s[r]=r}),this.elementIDBuffer?this.elementIDBuffer.setData({data:t}):this.elementIDBuffer=new Pt(this.gl,{data:t,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:t,targetTexture:i}=this._swapTextures(this.bindings[this.currentIndex]),r=this._getNextIndex();this.bindings[r]=this._updateBinding(this.bindings[r],{sourceTextures:t,targetTexture:i})}}_updateBinding(e,t){const{sourceBuffers:i,sourceTextures:r,targetTexture:s}=t;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,r),Object.assign(e.sourceBuffers,i),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:c}=e;c?(c.update({attachments:{36064:s},resizeAttachments:!1}),c.resize({width:o,height:a})):e.framebuffer=new Pn(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:t}=this.bindings[e];for(const i in t)t[i].setParameters(ETe)}_swapTextures(e){if(!this._swapTexture)return null;const t=Object.assign({},e.sourceTextures);return t[this._swapTexture]=e.targetTexture,{sourceTextures:t,targetTexture:e.sourceTextures[this._swapTexture]}}_createNewTexture(e){const t=function Wbe(n,e){ee(n instanceof _i||n instanceof zbe||n instanceof Gbe);const t=n.constructor,{gl:i,width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:u}=n;return new t(i,Object.assign({width:r,height:s,format:o,type:a,dataFormat:c,border:l,mipmaps:u},e))}(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=t,t}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{sourceTextures:t,targetTexture:i}=this.bindings[this.currentIndex],{vs:r,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:c}=function gTe(n){let{vs:e,sourceTextureMap:t,targetTextureVarying:i,targetTexture:r}=n,o=Object.keys(t).length,a=null;const c={};let l=e,u={};if(o>0||i){const d=l.split("\n"),h=d.slice();if(d.forEach((f,p,g)=>{if(o>0){const m=function bTe(n,e){const t={},i=function _Te(n){return a8(n,["attribute","in"])}(n);if(!i)return null;const{type:r,name:s}=i;if(s&&e[s]){const o="// ".concat(n," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:c,uniformDeclerations:l}=function yTe(n){const e="".concat("transform_uSampler_").concat(n),t="".concat(Tb).concat(n);return{samplerName:e,sizeName:t,uniformDeclerations:"  uniform sampler2D ".concat(e,";\n  uniform vec2 ").concat(t,";")}}(s),u=function lTe(n){switch(n){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Rr(!1),null}}(r),d="  ".concat(r," ").concat(s," = transform_getInput(").concat(a,", ").concat(c,").").concat(u,";\n");return t[a]=s,{updatedLine:o,inject:{"vs:#decl":l,"vs:#main-start":d},samplerTextureMap:t}}return null}(f,t);if(m){const{updatedLine:y,inject:v}=m;h[p]=y,u=ix([u,v]),Object.assign(c,m.samplerTextureMap),o--}}i&&!a&&(a=function vTe(n,e){const t=a8(n,["varying","out"]);return t&&t.name===e?t.type:null}(f,i))}),i){ee(r);const f="".concat(Tb).concat(i),p="uniform vec2 ".concat(f,";\n"),g="     vec2 ".concat(d8," = transform_getPos(").concat(f,");\n     gl_Position = vec4(").concat(d8,", 0, 1.);\n");u=ix([u,{"vs:#decl":p,"vs:#main-start":g}])}l=h.join("\n")}return{vs:l,targetTextureType:a,inject:u,samplerTextureMap:c}}({vs:e.vs,sourceTextureMap:t,targetTextureVarying:this.targetTextureVarying,targetTexture:i}),l=ix([e.inject||{},a]);return this.targetTextureType=o,this.samplerTextureMap=c,{vs:r,fs:e._fs||c8({version:u8(r),input:this.targetTextureVarying,inputType:o,output:"transform_output"}),modules:this.hasSourceTextures||this.targetTextureVarying?[fTe].concat(e.modules||[]):e.modules,uniforms:s,inject:l}}}let Sb=null;class Nr extends ta{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return!(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).constantAttributeZero||$e(e)||"Chrome"===O4()}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new Nr(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return Nr.MAX_ATTRIBUTES=Nr.MAX_ATTRIBUTES||e.getParameter(34921),Nr.MAX_ATTRIBUTES}static setConstant(e,t,i){switch(i.constructor){case Float32Array:Nr._setConstantFloatArray(e,t,i);break;case Int32Array:Nr._setConstantIntArray(e,t,i);break;case Uint32Array:Nr._setConstantUintArray(e,t,i);break;default:ee(!1)}}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,Object.assign({},t,{id:t.id||t.program&&t.program.id})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=t.isDefaultArray||!1,this.gl2=e,this.initialize(t),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Nr.getMaxAttributes(this.gl)}initialize(){return this.setProps(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return ee(!e||34963===e.target,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,t,i){if(34963===t.target)return this.setElementBuffer(t,i);const{size:r,type:s,stride:o,offset:a,normalized:c,integer:l,divisor:u}=i,{gl:d,gl2:h}=this;return e=Number(e),this.bind(()=>{d.bindBuffer(34962,t.handle),l?(ee($e(d)),h.vertexAttribIPointer(e,r,s,o,a)):d.vertexAttribPointer(e,r,s,c,o,a),d.enableVertexAttribArray(e),h.vertexAttribDivisor(e,u||0)}),this}enable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!t&&0===e&&!Nr.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>t?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,t){const i=this._normalizeConstantArrayValue(t),r=i.byteLength*e,s=i.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Pt(this.gl,r),o=o||this.buffer.reallocate(r),o=o||!this._compareConstantArrayValues(i,this.bufferValue),o){const a=function TTe(n,e){const t=function ATe(n){return(!Sb||Sb.byteLength<n)&&(Sb=new ArrayBuffer(n)),Sb}(n.BYTES_PER_ELEMENT*e);return new n(t,0,e)}(t.constructor,s);(function STe(n){let{target:e,source:t,start:i=0,count:r=1}=n;const s=t.length,o=r*s;let a=0;for(let c=i;a<s;a++)e[c++]=t[a];for(;a<o;)a<o-a?(e.copyWithin(i+a,i,i+a),a*=2):(e.copyWithin(i+a,i,i+o-a),a=o)})({target:a,source:i,start:0,count:s}),this.buffer.subData(a),this.bufferValue=t}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static _setConstantFloatArray(e,t,i){switch(i.length){case 1:e.vertexAttrib1fv(t,i);break;case 2:e.vertexAttrib2fv(t,i);break;case 3:e.vertexAttrib3fv(t,i);break;case 4:e.vertexAttrib4fv(t,i);break;default:ee(!1)}}static _setConstantIntArray(e,t,i){switch(ee($e(e)),i.length){case 1:e.vertexAttribI1iv(t,i);break;case 2:e.vertexAttribI2iv(t,i);break;case 3:e.vertexAttribI3iv(t,i);break;case 4:e.vertexAttribI4iv(t,i);break;default:ee(!1)}}static _setConstantUintArray(e,t,i){switch(ee($e(e)),i.length){case 1:e.vertexAttribI1uiv(t,i);break;case 2:e.vertexAttribI2uiv(t,i);break;case 3:e.vertexAttribI3uiv(t,i);break;case 4:e.vertexAttribI4uiv(t,i);break;default:ee(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,t){let{location:i}=t;return ee(Number.isFinite(i)),this.bind(()=>34373===e?this.gl.getVertexAttribOffset(i,e):this.gl.getVertexAttrib(i,e))}}const ITe=/^(.+)__LOCATION_([0-9]+)$/,DTe=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class RTe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.id=t.id||t.program&&t.program.id,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Nr(e),Kz(this,"VertexArray","v6.0",DTe),this.initialize(t),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const t in e)this._setAttribute(t,e[t]);this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,t),this}setBuffer(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,i);const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,t.accessor,i);return r>=0&&(this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(r,t,s)),this}setConstant(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{location:r,accessor:s}=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},i));return r>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t),this.values[r]=t,this.accessors[r]=s,this.clearDrawParams(),this.vertexArrayObject.enable(r,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Pt(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Pt&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const t=this.values[e];t instanceof Pt&&this.setBuffer(e,t)}}),this}bindForDraw(e,t,i){let r;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,t),r=i()}),r}_resolveLocationAndAccessor(e,t,i,r){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=t,ae.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const c=this._getAttributeInfo(a||o);if(!c)return s;const u=fr.resolve(c.accessor,this.accessors[o]||{},i,r),{size:d,type:h}=u;return ee(Number.isFinite(d)&&Number.isFinite(h)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const t=Number(e);if(Number.isFinite(t))return{location:t};const i=ITe.exec(e),r=i?i[1]:e,s=i?Number(i[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+s,name:r}:{location:-1}}_setAttribute(e,t){if(t instanceof Pt)this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof Pt)this.setBuffer(e,t[0],t[1]);else if(ArrayBuffer.isView(t)||Array.isArray(t))this.setConstant(e,t);else{if(!(t.buffer instanceof Pt))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");this.setBuffer(e,t.buffer,t)}}_setConstantAttributes(e,t){const i=Math.max(0|e,0|t);let r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,i);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)r=this.values[s],ArrayBuffer.isView(r)&&this._setConstantAttribute(s,r)}_setConstantAttributeZero(e,t){if(Nr.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,e);const i=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,i,this.accessors[0])}_setConstantAttribute(e,t){Nr.setConstant(this.gl,e,t)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,t){const i=this.values[t],r=this.accessors[t];if(!i)return;const{divisor:s}=r,o=s>0;if(e.isInstanced=e.isInstanced||o,i instanceof Pt){const a=i;if(o){const c=a.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,c)}else{const c=a.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,c)}}}setElements(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ae.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}function ag(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{isInteger:i=!1}=e;if(Array.isArray(n)||ArrayBuffer.isView(n))return function OTe(n,e){const{maxElts:t=16,size:i=1}=e;let r="[";for(let o=0;o<n.length&&o<t;++o)o>0&&(r+=",".concat(o%i==0?" ":"")),r+=ag(n[o],e);const s=n.length>t?"...":"]";return"".concat(r).concat(s)}(n,e);if(!Number.isFinite(n))return String(n);if(Math.abs(n)<1e-16)return i?"0":"0.";if(i||Math.abs(n)>100&&Math.abs(n)<1e4)return n.toFixed(0);const r=n.toPrecision(2);return r.indexOf(".0")===r.length-2?r.slice(0,-1):r}function h8(n,e,t,i){const{gl:r}=n;if(!e)return{[i]:"null","Format ":"N/A"};let l,u,d,s="NOT PROVIDED",o=1,a=0,c=0;if(t&&(s=t.type,o=t.size,s=String(s).replace("Array",""),l=-1!==s.indexOf("nt")),e instanceof Pt){const h=e,{data:f,changed:p}=h.getDebugData();let g;return u=p?"*":"",d=f,c=h.byteLength,a=c/f.BYTES_PER_ELEMENT/o,t?g="".concat(t.divisor>0?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(c," bytes ").concat(oc(r,s),")"):(l=!0,g="".concat(c," bytes")),{[i]:"".concat(u).concat(ag(d,{size:o,isInteger:l})),"Format ":g}}return d=e,o=e.length,s=String(e.constructor.name).replace("Array",""),l=-1!==s.indexOf("nt"),{[i]:"".concat(ag(d,{size:o,isInteger:l})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function NTe(n,e){const{type:t,size:i}=e,r=CG(t,i);return r?"".concat(n," (").concat(r.name,")"):n}function f8(n){let{header:e="Uniforms",program:t,uniforms:i,undefinedOnly:r=!1}=n;ee(t);const o=".*Matrix",c={},l=Object.keys(t._uniformSetters).sort();let u=0;for(const f of l)!f.match(".*_.*")&&!f.match(o)&&NM({table:c,header:e,uniforms:i,uniformName:f,undefinedOnly:r})&&u++;for(const f of l)f.match(o)&&NM({table:c,header:e,uniforms:i,uniformName:f,undefinedOnly:r})&&u++;for(const f of l)c[f]||NM({table:c,header:e,uniforms:i,uniformName:f,undefinedOnly:r})&&u++;let d=0;const h={};if(!r)for(const f in i){const p=i[f];c[f]||(d++,h[f]={Type:"NOT USED: ".concat(p),[e]:ag(p)})}return{table:c,count:u,unusedTable:h,unusedCount:d}}function NM(n){let{table:e,header:t,uniforms:i,uniformName:r,undefinedOnly:s}=n;const o=i[r],a=function FTe(n){return null!=n}(o);return!(s&&a||(e[r]={[t]:a?ag(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},0))}function p8(n){const{type:e,size:t}=n.accessor,i=CG(e,t);return i?"".concat(i.name," ").concat(n.name):n.name}const LTe={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function VTe(n,e){const{attributeMap:t=LTe}=e||{};return t&&t[n]||n}function UTe(n,e){let t;switch(n){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":t="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":t="vectors"}switch(t){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2}ee(Number.isFinite(e.size),"attribute ".concat(n," needs size"))}const g8=()=>{},zTe={};class Xd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{id:i=hr("model")}=t;ee(rb(e)),this.id=i,this.gl=e,this.id=t.id||hr("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(t)}initialize(e){this.props={},this.programManager=e.programManager||tg.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:t=null,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=void 0!==e.drawMode?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},ee(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),"Model needs drawMode and vertexCount")}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=e;this.programProps={program:t,vs:i,fs:r,modules:s,defines:o,inject:a,varyings:c,bufferMode:l,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return ee(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return ee(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=function BTe(n,e,t){const i={};let r=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=VTe(s,t);if("indices"===s)r=o;else if(o.constant)i[a]=o.value;else{const c=o.value,l={...o};delete l.value,i[a]=[new Pt(n,c),l],UTe(s,l)}}if(r){const s=r.value||r;ee(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:void 0===r.isIndexed||r.isIndexed};i.indices=[new Pt(n,{data:s,target:34963}),o]}return i}(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ld(e))return this;const t={};for(const i in e){const r=e[i];t[i]=r.getValue?r.getValue():r}return this.vertexArray.setAttributes(t),this}setUniforms(){return Object.assign(this.uniforms,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this}getModuleUniforms(e){this._checkProgram();const t=this.programManager.getUniforms(this.program);return t?t(e):{}}updateModuleSettings(e){const t=this.getModuleUniforms(e||{});return this.setUniforms(t)}clear(e){return yx(this.program.gl,e),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();const{moduleSettings:t=null,framebuffer:i,uniforms:r={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:c=this.vertexArray}=e;let l;this.setAttributes(s),this.updateModuleSettings(t),this.setUniforms(r),ae.priority>=2&&(l=this._logDrawCallStart(2));const u=this.vertexArray.getDrawParams(),{isIndexed:d=u.isIndexed,indexType:h=u.indexType,indexOffset:f=u.indexOffset,vertexArrayInstanced:p=u.isInstanced}=this.props;p&&!this.isInstanced&&ae.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:g,instanceCount:m}=this,{onBeforeRender:y=g8,onAfterRender:v=g8}=this.props;y(),this.program.setUniforms(this.uniforms);const _=this.program.draw(Object.assign(zTe,e,{logPriority:l,uniforms:null,framebuffer:i,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:c,transformFeedback:o,isIndexed:d,indexType:h,isInstanced:g,instanceCount:m,offset:d?f:0}));return v(),ae.priority>=2&&this._logDrawCallEnd(l,c,i),_}transform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{discard:t=!0,feedbackBuffers:i,unbindModels:r=[]}=e;let{parameters:s}=e;i&&this._setFeedbackBuffers(i),t&&(s=Object.assign({},s,{35977:t})),r.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{r.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ae.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!this._programDirty&&this.programManager.stateHash===this._programManagerState)return;let{program:t}=this.programProps;if(t)this._managedProgram=!1;else{const{vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}=this.programProps;t=this.programManager.get({vs:i,fs:r,modules:s,inject:o,defines:a,varyings:c,bufferMode:l,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}ee(t instanceof TG,"Model needs a program"),this._programDirty=!1,t!==this.program&&(this.program=t,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new RTe(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const t=this.geometryBuffers[e][0]||this.geometryBuffers[e];t instanceof Pt&&t.delete()}}_setAnimationProps(e){this.animated&&ee(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ld(e))return this;const{gl:t}=this.program;return this.transformFeedback=this.transformFeedback||new l8(t,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const t=e>3?0:1e4;if(!(Date.now()-this.lastLogTime<t))return this.lastLogTime=Date.now(),ae.group(2,">>> DRAWING MODEL ".concat(this.id),{collapsed:ae.level<=2})(),e}_logDrawCallEnd(e,t,i,r){if(void 0===e)return;const s=function PTe(n){let{vertexArray:e,header:t="Attributes"}=n;if(!e.configuration)return{};const i={};e.elements&&(i.ELEMENT_ARRAY_BUFFER=h8(e,e.elements,null,t));const r=e.values;for(const s in r){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const c=e.accessors[o.location];c&&(a="".concat(s,": ").concat(NTe(o.name,c))),i[a]=h8(e,r[s],c,t)}}return i}({vertexArray:t,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:c}=f8({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),{table:l,count:u}=f8({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0});u>0&&ae.log("MISSING UNIFORMS",Object.keys(l))(),c>0&&ae.log("UNUSED UNIFORMS",Object.keys(a))();const d=function kTe(n){const e={},t="Accessors for ".concat(n.id);for(const i of n.attributeInfos)if(i){const r=p8(i);e["in ".concat(r)]={[t]:JSON.stringify(i.accessor)}}for(const i of n.varyingInfos)if(i){const r=p8(i);e["out ".concat(r)]={[t]:JSON.stringify(i.accessor)}}return e}(this.vertexArray.configuration);ae.table(e,s)(),ae.table(e,o)(),ae.table(e+1,d)(),r&&r.log({logLevel:2,message:"Rendered to ".concat(r.id)}),ae.groupEnd(2)()}}class FM{static isSupported(e){return $e(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(t),Object.seal(this)}delete(){const{model:e,bufferTransform:t,textureTransform:i}=this;e&&e.delete(),t&&t.delete(),i&&i.delete()}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{clearRenderTarget:t=!0}=e,i=this._updateDrawOptions(e);t&&i.framebuffer&&i.framebuffer.clear({color:!0}),this.model.transform(i)}swap(){let e=!1;const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)e=e||i.swap();ee(e,"Nothing to swap")}getBuffer(){return this.bufferTransform&&this.bufferTransform.getBuffer(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)}getData(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t){const r=i.getData(e);if(r)return r}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const t=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of t)i.update(e)}_initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gl:t}=this;this._buildResourceTransforms(t,e),e=this._updateModelProps(e),this.model=new Xd(t,Object.assign({},e,{fs:e.fs||c8({version:u8(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=r.updateModelProps(t);return t}_buildResourceTransforms(e,t){(function GTe(n){return!(Ld(n.feedbackBuffers)&&Ld(n.feedbackMap)&&!(n.varyings&&n.varyings.length>0))})(t)&&(this.bufferTransform=new hTe(e,t)),function WTe(n){return!(Ld(n._sourceTextures)&&!n._targetTexture&&!n._targetTextureVarying)}(t)&&(this.textureTransform=new CTe(e,t)),ee(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let t=Object.assign({},e);const i=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of i)t=Object.assign(t,r.getDrawOptions(t));return t}}const QTe={interpolation:class $Te{constructor({gl:e,attribute:t,timeline:i}){E(this,"gl",void 0),E(this,"type","interpolation"),E(this,"attributeInTransition",void 0),E(this,"settings",void 0),E(this,"attribute",void 0),E(this,"transition",void 0),E(this,"currentStartIndices",void 0),E(this,"currentLength",void 0),E(this,"transform",void 0),E(this,"buffers",void 0),this.gl=e,this.transition=new Gp(i),this.attribute=t,this.attributeInTransition=new PM(e,t.settings),this.currentStartIndices=t.startIndices,this.currentLength=0,this.transform=function XTe(n,e){const t=i8(e.size);return new FM(n,{vs:"\n#define SHADER_NAME interpolation-transition-vertex-shader\n\nuniform float time;\nattribute ATTRIBUTE_TYPE aFrom;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vCurrent;\n\nvoid main(void) {\n  vCurrent = mix(aFrom, aTo, time);\n  gl_Position = vec4(0.0);\n}\n",defines:{ATTRIBUTE_TYPE:t},varyings:["vCurrent"]})}(e,t);const r={byteLength:0,usage:35050};this.buffers=[new Pt(e,r),new Pt(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){if(e.duration<=0)return void this.transition.cancel();this.settings=e;const{buffers:r,attribute:s}=this;r8(r);const o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)s8({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=OM(s,t),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:r[0],aTo:n8(0,s)},feedbackBuffers:{vCurrent:r[1]}})}update(){const e=this.transition.update();if(e){const{duration:t,easing:i}=this.settings,{time:r}=this.transition;let s=r/t;i&&(s=i(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}},spring:class YTe{constructor({gl:e,attribute:t,timeline:i}){E(this,"gl",void 0),E(this,"type","spring"),E(this,"attributeInTransition",void 0),E(this,"settings",void 0),E(this,"attribute",void 0),E(this,"transition",void 0),E(this,"currentStartIndices",void 0),E(this,"currentLength",void 0),E(this,"texture",void 0),E(this,"framebuffer",void 0),E(this,"transform",void 0),E(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new Gp(i),this.attribute=t,this.attributeInTransition=new PM(e,{...t.settings,normalized:!1}),this.currentStartIndices=t.startIndices,this.currentLength=0,this.texture=function JTe(n){return new _i(n,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}(e),this.framebuffer=function ZTe(n,e){return new Pn(n,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}(e,this.texture),this.transform=function KTe(n,e,t){const i=i8(e.size);return new FM(n,{framebuffer:t,vs:"\n#define SHADER_NAME spring-transition-vertex-shader\n\n#define EPSILON 0.00001\n\nuniform float stiffness;\nuniform float damping;\nattribute ATTRIBUTE_TYPE aPrev;\nattribute ATTRIBUTE_TYPE aCur;\nattribute ATTRIBUTE_TYPE aTo;\nvarying ATTRIBUTE_TYPE vNext;\nvarying float vIsTransitioningFlag;\n\nATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {\n  ATTRIBUTE_TYPE velocity = cur - prev;\n  ATTRIBUTE_TYPE delta = dest - cur;\n  ATTRIBUTE_TYPE spring = delta * stiffness;\n  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;\n  return spring + damper + velocity + cur;\n}\n\nvoid main(void) {\n  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;\n  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;\n\n  vNext = getNextValue(aCur, aPrev, aTo);\n  gl_Position = vec4(0, 0, 0, 1);\n  gl_PointSize = 100.0;\n}\n",fs:"\n#define SHADER_NAME spring-transition-is-transitioning-fragment-shader\n\nvarying float vIsTransitioningFlag;\n\nvoid main(void) {\n  if (vIsTransitioningFlag == 0.0) {\n    discard;\n  }\n  gl_FragColor = vec4(1.0);\n}",defines:{ATTRIBUTE_TYPE:i},varyings:["vNext"]})}(e,t,this.framebuffer);const r={byteLength:0,usage:35050};this.buffers=[new Pt(e,r),new Pt(e,r),new Pt(e,r)]}get inProgress(){return this.transition.inProgress}start(e,t){const{buffers:r,attribute:s}=this,o={numInstances:t,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of r)s8({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=OM(s,t),this.attributeInTransition.setData({buffer:r[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:n8(0,s)}})}update(){const{buffers:e,transform:t,framebuffer:i,transition:r}=this;if(!r.update())return!1;const o=this.settings;return t.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),t.run({framebuffer:i,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),r8(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),ob(i)[0]>0||r.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}};class eSe{constructor(e,{id:t,timeline:i}){E(this,"id",void 0),E(this,"isSupported",void 0),E(this,"gl",void 0),E(this,"timeline",void 0),E(this,"transitions",void 0),E(this,"needsRedraw",void 0),E(this,"numInstances",void 0),this.id=t,this.gl=e,this.timeline=i,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=FM.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:t,numInstances:i}){this.numInstances=i||1;for(const r in e){const s=e[r],o=s.getTransitionSetting(t);o&&this._updateAttribute(r,s,o)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(t))&&this._removeTransition(r)}}hasAttribute(e){const t=this.transitions[e];return t&&t.inProgress}getAttributes(){const e={};for(const t in this.transitions){const i=this.transitions[t];i.inProgress&&(e[t]=i.attributeInTransition)}return e}run(){if(!this.isSupported||0===this.numInstances)return!1;for(const t in this.transitions)this.transitions[t].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,t,i){const r=this.transitions[e];let s=!r||r.type!==i.type;if(s){if(!this.isSupported)return void Ze.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();r&&this._removeTransition(e);const o=QTe[i.type];o?this.transitions[e]=new o({attribute:t,timeline:this.timeline,gl:this.gl}):(Ze.error("unsupported transition type '".concat(i.type,"'"))(),s=!1)}(s||t.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(i,this.numInstances))}}const m8="attributeManager.invalidate";class oSe{constructor(e,{id:t="attribute-manager",stats:i,timeline:r}={}){E(this,"id",void 0),E(this,"gl",void 0),E(this,"attributes",void 0),E(this,"updateTriggers",void 0),E(this,"needsRedraw",void 0),E(this,"userData",void 0),E(this,"stats",void 0),E(this,"attributeTransitionManager",void 0),this.id=t,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=i,this.attributeTransitionManager=new eSe(e,{id:"".concat(t,"-transitions"),timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const t=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,t&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const t of e)void 0!==this.attributes[t]&&(this.attributes[t].delete(),delete this.attributes[t])}invalidate(e,t){const i=this._invalidateTrigger(e,t);Ni(m8,this,e,i)}invalidateAll(e){for(const t in this.attributes)this.attributes[t].setNeedsUpdate(t,e);Ni(m8,this,"all")}update({data:e,numInstances:t,startIndices:i=null,transitions:r,props:s={},buffers:o={},context:a={}}){let c=!1;Ni("attributeManager.updateStart",this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const l in this.attributes){const u=this.attributes[l],d=u.settings.accessor;u.startIndices=i,u.numInstances=t,s[l]&&Ze.removed("props.".concat(l),"data.attributes.".concat(l))(),u.setExternalBuffer(o[l])||u.setBinaryValue("string"==typeof d?o[d]:void 0,e.startIndices)||"string"==typeof d&&!o[d]&&u.setConstantValue(s[d])||u.needsUpdate()&&(c=!0,this._updateAttribute({attribute:u,numInstances:t,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}c&&Ni("attributeManager.updateEnd",this,t),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:t,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,t=e.run();return this.needsRedraw=this.needsRedraw||t,t}getAttributes(){return this.attributes}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:t,attributeTransitionManager:i}=this,r={...i.getAttributes()};for(const s in t){const o=t[s];o.needsRedraw(e)&&!i.hasAttribute(s)&&(r[s]=o)}return r}getShaderAttributes(e,t={}){e||(e=this.getAttributes());const i={};for(const r in e)t[r]||Object.assign(i,e[r].getShaderAttributes());return i}_add(e,t={}){for(const i in e)this.attributes[i]=this._createAttribute(i,e[i],t);this._mapUpdateTriggersToAttributes()}_createAttribute(e,t,i){const r={...t,id:e,size:(t.isIndexed?1:t.size)||1,divisor:i.instanced?1:t.divisor||0};return new PM(this.gl,r)}_mapUpdateTriggersToAttributes(){const e={};for(const t in this.attributes)this.attributes[t].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(t)});this.updateTriggers=e}_invalidateTrigger(e,t){const{attributes:i,updateTriggers:r}=this,s=r[e];return s&&s.forEach(o=>{const a=i[o];a&&a.setNeedsUpdate(a.id,t)}),s}_updateAttribute(e){const{attribute:t,numInstances:i}=e;Ni("attribute.updateStart",t),t.constant?t.setConstantValue(t.value):(t.allocate(i)&&Ni("attribute.allocate",t,i),t.updateBuffer(e)&&(this.needsRedraw=!0,Ni("attribute.updateEnd",t,i)))}}function y8(n,e,t,i,r){const s=e-n;return(t-e)*r+-s*i+s+e}function v8(n,e){if(Array.isArray(n)){let t=0;for(let i=0;i<n.length;i++){const r=n[i]-e[i];t+=r*r}return Math.sqrt(t)}return Math.abs(n-e)}const uSe={interpolation:class aSe extends Gp{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:t,toValue:i,duration:r,easing:s}}=this,o=s(e/r);this._value=ev(t,i,o)}},spring:class lSe extends Gp{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:t,damping:i,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=function cSe(n,e,t,i,r){if(Array.isArray(t)){const s=[];for(let o=0;o<t.length;o++)s[o]=y8(n[o],e[o],t[o],i,r);return s}return y8(n,e,t,i,r)}(s,o,t,i,r);const c=v8(a,t),l=v8(a,o);c<1e-5&&l<1e-5&&(a=t,this.end()),this._prevValue=o,this._currValue=a}}};class dSe{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,t,i,r){const{transitions:s}=this;if(s.has(e)){const c=s.get(e),{value:l=c.settings.fromValue}=c;t=l,this.remove(e)}if(!(r=t8(r)))return;const o=uSe[r.type];if(!o)return void Ze.error("unsupported transition type '".concat(r.type,"'"))();const a=new o(this.timeline);a.start({...r,fromValue:t,toValue:i}),s.set(e,a)}remove(e){const{transitions:t}=this;t.has(e)&&(t.get(e).cancel(),t.delete(e))}update(){const e={};for(const[t,i]of this.transitions)i.update(),e[t]=i.value,i.inProgress||this.remove(t);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function pSe(n,e){if(!n.transitions)return!1;const t={},i=LM(n);let r=!1;for(const s in n.transitions){const o=i[s],a=o&&o.type;("number"===a||"color"===a||"array"===a)&&kM(n[s],e[s],o)&&(t[s]=!0,r=!0)}return!!r&&t}function b8({newProps:n,oldProps:e,ignoreProps:t={},propTypes:i={},triggerName:r="props"}){if(e===n)return!1;if("object"!=typeof n||null===n||"object"!=typeof e||null===e)return"".concat(r," changed shallowly");for(const s of Object.keys(n))if(!(s in t)){if(!(s in e))return"".concat(r,".").concat(s," added");const o=kM(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in t)){if(!(s in n))return"".concat(r,".").concat(s," dropped");if(!Object.hasOwnProperty.call(n,s)){const o=kM(n[s],e[s],i[s]);if(o)return"".concat(r,".").concat(s," ").concat(o)}}return!1}function kM(n,e,t){let i=t&&t.equal;return i&&!i(n,e,t)||!i&&(i=n&&e&&n.equals,i&&!i.call(n,e))?"changed deeply":i||e===n?null:"changed shallowly"}function _Se(n,e){if(null===e)return!0;const t=e.extensions,{extensions:i}=n;if(i===t)return!1;if(!t||!i||i.length!==t.length)return!0;for(let r=0;r<i.length;r++)if(!i[r].equals(t[r]))return!0;return!1}function E8(n,e,t){let i=n.updateTriggers[t];i=i??{};let r=e.updateTriggers[t];return r=r??{},b8({oldProps:r,newProps:i,triggerName:t})}function LM(n){const e=n[hb],t=e&&e.constructor;return t?t._propTypes:{}}function CSe(n,e){if(!e)return n;const t={...n,...e};if("defines"in e&&(t.defines={...n.defines,...e.defines}),"modules"in e&&(t.modules=(n.modules||[]).concat(e.modules),e.modules.some(i=>"project64"===i.name))){const i=t.modules.findIndex(r=>"project32"===r.name);i>=0&&t.modules.splice(i,1)}if("inject"in e)if(n.inject){const i={...n.inject};for(const r in e.inject)i[r]=(i[r]||"")+e.inject[r];t.inject=i}else t.inject=e.inject;return t}function BM(n,e,t=!1){const i=e.projectPosition(n);if(t&&e instanceof dc){const[r,s,o=0]=n,a=e.getDistanceScales([r,s]);i[2]=o*a.unitsPerMeter[2]}return i}function w8(n,{viewport:e,modelMatrix:t,coordinateSystem:i,coordinateOrigin:r,offsetMode:s}){let[o,a,c=0]=n;switch(t&&([o,a,c]=Ep([],[o,a,c,1],t)),i){case it.LNGLAT:return BM([o,a,c],e,s);case it.LNGLAT_OFFSETS:return BM([o+r[0],a+r[1],c+(r[2]||0)],e,s);case it.METER_OFFSETS:return BM(rz(r,[o,a,c]),e,s);default:return e.isGeospatial?[o+r[0],a+r[1],c+r[2]]:e.projectPosition([o,a,c])}}const SSe={10241:9987,10240:9729,10242:33071,10243:33071},VM={},ISe={boolean:{validate:(n,e)=>!0,equal:(n,e,t)=>!!n==!!e},number:{validate:(n,e)=>Number.isFinite(n)&&(!("max"in e)||n<=e.max)&&(!("min"in e)||n>=e.min)},color:{validate:(n,e)=>e.optional&&!n||lg(n)&&(3===n.length||4===n.length),equal:(n,e,t)=>UM(n,e)},accessor:{validate(n,e){const t=xb(n);return"function"===t||t===xb(e.value)},equal:(n,e,t)=>"function"==typeof e||UM(n,e)},array:{validate:(n,e)=>e.optional&&!n||lg(n),equal:(n,e,t)=>t.compare?UM(n,e):n===e},object:{equal:(n,e,t)=>t.compare?Pd(n,e):n===e},function:{validate:(n,e)=>e.optional&&!n||"function"==typeof n,equal:(n,e,t)=>!t.compare||n===e},data:{transform:(n,e,t)=>{const{dataTransform:i}=t.props;return i&&n?i(n):n}},image:{transform:(n,e,t)=>function xSe(n,e){const t=n.context&&n.context.gl;if(!t||!e)return null;if(e instanceof _i)return e;e.constructor&&"Object"!==e.constructor.name&&(e={data:e});let i=null;e.compressed&&(i={10241:e.data.length>1?9985:9729});const r=new _i(t,{...e,parameters:{...SSe,...i,...n.props.textureParameters}});return VM[r.id]=!0,r}(t,n),release:n=>{!function MSe(n){!n||!(n instanceof _i)||VM[n.id]&&(n.delete(),delete VM[n.id])}(n)}}};function UM(n,e){if(n===e)return!0;if(!lg(n)||!lg(e))return!1;const t=n.length;if(t!==e.length)return!1;for(let i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function RSe(n,e){switch(xb(e)){case"object":return cg(n,e);case"array":return cg(n,{type:"array",value:e,compare:!1});case"boolean":return cg(n,{type:"boolean",value:e});case"number":return cg(n,{type:"number",value:e});case"function":return cg(n,{type:"function",value:e,compare:!0});default:return{name:n,type:"unknown",value:e}}}function cg(n,e){return"type"in e?{name:n,...ISe[e.type],...e}:"value"in e?{name:n,type:xb(e.value),...e}:{name:n,type:"object",value:e}}function lg(n){return Array.isArray(n)||ArrayBuffer.isView(n)}function xb(n){return lg(n)?"array":null===n?"null":typeof n}function C8(n){return Mb(n,"_mergedDefaultProps")||(function PSe(n){if(!n.prototype)return;const t=Object.getPrototypeOf(n),i=C8(t),s=function DSe(n){const e={},t={},i={};for(const[r,s]of Object.entries(n)){const o=s?.deprecatedFor;if(o)i[r]=Array.isArray(o)?o:[o];else{const a=RSe(r,s);e[r]=a,t[r]=a.value}}return{propTypes:e,defaultProps:t,deprecatedProps:i}}(Mb(n,"defaultProps")||{}),o=function NSe(n,e,t){const i=Object.create(null);Object.assign(i,e,n);const r=function BSe(n){const e=Mb(n,"layerName")||Mb(n,"componentName");return e||Ze.once(0,"".concat(n.name,".componentName not specified"))(),e||n.name}(t);return delete n.id,Object.defineProperties(i,{id:{writable:!0,value:r}}),i}(s.defaultProps,i,n),a={...t._propTypes,...s.propTypes};!function kSe(n,e){const t={},i={};for(const r in e){const s=e[r],{name:o,value:a}=s;s.async&&(t[o]=a,i[o]=LSe(o))}n[zd]=t,n[Ml]={},Object.defineProperties(n,i)}(o,a);const c={...t._deprecatedProps,...s.deprecatedProps};(function FSe(n,e){for(const t in e)Object.defineProperty(n,t,{enumerable:!1,set(i){const r="".concat(this.id,": ").concat(t);for(const s of e[t])A8(this,s)||(this[s]=i);Ze.deprecated(r,e[t].join("/"))()}})})(o,c),n._mergedDefaultProps=o,n._propTypes=a,n._deprecatedProps=c}(n),n._mergedDefaultProps)}function LSe(n){return{enumerable:!0,set(e){"string"==typeof e||e instanceof Promise||e8(e)?this[Ml][n]=e:this[cc][n]=e},get(){if(this[cc]){if(n in this[cc])return this[cc][n]||this[zd][n];if(n in this[Ml]){const e=this[hb]&&this[hb].internalState;if(e&&e.hasAsyncProp(n))return e.getAsyncProp(n)||this[zd][n]}}return this[zd][n]}}}function A8(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Mb(n,e){return A8(n,e)&&n[e]}let VSe=0;class jM{constructor(...e){E(this,"id",void 0),E(this,"props",void 0),E(this,"count",void 0),this.props=function OSe(n,e){const t=C8(n.constructor),i=Object.create(t);i[hb]=n,i[Ml]={},i[cc]={};for(let r=0;r<e.length;++r){const s=e[r];for(const o in s)i[o]=s[o]}return Object.freeze(i),i}(this,e),this.id=this.props.id,this.count=VSe++}clone(e){const{props:t}=this,i={};for(const r in t[zd])r in t[cc]?i[r]=t[cc][r]:r in t[Ml]&&(i[r]=t[Ml][r]);return new this.constructor({...t,...i,...e})}}E(jM,"componentName","Component"),E(jM,"defaultProps",{});const USe=Object.freeze({});class jSe{constructor(e){E(this,"component",void 0),E(this,"onAsyncPropUpdated",void 0),E(this,"asyncProps",void 0),E(this,"oldProps",void 0),E(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const t=this.asyncProps[e];t&&t.type&&t.type.release&&t.type.release(t.resolvedValue,t.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||USe}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const t=this.asyncProps[e];return t&&t.resolvedValue}isAsyncPropLoading(e){if(e){const t=this.asyncProps[e];return!!(t&&t.pendingLoadCount>0&&t.pendingLoadCount!==t.resolvedLoadCount)}for(const t in this.asyncProps)if(this.isAsyncPropLoading(t))return!0;return!1}reloadAsyncProp(e,t){this._watchPromise(e,Promise.resolve(t))}setAsyncProps(e){const t=e[cc]||{},i=e[Ml]||e,r=e[zd]||{};for(const s in t){const o=t[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o),t[s]=this.getAsyncProp(s)}for(const s in i){const o=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,o)}}_fetch(e,t){return null}_onResolve(e,t){}_onError(e,t){}_updateAsyncProp(e,t){if(this._didAsyncInputValueChange(e,t)){if("string"==typeof t&&(t=this._fetch(e,t)),t instanceof Promise)return void this._watchPromise(e,t);if(e8(t))return void this._resolveAsyncIterable(e,t);this._setPropValue(e,t)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,t){const i=this.asyncProps[e];return t!==i.resolvedValue&&t!==i.lastValue&&(i.lastValue=t,!0)}_setPropValue(e,t){this._freezeAsyncOldProps();const i=this.asyncProps[e];i&&(t=this._postProcessValue(i,t),i.resolvedValue=t,i.pendingLoadCount++,i.resolvedLoadCount=i.pendingLoadCount)}_setAsyncPropValue(e,t,i){const r=this.asyncProps[e];r&&i>=r.resolvedLoadCount&&void 0!==t&&(this._freezeAsyncOldProps(),r.resolvedValue=t,r.resolvedLoadCount=i,this.onAsyncPropUpdated(e,t))}_watchPromise(e,t){const i=this.asyncProps[e];if(i){i.pendingLoadCount++;const r=i.pendingLoadCount;t.then(s=>{s=this._postProcessValue(i,s),this._setAsyncPropValue(e,s,r),this._onResolve(e,s)}).catch(s=>{this._onError(e,s)})}}_resolveAsyncIterable(e,t){var i=this;return te(function*(){if("data"!==e)return void i._setPropValue(e,t);const r=i.asyncProps[e];if(!r)return;r.pendingLoadCount++;const s=r.pendingLoadCount;let o=[],a=0;var u,c=!1,l=!1;try{for(var h,d=Kx(t);c=!(h=yield d.next()).done;c=!1){const f=h.value;{const{dataTransform:p}=i.component.props;o=p?p(f,o):o.concat(f),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,i._setAsyncPropValue(e,o,s)}}}catch(f){l=!0,u=f}finally{try{c&&null!=d.return&&(yield d.return())}finally{if(l)throw u}}i._onResolve(e,o)})()}_postProcessValue(e,t){const i=e.type;return i&&(i.release&&i.release(e.resolvedValue,i,this.component),i.transform)?i.transform(t,i,this.component):t}_createAsyncPropData(e,t){if(!this.asyncProps[e]){const r=this.component&&this.component.constructor._propTypes;this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:t,pendingLoadCount:0,resolvedLoadCount:0}}}}class HSe extends jSe{constructor({attributeManager:e,layer:t}){super(t),E(this,"attributeManager",void 0),E(this,"needsRedraw",void 0),E(this,"needsUpdate",void 0),E(this,"subLayers",void 0),E(this,"usesPickingColorCache",void 0),E(this,"changeFlags",void 0),E(this,"viewport",void 0),E(this,"uniformTransitions",void 0),E(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(e){this.component=e}_fetch(e,t){const i=this.component.props.fetch;return i?i(t,{propName:e,layer:this.layer}):super._fetch(e,t)}_onResolve(e,t){const i=this.component.props.onDataLoad;"data"===e&&i&&i(t,{propName:e,layer:this.layer})}_onError(e,t){this.layer.raiseError(t,"loading ".concat(e," of ").concat(this.layer))}}const T8=2**24-1,XSe=Object.freeze([]),YSe=db(({oldViewport:n,viewport:e})=>n.equals(e));let bo=new Uint8ClampedArray(0);const KSe={data:{type:"data",value:XSe,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:n=>n&&n.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(n,{propName:e,layer:t,loaders:i,loadOptions:r,signal:s})=>{const{resourceManager:o}=t.context;var a;r=r||t.getLoadOptions(),i=i||t.props.loaders,s&&(r={...r,fetch:{...null===(a=r)||void 0===a?void 0:a.fetch,signal:s}});let c=o.contains(n);return!c&&!r&&(o.add({resourceId:n,data:ig(n,i),persistent:!1}),c=!0),c?o.subscribe({resourceId:n,onChange:l=>{var u;return null===(u=t.internalState)||void 0===u?void 0:u.reloadAsyncProp(e,l)},consumerId:t.id,requestId:e}):ig(n,i,r)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:it.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:n})=>[0,100*-n],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Dl extends jM{constructor(...e){super(...e),E(this,"internalState",null),E(this,"lifecycle","Awaiting state"),E(this,"context",void 0),E(this,"state",void 0),E(this,"parent",null)}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return"".concat(this.constructor.layerName||this.constructor.name,"({id: '").concat(this.props.id,"'})")}project(e){mi(this.internalState);const t=this.internalState.viewport||this.context.viewport,i=w8(e,{viewport:t,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,s,o]=oz(i,t.pixelProjectionMatrix);return 2===e.length?[r,s]:[r,s,o]}unproject(e){return mi(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,t){return mi(this.internalState),function TSe(n,e){const{viewport:t,coordinateSystem:i,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=function ASe(n){const{viewport:e,modelMatrix:t,coordinateOrigin:i}=n;let{coordinateSystem:r,fromCoordinateSystem:s,fromCoordinateOrigin:o}=n;return r===it.DEFAULT&&(r=e.isGeospatial?it.LNGLAT:it.CARTESIAN),void 0===s&&(s=r),void 0===o&&(o=i),{viewport:e,coordinateSystem:r,coordinateOrigin:i,modelMatrix:t,fromCoordinateSystem:s,fromCoordinateOrigin:o}}(e),{geospatialOrigin:c,shaderCoordinateOrigin:l,offsetMode:u}=PG(t,i,r),d=w8(n,{viewport:t,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:u});u&&function hhe(n,e,t){n[0]=e[0]-t[0],n[1]=e[1]-t[1],n[2]=e[2]-t[2]}(d,d,t.projectPosition(c||l));return d}(e,{viewport:this.internalState.viewport||this.context.viewport,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...t})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return!!this.internalState&&!this.internalState.isAsyncPropLoading()}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const t of this.getModels())t.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===it.DEFAULT||e===it.LNGLAT||e===it.CARTESIAN}onHover(e,t){return this.props.onHover&&this.props.onHover(e,t)||!1}onClick(e,t){return this.props.onClick&&this.props.onClick(e,t)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,t=[]){return t[0]=e+1&255,t[1]=e+1>>8&255,t[2]=e+1>>8>>8&255,t}decodePickingColor(e){mi(e instanceof Uint8Array);const[t,i,r]=e;return t+256*i+65536*r-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&void 0!==this.state.numInstances?this.state.numInstances:function bSe(n){if(!function wSe(n){return null!==n&&"object"==typeof n}(n))throw new Error("count(): argument not an object");if("function"==typeof n.count)return n.count();if(Number.isFinite(n.size))return n.size;if(Number.isFinite(n.length))return n.length;if(function ESe(n){return null!==n&&"object"==typeof n&&n.constructor===Object}(n))return Object.keys(n).length;throw new Error("count(): argument not a container")}(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;const t=this.getAttributeManager();if(!t)return null;const{positions:i,instancePositions:r}=t.attributes;return null===(e=i||r)||void 0===e?void 0:e.getBounds()}getShaders(e){for(const t of this.props.extensions)e=CSe(e,t.getShaders.call(this,t));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const t=this.getAttributeManager(),{dataChanged:i}=e.changeFlags;if(i&&t)if(Array.isArray(i))for(const c of i)t.invalidateAll(c);else t.invalidateAll();const{props:r,oldProps:s}=e,o=Number.isInteger(s.highlightedObjectIndex)||s.pickable,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable;if(o!==a&&t){const{pickingColors:c,instancePickingColors:l}=t.attributes,u=c||l;u&&(a&&u.constant&&(u.constant=!1,t.invalidate(u.id)),!u.value&&!a&&(u.constant=!0,u.value=[0,0,0]))}}finalizeState(e){for(const i of this.getModels())i.delete();const t=this.getAttributeManager();t&&t.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const t of this.getModels())t.draw(e)}getPickingInfo({info:e}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,t){var i,r,s,o;t&&(e.message="".concat(t,": ").concat(e.message)),null!==(i=(r=this.props).onError)&&void 0!==i&&i.call(r,e)||null===(s=this.context)||void 0===s||null===(o=s.onError)||void 0===o||o.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return!!this.internalState&&(this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()))}hasUniformTransition(){var e;return(null===(e=this.internalState)||void 0===e?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const t=this.internalState.viewport;this.internalState.viewport=e,(!t||!YSe({oldViewport:t,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const t=this.getAttributeManager();t&&("all"===e?t.invalidateAll():t.invalidate(e))}updateAttributes(e){for(const t of this.getModels())this._setModelAttributes(t,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const t=this.props,i=this.getNumInstances(),r=this.getStartIndices();e.update({data:t.data,numInstances:i,startIndices:r,props:t,transitions:t.transitions,buffers:t.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const t=e.update(),i=Object.create(this.props);for(const r in t)Object.defineProperty(i,r,{value:t[r]});return i}return this.props}calculateInstancePickingColors(e,{numInstances:t}){if(e.constant)return;const i=Math.floor(bo.length/3);if(this.internalState.usesPickingColorCache=!0,i<t){t>T8&&Ze.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),bo=Vp.allocate(bo,t,{size:3,copy:!0,maxCount:Math.max(t,T8)});const r=Math.floor(bo.length/3),s=[];for(let o=i;o<r;o++)this.encodePickingColor(o,s),bo[3*o+0]=s[0],bo[3*o+1]=s[1],bo[3*o+2]=s[2]}e.value=bo.subarray(0,3*t)}_setModelAttributes(e,t){const s=this.getAttributeManager().getShaderAttributes(t,e.userData.excludeAttributes||{});e.setAttributes(s)}disablePickingIndex(e){this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:t,instancePickingColors:i}=this.getAttributeManager().attributes,r=t||i;if(!r)return;const s=r.getVertexOffset(e),o=r.getVertexOffset(e+1);r.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:t}=this.getAttributeManager().attributes,i=e||t;i&&(this.internalState.usesPickingColorCache&&i.value.buffer!==bo.buffer&&(i.value=bo.subarray(0,i.value.length)),i.updateSubBuffer({startOffset:0}))}_initialize(){mi(!this.internalState),mi(Number.isFinite(this.props.coordinateSystem)),Ni("layer.initialize",this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new HSe({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Ze.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.layer=this,this.internalState.uniformTransitions=new dSe(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const t of this.props.extensions)t.initializeState.call(this,this.context,t);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Ni("layer.matched",this,this===e);const{state:t,internalState:i}=e;this!==e&&(this.internalState=i,this.internalState.layer=this,this.state=t,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Ni("layer.update",this,e),!e)return;const t=this.props,i=this.context,r=this.internalState,s=i.viewport,o=this._updateUniformTransition();r.propsInTransition=o,i.viewport=r.viewport||s,this.props=o;try{const a=this._getUpdateParams(),c=this.getModels();if(i.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const u of this.props.extensions)u.updateState.call(this,a,u);const l=this.getModels()[0]!==c[0];this._postUpdate(a,l)}finally{i.viewport=s,this.props=t,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){Ni("layer.finalize",this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,e)}_drawLayer({moduleParameters:e=null,uniforms:t={},parameters:i={}}){this._updateAttributeTransition();const r=this.props,s=this.context;this.props=this.internalState.propsInTransition||r,t.opacity=Math.pow(this.props.opacity,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,c=a&&a(t)||[0,0];ea(s.gl,{polygonOffset:c}),ns(s.gl,i,()=>{const l={moduleParameters:e,uniforms:t,parameters:i,context:s};for(const u of this.props.extensions)u.draw.call(this,l,u);this.draw(l)})}finally{this.props=r}}getChangeFlags(){var e;return null===(e=this.internalState)||void 0===e?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:t}=this.internalState;for(const r in e)if(e[r]){let s=!1;if("dataChanged"===r){const o=e[r],a=t[r];o&&Array.isArray(a)&&(t.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0)}t[r]||(t[r]=e[r],s=!0),s&&Ni("layer.changeFlag",this,r,e)}const i=!!(t.dataChanged||t.updateTriggersChanged||t.propsChanged||t.extensionsChanged);t.propsOrDataChanged=i,t.somethingChanged=i||t.viewportChanged||t.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,t){const i=function fSe(n,e){const t=b8({newProps:n,oldProps:e,propTypes:LM(n),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),i=function gSe(n,e){if(null===e)return"oldProps is null, initial diff";let t=!1;const{dataComparator:i,_dataDiff:r}=n;return i?i(n.data,e.data)||(t="Data comparator detected a change"):n.data!==e.data&&(t="A new data container was supplied"),t&&r&&(t=r(n.data,e.data)||t),t}(n,e);let r=!1;return i||(r=function mSe(n,e){if(null===e)return{all:!0};if("all"in n.updateTriggers&&E8(n,e,"all"))return{all:!0};const t={};let i=!1;for(const r in n.updateTriggers)"all"!==r&&E8(n,e,r)&&(t[r]=!0,i=!0);return!!i&&t}(n,e)),{dataChanged:i,propsChanged:t,updateTriggersChanged:r,extensionsChanged:_Se(n,e),transitionsChanged:pSe(n,e)}}(e,t);if(i.updateTriggersChanged)for(const s in i.updateTriggersChanged)i.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(i.transitionsChanged)for(const s in i.transitionsChanged){var r;this.internalState.uniformTransitions.add(s,t[s],e[s],null===(r=e.transitions)||void 0===r?void 0:r[s])}return this.setChangeFlags(i)}validateProps(){!function hSe(n){const e=LM(n);for(const t in e){const i=e[t],{validate:r}=i;if(r&&!r(n[t],i))throw new Error("Invalid prop ".concat(t,": ").concat(n[t]))}}(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const t={pickingSelectedColor:e.picked?e.color:null},{highlightColor:i}=this.props;e.picked&&"function"==typeof i&&(t.pickingHighlightColor=i(e)),this.setModuleParameters(t),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new oSe(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,t){const{props:i,oldProps:r}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s?.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:c}=i;if(t||r.autoHighlight!==o||r.highlightedObjectIndex!==a||r.highlightColor!==c){const l={};o||(l.pickingSelectedColor=null),Array.isArray(c)&&(l.pickingHighlightColor=c),(t||a!==r.highlightedObjectIndex)&&(l.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(l)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let t=!1;t=t||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags;const i=this.getAttributeManager(),r=!!i&&i.getNeedsRedraw(e);return t=t||r,t}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}E(Dl,"defaultProps",KSe),E(Dl,"layerName","Layer");class HM extends Dl{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:t}=e;return t&&t.__source&&t.__source.parent&&t.__source.parent.id===this.id&&(e.object=t.__source.object,e.index=t.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,t){return t&&t.length}getSubLayerClass(e,t){const{_subLayerProps:i}=this.props;return i&&i[e]&&i[e].type||t}getSubLayerRow(e,t,i){return e.__source={parent:this,object:t,index:i},e}getSubLayerAccessor(e){if("function"==typeof e){const t={index:-1,data:this.props.data,target:[]};return(i,r)=>i&&i.__source?(t.index=i.__source.index,e(i.__source.object,t)):e(i,r)}return e}getSubLayerProps(e={}){var t;const{opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:d,coordinateOrigin:h,wrapLongitude:f,positionFormat:p,modelMatrix:g,extensions:m,fetch:y,operation:v,_subLayerProps:_}=this.props,w={id:"",updateTriggers:{},opacity:i,pickable:r,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:c,autoHighlight:l,highlightColor:u,coordinateSystem:d,coordinateOrigin:h,wrapLongitude:f,positionFormat:p,modelMatrix:g,extensions:m,fetch:y,operation:v},A=_&&e.id&&_[e.id],S=A&&A.updateTriggers,D=e.id||"sublayer";if(A){const x=this.constructor._propTypes,k=e.type?e.type._propTypes:{};for(const U in A){const V=k[U]||x[U];V&&"accessor"===V.type&&(A[U]=this.getSubLayerAccessor(A[U]))}}Object.assign(w,e,A),w.id="".concat(this.props.id,"-").concat(D),w.updateTriggers={all:null===(t=this.props.updateTriggers)||void 0===t?void 0:t.all,...e.updateTriggers,...S};for(const x of m){const k=x.getSubLayerProps.call(this,x);k&&Object.assign(w,k,{updateTriggers:Object.assign(w.updateTriggers,k.updateTriggers)})}return w}_updateAutoHighlight(e){for(const t of this.getSubLayers())t.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,t){let i=this.internalState.subLayers;const r=!i||this.needsUpdate();r&&(i=Dx(this.renderLayers(),Boolean),this.internalState.subLayers=i),Ni("compositeLayer.renderLayers",this,r,i);for(const s of i)s.parent=this}}E(HM,"layerName","CompositeLayer");const Ib={name:"project32",dependencies:[Sx],vs:"\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition\n) {\n  vec3 projectedPosition = project_position(position, position64Low);\n  mat3 rotation;\n  if (project_needs_rotation(projectedPosition, rotation)) {\n    // offset is specified as ENU\n    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe\n    offset = rotation * offset;\n  }\n  commonPosition = vec4(projectedPosition + offset, 1.0);\n  return project_common_position_to_clipspace(commonPosition);\n}\n\nvec4 project_position_to_clipspace(\n  vec3 position, vec3 position64Low, vec3 offset\n) {\n  vec4 commonPosition;\n  return project_position_to_clipspace(position, position64Low, offset, commonPosition);\n}\n"},ZSe={pickingSelectedColor:null,pickingHighlightColor:new Uint8Array([0,255,255,255]),pickingActive:!1,pickingAttribute:!1},Db={inject:{"vs:DECKGL_FILTER_GL_POSITION":"\n    // for picking depth values\n    picking_setPickingAttribute(position.z / position.w);\n  ","vs:DECKGL_FILTER_COLOR":"\n  picking_setPickingColor(geometry.pickingColor);\n  ","fs:#decl":"\nuniform bool picking_uAttribute;\n  ","fs:DECKGL_FILTER_COLOR":{order:99,injection:"\n  // use highlight color if this fragment belongs to the selected object.\n  color = picking_filterHighlightColor(color);\n\n  // use picking color if rendering to picking FBO.\n  color = picking_filterPickingColor(color);\n    "}},name:"picking",vs:"uniform bool picking_uActive;\nuniform bool picking_uAttribute;\nuniform vec3 picking_uSelectedColor;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Avalid;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool picking_isColorValid(vec3 color) {\n  return dot(color, vec3(1.0)) > 0.001;\n}\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  if (picking_uActive) {\n    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));\n\n    if (!picking_uAttribute) {\n      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;\n    }\n  } else {\n    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));\n  }\n}\n\nvoid picking_setPickingAttribute(float value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.r = value;\n  }\n}\nvoid picking_setPickingAttribute(vec2 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rg = value;\n  }\n}\nvoid picking_setPickingAttribute(vec3 value) {\n  if (picking_uAttribute) {\n    picking_vRGBcolor_Avalid.rgb = value;\n  }\n}\n",fs:"uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Avalid;\nvec4 picking_filterHighlightColor(vec4 color) {\n  if (picking_uActive) {\n    return color;\n  }\n  bool selected = bool(picking_vRGBcolor_Avalid.a);\n\n  if (selected) {\n    float highLightAlpha = picking_uHighlightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  if (picking_uActive) {\n    if (picking_vRGBcolor_Avalid.a == 0.0) {\n      discard;\n    }\n    return picking_vRGBcolor_Avalid;\n  }\n  return color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n",getUniforms:function QSe(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ZSe;const e={};if(void 0!==n.pickingSelectedColor)if(n.pickingSelectedColor){const t=n.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=t}else e.picking_uSelectedColorValid=0;if(n.pickingHighlightColor){const t=Array.from(n.pickingHighlightColor,i=>i/255);Number.isFinite(t[3])||(t[3]=1),e.picking_uHighlightColor=t}return void 0!==n.pickingActive&&(e.picking_uActive=!!n.pickingActive,e.picking_uAttribute=!!n.pickingAttribute),e}},S8={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class hc{static get DRAW_MODE(){return S8}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=hr("geometry"),drawMode:i=S8.TRIANGLES,attributes:r={},indices:s=null,vertexCount:o=null}=e;this.id=t,this.drawMode=0|i,this.attributes={},this.userData={},this._setAttributes(r,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,t){t&&(this.indices=ArrayBuffer.isView(t)?{value:t,size:1}:t);for(const i in e){let r=e[i];r=ArrayBuffer.isView(r)?{value:r}:r,ee(ArrayBuffer.isView(r.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),("POSITION"===i||"positions"===i)&&!r.size&&(r.size=3),"indices"===i?(ee(!this.indices),this.indices=r):this.attributes[i]=r}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,t){if(t)return t.value.length;let i=1/0;for(const r in e){const s=e[r],{value:o,size:a,constant:c}=s;!c&&o&&a>=1&&(i=Math.min(i,o.length/a))}return ee(Number.isFinite(i)),i}}const x8=()=>{},M8={10241:9987,10240:9729,10242:33071,10243:33071};function rxe(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function sxe(n,e,t,i){return t===e.width&&i===e.height?e:(n.canvas.height=i,n.canvas.width=t,n.clearRect(0,0,n.canvas.width,n.canvas.height),n.drawImage(e,0,0,e.width,e.height,0,0,t,i),n.canvas)}function ug(n){return n&&(n.id||n.url)}function I8(n,e,t){for(let i=0;i<e.length;i++){const{icon:r,xOffset:s}=e[i];n[ug(r)]={...r,x:s,y:t}}}class lxe{constructor(e,{onUpdate:t=x8,onError:i=x8}){E(this,"gl",void 0),E(this,"onUpdate",void 0),E(this,"onError",void 0),E(this,"_loadOptions",null),E(this,"_texture",null),E(this,"_externalTexture",null),E(this,"_mapping",{}),E(this,"_textureParameters",null),E(this,"_pendingCount",0),E(this,"_autoPacking",!1),E(this,"_xOffset",0),E(this,"_yOffset",0),E(this,"_rowHeight",0),E(this,"_buffer",4),E(this,"_canvasWidth",1024),E(this,"_canvasHeight",0),E(this,"_canvas",null),this.gl=e,this.onUpdate=t,this.onError=i}finalize(){var e;null===(e=this._texture)||void 0===e||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const t=this._autoPacking?ug(e):e;return this._mapping[t]||{}}setProps({loadOptions:e,autoPacking:t,iconAtlas:i,iconMapping:r,textureParameters:s}){var o;e&&(this._loadOptions=e),void 0!==t&&(this._autoPacking=t),r&&(this._mapping=r),i&&(null===(o=this._texture)||void 0===o||o.delete(),this._texture=null,this._externalTexture=i),s&&(this._textureParameters=s)}get isLoaded(){return 0===this._pendingCount}packIcons(e,t){if(!this._autoPacking||typeof document>"u")return;const i=Object.values(function cxe(n,e,t){if(!n||!e)return null;t=t||{};const i={},{iterable:r,objectInfo:s}=Cb(n);for(const o of r){s.index++;const a=e(o,s),c=ug(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!i[c]&&(!t[c]||a.url!==t[c].url)&&(i[c]={...a,source:o,sourceIndex:s.index})}return i}(e,t,this._mapping)||{});if(i.length>0){const{mapping:r,xOffset:s,yOffset:o,rowHeight:a,canvasHeight:c}=function axe({icons:n,buffer:e,mapping:t={},xOffset:i=0,yOffset:r=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let c=0;c<n.length;c++){const l=n[c];if(!t[ug(l)]){const{height:d,width:h}=l;i+h+e>o&&(I8(t,a,r),i=0,r=s+r+e,s=0,a=[]),a.push({icon:l,xOffset:i}),i=i+h+e,s=Math.max(s,d)}}return a.length>0&&I8(t,a,r),{mapping:t,rowHeight:s,xOffset:i,yOffset:r,canvasWidth:o,canvasHeight:rxe(s+r+e)}}({icons:i,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=r,this._xOffset=s,this._yOffset=o,this._canvasHeight=c,this._texture||(this._texture=new _i(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||M8})),this._texture.height!==this._canvasHeight&&(this._texture=function oxe(n,e,t,i){const r=n.width,s=n.height,o=new _i(n.gl,{width:e,height:t,parameters:i});return function qbe(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{sourceX:i=0,sourceY:r=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=t;let{targetX:a,targetY:c,targetZ:l,width:u,height:d}=t;const{framebuffer:h,deleteFramebuffer:f}=Jp(n);ee(h);const{gl:p,handle:g}=h,m=typeof a<"u"||typeof c<"u"||typeof l<"u";a=a||0,c=c||0,l=l||0;const y=p.bindFramebuffer(36160,g);ee(e);let v=null;if(e instanceof Sl&&(v=e,u=Number.isFinite(u)?u:v.width,d=Number.isFinite(d)?d:v.height,v.bind(0),e=v.target),m)switch(e){case 3553:case 34067:p.copyTexSubImage2D(e,s,a,c,i,r,u,d);break;case 35866:case 32879:Oi(p).copyTexSubImage3D(e,s,a,c,l,i,r,u,d)}else p.copyTexImage2D(e,s,o,i,r,u,d,0);v&&v.unbind(),p.bindFramebuffer(36160,y||null),f&&h.delete()}(n,o,{targetY:0,width:r,height:s}),n.delete(),o}(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||M8)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(i)}}_loadIcons(e){const t=this._canvas.getContext("2d");for(const i of e)this._pendingCount++,ig(i.url,R4,this._loadOptions).then(r=>{const s=ug(i),{x:o,y:a,width:c,height:l}=this._mapping[s],u=sxe(t,r,c,l);this._texture.setSubImageData({data:u,x:o,y:a,width:c,height:l}),this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:i.url,source:i.source,sourceIndex:i.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const D8=[0,0,0,255],uxe={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:n=>n.position},getIcon:{type:"accessor",value:n=>n.icon},getColor:{type:"accessor",value:D8},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class zM extends Dl{constructor(...e){super(...e),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:'#define SHADER_NAME icon-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceIconFrames;\nattribute float instanceColorModes;\nattribute vec2 instanceOffsets;\nattribute vec2 instancePixelOffset;\n\nuniform float sizeScale;\nuniform vec2 iconsTextureDim;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform bool billboard;\nuniform int sizeUnits;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = angle * PI / 180.0;\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n\n  vec2 iconSize = instanceIconFrames.zw;\n  // convert size in meters to pixels, then scaled and clamp\n \n  // project meters to pixels and clamp to limits \n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), \n    sizeMinPixels, sizeMaxPixels\n  );\n\n  // scale icon height to match instanceSize\n  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;\n\n  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace\n  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;\n  pixelOffset += instancePixelOffset;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); \n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTextureCoords = mix(\n    instanceIconFrames.xy,\n    instanceIconFrames.xy + iconSize,\n    (positions.xy + 1.0) / 2.0\n  ) / iconsTextureDim;\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n\n  vColorMode = instanceColorModes;\n}\n',fs:"#define SHADER_NAME icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float alphaCutoff;\n\nvarying float vColorMode;\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec4 texColor = texture2D(iconsTexture, vTextureCoords);\n\n  // if colorMode == 0, use pixel color from the texture\n  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask\n  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);\n  // Take the global opacity and the alpha from vColor into account for the alpha component\n  float a = texColor.a * opacity * vColor.a;\n\n  if (a < alphaCutoff) {\n    discard;\n  }\n\n  gl_FragColor = vec4(color, a);\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Ib,Db]})}initializeState(){this.state={iconManager:new lxe(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:D8},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:c,getIcon:l,textureParameters:u}=t,{iconManager:d}=this.state,h=o||this.internalState.isAsyncPropLoading("iconAtlas");if(d.setProps({loadOptions:t.loadOptions,autoPacking:!h,iconAtlas:o,iconMapping:h?a:null,textureParameters:u}),h?i.iconMapping!==t.iconMapping&&s.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&d.packIcons(c,l),r.extensionsChanged){var f;const{gl:p}=this.context;null===(f=this.state.model)||void 0===f||f.delete(),this.state.model=this._getModel(p),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,sizeUnits:s,billboard:o,alphaCutoff:a}=this.props,{iconManager:c}=this.state,l=c.getTexture();l&&this.state.model.setUniforms(e).setUniforms({iconsTexture:l,iconsTextureDim:[l.width,l.height],sizeUnits:Zv[s],sizeScale:t,sizeMinPixels:i,sizeMaxPixels:r,billboard:o,alphaCutoff:a}).draw()}_getModel(e){return new Xd(e,{...this.getShaders(),id:this.props.id,geometry:new hc({drawMode:6,attributes:{positions:{size:2,value:new Float32Array([-1,-1,-1,1,1,1,1,-1])}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var t;const i=null===(t=this.getCurrentLayer())||void 0===t?void 0:t.props.onIconError;i?i(e):Ze.error(e.error.message)()}getInstanceOffset(e){const{width:t,height:i,anchorX:r=t/2,anchorY:s=i/2}=this.state.iconManager.getIconMapping(e);return[t/2-r,i/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:t,y:i,width:r,height:s}=this.state.iconManager.getIconMapping(e);return[t,i,r,s]}}E(zM,"defaultProps",uxe),E(zM,"layerName","IconLayer");const O8=[];class GM extends zM{constructor(...e){super(...e),E(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:"#define SHADER_NAME multi-icon-layer-fragment-shader\n\nprecision highp float;\n\nuniform float opacity;\nuniform sampler2D iconsTexture;\nuniform float gamma;\nuniform bool sdf;\nuniform float alphaCutoff;\nuniform float buffer;\nuniform float outlineBuffer;\nuniform vec4 outlineColor;\n\nvarying vec4 vColor;\nvarying vec2 vTextureCoords;\nvarying vec2 uv;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  if (!picking_uActive) {\n    float alpha = texture2D(iconsTexture, vTextureCoords).a;\n    vec4 color = vColor;\n\n    // if enable sdf (signed distance fields)\n    if (sdf) {\n      float distance = alpha;\n      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);\n\n      if (outlineBuffer > 0.0) {\n        float inFill = alpha;\n        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);\n        color = mix(outlineColor, vColor, inFill);\n        alpha = inBorder;\n      }\n    }\n\n    // Take the global opacity and the alpha from color into account for the alpha component\n    float a = alpha * color.a;\n    \n    if (a < alphaCutoff) {\n      discard;\n    }\n\n    gl_FragColor = vec4(color.rgb, a * opacity);\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n"}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(t,{index:i,target:r})=>this.encodePickingColor(i,r)}})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;let{outlineColor:r}=t;r!==i.outlineColor&&(r=r.map(s=>s/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!t.sdf&&t.outlineWidth&&Ze.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:t,smoothing:i,outlineWidth:r}=this.props,{outlineColor:s}=this.state;e.uniforms={...e.uniforms,buffer:.75,outlineBuffer:r?Math.max(i,.75*(1-r)):-1,gamma:i,sdf:!!t,outlineColor:s},super.draw(e)}getInstanceOffset(e){return e?Array.from(e).flatMap(t=>super.getInstanceOffset(t)):O8}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(t=>super.getInstanceIconFrame(t)):O8}}E(GM,"defaultProps",{getIconOffsets:{type:"accessor",value:n=>n.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}}),E(GM,"layerName","MultiIconLayer");var fxe=Qe(772),pxe=Qe.n(fxe);const gxe=32,mxe=[];function _xe(n){return Math.pow(2,Math.ceil(Math.log2(n)))}function P8(n,e,t,i){let r=0;for(let o=e;o<t;o++){var s;r+=(null===(s=i[n[o]])||void 0===s?void 0:s.width)||0}return r}function N8(n,e,t,i,r,s){let o=e,a=0;for(let c=e;c<t;c++){const l=P8(n,c,c+1,r);a+l>i&&(o<c&&s.push(c),o=c,a=0),a+=l}return a}function bxe(n,e,t,i,r=0,s){void 0===s&&(s=n.length);const o=[];return"break-all"===e?N8(n,r,s,t,i,o):function vxe(n,e,t,i,r,s){let o=e,a=e,c=e,l=0;for(let u=e;u<t;u++)if((" "===n[u]||" "===n[u+1]||u+1===t)&&(c=u+1),c>a){let d=P8(n,a,c,r);l+d>i&&(o<a&&(s.push(a),o=a,l=0),d>i&&(d=N8(n,a,c,i,r,s),o=s[s.length-1])),a=c,l+=d}}(n,r,s,t,i,o),o}function Exe(n,e,t,i,r,s){let o=0,a=0;for(let c=e;c<t;c++){const l=n[c],u=i[l];u?(a||(a=u.height),r[c]=o+u.width/2,o+=u.width):(Ze.warn("Missing character: ".concat(l," (").concat(l.codePointAt(0),")"))(),r[c]=o,o+=gxe)}s[0]=o,s[1]=a}function F8(n,e,t,i,r){const s=Array.from(n),o=s.length,a=new Array(o),c=new Array(o),l=new Array(o),u=("break-word"===t||"break-all"===t)&&isFinite(i)&&i>0,d=[0,0],h=[0,0];let f=0,p=0,g=0;for(let m=0;m<=o;m++){const y=s[m];if(("\n"===y||m===o)&&(g=m),g>p){const v=u?bxe(s,t,i,r,p,g):mxe;for(let _=0;_<=v.length;_++){const w=0===_?p:v[_-1],A=_<v.length?v[_]:g;Exe(s,w,A,r,a,h);for(let S=w;S<A;S++)c[S]=f+h[1]/2,l[S]=h[0];f+=h[1]*e,d[0]=Math.max(d[0],h[0])}p=g}"\n"===y&&(a[p]=0,c[p]=0,l[p]=0,p++)}return d[1]=f,{x:a,y:c,rowWidth:l,size:d}}class k8{constructor(e=5){E(this,"limit",void 0),E(this,"_cache",{}),E(this,"_order",[]),this.limit=e}get(e){const t=this._cache[e];return t&&(this._deleteOrder(e),this._appendOrder(e)),t}set(e,t){this._cache[e]?(this.delete(e),this._cache[e]=t,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=t,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const t=this._order.indexOf(e);t>=0&&this._order.splice(t,1)}_appendOrder(e){this._order.push(e)}}const dg={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:function Cxe(){const n=[];for(let e=32;e<128;e++)n.push(String.fromCharCode(e));return n}(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1};let Rb=new k8(3);function Sxe(n,e){for(let t=0;t<n.length;t++)e.data[4*t+3]=n[t]}function U8(n,e,t,i){n.font="".concat(i," ").concat(t,"px ").concat(e),n.fillStyle="#000",n.textBaseline="alphabetic",n.textAlign="left"}class Mxe{constructor(){E(this,"props",{...dg}),E(this,"_key",void 0),E(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return 1.2}setProps(e={}){Object.assign(this.props,e);const t=this._key;this._key=this._getKey();const i=function Txe(n,e){let t;t="string"==typeof e?new Set(Array.from(e)):new Set(e);const i=Rb.get(n);if(!i)return t;for(const r in i.mapping)t.has(r)&&t.delete(r);return t}(this._key,this.props.characterSet),r=Rb.get(this._key);if(r&&0===i.size)return void(this._key!==t&&(this._atlas=r));const s=this._generateFontAtlas(this._key,i,r);this._atlas=s,Rb.set(this._key,s)}_generateFontAtlas(e,t,i){const{fontFamily:r,fontWeight:s,fontSize:o,buffer:a,sdf:c,radius:l,cutoff:u}=this.props;let d=i&&i.data;d||(d=document.createElement("canvas"),d.width=1024);const h=d.getContext("2d");U8(h,r,o,s);const{mapping:f,canvasHeight:p,xOffset:g,yOffset:m}=function yxe({characterSet:n,getFontWidth:e,fontHeight:t,buffer:i,maxCanvasWidth:r,mapping:s={},xOffset:o=0,yOffset:a=0}){let c=0,l=o;for(const d of n)if(!s[d]){const h=e(d);l+h+2*i>r&&(l=0,c++),s[d]={x:l+i,y:a+c*(t+2*i)+i,width:h,height:t},l+=h+2*i}const u=t+2*i;return{mapping:s,xOffset:l,yOffset:a+c*u,canvasHeight:_xe(a+(c+1)*u)}}({getFontWidth:y=>h.measureText(y).width,fontHeight:1.2*o,buffer:a,characterSet:t,maxCanvasWidth:1024,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(d.height!==p){const y=h.getImageData(0,0,d.width,d.height);d.height=p,h.putImageData(y,0,0)}if(U8(h,r,o,s),c){const y=new(pxe())(o,a,l,u,r,s),v=h.getImageData(0,0,y.size,y.size);for(const _ of t)Sxe(y.draw(_),v),h.putImageData(v,f[_].x-a,f[_].y+a)}else for(const y of t)h.fillText(y,f[y].x,f[y].y+.9*o);return{xOffset:g,yOffset:m,mapping:f,data:d,width:d.width,height:d.height}}_getKey(){const{fontFamily:e,fontWeight:t,fontSize:i,buffer:r,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(t," ").concat(i," ").concat(r," ").concat(o," ").concat(a):"".concat(e," ").concat(t," ").concat(i," ").concat(r)}}const Rxe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:n=>n.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class WM extends Dl{constructor(...e){super(...e),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:"#define SHADER_NAME text-background-layer-vertex-shader\n\nattribute vec2 positions;\n\nattribute vec3 instancePositions;\nattribute vec3 instancePositions64Low;\nattribute vec4 instanceRects;\nattribute float instanceSizes;\nattribute float instanceAngles;\nattribute vec2 instancePixelOffsets;\nattribute float instanceLineWidths;\nattribute vec4 instanceFillColors;\nattribute vec4 instanceLineColors;\nattribute vec3 instancePickingColors;\n\nuniform bool billboard;\nuniform float opacity;\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform vec4 padding;\nuniform int sizeUnits;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvec2 rotate_by_angle(vec2 vertex, float angle) {\n  float angle_radian = radians(angle);\n  float cos_angle = cos(angle_radian);\n  float sin_angle = sin(angle_radian);\n  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);\n  return rotationMatrix * vertex;\n}\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = positions;\n  geometry.pickingColor = instancePickingColors;\n  uv = positions;\n  vLineWidth = instanceLineWidths;\n\n  // convert size in meters to pixels, then scaled and clamp\n\n  // project meters to pixels and clamp to limits\n  float sizePixels = clamp(\n    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),\n    sizeMinPixels, sizeMaxPixels\n  );\n\n  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;\n\n  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);\n  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);\n  pixelOffset += instancePixelOffsets;\n  pixelOffset.y *= -1.0;\n\n  if (billboard)  {\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n    vec3 offset = vec3(pixelOffset, 0.0);\n    DECKGL_FILTER_SIZE(offset, geometry);\n    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);\n  } else {\n    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);\n    DECKGL_FILTER_SIZE(offset_common, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  // Apply opacity to instance color, or return instance picking color\n  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);\n  DECKGL_FILTER_COLOR(vFillColor, geometry);\n  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);\n  DECKGL_FILTER_COLOR(vLineColor, geometry);\n}\n",fs:"#define SHADER_NAME text-background-layer-fragment-shader\n\nprecision highp float;\n\nuniform bool stroked;\n\nvarying vec4 vFillColor;\nvarying vec4 vLineColor;\nvarying float vLineWidth;\nvarying vec2 uv;\nvarying vec2 dimensions;\n\nvoid main(void) {\n  geometry.uv = uv;\n\n  vec2 pixelPosition = uv * dimensions;\n  if (stroked) {\n    float distToEdge = min(\n      min(pixelPosition.x, dimensions.x - pixelPosition.x),\n      min(pixelPosition.y, dimensions.y - pixelPosition.y)\n    );\n    float isBorder = smoothedge(distToEdge, vLineWidth);\n    gl_FragColor = mix(vFillColor, vLineColor, isBorder);\n  } else {\n    gl_FragColor = vFillColor;\n  }\n\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n",modules:[Ib,Db]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:t}=e;if(t.extensionsChanged){var i;const{gl:r}=this.context;null===(i=this.state.model)||void 0===i||i.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:t,sizeScale:i,sizeUnits:r,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:a}=this.props;let{padding:c}=this.props;c.length<4&&(c=[c[0],c[1],c[0],c[1]]),this.state.model.setUniforms(e).setUniforms({billboard:t,stroked:!!a,padding:c,sizeUnits:Zv[r],sizeScale:i,sizeMinPixels:s,sizeMaxPixels:o}).draw()}_getModel(e){return new Xd(e,{...this.getShaders(),id:this.props.id,geometry:new hc({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array([0,0,1,0,1,1,0,1])}}}),isInstanced:!0})}}E(WM,"defaultProps",Rxe),E(WM,"layerName","TextBackgroundLayer");const j8={start:1,middle:0,end:-1},H8={top:1,center:0,bottom:-1},$M=[0,0,0,255],Oxe={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:$M},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:dg.characterSet},fontFamily:dg.fontFamily,fontWeight:dg.fontWeight,lineHeight:1,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:$M},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:n=>n.text},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:$M},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class qM extends HM{constructor(...e){super(...e),E(this,"state",void 0),E(this,"getBoundingRect",(t,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:u}=this.props,d=s(t,i)||"",{size:[h,f]}=F8(d,c,o,a,r);return[(j8["function"==typeof l?l(t,i):l]-1)*h/2,(H8["function"==typeof u?u(t,i):u]-1)*f/2,h,f]}),E(this,"getIconOffsets",(t,i)=>{const r=this.state.fontAtlasManager.mapping,s=this.state.getText,{wordBreak:o,maxWidth:a,lineHeight:c,getTextAnchor:l,getAlignmentBaseline:u}=this.props,d=s(t,i)||"",{x:h,y:f,rowWidth:p,size:[g,m]}=F8(d,c,o,a,r),y=j8["function"==typeof l?l(t,i):l],v=H8["function"==typeof u?u(t,i):u],_=h.length,w=new Array(2*_);let A=0;for(let S=0;S<_;S++)w[A++]=(y-1)*g/2+(1-y)*(g-p[S])/2+h[S],w[A++]=(v-1)*m/2+f[S];return w})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new Mxe}}updateState(e){const{props:t,oldProps:i,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||t.lineHeight!==i.lineHeight||t.wordBreak!==i.wordBreak||t.maxWidth!==i.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:t,fontWeight:i}=this.props,{fontAtlasManager:r,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:t,fontWeight:i};if(!r.mapping)return r.setProps(o),!0;for(const a in o)if(o[a]!==r.props[a])return r.setProps(o),!0;return!1}_updateText(){var e;const{data:t,characterSet:i}=this.props,r=null===(e=t.attributes)||void 0===e?void 0:e.getText;let a,{getText:s}=this.props,o=t.startIndices;const c="auto"===i&&new Set;if(r&&o){const{texts:l,characterCount:u}=function wxe({value:n,length:e,stride:t,offset:i,startIndices:r,characterSet:s}){const o=n.BYTES_PER_ELEMENT,a=t?t/o:1,c=i?i/o:0,l=r[e]||Math.ceil((n.length-c)/a),u=s&&new Set,d=new Array(e);let h=n;if(a>1||c>0){h=new(0,n.constructor)(l);for(let p=0;p<l;p++)h[p]=n[p*a+c]}for(let f=0;f<e;f++){const m=h.subarray(r[f],r[f+1]||l);d[f]=String.fromCodePoint.apply(null,m),u&&m.forEach(u.add,u)}if(u)for(const f of u)s.add(String.fromCodePoint(f));return{texts:d,characterCount:l}}({...ArrayBuffer.isView(r)?{value:r}:r,length:t.length,startIndices:o,characterSet:c});a=u,s=(d,{index:h})=>l[h]}else{const{iterable:l,objectInfo:u}=Cb(t);o=[0],a=0;for(const d of l){u.index++;const h=Array.from(s(d,u)||"");c&&h.forEach(c.add,c),a+=h.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:c||i})}renderLayers(){const{startIndices:e,numInstances:t,getText:i,fontAtlasManager:{scale:r,texture:s,mapping:o},styleVersion:a}=this.state,{data:c,_dataDiff:l,getPosition:u,getColor:d,getSize:h,getAngle:f,getPixelOffset:p,getBackgroundColor:g,getBorderColor:m,getBorderWidth:y,backgroundPadding:v,background:_,billboard:w,fontSettings:A,outlineWidth:S,outlineColor:D,sizeScale:x,sizeUnits:k,sizeMinPixels:U,sizeMaxPixels:V,transitions:G,updateTriggers:O}=this.props,L=this.getSubLayerClass("characters",GM),$=this.getSubLayerClass("background",WM);return[_&&new $({getFillColor:g,getLineColor:m,getLineWidth:y,padding:v,getPosition:u,getSize:h,getAngle:f,getPixelOffset:p,billboard:w,sizeScale:x/this.state.fontAtlasManager.props.fontSize,sizeUnits:k,sizeMinPixels:U,sizeMaxPixels:V,transitions:G&&{getPosition:G.getPosition,getAngle:G.getAngle,getSize:G.getSize,getFillColor:G.getBackgroundColor,getLineColor:G.getBorderColor,getLineWidth:G.getBorderWidth,getPixelOffset:G.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:O.getPosition,getAngle:O.getAngle,getSize:O.getSize,getFillColor:O.getBackgroundColor,getLineColor:O.getBorderColor,getLineWidth:O.getBorderWidth,getPixelOffset:O.getPixelOffset,getBoundingRect:{getText:O.getText,getTextAnchor:O.getTextAnchor,getAlignmentBaseline:O.getAlignmentBaseline,styleVersion:a}}}),{data:c.attributes&&c.attributes.background?{length:c.length,attributes:c.attributes.background}:c,_dataDiff:l,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new L({sdf:A.sdf,smoothing:Number.isFinite(A.smoothing)?A.smoothing:dg.smoothing,outlineWidth:S,outlineColor:D,iconAtlas:s,iconMapping:o,getPosition:u,getColor:d,getSize:h,getAngle:f,getPixelOffset:p,billboard:w,sizeScale:x*r,sizeUnits:k,sizeMinPixels:U*r,sizeMaxPixels:V*r,transitions:G&&{getPosition:G.getPosition,getAngle:G.getAngle,getColor:G.getColor,getSize:G.getSize,getPixelOffset:G.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:O.getText,getPosition:O.getPosition,getAngle:O.getAngle,getColor:O.getColor,getSize:O.getSize,getPixelOffset:O.getPixelOffset,getIconOffsets:{getText:O.getText,getTextAnchor:O.getTextAnchor,getAlignmentBaseline:O.getAlignmentBaseline,styleVersion:a}}}),{data:c,_dataDiff:l,startIndices:e,numInstances:t,getIconOffsets:this.getIconOffsets,getIcon:i})]}static set fontAtlasCacheLimit(e){!function xxe(n){Ze.assert(Number.isFinite(n)&&n>=3,"Invalid cache limit"),Rb=new k8(n)}(e)}}E(qM,"defaultProps",Oxe),E(qM,"layerName","TextLayer");const z8="#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))\n\nstruct AmbientLight {\n vec3 color;\n};\n\nstruct PointLight {\n vec3 color;\n vec3 position;\n vec3 attenuation;\n};\n\nstruct DirectionalLight {\n  vec3 color;\n  vec3 direction;\n};\n\nuniform AmbientLight lighting_uAmbientLight;\nuniform PointLight lighting_uPointLight[MAX_LIGHTS];\nuniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];\nuniform int lighting_uPointLightCount;\nuniform int lighting_uDirectionalLightCount;\n\nuniform bool lighting_uEnabled;\n\nfloat getPointLightAttenuation(PointLight pointLight, float distance) {\n  return pointLight.attenuation.x\n       + pointLight.attenuation.y * distance\n       + pointLight.attenuation.z * distance * distance;\n}\n\n#endif\n",Pxe={lightSources:{}};function XM(){let{color:n=[0,0,0],intensity:e=1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n.map(t=>t*e/255)}const YM={name:"lights",vs:z8,fs:z8,getUniforms:function G8(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pxe;if("lightSources"in n){const{ambientLight:e,pointLights:t,directionalLights:i}=n.lightSources||{};return e||t&&t.length>0||i&&i.length>0?Object.assign({},function Nxe(n){let{ambientLight:e,pointLights:t=[],directionalLights:i=[]}=n;const r={};return r["lighting_uAmbientLight.color"]=e?XM(e):[0,0,0],t.forEach((s,o)=>{r["lighting_uPointLight[".concat(o,"].color")]=XM(s),r["lighting_uPointLight[".concat(o,"].position")]=s.position,r["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),r.lighting_uPointLightCount=t.length,i.forEach((s,o)=>{r["lighting_uDirectionalLight[".concat(o,"].color")]=XM(s),r["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),r.lighting_uDirectionalLightCount=i.length,r}({ambientLight:e,pointLights:t,directionalLights:i}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in n){const e={pointLights:[],directionalLights:[]};for(const t of n.lights||[])switch(t.type){case"ambient":e.ambientLight=t;break;case"directional":e.directionalLights.push(t);break;case"point":e.pointLights.push(t)}return G8({lightSources:e})}return{}},defines:{MAX_LIGHTS:3}},Fxe={};const Lxe={name:"phong-lighting",dependencies:[YM],fs:"\nuniform float lighting_uAmbient;\nuniform float lighting_uDiffuse;\nuniform float lighting_uShininess;\nuniform vec3  lighting_uSpecularColor;\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {\n    vec3 halfway_direction = normalize(light_direction + view_direction);\n    float lambertian = dot(light_direction, normal_worldspace);\n    float specular = 0.0;\n    if (lambertian > 0.0) {\n      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);\n      specular = pow(specular_angle, lighting_uShininess);\n    }\n    lambertian = max(lambertian, 0.0);\n    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;\n}\n\nvec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = surfaceColor;\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n\nvec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {\n  vec3 lightColor = vec3(0, 0, 0);\n  vec3 surfaceColor = vec3(0, 0, 0);\n\n  if (lighting_uEnabled) {\n    vec3 view_direction = normalize(cameraPosition - position_worldspace);\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uPointLightCount) {\n        break;\n      }\n      PointLight pointLight = lighting_uPointLight[i];\n      vec3 light_position_worldspace = pointLight.position;\n      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);\n      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);\n    }\n\n    for (int i = 0; i < MAX_LIGHTS; i++) {\n      if (i >= lighting_uDirectionalLightCount) {\n        break;\n      }\n      DirectionalLight directionalLight = lighting_uDirectionalLight[i];\n      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);\n    }\n  }\n  return lightColor;\n}\n",defines:{LIGHTING_FRAGMENT:1},getUniforms:function $8(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fxe;if(!("material"in n))return{};const{material:e}=n;return e?function kxe(n){const{ambient:e=.35,diffuse:t=.6,shininess:i=32,specularColor:r=[30,30,30]}=n;return{lighting_uAmbient:e,lighting_uDiffuse:t,lighting_uShininess:i,lighting_uSpecularColor:r.map(s=>s/255)}}(e):{lighting_uEnabled:!1}}},KM=Math.PI/180,Ob=new Float32Array(16),q8=new Float32Array(12);function X8(n,e,t){const i=e[0]*KM,r=e[1]*KM,s=e[2]*KM,o=Math.sin(s),a=Math.sin(i),c=Math.sin(r),l=Math.cos(s),u=Math.cos(i),d=Math.cos(r),h=t[0],f=t[1],p=t[2];n[0]=h*d*u,n[1]=h*c*u,n[2]=h*-a,n[3]=f*(-c*l+d*a*o),n[4]=f*(d*l+c*a*o),n[5]=f*u*o,n[6]=p*(c*o+d*a*l),n[7]=p*(-d*o+c*a*l),n[8]=p*u*l}function Y8(n){return n[0]=n[0],n[1]=n[1],n[2]=n[2],n[3]=n[4],n[4]=n[5],n[5]=n[6],n[6]=n[8],n[7]=n[9],n[8]=n[10],n[9]=n[12],n[10]=n[13],n[11]=n[14],n.subarray(0,12)}const K8={size:12,accessor:["getOrientation","getScale","getTranslation","getTransformMatrix"],shaderAttributes:{instanceModelMatrix__LOCATION_0:{size:3,elementOffset:0},instanceModelMatrix__LOCATION_1:{size:3,elementOffset:3},instanceModelMatrix__LOCATION_2:{size:3,elementOffset:6},instanceTranslation:{size:3,elementOffset:9}},update(n,{startRow:e,endRow:t}){const{data:i,getOrientation:r,getScale:s,getTranslation:o,getTransformMatrix:a}=this.props,c=Array.isArray(a),l=c&&16===a.length,u=Array.isArray(s),d=Array.isArray(r),h=Array.isArray(o),f=l||!c&&!!a(i[0]);n.constant=f?l:d&&u&&h;const p=n.value;if(n.constant){let g;f?(Ob.set(a),g=Y8(Ob)):(g=q8,X8(g,r,s),g.set(o,9)),n.value=new Float32Array(g)}else{let g=e*n.size;const{iterable:m,objectInfo:y}=Cb(i,e,t);for(const v of m){let _;y.index++,f?(Ob.set(l?a:a(v,y)),_=Y8(Ob)):(_=q8,X8(_,d?r:r(v,y),u?s:s(v,y)),_.set(h?o:o(v,y),9)),p[g++]=_[0],p[g++]=_[1],p[g++]=_[2],p[g++]=_[3],p[g++]=_[4],p[g++]=_[5],p[g++]=_[6],p[g++]=_[7],p[g++]=_[8],p[g++]=_[9],p[g++]=_[10],p[g++]=_[11]}}}};function J8(n,e){return e===it.CARTESIAN||e===it.METER_OFFSETS||e===it.DEFAULT&&!n.isGeospatial}function Z8(n,e){(n.COLOR_0||n.colors)&&e||(n.colors={constant:!0,value:new Float32Array([1,1,1])}),Ze.assert(n.positions||n.POSITION,'no "postions" or "POSITION" attribute in mesh')}function Uxe(n,e){if(n.attributes)return Z8(n.attributes,e),n instanceof hc?n:new hc(n);if(n.positions||n.POSITION)return Z8(n,e),new hc({attributes:n});throw Error("Invalid mesh")}class JM extends Dl{constructor(...e){super(...e),E(this,"state",void 0)}getShaders(){const e=!$e(this.context.gl),t={};return Ex(this.context.gl,"GLSL_DERIVATIVES")&&(t.DERIVATIVES_AVAILABLE=1),super.getShaders({vs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-vs\n\n// Scale the model\nuniform float sizeScale;\nuniform bool composeModelMatrix;\n\n// Primitive attributes\nin vec3 positions;\nin vec3 normals;\nin vec3 colors;\nin vec2 texCoords;\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Outputs to fragment shader\nout vec2 vTexCoord;\nout vec3 cameraPosition;\nout vec3 normals_commonspace;\nout vec4 position_commonspace;\nout vec4 vColor;\n\nvoid main(void) {\n  geometry.worldPosition = instancePositions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = instancePickingColors;\n\n  vTexCoord = texCoords;\n  cameraPosition = project_uCameraPosition;\n  vColor = vec4(colors * instanceColors.rgb, instanceColors.a);\n\n  vec3 pos = (instanceModelMatrix * positions) * sizeScale + instanceTranslation;\n\n  if (composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), position_commonspace);\n    geometry.position = position_commonspace;\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, position_commonspace);\n    geometry.position = position_commonspace;\n    normals_commonspace = project_normal(instanceModelMatrix * normals);\n  }\n\n  geometry.normal = normals_commonspace;\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n#define SHADER_NAME simple-mesh-layer-fs\n\nprecision highp float;\n\nuniform bool hasTexture;\nuniform sampler2D sampler;\nuniform bool flatShading;\nuniform float opacity;\n\nin vec2 vTexCoord;\nin vec3 cameraPosition;\nin vec3 normals_commonspace;\nin vec4 position_commonspace;\nin vec4 vColor;\n\nout vec4 fragColor;\n\nvoid main(void) {\n  geometry.uv = vTexCoord;\n\n  vec3 normal;\n  if (flatShading) {\n\n// NOTE(Tarek): This is necessary because\n// headless.gl reports the extension as\n// available but does not support it in\n// the shader.\n#ifdef DERIVATIVES_AVAILABLE\n    normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));\n#else\n    normal = vec3(0.0, 0.0, 1.0);\n#endif\n  } else {\n    normal = normals_commonspace;\n  }\n\n  vec4 color = hasTexture ? texture(sampler, vTexCoord) : vColor;\n  vec3 lightColor = lighting_getLightColor(color.rgb, cameraPosition, position_commonspace.xyz, normal);\n  fragColor = vec4(lightColor, color.a * opacity);\n\n  DECKGL_FILTER_COLOR(fragColor, geometry);\n}\n",modules:[Ib,Lxe,Db],transpileToGLSL100:e,defines:t})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{transition:!0,type:5130,fp64:this.use64bitPositions(),size:3,accessor:"getPosition"},instanceColors:{type:5121,transition:!0,size:this.props.colorFormat.length,normalized:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceModelMatrix:K8}),this.setState({emptyTexture:new _i(this.context.gl,{data:new Uint8Array(4),width:1,height:1})})}updateState(e){super.updateState(e);const{props:t,oldProps:i,changeFlags:r}=e;if(t.mesh!==i.mesh||r.extensionsChanged){var s;if(null===(s=this.state.model)||void 0===s||s.delete(),t.mesh){this.state.model=this.getModel(t.mesh);const o=t.mesh.attributes||t.mesh;this.setState({hasNormals:!(!o.NORMAL&&!o.normals)})}this.getAttributeManager().invalidateAll()}t.texture!==i.texture&&this.setTexture(t.texture),this.state.model&&this.state.model.setDrawMode(this.props.wireframe?3:4)}finalizeState(e){super.finalizeState(e),this.state.emptyTexture.delete()}draw({uniforms:e}){if(!this.state.model)return;const{viewport:t}=this.context,{sizeScale:i,coordinateSystem:r,_instanced:s}=this.props;this.state.model.setUniforms(e).setUniforms({sizeScale:i,composeModelMatrix:!s||J8(t,r),flatShading:!this.state.hasNormals}).draw()}getModel(e){const t=new Xd(this.context.gl,{...this.getShaders(),id:this.props.id,geometry:Uxe(e,this.props._useMeshColors),isInstanced:!0}),{texture:i}=this.props,{emptyTexture:r}=this.state;return t.setUniforms({sampler:i||r,hasTexture:!!i}),t}setTexture(e){const{emptyTexture:t,model:i}=this.state;i&&i.setUniforms({sampler:e||t,hasTexture:!!e})}}E(JM,"defaultProps",{mesh:{type:"object",value:null,async:!0},texture:{type:"image",value:null,async:!0},sizeScale:{type:"number",value:1,min:0},_useMeshColors:{type:"boolean",value:!1},_instanced:!0,wireframe:!1,material:!0,getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:[0,0,0,255]},getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]}}),E(JM,"layerName","SimpleMeshLayer");const Q8={name:"pbr",vs:"uniform mat4 u_MVPMatrix;\nuniform mat4 u_ModelMatrix;\nuniform mat4 u_NormalMatrix;\n\nvarying vec3 pbr_vPosition;\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n# ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n# else\nvarying vec3 pbr_vNormal;\n# endif\n#endif\n\nvoid pbr_setPositionNormalTangentUV(vec4 position, vec4 normal, vec4 tangent, vec2 uv)\n{\n  vec4 pos = u_ModelMatrix * position;\n  pbr_vPosition = vec3(pos.xyz) / pos.w;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\n  vec3 normalW = normalize(vec3(u_NormalMatrix * vec4(normal.xyz, 0.0)));\n  vec3 tangentW = normalize(vec3(u_ModelMatrix * vec4(tangent.xyz, 0.0)));\n  vec3 bitangentW = cross(normalW, tangentW) * tangent.w;\n  pbr_vTBN = mat3(tangentW, bitangentW, normalW);\n#else\n  pbr_vNormal = normalize(vec3(u_ModelMatrix * vec4(normal.xyz, 0.0)));\n#endif\n#endif\n\n#ifdef HAS_UV\n  pbr_vUV = uv;\n#else\n  pbr_vUV = vec2(0.,0.);\n#endif\n}\n",fs:"#if defined(USE_TEX_LOD) && !defined(FEATURE_GLSL_TEXTURE_LOD)\n# error PBR fragment shader: Texture LOD is not available\n#endif\n\n#if !defined(HAS_TANGENTS) && !defined(FEATURE_GLSL_DERIVATIVES)\n# error PBR fragment shader: Derivatives are not available\n#endif\n\n\n#if (__VERSION__ < 300)\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL1COND; INCR)\n#else\n  #define SMART_FOR(INIT, WEBGL1COND, WEBGL2COND, INCR) for (INIT; WEBGL2COND; INCR)\n#endif\n\nprecision highp float;\n\nuniform bool pbr_uUnlit;\n\n#ifdef USE_IBL\nuniform samplerCube u_DiffuseEnvSampler;\nuniform samplerCube u_SpecularEnvSampler;\nuniform sampler2D u_brdfLUT;\nuniform vec2 u_ScaleIBLAmbient;\n#endif\n\n#ifdef HAS_BASECOLORMAP\nuniform sampler2D u_BaseColorSampler;\n#endif\n#ifdef HAS_NORMALMAP\nuniform sampler2D u_NormalSampler;\nuniform float u_NormalScale;\n#endif\n#ifdef HAS_EMISSIVEMAP\nuniform sampler2D u_EmissiveSampler;\nuniform vec3 u_EmissiveFactor;\n#endif\n#ifdef HAS_METALROUGHNESSMAP\nuniform sampler2D u_MetallicRoughnessSampler;\n#endif\n#ifdef HAS_OCCLUSIONMAP\nuniform sampler2D u_OcclusionSampler;\nuniform float u_OcclusionStrength;\n#endif\n\n#ifdef ALPHA_CUTOFF\nuniform float u_AlphaCutoff;\n#endif\n\nuniform vec2 u_MetallicRoughnessValues;\nuniform vec4 u_BaseColorFactor;\n\nuniform vec3 u_Camera;\n#ifdef PBR_DEBUG\nuniform vec4 u_ScaleDiffBaseMR;\nuniform vec4 u_ScaleFGDSpec;\n#endif\n\nvarying vec3 pbr_vPosition;\n\nvarying vec2 pbr_vUV;\n\n#ifdef HAS_NORMALS\n#ifdef HAS_TANGENTS\nvarying mat3 pbr_vTBN;\n#else\nvarying vec3 pbr_vNormal;\n#endif\n#endif\n\n\nstruct PBRInfo\n{\n  float NdotL;\n  float NdotV;\n  float NdotH;\n  float LdotH;\n  float VdotH;\n  float perceptualRoughness;\n  float metalness;\n  vec3 reflectance0;\n  vec3 reflectance90;\n  float alphaRoughness;\n  vec3 diffuseColor;\n  vec3 specularColor;\n  vec3 n;\n  vec3 v;\n};\n\nconst float M_PI = 3.141592653589793;\nconst float c_MinRoughness = 0.04;\n\nvec4 SRGBtoLINEAR(vec4 srgbIn)\n{\n#ifdef MANUAL_SRGB\n#ifdef SRGB_FAST_APPROXIMATION\n  vec3 linOut = pow(srgbIn.xyz,vec3(2.2));\n#else\n  vec3 bLess = step(vec3(0.04045),srgbIn.xyz);\n  vec3 linOut = mix( srgbIn.xyz/vec3(12.92), pow((srgbIn.xyz+vec3(0.055))/vec3(1.055),vec3(2.4)), bLess );\n#endif\n  return vec4(linOut,srgbIn.w);;\n#else\n  return srgbIn;\n#endif\n}\n\nvec3 getNormal()\n{\n#ifndef HAS_TANGENTS\n  vec3 pos_dx = dFdx(pbr_vPosition);\n  vec3 pos_dy = dFdy(pbr_vPosition);\n  vec3 tex_dx = dFdx(vec3(pbr_vUV, 0.0));\n  vec3 tex_dy = dFdy(vec3(pbr_vUV, 0.0));\n  vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n#ifdef HAS_NORMALS\n  vec3 ng = normalize(pbr_vNormal);\n#else\n  vec3 ng = cross(pos_dx, pos_dy);\n#endif\n\n  t = normalize(t - ng * dot(ng, t));\n  vec3 b = normalize(cross(ng, t));\n  mat3 tbn = mat3(t, b, ng);\n#else\n  mat3 tbn = pbr_vTBN;\n#endif\n\n#ifdef HAS_NORMALMAP\n  vec3 n = texture2D(u_NormalSampler, pbr_vUV).rgb;\n  n = normalize(tbn * ((2.0 * n - 1.0) * vec3(u_NormalScale, u_NormalScale, 1.0)));\n#else\n  vec3 n = normalize(tbn[2].xyz);\n#endif\n\n  return n;\n}\n\n\n#ifdef USE_IBL\nvec3 getIBLContribution(PBRInfo pbrInputs, vec3 n, vec3 reflection)\n{\n  float mipCount = 9.0;\n  float lod = (pbrInputs.perceptualRoughness * mipCount);\n  vec3 brdf = SRGBtoLINEAR(texture2D(u_brdfLUT,\n    vec2(pbrInputs.NdotV, 1.0 - pbrInputs.perceptualRoughness))).rgb;\n  vec3 diffuseLight = SRGBtoLINEAR(textureCube(u_DiffuseEnvSampler, n)).rgb;\n\n#ifdef USE_TEX_LOD\n  vec3 specularLight = SRGBtoLINEAR(textureCubeLod(u_SpecularEnvSampler, reflection, lod)).rgb;\n#else\n  vec3 specularLight = SRGBtoLINEAR(textureCube(u_SpecularEnvSampler, reflection)).rgb;\n#endif\n\n  vec3 diffuse = diffuseLight * pbrInputs.diffuseColor;\n  vec3 specular = specularLight * (pbrInputs.specularColor * brdf.x + brdf.y);\n  diffuse *= u_ScaleIBLAmbient.x;\n  specular *= u_ScaleIBLAmbient.y;\n\n  return diffuse + specular;\n}\n#endif\n\n\nvec3 diffuse(PBRInfo pbrInputs)\n{\n  return pbrInputs.diffuseColor / M_PI;\n}\n\nvec3 specularReflection(PBRInfo pbrInputs)\n{\n  return pbrInputs.reflectance0 +\n    (pbrInputs.reflectance90 - pbrInputs.reflectance0) *\n    pow(clamp(1.0 - pbrInputs.VdotH, 0.0, 1.0), 5.0);\n}\n\n\n\nfloat geometricOcclusion(PBRInfo pbrInputs)\n{\n  float NdotL = pbrInputs.NdotL;\n  float NdotV = pbrInputs.NdotV;\n  float r = pbrInputs.alphaRoughness;\n\n  float attenuationL = 2.0 * NdotL / (NdotL + sqrt(r * r + (1.0 - r * r) * (NdotL * NdotL)));\n  float attenuationV = 2.0 * NdotV / (NdotV + sqrt(r * r + (1.0 - r * r) * (NdotV * NdotV)));\n  return attenuationL * attenuationV;\n}\n\n\n\n\n\nfloat microfacetDistribution(PBRInfo pbrInputs)\n{\n  float roughnessSq = pbrInputs.alphaRoughness * pbrInputs.alphaRoughness;\n  float f = (pbrInputs.NdotH * roughnessSq - pbrInputs.NdotH) * pbrInputs.NdotH + 1.0;\n  return roughnessSq / (M_PI * f * f);\n}\n\nvoid PBRInfo_setAmbientLight(inout PBRInfo pbrInputs) {\n  pbrInputs.NdotL = 1.0;\n  pbrInputs.NdotH = 0.0;\n  pbrInputs.LdotH = 0.0;\n  pbrInputs.VdotH = 1.0;\n}\n\nvoid PBRInfo_setDirectionalLight(inout PBRInfo pbrInputs, vec3 lightDirection) {\n  vec3 n = pbrInputs.n;\n  vec3 v = pbrInputs.v;\n  vec3 l = normalize(lightDirection);\n  vec3 h = normalize(l+v);\n\n  pbrInputs.NdotL = clamp(dot(n, l), 0.001, 1.0);\n  pbrInputs.NdotH = clamp(dot(n, h), 0.0, 1.0);\n  pbrInputs.LdotH = clamp(dot(l, h), 0.0, 1.0);\n  pbrInputs.VdotH = clamp(dot(v, h), 0.0, 1.0);\n}\n\nvoid PBRInfo_setPointLight(inout PBRInfo pbrInputs, PointLight pointLight) {\n  vec3 light_direction = normalize(pointLight.position - pbr_vPosition);\n  PBRInfo_setDirectionalLight(pbrInputs, light_direction);\n}\n\nvec3 calculateFinalColor(PBRInfo pbrInputs, vec3 lightColor) {\n  vec3 F = specularReflection(pbrInputs);\n  float G = geometricOcclusion(pbrInputs);\n  float D = microfacetDistribution(pbrInputs);\n  vec3 diffuseContrib = (1.0 - F) * diffuse(pbrInputs);\n  vec3 specContrib = F * G * D / (4.0 * pbrInputs.NdotL * pbrInputs.NdotV);\n  return pbrInputs.NdotL * lightColor * (diffuseContrib + specContrib);\n}\n\nvec4 pbr_filterColor(vec4 colorUnused)\n{\n#ifdef HAS_BASECOLORMAP\n  vec4 baseColor = SRGBtoLINEAR(texture2D(u_BaseColorSampler, pbr_vUV)) * u_BaseColorFactor;\n#else\n  vec4 baseColor = u_BaseColorFactor;\n#endif\n\n#ifdef ALPHA_CUTOFF\n  if (baseColor.a < u_AlphaCutoff) {\n    discard;\n  }\n#endif\n\n  vec3 color = vec3(0, 0, 0);\n\n  if(pbr_uUnlit){\n    color.rgb = baseColor.rgb;\n  }\n  else{\n\n\n    float perceptualRoughness = u_MetallicRoughnessValues.y;\n    float metallic = u_MetallicRoughnessValues.x;\n#ifdef HAS_METALROUGHNESSMAP\n\n    vec4 mrSample = texture2D(u_MetallicRoughnessSampler, pbr_vUV);\n    perceptualRoughness = mrSample.g * perceptualRoughness;\n    metallic = mrSample.b * metallic;\n#endif\n    perceptualRoughness = clamp(perceptualRoughness, c_MinRoughness, 1.0);\n    metallic = clamp(metallic, 0.0, 1.0);\n\n    float alphaRoughness = perceptualRoughness * perceptualRoughness;\n\n    vec3 f0 = vec3(0.04);\n    vec3 diffuseColor = baseColor.rgb * (vec3(1.0) - f0);\n    diffuseColor *= 1.0 - metallic;\n    vec3 specularColor = mix(f0, baseColor.rgb, metallic);\n    float reflectance = max(max(specularColor.r, specularColor.g), specularColor.b);\n\n\n\n    float reflectance90 = clamp(reflectance * 25.0, 0.0, 1.0);\n    vec3 specularEnvironmentR0 = specularColor.rgb;\n    vec3 specularEnvironmentR90 = vec3(1.0, 1.0, 1.0) * reflectance90;\n\n    vec3 n = getNormal();\n    vec3 v = normalize(u_Camera - pbr_vPosition);\n\n    float NdotV = clamp(abs(dot(n, v)), 0.001, 1.0);\n    vec3 reflection = -normalize(reflect(v, n));\n\n    PBRInfo pbrInputs = PBRInfo(\n      0.0,\n      NdotV,\n      0.0,\n      0.0,\n      0.0,\n      perceptualRoughness,\n      metallic,\n      specularEnvironmentR0,\n      specularEnvironmentR90,\n      alphaRoughness,\n      diffuseColor,\n      specularColor,\n      n,\n      v\n    );\n\n#ifdef USE_LIGHTS\n    PBRInfo_setAmbientLight(pbrInputs);\n    color += calculateFinalColor(pbrInputs, lighting_uAmbientLight.color);\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uDirectionalLightCount, i++) {\n      if (i < lighting_uDirectionalLightCount) {\n        PBRInfo_setDirectionalLight(pbrInputs, lighting_uDirectionalLight[i].direction);\n        color += calculateFinalColor(pbrInputs, lighting_uDirectionalLight[i].color);\n      }\n    }\n    SMART_FOR(int i = 0, i < MAX_LIGHTS, i < lighting_uPointLightCount, i++) {\n      if (i < lighting_uPointLightCount) {\n        PBRInfo_setPointLight(pbrInputs, lighting_uPointLight[i]);\n        float attenuation = getPointLightAttenuation(lighting_uPointLight[i], distance(lighting_uPointLight[i].position, pbr_vPosition));\n        color += calculateFinalColor(pbrInputs, lighting_uPointLight[i].color / attenuation);\n      }\n    }\n#endif\n#ifdef USE_IBL\n    color += getIBLContribution(pbrInputs, n, reflection);\n#endif\n#ifdef HAS_OCCLUSIONMAP\n    float ao = texture2D(u_OcclusionSampler, pbr_vUV).r;\n    color = mix(color, color * ao, u_OcclusionStrength);\n#endif\n\n#ifdef HAS_EMISSIVEMAP\n    vec3 emissive = SRGBtoLINEAR(texture2D(u_EmissiveSampler, pbr_vUV)).rgb * u_EmissiveFactor;\n    color += emissive;\n#endif\n\n#ifdef PBR_DEBUG\n\n\n\n\n\n    color = mix(color, baseColor.rgb, u_ScaleDiffBaseMR.y);\n    color = mix(color, vec3(metallic), u_ScaleDiffBaseMR.z);\n    color = mix(color, vec3(perceptualRoughness), u_ScaleDiffBaseMR.w);\n#endif\n\n  }\n\n  return vec4(pow(color,vec3(1.0/2.2)), baseColor.a);\n}\n",defines:{LIGHTING_FRAGMENT:1},dependencies:[YM]};class Yd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t}=e;this.id=t||hr(this.constructor.name),this.display=!0,this.position=new Ri,this.rotation=new Ri,this.scale=new Ri(1,1,1),this.matrix=new Be,this.userData={},this.props={},this._setScenegraphNodeProps(e)}delete(){}setProps(e){return this._setScenegraphNodeProps(e),this}toString(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}getBounds(){return null}setPosition(e){return ee(3===e.length,"setPosition requires vector argument"),this.position=e,this}setRotation(e){return ee(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}setScale(e){return ee(3===e.length,"setScale requires vector argument"),this.scale=e,this}setMatrix(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?this.matrix=e:this.matrix.copy(e)}setMatrixComponents(e){let{position:t,rotation:i,scale:r,update:s=!0}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),s&&this.updateMatrix(),this}updateMatrix(){const e=this.position,t=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(e),this.matrix.rotateXYZ(t),this.matrix.scale(i),this}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{position:t,rotation:i,scale:r}=e;return t&&this.setPosition(t),i&&this.setRotation(i),r&&this.setScale(r),this.updateMatrix(),this}getCoordinateUniforms(e,t){ee(e),t=t||this.matrix;const i=new Be(e).multiplyRight(t),r=i.invert(),s=r.transpose();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:i,worldInverseMatrix:r,worldInverseTransposeMatrix:s}}_setScenegraphNodeProps(e){"display"in e&&(this.display=e.display),"position"in e&&this.setPosition(e.position),"rotation"in e&&this.setRotation(e.rotation),"scale"in e&&this.setScale(e.scale),"matrix"in e&&this.setMatrix(e.matrix),Object.assign(this.props,e)}}class hg extends Yd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Array.isArray(e)?{children:e}:e;const{children:t=[]}=e;ae.assert(t.every(i=>i instanceof Yd),"every child must an instance of ScenegraphNode"),super(e),this.children=t}add(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const r of t)Array.isArray(r)?this.add(...r):this.children.push(r);return this}remove(e){const t=this.children,i=t.indexOf(e);return i>-1&&t.splice(i,1),this}removeAll(){return this.children=[],this}delete(){this.children.forEach(e=>e.delete()),this.removeAll(),super.delete()}getBounds(){const e=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];return this.traverse((t,i)=>{let{worldMatrix:r}=i;const s=t.getBounds();if(!s)return;const[o,a]=s,c=new Ri(o).add(a).divide([2,2,2]);r.transformAsPoint(c,c);const l=new Ri(a).subtract(o).divide([2,2,2]);r.transformAsVector(l,l);for(let u=0;u<8;u++){const d=new Ri(1&u?-1:1,2&u?-1:1,4&u?-1:1).multiply(l).add(c);for(let h=0;h<3;h++)e[0][h]=Math.min(e[0][h],d[h]),e[1][h]=Math.max(e[1][h],d[h])}}),Number.isFinite(e[0][0])?e:null}traverse(e){let{worldMatrix:t=new Be}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new Be(t).multiplyRight(this.matrix);for(const r of this.children)r instanceof hg?r.traverse(e,{worldMatrix:i}):e(r,{worldMatrix:i})}}let Pb;class ZM extends ez{static get ZERO(){return Pb||(Pb=new ZM(0,0,0,0),Object.freeze(Pb)),Pb}constructor(e=0,t=0,i=0,r=0){super(-0,-0,-0,-0),Jo(e)&&1===arguments.length?this.copy(e):(En.debug&&(Bt(e),Bt(t),Bt(i),Bt(r)),this[0]=e,this[1]=t,this[2]=i,this[3]=r)}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return En.debug&&(Bt(e.x),Bt(e.y),Bt(e.z),Bt(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=Bt(e)}get w(){return this[3]}set w(e){this[3]=Bt(e)}transform(e){return GT(this,this,e),this.check()}transformByMatrix3(e){return function qde(n,e,t){const i=e[0],r=e[1],s=e[2];n[0]=t[0]*i+t[3]*r+t[6]*s,n[1]=t[1]*i+t[4]*r+t[7]*s,n[2]=t[2]*i+t[5]*r+t[8]*s,n[3]=e[3]}(this,this,e),this.check()}transformByMatrix2(e){return function $de(n,e,t){const i=e[0],r=e[1];n[0]=t[0]*i+t[2]*r,n[1]=t[1]*i+t[3]*r,n[2]=e[2],n[3]=e[3]}(this,this,e),this.check()}transformByQuaternion(e){return vU(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}function e6(){var n=new ur(4);return ur!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function t6(n,e,t){t*=.5;var i=Math.sin(t);return n[0]=i*e[0],n[1]=i*e[1],n[2]=i*e[2],n[3]=Math.cos(t),n}function n6(n,e,t){var i=e[0],r=e[1],s=e[2],o=e[3],a=t[0],c=t[1],l=t[2],u=t[3];return n[0]=i*u+o*a+r*l-s*c,n[1]=r*u+o*c+s*a-i*l,n[2]=s*u+o*l+i*c-r*a,n[3]=o*u-i*a-r*c-s*l,n}var s6=bU,nMe=function(){var n=mU(),e=_U(1,0,0),t=_U(0,1,0);return function(i,r,s){var o=yU(r,s);return o<-.999999?(rv(n,e,r),function dhe(n){return Math.hypot(n[0],n[1],n[2])}(n)<1e-6&&rv(n,t,r),function phe(n,e){var t=e[0],i=e[1],r=e[2],s=t*t+i*i+r*r;s>0&&(s=1/Math.sqrt(s)),n[0]=e[0]*s,n[1]=e[1]*s,n[2]=e[2]*s}(n,n),t6(i,n,Math.PI),i):o>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(rv(n,r,s),i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=1+o,function Dhe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s;return o>0&&(o=1/Math.sqrt(o)),n[0]=t*o,n[1]=i*o,n[2]=r*o,n[3]=s*o,n}(i,i))}}();e6(),e6(),function Hxe(){var n=new ur(9);ur!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1}();const iMe=[0,0,0,1],sMe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},oMe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function c6(n){if(!n._animation){const e=oMe[n.componentType],t=sMe[n.type],i=t*n.count,{buffer:r,byteOffset:s}=n.bufferView.data,o=new e(r,s+(n.byteOffset||0),i);if(1===t)n._animation=Array.from(o);else{const a=[];for(let c=0;c<o.length;c+=t)a.push(Array.from(o.slice(c,c+t)));n._animation=a}}return n._animation}const aMe=new Be,QM=new class rMe extends jT{constructor(e=0,t=0,i=0,r=1){super(-0,-0,-0,-0),Array.isArray(e)&&1===arguments.length?this.copy(e):this.set(e,t,i,r)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,t,i,r){return this[0]=e,this[1]=t,this[2]=i,this[3]=r,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return function r6(n,e){var i,t=e[0]+e[4]+e[8];if(t>0)i=Math.sqrt(t+1),n[3]=.5*i,n[0]=(e[5]-e[7])*(i=.5/i),n[1]=(e[6]-e[2])*i,n[2]=(e[1]-e[3])*i;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var s=(r+1)%3,o=(r+2)%3;i=Math.sqrt(e[3*r+r]-e[3*s+s]-e[3*o+o]+1),n[r]=.5*i,n[3]=(e[3*s+o]-e[3*o+s])*(i=.5/i),n[s]=(e[3*s+r]+e[3*r+s])*i,n[o]=(e[3*o+r]+e[3*r+o])*i}return n}(this,e),this.check()}fromAxisRotation(e,t){return t6(this,e,t),this.check()}identity(){return function zxe(n){n[0]=0,n[1]=0,n[2]=0,n[3]=1}(this),this.check()}setAxisAngle(e,t){return this.fromAxisRotation(e,t)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=Bt(e)}get y(){return this[1]}set y(e){this[1]=Bt(e)}get z(){return this[2]}set z(e){this[2]=Bt(e)}get w(){return this[3]}set w(e){this[3]=Bt(e)}len(){return function Mhe(n){return Math.hypot(n[0],n[1],n[2],n[3])}(this)}lengthSquared(){return function Ihe(n){var e=n[0],t=n[1],i=n[2],r=n[3];return e*e+t*t+i*i+r*r}(this)}dot(e){return function Rhe(n,e){return n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3]}(this,e)}rotationTo(e,t){return nMe(this,e,t),this.check()}add(e){return function xhe(n,e,t){n[0]=e[0]+t[0],n[1]=e[1]+t[1],n[2]=e[2]+t[2],n[3]=e[3]+t[3]}(this,this,e),this.check()}calculateW(){return function qxe(n,e){var t=e[0],i=e[1],r=e[2];n[0]=t,n[1]=i,n[2]=r,n[3]=Math.sqrt(Math.abs(1-t*t-i*i-r*r))}(this,this),this.check()}conjugate(){return function Jxe(n,e){n[0]=-e[0],n[1]=-e[1],n[2]=-e[2],n[3]=e[3]}(this,this),this.check()}invert(){return function Kxe(n,e){var t=e[0],i=e[1],r=e[2],s=e[3],o=t*t+i*i+r*r+s*s,a=o?1/o:0;n[0]=-t*a,n[1]=-i*a,n[2]=-r*a,n[3]=s*a}(this,this),this.check()}lerp(e,t,i){return void 0===i?this.lerp(this,e,t):(function Ohe(n,e,t,i){var r=e[0],s=e[1],o=e[2],a=e[3];n[0]=r+i*(t[0]-r),n[1]=s+i*(t[1]-s),n[2]=o+i*(t[2]-o),n[3]=a+i*(t[3]-a)}(this,e,t,i),this.check())}multiplyRight(e){return n6(this,this,e),this.check()}multiplyLeft(e){return n6(this,e,this),this.check()}normalize(){const e=this.len(),t=e>0?1/e:0;return this[0]=this[0]*t,this[1]=this[1]*t,this[2]=this[2]*t,this[3]=this[3]*t,0===e&&(this[3]=1),this.check()}rotateX(e){return function Gxe(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+o*a,n[1]=r*c+s*a,n[2]=s*c-r*a,n[3]=o*c-i*a}(this,this,e),this.check()}rotateY(e){return function Wxe(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c-s*a,n[1]=r*c+o*a,n[2]=s*c+i*a,n[3]=o*c-r*a}(this,this,e),this.check()}rotateZ(e){return function $xe(n,e,t){t*=.5;var i=e[0],r=e[1],s=e[2],o=e[3],a=Math.sin(t),c=Math.cos(t);n[0]=i*c+r*a,n[1]=r*c-i*a,n[2]=s*c+o*a,n[3]=o*c-s*a}(this,this,e),this.check()}scale(e){return s6(this,this,e),this.check()}slerp(e,t,i){let r,s,o;switch(arguments.length){case 1:({start:r=iMe,target:s,ratio:o}=e);break;case 2:r=this,s=e,o=t;break;default:r=e,s=t,o=i}return function Nb(n,e,t,i){var h,f,p,g,m,r=e[0],s=e[1],o=e[2],a=e[3],c=t[0],l=t[1],u=t[2],d=t[3];return(f=r*c+s*l+o*u+a*d)<0&&(f=-f,c=-c,l=-l,u=-u,d=-d),1-f>io?(h=Math.acos(f),p=Math.sin(h),g=Math.sin((1-i)*h)/p,m=Math.sin(i*h)/p):(g=1-i,m=i),n[0]=g*r+m*c,n[1]=g*s+m*l,n[2]=g*o+m*u,n[3]=g*a+m*d,n}(this,r,s,o),this.check()}transformVector4(e,t=new ZM){return function Phe(n,e,t){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],c=t[2],l=t[3],u=l*i+a*s-c*r,d=l*r+c*i-o*s,h=l*s+o*r-a*i,f=-o*i-a*r-c*s;n[0]=u*l+f*-o+d*-c-h*-a,n[1]=d*l+f*-a+h*-o-u*-c,n[2]=h*l+f*-c+u*-a-d*-o,n[3]=e[3]}(t,e,this),tv(t,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,t){return this.setAxisAngle(e,t)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}};class fMe{constructor(e){this.startTime=0,this.playing=!0,this.speed=1,this.channels=[],Object.assign(this,e)}animate(e){if(!this.playing)return;const i=(e/1e3-this.startTime)*this.speed;this.channels.forEach(r=>{let{sampler:s,target:o,path:a}=r;(function hMe(n,e,t,i){let{input:r,interpolation:s,output:o}=e;const c=n%r[r.length-1],l=r.findIndex(f=>f>=c),u=Math.max(0,l-1);if(!Array.isArray(t[i]))switch(i){case"translation":t[i]=[0,0,0];break;case"rotation":t[i]=[0,0,0,1];break;case"scale":t[i]=[1,1,1];break;default:ae.warn("Bad animation path ".concat(i))()}ee(t[i].length===o[u].length);const d=r[u],h=r[l];switch(s){case"STEP":!function dMe(n,e,t){for(let i=0;i<t.length;i++)n[e][i]=t[i]}(t,i,o[u]);break;case"LINEAR":h>d&&function lMe(n,e,t,i,r){if("rotation"===e){QM.slerp({start:t,target:i,ratio:r});for(let s=0;s<QM.length;s++)n[e][s]=QM[s]}else for(let s=0;s<t.length;s++)n[e][s]=r*i[s]+(1-r)*t[s]}(t,i,o[u],o[l],(c-d)/(h-d));break;case"CUBICSPLINE":h>d&&function uMe(n,e,t){let{p0:i,outTangent0:r,inTangent1:s,p1:o,tDiff:a,ratio:c}=t;for(let l=0;l<n[e].length;l++){const u=r[l]*a,d=s[l]*a;n[e][l]=(2*Math.pow(c,3)-3*Math.pow(c,2)+1)*i[l]+(Math.pow(c,3)-2*Math.pow(c,2)+c)*u+(-2*Math.pow(c,3)+3*Math.pow(c,2))*o[l]+(Math.pow(c,3)-Math.pow(c,2))*d}}(t,i,{p0:o[3*u+1],outTangent0:o[3*u+2],inTangent1:o[3*l+0],p1:o[3*l+1],tDiff:h-d,ratio:(c-d)/(h-d)});break;default:ae.warn("Interpolation ".concat(s," not supported"))()}})(i,s,o,a),function cMe(n,e){if(e.matrix.identity(),n.translation&&e.matrix.translate(n.translation),n.rotation){const t=aMe.fromQuaternion(n.rotation);e.matrix.multiplyRight(t)}n.scale&&e.matrix.scale(n.scale)}(o,o._node)})}}class pMe{constructor(e){this.animations=e.animations.map((t,i)=>{const r=t.name||"Animation-".concat(i),s=t.samplers.map(a=>{let{input:c,interpolation:l="LINEAR",output:u}=a;return{input:c6(e.accessors[c]),interpolation:l,output:c6(e.accessors[u])}}),o=t.channels.map(a=>{let{sampler:c,target:l}=a;return{sampler:s[c],target:e.nodes[l.node],path:l.path}});return new fMe({name:r,channels:o})})}animate(e){this.setTime(e)}setTime(e){this.animations.forEach(t=>t.animate(e))}getAnimations(){return this.animations}}class gMe extends Yd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(t),this.onBeforeRender=null,this.AfterRender=null,e instanceof Xd?(this.model=e,this._setModelNodeProps(t)):this.model=new Xd(e,t),this.bounds=null,this.managedResources=t.managedResources||[]}setProps(e){return super.setProps(e),this._setModelNodeProps(e),this}getBounds(){return this.bounds}delete(){this.model&&(this.model.delete(),this.model=null),this.managedResources.forEach(e=>e.delete()),this.managedResources=[]}draw(){return this.model.draw(...arguments)}setUniforms(){return this.model.setUniforms(...arguments),this}setAttributes(){return this.model.setAttributes(...arguments),this}updateModuleSettings(){return this.model.updateModuleSettings(...arguments),this}_setModelNodeProps(e){this.model.setProps(e)}}class mMe{constructor(e,t){let{attributes:i,material:r,pbrDebug:s,imageBasedLightingEnvironment:o,lights:a,useTangents:c}=t;this.gl=e,this.defines={MANUAL_SRGB:1,SRGB_FAST_APPROXIMATION:1},Ex(e,"GLSL_TEXTURE_LOD")&&(this.defines.USE_TEX_LOD=1),this.uniforms={u_Camera:[0,0,0],u_MetallicRoughnessValues:[1,1]},this.parameters={},this.generatedTextures=[],o&&(this.uniforms.u_DiffuseEnvSampler=o.getDiffuseEnvSampler(),this.uniforms.u_SpecularEnvSampler=o.getSpecularEnvSampler(),this.uniforms.u_brdfLUT=o.getBrdfTexture(),this.uniforms.u_ScaleIBLAmbient=[1,1]),s&&(this.uniforms.u_ScaleDiffBaseMR=[0,0,0,0],this.uniforms.u_ScaleFGDSpec=[0,0,0,0]),this.defineIfPresent(i.NORMAL,"HAS_NORMALS"),this.defineIfPresent(i.TANGENT&&c,"HAS_TANGENTS"),this.defineIfPresent(i.TEXCOORD_0,"HAS_UV"),this.defineIfPresent(o,"USE_IBL"),this.defineIfPresent(a,"USE_LIGHTS"),this.defineIfPresent(s,"PBR_DEBUG"),r&&this.parseMaterial(r)}defineIfPresent(e,t){e&&(this.defines[t]=1)}parseTexture(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=e.texture&&e.texture.sampler&&e.texture.sampler.parameters||{},s=e.texture.source.image;let o,a={};s.compressed?(o=s,a={[this.gl.TEXTURE_MIN_FILTER]:s.data.length>1?this.gl.LINEAR_MIPMAP_NEAREST:this.gl.LINEAR}):o={data:s};const c=new _i(this.gl,{id:e.name||e.id,parameters:{...r,...a},pixelStore:{[this.gl.UNPACK_FLIP_Y_WEBGL]:!1},...o});this.uniforms[t]=c,this.defineIfPresent(i,i),this.generatedTextures.push(c)}parsePbrMetallicRoughness(e){e.baseColorTexture&&this.parseTexture(e.baseColorTexture,"u_BaseColorSampler","HAS_BASECOLORMAP"),this.uniforms.u_BaseColorFactor=e.baseColorFactor||[1,1,1,1],e.metallicRoughnessTexture&&this.parseTexture(e.metallicRoughnessTexture,"u_MetallicRoughnessSampler","HAS_METALROUGHNESSMAP");const{metallicFactor:t=1,roughnessFactor:i=1}=e;this.uniforms.u_MetallicRoughnessValues=[t,i]}parseMaterial(e){if(this.uniforms.pbr_uUnlit=!!e.unlit,e.pbrMetallicRoughness&&this.parsePbrMetallicRoughness(e.pbrMetallicRoughness),e.normalTexture){this.parseTexture(e.normalTexture,"u_NormalSampler","HAS_NORMALMAP");const{scale:t=1}=e.normalTexture;this.uniforms.u_NormalScale=t}if(e.occlusionTexture){this.parseTexture(e.occlusionTexture,"u_OcclusionSampler","HAS_OCCLUSIONMAP");const{strength:t=1}=e.occlusionTexture;this.uniforms.u_OcclusionStrength=t}if(e.emissiveTexture&&(this.parseTexture(e.emissiveTexture,"u_EmissiveSampler","HAS_EMISSIVEMAP"),this.uniforms.u_EmissiveFactor=e.emissiveFactor||[0,0,0]),"MASK"===e.alphaMode){const{alphaCutoff:t=.5}=e;this.defines.ALPHA_CUTOFF=1,this.uniforms.u_AlphaCutoff=t}else"BLEND"===e.alphaMode&&(ae.warn("BLEND alphaMode might not work well because it requires mesh sorting")(),Object.assign(this.parameters,{blend:!0,blendEquation:this.gl.FUNC_ADD,blendFunc:[this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA]}))}delete(){this.generatedTextures.forEach(e=>e.delete())}}function l6(n,e){return $e(n)?"#version 300 es\n".concat(e):e}const bMe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},EMe={modelOptions:{},pbrDebug:!1,imageBasedLightingEnvironment:null,lights:!0,useTangents:!1};class wMe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.gl=e,this.options=Object.assign({},EMe,t)}instantiate(e){return this.gltf=e,(e.scenes||[]).map(i=>this.createScene(i))}createAnimator(){return Array.isArray(this.gltf.animations)?new pMe(this.gltf):null}createScene(e){const i=(e.nodes||[]).map(s=>this.createNode(s));return new hg({id:e.name||e.id,children:i})}createNode(e){if(!e._node){const i=(e.children||[]).map(s=>this.createNode(s));e.mesh&&i.push(this.createMesh(e.mesh));const r=new hg({id:e.name||e.id,children:i});if(e.matrix)r.setMatrix(e.matrix);else{if(r.matrix.identity(),e.translation&&r.matrix.translate(e.translation),e.rotation){const s=(new Be).fromQuaternion(e.rotation);r.matrix.multiplyRight(s)}e.scale&&r.matrix.scale(e.scale)}e._node=r}return e._node}createMesh(e){if(!e._mesh){const i=(e.primitives||[]).map((s,o)=>this.createPrimitive(s,o,e)),r=new hg({id:e.name||e.id,children:i});e._mesh=r}return e._mesh}getVertexCount(e){ae.warn("getVertexCount() not found")()}createPrimitive(e,t,i){const r=function vMe(n,e){const{id:t,drawMode:i,vertexCount:r,attributes:s,modelOptions:o}=e,a=new mMe(n,e);ae.info(4,"createGLTFModel defines: ",a.defines)();const c=[];c.push(...a.generatedTextures),c.push(...Object.values(s).map(u=>u.buffer));const l=new gMe(n,{id:t,drawMode:i,vertexCount:r,modules:[Q8],parameters:a.parameters,vs:l6(n,"\n#if (__VERSION__ < 300)\n  #define _attr attribute\n#else\n  #define _attr in\n#endif\n\n  _attr vec4 POSITION;\n\n  #ifdef HAS_NORMALS\n    _attr vec4 NORMAL;\n  #endif\n\n  #ifdef HAS_TANGENTS\n    _attr vec4 TANGENT;\n  #endif\n\n  #ifdef HAS_UV\n    _attr vec2 TEXCOORD_0;\n  #endif\n\n  void main(void) {\n    vec4 _NORMAL = vec4(0.);\n    vec4 _TANGENT = vec4(0.);\n    vec2 _TEXCOORD_0 = vec2(0.);\n\n    #ifdef HAS_NORMALS\n      _NORMAL = NORMAL;\n    #endif\n\n    #ifdef HAS_TANGENTS\n      _TANGENT = TANGENT;\n    #endif\n\n    #ifdef HAS_UV\n      _TEXCOORD_0 = TEXCOORD_0;\n    #endif\n\n    pbr_setPositionNormalTangentUV(POSITION, _NORMAL, _TANGENT, _TEXCOORD_0);\n    gl_Position = u_MVPMatrix * POSITION;\n  }\n"),fs:l6(n,"\n#if (__VERSION__ < 300)\n  #define fragmentColor gl_FragColor\n#else\n  out vec4 fragmentColor;\n#endif\n\n  void main(void) {\n    fragmentColor = pbr_filterColor(vec4(0));\n  }\n"),managedResources:c,...o,defines:{...a.defines,...o.defines}});return l.setProps({attributes:s}),l.setUniforms(a.uniforms),l}(this.gl,Object.assign({id:e.name||"".concat(i.name||i.id,"-primitive-").concat(t),drawMode:e.mode||4,vertexCount:e.indices?e.indices.count:this.getVertexCount(e.attributes),attributes:this.createAttributes(e.attributes,e.indices),material:e.material},this.options));return r.bounds=[e.attributes.POSITION.min,e.attributes.POSITION.max],r}createAttributes(e,t){const i={};return Object.keys(e).forEach(r=>{i[r]=this.createAccessor(e[r],this.createBuffer(e[r],this.gl.ARRAY_BUFFER))}),t&&(i.indices=this.createAccessor(t,this.createBuffer(t,this.gl.ELEMENT_ARRAY_BUFFER))),ae.info(4,"glTF Attributes",{attributes:e,indices:t,generated:i})(),i}createBuffer(e,t){e.bufferView||(e.bufferView={});const{bufferView:i}=e;return i.lumaBuffers||(i.lumaBuffers={}),i.lumaBuffers[t]||(i.lumaBuffers[t]=new Pt(this.gl,{id:"from-".concat(i.id),data:i.data||e.value,target:t})),i.lumaBuffers[t]}createAccessor(e,t){return new fr({buffer:t,offset:e.byteOffset||0,stride:e.bufferView.byteStride||0,type:e.componentType,size:bMe[e.type]})}createSampler(e){return e}needsPOT(){return!1}}var fg=Qe(435);const SMe="3.2.13",eI={};function Rl(n){return tI.apply(this,arguments)}function tI(){return tI=te(function*(n,e=null,t={}){return e&&(n=function xMe(n,e,t){if(n.startsWith("http"))return n;const i=t.modules||{};return i[n]?i[n]:uc?t.CDN?(go(t.CDN.startsWith("http")),"".concat(t.CDN,"/").concat(e,"@").concat(SMe,"/dist/libs/").concat(n)):zx?"../src/libs/".concat(n):"modules/".concat(e,"/src/libs/").concat(n):"modules/".concat(e,"/dist/libs/").concat(n)}(n,e,t)),eI[n]=eI[n]||function MMe(n){return nI.apply(this,arguments)}(n),yield eI[n]}),tI.apply(this,arguments)}function nI(){return nI=te(function*(n){if(n.endsWith("wasm"))return yield(yield fetch(n)).arrayBuffer();if(!uc)try{return fg&&fg.requireFromFile&&(yield fg.requireFromFile(n))}catch{return null}return zx?importScripts(n):function IMe(n,e){if(!uc)return fg.requireFromString&&fg.requireFromString(n,e);if(zx)return eval.call(cwe,n),null;const t=document.createElement("script");t.id=e;try{t.appendChild(document.createTextNode(n))}catch{t.text=n}return document.body.appendChild(t),null}(yield(yield fetch(n)).text(),n)}),nI.apply(this,arguments)}const DMe="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.wasm"),RMe="https://unpkg.com/@loaders.gl/textures@".concat("3.2.13","/dist/libs/basis_encoder.js");let iI,oI;function d6(n){return rI.apply(this,arguments)}function rI(){return rI=te(function*(n){const e=n.modules||{};return e.basis?e.basis:(iI=iI||function OMe(n){return sI.apply(this,arguments)}(n),yield iI)}),rI.apply(this,arguments)}function sI(){return sI=te(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield Rl("basis_transcoder.js","textures",n),yield Rl("basis_transcoder.wasm","textures",n)]),e=e||globalThis.BASIS,yield function PMe(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:s,initializeBasis:o}=r;o(),i({BasisFile:s})})})}(e,t)}),sI.apply(this,arguments)}function h6(n){return aI.apply(this,arguments)}function aI(){return aI=te(function*(n){const e=n.modules||{};return e.basisEncoder?e.basisEncoder:(oI=oI||function NMe(n){return cI.apply(this,arguments)}(n),yield oI)}),aI.apply(this,arguments)}function cI(){return cI=te(function*(n){let e=null,t=null;return[e,t]=yield Promise.all([yield Rl(RMe,"textures",n),yield Rl(DMe,"textures",n)]),e=e||globalThis.BASIS,yield function FMe(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n(t).then(r=>{const{BasisFile:s,KTX2File:o,initializeBasis:a,BasisEncoder:c}=r;a(),i({BasisFile:s,KTX2File:o,BasisEncoder:c})})})}(e,t)}),cI.apply(this,arguments)}const kMe=["","WEBKIT_","MOZ_"],f6={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"};let Fb=null;var lI,kb,uI,Lb,g6,dI,m6,_6;new Uint8Array([0]),function(n){n[n.NONE=0]="NONE",n[n.BASISLZ=1]="BASISLZ",n[n.ZSTD=2]="ZSTD",n[n.ZLIB=3]="ZLIB"}(lI||(lI={})),function(n){n[n.BASICFORMAT=0]="BASICFORMAT"}(kb||(kb={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.ETC1S=163]="ETC1S",n[n.UASTC=166]="UASTC"}(uI||(uI={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.SRGB=1]="SRGB"}(Lb||(Lb={})),function(n){n[n.UNSPECIFIED=0]="UNSPECIFIED",n[n.LINEAR=1]="LINEAR",n[n.SRGB=2]="SRGB",n[n.ITU=3]="ITU",n[n.NTSC=4]="NTSC",n[n.SLOG=5]="SLOG",n[n.SLOG2=6]="SLOG2"}(g6||(g6={})),function(n){n[n.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",n[n.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(dI||(dI={})),function(n){n[n.RGB=0]="RGB",n[n.RRR=3]="RRR",n[n.GGG=4]="GGG",n[n.AAA=15]="AAA"}(m6||(m6={})),function(n){n[n.RGB=0]="RGB",n[n.RGBA=3]="RGBA",n[n.RRR=4]="RRR",n[n.RRRG=5]="RRRG"}(_6||(_6={}));const Fr=[171,75,84,88,32,50,48,187,13,10,26,10],HMe={etc1:{basisFormat:0,compressed:!0,format:36196},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:33776},bc3:{basisFormat:3,compressed:!0,format:33779},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:35840},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:35842},"astc-4x4":{basisFormat:10,compressed:!0,format:37808},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};function fI(){return fI=te(function*(n,e){if("auto"===e.basis.containerFormat){if(function jMe(n){const e=new Uint8Array(n);return!(e.byteLength<Fr.length||e[0]!==Fr[0]||e[1]!==Fr[1]||e[2]!==Fr[2]||e[3]!==Fr[3]||e[4]!==Fr[4]||e[5]!==Fr[5]||e[6]!==Fr[6]||e[7]!==Fr[7]||e[8]!==Fr[8]||e[9]!==Fr[9]||e[10]!==Fr[10]||e[11]!==Fr[11])}(n))return b6((yield h6(e)).KTX2File,n,e);const{BasisFile:t}=yield d6(e);return pI(t,n,e)}if("encoder"===e.basis.module){const t=yield h6(e);return"ktx2"===e.basis.containerFormat?b6(t.KTX2File,n,e):pI(t.BasisFile,n,e)}{const{BasisFile:i}=yield d6(e);return pI(i,n,e)}}),fI.apply(this,arguments)}function pI(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("Failed to start basis transcoding");const r=i.getNumImages(),s=[];for(let o=0;o<r;o++){const a=i.getNumLevels(o),c=[];for(let l=0;l<a;l++)c.push(GMe(i,o,l,t));s.push(c)}return s}finally{i.close(),i.delete()}}function GMe(n,e,t,i){const r=n.getImageWidth(e,t),s=n.getImageHeight(e,t),o=n.getHasAlpha(),{compressed:a,format:c,basisFormat:l}=E6(i,o),u=n.getImageTranscodedSizeInBytes(e,t,l),d=new Uint8Array(u);if(!n.transcodeImage(d,e,t,l,0,0))throw new Error("failed to start Basis transcoding");return{width:r,height:s,data:d,compressed:a,format:c,hasAlpha:o}}function b6(n,e,t){const i=new n(new Uint8Array(e));try{if(!i.startTranscoding())throw new Error("failed to start KTX2 transcoding");const r=i.getLevels(),s=[];for(let o=0;o<r;o++){s.push(WMe(i,o,t));break}return[s]}finally{i.close(),i.delete()}}function WMe(n,e,t){const{alphaFlag:i,height:r,width:s}=n.getImageLevelInfo(e,0,0),{compressed:o,format:a,basisFormat:c}=E6(t,i),l=n.getImageTranscodedSizeInBytes(e,0,0,c),u=new Uint8Array(l);if(!n.transcodeImage(u,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:r,data:u,compressed:o,hasAlpha:i,format:a}}function E6(n,e){let t=n&&n.basis&&n.basis.format;return"auto"===t&&(t=w6()),"object"==typeof t&&(t=e?t.alpha:t.noAlpha),t=t.toLowerCase(),HMe[t]}function w6(){const n=function LMe(n){if(!Fb){n=n||function BMe(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}()||void 0,Fb=new Set;for(const e of kMe)for(const t in f6)n&&n.getExtension("".concat(e).concat(t))&&Fb.add(f6[t])}return Fb}();return n.has("astc")?"astc-4x4":n.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:n.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:n.has("etc1")?"etc1":n.has("etc2")?"etc2":"rgb565"}const $Me={name:"Basis",id:"basis",module:"textures",version:"3.2.13",worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}},parse:function zMe(n,e){return fI.apply(this,arguments)}};function Ol(n,e){if(!n)throw new Error(e||"loader assertion failed.")}typeof self<"u"&&self,typeof window<"u"&&window,typeof global<"u"&&global,typeof document<"u"&&document;const Vb=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser),C6=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),{_parseImageNode:XMe}=(C6&&parseFloat(C6[1]),globalThis),gI=typeof Image<"u",mI=typeof ImageBitmap<"u",_I=!!Vb||!!XMe;function A6(n){const e=function S6(n){return typeof ImageBitmap<"u"&&n instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&n instanceof Image?"image":n&&"object"==typeof n&&n.data&&n.width&&n.height?"data":null}(n);if(!e)throw new Error("Not an image");return e}const JMe=/^data:image\/svg\+xml/,ZMe=/\.svg((\?|#).*)?$/;function yI(n){return n&&(JMe.test(n)||ZMe.test(n))}function x6(n,e){if(yI(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(n)])}function M6(n,e,t){return vI.apply(this,arguments)}function vI(){return vI=te(function*(n,e,t){const i=function QMe(n,e){if(yI(e)){let i=(new TextDecoder).decode(n);try{"function"==typeof unescape&&"function"==typeof encodeURIComponent&&(i=unescape(encodeURIComponent(i)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(i))}return x6(n,e)}(n,t),r=self.URL||self.webkitURL,s="string"!=typeof i&&r.createObjectURL(i);try{return yield function eIe(n,e){return bI.apply(this,arguments)}(s||i,e)}finally{s&&r.revokeObjectURL(s)}}),vI.apply(this,arguments)}function bI(){return bI=te(function*(n,e){const t=new Image;return t.src=n,e.image&&e.image.decode&&t.decode?(yield t.decode(),t):yield new Promise((i,r)=>{try{t.onload=()=>i(t),t.onerror=s=>r(new Error("Could not load image ".concat(n,": ").concat(s)))}catch(s){r(s)}})}),bI.apply(this,arguments)}const tIe={};let I6=!0;function EI(){return EI=te(function*(n,e,t){let i;i=yI(t)?yield M6(n,e,t):x6(n,t);const r=e&&e.imagebitmap;return yield function iIe(n){return wI.apply(this,arguments)}(i,r)}),EI.apply(this,arguments)}function wI(){return wI=te(function*(n,e=null){if((function rIe(n){for(const e in n||tIe)return!1;return!0}(e)||!I6)&&(e=null),e)try{return yield createImageBitmap(n,e)}catch(t){console.warn(t),I6=!1}return yield createImageBitmap(n)}),wI.apply(this,arguments)}const wo=!1,gg=!0;function CI(n){const e=mg(n);return function sIe(n){const e=mg(n);return e.byteLength>=24&&2303741511===e.getUint32(0,wo)?{mimeType:"image/png",width:e.getUint32(16,wo),height:e.getUint32(20,wo)}:null}(e)||function cIe(n){const e=mg(n);if(!(e.byteLength>=3&&65496===e.getUint16(0,wo)&&255===e.getUint8(2)))return null;const{tableMarkers:i,sofMarkers:r}=function lIe(){const n=new Set([65499,65476,65484,65501,65534]);for(let t=65504;t<65520;++t)n.add(t);return{tableMarkers:n,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,wo);if(r.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,wo),width:e.getUint16(s+7,wo)};if(!i.has(o))return null;s+=2,s+=e.getUint16(s,wo)}return null}(e)||function oIe(n){const e=mg(n);return e.byteLength>=10&&1195984440===e.getUint32(0,wo)?{mimeType:"image/gif",width:e.getUint16(6,gg),height:e.getUint16(8,gg)}:null}(e)||function aIe(n){const e=mg(n);return e.byteLength>=14&&16973===e.getUint16(0,wo)&&e.getUint32(2,gg)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,gg),height:e.getUint32(22,gg)}:null}(e)}function mg(n){if(n instanceof DataView)return n;if(ArrayBuffer.isView(n))return new DataView(n.buffer);if(n instanceof ArrayBuffer)return new DataView(n);throw new Error("toDataView")}function AI(){return AI=te(function*(n,e){const{mimeType:t}=CI(n)||{},i=globalThis._parseImageNode;return Ol(i),yield i(n,t)}),AI.apply(this,arguments)}function TI(){return TI=te(function*(n,e,t){const r=((e=e||{}).image||{}).type||"auto",{url:s}=t||{},o=function hIe(n){switch(n){case"auto":case"data":return function KMe(){if(mI)return"imagebitmap";if(gI)return"image";if(_I)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}();default:return function YMe(n){switch(n){case"auto":return mI||gI||_I;case"imagebitmap":return mI;case"image":return gI;case"data":return _I;default:throw new Error("@loaders.gl/images: image ".concat(n," not supported in this environment"))}}(n),n}}(r);let a;switch(o){case"imagebitmap":a=yield function nIe(n,e,t){return EI.apply(this,arguments)}(n,e,s);break;case"image":a=yield M6(n,e,s);break;case"data":a=yield function uIe(n,e){return AI.apply(this,arguments)}(n,e);break;default:Ol(!1)}return"data"===r&&(a=function T6(n){switch(A6(n)){case"data":return n;case"image":case"imagebitmap":const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)throw new Error("getImageData");return e.width=n.width,e.height=n.height,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height);default:throw new Error("getImageData")}}(a)),a}),TI.apply(this,arguments)}const fIe={id:"image",module:"images",name:"Images",version:"3.2.13",mimeTypes:["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],extensions:["png","jpg","jpeg","gif","webp","bmp","ico","svg"],parse:function dIe(n,e,t){return TI.apply(this,arguments)},tests:[n=>!!CI(new DataView(n))],options:{image:{type:"auto",decode:!0}}};function D6(n,e,t){if(n.byteLength<=e+t)return"";const i=new DataView(n);let r="";for(let s=0;s<t;s++)r+=String.fromCharCode(i.getUint8(e+s));return r}function R6(n,e,t){const i=void 0!==t?new Uint8Array(n).subarray(e,e+t):new Uint8Array(n).subarray(e);return new Uint8Array(i).buffer}function kr(n,e){if(!n)throw new Error(e||"assert failed: gltf")}function O6(n,e){if(n.startsWith("data:")||n.startsWith("http:")||n.startsWith("https:"))return n;const i=e.baseUri||e.uri;if(!i)throw new Error("'baseUri' must be provided to resolve relative url ".concat(n));return i.substr(0,i.lastIndexOf("/")+1)+n}function _g(n,e){return Ol(n>=0),Ol(e>0),n+(e-1)&~(e-1)}function mIe(n,e,t){let i;return i=n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer||n.arrayBuffer,n.byteOffset,n.byteLength),e.set(i,t),t+_g(i.byteLength,4)}const N6=["SCALAR","VEC2","VEC3","VEC4"],_Ie=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],yIe=new Map(_Ie),vIe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},bIe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},EIe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function F6(n){return N6[n-1]||N6[0]}function k6(n){const e=yIe.get(n.constructor);if(!e)throw new Error("Illegal typed array");return e}function L6(n,e){const t=EIe[n.componentType],i=vIe[n.type],s=n.count*i,o=n.count*i*bIe[n.componentType];return kr(o>=0&&o<=e.byteLength),{ArrayType:t,length:s,byteLength:o}}const wIe={asset:{version:"2.0",generator:"loaders.gl"},buffers:[]};class is{constructor(e){E(this,"gltf",void 0),E(this,"sourceBuffers",void 0),E(this,"byteLength",void 0),this.gltf=e||{json:{...wIe},buffers:[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}getExtension(e){return this.getUsedExtensions().find(r=>r===e)?(this.json.extensions||{})[e]||!0:null}getRequiredExtension(e){return this.getRequiredExtensions().find(i=>i===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getObjectExtension(e,t){return(e.extensions||{})[t]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];if(!i)throw new Error("glTF file error: Could not find ".concat(e,"[").concat(t,"]"));return i}getTypedArrayForBufferView(e){e=this.getBufferView(e);const i=this.gltf.buffers[e.buffer];return kr(i),new Uint8Array(i.arrayBuffer,(e.byteOffset||0)+i.byteOffset,e.byteLength)}getTypedArrayForAccessor(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data,{ArrayType:s,length:o}=L6(e,t);return new s(r,t.byteOffset+e.byteOffset,o)}getTypedArrayForImageData(e){e=this.getAccessor(e);const t=this.getBufferView(e.bufferView),r=this.getBuffer(t.buffer).data;return new Uint8Array(r,t.byteOffset||0,t.byteLength)}addApplicationData(e,t){return this.json[e]=t,this}addExtraData(e,t){return this.json.extras=this.json.extras||{},this.json.extras[e]=t,this}addObjectExtension(e,t,i){return e.extensions=e.extensions||{},e.extensions[t]=i,this.registerUsedExtension(t),this}setObjectExtension(e,t,i){(e.extensions||{})[t]=i}removeObjectExtension(e,t){const i=e.extensions||{},r=i[t];return delete i[t],r}addExtension(e,t={}){return kr(t),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=t,this.registerUsedExtension(e),t}addRequiredExtension(e,t={}){return kr(t),this.addExtension(e,t),this.registerRequiredExtension(e),t}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(t=>t===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(t=>t===e)||this.json.extensionsRequired.push(e)}removeExtension(e){this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e),this.json.extensions&&delete this.json.extensions[e]}setDefaultScene(e){this.json.scene=e}addScene(e){const{nodeIndices:t}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:t}),this.json.scenes.length-1}addNode(e){const{meshIndex:t,matrix:i}=e;this.json.nodes=this.json.nodes||[];const r={mesh:t};return i&&(r.matrix=i),this.json.nodes.push(r),this.json.nodes.length-1}addMesh(e){const{attributes:t,indices:i,material:r,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(t),mode:s}]};if(i){const c=this._addIndices(i);a.primitives[0].indices=c}return Number.isFinite(r)&&(a.primitives[0].material=r),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){const i={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(i),this.json.meshes.length-1}addImage(e,t){const i=CI(e),r=t||i?.mimeType,o={bufferView:this.addBufferView(e),mimeType:r};return this.json.images=this.json.images||[],this.json.images.push(o),this.json.images.length-1}addBufferView(e){const t=e.byteLength;kr(Number.isFinite(t)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);const i={buffer:0,byteOffset:this.byteLength,byteLength:t};return this.byteLength+=_g(t,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(i),this.json.bufferViews.length-1}addAccessor(e,t){const i={bufferView:e,type:F6(t.size),componentType:t.componentType,count:t.count,max:t.max,min:t.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(i),this.json.accessors.length-1}addBinaryBuffer(e,t={size:3}){const i=this.addBufferView(e);let r={min:t.min,max:t.max};(!r.min||!r.max)&&(r=this._getAccessorMinMax(e,t.size));const s={size:t.size,componentType:k6(e),count:Math.round(e.length/t.size),min:r.min,max:r.max};return this.addAccessor(i,Object.assign(s,t))}addTexture(e){const{imageIndex:t}=e,i={source:t};return this.json.textures=this.json.textures||[],this.json.textures.push(i),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){var e,t;this.gltf.buffers=[];const i=this.byteLength,r=new ArrayBuffer(i),s=new Uint8Array(r);let o=0;for(const a of this.sourceBuffers||[])o=mIe(a,s,o);null!==(e=this.json)&&void 0!==e&&null!==(t=e.buffers)&&void 0!==t&&t[0]?this.json.buffers[0].byteLength=i:this.json.buffers=[{byteLength:i}],this.gltf.binary=r,this.sourceBuffers=[r]}_removeStringFromArray(e,t){let i=!0;for(;i;){const r=e.indexOf(t);r>-1?e.splice(r,1):i=!1}}_addAttributes(e={}){const t={};for(const i in e){const r=e[i],s=this._getGltfAttributeName(i),o=this.addBinaryBuffer(r.value,r);t[s]=o}return t}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,t){const i={min:null,max:null};if(e.length<t)return i;i.min=[],i.max=[];const r=e.subarray(0,t);for(const s of r)i.min.push(s),i.max.push(s);for(let s=t;s<e.length;s+=t)for(let o=0;o<t;o++)i.min[0+o]=Math.min(i.min[0+o],e[s+o]),i.max[0+o]=Math.max(i.max[0+o],e[s+o]);return i}}const AIe="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",TIe="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",SIe=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),xIe=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),B6={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},MIe={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};function II(){return II=te(function*(n,e,t,i,r,s="NONE"){const o=yield function Ub(){return RI.apply(this,arguments)}();!function jb(n,e,t,i,r,s,o){const a=n.exports.sbrk,c=i+3&-4,l=a(c*r),u=a(s.length),d=new Uint8Array(n.exports.memory.buffer);d.set(s,u);const h=e(l,i,r,u,s.length);if(0===h&&o&&o(l,c,r),t.set(d.subarray(l,l+i*r)),a(l-a(0)),0!==h)throw new Error("Malformed buffer data: ".concat(h))}(o,o.exports[MIe[r]],n,e,t,i,o.exports[B6[s||"NONE"]])}),II.apply(this,arguments)}let DI;function RI(){return RI=te(function*(){return DI||(DI=function DIe(){return OI.apply(this,arguments)}()),DI}),RI.apply(this,arguments)}function OI(){return OI=te(function*(){let n=AIe;WebAssembly.validate(SIe)&&(n=TIe,console.log("Warning: meshopt_decoder is using experimental SIMD support"));const e=yield WebAssembly.instantiate(function RIe(n){const e=new Uint8Array(n.length);for(let i=0;i<n.length;++i){const r=n.charCodeAt(i);e[i]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let t=0;for(let i=0;i<n.length;++i)e[t++]=e[i]<60?xIe[e[i]]:64*(e[i]-60)+e[++i];return e.buffer.slice(0,t)}(n),{});return yield e.instance.exports.__wasm_call_ctors(),e.instance}),OI.apply(this,arguments)}const PI="EXT_meshopt_compression",OIe=PI;function PIe(n,e){return NI.apply(this,arguments)}function NI(){return NI=te(function*(n,e){var t;const i=new is(n);if(null==e||null===(t=e.gltf)||void 0===t||!t.decompressMeshes)return;const r=[];for(const s of n.json.bufferViews||[])r.push(NIe(i,s));yield Promise.all(r),i.removeExtension(PI)}),NI.apply(this,arguments)}function NIe(n,e){return FI.apply(this,arguments)}function FI(){return FI=te(function*(n,e){const t=n.getObjectExtension(e,PI);if(t){const{byteOffset:i=0,byteLength:r=0,byteStride:s,count:o,mode:a,filter:c="NONE",buffer:l}=t,u=n.gltf.buffers[l],d=new Uint8Array(u.arrayBuffer,u.byteOffset+i,r),h=new Uint8Array(n.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);return yield function IIe(n,e,t,i,r){return II.apply(this,arguments)}(h,o,s,d,a,c),h}return null}),FI.apply(this,arguments)}const FIe=["image/png","image/jpeg","image/gif"],kI={};const Jd="EXT_texture_webp",VIe=Jd;function UIe(n,e){const t=new is(n);if(!function kIe(n){return void 0===kI[n]&&(kI[n]=function LIe(n){switch(n){case"image/webp":return function BIe(){if(!Vb)return!1;try{return 0===document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp")}catch{return!1}}();case"image/svg":return Vb;default:if(!Vb){const{_parseImageNode:e}=globalThis;return!!e&&FIe.includes(n)}return!0}}(n)),kI[n]}("image/webp")){if(t.getRequiredExtensions().includes(Jd))throw new Error("gltf: Required extension ".concat(Jd," not supported by browser"));return}const{json:i}=t;for(const r of i.textures||[]){const s=t.getObjectExtension(r,Jd);s&&(r.source=s.source),t.removeObjectExtension(r,Jd)}t.removeExtension(Jd)}const Hb="KHR_texture_basisu",jIe=Hb;function HIe(n,e){const t=new is(n),{json:i}=t;for(const r of i.textures||[]){const s=t.getObjectExtension(r,Hb);s&&(r.source=s.source),t.removeObjectExtension(r,Hb)}t.removeExtension(Hb)}const U6={name:"Draco",id:"draco",module:"draco",shapes:["mesh"],version:"3.2.13",worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:"object"==typeof WebAssembly?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};class zb{constructor(e,t,i=!1,r=new Map){E(this,"name",void 0),E(this,"type",void 0),E(this,"nullable",void 0),E(this,"metadata",void 0),this.name=e,this.type=t,this.nullable=i,this.metadata=r}get typeId(){return this.type&&this.type.typeId}clone(){return new zb(this.name,this.type,this.nullable,this.metadata)}compareTo(e){return this.name===e.name&&this.type===e.type&&this.nullable===e.nullable&&this.metadata===e.metadata}toString(){return"".concat(this.type).concat(this.nullable?", nullable":"").concat(this.metadata?", metadata: ".concat(this.metadata):"")}}let at,j6,H6,z6,G6,W6,$6,q6,X6;!function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"}(at||(at={}));class rs{static isNull(e){return e&&e.typeId===at.Null}static isInt(e){return e&&e.typeId===at.Int}static isFloat(e){return e&&e.typeId===at.Float}static isBinary(e){return e&&e.typeId===at.Binary}static isUtf8(e){return e&&e.typeId===at.Utf8}static isBool(e){return e&&e.typeId===at.Bool}static isDecimal(e){return e&&e.typeId===at.Decimal}static isDate(e){return e&&e.typeId===at.Date}static isTime(e){return e&&e.typeId===at.Time}static isTimestamp(e){return e&&e.typeId===at.Timestamp}static isInterval(e){return e&&e.typeId===at.Interval}static isList(e){return e&&e.typeId===at.List}static isStruct(e){return e&&e.typeId===at.Struct}static isUnion(e){return e&&e.typeId===at.Union}static isFixedSizeBinary(e){return e&&e.typeId===at.FixedSizeBinary}static isFixedSizeList(e){return e&&e.typeId===at.FixedSizeList}static isMap(e){return e&&e.typeId===at.Map}static isDictionary(e){return e&&e.typeId===at.Dictionary}get typeId(){return at.NONE}compareTo(e){return this===e}}Symbol,Symbol,j6=Symbol.toStringTag;class fc extends rs{constructor(e,t){super(),E(this,"isSigned",void 0),E(this,"bitWidth",void 0),this.isSigned=e,this.bitWidth=t}get typeId(){return at.Int}get[j6](){return"Int"}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}class GIe extends fc{constructor(){super(!0,8)}}class WIe extends fc{constructor(){super(!0,16)}}class $Ie extends fc{constructor(){super(!0,32)}}class qIe extends fc{constructor(){super(!1,8)}}class XIe extends fc{constructor(){super(!1,16)}}class YIe extends fc{constructor(){super(!1,32)}}H6=Symbol.toStringTag;class BI extends rs{constructor(e){super(),E(this,"precision",void 0),this.precision=e}get typeId(){return at.Float}get[H6](){return"Float"}toString(){return"Float".concat(this.precision)}}class KIe extends BI{constructor(){super(32)}}class JIe extends BI{constructor(){super(64)}}Symbol,Symbol,z6=Symbol.toStringTag,G6=Symbol.toStringTag,W6=Symbol.toStringTag,$6=Symbol.toStringTag,q6=Symbol.toStringTag;class ZIe extends rs{constructor(e,t){super(),E(this,"listSize",void 0),E(this,"children",void 0),this.listSize=e,this.children=[t]}get typeId(){return at.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get[q6](){return"FixedSizeList"}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}X6=Symbol.toStringTag;class Zd{constructor(e,t){E(this,"fields",void 0),E(this,"metadata",void 0),function nDe(n,e){if(!n)throw new Error(e||"loader assertion failed.")}(Array.isArray(e)),function iDe(n){const e={};for(const t of n)e[t.name]&&console.warn("Schema: duplicated field name",t.name,t),e[t.name]=!0}(e),this.fields=e,this.metadata=t||new Map}compareTo(e){if(this.metadata!==e.metadata||this.fields.length!==e.fields.length)return!1;for(let t=0;t<this.fields.length;++t)if(!this.fields[t].compareTo(e.fields[t]))return!1;return!0}select(...e){const t=Object.create(null);for(const r of e)t[r]=!0;const i=this.fields.filter(r=>t[r.name]);return new Zd(i,this.metadata)}selectAt(...e){const t=e.map(i=>this.fields[i]).filter(Boolean);return new Zd(t,this.metadata)}assign(e){let t,i=this.metadata;if(e instanceof Zd){const o=e;t=o.fields,i=Q6(Q6(new Map,this.metadata),o.metadata)}else t=e;const r=Object.create(null);for(const o of this.fields)r[o.name]=o;for(const o of t)r[o.name]=o;const s=Object.values(r);return new Zd(s,i)}}function Q6(n,e){return new Map([...n||new Map,...e||new Map])}function e9(n,e,t){return function Z6(n,e,t){const i=function QIe(n){switch(n.constructor){case Int8Array:return new GIe;case Uint8Array:return new qIe;case Int16Array:return new WIe;case Uint16Array:return new XIe;case Int32Array:return new $Ie;case Uint32Array:return new YIe;case Float32Array:return new KIe;case Float64Array:return new JIe;default:throw new Error("array type not supported")}}(e.value),r=t||function tDe(n){const e=new Map;return"byteOffset"in n&&e.set("byteOffset",n.byteOffset.toString(10)),"byteStride"in n&&e.set("byteStride",n.byteStride.toString(10)),"normalized"in n&&e.set("normalized",n.normalized.toString()),e}(e);return new zb(n,new ZIe(e.size,new zb("value",i)),!1,r)}(n,e,t?t9(t.metadata):void 0)}function t9(n){const e=new Map;for(const t in n)e.set("".concat(t,".string"),JSON.stringify(n[t]));return e}const n9={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},oDe={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array};class cDe{constructor(e){E(this,"draco",void 0),E(this,"decoder",void 0),E(this,"metadataQuerier",void 0),this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,t={}){const i=new this.draco.DecoderBuffer;i.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(t);const r=this.decoder.GetEncodedGeometryType(i),s=r===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let o;switch(r){case this.draco.TRIANGULAR_MESH:o=this.decoder.DecodeBufferToMesh(i,s);break;case this.draco.POINT_CLOUD:o=this.decoder.DecodeBufferToPointCloud(i,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!o.ok()||!s.ptr){const h="DRACO decompression failed: ".concat(o.error_msg());throw new Error(h)}const a=this._getDracoLoaderData(s,r,t),c=this._getMeshData(s,a,t),l=function zIe(n){let e=1/0,t=1/0,i=1/0,r=-1/0,s=-1/0,o=-1/0;const a=n.POSITION?n.POSITION.value:[],c=a&&a.length;for(let l=0;l<c;l+=3){const u=a[l],d=a[l+1],h=a[l+2];e=u<e?u:e,t=d<t?d:t,i=h<i?h:i,r=u>r?u:r,s=d>s?d:s,o=h>o?h:o}return[[e,t,i],[r,s,o]]}(c.attributes),u=function rDe(n,e,t){const i=t9(e.metadata),r=[],s=function sDe(n){const e={};for(const t in n){const i=n[t];e[i.name||"undefined"]=i}return e}(e.attributes);for(const o in n){const c=e9(o,n[o],s[o]);r.push(c)}if(t){const o=e9("indices",t);r.push(o)}return new Zd(r,i)}(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:l},...c,schema:u}}finally{this.draco.destroy(i),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,t,i){const r=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,i);return{geometry_type:t,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:r,attributes:s}}_getDracoAttributes(e,t){const i={};for(let r=0;r<e.num_attributes();r++){const s=this.decoder.GetAttribute(e,r),o=this._getAttributeMetadata(e,r);i[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:r,metadata:o};const a=this._getQuantizationTransform(s,t);a&&(i[s.unique_id()].quantization_transform=a);const c=this._getOctahedronTransform(s,t);c&&(i[s.unique_id()].octahedron_transform=c)}return i}_getMeshData(e,t,i){const r=this._getMeshAttributes(t,e,i);if(!r.POSITION)throw new Error("DRACO: No position attribute found.");return e instanceof this.draco.Mesh?"triangle-strip"===i.topology?{topology:"triangle-strip",mode:4,attributes:r,indices:{value:this._getTriangleStripIndices(e),size:1}}:{topology:"triangle-list",mode:5,attributes:r,indices:{value:this._getTriangleListIndices(e),size:1}}:{topology:"point-list",mode:0,attributes:r}}_getMeshAttributes(e,t,i){const r={};for(const s of Object.values(e.attributes)){const o=this._deduceAttributeName(s,i);s.name=o;const{value:a,size:c}=this._getAttributeValues(t,s);r[o]={value:a,size:c,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}return r}_getTriangleListIndices(e){const i=3*e.num_faces(),r=4*i,s=this.draco._malloc(r);try{return this.decoder.GetTrianglesUInt32Array(e,r,s),new Uint32Array(this.draco.HEAPF32.buffer,s,i).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){const t=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,t),function dDe(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(t)}finally{this.draco.destroy(t)}}_getAttributeValues(e,t){const i=oDe[t.data_type],r=t.num_components,o=e.num_points()*r,a=o*i.BYTES_PER_ELEMENT,c=function lDe(n,e){switch(e){case Float32Array:return n.DT_FLOAT32;case Int8Array:return n.DT_INT8;case Int16Array:return n.DT_INT16;case Int32Array:return n.DT_INT32;case Uint8Array:return n.DT_UINT8;case Uint16Array:return n.DT_UINT16;case Uint32Array:return n.DT_UINT32;default:return n.DT_INVALID}}(this.draco,i);let l;const u=this.draco._malloc(a);try{const d=this.decoder.GetAttribute(e,t.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,d,c,a,u),l=new i(this.draco.HEAPF32.buffer,u,o).slice()}finally{this.draco._free(u)}return{value:l,size:r}}_deduceAttributeName(e,t){const i=e.unique_id;for(const[o,a]of Object.entries(t.extraAttributes||{}))if(a===i)return o;const r=e.attribute_type;for(const o in n9)if(this.draco[o]===r)return n9[o];const s=t.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:"CUSTOM_ATTRIBUTE_".concat(i)}_getTopLevelMetadata(e){const t=this.decoder.GetMetadata(e);return this._getDracoMetadata(t)}_getAttributeMetadata(e,t){const i=this.decoder.GetAttributeMetadata(e,t);return this._getDracoMetadata(i)}_getDracoMetadata(e){if(!e||!e.ptr)return{};const t={},i=this.metadataQuerier.NumEntries(e);for(let r=0;r<i;r++){const s=this.metadataQuerier.GetEntryName(e,r);t[s]=this._getDracoMetadataField(e,s)}return t}_getDracoMetadataField(e,t){const i=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,t,i);const r=function uDe(n){const e=n.size(),t=new Int32Array(e);for(let i=0;i<e;i++)t[i]=n.GetValue(i);return t}(i);return{int:this.metadataQuerier.GetIntEntry(e,t),string:this.metadataQuerier.GetStringEntry(e,t),double:this.metadataQuerier.GetDoubleEntry(e,t),intArray:r}}finally{this.draco.destroy(i)}}_disableAttributeTransforms(e){const{quantizedAttributes:t=[],octahedronAttributes:i=[]}=e,r=[...t,...i];for(const s of r)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,t){const{quantizedAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits(),range:o.range(),min_values:new Float32Array([1,2,3]).map(a=>o.min_value(a))}}finally{this.draco.destroy(o)}}return null}_getOctahedronTransform(e,t){const{octahedronAttributes:i=[]}=t,r=e.attribute_type();if(i.map(o=>this.decoder[o]).includes(r)){const o=new this.draco.AttributeQuantizationTransform;try{if(o.InitFromAttribute(e))return{quantization_bits:o.quantization_bits()}}finally{this.draco.destroy(o)}}return null}}const Wb="1.4.1",hDe="https://www.gstatic.com/draco/versioned/decoders/".concat(Wb,"/draco_decoder.js"),fDe="https://www.gstatic.com/draco/versioned/decoders/".concat(Wb,"/draco_wasm_wrapper.js"),pDe="https://www.gstatic.com/draco/versioned/decoders/".concat(Wb,"/draco_decoder.wasm");let yg;function jI(){return jI=te(function*(n){const e=n.modules||{};return yg=e.draco3d?yg||e.draco3d.createDecoderModule({}).then(t=>({draco:t})):yg||function _De(n){return zI.apply(this,arguments)}(n),yield yg}),jI.apply(this,arguments)}function zI(){return zI=te(function*(n){let e,t;return"js"===(n.draco&&n.draco.decoderType)?e=yield Rl(hDe,"draco",n):[e,t]=yield Promise.all([yield Rl(fDe,"draco",n),yield Rl(pDe,"draco",n)]),e=e||globalThis.DracoDecoderModule,yield function yDe(n,e){const t={};return e&&(t.wasmBinary=e),new Promise(i=>{n({...t,onModuleLoaded:r=>i({draco:r})})})}(e,t)}),zI.apply(this,arguments)}"https://raw.githubusercontent.com/google/draco/".concat(Wb,"/javascript/draco_encoder.js");const WI={...U6,parse:function bDe(n,e){return $I.apply(this,arguments)}};function $I(){return $I=te(function*(n,e){const{draco:t}=yield function mDe(n){return jI.apply(this,arguments)}(e),i=new cDe(t);try{return i.parseSync(n,e?.draco)}finally{i.destroy()}}),$I.apply(this,arguments)}function i9(n){const{buffer:e,size:t,count:i}=function wDe(n){let e=n,t=1,i=0;return n&&n.value&&(e=n.value,t=n.size||1),e&&(ArrayBuffer.isView(e)||(e=function CDe(n,e,t=!1){return n?Array.isArray(n)?new e(n):!t||n instanceof e?n:new e(n):null}(e,Float32Array)),i=e.length/t),{buffer:e,size:t,count:i}}(n);return{value:e,size:t,byteOffset:0,count:i,type:F6(t),componentType:k6(e)}}const Pl="KHR_draco_mesh_compression",ADe=Pl;function TDe(n,e,t){const i=new is(n);for(const r of r9(i))i.getObjectExtension(r,Pl)}function SDe(n,e,t){return qI.apply(this,arguments)}function qI(){return qI=te(function*(n,e,t){var i;if(null==e||null===(i=e.gltf)||void 0===i||!i.decompressMeshes)return;const r=new is(n),s=[];for(const o of r9(r))r.getObjectExtension(o,Pl)&&s.push(MDe(r,o,e,t));yield Promise.all(s),r.removeExtension(Pl)}),qI.apply(this,arguments)}function xDe(n,e={}){const t=new is(n);for(const i of t.json.meshes||[])IDe(i),t.addRequiredExtension(Pl)}function MDe(n,e,t,i){return XI.apply(this,arguments)}function XI(){return XI=te(function*(n,e,t,i){const r=n.getObjectExtension(e,Pl);if(!r)return;const s=n.getTypedArrayForBufferView(r.bufferView),o=R6(s.buffer,s.byteOffset),{parse:a}=i,c={...t};delete c["3d-tiles"];const l=yield a(o,WI,c,i),u=function EDe(n){const e={};for(const t in n)if("indices"!==t){const r=i9(n[t]);e[t]=r}return e}(l.attributes);for(const[d,h]of Object.entries(u))if(d in e.attributes){const p=n.getAccessor(e.attributes[d]);null!=p&&p.min&&null!=p&&p.max&&(h.min=p.min,h.max=p.max)}e.attributes=u,l.indices&&(e.indices=i9(l.indices)),function DDe(n){if(!n.attributes&&Object.keys(n.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}(e)}),XI.apply(this,arguments)}function IDe(n,e,t=4,i,r){var s;if(!i.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");const o=i.DracoWriter.encodeSync({attributes:n}),a=null==r||null===(s=r.parseSync)||void 0===s?void 0:s.call(r,{attributes:n}),c=i._addFauxAttributes(a.attributes),l=i.addBufferView(o);return{primitives:[{attributes:c,mode:t,extensions:{[Pl]:{bufferView:l,attributes:c}}}]}}function*r9(n){for(const e of n.json.meshes||[])for(const t of e.primitives)yield t}const Nl="KHR_lights_punctual",RDe=Nl;function ODe(n){return YI.apply(this,arguments)}function YI(){return YI=te(function*(n){const e=new is(n),{json:t}=e,i=e.getExtension(Nl);i&&(e.json.lights=i.lights,e.removeExtension(Nl));for(const r of t.nodes||[]){const s=e.getObjectExtension(r,Nl);s&&(r.light=s.light),e.removeObjectExtension(r,Nl)}}),YI.apply(this,arguments)}function PDe(n){return KI.apply(this,arguments)}function KI(){return KI=te(function*(n){const e=new is(n),{json:t}=e;if(t.lights){const i=e.addExtension(Nl);kr(!i.lights),i.lights=t.lights,delete t.lights}if(e.json.lights){for(const i of e.json.lights)e.addObjectExtension(i.node,Nl,i);delete e.json.lights}}),KI.apply(this,arguments)}const bg="KHR_materials_unlit",NDe=bg;function FDe(n){return JI.apply(this,arguments)}function JI(){return JI=te(function*(n){const e=new is(n),{json:t}=e;e.removeExtension(bg);for(const i of t.materials||[])i.extensions&&i.extensions.KHR_materials_unlit&&(i.unlit=!0),e.removeObjectExtension(i,bg)}),JI.apply(this,arguments)}function kDe(n){const e=new is(n),{json:t}=e;if(e.materials)for(const i of t.materials||[])i.unlit&&(delete i.unlit,e.addObjectExtension(i,bg,{}),e.addExtension(bg))}const Eg="KHR_techniques_webgl",LDe=Eg;function BDe(n){return ZI.apply(this,arguments)}function ZI(){return ZI=te(function*(n){const e=new is(n),{json:t}=e,i=e.getExtension(Eg);if(i){const r=function UDe(n,e){const{programs:t=[],shaders:i=[],techniques:r=[]}=n,s=new TextDecoder;return i.forEach(o=>{if(!Number.isFinite(o.bufferView))throw new Error("KHR_techniques_webgl: no shader code");o.code=s.decode(e.getTypedArrayForBufferView(o.bufferView))}),t.forEach(o=>{o.fragmentShader=i[o.fragmentShader],o.vertexShader=i[o.vertexShader]}),r.forEach(o=>{o.program=t[o.program]}),r}(i,e);for(const s of t.materials||[]){const o=e.getObjectExtension(s,Eg);o&&(s.technique=Object.assign({},o,r[o.technique]),s.technique.values=jDe(s.technique,e)),e.removeObjectExtension(s,Eg)}e.removeExtension(Eg)}}),ZI.apply(this,arguments)}function VDe(n,e){return QI.apply(this,arguments)}function QI(){return(QI=te(function*(n,e){})).apply(this,arguments)}function jDe(n,e){const t=Object.assign({},n.values);return Object.keys(n.uniforms||{}).forEach(i=>{n.uniforms[i].value&&!(i in t)&&(t[i]=n.uniforms[i].value)}),Object.keys(t).forEach(i=>{"object"==typeof t[i]&&void 0!==t[i].index&&(t[i].texture=e.getTexture(t[i].index))}),t}const s9=[ln,Nt,rn,Jn,ge,lt,Ce];function eD(){return eD=te(function*(n,e={},t){const i=s9.filter(s=>o9(s.name,e));for(const s of i){var r;yield null===(r=s.decode)||void 0===r?void 0:r.call(s,n,e,t)}}),eD.apply(this,arguments)}function o9(n,e){var t;const i=(null==e||null===(t=e.gltf)||void 0===t?void 0:t.excludeExtensions)||{};return!(n in i&&!i[n])}const tD="KHR_binary_glTF",a9={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},WDe={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"};class $De{constructor(){E(this,"idToIndexMap",{animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}}),E(this,"json",void 0)}normalize(e,t){this.json=e.json;const i=e.json;switch(i.asset&&i.asset.version){case"2.0":return;case void 0:case"1.0":break;default:return void console.warn("glTF: Unknown version ".concat(i.asset.version))}if(!t.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(i),this._convertTopLevelObjectsToArrays(i),function GDe(n){const e=new is(n),{json:t}=e;for(const i of t.images||[]){const r=e.getObjectExtension(i,tD);r&&Object.assign(i,r),e.removeObjectExtension(i,tD)}t.buffers&&t.buffers[0]&&delete t.buffers[0].uri,e.removeExtension(tD)}(e),this._convertObjectIdsToArrayIndices(i),this._updateObjects(i),this._updateMaterial(i)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(const t in a9)this._convertTopLevelObjectToArray(e,t)}_convertTopLevelObjectToArray(e,t){const i=e[t];if(i&&!Array.isArray(i)){e[t]=[];for(const r in i){const s=i[r];s.id=s.id||r;const o=e[t].length;e[t].push(s),this.idToIndexMap[t][r]=o}}}_convertObjectIdsToArrayIndices(e){for(const t in a9)this._convertIdsToIndices(e,t);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(const t of e.textures)this._convertTextureIds(t);for(const t of e.meshes)this._convertMeshIds(t);for(const t of e.nodes)this._convertNodeIds(t);for(const t of e.scenes)this._convertSceneIds(t)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(const t of e.primitives){const{attributes:i,indices:r,material:s}=t;for(const o in i)i[o]=this._convertIdToIndex(i[o],"accessor");r&&(t.indices=this._convertIdToIndex(r,"accessor")),s&&(t.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(t=>this._convertIdToIndex(t,"node"))),e.meshes&&(e.meshes=e.meshes.map(t=>this._convertIdToIndex(t,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(t=>this._convertIdToIndex(t,"node")))}_convertIdsToIndices(e,t){e[t]||(console.warn("gltf v1: json doesn't contain attribute ".concat(t)),e[t]=[]);for(const i of e[t])for(const r in i){const o=this._convertIdToIndex(i[r],r);i[r]=o}}_convertIdToIndex(e,t){const i=WDe[t];if(i in this.idToIndexMap){const r=this.idToIndexMap[i][e];if(!Number.isFinite(r))throw new Error("gltf v1: failed to resolve ".concat(t," with id ").concat(e));return r}return e}_updateObjects(e){for(const t of this.json.buffers)delete t.type}_updateMaterial(e){for(const s of e.materials){var t,i,r;s.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};const o=(null===(t=s.values)||void 0===t?void 0:t.tex)||(null===(i=s.values)||void 0===i?void 0:i.texture2d_0)||(null===(r=s.values)||void 0===r?void 0:r.diffuseTex),a=e.textures.findIndex(c=>c.id===o);-1!==a&&(s.pbrMetallicRoughness.baseColorTexture={index:a})}}}const XDe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},YDe={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},ss_TEXTURE_MAG_FILTER=10240,ss_TEXTURE_MIN_FILTER=10241,ss_TEXTURE_WRAP_S=10242,ss_TEXTURE_WRAP_T=10243,KDe={magFilter:10240,minFilter:10241,wrapS:10242,wrapT:10243},JDe={[ss_TEXTURE_MAG_FILTER]:9729,[ss_TEXTURE_MIN_FILTER]:9986,[ss_TEXTURE_WRAP_S]:10497,[ss_TEXTURE_WRAP_T]:10497};class e1e{constructor(){E(this,"baseUri",""),E(this,"json",{}),E(this,"buffers",[]),E(this,"images",[])}postProcess(e,t={}){const{json:i,buffers:r=[],images:s=[],baseUri:o=""}=e;return kr(i),this.baseUri=o,this.json=i,this.buffers=r,this.images=s,this._resolveTree(this.json,t),this.json}_resolveTree(e,t={}){e.bufferViews&&(e.bufferViews=e.bufferViews.map((i,r)=>this._resolveBufferView(i,r))),e.images&&(e.images=e.images.map((i,r)=>this._resolveImage(i,r))),e.samplers&&(e.samplers=e.samplers.map((i,r)=>this._resolveSampler(i,r))),e.textures&&(e.textures=e.textures.map((i,r)=>this._resolveTexture(i,r))),e.accessors&&(e.accessors=e.accessors.map((i,r)=>this._resolveAccessor(i,r))),e.materials&&(e.materials=e.materials.map((i,r)=>this._resolveMaterial(i,r))),e.meshes&&(e.meshes=e.meshes.map((i,r)=>this._resolveMesh(i,r))),e.nodes&&(e.nodes=e.nodes.map((i,r)=>this._resolveNode(i,r))),e.skins&&(e.skins=e.skins.map((i,r)=>this._resolveSkin(i,r))),e.scenes&&(e.scenes=e.scenes.map((i,r)=>this._resolveScene(i,r))),void 0!==e.scene&&(e.scene=e.scenes[this.json.scene])}getScene(e){return this._get("scenes",e)}getNode(e){return this._get("nodes",e)}getSkin(e){return this._get("skins",e)}getMesh(e){return this._get("meshes",e)}getMaterial(e){return this._get("materials",e)}getAccessor(e){return this._get("accessors",e)}getCamera(e){return null}getTexture(e){return this._get("textures",e)}getSampler(e){return this._get("samplers",e)}getImage(e){return this._get("images",e)}getBufferView(e){return this._get("bufferViews",e)}getBuffer(e){return this._get("buffers",e)}_get(e,t){if("object"==typeof t)return t;const i=this.json[e]&&this.json[e][t];return i||console.warn("glTF file error: Could not find ".concat(e,"[").concat(t,"]")),i}_resolveScene(e,t){return e.id=e.id||"scene-".concat(t),e.nodes=(e.nodes||[]).map(i=>this.getNode(i)),e}_resolveNode(e,t){return e.id=e.id||"node-".concat(t),e.children&&(e.children=e.children.map(i=>this.getNode(i))),void 0!==e.mesh?e.mesh=this.getMesh(e.mesh):void 0!==e.meshes&&e.meshes.length&&(e.mesh=e.meshes.reduce((i,r)=>{const s=this.getMesh(r);return i.id=s.id,i.primitives=i.primitives.concat(s.primitives),i},{primitives:[]})),void 0!==e.camera&&(e.camera=this.getCamera(e.camera)),void 0!==e.skin&&(e.skin=this.getSkin(e.skin)),e}_resolveSkin(e,t){return e.id=e.id||"skin-".concat(t),e.inverseBindMatrices=this.getAccessor(e.inverseBindMatrices),e}_resolveMesh(e,t){return e.id=e.id||"mesh-".concat(t),e.primitives&&(e.primitives=e.primitives.map(i=>{const r=(i={...i}).attributes;i.attributes={};for(const s in r)i.attributes[s]=this.getAccessor(r[s]);return void 0!==i.indices&&(i.indices=this.getAccessor(i.indices)),void 0!==i.material&&(i.material=this.getMaterial(i.material)),i})),e}_resolveMaterial(e,t){if(e.id=e.id||"material-".concat(t),e.normalTexture&&(e.normalTexture={...e.normalTexture},e.normalTexture.texture=this.getTexture(e.normalTexture.index)),e.occlusionTexture&&(e.occlustionTexture={...e.occlustionTexture},e.occlusionTexture.texture=this.getTexture(e.occlusionTexture.index)),e.emissiveTexture&&(e.emmisiveTexture={...e.emmisiveTexture},e.emissiveTexture.texture=this.getTexture(e.emissiveTexture.index)),e.emissiveFactor||(e.emissiveFactor=e.emmisiveTexture?[1,1,1]:[0,0,0]),e.pbrMetallicRoughness){e.pbrMetallicRoughness={...e.pbrMetallicRoughness};const i=e.pbrMetallicRoughness;i.baseColorTexture&&(i.baseColorTexture={...i.baseColorTexture},i.baseColorTexture.texture=this.getTexture(i.baseColorTexture.index)),i.metallicRoughnessTexture&&(i.metallicRoughnessTexture={...i.metallicRoughnessTexture},i.metallicRoughnessTexture.texture=this.getTexture(i.metallicRoughnessTexture.index))}return e}_resolveAccessor(e,t){if(e.id=e.id||"accessor-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView)),e.bytesPerComponent=function ZDe(n){return YDe[n]}(e.componentType),e.components=function QDe(n){return XDe[n]}(e.type),e.bytesPerElement=e.bytesPerComponent*e.components,e.bufferView){const i=e.bufferView.buffer,{ArrayType:r,byteLength:s}=L6(e,e.bufferView),o=(e.bufferView.byteOffset||0)+(e.byteOffset||0)+i.byteOffset;let a=i.arrayBuffer.slice(o,o+s);e.bufferView.byteStride&&(a=this._getValueFromInterleavedBuffer(i,o,e.bufferView.byteStride,e.bytesPerElement,e.count)),e.value=new r(a)}return e}_getValueFromInterleavedBuffer(e,t,i,r,s){const o=new Uint8Array(s*r);for(let a=0;a<s;a++){const c=t+a*i;o.set(new Uint8Array(e.arrayBuffer.slice(c,c+r)),a*r)}return o.buffer}_resolveTexture(e,t){return e.id=e.id||"texture-".concat(t),e.sampler="sampler"in e?this.getSampler(e.sampler):JDe,e.source=this.getImage(e.source),e}_resolveSampler(e,t){e.id=e.id||"sampler-".concat(t),e.parameters={};for(const i in e){const r=this._enumSamplerParameter(i);void 0!==r&&(e.parameters[r]=e[i])}return e}_enumSamplerParameter(e){return KDe[e]}_resolveImage(e,t){e.id=e.id||"image-".concat(t),void 0!==e.bufferView&&(e.bufferView=this.getBufferView(e.bufferView));const i=this.images[t];return i&&(e.image=i),e}_resolveBufferView(e,t){const i=e.buffer,r={id:"bufferView-".concat(t),...e,buffer:this.buffers[i]};let o=this.buffers[i].byteOffset||0;return"byteOffset"in e&&(o+=e.byteOffset),r.data=new Uint8Array(this.buffers[i].arrayBuffer,o,e.byteLength),r}_resolveCamera(e,t){return e.id=e.id||"camera-".concat(t),e}}const c9=1735152710,nD=12,$b=8,n1e=1313821514,i1e=5130562,r1e=0,s1e=1,o1e=0,Qd=!0;function iD(n,e,t,i){const r=new Uint8Array(e.buffer,t,i),o=new TextDecoder("utf8").decode(r);return n.json=JSON.parse(o),_g(i,4)}function rD(n,e,t,i){return n.header.hasBinChunk=!0,n.binChunks.push({byteOffset:t,byteLength:i,arrayBuffer:e.buffer}),_g(i,4)}function sD(){return sD=te(function*(n,e,t=0,i,r){var s,o,a,c;(function p1e(n,e,t,i){if(i.uri&&(n.baseUri=i.uri),e instanceof ArrayBuffer&&!function c1e(n,e=0,t={}){const i=new DataView(n),{magic:r=c9}=t,s=i.getUint32(e,!1);return s===r||s===c9}(e,t,i)&&(e=(new TextDecoder).decode(e)),"string"==typeof e)n.json=function gIe(n){try{return JSON.parse(n)}catch{throw new Error('Failed to parse JSON from data starting with "'.concat(function pIe(n,e=5){return"string"==typeof n?n.slice(0,e):ArrayBuffer.isView(n)?D6(n.buffer,n.byteOffset,e):n instanceof ArrayBuffer?D6(n,0,e):""}(n),'"'))}}(e);else if(e instanceof ArrayBuffer){const o={};t=function l1e(n,e,t=0,i={}){const r=new DataView(e),s=function a1e(n,e=0){return"".concat(String.fromCharCode(n.getUint8(e+0))).concat(String.fromCharCode(n.getUint8(e+1))).concat(String.fromCharCode(n.getUint8(e+2))).concat(String.fromCharCode(n.getUint8(e+3)))}(r,t+0),o=r.getUint32(t+4,Qd),a=r.getUint32(t+8,Qd);switch(Object.assign(n,{header:{byteOffset:t,byteLength:a,hasBinChunk:!1},type:s,version:o,json:{},binChunks:[]}),t+=nD,n.version){case 1:return function u1e(n,e,t){Ol(n.header.byteLength>nD+$b);const i=e.getUint32(t+0,Qd),r=e.getUint32(t+4,Qd);return t+=$b,Ol(r===o1e),iD(n,e,t,i),(t+=i)+rD(n,e,t,n.header.byteLength)}(n,r,t);case 2:return function d1e(n,e,t,i){return Ol(n.header.byteLength>nD+$b),function h1e(n,e,t,i){for(;t+8<=n.header.byteLength;){const r=e.getUint32(t+0,Qd),s=e.getUint32(t+4,Qd);switch(t+=$b,s){case n1e:iD(n,e,t,r);break;case i1e:rD(n,e,t,r);break;case r1e:i.strict||iD(n,e,t,r);break;case s1e:i.strict||rD(n,e,t,r)}t+=_g(r,4)}}(n,e,t,i),t+n.header.byteLength}(n,r,t,{});default:throw new Error("Invalid GLB version ".concat(n.version,". Only supports v1 and v2."))}}(o,e,t,i.glb),kr("glTF"===o.type,"Invalid GLB magic string ".concat(o.type)),n._glb=o,n.json=o.json}else kr(!1,"GLTF: must be ArrayBuffer or string");if(n.buffers=new Array((n.json.buffers||[]).length).fill(null),n._glb&&n._glb.header.hasBinChunk){const{binChunks:o}=n._glb;n.buffers[0]={arrayBuffer:o[0].arrayBuffer,byteOffset:o[0].byteOffset,byteLength:o[0].byteLength}}n.images=new Array((n.json.images||[]).length).fill({})})(n,e,t,i),function qDe(n,e={}){(new $De).normalize(n,e)}(n,{normalize:null==i||null===(s=i.gltf)||void 0===s?void 0:s.normalize}),function HDe(n,e={},t){const i=s9.filter(s=>o9(s.name,e));for(const s of i){var r;null===(r=s.preprocess)||void 0===r||r.call(s,n,e,t)}}(n,i,r);const l=[];if(null!=i&&null!==(o=i.gltf)&&void 0!==o&&o.loadBuffers&&n.json.buffers&&(yield function g1e(n,e,t){return oD.apply(this,arguments)}(n,i,r)),null!=i&&null!==(a=i.gltf)&&void 0!==a&&a.loadImages){const d=function m1e(n,e,t){return aD.apply(this,arguments)}(n,i,r);l.push(d)}const u=function zDe(n){return eD.apply(this,arguments)}(n,i,r);return l.push(u),yield Promise.all(l),null!=i&&null!==(c=i.gltf)&&void 0!==c&&c.postProcess?function t1e(n,e){return(new e1e).postProcess(n,e)}(n,i):n}),sD.apply(this,arguments)}function oD(){return oD=te(function*(n,e,t){const i=n.json.buffers||[];for(let o=0;o<i.length;++o){const a=i[o];if(a.uri){var r,s;const{fetch:c}=t;kr(c);const l=O6(a.uri,e),u=yield null==t||null===(r=t.fetch)||void 0===r?void 0:r.call(t,l),d=yield null==u||null===(s=u.arrayBuffer)||void 0===s?void 0:s.call(u);n.buffers[o]={arrayBuffer:d,byteOffset:0,byteLength:d.byteLength},delete a.uri}else null===n.buffers[o]&&(n.buffers[o]={arrayBuffer:new ArrayBuffer(a.byteLength),byteOffset:0,byteLength:a.byteLength})}}),oD.apply(this,arguments)}function aD(){return aD=te(function*(n,e,t){const i=function _1e(n){const e=new Set,t=n.json.textures||[];for(const i of t)void 0!==i.source&&e.add(i.source);return Array.from(e).sort()}(n),r=n.json.images||[],s=[];for(const o of i)s.push(y1e(n,r[o],o,e,t));return yield Promise.all(s)}),aD.apply(this,arguments)}function y1e(n,e,t,i,r){return cD.apply(this,arguments)}function cD(){return cD=te(function*(n,e,t,i,r){const{fetch:s,parse:o}=r;let a;if(e.uri&&!e.hasOwnProperty("bufferView")){const l=O6(e.uri,i);a=yield(yield s(l)).arrayBuffer()}if(Number.isFinite(e.bufferView)){const l=function P6(n,e,t){const i=n.bufferViews[t];kr(i);const s=e[i.buffer];return kr(s),new Uint8Array(s.arrayBuffer,(i.byteOffset||0)+s.byteOffset,i.byteLength)}(n.json,n.buffers,e.bufferView);a=R6(l.buffer,l.byteOffset,l.byteLength)}kr(a,"glTF image has no data");let c=yield o(a,[fIe,$Me],{mimeType:e.mimeType,basis:i.basis||{format:w6()}},r);c&&c[0]&&(c={compressed:!0,mipmaps:!1,width:c[0].width,height:c[0].height,data:c[0]}),n.images=n.images||[],n.images[t]=c}),cD.apply(this,arguments)}const eh={name:"glTF",id:"gltf",module:"gltf",version:"3.2.13",extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:function v1e(n){return lD.apply(this,arguments)},options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0,postProcess:!0},log:console},deprecatedOptions:{fetchImages:"gltf.loadImages",createImages:"gltf.loadImages",decompress:"gltf.decompressMeshes",postProcess:"gltf.postProcess",gltf:{decompress:"gltf.decompressMeshes"}}};function lD(){return lD=te(function*(n,e={},t){(e={...eh.options,...e}).gltf={...eh.options.gltf,...e.gltf};const{byteOffset:i=0}=e;return yield function f1e(n,e){return sD.apply(this,arguments)}({},n,i,e,t)}),lD.apply(this,arguments)}function uD(){return uD=te(function*(n){const e=[];return n.scenes.forEach(t=>{t.traverse(i=>{Object.values(i.model.getUniforms()).forEach(r=>{!1===r.loaded&&e.push(r)})})}),yield function E1e(n){return dD.apply(this,arguments)}(()=>e.some(t=>!t.loaded))}),uD.apply(this,arguments)}function dD(){return dD=te(function*(n){for(;n();)yield new Promise(e=>requestAnimationFrame(e))}),dD.apply(this,arguments)}const l9=[255,255,255,255],A1e={scenegraph:{type:"object",value:null,async:!0},getScene:n=>n&&n.scenes?"object"==typeof n.scene?n.scene:n.scenes[n.scene||0]:n,getAnimator:n=>n&&n.animator,_animations:null,sizeScale:{type:"number",value:1,min:0},sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},getPosition:{type:"accessor",value:n=>n.position},getColor:{type:"accessor",value:l9},_lighting:"flat",_imageBasedLightingEnvironment:null,getOrientation:{type:"accessor",value:[0,0,0]},getScale:{type:"accessor",value:[1,1,1]},getTranslation:{type:"accessor",value:[0,0,0]},getTransformMatrix:{type:"accessor",value:[]},loaders:[eh]};class hD extends Dl{constructor(...e){super(...e),E(this,"state",void 0)}getShaders(){const e=[Ib,Db];return"pbr"===this.props._lighting&&e.push(Q8),{vs:"#version 300 es\n\n// Instance attributes\nin vec3 instancePositions;\nin vec3 instancePositions64Low;\nin vec4 instanceColors;\nin vec3 instancePickingColors;\nin mat3 instanceModelMatrix;\nin vec3 instanceTranslation;\n\n// Uniforms\nuniform float sizeScale;\nuniform float sizeMinPixels;\nuniform float sizeMaxPixels;\nuniform mat4 sceneModelMatrix;\nuniform bool composeModelMatrix;\n\n// Attributes\nin vec4 POSITION;\n\n#ifdef HAS_UV\n  in vec2 TEXCOORD_0;\n#endif\n\n#ifdef MODULE_PBR\n  #ifdef HAS_NORMALS\n    in vec4 NORMAL;\n  #endif\n#endif\n\n// Varying\nout vec4 vColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #ifdef HAS_UV\n    out vec2 vTEXCOORD_0;\n  #endif\n#endif\n\n// Main\nvoid main(void) {\n  #if defined(HAS_UV) && !defined(MODULE_PBR)\n    vTEXCOORD_0 = TEXCOORD_0;\n    geometry.uv = vTEXCOORD_0;\n  #endif\n\n  geometry.worldPosition = instancePositions;\n  geometry.pickingColor = instancePickingColors;\n\n  vec3 normal = vec3(0.0, 0.0, 1.0);\n  #ifdef MODULE_PBR\n    #ifdef HAS_NORMALS\n      normal = instanceModelMatrix * (sceneModelMatrix * vec4(NORMAL.xyz, 0.0)).xyz;\n    #endif\n  #endif\n\n  float originalSize = project_size_to_pixel(sizeScale);\n  float clampedSize = clamp(originalSize, sizeMinPixels, sizeMaxPixels);\n\n  vec3 pos = (instanceModelMatrix * (sceneModelMatrix * POSITION).xyz) * sizeScale * (clampedSize / originalSize) + instanceTranslation;\n  if(composeModelMatrix) {\n    DECKGL_FILTER_SIZE(pos, geometry);\n    // using instancePositions as world coordinates\n    // when using globe mode, this branch does not re-orient the model to align with the surface of the earth\n    // call project_normal before setting position to avoid rotation\n    geometry.normal = project_normal(normal);\n    gl_Position = project_position_to_clipspace(pos + instancePositions, instancePositions64Low, vec3(0.0), geometry.position);\n  }\n  else {\n    pos = project_size(pos);\n    DECKGL_FILTER_SIZE(pos, geometry);\n    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, pos, geometry.position);\n    geometry.normal = project_normal(normal);\n  }\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  #ifdef MODULE_PBR\n    // set PBR data\n    pbr_vPosition = geometry.position.xyz;\n    #ifdef HAS_NORMALS\n      pbr_vNormal = geometry.normal;\n    #endif\n\n    #ifdef HAS_UV\n      pbr_vUV = TEXCOORD_0;\n    #else\n      pbr_vUV = vec2(0., 0.);\n    #endif\n    geometry.uv = pbr_vUV;\n  #endif\n\n  vColor = instanceColors;\n  DECKGL_FILTER_COLOR(vColor, geometry);\n}\n",fs:"#version 300 es\n\n// Uniforms\nuniform float opacity;\n\n// Varying\nin vec4 vColor;\n\nout vec4 fragmentColor;\n\n// MODULE_PBR contains all the varying definitions needed\n#ifndef MODULE_PBR\n  #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n    in vec2 vTEXCOORD_0;\n    uniform sampler2D u_BaseColorSampler;\n  #endif\n#endif\n\nvoid main(void) {\n  #ifdef MODULE_PBR\n    fragmentColor = vColor * pbr_filterColor(vec4(0));\n    geometry.uv = pbr_vUV;\n  #else\n    #if defined(HAS_UV) && defined(HAS_BASECOLORMAP)\n      fragmentColor = vColor * texture2D(u_BaseColorSampler, vTEXCOORD_0);\n      geometry.uv = vTEXCOORD_0;\n    #else\n      fragmentColor = vColor;\n    #endif\n  #endif\n\n  fragmentColor.a *= opacity;\n  DECKGL_FILTER_COLOR(fragmentColor, geometry);\n}\n",modules:e}}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),accessor:"getPosition",transition:!0},instanceColors:{type:5121,size:this.props.colorFormat.length,accessor:"getColor",normalized:!0,defaultValue:l9,transition:!0},instanceModelMatrix:K8})}updateState(e){super.updateState(e);const{props:t,oldProps:i}=e;t.scenegraph!==i.scenegraph?this._updateScenegraph():t._animations!==i._animations&&this._applyAnimationsProp(this.state.scenegraph,this.state.animator,t._animations)}finalizeState(e){super.finalizeState(e),this._deleteScenegraph()}_updateScenegraph(){const e=this.props,{gl:t}=this.context;let i=null;if(e.scenegraph instanceof Yd)i={scenes:[e.scenegraph]};else if(e.scenegraph&&!e.scenegraph.gltf){const a=e.scenegraph,c=function CMe(n,e,t){const i=new wMe(n,t);return{scenes:i.instantiate(e),animator:i.createAnimator()}}(t,a,this._getModelOptions());i={gltf:a,...c},function b1e(n){return uD.apply(this,arguments)}(c).then(()=>this.setNeedsRedraw())}else e.scenegraph&&(Ze.deprecated("ScenegraphLayer.props.scenegraph","Use GLTFLoader instead of GLTFScenegraphLoader")(),i=e.scenegraph);const r={layer:this,gl:t},s=e.getScene(i,r),o=e.getAnimator(i,r);s instanceof Yd?(this._deleteScenegraph(),this._applyAllAttributes(s),this._applyAnimationsProp(s,o,e._animations),this.setState({scenegraph:s,animator:o})):null!==s&&Ze.warn("invalid scenegraph:",s)()}_applyAllAttributes(e){if(this.state.attributesAvailable){const t=this.getAttributeManager().getAttributes();e.traverse(i=>{this._setModelAttributes(i.model,t)})}}_applyAnimationsProp(e,t,i){if(!e||!t||!i)return;const r=t.getAnimations();Object.keys(i).sort().forEach(s=>{const o=i[s];if("*"===s)r.forEach(a=>{Object.assign(a,o)});else if(Number.isFinite(Number(s))){const a=Number(s);a>=0&&a<r.length?Object.assign(r[a],o):Ze.warn("animation ".concat(s," not found"))()}else{const a=r.find(({name:c})=>c===s);a?Object.assign(a,o):Ze.warn("animation ".concat(s," not found"))()}})}_deleteScenegraph(){const{scenegraph:e}=this.state;e instanceof Yd&&e.delete()}_getModelOptions(){const{_imageBasedLightingEnvironment:e}=this.props;let t=null;return e&&(t="function"==typeof e?e({gl:this.context.gl,layer:this}):e),{gl:this.context.gl,waitForFullLoad:!0,imageBasedLightingEnvironment:t,modelOptions:{isInstanced:!0,transpileToGLSL100:!$e(this.context.gl),...this.getShaders()},useTangents:!1}}updateAttributes(e){this.setState({attributesAvailable:!0}),this.state.scenegraph&&this.state.scenegraph.traverse(t=>{this._setModelAttributes(t.model,e)})}draw({moduleParameters:e=null,parameters:t={},context:i}){if(!this.state.scenegraph)return;this.props._animations&&this.state.animator&&(this.state.animator.animate(i.timeline.getTime()),this.setNeedsRedraw());const{viewport:r}=this.context,{sizeScale:s,sizeMinPixels:o,sizeMaxPixels:a,opacity:c,coordinateSystem:l}=this.props,u=this.getNumInstances();this.state.scenegraph.traverse((d,{worldMatrix:h})=>{d.model.setInstanceCount(u),d.updateModuleSettings(e),d.draw({parameters:t,uniforms:{sizeScale:s,opacity:c,sizeMinPixels:o,sizeMaxPixels:a,composeModelMatrix:J8(r,l),sceneModelMatrix:h,u_Camera:d.model.getUniforms().project_uCameraPosition}})})}}E(hD,"defaultProps",A1e),E(hD,"layerName","ScenegraphLayer");class T1e extends hc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=hr("sphere-geometry")}=e,{indices:i,attributes:r}=function S1e(n){const{nlat:e=10,nlong:t=10}=n;let{radius:i=1}=n;const o=Math.PI-0,l=2*Math.PI-0,u=(e+1)*(t+1);if("number"==typeof i){const y=i;i=(v,_,w,A,S)=>y}const d=new Float32Array(3*u),h=new Float32Array(3*u),f=new Float32Array(2*u),g=new(u>65535?Uint32Array:Uint16Array)(e*t*6);for(let y=0;y<=e;y++)for(let v=0;v<=t;v++){const _=v/t,w=y/e,A=v+y*(t+1),S=2*A,D=3*A,x=l*_,k=o*w,U=Math.sin(x),V=Math.cos(x),G=Math.sin(k),L=V*G,$=Math.cos(k),W=U*G,ve=i(L,$,W,_,w);d[D+0]=ve*L,d[D+1]=ve*$,d[D+2]=ve*W,h[D+0]=L,h[D+1]=$,h[D+2]=W,f[S+0]=_,f[S+1]=1-w}const m=t+1;for(let y=0;y<t;y++)for(let v=0;v<e;v++){const _=6*(y*e+v);g[_+0]=v*m+y,g[_+1]=v*m+y+1,g[_+2]=(v+1)*m+y,g[_+3]=(v+1)*m+y,g[_+4]=v*m+y+1,g[_+5]=(v+1)*m+y+1}return{indices:{size:1,value:g},attributes:{POSITION:{size:3,value:d},NORMAL:{size:3,value:h},TEXCOORD_0:{size:2,value:f}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}const x1e={x:[2,0,1],y:[0,1,2],z:[1,2,0]};class u9 extends hc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=hr("truncated-code-geometry")}=e,{indices:i,attributes:r}=function M1e(n){const{bottomRadius:e=0,topRadius:t=0,height:i=1,nradial:r=10,nvertical:s=10,verticalAxis:o="y",topCap:a=!1,bottomCap:c=!1}=n,l=(a?2:0)+(c?2:0),u=(r+1)*(s+1+l),d=Math.atan2(e-t,i),h=Math.sin,f=Math.cos,p=Math.PI,g=f(d),m=h(d),y=a?-2:0,v=s+(c?2:0),_=r+1,w=new Uint16Array(r*(s+l)*6),A=x1e[o],S=new Float32Array(3*u),D=new Float32Array(3*u),x=new Float32Array(2*u);let k=0,U=0;for(let V=y;V<=v;V++){let L,G=V/s,O=i*G;V<0?(O=0,G=1,L=e):V>s?(O=i,G=1,L=t):L=e+V/s*(t-e),(-2===V||V===s+2)&&(L=0,G=0),O-=i/2;for(let $=0;$<_;$++){const W=h($*p*2/r),ve=f($*p*2/r);S[k+A[0]]=W*L,S[k+A[1]]=O,S[k+A[2]]=ve*L,D[k+A[0]]=V<0||V>s?0:W*g,D[k+A[1]]=V<0?-1:V>s?1:m,D[k+A[2]]=V<0||V>s?0:ve*g,x[U+0]=$/r,x[U+1]=G,U+=2,k+=3}}for(let V=0;V<s+l;V++)for(let G=0;G<r;G++){const O=6*(V*r+G);w[O+0]=_*(V+0)+0+G,w[O+1]=_*(V+0)+1+G,w[O+2]=_*(V+1)+1+G,w[O+3]=_*(V+0)+0+G,w[O+4]=_*(V+1)+1+G,w[O+5]=_*(V+1)+0+G}return{indices:w,attributes:{POSITION:{size:3,value:S},NORMAL:{size:3,value:D},TEXCOORD_0:{size:2,value:x}}}}(e);super({...e,id:t,indices:i,attributes:{...r,...e.attributes}})}}class I1e extends u9{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=hr("cone-geometry"),radius:i=1,cap:r=!0}=e;super({...e,id:t,topRadius:0,topCap:!!r,bottomCap:!!r,bottomRadius:i})}}class D1e extends u9{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=hr("cylinder-geometry"),radius:i=1}=e;super({...e,id:t,bottomRadius:i,topRadius:i})}}const R1e=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),O1e=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),P1e=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),N1e=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),F1e={POSITION:{size:3,value:new Float32Array(O1e)},NORMAL:{size:3,value:new Float32Array(P1e)},TEXCOORD_0:{size:2,value:new Float32Array(N1e)}};class k1e extends hc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t=hr("cube-geometry")}=e;super({...e,id:t,indices:{size:1,value:new Uint16Array(R1e)},attributes:{...F1e,...e.attributes}})}}function qb(n,e,t){e||(e=new Be(Be.IDENTITY));const i=new Be(Be.IDENTITY);if(!n)return!0;if(n.matrix)i.copy(n.matrix);else{if(i.identity(),n.translation&&i.translate(n.translation),n.rotation){const s=new Be(Be.IDENTITY).fromQuaternion(n.rotation);i.multiplyRight(s)}n.scale&&i.scale(n.scale)}const r=new Be(e).multiplyRight(i);if(!1===t(n,r,e))return!1;for(const s of n.nodes||n.children||[])if(!1===qb(s,r,t))return!1;return!0}function d9(){l4([U6,eh])}function h9(n,e){const t=e.nodes?.find(i=>i.name===n);if(t){let i=!1;for(const r of e.scenes)i||qb(r,new Be(Be.IDENTITY),(s,o)=>s!==t||(s.matrix=o,s.translation=void 0,s.rotation=void 0,s.scale=void 0,i=!0,!1));return e.scene={id:n,name:n,nodes:[t]},e.scenes=[e.scene],{scene:e.scene,scenes:e.scenes}}return e}function f9(n,e){return fD.apply(this,arguments)}function fD(){return fD=te(function*(n,e){const t=n.scenegraph;let i;i=e?e[t]||(e[t]=fetch(t).then(s=>s.blob())):fetch(t);const r=yield mb(i,eh,{DracoLoader:WI,gltf:{decompressMeshes:!0,postProcess:!0}});return r.nodes||console.log("WARNING: Empty Scene",t,r),h9(n.scenegraphNode,r)}),fD.apply(this,arguments)}function L1e(n,e){return pD.apply(this,arguments)}function pD(){return pD=te(function*(n,e){return h9(n,yield e)}),pD.apply(this,arguments)}class Ps{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e){void 0===e&&(e=new b);const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t){void 0===t&&(t=new b);const i=this.elements,r=e.x,s=e.y,o=e.z;return t.x=i[0]*r+i[1]*s+i[2]*o,t.y=i[3]*r+i[4]*s+i[5]*o,t.z=i[6]*r+i[7]*s+i[8]*o,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t){void 0===t&&(t=new Ps);const i=this.elements,r=e.elements,s=t.elements,o=i[0],a=i[1],c=i[2],l=i[3],u=i[4],d=i[5],h=i[6],f=i[7],p=i[8],g=r[0],m=r[1],y=r[2],v=r[3],_=r[4],w=r[5],A=r[6],S=r[7],D=r[8];return s[0]=o*g+a*v+c*A,s[1]=o*m+a*_+c*S,s[2]=o*y+a*w+c*D,s[3]=l*g+u*v+d*A,s[4]=l*m+u*_+d*S,s[5]=l*y+u*w+d*D,s[6]=h*g+f*v+p*A,s[7]=h*m+f*_+p*S,s[8]=h*y+f*w+p*D,t}scale(e,t){void 0===t&&(t=new Ps);const i=this.elements,r=t.elements;for(let s=0;3!==s;s++)r[3*s+0]=e.x*i[3*s+0],r[3*s+1]=e.y*i[3*s+1],r[3*s+2]=e.z*i[3*s+2];return t}solve(e,t){void 0===t&&(t=new b);const s=[];let o,a;for(o=0;o<12;o++)s.push(0);for(o=0;o<3;o++)for(a=0;a<3;a++)s[o+4*a]=this.elements[o+3*a];s[3]=e.x,s[7]=e.y,s[11]=e.z;let c=3;const l=c;let u,h;do{if(o=l-c,0===s[o+4*o])for(a=o+1;a<l;a++)if(0!==s[o+4*a]){u=4;do{h=4-u,s[h+4*o]+=s[h+4*a]}while(--u);break}if(0!==s[o+4*o])for(a=o+1;a<l;a++){const f=s[o+4*a]/s[o+4*o];u=4;do{h=4-u,s[h+4*a]=h<=o?0:s[h+4*a]-s[h+4*o]*f}while(--u)}}while(--c);if(t.z=s[11]/s[10],t.y=(s[7]-s[6]*t.z)/s[5],t.x=(s[3]-s[2]*t.z-s[1]*t.y)/s[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw`Could not solve equation! Got x=[${t.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return t}e(e,t,i){if(void 0===i)return this.elements[t+3*e];this.elements[t+3*e]=i}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let i=0;i<9;i++)e+=this.elements[i]+",";return e}reverse(e){void 0===e&&(e=new Ps);const r=B1e;let s,o;for(s=0;s<3;s++)for(o=0;o<3;o++)r[s+6*o]=this.elements[s+3*o];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;let a=3;const c=a;let l,d;do{if(s=c-a,0===r[s+6*s])for(o=s+1;o<c;o++)if(0!==r[s+6*o]){l=6;do{d=6-l,r[d+6*s]+=r[d+6*o]}while(--l);break}if(0!==r[s+6*s])for(o=s+1;o<c;o++){const h=r[s+6*o]/r[s+6*s];l=6;do{d=6-l,r[d+6*o]=d<=s?0:r[d+6*o]-r[d+6*s]*h}while(--l)}}while(--a);s=2;do{o=s-1;do{const h=r[s+6*o]/r[s+6*s];l=6;do{d=6-l,r[d+6*o]=r[d+6*o]-r[d+6*s]*h}while(--l)}while(o--)}while(--s);s=2;do{const h=1/r[s+6*s];l=6;do{d=6-l,r[d+6*s]=r[d+6*s]*h}while(--l)}while(s--);s=2;do{o=2;do{if(d=r[3+o+6*s],isNaN(d)||d===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(s,o,d)}while(o--)}while(s--);return e}setRotationFromQuaternion(e){const t=e.x,i=e.y,r=e.z,s=e.w,o=t+t,a=i+i,c=r+r,l=t*o,u=t*a,d=t*c,h=i*a,f=i*c,p=r*c,g=s*o,m=s*a,y=s*c,v=this.elements;return v[0]=1-(h+p),v[1]=u-y,v[2]=d+m,v[3]=u+y,v[4]=1-(l+p),v[5]=f-g,v[6]=d-m,v[7]=f+g,v[8]=1-(l+h),this}transpose(e){void 0===e&&(e=new Ps);const t=this.elements,i=e.elements;let r;return i[0]=t[0],i[4]=t[4],i[8]=t[8],r=t[1],i[1]=t[3],i[3]=r,r=t[2],i[2]=t[6],i[6]=r,r=t[5],i[5]=t[7],i[7]=r,e}}const B1e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class b{constructor(e,t,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),this.x=e,this.y=t,this.z=i}cross(e,t){void 0===t&&(t=new b);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z;return t.x=a*s-c*r,t.y=c*i-o*s,t.z=o*r-a*i,t}set(e,t,i){return this.x=e,this.y=t,this.z=i,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new b(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new b(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new Ps([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,i=this.z,r=Math.sqrt(e*e+t*t+i*i);if(r>0){const s=1/r;this.x*=s,this.y*=s,this.z*=s}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new b);const t=this.x,i=this.y,r=this.z;let s=Math.sqrt(t*t+i*i+r*r);return s>0?(s=1/s,e.x=t*s,e.y=i*s,e.z=r*s):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,i=this.z;return Math.sqrt(e*e+t*t+i*i)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return Math.sqrt((s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r))}distanceSquared(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z;return(s-t)*(s-t)+(o-i)*(o-i)+(a-r)*(a-r)}scale(e,t){void 0===t&&(t=new b);const r=this.y,s=this.z;return t.x=e*this.x,t.y=e*r,t.z=e*s,t}vmul(e,t){return void 0===t&&(t=new b),t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,i){return void 0===i&&(i=new b),i.x=this.x+e*t.x,i.y=this.y+e*t.y,i.z=this.z+e*t.z,i}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new b),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const i=this.length();if(i>0){const r=V1e,s=1/i;r.set(this.x*s,this.y*s,this.z*s);const o=U1e;Math.abs(r.x)<.9?(o.set(1,0,0),r.cross(o,e)):(o.set(0,1,0),r.cross(o,e)),r.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,i){const r=this.x,s=this.y,o=this.z;i.x=r+(e.x-r)*t,i.y=s+(e.y-s)*t,i.z=o+(e.z-o)*t}almostEquals(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(p9),p9.almostEquals(e,t)}clone(){return new b(this.x,this.y,this.z)}}b.ZERO=new b(0,0,0),b.UNIT_X=new b(1,0,0),b.UNIT_Y=new b(0,1,0),b.UNIT_Z=new b(0,0,1);const V1e=new b,U1e=new b,p9=new b;class Vt{constructor(e){void 0===e&&(e={}),this.lowerBound=new b,this.upperBound=new b,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,i,r){const s=this.lowerBound,o=this.upperBound,a=i;s.copy(e[0]),a&&a.vmult(s,s),o.copy(s);for(let c=1;c<e.length;c++){let l=e[c];a&&(a.vmult(l,g9),l=g9),l.x>o.x&&(o.x=l.x),l.x<s.x&&(s.x=l.x),l.y>o.y&&(o.y=l.y),l.y<s.y&&(s.y=l.y),l.z>o.z&&(o.z=l.z),l.z<s.z&&(s.z=l.z)}return t&&(t.vadd(s,s),t.vadd(o,o)),r&&(s.x-=r,s.y-=r,s.z-=r,o.x+=r,o.y+=r,o.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new Vt).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return(r.x<=i.x&&i.x<=s.x||t.x<=s.x&&s.x<=i.x)&&(r.y<=i.y&&i.y<=s.y||t.y<=s.y&&s.y<=i.y)&&(r.z<=i.z&&i.z<=s.z||t.z<=s.z&&s.z<=i.z)}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,i=this.upperBound,r=e.lowerBound,s=e.upperBound;return t.x<=r.x&&i.x>=s.x&&t.y<=r.y&&i.y>=s.y&&t.z<=r.z&&i.z>=s.z}getCorners(e,t,i,r,s,o,a,c){const l=this.lowerBound,u=this.upperBound;e.copy(l),t.set(u.x,l.y,l.z),i.set(u.x,u.y,l.z),r.set(l.x,u.y,u.z),s.set(u.x,l.y,u.z),o.set(l.x,u.y,l.z),a.set(l.x,l.y,u.z),c.copy(u)}toLocalFrame(e,t){const i=m9;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let h=0;8!==h;h++){const f=i[h];e.pointToLocal(f,f)}return t.setFromPoints(i)}toWorldFrame(e,t){const i=m9;this.getCorners(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]);for(let h=0;8!==h;h++){const f=i[h];e.pointToWorld(f,f)}return t.setFromPoints(i)}overlapsRay(e){const{direction:t,from:i}=e,r=1/t.x,s=1/t.y,o=1/t.z,a=(this.lowerBound.x-i.x)*r,c=(this.upperBound.x-i.x)*r,l=(this.lowerBound.y-i.y)*s,u=(this.upperBound.y-i.y)*s,d=(this.lowerBound.z-i.z)*o,h=(this.upperBound.z-i.z)*o,f=Math.max(Math.max(Math.min(a,c),Math.min(l,u)),Math.min(d,h)),p=Math.min(Math.min(Math.max(a,c),Math.max(l,u)),Math.max(d,h));return!(p<0||f>p)}}const g9=new b,m9=[new b,new b,new b,new b,new b,new b,new b,new b];class y9{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;return void 0===i[e]&&(i[e]=[]),i[e].includes(t)||i[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return!(void 0===i[e]||!i[e].includes(t))}hasAnyEventListener(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const i=this._listeners;if(void 0===i[e])return this;const r=i[e].indexOf(t);return-1!==r&&i[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const i=this._listeners[e.type];if(void 0!==i){e.target=this;for(let r=0,s=i.length;r<s;r++)i[r].call(this,e)}return this}}class cn{constructor(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=e,this.y=t,this.z=i,this.w=r}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const i=Math.sin(.5*t);return this.x=e.x*i,this.y=e.y*i,this.z=e.z*i,this.w=Math.cos(.5*t),this}toAxisAngle(e){void 0===e&&(e=new b),this.normalize();const t=2*Math.acos(this.w),i=Math.sqrt(1-this.w*this.w);return i<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/i,e.y=this.y/i,e.z=this.z/i),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const i=j1e;e.tangents(i,H1e),this.setFromAxisAngle(i,Math.PI)}else{const i=e.cross(t);this.x=i.x,this.y=i.y,this.z=i.z,this.w=Math.sqrt(e.length()**2*t.length()**2)+e.dot(t),this.normalize()}return this}mult(e,t){void 0===t&&(t=new cn);const i=this.x,r=this.y,s=this.z,o=this.w,a=e.x,c=e.y,l=e.z,u=e.w;return t.x=i*u+o*a+r*l-s*c,t.y=r*u+o*c+s*a-i*l,t.z=s*u+o*l+i*c-r*a,t.w=o*u-i*a-r*c-s*l,t}inverse(e){void 0===e&&(e=new cn);const t=this.x,i=this.y,r=this.z,s=this.w;this.conjugate(e);const o=1/(t*t+i*i+r*r+s*s);return e.x*=o,e.y*=o,e.z*=o,e.w*=o,e}conjugate(e){return void 0===e&&(e=new cn),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t){void 0===t&&(t=new b);const i=e.x,r=e.y,s=e.z,o=this.x,a=this.y,c=this.z,l=this.w,u=l*i+a*s-c*r,d=l*r+c*i-o*s,h=l*s+o*r-a*i,f=-o*i-a*r-c*s;return t.x=u*l+f*-o+d*-c-h*-a,t.y=d*l+f*-a+h*-o-u*-c,t.z=h*l+f*-c+u*-a-d*-o,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t){let i,r,s;void 0===t&&(t="YZX");const o=this.x,a=this.y,c=this.z,l=this.w;if("YZX"!==t)throw new Error(`Euler order ${t} not supported yet.`);{const u=o*a+c*l;if(u>.499&&(i=2*Math.atan2(o,l),r=Math.PI/2,s=0),u<-.499&&(i=-2*Math.atan2(o,l),r=-Math.PI/2,s=0),void 0===i){const d=o*o,f=c*c;i=Math.atan2(2*a*l-2*o*c,1-a*a*2-2*f),r=Math.asin(2*u),s=Math.atan2(2*o*l-2*a*c,1-2*d-2*f)}}e.y=i,e.z=r,e.x=s}setFromEuler(e,t,i,r){void 0===r&&(r="XYZ");const s=Math.cos(e/2),o=Math.cos(t/2),a=Math.cos(i/2),c=Math.sin(e/2),l=Math.sin(t/2),u=Math.sin(i/2);return"XYZ"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a-c*l*u):"YXZ"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a+c*l*u):"ZXY"===r?(this.x=c*o*a-s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a-c*l*u):"ZYX"===r?(this.x=c*o*a-s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a+c*l*u):"YZX"===r?(this.x=c*o*a+s*l*u,this.y=s*l*a+c*o*u,this.z=s*o*u-c*l*a,this.w=s*o*a-c*l*u):"XZY"===r&&(this.x=c*o*a-s*l*u,this.y=s*l*a-c*o*u,this.z=s*o*u+c*l*a,this.w=s*o*a+c*l*u),this}clone(){return new cn(this.x,this.y,this.z,this.w)}slerp(e,t,i){void 0===i&&(i=new cn);const r=this.x,s=this.y,o=this.z,a=this.w;let h,f,p,g,m,c=e.x,l=e.y,u=e.z,d=e.w;return f=r*c+s*l+o*u+a*d,f<0&&(f=-f,c=-c,l=-l,u=-u,d=-d),1-f>1e-6?(h=Math.acos(f),p=Math.sin(h),g=Math.sin((1-t)*h)/p,m=Math.sin(t*h)/p):(g=1-t,m=t),i.x=g*r+m*c,i.y=g*s+m*l,i.z=g*o+m*u,i.w=g*a+m*d,i}integrate(e,t,i,r){void 0===r&&(r=new cn);const s=e.x*i.x,o=e.y*i.y,a=e.z*i.z,c=this.x,l=this.y,u=this.z,d=this.w,h=.5*t;return r.x+=h*(s*d+o*u-a*l),r.y+=h*(o*d+a*c-s*u),r.z+=h*(a*d+s*l-o*c),r.w+=h*(-s*c-o*l-a*u),r}}const j1e=new b,H1e=new b,z1e={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};let se=(()=>{class n{constructor(t){void 0===t&&(t={}),this.id=n.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(t,i){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(t,i,r,s){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}return n.idCounter=0,n.types=z1e,n})();class ct{constructor(e){void 0===e&&(e={}),this.position=new b,this.quaternion=new cn,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return ct.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return ct.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t){return void 0===t&&(t=new b),this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,i,r){return void 0===r&&(r=new b),i.vsub(e,r),t.conjugate(v9),v9.vmult(r,r),r}static pointToWorldFrame(e,t,i,r){return void 0===r&&(r=new b),t.vmult(i,r),r.vadd(e,r),r}static vectorToWorldFrame(e,t,i){return void 0===i&&(i=new b),e.vmult(t,i),i}static vectorToLocalFrame(e,t,i,r){return void 0===r&&(r=new b),t.w*=-1,t.vmult(i,r),t.w*=-1,r}}const v9=new cn;class gc extends se{constructor(e){void 0===e&&(e={});const{vertices:t=[],faces:i=[],normals:r=[],axes:s,boundingSphereRadius:o}=e;super({type:se.types.CONVEXPOLYHEDRON}),this.vertices=t,this.faces=i,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),o?this.boundingSphereRadius=o:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=s?s.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,i=this.uniqueEdges;i.length=0;const r=new b;for(let s=0;s!==e.length;s++){const o=e[s],a=o.length;for(let c=0;c!==a;c++){t[o[c]].vsub(t[o[(c+1)%a]],r),r.normalize();let u=!1;for(let d=0;d!==i.length;d++)if(i[d].almostEquals(r)||i[d].almostEquals(r)){u=!0;break}u||i.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let r=0;r<this.faces[e].length;r++)if(!this.vertices[this.faces[e][r]])throw new Error(`Vertex ${this.faces[e][r]} not found!`);const t=this.faceNormals[e]||new b;if(this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t,t.dot(this.vertices[this.faces[e][0]])<0){console.error(`.faceNormals[${e}] = Vec3(${t.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let r=0;r<this.faces[e].length;r++)console.warn(`.vertices[${this.faces[e][r]}] = Vec3(${this.vertices[this.faces[e][r]].toString()})`)}}}getFaceNormal(e,t){const i=this.faces[e];gc.computeNormal(this.vertices[i[0]],this.vertices[i[1]],this.vertices[i[2]],t)}static computeNormal(e,t,i,r){const s=new b,o=new b;t.vsub(e,o),i.vsub(t,s),s.cross(o,r),r.isZero()||r.normalize()}clipAgainstHull(e,t,i,r,s,o,a,c,l){const u=new b;let d=-1,h=-Number.MAX_VALUE;for(let p=0;p<i.faces.length;p++){u.copy(i.faceNormals[p]),s.vmult(u,u);const g=u.dot(o);g>h&&(h=g,d=p)}const f=[];for(let p=0;p<i.faces[d].length;p++){const g=i.vertices[i.faces[d][p]],m=new b;m.copy(g),s.vmult(m,m),r.vadd(m,m),f.push(m)}d>=0&&this.clipFaceAgainstHull(o,e,t,f,a,c,l)}findSeparatingAxis(e,t,i,r,s,o,a,c){const l=new b,u=new b,d=new b,h=new b,f=new b,p=new b;let g=Number.MAX_VALUE;const m=this;if(m.uniqueAxes)for(let y=0;y!==m.uniqueAxes.length;y++){i.vmult(m.uniqueAxes[y],l);const v=m.testSepAxis(l,e,t,i,r,s);if(!1===v)return!1;v<g&&(g=v,o.copy(l))}else{const y=a?a.length:m.faces.length;for(let v=0;v<y;v++){l.copy(m.faceNormals[a?a[v]:v]),i.vmult(l,l);const w=m.testSepAxis(l,e,t,i,r,s);if(!1===w)return!1;w<g&&(g=w,o.copy(l))}}if(e.uniqueAxes)for(let y=0;y!==e.uniqueAxes.length;y++){s.vmult(e.uniqueAxes[y],u);const v=m.testSepAxis(u,e,t,i,r,s);if(!1===v)return!1;v<g&&(g=v,o.copy(u))}else{const y=c?c.length:e.faces.length;for(let v=0;v<y;v++){u.copy(e.faceNormals[c?c[v]:v]),s.vmult(u,u);const w=m.testSepAxis(u,e,t,i,r,s);if(!1===w)return!1;w<g&&(g=w,o.copy(u))}}for(let y=0;y!==m.uniqueEdges.length;y++){i.vmult(m.uniqueEdges[y],h);for(let v=0;v!==e.uniqueEdges.length;v++)if(s.vmult(e.uniqueEdges[v],f),h.cross(f,p),!p.almostZero()){p.normalize();const _=m.testSepAxis(p,e,t,i,r,s);if(!1===_)return!1;_<g&&(g=_,o.copy(p))}}return r.vsub(t,d),d.dot(o)>0&&o.negate(o),!0}testSepAxis(e,t,i,r,s,o){gc.project(this,e,i,r,gD),gc.project(t,e,s,o,mD);const c=gD[0],l=gD[1],u=mD[0],d=mD[1];if(c<d||u<l)return!1;const h=c-d,f=u-l;return h<f?h:f}calculateLocalInertia(e,t){const i=new b,r=new b;this.computeLocalAABB(r,i);const s=i.x-r.x,o=i.y-r.y,a=i.z-r.z;t.x=1/12*e*(2*o*2*o+2*a*2*a),t.y=1/12*e*(2*s*2*s+2*a*2*a),t.z=1/12*e*(2*o*2*o+2*s*2*s)}getPlaneConstantOfFace(e){return-this.faceNormals[e].dot(this.vertices[this.faces[e][0]])}clipFaceAgainstHull(e,t,i,r,s,o,a){const c=new b,l=new b,u=new b,d=new b,h=new b,f=new b,p=new b,g=new b,m=this,v=r,_=[];let w=-1,A=Number.MAX_VALUE;for(let U=0;U<m.faces.length;U++){c.copy(m.faceNormals[U]),i.vmult(c,c);const V=c.dot(e);V<A&&(A=V,w=U)}if(w<0)return;const S=m.faces[w];S.connectedFaces=[];for(let U=0;U<m.faces.length;U++)for(let V=0;V<m.faces[U].length;V++)-1!==S.indexOf(m.faces[U][V])&&U!==w&&-1===S.connectedFaces.indexOf(U)&&S.connectedFaces.push(U);const D=S.length;for(let U=0;U<D;U++){const V=m.vertices[S[U]];V.vsub(m.vertices[S[(U+1)%D]],l),u.copy(l),i.vmult(u,u),t.vadd(u,u),d.copy(this.faceNormals[w]),i.vmult(d,d),t.vadd(d,d),u.cross(d,h),h.negate(h),f.copy(V),i.vmult(f,f),t.vadd(f,f);const O=S.connectedFaces[U];p.copy(this.faceNormals[O]);const L=this.getPlaneConstantOfFace(O);g.copy(p),i.vmult(g,g);const $=L-g.dot(t);for(this.clipFaceAgainstPlane(v,_,g,$);v.length;)v.shift();for(;_.length;)v.push(_.shift())}p.copy(this.faceNormals[w]);const x=this.getPlaneConstantOfFace(w);g.copy(p),i.vmult(g,g);const k=x-g.dot(t);for(let U=0;U<v.length;U++){let V=g.dot(v[U])+k;V<=s&&(console.log(`clamped: depth=${V} to minDist=${s}`),V=s),V<=o&&V<=1e-6&&a.push({point:v[U],normal:g,depth:V})}}clipFaceAgainstPlane(e,t,i,r){let s,o;const a=e.length;if(a<2)return t;let c=e[e.length-1],l=e[0];s=i.dot(c)+r;for(let u=0;u<a;u++){if(l=e[u],o=i.dot(l)+r,s<0)if(o<0){const d=new b;d.copy(l),t.push(d)}else{const d=new b;c.lerp(l,s/(s-o),d),t.push(d)}else if(o<0){const d=new b;c.lerp(l,s/(s-o),d),t.push(d),t.push(l)}c=l,s=o}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new b);const i=this.vertices,r=this.worldVertices;for(let s=0;s!==this.vertices.length;s++)t.vmult(i[s],r[s]),e.vadd(r[s],r[s]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const i=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const s=i[r];s.x<e.x?e.x=s.x:s.x>t.x&&(t.x=s.x),s.y<e.y?e.y=s.y:s.y>t.y&&(t.y=s.y),s.z<e.z?e.z=s.z:s.z>t.z&&(t.z=s.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new b);const i=this.faceNormals,r=this.worldFaceNormals;for(let s=0;s!==t;s++)e.vmult(i[s],r[s]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let i=0;i!==t.length;i++){const r=t[i].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,i,r){const s=this.vertices;let o,a,c,l,u,d,h=new b;for(let f=0;f<s.length;f++)h.copy(s[f]),t.vmult(h,h),e.vadd(h,h),(void 0===o||h.x<o)&&(o=h.x),(void 0===l||h.x>l)&&(l=h.x),(void 0===a||h.y<a)&&(a=h.y),(void 0===u||h.y>u)&&(u=h.y),(void 0===c||h.z<c)&&(c=h.z),(void 0===d||h.z>d)&&(d=h.z);i.set(o,a,c),r.set(l,u,d)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new b);const t=this.vertices;for(let i=0;i<t.length;i++)e.vadd(t[i],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const i=this.vertices.length,r=this.vertices;if(t){for(let s=0;s<i;s++){const o=r[s];t.vmult(o,o)}for(let s=0;s<this.faceNormals.length;s++){const o=this.faceNormals[s];t.vmult(o,o)}}if(e)for(let s=0;s<i;s++){const o=r[s];o.vadd(e,o)}}pointIsInside(e){const t=this.vertices,i=this.faces,r=this.faceNormals,o=new b;this.getAveragePointLocal(o);for(let a=0;a<this.faces.length;a++){let c=r[a];const l=t[i[a][0]],u=new b;e.vsub(l,u);const d=c.dot(u),h=new b;o.vsub(l,h);const f=c.dot(h);if(d<0&&f>0||d>0&&f<0)return!1}return-1}static project(e,t,i,r,s){const o=e.vertices.length,a=W1e;let c=0,l=0;const u=$1e,d=e.vertices;u.setZero(),ct.vectorToLocalFrame(i,r,t,a),ct.pointToLocalFrame(i,r,u,u);const h=u.dot(a);l=c=d[0].dot(a);for(let f=1;f<o;f++){const p=d[f].dot(a);p>c&&(c=p),p<l&&(l=p)}if(l-=h,c-=h,l>c){const f=l;l=c,c=f}s[0]=c,s[1]=l}}const gD=[],mD=[],W1e=(new b,new b),$1e=new b;class Xb extends se{constructor(e){super({type:se.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,i=this.halfExtents.z,r=b,s=[new r(-e,-t,-i),new r(e,-t,-i),new r(e,t,-i),new r(-e,t,-i),new r(-e,-t,i),new r(e,-t,i),new r(e,t,i),new r(-e,t,i)],a=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],c=new gc({vertices:s,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=c,c.material=this.material}calculateLocalInertia(e,t){return void 0===t&&(t=new b),Xb.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,i){const r=e;i.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),i.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),i.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,t){const i=e,r=this.halfExtents;if(i[0].set(r.x,0,0),i[1].set(0,r.y,0),i[2].set(0,0,r.z),i[3].set(-r.x,0,0),i[4].set(0,-r.y,0),i[5].set(0,0,-r.z),void 0!==t)for(let s=0;s!==i.length;s++)t.vmult(i[s],i[s]);return i}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,i){const r=this.halfExtents,s=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let o=0;o<s.length;o++)mc.set(s[o][0],s[o][1],s[o][2]),t.vmult(mc,mc),e.vadd(mc,mc),i(mc.x,mc.y,mc.z)}calculateWorldAABB(e,t,i,r){const s=this.halfExtents;Co[0].set(s.x,s.y,s.z),Co[1].set(-s.x,s.y,s.z),Co[2].set(-s.x,-s.y,s.z),Co[3].set(-s.x,-s.y,-s.z),Co[4].set(s.x,-s.y,-s.z),Co[5].set(s.x,s.y,-s.z),Co[6].set(-s.x,s.y,-s.z),Co[7].set(s.x,-s.y,s.z);const o=Co[0];t.vmult(o,o),e.vadd(o,o),r.copy(o),i.copy(o);for(let a=1;a<8;a++){const c=Co[a];t.vmult(c,c),e.vadd(c,c);const l=c.x,u=c.y,d=c.z;l>r.x&&(r.x=l),u>r.y&&(r.y=u),d>r.z&&(r.z=d),l<i.x&&(i.x=l),u<i.y&&(i.y=u),d<i.z&&(i.z=d)}}}const mc=new b,Co=[new b,new b,new b,new b,new b,new b,new b,new b];class ce extends y9{constructor(e){void 0===e&&(e={}),super(),this.id=ce.idCounter++,this.index=-1,this.world=null,this.vlambda=new b,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new b,this.previousPosition=new b,this.interpolatedPosition=new b,this.initPosition=new b,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new b,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new b,this.force=new b;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?ce.STATIC:ce.DYNAMIC,typeof e.type==typeof ce.STATIC&&(this.type=e.type),this.allowSleep=!(typeof e.allowSleep<"u")||e.allowSleep,this.sleepState=ce.AWAKE,this.sleepSpeedLimit=typeof e.sleepSpeedLimit<"u"?e.sleepSpeedLimit:.1,this.sleepTimeLimit=typeof e.sleepTimeLimit<"u"?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new b,this.quaternion=new cn,this.initQuaternion=new cn,this.previousQuaternion=new cn,this.interpolatedQuaternion=new cn,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new b,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new b,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new b,this.invInertia=new b,this.invInertiaWorld=new Ps,this.invMassSolve=0,this.invInertiaSolve=new b,this.invInertiaWorldSolve=new Ps,this.fixedRotation=typeof e.fixedRotation<"u"&&e.fixedRotation,this.angularDamping=typeof e.angularDamping<"u"?e.angularDamping:.01,this.linearFactor=new b(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new b(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new Vt,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new b,this.isTrigger=!!e.isTrigger,e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=ce.AWAKE,this.wakeUpAfterNarrowphase=!1,e===ce.SLEEPING&&this.dispatchEvent(ce.wakeupEvent)}sleep(){this.sleepState=ce.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;t===ce.AWAKE&&i<r?(this.sleepState=ce.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(ce.sleepyEvent)):t===ce.SLEEPY&&i>r?this.wakeUp():t===ce.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(ce.sleepEvent))}}updateSolveMassProperties(){this.sleepState===ce.SLEEPING||this.type===ce.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t){return void 0===t&&(t=new b),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t){return void 0===t&&(t=new b),this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t){return void 0===t&&(t=new b),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t){return void 0===t&&(t=new b),this.quaternion.vmult(e,t),t}addShape(e,t,i){const r=new b,s=new cn;return t&&r.copy(t),i&&s.copy(i),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(s),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,i=e.length;let r=0;for(let s=0;s!==i;s++){const o=e[s];o.updateBoundingSphereRadius();const a=t[s].length(),c=o.boundingSphereRadius;a+c>r&&(r=a+c)}this.boundingRadius=r}updateAABB(){const e=this.shapes,t=this.shapeOffsets,i=this.shapeOrientations,r=e.length,s=q1e,o=X1e,a=this.quaternion,c=this.aabb,l=Y1e;for(let u=0;u!==r;u++){const d=e[u];a.vmult(t[u],s),s.vadd(this.position,s),a.mult(i[u],o),d.calculateWorldAABB(s,o,l.lowerBound,l.upperBound),0===u?c.copy(l):c.extend(l)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const i=K1e,r=J1e;i.setRotationFromQuaternion(this.quaternion),i.transpose(r),i.scale(t,i),i.mmult(r,this.invInertiaWorld)}}applyForce(e,t){if(void 0===t&&(t=new b),this.type!==ce.DYNAMIC)return;this.sleepState===ce.SLEEPING&&this.wakeUp();const i=Q1e;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}applyLocalForce(e,t){if(void 0===t&&(t=new b),this.type!==ce.DYNAMIC)return;const i=eRe,r=tRe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}applyTorque(e){this.type===ce.DYNAMIC&&(this.sleepState===ce.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t){if(void 0===t&&(t=new b),this.type!==ce.DYNAMIC)return;this.sleepState===ce.SLEEPING&&this.wakeUp();const i=t,r=nRe;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const s=iRe;i.cross(e,s),this.invInertiaWorld.vmult(s,s),this.angularVelocity.vadd(s,this.angularVelocity)}applyLocalImpulse(e,t){if(void 0===t&&(t=new b),this.type!==ce.DYNAMIC)return;const i=rRe,r=sRe;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}updateMassProperties(){const e=oRe;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,i=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),Xb.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!i?1/t.x:0,t.y>0&&!i?1/t.y:0,t.z>0&&!i?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const i=new b;return e.vsub(this.position,i),this.angularVelocity.cross(i,t),this.velocity.vadd(t,t),t}integrate(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==ce.DYNAMIC&&this.type!==ce.KINEMATIC||this.sleepState===ce.SLEEPING)return;const r=this.velocity,s=this.angularVelocity,o=this.position,a=this.force,c=this.torque,l=this.quaternion,d=this.invInertiaWorld,h=this.linearFactor,f=this.invMass*e;r.x+=a.x*f*h.x,r.y+=a.y*f*h.y,r.z+=a.z*f*h.z;const p=d.elements,g=this.angularFactor,m=c.x*g.x,y=c.y*g.y,v=c.z*g.z;s.x+=e*(p[0]*m+p[1]*y+p[2]*v),s.y+=e*(p[3]*m+p[4]*y+p[5]*v),s.z+=e*(p[6]*m+p[7]*y+p[8]*v),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,l.integrate(this.angularVelocity,e,this.angularFactor,l),t&&(i?l.normalizeFast():l.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}ce.idCounter=0,ce.COLLIDE_EVENT_NAME="collide",ce.DYNAMIC=1,ce.STATIC=2,ce.KINEMATIC=4,ce.AWAKE=0,ce.SLEEPY=1,ce.SLEEPING=2,ce.wakeupEvent={type:"wakeup"},ce.sleepyEvent={type:"sleepy"},ce.sleepEvent={type:"sleep"};const q1e=new b,X1e=new cn,Y1e=new Vt,K1e=new Ps,J1e=new Ps,Q1e=(new Ps,new b),eRe=new b,tRe=new b,nRe=new b,iRe=new b,rRe=new b,sRe=new b,oRe=new b;new b,new b,new cn,new b,new b,new b,new b;class wg{constructor(){this.rayFromWorld=new b,this.rayToWorld=new b,this.hitNormalWorld=new b,this.hitPointWorld=new b,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,i,r,s,o,a){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(i),this.hitPointWorld.copy(r),this.shape=s,this.body=o,this.distance=a}}let b9,E9,w9,C9,A9,T9,S9;b9=se.types.SPHERE,E9=se.types.PLANE,w9=se.types.BOX,C9=se.types.CYLINDER,A9=se.types.CONVEXPOLYHEDRON,T9=se.types.HEIGHTFIELD,S9=se.types.TRIMESH;class Nn{get[b9](){return this._intersectSphere}get[E9](){return this._intersectPlane}get[w9](){return this._intersectBox}get[C9](){return this._intersectConvex}get[A9](){return this._intersectConvex}get[T9](){return this._intersectHeightfield}get[S9](){return this._intersectTrimesh}constructor(e,t){void 0===e&&(e=new b),void 0===t&&(t=new b),this.from=e.clone(),this.to=t.clone(),this.direction=new b,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=Nn.ANY,this.result=new wg,this.hasHit=!1,this.callback=i=>{}}intersectWorld(e,t){return this.mode=t.mode||Nn.ANY,this.result=t.result||new wg,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=typeof t.collisionFilterMask<"u"?t.collisionFilterMask:-1,this.collisionFilterGroup=typeof t.collisionFilterGroup<"u"?t.collisionFilterGroup:-1,this.checkCollisionResponse=!(typeof t.checkCollisionResponse<"u")||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(x9),ED.length=0,e.broadphase.aabbQuery(e,x9,ED),this.intersectBodies(ED),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const i=this.checkCollisionResponse;if(i&&!e.collisionResponse||!(this.collisionFilterGroup&e.collisionFilterMask)||!(e.collisionFilterGroup&this.collisionFilterMask))return;const r=fRe,s=pRe;for(let o=0,a=e.shapes.length;o<a;o++){const c=e.shapes[o];if((!i||c.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[o],s),e.quaternion.vmult(e.shapeOffsets[o],r),r.vadd(e.position,r),this.intersectShape(c,s,r,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let i=0,r=e.length;!this.result.shouldStop&&i<r;i++)this.intersectBody(e[i])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,i,r){if(function DRe(n,e,t){t.vsub(n,Fl);const i=Fl.dot(e);return e.scale(i,Kb),Kb.vadd(n,Kb),t.distanceTo(Kb)}(this.from,this.direction,i)>e.boundingSphereRadius)return;const a=this[e.type];a&&a.call(this,e,t,i,r,e)}_intersectBox(e,t,i,r,s){return this._intersectConvex(e.convexPolyhedronRepresentation,t,i,r,s)}_intersectPlane(e,t,i,r,s){const o=this.from,a=this.to,c=this.direction,l=new b(0,0,1);t.vmult(l,l);const u=new b;o.vsub(i,u);const d=u.dot(l);if(a.vsub(i,u),d*u.dot(l)>0||o.distanceTo(a)<d)return;const f=l.dot(c);if(Math.abs(f)<this.precision)return;const p=new b,g=new b,m=new b;o.vsub(i,p);const y=-l.dot(p)/f;c.scale(y,g),o.vadd(g,m),this.reportIntersection(l,m,s,r,-1)}getAABB(e){const{lowerBound:t,upperBound:i}=e,r=this.to,s=this.from;t.x=Math.min(r.x,s.x),t.y=Math.min(r.y,s.y),t.z=Math.min(r.z,s.z),i.x=Math.max(r.x,s.x),i.y=Math.max(r.y,s.y),i.z=Math.max(r.z,s.z)}_intersectHeightfield(e,t,i,r,s){const o=gRe;o.from.copy(this.from),o.to.copy(this.to),ct.pointToLocalFrame(i,t,o.from,o.from),ct.pointToLocalFrame(i,t,o.to,o.to),o.updateDirection();const a=mRe;let c,l,u,d;c=l=0,u=d=e.data.length-1;const h=new Vt;o.getAABB(h),e.getIndexOfPosition(h.lowerBound.x,h.lowerBound.y,a,!0),c=Math.max(c,a[0]),l=Math.max(l,a[1]),e.getIndexOfPosition(h.upperBound.x,h.upperBound.y,a,!0),u=Math.min(u,a[0]+1),d=Math.min(d,a[1]+1);for(let f=c;f<u;f++)for(let p=l;p<d;p++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(f,p,h),h.overlapsRay(o)){if(e.getConvexTrianglePillar(f,p,!1),ct.pointToWorldFrame(i,t,e.pillarOffset,Yb),this._intersectConvex(e.pillarConvex,t,Yb,r,s,M9),this.result.shouldStop)return;e.getConvexTrianglePillar(f,p,!0),ct.pointToWorldFrame(i,t,e.pillarOffset,Yb),this._intersectConvex(e.pillarConvex,t,Yb,r,s,M9)}}}_intersectSphere(e,t,i,r,s){const o=this.from,a=this.to,l=(a.x-o.x)**2+(a.y-o.y)**2+(a.z-o.z)**2,u=2*((a.x-o.x)*(o.x-i.x)+(a.y-o.y)*(o.y-i.y)+(a.z-o.z)*(o.z-i.z)),h=u**2-4*l*((o.x-i.x)**2+(o.y-i.y)**2+(o.z-i.z)**2-e.radius**2),f=_Re,p=yRe;if(!(h<0))if(0===h)o.lerp(a,h,f),f.vsub(i,p),p.normalize(),this.reportIntersection(p,f,s,r,-1);else{const g=(-u-Math.sqrt(h))/(2*l),m=(-u+Math.sqrt(h))/(2*l);if(g>=0&&g<=1&&(o.lerp(a,g,f),f.vsub(i,p),p.normalize(),this.reportIntersection(p,f,s,r,-1)),this.result.shouldStop)return;m>=0&&m<=1&&(o.lerp(a,m,f),f.vsub(i,p),p.normalize(),this.reportIntersection(p,f,s,r,-1))}}_intersectConvex(e,t,i,r,s,o){const a=vRe,c=I9,l=o&&o.faceList||null,u=e.faces,d=e.vertices,h=e.faceNormals,f=this.direction,p=this.from,m=p.distanceTo(this.to),y=l?l.length:u.length,v=this.result;for(let _=0;!v.shouldStop&&_<y;_++){const w=l?l[_]:_,A=u[w],S=h[w],D=t,x=i;c.copy(d[A[0]]),D.vmult(c,c),c.vadd(x,c),c.vsub(p,c),D.vmult(S,a);const k=f.dot(a);if(Math.abs(k)<this.precision)continue;const U=a.dot(c)/k;if(!(U<0)){f.scale(U,pr),pr.vadd(p,pr),Ns.copy(d[A[0]]),D.vmult(Ns,Ns),x.vadd(Ns,Ns);for(let V=1;!v.shouldStop&&V<A.length-1;V++){Ao.copy(d[A[V]]),To.copy(d[A[V+1]]),D.vmult(Ao,Ao),D.vmult(To,To),x.vadd(Ao,Ao),x.vadd(To,To);const G=pr.distanceTo(p);!Nn.pointInTriangle(pr,Ns,Ao,To)&&!Nn.pointInTriangle(pr,Ao,Ns,To)||G>m||this.reportIntersection(a,pr,s,r,w)}}}}_intersectTrimesh(e,t,i,r,s,o){const a=wRe,c=MRe,l=IRe,u=I9,d=CRe,h=ARe,f=TRe,p=xRe,g=SRe,m=e.indices,y=this.from,v=this.to,_=this.direction;l.position.copy(i),l.quaternion.copy(t),ct.vectorToLocalFrame(i,t,_,d),ct.pointToLocalFrame(i,t,y,h),ct.pointToLocalFrame(i,t,v,f),f.x*=e.scale.x,f.y*=e.scale.y,f.z*=e.scale.z,h.x*=e.scale.x,h.y*=e.scale.y,h.z*=e.scale.z,f.vsub(h,d),d.normalize();const w=h.distanceSquared(f);e.tree.rayQuery(this,l,c);for(let A=0,S=c.length;!this.result.shouldStop&&A!==S;A++){const D=c[A];e.getNormal(D,a),e.getVertex(m[3*D],Ns),Ns.vsub(h,u);const x=d.dot(a),k=a.dot(u)/x;if(k<0)continue;d.scale(k,pr),pr.vadd(h,pr),e.getVertex(m[3*D+1],Ao),e.getVertex(m[3*D+2],To);const U=pr.distanceSquared(h);!Nn.pointInTriangle(pr,Ao,Ns,To)&&!Nn.pointInTriangle(pr,Ns,Ao,To)||U>w||(ct.vectorToWorldFrame(t,a,g),ct.pointToWorldFrame(i,t,pr,p),this.reportIntersection(g,p,s,r,D))}c.length=0}reportIntersection(e,t,i,r,s){const o=this.from,a=this.to,c=o.distanceTo(t),l=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(l.hitFaceIndex=typeof s<"u"?s:-1,this.mode){case Nn.ALL:this.hasHit=!0,l.set(o,a,e,t,i,r,c),l.hasHit=!0,this.callback(l);break;case Nn.CLOSEST:(c<l.distance||!l.hasHit)&&(this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,t,i,r,c));break;case Nn.ANY:this.hasHit=!0,l.hasHit=!0,l.set(o,a,e,t,i,r,c),l.shouldStop=!0}}static pointInTriangle(e,t,i,r){r.vsub(t,Fl),i.vsub(t,Cg),e.vsub(t,wD);const s=Fl.dot(Fl),o=Fl.dot(Cg),a=Fl.dot(wD),c=Cg.dot(Cg),l=Cg.dot(wD);let u,d;return(u=c*a-o*l)>=0&&(d=s*l-o*a)>=0&&u+d<s*c-o*o}}Nn.CLOSEST=1,Nn.ANY=2,Nn.ALL=4;const x9=new Vt,ED=[],Cg=new b,wD=new b,fRe=new b,pRe=new cn,pr=new b,Ns=new b,Ao=new b,To=new b;new b,new wg;const M9={faceList:[0]},Yb=new b,gRe=new Nn,mRe=[],_Re=new b,yRe=new b,vRe=new b,I9=(new b,new b,new b),wRe=new b,CRe=new b,ARe=new b,TRe=new b,SRe=new b,xRe=new b;new Vt;const MRe=[],IRe=new ct,Fl=new b,Kb=new b;new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new Nn,new b,new b,new b,new b(1,0,0),new b(0,1,0),new b(0,0,1),new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new Vt,new b,new Vt,new b,new b,new b,new b,new b,new b,new b,new Vt,new b,new ct,new Vt,new b,new b,new b,new b,new b,new cn,new cn,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new Vt,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new b,new cn,new b,new b,new b,new b,new b,new b,new b,new b,new b,new Vt,new Nn;const Yn=globalThis.performance||{};if(!Yn.now){let n=Date.now();Yn.timing&&Yn.timing.navigationStart&&(n=Yn.timing.navigationStart),Yn.now=()=>Date.now()-n}function xD(){return xD=te(function*(n){console.log("Starting Collisioning");const e=n.filter(o=>!o.scenegraph&&"wireframe"!==o.geometry).map(o=>{const a=new Be(o.transformMatrix),c=a.transformAsPoint([-1,-1,-1],[]),l=a.transformAsPoint([1,1,1],[]);return{"@id":o["@id"],name:o.tooltip,entityId:o.entityId,bbox:new Vt({lowerBound:new b(...c.map((u,d)=>Math.min(u,l[d]))),upperBound:new b(...l.map((u,d)=>Math.max(u,c[d])))})}}),t=[];for(const o of n.filter(a=>!!a.scenegraph)){const a=yield ig(o.scenegraph,eh,{DracoLoader:WI,decompress:!0,postProcess:!0});for(const c of a.scenes??[])qb(c,new Be(o.transformMatrix),(l,u)=>{if(l.mesh&&l.mesh.primitives&&l.mesh.primitives.length>0)for(const d of l.mesh.primitives)if(d.attributes.POSITION&&d.attributes.POSITION.min){const h=u.transformAsPoint(d.attributes.POSITION.min,[]),f=u.transformAsPoint(d.attributes.POSITION.max,[]);t.push({"@id":o["@id"],name:l.name,entityId:o.entityId,bbox:new Vt({lowerBound:new b(...h.map((p,g)=>Math.min(p,f[g]))),upperBound:new b(...f.map((p,g)=>Math.max(p,h[g])))}),gltf:a})}return!0})}const i=[],r=[];for(const o of e){const a=[];for(const c of t)o.bbox.overlaps(c.bbox)&&a.push({"@id":c["@id"],name:c.name});a.length>0?i.push({"@id":o.entityId,name:o.name,hits:a}):r.push(o)}console.log({sourceBoxes:e,targetBoxes:t,report:i,sad:r,maxHits:Math.max(...i.map(o=>o.hits.length))});const s=[];for(const o of i){s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":"","Hit Name":""});for(const a of o.hits)s.push({"Tissue ID":o["@id"],"Tissue Name":o.name,"Hit ID":a["@id"],"Hit Name":a.name})}return console.log(s),i}),xD.apply(this,arguments)}function MD(n,e,t){if(e&&0!==e.length){let i;switch(t.geometry){case"sphere":i=new T1e;break;case"cone":i=new I1e;break;case"cylinder":i=new D1e;break;default:i=new k1e}return new JM({id:n,pickable:!0,autoHighlight:!1,highlightColor:[30,136,229,255],coordinateSystem:it.CARTESIAN,data:e,mesh:i,wireframe:!1,getColor:r=>r.color||[255,255,255,229.5],getTransformMatrix:r=>r.transformMatrix,...t})}}function t5(n,e,t){if(e&&0!==e.length)return new qM({id:n,pickable:!0,data:e.map(i=>({...i,position:new Be(i.transformMatrix).getTranslation()})),getText:i=>i.text,getPosition:i=>i.position,getColor:i=>i.color,...t})}new b;let FNe=(()=>{class n extends HM{static#e=this.layerName="BodyUILayer";static#t=this.gltfCache={};initializeState(){const{data:t}=this.props;this.setState({data:t??[],zoomOpacity:.8,doCollisions:!1}),d9()}renderLayers(){const t=this.state,i={sphere:[],cone:[],cylinder:[],cube:[],text:[],wireframe:[],scenegraph:[]};for(const o of t.data){const a=o.geometry??"cube";o.scenegraph?i.scenegraph.push(o):void 0!==i[a]&&i[a].push(o)}const r={};for(const o of i.scenegraph)o.scenegraph&&o.scenegraphNode&&!Object.prototype.hasOwnProperty.call(r,o.scenegraph)&&(r[o.scenegraph]=f9({scenegraph:o.scenegraph},n.gltfCache));const s=[];for(const[o,a]of Object.entries(i))if("scenegraph"===o)for(const c of a)s.push(new hD({id:"models-"+c["@id"],opacity:c.zoomBasedOpacity?t.zoomOpacity:c.opacity??1,pickable:!c.unpickable,coordinateSystem:it.CARTESIAN,data:[c],scenegraph:c.scenegraphNode?L1e(c.scenegraphNode,r[c.scenegraph]):c.scenegraph,_lighting:c._lighting,getTransformMatrix:c.transformMatrix,getColor:c.color??[0,255,0,127.5],parameters:{depthMask:!c.zoomBasedOpacity&&(void 0===c.opacity||1===c.opacity)}}));else"text"===o?(s.push(t5("text",a.filter(c=>c.unpickable),{pickable:!1})),s.push(t5("textPickable",a.filter(c=>!c.unpickable),{pickable:!0}))):"wireframe"===o?s.push(MD(o,a,{wireframe:!0,pickable:!1,geometry:o})):(s.push(MD(o,a.filter(c=>c.unpickable),{wireframe:!1,pickable:!1,geometry:o})),s.push(MD(`${o}Pickable`,a.filter(c=>!c.unpickable),{wireframe:!1,pickable:!0,geometry:o})));return t.doCollisions&&function NNe(n){xD.apply(this,arguments)}(t.data),s.filter(o=>!!o)}getPickingInfo(t){return t.info}}return n})();function n5(n,e=[]){for(const t of n.nodes||n.children||[])e.push(t.name),n5(t,e);return e}function ID(){return ID=te(function*(n,e,t,i){d9();const r=yield f9({scenegraph:n,scenegraphNode:t},i),s={},o=[];e=new Be(e??Be.IDENTITY);for(const a of r.scenes)qb(a,e,(c,l)=>{const u={"@id":c.name||c.id,"@type":"ProcessedNode",transformMatrix:new Be(l),geometry:"wireframe",node:c};if(o.push({"@id":`GLTF:${u["@id"]}`,"@type":"GLTFNode",scenegraph:n,scenegraphNode:u["@id"],transformMatrix:new Be(e||Be.IDENTITY),tooltip:c.name||c.id,color:[255,255,255,255],_lighting:"pbr",zoomBasedOpacity:!0,node:c}),c.mesh&&c.mesh.primitives&&c.mesh.primitives.length>0)for(const d of c.mesh.primitives)if(d.attributes.POSITION&&d.attributes.POSITION.min){const h=l.transformAsPoint(d.attributes.POSITION.min,[]),f=l.transformAsPoint(d.attributes.POSITION.max,[]);u.bbox=new Vt({lowerBound:new b(...h.map((p,g)=>Math.min(p,f[g]))),upperBound:new b(...f.map((p,g)=>Math.max(p,h[g])))})}return s[u["@id"]]=u,!0});for(const a of Object.values(s).filter(c=>!c.bbox)){for(const c of n5(a.node).map(l=>s[l]).filter(l=>l.bbox))a.bbox?a.bbox.extend(c.bbox):a.bbox=c.bbox.clone();a.bbox||delete s[a["@id"]]}for(const a of Object.values(s)){const c=a.bbox.lowerBound,d=(a.size=a.bbox.upperBound.clone().vsub(c)).clone().vmul(new b(.5,.5,.5)),h=a.center=c.clone().vadd(d);a.transformMatrix=new Be(Be.IDENTITY).translate(h.toArray()).scale(d.toArray())}for(const a of o)s[a["@id"]]=a;return s}),ID.apply(this,arguments)}class LNe{constructor(e){this.deckProps=e,this.bodyUILayer=new FNe({}),this.nodeClickSubject=new ue,this.nodeHoverStartSubject=new ue,this.nodeHoverStopSubject=new ue,this.sceneRotationSubject=new wn([0,0]),this.nodeDragStartSubject=new ue,this.nodeDragSubject=new ue,this.nodeDragEndSubject=new ue,this.nodeClick$=this.nodeClickSubject.pipe(qo()),this.nodeHoverStart$=this.nodeHoverStartSubject.pipe(qo()),this.nodeHoverStop$=this.nodeHoverStopSubject.pipe(qo()),this.sceneRotation$=this.sceneRotationSubject.pipe(qo()),this.nodeDragStart$=this.nodeDragStartSubject.pipe(qo()),this.nodeDrag$=this.nodeDragSubject.pipe(qo()),this.nodeDragEnd$=this.nodeDragEndSubject.pipe(qo()),this._onHover=i=>{const{lastHovered:r}=this;this.cursor=i.picked?"pointer":void 0,i.picked&&i.object?.["@id"]?r!==i.object&&(r&&this.nodeHoverStopSubject.next(r),this.lastHovered=i.object,this.nodeHoverStartSubject.next(i.object)):r&&(this.nodeHoverStopSubject.next(r),this.lastHovered=void 0)},this._onClick=(i,r)=>{i.picked&&i.object?.["@id"]&&this.nodeClickSubject.next({node:i.object,ctrlClick:r?.srcEvent?.ctrlKey??void 0})},this._onViewStateChange=i=>{if(i.interactionState?.isZooming){const r=this.bodyUILayer.state,s=Math.min(Math.max(1-(i.viewState.zoom-8.9)/2,.05),1);r.zoomOpacity!==s&&this.bodyUILayer.setState({data:r.data,zoomOpacity:s})}this.deck.setProps({viewState:{...i.viewState}}),this.sceneRotationSubject.next([i.viewState.rotationOrbit,i.viewState.rotationX])},this._onDragStart=(i,r)=>{this._dragEvent(i,r,this.nodeDragStartSubject)},this._onDrag=(i,r)=>{this._dragEvent(i,r,this.nodeDragSubject)},this._onDragEnd=(i,r)=>{this._dragEvent(i,r,this.nodeDragEndSubject)};const t={...e,views:["orthographic"===e.camera?new XS({flipY:!1,near:-1e3}):new vz({orbitAxis:"Y"})],controller:e.interactive??!0,layers:[this.bodyUILayer],onHover:this._onHover,onClick:this._onClick,onViewStateChange:this._onViewStateChange,onDragStart:this._onDragStart,onDrag:this._onDrag,onDragEnd:this._onDragEnd,getCursor:i=>this.cursor??(i.isDragging?"grabbing":"grab")};e.legacyLighting&&(t.effects=[new Mx({ambientLight:new SG({color:[255,255,255],intensity:10})})]),this.deck=new IM(t),this.deck.setProps({viewState:{orbitAxis:"Y",minRotationX:e.minRotationX??-15,maxRotationX:e.maxRotationX??15,target:e.target??[.5,.5,0],rotationX:0,rotationOrbit:e.rotation??0,zoom:e.zoom??9.5,camera:e.camera}}),e.rotation&&this.sceneRotationSubject.next([e.rotation,0])}initialize(){var e=this;return te(function*(){for(;!e.bodyUILayer.state;)yield new Promise(t=>{setTimeout(t,200)})})()}finalize(){this.deck.finalize()}setScene(e){if(e?.length>0){let t=this.bodyUILayer.state.zoomOpacity,i=!1;for(const r of e)r.zoomToOnLoad&&(this.zoomTo(r),i=!0);t=i?.05:t,this.deckProps.debugSceneNodeProcessing?this.debugSceneNodeProcessing(e,t):this.bodyUILayer.setState({data:e,zoomOpacity:t})}}debugSceneNodeProcessing(e,t){const i="https://hubmapconsortium.github.io/ccf-3d-reference-object-library/VH_Female/United/VHF_United_Color.glb",r=new Be([.076,0,0,0,0,.076,16875389974302382e-33,0,0,-16875389974302382e-33,.076,0,.49,.034,.11,1]);(function kNe(n,e,t,i){return ID.apply(this,arguments)})(i,r,"VHF_Kidney_L_Low1").then(s=>{console.log("results",s),console.log("data",e),(e=e.concat(Object.values(s))).push({"@id":"TEST","@type":"TEST",scenegraph:i,scenegraphNode:"VHF_Kidney_R_Low",transformMatrix:r,color:[255,255,255,200],_lighting:"pbr",zoomBasedOpacity:!1}),this.bodyUILayer.setState({data:e,zoomOpacity:t})})}zoomTo(e){const t=new Be(e.transformMatrix);this.deck.setProps({viewState:{...this.deck.props.viewState,target:t.getTranslation(),rotationX:0,rotationOrbit:0,zoom:11.5}})}setRotation(e){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationOrbit:e}})}setRotationX(e){this.deck.setProps({viewState:{...this.deck.props.viewState,rotationX:e}})}setZoom(e){this.deck.setProps({viewState:{...this.deck.props.viewState,zoom:e}})}setTarget(e){this.deck.setProps({viewState:{...this.deck.props.viewState,target:e}})}setInteractive(e){this.deck.setProps({controller:e})}_dragEvent(e,t,i){e?.object?.["@id"]&&i.next({node:e.object,info:e,e:t})}}const BNe=["bodyCanvas"];let VNe=(()=>{class n{constructor(){this.clsName="ccf-body-ui",this.rotationChange=new be,this.nodeDrag=new be,this.nodeClick=new be,this.nodeHoverStart=new be,this.nodeHoverStop=new be,this.initialized=new be,this._interactive=!0,this._rotation=0,this._rotationX=0,this._zoom=9.5,this._target=[0,0,0],this._scene=[],this.subscriptions=[]}get scene(){return this._scene}set scene(t){this._scene=t,this.bodyUI?.setScene(t)}get rotation(){return this._rotation}set rotation(t){this._rotation=t,this.bodyUI?.setRotation(t)}get rotationX(){return this._rotationX}set rotationX(t){this._rotationX=t,this.bodyUI?.setRotationX(t)}get zoom(){return this._zoom}set zoom(t){this._zoom=t,this.bodyUI?.setZoom(t)}get target(){return this._target}set target(t){this._target=t,this.bodyUI?.setTarget(t)}get bounds(){return this._bounds}set bounds(t){this._bounds=t,this.zoomToBounds(t)}get camera(){return this._camera}set camera(t){this._camera=t}get interactive(){return this._interactive}set interactive(t){this._interactive=t,this.bodyUI&&this.recreateBodyUI()}ngAfterViewInit(){this.setupBodyUI()}zoomToBounds(t,i={x:48,y:48}){if(this.bodyCanvas){const{width:r,height:s}=this.bodyCanvas.nativeElement,o=window.devicePixelRatio,a=Math.min(Math.log2((r-i.x)/o/t.x),Math.log2((s-i.y)/o/t.y));this.zoom=a}}setupBodyUI(){var t=this;return te(function*(){const i=t.bodyCanvas.nativeElement,r=new LNe({id:"body-ui",canvas:i,zoom:t.zoom,target:[0,0,0],rotation:0,minRotationX:-75,maxRotationX:75,interactive:t.interactive,camera:t.camera});i.addEventListener("contextmenu",s=>s.preventDefault()),yield r.initialize(),t.bodyUI=r,window.bodyUI=r,t.scene?.length>0&&t.bodyUI.setScene(t.scene),t.bounds&&t.zoomToBounds(t.bounds),t.target&&t.bodyUI.setTarget(t.target),t.subscriptions=[t.bodyUI.sceneRotation$.subscribe(s=>t.rotationChange.next(s)),t.bodyUI.nodeDrag$.subscribe(s=>t.nodeDrag.emit(s)),t.bodyUI.nodeClick$.subscribe(s=>t.nodeClick.emit(s)),t.bodyUI.nodeHoverStart$.subscribe(s=>t.nodeHoverStart.emit(s)),t.bodyUI.nodeHoverStop$.subscribe(s=>t.nodeHoverStop.emit(s))],t.initialized.emit()})()}recreateBodyUI(){this.clearSubscriptions(),this.bodyUI.finalize(),this.setupBodyUI()}clearSubscriptions(){this.subscriptions.forEach(t=>t.unsubscribe()),this.subscriptions=[]}ngOnDestroy(){this.clearSubscriptions()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Ut({type:n,selectors:[["ccf-body-ui"]],viewQuery:function(i,r){if(1&i&&Ho(BNe,5,gt),2&i){let s;Es(s=ws())&&(r.bodyCanvas=s.first)}},hostVars:2,hostBindings:function(i,r){2&i&&Yu(r.clsName)},inputs:{scene:"scene",rotation:"rotation",rotationX:"rotationX",zoom:"zoom",target:"target",bounds:"bounds",camera:"camera",interactive:"interactive"},outputs:{rotationChange:"rotationChange",nodeDrag:"nodeDrag",nodeClick:"nodeClick",nodeHoverStart:"nodeHoverStart",nodeHoverStop:"nodeHoverStop",initialized:"initialized"},decls:2,vars:0,consts:[["bodyCanvas",""],[1,"body-ui"]],template:function(i,r){1&i&&fi(0,"canvas",1,0)},styles:["[_nghost-%COMP%]{height:100%;display:block}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{position:relative!important;background-color:#000;border-radius:.5rem}"],changeDetection:0})}return n})();const Fs=new F(""),ii=new F("");Promise.resolve(),Promise.resolve();const UFe=["mat-internal-form-field",""],jFe=["*"],zFe=new F("mat-sanity-checks",{providedIn:"root",factory:function HFe(){return!0}});let cW=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!uS()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(i){return new(i||n)(I(Dge),I(zFe,8),I(Xe))};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({imports:[uj,uj]})}return n})();var os=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(os||{});class KFe{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=os.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const lW=yv({passive:!0,capture:!0});class JFe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Ka(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,lW)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,lW)))}}const uW={enterDuration:225,exitDuration:150},dW=yv({passive:!0,capture:!0}),hW=["mousedown","touchstart"],fW=["mouseup","mouseleave","touchend","touchcancel"];class m0{static#e=this._eventManager=new JFe;constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=wd(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...uW,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function QFe(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,c=t-r.top,l=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=c-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u);const d=window.getComputedStyle(u),f=d.transitionDuration,p="none"===d.transitionProperty||"0s"===f||"0s, 0s"===f||0===r.width&&0===r.height,g=new KFe(this,u,i,p);u.style.transform="scale3d(1, 1, 1)",g.state=os.FADING_IN,i.persistent||(this._mostRecentTransientRipple=g);let m=null;return!p&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const y=()=>{m&&(m.fallbackTimer=null),clearTimeout(_),this._finishRippleTransition(g)},v=()=>this._destroyRipple(g),_=setTimeout(v,l+100);u.addEventListener("transitionend",y),u.addEventListener("transitioncancel",v),m={onTransitionEnd:y,onTransitionCancel:v,fallbackTimer:_}}),this._activeRipples.set(g,m),(p||!l)&&this._finishRippleTransition(g),g}fadeOutRipple(e){if(e.state===os.FADING_OUT||e.state===os.HIDDEN)return;const t=e.element,i={...uW,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=os.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=wd(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,hW.forEach(i=>{m0._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{fW.forEach(t=>{this._triggerElement.addEventListener(t,this,dW)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===os.FADING_IN?this._startFadeOutTransition(e):e.state===os.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=os.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=os.HIDDEN,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),null!==t.fallbackTimer&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){const t=kj(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Lj(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===os.VISIBLE||e.config.terminateOnPointerUp&&e.state===os.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(hW.forEach(t=>m0._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(fW.forEach(t=>e.removeEventListener(t,this,dW)),this._pointerUpEventsRegistered=!1))}}const eke=new F("mat-ripple-global-options");let tke=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new m0(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(i){return new(i||n)(R(gt),R(pe),R(Jr),R(eke,8),R(Lc,8))};static#t=this.\u0275dir=ie({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(i,r){2&i&&yn("mat-ripple-unbounded",r.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return n})(),nke=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Ut({type:n,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(i,r){2&i&&yn("mdc-form-field--align-end","before"===r.labelPosition)},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[Ii],attrs:UFe,ngContentSelectors:jFe,decls:1,vars:0,template:function(i,r){1&i&&(Ks(),ei(0))},styles:[".mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}"],encapsulation:2,changeDetection:0})}return n})();const ike=["switch"],rke=["*"];function ske(n,e){1&n&&(we(0,"span",10),xm(),we(1,"svg",12),fi(2,"path",13),Te(),we(3,"svg",14),fi(4,"path",15),Te()())}const oke=new F("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1,disabledInteractive:!1})}),ake={provide:Fs,useExisting:It(()=>t1),multi:!0};class pW{constructor(e,t){this.source=e,this.checked=t}}let cke=0,t1=(()=>{class n{_createChangeEvent(t){return new pW(this,t)}get buttonId(){return`${this.id||this._uniqueId}-button`}focus(){this._switchElement.nativeElement.focus()}get checked(){return this._checked}set checked(t){this._checked=t,this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,i,r,s,o,a){this._elementRef=t,this._focusMonitor=i,this._changeDetectorRef=r,this.defaults=o,this._onChange=c=>{},this._onTouched=()=>{},this._validatorOnChange=()=>{},this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this.change=new be,this.toggleChange=new be,this.tabIndex=parseInt(s)||0,this.color=o.color||"accent",this._noopAnimations="NoopAnimations"===a,this.id=this._uniqueId="mat-mdc-slide-toggle-"+ ++cke,this.hideIcon=o.hideIcon??!1,this.disabledInteractive=o.disabledInteractive??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(t){t.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}validate(t){return this.required&&!0!==t.value?{required:!0}:null}registerOnValidatorChange(t){this._validatorOnChange=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.disabled||(this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new pW(this,this.checked))))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static#e=this.\u0275fac=function(i){return new(i||n)(R(gt),R(xv),R(ar),Ta("tabindex"),R(oke),R(Lc,8))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["mat-slide-toggle"]],viewQuery:function(i,r){if(1&i&&Ho(ike,5),2&i){let s;Es(s=ws())&&(r._switchElement=s.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(i,r){2&i&&(Sf("id",r.id),Tn("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Yu(r.color?"mat-"+r.color:""),yn("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],required:[2,"required","required",Sn],color:"color",disabled:[2,"disabled","disabled",Sn],disableRipple:[2,"disableRipple","disableRipple",Sn],tabIndex:[2,"tabIndex","tabIndex",t=>null==t?0:jf(t)],checked:[2,"checked","checked",Sn],hideIcon:[2,"hideIcon","hideIcon",Sn],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Sn]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],standalone:!0,features:[Dt([ake,{provide:ii,useExisting:n,multi:!0}]),Oa,zn,Ii],ngContentSelectors:rke,decls:13,vars:27,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(i,r){if(1&i){const s=Ys();Ks(),we(0,"div",1)(1,"button",2,0),ot("click",function(){return fn(s),pn(r._handleClick())}),fi(3,"span",3),we(4,"span",4)(5,"span",5)(6,"span",6),fi(7,"span",7),Te(),we(8,"span",8),fi(9,"span",9),Te(),Gi(10,ske,5,0,"span",10),Te()()(),we(11,"label",11),ot("click",function(a){return fn(s),pn(a.stopPropagation())}),ei(12),Te()()}if(2&i){const s=F_(2);mt("labelPosition",r.labelPosition),je(),yn("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled)("mat-mdc-slide-toggle-disabled-interactive",r.disabledInteractive),mt("tabIndex",r.disabled&&!r.disabledInteractive?-1:r.tabIndex)("disabled",r.disabled&&!r.disabledInteractive),Tn("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked)("aria-disabled",r.disabled&&r.disabledInteractive?"true":null),je(8),mt("matRippleTrigger",s)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),je(),I_(r.hideIcon?-1:10),je(),mt("for",r.buttonId),Tn("id",r._labelId)}},dependencies:[tke,nke],styles:['.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative;width:var(--mdc-switch-track-width)}.mdc-switch.mdc-switch--disabled{cursor:default;pointer-events:none}.mdc-switch.mat-mdc-slide-toggle-disabled-interactive{pointer-events:auto}.mdc-switch__track{overflow:hidden;position:relative;width:100%;height:var(--mdc-switch-track-height);border-radius:var(--mdc-switch-track-shape, var(--mat-app-corner-full))}.mdc-switch--disabled.mdc-switch .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%;border-width:var(--mat-switch-track-outline-width);border-color:var(--mat-switch-track-outline-color, var(--mat-app-outline))}.cdk-high-contrast-active .mdc-switch__track::before,.cdk-high-contrast-active .mdc-switch__track::after{border-color:currentColor}.mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track::after{border-width:var(--mat-switch-selected-track-outline-width);border-color:var(--mat-switch-selected-track-outline-color)}.mdc-switch--disabled .mdc-switch__track::before,.mdc-switch--disabled .mdc-switch__track::after{border-width:var(--mat-switch-disabled-unselected-track-outline-width);border-color:var(--mat-switch-disabled-unselected-track-outline-color, var(--mat-app-on-surface))}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0);background:var(--mdc-switch-unselected-track-color, var(--mat-app-surface-variant))}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch--selected .mdc-switch__track::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, var(--mat-app-surface-variant))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, var(--mat-app-surface-variant))}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, var(--mat-app-surface-variant))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::before,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::before,.mdc-switch.mdc-switch--disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, var(--mat-app-surface-variant))}.mdc-switch__track::after{transform:translateX(-100%);background:var(--mdc-switch-selected-track-color, var(--mat-app-primary))}[dir=rtl] .mdc-switch__track::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::after{transform:translateX(0)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, var(--mat-app-primary))}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, var(--mat-app-primary))}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, var(--mat-app-primary))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__track::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__track::after,.mdc-switch.mdc-switch--disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, var(--mat-app-on-surface))}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0);width:calc(100% - var(--mdc-switch-handle-width))}[dir=rtl] .mdc-switch__handle-track{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto;transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1);width:var(--mdc-switch-handle-width);height:var(--mdc-switch-handle-height);border-radius:var(--mdc-switch-handle-shape, var(--mat-app-corner-full))}[dir=rtl] .mdc-switch__handle{left:auto;right:0}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size);height:var(--mat-switch-unselected-handle-size);margin:var(--mat-switch-unselected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size);height:var(--mat-switch-selected-handle-size);margin:var(--mat-switch-selected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size);height:var(--mat-switch-with-icon-handle-size)}.mat-mdc-slide-toggle .mdc-switch:active:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size);height:var(--mat-switch-pressed-handle-size)}.mat-mdc-slide-toggle .mdc-switch--selected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected:active:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity)}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}.cdk-high-contrast-active .mdc-switch__handle::before,.cdk-high-contrast-active .mdc-switch__handle::after{border-color:currentColor}.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mat-app-on-primary))}.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, var(--mat-app-primary-container))}.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, var(--mat-app-primary-container))}.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, var(--mat-app-primary-container))}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:hover:not(:focus):not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:focus:not(:active) .mdc-switch__handle::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled.mdc-switch--selected:active .mdc-switch__handle::after,.mdc-switch--selected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, var(--mat-app-surface))}.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, var(--mat-app-outline))}.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, var(--mat-app-on-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, var(--mat-app-on-surface))}.mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:hover:not(:focus):not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:focus:not(:active) .mdc-switch__shadow,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:active .mdc-switch__shadow,.mdc-switch.mdc-switch--disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1;width:var(--mdc-switch-state-layer-size);height:var(--mdc-switch-state-layer-size)}.mdc-switch__ripple::after{content:"";opacity:0}.mdc-switch--disabled .mdc-switch__ripple::after{display:none}.mat-mdc-slide-toggle-disabled-interactive .mdc-switch__ripple::after{display:block}.mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:75ms opacity cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:focus .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:active .mdc-switch__ripple::after,.mat-mdc-slide-toggle-disabled-interactive.mdc-switch--disabled:enabled:hover:not(:focus) .mdc-switch__ripple::after,.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-hover-state-layer-color, var(--mat-app-on-surface))}.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-focus-state-layer-color, var(--mat-app-on-surface))}.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-unselected-pressed-state-layer-color, var(--mat-app-on-surface));opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background:var(--mdc-switch-selected-hover-state-layer-color, var(--mat-app-primary))}.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background:var(--mdc-switch-selected-focus-state-layer-color, var(--mat-app-primary))}.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background:var(--mdc-switch-selected-pressed-state-layer-color, var(--mat-app-primary));opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, var(--mat-app-pressed-state-layer-opacity));transition:opacity 75ms linear}.mdc-switch__icons{position:relative;height:100%;width:100%;z-index:1}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size);fill:var(--mdc-switch-unselected-icon-color, var(--mat-app-surface-variant))}.mdc-switch--unselected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mat-app-surface-variant))}.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size);fill:var(--mdc-switch-selected-icon-color, var(--mat-app-on-primary-container))}.mdc-switch--selected.mdc-switch--disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mat-app-on-surface))}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{-webkit-user-select:none;user-select:none;display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-internal-form-field{color:var(--mat-switch-label-text-color, var(--mat-app-on-surface));font-family:var(--mat-switch-label-text-font, var(--mat-app-body-medium-font));line-height:var(--mat-switch-label-text-line-height, var(--mat-app-body-medium-line-height));font-size:var(--mat-switch-label-text-size, var(--mat-app-body-medium-size));letter-spacing:var(--mat-switch-label-text-tracking, var(--mat-app-body-medium-tracking));font-weight:var(--mat-switch-label-text-weight, var(--mat-app-body-medium-weight))}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}'],encapsulation:2,changeDetection:0})}return n})(),dke=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({imports:[t1,cW,cW]})}return n})(),hke=(()=>{class n{constructor(){this.clsName="ccf-slide-toggle",this.labels=["Left","Right"],this.value="Left",this.disabled=!1,this.valueChange=new be}get left(){const{value:t,labels:i}=this;return t!==i[1]}updateToggle(t){this.value=t?this.labels[0]:this.labels[1],this.valueChange.emit(this.value)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=Ut({type:n,selectors:[["ccf-slide-toggle"]],hostVars:2,hostBindings:function(i,r){2&i&&Yu(r.clsName)},inputs:{labels:"labels",value:"value",disabled:"disabled"},outputs:{valueChange:"valueChange"},decls:6,vars:12,consts:[["toggle",""],[1,"slide-label",3,"click"],["hideIcon","",1,"slider",3,"change","disabled","checked"]],template:function(i,r){if(1&i){const s=Ys();we(0,"span",1),ot("click",function(){fn(s);const a=F_(3);return r.left||a.toggle(),pn(r.updateToggle(!0))}),pi(1),Te(),we(2,"mat-slide-toggle",2,0),ot("change",function(a){return fn(s),pn(r.updateToggle(!a.checked))}),Te(),we(4,"span",1),ot("click",function(){fn(s);const a=F_(3);return r.left&&a.toggle(),pn(r.updateToggle(!1))}),pi(5),Te()}2&i&&(yn("disabled",r.disabled)("highlighted",r.left),je(),Fa(" ",r.labels[0].charAt(0).toUpperCase()+r.labels[0].slice(1),"\n"),je(),mt("disabled",r.disabled)("checked",!r.left),je(2),yn("disabled",r.disabled)("highlighted",!r.left),je(),Fa(" ",r.labels[1].charAt(0).toUpperCase()+r.labels[1].slice(1),"\n"))},dependencies:[t1],styles:["[_nghost-%COMP%]   .slide-label[_ngcontent-%COMP%]{margin:0 1rem;transition:color .6s;cursor:pointer;opacity:50%}[_nghost-%COMP%]   .slide-label.highlighted[_ngcontent-%COMP%]{opacity:100%}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:30%!important;cursor:not-allowed}[_nghost-%COMP%]     .slider .mdc-switch__track:before, [_nghost-%COMP%]     .slider .mdc-switch__track:after{background-color:#43476580!important}[_nghost-%COMP%]     .slider .mdc-switch__shadow{background-color:#434765}"],changeDetection:0})}return n})();const fke=["bodyUI"],pke=()=>["Male","Female"],gke=()=>["Left","Right"];let mke=(()=>{class n{constructor(t){this.ga=t,this.sexChange=new be,this.sideChange=new be,this.nodeClick=new be}ngAfterViewChecked(){this.updateHighlighting()}updateHighlighting(){const t=new Set(this.filter?.tmc??[]);this.filteredBlocks=this.blocks?.filter(i=>t.has(i.donor?.providerName??"")).map(i=>i["@id"])??[],this.bodyUI.scene=this.bodyUI.scene.map(i=>({...i,color:i.entityId&&this.highlightedNodeId===i["@id"]?[30,136,229,255]:this.filteredBlocks.includes(i.entityId??"")?[173,255,47,229.5]:[255,255,255,229.5]}))}ngOnChanges(t){this.bodyUI&&"organ"in t&&this.zoomToFitOrgan()}updateSex(t){this.sex=t,this.sexChange.emit(this.sex)}updateSide(t){this.side=t,this.sideChange.emit(this.side)}zoomToFitOrgan(){const{bodyUI:t,organ:i}=this;if(i){const{x_dimension:r,y_dimension:s,z_dimension:o}=i;t.rotation=t.rotationX=0,t.bounds={x:1.25*r/1e3,y:1.25*s/1e3,z:1.25*o/1e3},t.target=[r/1e3/2,s/1e3/2,o/1e3/2]}}nodeClicked(t){this.ga.event("node_click","organ",t.node["@id"]),this.highlightedNodeId=this.highlightedNodeId&&this.highlightedNodeId===t.node["@id"]?"":t.node["@id"],this.nodeClick.emit(t)}static#e=this.\u0275fac=function(i){return new(i||n)(R(_d))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["ccf-organ"]],viewQuery:function(i,r){if(1&i&&Ho(fke,7),2&i){let s;Es(s=ws())&&(r.bodyUI=s.first)}},inputs:{organ:"organ",scene:"scene",organIri:"organIri",sex:"sex",side:"side",blocks:"blocks",filter:"filter"},outputs:{sexChange:"sexChange",sideChange:"sideChange",nodeClick:"nodeClick"},features:[zn],decls:5,vars:10,consts:[["bodyUI",""],["camera","perspective",1,"body-ui",3,"nodeClick","initialized","scene","interactive"],[1,"stage-options"],[1,"view-slider",3,"valueChange","labels","value","hidden"]],template:function(i,r){if(1&i){const s=Ys();we(0,"ccf-body-ui",1,0),ot("nodeClick",function(a){return fn(s),pn(r.nodeClicked(a))})("initialized",function(){return fn(s),pn(r.zoomToFitOrgan())}),Te(),we(2,"div",2)(3,"ccf-slide-toggle",3),ot("valueChange",function(a){return fn(s),pn(r.updateSex(a))}),Te(),we(4,"ccf-slide-toggle",3),ot("valueChange",function(a){return fn(s),pn(r.updateSide(a))}),Te()()}2&i&&(mt("scene",r.scene)("interactive",!0),je(3),mt("labels",Ju(8,pke))("value",r.sex)("hidden",!r.sex),je(),mt("labels",Ju(9,gke))("value",r.side)("hidden",!r.side))},dependencies:[VNe,hke],styles:["[_nghost-%COMP%]{display:block;background-color:#000;border-radius:.5rem;color:#fff;height:100%}[_nghost-%COMP%]   .body-ui[_ngcontent-%COMP%]{height:90%}[_nghost-%COMP%]   .stage-options[_ngcontent-%COMP%]{padding:1rem;min-width:352px}"],changeDetection:0})}return n})();const _ke=["left"],yke=["right"],n1=()=>[],vke=[{color:[0,0,0,0],opacity:.001}];let bke=(()=>{class n{constructor(t,i,r){this.ga=i,this.configState=r,this.sexChange=new be,this.sideChange=new be,this.nodeClicked=new be,this.sex$=this.configState.getOption("sex"),this.side$=this.configState.getOption("side"),this.filter$=this.configState.getOption("highlightProviders").pipe(oe(s=>({tmc:s??[]}))),this.donorLabel$=this.configState.getOption("donorLabel"),this.ruiUrl$=this.configState.getOption("ruiUrl"),this.euiUrl$=this.configState.getOption("euiUrl"),this.asctbUrl$=this.configState.getOption("asctbUrl"),this.hraPortalUrl$=this.configState.getOption("hraPortalUrl"),this.onlineCourseUrl$=this.configState.getOption("onlineCourseUrl"),this.paperUrl$=this.configState.getOption("paperUrl"),this.stats=[],this.latestConfig={},this.organInfo$=r.config$.pipe(bt(s=>this.latestConfig=s),nn(s=>t.getOrganInfo(s.organIri??"",s.side?.toLowerCase?.(),s.sex)),bt(s=>this.logOrganLookup(s)),bt(s=>this.latestOrganInfo=s),Xr(1)),this.organ$=this.organInfo$.pipe(nn(s=>s?t.getOrgan(s,s.hasSex?this.latestConfig.sex:void 0):Z(void 0)),bt(s=>{if(s&&this.latestOrganInfo){const o=this.latestOrganInfo?.hasSex?s.sex:void 0;o!==this.latestConfig.sex&&this.updateInput("sex",o),s.side!==this.latestConfig.side&&this.updateInput("side",s.side)}}),Xr(1)),this.scene$=this.organ$.pipe(nn(s=>s&&this.latestOrganInfo?t.getOrganScene(this.latestOrganInfo,s.sex):Z(vke))),this.stats$=ld([this.organ$,this.donorLabel$]).pipe(nn(([s,o])=>s&&this.latestOrganInfo?t.getOrganStats(this.latestOrganInfo,s.sex).pipe(oe(a=>a.map(c=>o&&"Donors"===c.label?{...c,label:o}:c))):Z([]))),this.statsLabel$=this.organ$.pipe(oe(s=>this.makeStatsLabel(this.latestOrganInfo,s?.sex)),Ga("Loading...")),this.blocks$=this.organ$.pipe(nn(s=>s&&this.latestOrganInfo?t.getBlocks(this.latestOrganInfo,s.sex):Z([])))}ngAfterViewInit(){const{left:t,right:i}=this;t.nativeElement.style.height=`${i.nativeElement.offsetHeight}px`}updateInput(t,i){this.configState.patchConfig({[t]:i})}makeStatsLabel(t,i){let r=[`Unknown IRI: ${this.latestConfig.organIri}`];if(t){const s=t.side?t.side.charAt(0).toUpperCase()+t.side.slice(1):void 0;r=[i,t.organ,s]}return r.filter(s=>!!s).join(", ")}logOrganLookup(t){this.ga.event(t?"organ_lookup_success":"organ_lookup_failure","organ",`Iri: ${this.latestConfig.organIri} - Sex: ${this.latestConfig.sex} - Side: ${this.latestConfig.side}`)}static#e=this.\u0275fac=function(i){return new(i||n)(R(H_e),R(_d),R(rl))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["ccf-root"]],viewQuery:function(i,r){if(1&i&&(Ho(_ke,7,gt),Ho(yke,7,gt)),2&i){let s;Es(s=ws())&&(r.left=s.first),Es(s=ws())&&(r.right=s.first)}},outputs:{sexChange:"sexChange",sideChange:"sideChange",nodeClicked:"nodeClicked"},decls:22,vars:45,consts:[["left",""],["right",""],[1,"container"],[1,"left"],[3,"sexChange","nodeClick","sideChange","blocks","filter","sex","side","organ","scene"],[1,"right"],[3,"statsLabel","stats"],[3,"ruiUrl","euiUrl","asctbUrl","hraPortalUrl","onlineCourseUrl","paperUrl"]],template:function(i,r){if(1&i){const s=Ys();we(0,"div",2)(1,"div",3,0)(3,"ccf-organ",4),vn(4,"async"),vn(5,"async"),vn(6,"async"),vn(7,"async"),vn(8,"async"),vn(9,"async"),ot("sexChange",function(a){return fn(s),r.updateInput("sex",a),pn(r.sexChange.emit(a))})("nodeClick",function(a){return fn(s),pn(r.nodeClicked.emit(a))})("sideChange",function(a){return fn(s),r.updateInput("side",a),pn(r.sideChange.emit(a))}),Te()(),we(10,"div",5,1),fi(12,"ccf-stats-list",6),vn(13,"async"),vn(14,"async"),fi(15,"ccf-link-cards",7),vn(16,"async"),vn(17,"async"),vn(18,"async"),vn(19,"async"),vn(20,"async"),vn(21,"async"),Te()()}if(2&i){let s,o,a,c,l,u,d,h,f,p,g;je(3),mt("blocks",null!==(s=bn(4,14,r.blocks$))&&void 0!==s?s:Ju(42,n1))("filter",bn(5,16,r.filter$))("sex",bn(6,18,r.sex$))("side",bn(7,20,r.side$))("organ",null!==(o=bn(8,22,r.organ$))&&void 0!==o?o:void 0)("scene",null!==(a=bn(9,24,r.scene$))&&void 0!==a?a:Ju(43,n1)),je(9),mt("statsLabel",null!==(c=bn(13,26,r.statsLabel$))&&void 0!==c?c:"")("stats",null!==(l=bn(14,28,r.stats$))&&void 0!==l?l:Ju(44,n1)),je(3),mt("ruiUrl",null!==(u=bn(16,30,r.ruiUrl$))&&void 0!==u?u:"")("euiUrl",null!==(d=bn(17,32,r.euiUrl$))&&void 0!==d?d:"")("asctbUrl",null!==(h=bn(18,34,r.asctbUrl$))&&void 0!==h?h:"")("hraPortalUrl",null!==(f=bn(19,36,r.hraPortalUrl$))&&void 0!==f?f:"")("onlineCourseUrl",null!==(p=bn(20,38,r.onlineCourseUrl$))&&void 0!==p?p:"")("paperUrl",null!==(g=bn(21,40,r.paperUrl$))&&void 0!==g?g:"")}},dependencies:[W_e,q_e,mke,py],styles:['.container[_ngcontent-%COMP%]{height:fit-content;display:flex;flex-direction:row;padding:1rem;font-family:var(--ccf-ui-font, ""),Inter,Inter Variable,sans-serif;font-size:.95rem;line-height:1.5;text-align:left;position:relative;background-color:#fff;color:#000}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:auto;flex-grow:1}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin-left:2rem;height:fit-content;width:29rem}'],changeDetection:0})}return n})();function Eke(n,e){if(1&n){const t=Ys();we(0,"ccf-root",1),ot("sexChange",function(r){return fn(t),pn(bs().sexChange.emit(r))})("nodeClicked",function(r){return fn(t),pn(bs().nodeClicked.emit(r))})("sideChange",function(r){return fn(t),pn(bs().sideChange.emit(r))}),Te()}}function wke(n){const e=i=>"string"==typeof i,t=i=>Array.isArray(i)&&i.every(e);if("string"==typeof n){const i=WH_json(n);if(t(i))return i}else if(t(n))return n;throw new Error("Invalid data sources")}function Cke(n){const e=i=>"string"==typeof i,t=i=>Array.isArray(i)&&i.every(e);if("string"==typeof n){if(!n?.startsWith("["))return[n];{const i=WH_json(n);if(t(i))return i}}else if(t(n))return n;throw new Error("Invalid data sources")}let Ake=(()=>{class n extends j_e{constructor(t,i){super(t,i,{initialDelay:10,initialConfig:{...Sd_dbOptions,...globalThis.dbOptions},parse:{dataSources:wke,highlightProviders:Cke}}),this.sex="Female",this.side="Left",this.sexChange=new be,this.sideChange=new be,this.nodeClicked=new be}static#e=this.\u0275fac=function(i){return new(i||n)(R(rl),R(ar))};static#t=this.\u0275cmp=Ut({type:n,selectors:[["ccf-root-wc"]],inputs:{organIri:"organIri",sex:"sex",side:"side",dataSources:"dataSources",highlightProviders:"highlightProviders",token:"token",remoteApiEndpoint:"remoteApiEndpoint",donorLabel:"donorLabel",ruiUrl:"ruiUrl",euiUrl:"euiUrl",asctbUrl:"asctbUrl",hraPortalUrl:"hraPortalUrl",onlineCourseUrl:"onlineCourseUrl",paperUrl:"paperUrl"},outputs:{sexChange:"sexChange",sideChange:"sideChange",nodeClicked:"nodeClicked"},features:[Je],decls:1,vars:1,consts:[[3,"sexChange","nodeClicked","sideChange",4,"ngIf"],[3,"sexChange","nodeClicked","sideChange"]],template:function(i,r){1&i&&Gi(0,Eke,1,0,"ccf-root",0),2&i&&mt("ngIf",r.initialized)},dependencies:[TA,bke],encapsulation:2,changeDetection:0})}return n})();const _0=(n,e)=>((n,e)=>new Array(e+1).join("0"))(0,e-n.toString().length)+n;class xke{constructor(e,t,i){this.action=e,this.store=t,this.logWriter=i}dispatched(e){const t=il(this.action),i=function Ske(n){return _0(n.getHours(),2)+":"+_0(n.getMinutes(),2)+":"+_0(n.getSeconds(),2)+"."+_0(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${t} @ ${i}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",{...this.action}),this.logWriter.logGrey("prev state",e)}completed(e){this.logWriter.logGreen("next state",e),this.logWriter.endGroup()}errored(e){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",e),this.logWriter.endGroup()}_hasPayload(e){return this._getNonEmptyProperties(e).length>0}_getNonEmptyProperties(e){return Object.keys(e).map(r=>e[r]).filter(r=>void 0!==r)}}class Mke{constructor(e){this.options=e,this.options=this.options||{},this.logger=e.logger||console}startGroup(e){const t=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{t.call(this.logger,e)}catch{console.log(e)}}endGroup(){try{this.logger.groupEnd()}catch{this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(e,t){this.log(e,"color: #9E9E9E; font-weight: bold",t)}logGreen(e,t){this.log(e,"color: #4CAF50; font-weight: bold",t)}logRedish(e,t){this.log(e,"color: #FD8182; font-weight: bold",t)}log(e,t,i){this.isIE()?this.logger.log(e,i):this.logger.log("%c "+e,t,i)}isIE(){const e=typeof window<"u"&&window.navigator.userAgent?window.navigator.userAgent:"";let t=!1;const i=e.indexOf("MSIE "),r=e.indexOf("Trident/");return(i>-1||r>-1)&&(t=!0),t}}const r1=new F("NGXS_LOGGER_PLUGIN_OPTIONS");let gW=(()=>{class n{constructor(t,i){this._options=t,this._injector=i}handle(t,i,r){if(this._options.disabled||!this._options.filter(i,t))return r(t,i);this._logWriter=this._logWriter||new Mke(this._options),this._store=this._store||this._injector.get(Yr);const s=new xke(i,this._store,this._logWriter);return s.dispatched(t),r(t,i).pipe(bt(o=>{s.completed(o)}),Qs(o=>{throw s.errored(o),o}))}static#e=this.\u0275fac=function(i){return new(i||n)(I(r1),I(ht))};static#t=this.\u0275prov=j({token:n,factory:n.\u0275fac})}return n})();const y0=new F("LOGGER_USER_OPTIONS");function mW(n){return{logger:console,collapsed:!1,disabled:!1,filter:()=>!0,...n}}let Ike=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:iV,useClass:gW,multi:!0},{provide:y0,useValue:t},{provide:r1,useFactory:mW,deps:[y0]}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({})}return n})();const Dke=[rl];let Rke=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({imports:[Wce.forRoot(),sce.forRoot(Dke,{developmentMode:!1}),Ike.forRoot({disabled:true})]})}return n})(),Oke=(()=>{class n{constructor(t){if(t)throw new Error("The core module should only be imported once in the root module")}static#e=this.\u0275fac=function(i){return new(i||n)(I(n,12))};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({providers:[{provide:lU,useExisting:ni},Ife(Dfe())],imports:[Ode.forRoot({gaToken:"G-ERNVZ1Q4KE",appName:"organ-info",projectName:"ccf",developmentMode:!1}),jfe.forRoot(()=>new Ya({basePath:Sd_dbOptions.remoteApiEndpoint})),Rke]})}return n})(),Pke=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({imports:[td,dke]})}return n})(),Nke=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({imports:[td,Coe,Pke]})}return n})(),Fke=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({imports:[td,VT]})}return n})(),kke=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({imports:[td]})}return n})();!function woe(){HA.apply(this,arguments)}("ccf-organ-info",Ake,{providers:[$1((()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=sn({type:n});static#n=this.\u0275inj=Qt({imports:[toe,Oke,Fke,kke,Nke]})}return n})())]})},123:(Ei,Kn,Qe)=>{Ei.exports={ResizeSensor:Qe(718),ElementQueries:Qe(240)}},240:function(Ei,Kn,Qe){"use strict";var ln,Nt,rn;typeof window<"u"&&window,Nt=[Qe(718)],void 0!==(rn="function"==typeof(ln=function(Jn){var ge=function(){var Ce,He={},Ee=[];function Ne(Y){Y||(Y=document.documentElement);var J=window.getComputedStyle(Y,null).fontSize;return parseFloat(J)||16}function K(Y,J){var Se=J.split(/\d/),xe=Se[Se.length-1];switch(J=parseFloat(J),xe){case"px":default:return J;case"em":return J*Ne(Y);case"rem":return J*Ne();case"vw":return J*document.documentElement.clientWidth/100;case"vh":return J*document.documentElement.clientHeight/100;case"vmin":case"vmax":var ke=document.documentElement.clientWidth/100,Ct=document.documentElement.clientHeight/100;return J*(0,Math["vmin"===xe?"min":"max"])(ke,Ct)}}function z(Y,J){this.element=Y;var Se,xe,ke,Ct,Zt,Ft,un,Zn,si=["min-width","min-height","max-width","max-height"];this.call=function(){for(Se in ke=function ne(Y){if(!Y.getBoundingClientRect)return{width:Y.offsetWidth,height:Y.offsetHeight};var J=Y.getBoundingClientRect();return{width:Math.round(J.width),height:Math.round(J.height)}}(this.element),Ft={},He[J])He[J].hasOwnProperty(Se)&&(Ct=K(this.element,(xe=He[J][Se]).value),Zt="width"===xe.property?ke.width:ke.height,un="","min"===xe.mode&&Zt>=Ct&&(un+=xe.value),"max"===xe.mode&&Zt<=Ct&&(un+=xe.value),Ft[Zn=xe.mode+"-"+xe.property]||(Ft[Zn]=""),un&&-1===(" "+Ft[Zn]+" ").indexOf(" "+un+" ")&&(Ft[Zn]+=" "+un));for(var Qn in si)si.hasOwnProperty(Qn)&&(Ft[si[Qn]]?this.element.setAttribute(si[Qn],Ft[si[Qn]].substr(1)):this.element.removeAttribute(si[Qn]))}}function ze(Y,J){Y.elementQueriesSetupInformation||(Y.elementQueriesSetupInformation=new z(Y,J)),Y.elementQueriesSensor||(Y.elementQueriesSensor=new Jn(Y,function(){Y.elementQueriesSetupInformation.call()}))}function et(Y,J,Se,xe){if(typeof He[Y]>"u"){He[Y]=[];var ke=Ee.length;Ce.innerHTML+="\n"+Y+" {animation: 0.1s element-queries;}",Ce.innerHTML+="\n"+Y+" > .resize-sensor {min-width: "+ke+"px;}",Ee.push(Y)}He[Y].push({mode:J,property:Se,value:xe})}function le(Y){var J;if(document.querySelectorAll&&(J=Y?Y.querySelectorAll.bind(Y):document.querySelectorAll.bind(document)),!J&&typeof $$<"u"&&(J=$$),!J&&typeof jQuery<"u"&&(J=jQuery),!J)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return J}function on(Y){var J=[],Se=[],xe=[],ke=0,Ct=-1,Zt=[];for(var Ft in Y.children)if(Y.children.hasOwnProperty(Ft)&&Y.children[Ft].tagName&&"img"===Y.children[Ft].tagName.toLowerCase()){J.push(Y.children[Ft]);var un=Y.children[Ft].getAttribute("min-width")||Y.children[Ft].getAttribute("data-min-width"),Zn=Y.children[Ft].getAttribute("data-src")||Y.children[Ft].getAttribute("url");xe.push(Zn),Se.push({minWidth:un}),un?Y.children[Ft].style.display="none":(ke=J.length-1,Y.children[Ft].style.display="block")}function Qn(){var wi,ut=!1;for(wi in J)J.hasOwnProperty(wi)&&Se[wi].minWidth&&Y.offsetWidth>Se[wi].minWidth&&(ut=wi);if(ut||(ut=ke),Ct!==ut)if(Zt[ut])J[Ct].style.display="none",J[ut].style.display="block",Ct=ut;else{var _r=new Image;_r.onload=function(){J[ut].src=xe[ut],J[Ct].style.display="none",J[ut].style.display="block",Zt[ut]=!0,Ct=ut},_r.src=xe[ut]}else J[ut].src=xe[ut]}Ct=ke,Y.resizeSensorInstance=new Jn(Y,Qn),Qn()}var kn=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,mr=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function ri(Y){var J,Se,xe,ke;for(Y=Y.replace(/'/g,'"');null!==(J=kn.exec(Y));)for(Se=J[1]+J[3],xe=J[2];null!==(ke=mr.exec(xe));)et(Se,ke[1],ke[2],ke[3])}function ki(Y){var J="";if(Y)if("string"==typeof Y)(-1!==(Y=Y.toLowerCase()).indexOf("min-width")||-1!==Y.indexOf("max-width"))&&ri(Y);else for(var Se=0,xe=Y.length;Se<xe;Se++)1===Y[Se].type?(-1!==(J=Y[Se].selectorText||Y[Se].cssText).indexOf("min-height")||-1!==J.indexOf("max-height")||-1!==J.indexOf("min-width")||-1!==J.indexOf("max-width"))&&ri(J):4===Y[Se].type?ki(Y[Se].cssRules||Y[Se].rules):3===Y[Se].type&&Y[Se].styleSheet.hasOwnProperty("cssRules")&&ki(Y[Se].styleSheet.cssRules)}var Li=!1;this.init=function(){var Y="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?Y="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?Y="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(Y="oanimationstart"),document.body.addEventListener(Y,function(xe){var ke=xe.target,Ct=ke&&window.getComputedStyle(ke,null),Zt=Ct&&Ct.getPropertyValue("animation-name");if(Zt&&-1!==Zt.indexOf("element-queries")){ke.elementQueriesSensor=new Jn(ke,function(){ke.elementQueriesSetupInformation&&ke.elementQueriesSetupInformation.call()});var Zn=window.getComputedStyle(ke.resizeSensor,null).getPropertyValue("min-width");Zn=parseInt(Zn.replace("px","")),ze(xe.target,Ee[Zn])}}),Li||((Ce=document.createElement("style")).type="text/css",Ce.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",Ce.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(Ce),Li=!0);for(var J=0,Se=document.styleSheets.length;J<Se;J++)try{document.styleSheets[J].href&&0===document.styleSheets[J].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[J].href),ki(document.styleSheets[J].cssRules||document.styleSheets[J].rules||document.styleSheets[J].cssText)}catch{}!function wt(){for(var J=le()("[data-responsive-image],[responsive-image]"),Se=0,xe=J.length;Se<xe;Se++)on(J[Se])}()},this.findElementQueriesElements=function(Y){!function Et(Y){var J=le(Y);for(var Se in He)if(He.hasOwnProperty(Se))for(var xe=J(Se,Y),ke=0,Ct=xe.length;ke<Ct;ke++)ze(xe[ke],Se)}(Y)},this.update=function(){this.init()}};ge.update=function(){ge.instance.update()},ge.detach=function(Ce){Ce.elementQueriesSetupInformation?(Ce.elementQueriesSensor.detach(),delete Ce.elementQueriesSetupInformation,delete Ce.elementQueriesSensor):Ce.resizeSensorInstance&&(Ce.resizeSensorInstance.detach(),delete Ce.resizeSensorInstance)},ge.init=function(){ge.instance||(ge.instance=new ge),ge.instance.init()};return ge.findElementQueriesElements=function(Ce){ge.instance.findElementQueriesElements(Ce)},ge.listen=function(){!function(Ce){if(document.addEventListener)document.addEventListener("DOMContentLoaded",Ce,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var He=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(Ce(),clearInterval(He))},10);else window.onload=Ce}(ge.init)},ge})?ln.apply(Kn,Nt):ln)&&(Ei.exports=rn)},718:function(Ei,Kn,Qe){"use strict";var ln,Nt;typeof window<"u"&&window,void 0!==(Nt="function"==typeof(ln=function(){if(typeof window>"u")return null;var rn=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),Jn=rn.requestAnimationFrame||rn.mozRequestAnimationFrame||rn.webkitRequestAnimationFrame||function(ne){return rn.setTimeout(ne,20)},ge=rn.cancelAnimationFrame||rn.mozCancelAnimationFrame||rn.webkitCancelAnimationFrame||function(ne){rn.clearTimeout(ne)};function lt(ne,K){var z=Object.prototype.toString.call(ne),ze="[object Array]"===z||"[object NodeList]"===z||"[object HTMLCollection]"===z||"[object Object]"===z||typeof jQuery<"u"&&ne instanceof jQuery||typeof Elements<"u"&&ne instanceof Elements,et=0,le=ne.length;if(ze)for(;et<le;et++)K(ne[et]);else K(ne)}function Ce(ne){if(!ne.getBoundingClientRect)return{width:ne.offsetWidth,height:ne.offsetHeight};var K=ne.getBoundingClientRect();return{width:Math.round(K.width),height:Math.round(K.height)}}function He(ne,K){Object.keys(K).forEach(function(z){ne.style[z]=K[z]})}var Ee=function(ne,K){var z=0;function ze(){var Et,on,le=[];this.add=function(wt){le.push(wt)},this.call=function(wt){for(Et=0,on=le.length;Et<on;Et++)le[Et].call(this,wt)},this.remove=function(wt){var kn=[];for(Et=0,on=le.length;Et<on;Et++)le[Et]!==wt&&kn.push(le[Et]);le=kn},this.length=function(){return le.length}}function et(le,Et){if(le){if(le.resizedAttached)return void le.resizedAttached.add(Et);le.resizedAttached=new ze,le.resizedAttached.add(Et),le.resizeSensor=document.createElement("div"),le.resizeSensor.dir="ltr",le.resizeSensor.className="resize-sensor";var on={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},wt={position:"absolute",left:"0px",top:"0px",transition:"0s"};He(le.resizeSensor,on);var kn=document.createElement("div");kn.className="resize-sensor-expand",He(kn,on);var mr=document.createElement("div");He(mr,wt),kn.appendChild(mr);var ri=document.createElement("div");ri.className="resize-sensor-shrink",He(ri,on);var ki=document.createElement("div");He(ki,wt),He(ki,{width:"200%",height:"200%"}),ri.appendChild(ki),le.resizeSensor.appendChild(kn),le.resizeSensor.appendChild(ri),le.appendChild(le.resizeSensor);var Li=window.getComputedStyle(le),Y=Li?Li.getPropertyValue("position"):null;"absolute"!==Y&&"relative"!==Y&&"fixed"!==Y&&"sticky"!==Y&&(le.style.position="relative");var J=!1,Se=0,xe=Ce(le),ke=0,Ct=0,Zt=!0;z=0;var un=function(){if(Zt){if(0===le.offsetWidth&&0===le.offsetHeight)return void(z||(z=Jn(function(){z=0,un()})));Zt=!1}var ut,wi;wi=le.offsetHeight,mr.style.width=(ut=le.offsetWidth)+10+"px",mr.style.height=wi+10+"px",kn.scrollLeft=ut+10,kn.scrollTop=wi+10,ri.scrollLeft=ut+10,ri.scrollTop=wi+10};le.resizeSensor.resetSensor=un;var Zn=function(){Se=0,J&&(ke=xe.width,Ct=xe.height,le.resizedAttached&&le.resizedAttached.call(xe))},si=function(){xe=Ce(le),(J=xe.width!==ke||xe.height!==Ct)&&!Se&&(Se=Jn(Zn)),un()},Qn=function(ut,wi,_r){ut.attachEvent?ut.attachEvent("on"+wi,_r):ut.addEventListener(wi,_r)};Qn(kn,"scroll",si),Qn(ri,"scroll",si),z=Jn(function(){z=0,un()})}}lt(ne,function(le){et(le,K)}),this.detach=function(le){z||(ge(z),z=0),Ee.detach(ne,le)},this.reset=function(){ne.resizeSensor.resetSensor()}};if(Ee.reset=function(ne){lt(ne,function(K){K.resizeSensor.resetSensor()})},Ee.detach=function(ne,K){lt(ne,function(z){z&&(z.resizedAttached&&"function"==typeof K&&(z.resizedAttached.remove(K),z.resizedAttached.length())||z.resizeSensor&&(z.contains(z.resizeSensor)&&z.removeChild(z.resizeSensor),delete z.resizeSensor,delete z.resizedAttached))})},typeof MutationObserver<"u"){var Ne=new MutationObserver(function(ne){for(var K in ne)if(ne.hasOwnProperty(K))for(var z=ne[K].addedNodes,ze=0;ze<z.length;ze++)z[ze].resizeSensor&&Ee.reset(z[ze])});document.addEventListener("DOMContentLoaded",function(ne){Ne.observe(document.body,{childList:!0,subtree:!0})})}return Ee})?ln.call(Kn,Qe,Kn,Ei):ln)&&(Ei.exports=Nt)},511:(Ei,Kn,Qe)=>{var ln;!function(Nt,rn,Jn,ge){"use strict";var le,lt=["","webkit","Moz","MS","ms","o"],Ce=rn.createElement("div"),He="function",Ee=Math.round,Ne=Math.abs,ne=Date.now;function K(C,T,M){return setTimeout(kn(C,M),T)}function z(C,T,M){return!!Array.isArray(C)&&(ze(C,M[T],M),!0)}function ze(C,T,M){var N;if(C)if(C.forEach)C.forEach(T,M);else if(C.length!==ge)for(N=0;N<C.length;)T.call(M,C[N],N,C),N++;else for(N in C)C.hasOwnProperty(N)&&T.call(M,C[N],N,C)}function et(C,T,M){var N="DEPRECATED METHOD: "+T+"\n"+M+" AT \n";return function(){var q=new Error("get-stack-trace"),re=q&&q.stack?q.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Ge=Nt.console&&(Nt.console.warn||Nt.console.log);return Ge&&Ge.call(Nt.console,N,re),C.apply(this,arguments)}}le="function"!=typeof Object.assign?function(T){if(T===ge||null===T)throw new TypeError("Cannot convert undefined or null to object");for(var M=Object(T),N=1;N<arguments.length;N++){var q=arguments[N];if(q!==ge&&null!==q)for(var re in q)q.hasOwnProperty(re)&&(M[re]=q[re])}return M}:Object.assign;var Et=et(function(T,M,N){for(var q=Object.keys(M),re=0;re<q.length;)(!N||N&&T[q[re]]===ge)&&(T[q[re]]=M[q[re]]),re++;return T},"extend","Use `assign`."),on=et(function(T,M){return Et(T,M,!0)},"merge","Use `assign`.");function wt(C,T,M){var q,N=T.prototype;(q=C.prototype=Object.create(N)).constructor=C,q._super=N,M&&le(q,M)}function kn(C,T){return function(){return C.apply(T,arguments)}}function mr(C,T){return typeof C==He?C.apply(T&&T[0]||ge,T):C}function ri(C,T){return C===ge?T:C}function ki(C,T,M){ze(Se(T),function(N){C.addEventListener(N,M,!1)})}function Li(C,T,M){ze(Se(T),function(N){C.removeEventListener(N,M,!1)})}function Y(C,T){for(;C;){if(C==T)return!0;C=C.parentNode}return!1}function J(C,T){return C.indexOf(T)>-1}function Se(C){return C.trim().split(/\s+/g)}function xe(C,T,M){if(C.indexOf&&!M)return C.indexOf(T);for(var N=0;N<C.length;){if(M&&C[N][M]==T||!M&&C[N]===T)return N;N++}return-1}function ke(C){return Array.prototype.slice.call(C,0)}function Ct(C,T,M){for(var N=[],q=[],re=0;re<C.length;){var Ge=T?C[re][T]:C[re];xe(q,Ge)<0&&N.push(C[re]),q[re]=Ge,re++}return M&&(N=T?N.sort(function(Bn,ci){return Bn[T]>ci[T]}):N.sort()),N}function Zt(C,T){for(var M,N,q=T[0].toUpperCase()+T.slice(1),re=0;re<lt.length;){if((N=(M=lt[re])?M+q:T)in C)return N;re++}return ge}var Ft=1;function Zn(C){var T=C.ownerDocument||C;return T.defaultView||T.parentWindow||Nt}var Qn="ontouchstart"in Nt,ut=Zt(Nt,"PointerEvent")!==ge,wi=Qn&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),_r="touch",jl="mouse",Hl=25,oi=1,dn=4,ai=8,zl=1,Gl=2,bc=4,Ec=8,wc=16,Zi=Gl|bc,xo=Ec|wc,E0=Zi|xo,Ve=["x","y"],pa=["clientX","clientY"];function Ci(C,T){var M=this;this.manager=C,this.callback=T,this.element=C.element,this.target=C.options.inputTarget,this.domHandler=function(N){mr(C.options.enable,[C])&&M.handler(N)},this.init()}function xt(C,T,M){var N=M.pointers.length,q=M.changedPointers.length,re=T&oi&&N-q==0,Ge=T&(dn|ai)&&N-q==0;M.isFirst=!!re,M.isFinal=!!Ge,re&&(C.session={}),M.eventType=T,function Vg(C,T){var M=C.session,N=T.pointers,q=N.length;M.firstInput||(M.firstInput=Lr(T)),q>1&&!M.firstMultiple?M.firstMultiple=Lr(T):1===q&&(M.firstMultiple=!1);var re=M.firstInput,Ge=M.firstMultiple,Ln=Ge?Ge.center:re.center,Bn=T.center=Cc(N);T.timeStamp=ne(),T.deltaTime=T.timeStamp-re.timeStamp,T.angle=uh(Ln,Bn),T.distance=$l(Ln,Bn),function Ug(C,T){var M=T.center,N=C.offsetDelta||{},q=C.prevDelta||{},re=C.prevInput||{};(T.eventType===oi||re.eventType===dn)&&(q=C.prevDelta={x:re.deltaX||0,y:re.deltaY||0},N=C.offsetDelta={x:M.x,y:M.y}),T.deltaX=q.x+(M.x-N.x),T.deltaY=q.y+(M.y-N.y)}(M,T),T.offsetDirection=Ac(T.deltaX,T.deltaY);var ci=lh(T.deltaTime,T.deltaX,T.deltaY);T.overallVelocityX=ci.x,T.overallVelocityY=ci.y,T.overallVelocity=Ne(ci.x)>Ne(ci.y)?ci.x:ci.y,T.scale=Ge?function dh(C,T){return $l(T[0],T[1],pa)/$l(C[0],C[1],pa)}(Ge.pointers,N):1,T.rotation=Ge?function w0(C,T){return uh(T[1],T[0],pa)+uh(C[1],C[0],pa)}(Ge.pointers,N):0,T.maxPointers=M.prevInput?T.pointers.length>M.prevInput.maxPointers?T.pointers.length:M.prevInput.maxPointers:T.pointers.length,function jg(C,T){var q,re,Ge,Ln,M=C.lastInterval||T,N=T.timeStamp-M.timeStamp;if(T.eventType!=ai&&(N>Hl||M.velocity===ge)){var Bn=T.deltaX-M.deltaX,ci=T.deltaY-M.deltaY,Ur=lh(N,Bn,ci);re=Ur.x,Ge=Ur.y,q=Ne(Ur.x)>Ne(Ur.y)?Ur.x:Ur.y,Ln=Ac(Bn,ci),C.lastInterval=T}else q=M.velocity,re=M.velocityX,Ge=M.velocityY,Ln=M.direction;T.velocity=q,T.velocityX=re,T.velocityY=Ge,T.direction=Ln}(M,T);var Ur=C.element;Y(T.srcEvent.target,Ur)&&(Ur=T.srcEvent.target),T.target=Ur}(C,M),C.emit("hammer.input",M),C.recognize(M),C.session.prevInput=M}function Lr(C){for(var T=[],M=0;M<C.pointers.length;)T[M]={clientX:Ee(C.pointers[M].clientX),clientY:Ee(C.pointers[M].clientY)},M++;return{timeStamp:ne(),pointers:T,center:Cc(T),deltaX:C.deltaX,deltaY:C.deltaY}}function Cc(C){var T=C.length;if(1===T)return{x:Ee(C[0].clientX),y:Ee(C[0].clientY)};for(var M=0,N=0,q=0;q<T;)M+=C[q].clientX,N+=C[q].clientY,q++;return{x:Ee(M/T),y:Ee(N/T)}}function lh(C,T,M){return{x:T/C||0,y:M/C||0}}function Ac(C,T){return C===T?zl:Ne(C)>=Ne(T)?C<0?Gl:bc:T<0?Ec:wc}function $l(C,T,M){M||(M=Ve);var N=T[M[0]]-C[M[0]],q=T[M[1]]-C[M[1]];return Math.sqrt(N*N+q*q)}function uh(C,T,M){return M||(M=Ve),180*Math.atan2(T[M[1]]-C[M[1]],T[M[0]]-C[M[0]])/Math.PI}Ci.prototype={handler:function(){},init:function(){this.evEl&&ki(this.element,this.evEl,this.domHandler),this.evTarget&&ki(this.target,this.evTarget,this.domHandler),this.evWin&&ki(Zn(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&Li(this.element,this.evEl,this.domHandler),this.evTarget&&Li(this.target,this.evTarget,this.domHandler),this.evWin&&Li(Zn(this.element),this.evWin,this.domHandler)}};var Mo={mousedown:oi,mousemove:2,mouseup:dn},ql="mousedown",C0="mousemove mouseup";function ga(){this.evEl=ql,this.evWin=C0,this.pressed=!1,Ci.apply(this,arguments)}wt(ga,Ci,{handler:function(T){var M=Mo[T.type];M&oi&&0===T.button&&(this.pressed=!0),2&M&&1!==T.which&&(M=dn),this.pressed&&(M&dn&&(this.pressed=!1),this.callback(this.manager,M,{pointers:[T],changedPointers:[T],pointerType:jl,srcEvent:T}))}});var A0={pointerdown:oi,pointermove:2,pointerup:dn,pointercancel:ai,pointerout:ai},hh={2:_r,3:"pen",4:jl,5:"kinect"},Hg="pointerdown",Io="pointermove pointerup pointercancel";function ma(){this.evEl=Hg,this.evWin=Io,Ci.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}Nt.MSPointerEvent&&!Nt.PointerEvent&&(Hg="MSPointerDown",Io="MSPointerMove MSPointerUp MSPointerCancel"),wt(ma,Ci,{handler:function(T){var M=this.store,N=!1,q=T.type.toLowerCase().replace("ms",""),re=A0[q],Ge=hh[T.pointerType]||T.pointerType,Ln=Ge==_r,Bn=xe(M,T.pointerId,"pointerId");re&oi&&(0===T.button||Ln)?Bn<0&&(M.push(T),Bn=M.length-1):re&(dn|ai)&&(N=!0),!(Bn<0)&&(M[Bn]=T,this.callback(this.manager,re,{pointers:M,changedPointers:[T],pointerType:Ge,srcEvent:T}),N&&M.splice(Bn,1))}});var T0={touchstart:oi,touchmove:2,touchend:dn,touchcancel:ai};function Xl(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,Ci.apply(this,arguments)}function ks(C,T){var M=ke(C.touches),N=ke(C.changedTouches);return T&(dn|ai)&&(M=Ct(M.concat(N),"identifier",!0)),[M,N]}wt(Xl,Ci,{handler:function(T){var M=T0[T.type];if(M===oi&&(this.started=!0),this.started){var N=ks.call(this,T,M);M&(dn|ai)&&N[0].length-N[1].length==0&&(this.started=!1),this.callback(this.manager,M,{pointers:N[0],changedPointers:N[1],pointerType:_r,srcEvent:T})}}});var x0={touchstart:oi,touchmove:2,touchend:dn,touchcancel:ai},zg="touchstart touchmove touchend touchcancel";function me(){this.evTarget=zg,this.targetIds={},Ci.apply(this,arguments)}function Gg(C,T){var M=ke(C.touches),N=this.targetIds;if(T&(2|oi)&&1===M.length)return N[M[0].identifier]=!0,[M,M];var q,re,Ge=ke(C.changedTouches),Ln=[],Bn=this.target;if(re=M.filter(function(ci){return Y(ci.target,Bn)}),T===oi)for(q=0;q<re.length;)N[re[q].identifier]=!0,q++;for(q=0;q<Ge.length;)N[Ge[q].identifier]&&Ln.push(Ge[q]),T&(dn|ai)&&delete N[Ge[q].identifier],q++;return Ln.length?[Ct(re.concat(Ln),"identifier",!0),Ln]:void 0}wt(me,Ci,{handler:function(T){var M=x0[T.type],N=Gg.call(this,T,M);N&&this.callback(this.manager,M,{pointers:N[0],changedPointers:N[1],pointerType:_r,srcEvent:T})}});var M0=2500;function ph(){Ci.apply(this,arguments);var C=kn(this.handler,this);this.touch=new me(this.manager,C),this.mouse=new ga(this.manager,C),this.primaryTouch=null,this.lastTouches=[]}function ue(C,T){C&oi?(this.primaryTouch=T.changedPointers[0].identifier,gh.call(this,T)):C&(dn|ai)&&gh.call(this,T)}function gh(C){var T=C.changedPointers[0];if(T.identifier===this.primaryTouch){var M={x:T.clientX,y:T.clientY};this.lastTouches.push(M);var N=this.lastTouches;setTimeout(function(){var re=N.indexOf(M);re>-1&&N.splice(re,1)},M0)}}function wn(C){for(var T=C.srcEvent.clientX,M=C.srcEvent.clientY,N=0;N<this.lastTouches.length;N++){var q=this.lastTouches[N],re=Math.abs(T-q.x),Ge=Math.abs(M-q.y);if(re<=25&&Ge<=25)return!0}return!1}wt(ph,Ci,{handler:function(T,M,N){var re=N.pointerType==jl;if(!(re&&N.sourceCapabilities&&N.sourceCapabilities.firesTouchEvents)){if(N.pointerType==_r)ue.call(this,M,N);else if(re&&wn.call(this,N))return;this.callback(T,M,N)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var mh=Zt(Ce.style,"touchAction"),At=mh!==ge,dt="compute",oe="manipulation",Do="none",as="pan-x",_a="pan-y",Tc=function I0(){if(!At)return!1;var C={},T=Nt.CSS&&Nt.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(M){C[M]=!T||Nt.CSS.supports("touch-action",M)}),C}();function Yl(C,T){this.manager=C,this.set(T)}Yl.prototype={set:function(C){C==dt&&(C=this.compute()),At&&this.manager.element.style&&Tc[C]&&(this.manager.element.style[mh]=C),this.actions=C.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var C=[];return ze(this.manager.recognizers,function(T){mr(T.options.enable,[T])&&(C=C.concat(T.getTouchAction()))}),function _h(C){if(J(C,Do))return Do;var T=J(C,as),M=J(C,_a);return T&&M?Do:T||M?T?as:_a:J(C,oe)?oe:"auto"}(C.join(" "))},preventDefaults:function(C){var T=C.srcEvent,M=C.offsetDirection;if(!this.manager.session.prevented){var N=this.actions,q=J(N,Do)&&!Tc[Do],re=J(N,_a)&&!Tc[_a],Ge=J(N,as)&&!Tc[as];if(q&&1===C.pointers.length&&C.distance<2&&C.deltaTime<250)return;return Ge&&re||!(q||re&&M&Zi||Ge&&M&xo)?void 0:this.preventSrc(T)}T.preventDefault()},preventSrc:function(C){this.manager.session.prevented=!0,C.preventDefault()}};var Kl=1;function ls(C){this.options=le({},this.defaults,C||{}),this.id=function un(){return Ft++}(),this.manager=null,this.options.enable=ri(this.options.enable,!0),this.state=Kl,this.simultaneous={},this.requireFail=[]}function qg(C){return 16&C?"cancel":8&C?"end":4&C?"move":2&C?"start":""}function D0(C){return C==wc?"down":C==Ec?"up":C==Gl?"left":C==bc?"right":""}function yh(C,T){var M=T.manager;return M?M.get(C):C}function Vr(){ls.apply(this,arguments)}function Xt(){Vr.apply(this,arguments),this.pX=null,this.pY=null}function Xg(){Vr.apply(this,arguments)}function vh(){ls.apply(this,arguments),this._timer=null,this._input=null}function bh(){Vr.apply(this,arguments)}function Yg(){Vr.apply(this,arguments)}function Jl(){ls.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function us(C,T){return(T=T||{}).recognizers=ri(T.recognizers,us.defaults.preset),new wh(C,T)}function wh(C,T){this.options=le({},us.defaults,T||{}),this.options.inputTarget=this.options.inputTarget||C,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=C,this.input=function Wl(C){return new(C.options.inputClass||(ut?ma:wi?me:Qn?ph:ga))(C,xt)}(this),this.touchAction=new Yl(this,this.options.touchAction),Jg(this,!0),ze(this.options.recognizers,function(M){var N=this.add(new M[0](M[1]));M[2]&&N.recognizeWith(M[2]),M[3]&&N.requireFailure(M[3])},this)}function Jg(C,T){var N,M=C.element;M.style&&(ze(C.options.cssProps,function(q,re){N=Zt(M.style,re),T?(C.oldCssProps[N]=M.style[N],M.style[N]=q):M.style[N]=C.oldCssProps[N]||""}),T||(C.oldCssProps={}))}ls.prototype={defaults:{},set:function(C){return le(this.options,C),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(C){if(z(C,"recognizeWith",this))return this;var T=this.simultaneous;return T[(C=yh(C,this)).id]||(T[C.id]=C,C.recognizeWith(this)),this},dropRecognizeWith:function(C){return z(C,"dropRecognizeWith",this)||(C=yh(C,this),delete this.simultaneous[C.id]),this},requireFailure:function(C){if(z(C,"requireFailure",this))return this;var T=this.requireFail;return-1===xe(T,C=yh(C,this))&&(T.push(C),C.requireFailure(this)),this},dropRequireFailure:function(C){if(z(C,"dropRequireFailure",this))return this;C=yh(C,this);var T=xe(this.requireFail,C);return T>-1&&this.requireFail.splice(T,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(C){return!!this.simultaneous[C.id]},emit:function(C){var T=this,M=this.state;function N(q){T.manager.emit(q,C)}M<8&&N(T.options.event+qg(M)),N(T.options.event),C.additionalEvent&&N(C.additionalEvent),M>=8&&N(T.options.event+qg(M))},tryEmit:function(C){if(this.canEmit())return this.emit(C);this.state=32},canEmit:function(){for(var C=0;C<this.requireFail.length;){if(!(this.requireFail[C].state&(32|Kl)))return!1;C++}return!0},recognize:function(C){var T=le({},C);if(!mr(this.options.enable,[this,T]))return this.reset(),void(this.state=32);56&this.state&&(this.state=Kl),this.state=this.process(T),30&this.state&&this.tryEmit(T)},process:function(C){},getTouchAction:function(){},reset:function(){}},wt(Vr,ls,{defaults:{pointers:1},attrTest:function(C){var T=this.options.pointers;return 0===T||C.pointers.length===T},process:function(C){var T=this.state,M=C.eventType,N=6&T,q=this.attrTest(C);return N&&(M&ai||!q)?16|T:N||q?M&dn?8|T:2&T?4|T:2:32}}),wt(Xt,Vr,{defaults:{event:"pan",threshold:10,pointers:1,direction:E0},getTouchAction:function(){var C=this.options.direction,T=[];return C&Zi&&T.push(_a),C&xo&&T.push(as),T},directionTest:function(C){var T=this.options,M=!0,N=C.distance,q=C.direction,re=C.deltaX,Ge=C.deltaY;return q&T.direction||(T.direction&Zi?(q=0===re?zl:re<0?Gl:bc,M=re!=this.pX,N=Math.abs(C.deltaX)):(q=0===Ge?zl:Ge<0?Ec:wc,M=Ge!=this.pY,N=Math.abs(C.deltaY))),C.direction=q,M&&N>T.threshold&&q&T.direction},attrTest:function(C){return Vr.prototype.attrTest.call(this,C)&&(2&this.state||!(2&this.state)&&this.directionTest(C))},emit:function(C){this.pX=C.deltaX,this.pY=C.deltaY;var T=D0(C.direction);T&&(C.additionalEvent=this.options.event+T),this._super.emit.call(this,C)}}),wt(Xg,Vr,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Do]},attrTest:function(C){return this._super.attrTest.call(this,C)&&(Math.abs(C.scale-1)>this.options.threshold||2&this.state)},emit:function(C){1!==C.scale&&(C.additionalEvent=this.options.event+(C.scale<1?"in":"out")),this._super.emit.call(this,C)}}),wt(vh,ls,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return["auto"]},process:function(C){var T=this.options,M=C.pointers.length===T.pointers,N=C.distance<T.threshold,q=C.deltaTime>T.time;if(this._input=C,!N||!M||C.eventType&(dn|ai)&&!q)this.reset();else if(C.eventType&oi)this.reset(),this._timer=K(function(){this.state=8,this.tryEmit()},T.time,this);else if(C.eventType&dn)return 8;return 32},reset:function(){clearTimeout(this._timer)},emit:function(C){8===this.state&&(C&&C.eventType&dn?this.manager.emit(this.options.event+"up",C):(this._input.timeStamp=ne(),this.manager.emit(this.options.event,this._input)))}}),wt(bh,Vr,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Do]},attrTest:function(C){return this._super.attrTest.call(this,C)&&(Math.abs(C.rotation)>this.options.threshold||2&this.state)}}),wt(Yg,Vr,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Zi|xo,pointers:1},getTouchAction:function(){return Xt.prototype.getTouchAction.call(this)},attrTest:function(C){var M,T=this.options.direction;return T&(Zi|xo)?M=C.overallVelocity:T&Zi?M=C.overallVelocityX:T&xo&&(M=C.overallVelocityY),this._super.attrTest.call(this,C)&&T&C.offsetDirection&&C.distance>this.options.threshold&&C.maxPointers==this.options.pointers&&Ne(M)>this.options.velocity&&C.eventType&dn},emit:function(C){var T=D0(C.offsetDirection);T&&this.manager.emit(this.options.event+T,C),this.manager.emit(this.options.event,C)}}),wt(Jl,ls,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[oe]},process:function(C){var T=this.options,M=C.pointers.length===T.pointers,N=C.distance<T.threshold,q=C.deltaTime<T.time;if(this.reset(),C.eventType&oi&&0===this.count)return this.failTimeout();if(N&&q&&M){if(C.eventType!=dn)return this.failTimeout();var re=!this.pTime||C.timeStamp-this.pTime<T.interval,Ge=!this.pCenter||$l(this.pCenter,C.center)<T.posThreshold;if(this.pTime=C.timeStamp,this.pCenter=C.center,Ge&&re?this.count+=1:this.count=1,this._input=C,0==this.count%T.taps)return this.hasRequireFailures()?(this._timer=K(function(){this.state=8,this.tryEmit()},T.interval,this),2):8}return 32},failTimeout:function(){return this._timer=K(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),us.VERSION="2.0.7",us.defaults={domEvents:!1,touchAction:dt,enable:!0,inputTarget:null,inputClass:null,preset:[[bh,{enable:!1}],[Xg,{enable:!1},["rotate"]],[Yg,{direction:Zi}],[Xt,{direction:Zi},["swipe"]],[Jl],[Jl,{event:"doubletap",taps:2},["tap"]],[vh]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},wh.prototype={set:function(C){return le(this.options,C),C.touchAction&&this.touchAction.update(),C.inputTarget&&(this.input.destroy(),this.input.target=C.inputTarget,this.input.init()),this},stop:function(C){this.session.stopped=C?2:1},recognize:function(C){var T=this.session;if(!T.stopped){this.touchAction.preventDefaults(C);var M,N=this.recognizers,q=T.curRecognizer;(!q||q&&8&q.state)&&(q=T.curRecognizer=null);for(var re=0;re<N.length;)M=N[re],2===T.stopped||q&&M!=q&&!M.canRecognizeWith(q)?M.reset():M.recognize(C),!q&&14&M.state&&(q=T.curRecognizer=M),re++}},get:function(C){if(C instanceof ls)return C;for(var T=this.recognizers,M=0;M<T.length;M++)if(T[M].options.event==C)return T[M];return null},add:function(C){if(z(C,"add",this))return this;var T=this.get(C.options.event);return T&&this.remove(T),this.recognizers.push(C),C.manager=this,this.touchAction.update(),C},remove:function(C){if(z(C,"remove",this))return this;if(C=this.get(C)){var T=this.recognizers,M=xe(T,C);-1!==M&&(T.splice(M,1),this.touchAction.update())}return this},on:function(C,T){if(C!==ge&&T!==ge){var M=this.handlers;return ze(Se(C),function(N){M[N]=M[N]||[],M[N].push(T)}),this}},off:function(C,T){if(C!==ge){var M=this.handlers;return ze(Se(C),function(N){T?M[N]&&M[N].splice(xe(M[N],T),1):delete M[N]}),this}},emit:function(C,T){this.options.domEvents&&function s1(C,T){var M=rn.createEvent("Event");M.initEvent(C,!0,!0),M.gesture=T,T.target.dispatchEvent(M)}(C,T);var M=this.handlers[C]&&this.handlers[C].slice();if(M&&M.length){T.type=C,T.preventDefault=function(){T.srcEvent.preventDefault()};for(var N=0;N<M.length;)M[N](T),N++}},destroy:function(){this.element&&Jg(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},le(us,{INPUT_START:oi,INPUT_MOVE:2,INPUT_END:dn,INPUT_CANCEL:ai,STATE_POSSIBLE:Kl,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:zl,DIRECTION_LEFT:Gl,DIRECTION_RIGHT:bc,DIRECTION_UP:Ec,DIRECTION_DOWN:wc,DIRECTION_HORIZONTAL:Zi,DIRECTION_VERTICAL:xo,DIRECTION_ALL:E0,Manager:wh,Input:Ci,TouchAction:Yl,TouchInput:me,MouseInput:ga,PointerEventInput:ma,TouchMouseInput:ph,SingleTouchInput:Xl,Recognizer:ls,AttrRecognizer:Vr,Tap:Jl,Pan:Xt,Swipe:Yg,Pinch:Xg,Rotate:bh,Press:vh,on:ki,off:Li,each:ze,merge:on,extend:Et,assign:le,inherit:wt,bindFn:kn,prefixed:Zt}),(typeof Nt<"u"?Nt:typeof self<"u"?self:{}).Hammer=us,(ln=function(){return us}.call(Kn,Qe,Kn,Ei))!==ge&&(Ei.exports=ln)}(window,document)},492:()=>{},435:()=>{}},Ei=>{Ei(Ei.s=595)}]);